(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:st=>{function Ee(B){return Promise.resolve().then(()=>{var u=new Error("Cannot find module '"+B+"'");throw u.code="MODULE_NOT_FOUND",u})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,st.exports=Ee},7716:(st,Ee,B)=>{"use strict";B.d(Ee,{deG:()=>Ih,tb:()=>$f,AFp:()=>GI,ip1:()=>jd,CZH:()=>il,hGG:()=>uc,z2F:()=>sl,sBO:()=>JT,Sil:()=>ql,_Vd:()=>Vr,EJc:()=>G1,SBq:()=>nl,qLn:()=>jh,vpe:()=>rl,gxx:()=>bd,tBr:()=>qa,XFs:()=>ot,OlP:()=>jn,zs3:()=>br,ZZ4:()=>xg,aQg:()=>Wr,soG:()=>rm,YKP:()=>eI,v3s:()=>fR,h0i:()=>Rd,PXZ:()=>oS,R0b:()=>io,FiY:()=>Wa,Lbi:()=>ZI,g9A:()=>WI,Qsj:()=>Qx,FYo:()=>Ag,JOm:()=>Qa,Tiy:()=>YT,q3G:()=>un,tp0:()=>Gr,EAV:()=>lc,Rgc:()=>rc,dDg:()=>z1,DyG:()=>zs,q4F:()=>Ng,GfV:()=>KT,s_b:()=>kd,ifc:()=>qe,eFA:()=>eC,G48:()=>K1,Gpc:()=>z,X6Q:()=>ov,_c5:()=>mm,VLi:()=>cm,c2e:()=>H1,zSh:()=>mn,wAp:()=>At,vHH:()=>Se,EiD:()=>_t,mCW:()=>Ya,qzn:()=>Iu,JVY:()=>h_,pB0:()=>od,eBb:()=>Vp,L6k:()=>Lp,LAX:()=>sa,cg1:()=>iw,Tjo:()=>Hf,kL8:()=>_T,yhl:()=>kh,dqk:()=>It,sIi:()=>lg,CqO:()=>ry,QGY:()=>Lb,F4k:()=>jD,RDi:()=>Ai,AaK:()=>ee,z3N:()=>ia,qOj:()=>bb,TTD:()=>zn,_Bn:()=>UT,xp6:()=>ku,uIk:()=>Db,Tol:()=>ly,DjV:()=>uT,ekj:()=>oy,Suo:()=>jy,Xpm:()=>Z,lG2:()=>ht,Yz7:()=>wt,cJS:()=>cn,oAB:()=>W,Yjl:()=>Ct,Y36:()=>pg,_UZ:()=>Pb,BQk:()=>Fb,ynx:()=>Ob,qZA:()=>kb,TgZ:()=>ny,EpF:()=>$D,n5z:()=>Ua,Ikx:()=>yy,SDv:()=>LT,QtT:()=>VT,pQV:()=>Dw,LFG:()=>Jn,$8M:()=>yu,NdJ:()=>Vb,CRH:()=>b1,oxw:()=>$b,ALo:()=>s1,lcZ:()=>o1,xi3:()=>Hg,Hsn:()=>WD,F$t:()=>qD,Q6J:()=>ty,s9C:()=>gg,MGl:()=>mg,VKq:()=>Xi,WLB:()=>Vy,kEZ:()=>es,iGM:()=>y1,MAs:()=>df,CHM:()=>Ma,LSH:()=>ud,kYT:()=>pe,Udp:()=>sy,YNc:()=>AD,W1O:()=>wi,_uU:()=>hy,Oqu:()=>fy,hij:()=>py,AsE:()=>vf,Gf:()=>v1});var u=B(9765),G=B(5319),O=B(7574),ie=B(6682),oe=B(8819);function te(s){for(let o in s)if(s[o]===te)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function J(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const U=te({__forward_ref__:te});function z(s){return s.__forward_ref__=z,s.toString=function(){return ee(this())},s}function H(s){return ae(s)?s():s}function ae(s){return"function"==typeof s&&s.hasOwnProperty(U)&&s.__forward_ref__===z}class Se extends Error{constructor(o,l){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,l)),this.code=o}}function ce(s){return"string"==typeof s?s:null==s?"":String(s)}function fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ce(s)}function nt(s,o){const l=o?` in ${o}`:"";throw new Se("201",`No provider for ${fe(s)} found${l}`)}function yt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}function wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function cn(s){return{providers:s.providers||[],imports:s.imports||[]}}function rn(s){return dn(s,hr)||dn(s,fr)}function dn(s,o){return s.hasOwnProperty(o)?s[o]:null}function si(s){return s&&(s.hasOwnProperty(Le)||s.hasOwnProperty(ir))?s[Le]:null}const hr=te({\u0275prov:te}),Le=te({\u0275inj:te}),fr=te({ngInjectableDef:te}),ir=te({ngInjectorDef:te});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let vn;function Gn(s){const o=vn;return vn=s,o}function oi(s,o,l){const c=rn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&ot.Optional?null:void 0!==o?o:void nt(ee(s),"Injector")}function pr(s){return{toString:s}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),qe=(()=>((qe=qe||{})[qe.Emulated=0]="Emulated",qe[qe.None=2]="None",qe[qe.ShadowDom=3]="ShadowDom",qe))();const gt="undefined"!=typeof globalThis&&globalThis,Gi="undefined"!=typeof window&&window,as="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It=gt||"undefined"!=typeof global&&global||Gi||as,sn={},bt=[],Gt=te({\u0275cmp:te}),Ge=te({\u0275dir:te}),Ne=te({\u0275pipe:te}),lt=te({\u0275mod:te}),Et=te({\u0275loc:te}),Rt=te({\u0275fac:te}),Jt=te({__NG_ELEMENT_ID__:te});let Q=0;function Z(s){return pr(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||qe.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,m=s.pipes;return c.id+=Q++,c.inputs=Ue(s.inputs,l),c.outputs=Ue(s.outputs),p&&p.forEach(v=>v(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(_e):null,c.pipeDefs=m?()=>("function"==typeof m?m():m).map($):null,c})}function _e(s){return Ze(s)||function(s){return s[Ge]||null}(s)}function $(s){return function(s){return s[Ne]||null}(s)}const j={};function W(s){return pr(()=>{const o={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(j[s.id]=s.type),o})}function pe(s,o){return pr(()=>{const l=Tn(s,!0);l.declarations=o.declarations||bt,l.imports=o.imports||bt,l.exports=o.exports||bt})}function Ue(s,o){if(null==s)return sn;const l={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),l[h]=c,o&&(o[h]=p)}return l}const ht=Z;function Ct(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ze(s){return s[Gt]||null}function Tn(s,o){const l=s[lt]||null;if(!l&&!0===o)throw new Error(`Type ${ee(s)} does not have '\u0275mod' property.`);return l}function Mn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Wi(s){return Array.isArray(s)&&!0===s[1]}function Tc(s){return 0!=(8&s.flags)}function cl(s){return 2==(2&s.flags)}function _i(s){return 1==(1&s.flags)}function us(s){return null!==s.template}function cs(s){return 0!=(512&s[2])}function Hs(s,o){return s.hasOwnProperty(Rt)?s[Rt]:null}class fl{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function zn(){return iu}function iu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Rr),Sa}function Sa(){const s=Aa(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===sn)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Rr(s,o,l,c){const h=Aa(s)||function(s,o){return s[ph]=o}(s,{previous:sn,current:null}),p=h.current||(h.current={}),m=h.previous,v=this.declaredInputs[l],C=m[v];p[v]=new fl(C&&C.currentValue,o,m===sn),s[c]=o}zn.ngInherit=!0;const ph="__ngSimpleChanges__";function Aa(s){return s[ph]||null}let Na;function Ai(s){Na=s}function su(){return void 0!==Na?Na:"undefined"!=typeof document?document:void 0}function Rn(s){return!!s.listen}const Ss={createRenderer:(s,o)=>su()};function In(s){for(;Array.isArray(s);)s=s[0];return s}function ou(s,o){return In(o[s])}function Sn(s,o){return In(o[s.index])}function As(s,o){return s.data[o]}function xa(s,o){return s[o]}function kr(s,o){const l=o[s];return Mn(l)?l:l[0]}function yh(s){return 4==(4&s[2])}function gl(s){return 128==(128&s[2])}function mr(s,o){return null==o?null:s[o]}function ml(s){s[18]=0}function au(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const St={lFrame:$c(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Oc(){return St.bindingsEnabled}function Me(){return St.lFrame.lView}function Yt(){return St.lFrame.tView}function Ma(s){return St.lFrame.contextLView=s,s[8]}function Un(){let s=yl();for(;null!==s&&64===s.type;)s=s.parent;return s}function yl(){return St.lFrame.currentTNode}function Gs(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ui(s,o){const l=St.lFrame;l.currentTNode=s,l.isParent=o}function Ra(){return St.lFrame.isParent}function vl(){St.lFrame.isParent=!1}function bo(){return St.isInCheckNoChangesMode}function cu(s){St.isInCheckNoChangesMode=s}function sr(){const s=St.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ni(){return St.lFrame.bindingIndex}function xi(){return St.lFrame.bindingIndex++}function Mi(s){const o=St.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Vc(s){St.lFrame.inI18n=s}function ka(s,o){const l=St.lFrame;l.bindingIndex=l.bindingRootIndex=s,Yo(o)}function Yo(s){St.lFrame.currentDirectiveIndex=s}function du(){return St.lFrame.currentQueryIndex}function wo(s){St.lFrame.currentQueryIndex=s}function wl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Uc(s,o,l){if(l&ot.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||l&ot.Host||(h=wl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=St.lFrame=bh();return c.currentTNode=o,c.lView=s,!0}function Pa(s){const o=bh(),l=s[1];St.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function bh(){const s=St.lFrame,o=null===s?null:s.child;return null===o?$c(s):o}function $c(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function jc(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Hc=jc;function Ko(){const s=jc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Hr(){return St.lFrame.selectedIndex}function Oa(s){St.lFrame.selectedIndex=s}function $n(){const s=St.lFrame;return As(s.tView,s.selectedIndex)}function fu(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:N}=p;m&&(s.contentHooks||(s.contentHooks=[])).push(-l,m),v&&((s.contentHooks||(s.contentHooks=[])).push(l,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),T&&((s.viewHooks||(s.viewHooks=[])).push(l,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,T)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(l,N)}}function qs(s,o,l){wh(s,o,3,l)}function _r(s,o,l,c){(3&s[2])===l&&wh(s,o,l,c)}function Fa(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function wh(s,o,l,c){const p=null!=c?c:-1,m=o.length-1;let v=0;for(let C=void 0!==c?65535&s[18]:0;C<m;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(Cp(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Cp(s,o,l,c){const h=l[c]<0,p=l[c+1],v=s[h?-l[c]:l[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Co{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Ch(s,o,l){const c=Rn(s);let h=0;for(;h<l.length;){const p=l[h];if("number"==typeof p){if(0!==p)break;h++;const m=l[h++],v=l[h++],C=l[h++];c?s.setAttribute(o,v,C,m):o.setAttributeNS(m,v,C)}else{const m=p,v=l[++h];Ns(m)?c&&s.setProperty(o,m,v):c?s.setAttribute(o,m,v):o.setAttribute(m,v),h++}}return h}function Dp(s){return 3===s||4===s||6===s}function Ns(s){return 64===s.charCodeAt(0)}function Zc(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?l=h:0===l||Tp(s,l,h,null,-1===l||2===l?o[++c]:null)}}return s}function Tp(s,o,l,c,h){let p=0,m=s.length;if(-1===o)m=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){m=-1;break}if(v>o){m=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===l){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==m&&(s.splice(m,0,o),p=m+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function El(s){return-1!==s}function Va(s){return 32767&s}function zi(s,o){let l=function(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let Ba=!0;function gu(s){const o=Ba;return Ba=s,o}let mu=0;function Qo(s,o){const l=Xt(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Dl(c.data,s),Dl(o,null),Dl(c.blueprint,null));const h=ct(s,o),p=s.injectorIndex;if(El(h)){const m=Va(h),v=zi(h,o),C=v[1].data;for(let T=0;T<8;T++)o[p+T]=v[m+T]|C[m+T]}return o[p+8]=h,p}function Dl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Xt(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ct(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,h=o;for(;null!==h;){const p=h[1],m=p.type;if(c=2===m?p.declTNode:1===m?h[6]:null,null===c)return-1;if(l++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function En(s,o,l){!function(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(Jt)&&(c=l[Jt]),null==c&&(c=l[Jt]=mu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function yr(s,o,l){if(l&ot.Optional)return s;nt(o,"NodeInjector")}function Jo(s,o,l,c){if(l&ot.Optional&&void 0===c&&(c=null),0==(l&(ot.Self|ot.Host))){const h=s[9],p=Gn(void 0);try{return h?h.get(o,c,l&ot.Optional):oi(o,c,l&ot.Optional)}finally{Gn(p)}}return yr(c,o,l)}function xs(s,o,l,c=ot.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Jt)?s[Jt]:void 0;return"number"==typeof o?o>=0?255&o:Th:o}(l);if("function"==typeof p){if(!Uc(o,s,c))return c&ot.Host?yr(h,l,c):Jo(o,l,c,h);try{const m=p(c);if(null!=m||c&ot.Optional)return m;nt(l)}finally{Hc()}}else if("number"==typeof p){let m=null,v=Xt(s,o),C=-1,T=c&ot.Host?o[16][6]:null;for((-1===v||c&ot.SkipSelf)&&(C=-1===v?ct(s,o):o[v+8],-1!==C&&Xo(c,!1)?(m=o[1],v=Va(C),o=zi(C,o)):v=-1);-1!==v;){const N=o[1];if(_u(p,v,N.data)){const P=Sp(v,o,l,m,c,T);if(P!==or)return P}C=o[v+8],-1!==C&&Xo(c,o[1].data[v+8]===T)&&_u(p,v,o)?(m=N,v=Va(C),o=zi(C,o)):v=-1}}}return Jo(o,l,c,h)}const or={};function Th(){return new To(Un(),Me())}function Sp(s,o,l,c,h,p){const m=o[1],v=m.data[s+8],N=Do(v,m,l,null==c?cl(v)&&Ba:c!=m&&0!=(3&v.type),h&ot.Host&&p===v);return null!==N?Yn(o,m,N,v):or}function Do(s,o,l,c,h){const p=s.providerIndexes,m=o.data,v=1048575&p,C=s.directiveStart,N=p>>20,L=h?v+N:s.directiveEnd;for(let K=c?v:v+N;K<L;K++){const X=m[K];if(K<C&&l===X||K>=C&&X.type===l)return K}if(h){const K=m[C];if(K&&us(K)&&K.type===l)return C}return null}function Yn(s,o,l,c){let h=s[l];const p=o.data;if(function(s){return s instanceof Co}(h)){const m=h;m.resolving&&function(s,o){throw new Se("200",`Circular dependency in DI detected for ${s}`)}(fe(p[l]));const v=gu(m.canSeeViewProviders);m.resolving=!0;const C=m.injectImpl?Gn(m.injectImpl):null;Uc(s,c,ot.Default);try{h=s[l]=m.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function(s,o,l){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const m=iu(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==C&&Gn(C),gu(v),m.resolving=!1,Hc()}}return h}function _u(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Xo(s,o){return!(s&ot.Self||s&ot.Host&&o)}class To{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return xs(this._tNode,this._lView,o,c,l)}}function Ua(s){return pr(()=>{const o=s.prototype.constructor,l=o[Rt]||zc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Rt]||zc(h);if(p&&p!==l)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function zc(s){return ae(s)?()=>{const o=zc(H(s));return o&&o()}:Hs(s)}function yu(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let h=0;for(;h<c;){const p=l[h];if(Dp(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof l[h];)h++;else{if(p===o)return l[h+1];h+=2}}}return null}(Un(),s)}const hs="__parameters__";function Ri(s,o,l){return pr(()=>{const c=function(s){return function(...l){if(s){const c=s(...l);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const m=new h(...p);return v.annotation=m,v;function v(C,T,N){const P=C.hasOwnProperty(hs)?C[hs]:Object.defineProperty(C,hs,{value:[]})[hs];for(;P.length<=N;)P.push(null);return(P[N]=P[N]||[]).push(m),C}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class jn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=wt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ih=new jn("AnalyzeForEntryComponents"),zs=Function;function vi(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),vi(c,o)):o!==s&&o.push(c)}return o}function Rs(s,o){s.forEach(l=>Array.isArray(l)?Rs(l,o):o(l))}function ks(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function No(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function xo(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function vr(s,o,l){let c=Ha(s,o);return c>=0?s[1|c]=l:(c=~c,function(s,o,l,c){let h=s.length;if(h==o)s.push(l,c);else if(1===h)s.push(c,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function lr(s,o){const l=Ha(s,o);if(l>=0)return s[1|l]}function Ha(s,o){return function(s,o,l){let c=0,h=s.length>>l;for(;h!==c;){const p=c+(h-c>>1),m=s[p<<l];if(o===m)return p<<l;m>o?h=p:c=p+1}return~(h<<l)}(s,o,1)}const tn={},Pt="__NG_DI_FLAG__",Ir="ngTempTokenPath",Il=/\n/gm,Ks="__source",Ps=te({provide:String,useValue:te});let ta;function Lt(s){const o=ta;return ta=s,o}function Rp(s,o=ot.Default){if(void 0===ta)throw new Error("inject() must be called from an injection context");return null===ta?oi(s,void 0,o):ta.get(s,o&ot.Optional?null:void 0,o)}function Jn(s,o=ot.Default){return(vn||Rp)(H(s),o)}function Sl(s){const o=[];for(let l=0;l<s.length;l++){const c=H(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,p=ot.Default;for(let m=0;m<c.length;m++){const v=c[m],C=kp(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(Jn(h,p))}else o.push(Jn(c))}return o}function Al(s,o){return s[Pt]=o,s.prototype[Pt]=o,s}function kp(s){return s[Pt]}function fs(s,o,l,c){const h=s[Ir];throw o[Ks]&&h.unshift(o[Ks]),s.message=function(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ee(o);if(Array.isArray(o))h=o.map(ee).join(" -> ");else if("object"==typeof o){let p=[];for(let m in o)if(o.hasOwnProperty(m)){let v=o[m];p.push(m+":"+("string"==typeof v?JSON.stringify(v):ee(v)))}h=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${h}]: ${s.replace(Il,"\n  ")}`}("\n"+s.message,h,l,c),s.ngTokenPath=h,s[Ir]=null,s}const qa=Al(Ri("Inject",s=>({token:s})),-1),Wa=Al(Ri("Optional"),8),Gr=Al(Ri("SkipSelf"),4);let Eu;function ra(s){var o;return(null===(o=function(){if(void 0===Eu&&(Eu=null,It.trustedTypes))try{Eu=It.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Eu}())||void 0===o?void 0:o.createHTML(s))||s}class xl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class h0 extends xl{getTypeName(){return"HTML"}}class f0 extends xl{getTypeName(){return"Style"}}class Rh extends xl{getTypeName(){return"Script"}}class p0 extends xl{getTypeName(){return"URL"}}class g0 extends xl{getTypeName(){return"ResourceURL"}}function ia(s){return s instanceof xl?s.changingThisBreaksApplicationSecurity:s}function Iu(s,o){const l=kh(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function kh(s){return s instanceof xl&&s.getTypeName()||null}function h_(s){return new h0(s)}function Lp(s){return new f0(s)}function Vp(s){return new Rh(s)}function sa(s){return new p0(s)}function od(s){return new g0(s)}function Ph(s){const o=new m0(s);return function(){try{return!!(new window.DOMParser).parseFromString(ra(""),"text/html")}catch(s){return!1}}()?new f_(o):o}class f_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(ra(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class m0{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=ra(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=ra(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const m=l.item(h).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&o.removeAttribute(m)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const p_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Oh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ya(s){return(s=String(s)).match(p_)||s.match(Oh)?s:"unsafe:"+s}function Fh(s){return(s=String(s)).split(",").map(o=>Ya(o.trim())).join(", ")}function Os(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function Ml(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const Au=Os("area,br,col,hr,img,wbr"),m_=Os("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Nu=Os("rp,rt"),Bp=Ml(Au,Ml(m_,Os("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ml(Nu,Os("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ml(Nu,m_)),ad=Os("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),b=Os("srcset"),E=Ml(ad,b,Os("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Os("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),x=Os("script,style,template");class R{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!Bp.hasOwnProperty(l))return this.sanitizedSomething=!0,!x.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),m=p.name,v=m.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;ad[v]&&(C=Ya(C)),b[v]&&(C=Fh(C)),this.buf.push(" ",m,'="',et(C),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();Bp.hasOwnProperty(l)&&!Au.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(et(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const re=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,we=/([^\#-~ |!])/g;function et(s){return s.replace(/&/g,"&amp;").replace(re,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(we,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Be;function _t(s,o){let l=null;try{Be=Be||Ph(s);let c=o?String(o):"";l=Be.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=l.innerHTML,l=Be.getInertBodyElement(c)}while(c!==p);return ra((new R).sanitizeChildren(yn(l)||l))}finally{if(l){const c=yn(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function yn(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var un=(()=>((un=un||{})[un.NONE=0]="NONE",un[un.HTML=1]="HTML",un[un.STYLE=2]="STYLE",un[un.SCRIPT=3]="SCRIPT",un[un.URL=4]="URL",un[un.RESOURCE_URL=5]="RESOURCE_URL",un))();function ud(s){const o=function(){const s=Me();return s&&s[12]}();return o?o.sanitize(un.URL,s)||"":Iu(s,"URL")?ia(s):Ya(ce(s))}const Bh="__ngContext__";function Pi(s,o){s[Bh]=o}function y0(s){const o=function(s){return s[Bh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function cd(s){return s.ngOriginalError}function GA(s,...o){s.error(...o)}class jh{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=this._findContext(o),h=(s=o)&&s.ngErrorLogger||GA;var s;h(this._console,"ERROR",o),l&&h(this._console,"ORIGINAL ERROR",l),c&&h(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(cd(o)):null}_findOriginalError(o){let l=o&&cd(o);for(;l&&cd(l);)l=cd(l);return l||null}}const ZA=/^>|^->|<!--|-->|--!>|<!-$/g,E0=/(<|>)/;const bE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It))();function Ka(s){return s instanceof Function?s():s}var Qa=(()=>((Qa=Qa||{})[Qa.Important=1]="Important",Qa[Qa.DashCase=2]="DashCase",Qa))();let D0;function C_(s,o){return D0(s,o)}function Zp(s){const o=s[3];return Wi(o)?o[3]:o}function E_(s){return T0(s[13])}function TE(s){return T0(s[4])}function T0(s){for(;null!==s&&!Wi(s);)s=s[4];return s}function dd(s,o,l,c,h){if(null!=c){let p,m=!1;Wi(c)?p=c:Mn(c)&&(m=!0,c=c[0]);const v=In(c);0===s&&null!==l?null==h?xE(o,l,v):Mu(o,l,v,h||null,!0):1===s&&null!==l?Mu(o,l,v,h||null,!0):2===s?M0(o,v,m):3===s&&o.destroyNode(v),null!=p&&function(s,o,l,c,h){const p=l[7];p!==In(l)&&dd(o,s,c,p,h);for(let v=10;v<l.length;v++){const C=l[v];fd(C[1],C,s,o,c,p)}}(o,s,p,l,h)}}function D_(s,o){return Rn(s)?s.createText(o):s.createTextNode(o)}function IE(s,o,l){Rn(s)?s.setValue(o,l):o.textContent=l}function eN(s,o){return s.createComment(function(s){return s.replace(ZA,o=>o.replace(E0,"\u200b$1\u200b"))}(o))}function I0(s,o,l){return Rn(s)?s.createElement(o,l):null===l?s.createElement(o):s.createElementNS(l,o)}function T_(s,o){const l=s[9],c=l.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,au(h,-1)),l.splice(c,1)}function I_(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const h=c[17];null!==h&&h!==s&&T_(h,c),o>0&&(s[l-1][4]=c[4]);const p=No(s,10+o);!function(s,o){fd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const m=p[19];null!==m&&m.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function SE(s,o){if(!(256&o[2])){const l=o[11];Rn(l)&&l.destroyNode&&fd(s,o,l,3,null,null),function(s){let o=s[13];if(!o)return xu(s[1],s);for(;o;){let l=null;if(Mn(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Mn(o)&&xu(o[1],o),o=o[3];null===o&&(o=s),Mn(o)&&xu(o[1],o),l=o&&o[4]}o=l}}(o)}}function xu(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const h=o[l[c]];if(!(h instanceof Co)){const p=l[c+1];if(Array.isArray(p))for(let m=0;m<p.length;m+=2){const v=h[p[m]],C=p[m+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const l=s.cleanup,c=o[7];let h=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const m=l[p+1],v="function"==typeof m?m(o):In(o[m]),C=c[h=l[p+2]],T=l[p+3];"boolean"==typeof T?v.removeEventListener(l[p],C,T):T>=0?c[h=T]():c[h=-T].unsubscribe(),p+=2}else{const m=c[h=l[p+1]];l[p].call(m)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Rn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&Wi(o[3])){l!==o[3]&&T_(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function AE(s,o,l){return NE(s,o.parent,l)}function NE(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===qe.None||h===qe.Emulated)return null}return Sn(c,l)}function Mu(s,o,l,c,h){Rn(s)?s.insertBefore(o,l,c,h):o.insertBefore(l,c,h)}function xE(s,o,l){Rn(s)?s.appendChild(o,l):o.appendChild(l)}function ME(s,o,l,c,h){null!==c?Mu(s,o,l,c,h):xE(s,o,l)}function S_(s,o){return Rn(s)?s.parentNode(o):o.parentNode}function N_(s,o,l){return hd(s,o,l)}function x_(s,o,l){return 40&s.type?Sn(s,l):null}let A0,hd=x_;function RE(s,o){hd=s,A0=o}function zp(s,o,l,c){const h=AE(s,c,o),p=o[11],v=N_(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(l))for(let C=0;C<l.length;C++)ME(p,h,l[C],v,!1);else ME(p,h,l,v,!1);void 0!==A0&&A0(p,c,o,l,h)}function M_(s,o){if(null!==o){const l=o.type;if(3&l)return Sn(o,s);if(4&l)return x0(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return M_(s,c);{const h=s[o.index];return Wi(h)?x0(-1,h):In(h)}}if(32&l)return C_(o,s)()||In(s[o.index]);{const c=N0(s,o);return null!==c?Array.isArray(c)?c[0]:M_(Zp(s[16]),c):M_(s,o.next)}}return null}function N0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function x0(s,o){const l=10+s+1;if(l<o.length){const c=o[l],h=c[1].firstChild;if(null!==h)return M_(c,h)}return o[7]}function M0(s,o,l){const c=S_(s,o);c&&function(s,o,l,c){Rn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}function R_(s,o,l,c,h,p,m){for(;null!=l;){const v=c[l.index],C=l.type;if(m&&0===o&&(v&&Pi(In(v),c),l.flags|=4),64!=(64&l.flags))if(8&C)R_(s,o,l.child,c,h,p,!1),dd(o,s,h,v,p);else if(32&C){const T=C_(l,c);let N;for(;N=T();)dd(o,s,h,N,p);dd(o,s,h,v,p)}else 16&C?Ru(s,o,c,l,h,p):dd(o,s,h,v,p);l=m?l.projectionNext:l.next}}function fd(s,o,l,c,h,p){R_(l,c,s.firstChild,o,h,p,!1)}function Ru(s,o,l,c,h,p){const m=l[16],C=m[6].projection[c.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)dd(o,s,h,C[T],p);else R_(s,o,C,m[3],h,p,!0)}function PE(s,o,l){Rn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function R0(s,o,l){Rn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function k0(s,o,l){let c=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}l=h+1}}const OE="ng-template";function uN(s,o,l){let c=0;for(;c<s.length;){let h=s[c++];if(l&&"class"===h){if(h=s[c],-1!==k0(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function P0(s){return 4===s.type&&s.value!==OE}function cN(s,o,l){return o===(4!==s.type||l?s.value:OE)}function dN(s,o,l){let c=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(Dp(s[o]))return o;return s.length}(h);let m=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!m)if(4&c){if(c=2|1&c,""!==C&&!cN(s,C,l)||""===C&&1===o.length){if(la(c))return!1;m=!0}}else{const T=8&c?C:o[++v];if(8&c&&null!==s.attrs){if(!uN(s.attrs,T,l)){if(la(c))return!1;m=!0}continue}const P=O0(8&c?"class":C,h,P0(s),l);if(-1===P){if(la(c))return!1;m=!0;continue}if(""!==T){let L;L=P>p?"":h[P+1].toLowerCase();const K=8&c?L:null;if(K&&-1!==k0(K,T,0)||2&c&&T!==L){if(la(c))return!1;m=!0}}}}else{if(!m&&!la(c)&&!la(C))return!1;if(m&&la(C))continue;m=!1,c=C|1&c}}return la(c)||m}function la(s){return 0==(1&s)}function O0(s,o,l,c){if(null===o)return-1;let h=0;if(c||!l){let p=!1;for(;h<o.length;){const m=o[h];if(m===s)return h;if(3===m||6===m)p=!0;else{if(1===m||2===m){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===m)break;if(0===m){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function FE(s,o,l=!1){for(let c=0;c<o.length;c++)if(dN(s,o[c],l))return!0;return!1}function FO(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function VE(s,o){return s?":not("+o.trim()+")":o}function pN(s){let o=s[0],l=1,c=2,h="",p=!1;for(;l<s.length;){let m=s[l];if("string"==typeof m)if(2&c){const v=s[++l];h+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+m:4&c&&(h+=" "+m);else""!==h&&!la(m)&&(o+=VE(p,h),h=""),c=m,p=p||!la(c);l++}return""!==h&&(o+=VE(p,h)),o}const $t={};function ku(s){P_(Yt(),Me(),Hr()+s,bo())}function P_(s,o,l,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&qs(o,p,l)}else{const p=s.preOrderHooks;null!==p&&_r(o,p,0,l)}Oa(l)}function O_(s,o){return s<<17|o<<2}function ua(s){return s>>17&32767}function pd(s){return 2|s}function Pl(s){return(131068&s)>>2}function F0(s,o){return-131069&s|o<<2}function L0(s){return 1|s}function j0(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const h=l[c],p=l[c+1];if(-1!==p){const m=s.data[p];wo(h),m.contentQueries(2,o[p],p)}}}function Qp(s,o,l,c,h,p,m,v,C,T){const N=o.blueprint.slice();return N[0]=h,N[2]=140|c,ml(N),N[3]=N[15]=s,N[8]=l,N[10]=m||s&&s[10],N[11]=v||s&&s[11],N[12]=C||s&&s[12]||null,N[9]=T||s&&s[9]||null,N[6]=p,N[16]=2==o.type?s[16]:N,N}function zh(s,o,l,c,h){let p=s.data[o];if(null===p)p=H0(s,o,l,c,h),St.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=c,p.attrs=h;const m=Gs();p.injectorIndex=null===m?-1:m.injectorIndex}return ui(p,!0),p}function H0(s,o,l,c,h){const p=yl(),m=Ra(),C=s.data[o]=function(s,o,l,c,h,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?p:p&&p.parent,l,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(m?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function Yh(s,o,l,c){if(0===l)return-1;const h=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Kh(s,o,l){Pa(o);try{const c=s.viewQuery;null!==c&&sb(1,c,l);const h=s.template;null!==h&&yd(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&j0(s,o),s.staticViewQueries&&sb(2,s.viewQuery,l);const p=s.components;null!==p&&function(s,o){for(let l=0;l<o.length;l++)xN(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ko()}}function Pu(s,o,l,c){const h=o[2];if(256==(256&h))return;Pa(o);const p=bo();try{ml(o),function(s){St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&yd(s,o,l,2,c);const m=3==(3&h);if(!p)if(m){const T=s.preOrderCheckHooks;null!==T&&qs(o,T,null)}else{const T=s.preOrderHooks;null!==T&&_r(o,T,0,null),Fa(o,0)}if(function(s){for(let o=E_(s);null!==o;o=TE(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const h=l[c],p=h[3];0==(1024&h[2])&&au(p,1),h[2]|=1024}}}(o),function(s){for(let o=E_(s);null!==o;o=TE(o))for(let l=10;l<o.length;l++){const c=o[l],h=c[1];gl(c)&&Pu(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&j0(s,o),!p)if(m){const T=s.contentCheckHooks;null!==T&&qs(o,T)}else{const T=s.contentHooks;null!==T&&_r(o,T,1),Fa(o,1)}!function(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const h=l[c];if(h<0)Oa(~h);else{const p=h,m=l[++c],v=l[++c];ka(m,p),v(2,o[p])}}}finally{Oa(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let l=0;l<o.length;l++)eb(s,o[l])}(o,v);const C=s.viewQuery;if(null!==C&&sb(2,C,c),!p)if(m){const T=s.viewCheckHooks;null!==T&&qs(o,T)}else{const T=s.viewHooks;null!==T&&_r(o,T,2),Fa(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,au(o[3],-1))}finally{Ko()}}function V_(s,o,l,c){const h=o[10],p=!bo(),m=yh(o);try{p&&!m&&h.begin&&h.begin(),m&&Kh(s,o,c),Pu(s,o,l,c)}finally{p&&!m&&h.end&&h.end()}}function yd(s,o,l,c,h){const p=Hr(),m=2&c;try{Oa(-1),m&&o.length>20&&P_(s,o,20,bo()),l(c,h)}finally{Oa(p)}}function ZE(s,o,l){if(Tc(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const m=s.data[p];m.contentQueries&&m.contentQueries(1,l[p],p)}}}function vd(s,o,l){!Oc()||(function(s,o,l,c){const h=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||Qo(l,o),Pi(c,o);const m=l.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],T=us(C);T&&AN(o,l,C);const N=Yn(o,s,v,l);Pi(N,o),null!==m&&oD(0,v-h,N,C,0,m),T&&(kr(l.index,o)[8]=N)}}(s,o,l,Sn(l,o)),128==(128&l.flags)&&function(s,o,l){const c=l.directiveStart,h=l.directiveEnd,m=l.index,v=St.lFrame.currentDirectiveIndex;try{Oa(m);for(let C=c;C<h;C++){const T=s.data[C],N=o[C];Yo(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&tD(T,N)}}finally{Oa(-1),Yo(v)}}(s,o,l))}function G0(s,o,l=Sn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const m=c[p+1],v=-1===m?l(o,s):s[m];s[h++]=v}}}function zE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ou(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ou(s,o,l,c,h,p,m,v,C,T){const N=20+c,P=N+h,L=function(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:$t);return l}(N,P),K="function"==typeof T?T():T;return L[1]={type:s,blueprint:L,template:l,queries:null,viewQuery:v,declTNode:o,data:L.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function Z0(s,o,l,c){const h=ob(o);null===l?h.push(c):(h.push(l),s.firstCreatePass&&ab(s).push(c,h.length-1))}function z0(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,h):l[c]=[o,h]}return l}function Fs(s,o,l,c,h,p,m,v){const C=Sn(o,l);let N,T=o.inputs;!v&&null!=T&&(N=T[c])?(dD(s,l,N,c,h),cl(o)&&function(s,o){const l=kr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=m?m(h,o.value||"",c):h,Rn(p)?p.setProperty(C,c,h):Ns(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function Jp(s,o,l,c){let h=!1;if(Oc()){const p=function(s,o,l){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const m=c[p];FE(l,m.selectors,!1)&&(h||(h=[]),En(Qo(l,o),s,m.type),us(m)?(J0(s,l),h.unshift(m)):h.push(m))}return h}(s,o,l),m=null===c?null:{"":-1};if(null!==p){h=!0,iD(l,s.data.length,p.length);for(let N=0;N<p.length;N++){const P=p[N];P.providersResolver&&P.providersResolver(P)}let v=!1,C=!1,T=Yh(s,o,p.length,null);for(let N=0;N<p.length;N++){const P=p[N];l.mergedAttrs=Zc(l.mergedAttrs,P.hostAttrs),sD(s,l,o,T,P),rD(T,P,m),null!==P.contentQueries&&(l.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(l.flags|=128);const L=P.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),v=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),T++}!function(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,m=[];let v=null,C=null;for(let T=o.directiveStart;T<c;T++){const N=h[T],P=N.inputs,L=null===p||P0(o)?null:aD(P,p);m.push(L),v=z0(P,T,v),C=z0(N.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=m,o.inputs=v,o.outputs=C}(s,l)}m&&function(s,o,l){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=l[o[h+1]];if(null==p)throw new Se("301",`Export of name '${o[h+1]}' not found!`);c.push(o[h],p)}}}(l,c,m)}return l.mergedAttrs=Zc(l.mergedAttrs,l.attrs),h}function XE(s,o,l,c,h,p){const m=p.hostBindings;if(m){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(v)!=C&&v.push(C),v.push(c,h,m)}}function tD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function J0(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function rD(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;us(o)&&(l[""]=s)}}function iD(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function sD(s,o,l,c,h){s.data[c]=h;const p=h.factory||(h.factory=Hs(h.type)),m=new Co(p,us(h),null);s.blueprint[c]=m,l[c]=m,XE(s,o,0,c,Yh(s,l,h.hostVars,$t),h)}function AN(s,o,l){const c=Sn(o,s),h=zE(l),p=s[10],m=Fu(s,Qp(s,h,null,l.onPush?64:16,c,o,p,p.createRenderer(c,l),null,null));s[o.index]=m}function X0(s,o,l,c,h,p,m){if(null==p)Rn(s)?s.removeAttribute(o,h,l):o.removeAttribute(h);else{const v=null==m?ce(p):m(p,c||"",h);Rn(s)?s.setAttribute(o,h,v,l):l?o.setAttributeNS(l,h,v):o.setAttribute(h,v)}}function oD(s,o,l,c,h,p){const m=p[o];if(null!==m){const v=c.setInput;for(let C=0;C<m.length;){const T=m[C++],N=m[C++],P=m[C++];null!==v?c.setInput(l,P,T,N):l[N]=P}}}function aD(s,o){let l=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return l}function lD(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function eb(s,o){const l=kr(o,s);if(gl(l)){const c=l[1];80&l[2]?Pu(c,l,c.template,l[8]):l[5]>0&&tb(l)}}function tb(s){for(let c=E_(s);null!==c;c=TE(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const m=p[1];Pu(m,p,m.template,p[8])}else p[5]>0&&tb(p)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const h=kr(l[c],s);gl(h)&&h[5]>0&&tb(h)}}function xN(s,o){const l=kr(o,s),c=l[1];(function(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Kh(c,l,l[8])}function Fu(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function eg(s){for(;s;){s[2]|=64;const o=Zp(s);if(cs(s)&&!o)return s;s=o}return null}function rb(s,o,l){const c=o[10];c.begin&&c.begin();try{Pu(s,o,s.template,l)}catch(h){throw ub(o,h),h}finally{c.end&&c.end()}}function uD(s){!function(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=y0(l),h=c[1];V_(h,c,h.template,l)}}(s[8])}function sb(s,o,l){wo(0),o(s,l)}const kN=(()=>Promise.resolve(null))();function ob(s){return s[7]||(s[7]=[])}function ab(s){return s.cleanup||(s.cleanup=[])}function ub(s,o){const l=s[9],c=l?l.get(jh,null):null;c&&c.handleError(o)}function dD(s,o,l,c,h){for(let p=0;p<l.length;){const m=l[p++],v=l[p++],C=o[m],T=s.data[m];null!==T.setInput?T.setInput(C,h,c,v):C[v]=h}}function Xa(s,o,l){const c=ou(o,s);IE(s[11],c,l)}function tg(s,o,l){let c=l?s.styles:null,h=l?s.classes:null,p=0;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?p=v:1==p?h=J(h,v):2==p&&(c=J(c,v+": "+o[++m]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=h:s.classesWithoutHost=h}const bd=new jn("INJECTOR",-1);class Pn{get(o,l=tn){if(l===tn){const c=new Error(`NullInjectorError: No provider for ${ee(o)}!`);throw c.name="NullInjectorError",c}return l}}const mn=new jn("Set Injector scope."),Wt={},Lu={};let Hn;function $_(){return void 0===Hn&&(Hn=new Pn),Hn}function Jh(s,o=null,l=null,c){return new fD(s,l,o||$_(),c)}class fD{constructor(o,l,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];l&&Rs(l,v=>this.processProvider(v,o,l)),Rs([o],v=>this.processInjectorType(v,[],p)),this.records.set(bd,Vu(void 0,this));const m=this.records.get(mn);this.scope=null!=m?m.value:null,this.source=h||("object"==typeof o?null:ee(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=tn,c=ot.Default){this.assertNotDestroyed();const h=Lt(this),p=Gn(void 0);try{if(!(c&ot.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof jn)&&rn(o);v=C&&this.injectableDefInScope(C)?Vu(rr(o),Wt):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(c&ot.Self?$_():this.parent).get(o,l=c&ot.Optional&&l===tn?null:l)}catch(m){if("NullInjectorError"===m.name){if((m[Ir]=m[Ir]||[]).unshift(ee(o)),h)throw m;return fs(m,o,"R3InjectorError",this.source)}throw m}finally{Gn(p),Lt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(ee(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,l,c){if(!(o=H(o)))return!1;let h=si(o);const p=null==h&&o.ngModule||void 0,m=void 0===p?o:p,v=-1!==c.indexOf(m);if(void 0!==p&&(h=si(p)),null==h)return!1;if(null!=h.imports&&!v){let N;c.push(m);try{Rs(h.imports,P=>{this.processInjectorType(P,l,c)&&(void 0===N&&(N=[]),N.push(P))})}finally{}if(void 0!==N)for(let P=0;P<N.length;P++){const{ngModule:L,providers:K}=N[P];Rs(K,X=>this.processProvider(X,L,K||bt))}}this.injectorDefTypes.add(m);const C=Hs(m)||(()=>new m);this.records.set(m,Vu(C,Wt));const T=h.providers;if(null!=T&&!v){const N=o;Rs(T,P=>this.processProvider(P,N,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,l,c){let h=Xh(o=H(o))?o:H(o&&o.provide);const p=Js(s=o)?Vu(void 0,s.useValue):Vu(pD(s),Wt);var s;if(Xh(o)||!0!==o.multi)this.records.get(h);else{let m=this.records.get(h);m||(m=Vu(void 0,Wt,!0),m.factory=()=>Sl(m.multi),this.records.set(h,m)),h=o,m.multi.push(o)}this.records.set(h,p)}hydrate(o,l){return l.value===Wt&&(l.value=Lu,l.value=l.factory()),"object"==typeof l.value&&l.value&&null!==(s=l.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(l.value),l.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const l=H(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function rr(s){const o=rn(s),l=null!==o?o.factory:Hs(s);if(null!==l)return l;if(s instanceof jn)throw new Error(`Token ${ee(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=xo(o,"?");throw new Error(`Can't resolve all parameters for ${ee(s)}: (${c.join(", ")}).`)}const l=function(s){const o=s&&(s[hr]||s[fr]);if(o){const l=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Error("unreachable")}function pD(s,o,l){let c;if(Xh(s)){const h=H(s);return Hs(h)||rr(h)}if(Js(s))c=()=>H(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Sl(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>Jn(H(s.useExisting));else{const h=H(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return Hs(h)||rr(h);c=()=>new h(...Sl(s.deps))}return c}function Vu(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Js(s){return null!==s&&"object"==typeof s&&Ps in s}function Xh(s){return"function"==typeof s}const db=function(s,o,l){return function(s,o=null,l=null,c){const h=Jh(s,o,l,c);return h._resolveInjectorDefTypes(),h}({name:l},o,s,l)};let br=(()=>{class s{static create(l,c){return Array.isArray(l)?db(l,c,""):db(l.providers,l.parent,l.name||"")}}return s.THROW_IF_NOT_FOUND=tn,s.NULL=new Pn,s.\u0275prov=wt({token:s,providedIn:"any",factory:()=>Jn(bd)}),s.__NG_ELEMENT_ID__=-1,s})();function yb(s,o){fu(y0(s)[1],Un())}function bb(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let h;if(us(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(l){c.push(h);const m=s;m.inputs=G_(s.inputs),m.declaredInputs=G_(s.declaredInputs),m.outputs=G_(s.outputs);const v=h.hostBindings;v&&sg(s,v);const C=h.viewQuery,T=h.contentQueries;if(C&&ID(s,C),T&&nf(s,T),de(s.inputs,h.inputs),de(s.declaredInputs,h.declaredInputs),de(s.outputs,h.outputs),us(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let m=0;m<p.length;m++){const v=p[m];v&&v.ngInherit&&v(s),v===bb&&(l=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Zc(h.hostAttrs,l=Zc(l,h.hostAttrs))}}(c)}function G_(s){return s===sn?{}:s===bt?[]:s}function ID(s,o){const l=s.viewQuery;s.viewQuery=l?(c,h)=>{o(c,h),l(c,h)}:o}function nf(s,o){const l=s.contentQueries;s.contentQueries=l?(c,h,p)=>{o(c,h,p),l(c,h,p)}:o}function sg(s,o){const l=s.hostBindings;s.hostBindings=l?(c,h)=>{o(c,h),l(c,h)}:o}let Uu=null;function rf(){if(!Uu){const s=It.Symbol;if(s&&s.iterator)Uu=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Uu=c)}}}return Uu}class ga{constructor(o){this.wrapped=o}static wrap(o){return new ga(o)}static unwrap(o){return ga.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof ga}}function lg(s){return!!Eb(s)&&(Array.isArray(s)||!(s instanceof Map)&&rf()in s)}function Eb(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ro(s,o,l){return s[o]=l}function di(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function $u(s,o,l,c){const h=di(s,o,l);return di(s,o+1,c)||h}function Db(s,o,l,c){const h=Me();return di(h,xi(),o)&&(Yt(),function(s,o,l,c,h,p){const m=Sn(s,o);X0(o[11],m,p,s.value,l,c,h)}($n(),h,s,o,l,c)),Db}function ma(s,o,l,c){return di(s,xi(),l)?o+ce(l)+c:$t}function sf(s,o,l,c,h,p,m,v,C,T){const P=function(s,o,l,c,h,p){const m=$u(s,o,l,c);return $u(s,o+2,h,p)||m}(s,Ni(),l,h,m,C);return Mi(4),P?o+ce(l)+c+ce(h)+p+ce(m)+v+ce(C)+T:$t}function AD(s,o,l,c,h,p,m,v){const C=Me(),T=Yt(),N=s+20,P=T.firstCreatePass?function(s,o,l,c,h,p,m,v,C){const T=o.consts,N=zh(o,s,4,m||null,mr(T,v));Jp(o,l,N,mr(T,C)),fu(o,N);const P=N.tViews=Ou(2,N,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,N),P.queries=o.queries.embeddedTView(N)),N}(N,T,C,o,l,c,h,p,m):T.data[N];ui(P,!1);const L=C[11].createComment("");zp(T,C,L,P),Pi(L,C),Fu(C,C[N]=lD(L,C,L,P)),_i(P)&&vd(T,C,P),null!=m&&G0(C,P,v)}function df(s){return xa(St.lFrame.contextLView,20+s)}function pg(s,o=ot.Default){const l=Me();return null===l?Jn(s,o):xs(Un(),l,H(s),o)}function ty(s,o,l){const c=Me();return di(c,xi(),o)&&Fs(Yt(),$n(),c,s,o,c[11],l,!1),ty}function ff(s,o,l,c,h){const m=h?"class":"style";dD(s,l,o.inputs[m],m,c)}function ny(s,o,l,c){const h=Me(),p=Yt(),m=20+s,v=h[11],C=h[m]=I0(v,o,St.lFrame.currentNamespace),T=p.firstCreatePass?function(s,o,l,c,h,p,m){const v=o.consts,T=zh(o,s,2,h,mr(v,p));return Jp(o,l,T,mr(v,m)),null!==T.attrs&&tg(T,T.attrs,!1),null!==T.mergedAttrs&&tg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(m,p,h,0,o,l,c):p.data[m];ui(T,!0);const N=T.mergedAttrs;null!==N&&Ch(v,C,N);const P=T.classes;null!==P&&R0(v,C,P);const L=T.styles;null!==L&&PE(v,C,L),64!=(64&T.flags)&&zp(p,h,C,T),0===St.lFrame.elementDepthCount&&Pi(C,h),St.lFrame.elementDepthCount++,_i(T)&&(vd(p,h,T),ZE(p,T,h)),null!==c&&G0(h,T)}function kb(){let s=Un();Ra()?vl():(s=s.parent,ui(s,!1));const o=s;St.lFrame.elementDepthCount--;const l=Yt();l.firstCreatePass&&(fu(l,s),Tc(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&ff(l,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&ff(l,o,Me(),o.stylesWithoutHost,!1)}function Pb(s,o,l,c){ny(s,o,l,c),kb()}function Ob(s,o,l){const c=Me(),h=Yt(),p=s+20,m=h.firstCreatePass?function(s,o,l,c,h){const p=o.consts,m=mr(p,c),v=zh(o,s,8,"ng-container",m);return null!==m&&tg(v,m,!0),Jp(o,l,v,mr(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,c,o,l):h.data[p];ui(m,!0);const v=c[p]=c[11].createComment("");zp(h,c,v,m),Pi(v,c),_i(m)&&(vd(h,c,m),ZE(h,m,c)),null!=l&&G0(c,m)}function Fb(){let s=Un();const o=Yt();Ra()?vl():(s=s.parent,ui(s,!1)),o.firstCreatePass&&(fu(o,s),Tc(s)&&o.queries.elementEnd(s))}function $D(){return Me()}function Lb(s){return!!s&&"function"==typeof s.then}function jD(s){return!!s&&"function"==typeof s.subscribe}const ry=jD;function Vb(s,o,l,c){const h=Me(),p=Yt(),m=Un();return function(s,o,l,c,h,p,m,v){const C=_i(c),N=s.firstCreatePass&&ab(s),P=o[8],L=ob(o);let K=!0;if(3&c.type||v){const le=Sn(c,o),Fe=v?v(le):le,Ie=L.length,vt=v?Qe=>v(In(Qe[c.index])):c.index;if(Rn(l)){let Qe=null;if(!v&&C&&(Qe=function(s,o,l,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const m=h[p];if(m===l&&h[p+1]===c){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof m&&(p+=2)}return null}(s,o,h,c.index)),null!==Qe)(Qe.__ngLastListenerFn__||Qe).__ngNextListenerFn__=p,Qe.__ngLastListenerFn__=p,K=!1;else{p=pf(c,o,P,p,!1);const fn=l.listen(Fe,h,p);L.push(p,fn),N&&N.push(h,vt,Ie,Ie+1)}}else p=pf(c,o,P,p,!0),Fe.addEventListener(h,p,m),L.push(p),N&&N.push(h,vt,Ie,m)}else p=pf(c,o,P,p,!1);const X=c.outputs;let ge;if(K&&null!==X&&(ge=X[h])){const le=ge.length;if(le)for(let Fe=0;Fe<le;Fe+=2){const Br=o[ge[Fe]][ge[Fe+1]].subscribe(p),ns=L.length;L.push(p,Br),N&&N.push(h,c.index,ns,-(ns+1))}}}(p,h,h[11],m,s,o,!!l,c),Vb}function Ub(s,o,l,c){try{return!1!==l(c)}catch(h){return ub(s,h),!1}}function pf(s,o,l,c,h){return function p(m){if(m===Function)return c;const v=2&s.flags?kr(s.index,o):o;0==(32&o[2])&&eg(v);let C=Ub(o,0,c,m),T=p.__ngNextListenerFn__;for(;T;)C=Ub(o,0,T,m)&&C,T=T.__ngNextListenerFn__;return h&&!1===C&&(m.preventDefault(),m.returnValue=!1),C}}function $b(s=1){return function(s){return(St.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,St.lFrame.contextLView))[8]}(s)}function ax(s,o){let l=null;const c=function(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?FE(s,p,!0):FO(c,p))return h}else l=h}return l}function qD(s){const o=Me()[16][6];if(!o.projection){const c=o.projection=xo(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const m=s?ax(p,s):0;null!==m&&(h[m]?h[m].projectionNext=p:c[m]=p,h[m]=p),p=p.next}}}function WD(s,o=0,l){const c=Me(),h=Yt(),p=zh(h,20+s,16,null,l||null);null===p.projection&&(p.projection=o),vl(),64!=(64&p.flags)&&function(s,o,l){Ru(o[11],0,o,l,AE(s,l,o),N_(l.parent||o[6],l,o))}(h,c,p)}function gg(s,o,l){return mg(s,"",o,"",l),gg}function mg(s,o,l,c,h){const p=Me(),m=ma(p,o,l,c);return m!==$t&&Fs(Yt(),$n(),p,s,m,p[11],h,!1),mg}function YD(s,o,l,c,h){const p=s[l+1],m=null===o;let v=c?ua(p):Pl(p),C=!1;for(;0!==v&&(!1===C||m);){const N=s[v+1];KD(s[v],o)&&(C=!0,s[v+1]=c?L0(N):pd(N)),v=c?ua(N):Pl(N)}C&&(s[l+1]=c?pd(p):L0(p))}function KD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ha(s,o)>=0}const qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QD(s){return s.substring(qr.key,qr.keyEnd)}function JD(s,o){const l=qr.textEnd;return l===o?-1:(o=qr.keyEnd=function(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,qr.key=o,l),gf(s,o,l))}function gf(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function sy(s,o,l){return to(s,o,l,!1),sy}function oy(s,o){return to(s,o,null,!0),oy}function ly(s){ya(vr,ko,s,!0)}function ko(s,o){for(let l=function(s){return function(s){qr.key=0,qr.keyEnd=0,qr.value=0,qr.valueEnd=0,qr.textEnd=s.length}(s),JD(s,gf(s,0,qr.textEnd))}(o);l>=0;l=JD(o,l))vr(s,QD(o),!0)}function to(s,o,l,c){const h=Me(),p=Yt(),m=Mi(2);p.firstUpdatePass&&tT(p,s,m,c),o!==$t&&di(h,m,o)&&uy(p,p.data[Hr()],h,h[11],s,h[m+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ee(ia(s)))),s}(o,l),c,m)}function ya(s,o,l,c){const h=Yt(),p=Mi(2);h.firstUpdatePass&&tT(h,null,p,c);const m=Me();if(l!==$t&&di(m,p,l)){const v=h.data[Hr()];if(Ku(v,c)&&!mf(h,p)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(l=J(C,l||"")),ff(h,v,m,l,c)}else!function(s,o,l,c,h,p,m,v){h===$t&&(h=bt);let C=0,T=0,N=0<h.length?h[0]:null,P=0<p.length?p[0]:null;for(;null!==N||null!==P;){const L=C<h.length?h[C+1]:void 0,K=T<p.length?p[T+1]:void 0;let ge,X=null;N===P?(C+=2,T+=2,L!==K&&(X=P,ge=K)):null===P||null!==N&&N<P?(C+=2,X=N):(T+=2,X=P,ge=K),null!==X&&uy(s,o,l,c,X,ge,m,v),N=C<h.length?h[C]:null,P=T<p.length?p[T]:null}}(h,v,m,m[11],m[p+1],m[p+1]=function(s,o,l){if(null==l||""===l)return bt;const c=[],h=ia(l);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,l),c,p)}}function mf(s,o){return o>=s.expandoStartIndex}function tT(s,o,l,c){const h=s.data;if(null===h[l+1]){const p=h[Hr()],m=mf(s,l);Ku(p,c)&&null===o&&!m&&(o=!1),o=function(s,o,l,c){const h=function(s){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(l=_f(l=zb(null,s,o,l,c),o.attrs,c),p=null);else{const m=o.directiveStylingLast;if(-1===m||s[m]!==h)if(l=zb(h,s,o,l,c),null===p){let C=function(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Pl(c))return s[ua(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=zb(null,s,o,C[1],c),C=_f(C,o.attrs,c),function(s,o,l,c){s[ua(l?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function(s,o,l){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=_f(c,s[p].hostAttrs,l);return _f(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(h,p,o,c),function(s,o,l,c,h,p){let m=p?o.classBindings:o.styleBindings,v=ua(m),C=Pl(m);s[c]=l;let N,T=!1;if(Array.isArray(l)){const P=l;N=P[1],(null===N||Ha(P,N)>0)&&(T=!0)}else N=l;if(h)if(0!==C){const L=ua(s[v+1]);s[c+1]=O_(L,v),0!==L&&(s[L+1]=F0(s[L+1],c)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],c)}else s[c+1]=O_(v,0),0!==v&&(s[v+1]=F0(s[v+1],c)),v=c;else s[c+1]=O_(C,0),0===v?v=c:s[C+1]=F0(s[C+1],c),C=c;T&&(s[c+1]=pd(s[c+1])),YD(s,N,c,!0),YD(s,N,c,!1),function(s,o,l,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ha(p,o)>=0&&(l[c+1]=L0(l[c+1]))}(o,N,s,c,p),m=O_(v,C),p?o.classBindings=m:o.styleBindings=m}(h,p,o,l,m,c)}}function zb(s,o,l,c,h){let p=null;const m=l.directiveEnd;let v=l.directiveStylingLast;for(-1===v?v=l.directiveStart:v++;v<m&&(p=o[v],c=_f(c,p.hostAttrs,h),p!==s);)v++;return null!==s&&(l.directiveStylingLast=v),c}function _f(s,o,l){const c=l?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const m=o[p];"number"==typeof m?h=m:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vr(s,m,!!l||o[++p]))}return void 0===s?null:s}function uy(s,o,l,c,h,p,m,v){if(!(3&o.type))return;const C=s.data,T=C[v+1];yf(function(s){return 1==(1&s)}(T)?cy(C,o,l,h,Pl(T),m):void 0)||(yf(p)||function(s){return 2==(2&s)}(T)&&(p=cy(C,null,l,h,v,m)),function(s,o,l,c,h){const p=Rn(s);if(o)h?p?s.addClass(l,c):l.classList.add(c):p?s.removeClass(l,c):l.classList.remove(c);else{let m=-1===c.indexOf("-")?void 0:Qa.DashCase;if(null==h)p?s.removeStyle(l,c,m):l.style.removeProperty(c);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),m|=Qa.Important),p?s.setStyle(l,c,h,m):l.style.setProperty(c,h,v?"important":"")}}}(c,m,ou(Hr(),l),h,p))}function cy(s,o,l,c,h,p){const m=null===o;let v;for(;h>0;){const C=s[h],T=Array.isArray(C),N=T?C[1]:C,P=null===N;let L=l[h+1];L===$t&&(L=P?bt:void 0);let K=P?lr(L,c):N===c?L:void 0;if(T&&!yf(K)&&(K=lr(C,c)),yf(K)&&(v=K,m))return v;const X=s[h+1];h=m?ua(X):Pl(X)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=lr(C,c))}return v}function yf(s){return void 0!==s}function Ku(s,o){return 0!=(s.flags&(o?16:32))}function hy(s,o=""){const l=Me(),c=Yt(),h=s+20,p=c.firstCreatePass?zh(c,h,1,o,null):c.data[h],m=l[h]=D_(l[11],o);zp(c,l,m,p),ui(p,!1)}function fy(s){return py("",s,""),fy}function py(s,o,l){const c=Me(),h=ma(c,s,o,l);return h!==$t&&Xa(c,Hr(),h),py}function vf(s,o,l,c,h){const p=Me(),m=function(s,o,l,c,h,p){const v=$u(s,Ni(),l,h);return Mi(2),v?o+ce(l)+c+ce(h)+p:$t}(p,s,o,l,c,h);return m!==$t&&Xa(p,Hr(),m),vf}function uT(s,o,l,c,h,p,m,v,C){ya(vr,ko,sf(Me(),s,o,l,c,h,p,m,v,C),!0)}function yy(s,o,l){const c=Me();return di(c,xi(),o)&&Fs(Yt(),$n(),c,s,o,c[11],l,!0),yy}const Nd=void 0;var vy=["en",[["a","p"],["AM","PM"],Nd],[["AM","PM"],Nd,Nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nd,"{1} 'at' {0}",Nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let Cf={};function iw(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=sw(o);if(l)return l;const c=o.split("-")[0];if(l=sw(c),l)return l;if("en"===c)return vy;throw new Error(`Missing locale data for the locale "${s}".`)}function _T(s){return iw(s)[At.PluralCase]}function sw(s){return s in Cf||(Cf[s]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[s]),Cf[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const ow=["zero","one","two","few","many"],by="en-US",va={marker:"element"},wy={marker:"ICU"};var wr=(()=>((wr=wr||{})[wr.SHIFT=2]="SHIFT",wr[wr.APPEND_EAGERLY=1]="APPEND_EAGERLY",wr[wr.COMMENT=2]="COMMENT",wr))();let vT=by;function Qu(s){(function(s,o){null==s&&yt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(vT=s.toLowerCase().replace(/_/g,"-"))}function lw(s,o,l){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?x_(s,0,l):In(l[h])}function uw(s,o,l,c,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let m=c,v=null;if(3&o.type||(v=m,m=h),null!==m&&0==(2&o.flags))for(let C=1;C<p.length;C++)Mu(s,m,l[p[C]],v,!1)}}function cw(s,o){if(s.push(o),s.length>1)for(let l=s.length-2;l>=0;l--){const c=s[l];Dg(c)||dw(c,o)&&null===hw(c)&&Cx(c,o.index)}}function Dg(s){return!(64&s.type)}function dw(s,o){return Dg(o)||s.index>o.index}function hw(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function Cx(s,o){const l=s.insertBeforeIndex;Array.isArray(l)?l[0]=o:(RE(lw,uw),s.insertBeforeIndex=o)}function Tg(s,o){const l=s.data[o];return null===l||"string"==typeof l?null:l.hasOwnProperty("currentCaseLViewIndex")?l:l.value}function bT(s,o,l){const c=H0(s,l,64,null,null);return cw(o,c),c}function Ig(s,o){const l=o[s.currentCaseLViewIndex];return null===l?l:l<0?~l:l}function pw(s){return s>>>17}function gw(s){return(131070&s)>>>1}let Oo=0,Ju=0;function mw(s,o,l,c){const h=l[11];let m,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const T=o[++v];null===l[T]&&(l[T]=D_(h,C))}else if("number"==typeof C)switch(1&C){case 0:const T=pw(C);let N,P;if(null===p&&(p=T,m=S_(h,c)),T===p?(N=c,P=m):(N=null,P=In(l[T])),null!==P){const ge=gw(C);Mu(h,P,l[ge],N,!1);const Fe=Tg(s,ge);if(null!==Fe&&"object"==typeof Fe){const Ie=Ig(Fe,l);null!==Ie&&mw(s,Fe.create[Ie],l,l[Fe.anchorIdx])}}break;case 1:const K=o[++v],X=o[++v];X0(h,ou(C>>>1,l),null,null,K,X,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case wy:const T=o[++v],N=o[++v];null===l[N]&&Pi(l[N]=eN(h,T),l);break;case va:const P=o[++v],L=o[++v];null===l[L]&&Pi(l[L]=I0(h,P,null),l)}}}function Xu(s,o,l,c,h){for(let p=0;p<l.length;p++){const m=l[p],v=l[++p];if(m&h){let C="";for(let T=p+1;T<=p+v;T++){const N=l[T];if("string"==typeof N)C+=N;else if("number"==typeof N)if(N<0)C+=ce(o[c-N]);else{const P=N>>>2;switch(3&N){case 1:const L=l[++T],K=l[++T],X=s.data[P];"string"==typeof X?X0(o[11],o[P],null,X,L,C,K):Fs(s,X,o,L,C,o[11],K,!1);break;case 0:const ge=o[P];null!==ge&&IE(o[11],ge,C);break;case 2:Tx(s,Tg(s,P),o,C);break;case 3:Dx(s,Tg(s,P),c,o)}}}}else{const C=l[p+1];if(C>0&&3==(3&C)){const N=Tg(s,C>>>2);o[N.currentCaseLViewIndex]<0&&Dx(s,N,c,o)}}p+=v}}function Dx(s,o,l,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let p=Oo;h<0&&(h=c[o.currentCaseLViewIndex]=~h,p=-1),Xu(s,c,o.update[h],l,p)}}function Tx(s,o,l,c){const h=function(s,o){let l=s.cases.indexOf(o);if(-1===l)switch(s.type){case 1:{const c=function(s,o){const l=_T(o)(parseInt(s,10)),c=ow[l];return void 0!==c?c:"other"}(o,vT);l=s.cases.indexOf(c),-1===l&&"other"!==c&&(l=s.cases.indexOf("other"));break}case 0:l=s.cases.indexOf("other")}return-1===l?null:l}(o,c);if(Ig(o,l)!==h&&(CT(s,o,l),l[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const m=l[o.anchorIdx];m&&mw(s,o.create[h],l,m)}}function CT(s,o,l){let c=Ig(o,l);if(null!==c){const h=o.remove[c];for(let p=0;p<h.length;p++){const m=h[p];if(m>0){const v=ou(m,l);null!==v&&M0(l[11],v)}else CT(s,Tg(s,~m),l)}}}function Ix(){const s=[];let l,c,o=-1;function p(v,C){o=0;const T=Ig(v,C);c=null!==T?v.remove[T]:bt}function m(){if(o<c.length){const v=c[o++];return v>0?l[v]:(s.push(o,c),p(l[1].data[~v],l),m())}return 0===s.length?null:(c=s.pop(),o=s.pop(),m())}return function(v,C){for(l=C;s.length;)s.pop();return p(v.value,C),m}}const ec=/\ufffd(\d+):?\d*\ufffd/gi,ET=/\ufffd(\d+)\ufffd/,bw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,DT=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,TT=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ba=/\uE500/g;function ST(s,o,l,c,h,p,m){const v=Yh(s,c,1,null);let C=v<<wr.SHIFT,T=Gs();o===T&&(T=null),null===T&&(C|=wr.APPEND_EAGERLY),m&&(C|=wr.COMMENT,function(s){void 0===D0&&(D0=s())}(Ix)),h.push(C,null===p?"":p);const N=H0(s,v,m?32:1,null===p?"":p,null);cw(l,N);const P=N.index;return ui(N,!1),null!==T&&o!==T&&function(s,o){let l=s.insertBeforeIndex;null===l?(RE(lw,uw),l=s.insertBeforeIndex=[null,o]):(function(s,o,l){s!=o&&yt(l,s,o,"==")}(Array.isArray(l),!0,"Expecting array here"),l.push(o))}(T,P),N}function Ax(s,o,l,c,h,p,m){const v=m.match(ec),C=ST(s,o,l,p,c,v?null:m,!1);v&&Tf(h,m,C.index,null,0,null)}function Tf(s,o,l,c,h,p){const m=s.length,v=m+1;s.push(null,null);const C=m+2,T=o.split(ec);let N=0;for(let P=0;P<T.length;P++){const L=T[P];if(1&P){const K=h+parseInt(L,10);s.push(-1-K),N|=NT(K)}else""!==L&&s.push(L)}return s.push(l<<2|(c?1:0)),c&&s.push(c,p),s[m]=N,s[v]=s.length-C,N}function NT(s){return 1<<Math.min(s,31)}function xT(s){let o,p,l="",c=0,h=!1;for(;null!==(o=DT.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,h=!1):(l+=s.substring(c,o.index+o[0].length),p=o[1],h=!0);return l+=s.substr(c),l}function MT(s,o,l,c,h,p){let m=0;const v={type:h.type,currentCaseLViewIndex:Yh(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,l){s.push(NT(o.mainBinding),2,-1-o.mainBinding,l<<2|2)})(l,h,p),function(s,o,l){const c=s.data[o];null===c?s.data[o]=l:c.value=l}(s,p,v);const C=h.values;for(let T=0;T<C.length;T++){const N=C[T],P=[];for(let L=0;L<N.length;L++){const K=N[L];if("string"!=typeof K){const X=P.push(K)-1;N[L]=`\x3c!--\ufffd${X}\ufffd--\x3e`}}m=kx(s,v,o,l,c,h.cases[T],N.join(""),P)|m}m&&function(s,o,l){s.push(o,1,l<<2|3)}(l,m,p)}function Rx(s){const o=[],l=[];let c=1,h=0;const p=ww(s=s.replace(bw,function(m,v,C){return c="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let m=0;m<p.length;){let v=p[m++].trim();1===c&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=ww(p[m++]);o.length>l.length&&l.push(C)}return{type:c,mainBinding:h,cases:o,values:l}}function ww(s){if(!s)return[];let o=0;const l=[],c=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(l.pop(),0==l.length){const C=s.substring(o,v);bw.test(C)?c.push(Rx(C)):c.push(C),o=v+1}}else{if(0==l.length){const C=s.substring(o,v);c.push(C),o=v+1}l.push("{")}}const m=s.substring(o);return c.push(m),c}function kx(s,o,l,c,h,p,m,v){const C=[],T=[],N=[];o.cases.push(p),o.create.push(C),o.remove.push(T),o.update.push(N);const L=Ph(su()).getInertBodyElement(m),K=yn(L)||L;return K?RT(s,o,l,c,C,T,N,K,h,v,0):0}function RT(s,o,l,c,h,p,m,v,C,T,N){let P=0,L=v.firstChild;for(;L;){const K=Yh(s,l,1,null);switch(L.nodeType){case Node.ELEMENT_NODE:const X=L,ge=X.tagName.toLowerCase();if(Bp.hasOwnProperty(ge)){Cw(h,va,ge,C,K),s.data[K]=ge;const vt=X.attributes;for(let Qe=0;Qe<vt.length;Qe++){const fn=vt.item(Qe),Br=fn.name.toLowerCase();fn.value.match(ec)?E.hasOwnProperty(Br)&&Tf(m,fn.value,K,fn.name,0,ad[Br]?Ya:b[Br]?Fh:null):Lx(h,K,fn)}P=RT(s,o,l,c,h,p,m,L,K,T,N+1)|P,kT(p,K,N)}break;case Node.TEXT_NODE:const le=L.textContent||"",Fe=le.match(ec);Cw(h,null,Fe?"":le,C,K),kT(p,K,N),Fe&&(P=Tf(m,le,K,null,0,null)|P);break;case Node.COMMENT_NODE:const Ie=ET.exec(L.textContent||"");if(Ie){const Qe=T[parseInt(Ie[1],10)];Cw(h,wy,"",C,K),MT(s,l,c,C,Qe,K),Px(p,K,N)}}L=L.nextSibling}return P}function kT(s,o,l){0===l&&s.push(o)}function Px(s,o,l){0===l&&(s.push(~o),s.push(o))}function Cw(s,o,l,c,h){null!==o&&s.push(o),s.push(l,h,function(s,o,l){return 0|o<<17|l<<1}(0,c,h))}function Lx(s,o,l){s.push(o<<1|1,l.name,l.value)}function FT(s,o,l=-1){const c=Yt(),h=Me(),p=20+s,m=mr(c.consts,o),v=Gs();c.firstCreatePass&&function(s,o,l,c,h,p){const m=Gs(),v=[],C=[],T=[[]],N=function(s){return s.replace(ba," ")}(h=function(s,o){if(function(s){return-1===s}(o))return xT(s);{const l=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return xT(s.substring(l,c))}}(h,p)).split(TT);for(let P=0;P<N.length;P++){let L=N[P];if(0==(1&P)){const K=ww(L);for(let X=0;X<K.length;X++){let ge=K[X];if(0==(1&X)){const le=ge;""!==le&&Ax(s,m,T[0],v,C,l,le)}else{const le=ge;if("object"!=typeof le)throw new Error(`Unable to parse ICU expression in "${h}" message.`);MT(s,l,C,o,le,ST(s,m,T[0],l,v,"",!0).index)}}}else{const K=47===L.charCodeAt(0),ge=(L.charCodeAt(K?1:0),20+Number.parseInt(L.substring(K?2:1)));if(K)T.shift(),ui(Gs(),!1);else{const le=bT(s,T[0],ge);T.unshift([]),ui(le,!0)}}}s.data[c]={create:v,update:C}}(c,null===v?0:v.index,h,p,m,l);const C=c.data[p],N=NE(c,v===h[6]?null:v,h);(function(s,o,l,c){const h=s[11];for(let p=0;p<o.length;p++){const m=o[p++],v=o[p],C=(m&wr.COMMENT)===wr.COMMENT,T=(m&wr.APPEND_EAGERLY)===wr.APPEND_EAGERLY,N=m>>>wr.SHIFT;let P=s[N];null===P&&(P=s[N]=C?h.createComment(v):D_(h,v)),T&&null!==l&&Mu(h,l,P,c,!1)}})(h,C.create,N,v&&8&v.type?h[v.index]:null),Vc(!0)}function LT(s,o,l){FT(s,o,l),Vc(!1)}function Dw(s){return function(s){s&&(Oo|=1<<Math.min(Ju,31)),Ju++}(di(Me(),xi(),s)),Dw}function VT(s){!function(s,o,l){if(Ju>0){const c=s.data[l];Xu(s,o,Array.isArray(c)?c:c.update,Ni()-Ju-1,Oo)}Oo=0,Ju=0}(Yt(),Me(),s+20)}function Tw(s,o,l,c,h){if(s=H(s),Array.isArray(s))for(let p=0;p<s.length;p++)Tw(s[p],o,l,c,h);else{const p=Yt(),m=Me();let v=Xh(s)?s:H(s.provide),C=pD(s);const T=Un(),N=1048575&T.providerIndexes,P=T.directiveStart,L=T.providerIndexes>>20;if(Xh(s)||!s.multi){const K=new Co(C,h,pg),X=Sw(v,o,h?N:N+L,P);-1===X?(En(Qo(T,m),p,v),Iw(p,s,o.length),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),l.push(K),m.push(K)):(l[X]=K,m[X]=K)}else{const K=Sw(v,o,N+L,P),X=Sw(v,o,N,N+L),ge=K>=0&&l[K],le=X>=0&&l[X];if(h&&!le||!h&&!ge){En(Qo(T,m),p,v);const Fe=function(s,o,l,c,h){const p=new Co(s,l,pg);return p.multi=[],p.index=o,p.componentProviders=0,BT(p,h,c&&!l),p}(h?sF:iF,l.length,h,c,C);!h&&le&&(l[X].providerFactory=Fe),Iw(p,s,o.length,0),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),l.push(Fe),m.push(Fe)}else Iw(p,s,K>-1?K:X,BT(l[h?X:K],C,!h&&c));!h&&c&&le&&l[X].componentProviders++}}}function Iw(s,o,l,c){const h=Xh(o);if(h||function(s){return!!s.useClass}(o)){const m=(o.useClass||o).prototype.ngOnDestroy;if(m){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(l);-1===C?v.push(l,[c,m]):v[C+1].push(c,m)}else v.push(l,m)}}}function BT(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function Sw(s,o,l,c){for(let h=l;h<c;h++)if(o[h]===s)return h;return-1}function iF(s,o,l,c){return Aw(this.multi,[])}function sF(s,o,l,c){const h=this.multi;let p;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=Yn(l,l[1],this.providerFactory.index,c);p=v.slice(0,m),Aw(h,p);for(let C=m;C<v.length;C++)p.push(v[C])}else p=[],Aw(h,p);return p}function Aw(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function UT(s,o=[]){return l=>{l.providersResolver=(c,h)=>function(s,o,l){const c=Yt();if(c.firstCreatePass){const h=us(s);Tw(l,c.data,c.blueprint,h,!0),Tw(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class jT{}const GT="ngComponent";class tc{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${ee(s)}. Did you add it to @NgModule.entryComponents?`);return o[GT]=s,o}(o)}}let Vr=(()=>{class s{}return s.NULL=new tc,s})();function Ey(...s){}function If(s,o){return new nl(Sn(s,o))}const Kx=function(){return If(Un(),Me())};let nl=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Kx,s})();function qT(s){return s instanceof nl?s.nativeElement:s}class Ag{}let Qx=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>zT(),s})();const zT=function(){const s=Me(),l=kr(Un().index,s);return function(s){return s[11]}(Mn(l)?l:s)};let YT=(()=>{class s{}return s.\u0275prov=wt({token:s,providedIn:"root",factory:()=>null}),s})();class KT{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ng=new KT("12.2.16");class Xx{constructor(){}supports(o){return lg(o)}create(o){return new eM(o)}}const lF=(s,o)=>o;class eM{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||lF}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,h=0,p=null;for(;l||c;){const m=!c||l&&l.currentIndex<nM(c,h,p)?l:c,v=nM(m,h,p),C=m.currentIndex;if(m===c)h--,c=c._nextRemoved;else if(l=l._next,null==m.previousIndex)h++;else{p||(p=[]);const T=v-h,N=C-h;if(T!=N){for(let L=0;L<T;L++){const K=L<p.length?p[L]:p[L]=0,X=K+L;N<=X&&X<T&&(p[L]=K+1)}p[m.previousIndex]=N-T}}v!==C&&o(m,v,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!lg(o))throw new Error(`Error trying to diff '${ee(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,m,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],m=this._trackByFn(v,p),null!==l&&Object.is(l.trackById,m)?(c&&(l=this._verifyReinsertion(l,p,m,v)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,m,v),c=!0),l=l._next}else h=0,function(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[rf()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,v=>{m=this._trackByFn(h,v),null!==l&&Object.is(l.trackById,m)?(c&&(l=this._verifyReinsertion(l,v,m,h)),Object.is(l.item,v)||this._addIdentityChange(l,v)):(l=this._mismatch(l,v,m,h),c=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,h)):o=this._addAfter(new cF(l,c),p,h),o}_verifyReinsertion(o,l,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new tM),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tM),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class cF{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dF{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class tM{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new dF,this.map.set(l,c)),c.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nM(s,o,l){const c=s.previousIndex;if(null===c)return c;let h=0;return l&&c<l.length&&(h=l[c]),c+o+h}class rM{constructor(){}supports(o){return o instanceof Map||Eb(o)}create(){return new hF}}class hF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Eb(o)))throw new Error(`Error trying to diff '${ee(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(h,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const p=h._prev,m=h._next;return p&&(p._next=m),m&&(m._prev=p),h._next=null,h._prev=null,h}const c=new fF(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class fF{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function iM(){return new xg([new Xx])}let xg=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||iM()),deps:[[s,new Gr,new Wa]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${l}' of type '${function(s){return s.name||typeof s}(l)}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:iM}),s})();function QT(){return new Wr([new rM])}let Wr=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const h=c.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||QT()),deps:[[s,new Gr,new Wa]]}}find(l){const c=this.factories.find(h=>h.supports(l));if(c)return c;throw new Error(`Cannot find a differ supporting object '${l}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:QT}),s})();function Vs(s,o,l,c,h=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(In(p)),Wi(p))for(let v=10;v<p.length;v++){const C=p[v],T=C[1].firstChild;null!==T&&Vs(C[1],C,T,c)}const m=l.type;if(8&m)Vs(s,o,l.child,c);else if(32&m){const v=C_(l,o);let C;for(;C=v();)c.push(C)}else if(16&m){const v=N0(o,l);if(Array.isArray(v))c.push(...v);else{const C=Zp(o[16]);Vs(C[1],C,v,c,!0)}}l=h?l.projectionNext:l.next}return c}class nc{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return Vs(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Wi(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(I_(o,c),No(l,c))}this._attachedToViewContainer=!1}SE(this._lView[1],this._lView)}onDestroy(o){Z0(this._lView[1],this._lView,null,o)}markForCheck(){eg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rb(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,l){cu(!0);try{rb(s,o,l)}finally{cu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,fd(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class Nw extends nc{constructor(o){super(o),this._view=o}detectChanges(){uD(this._view)}checkNoChanges(){!function(s){cu(!0);try{uD(s)}finally{cu(!1)}}(this._view)}get context(){return null}}const aM=function(s){return function(s,o,l){if(cl(s)&&!l){const c=kr(s.index,o);return new nc(c,c)}return 47&s.type?new nc(o[16],o):null}(Un(),Me(),16==(16&s))};let JT=(()=>{class s{}return s.__NG_ELEMENT_ID__=aM,s})();const cM=[new rM],bs=new xg([new Xx]),Iy=new Wr(cM),xw=function(){return Sy(Un(),Me())};let rc=(()=>{class s{}return s.__NG_ELEMENT_ID__=xw,s})();const Mw=rc,Rw=class extends Mw{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=Qp(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(l)),Kh(l,c,o),new nc(c)}};function Sy(s,o){return 4&s.type?new Rw(o,s,If(s,o)):null}class Rd{}class eI{}const tI=function(){return Pw(Un(),Me())};let kd=(()=>{class s{}return s.__NG_ELEMENT_ID__=tI,s})();const pM=kd,rI=class extends pM{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return If(this._hostTNode,this._hostLView)}get injector(){return new To(this._hostTNode,this._hostLView)}get parentInjector(){const o=ct(this._hostTNode,this._hostLView);if(El(o)){const l=zi(o,this._hostLView),c=Va(o);return new To(l[1].data[c+8],l)}return new To(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=iI(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const h=o.createEmbeddedView(l||{});return this.insert(h,c),h}createComponent(o,l,c,h,p){const m=c||this.parentInjector;if(!p&&null==o.ngModule&&m){const C=m.get(Rd,null);C&&(p=C)}const v=o.create(m,h,void 0,p);return this.insert(v.hostView,l),v}insert(o,l){const c=o._lView,h=c[1];if(Wi(c[3])){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const P=c[3],L=new rI(P,P[6],P[3]);L.detach(L.indexOf(o))}}const p=this._adjustIndex(l),m=this._lContainer;!function(s,o,l,c){const h=10+c,p=l.length;c>0&&(l[h-1][4]=o),c<p-10?(o[4]=l[h],ks(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const m=o[17];null!==m&&l!==m&&function(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(m,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,c,m,p);const v=x0(p,m),C=c[11],T=S_(C,m[7]);return null!==T&&function(s,o,l,c,h,p){c[0]=h,c[6]=o,fd(s,c,l,1,h,p)}(h,m[6],C,c,T,v),o.attachToViewContainerRef(),ks(kw(m),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=iI(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=I_(this._lContainer,l);c&&(No(kw(this._lContainer),l),SE(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=I_(this._lContainer,l);return c&&null!=No(kw(this._lContainer),l)?new nc(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function iI(s){return s[8]}function kw(s){return s[8]||(s[8]=[])}function Pw(s,o){let l;const c=o[s.index];if(Wi(c))l=c;else{let h;if(8&s.type)h=In(c);else{const p=o[11];h=p.createComment("");const m=Sn(s,o);Mu(p,S_(p,m),h,function(s,o){return Rn(s)?s.nextSibling(o):o.nextSibling}(p,m),!1)}o[s.index]=l=lD(c,o,h,s),Fu(o,l)}return new rI(l,s,o)}const xf={};class Mf extends Vr{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Ze(o);return new DI(l,this.ngModule)}}function EI(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const VM=new jn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bE});class DI extends jT{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=o.selectors.map(pN).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return EI(this.componentDef.inputs)}get outputs(){return EI(this.componentDef.outputs)}create(o,l,c,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(l,c,h)=>{const p=s.get(l,xf,h);return p!==xf||c===xf?p:o.get(l,c,h)}}}(o,h.injector):o,m=p.get(Ag,Ss),v=p.get(YT,null),C=m.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",N=c?function(s,o,l){if(Rn(s))return s.selectRootElement(o,l===qe.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):I0(m.createRenderer(null,this.componentDef),T,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(T)),P=this.componentDef.onPush?576:528,L=function(s,o){return{components:[],scheduler:s||bE,clean:kN,playerHandler:o||null,flags:0}}(),K=Ou(0,null,null,1,0,null,null,null,null,null),X=Qp(null,K,L,P,null,null,m,C,v,p);let ge,le;Pa(X);try{const Fe=function(s,o,l,c,h,p){const m=l[1];l[20]=s;const C=zh(m,20,2,"#host",null),T=C.mergedAttrs=o.hostAttrs;null!==T&&(tg(C,T,!0),null!==s&&(Ch(h,s,T),null!==C.classes&&R0(h,s,C.classes),null!==C.styles&&PE(h,s,C.styles)));const N=c.createRenderer(s,o),P=Qp(l,zE(o),null,o.onPush?64:16,l[20],C,c,N,p||null,null);return m.firstCreatePass&&(En(Qo(C,l),m,o.type),J0(m,C),iD(C,l.length,1)),Fu(l,P),l[20]=P}(N,this.componentDef,X,m,C);if(N)if(c)Ch(C,N,["ng-version",Ng.full]);else{const{attrs:Ie,classes:vt}=function(s){const o=[],l=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&l.push(p);else{if(!la(h))break;h=p}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Ie&&Ch(C,N,Ie),vt&&vt.length>0&&R0(C,N,vt.join(" "))}if(le=As(K,20),void 0!==l){const Ie=le.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const Qe=l[vt];Ie.push(null!=Qe?Array.from(Qe):null)}}ge=function(s,o,l,c,h){const p=l[1],m=function(s,o,l){const c=Un();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),sD(s,c,o,Yh(s,o,1,null),l));const h=Yn(o,s,c.directiveStart,c);Pi(h,o);const p=Sn(c,o);return p&&Pi(p,o),h}(p,l,o);if(c.components.push(m),s[8]=m,h&&h.forEach(C=>C(m,o)),o.contentQueries){const C=Un();o.contentQueries(1,m,C.directiveStart)}const v=Un();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Oa(v.index),XE(l[1],v,0,v.directiveStart,v.directiveEnd,o),tD(o,m)),m}(Fe,this.componentDef,X,L,[yb]),Kh(K,X,null)}finally{Ko()}return new Li(this.componentType,ge,If(le,X),X,le)}}class Li extends class{}{constructor(o,l,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new Nw(h),this.componentType=o}get injector(){return new To(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const Rf=new Map;class n1 extends Rd{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Mf(this);const c=Tn(o),h=o[Et]||null;h&&Qu(h),this._bootstrapComponents=Ka(c.bootstrap),this._r3Injector=Jh(o,l,[{provide:Rd,useValue:this},{provide:Vr,useValue:this.componentFactoryResolver}],ee(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=br.THROW_IF_NOT_FOUND,c=ot.Default){return o===br||o===Rd||o===bd?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class kf extends eI{constructor(o){super(),this.moduleType=o,null!==Tn(o)&&function(s){const o=new Set;!function l(c){const h=Tn(c,!0),p=h.id;null!==p&&(function(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ee(o)} vs ${ee(o.name)}`)}(p,Rf.get(p),c),Rf.set(p,c));const m=Ka(h.imports);for(const v of m)o.has(v)||(o.add(v),l(v))}(s)}(o)}create(o){return new n1(this.moduleType,o)}}function Xi(s,o,l,c){return RI(Me(),sr(),s,o,l,c)}function Vy(s,o,l,c,h){return kI(Me(),sr(),s,o,l,c,h)}function es(s,o,l,c,h,p){return function(s,o,l,c,h,p,m,v){const C=o+l;return function(s,o,l,c,h){const p=$u(s,o,l,c);return di(s,o+2,h)||p}(s,C,h,p,m)?Ro(s,C+3,v?c.call(v,h,p,m):c(h,p,m)):Ld(s,C+3)}(Me(),sr(),s,o,l,c,h,p)}function Ld(s,o){const l=s[o];return l===$t?void 0:l}function RI(s,o,l,c,h,p){const m=o+l;return di(s,m,h)?Ro(s,m+1,p?c.call(p,h):c(h)):Ld(s,m+1)}function kI(s,o,l,c,h,p,m){const v=o+l;return $u(s,v,h,p)?Ro(s,v+2,m?c.call(m,h,p):c(h,p)):Ld(s,v+2)}function s1(s,o){const l=Yt();let c;const h=s+20;l.firstCreatePass?(c=function(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}throw new Se("302",`The pipe '${s}' could not be found!`)}(o,l.pipeRegistry),l.data[h]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,c.onDestroy)):c=l.data[h];const p=c.factory||(c.factory=Hs(c.type)),m=Gn(pg);try{const v=gu(!1),C=p();return gu(v),function(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,Me(),h,C),C}finally{Gn(m)}}function o1(s,o,l){const c=s+20,h=Me(),p=xa(h,c);return qg(h,Gg(h,c)?RI(h,sr(),o,p.transform,l,p):p.transform(l))}function Hg(s,o,l,c){const h=s+20,p=Me(),m=xa(p,h);return qg(p,Gg(p,h)?kI(p,sr(),o,m.transform,l,c,m):m.transform(l,c))}function Gg(s,o){return s[1].data[o].pure}function qg(s,o){return ga.isWrapped(o)&&(o=ga.unwrap(o),s[Ni()]=$t),o}function Uy(s){return o=>{setTimeout(s,void 0,o)}}const rl=class extends u.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var h,p,m;let v=o,C=l||(()=>null),T=c;if(o&&"object"==typeof o){const P=o;v=null===(h=P.next)||void 0===h?void 0:h.bind(P),C=null===(p=P.error)||void 0===p?void 0:p.bind(P),T=null===(m=P.complete)||void 0===m?void 0:m.bind(P)}this.__isAsync&&(C=Uy(C),v&&(v=Uy(v)),T&&(T=Uy(T)));const N=super.subscribe({next:v,error:C,complete:T});return o instanceof G.w&&o.add(N),N}};function $M(){return this._results[rf()]()}class hi{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=rf(),c=hi.prototype;c[l]||(c[l]=$M)}get changes(){return this._changes||(this._changes=new rl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const h=vi(o);(this._changesDetected=!function(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(l&&(h=l(h),p=l(p)),p!==h)return!1}return!0}(c._results,h,l))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class d1{constructor(o){this.queryList=o,this.matches=null}clone(){return new d1(this.queryList)}setDirty(){this.queryList.setDirty()}}class h1{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let p=0;p<c;p++){const m=l.getByIndex(p);h.push(this.queries[m.indexInDeclarationView].clone())}return new h1(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==fi(o,l).matches&&this.queries[l].setDirty()}}class Zg{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class Pf{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const h=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new Pf(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class zg{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new zg(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,l,f1(l,p)),this.matchTNodeWithReadOption(o,l,Do(l,o,p,!1,!1))}else c===rc?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Do(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===nl||h===kd||h===rc&&4&l.type)this.addMatch(l.index,-2);else{const p=Do(l,o,h,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function f1(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function g1(s,o,l,c){return-1===l?function(s,o){return 11&s.type?If(s,o):4&s.type?Sy(s,o):null}(o,s):-2===l?function(s,o,l){return l===nl?If(o,s):l===rc?Sy(o,s):l===kd?Pw(o,s):void 0}(s,o,c):Yn(s,s[1],l,o)}function m1(s,o,l,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,m=l.matches,v=[];for(let C=0;C<m.length;C+=2){const T=m[C];v.push(T<0?null:g1(o,p[T],m[C+1],l.metadata.read))}h.matches=v}return h.matches}function _1(s,o,l,c){const h=s.queries.getByIndex(l),p=h.matches;if(null!==p){const m=m1(s,o,h,l);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)c.push(m[v/2]);else{const T=p[v+1],N=o[-C];for(let P=10;P<N.length;P++){const L=N[P];L[17]===L[3]&&_1(L[1],L,T,c)}if(null!==N[9]){const P=N[9];for(let L=0;L<P.length;L++){const K=P[L];_1(K[1],K,T,c)}}}}}return c}function y1(s){const o=Me(),l=Yt(),c=du();wo(c+1);const h=fi(l,c);if(s.dirty&&yh(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?_1(l,o,c,[]):m1(l,o,h,c);s.reset(p,qT),s.notifyOnChanges()}return!0}return!1}function v1(s,o,l){const c=Yt();c.firstCreatePass&&(Gy(c,new Zg(s,o,l),-1),2==(2&o)&&(c.staticViewQueries=!0)),Hy(c,Me(),o)}function jy(s,o,l,c){const h=Yt();if(h.firstCreatePass){const p=Un();Gy(h,new Zg(o,l,c),p.index),function(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}Hy(h,Me(),l)}function b1(){return s=Me(),o=du(),s[19].queries[o].queryList;var s,o}function Hy(s,o,l){const c=new hi(4==(4&l));Z0(s,o,c,c.destroy),null===o[19]&&(o[19]=new h1),o[19].queries.push(new d1(c))}function Gy(s,o,l){null===s.queries&&(s.queries=new Pf),s.queries.track(new zg(o,l))}function fi(s,o){return s.queries.getByIndex(o)}function wi(s,o){return Sy(s,o)}const jd=new jn("Application Initializer");let il=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Ey,this.reject=Ey,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Lb(p))l.push(p);else if(ry(p)){const m=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});l.push(m)}}Promise.all(l).then(()=>{c()}).catch(h=>{this.reject(h)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Jn(jd,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const GI=new jn("AppId"),rR={provide:GI,useFactory:function(){return`${j1()}${j1()}${j1()}`},deps:[]};function j1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WI=new jn("Platform Initializer"),ZI=new jn("Platform ID"),$f=new jn("appBootstrapListener");let H1=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const rm=new jn("LocaleId"),G1=new jn("DefaultCurrencyCode");class YI{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}const tv=function(s){return new kf(s)},JI=tv,iR=function(s){return Promise.resolve(tv(s))},om=function(s){const o=tv(s),c=Ka(Tn(s).declarations).reduce((h,p)=>{const m=Ze(p);return m&&h.push(new DI(m)),h},[]);return new YI(o,c)},am=om,tS=function(s){return Promise.resolve(om(s))};let ql=(()=>{class s{constructor(){this.compileModuleSync=JI,this.compileModuleAsync=iR,this.compileModuleAndAllComponentsSync=am,this.compileModuleAndAllComponentsAsync=tS}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const Jr=(()=>Promise.resolve(0))();function nv(s){"undefined"==typeof Zone?Jr.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class io{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rl(!1),this.onMicrotaskEmpty=new rl(!1),this.onStable=new rl(!1),this.onError=new rl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&l,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=It.requestAnimationFrame,o=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(It,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,rv(s),s.isCheckStableRunning=!0,W1(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),rv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,h,p,m,v)=>{try{return um(s),l.invokeTask(h,p,m,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Z1(s)}},onInvoke:(l,c,h,p,m,v,C)=>{try{return um(s),l.invoke(h,p,m,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Z1(s)}},onHasTask:(l,c,h,p)=>{l.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,rv(s),W1(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,h,p)=>(l.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!io.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(io.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,h){const p=this._inner,m=p.scheduleEventTask("NgZoneEvent: "+h,o,aR,Ey,Ey);try{return p.runTask(m,l,c)}finally{p.cancelTask(m)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const aR={};function W1(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function rv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function um(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Z1(s){s._nesting--,W1(s)}class Wl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rl,this.onMicrotaskEmpty=new rl,this.onStable=new rl,this.onError=new rl}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,h){return o.apply(l,c)}}let z1=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{io.assertNotInAngularZone(),nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nv(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:h})}whenStable(l,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(Jn(io))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})(),iS=(()=>{class s{constructor(){this._applications=new Map,iv.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return iv.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();class Y1{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function cm(s){iv=s}let iv=new Y1,sv=!0,dm=!1;function ov(){return dm=!0,sv}function K1(){if(dm)throw new Error("Cannot enable prod mode after platform setup.");sv=!1}let Bs;const X1=new jn("AllowMultipleToken");class oS{constructor(o,l){this.name=o,this.token=l}}function eC(s,o,l=[]){const c=`Platform: ${o}`,h=new jn(c);return(p=[])=>{let m=tC();if(!m||m.injector.get(X1,!1))if(s)s(l.concat(p).concat({provide:h,useValue:!0}));else{const v=l.concat(p).concat({provide:h,useValue:!0},{provide:mn,useValue:"platform"});!function(s){if(Bs&&!Bs.destroyed&&!Bs.injector.get(X1,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Bs=s.get(fm);const o=s.get(WI,null);o&&o.forEach(l=>l())}(br.create({providers:v,name:c}))}return function(s){const o=tC();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function tC(){return Bs&&!Bs.destroyed?Bs:null}let fm=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const v=function(s,o){let l;return l="noop"===s?new Wl:("zone.js"===s?void 0:s)||new io({enableLongStackTrace:ov(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:io,useValue:v}];return v.run(()=>{const T=br.create({providers:C,parent:this.injector,name:l.moduleType.name}),N=l.create(T),P=N.injector.get(jh,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const L=v.onError.subscribe({next:K=>{P.handleError(K)}});N.onDestroy(()=>{rC(this._modules,N),L.unsubscribe()})}),function(s,o,l){try{const c=l();return Lb(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(P,v,()=>{const L=N.injector.get(il);return L.runInitializers(),L.donePromise.then(()=>(Qu(N.injector.get(rm,by)||by),this._moduleDoBootstrap(N),N))})})}bootstrapModule(l,c=[]){const h=nC({},c);return function(s,o,l){const c=new kf(l);return Promise.resolve(c)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(l){const c=l.injector.get(sl);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new Error(`The module ${ee(l.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Jn(br))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function nC(s,o){return Array.isArray(o)?o.reduce(nC,s):Object.assign(Object.assign({},s),o)}let sl=(()=>{class s{constructor(l,c,h,p,m){this._zone=l,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new O.y(T=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{io.assertNotInAngularZone(),nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{N.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ie.T)(v,C.pipe((0,oe.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=l instanceof jT?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Rd),v=h.create(br.NULL,[],c||h.selector,p),C=v.location.nativeElement,T=v.injector.get(z1,null),N=T&&v.injector.get(iS);return T&&N&&N.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),rC(this.components,v),N&&N.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;rC(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get($f,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Jn(io),Jn(br),Jn(jh),Jn(Vr),Jn(il))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function rC(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}class fR{}class Bi{}const jf={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let lc=(()=>{class s{constructor(l,c){this._compiler=l,this._config=c||jf}load(l){return this.loadAndCompile(l)}loadAndCompile(l){let[c,h]=l.split("#");return void 0===h&&(h="default"),B(8255)(c).then(p=>p[h]).then(p=>lv(p,c,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(l){let[c,h]=l.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),B(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(m=>m[h+p]).then(m=>lv(m,c,h))}}return s.\u0275fac=function(l){return new(l||s)(Jn(ql),Jn(Bi,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function lv(s,o,l){if(!s)throw new Error(`Cannot find '${l}' in '${o}'`);return s}const Hf=function(s){return null},mm=eC(null,"core",[{provide:ZI,useValue:"unknown"},{provide:fm,deps:[br]},{provide:iS,deps:[]},{provide:H1,deps:[]}]),pi=[{provide:sl,useClass:sl,deps:[io,br,jh,Vr,il]},{provide:VM,deps:[io],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:il,useClass:il,deps:[[new Wa,jd]]},{provide:ql,useClass:ql,deps:[]},rR,{provide:xg,useFactory:function(){return bs},deps:[]},{provide:Wr,useFactory:function(){return Iy},deps:[]},{provide:rm,useFactory:function(s){return Qu(s=s||"undefined"!=typeof $localize&&$localize.locale||by),s},deps:[[new qa(rm),new Wa,new Gr]]},{provide:G1,useValue:"USD"}];let uc=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Jn(sl))},s.\u0275mod=W({type:s}),s.\u0275inj=cn({providers:pi}),s})()},8939:(st,Ee,B)=>{"use strict";B.d(Ee,{hO:()=>ae,xv:()=>J,Dh:()=>ee,GT:()=>te,cc:()=>Re,on:()=>U,pX:()=>oe});var u=B(7716),G=B(7841),O=B(8971);st=B.hmd(st);const ie=["ngOnDestroy"],oe=(ce,fe,ke,Ye={})=>new Proxy(ce,{get:(mt,nt)=>ke.runOutsideAngular(()=>{var Tt;if(ce[nt])return(null===(Tt=null==Ye?void 0:Ye.spy)||void 0===Tt?void 0:Tt.get)&&Ye.spy.get(nt,ce[nt]),ce[nt];if(ie.indexOf(nt)>-1)return()=>{};const dt=fe.toPromise().then(Ke=>{const xe=Ke&&Ke[nt];return"function"==typeof xe?xe.bind(Ke):xe&&xe.then?xe.then(Te=>ke.run(()=>Te)):ke.run(()=>xe)});return new Proxy(()=>{},{get:(Ke,xe)=>dt[xe],apply:(Ke,xe,Te)=>dt.then($e=>{var ye;const He=$e&&$e(...Te);return(null===(ye=null==Ye?void 0:Ye.spy)||void 0===ye?void 0:ye.apply)&&Ye.spy.apply(nt,Te,He),He})})})}),te=(ce,fe)=>{fe.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach(Ye=>{Object.defineProperty(ce.prototype,Ye,Object.getOwnPropertyDescriptor(ke.prototype||ke,Ye))})})};class de{constructor(fe){return fe}}const ee=new u.OlP("angularfire2.app.options"),J=new u.OlP("angularfire2.app.name");function U(ce,fe,ke){const mt="object"==typeof ke&&ke||{};mt.name=mt.name||"string"==typeof ke&&ke||"[DEFAULT]";const Tt=G.Z.apps.filter(dt=>dt&&dt.name===mt.name)[0]||fe.runOutsideAngular(()=>G.Z.initializeApp(ce,mt));try{JSON.stringify(ce)!==JSON.stringify(Tt.options)&&z("error",`${Tt.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(dt){}return new de(Tt)}const z=(ce,...fe)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ce](...fe)},H={provide:de,useFactory:U,deps:[ee,u.R0b,[new u.FiY,J]]};let ae=(()=>{class ce{constructor(ke){G.Z.registerVersion("angularfire",O.q4.full,"core"),G.Z.registerVersion("angularfire",O.q4.full,"app-compat"),G.Z.registerVersion("angular",u.q4F.full,ke.toString())}static initializeApp(ke,Ye){return{ngModule:ce,providers:[{provide:ee,useValue:ke},{provide:J,useValue:Ye}]}}}return ce.\u0275fac=function(ke){return new(ke||ce)(u.LFG(u.Lbi))},ce.\u0275mod=u.oAB({type:ce}),ce.\u0275inj=u.cJS({providers:[H]}),ce})();function Re(ce,fe,ke,Ye,mt){const[,nt,Tt]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===ce)||[];if(nt)return function(ce,fe){try{return ce.toString()===fe.toString()}catch(ke){return ce===fe}}(mt,Tt)||(Ve("error",`${fe} was already initialized on the ${ke} Firebase App with different settings.${be?" You may need to reload as Firebase is not HMR aware.":""}`),Ve("warn",{is:mt,was:Tt})),nt;{const dt=Ye();return globalThis.\u0275AngularfireInstanceCache.push([ce,dt,mt]),dt}}const be=!!st.hot,Ve=(ce,...fe)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[ce](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(st,Ee,B)=>{"use strict";B.d(Ee,{q4:()=>s_,iC:()=>vr,fc:()=>Mp,HU:()=>Ah,vb:()=>Rs,JM:()=>vi});var u=B(7716),G=B(2329),O=B(8239),ie=B(8026),oe=B(3854),te=B(3910),de=B(5422);const ee="@firebase/installations",J="0.5.8",z=`w:${J}`,H="FIS_v2",ce=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fe(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function ke({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ye(I){return{token:I.token,requestStatus:2,expiresIn:Te(I.expiresIn),creationTime:Date.now()}}function mt(I,A){return nt.apply(this,arguments)}function nt(){return(nt=(0,O.Z)(function*(I,A){const q=(yield A.json()).error;return ce.create("request-failed",{requestName:I,serverCode:q.code,serverMessage:q.message,serverStatus:q.status})})).apply(this,arguments)}function Tt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function dt(I,{refreshToken:A}){const k=Tt(I);return k.append("Authorization",function(I){return`${H} ${I}`}(A)),k}function Ke(I){return xe.apply(this,arguments)}function xe(){return(xe=(0,O.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function Te(I){return Number(I.replace("s","000"))}function ye(I,A){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:k}){const q=ke(I),se=Tt(I),he=A.getImmediate({optional:!0});if(he){const kt=yield he.getHeartbeatsHeader();kt&&se.append("x-firebase-client",kt)}const Xe={method:"POST",headers:se,body:JSON.stringify({fid:k,authVersion:H,appId:I.appId,sdkVersion:z})},Dt=yield Ke(()=>fetch(q,Xe));if(Dt.ok){const kt=yield Dt.json();return{fid:kt.fid||k,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Ye(kt.authToken)}}throw yield mt("Create Installation",Dt)})).apply(this,arguments)}function Ae(I){return new Promise(A=>{setTimeout(A,I)})}const gn=/^[cdef][\w-]{21}$/;function An(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const k=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return gn.test(k)?k:""}catch(I){return""}}function yt(I){return`${I.appName}!${I.appId}`}const Dr=new Map;function mi(I,A){const k=yt(I);er(k,A),function(I,A){const k=(!rn&&"BroadcastChannel"in self&&(rn=new BroadcastChannel("[Firebase] FID Change"),rn.onmessage=I=>{er(I.data.key,I.data.fid)}),rn);k&&k.postMessage({key:I,fid:A}),0===Dr.size&&rn&&(rn.close(),rn=null)}(k,A)}function er(I,A){const k=Dr.get(I);if(k)for(const q of k)q(A)}let rn=null;const hr="firebase-installations-store";let Le=null;function fr(){return Le||(Le=(0,oe.X3)("firebase-installations-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(hr)}})),Le}function ir(I,A){return ot.apply(this,arguments)}function ot(){return(ot=(0,O.Z)(function*(I,A){const k=yt(I),se=(yield fr()).transaction(hr,"readwrite"),he=se.objectStore(hr),Oe=yield he.get(k);return yield he.put(A,k),yield se.complete,(!Oe||Oe.fid!==A.fid)&&mi(I,A.fid),A})).apply(this,arguments)}function vn(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(I){const A=yt(I),q=(yield fr()).transaction(hr,"readwrite");yield q.objectStore(hr).delete(A),yield q.complete})).apply(this,arguments)}function Gn(I,A){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(I,A){const k=yt(I),se=(yield fr()).transaction(hr,"readwrite"),he=se.objectStore(hr),Oe=yield he.get(k),Xe=A(Oe);return void 0===Xe?yield he.delete(k):yield he.put(Xe,k),yield se.complete,Xe&&(!Oe||Oe.fid!==Xe.fid)&&mi(I,Xe.fid),Xe})).apply(this,arguments)}function jr(I){return pr.apply(this,arguments)}function pr(){return(pr=(0,O.Z)(function*(I){let A;const k=yield Gn(I.appConfig,q=>{const se=Vn(q),he=Ea(I,se);return A=he.registrationPromise,he.installationEntry});return""===k.fid?{installationEntry:yield A}:{installationEntry:k,registrationPromise:A}})).apply(this,arguments)}function Vn(I){return hn(I||{fid:An(),registrationStatus:0})}function Ea(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(ce.create("app-offline"))};const k={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:k,registrationPromise:function(I,A){return qe.apply(this,arguments)}(I,k)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:gt(I)}:{installationEntry:A}}function qe(){return(qe=(0,O.Z)(function*(I,A){try{const k=yield ye(I,A);return ir(I.appConfig,k)}catch(k){throw fe(k)&&409===k.customData.serverCode?yield vn(I.appConfig):yield ir(I.appConfig,{fid:A.fid,registrationStatus:0}),k}})).apply(this,arguments)}function gt(I){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,O.Z)(function*(I){let A=yield as(I.appConfig);for(;1===A.registrationStatus;)yield Ae(100),A=yield as(I.appConfig);if(0===A.registrationStatus){const{installationEntry:k,registrationPromise:q}=yield jr(I);return q||k}return A})).apply(this,arguments)}function as(I){return Gn(I,A=>{if(!A)throw ce.create("installation-not-found");return hn(A)})}function hn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Tr(I,A){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},k){const q=sn(I,k),se=dt(I,k),he=A.getImmediate({optional:!0});if(he){const kt=yield he.getHeartbeatsHeader();kt&&se.append("x-firebase-client",kt)}const Xe={method:"POST",headers:se,body:JSON.stringify({installation:{sdkVersion:z,appId:I.appId}})},Dt=yield Ke(()=>fetch(q,Xe));if(Dt.ok)return Ye(yield Dt.json());throw yield mt("Generate Auth Token",Dt)})).apply(this,arguments)}function sn(I,{fid:A}){return`${ke(I)}/${A}/authTokens:generate`}function bt(I){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(I,A=!1){let k;const q=yield Gn(I.appConfig,he=>{if(!Jt(he))throw ce.create("not-registered");const Oe=he.authToken;if(!A&&Q(Oe))return he;if(1===Oe.requestStatus)return k=Ge(I,A),he;{if(!navigator.onLine)throw ce.create("app-offline");const Xe=ne(he);return k=Et(I,Xe),Xe}});return k?yield k:q.authToken})).apply(this,arguments)}function Ge(I,A){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*(I,A){let k=yield lt(I.appConfig);for(;1===k.authToken.requestStatus;)yield Ae(100),k=yield lt(I.appConfig);const q=k.authToken;return 0===q.requestStatus?bt(I,A):q})).apply(this,arguments)}function lt(I){return Gn(I,A=>{if(!Jt(A))throw ce.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Et(I,A){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(I,A){try{const k=yield Tr(I,A),q=Object.assign(Object.assign({},A),{authToken:k});return yield ir(I.appConfig,q),k}catch(k){if(!fe(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const q=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ir(I.appConfig,q)}else yield vn(I.appConfig);throw k}})).apply(this,arguments)}function Jt(I){return void 0!==I&&2===I.registrationStatus}function Q(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function ne(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function j(){return(j=(0,O.Z)(function*(I){const A=I,{installationEntry:k,registrationPromise:q}=yield jr(A);return q?q.catch(console.error):bt(A).catch(console.error),k.fid})).apply(this,arguments)}function pe(){return(pe=(0,O.Z)(function*(I,A=!1){const k=I;return yield Ue(k),(yield bt(k,A)).token})).apply(this,arguments)}function Ue(I){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(I){const{registrationPromise:A}=yield jr(I);A&&(yield A)})).apply(this,arguments)}function Bt(I){return ce.create("missing-app-config-values",{valueName:I})}const xn="installations";(0,ie._registerComponent)(new te.wA(xn,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Bt("App Configuration");if(!I.name)throw Bt("App Name");const A=["projectId","apiKey","appId"];for(const k of A)if(!I.options[k])throw Bt(k);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ie._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ie._registerComponent)(new te.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),k=(0,ie._getProvider)(A,xn).getImmediate();return{getId:()=>function(I){return j.apply(this,arguments)}(k),getToken:se=>function(I){return pe.apply(this,arguments)}(k,se)}},"PRIVATE")),(0,ie.registerVersion)(ee,J),(0,ie.registerVersion)(ee,J,"esm2017");const bn="@firebase/remote-config",Bn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class cl{constructor(A,k,q,se){this.client=A,this.storage=k,this.storageCache=q,this.logger=se}isCachedDataFresh(A,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const q=Date.now()-k,se=q<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${q}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${se}.`),se}fetch(A){var k=this;return(0,O.Z)(function*(){const[q,se]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(se&&k.isCachedDataFresh(A.cacheMaxAgeMillis,q))return se;A.eTag=se&&se.eTag;const he=yield k.client.fetch(A),Oe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===he.status&&Oe.push(k.storage.setLastSuccessfulFetchResponse(he)),yield Promise.all(Oe),he})()}}function _i(I=navigator){return I.languages&&I.languages[0]||I.language}class us{constructor(A,k,q,se,he,Oe){this.firebaseInstallations=A,this.sdkVersion=k,this.namespace=q,this.projectId=se,this.apiKey=he,this.appId=Oe}fetch(A){var k=this;return(0,O.Z)(function*(){const[q,se]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Dt={sdk_version:k.sdkVersion,app_instance_id:q,app_instance_id_token:se,app_id:k.appId,language_code:_i()},kt={method:"POST",headers:Xe,body:JSON.stringify(Dt)},tn=fetch(Oe,kt),Pt=new Promise((Ga,Ps)=>{A.signal.addEventListener(()=>{const ta=new Error("The operation was aborted.");ta.name="AbortError",Ps(ta)})});let Ir;try{yield Promise.race([tn,Pt]),Ir=yield tn}catch(Ga){let Ps="fetch-client-network";throw"AbortError"===Ga.name&&(Ps="fetch-timeout"),Bn.create(Ps,{originalErrorMessage:Ga.message})}let Sr=Ir.status;const Il=Ir.headers.get("ETag")||void 0;let Xc,Ks;if(200===Ir.status){let Ga;try{Ga=yield Ir.json()}catch(Ps){throw Bn.create("fetch-client-parse",{originalErrorMessage:Ps.message})}Xc=Ga.entries,Ks=Ga.state}if("INSTANCE_STATE_UNSPECIFIED"===Ks?Sr=500:"NO_CHANGE"===Ks?Sr=304:("NO_TEMPLATE"===Ks||"EMPTY_CONFIG"===Ks)&&(Xc={}),304!==Sr&&200!==Sr)throw Bn.create("fetch-status",{httpStatus:Sr});return{status:Sr,eTag:Il,config:Xc}})()}}class lh{constructor(A,k){this.client=A,this.storage=k}fetch(A){var k=this;return(0,O.Z)(function*(){const q=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(A,q)})()}attemptFetch(A,{throttleEndTimeMillis:k,backoffCount:q}){var se=this;return(0,O.Z)(function*(){yield function(I,A){return new Promise((k,q)=>{const se=Math.max(A-Date.now(),0),he=setTimeout(k,se);I.addEventListener(()=>{clearTimeout(he),q(Bn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,k);try{const he=yield se.client.fetch(A);return yield se.storage.deleteThrottleMetadata(),he}catch(he){if(!function(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(he))throw he;const Oe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(q),backoffCount:q+1};return yield se.storage.setThrottleMetadata(Oe),se.attemptFetch(A,Oe)}})()}}class uh{constructor(A,k,q,se,he){this.app=A,this._client=k,this._storageCache=q,this._storage=se,this._logger=he,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sc(I,A){const k=I.target.error||void 0;return Bn.create(A,{originalErrorMessage:k&&k.message})}const _o="app_namespace_store";class dh{constructor(A,k,q,se=function(){return new Promise((I,A)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=q=>{A(Sc(q,"storage-open"))},k.onsuccess=q=>{I(q.target.result)},k.onupgradeneeded=q=>{const se=q.target.result;switch(q.oldVersion){case 0:se.createObjectStore(_o,{keyPath:"compositeKey"})}}}catch(k){A(Bn.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=A,this.appName=k,this.namespace=q,this.openDbPromise=se}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var k=this;return(0,O.Z)(function*(){const q=yield k.openDbPromise;return new Promise((se,he)=>{const Xe=q.transaction([_o],"readonly").objectStore(_o),Dt=k.createCompositeKey(A);try{const kt=Xe.get(Dt);kt.onerror=tn=>{he(Sc(tn,"storage-get"))},kt.onsuccess=tn=>{const Pt=tn.target.result;se(Pt?Pt.value:void 0)}}catch(kt){he(Bn.create("storage-get",{originalErrorMessage:kt&&kt.message}))}})})()}set(A,k){var q=this;return(0,O.Z)(function*(){const se=yield q.openDbPromise;return new Promise((he,Oe)=>{const Dt=se.transaction([_o],"readwrite").objectStore(_o),kt=q.createCompositeKey(A);try{const tn=Dt.put({compositeKey:kt,value:k});tn.onerror=Pt=>{Oe(Sc(Pt,"storage-set"))},tn.onsuccess=()=>{he()}}catch(tn){Oe(Bn.create("storage-set",{originalErrorMessage:tn&&tn.message}))}})})()}delete(A){var k=this;return(0,O.Z)(function*(){const q=yield k.openDbPromise;return new Promise((se,he)=>{const Xe=q.transaction([_o],"readwrite").objectStore(_o),Dt=k.createCompositeKey(A);try{const kt=Xe.delete(Dt);kt.onerror=tn=>{he(Sc(tn,"storage-delete"))},kt.onsuccess=()=>{se()}}catch(kt){he(Bn.create("storage-delete",{originalErrorMessage:kt&&kt.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class e_{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,O.Z)(function*(){const k=A.storage.getLastFetchStatus(),q=A.storage.getLastSuccessfulFetchTimestampMillis(),se=A.storage.getActiveConfig(),he=yield k;he&&(A.lastFetchStatus=he);const Oe=yield q;Oe&&(A.lastSuccessfulFetchTimestampMillis=Oe);const Xe=yield se;Xe&&(A.activeConfig=Xe)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function t_(){return hl.apply(this,arguments)}function hl(){return(hl=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ie._registerComponent)(new te.wA("remote-config",function(A,{instanceIdentifier:k}){const q=A.getProvider("app").getImmediate(),se=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,oe.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:he,apiKey:Oe,appId:Xe}=q.options;if(!he)throw Bn.create("registration-project-id");if(!Oe)throw Bn.create("registration-api-key");if(!Xe)throw Bn.create("registration-app-id");const Dt=new dh(Xe,q.name,k=k||"firebase"),kt=new e_(Dt),tn=new de.Yd(bn);tn.logLevel=de.in.ERROR;const Pt=new us(se,ie.SDK_VERSION,k,he,Oe,Xe),Ir=new lh(Pt,Dt),Sr=new cl(Ir,Dt,kt,tn),Il=new uh(q,Sr,kt,Dt,tn);return function(I){const A=(0,oe.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Il),Il},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(bn,"0.3.7"),(0,ie.registerVersion)(bn,"0.3.7","esm2017");const fh="/firebase-messaging-sw.js",Ia="/firebase-cloud-messaging-push-scope",_p="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ac="google.c.a.c_id",Hs="google.c.a.c_l",fl="google.c.a.ts",zn="google.c.a.e";var Sa=(()=>{return(I=Sa||(Sa={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Sa;var I})();function Rr(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ph(I){const k=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),q=atob(k),se=new Uint8Array(q.length);for(let he=0;he<q.length;++he)se[he]=q.charCodeAt(he);return se}const Aa="fcm_token_details_db",pl="fcm_token_object_Store";function n_(I){return li.apply(this,arguments)}function li(){return(li=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(he=>he.name).includes(Aa))return null;let A=null;return(yield(0,oe.X3)(Aa,5,function(){var q=(0,O.Z)(function*(se,he,Oe,Xe){var Dt;if(he<2||!se.objectStoreNames.contains(pl))return;const kt=Xe.objectStore(pl),tn=yield kt.index("fcmSenderId").get(I);if(yield kt.clear(),tn)if(2===he){const Pt=tn;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;A={token:Pt.fcmToken,createTime:null!==(Dt=Pt.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Rr(Pt.vapidKey)}}}else if(3===he){const Pt=tn;A={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Rr(Pt.auth),p256dh:Rr(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Rr(Pt.vapidKey)}}}else if(4===he){const Pt=tn;A={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Rr(Pt.auth),p256dh:Rr(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Rr(Pt.vapidKey)}}}});return function(se,he,Oe,Xe){return q.apply(this,arguments)}}())).close(),yield(0,oe.Lj)(Aa),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Nc(A)?A:null})).apply(this,arguments)}function Nc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Ai="firebase-messaging-store";let su=null;function _h(){return su||(su=(0,oe.X3)("firebase-messaging-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(Ai)}})),su}function Rn(I){return xc.apply(this,arguments)}function xc(){return(xc=(0,O.Z)(function*(I){const A=Mc(I),q=yield(yield _h()).transaction(Ai).objectStore(Ai).get(A);if(q)return q;{const se=yield n_(I.appConfig.senderId);if(se)return yield Ss(I,se),se}})).apply(this,arguments)}function Ss(I,A){return ds.apply(this,arguments)}function ds(){return(ds=(0,O.Z)(function*(I,A){const k=Mc(I),se=(yield _h()).transaction(Ai,"readwrite");return yield se.objectStore(Ai).put(A,k),yield se.complete,A})).apply(this,arguments)}function In(I){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(I){const A=Mc(I),q=(yield _h()).transaction(Ai,"readwrite");yield q.objectStore(Ai).delete(A),yield q.complete})).apply(this,arguments)}function Mc({appConfig:I}){return I.appId}const Sn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rc(I,A){return As.apply(this,arguments)}function As(){return(As=(0,O.Z)(function*(I,A){const k=yield mr(I),q=au(A),se={method:"POST",headers:k,body:JSON.stringify(q)};let he;try{he=yield(yield fetch(yo(I.appConfig),se)).json()}catch(Oe){throw Sn.create("token-subscribe-failed",{errorInfo:Oe})}if(he.error)throw Sn.create("token-subscribe-failed",{errorInfo:he.error.message});if(!he.token)throw Sn.create("token-subscribe-no-token");return he.token})).apply(this,arguments)}function xa(I,A){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(I,A){const k=yield mr(I),q=au(A.subscriptionOptions),se={method:"PATCH",headers:k,body:JSON.stringify(q)};let he;try{he=yield(yield fetch(`${yo(I.appConfig)}/${A.token}`,se)).json()}catch(Oe){throw Sn.create("token-update-failed",{errorInfo:Oe})}if(he.error)throw Sn.create("token-update-failed",{errorInfo:he.error.message});if(!he.token)throw Sn.create("token-update-no-token");return he.token})).apply(this,arguments)}function yh(I,A){return gl.apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(I,A){const q={method:"DELETE",headers:yield mr(I)};try{const he=yield(yield fetch(`${yo(I.appConfig)}/${A}`,q)).json();if(he.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:he.error.message})}catch(se){throw Sn.create("token-unsubscribe-failed",{errorInfo:se})}})).apply(this,arguments)}function yo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function mr(I){return ml.apply(this,arguments)}function ml(){return(ml=(0,O.Z)(function*({appConfig:I,installations:A}){const k=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function au({p256dh:I,auth:A,endpoint:k,vapidKey:q}){const se={web:{endpoint:k,auth:A,p256dh:I}};return q!==_p&&(se.web.applicationPubKey=q),se}const St=6048e5;function lu(I){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(I){const A=yield Yt(I.swRegistration,I.vapidKey),k={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:Rr(A.getKey("auth")),p256dh:Rr(A.getKey("p256dh"))},q=yield Rn(I.firebaseDependencies);if(q){if(Un(q.subscriptionOptions,k))return Date.now()>=q.createTime+St?Oc(I,{token:q.token,createTime:Date.now(),subscriptionOptions:k}):q.token;try{yield yh(I.firebaseDependencies,q.token)}catch(se){console.warn(se)}return vo(I.firebaseDependencies,k)}return vo(I.firebaseDependencies,k)})).apply(this,arguments)}function kc(I){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,O.Z)(function*(I){const A=yield Rn(I.firebaseDependencies);A&&(yield yh(I.firebaseDependencies,A.token),yield In(I.firebaseDependencies));const k=yield I.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Oc(I,A){return _l.apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(I,A){try{const k=yield xa(I.firebaseDependencies,A),q=Object.assign(Object.assign({},A),{token:k,createTime:Date.now()});return yield Ss(I.firebaseDependencies,q),k}catch(k){throw yield kc(I),k}})).apply(this,arguments)}function vo(I,A){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*(I,A){const q={token:yield Rc(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Ss(I,q),q.token})).apply(this,arguments)}function Yt(I,A){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,O.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ph(A)})})).apply(this,arguments)}function Un(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function yl(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const k=A.notification.title;k&&(I.notification.title=k);const q=A.notification.body;q&&(I.notification.body=q);const se=A.notification.image;se&&(I.notification.image=se)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const k=A.fcmOptions.link;k&&(I.fcmOptions.link=k);const q=A.fcmOptions.analytics_label;q&&(I.fcmOptions.analyticsLabel=q)}(A,I),A}function vl(I){return"object"==typeof I&&!!I&&Ac in I}function Fc(I,A){const k=[];for(let q=0;q<I.length;q++)k.push(I.charAt(q)),q<A.length&&k.push(A.charAt(q));return k.join("")}function bo(I){return Sn.create("missing-app-config-values",{valueName:I})}Fc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cu{constructor(A,k,q){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const se=function(I){if(!I||!I.options)throw bo("App Configuration Object");if(!I.name)throw bo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:k}=I;for(const q of A)if(!k[q])throw bo(q);return{appName:I.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:se,installations:k,analyticsProvider:q}}_delete(){return Promise.resolve()}}function sr(I){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(fh,{scope:Ia}),I.swRegistration.update().catch(()=>{})}catch(A){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function Lc(I,A){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield sr(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function Mi(I,A){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=_p)})).apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(I,A){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield Mi(I,null==A?void 0:A.vapidKey),yield Lc(I,null==A?void 0:A.serviceWorkerRegistration),lu(I)})).apply(this,arguments)}function yp(I,A,k){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(I,A,k){const q=Bc(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(q,{message_id:k[Ac],message_name:k[Hs],message_time:k[fl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bc(I){switch(I){case Sa.NOTIFICATION_CLICKED:return"notification_open";case Sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wo(){return(wo=(0,O.Z)(function*(I,A){const k=A.data;if(!k.isFirebaseMessaging)return;I.onMessageHandler&&k.messageType===Sa.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(yl(k)):I.onMessageHandler.next(yl(k)));const q=k.data;vl(q)&&"1"===q[zn]&&(yield yp(I,k.messageType,q))})).apply(this,arguments)}const wl="@firebase/messaging";function jc(){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ie._registerComponent)(new te.wA("messaging",I=>{const A=new cu(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function(I,A){return wo.apply(this,arguments)}(A,k)),A},"PUBLIC")),(0,ie._registerComponent)(new te.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:q=>function(I,A){return ka.apply(this,arguments)}(A,q)}},"PRIVATE")),(0,ie.registerVersion)(wl,"0.9.12"),(0,ie.registerVersion)(wl,"0.9.12","esm2017");const hu="analytics",qc="firebase_id",fu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qs="https://www.googletagmanager.com/gtag/js",_r=new de.Yd("@firebase/analytics");function Fa(I){return Promise.all(I.map(A=>A.catch(k=>k)))}function wh(I,A){const k=document.createElement("script");k.src=`${qs}?l=${I}&id=${A}`,k.async=!0,document.head.appendChild(k)}function Ws(I,A,k,q,se,he){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(I,A,k,q,se,he){const Oe=q[se];try{if(Oe)yield A[Oe];else{const Dt=(yield Fa(k)).find(kt=>kt.measurementId===se);Dt&&(yield A[Dt.appId])}}catch(Xe){_r.error(Xe)}I("config",se,he)})).apply(this,arguments)}function r_(I,A,k,q,se){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(I,A,k,q,se){try{let he=[];if(se&&se.send_to){let Oe=se.send_to;Array.isArray(Oe)||(Oe=[Oe]);const Xe=yield Fa(k);for(const Dt of Oe){const kt=Xe.find(Pt=>Pt.measurementId===Dt),tn=kt&&A[kt.appId];if(!tn){he=[];break}he.push(tn)}}0===he.length&&(he=Object.values(A)),yield Promise.all(he),I("event",q,se||{})}catch(he){_r.error(he)}})).apply(this,arguments)}function Ep(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(qs))return A;return null}const Zi=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ns=new class{constructor(A={},k=1e3){this.throttleMetadata=A,this.intervalMillis=k}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,k){this.throttleMetadata[A]=k}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Zc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Tp(I){return El.apply(this,arguments)}function El(){return(El=(0,O.Z)(function*(I){var A;const{appId:k,apiKey:q}=I,se={method:"GET",headers:Zc(q)},he=fu.replace("{app-id}",k),Oe=yield fetch(he,se);if(200!==Oe.status&&304!==Oe.status){let Xe="";try{const Dt=yield Oe.json();(null===(A=Dt.error)||void 0===A?void 0:A.message)&&(Xe=Dt.error.message)}catch(Dt){}throw Zi.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:Xe})}return Oe.json()})).apply(this,arguments)}function Va(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(I,A=Ns,k){const{appId:q,apiKey:se,measurementId:he}=I.options;if(!q)throw Zi.create("no-app-id");if(!se){if(he)return{measurementId:he,appId:q};throw Zi.create("no-api-key")}const Oe=A.getThrottleMetadata(q)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Eh;return setTimeout((0,O.Z)(function*(){Xe.abort()}),void 0!==k?k:6e4),zi({appId:q,apiKey:se,measurementId:he},Oe,Xe,A)})).apply(this,arguments)}function zi(I,A,k){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,O.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:k},q,se=Ns){const{appId:he,measurementId:Oe}=I;try{yield gu(q,A)}catch(Xe){if(Oe)return _r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${Xe.message}]`),{appId:he,measurementId:Oe};throw Xe}try{const Xe=yield Tp(I);return se.deleteThrottleMetadata(he),Xe}catch(Xe){if(!o0(Xe)){if(se.deleteThrottleMetadata(he),Oe)return _r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${Xe.message}]`),{appId:he,measurementId:Oe};throw Xe}const Dt=503===Number(Xe.customData.httpStatus)?(0,oe.$s)(k,se.intervalMillis,30):(0,oe.$s)(k,se.intervalMillis),kt={throttleEndTimeMillis:Date.now()+Dt,backoffCount:k+1};return se.setThrottleMetadata(he,kt),_r.debug(`Calling attemptFetch again in ${Dt} millis`),zi(I,kt,q,se)}})).apply(this,arguments)}function gu(I,A){return new Promise((k,q)=>{const se=Math.max(A-Date.now(),0),he=setTimeout(k,se);I.addEventListener(()=>{clearTimeout(he),q(Zi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function o0(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Eh{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Ip(){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(){if(!(0,oe.hl)())return _r.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(I){return _r.warn(Zi.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(I,A,k,q,se,he,Oe){var Xe;const Dt=Va(I);Dt.then(Sr=>{k[Sr.measurementId]=Sr.appId,I.options.measurementId&&Sr.measurementId!==I.options.measurementId&&_r.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sr=>_r.error(Sr)),A.push(Dt);const kt=Ip().then(Sr=>{if(Sr)return q.getId()}),[tn,Pt]=yield Promise.all([Dt,kt]);Ep()||wh(he,tn.measurementId),se("js",new Date);const Ir=null!==(Xe=null==Oe?void 0:Oe.config)&&void 0!==Xe?Xe:{};return Ir.origin="firebase",Ir.update=!0,null!=Pt&&(Ir[qc]=Pt),se("config",tn.measurementId,Ir),tn.measurementId})).apply(this,arguments)}class Dl{constructor(A){this.app=A}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},ct=[];const En={};let Jo,xs,Tl="dataLayer",or=!1;function Do(I,A,k){!function(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((q,se)=>`(${se+1}) ${q}`).join(" "),k=Zi.create("invalid-analytics-context",{errorInfo:A});_r.warn(k.message)}}();const q=I.options.appId;if(!q)throw Zi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Zi.create("no-api-key");_r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[q])throw Zi.create("already-exists",{id:q});if(!or){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(Tl);const{wrappedGtag:he,gtagCore:Oe}=function(I,A,k,q,se){let he=function(...Oe){window[q].push(arguments)};return window[se]&&"function"==typeof window[se]&&(he=window[se]),window[se]=function(I,A,k,q){function he(){return(he=(0,O.Z)(function*(Oe,Xe,Dt){try{"event"===Oe?yield r_(I,A,k,Xe,Dt):"config"===Oe?yield Ws(I,A,k,q,Xe,Dt):I("set",Xe)}catch(kt){_r.error(kt)}})).apply(this,arguments)}return function(Oe,Xe,Dt){return he.apply(this,arguments)}}(he,I,A,k),{gtagCore:he,wrappedGtag:window[se]}}(Xt,ct,En,Tl,"gtag");xs=he,Jo=Oe,or=!0}return Xt[q]=function(I,A,k,q,se,he,Oe){return Qo.apply(this,arguments)}(I,ct,En,A,Jo,Tl,k),new Dl(I)}function Kn(){return(Kn=(0,O.Z)(function*(I,A,k,q,se){if(se&&se.global)I("event",k,q);else{const he=yield A;I("event",k,Object.assign(Object.assign({},q),{send_to:he}))}})).apply(this,arguments)}function ci(){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}const jn="@firebase/analytics";(0,ie._registerComponent)(new te.wA(hu,(A,{options:k})=>Do(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ie._registerComponent)(new te.wA("analytics-internal",function(A){try{const k=A.getProvider(hu).getImmediate();return{logEvent:(q,se,he)=>function(I,A,k,q){I=(0,oe.m9)(I),function(I,A,k,q,se){return Kn.apply(this,arguments)}(xs,Xt[I.app.options.appId],A,k,q).catch(se=>_r.error(se))}(k,q,se,he)}}catch(k){throw Zi.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ie.registerVersion)(jn,"0.7.8"),(0,ie.registerVersion)(jn,"0.7.8","esm2017");var yi=B(7771),l0=B(3637),Np=B(8307),ea=B(9746),$a=B(2639);const s_=new u.GfV("7.3.0"),vu="__angularfire_symbol__analyticsIsSupportedValue",Qn="__angularfire_symbol__analyticsIsSupported",Kc="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",Ao="__angularfire_symbol__messagingIsSupportedValue",ar="__angularfire_symbol__messagingIsSupported";function vi(I,A,k){if(A){if(1===A.length)return A[0];const he=A.filter(Oe=>Oe.app===k);if(1===he.length)return he[0]}return k.container.getProvider(I).getImmediate({optional:!0})}globalThis[Qn]||(globalThis[Qn]=ci().then(I=>globalThis[vu]=I).catch(()=>globalThis[vu]=!1)),globalThis[ar]||(globalThis[ar]=jc().then(I=>globalThis[Ao]=I).catch(()=>globalThis[Ao]=!1)),globalThis[So]||(globalThis[So]=t_().then(I=>globalThis[Kc]=I).catch(()=>globalThis[Kc]=!1));const Rs=(I,A)=>{const k=A?[A]:(0,G.C6)(),q=[];return k.forEach(se=>{se.container.getProvider(I).instances.forEach(Oe=>{q.includes(Oe)||q.push(Oe)})}),q};function ks(){}class No{constructor(A,k=yi.N){this.zone=A,this.delegate=k}now(){return this.delegate.now()}schedule(A,k,q){const se=this.zone;return this.delegate.schedule(function(Oe){se.runGuarded(()=>{A.apply(this,[Oe])})},k,q)}}class xo{constructor(A){this.zone=A,this.task=null}call(A,k){const q=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ks,{},ks,ks)),k.pipe((0,Np.b)({next:q,complete:q,error:q})).subscribe(A).add(q)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ah=(()=>{class I{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new No(Zone.current)),this.insideAngular=k.run(()=>new No(Zone.current,l0.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(k){return new(k||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ys(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Mp(I){return I.pipe((0,ea.QV)(Ys().outsideAngular))}function vr(I){return Ys(),function(I){return function(k){return(k=k.lift(new xo(I.ngZone))).pipe((0,$a.R)(I.outsideAngular),(0,ea.QV)(I.insideAngular))}}(Ys())(I)}},982:(st,Ee,B)=>{"use strict";B.d(Ee,{$:()=>Vc,A:()=>Ht,E:()=>Tc,G:()=>dl,I:()=>Rr,K:()=>Nt,L:()=>Ss,M:()=>Mc,N:()=>ou,P:()=>Oe,Q:()=>Sn,R:()=>ja,T:()=>zo,U:()=>kr,V:()=>yh,W:()=>au,X:()=>ui,Y:()=>vl,Z:()=>vh,_:()=>Ni,a:()=>or,a0:()=>yp,a1:()=>Bc,a2:()=>wo,a3:()=>Uc,a4:()=>bh,a5:()=>jc,a6:()=>Hc,a7:()=>Gc,a8:()=>vp,a9:()=>r0,aA:()=>Za,aB:()=>Pp,aC:()=>Mn,aG:()=>Do,aJ:()=>As,aa:()=>hu,ab:()=>wp,ae:()=>_r,af:()=>wh,ag:()=>Cp,aj:()=>Pc,ak:()=>s0,am:()=>gu,an:()=>Qo,ao:()=>Mr,ap:()=>ir,aq:()=>Zo,ar:()=>ai,as:()=>dn,at:()=>g_,au:()=>Eu,av:()=>Ln,aw:()=>Le,ax:()=>vn,ay:()=>ls,az:()=>d0,b:()=>Jo,c:()=>Xc,d:()=>ta,e:()=>Ga,f:()=>Wa,g:()=>ed,h:()=>u0,i:()=>Np,j:()=>c0,k:()=>Os,l:()=>Ha,m:()=>m_,o:()=>gn,r:()=>I,s:()=>vr,u:()=>se,z:()=>mi});var u=B(8239),G=B(3854),O=B(8026);function de(b,g){var y={};for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&g.indexOf(E)<0&&(y[E]=b[E]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(E=Object.getOwnPropertySymbols(b);x<E.length;x++)g.indexOf(E[x])<0&&Object.prototype.propertyIsEnumerable.call(b,E[x])&&(y[E[x]]=b[E[x]])}return y}var He=B(5422),Ae=B(3910);const gn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ht={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const mi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Wn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cn=new He.Yd("@firebase/auth");function rn(b,...g){cn.logLevel<=He.in.ERROR&&cn.error(`Auth (${O.SDK_VERSION}): ${b}`,...g)}function dn(b,...g){throw hr(b,...g)}function Ln(b,...g){return hr(b,...g)}function Hi(b,g,y){const E=Object.assign(Object.assign({},Wn()),{[g]:y});return new G.LL("auth","Firebase",E).create(g,{appName:b.name})}function si(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&dn(b,"argument-error"),Hi(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hr(b,...g){if("string"!=typeof b){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(y,...E)}return wt.create(b,...g)}function Le(b,g,...y){if(!b)throw hr(g,...y)}function fr(b){const g="INTERNAL ASSERTION FAILED: "+b;throw rn(g),new Error(g)}function ir(b,g){b||fr(g)}const ot=new Map;function vn(b){ir(b instanceof Function,"Expected a class definition");let g=ot.get(b);return g?(ir(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,ot.set(b,g),g)}function oi(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function jr(){return"http:"===pr()||"https:"===pr()}function pr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class _n{constructor(g,y){this.shortDelay=g,this.longDelay=y,ir(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jr()||(0,G.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qe(b,g){ir(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class gt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},as=new _n(3e4,6e4);function hn(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function It(b,g,y,E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,u.Z)(function*(b,g,y,E,x={}){return tr(b,x,(0,u.Z)(function*(){let R={},re={};E&&("GET"===g?re=E:R={body:JSON.stringify(E)});const we=(0,G.xO)(Object.assign({key:b.config.apiKey},re)).slice(1),et=yield b._getAdditionalHeaders();return et["Content-Type"]="application/json",b.languageCode&&(et["X-Firebase-Locale"]=b.languageCode),gt.fetch()(Ge(b,b.config.apiHost,y,we),Object.assign({method:g,headers:et,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function tr(b,g,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,u.Z)(function*(b,g,y){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},Gi),g);try{const x=new Ne(b),R=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const re=yield R.json();if("needConfirmation"in re)throw lt(b,"account-exists-with-different-credential",re);if(R.ok&&!("errorMessage"in re))return re;{const we=R.ok?re.errorMessage:re.error.message,[et,Be]=we.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw lt(b,"credential-already-in-use",re);if("EMAIL_EXISTS"===et)throw lt(b,"email-already-in-use",re);const _t=E[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw Hi(b,_t,Be);dn(b,_t)}}catch(x){if(x instanceof G.ZR)throw x;dn(b,"network-request-failed")}})).apply(this,arguments)}function bt(b,g,y,E){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,u.Z)(function*(b,g,y,E,x={}){const R=yield It(b,g,y,E,x);return"mfaPendingCredential"in R&&dn(b,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ge(b,g,y,E){const x=`${g}${y}?${E}`;return b.config.emulator?qe(b.config,x):`${b.config.apiScheme}://${x}`}class Ne{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Ln(this.auth,"network-request-failed")),as.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lt(b,g,y){const E={appName:b.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const x=Ln(b,g,E);return x.customData._tokenResponse=y,x}function Rt(){return(Rt=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Jt(b,g){return Q.apply(this,arguments)}function Q(){return(Q=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Z(b,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function _e(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function W(){return(W=(0,u.Z)(function*(b,g=!1){const y=(0,G.m9)(b),E=yield y.getIdToken(g),x=Ue(E);Le(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const R="object"==typeof x.firebase?x.firebase:void 0,re=null==R?void 0:R.sign_in_provider;return{claims:x,token:E,authTime:_e(pe(x.auth_time)),issuedAtTime:_e(pe(x.iat)),expirationTime:_e(pe(x.exp)),signInProvider:re||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function pe(b){return 1e3*Number(b)}function Ue(b){const[g,y,E]=b.split(".");if(void 0===g||void 0===y||void 0===E)return rn("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,G.tV)(y);return x?JSON.parse(x):(rn("Failed to decode base64 JWT payload"),null)}catch(x){return rn("Caught error parsing JWT payload as JSON",x),null}}function Ct(b,g){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,u.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof G.ZR&&Zt(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function Zt({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Nn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,u.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,u.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class Tn{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=_e(this.lastLoginAt),this.creationTime=_e(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function on(b){return qn.apply(this,arguments)}function qn(){return(qn=(0,u.Z)(function*(b){var g;const y=b.auth,E=yield b.getIdToken(),x=yield Ct(b,Z(y,{idToken:E}));Le(null==x?void 0:x.users.length,y,"internal-error");const R=x.users[0];b._notifyReloadListener(R);const re=(null===(g=R.providerUserInfo)||void 0===g?void 0:g.length)?Ii(R.providerUserInfo):[],we=xn(b.providerData,re),_t=!!b.isAnonymous&&!(b.email&&R.passwordHash||(null==we?void 0:we.length)),yn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:we,metadata:new Tn(R.createdAt,R.lastLoginAt),isAnonymous:_t};Object.assign(b,yn)})).apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(function*(b){const g=(0,G.m9)(b);yield on(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function xn(b,g){return[...b.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function Ii(b){return b.map(g=>{var{providerId:y}=g,E=de(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function gr(){return(gr=(0,u.Z)(function*(b,g){const y=yield tr(b,{},(0,u.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:R}=b.config,re=Ge(b,x,"/v1/token",`key=${R}`),we=yield b._getAdditionalHeaders();return we["Content-Type"]="application/x-www-form-urlencoded",gt.fetch()(re,{method:"POST",headers:we,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Le(g.idToken,"internal-error"),Le(void 0!==g.idToken,"internal-error"),Le(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(b){const g=Ue(b);return Le(g,"internal-error"),Le(void 0!==g.exp,"internal-error"),Le(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,u.Z)(function*(){return Le(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,u.Z)(function*(){const{accessToken:x,refreshToken:R,expiresIn:re}=yield function(b,g){return gr.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(x,R,Number(re))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:x,expirationTime:R}=y,re=new Si;return E&&(Le("string"==typeof E,"internal-error",{appName:g}),re.refreshToken=E),x&&(Le("string"==typeof x,"internal-error",{appName:g}),re.accessToken=x),R&&(Le("number"==typeof R,"internal-error",{appName:g}),re.expirationTime=R),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Si,this.toJSON())}_performRefresh(){return fr("not implemented")}}function bn(b,g){Le("string"==typeof b||void 0===b,"internal-error",{appName:g})}class qi{constructor(g){var{uid:y,auth:E,stsTokenManager:x}=g,R=de(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Tn(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,u.Z)(function*(){const E=yield Ct(y,y.stsTokenManager.getToken(y.auth,g));return Le(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function(b){return W.apply(this,arguments)}(this,g)}reload(){return function(b){return Bt.apply(this,arguments)}(this)}_assign(g){this!==g&&(Le(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,u.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield on(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,u.Z)(function*(){const y=yield g.getIdToken();return yield Ct(g,function(b,g){return Rt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,x,R,re,we,et,Be,_t;const yn=null!==(E=y.displayName)&&void 0!==E?E:void 0,kn=null!==(x=y.email)&&void 0!==x?x:void 0,un=null!==(R=y.phoneNumber)&&void 0!==R?R:void 0,oa=null!==(re=y.photoURL)&&void 0!==re?re:void 0,ld=null!==(we=y.tenantId)&&void 0!==we?we:void 0,ud=null!==(et=y._redirectEventId)&&void 0!==et?et:void 0,Up=null!==(Be=y.createdAt)&&void 0!==Be?Be:void 0,$p=null!==(_t=y.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:jp,emailVerified:Lh,isAnonymous:aa,providerData:Hp,stsTokenManager:Rl}=y;Le(jp&&Rl,g,"internal-error");const fE=Si.fromJSON(this.name,Rl);Le("string"==typeof jp,g,"internal-error"),bn(yn,g.name),bn(kn,g.name),Le("boolean"==typeof Lh,g,"internal-error"),Le("boolean"==typeof aa,g,"internal-error"),bn(un,g.name),bn(oa,g.name),bn(ld,g.name),bn(ud,g.name),bn(Up,g.name),bn($p,g.name);const kl=new qi({uid:jp,auth:g,email:kn,emailVerified:Lh,displayName:yn,isAnonymous:aa,photoURL:oa,phoneNumber:un,tenantId:ld,stsTokenManager:fE,createdAt:Up,lastLoginAt:$p});return Hp&&Array.isArray(Hp)&&(kl.providerData=Hp.map(ki=>Object.assign({},ki))),ud&&(kl._redirectEventId=ud),kl}static _fromIdTokenResponse(g,y,E=!1){return(0,u.Z)(function*(){const x=new Si;x.updateFromServerResponse(y);const R=new qi({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield on(R),R})()}}const Nt=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(y,E){var x=this;return(0,u.Z)(function*(){x.storage[y]=E})()}_get(y){var E=this;return(0,u.Z)(function*(){const x=E.storage[y];return void 0===x?null:x})()}_remove(y){var E=this;return(0,u.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return b.type="NONE",b})();function ls(b,g,y){return`firebase:${b}:${g}:${y}`}class Bn{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:x,name:R}=this.auth;this.fullUserKey=ls(this.userKey,x.apiKey,R),this.fullPersistenceKey=ls("persistence",x.apiKey,R),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,u.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?qi._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,u.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,u.Z)(function*(){if(!y.length)return new Bn(vn(Nt),g,E);const x=(yield Promise.all(y.map(function(){var Be=(0,u.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let R=x[0]||vn(Nt);const re=ls(E,g.config.apiKey,g.name);let we=null;for(const Be of y)try{const _t=yield Be._get(re);if(_t){const yn=qi._fromJSON(g,_t);Be!==R&&(we=yn),R=Be;break}}catch(_t){}const et=x.filter(Be=>Be._shouldAllowMigration);return R._shouldAllowMigration&&et.length?(R=et[0],we&&(yield R._set(re,we.toJSON())),yield Promise.all(y.map(function(){var Be=(0,u.Z)(function*(_t){if(_t!==R)try{yield _t._remove(re)}catch(yn){}});return function(_t){return Be.apply(this,arguments)}}())),new Bn(R,g,E)):new Bn(R,g,E)})()}}function eu(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Wo(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Da(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(zt(g))return"Blackberry";if(Ec(g))return"Webos";if(Kr(g))return"Safari";if((g.includes("chrome/")||po(g))&&!g.includes("edge/"))return"Chrome";if(ai(g))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Da(b=(0,G.z$)()){return/firefox\//i.test(b)}function Kr(b=(0,G.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function po(b=(0,G.z$)()){return/crios\//i.test(b)}function Wo(b=(0,G.z$)()){return/iemobile/i.test(b)}function ai(b=(0,G.z$)()){return/android/i.test(b)}function zt(b=(0,G.z$)()){return/blackberry/i.test(b)}function Ec(b=(0,G.z$)()){return/webos/i.test(b)}function Zo(b=(0,G.z$)()){return/iphone|ipad|ipod/i.test(b)}function Mr(b=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Ta(b=(0,G.z$)()){return Zo(b)||ai(b)||Ec(b)||zt(b)||/windows phone/i.test(b)||Wo(b)}function Qr(b,g=[]){let y;switch(b){case"Browser":y=eu((0,G.z$)());break;case"Worker":y=`${eu((0,G.z$)())}-${b}`;break;default:y=b}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${O.SDK_VERSION}/${E}`}class Jm{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wi(this),this.idTokenSubscription=new Wi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=vn(y)),this._initializationPromise=this.queue((0,u.Z)(function*(){var x,R;if(!E._deleted&&(E.persistenceManager=yield Bn.create(E,g),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(re){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,u.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,u.Z)(function*(){var E;let x=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const R=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,re=null==x?void 0:x._redirectEventId,we=yield y.tryRedirectSignIn(g);(!R||R===re)&&(null==we?void 0:we.user)&&(x=we.user)}return x?x._redirectEventId?(Le(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===x._redirectEventId?y.directlySetCurrentUser(x):y.reloadAndSetCurrentUserOrClear(x)):y.reloadAndSetCurrentUserOrClear(x):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,u.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(x){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,u.Z)(function*(){try{yield on(g)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,u.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){const E=g?(0,G.m9)(g):null;return E&&Le(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,u.Z)(function*(){if(!y._deleted)return g&&Le(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,u.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,u.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,u.Z)(function*(){yield y.assertedPersistence.setPersistence(vn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,u.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,u.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&vn(g)||y._popupRedirectResolver;Le(E,y,"argument-error"),y.redirectPersistenceManager=yield Bn.create(y,[vn(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,u.Z)(function*(){var E,x;return y._isInitialized&&(yield y.queue((0,u.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,u.Z)(function*(){if(g===y.currentUser)return y.queue((0,u.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,x){if(this._deleted)return()=>{};const R="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Le(re,this,"internal-error"),re.then(()=>R(this.currentUser)),"function"==typeof y?g.addObserver(y,E,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,u.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Qr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,u.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Mn(b){return(0,G.m9)(b)}class Wi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(y=>this.observer=y)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Tc(b,g,y){const E=Mn(b);Le(E._canInitEmulator,E,"emulator-config-failed"),Le(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!(null==y?void 0:y.disableWarnings),R=cl(g),{host:re,port:we}=function(b){const g=cl(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const R=x[1];return{host:R,port:us(E.substr(R.length+1))}}{const[R,re]=E.split(":");return{host:R,port:us(re)}}}(g);E.config.emulator={url:`${R}//${re}${null===we?"":`:${we}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:re,port:we,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function cl(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function us(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class dl{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return fr("not implemented")}_getIdTokenResponse(g){return fr("not implemented")}_linkToIdToken(g,y){return fr("not implemented")}_getReauthenticationResolver(g){return fr("not implemented")}}function lh(b,g){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:resetPassword",hn(b,g))})).apply(this,arguments)}function mp(b,g){return uh.apply(this,arguments)}function uh(){return(uh=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Sc(b,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",hn(b,g))})).apply(this,arguments)}function ch(){return(ch=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithPassword",hn(b,g))})).apply(this,arguments)}function tu(b,g){return dh.apply(this,arguments)}function dh(){return(dh=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:sendOobCode",hn(b,g))})).apply(this,arguments)}function e_(b,g){return hh.apply(this,arguments)}function hh(){return(hh=(0,u.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function n0(b,g){return nu.apply(this,arguments)}function nu(){return(nu=(0,u.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function t_(b,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,u.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function fh(b,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,u.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function ru(){return(ru=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithEmailLink",hn(b,g))})).apply(this,arguments)}function Hs(){return(Hs=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithEmailLink",hn(b,g))})).apply(this,arguments)}class fl extends dl{constructor(g,y,E,x=null){super("password",E),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new fl(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new fl(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,u.Z)(function*(){switch(y.signInMethod){case"password":return function(b,g){return ch.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(b,g){return ru.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:dn(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,u.Z)(function*(){switch(E.signInMethod){case"password":return mp(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(b,g){return Hs.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:dn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function zn(b,g){return iu.apply(this,arguments)}function iu(){return(iu=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithIdp",hn(b,g))})).apply(this,arguments)}class Rr extends dl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Rr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):dn("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=y,R=de(y,["providerId","signInMethod"]);if(!E||!x)return null;const re=new Rr(E,x);return re.idToken=R.idToken||void 0,re.accessToken=R.accessToken||void 0,re.secret=R.secret,re.nonce=R.nonce,re.pendingToken=R.pendingToken||null,re}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,zn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,zn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,G.xO)(y)}return g}}function ph(b,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:sendVerificationCode",hn(b,g))})).apply(this,arguments)}function pl(){return(pl=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithPhoneNumber",hn(b,g))})).apply(this,arguments)}function li(){return(li=(0,u.Z)(function*(b,g){const y=yield bt(b,"POST","/v1/accounts:signInWithPhoneNumber",hn(b,g));if(y.temporaryProof)throw lt(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Nc={USER_NOT_FOUND:"user-not-found"};function Na(){return(Na=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithPhoneNumber",hn(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Nc)})).apply(this,arguments)}class Ai extends dl{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Ai({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Ai({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(b,g){return pl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(b,g){return li.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(b,g){return Na.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}=g;return E||y||x||R?new Ai({verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}):null}}class Rn{constructor(g){var y,E,x,R,re,we;const et=(0,G.zd)((0,G.pd)(g)),Be=null!==(y=et.apiKey)&&void 0!==y?y:null,_t=null!==(E=et.oobCode)&&void 0!==E?E:null,yn=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=et.mode)&&void 0!==x?x:null);Le(Be&&_t&&yn,"argument-error"),this.apiKey=Be,this.operation=yn,this.code=_t,this.continueUrl=null!==(R=et.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(re=et.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(we=et.tenantId)&&void 0!==we?we:null}static parseLink(g){const y=function(b){const g=(0,G.zd)((0,G.pd)(b)).link,y=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(b)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||y||g||b}(g);try{return new Rn(y)}catch(E){return null}}}let Ss=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,E){return fl._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const x=Rn.parseLink(E);return Le(x,"argument-error"),fl._fromEmailAndCode(y,x.code,x.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class ds{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class In extends ds{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class zo extends In{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Le("providerId"in y&&"signInMethod"in y,"argument-error"),Rr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Le(g.idToken||g.accessToken,"argument-error"),Rr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return zo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return zo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:R,nonce:re,providerId:we}=g;if(!E&&!x&&!y&&!R||!we)return null;try{return new zo(we)._credential({idToken:y,accessToken:E,nonce:re,pendingToken:R})}catch(et){return null}}}let Mc=(()=>{class b extends In{constructor(){super("facebook.com")}static credential(y){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(E){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),ou=(()=>{class b extends In{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:x}=y;if(!E&&!x)return null;try{return b.credential(E,x)}catch(R){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Sn=(()=>{class b extends In{constructor(){super("github.com")}static credential(y){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(E){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class As extends dl{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,zn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,zn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:R}=y;return E&&x&&R&&E===x?new As(E,R):null}static _create(g,y){return new As(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kr extends ds{constructor(g){Le(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return kr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return kr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=As.fromJSON(g);return Le(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return As._create(E,y)}catch(x){return null}}}let yh=(()=>{class b extends In{constructor(){super("twitter.com")}static credential(y,E){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=y;if(!E||!x)return null;try{return b.credential(E,x)}catch(R){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function gl(b,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signUp",hn(b,g))})).apply(this,arguments)}class mr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,x=!1){return(0,u.Z)(function*(){const R=yield qi._fromIdTokenResponse(g,E,x),re=ml(E);return new mr({user:R,providerId:re,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,u.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=ml(E);return new mr({user:g,providerId:x,_tokenResponse:E,operationType:y})})()}}function ml(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function au(b){return St.apply(this,arguments)}function St(){return(St=(0,u.Z)(function*(b){var g;const y=Mn(b);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new mr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield gl(y,{returnSecureToken:!0}),x=yield mr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class lu extends G.ZR{constructor(g,y,E,x){var R;super(y.code,y.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:g.name,tenantId:null!==(R=g.tenantId)&&void 0!==R?R:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,x){return new lu(g,y,E,x)}}function uu(b,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?lu._fromErrorAndOperation(b,R,g,E):R})}function kc(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Pc(b,g){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,u.Z)(function*(b,g){const y=(0,G.m9)(b);yield Me(!0,y,g);const{providerUserInfo:E}=yield Jt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=kc(E||[]);return y.providerData=y.providerData.filter(R=>x.has(R.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function _l(b,g){return vo.apply(this,arguments)}function vo(){return(vo=(0,u.Z)(function*(b,g,y=!1){const E=yield Ct(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return mr._forOperation(b,"link",E)})).apply(this,arguments)}function Me(b,g,y){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,u.Z)(function*(b,g,y){yield on(g);const x=!1===b?"provider-already-linked":"no-such-provider";Le(kc(g.providerData).has(y)===b,g.auth,x)})).apply(this,arguments)}function Ma(b,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,u.Z)(function*(b,g,y=!1){const{auth:E}=b,x="reauthenticate";try{const R=yield Ct(b,uu(E,x,g,b),y);Le(R.idToken,E,"internal-error");const re=Ue(R.idToken);Le(re,E,"internal-error");const{sub:we}=re;return Le(b.uid===we,E,"user-mismatch"),mr._forOperation(b,x,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&dn(E,"user-mismatch"),R}})).apply(this,arguments)}function yl(b,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,u.Z)(function*(b,g,y=!1){const E="signIn",x=yield uu(b,E,g),R=yield mr._fromIdTokenResponse(b,E,x);return y||(yield b._updateCurrentUser(R.user)),R})).apply(this,arguments)}function ui(b,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,u.Z)(function*(b,g){return yl(Mn(b),g)})).apply(this,arguments)}function vl(b,g){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,u.Z)(function*(b,g){const y=(0,G.m9)(b);return yield Me(!1,y,g.providerId),_l(y,g)})).apply(this,arguments)}function vh(b,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,u.Z)(function*(b,g){return Ma((0,G.m9)(b),g)})).apply(this,arguments)}function cu(b,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,u.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithCustomToken",hn(b,g))})).apply(this,arguments)}function Ni(b,g){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,u.Z)(function*(b,g){const y=Mn(b),E=yield cu(y,{token:g,returnSecureToken:!0}),x=yield mr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class xi{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Mi._fromServerResponse(g,y):dn(g,"internal-error")}}class Mi extends xi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Mi(y)}}function bl(b,g,y){var E;Le((null===(E=y.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),Le(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Le(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Le(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Vc(b,g,y){return ka.apply(this,arguments)}function ka(){return(ka=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b),x={requestType:"PASSWORD_RESET",email:g};y&&bl(E,x,y),yield n0(E,x)})).apply(this,arguments)}function yp(b,g,y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,u.Z)(function*(b,g,y){yield lh((0,G.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Bc(b,g){return du.apply(this,arguments)}function du(){return(du=(0,u.Z)(function*(b,g){yield Sc((0,G.m9)(b),{oobCode:g})})).apply(this,arguments)}function wo(b,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,u.Z)(function*(b,g){const y=(0,G.m9)(b),E=yield lh(y,{oobCode:g}),x=E.requestType;switch(Le(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(E.mfaInfo,y,"internal-error");default:Le(E.email,y,"internal-error")}let R=null;return E.mfaInfo&&(R=xi._fromServerResponse(Mn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:x}})).apply(this,arguments)}function Uc(b,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,u.Z)(function*(b,g){const{data:y}=yield wo((0,G.m9)(b),g);return y.email})).apply(this,arguments)}function bh(b,g,y){return $c.apply(this,arguments)}function $c(){return($c=(0,u.Z)(function*(b,g,y){const E=Mn(b),x=yield gl(E,{returnSecureToken:!0,email:g,password:y}),R=yield mr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function jc(b,g,y){return ui((0,G.m9)(b),Ss.credential(g,y))}function Hc(b,g,y){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b),x={requestType:"EMAIL_SIGNIN",email:g};Le(y.handleCodeInApp,E,"argument-error"),y&&bl(E,x,y),yield t_(E,x)})).apply(this,arguments)}function Gc(b,g){const y=Rn.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function vp(b,g,y){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b),x=Ss.credentialWithLink(g,y||oi());return Le(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ui(E,x)})).apply(this,arguments)}function Oa(b,g){return $n.apply(this,arguments)}function $n(){return($n=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:createAuthUri",hn(b,g))})).apply(this,arguments)}function r0(b,g){return bp.apply(this,arguments)}function bp(){return(bp=(0,u.Z)(function*(b,g){const E={identifier:g,continueUri:jr()?oi():"http://localhost"},{signinMethods:x}=yield Oa((0,G.m9)(b),E);return x||[]})).apply(this,arguments)}function hu(b,g){return qc.apply(this,arguments)}function qc(){return(qc=(0,u.Z)(function*(b,g){const y=(0,G.m9)(b),x={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&bl(y.auth,x,g);const{email:R}=yield e_(y.auth,x);R!==b.email&&(yield b.reload())})).apply(this,arguments)}function wp(b,g,y){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&bl(E.auth,R,y);const{email:re}=yield fh(E.auth,R);re!==b.email&&(yield b.reload())})).apply(this,arguments)}function fu(b,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,u.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function _r(b,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,u.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,G.m9)(b),R={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},re=yield Ct(E,fu(E.auth,R));E.displayName=re.displayName||null,E.photoURL=re.photoUrl||null;const we=E.providerData.find(({providerId:et})=>"password"===et);we&&(we.displayName=E.displayName,we.photoURL=E.photoURL),yield E._updateTokensIfNecessary(re)})).apply(this,arguments)}function wh(b,g){return Ws((0,G.m9)(b),g,null)}function Cp(b,g){return Ws((0,G.m9)(b),null,g)}function Ws(b,g,y){return Co.apply(this,arguments)}function Co(){return(Co=(0,u.Z)(function*(b,g,y){const{auth:E}=b,R={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(R.email=g),y&&(R.password=y);const re=yield Ct(b,mp(E,R));yield b._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class Eo{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class La extends Eo{constructor(g,y,E,x){super(g,y,E),this.username=x}}class Wc extends Eo{constructor(g,y){super(g,"facebook.com",y)}}class Ep extends La{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class i_ extends Eo{constructor(g,y){super(g,"google.com",y)}}class Zi extends La{constructor(g,y,E){super(g,"twitter.com",y,E)}}function s0(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(b){var g,y;if(!b)return null;const{providerId:E}=b,x=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},R=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&(null==b?void 0:b.idToken)){const re=null===(y=null===(g=Ue(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new Eo(R,"anonymous"!==re&&"custom"!==re?re:null)}if(!E)return null;switch(E){case"facebook.com":return new Wc(R,x);case"github.com":return new Ep(R,x);case"google.com":return new i_(R,x);case"twitter.com":return new Zi(R,x,b.screenName||null);case"custom":case"anonymous":return new Eo(R,null);default:return new Eo(R,E,x)}}(y)}class zi{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new zi("enroll",g)}static _fromMfaPendingCredential(g){return new zi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return zi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return zi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ba{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Mn(g),x=y.customData._serverResponse,R=(x.mfaInfo||[]).map(we=>xi._fromServerResponse(E,we));Le(x.mfaPendingCredential,E,"internal-error");const re=zi._fromMfaPendingCredential(x.mfaPendingCredential);return new Ba(re,R,function(){var we=(0,u.Z)(function*(et){const Be=yield et._process(E,re);delete x.mfaInfo,delete x.mfaPendingCredential;const _t=Object.assign(Object.assign({},x),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(y.operationType){case"signIn":const yn=yield mr._fromIdTokenResponse(E,y.operationType,_t);return yield E._updateCurrentUser(yn.user),yn;case"reauthenticate":return Le(y.user,E,"internal-error"),mr._forOperation(y.user,y.operationType,_t);default:dn(E,"internal-error")}});return function(et){return we.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,u.Z)(function*(){return y.signInResolver(g)})()}}function gu(b,g){var y;const E=(0,G.m9)(b),x=g;return Le(g.customData.operationType,E,"argument-error"),Le(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Ba._fromError(E,x)}function o0(b,g){return It(b,"POST","/v2/accounts/mfaEnrollment:start",hn(b,g))}class mu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>xi._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new mu(g)}getSession(){var g=this;return(0,u.Z)(function*(){return zi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,u.Z)(function*(){const x=g,R=yield E.getSession(),re=yield Ct(E.user,x._process(E.user.auth,R,y));return yield E.user._updateTokensIfNecessary(re),E.user.reload()})()}unenroll(g){var y=this;return(0,u.Z)(function*(){const E="string"==typeof g?g:g.uid,x=yield y.user.getIdToken(),R=yield Ct(y.user,function(b,g){return It(b,"POST","/v2/accounts/mfaEnrollment:withdraw",hn(b,g))}(y.user.auth,{idToken:x,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:re})=>re!==E),yield y.user._updateTokensIfNecessary(R);try{yield y.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const Dh=new WeakMap;function Qo(b){const g=(0,G.m9)(b);return Dh.has(g)||Dh.set(g,mu._fromUser(g)),Dh.get(g)}const Dl="__sak";class Xt{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jo=(()=>{class b extends Xt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,G.z$)();return Kr(b)||Zo(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Ta(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),R=this.localCache[E];x!==R&&y(E,R,x)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((we,et,Be)=>{this.notifyListeners(we,Be)});const x=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const we=this.storage.getItem(x);if(y.newValue!==we)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!E)return}const R=()=>{const we=this.storage.getItem(x);!E&&this.localCache[x]===we||this.notifyListeners(x,we)},re=this.storage.getItem(x);(0,G.w1)()&&10===document.documentMode&&re!==y.newValue&&y.newValue!==y.oldValue?setTimeout(R,10):R()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var x=()=>super._set,R=this;return(0,u.Z)(function*(){yield x().call(R,y,E),R.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,x=this;return(0,u.Z)(function*(){const R=yield E().call(x,y);return x.localCache[y]=JSON.stringify(R),R})()}_remove(y){var E=()=>super._remove,x=this;return(0,u.Z)(function*(){yield E().call(x,y),delete x.localCache[y]})()}}return b.type="LOCAL",b})(),or=(()=>{class b extends Xt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return b.type="SESSION",b})();let Sp=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(R=>R.isListeningto(y));if(E)return E;const x=new b(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,u.Z)(function*(){const x=y,{eventId:R,eventType:re,data:we}=x.data,et=E.handlersMap[re];if(!(null==et?void 0:et.size))return;x.ports[0].postMessage({status:"ack",eventId:R,eventType:re});const Be=Array.from(et).map(function(){var yn=(0,u.Z)(function*(kn){return kn(x.origin,we)});return function(kn){return yn.apply(this,arguments)}}()),_t=yield function(b){return Promise.all(b.map(function(){var g=(0,u.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(Be);x.ports[0].postMessage({status:"done",eventId:R,eventType:re,response:_t})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Do(b="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return b+y}class Yn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var x=this;return(0,u.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let re,we;return new Promise((et,Be)=>{const _t=Do("",20);R.port1.start();const yn=setTimeout(()=>{Be(new Error("unsupported_event"))},E);we={messageChannel:R,onMessage(kn){const un=kn;if(un.data.eventId===_t)switch(un.data.status){case"ack":clearTimeout(yn),re=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),et(un.data.response);break;default:clearTimeout(yn),clearTimeout(re),Be(new Error("invalid_response"))}}},x.handlers.add(we),R.port1.addEventListener("message",we.onMessage),x.target.postMessage({eventType:g,eventId:_t,data:y},[R.port2])}).finally(()=>{we&&x.removeMessageHandler(we)})})()}}function Kn(){return window}function Xo(){return void 0!==Kn().WorkerGlobalScope&&"function"==typeof Kn().importScripts}function Ua(){return(Ua=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Ms="firebaseLocalStorageDb",Io="firebaseLocalStorage",Zs="fbase_key";class ci{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Ri(b,g){return b.transaction([Io],g?"readwrite":"readonly").objectStore(Io)}function pt(){const b=indexedDB.open(Ms,1);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(Io,{keyPath:Zs})}catch(x){y(x)}}),b.addEventListener("success",(0,u.Z)(function*(){const E=b.result;E.objectStoreNames.contains(Io)?g(E):(E.close(),yield function(){const b=indexedDB.deleteDatabase(Ms);return new ci(b).toPromise()}(),g(yield pt()))}))})}function Yi(b,g,y){return nr.apply(this,arguments)}function nr(){return(nr=(0,u.Z)(function*(b,g,y){const E=Ri(b,!0).put({[Zs]:g,value:y});return new ci(E).toPromise()})).apply(this,arguments)}function jn(){return(jn=(0,u.Z)(function*(b,g){const y=Ri(b,!1).get(g),E=yield new ci(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ih(b,g){const y=Ri(b,!0).delete(g);return new ci(y).toPromise()}const Np=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,u.Z)(function*(){return y.db||(y.db=yield pt()),y.db})()}_withRetries(y){var E=this;return(0,u.Z)(function*(){let x=0;for(;;)try{const R=yield E._openDb();return yield y(R)}catch(R){if(x++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,u.Z)(function*(){return Xo()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,u.Z)(function*(){y.receiver=Sp._getInstance(Xo()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,u.Z)(function*(x,R){return{keyProcessed:(yield y._poll()).includes(R.key)}});return function(x,R){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,u.Z)(function*(x,R){return["keyChanged"]});return function(x,R){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,u.Z)(function*(){var E,x;if(y.activeServiceWorker=yield function(){return Ua.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Yn(y.activeServiceWorker);const R=yield y.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=R[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,u.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const y=yield pt();return yield Yi(y,Dl,"1"),yield Ih(y,Dl),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,u.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var x=this;return(0,u.Z)(function*(){return x._withPendingWrite((0,u.Z)(function*(){return yield x._withRetries(R=>Yi(R,y,E)),x.localCache[y]=E,x.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,u.Z)(function*(){const x=yield E._withRetries(R=>function(b,g){return jn.apply(this,arguments)}(R,y));return E.localCache[y]=x,x})()}_remove(y){var E=this;return(0,u.Z)(function*(){return E._withPendingWrite((0,u.Z)(function*(){return yield E._withRetries(x=>Ih(x,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,u.Z)(function*(){const E=yield y._withRetries(re=>{const we=Ri(re,!1).getAll();return new ci(we).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const x=[],R=new Set;for(const{fbase_key:re,value:we}of E)R.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(we)&&(y.notifyListeners(re,we),x.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!R.has(re)&&(y.notifyListeners(re,null),x.push(re));return x})()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function ea(b,g){return It(b,"POST","/v2/accounts/mfaSignIn:start",hn(b,g))}function vu(){return(vu=(0,u.Z)(function*(b){return(yield It(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kc(b){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=g,E.onerror=x=>{const R=Ln("internal-error");R.customData=x,y(R)},E.type="text/javascript",E.charset="UTF-8",function(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(E)})}function So(b){return`__${b}${Math.floor(1e6*Math.random())}`}const zs=1e12;class Pr{constructor(g){this.auth=g,this.counter=zs,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Qc(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||zs;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||zs))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,u.Z)(function*(){var E;return null===(E=y._widgets.get(g||zs))||void 0===E||E.execute(),""})()}}class Qc{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;Le(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vi=So("rcb"),Rs=new _n(3e4,6e4);class No{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Kn().grecaptcha}load(g,y=""){return Le((b=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Kn().grecaptcha):new Promise((E,x)=>{const R=Kn().setTimeout(()=>{x(Ln(g,"network-request-failed"))},Rs.get());Kn()[vi]=()=>{Kn().clearTimeout(R),delete Kn()[vi];const we=Kn().grecaptcha;if(!we)return void x(Ln(g,"internal-error"));const et=we.render;we.render=(Be,_t)=>{const yn=et(Be,_t);return this.counter++,yn},this.hostLanguage=y,E(we)},Kc(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:vi,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(R),x(Ln(g,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Kn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ah{load(g){return(0,u.Z)(function*(){return new Pr(g)})()}clearedOneInstance(){}}const Ys="recaptcha",xp={theme:"light",type:"image"};class ja{constructor(g,y=Object.assign({},xp),E){this.parameters=y,this.type=Ys,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(E),this.isInvisible="invisible"===this.parameters.size,Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;Le(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ah:new No,this.validateStartingState()}verify(){var g=this;return(0,u.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(R=>{const re=we=>{!we||(g.tokenChangeListeners.delete(re),R(we))};g.tokenChangeListeners.add(re),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Le(!this.parameters.sitekey,this.auth,"argument-error"),Le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Kn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){Le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,u.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,u.Z)(function*(){Le(jr()&&!Xo(),g.auth,"internal-error"),yield function(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(b){return vu.apply(this,arguments)}(g.auth);Le(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jc{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Ai._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function vr(b,g,y){return lr.apply(this,arguments)}function lr(){return(lr=(0,u.Z)(function*(b,g,y){const E=Mn(b),x=yield k(E,g,(0,G.m9)(y));return new Jc(x,R=>ui(E,R))})).apply(this,arguments)}function Ha(b,g,y){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b);yield Me(!1,E,"phone");const x=yield k(E.auth,g,(0,G.m9)(y));return new Jc(x,R=>vl(E,R))})).apply(this,arguments)}function I(b,g,y){return A.apply(this,arguments)}function A(){return(A=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b),x=yield k(E.auth,g,(0,G.m9)(y));return new Jc(x,R=>vh(E,R))})).apply(this,arguments)}function k(b,g,y){return q.apply(this,arguments)}function q(){return(q=(0,u.Z)(function*(b,g,y){var E;const x=yield y.verify();try{let R;if(Le("string"==typeof x,b,"argument-error"),Le(y.type===Ys,b,"argument-error"),R="string"==typeof g?{phoneNumber:g}:g,"session"in R){const re=R.session;if("phoneNumber"in R)return Le("enroll"===re.type,b,"internal-error"),(yield o0(b,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Le("signin"===re.type,b,"internal-error");const we=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return Le(we,b,"missing-multi-factor-info"),(yield ea(b,{mfaPendingCredential:re.credential,mfaEnrollmentId:we,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield ph(b,{phoneNumber:R.phoneNumber,recaptchaToken:x});return re}}finally{y._reset()}})).apply(this,arguments)}function se(b,g){return he.apply(this,arguments)}function he(){return(he=(0,u.Z)(function*(b,g){yield _l((0,G.m9)(b),g)})).apply(this,arguments)}let Oe=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Mn(y)}verifyPhoneNumber(y,E){return k(this.auth,y,(0,G.m9)(E))}static credential(y,E){return Ai._fromVerification(y,E)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:x}=y;return E&&x?Ai._fromTokenResponse(E,x):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Xe(b,g){return g?vn(g):(Le(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Dt extends dl{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return zn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return zn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return zn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function kt(b){return yl(b.auth,new Dt(b),b.bypassAuthState)}function tn(b){const{auth:g,user:y}=b;return Le(y,g,"internal-error"),Ma(y,new Dt(b),b.bypassAuthState)}function Pt(b){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(function*(b){const{auth:g,user:y}=b;return Le(y,g,"internal-error"),_l(y,new Dt(b),b.bypassAuthState)})).apply(this,arguments)}class Sr{constructor(g,y,E,x,R=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,u.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(R){g.reject(R)}});return function(E,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,u.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:R,tenantId:re,error:we,type:et}=g;if(we)return void y.reject(we);const Be={auth:y.auth,requestUri:E,sessionId:x,tenantId:re||void 0,postBody:R||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(et)(Be))}catch(_t){y.reject(_t)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return kt;case"linkViaPopup":case"linkViaRedirect":return Pt;case"reauthViaPopup":case"reauthViaRedirect":return tn;default:dn(this.auth,"internal-error")}}resolve(g){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Il=new _n(2e3,1e4);function Xc(b,g,y){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(b,g,y){const E=Mn(b);si(b,g,ds);const x=Xe(E,y);return new Rp(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Ga(b,g,y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);return new Rp(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function ta(b,g,y){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);return new Rp(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let Rp=(()=>{class b extends Sr{constructor(y,E,x,R,re){super(y,E,R,re),this.provider=x,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,u.Z)(function*(){const E=yield y.execute();return Le(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,u.Z)(function*(){ir(1===y.filter.length,"Popup operations only handle one event");const E=Do();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Ln(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Il.get())};y()}}return b.currentPopupAction=null,b})();const bu=new Map;class o_ extends Sr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,u.Z)(function*(){let E=bu.get(y.auth._key());if(!E){try{const R=(yield function(b,g){return Al.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(R)}catch(x){E=()=>Promise.reject(x)}bu.set(y.auth._key(),E)}return y.bypassAuthState||bu.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,u.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Al(){return(Al=(0,u.Z)(function*(b,g){const y=qa(g),E=a_(b);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(y));return yield E._remove(y),x})).apply(this,arguments)}function kp(b,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,u.Z)(function*(b,g){return a_(b)._set(qa(g),"true")})).apply(this,arguments)}function Pp(){bu.clear()}function a_(b){return vn(b._redirectPersistence)}function qa(b){return ls("pendingRedirect",b.config.apiKey,b.name)}function Wa(b,g,y){return function(b,g,y){return Gr.apply(this,arguments)}(b,g,y)}function Gr(){return(Gr=(0,u.Z)(function*(b,g,y){const E=Mn(b);si(b,g,ds);const x=Xe(E,y);return yield kp(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function u0(b,g,y){return function(b,g,y){return wu.apply(this,arguments)}(b,g,y)}function wu(){return(wu=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);yield kp(x,E.auth);const R=yield Nl(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",R)})).apply(this,arguments)}function ed(b,g,y){return function(b,g,y){return xh.apply(this,arguments)}(b,g,y)}function xh(){return(xh=(0,u.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);yield Me(!1,E,g.providerId),yield kp(x,E.auth);const R=yield Nl(E);return x._openRedirect(E.auth,g,"linkViaRedirect",R)})).apply(this,arguments)}function c0(b,g){return na.apply(this,arguments)}function na(){return(na=(0,u.Z)(function*(b,g){return yield Mn(b)._initializationPromise,Za(b,g,!1)})).apply(this,arguments)}function Za(b,g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(b,g,y=!1){const E=Mn(b),x=Xe(E,g),re=yield new o_(E,x,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield E._persistUserIfCurrent(re.user),yield E._setRedirectUser(null,g)),re})).apply(this,arguments)}function Nl(b){return en.apply(this,arguments)}function en(){return(en=(0,u.Z)(function*(b){const g=Do(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class d0{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c_(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!c_(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Ln(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(za(g))}saveEventToCache(g){this.cachedEventUids.add(za(g)),this.lastProcessedEventTime=Date.now()}}function za(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function c_({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Eu(b){return nd.apply(this,arguments)}function nd(){return(nd=(0,u.Z)(function*(b,g={}){return It(b,"GET","/v1/projects",g)})).apply(this,arguments)}const ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rd=/^https?/;function id(){return(id=(0,u.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Eu(b);for(const y of g)try{if(Mh(y))return}catch(E){}dn(b,"unauthorized-domain")})).apply(this,arguments)}function Mh(b){const g=oi(),{protocol:y,hostname:E}=new URL(g);if(b.startsWith("chrome-extension://")){const re=new URL(b);return""===re.hostname&&""===E?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===E}if(!rd.test(y))return!1;if(ra.test(b))return E===b;const x=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const sd=new _n(3e4,6e4);function Du(){const b=Kn().___jsl;if(null==b?void 0:b.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let Tu=null;function xl(b){return Tu=Tu||function(b){return new Promise((g,y)=>{var E,x,R;function re(){Du(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Du(),y(Ln(b,"network-request-failed"))},timeout:sd.get()})}if(null===(x=null===(E=Kn().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(R=Kn().gapi)||void 0===R?void 0:R.load)){const we=So("iframefcb");return Kn()[we]=()=>{gapi.load?re():y(Ln(b,"network-request-failed"))},Kc(`https://apis.google.com/js/api.js?onload=${we}`).catch(et=>y(et))}re()}}).catch(g=>{throw Tu=null,g})}(b),Tu}const h0=new _n(5e3,15e3),p0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ia(b){const g=b.config;Le(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?qe(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:b.name,v:O.SDK_VERSION},x=g0.get(b.config.apiHost);x&&(E.eid=x);const R=b._getFrameworks();return R.length&&(E.fw=R.join(",")),`${y}?${(0,G.xO)(E).slice(1)}`}function kh(){return(kh=(0,u.Z)(function*(b){const g=yield xl(b),y=Kn().gapi;return Le(y,b,"internal-error"),g.open({where:document.body,url:ia(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p0,dontclear:!0},E=>new Promise(function(){var x=(0,u.Z)(function*(R,re){yield E.restyle({setHideOnLeave:!1});const we=Ln(b,"network-request-failed"),et=Kn().setTimeout(()=>{re(we)},h0.get());function Be(){Kn().clearTimeout(et),R(E)}E.ping(Be).then(Be,()=>{re(we)})});return function(R,re){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const h_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ph{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function g_(b,g,y,E,x,R){Le(b.config.authDomain,b,"auth-domain-config-required"),Le(b.config.apiKey,b,"invalid-api-key");const re={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:E,v:O.SDK_VERSION,eventId:x};if(g instanceof ds){g.setDefaultLanguage(b.languageCode),re.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[et,Be]of Object.entries(R||{}))re[et]=Be}if(g instanceof In){const et=g.getScopes().filter(Be=>""!==Be);et.length>0&&(re.scopes=et.join(","))}b.tenantId&&(re.tid=b.tenantId);const we=re;for(const et of Object.keys(we))void 0===we[et]&&delete we[et];return`${function({config:b}){return b.emulator?qe(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,G.xO)(we).slice(1)}`}const Ya="webStorageSupport",Os=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=or,this._completeRedirectFn=Za}_openPopup(g,y,E,x){var R=this;return(0,u.Z)(function*(){var re;ir(null===(re=R.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const we=g_(g,y,E,oi(),x);return function(b,g,y,E=500,x=600){const R=Math.max((window.screen.availHeight-x)/2,0).toString(),re=Math.max((window.screen.availWidth-E)/2,0).toString();let we="";const et=Object.assign(Object.assign({},h_),{width:E.toString(),height:x.toString(),top:R,left:re}),Be=(0,G.z$)().toLowerCase();y&&(we=po(Be)?"_blank":y),Da(Be)&&(g=g||"http://localhost",et.scrollbars="yes");const _t=Object.entries(et).reduce((kn,[un,oa])=>`${kn}${un}=${oa},`,"");if(function(b=(0,G.z$)()){var g;return Zo(b)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Be)&&"_self"!==we)return function(b,g){const y=document.createElement("a");y.href=b,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",we),new Ph(null);const yn=window.open(g||"",we,_t);Le(yn,b,"popup-blocked");try{yn.focus()}catch(kn){}return new Ph(yn)}(g,we,Do())})()}_openRedirect(g,y,E,x){var R=this;return(0,u.Z)(function*(){return yield R._originValidation(g),b=g_(g,y,E,oi(),x),Kn().location.href=b,new Promise(()=>{});var b})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:R}=this.eventManagers[y];return x?Promise.resolve(x):(ir(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,u.Z)(function*(){const E=yield function(b){return kh.apply(this,arguments)}(g),x=new d0(g);return E.register("authEvent",R=>(Le(null==R?void 0:R.authEvent,g,"invalid-auth-event"),{status:x.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Ya,{type:Ya},x=>{var R;const re=null===(R=null==x?void 0:x[0])||void 0===R?void 0:R[Ya];void 0!==re&&y(!!re),dn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(b){return id.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ta()||Kr()||Zo()}};class Au extends class{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return fr("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Au(g)}_finalizeEnroll(g,y,E){return function(b,g){return It(b,"POST","/v2/accounts/mfaEnrollment:finalize",hn(b,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(b,g){return It(b,"POST","/v2/accounts/mfaSignIn:finalize",hn(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let m_=(()=>{class b{constructor(){}static assertion(y){return Au._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var b,Nu="@firebase/auth",__="0.19.12";class dE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,u.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}b="Browser",(0,O._registerComponent)(new Ae.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:R,authDomain:re}=E.options;return((we,et)=>{Le(R&&!R.includes(":"),"invalid-api-key",{appName:we.name}),Le(!(null==re?void 0:re.includes(":")),"argument-error",{appName:we.name});const Be={apiKey:R,authDomain:re,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qr(b)},_t=new Jm(we,et,Be);return function(b,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(vn);(null==g?void 0:g.errorMap)&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(_t,y),_t})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Ae.wA("auth-internal",g=>{const y=Mn(g.getProvider("auth").getImmediate());return new dE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Nu,__,void 0),(0,O.registerVersion)(Nu,__,"esm2017")},3854:(st,Ee,B)=>{"use strict";B.d(Ee,{BH:()=>Re,LL:()=>Mt,ZR:()=>Ae,gQ:()=>fr,zI:()=>$e,hu:()=>O,g5:()=>ie,US:()=>de,tV:()=>U,h$:()=>ee,L:()=>J,$s:()=>It,r3:()=>er,Sg:()=>Se,ne:()=>ir,p$:()=>z,vZ:()=>Ln,ZB:()=>H,Lj:()=>Rt,gK:()=>jr,pd:()=>Le,m9:()=>sn,z$:()=>be,GJ:()=>wt,jU:()=>fe,ru:()=>ke,d:()=>mt,xb:()=>rn,w1:()=>nt,hl:()=>xe,uI:()=>Ve,UG:()=>ce,Yr:()=>dt,b$:()=>Ye,G6:()=>Ke,Mn:()=>Tt,w9:()=>Wn,cI:()=>An,UI:()=>dn,X3:()=>Et,xO:()=>si,zd:()=>hr,DV:()=>cn,ug:()=>qe,dS:()=>_n,Pz:()=>Ht,Dv:()=>oi,Wj:()=>Vn,lb:()=>Ea,eu:()=>Te});var u=B(8239);const O=function(Q,Z){if(!Q)throw ie(Z)},ie=function(Q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Q)},oe=function(Q){const Z=[];let ne=0;for(let _e=0;_e<Q.length;_e++){let $=Q.charCodeAt(_e);$<128?Z[ne++]=$:$<2048?(Z[ne++]=$>>6|192,Z[ne++]=63&$|128):55296==(64512&$)&&_e+1<Q.length&&56320==(64512&Q.charCodeAt(_e+1))?($=65536+((1023&$)<<10)+(1023&Q.charCodeAt(++_e)),Z[ne++]=$>>18|240,Z[ne++]=$>>12&63|128,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128):(Z[ne++]=$>>12|224,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128)}return Z},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,Z){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let $=0;$<Q.length;$+=3){const j=Q[$],W=$+1<Q.length,pe=W?Q[$+1]:0,Ue=$+2<Q.length,ht=Ue?Q[$+2]:0;let Zt=(15&pe)<<2|ht>>6,Nn=63&ht;Ue||(Nn=64,W||(Zt=64)),_e.push(ne[j>>2],ne[(3&j)<<4|pe>>4],ne[Zt],ne[Nn])}return _e.join("")},encodeString(Q,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(Q):this.encodeByteArray(oe(Q),Z)},decodeString(Q,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(Q):function(Q){const Z=[];let ne=0,_e=0;for(;ne<Q.length;){const $=Q[ne++];if($<128)Z[_e++]=String.fromCharCode($);else if($>191&&$<224){const j=Q[ne++];Z[_e++]=String.fromCharCode((31&$)<<6|63&j)}else if($>239&&$<365){const Ue=((7&$)<<18|(63&Q[ne++])<<12|(63&Q[ne++])<<6|63&Q[ne++])-65536;Z[_e++]=String.fromCharCode(55296+(Ue>>10)),Z[_e++]=String.fromCharCode(56320+(1023&Ue))}else{const j=Q[ne++],W=Q[ne++];Z[_e++]=String.fromCharCode((15&$)<<12|(63&j)<<6|63&W)}}return Z.join("")}(this.decodeStringToByteArray(Q,Z))},decodeStringToByteArray(Q,Z){this.init_();const ne=Z?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let $=0;$<Q.length;){const j=ne[Q.charAt($++)],pe=$<Q.length?ne[Q.charAt($)]:0;++$;const ht=$<Q.length?ne[Q.charAt($)]:64;++$;const Ze=$<Q.length?ne[Q.charAt($)]:64;if(++$,null==j||null==pe||null==ht||null==Ze)throw Error();_e.push(j<<2|pe>>4),64!==ht&&(_e.push(pe<<4&240|ht>>2),64!==Ze&&_e.push(ht<<6&192|Ze))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},ee=function(Q){const Z=oe(Q);return de.encodeByteArray(Z,!0)},J=function(Q){return ee(Q).replace(/\./g,"")},U=function(Q){try{return de.decodeString(Q,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function z(Q){return H(void 0,Q)}function H(Q,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return Z}for(const ne in Z)!Z.hasOwnProperty(ne)||!ae(ne)||(Q[ne]=H(Q[ne],Z[ne]));return Q}function ae(Q){return"__proto__"!==Q}class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,ne)=>{this.resolve=Z,this.reject=ne})}wrapCallback(Z){return(ne,_e)=>{ne?this.reject(ne):this.resolve(_e),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(ne):Z(ne,_e))}}}function Se(Q,Z){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=Z||"demo-project",$=Q.iat||0,j=Q.sub||Q.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:$,exp:$+3600,auth_time:$,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[J(JSON.stringify({alg:"none",type:"JWT"})),J(JSON.stringify(W)),""].join(".")}function be(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function fe(){return"object"==typeof self&&self.self===self}function ke(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mt(){return be().indexOf("Electron/")>=0}function nt(){const Q=be();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Tt(){return be().indexOf("MSAppHost/")>=0}function dt(){return!1}function Ke(){return!ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xe(){return"object"==typeof indexedDB}function Te(){return new Promise((Q,Z)=>{try{let ne=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(_e);$.onsuccess=()=>{$.result.close(),ne||self.indexedDB.deleteDatabase(_e),Q(!0)},$.onupgradeneeded=()=>{ne=!1},$.onerror=()=>{var j;Z((null===(j=$.error)||void 0===j?void 0:j.message)||"")}}catch(ne){Z(ne)}})}function $e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ae extends Error{constructor(Z,ne,_e){super(ne),this.code=Z,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(Z,ne,_e){this.service=Z,this.serviceName=ne,this.errors=_e}create(Z,...ne){const _e=ne[0]||{},$=`${this.service}/${Z}`,j=this.errors[Z],W=j?function(Q,Z){return Q.replace(Qt,(ne,_e)=>{const $=Z[_e];return null!=$?String($):`<${_e}?>`})}(j,_e):"Error";return new Ae($,`${this.serviceName}: ${W} (${$}).`,_e)}}const Qt=/\{\$([^}]+)}/g;function An(Q){return JSON.parse(Q)}function Ht(Q){return JSON.stringify(Q)}const yt=function(Q){let Z={},ne={},_e={},$="";try{const j=Q.split(".");Z=An(U(j[0])||""),ne=An(U(j[1])||""),$=j[2],_e=ne.d||{},delete ne.d}catch(j){}return{header:Z,claims:ne,data:_e,signature:$}},Wn=function(Q){const ne=yt(Q).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},wt=function(Q){const Z=yt(Q).claims;return"object"==typeof Z&&!0===Z.admin};function er(Q,Z){return Object.prototype.hasOwnProperty.call(Q,Z)}function cn(Q,Z){if(Object.prototype.hasOwnProperty.call(Q,Z))return Q[Z]}function rn(Q){for(const Z in Q)if(Object.prototype.hasOwnProperty.call(Q,Z))return!1;return!0}function dn(Q,Z,ne){const _e={};for(const $ in Q)Object.prototype.hasOwnProperty.call(Q,$)&&(_e[$]=Z.call(ne,Q[$],$,Q));return _e}function Ln(Q,Z){if(Q===Z)return!0;const ne=Object.keys(Q),_e=Object.keys(Z);for(const $ of ne){if(!_e.includes($))return!1;const j=Q[$],W=Z[$];if(Hi(j)&&Hi(W)){if(!Ln(j,W))return!1}else if(j!==W)return!1}for(const $ of _e)if(!ne.includes($))return!1;return!0}function Hi(Q){return null!==Q&&"object"==typeof Q}function si(Q){const Z=[];for(const[ne,_e]of Object.entries(Q))Array.isArray(_e)?_e.forEach($=>{Z.push(encodeURIComponent(ne)+"="+encodeURIComponent($))}):Z.push(encodeURIComponent(ne)+"="+encodeURIComponent(_e));return Z.length?"&"+Z.join("&"):""}function hr(Q){const Z={};return Q.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[$,j]=_e.split("=");Z[decodeURIComponent($)]=decodeURIComponent(j)}}),Z}function Le(Q){const Z=Q.indexOf("?");if(!Z)return"";const ne=Q.indexOf("#",Z);return Q.substring(Z,ne>0?ne:void 0)}class fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,ne){ne||(ne=0);const _e=this.W_;if("string"==typeof Z)for(let Ze=0;Ze<16;Ze++)_e[Ze]=Z.charCodeAt(ne)<<24|Z.charCodeAt(ne+1)<<16|Z.charCodeAt(ne+2)<<8|Z.charCodeAt(ne+3),ne+=4;else for(let Ze=0;Ze<16;Ze++)_e[Ze]=Z[ne]<<24|Z[ne+1]<<16|Z[ne+2]<<8|Z[ne+3],ne+=4;for(let Ze=16;Ze<80;Ze++){const Zt=_e[Ze-3]^_e[Ze-8]^_e[Ze-14]^_e[Ze-16];_e[Ze]=4294967295&(Zt<<1|Zt>>>31)}let ht,Ct,$=this.chain_[0],j=this.chain_[1],W=this.chain_[2],pe=this.chain_[3],Ue=this.chain_[4];for(let Ze=0;Ze<80;Ze++){Ze<40?Ze<20?(ht=pe^j&(W^pe),Ct=1518500249):(ht=j^W^pe,Ct=1859775393):Ze<60?(ht=j&W|pe&(j|W),Ct=2400959708):(ht=j^W^pe,Ct=3395469782);const Zt=($<<5|$>>>27)+ht+Ue+Ct+_e[Ze]&4294967295;Ue=pe,pe=W,W=4294967295&(j<<30|j>>>2),j=$,$=Zt}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+W&4294967295,this.chain_[3]=this.chain_[3]+pe&4294967295,this.chain_[4]=this.chain_[4]+Ue&4294967295}update(Z,ne){if(null==Z)return;void 0===ne&&(ne=Z.length);const _e=ne-this.blockSize;let $=0;const j=this.buf_;let W=this.inbuf_;for(;$<ne;){if(0===W)for(;$<=_e;)this.compress_(Z,$),$+=this.blockSize;if("string"==typeof Z){for(;$<ne;)if(j[W]=Z.charCodeAt($),++W,++$,W===this.blockSize){this.compress_(j),W=0;break}}else for(;$<ne;)if(j[W]=Z[$],++W,++$,W===this.blockSize){this.compress_(j),W=0;break}}this.inbuf_=W,this.total_+=ne}digest(){const Z=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&ne,ne/=256;this.compress_(this.buf_);let _e=0;for(let $=0;$<5;$++)for(let j=24;j>=0;j-=8)Z[_e]=this.chain_[$]>>j&255,++_e;return Z}}function ir(Q,Z){const ne=new ot(Q,Z);return ne.subscribe.bind(ne)}class ot{constructor(Z,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{Z(this)}).catch(_e=>{this.error(_e)})}next(Z){this.forEachObserver(ne=>{ne.next(Z)})}error(Z){this.forEachObserver(ne=>{ne.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,ne,_e){let $;if(void 0===Z&&void 0===ne&&void 0===_e)throw new Error("Missing Observer.");$=function(Q,Z){if("object"!=typeof Q||null===Q)return!1;for(const ne of["next","error","complete"])if(ne in Q&&"function"==typeof Q[ne])return!0;return!1}(Z)?Z:{next:Z,error:ne,complete:_e},void 0===$.next&&($.next=Gn),void 0===$.error&&($.error=Gn),void 0===$.complete&&($.complete=Gn);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(W){}}),this.observers.push($),j}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,Z)}sendOne(Z,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{ne(this.observers[Z])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gn(){}const oi=function(Q,Z,ne,_e){let $;if(_e<Z?$="at least "+Z:_e>ne&&($=0===ne?"none":"no more than "+ne),$)throw new Error(Q+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+$+".")};function jr(Q,Z){return`${Q} failed: ${Z} argument `}function Vn(Q,Z,ne,_e){if((!_e||ne)&&"function"!=typeof ne)throw new Error(jr(Q,Z)+"must be a valid function.")}function Ea(Q,Z,ne,_e){if((!_e||ne)&&("object"!=typeof ne||null===ne))throw new Error(jr(Q,Z)+"must be a valid context object.")}const _n=function(Q){const Z=[];let ne=0;for(let _e=0;_e<Q.length;_e++){let $=Q.charCodeAt(_e);if($>=55296&&$<=56319){const j=$-55296;_e++,O(_e<Q.length,"Surrogate pair missing trail surrogate."),$=65536+(j<<10)+(Q.charCodeAt(_e)-56320)}$<128?Z[ne++]=$:$<2048?(Z[ne++]=$>>6|192,Z[ne++]=63&$|128):$<65536?(Z[ne++]=$>>12|224,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128):(Z[ne++]=$>>18|240,Z[ne++]=$>>12&63|128,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128)}return Z},qe=function(Q){let Z=0;for(let ne=0;ne<Q.length;ne++){const _e=Q.charCodeAt(ne);_e<128?Z++:_e<2048?Z+=2:_e>=55296&&_e<=56319?(Z+=4,ne++):Z+=3}return Z};function It(Q,Z=1e3,ne=2){const _e=Z*Math.pow(ne,Q),$=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+$)}function sn(Q){return Q&&Q._delegate?Q._delegate:Q}function bt(Q,Z){return new Promise((ne,_e)=>{Q.onsuccess=$=>{ne($.target.result)},Q.onerror=$=>{var j;_e(`${Z}: ${null===(j=$.target.error)||void 0===j?void 0:j.message}`)}})}class Gt{constructor(Z){this._db=Z,this.objectStoreNames=this._db.objectStoreNames}transaction(Z,ne="readonly"){return new Ge(this._db.transaction.call(this._db,Z,ne))}createObjectStore(Z,ne){return new Ne(this._db.createObjectStore(Z,ne))}close(){this._db.close()}}class Ge{constructor(Z){this._transaction=Z,this.complete=new Promise((ne,_e)=>{this._transaction.oncomplete=function(){ne()},this._transaction.onerror=()=>{_e(this._transaction.error)},this._transaction.onabort=()=>{_e(this._transaction.error)}})}objectStore(Z){return new Ne(this._transaction.objectStore(Z))}}class Ne{constructor(Z){this._store=Z}index(Z){return new lt(this._store.index(Z))}createIndex(Z,ne,_e){return new lt(this._store.createIndex(Z,ne,_e))}get(Z){return bt(this._store.get(Z),"Error reading from IndexedDB")}put(Z,ne){return bt(this._store.put(Z,ne),"Error writing to IndexedDB")}delete(Z){return bt(this._store.delete(Z),"Error deleting from IndexedDB")}clear(){return bt(this._store.clear(),"Error clearing IndexedDB object store")}}class lt{constructor(Z){this._index=Z}get(Z){return bt(this._index.get(Z),"Error reading from IndexedDB")}}function Et(Q,Z,ne){return new Promise((_e,$)=>{try{const j=indexedDB.open(Q,Z);j.onsuccess=W=>{_e(new Gt(W.target.result))},j.onerror=W=>{var pe;$(`Error opening indexedDB: ${null===(pe=W.target.error)||void 0===pe?void 0:pe.message}`)},j.onupgradeneeded=W=>{ne(new Gt(j.result),W.oldVersion,W.newVersion,new Ge(j.transaction))}}catch(j){$(`Error opening indexedDB: ${j.message}`)}})}function Rt(Q){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,u.Z)(function*(Q){return new Promise((Z,ne)=>{try{const _e=indexedDB.deleteDatabase(Q);_e.onsuccess=()=>{Z()},_e.onerror=$=>{var j;ne(`Error deleting indexedDB database "${Q}": ${null===(j=$.target.error)||void 0===j?void 0:j.message}`)}}catch(_e){ne(`Error deleting indexedDB database "${Q}": ${_e.message}`)}})})).apply(this,arguments)}},8873:function(st){st.exports=function(){"use strict";var B=6e4,u=36e5,G="millisecond",O="second",ie="minute",oe="hour",te="day",de="week",ee="month",J="quarter",U="year",z="date",H="Invalid Date",ae=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Re=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Se={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},be=function(Ke,xe,Te){var $e=String(Ke);return!$e||$e.length>=xe?Ke:""+Array(xe+1-$e.length).join(Te)+Ke},Ve={s:be,z:function(Ke){var xe=-Ke.utcOffset(),Te=Math.abs(xe),$e=Math.floor(Te/60),ye=Te%60;return(xe<=0?"+":"-")+be($e,2,"0")+":"+be(ye,2,"0")},m:function Ke(xe,Te){if(xe.date()<Te.date())return-Ke(Te,xe);var $e=12*(Te.year()-xe.year())+(Te.month()-xe.month()),ye=xe.clone().add($e,ee),He=Te-ye<0,Ae=xe.clone().add($e+(He?-1:1),ee);return+(-($e+(Te-ye)/(He?ye-Ae:Ae-ye))||0)},a:function(Ke){return Ke<0?Math.ceil(Ke)||0:Math.floor(Ke)},p:function(Ke){return{M:ee,y:U,w:de,d:te,D:z,h:oe,m:ie,s:O,ms:G,Q:J}[Ke]||String(Ke||"").toLowerCase().replace(/s$/,"")},u:function(Ke){return void 0===Ke}},ce="en",fe={};fe[ce]=Se;var ke=function(Ke){return Ke instanceof Tt},Ye=function Ke(xe,Te,$e){var ye;if(!xe)return ce;if("string"==typeof xe){var He=xe.toLowerCase();fe[He]&&(ye=He),Te&&(fe[He]=Te,ye=He);var Ae=xe.split("-");if(!ye&&Ae.length>1)return Ke(Ae[0])}else{var Mt=xe.name;fe[Mt]=xe,ye=Mt}return!$e&&ye&&(ce=ye),ye||!$e&&ce},mt=function(Ke,xe){if(ke(Ke))return Ke.clone();var Te="object"==typeof xe?xe:{};return Te.date=Ke,Te.args=arguments,new Tt(Te)},nt=Ve;nt.l=Ye,nt.i=ke,nt.w=function(Ke,xe){return mt(Ke,{locale:xe.$L,utc:xe.$u,x:xe.$x,$offset:xe.$offset})};var Tt=function(){function Ke(Te){this.$L=Ye(Te.locale,null,!0),this.parse(Te)}var xe=Ke.prototype;return xe.parse=function(Te){this.$d=function($e){var ye=$e.date,He=$e.utc;if(null===ye)return new Date(NaN);if(nt.u(ye))return new Date;if(ye instanceof Date)return new Date(ye);if("string"==typeof ye&&!/Z$/i.test(ye)){var Ae=ye.match(ae);if(Ae){var Mt=Ae[2]-1||0,gn=(Ae[7]||"0").substring(0,3);return He?new Date(Date.UTC(Ae[1],Mt,Ae[3]||1,Ae[4]||0,Ae[5]||0,Ae[6]||0,gn)):new Date(Ae[1],Mt,Ae[3]||1,Ae[4]||0,Ae[5]||0,Ae[6]||0,gn)}}return new Date(ye)}(Te),this.$x=Te.x||{},this.init()},xe.init=function(){var Te=this.$d;this.$y=Te.getFullYear(),this.$M=Te.getMonth(),this.$D=Te.getDate(),this.$W=Te.getDay(),this.$H=Te.getHours(),this.$m=Te.getMinutes(),this.$s=Te.getSeconds(),this.$ms=Te.getMilliseconds()},xe.$utils=function(){return nt},xe.isValid=function(){return this.$d.toString()!==H},xe.isSame=function(Te,$e){var ye=mt(Te);return this.startOf($e)<=ye&&ye<=this.endOf($e)},xe.isAfter=function(Te,$e){return mt(Te)<this.startOf($e)},xe.isBefore=function(Te,$e){return this.endOf($e)<mt(Te)},xe.$g=function(Te,$e,ye){return nt.u(Te)?this[$e]:this.set(ye,Te)},xe.unix=function(){return Math.floor(this.valueOf()/1e3)},xe.valueOf=function(){return this.$d.getTime()},xe.startOf=function(Te,$e){var ye=this,He=!!nt.u($e)||$e,Ae=nt.p(Te),Mt=function(Wn,wt){var er=nt.w(ye.$u?Date.UTC(ye.$y,wt,Wn):new Date(ye.$y,wt,Wn),ye);return He?er:er.endOf(te)},gn=function(Wn,wt){return nt.w(ye.toDate()[Wn].apply(ye.toDate("s"),(He?[0,0,0,0]:[23,59,59,999]).slice(wt)),ye)},Qt=this.$W,An=this.$M,Ht=this.$D,yt="set"+(this.$u?"UTC":"");switch(Ae){case U:return He?Mt(1,0):Mt(31,11);case ee:return He?Mt(1,An):Mt(0,An+1);case de:var Dr=this.$locale().weekStart||0,mi=(Qt<Dr?Qt+7:Qt)-Dr;return Mt(He?Ht-mi:Ht+(6-mi),An);case te:case z:return gn(yt+"Hours",0);case oe:return gn(yt+"Minutes",1);case ie:return gn(yt+"Seconds",2);case O:return gn(yt+"Milliseconds",3);default:return this.clone()}},xe.endOf=function(Te){return this.startOf(Te,!1)},xe.$set=function(Te,$e){var ye,He=nt.p(Te),Ae="set"+(this.$u?"UTC":""),Mt=(ye={},ye[te]=Ae+"Date",ye[z]=Ae+"Date",ye[ee]=Ae+"Month",ye[U]=Ae+"FullYear",ye[oe]=Ae+"Hours",ye[ie]=Ae+"Minutes",ye[O]=Ae+"Seconds",ye[G]=Ae+"Milliseconds",ye)[He],gn=He===te?this.$D+($e-this.$W):$e;if(He===ee||He===U){var Qt=this.clone().set(z,1);Qt.$d[Mt](gn),Qt.init(),this.$d=Qt.set(z,Math.min(this.$D,Qt.daysInMonth())).$d}else Mt&&this.$d[Mt](gn);return this.init(),this},xe.set=function(Te,$e){return this.clone().$set(Te,$e)},xe.get=function(Te){return this[nt.p(Te)]()},xe.add=function(Te,$e){var ye,He=this;Te=Number(Te);var Ae=nt.p($e),Mt=function(An){var Ht=mt(He);return nt.w(Ht.date(Ht.date()+Math.round(An*Te)),He)};if(Ae===ee)return this.set(ee,this.$M+Te);if(Ae===U)return this.set(U,this.$y+Te);if(Ae===te)return Mt(1);if(Ae===de)return Mt(7);var gn=(ye={},ye[ie]=B,ye[oe]=u,ye[O]=1e3,ye)[Ae]||1,Qt=this.$d.getTime()+Te*gn;return nt.w(Qt,this)},xe.subtract=function(Te,$e){return this.add(-1*Te,$e)},xe.format=function(Te){var $e=this,ye=this.$locale();if(!this.isValid())return ye.invalidDate||H;var He=Te||"YYYY-MM-DDTHH:mm:ssZ",Ae=nt.z(this),Mt=this.$H,gn=this.$m,Qt=this.$M,An=ye.weekdays,Ht=ye.months,yt=function(wt,er,cn,rn){return wt&&(wt[er]||wt($e,He))||cn[er].slice(0,rn)},Dr=function(wt){return nt.s(Mt%12||12,wt,"0")},mi=ye.meridiem||function(wt,er,cn){var rn=wt<12?"AM":"PM";return cn?rn.toLowerCase():rn},Wn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Qt+1,MM:nt.s(Qt+1,2,"0"),MMM:yt(ye.monthsShort,Qt,Ht,3),MMMM:yt(Ht,Qt),D:this.$D,DD:nt.s(this.$D,2,"0"),d:String(this.$W),dd:yt(ye.weekdaysMin,this.$W,An,2),ddd:yt(ye.weekdaysShort,this.$W,An,3),dddd:An[this.$W],H:String(Mt),HH:nt.s(Mt,2,"0"),h:Dr(1),hh:Dr(2),a:mi(Mt,gn,!0),A:mi(Mt,gn,!1),m:String(gn),mm:nt.s(gn,2,"0"),s:String(this.$s),ss:nt.s(this.$s,2,"0"),SSS:nt.s(this.$ms,3,"0"),Z:Ae};return He.replace(Re,function(wt,er){return er||Wn[wt]||Ae.replace(":","")})},xe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},xe.diff=function(Te,$e,ye){var He,Ae=nt.p($e),Mt=mt(Te),gn=(Mt.utcOffset()-this.utcOffset())*B,Qt=this-Mt,An=nt.m(this,Mt);return An=(He={},He[U]=An/12,He[ee]=An,He[J]=An/3,He[de]=(Qt-gn)/6048e5,He[te]=(Qt-gn)/864e5,He[oe]=Qt/u,He[ie]=Qt/B,He[O]=Qt/1e3,He)[Ae]||Qt,ye?An:nt.a(An)},xe.daysInMonth=function(){return this.endOf(ee).$D},xe.$locale=function(){return fe[this.$L]},xe.locale=function(Te,$e){if(!Te)return this.$L;var ye=this.clone(),He=Ye(Te,$e,!0);return He&&(ye.$L=He),ye},xe.clone=function(){return nt.w(this.$d,this)},xe.toDate=function(){return new Date(this.valueOf())},xe.toJSON=function(){return this.isValid()?this.toISOString():null},xe.toISOString=function(){return this.$d.toISOString()},xe.toString=function(){return this.$d.toUTCString()},Ke}(),dt=Tt.prototype;return mt.prototype=dt,[["$ms",G],["$s",O],["$m",ie],["$H",oe],["$W",te],["$M",ee],["$y",U],["$D",z]].forEach(function(Ke){dt[Ke[1]]=function(xe){return this.$g(xe,Ke[0],Ke[1])}}),mt.extend=function(Ke,xe){return Ke.$i||(Ke(xe,Tt,mt),Ke.$i=!0),mt},mt.locale=Ye,mt.isDayjs=ke,mt.unix=function(Ke){return mt(1e3*Ke)},mt.en=fe[ce],mt.Ls=fe,mt.p={},mt}()},4292:function(st){st.exports=function(){"use strict";var Ee={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},B=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,u=/\d\d/,G=/\d\d?/,O=/\d*[^\s\d-_:/()]+/,ie={},oe=function(H){return(H=+H)+(H>68?1900:2e3)},te=function(H){return function(ae){this[H]=+ae}},de=[/[+-]\d\d:?(\d\d)?|Z/,function(H){(this.zone||(this.zone={})).offset=function(ae){if(!ae||"Z"===ae)return 0;var Re=ae.match(/([+-]|\d\d)/g),Se=60*Re[1]+(+Re[2]||0);return 0===Se?0:"+"===Re[0]?-Se:Se}(H)}],ee=function(H){var ae=ie[H];return ae&&(ae.indexOf?ae:ae.s.concat(ae.f))},J=function(H,ae){var Re,Se=ie.meridiem;if(Se){for(var be=1;be<=24;be+=1)if(H.indexOf(Se(be,0,ae))>-1){Re=be>12;break}}else Re=H===(ae?"pm":"PM");return Re},U={A:[O,function(H){this.afternoon=J(H,!1)}],a:[O,function(H){this.afternoon=J(H,!0)}],S:[/\d/,function(H){this.milliseconds=100*+H}],SS:[u,function(H){this.milliseconds=10*+H}],SSS:[/\d{3}/,function(H){this.milliseconds=+H}],s:[G,te("seconds")],ss:[G,te("seconds")],m:[G,te("minutes")],mm:[G,te("minutes")],H:[G,te("hours")],h:[G,te("hours")],HH:[G,te("hours")],hh:[G,te("hours")],D:[G,te("day")],DD:[u,te("day")],Do:[O,function(H){var ae=ie.ordinal,Re=H.match(/\d+/);if(this.day=Re[0],ae)for(var Se=1;Se<=31;Se+=1)ae(Se).replace(/\[|\]/g,"")===H&&(this.day=Se)}],M:[G,te("month")],MM:[u,te("month")],MMM:[O,function(H){var ae=ee("months"),Re=(ee("monthsShort")||ae.map(function(Se){return Se.slice(0,3)})).indexOf(H)+1;if(Re<1)throw new Error;this.month=Re%12||Re}],MMMM:[O,function(H){var ae=ee("months").indexOf(H)+1;if(ae<1)throw new Error;this.month=ae%12||ae}],Y:[/[+-]?\d+/,te("year")],YY:[u,function(H){this.year=oe(H)}],YYYY:[/\d{4}/,te("year")],Z:de,ZZ:de};return function(H,ae,Re){Re.p.customParseFormat=!0,H&&H.parseTwoDigitYear&&(oe=H.parseTwoDigitYear);var Se=ae.prototype,be=Se.parse;Se.parse=function(Ve){var ce=Ve.date,fe=Ve.utc,ke=Ve.args;this.$u=fe;var Ye=ke[1];if("string"==typeof Ye){var mt=!0===ke[2],nt=!0===ke[3],Tt=mt||nt,dt=ke[2];nt&&(dt=ke[2]),ie=this.$locale(),!mt&&dt&&(ie=Re.Ls[dt]),this.$d=function($e,ye,He){try{if(["x","X"].indexOf(ye)>-1)return new Date(("X"===ye?1e3:1)*$e);var Ae=function(H){var Re;Re=ie&&ie.formats;for(var Se=(H=H.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(mt,nt,Tt){var dt=Tt&&Tt.toUpperCase();return nt||Re[Tt]||Ee[Tt]||Re[dt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ke,xe,Te){return xe||Te.slice(1)})})).match(B),be=Se.length,Ve=0;Ve<be;Ve+=1){var ce=Se[Ve],fe=U[ce],Ye=fe&&fe[1];Se[Ve]=Ye?{regex:fe&&fe[0],parser:Ye}:ce.replace(/^\[|\]$/g,"")}return function(mt){for(var nt={},Tt=0,dt=0;Tt<be;Tt+=1){var Ke=Se[Tt];if("string"==typeof Ke)dt+=Ke.length;else{var xe=Ke.regex,Te=Ke.parser,$e=mt.slice(dt),ye=xe.exec($e)[0];Te.call(nt,ye),mt=mt.replace(ye,"")}}return function(He){var Ae=He.afternoon;if(void 0!==Ae){var Mt=He.hours;Ae?Mt<12&&(He.hours+=12):12===Mt&&(He.hours=0),delete He.afternoon}}(nt),nt}}(ye)($e),Mt=Ae.year,gn=Ae.month,Qt=Ae.day,An=Ae.hours,Ht=Ae.minutes,yt=Ae.seconds,Dr=Ae.milliseconds,mi=Ae.zone,Wn=new Date,wt=Qt||(Mt||gn?1:Wn.getDate()),er=Mt||Wn.getFullYear(),cn=0;Mt&&!gn||(cn=gn>0?gn-1:Wn.getMonth());var rn=An||0,dn=Ht||0,Ln=yt||0,Hi=Dr||0;return mi?new Date(Date.UTC(er,cn,wt,rn,dn,Ln,Hi+60*mi.offset*1e3)):He?new Date(Date.UTC(er,cn,wt,rn,dn,Ln,Hi)):new Date(er,cn,wt,rn,dn,Ln,Hi)}catch(si){return new Date("")}}(ce,Ye,fe),this.init(),dt&&!0!==dt&&(this.$L=this.locale(dt).$L),Tt&&ce!=this.format(Ye)&&(this.$d=new Date("")),ie={}}else if(Ye instanceof Array)for(var Ke=Ye.length,xe=1;xe<=Ke;xe+=1){ke[1]=Ye[xe-1];var Te=Re.apply(this,ke);if(Te.isValid()){this.$d=Te.$d,this.$L=Te.$L,this.init();break}xe===Ke&&(this.$d=new Date(""))}else be.call(this,Ve)}}}()},2329:(st,Ee,B)=>{"use strict";B.d(Ee,{Mq:()=>u.getApp,C6:()=>u.getApps});var u=B(8026);(0,u.registerVersion)("firebase","9.6.11","app")},7841:(st,Ee,B)=>{"use strict";B.d(Ee,{Z:()=>u.Z});var u=B(3394);u.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(st,Ee,B)=>{"use strict";B.r(Ee);var u=B(8239),G=B(3394),O=B(982),ie=B(3854),de=(B(8026),B(5422),B(3910));function ee(){return window}function z(){return(z=(0,u.Z)(function*($,j,W){var pe;const{BuildInfo:Ue}=ee();(0,O.ap)(j.sessionId,"AuthEvent did not contain a session ID");const ht=yield ce(j.sessionId),Ct={};return(0,O.aq)()?Ct.ibi=Ue.packageName:(0,O.ar)()?Ct.apn=Ue.packageName:(0,O.as)($,"operation-not-supported-in-this-environment"),Ue.displayName&&(Ct.appDisplayName=Ue.displayName),Ct.sessionId=ht,(0,O.at)($,W,j.type,void 0,null!==(pe=j.eventId)&&void 0!==pe?pe:void 0,Ct)})).apply(this,arguments)}function ae(){return(ae=(0,u.Z)(function*($){const{BuildInfo:j}=ee(),W={};(0,O.aq)()?W.iosBundleId=j.packageName:(0,O.ar)()?W.androidPackageName=j.packageName:(0,O.as)($,"operation-not-supported-in-this-environment"),yield(0,O.au)($,W)})).apply(this,arguments)}function be(){return(be=(0,u.Z)(function*($,j,W){const{cordova:pe}=ee();let Ue=()=>{};try{yield new Promise((ht,Ct)=>{let Ze=null;function Zt(){var on;ht();const qn=null===(on=pe.plugins.browsertab)||void 0===on?void 0:on.close;"function"==typeof qn&&qn(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Nn(){Ze||(Ze=window.setTimeout(()=>{Ct((0,O.av)($,"redirect-cancelled-by-user"))},2e3))}function Tn(){"visible"===(null==document?void 0:document.visibilityState)&&Nn()}j.addPassiveListener(Zt),document.addEventListener("resume",Nn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",Tn,!1),Ue=()=>{j.removePassiveListener(Zt),document.removeEventListener("resume",Nn,!1),document.removeEventListener("visibilitychange",Tn,!1),Ze&&window.clearTimeout(Ze)}})}finally{Ue()}})).apply(this,arguments)}function ce($){return fe.apply(this,arguments)}function fe(){return(fe=(0,u.Z)(function*($){const j=ke($),W=yield crypto.subtle.digest("SHA-256",j);return Array.from(new Uint8Array(W)).map(Ue=>Ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ke($){if((0,O.ap)(/[0-9a-zA-Z]+/.test($),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode($);const j=new ArrayBuffer($.length),W=new Uint8Array(j);for(let pe=0;pe<$.length;pe++)W[pe]=$.charCodeAt(pe);return W}class mt extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(j)),super.onEvent(j)}initialized(){var j=this;return(0,u.Z)(function*(){yield j.initPromise})()}}function dt($){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,u.Z)(function*($){const j=yield $e()._get(ye($));return j&&(yield $e()._remove(ye($))),j})).apply(this,arguments)}function Te(){const $=[],j="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const pe=Math.floor(Math.random()*j.length);$.push(j.charAt(pe))}return $.join("")}function $e(){return(0,O.ax)(O.b)}function ye($){return(0,O.ay)("authEvent",$.config.apiKey,$.name)}function Mt($){if(!(null==$?void 0:$.includes("?")))return{};const[j,...W]=$.split("?");return(0,ie.zd)(W.join("?"))}function Ht(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function wt(){var $;return(null===($=null==self?void 0:self.location)||void 0===$?void 0:$.protocol)||null}function cn($=(0,ie.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()||!$.toLowerCase().match(/iphone|ipad|ipod|android/))}function si(){try{const $=self.localStorage,j=O.aG();if($)return $.setItem(j,"1"),$.removeItem(j),!function($=(0,ie.z$)()){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)||function($=(0,ie.z$)()){return/Edge\/\d+/.test($)}($)}()||(0,ie.hl)()}catch($){return hr()&&(0,ie.hl)()}return!1}function hr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Le(){return("http:"===wt()||"https:"===wt()||(0,ie.ru)()||cn())&&!((0,ie.b$)()||(0,ie.UG)())&&si()&&!hr()}function fr(){return cn()&&"undefined"!=typeof document}function ot(){return(ot=(0,u.Z)(function*(){return!!fr()&&new Promise($=>{const j=setTimeout(()=>{$(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(j),$(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},Gn=O.aw,oi="persistence";function pr($){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,u.Z)(function*($){yield $._initializationPromise;const j=_n(),W=O.ay(oi,$.config.apiKey,$.name);j&&j.setItem(W,$._getPersistence())})).apply(this,arguments)}function _n(){var $;try{return(null===($="undefined"!=typeof window?window:null)||void 0===$?void 0:$.sessionStorage)||null}catch(j){return null}}const qe=O.aw;class gt{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(j){var W=this;return(0,u.Z)(function*(){const pe=j._key();let Ue=W.eventManagers.get(pe);return Ue||(Ue=new mt(j),W.eventManagers.set(pe,Ue),W.attachCallbackListeners(j,Ue)),Ue})()}_openPopup(j){(0,O.as)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,W,pe,Ue){var ht=this;return(0,u.Z)(function*(){!function($){var j,W,pe,Ue,ht,Ct,Ze,Zt,Nn,Tn;const on=ee();(0,O.aw)("function"==typeof(null===(j=null==on?void 0:on.universalLinks)||void 0===j?void 0:j.subscribe),$,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(W=null==on?void 0:on.BuildInfo)||void 0===W?void 0:W.packageName),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(ht=null===(Ue=null===(pe=null==on?void 0:on.cordova)||void 0===pe?void 0:pe.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===ht?void 0:ht.openUrl),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Zt=null===(Ze=null===(Ct=null==on?void 0:on.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Zt?void 0:Zt.isAvailable),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Tn=null===(Nn=null==on?void 0:on.cordova)||void 0===Nn?void 0:Nn.InAppBrowser)||void 0===Tn?void 0:Tn.open),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const Ct=yield ht._initialize(j);yield Ct.initialized(),Ct.resetRedirect(),(0,O.aB)(),yield ht._originValidation(j);const Ze=function($,j,W=null){return{type:j,eventId:W,urlResponse:null,sessionId:Te(),postBody:null,tenantId:$.tenantId,error:(0,O.av)($,"no-auth-event")}}(j,pe,Ue);yield function($,j){return $e()._set(ye($),j)}(j,Ze);const Zt=yield function($,j,W){return z.apply(this,arguments)}(j,Ze,W),Nn=yield function($){const{cordova:j}=ee();return new Promise(W=>{j.plugins.browsertab.isAvailable(pe=>{let Ue=null;pe?j.plugins.browsertab.openUrl($):Ue=j.InAppBrowser.open($,(0,O.ao)()?"_blank":"_system","location=yes"),W(Ue)})})}(Zt);return function($,j,W){return be.apply(this,arguments)}(j,Ct,Nn)})()}_isIframeWebStorageSupported(j,W){throw new Error("Method not implemented.")}_originValidation(j){const W=j._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function($){return ae.apply(this,arguments)}(j)),this.originValidationPromises[W]}attachCallbackListeners(j,W){const{universalLinks:pe,handleOpenURL:Ue,BuildInfo:ht}=ee(),Ct=setTimeout((0,u.Z)(function*(){yield dt(j),W.onEvent(Ht())}),500),Ze=function(){var Tn=(0,u.Z)(function*(on){clearTimeout(Ct);const qn=yield dt(j);let We=null;qn&&(null==on?void 0:on.url)&&(We=function($,j){var W,pe;const Ue=function($){const j=Mt($),W=j.link?decodeURIComponent(j.link):void 0,pe=Mt(W).link,Ue=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return Mt(Ue).link||Ue||pe||W||$}(j);if(Ue.includes("/__/auth/callback")){const ht=Mt(Ue),Ct=ht.firebaseError?function($){try{return JSON.parse($)}catch(j){return null}}(decodeURIComponent(ht.firebaseError)):null,Ze=null===(pe=null===(W=null==Ct?void 0:Ct.code)||void 0===W?void 0:W.split("auth/"))||void 0===pe?void 0:pe[1],Zt=Ze?(0,O.av)(Ze):null;return Zt?{type:$.type,eventId:$.eventId,tenantId:$.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:$.type,eventId:$.eventId,tenantId:$.tenantId,sessionId:$.sessionId,urlResponse:Ue,postBody:null}}return null}(qn,on.url)),W.onEvent(We||Ht())});return function(qn){return Tn.apply(this,arguments)}}();void 0!==pe&&"function"==typeof pe.subscribe&&pe.subscribe(null,Ze);const Zt=Ue,Nn=`${ht.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var Tn=(0,u.Z)(function*(on){if(on.toLowerCase().startsWith(Nn)&&Ze({url:on}),"function"==typeof Zt)try{Zt(on)}catch(qn){console.error(qn)}});return function(on){return Tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(j){var W=this;return(0,u.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,W,pe,Ue){var ht=this;return(0,u.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openPopup(j,W,pe,Ue)})()}_openRedirect(j,W,pe,Ue){var ht=this;return(0,u.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openRedirect(j,W,pe,Ue)})()}_isIframeWebStorageSupported(j,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,W)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return fr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,u.Z)(function*(){if(j.underlyingResolver)return;const W=yield function(){return ot.apply(this,arguments)}();j.underlyingResolver=W?j.cordovaResolver:j.browserResolver})()}}function Gi($){return $.unwrap()}function hn($){return Tr($)}function Tr($){const{_tokenResponse:j}=$ instanceof ie.ZR?$.customData:$;if(!j)return null;if(!($ instanceof ie.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return O.P.credentialFromResult($);const W=j.providerId;if(!W||W===O.o.PASSWORD)return null;let pe;switch(W){case O.o.GOOGLE:pe=O.N;break;case O.o.FACEBOOK:pe=O.M;break;case O.o.GITHUB:pe=O.Q;break;case O.o.TWITTER:pe=O.V;break;default:const{oauthIdToken:Ue,oauthAccessToken:ht,oauthTokenSecret:Ct,pendingToken:Ze,nonce:Zt}=j;return ht||Ct||Ue||Ze?Ze?W.startsWith("saml.")?O.aJ._create(W,Ze):O.I._fromParams({providerId:W,signInMethod:W,pendingToken:Ze,idToken:Ue,accessToken:ht}):new O.T(W).credential({idToken:Ue,accessToken:ht,rawNonce:Zt}):null}return $ instanceof ie.ZR?pe.credentialFromError($):pe.credentialFromResult($)}function tr($,j){return j.catch(W=>{throw W instanceof ie.ZR&&function($,j){var W;const pe=null===(W=j.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===j.code)j.resolver=new Gt($,O.am($,j));else if(pe){const Ue=Tr(j),ht=j;Ue&&(ht.credential=Ue,ht.tenantId=pe.tenantId||void 0,ht.email=pe.email||void 0,ht.phoneNumber=pe.phoneNumber||void 0)}}($,W),W}).then(W=>{const Ue=W.user;return{operationType:W.operationType,credential:hn(W),additionalUserInfo:O.ak(W),user:Ge.getOrCreate(Ue)}})}function sn($,j){return bt.apply(this,arguments)}function bt(){return(bt=(0,u.Z)(function*($,j){const W=yield j;return{verificationId:W.verificationId,confirm:pe=>tr($,W.confirm(pe))}})).apply(this,arguments)}class Gt{constructor(j,W){this.resolver=W,this.auth=j.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return tr(Gi(this.auth),this.resolver.resolveSignIn(j))}}class Ge{constructor(j){this._delegate=j,this.multiFactor=O.an(j)}static getOrCreate(j){return Ge.USER_MAP.has(j)||Ge.USER_MAP.set(j,new Ge(j)),Ge.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var W=this;return(0,u.Z)(function*(){return tr(W.auth,O.Y(W._delegate,j))})()}linkWithPhoneNumber(j,W){var pe=this;return(0,u.Z)(function*(){return sn(pe.auth,O.l(pe._delegate,j,W))})()}linkWithPopup(j){var W=this;return(0,u.Z)(function*(){return tr(W.auth,O.d(W._delegate,j,gt))})()}linkWithRedirect(j){var W=this;return(0,u.Z)(function*(){return yield pr(O.aC(W.auth)),O.g(W._delegate,j,gt)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var W=this;return(0,u.Z)(function*(){return tr(W.auth,O.Z(W._delegate,j))})()}reauthenticateWithPhoneNumber(j,W){return sn(this.auth,O.r(this._delegate,j,W))}reauthenticateWithPopup(j){return tr(this.auth,O.e(this._delegate,j,gt))}reauthenticateWithRedirect(j){var W=this;return(0,u.Z)(function*(){return yield pr(O.aC(W.auth)),O.h(W._delegate,j,gt)})()}sendEmailVerification(j){return O.aa(this._delegate,j)}unlink(j){var W=this;return(0,u.Z)(function*(){return yield O.aj(W._delegate,j),W})()}updateEmail(j){return O.af(this._delegate,j)}updatePassword(j){return O.ag(this._delegate,j)}updatePhoneNumber(j){return O.u(this._delegate,j)}updateProfile(j){return O.ae(this._delegate,j)}verifyBeforeUpdateEmail(j,W){return O.ab(this._delegate,j,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ge.USER_MAP=new WeakMap;const Ne=O.aw;let lt=(()=>{class ${constructor(W,pe){if(this.app=W,pe.isInitialized())return this._delegate=pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ue}=W.options;Ne(Ue,"invalid-api-key",{appName:W.name}),Ne(Ue,"invalid-api-key",{appName:W.name});const ht="undefined"!=typeof window?gt:void 0;this._delegate=pe.initialize({options:{persistence:Rt(Ue,W.name),popupRedirectResolver:ht}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ge.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,pe){O.E(this._delegate,W,pe)}applyActionCode(W){return O.a1(this._delegate,W)}checkActionCode(W){return O.a2(this._delegate,W)}confirmPasswordReset(W,pe){return O.a0(this._delegate,W,pe)}createUserWithEmailAndPassword(W,pe){var Ue=this;return(0,u.Z)(function*(){return tr(Ue._delegate,O.a4(Ue._delegate,W,pe))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return O.a9(this._delegate,W)}isSignInWithEmailLink(W){return O.a7(this._delegate,W)}getRedirectResult(){var W=this;return(0,u.Z)(function*(){Ne(Le(),W._delegate,"operation-not-supported-in-this-environment");const pe=yield O.j(W._delegate,gt);return pe?tr(W._delegate,Promise.resolve(pe)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function($,j){(0,O.aC)($)._logFramework(j)}(this._delegate,W)}onAuthStateChanged(W,pe,Ue){const{next:ht,error:Ct,complete:Ze}=Et(W,pe,Ue);return this._delegate.onAuthStateChanged(ht,Ct,Ze)}onIdTokenChanged(W,pe,Ue){const{next:ht,error:Ct,complete:Ze}=Et(W,pe,Ue);return this._delegate.onIdTokenChanged(ht,Ct,Ze)}sendSignInLinkToEmail(W,pe){return O.a6(this._delegate,W,pe)}sendPasswordResetEmail(W,pe){return O.$(this._delegate,W,pe||void 0)}setPersistence(W){var pe=this;return(0,u.Z)(function*(){let Ue;switch(function($,j){Gn(Object.values(Zn).includes(j),$,"invalid-persistence-type"),(0,ie.b$)()?Gn(j!==Zn.SESSION,$,"unsupported-persistence-type"):(0,ie.UG)()?Gn(j===Zn.NONE,$,"unsupported-persistence-type"):hr()?Gn(j===Zn.NONE||j===Zn.LOCAL&&(0,ie.hl)(),$,"unsupported-persistence-type"):Gn(j===Zn.NONE||si(),$,"unsupported-persistence-type")}(pe._delegate,W),W){case Zn.SESSION:Ue=O.a;break;case Zn.LOCAL:Ue=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case Zn.NONE:Ue=O.K;break;default:return O.as("argument-error",{appName:pe._delegate.name})}return pe._delegate.setPersistence(Ue)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return tr(this._delegate,O.W(this._delegate))}signInWithCredential(W){return tr(this._delegate,O.X(this._delegate,W))}signInWithCustomToken(W){return tr(this._delegate,O._(this._delegate,W))}signInWithEmailAndPassword(W,pe){return tr(this._delegate,O.a5(this._delegate,W,pe))}signInWithEmailLink(W,pe){return tr(this._delegate,O.a8(this._delegate,W,pe))}signInWithPhoneNumber(W,pe){return sn(this._delegate,O.s(this._delegate,W,pe))}signInWithPopup(W){var pe=this;return(0,u.Z)(function*(){return Ne(Le(),pe._delegate,"operation-not-supported-in-this-environment"),tr(pe._delegate,O.c(pe._delegate,W,gt))})()}signInWithRedirect(W){var pe=this;return(0,u.Z)(function*(){return Ne(Le(),pe._delegate,"operation-not-supported-in-this-environment"),yield pr(pe._delegate),O.f(pe._delegate,W,gt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return O.a3(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return $.Persistence=Zn,$})();function Et($,j,W){let pe=$;"function"!=typeof $&&({next:pe,error:j,complete:W}=$);const Ue=pe;return{next:Ct=>Ue(Ct&&Ge.getOrCreate(Ct)),error:j,complete:W}}function Rt($,j){const W=function($,j){const W=_n();if(!W)return[];const pe=O.ay(oi,$,j);switch(W.getItem(pe)){case Zn.NONE:return[O.K];case Zn.LOCAL:return[O.i,O.a];case Zn.SESSION:return[O.a];default:return[]}}($,j);if("undefined"!=typeof self&&!W.includes(O.i)&&W.push(O.i),"undefined"!=typeof window)for(const pe of[O.b,O.a])W.includes(pe)||W.push(pe);return W.includes(O.K)||W.push(O.K),W}class Jt{constructor(){this.providerId="phone",this._delegate=new O.P(Gi(G.Z.auth()))}static credential(j,W){return O.P.credential(j,W)}verifyPhoneNumber(j,W){return this._delegate.verifyPhoneNumber(j,W)}unwrap(){return this._delegate}}Jt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Jt.PROVIDER_ID=O.P.PROVIDER_ID;const Q=O.aw;var $;($=G.Z).INTERNAL.registerComponent(new de.wA("auth-compat",j=>{const W=j.getProvider("app-compat").getImmediate(),pe=j.getProvider("auth");return new lt(W,pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:Jt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(j,W,pe=G.Z.app()){var Ue;Q(null===(Ue=pe.options)||void 0===Ue?void 0:Ue.apiKey,"invalid-api-key",{appName:pe.name}),this._delegate=new O.R(j,W,pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.V,Auth:lt,AuthCredential:O.G,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$.registerVersion("@firebase/auth-compat","0.2.12")},1593:(st,Ee,B)=>{"use strict";B.d(Ee,{P:()=>de});var u=B(9193),G=B(5917),O=B(7574);class de{constructor(J,U,z){this.kind=J,this.value=U,this.error=z,this.hasValue="N"===J}observe(J){switch(this.kind){case"N":return J.next&&J.next(this.value);case"E":return J.error&&J.error(this.error);case"C":return J.complete&&J.complete()}}do(J,U,z){switch(this.kind){case"N":return J&&J(this.value);case"E":return U&&U(this.error);case"C":return z&&z()}}accept(J,U,z){return J&&"function"==typeof J.next?this.observe(J):this.do(J,U,z)}toObservable(){switch(this.kind){case"N":return(0,G.of)(this.value);case"E":return ee=this.error,new O.y(U=>U.error(ee));case"C":return(0,u.c)()}var ee;throw new Error("unexpected notification kind value")}static createNext(J){return void 0!==J?new de("N",J):de.undefinedValueNotification}static createError(J){return new de("E",void 0,J)}static createComplete(){return de.completeNotification}}de.completeNotification=new de("C"),de.undefinedValueNotification=new de("N",void 0)},7574:(st,Ee,B)=>{"use strict";B.d(Ee,{y:()=>z});var u=B(7393),O=B(9181),ie=B(6490),te=B(6554),de=B(4487);var U=B(2494);let z=(()=>{class ae{constructor(Se){this._isScalar=!1,Se&&(this._subscribe=Se)}lift(Se){const be=new ae;return be.source=this,be.operator=Se,be}subscribe(Se,be,Ve){const{operator:ce}=this,fe=function(ae,Re,Se){if(ae){if(ae instanceof u.L)return ae;if(ae[O.b])return ae[O.b]()}return ae||Re||Se?new u.L(ae,Re,Se):new u.L(ie.c)}(Se,be,Ve);if(fe.add(ce?ce.call(fe,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),U.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(Se){try{return this._subscribe(Se)}catch(be){U.v.useDeprecatedSynchronousErrorHandling&&(Se.syncErrorThrown=!0,Se.syncErrorValue=be),function(ae){for(;ae;){const{closed:Re,destination:Se,isStopped:be}=ae;if(Re||be)return!1;ae=Se&&Se instanceof u.L?Se:null}return!0}(Se)?Se.error(be):console.warn(be)}}forEach(Se,be){return new(be=H(be))((Ve,ce)=>{let fe;fe=this.subscribe(ke=>{try{Se(ke)}catch(Ye){ce(Ye),fe&&fe.unsubscribe()}},ce,Ve)})}_subscribe(Se){const{source:be}=this;return be&&be.subscribe(Se)}[te.L](){return this}pipe(...Se){return 0===Se.length?this:function(ae){return 0===ae.length?de.y:1===ae.length?ae[0]:function(Se){return ae.reduce((be,Ve)=>Ve(be),Se)}}(Se)(this)}toPromise(Se){return new(Se=H(Se))((be,Ve)=>{let ce;this.subscribe(fe=>ce=fe,fe=>Ve(fe),()=>be(ce))})}}return ae.create=Re=>new ae(Re),ae})();function H(ae){if(ae||(ae=U.v.Promise||Promise),!ae)throw new Error("no Promise impl found");return ae}},6490:(st,Ee,B)=>{"use strict";B.d(Ee,{c:()=>O});var u=B(2494),G=B(4449);const O={closed:!0,next(ie){},error(ie){if(u.v.useDeprecatedSynchronousErrorHandling)throw ie;(0,G.z)(ie)},complete(){}}},9765:(st,Ee,B)=>{"use strict";B.d(Ee,{Yc:()=>de,xQ:()=>ee});var u=B(7574),G=B(7393),O=B(5319),ie=B(7971),oe=B(8858),te=B(9181);class de extends G.L{constructor(z){super(z),this.destination=z}}let ee=(()=>{class U extends u.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[te.b](){return new de(this)}lift(H){const ae=new J(this,this);return ae.operator=H,ae}next(H){if(this.closed)throw new ie.N;if(!this.isStopped){const{observers:ae}=this,Re=ae.length,Se=ae.slice();for(let be=0;be<Re;be++)Se[be].next(H)}}error(H){if(this.closed)throw new ie.N;this.hasError=!0,this.thrownError=H,this.isStopped=!0;const{observers:ae}=this,Re=ae.length,Se=ae.slice();for(let be=0;be<Re;be++)Se[be].error(H);this.observers.length=0}complete(){if(this.closed)throw new ie.N;this.isStopped=!0;const{observers:H}=this,ae=H.length,Re=H.slice();for(let Se=0;Se<ae;Se++)Re[Se].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(H){if(this.closed)throw new ie.N;return super._trySubscribe(H)}_subscribe(H){if(this.closed)throw new ie.N;return this.hasError?(H.error(this.thrownError),O.w.EMPTY):this.isStopped?(H.complete(),O.w.EMPTY):(this.observers.push(H),new oe.W(this,H))}asObservable(){const H=new u.y;return H.source=this,H}}return U.create=(z,H)=>new J(z,H),U})();class J extends ee{constructor(z,H){super(),this.destination=z,this.source=H}next(z){const{destination:H}=this;H&&H.next&&H.next(z)}error(z){const{destination:H}=this;H&&H.error&&this.destination.error(z)}complete(){const{destination:z}=this;z&&z.complete&&this.destination.complete()}_subscribe(z){const{source:H}=this;return H?this.source.subscribe(z):O.w.EMPTY}}},8858:(st,Ee,B)=>{"use strict";B.d(Ee,{W:()=>G});var u=B(5319);class G extends u.w{constructor(ie,oe){super(),this.subject=ie,this.subscriber=oe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ie=this.subject,oe=ie.observers;if(this.subject=null,!oe||0===oe.length||ie.isStopped||ie.closed)return;const te=oe.indexOf(this.subscriber);-1!==te&&oe.splice(te,1)}}},7393:(st,Ee,B)=>{"use strict";B.d(Ee,{L:()=>de});var u=B(9105),G=B(6490),O=B(5319),ie=B(9181),oe=B(2494),te=B(4449);class de extends O.w{constructor(U,z,H){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=G.c;break;case 1:if(!U){this.destination=G.c;break}if("object"==typeof U){U instanceof de?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new ee(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new ee(this,U,z,H)}}[ie.b](){return this}static create(U,z,H){const ae=new de(U,z,H);return ae.syncErrorThrowable=!1,ae}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class ee extends de{constructor(U,z,H,ae){super(),this._parentSubscriber=U;let Re,Se=this;(0,u.m)(z)?Re=z:z&&(Re=z.next,H=z.error,ae=z.complete,z!==G.c&&(Se=Object.create(z),(0,u.m)(Se.unsubscribe)&&this.add(Se.unsubscribe.bind(Se)),Se.unsubscribe=this.unsubscribe.bind(this))),this._context=Se,this._next=Re,this._error=H,this._complete=ae}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:z}=this;oe.v.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable?this.__tryOrSetError(z,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:z}=this,{useDeprecatedSynchronousErrorHandling:H}=oe.v;if(this._error)H&&z.syncErrorThrowable?(this.__tryOrSetError(z,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(z.syncErrorThrowable)H?(z.syncErrorValue=U,z.syncErrorThrown=!0):(0,te.z)(U),this.unsubscribe();else{if(this.unsubscribe(),H)throw U;(0,te.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const z=()=>this._complete.call(this._context);oe.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,z),this.unsubscribe()):(this.__tryOrUnsub(z),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,z){try{U.call(this._context,z)}catch(H){if(this.unsubscribe(),oe.v.useDeprecatedSynchronousErrorHandling)throw H;(0,te.z)(H)}}__tryOrSetError(U,z,H){if(!oe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{z.call(this._context,H)}catch(ae){return oe.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=ae,U.syncErrorThrown=!0,!0):((0,te.z)(ae),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(st,Ee,B)=>{"use strict";B.d(Ee,{w:()=>te});var u=B(9796),G=B(1555),O=B(9105);const oe=(()=>{function ee(J){return Error.call(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((U,z)=>`${z+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J,this}return ee.prototype=Object.create(Error.prototype),ee})();class te{constructor(J){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,J&&(this._ctorUnsubscribe=!0,this._unsubscribe=J)}unsubscribe(){let J;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:z,_unsubscribe:H,_subscriptions:ae}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof te)U.remove(this);else if(null!==U)for(let Re=0;Re<U.length;++Re)U[Re].remove(this);if((0,O.m)(H)){z&&(this._unsubscribe=void 0);try{H.call(this)}catch(Re){J=Re instanceof oe?de(Re.errors):[Re]}}if((0,u.k)(ae)){let Re=-1,Se=ae.length;for(;++Re<Se;){const be=ae[Re];if((0,G.K)(be))try{be.unsubscribe()}catch(Ve){J=J||[],Ve instanceof oe?J=J.concat(de(Ve.errors)):J.push(Ve)}}}if(J)throw new oe(J)}add(J){let U=J;if(!J)return te.EMPTY;switch(typeof J){case"function":U=new te(J);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof te)){const ae=U;U=new te,U._subscriptions=[ae]}break;default:throw new Error("unrecognized teardown "+J+" added to Subscription.")}let{_parentOrParents:z}=U;if(null===z)U._parentOrParents=this;else if(z instanceof te){if(z===this)return U;U._parentOrParents=[z,this]}else{if(-1!==z.indexOf(this))return U;z.push(this)}const H=this._subscriptions;return null===H?this._subscriptions=[U]:H.push(U),U}remove(J){const U=this._subscriptions;if(U){const z=U.indexOf(J);-1!==z&&U.splice(z,1)}}}var ee;function de(ee){return ee.reduce((J,U)=>J.concat(U instanceof oe?U.errors:U),[])}te.EMPTY=((ee=new te).closed=!0,ee)},2494:(st,Ee,B)=>{"use strict";B.d(Ee,{v:()=>G});let u=!1;const G={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ie=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ie.stack)}else u&&console.log("RxJS: Back to a better error behavior. Thank you. <3");u=O},get useDeprecatedSynchronousErrorHandling(){return u}}},5345:(st,Ee,B)=>{"use strict";B.d(Ee,{IY:()=>ie,Ds:()=>te,ft:()=>ee});var u=B(7393),G=B(7574),O=B(7444);class ie extends u.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class te extends u.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function ee(J,U){if(U.closed)return;if(J instanceof G.y)return J.subscribe(U);let z;try{z=(0,O.s)(J)(U)}catch(H){U.error(H)}return z}},2441:(st,Ee,B)=>{"use strict";B.d(Ee,{c:()=>oe,N:()=>te});var u=B(9765),G=B(7574),O=B(5319),ie=B(1307);class oe extends G.y{constructor(z,H){super(),this.source=z,this.subjectFactory=H,this._refCount=0,this._isComplete=!1}_subscribe(z){return this.getSubject().subscribe(z)}getSubject(){const z=this._subject;return(!z||z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let z=this._connection;return z||(this._isComplete=!1,z=this._connection=new O.w,z.add(this.source.subscribe(new de(this.getSubject(),this))),z.closed&&(this._connection=null,z=O.w.EMPTY)),z}refCount(){return(0,ie.x)()(this)}}const te=(()=>{const U=oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class de extends u.Yc{constructor(z,H){super(z),this.connectable=H}_error(z){this._unsubscribe(),super._error(z)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const z=this.connectable;if(z){this.connectable=null;const H=z._connection;z._refCount=0,z._subject=null,z._connection=null,H&&H.unsubscribe()}}}},9193:(st,Ee,B)=>{"use strict";B.d(Ee,{E:()=>G,c:()=>O});var u=B(7574);const G=new u.y(oe=>oe.complete());function O(oe){return oe?function(oe){return new u.y(te=>oe.schedule(()=>te.complete()))}(oe):G}},4402:(st,Ee,B)=>{"use strict";B.d(Ee,{D:()=>Se});var u=B(7574),G=B(7444),O=B(5319),ie=B(6554),de=B(4087),ee=B(377),z=B(4072),H=B(9489);function Se(be,Ve){return Ve?function(be,Ve){if(null!=be){if(function(be){return be&&"function"==typeof be[ie.L]}(be))return function(be,Ve){return new u.y(ce=>{const fe=new O.w;return fe.add(Ve.schedule(()=>{const ke=be[ie.L]();fe.add(ke.subscribe({next(Ye){fe.add(Ve.schedule(()=>ce.next(Ye)))},error(Ye){fe.add(Ve.schedule(()=>ce.error(Ye)))},complete(){fe.add(Ve.schedule(()=>ce.complete()))}}))})),fe})}(be,Ve);if((0,z.t)(be))return function(be,Ve){return new u.y(ce=>{const fe=new O.w;return fe.add(Ve.schedule(()=>be.then(ke=>{fe.add(Ve.schedule(()=>{ce.next(ke),fe.add(Ve.schedule(()=>ce.complete()))}))},ke=>{fe.add(Ve.schedule(()=>ce.error(ke)))}))),fe})}(be,Ve);if((0,H.z)(be))return(0,de.r)(be,Ve);if(function(be){return be&&"function"==typeof be[ee.hZ]}(be)||"string"==typeof be)return function(be,Ve){if(!be)throw new Error("Iterable cannot be null");return new u.y(ce=>{const fe=new O.w;let ke;return fe.add(()=>{ke&&"function"==typeof ke.return&&ke.return()}),fe.add(Ve.schedule(()=>{ke=be[ee.hZ](),fe.add(Ve.schedule(function(){if(ce.closed)return;let Ye,mt;try{const nt=ke.next();Ye=nt.value,mt=nt.done}catch(nt){return void ce.error(nt)}mt?ce.complete():(ce.next(Ye),this.schedule())}))})),fe})}(be,Ve)}throw new TypeError((null!==be&&typeof be||be)+" is not observable")}(be,Ve):be instanceof u.y?be:new u.y((0,G.s)(be))}},6693:(st,Ee,B)=>{"use strict";B.d(Ee,{n:()=>ie});var u=B(7574),G=B(5015),O=B(4087);function ie(oe,te){return te?(0,O.r)(oe,te):new u.y((0,G.V)(oe))}},6682:(st,Ee,B)=>{"use strict";B.d(Ee,{T:()=>oe});var u=B(7574),G=B(4869),O=B(3282),ie=B(6693);function oe(...te){let de=Number.POSITIVE_INFINITY,ee=null,J=te[te.length-1];return(0,G.K)(J)?(ee=te.pop(),te.length>1&&"number"==typeof te[te.length-1]&&(de=te.pop())):"number"==typeof J&&(de=te.pop()),null===ee&&1===te.length&&te[0]instanceof u.y?te[0]:(0,O.J)(de)((0,ie.n)(te,ee))}},5917:(st,Ee,B)=>{"use strict";B.d(Ee,{of:()=>ie});var u=B(4869),G=B(6693),O=B(4087);function ie(...oe){let te=oe[oe.length-1];return(0,u.K)(te)?(oe.pop(),(0,O.r)(oe,te)):(0,G.n)(oe)}},8002:(st,Ee,B)=>{"use strict";B.d(Ee,{U:()=>G});var u=B(7393);function G(oe,te){return function(ee){if("function"!=typeof oe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ee.lift(new O(oe,te))}}class O{constructor(te,de){this.project=te,this.thisArg=de}call(te,de){return de.subscribe(new ie(te,this.project,this.thisArg))}}class ie extends u.L{constructor(te,de,ee){super(te),this.project=de,this.count=0,this.thisArg=ee||this}_next(te){let de;try{de=this.project.call(this.thisArg,te,this.count++)}catch(ee){return void this.destination.error(ee)}this.destination.next(de)}}},3282:(st,Ee,B)=>{"use strict";B.d(Ee,{J:()=>O});var u=B(9773),G=B(4487);function O(ie=Number.POSITIVE_INFINITY){return(0,u.zg)(G.y,ie)}},9773:(st,Ee,B)=>{"use strict";B.d(Ee,{zg:()=>ie});var u=B(8002),G=B(4402),O=B(5345);function ie(ee,J,U=Number.POSITIVE_INFINITY){return"function"==typeof J?z=>z.pipe(ie((H,ae)=>(0,G.D)(ee(H,ae)).pipe((0,u.U)((Re,Se)=>J(H,Re,ae,Se))),U)):("number"==typeof J&&(U=J),z=>z.lift(new oe(ee,U)))}class oe{constructor(J,U=Number.POSITIVE_INFINITY){this.project=J,this.concurrent=U}call(J,U){return U.subscribe(new te(J,this.project,this.concurrent))}}class te extends O.Ds{constructor(J,U,z=Number.POSITIVE_INFINITY){super(J),this.project=U,this.concurrent=z,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(J){this.active<this.concurrent?this._tryNext(J):this.buffer.push(J)}_tryNext(J){let U;const z=this.index++;try{U=this.project(J,z)}catch(H){return void this.destination.error(H)}this.active++,this._innerSub(U)}_innerSub(J){const U=new O.IY(this),z=this.destination;z.add(U);const H=(0,O.ft)(J,U);H!==U&&z.add(H)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(J){this.destination.next(J)}notifyComplete(){const J=this.buffer;this.active--,J.length>0?this._next(J.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(st,Ee,B)=>{"use strict";B.d(Ee,{QV:()=>O,ht:()=>oe});var u=B(7393),G=B(1593);function O(de,ee=0){return function(U){return U.lift(new ie(de,ee))}}class ie{constructor(ee,J=0){this.scheduler=ee,this.delay=J}call(ee,J){return J.subscribe(new oe(ee,this.scheduler,this.delay))}}class oe extends u.L{constructor(ee,J,U=0){super(ee),this.scheduler=J,this.delay=U}static dispatch(ee){const{notification:J,destination:U}=ee;J.observe(U),this.unsubscribe()}scheduleMessage(ee){this.destination.add(this.scheduler.schedule(oe.dispatch,this.delay,new te(ee,this.destination)))}_next(ee){this.scheduleMessage(G.P.createNext(ee))}_error(ee){this.scheduleMessage(G.P.createError(ee)),this.unsubscribe()}_complete(){this.scheduleMessage(G.P.createComplete()),this.unsubscribe()}}class te{constructor(ee,J){this.notification=ee,this.destination=J}}},1307:(st,Ee,B)=>{"use strict";B.d(Ee,{x:()=>G});var u=B(7393);function G(){return function(te){return te.lift(new O(te))}}class O{constructor(te){this.connectable=te}call(te,de){const{connectable:ee}=this;ee._refCount++;const J=new ie(te,ee),U=de.subscribe(J);return J.closed||(J.connection=ee.connect()),U}}class ie extends u.L{constructor(te,de){super(te),this.connectable=de}_unsubscribe(){const{connectable:te}=this;if(!te)return void(this.connection=null);this.connectable=null;const de=te._refCount;if(de<=0)return void(this.connection=null);if(te._refCount=de-1,de>1)return void(this.connection=null);const{connection:ee}=this,J=te._connection;this.connection=null,J&&(!ee||J===ee)&&J.unsubscribe()}}},8819:(st,Ee,B)=>{"use strict";B.d(Ee,{B:()=>de});var u=B(2441);var ie=B(1307),oe=B(9765);function te(){return new oe.xQ}function de(){return ee=>(0,ie.x)()(function(ee,J){return function(z){let H;H="function"==typeof ee?ee:function(){return ee};const ae=Object.create(z,u.N);return ae.source=z,ae.subjectFactory=H,ae}}(te)(ee))}},2639:(st,Ee,B)=>{"use strict";B.d(Ee,{R:()=>be});var u=B(7574);let G=1;const O=Promise.resolve(),ie={};function oe(ce){return ce in ie&&(delete ie[ce],!0)}const te={setImmediate(ce){const fe=G++;return ie[fe]=!0,O.then(()=>oe(fe)&&ce()),fe},clearImmediate(ce){oe(ce)}};var ee=B(6465),U=B(6102);const ae=new class extends U.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:ke}=this;let Ye,mt=-1,nt=ke.length;fe=fe||ke.shift();do{if(Ye=fe.execute(fe.state,fe.delay))break}while(++mt<nt&&(fe=ke.shift()));if(this.active=!1,Ye){for(;++mt<nt&&(fe=ke.shift());)fe.unsubscribe();throw Ye}}}(class extends ee.o{constructor(fe,ke){super(fe,ke),this.scheduler=fe,this.work=ke}requestAsyncId(fe,ke,Ye=0){return null!==Ye&&Ye>0?super.requestAsyncId(fe,ke,Ye):(fe.actions.push(this),fe.scheduled||(fe.scheduled=te.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,ke,Ye=0){if(null!==Ye&&Ye>0||null===Ye&&this.delay>0)return super.recycleAsyncId(fe,ke,Ye);0===fe.actions.length&&(te.clearImmediate(ke),fe.scheduled=void 0)}});var Re=B(6561);class Se extends u.y{constructor(fe,ke=0,Ye=ae){super(),this.source=fe,this.delayTime=ke,this.scheduler=Ye,(!(0,Re.k)(ke)||ke<0)&&(this.delayTime=0),(!Ye||"function"!=typeof Ye.schedule)&&(this.scheduler=ae)}static create(fe,ke=0,Ye=ae){return new Se(fe,ke,Ye)}static dispatch(fe){const{source:ke,subscriber:Ye}=fe;return this.add(ke.subscribe(Ye))}_subscribe(fe){return this.scheduler.schedule(Se.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function be(ce,fe=0){return function(Ye){return Ye.lift(new Ve(ce,fe))}}class Ve{constructor(fe,ke){this.scheduler=fe,this.delay=ke}call(fe,ke){return new Se(ke,this.delay,this.scheduler).subscribe(fe)}}},8307:(st,Ee,B)=>{"use strict";B.d(Ee,{b:()=>ie});var u=B(7393),G=B(8640),O=B(9105);function ie(de,ee,J){return function(z){return z.lift(new oe(de,ee,J))}}class oe{constructor(ee,J,U){this.nextOrObserver=ee,this.error=J,this.complete=U}call(ee,J){return J.subscribe(new te(ee,this.nextOrObserver,this.error,this.complete))}}class te extends u.L{constructor(ee,J,U,z){super(ee),this._tapNext=G.Z,this._tapError=G.Z,this._tapComplete=G.Z,this._tapError=U||G.Z,this._tapComplete=z||G.Z,(0,O.m)(J)?(this._context=this,this._tapNext=J):J&&(this._context=J,this._tapNext=J.next||G.Z,this._tapError=J.error||G.Z,this._tapComplete=J.complete||G.Z)}_next(ee){try{this._tapNext.call(this._context,ee)}catch(J){return void this.destination.error(J)}this.destination.next(ee)}_error(ee){try{this._tapError.call(this._context,ee)}catch(J){return void this.destination.error(J)}this.destination.error(ee)}_complete(){try{this._tapComplete.call(this._context)}catch(ee){return void this.destination.error(ee)}return this.destination.complete()}}},4087:(st,Ee,B)=>{"use strict";B.d(Ee,{r:()=>O});var u=B(7574),G=B(5319);function O(ie,oe){return new u.y(te=>{const de=new G.w;let ee=0;return de.add(oe.schedule(function(){ee!==ie.length?(te.next(ie[ee++]),te.closed||de.add(this.schedule())):te.complete()})),de})}},6465:(st,Ee,B)=>{"use strict";B.d(Ee,{o:()=>O});var u=B(5319);class G extends u.w{constructor(oe,te){super()}schedule(oe,te=0){return this}}class O extends G{constructor(oe,te){super(oe,te),this.scheduler=oe,this.work=te,this.pending=!1}schedule(oe,te=0){if(this.closed)return this;this.state=oe;const de=this.id,ee=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(ee,de,te)),this.pending=!0,this.delay=te,this.id=this.id||this.requestAsyncId(ee,this.id,te),this}requestAsyncId(oe,te,de=0){return setInterval(oe.flush.bind(oe,this),de)}recycleAsyncId(oe,te,de=0){if(null!==de&&this.delay===de&&!1===this.pending)return te;clearInterval(te)}execute(oe,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(oe,te);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,te){let ee,de=!1;try{this.work(oe)}catch(J){de=!0,ee=!!J&&J||new Error(J)}if(de)return this.unsubscribe(),ee}_unsubscribe(){const oe=this.id,te=this.scheduler,de=te.actions,ee=de.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ee&&de.splice(ee,1),null!=oe&&(this.id=this.recycleAsyncId(te,oe,null)),this.delay=null}}},6102:(st,Ee,B)=>{"use strict";B.d(Ee,{v:()=>G});let u=(()=>{class O{constructor(oe,te=O.now){this.SchedulerAction=oe,this.now=te}schedule(oe,te=0,de){return new this.SchedulerAction(this,oe).schedule(de,te)}}return O.now=()=>Date.now(),O})();class G extends u{constructor(ie,oe=u.now){super(ie,()=>G.delegate&&G.delegate!==this?G.delegate.now():oe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ie,oe=0,te){return G.delegate&&G.delegate!==this?G.delegate.schedule(ie,oe,te):super.schedule(ie,oe,te)}flush(ie){const{actions:oe}=this;if(this.active)return void oe.push(ie);let te;this.active=!0;do{if(te=ie.execute(ie.state,ie.delay))break}while(ie=oe.shift());if(this.active=!1,te){for(;ie=oe.shift();)ie.unsubscribe();throw te}}}},3637:(st,Ee,B)=>{"use strict";B.d(Ee,{z:()=>O,P:()=>ie});var u=B(6465);const O=new(B(6102).v)(u.o),ie=O},7771:(st,Ee,B)=>{"use strict";B.d(Ee,{c:()=>te,N:()=>oe});var u=B(6465),O=B(6102);const oe=new class extends O.v{}(class extends u.o{constructor(ee,J){super(ee,J),this.scheduler=ee,this.work=J}schedule(ee,J=0){return J>0?super.schedule(ee,J):(this.delay=J,this.state=ee,this.scheduler.flush(this),this)}execute(ee,J){return J>0||this.closed?super.execute(ee,J):this._execute(ee,J)}requestAsyncId(ee,J,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(ee,J,U):ee.flush(this)}}),te=oe},377:(st,Ee,B)=>{"use strict";B.d(Ee,{hZ:()=>G});const G="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(st,Ee,B)=>{"use strict";B.d(Ee,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(st,Ee,B)=>{"use strict";B.d(Ee,{b:()=>u});const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(st,Ee,B)=>{"use strict";B.d(Ee,{N:()=>G});const G=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(st,Ee,B)=>{"use strict";function u(G){setTimeout(()=>{throw G},0)}B.d(Ee,{z:()=>u})},4487:(st,Ee,B)=>{"use strict";function u(G){return G}B.d(Ee,{y:()=>u})},9796:(st,Ee,B)=>{"use strict";B.d(Ee,{k:()=>u});const u=Array.isArray||(G=>G&&"number"==typeof G.length)},9489:(st,Ee,B)=>{"use strict";B.d(Ee,{z:()=>u});const u=G=>G&&"number"==typeof G.length&&"function"!=typeof G},9105:(st,Ee,B)=>{"use strict";function u(G){return"function"==typeof G}B.d(Ee,{m:()=>u})},6561:(st,Ee,B)=>{"use strict";B.d(Ee,{k:()=>G});var u=B(9796);function G(O){return!(0,u.k)(O)&&O-parseFloat(O)+1>=0}},1555:(st,Ee,B)=>{"use strict";function u(G){return null!==G&&"object"==typeof G}B.d(Ee,{K:()=>u})},4072:(st,Ee,B)=>{"use strict";function u(G){return!!G&&"function"!=typeof G.subscribe&&"function"==typeof G.then}B.d(Ee,{t:()=>u})},4869:(st,Ee,B)=>{"use strict";function u(G){return G&&"function"==typeof G.schedule}B.d(Ee,{K:()=>u})},8640:(st,Ee,B)=>{"use strict";function u(){}B.d(Ee,{Z:()=>u})},7444:(st,Ee,B)=>{"use strict";B.d(Ee,{s:()=>z});var u=B(5015),G=B(4449),ie=B(377),te=B(6554),ee=B(9489),J=B(4072),U=B(1555);const z=H=>{if(H&&"function"==typeof H[te.L])return(H=>ae=>{const Re=H[te.L]();if("function"!=typeof Re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Re.subscribe(ae)})(H);if((0,ee.z)(H))return(0,u.V)(H);if((0,J.t)(H))return(H=>ae=>(H.then(Re=>{ae.closed||(ae.next(Re),ae.complete())},Re=>ae.error(Re)).then(null,G.z),ae))(H);if(H&&"function"==typeof H[ie.hZ])return(H=>ae=>{const Re=H[ie.hZ]();for(;;){let Se;try{Se=Re.next()}catch(be){return ae.error(be),ae}if(Se.done){ae.complete();break}if(ae.next(Se.value),ae.closed)break}return"function"==typeof Re.return&&ae.add(()=>{Re.return&&Re.return()}),ae})(H);{const Re=`You provided ${(0,U.K)(H)?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Re)}}},5015:(st,Ee,B)=>{"use strict";B.d(Ee,{V:()=>u});const u=G=>O=>{for(let ie=0,oe=G.length;ie<oe&&!O.closed;ie++)O.next(G[ie]);O.complete()}},8340:(st,Ee,B)=>{"use strict";var u=B(7716);let G=null;function O(){return G}const de=new u.OlP("DocumentToken");let ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:J,token:n,providedIn:"platform"}),n})();function J(){return(0,u.LFG)(z)}const U=new u.OlP("Location Initialized");let z=(()=>{class n extends ee{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){H()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){H()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(de))},n.\u0275prov=(0,u.Yz7)({factory:ae,token:n,providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function ae(){return new z((0,u.LFG)(de))}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function be(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,u.Yz7)({factory:ce,token:n,providedIn:"root"}),n})();function ce(n){const e=(0,u.LFG)(de).location;return new ke((0,u.LFG)(ee),e&&e.origin||"")}const fe=new u.OlP("appBaseHref");let ke=(()=>{class n extends Ve{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const d=this.prepareExternalUrl(i+be(a));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){const d=this.prepareExternalUrl(i+be(a));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ee),u.LFG(fe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ye=(()=>{class n extends Ve{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let d=this.prepareExternalUrl(i+be(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){let d=this.prepareExternalUrl(i+be(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ee),u.LFG(fe,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),mt=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Se(dt(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+be(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,dt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ve),u.LFG(ee))},n.normalizeQueryParams=be,n.joinWithSlash=Re,n.stripTrailingSlash=Se,n.\u0275prov=(0,u.Yz7)({factory:nt,token:n,providedIn:"root"}),n})();function nt(){return new mt((0,u.LFG)(Ve),(0,u.LFG)(ee))}function dt(n){return n.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Zero=0]="Zero",Te[Te.One=1]="One",Te[Te.Two=2]="Two",Te[Te.Few=3]="Few",Te[Te.Many=4]="Many",Te[Te.Other=5]="Other",Te))(),$e=(()=>(($e=$e||{})[$e.Format=0]="Format",$e[$e.Standalone=1]="Standalone",$e))(),ye=(()=>((ye=ye||{})[ye.Narrow=0]="Narrow",ye[ye.Abbreviated=1]="Abbreviated",ye[ye.Wide=2]="Wide",ye[ye.Short=3]="Short",ye))(),He=(()=>((He=He||{})[He.Short=0]="Short",He[He.Medium=1]="Medium",He[He.Long=2]="Long",He[He.Full=3]="Full",He))(),Ae=(()=>((Ae=Ae||{})[Ae.Decimal=0]="Decimal",Ae[Ae.Group=1]="Group",Ae[Ae.List=2]="List",Ae[Ae.PercentSign=3]="PercentSign",Ae[Ae.PlusSign=4]="PlusSign",Ae[Ae.MinusSign=5]="MinusSign",Ae[Ae.Exponential=6]="Exponential",Ae[Ae.SuperscriptingExponent=7]="SuperscriptingExponent",Ae[Ae.PerMille=8]="PerMille",Ae[Ae.Infinity=9]="Infinity",Ae[Ae.NaN=10]="NaN",Ae[Ae.TimeSeparator=11]="TimeSeparator",Ae[Ae.CurrencyDecimal=12]="CurrencyDecimal",Ae[Ae.CurrencyGroup=13]="CurrencyGroup",Ae))();function Wn(n,e){return vn((0,u.cg1)(n)[u.wAp.DateFormat],e)}function wt(n,e){return vn((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function er(n,e){return vn((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function cn(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(void 0===r){if(e===Ae.CurrencyDecimal)return t[u.wAp.NumberSymbols][Ae.Decimal];if(e===Ae.CurrencyGroup)return t[u.wAp.NumberSymbols][Ae.Group]}return r}const hr=u.kL8;function Le(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function vn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Zn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const pr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vn={},Ea=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var _n=(()=>((_n=_n||{})[_n.Short=0]="Short",_n[_n.ShortGMT=1]="ShortGMT",_n[_n.Long=2]="Long",_n[_n.Extended=3]="Extended",_n))(),qe=(()=>((qe=qe||{})[qe.FullYear=0]="FullYear",qe[qe.Month=1]="Month",qe[qe.Date=2]="Date",qe[qe.Hours=3]="Hours",qe[qe.Minutes=4]="Minutes",qe[qe.Seconds=5]="Seconds",qe[qe.FractionalSeconds=6]="FractionalSeconds",qe[qe.Day=7]="Day",qe))(),gt=(()=>((gt=gt||{})[gt.DayPeriods=0]="DayPeriods",gt[gt.Days=1]="Days",gt[gt.Months=2]="Months",gt[gt.Eras=3]="Eras",gt))();function Gi(n,e,t,r){let i=function(n){if(ht(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,d=1]=n.split("-").map(f=>+f);return as(i,a-1,d)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(pr))return function(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,a=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-t,f=Number(n[5]||0)-r,_=Number(n[6]||0),w=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(e,d,f,_,w),e}(r)}const e=new Date(n);if(!ht(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=hn(t,e)||e;let f,d=[];for(;e;){if(f=Ea.exec(e),!f){d.push(e);break}{d=d.concat(f.slice(1));const D=d.pop();if(!D)break;e=D}}let _=i.getTimezoneOffset();r&&(_=$(r,_),i=function(n,e,t){const i=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*($(e,i)-i))}(i,r));let w="";return d.forEach(D=>{const S=function(n){if(ne[n])return ne[n];let e;switch(n){case"G":case"GG":case"GGG":e=Gt(gt.Eras,ye.Abbreviated);break;case"GGGG":e=Gt(gt.Eras,ye.Wide);break;case"GGGGG":e=Gt(gt.Eras,ye.Narrow);break;case"y":e=sn(qe.FullYear,1,0,!1,!0);break;case"yy":e=sn(qe.FullYear,2,0,!0,!0);break;case"yyy":e=sn(qe.FullYear,3,0,!1,!0);break;case"yyyy":e=sn(qe.FullYear,4,0,!1,!0);break;case"Y":e=Z(1);break;case"YY":e=Z(2,!0);break;case"YYY":e=Z(3);break;case"YYYY":e=Z(4);break;case"M":case"L":e=sn(qe.Month,1,1);break;case"MM":case"LL":e=sn(qe.Month,2,1);break;case"MMM":e=Gt(gt.Months,ye.Abbreviated);break;case"MMMM":e=Gt(gt.Months,ye.Wide);break;case"MMMMM":e=Gt(gt.Months,ye.Narrow);break;case"LLL":e=Gt(gt.Months,ye.Abbreviated,$e.Standalone);break;case"LLLL":e=Gt(gt.Months,ye.Wide,$e.Standalone);break;case"LLLLL":e=Gt(gt.Months,ye.Narrow,$e.Standalone);break;case"w":e=Q(1);break;case"ww":e=Q(2);break;case"W":e=Q(1,!0);break;case"d":e=sn(qe.Date,1);break;case"dd":e=sn(qe.Date,2);break;case"c":case"cc":e=sn(qe.Day,1);break;case"ccc":e=Gt(gt.Days,ye.Abbreviated,$e.Standalone);break;case"cccc":e=Gt(gt.Days,ye.Wide,$e.Standalone);break;case"ccccc":e=Gt(gt.Days,ye.Narrow,$e.Standalone);break;case"cccccc":e=Gt(gt.Days,ye.Short,$e.Standalone);break;case"E":case"EE":case"EEE":e=Gt(gt.Days,ye.Abbreviated);break;case"EEEE":e=Gt(gt.Days,ye.Wide);break;case"EEEEE":e=Gt(gt.Days,ye.Narrow);break;case"EEEEEE":e=Gt(gt.Days,ye.Short);break;case"a":case"aa":case"aaa":e=Gt(gt.DayPeriods,ye.Abbreviated);break;case"aaaa":e=Gt(gt.DayPeriods,ye.Wide);break;case"aaaaa":e=Gt(gt.DayPeriods,ye.Narrow);break;case"b":case"bb":case"bbb":e=Gt(gt.DayPeriods,ye.Abbreviated,$e.Standalone,!0);break;case"bbbb":e=Gt(gt.DayPeriods,ye.Wide,$e.Standalone,!0);break;case"bbbbb":e=Gt(gt.DayPeriods,ye.Narrow,$e.Standalone,!0);break;case"B":case"BB":case"BBB":e=Gt(gt.DayPeriods,ye.Abbreviated,$e.Format,!0);break;case"BBBB":e=Gt(gt.DayPeriods,ye.Wide,$e.Format,!0);break;case"BBBBB":e=Gt(gt.DayPeriods,ye.Narrow,$e.Format,!0);break;case"h":e=sn(qe.Hours,1,-12);break;case"hh":e=sn(qe.Hours,2,-12);break;case"H":e=sn(qe.Hours,1);break;case"HH":e=sn(qe.Hours,2);break;case"m":e=sn(qe.Minutes,1);break;case"mm":e=sn(qe.Minutes,2);break;case"s":e=sn(qe.Seconds,1);break;case"ss":e=sn(qe.Seconds,2);break;case"S":e=sn(qe.FractionalSeconds,1);break;case"SS":e=sn(qe.FractionalSeconds,2);break;case"SSS":e=sn(qe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ne(_n.Short);break;case"ZZZZZ":e=Ne(_n.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ne(_n.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ne(_n.Long);break;default:return null}return ne[n]=e,e}(D);w+=S?S(i,t,_):"''"===D?"'":D.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),w}function as(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function hn(n,e){const t=function(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(Vn[t]=Vn[t]||{},Vn[t][e])return Vn[t][e];let r="";switch(e){case"shortDate":r=Wn(n,He.Short);break;case"mediumDate":r=Wn(n,He.Medium);break;case"longDate":r=Wn(n,He.Long);break;case"fullDate":r=Wn(n,He.Full);break;case"shortTime":r=wt(n,He.Short);break;case"mediumTime":r=wt(n,He.Medium);break;case"longTime":r=wt(n,He.Long);break;case"fullTime":r=wt(n,He.Full);break;case"short":const i=hn(n,"shortTime"),a=hn(n,"shortDate");r=It(er(n,He.Short),[i,a]);break;case"medium":const d=hn(n,"mediumTime"),f=hn(n,"mediumDate");r=It(er(n,He.Medium),[d,f]);break;case"long":const _=hn(n,"longTime"),w=hn(n,"longDate");r=It(er(n,He.Long),[_,w]);break;case"full":const D=hn(n,"fullTime"),S=hn(n,"fullDate");r=It(er(n,He.Full),[D,S])}return r&&(Vn[t][e]=r),r}function It(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Tr(n,e,t="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=t));let d=String(n);for(;d.length<e;)d="0"+d;return r&&(d=d.substr(d.length-e)),a+d}function sn(n,e,t=0,r=!1,i=!1){return function(a,d){let f=function(n,e){switch(n){case qe.FullYear:return e.getFullYear();case qe.Month:return e.getMonth();case qe.Date:return e.getDate();case qe.Hours:return e.getHours();case qe.Minutes:return e.getMinutes();case qe.Seconds:return e.getSeconds();case qe.FractionalSeconds:return e.getMilliseconds();case qe.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((t>0||f>-t)&&(f+=t),n===qe.Hours)0===f&&-12===t&&(f=12);else if(n===qe.FractionalSeconds)return function(n,e){return Tr(n,3).substr(0,e)}(f,e);const _=cn(d,Ae.MinusSign);return Tr(f,e,_,r,i)}}function Gt(n,e,t=$e.Format,r=!1){return function(i,a){return function(n,e,t,r,i,a){switch(t){case gt.Months:return function(n,e,t){const r=(0,u.cg1)(n),a=vn([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return vn(a,t)}(e,i,r)[n.getMonth()];case gt.Days:return function(n,e,t){const r=(0,u.cg1)(n),a=vn([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return vn(a,t)}(e,i,r)[n.getDay()];case gt.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(a){const w=function(n){const e=(0,u.cg1)(n);return Le(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Zn(r):[Zn(r[0]),Zn(r[1])])}(e),D=function(n,e,t){const r=(0,u.cg1)(n);Le(r);const a=vn([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return vn(a,t)||[]}(e,i,r),S=w.findIndex(M=>{if(Array.isArray(M)){const[V,Y]=M,ue=d>=V.hours&&f>=V.minutes,De=d<Y.hours||d===Y.hours&&f<Y.minutes;if(V.hours<Y.hours){if(ue&&De)return!0}else if(ue||De)return!0}else if(M.hours===d&&M.minutes===f)return!0;return!1});if(-1!==S)return D[S]}return function(n,e,t){const r=(0,u.cg1)(n),a=vn([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return vn(a,t)}(e,i,r)[d<12?0:1];case gt.Eras:return function(n,e){return vn((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,a,n,e,t,r)}}function Ne(n){return function(e,t,r){const i=-1*r,a=cn(t,Ae.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case _n.Short:return(i>=0?"+":"")+Tr(d,2,a)+Tr(Math.abs(i%60),2,a);case _n.ShortGMT:return"GMT"+(i>=0?"+":"")+Tr(d,1,a);case _n.Long:return"GMT"+(i>=0?"+":"")+Tr(d,2,a)+":"+Tr(Math.abs(i%60),2,a);case _n.Extended:return 0===r?"Z":(i>=0?"+":"")+Tr(d,2,a)+":"+Tr(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function Jt(n){return as(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Q(n,e=!1){return function(t,r){let i;if(e){const a=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,d=t.getDate();i=1+Math.floor((d+a)/7)}else{const a=Jt(t),d=function(n){const e=as(n,0,1).getDay();return as(n,0,1+(e<=4?4:11)-e)}(a.getFullYear()),f=a.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return Tr(i,n,cn(r,Ae.MinusSign))}}function Z(n,e=!1){return function(t,r){return Tr(Jt(t).getFullYear(),n,cn(r,Ae.MinusSign),e)}}const ne={};function $(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function ht(n){return n instanceof Date&&!isNaN(n.valueOf())}class ls{}let eu=(()=>{class n extends ls{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(hr(r||this.locale)(t)){case Te.Zero:return"zero";case Te.One:return"one";case Te.Two:return"two";case Te.Few:return"few";case Te.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),po=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ai{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zt=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((i,a,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new ai(null,this._ngForOf,-1,-1),null===d?void 0:d),_=new Ec(i,f);r.push(_)}else if(null==d)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const f=this._viewContainer.get(a);this._viewContainer.move(f,d);const _=new Ec(i,f);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=a,d.context.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Ec{constructor(e,t){this.record=e,this.view=t}}let Mr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Dc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){go("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){go("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Dc{constructor(){this.$implicit=null,this.ngIf=null}}function go(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let tu=(()=>{class n{constructor(t){this.locale=t}transform(t,r="mediumDate",i,a){if(null==t||""===t||t!=t)return null;try{return Gi(t,r,a||this.locale,i)}catch(d){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,u.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16))},n.\u0275pipe=u.Yjl({name:"date",type:n,pure:!0}),n})(),zn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[{provide:ls,useClass:eu}]}),n})();function gh(n){return"server"===n}let Nc=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new mh((0,u.LFG)(de),window)}),n})();class mh{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const d=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Na(this.window.history)||Na(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Na(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new xc,G||(G=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null);return null==t?null:function(n){In=In||document.createElement("a"),In.setAttribute("href",n);const e=In.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let In,Ss=null;const Mc=new u.OlP("TRANSITION_ID"),Sn=[{provide:u.ip1,useFactory:function(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Mc,de,u.zs3],multi:!0}];class Rc{static init(){(0,u.VLi)(new Rc)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,d=!1;const f=function(_){d=d||_,a--,0==a&&r(d)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let As=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const vo=new u.OlP("EventManagerPlugins");let Me=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const d=i[a];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Yt{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ma=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Un=(()=>{class n extends Ma{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const d=this._doc.createElement("style");d.textContent=a,i.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(yl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(yl))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(de))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function yl(n){O().remove(n)}const Gs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ui=/%COMP%/g;function sr(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?sr(n,i,t):(i=i.replace(ui,n),t.push(i))}return t}function Ni(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xi=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Mi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new Yo(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=sr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Me),u.LFG(Un),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Mi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Gs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Gs[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Gs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ni(r)):this.eventManager.addEventListener(e,t,Ni(r))}}class yp extends Mi{constructor(e,t,r,i){super(e),this.component=r;const a=sr(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(ui,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(ui,i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Yo extends Mi{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=sr(i.id,i.styles,[]);for(let d=0;d<a.length;d++){const f=document.createElement("style");f.textContent=a[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Bc=(()=>{class n extends Yt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(de))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ko=["alt","control","meta","shift"],vp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qc=(()=>{class n extends Yt{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),d=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let d="";if(Ko.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),d+=_+".")}),d+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(t){let r="",i=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Hr.hasOwnProperty(e)&&(e=Hr[e]))}return vp[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ko.forEach(a=>{a!=i&&hu[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(de))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const La=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function(){xc.makeCurrent(),Rc.init()},multi:!0},{provide:de,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),Wc=[[],{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:vo,useClass:Bc,multi:!0,deps:[de,u.R0b,u.Lbi]},{provide:vo,useClass:qc,multi:!0,deps:[de]},[],{provide:xi,useClass:xi,deps:[Me,Un,u.AFp]},{provide:u.FYo,useExisting:xi},{provide:Ma,useExisting:Un},{provide:Un,useClass:Un,deps:[de]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:Me,useClass:Me,deps:[vo,u.R0b]},{provide:class{},useClass:As,deps:[]},[]];let Ep=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Mc,useExisting:u.AFp},Sn]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Wc,imports:[zn,u.hGG]}),n})();"undefined"!=typeof window&&window;var Xt=B(4402),ct=B(5917),En=B(9765),Tl=B(7971);class yr extends En.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Tl.N;return this._value}next(e){super.next(this._value=e)}}var Jo=B(4869),xs=B(9796),or=B(7393);class Th extends or.L{notifyNext(e,t,r,i,a){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Sp extends or.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Do=B(7444),Yn=B(7574);function Kn(n,e,t,r,i=new Sp(n,t,r)){if(!i.closed)return e instanceof Yn.y?e.subscribe(i):(0,Do.s)(e)(i)}var _u=B(6693);const Xo={};class Ua{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new zc(e,this.resultSelector))}}class zc extends Th{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Xo),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Kn(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const i=this.values,d=this.toRespond?i[r]===Xo?--this.toRespond:this.toRespond:0;i[r]=t,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Ms=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var hs=B(3282);function Zs(...n){return(0,hs.J)(1)((0,ct.of)(...n))}var ci=B(9193);function Ri(n){return new Yn.y(e=>{let t;try{t=n()}catch(i){return void e.error(i)}return(t?(0,Xt.D)(t):(0,ci.c)()).subscribe(e)})}var a0=B(2441),pt=B(8002),Yi=B(5345);function nr(n,e){return"function"==typeof e?t=>t.pipe(nr((r,i)=>(0,Xt.D)(n(r,i)).pipe((0,pt.U)((a,d)=>e(r,a,i,d))))):t=>t.lift(new Ap(n))}class Ap{constructor(e){this.project=e}call(e,t){return t.subscribe(new jn(e,this.project))}}class jn extends Yi.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(i){return void this.destination.error(i)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Yi.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,Yi.ft)(e,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Yc=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function yi(n){return e=>0===n?(0,ci.c)():e.lift(new l0(n))}class l0{constructor(e){if(this.total=e,this.total<0)throw new Yc}call(e,t){return t.subscribe(new Np(e,this.total))}}class Np extends or.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function ea(...n){const e=n[n.length-1];return(0,Jo.K)(e)?(n.pop(),t=>Zs(n,t,e)):t=>Zs(n,t)}function $a(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new s_(n,e,t))}}class s_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new vu(e,this.accumulator,this.seed,this.hasSeed))}}class vu extends or.L{constructor(e,t,r,i){super(e),this.accumulator=t,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Qn(n,e){return function(r){return r.lift(new Kc(n,e))}}class Kc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new So(e,this.predicate,this.thisArg))}}class So extends or.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function Ao(n){return function(t){const r=new ar(n),i=t.lift(r);return r.caught=i}}class ar{constructor(e){this.selector=e}call(e,t){return t.subscribe(new zs(e,this.selector,this.caught))}}class zs extends Yi.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(a){return void super.error(a)}this._unsubscribeAndRecycle();const r=new Yi.IY(this);this.add(r);const i=(0,Yi.ft)(t,r);i!==r&&this.add(i)}}}var Pr=B(9773);function Qc(n,e){return(0,Pr.zg)(n,e,1)}function Sh(n){return function(t){return 0===n?(0,ci.c)():t.lift(new vi(n))}}class vi{constructor(e){if(this.total=e,this.total<0)throw new Yc}call(e,t){return t.subscribe(new Rs(e,this.total))}}class Rs extends or.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,i=this.count++;t.length<r?t.push(e):t[i%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let a=0;a<r;a++){const d=t++%r;e.next(i[d])}}e.complete()}}function ks(n=Ah){return e=>e.lift(new No(n))}class No{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new xo(e,this.errorFactory))}}class xo extends or.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Ah(){return new Ms}function Ys(n=null){return e=>e.lift(new xp(n))}class xp{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ja(e,this.defaultValue))}}class ja extends or.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Mp=B(4487);function vr(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((i,a)=>n(i,a,r)):Mp.y,yi(1),t?Ys(e):ks(()=>new Ms))}var lr=B(8307),Ha=B(1307),Nh=B(5319);class A{constructor(e){this.callback=e}call(e,t){return t.subscribe(new k(e,this.callback))}}class k extends or.L{constructor(e,t){super(e),this.add(new Nh.w(t))}}class q{constructor(e,t){this.id=e,this.url=t}}class se extends q{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class he extends q{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oe extends q{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xe extends q{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dt extends q{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kt extends q{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tn extends q{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pt extends q{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ir extends q{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Il{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xc{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ks{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ga{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ta{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class Rp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Jn(n){return new Rp(n)}const bu="ngNavigationCancelingError";function o_(n){const e=Error("NavigationCancelingError: "+n);return e[bu]=!0,e}function Al(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const d=r[a],f=n[a];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Pp(n[i],e[i]))return!1;return!0}function Pp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function a_(n){return Array.prototype.concat.apply([],n)}function qa(n){return n.length>0?n[n.length-1]:null}function Or(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gr(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Xt.D)(Promise.resolve(n)):(0,ct.of)(n)}const l_={exact:function xh(n,e,t){if(!za(n.segments,e.segments)||!Cu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xh(n.children[r],e.children[r],t))return!1;return!0},subset:na},wu={exact:function(n,e){return fs(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pp(n[t],e[t]))},ignored:()=>!0};function ed(n,e,t){return l_[t.paths](n.root,e.root,t.matrixParams)&&wu[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function na(n,e,t){return Za(n,e,e.segments,t)}function Za(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!za(i,t)||e.hasChildren()||!Cu(i,t,r))}if(n.segments.length===t.length){if(!za(n.segments,t)||!Cu(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!na(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(za(n.segments,i)&&Cu(n.segments,i,r)&&n.children[Lt])&&Za(n.children[Lt],e,a,r)}}function Cu(n,e,t){return e.every((r,i)=>wu[t](n[i].parameters,r.parameters))}class Nl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return nd.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Or(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ra(this)}}class td{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Jn(this.parameters)),this._parameterMap}toString(){return Tu(this)}}function za(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Op{}class Eu{parse(e){const t=new kh(e);return new Nl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${rd(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${id(t)}=${id(i)}`).join("&"):`${id(t)}=${id(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const nd=new Eu;function ra(n){return n.segments.map(e=>Tu(e)).join("/")}function rd(n,e){if(!n.hasChildren())return ra(n);if(e){const t=n.children[Lt]?rd(n.children[Lt],!1):"",r=[];return Or(n.children,(i,a)=>{a!==Lt&&r.push(`${a}:${rd(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Or(n.children,(r,i)=>{i===Lt&&(t=t.concat(e(r,i)))}),Or(n.children,(r,i)=>{i!==Lt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Lt?[rd(n.children[Lt],!1)]:[`${i}:${rd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${ra(n)}/${t[0]}`:`${ra(n)}/(${t.join("//")})`}}function d_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function id(n){return d_(n).replace(/%3B/gi,";")}function sd(n){return d_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Du(n){return decodeURIComponent(n)}function Fp(n){return Du(n.replace(/\+/g,"%20"))}function Tu(n){return`${sd(n.path)}${function(n){return Object.keys(n).map(e=>`;${sd(e)}=${sd(n[e])}`).join("")}(n.parameters)}`}const f0=/^[^\/()?;=#]+/;function Rh(n){const e=n.match(f0);return e?e[0]:""}const p0=/^[^=?&#]+/,ia=/^[^?&#]+/;class kh{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Lt]=new en(e,t)),r}parseSegment(){const e=Rh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new td(Du(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Rh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Rh(this.remaining);i&&(r=i,this.capture(r))}e[Du(t)]=Du(r)}parseQueryParam(e){const t=function(n){const e=n.match(p0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function(n){const e=n.match(ia);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Fp(t),a=Fp(r);if(e.hasOwnProperty(i)){let d=e[i];Array.isArray(d)||(d=[d],e[i]=d),d.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Lt);const d=this.parseChildren();t[a]=1===Object.keys(d).length?d[Lt]:new en([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class h_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Lp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Lp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Vp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vp(e,this._root).map(t=>t.value)}}function Lp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Lp(n,t);if(r)return r}return null}function Vp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Vp(n,t);if(r.length)return r.unshift(e),r}return[]}class sa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function od(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ph extends h_{constructor(e,t){super(e),this.snapshot=t,Fh(this,e)}toString(){return this.snapshot.toString()}}function f_(n,e){const t=function(n,e){const d=new Oh([],{},{},"",{},Lt,e,null,n.root,-1,{});return new Ya("",new sa(d,[]))}(n,e),r=new yr([new td("",{})]),i=new yr({}),a=new yr({}),d=new yr({}),f=new yr(""),_=new Su(r,i,d,f,a,Lt,e,t.root);return _.snapshot=t.root,new Ph(new sa(_,[]),t)}class Su{constructor(e,t,r,i,a,d,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>Jn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>Jn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function p_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Oh{constructor(e,t,r,i,a,d,f,_,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ya extends h_{constructor(e,t){super(t),this.url=e,Fh(this,t)}toString(){return Os(this._root)}}function Fh(n,e){e.value._routerState=n,e.children.forEach(t=>Fh(n,t))}function Os(n){const e=n.children.length>0?` { ${n.children.map(Os).join(", ")} } `:"";return`${n.value}${e}`}function Ml(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),fs(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),fs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Au(n,e){return fs(n.params,e.params)&&function(n,e){return za(n,e)&&n.every((t,r)=>fs(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Au(n.parent,e.parent))}function Nu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nu(n,r,i);return Nu(n,r)})}(n,e,t);return new sa(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const d=a.route;return __(e,d),d}}const r=function(n){return new Su(new yr(n.url),new yr(n.params),new yr(n.queryParams),new yr(n.fragment),new yr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Nu(n,a));return new sa(r,i)}}function __(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)__(n.children[t],e.children[t])}function ad(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function b(n){return"object"==typeof n&&null!=n&&n.outlets}function g(n,e,t,r,i){let a={};return r&&Or(r,(d,f)=>{a[f]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),new Nl(t.root===n?e:y(t.root,n,e),a,i)}function y(n,e,t){const r={};return Or(n.children,(i,a)=>{r[a]=i===e?t:y(i,e,t)}),new en(n.segments,r)}class E{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ad(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(b);if(i&&i!==qa(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Be(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return _t(n,e,t);const r=function(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const d=n.segments[i],f=t[r];if(b(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!ld(_,w,d))return a;r+=2}else{if(!ld(_,{},d))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new en(n.segments.slice(0,r.pathIndex),{});return a.children[Lt]=new en(n.segments.slice(r.pathIndex),n.children),_t(a,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?kn(n,e,t):r.match?_t(n,0,i):kn(n,e,t)}function _t(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function(n){return b(n[0])?n[0].outlets:{[Lt]:n}}(t),i={};return Or(r,(a,d)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[d]=Be(n.children[d],e,a))}),Or(n.children,(a,d)=>{void 0===r[d]&&(i[d]=a)}),new en(n.segments,i)}}function kn(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(b(a)){const _=un(a.outlets);return new en(r,_)}if(0===i&&ad(t[0])){r.push(new td(n.segments[e].path,oa(t[0]))),i++;continue}const d=b(a)?a.outlets[Lt]:`${a}`,f=i<t.length-1?t[i+1]:null;d&&f&&ad(f)?(r.push(new td(d,oa(f))),i+=2):(r.push(new td(d,{})),i++)}return new en(r,{})}function un(n){const e={};return Or(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=kn(new en([],{}),0,t))}),e}function oa(n){const e={};return Or(n,(t,r)=>e[r]=`${t}`),e}function ld(n,e,t){return n==t.path&&fs(e,t.parameters)}class Up{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ml(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=od(t);e.children.forEach(a=>{const d=a.value.outlet;this.deactivateRoutes(a,i[d],r),delete i[d]}),Or(i,(a,d)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:i,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=od(e);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=od(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Ps(a.value.snapshot))}),e.children.length&&this.forwardEvent(new Ks(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ml(i),i===a)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),$p(f.route)}else{const f=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=_,d.outlet&&d.outlet.activateWith(i,_),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}function $p(n){Ml(n.value),n.children.forEach($p)}class Lh{constructor(e,t){this.routes=e,this.module=t}}function aa(n){return"function"==typeof n}function Rl(n){return n instanceof Nl}const Vh=Symbol("INITIAL_VALUE");function Bh(){return nr(n=>function(...n){let e,t;return(0,Jo.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,xs.k)(n[0])&&(n=n[0]),(0,_u.n)(n,t).lift(new Ua(e))}(n.map(e=>e.pipe(yi(1),ea(Vh)))).pipe($a((e,t)=>{let r=!1;return t.reduce((i,a,d)=>i!==Vh?i:(a===Vh&&(r=!0),r||!1!==a&&d!==t.length-1&&!Rl(a)?i:a),e)},Vh),Qn(e=>e!==Vh),(0,pt.U)(e=>Rl(e)?e:!0===e),yi(1)))}let Pi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:function(){return[zp]},encapsulation:2}),n})();function Uh(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];y0(r,UA(e,r))}}function y0(n,e){n.children&&Uh(n.children,e)}function UA(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function v0(n){const e=n.children&&n.children.map(v0),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Lt&&(t.component=Pi),t}function Qs(n){return n.outlet||Lt}function pE(n,e){const t=n.filter(r=>Qs(r)===e);return t.push(...n.filter(r=>Qs(r)!==e)),t}const b0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function y_(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},b0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||Al)(t,n,e);if(!a)return Object.assign({},b0);const d={};Or(a.posParams,(_,w)=>{d[w]=_.path});const f=a.consumed.length>0?Object.assign(Object.assign({},d),a.consumed[a.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Gp(n,e,t,r,i="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>$h(n,e,r)&&Qs(r)!==Lt)}(n,t,r)){const d=new en(e,function(n,e,t,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Qs(a)!==Lt){const d=new en([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,i[Qs(a)]=d}return i}(n,e,r,new en(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>$h(n,e,r))}(n,t,r)){const d=new en(n.segments,function(n,e,t,r,i,a){const d={};for(const f of r)if($h(n,t,f)&&!i[Qs(f)]){const _=new en([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,d[Qs(f)]=_}return Object.assign(Object.assign({},i),d)}(n,e,t,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const a=new en(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function $h(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function w0(n,e,t,r){return!!(Qs(n)===r||r!==Lt&&$h(e,t,n))&&("**"===n.path||y_(e,n,t).matched)}function mE(n,e,t){return 0===e.length&&!n.children[t]}class v_{constructor(e){this.segmentGroup=e||null}}class C0{constructor(e){this.urlTree=e}}function cd(n){return new Yn.y(e=>e.error(new v_(n)))}function _E(n){return new Yn.y(e=>e.error(new C0(n)))}function GA(n){return new Yn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class WA{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=Gp(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Lt).pipe((0,pt.U)(a=>this.createUrlTree(E0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ao(a=>{if(a instanceof C0)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof v_?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Lt).pipe((0,pt.U)(i=>this.createUrlTree(E0(i),e.queryParams,e.fragment))).pipe(Ao(i=>{throw i instanceof v_?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new en([],{[Lt]:e}):e;return new Nl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(a=>new en([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Xt.D)(i).pipe(Qc(a=>{const d=r.children[a],f=pE(t,a);return this.expandSegmentGroup(e,f,d,a).pipe((0,pt.U)(_=>({segment:_,outlet:a})))}),$a((a,d)=>(a[d.outlet]=d.segment,a),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((i,a)=>n(i,a,r)):Mp.y,Sh(1),t?Ys(e):ks(()=>new Ms))}())}expandSegment(e,t,r,i,a,d){return(0,Xt.D)(r).pipe(Qc(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,d).pipe(Ao(w=>{if(w instanceof v_)return(0,ct.of)(null);throw w}))),vr(f=>!!f),Ao((f,_)=>{if(f instanceof Ms||"EmptyError"===f.name){if(mE(t,i,a))return(0,ct.of)(new en([],{}));throw new v_(t)}throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,d,f){return w0(i,t,a,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d):cd(t):cd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_E(a):this.lineralizeSegments(r,a).pipe((0,Pr.zg)(d=>{const f=new en(d,{});return this.expandSegment(e,f,t,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,d){const{matched:f,consumedSegments:_,lastChild:w,positionalParamSegments:D}=y_(t,i,a);if(!f)return cd(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?_E(S):this.lineralizeSegments(i,S).pipe((0,Pr.zg)(M=>this.expandSegment(e,t,r,M.concat(a.slice(w)),d,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ct.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,pt.U)(M=>(r._loadedConfig=M,new en(i,{})))):(0,ct.of)(new en(i,{}));const{matched:d,consumedSegments:f,lastChild:_}=y_(t,r,i);if(!d)return cd(t);const w=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,Pr.zg)(S=>{const M=S.module,V=S.routes,{segmentGroup:Y,slicedSegments:ue}=Gp(t,f,w,V),De=new en(Y.segments,Y.children);if(0===ue.length&&De.hasChildren())return this.expandChildren(M,V,De).pipe((0,pt.U)(at=>new en(f,at)));if(0===V.length&&0===ue.length)return(0,ct.of)(new en(f,{}));const rt=Qs(r)===a;return this.expandSegment(M,De,V,ue,rt?Lt:a,!0).pipe((0,pt.U)(it=>new en(f.concat(it.segments),it.children)))}))}getChildConfig(e,t,r){return t.children?(0,ct.of)(new Lh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ct.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Pr.zg)(i=>{return i?this.configLoader.load(e.injector,t).pipe((0,pt.U)(a=>(t._loadedConfig=a,a))):(n=t,new Yn.y(e=>e.error(o_(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ct.of)(new Lh([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return(0,ct.of)(!0);const a=i.map(d=>{const f=e.get(d);let _;if((n=f)&&aa(n.canLoad))_=f.canLoad(t,r);else{if(!aa(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}var n;return Gr(_)});return(0,ct.of)(a).pipe(Bh(),(0,lr.b)(d=>{if(!Rl(d))return;const f=o_(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,pt.U)(d=>!0===d))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ct.of)(r);if(i.numberOfChildren>1||!i.children[Lt])return GA(e.redirectTo);i=i.children[Lt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Nl(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Or(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let d={};return Or(t.children,(f,_)=>{d[_]=this.createSegmentGroup(e,f,r,i)}),new en(a,d)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function E0(n){const e={};for(const r of Object.keys(n.children)){const a=E0(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function(n){if(1===n.numberOfChildren&&n.children[Lt]){const e=n.children[Lt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class qp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ps{constructor(e,t){this.component=e,this.route=t}}function yE(n,e,t){const r=n._root;return w_(r,e?e._root:null,t,[r.value])}function b_(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function w_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=od(e);return n.children.forEach(d=>{(function(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,d=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){const _=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!za(n.url,e.url);case"pathParamsOrQueryParamsChange":return!za(n.url,e.url)||!fs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Au(n,e)||!fs(n.queryParams,e.queryParams);case"paramsChange":default:return!Au(n,e)}}(d,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new qp(r)):(a.data=d.data,a._resolvedData=d._resolvedData),w_(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new ps(f.outlet.component,d))}else d&&Wp(e,f,i),i.canActivateChecks.push(new qp(r)),w_(n,null,a.component?f?f.children:null:t,r,i)})(d,a[d.value.outlet],t,r.concat([d.value]),i),delete a[d.value.outlet]}),Or(a,(d,f)=>Wp(d,t.getContext(f),i)),i}function Wp(n,e,t){const r=od(n),i=n.value;Or(r,(a,d)=>{Wp(a,i.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new ps(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class D0{}function C_(n){return new Yn.y(e=>e.error(n))}class CE{constructor(e,t,r,i,a,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=d}recognize(){const e=Gp(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Lt);if(null===t)return null;const r=new Oh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new sa(r,t),a=new Ya(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=p_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const d=t.children[a],f=pE(e,a),_=this.processSegmentGroup(f,d,a);if(null===_)return null;r.push(..._)}const i=E_(r);return i.sort((e,t)=>e.value.outlet===Lt?-1:t.value.outlet===Lt?1:e.value.outlet.localeCompare(t.value.outlet)),i}processSegment(e,t,r,i){for(const a of e){const d=this.processSegmentAgainstRoute(a,t,r,i);if(null!==d)return d}return mE(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!w0(e,t,r,i))return null;let a,d=[],f=[];if("**"===e.path){const V=r.length>0?qa(r).parameters:{};a=new Oh(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dd(e),Qs(e),e.component,e,T0(t),XA(t)+r.length,D_(e))}else{const V=y_(t,e,r);if(!V.matched)return null;d=V.consumedSegments,f=r.slice(V.lastChild),a=new Oh(d,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dd(e),Qs(e),e.component,e,T0(t),XA(t)+d.length,D_(e))}const _=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:D}=Gp(t,d,f,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&w.hasChildren()){const V=this.processChildren(_,w);return null===V?null:[new sa(a,V)]}if(0===_.length&&0===D.length)return[new sa(a,[])];const S=Qs(e)===i,M=this.processSegment(_,w,D,S?Lt:i);return null===M?null:[new sa(a,M)]}}function DE(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function E_(n){const e=[],t=new Set;for(const r of n){if(!DE(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=E_(r.children);e.push(new sa(r.value,i))}return e.filter(r=>!t.has(r))}function T0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function XA(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function dd(n){return n.data||{}}function D_(n){return n.resolve||{}}function S0(n){return nr(e=>{const t=n(e);return t?(0,Xt.D)(t).pipe((0,pt.U)(()=>e)):(0,ct.of)(e)})}class sN extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const T_=new u.OlP("ROUTES");class I_{constructor(e,t,r,i){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,pt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=a.create(e);return new Lh(a_(d.injector.get(T_,void 0,u.XFs.Self|u.XFs.Optional)).map(v0),d)}),Ao(a=>{throw t._loader$=void 0,a}));return t._loader$=new a0.c(i,()=>new En.xQ).pipe((0,Ha.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Xt.D)(this.loader.load(e)):Gr(e()).pipe((0,Pr.zg)(t=>t instanceof u.YKP?(0,ct.of)(t):(0,Xt.D)(this.compiler.compileModuleAsync(t))))}}class SE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xu,this.attachRef=null}}class xu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new SE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class aN{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function AE(n){throw n}function NE(n,e,t){return e.parse("/")}function Mu(n,e){return(0,ct.of)(null)}const xE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ME={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class n{constructor(t,r,i,a,d,f,_,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new En.xQ,this.errorHandler=AE,this.malformedUriErrorHandler=NE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Mu,afterPreactivation:Mu},this.urlHandlingStrategy=new aN,this.routeReuseStrategy=new sN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(u.h0i),this.console=d.get(u.c2e);const M=d.get(u.R0b);this.isNgZoneEnabled=M instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new Nl(new en([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new I_(f,_,V=>this.triggerEvent(new Sr(V)),V=>this.triggerEvent(new Il(V))),this.routerState=f_(this.currentUrlTree,this.rootComponentType),this.transitions=new yr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Qn(i=>0!==i.id),(0,pt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),nr(i=>{let a=!1,d=!1;return(0,ct.of)(i).pipe((0,lr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),nr(f=>{const _=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return A_(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,ct.of)(f).pipe(nr(S=>{const M=this.transitions.getValue();return r.next(new se(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),M!==this.transitions.getValue()?ci.E:Promise.resolve(S)}),function(n,e,t,r){return nr(i=>function(n,e,t,r,i){return new WA(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,pt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,e,t,r,i){return(0,Pr.zg)(a=>function(n,e,t,r,i="emptyOnly",a="legacy"){try{const d=new CE(n,e,t,r,i,a).recognize();return null===d?C_(new D0):(0,ct.of)(d)}catch(d){return C_(d)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,pt.U)(d=>Object.assign(Object.assign({},a),{targetSnapshot:d}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lr.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const M=new Dt(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(M)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:V,source:Y,restoredState:ue,extras:De}=f,rt=new se(M,this.serializeUrl(V),Y,ue);r.next(rt);const Je=f_(V,this.rootComponentType).snapshot;return(0,ct.of)(Object.assign(Object.assign({},f),{targetSnapshot:Je,urlAfterRedirects:V,extras:Object.assign(Object.assign({},De),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),ci.E}),S0(f=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:M,replaceUrl:V}}=f;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!M,replaceUrl:!!V})}),(0,lr.b)(f=>{const _=new kt(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,pt.U)(f=>Object.assign(Object.assign({},f),{guards:yE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Pr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:d}}=t;return 0===d.length&&0===a.length?(0,ct.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Xt.D)(n).pipe((0,Pr.zg)(i=>function(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,ct.of)(!0);const d=a.map(f=>{const _=b_(f,e,i);let w;if(function(n){return n&&aa(n.canDeactivate)}(_))w=Gr(_.canDeactivate(n,e,t,r));else{if(!aa(_))throw new Error("Invalid CanDeactivate guard");w=Gr(_(n,e,t,r))}return w.pipe(vr())});return(0,ct.of)(d).pipe(Bh())}(i.component,i.route,t,e,r)),vr(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Pr.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,e,t,r){return(0,Xt.D)(e).pipe(Qc(i=>Zs(function(n,e){return null!==n&&e&&e(new Xc(n)),(0,ct.of)(!0)}(i.route.parent,r),function(n,e){return null!==n&&e&&e(new Ga(n)),(0,ct.of)(!0)}(i.route,r),function(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(d=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ri(()=>{const f=d.guards.map(_=>{const w=b_(_,d.node,t);let D;if(function(n){return n&&aa(n.canActivateChild)}(w))D=Gr(w.canActivateChild(r,n));else{if(!aa(w))throw new Error("Invalid CanActivateChild guard");D=Gr(w(r,n))}return D.pipe(vr())});return(0,ct.of)(f).pipe(Bh())}));return(0,ct.of)(a).pipe(Bh())}(n,i.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ct.of)(!0);const i=r.map(a=>Ri(()=>{const d=b_(a,e,t);let f;if(function(n){return n&&aa(n.canActivate)}(d))f=Gr(d.canActivate(e,n));else{if(!aa(d))throw new Error("Invalid CanActivate guard");f=Gr(d(e,n))}return f.pipe(vr())}));return(0,ct.of)(i).pipe(Bh())}(n,i.route,t))),vr(i=>!0!==i,!0))}(r,a,n,e):(0,ct.of)(f)),(0,pt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,lr.b)(f=>{if(Rl(f.guardsResult)){const w=o_(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw w.url=f.guardsResult,w}const _=new tn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Qn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),S0(f=>{if(f.guards.canActivateChecks.length)return(0,ct.of)(f).pipe((0,lr.b)(_=>{const w=new Pt(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),nr(_=>{let w=!1;return(0,ct.of)(_).pipe(function(n,e){return(0,Pr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ct.of)(t);let a=0;return(0,Xt.D)(i).pipe(Qc(d=>function(n,e,t,r){return function(n,e,t,r){const i=Object.keys(n);if(0===i.length)return(0,ct.of)({});const a={};return(0,Xt.D)(i).pipe((0,Pr.zg)(d=>function(n,e,t,r){const i=b_(n,e,r);return Gr(i.resolve?i.resolve(e,t):i(e,t))}(n[d],e,t,r).pipe((0,lr.b)(f=>{a[d]=f}))),Sh(1),(0,Pr.zg)(()=>Object.keys(a).length===i.length?(0,ct.of)(a):ci.E))}(n._resolve,n,e,r).pipe((0,pt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),p_(n,t).resolve),null)))}(d.route,r,n,e)),(0,lr.b)(()=>a++),Sh(1),(0,Pr.zg)(d=>a===i.length?(0,ct.of)(t):ci.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,lr.b)(_=>{const w=new Ir(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),S0(f=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:M,replaceUrl:V}}=f;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!M,replaceUrl:!!V})}),(0,pt.U)(f=>{const _=function(n,e,t){const r=Nu(n,e._root,t?t._root:void 0);return new Ph(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,lr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new Up(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,lr.b)({next(){a=!0},complete(){a=!0}}),function(n){return e=>e.lift(new A(n))}(()=>{var f;if(!a&&!d){const _=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,_)):this.cancelNavigationTransition(i,_)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Ao(f=>{if(d=!0,function(n){return n&&n[bu]}(f)){const _=Rl(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Oe(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(w),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||A_(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Xe(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return ci.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:a,urlTree:d}=r,f={replaceUrl:!0};if(a){const _=Object.assign({},a);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(f.state=_)}this.scheduleNavigation(d,i,a,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const i=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!i||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Uh(t),this.config=t.map(v0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:d,queryParamsHandling:f,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:d;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,e,t,r,i){if(0===t.length)return g(e.root,e.root,e,r,i);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new E(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,d)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Or(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===d?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new E(t,e,r)}(t);if(a.toRoot())return g(e.root,new en([],{}),e,r,i);const d=function(n,e,t){if(n.isAbsolute)return new R(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new R(a,a===e.root,0)}const r=ad(n.commands[0])?0:1;return function(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new R(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),f=d.processChildren?_t(d.segmentGroup,d.index,a.commands):Be(d.segmentGroup,d.index,a.commands);return g(d.segmentGroup,f,e,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Rl(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},xE):!1===r?Object.assign({},ME):r,Rl(t))return ed(this.currentUrlTree,t,i);const a=this.parseUrl(t);return ed(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new he(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,d){var f,_;if(this.disposed)return Promise.resolve(!1);const w=this.getTransition(),D=A_(r)&&w&&!A_(w.source),V=(this.lastSuccessfulId===w.id||this.currentNavigation?w.rawUrl:w.urlAfterRedirects).toString()===t.toString();if(D&&V)return Promise.resolve(!0);let Y,ue,De;d?(Y=d.resolve,ue=d.reject,De=d.promise):De=new Promise((it,at)=>{Y=it,ue=at});const rt=++this.navigationId;let Je;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Je=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):Je=0,this.setTransition({id:rt,targetPageId:Je,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:Y,reject:ue,promise:De,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),De.catch(it=>Promise.reject(it))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Oe(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.DyG),u.LFG(Op),u.LFG(xu),u.LFG(mt),u.LFG(u.zs3),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(void 0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function A_(n){return"imperative"!==n}let zp=(()=>{class n{constructor(t,r,i,a,d){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.name=a||Lt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new M_(t,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xu),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class M_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Su?this.route:e===xu?this.childContexts:this.parent.get(e,t)}}class N0{}class M0{preload(e,t){return(0,ct.of)(null)}}let R_=(()=>{class n{constructor(t,r,i,a,d){this.router=t,this.injector=a,this.preloadingStrategy=d,this.loader=new I_(r,i,w=>t.triggerEvent(new Sr(w)),w=>t.triggerEvent(new Il(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qn(t=>t instanceof he),Qc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const d=a._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Xt.D)(i).pipe((0,hs.J)(),(0,pt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ct.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Pr.zg)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gs),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(N0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),fd=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof se?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof he&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ta&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ta(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gs),u.LFG(Nc),u.LFG(void 0))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ru=new u.OlP("ROUTER_CONFIGURATION"),kE=new u.OlP("ROUTER_FORROOT_GUARD"),PE=[mt,{provide:Op,useClass:Eu},{provide:gs,useFactory:function(n,e,t,r,i,a,d,f={},_,w){const D=new gs(null,n,e,t,r,i,a,a_(d));return _&&(D.urlHandlingStrategy=_),w&&(D.routeReuseStrategy=w),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(f,D),f.enableTracing&&D.events.subscribe(S=>{var M,V;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),D},deps:[Op,xu,mt,u.zs3,u.v3s,u.Sil,T_,Ru,[class{},new u.FiY],[class{},new u.FiY]]},xu,{provide:Su,useFactory:function(n){return n.routerState.root},deps:[gs]},{provide:u.v3s,useClass:u.EAV},R_,M0,class{preload(e,t){return t().pipe(Ao(()=>(0,ct.of)(null)))}},{provide:Ru,useValue:{enableTracing:!1}}];function R0(){return new u.PXZ("Router",gs)}let k0=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[PE,P0(t),{provide:kE,useFactory:uN,deps:[[gs,new u.FiY,new u.tp0]]},{provide:Ru,useValue:r||{}},{provide:Ve,useFactory:OE,deps:[ee,[new u.tBr(fe),new u.FiY],Ru]},{provide:fd,useFactory:OO,deps:[gs,Nc,Ru]},{provide:N0,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:M0},{provide:u.PXZ,multi:!0,useFactory:R0},[O0,{provide:u.ip1,multi:!0,useFactory:FE,deps:[O0]},{provide:LE,useFactory:hN,deps:[O0]},{provide:u.tb,multi:!0,useExisting:LE}]]}}static forChild(t){return{ngModule:n,providers:[P0(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(kE,8),u.LFG(gs,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function OO(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new fd(n,e,t)}function OE(n,e,t={}){return t.useHash?new Ye(n,e):new ke(n,e)}function uN(n){return"guarded"}function P0(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:T_,multi:!0,useValue:n}]}let O0=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new En.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(gs),d=this.injector.get(Ru);return"disabled"===d.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?(0,ct.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ru),i=this.injector.get(R_),a=this.injector.get(fd),d=this.injector.get(gs),f=this.injector.get(u.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),a.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function FE(n){return n.appInitializer.bind(n)}function hN(n){return n.bootstrapListener.bind(n)}const LE=new u.OlP("Router Initializer"),VE=[];let pN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[k0.forRoot(VE)],k0]}),n})();var Ce=B(8239),k_=B(8873),$t=B(4292),ku=B(3637),P_=B(6561);function ua(n){const{subscriber:e,counter:t,period:r}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}var Gh=B(6682),BE=B(8819);function pd(n,e){return t=>t.lift(new Pl(n,e))}class Pl{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new F0(e,this.compare,this.keySelector))}}class F0 extends or.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:i}=this;t=i?i(e):e}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}function Yp(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new L0(n,t))}}class L0{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new LO(e,this.observables,this.project))}}class LO extends Th{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const i=t.length;this.values=new Array(i);for(let a=0;a<i;a++)this.toRespond.push(a);for(let a=0;a<i;a++)this.add(Kn(this,t[a],void 0,a))}notifyNext(e,t,r){this.values[r]=t;const i=this.toRespond;if(i.length>0){const a=i.indexOf(r);-1!==a&&i.splice(a,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class VO{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new Ol(e,this.predicate))}}class Ol extends or.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var wn=B(8971),Fr=B(8939),jE=(B(4828),B(3394)),ca=B(3910),Ki=B(8026),F=B(3854),da=B(5422);const gN="@firebase/database";let F_="";function HE(n){F_=n}class B0{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class BO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const mN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new B0(e)}}catch(e){}return new BO},qh=mN("localStorage"),GE=mN("sessionStorage"),Kp=new da.Yd("@firebase/database"),_N=function(){let n=1;return function(){return n++}}(),yN=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},L_=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=L_.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let Wh=null,vN=!0;const bN=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Kp.logLevel=da.in.VERBOSE,Wh=Kp.log.bind(Kp),e&&GE.set("logging_enabled",!0)):"function"==typeof n?Wh=n:(Wh=null,GE.remove("logging_enabled"))},ur=function(...n){if(!0===vN&&(vN=!1,null===Wh&&!0===GE.get("logging_enabled")&&bN(!0)),Wh){const e=L_.apply(null,n);Wh(e)}},gd=function(n){return function(...e){ur(n,...e)}},U0=function(...n){const e="FIREBASE INTERNAL ERROR: "+L_(...n);Kp.error(e)},ha=function(...n){const e=`FIREBASE FATAL ERROR: ${L_(...n)}`;throw Kp.error(e),new Error(e)},Oi=function(...n){const e="FIREBASE WARNING: "+L_(...n);Kp.warn(e)},Zh=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Qi="[MIN_NAME]",fa="[MAX_NAME]",md=function(n,e){if(n===e)return 0;if(n===Qi||e===fa)return-1;if(e===Qi||n===fa)return 1;{const t=V_(n),r=V_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},UO=function(n,e){return n===e?0:n<e?-1:1},_d=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},$0=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=$0(n[e[r]]);return t+="}",t},j0=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const WE=function(n){(0,F.hu)(!Zh(n),"Invalid JSON number");const r=1023;let i,a,d,f,_;0===n?(a=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,d=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(d%2?1:0),d=Math.floor(d/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let M=parseInt(D.substr(_,8),2).toString(16);1===M.length&&(M="0"+M),S+=M}return S.toLowerCase()},Yh=new RegExp("^-?(0*)\\d{1,10}$"),Kh=-2147483648,Pu=2147483647,V_=function(n){if(Yh.test(n)){const e=Number(n);if(e>=Kh&&e<=Pu)return e}return null},yd=function(n){try{n()}catch(e){setTimeout(()=>{throw Oi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},vd=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class G0{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Oi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zE{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ur("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oi(e)}}let Ou=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const YE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fs="websocket",KE="long_polling";class K0{constructor(e,t,r,i,a=!1,d="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qh.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function DN(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===Fs)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==KE)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return bi(t,(a,d)=>{i.push(a+"="+d)}),r+i.join("&")}class QE{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const JE={},Q0={};function Jp(n){const e=n.toString();return JE[e]||(JE[e]=new QE),JE[e]}class TN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&yd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qh{constructor(e,t,r,i,a,d,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gd(e),this.stats_=Jp(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),DN(t,KE,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new TN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new eb((...a)=>{const[d,f,_,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=_;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[d,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&YE.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qh.forceAllow_=!0}static forceDisallow(){Qh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Qh.forceAllow_&&(Qh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),i=j0(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class eb{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=_N(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=eb.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){ur("frame writing exception"),f.stack&&ur(f.stack),ur(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ur("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ur("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Xp=null;"undefined"!=typeof MozWebSocket?Xp=MozWebSocket:"undefined"!=typeof WebSocket&&(Xp=WebSocket);let Fu=(()=>{class n{constructor(t,r,i,a,d,f,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gd(this.connId),this.stats_=Jp(r),this.connURL=n.connectionURL_(r,f,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const d={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&YE.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),DN(t,Fs,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qh.set("previous_websocket_failure",!0);try{if((0,F.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${F_}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(a.proxy={origin:f}),this.mySock=new Xp(this.connURL,[],a)}else this.mySock=new Xp(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Xp&&!n.forceDisallow_}static previouslyFailed(){return qh.isInMemoryStorage||!0===qh.get("previous_websocket_failure")}markConnectionHealthy(){qh.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=j0(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class eg{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Qh,Fu]}initTransports_(e){const t=Fu&&Fu.isAvailable();let r=t&&!Fu.previouslyFailed();if(e.webSocketOnly&&(t||Oi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Fu];else{const i=this.transports_=[];for(const a of eg.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Xa{constructor(e,t,r,i,a,d,f,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gd("c:"+this.id+":"),this.transportManager_=new eg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=vd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=_d("t",e),r=_d("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=_d("t",e),r=_d("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=_d("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?U0("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):U0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Oi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),vd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tg{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class hD{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class U_ extends hD{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new U_}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function mn(){return new Pn("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lu(n){return n.pieces_.length-n.pieceNum_}function Hn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pn(n.pieces_,e)}function $_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Jh(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function fD(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pn(e,0)}function rr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pn(t,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function ms(n,e){const t=Wt(n),r=Wt(e);if(null===t)return e;if(t===r)return ms(Hn(n),Hn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function pD(n,e){const t=Jh(n,0),r=Jh(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=md(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Vu(n,e){if(Lu(n)!==Lu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Js(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Lu(n)>Lu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class FN{constructor(e,t){this.errorPrefix_=t,this.parts_=Jh(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);gD(this)}}function gD(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wd(n))}function wd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class cb extends hD{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new cb}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ng=1e3;let j_,Fl=(()=>{class n extends tg{constructor(t,r,i,a,d,f,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=gd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ng,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cb.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&U_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,d={r:a,a:t,b:r};this.log_((0,F.Pz)(d)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new F.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:f=>{const _=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||a!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(t,r,i,a){this.initConnection_();const d=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(d,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const d={p:i};t.tag&&(d.q=r._queryObject,d.t=t.tag),d.h=t.hashFn(),this.sendRequest("q",d,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const i=(0,F.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Oi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const d=a.s,f=a.d||"error";this.authToken_===t&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const d={p:t};a&&(d.q=i,d.t=a),this.sendRequest("n",d)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const d={p:r,d:i};this.log_("onDisconnect "+t,d),this.sendRequest(t,d,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(d.s,d.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):U0("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ng,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ng,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ng),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),d=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(V){(0,F.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,Y]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);_?ur("getToken() completed but was canceled"):(ur("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=Y&&Y.token,w=new Xa(d,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ue=>{Oi(ue+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(V){t.log_("Failed to get token: "+V),_||(t.repoInfo_.nodeAdmin&&Oi(V),D())}}})()}interrupt(t){ur("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ur("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ng,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(d=>$0(d)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Pn(t).toString();let a;if(this.listens.has(i)){const d=this.listens.get(i);a=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){ur("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ur("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+F_.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=U_.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class fb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nn(Qi,e),i=new nn(Qi,t);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class mD extends fb{static get __EMPTY_NODE(){return j_}static set __EMPTY_NODE(e){j_=e}compare(e,t){return md(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(fa,j_)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,j_)}toString(){return".key"}}const pa=new mD;class rg{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=t?r(e.key,t):1,i&&(d*=-1),d<0)e=this.isReverse_?e.left:e.right;else{if(0===d){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let ig,Mo=(()=>{class n{constructor(t,r,i,a,d){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Ls.EMPTY_NODE,this.right=null!=d?d:Ls.EMPTY_NODE}copy(t,r,i,a,d){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const d=i(t,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===d?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ls.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Ls.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ls{constructor(e,t=Ls.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Ls(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Mo.BLACK,null,null))}remove(e){return new Ls(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Mo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new rg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new rg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new rg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new rg(this.root_,null,this.comparator_,!0,e)}}function BN(n,e){return md(n.name,e.name)}function Cd(n,e){return md(n,e)}Ls.EMPTY_NODE=new class{copy(e,t,r,i,a){return this}insert(e,t,r){return new Mo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pb=function(n){return"number"==typeof n?"number:"+WE(n):"string:"+n},gb=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===ig||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===ig||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mb,vD,bD,ef=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gb(this.priorityNode_)}static set __childrenNodeConstructor(t){mb=t}static get __childrenNodeConstructor(){return mb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return an(t)?this:".priority"===Wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Wt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===Lu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Hn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+pb(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?WE(this.value_):this.value_,this.lazyHash_=yN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(a>=0,"Unknown leaf type: "+r),(0,F.hu)(d>=0,"Unknown leaf type: "+i),a===d?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:d-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class extends fb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?md(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(fa,new ef("[PRIORITY-POST]",bD))}makePost(e,t){const r=vD(e);return new nn(t,new ef("[PRIORITY-POST]",r))}toString(){return".priority"}},$N=Math.log(2);class jN{constructor(e){this.count=parseInt(Math.log(e+1)/$N,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const _b=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let S,M;if(0===D)return null;if(1===D)return S=n[_],M=t?t(S):S,new Mo(M,S.node,Mo.BLACK,null,null);{const V=parseInt(D/2,10)+_,Y=i(_,V),ue=i(V+1,w);return S=n[V],M=t?t(S):S,new Mo(M,S.node,Mo.BLACK,Y,ue)}},f=function(_){let w=null,D=null,S=n.length;const M=function(Y,ue){const De=S-Y,rt=S;S-=Y;const Je=i(De+1,rt),it=n[De],at=t?t(it):it;V(new Mo(at,it.node,ue,null,Je))},V=function(Y){w?(w.left=Y,w=Y):(D=Y,w=Y)};for(let Y=0;Y<_.count;++Y){const ue=_.nextBitIsOne(),De=Math.pow(2,_.count-(Y+1));ue?M(De,Mo.BLACK):(M(De,Mo.BLACK),M(De,Mo.RED))}return D}(new jN(n.length));return new Ls(r||e,f)};let CD;const Bu={};class Ll{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)(Bu&&Xn,"ChildrenNode.ts has not been loaded"),CD=CD||new Ll({".priority":Bu},{".priority":Xn}),CD}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ls?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(nn.Wrap);let f,d=a.getNext();for(;d;)i=i||e.isDefinedOn(d.node),r.push(d),d=a.getNext();f=i?_b(r,e.getCompare()):Bu;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=f,new Ll(D,w)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(i,a)=>{const d=(0,F.DV)(this.indexSet_,a);if((0,F.hu)(d,"Missing index implementation for "+a),i===Bu){if(d.isDefinedOn(e.node)){const f=[],_=t.getIterator(nn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&f.push(w),w=_.getNext();return f.push(e),_b(f,d.getCompare())}return Bu}{const f=t.get(e.name);let _=i;return f&&(_=_.remove(new nn(e.name,f))),_.insert(e,e.node)}});return new Ll(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,i=>{if(i===Bu)return i;{const a=t.get(e.name);return a?i.remove(new nn(e.name,a)):i}});return new Ll(r,this.indexSet_)}}let tf,qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gb(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tf||(tf=new n(new Ls(Cd),null,Ll.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?tf:r}}getChild(t){const r=Wt(t);return null===r?this:this.getImmediateChild(r).getChild(Hn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new nn(t,r);let a,d;r.isEmpty()?(a=this.children_.remove(t),d=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?tf:this.priorityNode_;return new n(a,f,d)}}updateChild(t,r){const i=Wt(t);if(null===i)return r;{(0,F.hu)(".priority"!==Wt(t)||1===Lu(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Hn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,d=!0;if(this.forEachChild(Xn,(f,_)=>{r[f]=_.val(t),i++,d&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):d=!1}),!t&&d&&a<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+pb(this.getPriority().val())+":"),this.forEachChild(Xn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":yN(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const d=a.getPredecessorKey(new nn(t,r));return d?d.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new nn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new nn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,nn.Wrap);let d=a.peek();for(;null!=d&&r.compare(d,t)<0;)a.getNext(),d=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let d=a.peek();for(;null!=d&&r.compare(d,t)>0;)a.getNext(),d=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===_s?-1:0}withIndex(t){if(t===pa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===pa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Xn),a=r.getIterator(Xn);let d=i.getNext(),f=a.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=a.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(t){return t===pa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const _s=new class extends qt{constructor(){super(new Ls(Cd),qt.EMPTY_NODE,Ll.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};function Lr(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ef(n,Lr(e));if(n instanceof Array){let t=qt.EMPTY_NODE;return bi(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const a=Lr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Lr(e))}{const t=[];let r=!1;if(bi(n,(d,f)=>{if("."!==d.substring(0,1)){const _=Lr(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new nn(d,_)))}}),0===t.length)return qt.EMPTY_NODE;const a=_b(t,BN,d=>d.name,Cd);if(r){const d=_b(t,Xn.getCompare());return new qt(a,Lr(e),new Ll({".priority":d},{".priority":Xn}))}return new qt(a,Lr(e),Ll.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(Qi,qt.EMPTY_NODE)},MAX:{value:new nn(fa,_s)}}),mD.__EMPTY_NODE=qt.EMPTY_NODE,ef.__childrenNodeConstructor=qt,ig=_s,bD=_s,function(n){vD=n}(Lr);class ED extends fb{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!an(e)&&".priority"!==Wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?md(e.name,t.name):a}makePost(e,t){const r=Lr(e),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(t,i)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,_s);return new nn(fa,e)}toString(){return Jh(this.indexPath_,0).join("/")}}const H_=new class extends fb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?md(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const r=Lr(e);return new nn(t,r)}toString(){return".value"}},Ed="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bb=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Ed.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let d=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=Ed.charAt(e[i]);return(0,F.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),TD=function(n){if(n===""+Pu)return"-";const e=V_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let d=0;d<t.length;d++)t[d]=n.charAt(d);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return fa;const a=Ed.charAt(Ed.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},G_=function(n){if(n===""+Kh)return Qi;const e=V_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Pu:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ed.charAt(Ed.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function ID(n){return{type:"value",snapshotNode:n}}function nf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sg(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function og(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class wb{constructor(e){this.index_=e}updateChild(e,t,r,i,a,d){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?e.hasChild(t)?d.trackChildChange(sg(t,f)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(nf(t,r)):d.trackChildChange(og(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Xn,(i,a)=>{t.hasChild(i)||r.trackChildChange(sg(i,a))}),t.isLeafNode()||t.forEachChild(Xn,(i,a)=>{if(e.hasChild(i)){const d=e.getImmediateChild(i);d.equals(a)||r.trackChildChange(og(i,a,d))}else r.trackChildChange(nf(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Uu{constructor(e){this.indexedFilter_=new wb(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Uu.getStartPost_(e),this.endPost_=Uu.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,d){return this.matches(new nn(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,d)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const a=this;return t.forEachChild(Xn,(d,f)=>{a.matches(new nn(d,f))||(i=i.updateImmediateChild(d,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class rf{constructor(e){this.rangedFilter_=new Uu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,d){return this.rangedFilter_.matches(new nn(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,d):this.fullLimitUpdateChild_(e,t,r,a,d)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=qt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;a.hasNext()&&d<this.limit_;){const f=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let a,d,f,_;if(i=t.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(M,V)=>S(V,M)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let w=0,D=!1;for(;_.hasNext();){const S=_.getNext();!D&&f(a,S)<=0&&(D=!0),D&&w<this.limit_&&f(S,d)<=0?w++:i=i.updateImmediateChild(S.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let d;if(this.reverse_){const S=this.index_.getCompare();d=(M,V)=>S(V,M)}else d=this.index_.getCompare();const f=e;(0,F.hu)(f.numChildren()===this.limit_,"");const _=new nn(t,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(f.hasChild(t)){const S=f.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=M&&(M.name===t||f.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const V=null==M?1:d(M,_);if(D&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(og(t,r,S)),f.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(sg(t,S));const ue=f.updateImmediateChild(t,qt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=a&&a.trackChildChange(nf(M.name,M.node)),ue.updateImmediateChild(M.name,M.node)):ue}}return r.isEmpty()?e:D&&d(w,_)>=0?(null!=a&&(a.trackChildChange(sg(w.name,w.node)),a.trackChildChange(nf(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(w.name,qt.EMPTY_NODE)):e}}class ag{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new ag;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Cb(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ro(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function di(n,e){const t=n.copy();return t.index_=e,t}function $u(n){const e={};if(n.isDefault())return e;let t;return n.index_===Xn?t="$priority":n.index_===H_?t="$value":n.index_===pa?t="$key":((0,F.hu)(n.index_ instanceof ED,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function cg(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Xn&&(e.i=n.index_.toString()),e}class ys extends tg{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=gd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const d=ys.getListenId_(e,r),f={};this.listens_[d]=f;const _=$u(e._queryParams);this.restRequest_(a+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,F.DV)(this.listens_,d)===f){let M;M=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(M,null)}})}unlisten(e,t){const r=ys.getListenId_(e,t);delete this.listens_[r]}get(e){const t=$u(e._queryParams),r=e._path.toString(),i=new F.BH;return this.restRequest_(r+".json",t,(a,d)=>{let f=d;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,F.cI)(f.responseText)}catch(w){Oi("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&Oi("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class Db{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Vl(){return{value:null,children:new Map}}function ma(n,e,t){if(an(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Wt(e);n.children.has(r)||n.children.set(r,Vl()),ma(n.children.get(r),e=Hn(e),t)}}function ju(n,e){if(an(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Xn,(r,i)=>{ma(n,new Pn(r),i)}),ju(n,e)}}if(n.children.size>0){const t=Wt(e);return e=Hn(e),n.children.has(t)&&ju(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Hu(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Hu(i,new Pn(e.toString()+"/"+r),t)})}class af{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class SD{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new af(e);const r=1e4+2e4*Math.random();vd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;bi(e,(i,a)=>{a>0&&(0,F.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),vd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xs=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Xs||(Xs={})),Xs))();function Z_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class dg{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Xs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(an(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pn(e));return new dg(mn(),t,this.revert)}}return(0,F.hu)(Wt(this.path)===e,"operationForChild called for unrelated child."),new dg(Hn(this.path),this.affectedTree,this.revert)}}class cf{constructor(e,t){this.source=e,this.path=t,this.type=Xs.LISTEN_COMPLETE}operationForChild(e){return an(this.path)?new cf(this.source,mn()):new cf(this.source,Hn(this.path))}}class Gu{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Xs.OVERWRITE}operationForChild(e){return an(this.path)?new Gu(this.source,mn(),this.snap.getImmediateChild(e)):new Gu(this.source,Hn(this.path),this.snap)}}class Td{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Xs.MERGE}operationForChild(e){if(an(this.path)){const t=this.children.subtree(new Pn(e));return t.isEmpty()?null:t.value?new Gu(this.source,mn(),t.value):new Td(this.source,mn(),t)}return(0,F.hu)(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Td(this.source,Hn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(an(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class AD{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function df(n,e,t,r,i,a){const d=r.filter(f=>f.type===t);d.sort((f,_)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),d.forEach(f=>{const _=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&e.push(w.createEvent(_,n.query_))})})}function Tb(n,e){return{eventCache:n,serverCache:e}}function hg(n,e,t,r){return Tb(new qu(e,t,r),n.serverCache)}function Ib(n,e,t,r){return Tb(n.eventCache,new qu(e,t,r))}function z_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Sb;class cr{constructor(e,t=(()=>(Sb||(Sb=new Ls(UO)),Sb))()){this.value=e,this.children=t}static fromObject(e){let t=new cr(null);return bi(e,(r,i)=>{t=t.set(new Pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:mn(),value:this.value};if(an(e))return null;{const r=Wt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Hn(e),t);return null!=a?{path:rr(new Pn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(an(e))return this;{const t=Wt(e),r=this.children.get(t);return null!==r?r.subtree(Hn(e)):new cr(null)}}set(e,t){if(an(e))return new cr(t,this.children);{const r=Wt(e),a=(this.children.get(r)||new cr(null)).set(Hn(e),t),d=this.children.insert(r,a);return new cr(this.value,d)}}remove(e){if(an(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=Wt(e),r=this.children.get(t);if(r){const i=r.remove(Hn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new cr(null):new cr(this.value,a)}return this}}get(e){if(an(e))return this.value;{const t=Wt(e),r=this.children.get(t);return r?r.get(Hn(e)):null}}setTree(e,t){if(an(e))return t;{const r=Wt(e),a=(this.children.get(r)||new cr(null)).setTree(Hn(e),t);let d;return d=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new cr(this.value,d)}}fold(e){return this.fold_(mn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(rr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,mn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(an(e))return null;{const a=Wt(e),d=this.children.get(a);return d?d.findOnPath_(Hn(e),rr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,mn(),t)}foreachOnPath_(e,t,r){if(an(e))return this;{this.value&&r(t,this.value);const i=Wt(e),a=this.children.get(i);return a?a.foreachOnPath_(Hn(e),rr(t,i),r):new cr(null)}}foreach(e){this.foreach_(mn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(rr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class _a{constructor(e){this.writeTree_=e}static empty(){return new _a(new cr(null))}}function hf(n,e,t){if(an(e))return new _a(new cr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const d=ms(i,e);return a=a.updateChild(d,t),new _a(n.writeTree_.set(i,a))}{const i=new cr(t),a=n.writeTree_.setTree(e,i);return new _a(a)}}}function xD(n,e,t){let r=n;return bi(t,(i,a)=>{r=hf(r,rr(e,i),a)}),r}function YN(n,e){if(an(e))return _a.empty();{const t=n.writeTree_.setTree(e,new cr(null));return new _a(t)}}function MD(n,e){return null!=Id(n,e)}function Id(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ms(t.path,e)):null}function KN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Xn,(r,i)=>{e.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new nn(r,i.value))}),e}function Zu(n,e){if(an(e))return n;{const t=Id(n,e);return new _a(null!=t?new cr(t):n.writeTree_.subtree(e))}}function Ab(n){return n.writeTree_.isEmpty()}function zu(n,e){return Y_(mn(),n.writeTree_,e)}function Y_(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,F.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Y_(rr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(rr(n,".priority"),r)),t}}function K_(n,e){return xb(e,n)}function RD(n,e){if(n.snap)return Js(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Js(rr(n.path,t),e))return!0;return!1}function JN(n){return n.visible}function Sd(n,e,t){let r=_a.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const d=a.path;let f;if(a.snap)Js(t,d)?(f=ms(t,d),r=hf(r,f,a.snap)):Js(d,t)&&(f=ms(d,t),r=hf(r,mn(),a.snap.getChild(f)));else{if(!a.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Js(t,d))f=ms(t,d),r=xD(r,f,a.children);else if(Js(d,t))if(f=ms(d,t),an(f))r=xD(r,mn(),a.children);else{const _=(0,F.DV)(a.children,Wt(f));if(_){const w=_.getChild(Hn(f));r=hf(r,mn(),w)}}}}}return r}function kD(n,e,t,r,i){if(r||i){const a=Zu(n.visibleWrites,e);return!i&&Ab(a)?t:i||null!=t||MD(a,mn())?zu(Sd(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Js(w.path,e)||Js(e,w.path))},e),t||qt.EMPTY_NODE):null}{const a=Id(n.visibleWrites,e);if(null!=a)return a;{const d=Zu(n.visibleWrites,e);return Ab(d)?t:null!=t||MD(d,mn())?zu(d,t||qt.EMPTY_NODE):null}}}function J_(n,e,t,r){return kD(n.writeTree,n.treePath,e,t,r)}function Nb(n,e){return function(n,e,t){let r=qt.EMPTY_NODE;const i=Id(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xn,(a,d)=>{r=r.updateImmediateChild(a,d)}),r;if(t){const a=Zu(n.visibleWrites,e);return t.forEachChild(Xn,(d,f)=>{const _=zu(Zu(a,new Pn(d)),f);r=r.updateImmediateChild(d,_)}),KN(a).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return KN(Zu(n.visibleWrites,e)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,e)}function LD(n,e,t,r){return function(n,e,t,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=rr(e,t);if(MD(n.visibleWrites,a))return null;{const d=Zu(n.visibleWrites,a);return Ab(d)?i.getChild(t):zu(d,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function X_(n,e){return function(n,e){return Id(n.visibleWrites,e)}(n.writeTree,rr(n.treePath,e))}function ey(n,e,t){return function(n,e,t,r){const i=rr(e,t),a=Id(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?zu(Zu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function VD(n,e){return xb(rr(n.treePath,e),n.writeTree)}function xb(n,e){return{treePath:n,writeTree:e}}class BD{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,og(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,sg(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,nf(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,og(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const nx=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class fg{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new qu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ey(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wu(this.viewCache_),a=function(n,e,t,r,i,a){return function(n,e,t,r,i,a,d){let f;const _=Zu(n.visibleWrites,e),w=Id(_,mn());if(null!=w)f=w;else{if(null==t)return[];f=zu(_,t)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const D=[],S=d.getCompare(),M=a?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let V=M.getNext();for(;V&&D.length<i;)0!==S(V,r)&&D.push(V),V=M.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function ty(n,e,t,r,i,a){const d=e.eventCache;if(null!=X_(r,t))return e;{let f,_;if(an(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Wu(e),S=Nb(r,w instanceof qt?w:qt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=J_(r,Wu(e));f=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Wt(t);if(".priority"===w){(0,F.hu)(1===Lu(t),"Can't have a priority with additional path components");const D=d.getNode();_=e.serverCache.getNode();const S=LD(r,t,D,_);f=null!=S?n.filter.updatePriority(D,S):d.getNode()}else{const D=Hn(t);let S;if(d.isCompleteForChild(w)){_=e.serverCache.getNode();const M=LD(r,t,d.getNode(),_);S=null!=M?d.getNode().getImmediateChild(w).updateChild(D,M):d.getNode().getImmediateChild(w)}else S=ey(r,w,e.serverCache);f=null!=S?n.filter.updateChild(d.getNode(),w,S,D,i,a):d.getNode()}}return hg(e,f,d.isFullyInitialized()||an(t),n.filter.filtersNodes())}}function ff(n,e,t,r,i,a,d,f){const _=e.serverCache;let w;const D=d?n.filter:n.filter.getIndexedFilter();if(an(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),V,null)}else{const V=Wt(t);if(!_.isCompleteForPath(t)&&Lu(t)>1)return e;const Y=Hn(t),De=_.getNode().getImmediateChild(V).updateChild(Y,r);w=".priority"===V?D.updatePriority(_.getNode(),De):D.updateChild(_.getNode(),V,De,Y,nx,null)}const S=Ib(e,w,_.isFullyInitialized()||an(t),D.filtersNodes());return ty(n,S,t,i,new fg(i,S,a),f)}function Rb(n,e,t,r,i,a,d){const f=e.eventCache;let _,w;const D=new fg(i,e,a);if(an(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,d),_=hg(e,w,!0,n.filter.filtersNodes());else{const S=Wt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=hg(e,w,f.isFullyInitialized(),f.isFiltered());else{const M=Hn(t),V=f.getNode().getImmediateChild(S);let Y;if(an(M))Y=r;else{const ue=D.getCompleteChild(S);Y=null!=ue?".priority"===$_(M)&&ue.getChild(fD(M)).isEmpty()?ue:ue.updateChild(M,r):qt.EMPTY_NODE}_=V.equals(Y)?e:hg(e,n.filter.updateChild(f.getNode(),S,Y,M,D,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function ny(n,e){return n.eventCache.isCompleteForChild(e)}function Pb(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function UD(n,e,t,r,i,a,d,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=an(t)?r:new cr(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,M)=>{if(D.hasChild(S)){const Y=Pb(0,e.serverCache.getNode().getImmediateChild(S),M);_=ff(n,_,new Pn(S),Y,i,a,d,f)}}),w.children.inorderTraversal((S,M)=>{const V=!e.serverCache.isCompleteForChild(S)&&void 0===M.value;if(!D.hasChild(S)&&!V){const ue=Pb(0,e.serverCache.getNode().getImmediateChild(S),M);_=ff(n,_,new Pn(S),ue,i,a,d,f)}}),_}class ox{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new wb(r.getIndex()),a=function(n){return n.loadsAllData()?new wb(n.getIndex()):n.hasLimit()?new rf(n):new Uu(n)}(r);this.processor_=function(n){return{filter:n}}(a);const d=t.serverCache,f=t.eventCache,_=i.updateFullNode(qt.EMPTY_NODE,d.getNode(),null),w=a.updateFullNode(qt.EMPTY_NODE,f.getNode(),null),D=new qu(_,d.isFullyInitialized(),i.filtersNodes()),S=new qu(w,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Tb(S,D),this.eventGenerator_=new AD(this.query_)}get query(){return this.query_}}function jD(n,e){const t=Wu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!an(e)&&!t.getImmediateChild(Wt(e)).isEmpty())?t.getChild(e):null}function ry(n){return 0===n.eventRegistrations_.length}function Bb(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const d=a.createCancelEvent(t,i);d&&r.push(d)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const d=n.eventRegistrations_[a];if(d.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function HD(n,e,t,r){e.type===Xs.MERGE&&null!==e.source.queryId&&((0,F.hu)(Wu(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(z_(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function(n,e,t,r,i){const a=new BD;let d,f;if(t.type===Xs.OVERWRITE){const w=t;w.source.fromUser?d=Rb(n,e,w.path,w.snap,r,i,a):((0,F.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered()&&!an(w.path),d=ff(n,e,w.path,w.snap,r,i,f,a))}else if(t.type===Xs.MERGE){const w=t;w.source.fromUser?d=function(n,e,t,r,i,a,d){let f=e;return r.foreach((_,w)=>{const D=rr(t,_);ny(e,Wt(D))&&(f=Rb(n,f,D,w,i,a,d))}),r.foreach((_,w)=>{const D=rr(t,_);ny(e,Wt(D))||(f=Rb(n,f,D,w,i,a,d))}),f}(n,e,w.path,w.children,r,i,a):((0,F.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||e.serverCache.isFiltered(),d=UD(n,e,w.path,w.children,r,i,f,a))}else if(t.type===Xs.ACK_USER_WRITE){const w=t;d=w.revert?function(n,e,t,r,i,a){let d;if(null!=X_(r,t))return e;{const f=new fg(r,e,i),_=e.eventCache.getNode();let w;if(an(t)||".priority"===Wt(t)){let D;if(e.serverCache.isFullyInitialized())D=J_(r,Wu(e));else{const S=e.serverCache.getNode();(0,F.hu)(S instanceof qt,"serverChildren would be complete if leaf node"),D=Nb(r,S)}D=D,w=n.filter.updateFullNode(_,D,a)}else{const D=Wt(t);let S=ey(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?n.filter.updateChild(_,D,S,Hn(t),f,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,qt.EMPTY_NODE,Hn(t),f,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=J_(r,Wu(e)),d.isLeafNode()&&(w=n.filter.updateFullNode(w,d,a)))}return d=e.serverCache.isFullyInitialized()||null!=X_(r,mn()),hg(e,w,d,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function(n,e,t,r,i,a,d){if(null!=X_(i,t))return e;const f=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(an(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return ff(n,e,t,_.getNode().getChild(t),i,a,f,d);if(an(t)){let w=new cr(null);return _.getNode().forEachChild(pa,(D,S)=>{w=w.set(new Pn(D),S)}),UD(n,e,t,w,i,a,f,d)}return e}{let w=new cr(null);return r.foreach((D,S)=>{const M=rr(t,D);_.isCompleteForPath(M)&&(w=w.set(D,_.getNode().getChild(M)))}),UD(n,e,t,w,i,a,f,d)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Xs.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);d=function(n,e,t,r,i){const a=e.serverCache;return ty(n,Ib(e,a.getNode(),a.isFullyInitialized()||an(t),a.isFiltered()),t,r,nx,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=z_(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(ID(z_(e)))}}(e,d,_),{viewCache:d,changes:_}}(n.processor_,i,e,t,r);return function(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,F.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Ub(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Ub(n,e,t,r){return function(n,e,t,r){const i=[],a=[];return e.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&a.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(d.childName,d.snapshotNode))}),df(n,i,"child_removed",e,r,t),df(n,i,"child_added",e,r,t),df(n,i,"child_moved",a,r,t),df(n,i,"child_changed",e,r,t),df(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let pf,qb;class $b{constructor(){this.views=new Map}}function gg(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,F.hu)(null!=a,"SyncTree gave us an op for an invalid query."),HD(a,e,t,r)}{let a=[];for(const d of n.views.values())a=a.concat(HD(d,e,t,r));return a}}function mg(n,e,t,r,i){const d=n.views.get(e._queryIdentifier);if(!d){let f=J_(t,i?r:null),_=!1;f?_=!0:r instanceof qt?(f=Nb(t,r),_=!1):(f=qt.EMPTY_NODE,_=!1);const w=Tb(new qu(f,_,!1),new qu(r,i,!1));return new ox(e,w)}return d}function jb(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Bl(n,e){let t=null;for(const r of n.views.values())t=t||jD(r,e);return t}function Hb(n,e){return e._queryParams.loadsAllData()?_g(n):n.views.get(e._queryIdentifier)}function Gb(n,e){return null!=Hb(n,e)}function Ul(n){return null!=_g(n)}function _g(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let YD=1;class KD{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_={visibleWrites:_a.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qr(n,e,t,r,i){return function(n,e,t,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=hf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Ad(n,new Gu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Yu(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=t&&RD(f,r.path)?i=!1:Js(r.path,f.path)&&(a=!0)),d--}return!!i&&(a?(function(n){n.visibleWrites=Sd(n.allWrites,JN,mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=YN(n.visibleWrites,r.path):bi(r.children,_=>{n.visibleWrites=YN(n.visibleWrites,rr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new cr(null);return null!=r.snap?a=a.set(mn(),!0):bi(r.children,d=>{a=a.set(new Pn(d),!0)}),Ad(n,new dg(r.path,a,t))}return[]}function yg(n,e,t){return Ad(n,new Gu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function iy(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let d=[];if(a&&("default"===e._queryIdentifier||Gb(a,e))){const f=function(n,e,t,r){const i=e._queryIdentifier,a=[];let d=[];const f=Ul(n);if("default"===i)for(const[_,w]of n.views.entries())d=d.concat(Bb(w,t,r)),ry(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(d=d.concat(Bb(_,t,r)),ry(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return f&&!Ul(n)&&a.push(new((0,F.hu)(pf,"Reference.ts has not been loaded"),pf)(e._repo,e._path)),{removed:a,events:d}}(a,e,t,r);(function(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=f.removed;d=f.events;const w=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,M)=>Ul(M));if(w&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const M=function(n){return n.fold((e,t,r)=>{if(t&&Ul(t))return[_g(t)];{let i=[];return t&&(i=jb(t)),bi(r,(a,d)=>{i=i.concat(d)}),i}})}(S);for(let V=0;V<M.length;++V){const Y=M[V],ue=Y.query,De=oy(n,Y);n.listenProvider_.startListening(mf(ue),eo(n,ue),De.hashFn,De.onComplete)}}}if(!D&&_.length>0&&!r)if(w){const S=null;n.listenProvider_.stopListening(mf(e),S)}else _.forEach(S=>{const M=n.queryToTagMap.get(ay(S));n.listenProvider_.stopListening(mf(S),M)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ay(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return d}function eT(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,M)=>{const V=ms(S,r);i=i||Bl(M,V),a=a||Ul(M)});let f,d=n.syncPointTree_.get(r);d?(a=a||Ul(d),i=i||Bl(d,mn())):(d=new $b,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=qt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,V)=>{const Y=Bl(V,mn());Y&&(i=i.updateImmediateChild(M,Y))}));const _=Gb(d,e);if(!_&&!e._queryParams.loadsAllData()){const S=ay(e);(0,F.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const M=YD++;n.queryToTagMap.set(S,M),n.tagToQueryMap.set(M,S)}let D=function(n,e,t,r,i,a){const d=mg(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,d),function(n,e){n.eventRegistrations_.push(e)}(d,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Xn,(a,d)=>{r.push(nf(a,d))}),t.isFullyInitialized()&&r.push(ID(t.getNode())),Ub(n,r,t.getNode(),e)}(d,t)}(d,e,t,K_(n.pendingWriteTree_,r),i,f);if(!_&&!a){const S=Hb(d,e);D=D.concat(function(n,e,t){const r=e._path,i=eo(n,e),a=oy(n,t),d=n.listenProvider_.startListening(mf(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!Ul(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((w,D,S)=>{if(!an(w)&&D&&Ul(D))return[_g(D).query];{let M=[];return D&&(M=M.concat(jb(D).map(V=>V.query))),bi(S,(V,Y)=>{M=M.concat(Y)}),M}});for(let w=0;w<_.length;++w){const D=_[w];n.listenProvider_.stopListening(mf(D),eo(n,D))}}return d}(n,e,S))}return D}function vg(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(d,f)=>{const w=Bl(f,ms(d,e));if(w)return w});return kD(i,e,a,t,!0)}function Ad(n,e){return fx(e,n.syncPointTree_,null,K_(n.pendingWriteTree_,mn()))}function fx(n,e,t,r){if(an(n.path))return sy(n,e,t,r);{const i=e.get(mn());null==t&&null!=i&&(t=Bl(i,mn()));let a=[];const d=Wt(n.path),f=n.operationForChild(d),_=e.children.get(d);if(_&&f){const w=t?t.getImmediateChild(d):null,D=VD(r,d);a=a.concat(fx(f,_,w,D))}return i&&(a=a.concat(gg(i,n,r,t))),a}}function sy(n,e,t,r){const i=e.get(mn());null==t&&null!=i&&(t=Bl(i,mn()));let a=[];return e.children.inorderTraversal((d,f)=>{const _=t?t.getImmediateChild(d):null,w=VD(r,d),D=n.operationForChild(d);D&&(a=a.concat(sy(D,f,_,w)))}),i&&(a=a.concat(gg(i,n,r,t))),a}function oy(n,e){const t=e.query,r=eo(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,e,t){const r=ly(n,t);if(r){const i=ko(r),a=i.path,d=i.queryId,f=ms(a,e);return to(n,a,new cf(Z_(d),f))}return[]}(n,t._path,r):function(n,e){return Ad(n,new cf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return iy(n,t,null,a)}}}}function eo(n,e){const t=ay(e);return n.queryToTagMap.get(t)}function ay(n){return n._path.toString()+"$"+n._queryIdentifier}function ly(n,e){return n.tagToQueryMap.get(e)}function ko(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pn(n.substr(0,e))}}function to(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),gg(r,t,K_(n.pendingWriteTree_,e),null)}function mf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(qb,"Reference.ts has not been loaded"),qb)(n._repo,n._path):n}class Wb{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Wb(t)}node(){return this.node_}}class Zb{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=rr(this.path_,e);return new Zb(this.syncTree_,t)}node(){return vg(this.syncTree_,this.path_)}}const _f=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?mx(n[".sv"],e,t):"object"==typeof n[".sv"]?nT(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},mx=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+n)}},nT=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,F.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},rT=function(n,e,t,r){return cy(e,new Zb(t,n),r)},uy=function(n,e,t){return cy(n,new Wb(e),t)};function cy(n,e,t){const r=n.getPriority().val(),i=_f(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const d=n,f=_f(d.getValue(),e,t);return f!==d.getValue()||i!==d.getPriority().val()?new ef(f,Lr(i)):n}{const d=n;return a=d,i!==d.getPriority().val()&&(a=a.updatePriority(new ef(i))),d.forEachChild(Xn,(f,_)=>{const w=cy(_,e.getImmediateChild(f),t);w!==_&&(a=a.updateImmediateChild(f,w))}),a}}class yf{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function dy(n,e){let t=e instanceof Pn?e:new Pn(e),r=n,i=Wt(t);for(;null!==i;){const a=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new yf(i,r,a),t=Hn(t),i=Wt(t)}return r}function Ku(n){return n.node.value}function hy(n,e){n.node.value=e,gy(n)}function fy(n){return n.node.childCount>0}function vf(n,e){bi(n.node.children,(t,r)=>{e(new yf(t,n,r))})}function Yb(n,e,t,r){t&&!r&&e(n),vf(n,i=>{Yb(i,e,!0,r)}),t&&r&&e(n)}function bf(n){return new Pn(null===n.parent?n.name:bf(n.parent)+"/"+n.name)}function gy(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===Ku(n)&&!fy(n)}(t),i=(0,F.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,gy(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,gy(n))}(n.parent,n.name,n)}const oT=/[\[\].#$\/\u0000-\u001F\u007F]/,aT=/[\[\].#$\u0000-\u001F\u007F]/,Kb=10485760,my=function(n){return"string"==typeof n&&0!==n.length&&!oT.test(n)},lT=function(n){return"string"==typeof n&&0!==n.length&&!aT.test(n)},bg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Zh(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},tl=function(n,e,t,r){r&&void 0===e||wg((0,F.gK)(n,"value"),e,t)},wg=function(n,e,t){const r=t instanceof Pn?new FN(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+wd(r));if("function"==typeof e)throw new Error(n+"contains a function "+wd(r)+" with contents = "+e.toString());if(Zh(e))throw new Error(n+"contains "+e.toString()+" "+wd(r));if("string"==typeof e&&e.length>Kb/3&&(0,F.ug)(e)>Kb)throw new Error(n+"contains a string greater than "+Kb+" utf8 bytes "+wd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(bi(e,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(a=!0,!my(d)))throw new Error(n+" contains an invalid key ("+d+") "+wd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),gD(n)})(r,d),wg(n,f,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+wd(r)+" in addition to actual children.")}},cT=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];bi(e,(d,f)=>{const _=new Pn(d);if(wg(i,f,rr(t,_)),".priority"===$_(_)&&!bg(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Jh(r);for(let d=0;d<a.length;d++)if((".priority"!==a[d]||d!==a.length-1)&&!my(a[d]))throw new Error(n+"contains an invalid key ("+a[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(pD);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Js(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Qb=function(n,e,t){if(!t||void 0!==e){if(Zh(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!bg(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cg=function(n,e,t,r){if(!(r&&void 0===t||my(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Eg=function(n,e,t,r){if(!(r&&void 0===t||lT(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Po=function(n,e){if(".info"===Wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},dT=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!my(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lT(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vx{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _y(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Vu(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Jb(n,e,t){_y(n,t),Xb(n,r=>Vu(r,e))}function no(n,e,t){_y(n,t),Xb(n,r=>Js(r,e)||Js(e,r))}function Xb(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(hT(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function hT(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Wh&&ur("event: "+t.toString()),yd(r)}}}const ew="repo_interrupt";class pT{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vl(),this.transactionQueueTree_=new yf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tw(n){const t=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function wf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:tw(n)})}function yy(n,e,t,r,i){n.dataUpdateCount++;const a=new Pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let d=[];if(i)if(r){const _=(0,F.UI)(t,w=>Lr(w));d=function(n,e,t,r){const i=ly(n,r);if(i){const a=ko(i),d=a.path,f=a.queryId,_=ms(d,e),w=cr.fromObject(t);return to(n,d,new Td(Z_(f),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Lr(t);d=function(n,e,t,r){const i=ly(n,r);if(null!=i){const a=ko(i),d=a.path,f=a.queryId,_=ms(d,e);return to(n,d,new Gu(Z_(f),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,F.UI)(t,w=>Lr(w));d=function(n,e,t){const r=cr.fromObject(t);return Ad(n,new Td({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Lr(t);d=yg(n.serverSyncTree_,a,_)}let f=a;d.length>0&&(f=Qu(n,a)),no(n.eventQueue_,f,d)}function nw(n,e){rw(n,"connected",e),!1===e&&function(n){Ef(n,"onDisconnectEvents");const e=wf(n),t=Vl();Hu(n.onDisconnect_,mn(),(i,a)=>{const d=rT(i,a,n.serverSyncTree_,e);ma(t,i,d)});let r=[];Hu(t,mn(),(i,a)=>{r=r.concat(yg(n.serverSyncTree_,i,a));const d=dw(n,i);Qu(n,d)}),n.onDisconnect_=Vl(),no(n.eventQueue_,mn(),r)}(n)}function rw(n,e,t){const r=new Pn("/.info/"+e),i=Lr(t);n.infoData_.updateSnapshot(r,i);const a=yg(n.infoSyncTree_,r,i);no(n.eventQueue_,r,a)}function vy(n){return n.nextWriteId_++}function mT(n,e,t,r,i){Ef(n,"set",{path:e.toString(),value:t,priority:r});const a=wf(n),d=Lr(t,r),f=vg(n.serverSyncTree_,e),_=uy(d,f,a),w=vy(n),D=qr(n.serverSyncTree_,e,_,w,!0);_y(n.eventQueue_,D),n.server_.put(e.toString(),d.val(!0),(M,V)=>{const Y="ok"===M;Y||Oi("set at "+e+" failed: "+M);const ue=Yu(n.serverSyncTree_,w,!Y);no(n.eventQueue_,e,ue),va(0,i,M,V)});const S=dw(n,e);Qu(n,S),no(n.eventQueue_,S,[])}function _T(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&ju(n.onDisconnect_,e),va(0,t,r,i)})}function sw(n,e,t,r){const i=Lr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,d)=>{"ok"===a&&ma(n.onDisconnect_,e,i),va(0,r,a,d)})}function ow(n,e,t){let r;r=".info"===Wt(e._path)?iy(n.infoSyncTree_,e,t):iy(n.serverSyncTree_,e,t),Jb(n.eventQueue_,e._path,r)}function yT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ew)}function Ef(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ur(t,...e)}function va(n,e,t,r){e&&yd(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const d=new Error(a);d.code=i,e(d)}})}function wr(n,e,t){return vg(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function aw(n,e=n.transactionQueueTree_){if(e||Dg(n,e),Ku(e)){const t=uw(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function(n,e,t){const r=t.map(w=>w.currentWriteId),i=wr(n,e,r);let a=i;const d=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,F.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=ms(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const f=a.val(!0),_=e;n.server_.put(_.toString(),f,w=>{Ef(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let M=0;M<t.length;M++)t[M].status=2,D=D.concat(Yu(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&S.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();Dg(n,dy(n.transactionQueueTree_,e)),aw(n,n.transactionQueueTree_),no(n.eventQueue_,e,D);for(let M=0;M<S.length;M++)yd(S[M])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Oi("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}Qu(n,e)}},d)}(n,bf(e),t)}else fy(e)&&vf(e,t=>{aw(n,t)})}function Qu(n,e){const t=lw(n,e),r=bf(t);return function(n,e,t){if(0===e.length)return;const r=[];let i=[];const d=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const _=e[f],w=ms(t,_.path);let S,D=!1;if((0,F.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(Yu(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(Yu(n.serverSyncTree_,_.currentWriteId,!0));else{const M=wr(n,_.path,d);_.currentInputSnapshot=M;const V=e[f].update(M.val());if(void 0!==V){wg("transaction failed: Data returned ",V,_.path);let Y=Lr(V);"object"==typeof V&&null!=V&&(0,F.r3)(V,".priority")||(Y=Y.updatePriority(M.getPriority()));const De=_.currentWriteId,rt=wf(n),Je=uy(Y,M,rt);_.currentOutputSnapshotRaw=Y,_.currentOutputSnapshotResolved=Je,_.currentWriteId=vy(n),d.splice(d.indexOf(De),1),i=i.concat(qr(n.serverSyncTree_,_.path,Je,_.currentWriteId,_.applyLocally)),i=i.concat(Yu(n.serverSyncTree_,De,!0))}else D=!0,S="nodata",i=i.concat(Yu(n.serverSyncTree_,_.currentWriteId,!0))}no(n.eventQueue_,t,i),i=[],D&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}Dg(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)yd(r[f]);aw(n,n.transactionQueueTree_)}(n,uw(n,t),r),r}function lw(n,e){let t,r=n.transactionQueueTree_;for(t=Wt(e);null!==t&&void 0===Ku(r);)r=dy(r,t),t=Wt(e=Hn(e));return r}function uw(n,e){const t=[];return cw(n,e,t),t.sort((r,i)=>r.order-i.order),t}function cw(n,e,t){const r=Ku(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);vf(e,i=>{cw(n,i,t)})}function Dg(n,e){const t=Ku(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,hy(e,t.length>0?t:void 0)}vf(e,r=>{Dg(n,r)})}function dw(n,e){const t=bf(lw(n,e)),r=dy(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hw(n,i)}),hw(n,r),Yb(r,i=>{hw(n,i)}),t}function hw(n,e){const t=Ku(e);if(t){const r=[];let i=[],a=-1;for(let d=0;d<t.length;d++)3===t[d].status||(1===t[d].status?((0,F.hu)(a===d-1,"All SENT items should be at beginning of queue."),a=d,t[d].status=3,t[d].abortReason="set"):((0,F.hu)(0===t[d].status,"Unexpected transaction status in abort"),t[d].unwatcher(),i=i.concat(Yu(n.serverSyncTree_,t[d].currentWriteId,!0)),t[d].onComplete&&r.push(t[d].onComplete.bind(null,new Error("set"),!1,null))));-1===a?hy(e,void 0):t.length=a+1,no(n.eventQueue_,bf(e),i);for(let d=0;d<r.length;d++)yd(r[d])}}const fw=function(n,e){const t=Ex(n),r=t.namespace;return"firebase.com"===t.domain&&ha(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ha("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K0(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Pn(t.pathString)}},Ex=function(n){let e="",t="",r="",i="",a="",d=!0,f="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const M=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(d="https"===f||"wss"===f,_=parseInt(e.substring(w+1),10)):w=e.length;const V=e.slice(0,w);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const Y=e.indexOf(".");r=e.substring(0,Y).toLowerCase(),t=e.substring(Y+1),a=r}"ns"in M&&(a=M.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:d,scheme:f,pathString:i,namespace:a}};class bT{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class Ig{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pw{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class gw{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return _T(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Po("OnDisconnect.remove",this._path);const e=new F.BH;return sw(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Po("OnDisconnect.set",this._path),tl("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return sw(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Po("OnDisconnect.setWithPriority",this._path),tl("OnDisconnect.setWithPriority",e,this._path,!1),Qb("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function(n,e,t,r,i){const a=Lr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(d,f)=>{"ok"===d&&ma(n.onDisconnect_,e,a),va(0,i,d,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Po("OnDisconnect.update",this._path),cT("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function(n,e,t,r){if((0,F.xb)(t))return ur("onDisconnect().update() called with empty data.  Don't do anything."),void va(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&bi(t,(d,f)=>{const _=Lr(f);ma(n.onDisconnect_,rr(e,d),_)}),va(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class vs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return an(this._path)?null:$_(this._path)}get ref(){return new Fo(this._repo,this._path)}get _queryIdentifier(){const e=cg(this._queryParams),t=$0(e);return"{}"===t?"default":t}get _queryObject(){return cg(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof vs))return!1;const t=this._repo===e._repo,r=Vu(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Cy(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Oo(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===pa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Qi)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==fa)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Xn){if(null!=e&&!bg(e)||null!=t&&!bg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof ED||n.getIndex()===H_,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ju(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fo extends vs{constructor(e,t){super(e,t,new ag,!1)}get parent(){const e=fD(this._path);return null===e?null:new Fo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class xd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pn(e),r=Xu(this.ref,e);return new xd(this._node.getChild(t),r,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new xd(i,Xu(this.ref,r),Xn)))}hasChild(e){const t=new Pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wT(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?Xu(n._root,e):n._root}function mw(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=fw(e,n._repo.repoInfo_.nodeAdmin);dT("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ha("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),wT(n,t.path.toString())}function Xu(n,e){return null===Wt((n=(0,F.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Eg("child","path",t,!1)):Eg("child","path",e,!1),new Fo(n._repo,rr(n._path,e));var t}function _w(n,e){n=(0,F.m9)(n),Po("set",n._path),tl("set",e,n._path,!1);const t=new F.BH;return mT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function nF(n,e){cT("update",e,n._path,!1);const t=new F.BH;return function(n,e,t,r){Ef(n,"update",{path:e.toString(),value:t});let i=!0;const a=wf(n),d={};if(bi(t,(f,_)=>{i=!1,d[f]=rT(rr(e,f),Lr(_),n.serverSyncTree_,a)}),i)ur("update() called with empty data.  Don't do anything."),va(0,r,"ok",void 0);else{const f=vy(n),_=function(n,e,t,r){!function(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=xD(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=cr.fromObject(t);return Ad(n,new Td({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,d,f);_y(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||Oi("update at "+e+" failed: "+w);const M=Yu(n.serverSyncTree_,f,!S),V=M.length>0?Qu(n,e):e;no(n.eventQueue_,V,M),va(0,r,w,D)}),bi(t,w=>{const D=dw(n,rr(e,w));Qu(n,D)}),no(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function rF(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=ms(w,t);r=r||Bl(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Bl(i,mn()):(i=new $b,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,d=a?new qu(r,!0,!1):null;return function(n){return z_(n.viewCache_)}(mg(i,e,K_(n.pendingWriteTree_,e._path),a?d.getNode():qt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Lr(r).withIndex(e._queryParams.getIndex()),a=yg(n.serverSyncTree_,e._path,i);return Jb(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Ef(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new xd(e,new Fo(n._repo,n._path),n._queryParams.getIndex()))}class yw{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new bT("value",this,new xd(e.snapshotNode,new Fo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ig(this,e,t):null}matches(e){return e instanceof yw&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Sg{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ig(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=Xu(new Fo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new bT(e.type,this,new xd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Sg&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ec(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(D,S)=>{ow(n._repo,n,f),_(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const d=new pw(t,a||void 0),f="value"===e?new yw(d):new Sg(e,d);return function(n,e,t){let r;r=".info"===Wt(e._path)?eT(n.infoSyncTree_,e,t):eT(n.serverSyncTree_,e,t),Jb(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>ow(n._repo,n,f)}function vw(n,e,t,r){return ec(n,"value",e,t,r)}function ET(n,e,t,r){return ec(n,"child_added",e,t,r)}function bw(n,e,t,r){return ec(n,"child_changed",e,t,r)}function Df(n,e,t,r){return ec(n,"child_moved",e,t,r)}function DT(n,e,t,r){return ec(n,"child_removed",e,t,r)}function TT(n,e,t){let r=null;const i=t?new pw(t):null;"value"===e?r=new yw(i):e&&(r=new Sg(e,i)),ow(n._repo,n,r)}class ba{}class IT extends ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tl("endAt",this._value,e._path,!0);const t=Ro(e._queryParams,this._value,this._key);if(Ju(t),Oo(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class ST extends ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tl("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,i;return n.index_===pa?("string"==typeof e&&(e=G_(e)),i=Ro(n,e,t)):(r=null==t?Qi:G_(t),i=Ro(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Ju(t),Oo(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class AT extends ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tl("startAt",this._value,e._path,!0);const t=Cb(e._queryParams,this._value,this._key);if(Ju(t),Oo(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class Nx extends ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){tl("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===pa)"string"==typeof e&&(e=TD(e)),r=Cb(n,e,t);else{let i;i=null==t?fa:TD(t),r=Cb(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Ju(t),Oo(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vs(e._repo,e._path,t,e._orderByCalled)}}class xx extends ba{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Mx extends ba{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Rx extends ba{constructor(e){super(),this._path=e}_apply(e){Cy(e,"orderByChild");const t=new Pn(this._path);if(an(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ED(t),i=di(e._queryParams,r);return Oo(i),new vs(e._repo,e._path,i,!0)}}class kx extends ba{_apply(e){Cy(e,"orderByKey");const t=di(e._queryParams,pa);return Oo(t),new vs(e._repo,e._path,t,!0)}}class kT extends ba{_apply(e){Cy(e,"orderByPriority");const t=di(e._queryParams,Xn);return Oo(t),new vs(e._repo,e._path,t,!0)}}class Ox extends ba{_apply(e){Cy(e,"orderByValue");const t=di(e._queryParams,H_);return Oo(t),new vs(e._repo,e._path,t,!0)}}class Cw extends ba{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(tl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IT(this._value,this._key)._apply(new AT(this._value,this._key)._apply(e))}}function Lo(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,F.hu)(!pf,"__referenceConstructor has already been defined"),pf=n})(Fo),function(n){(0,F.hu)(!qb,"__referenceConstructor has already been defined"),qb=n}(Fo);const Ew={};function OT(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ha("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ur("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,d=fw(a,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${f.namespace}`,d=fw(a,i),f=d.repoInfo):_=!d.repoInfo.secure;const D=i&&_?new Ou(Ou.OWNER):new zE(n.name,n.options,e);dT("Invalid Firebase Database URL",d),an(d.path)||ha("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,e,t,r){let i=Ew[e.name];i||(i={},Ew[e.name]=i);let a=i[n.toURLString()];return a&&ha("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new pT(n,false,t,r),i[n.toURLString()]=a,a}(f,n,D,new G0(n.name,t));return new FT(S,n)}class FT{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=Jp(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ys(n.repoInfo_,(r,i,a,d)=>{yy(n,r,i,a,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>nw(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Fl(n.repoInfo_,e,(r,i,a,d)=>{yy(n,r,i,a,d)},r=>{nw(n,r)},r=>{!function(n,e){bi(e,(t,r)=>{rw(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return Q0[t]||(Q0[t]=e()),Q0[t]}(n.repoInfo_,()=>new SD(n.stats_,n.server_)),n.infoData_=new Db,n.infoSyncTree_=new KD({startListening:(r,i,a,d)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=yg(n.infoSyncTree_,r._path,_),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),rw(n,"connected",!1),n.serverSyncTree_=new KD({startListening:(r,i,a,d)=>(n.server_.listen(r,a,i,(f,_)=>{const w=d(f,_);no(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fo(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=Ew[e];(!t||t[n.key]!==n)&&ha(`Database ${e}(${n.repoInfo_}) has already been deleted.`),yT(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ha("Cannot call "+e+" on a deleted database.")}}function VT(n,e){bN(n,e)}class BT{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fl.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Fl.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},HE(Ki.SDK_VERSION),(0,Ki._registerComponent)(new ca.wA("database",(e,{instanceIdentifier:t})=>OT(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(gN,"0.12.8",void 0),(0,Ki.registerVersion)(gN,"0.12.8","esm2017");const UT=new da.Yd("@firebase/database-compat"),$T=function(n){UT.warn("FIREBASE WARNING: "+n)};class GT{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,$T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class oF{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class tc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Eg("DataSnapshot.child","path",e,!1),new tc(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Eg("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new tc(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Vo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Vr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const d=Vr.getCancelAndContextArgs_("Query.on",r,i),f=(w,D)=>{t.call(d.context,new tc(this.database,w),D)};f.userCallback=t,f.context=d.context;const _=null===(a=d.cancel)||void 0===a?void 0:a.bind(d.context);switch(e){case"value":return vw(this._delegate,f,_),t;case"child_added":return ET(this._delegate,f,_),t;case"child_removed":return DT(this._delegate,f,_),t;case"child_changed":return bw(this._delegate,f,_),t;case"child_moved":return Df(this._delegate,f,_),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,TT(this._delegate,e,i)}else TT(this._delegate,e)}get(){return rF(this._delegate).then(e=>new tc(this.database,e))}once(e,t,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const a=Vr.getCancelAndContextArgs_("Query.once",r,i),d=new F.BH,f=(w,D)=>{const S=new tc(this.database,w);t&&t.call(a.context,S,D),d.resolve(S)};f.userCallback=t,f.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),d.reject(w)};switch(e){case"value":vw(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":ET(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":DT(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":bw(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":Df(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Vr(this.database,Lo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new xx(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Vr(this.database,Lo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Mx(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Vr(this.database,Lo(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Eg("orderByChild","path",n,!1),new Rx(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Vr(this.database,Lo(this._delegate,new kx))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Vr(this.database,Lo(this._delegate,new kT))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Vr(this.database,Lo(this._delegate,new Ox))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n=null,e){return Cg("startAt","key",e,!0),new AT(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,e){return Cg("startAfter","key",e,!0),new Nx(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,e){return Cg("endAt","key",e,!0),new IT(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,e){return Cg("endBefore","key",e,!0),new ST(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,e){return Cg("equalTo","key",e,!0),new Cw(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Vr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,F.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Vo(this.database,new Fo(this._delegate._repo,this._delegate._path))}}class Vo extends Vr{constructor(e,t){super(e,new vs(t._repo,t._path,new ag,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Vo(this.database,Xu(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Vo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Vo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=_w(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,$T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Po("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=nF(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,e,t){if(Po("setWithPriority",n._path),tl("setWithPriority",e,n._path,!1),Qb("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return mT(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Po("remove",n._path),_w(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,e,t){var r;if(n=(0,F.m9)(n),Po("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new F.BH,f=vw(n,()=>{});return function(n,e,t,r,i,a){Ef(n,"transaction on "+e);const d={path:e,update:t,onComplete:r,status:null,order:_N(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=wr(n,e,void 0);d.currentInputSnapshot=f;const _=d.update(f.val());if(void 0===_)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{wg("transaction failed: Data returned ",_,d.path),d.status=0;const w=dy(n.transactionQueueTree_,e),D=Ku(w)||[];let S;D.push(d),hy(w,D),"object"==typeof _&&null!==_&&(0,F.r3)(_,".priority")?(S=(0,F.DV)(_,".priority"),(0,F.hu)(bg(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(vg(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const M=wf(n),V=Lr(_,S),Y=uy(V,f,M);d.currentOutputSnapshotRaw=V,d.currentOutputSnapshotResolved=Y,d.currentWriteId=vy(n);const ue=qr(n.serverSyncTree_,e,Y,d.currentWriteId,d.applyLocally);no(n.eventQueue_,e,ue),aw(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,D)=>{let S=null;_?a.reject(_):(S=new xd(D,new Fo(n._repo,n._path),Xn),a.resolve(new BT(w,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new oF(a.committed,new tc(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),Po("setPriority",n._path),Qb("setPriority",e,!1);const t=new F.BH;return mT(n._repo,rr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),Po("push",n._path),tl("push",e,n._path,!0);const t=tw(n._repo),r=bb(t),i=Xu(n,r),a=Xu(n,r);let d;return d=null!=e?_w(a,e).then(()=>a):Promise.resolve(a),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,e),i=r.then(d=>new Vo(this.database,d));t&&i.then(()=>t(null),d=>t(d));const a=new Vo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Po("Reference.onDisconnect",this._delegate._path),new GT(new gw(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Md{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ha("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ha('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ou(Ou.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);a=new Ou(d)}!function(n,e,t,r){n.repoInfo_=new K0(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof Vo){const t=mw(this._delegate,e.toString());return new Vo(this,t)}{const t=wT(this._delegate,e);return new Vo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=mw(this._delegate,e);return new Vo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),yT(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(ew)}(n._repo)}(this._delegate)}}Md.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var zx=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){HE(t);const d=new ca.zt("auth-internal",new ca.H0("database-standalone"));return d.setComponent(new ca.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Md(OT(n,d,void 0,e,a),n),namespace:i}}});const If=Md.ServerValue;!function(n){n.INTERNAL.registerComponent(new ca.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Md(i,r)},"PUBLIC").setServiceProps({Reference:Vo,Query:Vr,Database:Md,DataSnapshot:tc,enableLogging:VT,INTERNAL:zx,ServerValue:If}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(jE.Z);var Dy=B(9746),Kx=B(7771),nl=B(8858);class qT extends En.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new aF(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;let d;if(this.closed)throw new Tl.N;if(this.isStopped||this.hasError?d=Nh.w.EMPTY:(this.observers.push(e),d=new nl.W(this,e)),i&&e.add(e=new Dy.ht(e,i)),t)for(let f=0;f<a&&!e.closed;f++)e.next(r[f]);else for(let f=0;f<a&&!e.closed;f++)e.next(r[f].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),d}_getNow(){return(this.scheduler||Kx.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,i=this._events,a=i.length;let d=0;for(;d<a&&!(e-i[d].time<r);)d++;return a>t&&(d=Math.max(d,a-t)),d>0&&i.splice(0,d),i}}class aF{constructor(e,t){this.time=e,this.value=t}}function Ag(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let i,d,a=0,f=!1,_=!1;return function(D){let S;a++,!i||f?(f=!1,i=new qT(n,e,r),S=i.subscribe(this),d=D.subscribe({next(M){i.next(M)},error(M){f=!0,i.error(M)},complete(){_=!0,d=void 0,i.complete()}}),_&&(d=void 0)):S=i.subscribe(this),this.add(()=>{a--,S.unsubscribe(),S=void 0,d&&!_&&t&&0===a&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function WT(n,e){return e?nr(()=>n,e):nr(()=>n)}var ZT=B(2639);B(2329);const xg=new Map,sM={activated:!1,tokenObservers:[]},QT={initialized:!1,enabled:!1};function Wr(n){return xg.get(n)||sM}function Vs(n,e){xg.set(n,e)}function nc(){return QT}class uM{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new F.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const bs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function XT(n){if(!Wr(n).activated)throw bs.create("use-before-activation",{appName:n.name})}function Mw(n,e){return Rw.apply(this,arguments)}function Rw(){return(Rw=(0,Ce.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let d,f;try{d=yield fetch(n,a)}catch(S){throw bs.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==d.status)throw bs.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(S){throw bs.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:f.attestationToken,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function Rd(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ay="firebase-app-check-store";let kd=null;function nI(){return kd||(kd=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(bs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ay,{keyPath:"compositeKey"})}}}catch(t){e(bs.create("storage-open",{originalErrorMessage:t.message}))}}),kd)}function Ny(){return(Ny=(0,Ce.Z)(function*(n,e){const r=(yield nI()).transaction(Ay,"readwrite"),a=r.objectStore(Ay).put({compositeKey:n,value:e});return new Promise((d,f)=>{a.onsuccess=_=>{d()},r.onerror=_=>{var w;f(bs.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Mg=new da.Yd("@firebase/app-check");function Rg(n,e){return(0,F.hl)()?function(n,e){return function(n,e){return Ny.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Mg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function On(){return nc().enabled}function $l(){return ic.apply(this,arguments)}function ic(){return(ic=(0,Ce.Z)(function*(){const n=nc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const _F={error:"UNKNOWN_ERROR"};function jt(n){return F.US.encodeString(JSON.stringify(n),!1)}function ws(n){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,Ce.Z)(function*(n,e=!1){const t=n.app;XT(t);const r=Wr(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&xy(_)&&(i=_)}if(!e&&i&&xy(i))return{token:i.token};let f,d=!1;if(On()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Mw(Rd(t,yield $l()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0);const _=yield r.exchangeTokenPromise;return yield Rg(t,_),Vs(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),d=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Mg.warn(_.message):Mg.error(_),a=_}return i?(f={token:i.token},Vs(t,Object.assign(Object.assign({},r),{token:i})),yield Rg(t,i)):f=mM(a),d&&gM(t,f),f})).apply(this,arguments)}function aI(n,e){const t=Wr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Vs(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Lw(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new uM((0,Ce.Z)(function*(){let r;if(r=Wr(e).token?yield ws(n,!0):yield ws(n),r.error)throw r.error}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Vs(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gM(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function xy(n){return n.expireTimeMillis-Date.now()>0}function mM(n){return{token:jt(_F),error:n}}class Bo{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)aI(this.app,t.next);return Promise.resolve()}}const vM="app-check-internal";(0,Ki._registerComponent)(new ca.wA("app-check",n=>function(n,e){return new Bo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vM).initialize()})),(0,Ki._registerComponent)(new ca.wA(vM,n=>function(n){return{getToken:e=>ws(n,e),addTokenListener:e=>function(n,e,t,r){const{app:i}=n,a=Wr(i),d={next:t,error:r,type:e};if(Vs(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,d]})),a.token&&xy(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Lw(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Lw(n))}(n,"INTERNAL",e),removeTokenListener:e=>aI(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ki.registerVersion)("@firebase/app-check","0.5.6");class Bg{constructor(){return(0,wn.vb)("app-check")}}"undefined"!=typeof window&&window;var Ug=B(7841);const qw=new u.OlP("angularfire2.auth.use-emulator"),ky=new u.OlP("angularfire2.auth.settings"),$g=new u.OlP("angularfire2.auth.tenant-id"),Ww=new u.OlP("angularfire2.auth.langugage-code"),mI=new u.OlP("angularfire2.auth.use-device-language"),Zw=new u.OlP("angularfire.auth.persistence"),zw=(n,e,t,r,i,a,d,f)=>(0,Fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),d)for(const[w,D]of Object.entries(d))_.settings[w]=D;return f&&_.setPersistence(f),_},[t,r,i,a,d,f]);let jg=(()=>{class n{constructor(t,r,i,a,d,f,_,w,D,S,M,V){const Y=new En.xQ,ue=(0,ct.of)(void 0).pipe((0,Dy.QV)(d.outsideAngular),nr(()=>a.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4828)))),(0,pt.U)(()=>(0,Fr.on)(t,a,r)),(0,pt.U)(De=>zw(De,a,f,w,D,S,_,M)),Ag({bufferSize:1,refCount:!1}));if(gh(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ct.of)(null);else{ue.pipe(vr()).subscribe();const rt=ue.pipe(nr(at=>at.getRedirectResult().then(Ft=>Ft,()=>null)),wn.iC,Ag({bufferSize:1,refCount:!1})),Je=ue.pipe(nr(at=>new Yn.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>at.onAuthStateChanged(ln=>Ft.next(ln),ln=>Ft.error(ln),()=>Ft.complete()))})))),it=ue.pipe(nr(at=>new Yn.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>at.onIdTokenChanged(ln=>Ft.next(ln),ln=>Ft.error(ln),()=>Ft.complete()))}))));this.authState=rt.pipe(WT(Je),(0,ZT.R)(d.outsideAngular),(0,Dy.QV)(d.insideAngular)),this.user=rt.pipe(WT(it),(0,ZT.R)(d.outsideAngular),(0,Dy.QV)(d.insideAngular)),this.idToken=this.user.pipe(nr(at=>at?(0,Xt.D)(at.getIdToken()):(0,ct.of)(null))),this.idTokenResult=this.user.pipe(nr(at=>at?(0,Xt.D)(at.getIdTokenResult()):(0,ct.of)(null))),this.credential=(0,Gh.T)(rt,Y,this.authState.pipe(Qn(at=>!at))).pipe((0,pt.U)(at=>(null==at?void 0:at.user)?at:null),(0,ZT.R)(d.outsideAngular),(0,Dy.QV)(d.insideAngular))}return(0,Fr.pX)(this,ue,a,{spy:{apply:(De,rt,Je)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&Je.then(it=>Y.next(it))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fr.Dh),u.LFG(Fr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(wn.HU),u.LFG(qw,8),u.LFG(ky,8),u.LFG($g,8),u.LFG(Ww,8),u.LFG(mI,8),u.LFG(Zw,8),u.LFG(Bg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DM=(()=>{class n{constructor(){Ug.Z.registerVersion("angularfire",wn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[jg]}),n})();function Nf(n){return null==n}function _I(n){return"function"==typeof n.set}function yI(n,e){return _I(e)?e:n.ref(e)}function Yw(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(_I(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Hl(n,e,t="on",r=ku.z){return new Yn.y(i=>{let a=null;return a=n[t](e,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,pt.U)(i=>{const{snapshot:a,prevKey:d}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:d,key:f}}),(0,BE.B)())}function Kw(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function AM(n,e){const{payload:t,prevKey:r,key:i}=e,a=Kw(n,i),d=function(n,e){if(Nf(e))return 0;{const t=Kw(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(d,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(d,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function vI(n){return(Nf(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function bI(n,e,t){return function(n,e,t){return Hl(n,"value","once",t).pipe(nr(r=>{const i=[(0,ct.of)(r)];return e.forEach(a=>i.push(Hl(n,a,"on",t))),(0,Gh.T)(...i).pipe($a(AM,[]))}),pd())}(n,e=vI(e),t)}function wI(n,e,t){const r=(e=vI(e)).map(i=>Hl(n,i,"on",t));return(0,Gh.T)(...r)}function MM(n,e){return function(r,i){return Yw(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function xF(n){return function(t){return t?Yw(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Py(n,e){return function(){return Hl(n,"value","on",e)}}const kM=new u.OlP("angularfire2.realtimeDatabaseURL"),PM=new u.OlP("angularfire2.database.use-emulator");let OM=(()=>{class n{constructor(t,r,i,a,d,f,_,w,D,S,M,V,Y,ue,De){this.schedulers=f;const rt=_,Je=(0,Fr.on)(t,d,r);w&&zw(Je,d,D,M,V,Y,S,ue),this.database=(0,Fr.cc)(`${Je.name}.database.${i}`,"AngularFireDatabase",Je.name,()=>{const it=d.runOutsideAngular(()=>Je.database(i||void 0));return rt&&it.useEmulator(...rt),it},[rt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>yI(this.database,t));let a=i;return r&&(a=r(i)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:MM(r,"update"),set:MM(r,"set"),push:i=>r.push(i),remove:xF(r),snapshotChanges:i=>bI(n,i,t).pipe(wn.iC),stateChanges:i=>wI(n,i,t).pipe(wn.iC),auditTrail:i=>function(n,e,t){return function(n,e,t){return function(n,e){return Hl(n,"value","on",e).pipe((0,pt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(Yp(e),(0,pt.U)(([i,a])=>{const d=i.lastKeyToLoad,f=a.map(_=>_.key);return{actions:a,lastKeyToLoad:d,loadedKeys:f}}),function(n){return e=>e.lift(new VO(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,pt.U)(i=>i.actions))}(n,wI(n,e).pipe($a((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(wn.iC),valueChanges:(i,a)=>bI(n,i,t).pipe((0,pt.U)(f=>f.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),wn.iC)}}(a,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>Py(n,e.schedulers.outsideAngular)().pipe(wn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Py(n,e.schedulers.outsideAngular)().pipe(wn.iC,(0,pt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>yI(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fr.Dh),u.LFG(Fr.xv,8),u.LFG(kM,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(wn.HU),u.LFG(PM,8),u.LFG(jg,8),u.LFG(qw,8),u.LFG(ky,8),u.LFG($g,8),u.LFG(Ww,8),u.LFG(mI,8),u.LFG(Zw,8),u.LFG(Bg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var FM=B(982);function Oy(){return n=>n.lift(new Qw)}class Qw{call(e,t){return t.subscribe(new LM(e))}}class LM extends or.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var ut,xf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Cr={},ro=ro||{},Vt=xf||self;function Fy(){}function Ly(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Mf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Jw="closure_uid_"+(1e9*Math.random()>>>0),VM=0;function BM(n,e,t){return n.call.apply(n.bind,arguments)}function DI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Fi(n,e,t){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?BM:DI).apply(null,arguments)}function Xw(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Li(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return e.prototype[i].apply(r,d)}}function oc(){this.s=this.s,this.o=this.o}var kF={};oc.prototype.s=!1,oc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Jw)&&n[Jw]||(n[Jw]=++VM)}(this);delete kF[n]}},oc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const e1=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},TI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function t1(n){return Array.prototype.concat.apply([],arguments)}function n1(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function kf(n){return/^[\s\xa0]*$/.test(n)}var es,II=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xi(n,e){return-1!=n.indexOf(e)}function Vy(n,e){return n<e?-1:n>e?1:0}e:{var SI=Vt.navigator;if(SI){var AI=SI.userAgent;if(AI){es=AI;break e}}es=""}function r1(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function NI(n){const e={};for(const t in n)e[t]=n[t];return e}var xI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function MI(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<xI.length;a++)t=xI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ld(n){return Ld[" "](n),n}Ld[" "]=Fy;var Hg,kI=Xi(es,"Opera"),Vd=Xi(es,"Trident")||Xi(es,"MSIE"),i1=Xi(es,"Edge"),By=i1||Vd,s1=Xi(es,"Gecko")&&!(Xi(es.toLowerCase(),"webkit")&&!Xi(es,"Edge"))&&!(Xi(es,"Trident")||Xi(es,"MSIE"))&&!Xi(es,"Edge"),UM=Xi(es.toLowerCase(),"webkit")&&!Xi(es,"Edge");function o1(){var n=Vt.document;return n?n.documentMode:void 0}e:{var a1="",l1=function(){var n=es;return s1?/rv:([^\);]+)(\)|;)/.exec(n):i1?/Edge\/([\d\.]+)/.exec(n):Vd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):UM?/WebKit\/(\S+)/.exec(n):kI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(l1&&(a1=l1?l1[1]:""),Vd){var u1=o1();if(null!=u1&&u1>parseFloat(a1)){Hg=String(u1);break e}}Hg=a1}var Gg={};function qg(){return e=Gg,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=II(String(Hg)).split("."),t=II("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var i=e[d]||"",a=t[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Vy(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Vy(0==i[2].length,0==a[2].length)||Vy(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n}();var e}var rl=Vt.document&&Vd&&(o1()||parseInt(Hg,10))||void 0,$M=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Fy,e),Vt.removeEventListener("test",Fy,e)}catch(t){}return n}();function hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Wg(n,e){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(s1){e:{try{Ld(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wg.Z.h.call(this)}}hi.prototype.h=function(){this.defaultPrevented=!0},Li(Wg,hi);var jM={2:"touch",3:"pen",4:"mouse"};Wg.prototype.h=function(){Wg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $y="closure_listenable_"+(1e6*Math.random()|0),d1=0;function h1(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++d1,this.ca=this.fa=!1}function Zg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Pf(n){this.src=n,this.g={},this.h=0}function zg(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=e1(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Zg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function f1(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Pf.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var d=f1(n,e,r,i);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new h1(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var p1="closure_lm_"+(1e6*Math.random()|0),g1={};function PI(n,e,t,r,i){if(r&&r.once)return y1(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)PI(n,e[a],t,r,i);return null}return t=w1(t),n&&n[$y]?n.N(e,t,Mf(r)?!!r.capture:!!r,i):m1(n,e,t,!1,r,i)}function m1(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var d=Mf(i)?!!i.capture:!!i,f=Hy(n);if(f||(n[p1]=f=new Pf(n)),(t=f.add(e,t,r,d,a)).proxy)return t;if(r=function(){var e=HM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)$M||(i=d),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(b1(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function y1(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)y1(n,e[a],t,r,i);return null}return t=w1(t),n&&n[$y]?n.O(e,t,Mf(r)?!!r.capture:!!r,i):m1(n,e,t,!0,r,i)}function v1(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)v1(n,e[a],t,r,i);else r=Mf(r)?!!r.capture:!!r,t=w1(t),n&&n[$y]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=f1(a=n.g[e],t,r,i))&&(Zg(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=Hy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=f1(e,t,r,i)),(t=-1<n?e[n]:null)&&jy(t))}function jy(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[$y])zg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(b1(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Hy(e))?(zg(t,n),0==t.h&&(t.src=null,e[p1]=null)):Zg(n)}}}function b1(n){return n in g1?g1[n]:g1[n]="on"+n}function HM(n,e){if(n.ca)n=!0;else{e=new Wg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&jy(n),n=t.call(r,e)}return n}function Hy(n){return(n=n[p1])instanceof Pf?n:null}var Gy="__closure_events_fn_"+(1e9*Math.random()>>>0);function w1(n){return"function"==typeof n?n:(n[Gy]||(n[Gy]=function(e){return n.handleEvent(e)}),n[Gy])}function fi(){oc.call(this),this.i=new Pf(this),this.P=this,this.I=null}function wi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new hi(e,n);else if(e instanceof hi)e.target=e.target||n;else{var i=e;MI(e=new hi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var d=e.g=t[a];i=C1(d,r,!0,e)&&i}if(i=C1(d=e.g=n,r,!0,e)&&i,i=C1(d,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=C1(d=e.g=t[a],r,!1,e)&&i}function C1(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var d=e[a];if(d&&!d.ca&&d.capture==t){var f=d.listener,_=d.ia||d.src;d.fa&&zg(n.i,d),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Li(fi,oc),fi.prototype[$y]=!0,fi.prototype.removeEventListener=function(n,e,t,r){v1(this,n,e,t,r)},fi.prototype.M=function(){if(fi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Zg(t[r]);delete n.g[e],n.h--}}this.I=null},fi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},fi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Vi=Vt.JSON.stringify;function Of(){var n=FI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Kg,OI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new OF,n=>n.reset());class OF{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yg(n){Vt.setTimeout(()=>{throw n},0)}function E1(n,e){Kg||function(){var n=Vt.Promise.resolve(void 0);Kg=function(){n.then(WM)}}(),qy||(Kg(),qy=!0),FI.add(n,e)}var qy=!1,FI=new class{constructor(){this.h=this.g=null}add(e,t){const r=OI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function WM(){for(var n;n=Of();){try{n.h.call(n.g)}catch(t){Yg(t)}var e=OI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}qy=!1}function Ff(n,e){fi.call(this),this.h=n||1,this.g=e||Vt,this.j=Fi(this.kb,this),this.l=Date.now()}function Wy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Zy(n,e,t){if("function"==typeof n)t&&(n=Fi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function Qg(n){n.g=Zy(()=>{n.g=null,n.i&&(n.i=!1,Qg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Li(Ff,fi),(ut=Ff.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wi(this,"tick"),this.da&&(Wy(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){Ff.Z.M.call(this),Wy(this),delete this.g};class D1 extends oc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Qg(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zy(n){oc.call(this),this.h=n,this.g={}}Li(zy,oc);var T1=[];function LI(n,e,t,r){Array.isArray(t)||(t&&(T1[0]=t.toString()),t=T1);for(var i=0;i<t.length;i++){var a=PI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function I1(n){r1(n.g,function(e,t){this.g.hasOwnProperty(t)&&jy(e)},n),n.g={}}function Bd(){this.g=!0}function ac(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var d=1;d<i.length;d++)i[d]=""}}}return Vi(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}zy.prototype.M=function(){zy.Z.M.call(this),I1(this)},zy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bd.prototype.Aa=function(){this.g=!1},Bd.prototype.info=function(){};var Ud={},A1=null;function Jg(){return A1=A1||new fi}function N1(n){hi.call(this,Ud.Ma,n)}function Xg(n){const e=Jg();wi(e,new N1(e,n))}function x1(n,e){hi.call(this,Ud.STAT_EVENT,n),this.stat=e}function ts(n){const e=Jg();wi(e,new x1(e,n))}function BI(n,e){hi.call(this,Ud.Na,n),this.size=e}function em(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}Ud.Ma="serverreachability",Li(N1,hi),Ud.STAT_EVENT="statevent",Li(x1,hi),Ud.Na="timingevent",Li(BI,hi);var tm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},UI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yy(){}function R1(){}Yy.prototype.h=null;var O1,Lf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function k1(){hi.call(this,"d")}function P1(){hi.call(this,"c")}function nm(){}function Ky(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zy(this),this.P=FF,this.W=new Ff(n=By?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new YM}function YM(){this.i=null,this.g="",this.h=!1}Li(k1,hi),Li(P1,hi),Li(nm,Yy),nm.prototype.g=function(){return new XMLHttpRequest},nm.prototype.i=function(){return{}},O1=new nm;var FF=45e3,$I={},F1={};function jI(n,e,t){n.K=1,n.v=ev(Gl(e)),n.s=t,n.U=!0,KM(n,null)}function KM(n,e){n.F=Date.now(),Qy(n),n.A=Gl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),G1(t.h,"t",r),n.C=0,t=n.l.H,n.h=new YM,n.g=hR(n.l,t?e:null,!n.s),0<n.O&&(n.L=new D1(Fi(n.Ia,n,n.g),n.O)),LI(n.V,n.g,"readystatechange",n.gb),e=n.H?NI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Xg(1),function(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var d="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");d=2<=S.length&&"type"==S[1]?d+(D+"=")+w+"&":d+(D+"=redacted&")}}else d=null;else d=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function QM(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function JM(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=LF(n,t),i==F1){4==e&&(n.o=4,ts(14),r=!1),ac(n.j,n.m,null,"[Incomplete Response]");break}if(i==$I){n.o=4,ts(15),ac(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ac(n.j,n.m,i,null),HI(n,i)}QM(n)&&i!=F1&&i!=$I&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ts(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),J1(e),e.L=!0,ts(11))):(ac(n.j,n.m,t,"[Invalid Chunked Response]"),Vf(n),Jy(n))}function LF(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?F1:(t=Number(e.substring(t,r)),isNaN(t)?$I:(r+=1)+t>e.length?F1:(e=e.substr(r,t),n.C=r+t,e))}function Qy(n){n.Y=Date.now()+n.P,XM(n,n.P)}function XM(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=em(Fi(n.eb,n),e)}function L1(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Jy(n){0==n.l.G||n.I||X1(n.l,n)}function Vf(n){L1(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Wy(n.W),I1(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function HI(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||KI(t.i,n)))if(t.I=n.N,!n.J&&KI(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=em(Fi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;av(t),dm(t)}Q1(t),ts(18)}if(1>=YI(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else Gd(t,11)}else if((n.J||t.g==n)&&av(t),!kf(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const M=w[5];null!=M&&"number"==typeof M&&0<M&&(t.K=r=1.5*M,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const Y=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;!a.g&&(Xi(Y,"spdy")||Xi(Y,"quic")||Xi(Y,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(QI(a,a.h),a.h=null))}if(r.D){const ue=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,Nr(r.F,r.D,ue))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=aS(r,r.H?r.la:null,r.W),d.J){tv(r.i,d);var f=d,_=r.K;_&&f.setTimeout(_),f.B&&(L1(f),Qy(f)),r.g=d}else sS(r);0<t.l.length&&Bs(t)}else"stop"!=w[0]&&"close"!=w[0]||Gd(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Gd(t,7):sv(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}Xg(4)}catch(w){}}function V1(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ly(n)||"string"==typeof n)TI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ly(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ly(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Bf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Bf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function B1(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Uf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Uf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Uf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ut=Ky.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const e=this.L;e&&3==Wl(n)?e.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const D=Wl(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||By||this.g&&(this.h.h||this.g.ga()||z1(this.g)))){this.I||4!=D||7==e||Xg(8==e||0>=S?3:2),L1(this);var t=this.g.ba();this.N=t;t:if(QM(this)){var r=z1(this.g);n="";var i=r.length,a=4==Wl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vf(this),Jy(this);var d="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function(n,e,t,r,i,a,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+d})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kf(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,ts(12),Vf(this),Jy(this);break e}ac(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,HI(this,t)}this.U?(JM(this,D,d),By&&this.i&&3==D&&(LI(this.V,this.W,"tick",this.fb),this.W.start())):(ac(this.j,this.m,d,null),HI(this,d)),4==D&&Vf(this),this.i&&!this.I&&(4==D?X1(this.l,this):(this.i=!1,Qy(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ts(12)):(this.o=0,ts(13)),Vf(this),Jy(this)}}}catch(D){}},ut.fb=function(){if(this.g){var n=Wl(this.g),e=this.g.ga();this.C<e.length&&(L1(this),JM(this,n,e),this.i&&4!=n&&Qy(this))}},ut.cancel=function(){this.I=!0,Vf(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Xg(3),ts(17)),Vf(this),this.o=2,Jy(this)):XM(this,this.Y-n)},(ut=Bf.prototype).R=function(){B1(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ut.T=function(){return B1(this),this.g.concat()},ut.get=function(n,e){return Uf(this.h,n)?this.h[n]:e},ut.set=function(n,e){Uf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ut.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var eR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $d(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $d){this.g=void 0!==e?e:n.g,Xy(this,n.j),this.s=n.s,U1(this,n.i),$1(this,n.m),this.l=n.l,e=n.h;var t=new $f;t.i=e.i,e.g&&(t.g=new Bf(e.g),t.h=e.h),tR(this,t),this.o=n.o}else n&&(t=String(n).match(eR))?(this.g=!!e,Xy(this,t[1]||"",!0),this.s=jd(t[2]||""),U1(this,t[3]||"",!0),$1(this,t[4]),this.l=jd(t[5]||"",!0),tR(this,t[6]||"",!0),this.o=jd(t[7]||"")):(this.g=!!e,this.h=new $f(null,this.g))}function Gl(n){return new $d(n)}function Xy(n,e,t){n.j=t?jd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function U1(n,e,t){n.i=t?jd(e,!0):e}function $1(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function tR(n,e,t){e instanceof $f?(n.h=e,function(n,e){e&&!n.j&&(Hd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(H1(this,r),G1(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=il(e,WI)),n.h=new $f(e,n.g))}function Nr(n,e,t){n.h.set(e,t)}function ev(n){return Nr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function jd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function il(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,GI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function GI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$d.prototype.toString=function(){var n=[],e=this.j;e&&n.push(il(e,qI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(il(e,qI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(il(t,"/"==t.charAt(0)?j1:rR,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",il(t,ZI)),n.join("")};var qI=/[#\/\?@]/g,rR=/[#\?:]/g,j1=/[#\?]/g,WI=/[#\?@]/g,ZI=/#/g;function $f(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Hd(n){n.g||(n.g=new Bf,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function H1(n,e){Hd(n),e=im(n,e),Uf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Uf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&B1(n)))}function rm(n,e){return Hd(n),e=im(n,e),Uf(n.g.h,e)}function G1(n,e,t){H1(n,e),0<t.length&&(n.i=null,n.g.set(im(n,e),n1(t)),n.h+=t.length)}function im(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function zI(n){this.l=n||HF,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ea&&Vt.g.Ea()&&Vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=$f.prototype).add=function(n,e){Hd(this),this.i=null,n=im(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ut.forEach=function(n,e){Hd(this),this.g.forEach(function(t,r){TI(t,function(i){n.call(e,i,r,this)},this)},this)},ut.T=function(){Hd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},ut.R=function(n){Hd(this);var e=[];if("string"==typeof n)rm(this,n)&&(e=t1(e,this.g.get(im(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=t1(e,n[t])}return e},ut.set=function(n,e){return Hd(this),this.i=null,rm(this,n=im(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ut.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var d=i;""!==r[a]&&(d+="="+encodeURIComponent(String(r[a]))),n.push(d)}}return this.i=n.join("&")};var HF=10;function sm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YI(n){return n.h?1:n.g?n.g.size:0}function KI(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function QI(n,e){n.g?n.g.add(e):n.h=e}function tv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return n1(n.i)}function XI(){}function GF(){this.g=new XI}function iR(n,e,t){const r=t||"";try{V1(n,function(i,a){let d=i;Mf(i)&&(d=Vi(i)),e.push(r+a+"="+encodeURIComponent(d))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function om(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function am(n){this.l=n.$b||null,this.j=n.ib||!1}function q1(n,e){fi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=eS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zI.prototype.cancel=function(){if(this.i=JI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},XI.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},XI.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Li(am,Yy),am.prototype.g=function(){return new q1(this.l,this.j)},am.prototype.i=function(n){return function(){return n}}({}),Li(q1,fi);var eS=0;function tS(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ql(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lm(n)}function lm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=q1.prototype).open=function(n,e){if(this.readyState!=eS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,lm(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ql(this)),this.readyState=eS},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lm(this)),this.g&&(this.readyState=3,lm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tS(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ql(this):lm(this),3==this.readyState&&tS(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,ql(this))},ut.Ta=function(n){this.g&&(this.response=n,ql(this))},ut.ha=function(){this.g&&ql(this)},ut.setRequestHeader=function(n,e){this.v.append(n,e)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(q1.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sR=Vt.JSON.parse;function Jr(n){fi.call(this),this.headers=new Bf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nv,this.K=this.L=!1}Li(Jr,fi);var nv="",oR=/^https?$/i,io=["POST","PUT"];function W1(n){return"content-type"==n.toLowerCase()}function nS(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,rS(n),um(n)}function rS(n){n.D||(n.D=!0,wi(n,"complete"),wi(n,"error"))}function rv(n){if(n.h&&void 0!==ro&&(!n.C[1]||4!=Wl(n)||2!=n.ba()))if(n.v&&4==Wl(n))Zy(n.Fa,0,n);else if(wi(n,"readystatechange"),4==Wl(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(eR)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!oR.test(i?i.toLowerCase():"")}t=r}if(t)wi(n,"complete"),wi(n,"success");else{n.m=6;try{var d=2<Wl(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.ba()+"]",rS(n)}}finally{um(n)}}}function um(n,e){if(n.g){Z1(n);const t=n.g,r=n.C[0]?Fy:null;n.g=null,n.C=null,e||wi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Z1(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Wl(n){return n.g?n.g.readyState:0}function z1(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Y1(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return r1(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Nr(n,e,t))}function cm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function iv(n){this.za=0,this.l=[],this.h=new Bd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cm("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cm("baseRetryDelayMs",5e3,n),this.$a=cm("retryDelaySeedMs",1e4,n),this.Ya=cm("forwardChannelMaxRetries",2,n),this.ra=cm("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new zI(n&&n.concurrentRequestLimit),this.Ca=new GF,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sv(n){if(ov(n),3==n.G){var e=n.V++,t=Gl(n.F);Nr(t,"SID",n.J),Nr(t,"RID",e),Nr(t,"TYPE","terminate"),hm(n,t),(e=new Ky(n,n.h,e,void 0)).K=2,e.v=ev(Gl(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=hR(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Qy(e)}eC(n)}function dm(n){n.g&&(J1(n),n.g.cancel(),n.g=null)}function ov(n){dm(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),av(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function K1(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Bs(n)}function Bs(n){sm(n.i)||n.m||(n.m=!0,E1(n.Ha,n),n.C=0)}function uR(n,e){var t;t=e?e.m:n.V++;const r=Gl(n.F);Nr(r,"SID",n.J),Nr(r,"RID",t),Nr(r,"AID",n.U),hm(n,r),n.o&&n.s&&Y1(r,n.o,n.s),t=new Ky(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=cR(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),QI(n.i,t),jI(t,r,e)}function hm(n,e){n.j&&V1({},function(t,r){Nr(e,r,t)})}function cR(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Fi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const d=["count="+t];-1==a?0<t?(a=i[0].h,d.push("ofs="+a)):a=0:d.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{iR(D,d,"req"+w+"_")}catch(S){r&&r(D)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function sS(n){n.g||n.u||(n.Y=1,E1(n.Ga,n),n.A=0)}function Q1(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=em(Fi(n.Ga,n),oS(n,n.A)),n.A++,0))}function J1(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function dR(n){n.g=new Ky(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Gl(n.oa);Nr(e,"RID","rpc"),Nr(e,"SID",n.J),Nr(e,"CI",n.N?"0":"1"),Nr(e,"AID",n.U),hm(n,e),Nr(e,"TYPE","xmlhttp"),n.o&&n.s&&Y1(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ev(Gl(e)),t.s=null,t.U=!0,KM(t,n)}function av(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function X1(n,e){var t=null;if(n.g==e){av(n),J1(n),n.g=null;var r=2}else{if(!KI(n.i,e))return;t=e.D,tv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;wi(r=Jg(),new BI(r,t,e,i)),Bs(n)}else sS(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function(n,e){return!(YI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=em(Fi(n.Ha,n,e),oS(n,n.C)),n.C++,0)))}(n,e)||2==r&&Q1(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Gd(n,5);break;case 4:Gd(n,10);break;case 3:Gd(n,6);break;default:Gd(n,2)}}function oS(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Gd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Fi(n.jb,n);t||(t=new $d("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Xy(t,"https"),ev(t)),function(n,e){const t=new Bd;if(Vt.Image){const r=new Image;r.onload=Xw(om,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xw(om,t,r,"TestLoadImage: error",!1,e),r.onabort=Xw(om,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xw(om,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ts(2);n.G=0,n.j&&n.j.va(e),eC(n),ov(n)}function eC(n){n.G=0,n.I=-1,n.j&&((0!=JI(n.i).length||0!=n.l.length)&&(n.i.i.length=0,n1(n.l),n.l.length=0),n.j.ua())}function aS(n,e,t){let r=function(n){return n instanceof $d?Gl(n):new $d(n,void 0)}(t);if(""!=r.i)e&&U1(r,e+"."+r.i),$1(r,r.m);else{const i=Vt.location;r=function(n,e,t,r){var i=new $d(null,void 0);return n&&Xy(i,n),e&&U1(i,e),t&&$1(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&r1(n.aa,function(i,a){Nr(r,a,i)}),t=n.sa,(e=n.D)&&t&&Nr(r,e,t),Nr(r,"VER",n.ma),hm(n,r),r}function hR(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jr(t&&n.Ba&&!n.qa?new am({ib:!0}):n.qa)).L=n.H,e}function tC(){}function fm(){if(Vd&&!(10<=Number(rl)))throw Error("Environmental error: no available transport.")}function so(n,e){fi.call(this),this.g=new iv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!kf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sl(this)}function lS(n){k1.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function nC(){P1.call(this),this.status=1}function sl(n){this.g=n}(ut=Jr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():O1.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:O1),this.g.onreadystatechange=Fi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void nS(this,a)}n=t||"";const i=new Bf(this.headers);r&&V1(r,function(a,d){i.set(d,a)}),r=function(n){e:{var e=W1;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Vt.FormData&&n instanceof Vt.FormData,!(0<=e1(io,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,d){this.g.setRequestHeader(d,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Z1(this),0<this.B&&((this.K=function(n){return Vd&&qg()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.pa,this)):this.A=Zy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){nS(this,a)}},ut.pa=function(){void 0!==ro&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wi(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,wi(this,"complete"),wi(this,"abort"),um(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),um(this,!0)),Jr.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?rv(this):this.cb())},ut.cb=function(){rv(this)},ut.ba=function(){try{return 2<Wl(this)?this.g.status:-1}catch(n){return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ut.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sR(e)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=iv.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ky(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=NI(a),MI(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cR(this,i,e),Nr(t=Gl(this.F),"RID",n),Nr(t,"CVER",22),this.D&&Nr(t,"X-HTTP-Session-Id",this.D),hm(this,t),this.o&&a&&Y1(t,this.o,a),QI(this.i,i),this.Ra&&Nr(t,"TYPE","init"),this.ja?(Nr(t,"$req",e),Nr(t,"SID","null"),i.$=!0,jI(i,t,null)):jI(i,t,e),this.G=2}}else 3==this.G&&(n?uR(this,n):0==this.l.length||sm(this.i)||uR(this))},ut.Ga=function(){if(this.u=null,dR(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=em(Fi(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ts(10),dm(this),dR(this))},ut.ab=function(){null!=this.v&&(this.v=null,dm(this),Q1(this),ts(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ts(2)):(this.h.info("Failed to ping google.com"),ts(1))},(ut=tC.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},fm.prototype.g=function(n,e){return new so(n,e)},Li(so,fi),so.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),E1(Fi(n.hb,n,e))),ts(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=aS(n,null,n.W),Bs(n)},so.prototype.close=function(){sv(this.g)},so.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,K1(this.g,e)}else this.v?((e={}).__data__=Vi(n),K1(this.g,e)):K1(this.g,n)},so.prototype.M=function(){this.g.j=null,delete this.j,sv(this.g),delete this.g,so.Z.M.call(this)},Li(lS,k1),Li(nC,P1),Li(sl,tC),sl.prototype.xa=function(){wi(this.g,"a")},sl.prototype.wa=function(n){wi(this.g,new lS(n))},sl.prototype.va=function(n){wi(this.g,new nC(n))},sl.prototype.ua=function(){wi(this.g,"b")},fm.prototype.createWebChannel=fm.prototype.g,so.prototype.send=so.prototype.u,so.prototype.open=so.prototype.m,so.prototype.close=so.prototype.close,tm.NO_ERROR=0,tm.TIMEOUT=8,tm.HTTP_ERROR=6,UI.COMPLETE="complete",R1.EventType=Lf,Lf.OPEN="a",Lf.CLOSE="b",Lf.ERROR="c",Lf.MESSAGE="d",fi.prototype.listen=fi.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var rC=Cr.createWebChannelTransport=function(){return new fm},uS=Cr.getStatEventTarget=function(){return Jg()},iC=Cr.ErrorCode=tm,fR=Cr.EventType=UI,WF=Cr.Event=Ud,pR=Cr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ZF=Cr.FetchXmlHttpFactory=am,pm=Cr.WebChannel=R1,cS=Cr.XhrIo=Jr;const dS="@firebase/firestore";class Bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let jf="9.6.11";const lc=new da.Yd("@firebase/firestore");function lv(){return lc.logLevel}function je(n,...e){if(lc.logLevel<=da.in.DEBUG){const t=e.map(ei);lc.debug(`Firestore (${jf}): ${n}`,...t)}}function Xr(n,...e){if(lc.logLevel<=da.in.ERROR){const t=e.map(ei);lc.error(`Firestore (${jf}): ${n}`,...t)}}function qd(n,...e){if(lc.logLevel<=da.in.WARN){const t=e.map(ei);lc.warn(`Firestore (${jf}): ${n}`,...t)}}function ei(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${jf}) INTERNAL ASSERTION FAILED: `+n;throw Xr(e),new Error(e)}function Ot(n,e){n||ft()}function tt(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends F.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class sC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bi.UNAUTHENTICATED))}shutdown(){}}class fS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oC{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let d=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ci,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=d;e.enqueueRetryable((0,Ce.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ci)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot("string"==typeof r.accessToken),new sC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ot(null===e||"string"==typeof e),new Bi(e)}}class aC{constructor(e,t,r){this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class gR{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new aC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mR{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const d=a.token!==this.p;return this.p=a.token,je("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ot("string"==typeof t.token),this.p=t.token,new gm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Ei(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Us.A=-1;class _R{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Ei(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function Hf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function yR(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Er(0,0))}static max(){return new xt(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function vR(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function bR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mm{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),d=t.get(i);if(a<d)return-1;if(a>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cn extends mm{construct(e,t,r){return new Cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Cn(t)}static emptyPath(){return new Cn([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends mm{construct(e,t,r){return new Di(e,t,r)}static isValidIdentifier(e){return wR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Di(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Pe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(a(),i++)}if(a(),d)throw new Pe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(t)}static emptyPath(){return new Di([])}}class qf{constructor(e){this.fields=e,e.sort(Di.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const CR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(n){if(Ot(!!n),"string"==typeof n){let e=0;const t=CR.exec(n);if(Ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zr(n.seconds),nanos:Zr(n.nanos)}}function Zr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wf(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function lC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gS(n){const e=n.mapValue.fields.__previous_value__;return lC(e)?gS(e):e}function _m(n){const e=uc(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class ER{constructor(e,t,r,i,a,d,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class Zl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}function Ui(n){return null==n}function ym(n){return 0===n&&1/n==-1/0}function mS(n){return"number"==typeof n&&Number.isInteger(n)&&!ym(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Cn.fromString(e))}static fromName(e){return new ze(Cn.fromString(e).popFirst(5))}static empty(){return new ze(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Cn(e.slice()))}}const _S={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},DR={nullValue:"NULL_VALUE"};function Zd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lC(n)?4:TR(n)?9:10:ft()}function ol(n,e){if(n===e)return!0;const t=Zd(n);if(t!==Zd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _m(n).isEqual(_m(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=uc(r.timestampValue),d=uc(i.timestampValue);return a.seconds===d.seconds&&a.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Wf(n.bytesValue).isEqual(Wf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Zr(r.geoPointValue.latitude)===Zr(i.geoPointValue.latitude)&&Zr(r.geoPointValue.longitude)===Zr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Zr(r.integerValue)===Zr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Zr(r.doubleValue),d=Zr(i.doubleValue);return a===d?ym(a)===ym(d):isNaN(a)&&isNaN(d)}return!1}(n,e);case 9:return Hf(n.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:return function(r,i){const a=r.mapValue.fields||{},d=i.mapValue.fields||{};if(vR(a)!==vR(d))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===d[f]||!ol(a[f],d[f])))return!1;return!0}(n,e);default:return ft()}var i}function vm(n,e){return void 0!==(n.values||[]).find(t=>ol(t,e))}function Uo(n,e){if(n===e)return 0;const t=Zd(n),r=Zd(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const d=Zr(i.integerValue||i.doubleValue),f=Zr(a.integerValue||a.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,e);case 3:return uC(n.timestampValue,e.timestampValue);case 4:return uC(_m(n),_m(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,a){const d=Wf(i),f=Wf(a);return d.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const d=i.split("/"),f=a.split("/");for(let _=0;_<d.length&&_<f.length;_++){const w=Kt(d[_],f[_]);if(0!==w)return w}return Kt(d.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const d=Kt(Zr(i.latitude),Zr(a.latitude));return 0!==d?d:Kt(Zr(i.longitude),Zr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const d=i.values||[],f=a.values||[];for(let _=0;_<d.length&&_<f.length;++_){const w=Uo(d[_],f[_]);if(w)return w}return Kt(d.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const d=i.fields||{},f=Object.keys(d),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let D=0;D<f.length&&D<w.length;++D){const S=Kt(f[D],w[D]);if(0!==S)return S;const M=Uo(d[f[D]],_[w[D]]);if(0!==M)return M}return Kt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw ft()}}function uC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=uc(n),r=uc(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function bm(n){return cC(n)}function cC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=uc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wf(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const d of r.values||[])a?a=!1:i+=",",i+=cC(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",d=!0;for(const f of i)d?d=!1:a+=",",a+=`${f}:${cC(r.fields[f])}`;return a+"}"}(n.mapValue):ft();var e}function Zf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yS(n){return!!n&&"integerValue"in n}function uv(n){return!!n&&"arrayValue"in n}function cv(n){return!!n&&"nullValue"in n}function vS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dv(n){return!!n&&"mapValue"in n}function wm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Gf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=wm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=wm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function TR(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function IR(n){return"nullValue"in n?DR:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zf(Zl.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function SR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zf(Zl.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_S:ft()}function bS(n,e){return void 0===n?e:void 0===e||Uo(n,e)>0?n:e}function $o(n,e){return void 0===n?e:void 0===e||Uo(n,e)<0?n:e}class Cs{constructor(e){this.value=e}static empty(){return new Cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wm(t)}setAll(e){let t=Di.emptyPath(),r={},i=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}d?r[f.lastSegment()]=wm(d):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());dv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ol(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Cs(wm(this.value))}}function dC(n){const e=[];return Gf(n.fields,(t,r)=>{const i=new Di([t]);if(dv(r)){const a=dC(r.mapValue).fields;if(0===a.length)e.push(i);else for(const d of a)e.push(i.child(d))}else e.push(i)}),new qf(e)}class dr{constructor(e,t,r,i,a,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=d}static newInvalidDocument(e){return new dr(e,0,xt.min(),xt.min(),Cs.empty(),0)}static newFoundDocument(e,t,r){return new dr(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new dr(e,2,t,xt.min(),Cs.empty(),0)}static newUnknownDocument(e,t){return new dr(e,3,t,xt.min(),Cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function hv(n){return n.fields.find(e=>2===e.kind)}function cc(n){return n.fields.filter(e=>2!==e.kind)}Cm.UNKNOWN_ID=-1;class zf{constructor(e,t){this.fieldPath=e,this.kind=t}}class zd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zd(0,jo.min())}}function fv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(1e9===r?new Er(t+1,0):new Er(t,r));return new jo(i,ze.empty(),e)}function pv(n){return new jo(n.readTime,n.key,-1)}class jo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new jo(xt.min(),ze.empty(),-1)}static max(){return new jo(xt.max(),ze.empty(),-1)}}function wS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}class CS{constructor(e,t=null,r=[],i=[],a=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=d,this.endAt=f,this.P=null}}function ES(n,e=null,t=[],r=[],i=null,a=null,d=null){return new CS(n,e,t,r,i,a,d)}function Yd(n){const e=tt(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+bm(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ui(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>bm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>bm(r)).join(",")),e.P=t}return e.P}function Em(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!NR(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ol(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AS(n.startAt,e.startAt)&&AS(n.endAt,e.endAt)}function gv(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mv(n,e){return n.filters.filter(t=>t instanceof Fn&&t.field.isEqual(e))}function _v(n,e,t){let r,i=!0;for(const a of mv(n,e)){let d,f=!0;switch(a.op){case"<":case"<=":d=IR(a.value);break;case"==":case"in":case">=":d=a.value;break;case">":d=a.value,f=!1;break;case"!=":case"not-in":d=DR}bS(r,d)===d&&(r=d,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const d=t.position[a];bS(r,d)===d&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}function TS(n,e,t){let r,i=!0;for(const a of mv(n,e)){let d,f=!0;switch(a.op){case">=":case">":d=SR(a.value),f=!1;break;case"==":case"in":case"<=":d=a.value;break;case"<":d=a.value,f=!1;break;case"!=":case"not-in":d=_S}$o(r,d)===d&&(r=d,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const d=t.position[a];$o(r,d)===d&&(r=d,i=t.inclusive);break}return{value:r,inclusive:i}}class Fn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Dm(e,t,r):"array-contains"===t?new hC(e,r):"in"===t?new SS(e,r):"not-in"===t?new vv(e,r):"array-contains-any"===t?new AR(e,r):new Fn(e,t,r)}static V(e,t,r){return"in"===t?new yv(e,r):new IS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Uo(t,this.value)):null!==t&&Zd(this.value)===Zd(t)&&this.v(Uo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Dm extends Fn{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.v(t)}}class yv extends Fn{constructor(e,t){super(e,"in",t),this.keys=Tm(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class IS extends Fn{constructor(e,t){super(e,"not-in",t),this.keys=Tm(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tm(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class hC extends Fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uv(t)&&vm(t.arrayValue,this.value)}}class SS extends Fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vm(this.value.arrayValue,t)}}class vv extends Fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(vm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vm(this.value.arrayValue,t)}}class AR extends Fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vm(this.value.arrayValue,r))}}class dc{constructor(e,t){this.position=e,this.inclusive=t}}class Yf{constructor(e,t="asc"){this.field=e,this.dir=t}}function NR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function fC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],d=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(d.referenceValue),t.key):Uo(d,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function AS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ol(n.position[t],e.position[t]))return!1;return!0}class zl{constructor(e,t=null,r=[],i=[],a=null,d="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=d,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function NS(n,e,t,r,i,a,d,f){return new zl(n,e,t,r,i,a,d,f)}function oo(n){return new zl(n)}function hc(n){return!Ui(n.limit)&&"F"===n.limitType}function Kf(n){return!Ui(n.limit)&&"L"===n.limitType}function pC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gC(n){for(const e of n.filters)if(e.S())return e.field;return null}function mC(n){return null!==n.collectionGroup}function fc(n){const e=tt(n);if(null===e.D){e.D=[];const t=gC(e),r=pC(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Yf(t)),e.D.push(new Yf(Di.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Yf(Di.keyField(),a))}}}return e.D}function Ho(n){const e=tt(n);if(!e.C)if("F"===e.limitType)e.C=ES(e.path,e.collectionGroup,fc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of fc(e))t.push(new Yf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new dc(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new dc(e.startAt.position,!e.startAt.inclusive):null;e.C=ES(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function _C(n,e,t){return new zl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qf(n,e){return Em(Ho(n),Ho(e))&&n.limitType===e.limitType}function xS(n){return`${Yd(Ho(n))}|lt:${n.limitType}`}function yC(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${bm(r.value)}`;var r}).join(", ")}]`),Ui(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>bm(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>bm(t)).join(",")),`Target(${e})`}(Ho(n))}; limitType=${n.limitType})`}function vC(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,d){const f=fC(i,a,d);return i.inclusive?f<=0:f<0}(t.startAt,fc(t),r)||t.endAt&&!function(i,a,d){const f=fC(i,a,d);return i.inclusive?f>=0:f>0}(t.endAt,fc(t),r)));var t,r}function al(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jf(n){return(e,t)=>{let r=!1;for(const i of fc(n)){const a=Xf(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Xf(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,d){const f=a.data.field(i),_=d.data.field(i);return null!==f&&null!==_?Uo(f,_):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function Im(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ym(e)?"-0":e}}function Kd(n){return{integerValue:""+n}}function MS(n,e){return mS(e)?Kd(e):Im(n,e)}class bv{constructor(){this._=void 0}}function xR(n,e,t){return n instanceof Qd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof pc?wv(n,e):n instanceof Jd?kS(n,e):function(r,i){const a=bC(r,i),d=gc(a)+gc(r.k);return yS(a)&&yS(r.k)?Kd(d):Im(r.M,d)}(n,e)}function RS(n,e,t){return n instanceof pc?wv(n,e):n instanceof Jd?kS(n,e):t}function bC(n,e){return n instanceof Xd?yS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Qd extends bv{}class pc extends bv{constructor(e){super(),this.elements=e}}function wv(n,e){const t=Cv(e);for(const r of n.elements)t.some(i=>ol(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jd extends bv{constructor(e){super(),this.elements=e}}function kS(n,e){let t=Cv(e);for(const r of n.elements)t=t.filter(i=>!ol(i,r));return{arrayValue:{values:t}}}class Xd extends bv{constructor(e,t){super(),this.M=e,this.k=t}}function gc(n){return Zr(n.integerValue||n.doubleValue)}function Cv(n){return uv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Sm{constructor(e,t){this.field=e,this.transform=t}}class KF{constructor(e,t){this.version=e,this.transformResults=t}}class gi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gi}static exists(e){return new gi(void 0,e)}static updateTime(e){return new gi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class CC{}function RR(n,e,t){n instanceof Ev?function(r,i,a){const d=r.value.clone(),f=FR(r.fieldTransforms,i,a.transformResults);d.setAll(f),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):n instanceof eh?function(r,i,a){if(!wC(r.precondition,i))return void i.convertToUnknownDocument(a.version);const d=FR(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(OR(r)),f.setAll(d),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function EC(n,e,t){var i;n instanceof Ev?function(r,i,a){if(!wC(r.precondition,i))return;const d=r.value.clone(),f=LR(r.fieldTransforms,a,i);d.setAll(f),i.convertToFoundDocument(PR(i),d).setHasLocalMutations()}(n,e,t):n instanceof eh?function(r,i,a){if(!wC(r.precondition,i))return;const d=LR(r.fieldTransforms,a,i),f=i.data;f.setAll(OR(r)),f.setAll(d),i.convertToFoundDocument(PR(i),f).setHasLocalMutations()}(n,e,t):wC(n.precondition,i=e)&&i.convertToNoDocument(xt.min())}function QF(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=bC(r.transform,i||null);null!=a&&(null==t&&(t=Cs.empty()),t.set(r.field,a))}return t||null}function kR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Hf(t,r,(i,a)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof pc&&r instanceof pc||t instanceof Jd&&r instanceof Jd?Hf(t.elements,r.elements,ol):t instanceof Xd&&r instanceof Xd?ol(t.k,r.k):t instanceof Qd&&r instanceof Qd);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function PR(n){return n.isFoundDocument()?n.version:xt.min()}class Ev extends CC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class eh extends CC{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function OR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function FR(n,e,t){const r=new Map;Ot(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],d=a.transform,f=e.data.field(a.field);r.set(a.field,RS(d,f,t[i]))}return r}function LR(n,e,t){const r=new Map;for(const i of n){const a=i.transform,d=t.data.field(i.field);r.set(i.field,xR(a,d,e))}return r}class Dv extends CC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class s extends CC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class o{constructor(e){this.count=e}}var l,c;function h(n){switch(n){default:return ft();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function p(n){if(void 0===n)return Xr("GRPC error has no .code"),me.UNKNOWN;switch(n){case l.OK:return me.OK;case l.CANCELLED:return me.CANCELLED;case l.UNKNOWN:return me.UNKNOWN;case l.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case l.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case l.INTERNAL:return me.INTERNAL;case l.UNAVAILABLE:return me.UNAVAILABLE;case l.UNAUTHENTICATED:return me.UNAUTHENTICATED;case l.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case l.NOT_FOUND:return me.NOT_FOUND;case l.ALREADY_EXISTS:return me.ALREADY_EXISTS;case l.PERMISSION_DENIED:return me.PERMISSION_DENIED;case l.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case l.ABORTED:return me.ABORTED;case l.OUT_OF_RANGE:return me.OUT_OF_RANGE;case l.UNIMPLEMENTED:return me.UNIMPLEMENTED;case l.DATA_LOSS:return me.DATA_LOSS;default:return ft()}}(c=l||(l={}))[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS";class m{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return bR(this.inner)}size(){return this.innerSize}}class v{constructor(e,t){this.comparator=e,this.root=t||T.EMPTY}insert(e,t){return new v(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,T.BLACK,null,null))}remove(e){return new v(this.comparator,this.root.remove(e,this.comparator).copy(null,null,T.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new C(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new C(this.root,e,this.comparator,!1)}getReverseIterator(){return new C(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new C(this.root,e,this.comparator,!0)}}class C{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class T{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:T.RED,this.left=null!=i?i:T.EMPTY,this.right=null!=a?a:T.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new T(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return T.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return T.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,T.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,T.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}T.EMPTY=null,T.RED=!0,T.BLACK=!1,T.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new T(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class N{constructor(e){this.comparator=e,this.data=new v(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P(this.data.getIterator())}getIteratorFrom(e){return new P(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof N)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new N(this.comparator);return t.data=e,t}}class P{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function L(n){return n.hasNext()?n.getNext():void 0}const K=new v(ze.comparator);function X(){return K}const ge=new v(ze.comparator);function le(){return ge}function Fe(){return new m(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ie=new v(ze.comparator),vt=new N(ze.comparator);function Qe(...n){let e=vt;for(const t of n)e=e.add(t);return e}const fn=new N(Kt);function Br(){return fn}class ns{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,t)),new ns(xt.min(),r,Br(),X(),Qe())}}class Yl{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Yl(pi.EMPTY_BYTE_STRING,t,Qe(),Qe(),Qe())}}class Kl{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class th{constructor(e,t){this.targetId=e,this.$=t}}class nh{constructor(e,t,r=pi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Tv{constructor(){this.B=0,this.L=Sv(),this.U=pi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Qe(),t=Qe(),r=Qe();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new Yl(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Sv()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class DC{constructor(e){this.nt=e,this.st=new Map,this.it=X(),this.rt=Iv(),this.ot=new N(Kt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(gv(a))if(0===r){const d=new ze(a.path);this.ct(t,d,dr.newNoDocument(d,xt.min()))}else Ot(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,d)=>{const f=this.wt(d);if(f){if(a.current&&gv(f.target)){const _=new ze(f.target.path);null!==this.it.get(_)||this.It(d,_)||this.ct(d,_,dr.newNoDocument(_,e))}a.j&&(t.set(d,a.H()),a.J())}});let r=Qe();this.rt.forEach((a,d)=>{let f=!0;d.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.it.forEach((a,d)=>d.setReadTime(e));const i=new ns(e,t,this.ot,this.it,r);return this.it=X(),this.rt=Iv(),this.ot=new N(Kt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Tv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new N(Kt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Tv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Iv(){return new v(ze.comparator)}function Sv(){return new v(ze.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},w3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class C3{constructor(e,t){this.databaseId=e,this.N=t}}function IC(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JF(n,e){return n.N?e.toBase64():e.toUint8Array()}function E3(n,e){return IC(n,e.toTimestamp())}function rs(n){return Ot(!!n),xt.fromTimestamp(function(e){const t=uc(e);return new Er(t.seconds,t.nanos)}(n))}function VR(n,e){return(t=n,new Cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function XF(n){const e=Cn.fromString(n);return Ot(lL(e)),e}function SC(n,e){return VR(n.databaseId,e.path)}function mc(n,e){const t=XF(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(tL(t))}function BR(n,e){return VR(n.databaseId,e)}function eL(n){const e=XF(n);return 4===e.length?Cn.emptyPath():tL(e)}function AC(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tL(n){return Ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function nL(n,e,t){return{name:SC(n,e),fields:t.value.mapValue.fields}}function rL(n,e,t){const r=mc(n,e.name),i=rs(e.updateTime),a=new Cs({mapValue:{fields:e.fields}}),d=dr.newFoundDocument(r,i,a);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function NC(n,e){let t;if(e instanceof Ev)t={update:nL(n,e.key,e.value)};else if(e instanceof Dv)t={delete:SC(n,e.key)};else if(e instanceof eh)t={update:nL(n,e.key,e.data),updateMask:R3(e.fieldMask)};else{if(!(e instanceof s))return ft();t={verify:SC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const d=a.transform;if(d instanceof Qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof pc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Jd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Xd)return{fieldPath:a.field.canonicalString(),increment:d.k};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:E3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function UR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?gi.updateTime(rs(i.updateTime)):void 0!==i.exists?gi.exists(i.exists):gi.none():gi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,d){let f=null;"setToServerValue"in d?(Ot("REQUEST_TIME"===d.setToServerValue),f=new Qd):"appendMissingElements"in d?f=new pc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new Jd(d.removeAllFromArray.values||[]):"increment"in d?f=new Xd(a,d.increment):ft();const _=Di.fromServerFormat(d.fieldPath);return new Sm(_,f)}(n,i)):[];var i;if(e.update){const i=mc(n,e.update.name),a=new Cs({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new qf((e.updateMask.fieldPaths||[]).map(w=>Di.fromServerFormat(w)));return new eh(i,a,d,t,r)}return new Ev(i,a,t,r)}if(e.delete){const i=mc(n,e.delete);return new Dv(i,t)}if(e.verify){const i=mc(n,e.verify);return new s(i,t)}return ft()}function iL(n,e){return{documents:[BR(n,e.path)]}}function sL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=BR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=BR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(D=>function(S){if("=="===S.op){if(vS(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NAN"}};if(cv(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(vS(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NOT_NAN"}};if(cv(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Av(S.field),op:N3(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Av((D=w).field),direction:A3(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const d=(w=e.limit,n.N||Ui(w)?w:{value:w});var w,f,_;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function oL(n){let e=eL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ot(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=aL(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(D=>{return new Yf(Nv((S=D).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(D){let S;return S="object"==typeof D?D.value:D,Ui(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new dc((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new dc(D.values||[],!D.before)}(t.endAt)),NS(e,i,d,a,f,"F",_,w)}function aL(n){return n?void 0!==n.unaryFilter?[M3(n)]:void 0!==n.fieldFilter?[x3(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>aL(e)).reduce((e,t)=>e.concat(t)):ft():[]}function A3(n){return TC[n]}function N3(n){return w3[n]}function Av(n){return{fieldPath:n.canonicalString()}}function Nv(n){return Di.fromServerFormat(n.fieldPath)}function x3(n){return Fn.create(Nv(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function M3(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Nv(n.unaryFilter.field);return Fn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Nv(n.unaryFilter.field);return Fn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nv(n.unaryFilter.field);return Fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nv(n.unaryFilter.field);return Fn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function R3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function lL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ao(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=uL(e)),e=k3(n.get(t),e);return uL(e)}function k3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function uL(n){return n+"\x01\x01"}function _c(n){const e=n.length;if(Ot(e>=2),2===e)return Ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const d=n.indexOf("\x01",a);switch((d<0||d>t)&&ft(),n.charAt(d+1)){case"\x01":const f=n.substring(a,d);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,d),i+="\0";break;case"\x11":i+=n.substring(a,d+1);break;default:ft()}a=d+2}return new Cn(r)}const cL=["userId","batchId"];function PS(n,e){return[n,ao(e)]}function dL(n,e,t){return[n,ao(e),t]}const P3={},O3=["prefixPath","collectionGroup","readTime","documentId"],F3=["prefixPath","collectionGroup","documentId"],L3=["collectionGroup","readTime","prefixPath","documentId"],V3=["canonicalId","targetId"],B3=["targetId","path"],U3=["path","targetId"],$3=["collectionId","parent"],j3=["indexId","uid"],H3=["uid","sequenceNumber"],G3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],q3=["indexId","uid","orderedDocumentKey"],W3=["userId","collectionPath","documentId"],Z3=["userId","collectionPath","largestBatchId"],z3=["userId","collectionGroup","largestBatchId"],hL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y3=[...hL,"documentOverlays"],fL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],K3=[...fL,"indexConfiguration","indexState","indexEntries"],pL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,r)=>{t(e)})}static reject(e){return new ve((t,r)=>{r(e)})}static waitFor(e){return new ve((t,r)=>{let i=0,a=0,d=!1;e.forEach(f=>{++i,f.next(()=>{++a,d&&a===i&&t()},_=>r(_))}),d=!0,a===i&&t()})}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next(i=>i?ve.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class OS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ci,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new xC(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=$R(r.target.error);this.At.reject(new xC(e,i))}}static open(e,t,r,i){try{return new OS(t,e.transaction(i,r))}catch(a){throw new xC(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new J3(t)}}class Ql{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Ql.Vt((0,F.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),Nm(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(Ql.St())return!0;const e=(0,F.z$)(),t=Ql.Vt(e),r=0<t&&t<10,i=Ql.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=d=>{r(d.target.result)},a.onblocked=()=>{i(new xC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Pe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Pe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new xC(e,f))},a.onupgradeneeded=d=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,a.transaction,d.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ce.Z)(function*(){const d="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.Nt(e);const _=OS.open(a.db,e,d?"readonly":"readwrite",r),w=i(_).next(D=>(_.Pt(),D)).catch(D=>(_.abort(D),ve.reject(D))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&f<3;if(je("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Q3{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Nm(this.Ft.delete())}}class xC extends Pe{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Am(n){return"IndexedDbTransactionError"===n.name}class J3{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Nm(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),Nm(this.store.add(e))}get(e){return Nm(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),Nm(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),Nm(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(d,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ve((a,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ve((i,a)=>{r.onerror=d=>{a(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,d,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new ve((r,i)=>{t.onerror=a=>{const d=$R(a.target.error);i(d)},t.onsuccess=a=>{const d=a.target.result;d?e(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new ve((i,a)=>{e.onerror=d=>{a(d.target.error)},e.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const _=new Q3(f),w=t(f.primaryKey,f.value,_);if(w instanceof ve){const D=w.catch(S=>(_.done(),ve.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Nm(n){return new ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=$R(r.target.error);t(i)}})}let mL=!1;function $R(n){const e=Ql.Vt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mL||(mL=!0,setTimeout(()=>{throw r},0)),r}}return n}class _L extends gL{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function is(n,e){const t=tt(n);return Ql.xt(t.Ht,e)}class jR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&RR(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&EC(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&EC(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qe())}isEqual(e){return this.batchId===e.batchId&&Hf(this.mutations,e.mutations,(t,r)=>kR(t,r))&&Hf(this.baseMutations,e.baseMutations,(t,r)=>kR(t,r))}}class HR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ot(e.mutations.length===r.length);let i=Ie;const a=e.mutations;for(let d=0;d<a.length;d++)i=i.insert(a[d].key,r[d].version);return new HR(e,t,r,i)}}class GR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ep{constructor(e,t,r,i,a=xt.min(),d=xt.min(),f=pi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(e){return new ep(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yL{constructor(e){this.Jt=e}}function vL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:SC(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:IC(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xm(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:xm(e.version)}}var i,a;return r}function FS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mm(n){const e=new Er(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function xv(n,e){const t=(e.baseMutations||[]).map(a=>UR(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const d=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(d.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>UR(n.Jt,a)),i=Er.fromMillis(e.localWriteTimeMs);return new jR(e.batchId,i,t,r)}function MC(n){const e=Mm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Mm(n.lastLimboFreeSnapshotVersion):xt.min();let r;var i;return void 0!==n.query.documents?(Ot(1===(i=n.query).documents.length),r=Ho(oo(eL(i.documents[0])))):r=Ho(oL(n.query)),new ep(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pi.fromBase64String(n.resumeToken))}function bL(n,e){const t=xm(e.snapshotVersion),r=xm(e.lastLimboFreeSnapshotVersion);let i;i=gv(e.target)?iL(n.Jt,e.target):sL(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yd(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function qR(n){const e=oL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?_C(e,e.limit,"L"):e}function WR(n,e){return new GR(e.largestBatchId,UR(n.Jt,e.overlayMutation))}function wL(n,e){const t=e.path.lastSegment();return[n,ao(e.path.popLast()),t]}class e${getBundleMetadata(e,t){return CL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Mm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return CL(e).put({bundleId:(r=t).id,createTime:xm(rs(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return EL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:qR(i.bundledQuery),readTime:Mm(i.readTime)};var i})}saveNamedQuery(e,t){return EL(e).put({name:(r=t).name,readTime:xm(rs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function CL(n){return is(n,"bundles")}function EL(n){return is(n,"namedQueries")}class ZR{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new ZR(e,t.uid||"")}getOverlay(e,t){return RC(e).get(wL(this.userId,t)).next(r=>r?WR(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,d)=>{const f=new GR(t,d);i.push(this.Xt(e,f))}),ve.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(d=>i.add(ao(d.getCollectionPath())));const a=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);a.push(RC(e).Qt("collectionPathOverlayIndex",f))}),ve.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Fe(),a=ao(t),d=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return RC(e).qt("collectionPathOverlayIndex",d).next(f=>{for(const _ of f){const w=WR(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Fe();let d;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return RC(e).Wt({index:"collectionGroupOverlayIndex",range:f},(_,w,D)=>{const S=WR(this.M,w);a.size()<i||S.largestBatchId===d?(a.set(S.getKey(),S),d=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return RC(e).put(function(r,i,a){const[d,f,_]=wL(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:NC(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function RC(n){return is(n,"documentOverlays")}class Rm{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Zr(e.integerValue));else if("doubleValue"in e){const r=Zr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),ym(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Wf(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?TR(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ft()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function t$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function DL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=t$(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Rm.fe=new Rm;class n${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=DL(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=DL(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class r${constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class i${constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class kC{constructor(){this.De=new n$,this.Ce=new r$(this.De),this.xe=new i$(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class tp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new tp(this.indexId,this.documentKey,this.arrayValue,r)}}function km(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=TL(n.arrayValue,e.arrayValue),0!==t?t:(t=TL(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function TL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class s${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=hv(e);if(void 0!==t&&!this.Be(t))return!1;const r=cc(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[a++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class o${constructor(){this.qe=new zR}addToCollectionParentIndex(e,t){return this.qe.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getFieldIndex(e,t){return ve.resolve(null)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class zR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new N(Cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new N(Cn.comparator)).toArray()}}const Mv=new Uint8Array(0);class a${constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new zR,this.Ge=new m(r=>Yd(r),(r,i)=>Em(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:ao(i)};return IL(e).put(a)}return ve.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[yR(t),""],!1,!0);return IL(e).qt(i).next(a=>{for(const d of a){if(d.collectionId!==t)break;r.push(_c(d.parent))}return r})}addFieldIndex(e,t){const r=LS(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=LS(e),i=VS(e),a=PC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=PC(e);let i=!0;const a=new Map;return ve.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(f=>{i&&(i=!!f),a.set(d,f)})).next(()=>{if(i){let d=Qe();const f=[];return ve.forEach(a,(_,w)=>{var D;je("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${Yd(t)}`);const S=function(it,at){const Ft=hv(at);if(void 0===Ft)return null;for(const ln of mv(it,Ft.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(w,_),M=function(it,at){const Ft=new Map;for(const ln of cc(at))for(const Yr of mv(it,ln.fieldPath))switch(Yr.op){case"==":case"in":Ft.set(ln.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return Ft.set(ln.fieldPath.canonicalString(),Yr.value),Array.from(Ft.values())}return null}(w,_),V=function(it,at){const Ft=[];let ln=!0;for(const Yr of cc(at)){const ii=0===Yr.kind?_v(it,Yr.fieldPath,it.startAt):TS(it,Yr.fieldPath,it.startAt);if(!ii.value)return null;Ft.push(ii.value),ln&&(ln=ii.inclusive)}return new dc(Ft,ln)}(w,_),Y=function(it,at){const Ft=[];let ln=!0;for(const Yr of cc(at)){const ii=0===Yr.kind?TS(it,Yr.fieldPath,it.endAt):_v(it,Yr.fieldPath,it.endAt);if(!ii.value)return null;Ft.push(ii.value),ln&&(ln=ii.inclusive)}return new dc(Ft,ln)}(w,_),ue=this.je(_,w,V),De=this.je(_,w,Y),rt=this.We(_,w,M),Je=this.ze(_.indexId,S,ue,!!V&&V.inclusive,De,!!Y&&Y.inclusive,rt);return ve.forEach(Je,it=>r.Gt(it,t.limit).next(at=>{at.forEach(Ft=>{const ln=ze.fromSegments(Ft.documentKey);d.has(ln)||(d=d.add(ln),f.push(ln))})}))}).next(()=>f)}return ve.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,a,d,f){const _=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),w=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const M=t?this.He(t[S/w]):Mv,V=r?this.Je(e,M,r[S%w],i):this.Ye(e),Y=a?this.Xe(e,M,a[S%w],d):this.Ye(e+1);D.push(...this.createRange(V,Y,f.map(ue=>this.Je(e,M,ue,!0))))}return D}Je(e,t,r,i){const a=new tp(e,ze.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new tp(e,ze.empty(),t,r);return i?a.ke():a}Ye(e){return new tp(e,ze.empty(),Mv,Mv)}getFieldIndex(e,t){const r=new s$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const d=a.filter(f=>r.$e(f));return d.sort((f,_)=>_.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new kC;for(const i of cc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const d=r.Ne(i.kind);Rm.fe.Zt(a,d)}return r.Se()}He(e){const t=new kC;return Rm.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new kC;return Rm.fe.Zt(Zf(this.databaseId,t),r.Ne(function(i){const a=cc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new kC);let a=0;for(const d of cc(e)){const f=r[a++];for(const _ of i)if(this.en(t,d.fieldPath)&&uv(f))i=this.nn(i,d,f);else{const w=_.Ne(d.kind);Rm.fe.Zt(f,w)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const d of r.arrayValue.values||[])for(const f of i){const _=new kC;_.seed(f.Se()),Rm.fe.Zt(d,_.Ne(t.kind)),a.push(_)}return a}en(e,t){return!!e.filters.find(r=>r instanceof Fn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=LS(e),i=VS(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const d=[];return ve.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{d.push(function(w,D){const S=D?new zd(D.sequenceNumber,new jo(Mm(D.readTime),new ze(_c(D.documentKey)),D.largestBatchId)):zd.empty(),M=w.fields.map(([V,Y])=>new zf(Di.fromServerFormat(V),Y));return new Cm(w.indexId,w.collectionGroup,M,S)}(f,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=LS(e),a=VS(e);return this.rn(e).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ve.forEach(f,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:xm((M=r).readTime),documentKey:ao(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(e,t){const r=new Map;return ve.forEach(t,(i,a)=>{const d=r.get(i.collectionGroup);return(d?ve.resolve(d):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ve.forEach(f,_=>this.on(e,i,_).next(w=>{const D=this.un(a,_);return w.isEqual(D)?ve.resolve():this.an(e,a,_,w,D)}))))})}cn(e,t,r,i){return PC(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return PC(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=PC(e);let a=new N(km);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,f)=>{a=a.add(new tp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}un(e,t){let r=new N(km);const i=this.Ze(t,e);if(null==i)return r;const a=hv(t);if(null!=a){const d=e.data.field(a.fieldPath);if(uv(d))for(const f of d.arrayValue.values||[])r=r.add(new tp(t.indexId,e.key,this.He(f),i))}else r=r.add(new tp(t.indexId,e.key,Mv,i));return r}an(e,t,r,i,a){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(f,_,w,D,S){const M=f.getIterator(),V=_.getIterator();let Y=L(M),ue=L(V);for(;Y||ue;){let De=!1,rt=!1;if(Y&&ue){const Je=w(Y,ue);Je<0?rt=!0:Je>0&&(De=!0)}else null!=Y?rt=!0:De=!0;De?(D(ue),ue=L(V)):rt?(S(Y),Y=L(M)):(Y=L(M),ue=L(V))}}(i,a,km,f=>{d.push(this.cn(e,t,r,f))},f=>{d.push(this.hn(e,t,r,f))}),ve.waitFor(d)}rn(e){let t=1;return VS(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,f)=>km(d,f)).filter((d,f,_)=>!f||0!==km(d,_[f-1]));const i=[];i.push(e);for(const d of r){const f=km(d,e),_=km(d,t);if(0===f)i[0]=e.ke();else if(f>0&&_<0)i.push(d),i.push(d.ke());else if(_>0)break}i.push(t);const a=[];for(let d=0;d<i.length;d+=2)a.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Mv,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Mv,[]]));return a}}function IL(n){return is(n,"collectionParents")}function PC(n){return is(n,"indexEntries")}function LS(n){return is(n,"indexConfiguration")}function VS(n){return is(n,"indexState")}const SL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Go{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Go(e,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function AL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],d=IDBKeyRange.only(t.batchId);let f=0;const _=r.Wt({range:d},(D,S,M)=>(f++,M.delete()));a.push(_.next(()=>{Ot(1===f)}));const w=[];for(const D of t.mutations){const S=dL(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return ve.waitFor(a).next(()=>w)}function BS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}Go.DEFAULT_COLLECTION_PERCENTILE=10,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Go.DEFAULT=new Go(41943040,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Go.DISABLED=new Go(-1,0,0);class YR{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Ot(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new YR(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return np(e).Wt({index:"userMutationsIndex",range:r},(i,a,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Rv(e),d=np(e);return d.add({}).next(f=>{Ot("number"==typeof f);const _=new jR(f,t,r,i),w=function(M,V,Y){const ue=Y.baseMutations.map(rt=>NC(M.Jt,rt)),De=Y.mutations.map(rt=>NC(M.Jt,rt));return{userId:V,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ue,mutations:De}}(this.M,this.userId,_),D=[];let S=new N((M,V)=>Kt(M.canonicalString(),V.canonicalString()));for(const M of i){const V=dL(this.userId,M.key.path,f);S=S.add(M.key.path.popLast()),D.push(d.put(w)),D.push(a.put(V,P3))}return S.forEach(M=>{D.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),ve.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return np(e).get(t).next(r=>r?(Ot(r.userId===this.userId),xv(this.M,r)):null)}fn(e,t){return this.ln[t]?ve.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return np(e).Wt({index:"userMutationsIndex",range:i},(d,f,_)=>{f.userId===this.userId&&(Ot(f.batchId>=r),a=xv(this.M,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return np(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,d)=>{r=a.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return np(e).qt("userMutationsIndex",t).next(r=>r.map(i=>xv(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=PS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Rv(e).Wt({range:i},(d,f,_)=>{const[w,D,S]=d,M=_c(D);if(w===this.userId&&t.path.isEqual(M))return np(e).get(S).next(V=>{if(!V)throw ft();Ot(V.userId===this.userId),a.push(xv(this.M,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new N(Kt);const i=[];return t.forEach(a=>{const d=PS(this.userId,a.path),f=IDBKeyRange.lowerBound(d),_=Rv(e).Wt({range:f},(w,D,S)=>{const[M,V,Y]=w,ue=_c(V);M===this.userId&&a.path.isEqual(ue)?r=r.add(Y):S.done()});i.push(_)}),ve.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=PS(this.userId,r),d=IDBKeyRange.lowerBound(a);let f=new N(Kt);return Rv(e).Wt({range:d},(_,w,D)=>{const[S,M,V]=_,Y=_c(M);S===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(f=f.add(V)):D.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(np(e).get(a).next(d=>{if(null===d)throw ft();Ot(d.userId===this.userId),r.push(xv(this.M,d))}))}),ve.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return AL(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ve.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Rv(e).Wt({range:r},(a,d,f)=>{if(a[0]===this.userId){const _=_c(a[1]);i.push(_)}else f.done()}).next(()=>{Ot(0===i.length)})})}containsKey(e,t){return NL(e,this.userId,t)}wn(e){return xL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function NL(n,e,t){const r=PS(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let d=!1;return Rv(n).Wt({range:a,jt:!0},(f,_,w)=>{const[D,S,M]=f;D===e&&S===i&&(d=!0),w.done()}).next(()=>d)}function np(n){return is(n,"mutations")}function Rv(n){return is(n,"documentMutations")}function xL(n){return is(n,"mutationQueues")}class Pm{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Pm(0)}static yn(){return new Pm(-1)}}class l${constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Pm(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>xt.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>kv(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Ot(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return kv(e).Wt((d,f)=>{const _=MC(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ve.waitFor(a)).next(()=>i)}forEachTarget(e,t){return kv(e).Wt((r,i)=>{const a=MC(i);t(a)})}pn(e){return ML(e).get("targetGlobalKey").next(t=>(Ot(null!==t),t))}In(e,t){return ML(e).put("targetGlobalKey",t)}Tn(e,t){return kv(e).put(bL(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return kv(e).Wt({range:i,index:"queryTargetsIndex"},(d,f,_)=>{const w=MC(f);Em(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=rp(e);return t.forEach(d=>{const f=ao(d.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,d))}),ve.waitFor(i)}removeMatchingKeys(e,t,r){const i=rp(e);return ve.forEach(t,a=>{const d=ao(a.path);return ve.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=rp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=rp(e);let a=Qe();return i.Wt({range:r,jt:!0},(d,f,_)=>{const w=_c(d[1]),D=new ze(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=ao(t.path),i=IDBKeyRange.bound([r],[yR(r)],!1,!0);let a=0;return rp(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],_,w)=>{0!==d&&(a++,w.done())}).next(()=>a>0)}Et(e,t){return kv(e).get(t).next(r=>r?MC(r):null)}}function kv(n){return is(n,"targets")}function ML(n){return is(n,"targetGlobal")}function rp(n){return is(n,"targetDocuments")}function Om(n){return KR.apply(this,arguments)}function KR(){return(KR=(0,Ce.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==pL)throw n;je("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function RL([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class u${constructor(e){this.An=e,this.buffer=new N(RL),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();RL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class c${constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ce.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Am(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Om(i)}yield t.Sn(e)}))}}class d${constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(Us.A);const r=new u$(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(SL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SL):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,d,f,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,d=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),lv()<=da.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-D}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class h${constructor(e,t){this.db=e,this.garbageCollector=new d$(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return US(e,r)}removeReference(e,t,r){return US(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return US(e,t)}On(e,t){return function(r,i){let a=!1;return xL(r).zt(d=>NL(r,d,i).next(f=>(f&&(a=!0),ve.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(d,f)=>{if(f<=t){const _=this.On(e,d).next(w=>{if(!w)return a++,r.getEntry(e,d).next(()=>(r.removeEntry(d,xt.min()),rp(e).delete([0,ao(d.path)])))});i.push(_)}}).next(()=>ve.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return US(e,t)}Mn(e,t){const r=rp(e);let i,a=Us.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:_,sequenceNumber:w})=>{0===d?(a!==Us.A&&t(new ze(_c(i)),a),a=w,i=_):a=Us.A}).next(()=>{a!==Us.A&&t(new ze(_c(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function US(n,e){return rp(n).put((r=n.currentSequenceNumber,{targetId:0,path:ao(e.path),sequenceNumber:r}));var r}class kL{constructor(){this.changes=new m(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class f${constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Fm(e).put(r)}removeEntry(e,t,r){return Fm(e).delete(function(i,a){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],FS(a),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=dr.newInvalidDocument(t);return Fm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(OC(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:dr.newInvalidDocument(t)};return Fm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(OC(t))},(i,a)=>{r={document:this.$n(t,a),size:BS(a)}}).next(()=>r)}getEntries(e,t){let r=X();return this.Ln(e,t,(i,a)=>{const d=this.$n(i,a);r=r.insert(i,d)}).next(()=>r)}Un(e,t){let r=X(),i=new v(ze.comparator);return this.Ln(e,t,(a,d)=>{const f=this.$n(a,d);r=r.insert(a,f),i=i.insert(a,BS(d))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return ve.resolve();let i=new N(FL);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(OC(i.first()),OC(i.last())),d=i.getIterator();let f=d.getNext();return Fm(e).Wt({index:"documentKeyIndex",range:a},(_,w,D)=>{const S=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&FL(f,S)<0;)r(f,null),f=d.getNext();f&&f.isEqual(S)&&(r(f,w),f=d.hasNext()?d.getNext():null),f?D.Ut(OC(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),FS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fm(e).qt(IDBKeyRange.bound(i,a,!0)).next(d=>{let f=X();for(const _ of d){const w=this.$n(ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(w.key,w)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=X();const d=OL(t,r),f=OL(t,jo.max());return Fm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(_,w,D)=>{const S=this.$n(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new p$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return PL(e).get("remoteDocumentGlobalKey").next(t=>(Ot(!!t),t))}Fn(e,t){return PL(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=rL(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=Mm(e.noDocument.readTime);t=dr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=ze.fromSegments(e.unknownDocument.path),i=Mm(e.unknownDocument.version);t=dr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Er(r[0],r[1]);return xt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return dr.newInvalidDocument(e)}}class p$ extends kL{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new m(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new N((a,d)=>Kt(a.canonicalString(),d.canonicalString()));return this.changes.forEach((a,d)=>{const f=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,f.readTime)),d.isValidDocument()){const _=vL(this.Kn.M,d);i=i.add(a.path.popLast()),r+=BS(_)-f.size,t.push(this.Kn.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=vL(this.Kn.M,d.convertToNoDocument(xt.min()));t.push(this.Kn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,d)=>{this.Gn.set(a,{size:d,readTime:r.get(a).readTime})}),r))}}function PL(n){return is(n,"remoteDocumentGlobal")}function Fm(n){return is(n,"remoteDocumentsV14")}function OC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OL(n,e){const t=e.documentKey.path.toArray();return[n,FS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function FL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Kt(t[a],r[a]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class g${constructor(e){this.M=e}kt(e,t,r,i){const a=new OS("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cL,{unique:!0}),f.createObjectStore("documentMutations"),LL(e),function(f){f.createObjectStore("remoteDocuments")}(e));let d=ve.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),LL(e)),d=d.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,_){return _.store("mutations").qt().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cL,{unique:!0});const D=_.store("mutations"),S=w.map(M=>D.put(M));return ve.waitFor(S)})}(e,a))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(a))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(a))),r<8&&i>=8&&(d=d.next(()=>this.zn(e,a))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(a))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:W3});_.createIndex("collectionPathOverlayIndex",Z3,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",z3,{unique:!1})}(e)})),r<13&&i>=13&&(d=d.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:O3});_.createIndex("documentKeyIndex",F3),_.createIndex("collectionGroupIndex",L3)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:j3}).createIndex("sequenceNumberIndex",H3,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:G3}).createIndex("documentKeyIndex",q3,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=BS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ve.forEach(i,a=>{const d=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>ve.forEach(f,_=>{Ot(_.userId===a.userId);const w=xv(this.M,_);return AL(e,a.userId,w).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((d,f)=>{const _=new Cn(d),w=[0,ao(_)];a.push(t.get(w).next(D=>D?ve.resolve():t.put({targetId:0,path:ao(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ve.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:$3});const r=t.store("collectionParents"),i=new zR,a=d=>{if(i.add(d)){const f=d.lastSegment(),_=d.popLast();return r.put({collectionId:f,parent:ao(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const _=new Cn(d);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,f,_],w)=>{const D=_c(f);return a(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=MC(i),d=bL(this.M,a);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,d)=>{const f=t.store("remoteDocumentsV14"),_=(w=d,w.document?new ze(Cn.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):ft()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(D))}).next(()=>ve.waitFor(i))}}function LL(n){n.createObjectStore("targetDocuments",{keyPath:B3}).createIndex("documentTargetsIndex",U3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",V3,{unique:!0}),n.createObjectStore("targetGlobal")}const QR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class JR{constructor(e,t,r,i,a,d,f,_,w,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=d,this.document=f,this.Xn=w,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!JR.vt())throw new Pe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h$(this,i),this.hs=t+"main",this.M=new yL(_),this.ls=new Ql(this.hs,this.ts,new g$(this.M)),this.fs=new l$(this.referenceDelegate,this.M),this.ds=new f$(this.M),this._s=new e$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,QR);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Us(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ce.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ce.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$S(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Am(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return FC(e).get("owner").next(t=>ve.resolve(this.bs(t)))}Vs(e){return $S(e).delete(this.clientId)}vs(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=is(r,"clientMetadata");return i.qt().next(a=>{const d=e.Ds(a,18e5),f=a.filter(_=>-1===d.indexOf(_));return ve.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ve.resolve(!0):FC(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,QR);return!1}}return!(!this.networkEnabled||!this.inForeground)||$S(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new _L(t,Us.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>$S(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return YR.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new a$(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return ZR.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(d=this.ts)?K3:13===d?fL:12===d?Y3:11===d?hL:void ft();var d;let f;return this.ls.runTransaction(e,i,a,_=>(f=new _L(_,this.es?this.es.next():Us.A),"readwrite-primary"===t?this.Es(f).next(w=>!!w||this.As(f)).next(w=>{if(!w)throw Xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(me.FAILED_PRECONDITION,pL);return r(f)}).next(w=>this.Ps(f).next(()=>w)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(e){return FC(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(me.FAILED_PRECONDITION,QR)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return FC(e).put("owner",t)}static vt(){return Ql.vt()}Rs(e){const t=FC(e);return t.get("owner").next(r=>this.bs(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ve.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Xr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function FC(n){return is(n,"owner")}function $S(n){return is(n,"clientMetadata")}function XR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class m${constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):mC(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new ze(t)).next(r=>{let i=le();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=le();return this.indexManager.getCollectionParents(e,i).next(d=>ve.forEach(d,f=>{const _=(w=t,D=f.child(i),new zl(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.zs(e,_,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const d of a)for(const f of d.mutations){const _=f.key;let w=i.get(_);null==w&&(w=dr.newInvalidDocument(_),i=i.insert(_,w)),EC(f,w,d.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,d)=>{vC(t,d)||(i=i.remove(a))}),i))}}class ek{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=Qe(),i=Qe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ek(e,t.fromCache,r,i)}}class VL{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.ti(e,t):this.Zs.Ks(e,i).next(a=>{const d=this.ei(t,a);return(hc(t)||Kf(t))&&this.ni(t.limitType,d,i,r)?this.ti(e,t):(lv()<=da.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yC(t)),this.Zs.Qs(e,t,fv(r,-1)).next(f=>(d.forEach(_=>{f=f.insert(_.key,_)}),f)))});var a}ei(e,t){let r=new N(Jf(e));return t.forEach((i,a)=>{vC(e,a)&&(r=r.add(a))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ti(e,t){return lv()<=da.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",yC(t)),this.Zs.Qs(e,t,jo.min())}}class _${constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new v(Kt),this.ri=new m(a=>Yd(a),Em),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new m$(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function BL(n,e,t,r){return new _$(n,e,t,r)}function UL(n,e){return tk.apply(this,arguments)}function tk(){return(tk=(0,Ce.Z)(function*(n,e){const t=tt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.ai(e),t.Bs.getAllMutationBatches(r))).next(a=>{const d=[],f=[];let _=Qe();for(const w of i){d.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of a){f.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.ci.Ks(r,_).next(w=>({hi:w,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function y$(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,_,w){const D=_.batch,S=D.keys();let M=ve.resolve();return S.forEach(V=>{M=M.next(()=>w.getEntry(f,V)).next(Y=>{const ue=_.docVersions.get(V);Ot(null!==ue),Y.version.compareTo(ue)<0&&(D.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),w.addEntry(Y)))})}),M.next(()=>d.Bs.removeMutationBatch(f,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function $L(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function v$(n,e){const t=tt(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const f=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;f.push(t.fs.removeMatchingKeys(a,w.removedDocuments,D).next(()=>t.fs.addMatchingKeys(a,w.addedDocuments,D)));let M=S.withSequenceNumber(a.currentSequenceNumber);var V,Y,ue;e.targetMismatches.has(D)?M=M.withResumeToken(pi.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,r)),i=i.insert(D,M),Y=M,ue=w,(0===(V=S).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(a,M))});let _=X();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),f.push(jL(a,d,e.documentUpdates).next(w=>{_=w})),!r.isEqual(xt.min())){const w=t.fs.getLastRemoteSnapshotVersion(a).next(D=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(w)}return ve.waitFor(f).next(()=>d.apply(a)).next(()=>t.ci.Gs(a,_)).next(()=>_)}).then(a=>(t.ii=i,a))}function jL(n,e,t){let r=Qe();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=X();return t.forEach((d,f)=>{const _=i.get(d);f.isNoDocument()&&f.version.isEqual(xt.min())?(e.removeEntry(d,f.readTime),a=a.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),a=a.insert(d,f)):je("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),a})}function b$(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Pv(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,ve.resolve(i)):t.fs.allocateTargetId(r).next(d=>(i=new ep(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Ov(n,e,t){return nk.apply(this,arguments)}function nk(){return(nk=(0,Ce.Z)(function*(n,e,t){const r=tt(n),i=r.ii.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Am(d))throw d;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)})).apply(this,arguments)}function jS(n,e,t){const r=tt(n);let i=xt.min(),a=Qe();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,_,w){const D=tt(f),S=D.ri.get(w);return void 0!==S?ve.resolve(D.ii.get(S)):D.fs.getTargetData(_,w)}(r,d,Ho(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(_=>{a=_})}).next(()=>r.si.Qs(d,e,t?i:xt.min(),t?a:Qe())).next(f=>(qL(r,al(e),f),{documents:f,li:a})))}function HL(n,e){const t=tt(n),r=tt(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(d=>d?d.target:null))}function GL(n,e){const t=tt(n),r=t.oi.get(e)||xt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,fv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(qL(t,e,i),i))}function qL(n,e,t){let r=xt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.oi.set(e,r)}function rk(){return(rk=(0,Ce.Z)(function*(n,e,t,r){const i=tt(n);let a=Qe(),d=X();for(const w of t){const D=e.fi(w.metadata.name);w.document&&(a=a.add(D));const S=e.di(w);S.setReadTime(e._i(w.metadata.readTime)),d=d.insert(D,S)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),_=yield Pv(i,(w=r,Ho(oo(Cn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>jL(w,f,d).next(D=>(f.apply(w),D)).next(D=>i.fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.fs.addMatchingKeys(w,a,_.targetId)).next(()=>i.ci.Gs(w,D)).next(()=>D)))})).apply(this,arguments)}function C$(n,e){return ik.apply(this,arguments)}function ik(){return(ik=(0,Ce.Z)(function*(n,e,t=Qe()){const r=yield Pv(n,Ho(qR(e.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const d=rs(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(a,e);const f=r.withResumeToken(pi.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(a,f).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})})).apply(this,arguments)}class E${constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return ve.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:rs(r.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:qR(r.bundledQuery),readTime:rs(r.readTime)}),ve.resolve();var r}}class D${constructor(){this.overlays=new v(ze.comparator),this.gi=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const i=Fe(),a=t.length+1,d=new ze(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ve.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new v((w,D)=>w-D);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=Fe(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const f=Fe(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>f.set(w,D)),!(f.size()>=i)););return ve.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new GR(t,r));let a=this.gi.get(t);void 0===a&&(a=Qe(),this.gi.set(t,a)),this.gi.set(t,a.add(r.key))}}class sk{constructor(){this.yi=new N(ss.pi),this.Ii=new N(ss.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new ss(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new ss(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new ze(new Cn([])),r=new ss(t,e),i=new ss(t,e+1),a=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),a.push(d.key)}),a}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new ze(new Cn([])),r=new ss(t,e),i=new ss(t,e+1);let a=Qe();return this.Ii.forEachInRange([r,i],d=>{a=a.add(d.key)}),a}containsKey(e){const t=new ss(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ss{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return ze.comparator(e.key,t.key)||Kt(e.vi,t.vi)}static Ti(e,t){return Kt(e.vi,t.vi)||ze.comparator(e.key,t.key)}}class T${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new N(ss.pi)}checkEmpty(e){return ve.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.Si;this.Si++;const d=new jR(a,t,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new ss(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,t){return ve.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),a=i<0?0:i;return ve.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return ve.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ss(t,0),i=new ss(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);a.push(f)}),ve.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new N(Kt);return t.forEach(i=>{const a=new ss(i,0),d=new ss(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,d],f=>{r=r.add(f.vi)})}),ve.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const d=new ss(new ze(a),0);let f=new N(Kt);return this.Di.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.vi)),!0)},d),ve.resolve(this.Ni(f))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ot(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return ve.forEach(t.mutations,i=>{const a=new ss(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new ss(t,0),i=this.Di.firstAfterOrEqual(r);return ve.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ve.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class I${constructor(e){this.Mi=e,this.docs=new v(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(t))}getEntries(e,t){let r=X();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dr.newInvalidDocument(i))}),ve.resolve(r)}getAllFromCollection(e,t,r){let i=X();const a=new ze(t.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:f,value:{document:_}}=d.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||wS(pv(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return ve.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ft()}Oi(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new S$(this)}getSize(e){return ve.resolve(this.size)}}class S$ extends kL{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class A${constructor(e){this.persistence=e,this.Fi=new m(t=>Yd(t),Em),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new sk,this.targetCount=0,this.Li=Pm.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),ve.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Pm(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Tn(t),ve.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Fi.delete(d),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ve.waitFor(a).next(()=>i)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(d=>{a.push(i.markPotentiallyOrphaned(e,d))}),ve.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.Bi.containsKey(t))}}class N${constructor(e,t){this.Ui={},this.overlays={},this.es=new Us(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new A$(this),this.indexManager=new o$,this.ds=new I$(r=>this.referenceDelegate.qi(r)),this.M=new yL(t),this._s=new E$(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new T$(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new x$(this.es.next());return this.referenceDelegate.Ki(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Qi(e,t){return ve.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class x$ extends gL{constructor(e){super(),this.currentSequenceNumber=e}}class ok{constructor(e){this.persistence=e,this.ji=new sk,this.Wi=null}static zi(e){return new ok(e)}get Hi(){if(this.Wi)return this.Wi;throw ft()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Hi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.Hi,r=>{const i=ze.fromPath(r);return this.Ji(e,i).next(a=>{a||t.removeEntry(i,xt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return ve.or([()=>ve.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function WL(n,e){return`firestore_clients_${n}_${e}`}function ZL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ak(n,e){return`firestore_targets_${n}_${e}`}class HS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let a,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(a=new Pe(i.error.code,i.error.message))),d?new HS(e,t,i.state,a):(Xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class LC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Pe(r.error.code,r.error.message))),a?new LC(e,r.state,i):(Xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Br();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=mS(r.activeTargetIds[d]),a=a.add(r.activeTargetIds[d]);return i?new GS(e,a):(Xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class lk{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lk(t.clientId,t.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class uk{constructor(){this.activeTargetIds=Br()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ck{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new v(Kt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=WL(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new uk),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const a=e.getItem(WL(e.persistenceKey,i));if(a){const d=GS.Yi(i,a);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ak(this.persistenceKey,e));if(r){const i=LC.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ak(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(a){let d=Us.A;if(null!=a)try{const f=JSON.parse(a);Ot("number"==typeof f),d=f}catch(f){Xr("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==Us.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.kr(a)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new HS(this.currentUser,e,t,r),a=ZL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Xi())}Ir(e){const t=ZL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=ak(this.persistenceKey,e),a=new LC(e,t,r);this.setItem(i,a.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return GS.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return HS.Yi(new Bi(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return LC.Yi(i,t)}mr(e){return lk.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),d=[],f=[];return a.forEach(_=>{i.has(_)||d.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Br();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class zL{constructor(){this.$r=new uk,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new uk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class M${Lr(e){}shutdown(){}}class YL{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const R$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class k${constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class P$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,a){const d=this.uo(e,t);je("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,a),this.co(e,d,f,r).then(_=>(je("RestConnection","Received: ",_),_),_=>{throw qd("RestConnection",`${e} failed with error: `,_,"url: ",d,"request:",r),_})}ho(e,t,r,i,a){return this.oo(e,t,r,i,a)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+jf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}uo(e,t){return`${this.io}/v1/${t}:${R$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,d)=>{const f=new cS;f.listenOnce(fR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case iC.NO_ERROR:const w=f.getResponseJson();je("Connection","XHR received:",JSON.stringify(w)),a(w);break;case iC.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),d(new Pe(me.DEADLINE_EXCEEDED,"Request time out"));break;case iC.HTTP_ERROR:const D=f.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',D,"response text:",f.getResponseText()),D>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const M=function(V){const Y=V.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(Y)>=0?Y:me.UNKNOWN}(S.status);d(new Pe(M,S.message))}else d(new Pe(me.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Pe(me.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=rC(),d=uS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new ZF({})),this.ao(f.initMessageHeaders,t,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");je("Connection","Creating WebChannel: "+_,f);const w=a.createWebChannel(_,f);let D=!1,S=!1;const M=new k$({Wr:Y=>{S?je("Connection","Not sending because WebChannel is closed:",Y):(D||(je("Connection","Opening WebChannel transport."),w.open(),D=!0),je("Connection","WebChannel sending:",Y),w.send(Y))},zr:()=>w.close()}),V=(Y,ue,De)=>{Y.listen(ue,rt=>{try{De(rt)}catch(Je){setTimeout(()=>{throw Je},0)}})};return V(w,pm.EventType.OPEN,()=>{S||je("Connection","WebChannel transport opened.")}),V(w,pm.EventType.CLOSE,()=>{S||(S=!0,je("Connection","WebChannel transport closed"),M.no())}),V(w,pm.EventType.ERROR,Y=>{S||(S=!0,qd("Connection","WebChannel transport errored:",Y),M.no(new Pe(me.UNAVAILABLE,"The operation could not be completed")))}),V(w,pm.EventType.MESSAGE,Y=>{var ue;if(!S){const De=Y.data[0];Ot(!!De);const rt=De,Je=rt.error||(null===(ue=rt[0])||void 0===ue?void 0:ue.error);if(Je){je("Connection","WebChannel received error:",Je);const it=Je.status;let at=function(ln){const Yr=l[ln];if(void 0!==Yr)return p(Yr)}(it),Ft=Je.message;void 0===at&&(at=me.INTERNAL,Ft="Unknown error status: "+it+" with message "+Je.message),S=!0,M.no(new Pe(at,Ft)),w.close()}else je("Connection","WebChannel received:",De),M.so(De)}}),V(d,WF.STAT_EVENT,Y=>{Y.stat===pR.PROXY?je("Connection","Detected buffering proxy"):Y.stat===pR.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.eo()},0),M}}function KL(){return"undefined"!=typeof window?window:null}function qS(){return"undefined"!=typeof document?document:null}function VC(n){return new C3(n,!0)}class dk{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class QL{constructor(e,t,r,i,a,d,f,_){this.Yn=e,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new dk(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,Ce.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,Ce.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new Pe(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,Ce.Z)(function*(){e.state=0,e.start()}))}Ko(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O$ extends QL{constructor(e,t,r,i,a,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,d),this.M=a}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ft(),i=e.targetChange.targetIds||[],a=function(_,w){return _.N?(Ot(void 0===w||"string"==typeof w),pi.fromBase64String(w||"")):(Ot(void 0===w||w instanceof Uint8Array),pi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(_){const w=void 0===_.code?me.UNKNOWN:p(_.code);return new Pe(w,_.message||"")}(d);t=new nh(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=mc(n,r.document.name),a=rs(r.document.updateTime),d=new Cs({mapValue:{fields:r.document.fields}}),f=dr.newFoundDocument(i,a,d);t=new Kl(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=mc(n,r.document),a=r.readTime?rs(r.readTime):xt.min(),d=dr.newNoDocument(i,a);t=new Kl([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,i=mc(n,r.document);t=new Kl([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new o(r.count||0);t=new th(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return xt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?xt.min():a.readTime?rs(a.readTime):xt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=AC(this.M),t.addTarget=function(i,a){let d;const f=a.target;return d=gv(f)?{documents:iL(i,f)}:{query:sL(i,f)},d.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?d.resumeToken=JF(i,a.resumeToken):a.snapshotVersion.compareTo(xt.min())>0&&(d.readTime=IC(i,a.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=AC(this.M),t.removeTarget=e,this.Fo(t)}}class F$ extends QL{constructor(e,t,r,i,a,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,d),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(Ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function(n,e){return n&&n.length>0?(Ot(void 0!==e),n.map(t=>function(r,i){let a=rs(r.updateTime?r.updateTime:i);return a.isEqual(xt.min())&&(a=rs(i)),new KF(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=rs(e.commitTime);return this.listener.Yo(r,t)}return Ot(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=AC(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>NC(this.M,r))};this.Fo(t)}}class L$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.oo(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(me.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ho(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(me.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class V${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Xr(t),this.iu=!1):je("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class B${constructor(e,t,r,i,a){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(f=>{r.enqueueAndForget((0,Ce.Z)(function*(){var _;ip(d)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ce.Z)(function*(w){const D=tt(w);D.fu.add(4),yield Fv(D),D.wu.set("Unknown"),D.fu.delete(4),yield BC(D)}),function(w){return _.apply(this,arguments)})(d))}))}),this.wu=new V$(r,i)}}function BC(n){return hk.apply(this,arguments)}function hk(){return(hk=(0,Ce.Z)(function*(n){if(ip(n))for(const e of n.du)yield e(!0)})).apply(this,arguments)}function Fv(n){return fk.apply(this,arguments)}function fk(){return(fk=(0,Ce.Z)(function*(n){for(const e of n.du)yield e(!1)})).apply(this,arguments)}function WS(n,e){const t=tt(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),mk(t)?gk(t):Vv(t).xo()&&pk(t,e))}function UC(n,e){const t=tt(n),r=Vv(t);t.lu.delete(e),r.xo()&&JL(t,e),0===t.lu.size&&(r.xo()?r.Mo():ip(t)&&t.wu.set("Unknown"))}function pk(n,e){n.mu.Z(e.targetId),Vv(n).jo(e)}function JL(n,e){n.mu.Z(e),Vv(n).Wo(e)}function gk(n){n.mu=new DC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Vv(n).start(),n.wu.ru()}function mk(n){return ip(n)&&!Vv(n).Co()&&n.lu.size>0}function ip(n){return 0===tt(n).fu.size}function XL(n){n.mu=void 0}function U$(n){return _k.apply(this,arguments)}function _k(){return(_k=(0,Ce.Z)(function*(n){n.lu.forEach((e,t)=>{pk(n,e)})})).apply(this,arguments)}function $$(n,e){return yk.apply(this,arguments)}function yk(){return(yk=(0,Ce.Z)(function*(n,e){XL(n),mk(n)?(n.wu.au(e),gk(n)):n.wu.set("Unknown")})).apply(this,arguments)}function j$(n,e,t){return vk.apply(this,arguments)}function vk(){return(vk=(0,Ce.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof nh&&2===e.state&&e.cause)try{yield(r=(0,Ce.Z)(function*(i,a){const d=a.cause;for(const f of a.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ZS(n,r)}else if(e instanceof Kl?n.mu.ut(e):e instanceof th?n.mu._t(e):n.mu.ht(e),!t.isEqual(xt.min()))try{const r=yield $L(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const d=i.mu.yt(a);return d.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.lu.get(_);w&&i.lu.set(_,w.withResumeToken(f.resumeToken,a))}}),d.targetMismatches.forEach(f=>{const _=i.lu.get(f);if(!_)return;i.lu.set(f,_.withResumeToken(pi.EMPTY_BYTE_STRING,_.snapshotVersion)),JL(i,f);const w=new ep(_.target,f,1,_.sequenceNumber);pk(i,w)}),i.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield ZS(n,r)}var r})).apply(this,arguments)}function ZS(n,e,t){return bk.apply(this,arguments)}function bk(){return(bk=(0,Ce.Z)(function*(n,e,t){if(!Am(e))throw e;n.fu.add(1),yield Fv(n),n.wu.set("Offline"),t||(t=()=>$L(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield BC(n)}))})).apply(this,arguments)}function e2(n,e){return e().catch(t=>ZS(n,t,e))}function Lv(n){return wk.apply(this,arguments)}function wk(){return(wk=(0,Ce.Z)(function*(n){const e=tt(n),t=sp(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;H$(e);)try{const i=yield b$(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,G$(e,i)}catch(i){yield ZS(e,i)}t2(e)&&n2(e)})).apply(this,arguments)}function H$(n){return ip(n)&&n.hu.length<10}function G$(n,e){n.hu.push(e);const t=sp(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function t2(n){return ip(n)&&!sp(n).Co()&&n.hu.length>0}function n2(n){sp(n).start()}function q$(n){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,Ce.Z)(function*(n){sp(n).Zo()})).apply(this,arguments)}function W$(n){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,Ce.Z)(function*(n){const e=sp(n);for(const t of n.hu)e.Jo(t.mutations)})).apply(this,arguments)}function Z$(n,e,t){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,Ce.Z)(function*(n,e,t){const r=n.hu.shift(),i=HR.from(r,e,t);yield e2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Lv(n)})).apply(this,arguments)}function z$(n,e){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,Ce.Z)(function*(n,e){var t;e&&sp(n).Ho&&(yield(t=(0,Ce.Z)(function*(r,i){if(h(a=i.code)&&a!==me.ABORTED){const d=r.hu.shift();sp(r).ko(),yield e2(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Lv(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),t2(n)&&n2(n)})).apply(this,arguments)}function r2(n,e){return Ik.apply(this,arguments)}function Ik(){return(Ik=(0,Ce.Z)(function*(n,e){const t=tt(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=ip(t);t.fu.add(3),yield Fv(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield BC(t)})).apply(this,arguments)}function Sk(n,e){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,Ce.Z)(function*(n,e){const t=tt(n);e?(t.fu.delete(2),yield BC(t)):e||(t.fu.add(2),yield Fv(t),t.wu.set("Unknown"))})).apply(this,arguments)}function Vv(n){return n.gu||(n.gu=function(e,t,r){const i=tt(e);return i.eu(),new O$(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:U$.bind(null,n),Yr:$$.bind(null,n),Qo:j$.bind(null,n)}),n.du.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.gu.ko(),mk(n)?gk(n):n.wu.set("Unknown")):(yield n.gu.stop(),XL(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function sp(n){return n.yu||(n.yu=function(e,t,r){const i=tt(e);return i.eu(),new F$(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:q$.bind(null,n),Yr:z$.bind(null,n),Xo:W$.bind(null,n),Yo:Z$.bind(null,n)}),n.du.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.yu.ko(),yield Lv(n)):(yield n.yu.stop(),n.hu.length>0&&(je("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class Nk{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,i,a){const d=Date.now()+r,f=new Nk(e,t,d,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bv(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),Am(n))return new Pe(me.UNAVAILABLE,`${e}: ${n}`);throw n}class Uv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=le(),this.sortedSet=new v(this.comparator)}static emptySet(e){return new Uv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Uv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class i2{constructor(){this.pu=new v(ze.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):ft():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $v{constructor(e,t,r,i,a,d,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(d=>{a.push({type:0,doc:d})}),new $v(e,t,Uv.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Y${constructor(){this.Tu=void 0,this.listeners=[]}}class K${constructor(){this.queries=new m(e=>xS(e),Qf),this.onlineState="Unknown",this.Eu=new Set}}function xk(n,e){return Mk.apply(this,arguments)}function Mk(){return(Mk=(0,Ce.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new Y$),i)try{a.Tu=yield t.onListen(r)}catch(d){const f=Bv(d,`Initialization of query '${yC(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Au(t.onlineState),a.Tu&&e.Ru(a.Tu)&&Pk(t)})).apply(this,arguments)}function Rk(n,e){return kk.apply(this,arguments)}function kk(){return(kk=(0,Ce.Z)(function*(n,e){const t=tt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const d=a.listeners.indexOf(e);d>=0&&(a.listeners.splice(d,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function Q$(n,e){const t=tt(n);let r=!1;for(const i of e){const d=t.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&Pk(t)}function J$(n,e,t){const r=tt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Pk(n){n.Eu.forEach(e=>{e.next()})}class Ok{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new $v(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=$v.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class X${constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class s2{constructor(e){this.M=e}fi(e){return mc(this.M,e)}di(e){return e.metadata.exists?rL(this.M,e.document,!1):dr.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return rs(e)}}class ej{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=o2(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new s2(this.M);for(const i of e)if(i.metadata.queries){const a=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(t.get(d)||Qe()).add(a);t.set(d,f)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function(n,e,t,r){return rk.apply(this,arguments)}(e.localStore,new s2(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield C$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function o2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class a2{constructor(e){this.key=e}}class l2{constructor(e){this.key=e}}class u2{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Qe(),this.mutatedKeys=Qe(),this.Uu=Jf(e),this.qu=new Uv(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new i2,i=t?t.qu:this.qu;let a=t?t.mutatedKeys:this.mutatedKeys,d=i,f=!1;const _=hc(this.query)&&i.size===this.query.limit?i.last():null,w=Kf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const M=i.get(D),V=vC(this.query,S)?S:null,Y=!!M&&this.mutatedKeys.has(M.key),ue=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let De=!1;M&&V?M.data.isEqual(V.data)?Y!==ue&&(r.track({type:3,doc:V}),De=!0):this.ju(M,V)||(r.track({type:2,doc:V}),De=!0,(_&&this.Uu(V,_)>0||w&&this.Uu(V,w)<0)&&(f=!0)):!M&&V?(r.track({type:0,doc:V}),De=!0):M&&!V&&(r.track({type:1,doc:M}),De=!0,(_||w)&&(f=!0)),De&&(V?(d=d.add(V),a=ue?a.add(D):a.delete(D)):(d=d.delete(D),a=a.delete(D)))}),hc(this.query)||Kf(this.query))for(;d.size>this.query.limit;){const D=hc(this.query)?d.last():d.first();d=d.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{qu:d,Qu:r,ni:f,mutatedKeys:a}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const a=e.Qu.Iu();a.sort((w,D)=>function(S,M){const V=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return V(S)-V(M)}(w.type,D.type)||this.Uu(w.doc,D.doc)),this.Wu(r);const d=t?this.zu():[],f=0===this.Lu.size&&this.current?1:0,_=f!==this.Bu;return this.Bu=f,0!==a.length||_?{snapshot:new $v(this.query,e.qu,i,a,e.mutatedKeys,0===f,_,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new i2,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Qe(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new l2(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new a2(r))}),t}Yu(e){this.$u=e.li,this.Lu=Qe();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return $v.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class tj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nj{constructor(e){this.key=e,this.Zu=!1}}class rj{constructor(e,t,r,i,a,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new m(f=>xS(f),Qf),this.na=new Map,this.sa=new Set,this.ia=new v(ze.comparator),this.ra=new Map,this.oa=new sk,this.ua={},this.aa=new Map,this.ca=Pm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function ij(n,e){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,Ce.Z)(function*(n,e){const t=sP(n);let r,i;const a=t.ea.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Xu();else{const d=yield Pv(t.localStore,Ho(e));t.isPrimaryClient&&WS(t.remoteStore,d);const f=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield Lk(t,e,r,"current"===f)}return i})).apply(this,arguments)}function Lk(n,e,t,r){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,Ce.Z)(function*(n,e,t,r){n.la=(D,S,M)=>{return(V=(0,Ce.Z)(function*(Y,ue,De,rt){let Je=ue.view.Gu(De);Je.ni&&(Je=yield jS(Y.localStore,ue.query,!1).then(({documents:Ft})=>ue.view.Gu(Ft,Je)));const it=rt&&rt.targetChanges.get(ue.targetId),at=ue.view.applyChanges(Je,Y.isPrimaryClient,it);return zk(Y,ue.targetId,at.Hu),at.snapshot}),function(Y,ue,De,rt){return V.apply(this,arguments)})(n,D,S,M);var V};const i=yield jS(n.localStore,e,!0),a=new u2(e,i.li),d=a.Gu(i.documents),f=Yl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(d,n.isPrimaryClient,f);zk(n,t,_.Hu);const w=new tj(e,t,a);return n.ea.set(e,w),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),_.snapshot})).apply(this,arguments)}function sj(n,e){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,Ce.Z)(function*(n,e){const t=tt(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(a=>!Qf(a,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ov(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),UC(t.remoteStore,r.targetId),jv(t,r.targetId)}).catch(Om))):(jv(t,r.targetId),yield Ov(t.localStore,r.targetId,!0))})).apply(this,arguments)}function Uk(){return(Uk=(0,Ce.Z)(function*(n,e,t){const r=oP(n);try{const i=yield function(a,d){const f=tt(a),_=Er.now(),w=d.reduce((S,M)=>S.add(M.key),Qe());let D;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>f.ci.Ks(S,w).next(M=>{D=M;const V=[];for(const Y of d){const ue=QF(Y,D.get(Y.key));null!=ue&&V.push(new eh(Y.key,ue,dC(ue.value.mapValue),gi.exists(!0)))}return f.Bs.addMutationBatch(S,_,V,d)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,d,f){let _=a.ua[a.currentUser.toKey()];_||(_=new v(Kt)),_=_.insert(d,f),a.ua[a.currentUser.toKey()]=_}(r,i.batchId,t),yield rh(r,i.changes),yield Lv(r.remoteStore)}catch(i){const a=Bv(i,"Failed to persist write");t.reject(a)}})).apply(this,arguments)}function c2(n,e){return $k.apply(this,arguments)}function $k(){return($k=(0,Ce.Z)(function*(n,e){const t=tt(n);try{const r=yield v$(t.localStore,e);e.targetChanges.forEach((i,a)=>{const d=t.ra.get(a);d&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?Ot(d.Zu):i.removedDocuments.size>0&&(Ot(d.Zu),d.Zu=!1))}),yield rh(t,r,e)}catch(r){yield Om(r)}})).apply(this,arguments)}function d2(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((a,d)=>{const f=d.view.Au(e);f.snapshot&&i.push(f.snapshot)}),function(a,d){const f=tt(a);f.onlineState=d;let _=!1;f.queries.forEach((w,D)=>{for(const S of D.listeners)S.Au(d)&&(_=!0)}),_&&Pk(f)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function aj(n,e,t){return jk.apply(this,arguments)}function jk(){return(jk=(0,Ce.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),a=i&&i.key;if(a){let d=new v(ze.comparator);d=d.insert(a,dr.newNoDocument(a,xt.min()));const f=Qe().add(a),_=new ns(xt.min(),new Map,new N(Kt),d,f);yield c2(r,_),r.ia=r.ia.remove(a),r.ra.delete(e),Yk(r)}else yield Ov(r.localStore,e,!1).then(()=>jv(r,e,t)).catch(Om)})).apply(this,arguments)}function lj(n,e){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,Ce.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const i=yield y$(t.localStore,e);Zk(t,r,null),Wk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rh(t,i)}catch(i){yield Om(i)}})).apply(this,arguments)}function uj(n,e,t){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,Ce.Z)(function*(n,e,t){const r=tt(n);try{const i=yield function(a,d){const f=tt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.Bs.lookupMutationBatch(_,d).next(D=>(Ot(null!==D),w=D.keys(),f.Bs.removeMutationBatch(_,D))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.ci.Ks(_,w))})}(r.localStore,e);Zk(r,e,t),Wk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rh(r,i)}catch(i){yield Om(i)}})).apply(this,arguments)}function qk(){return(qk=(0,Ce.Z)(function*(n,e){const t=tt(n);ip(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const d=tt(a);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=Bv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function Wk(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function Zk(n,e,t){const r=tt(n);let i=r.ua[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function jv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||h2(n,r)})}function h2(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(UC(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),Yk(n))}function zk(n,e,t){for(const r of t)r instanceof a2?(n.oa.addReference(r.key,e),dj(n,r)):r instanceof l2?(je("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||h2(n,r.key)):ft()}function dj(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(je("SyncEngine","New document in limbo: "+t),n.sa.add(r),Yk(n))}function Yk(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new ze(Cn.fromString(e)),r=n.ca.next();n.ra.set(r,new nj(t)),n.ia=n.ia.insert(t,r),WS(n.remoteStore,new ep(Ho(oo(t.path)),r,2,Us.A))}}function rh(n,e,t){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,Ce.Z)(function*(n,e,t){const r=tt(n),i=[],a=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,_)=>{d.push(r.la(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=ek.Ys(_.targetId,w);a.push(D)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,Ce.Z)(function*(_,w){const D=tt(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ve.forEach(w,M=>ve.forEach(M.Hs,V=>D.persistence.referenceDelegate.addReference(S,M.targetId,V)).next(()=>ve.forEach(M.Js,V=>D.persistence.referenceDelegate.removeReference(S,M.targetId,V)))))}catch(S){if(!Am(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const M=S.targetId;if(!S.fromCache){const V=D.ii.get(M),ue=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);D.ii=D.ii.insert(M,ue)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))})).apply(this,arguments)}function hj(n,e){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,Ce.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield UL(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(d=>{d.forEach(f=>{f.reject(new Pe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rh(t,r.hi)}var i})).apply(this,arguments)}function fj(n,e){const t=tt(n),r=t.ra.get(e);if(r&&r.Zu)return Qe().add(r.key);{let i=Qe();const a=t.na.get(e);if(!a)return i;for(const d of a){const f=t.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function pj(n,e){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,Ce.Z)(function*(n,e){const t=tt(n),r=yield jS(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&zk(t,e.targetId,i.Hu),i})).apply(this,arguments)}function gj(n,e){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,Ce.Z)(function*(n,e){const t=tt(n);return GL(t.localStore,e).then(r=>rh(t,r))})).apply(this,arguments)}function mj(n,e,t,r){return eP.apply(this,arguments)}function eP(){return(eP=(0,Ce.Z)(function*(n,e,t,r){const i=tt(n),a=yield function(d,f){const _=tt(d),w=tt(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.fn(D,f).next(S=>S?_.ci.Ks(D,S):ve.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield Lv(i.remoteStore):"acknowledged"===t||"rejected"===t?(Zk(i,e,r||null),Wk(i,e),f=e,tt(tt(i.localStore).Bs)._n(f)):ft(),yield rh(i,a)):je("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function tP(){return(tP=(0,Ce.Z)(function*(n,e){const t=tt(n);if(sP(t),oP(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield f2(t,r.toArray());t.ha=!0,yield Sk(t.remoteStore,!0);for(const a of i)WS(t.remoteStore,a)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((a,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(jv(t,d),Ov(t.localStore,d,!0))),UC(t.remoteStore,d)}),yield i,yield f2(t,r),function(a){const d=tt(a);d.ra.forEach((f,_)=>{UC(d.remoteStore,_)}),d.oa.bi(),d.ra=new Map,d.ia=new v(ze.comparator)}(t),t.ha=!1,yield Sk(t.remoteStore,!1)}})).apply(this,arguments)}function f2(n,e,t){return nP.apply(this,arguments)}function nP(){return(nP=(0,Ce.Z)(function*(n,e,t){const r=tt(n),i=[],a=[];for(const d of e){let f;const _=r.na.get(d);if(_&&0!==_.length){f=yield Pv(r.localStore,Ho(_[0]));for(const w of _){const D=r.ea.get(w),S=yield pj(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield HL(r.localStore,d);f=yield Pv(r.localStore,w),yield Lk(r,p2(w),d,!1)}i.push(f)}return r.ta.Qo(a),i})).apply(this,arguments)}function p2(n){return NS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yj(n){const e=tt(n);return tt(tt(e.localStore).persistence).Fs()}function vj(n,e,t,r){return rP.apply(this,arguments)}function rP(){return(rP=(0,Ce.Z)(function*(n,e,t,r){const i=tt(n);if(i.ha)return void je("SyncEngine","Ignoring unexpected query state notification.");const a=i.na.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const d=yield GL(i.localStore,al(a[0])),f=ns.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield rh(i,d,f);break}case"rejected":yield Ov(i.localStore,e,!0),jv(i,e,r);break;default:ft()}})).apply(this,arguments)}function bj(n,e,t){return iP.apply(this,arguments)}function iP(){return(iP=(0,Ce.Z)(function*(n,e,t){const r=sP(n);if(r.ha){for(const i of e){if(r.na.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const a=yield HL(r.localStore,i),d=yield Pv(r.localStore,a);yield Lk(r,p2(a),d.targetId,!1),WS(r.remoteStore,d)}for(const i of t)r.na.has(i)&&(yield Ov(r.localStore,i,!1).then(()=>{UC(r.remoteStore,i),jv(r,i)}).catch(Om))}})).apply(this,arguments)}function sP(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=c2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aj.bind(null,e),e.ta.Qo=Q$.bind(null,e.eventManager),e.ta.fa=J$.bind(null,e.eventManager),e}function oP(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uj.bind(null,e),e}class g2{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.M=VC(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return BL(this.persistence,new VL,e.initialUser,this.M)}wa(e){return new N$(ok.zi,this.M)}_a(e){return new zL}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class m2 extends g2{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield oP(r.ya.syncEngine),yield Lv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return BL(this.persistence,new VL,e.initialUser,this.M)}ma(e){return new c$(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=XR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Go.withCacheSize(this.cacheSizeBytes):Go.DEFAULT;return new JR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,KL(),qS(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new zL}}class Cj extends m2{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ce.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof ck&&(r.sharedClientState.syncEngine={Mr:mj.bind(null,i),Or:vj.bind(null,i),Fr:bj.bind(null,i),Fs:yj.bind(null,i),kr:gj.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,Ce.Z)(function*(d){yield function(n,e){return tP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return a.apply(this,arguments)}}())})()}_a(e){const t=KL();if(!ck.vt(t))throw new Pe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=XR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ck(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class aP{initialize(e,t){var r=this;return(0,Ce.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>d2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=hj.bind(null,r.syncEngine),yield Sk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new K$}createDatastore(e){const t=VC(e.databaseInfo.databaseId),r=new P$(e.databaseInfo);return new L$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>d2(this.syncEngine,f,0),d=YL.vt()?new YL:new M$,new B$(t,r,i,a,d);var t,r,i,a,d}createSyncEngine(e,t){return function(r,i,a,d,f,_,w){const D=new rj(r,i,a,d,f,_);return w&&(D.ha=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const r=tt(t);je("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Fv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _2(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ej{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Ci,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new X$(JSON.parse(a),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,Ce.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Dj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ce.Z)(function*(a,d){const f=tt(a),_=AC(f.M)+"/documents",w={documents:d.map(V=>SC(f.M,V))},D=yield f.ho("BatchGetDocuments",_,w),S=new Map;D.forEach(V=>{const Y=function(n,e){return"found"in e?function(t,r){Ot(!!r.found);const i=mc(t,r.found.name),a=rs(r.found.updateTime),d=new Cs({mapValue:{fields:r.found.fields}});return dr.newFoundDocument(i,a,d)}(n,e):"missing"in e?function(t,r){Ot(!!r.missing),Ot(!!r.readTime);const i=mc(t,r.missing),a=rs(r.readTime);return dr.newNoDocument(i,a)}(n,e):ft()}(f.M,V);S.set(Y.key.toString(),Y)});const M=[];return d.forEach(V=>{const Y=S.get(V.toString());Ot(!!Y),M.push(Y)}),M}),function(a,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new s(a,e.precondition(a)))}),yield(r=(0,Ce.Z)(function*(i,a){const d=tt(i),f=AC(d.M)+"/documents",_={writes:a.map(w=>NC(d.M,w))};yield d.oo("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?gi.updateTime(t):gi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Pe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gi.updateTime(t)}return gi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Tj{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new dk(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,Ce.Z)(function*(){const t=new Dj(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.xa(a)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!Ui(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!h(t)}return!1}}class Ij{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Bi.UNAUTHENTICATED,this.clientId=_R.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ce.Z)(function*(f){je("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(je("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Bv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function y2(n,e){return lP.apply(this,arguments)}function lP(){return(lP=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ce.Z)(function*(a){r.isEqual(a)||(yield UL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function v2(n,e){return uP.apply(this,arguments)}function uP(){return(uP=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield cP(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>r2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>r2(e.remoteStore,a)),n.onlineComponents=e})).apply(this,arguments)}function cP(n){return dP.apply(this,arguments)}function dP(){return(dP=(0,Ce.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield y2(n,new g2)),n.offlineComponents})).apply(this,arguments)}function YS(n){return hP.apply(this,arguments)}function hP(){return(hP=(0,Ce.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield v2(n,new aP)),n.onlineComponents})).apply(this,arguments)}function b2(n){return cP(n).then(e=>e.persistence)}function fP(n){return cP(n).then(e=>e.localStore)}function w2(n){return YS(n).then(e=>e.remoteStore)}function pP(n){return YS(n).then(e=>e.syncEngine)}function Hv(n){return gP.apply(this,arguments)}function gP(){return(gP=(0,Ce.Z)(function*(n){const e=yield YS(n),t=e.eventManager;return t.onListen=ij.bind(null,e.syncEngine),t.onUnlisten=sj.bind(null,e.syncEngine),t})).apply(this,arguments)}function C2(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,d,f,_){const w=new zS({next:S=>{a.enqueueAndForget(()=>Rk(i,D));const M=S.docs.has(d);!M&&S.fromCache?_.reject(new Pe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&f&&"server"===f.source?_.reject(new Pe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Ok(oo(d.path),w,{includeMetadataChanges:!0,Cu:!0});return xk(i,D)}(yield Hv(n),n.asyncQueue,e,t,r)})),r.promise}function E2(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(i,a,d,f,_){const w=new zS({next:S=>{a.enqueueAndForget(()=>Rk(i,D)),S.fromCache&&"server"===f.source?_.reject(new Pe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Ok(d,w,{includeMetadataChanges:!0,Cu:!0});return xk(i,D)}(yield Hv(n),n.asyncQueue,e,t,r)})),r.promise}const D2=new Map;function mP(n,e,t){if(!t)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function T2(n,e,t,r){if(!0===e&&!0===r)throw new Pe(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I2(n){if(!ze.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function S2(n){if(ze.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function Dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=KS(n);throw new Pe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function A2(n,e){if(e<=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class N2{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,T2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $C{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N2({}),this._settingsFrozen=!1,e instanceof Zl?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Wd;switch(t.type){case"gapi":const r=t.client;return Ot(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new gR(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=D2.get(e);t&&(je("ComponentProvider","Removing Datastore"),D2.delete(e),t.terminate())}(this),Promise.resolve()}}class xr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xr(this.firestore,e,this._key)}}class $s{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $s(this.firestore,e,this._query)}}class yc extends $s{constructor(e,t,r){super(e,t,oo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xr(this.firestore,null,new ze(e))}withConverter(e){return new yc(this.firestore,e,this._path)}}function x2(n,e,...t){if(n=(0,F.m9)(n),mP("collection","path",e),n instanceof $C){const r=Cn.fromString(e,...t);return S2(r),new yc(n,null,r)}{if(!(n instanceof xr||n instanceof yc))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return S2(r),new yc(n.firestore,null,r)}}function QS(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=_R.R()),mP("doc","path",e),n instanceof $C){const r=Cn.fromString(e,...t);return I2(r),new xr(n,null,new ze(r))}{if(!(n instanceof xr||n instanceof yc))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return I2(r),new xr(n.firestore,n instanceof yc?n.converter:null,new ze(r))}}function M2(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof xr||n instanceof yc)&&(e instanceof xr||e instanceof yc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function R2(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof $s&&e instanceof $s&&n.firestore===e.firestore&&Qf(n._query,e._query)&&n.converter===e.converter}class Lj{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new dk(this,"async_queue_retry"),this.qa=()=>{const t=qS();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=qS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=qS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Ci;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Am(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=Nk.createAndSchedule(this,e,t,r,a=>this.ja(a));return this.Fa.push(i),i}Ka(){this.$a&&ft()}verifyOperationInProgress(){}Wa(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function _P(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class Vj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ur extends $C{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Lj,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||k2(this),this._firestoreClient.terminate()}}function Ti(n){return n._firestoreClient||k2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function k2(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ER(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new Ij(n._authCredentials,n._appCheckCredentials,n._queue,r)}function P2(n,e,t){const r=new Ci;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield y2(n,t),yield v2(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===me.FAILED_PRECONDITION||a.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function O2(n){if(n._initialized||n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ih{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(pi.fromBase64String(e))}catch(t){throw new Pe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Lm{constructor(e){this._methodName=e}}class JS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const zj=/^__.*__$/;class Yj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new eh(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ev(e,this.data,t,this.fieldTransforms)}}class F2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new eh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function L2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class XS{constructor(e,t,r,i,a,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new XS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return nA(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(L2(this.Xa)&&zj.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class Kj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||VC(e)}ac(e,t,r,i=!1){return new XS({Xa:e,methodName:t,uc:r,path:Di.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Vm(n){const e=n._freezeSettings(),t=VC(n._databaseId);return new Kj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function eA(n,e,t,r,i,a={}){const d=n.ac(a.merge||a.mergeFields?2:0,e,t,i);wP("Data must be an object, but it was:",d,r);const f=U2(r,d);let _,w;if(a.merge)_=new qf(d.fieldMask),w=d.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const M=CP(e,S,t);if(!d.contains(M))throw new Pe(me.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);j2(D,M)||D.push(M)}_=new qf(D),w=d.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=d.fieldTransforms;return new Yj(new Cs(f),_,w)}class jC extends Lm{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jC}}function V2(n,e,t){return new XS({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class yP extends Lm{_toFieldTransform(e){return new Sm(e.path,new Qd)}isEqual(e){return e instanceof yP}}class Qj extends Lm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=V2(this,e,!0),r=this.cc.map(a=>Bm(a,t)),i=new pc(r);return new Sm(e.path,i)}isEqual(e){return this===e}}class Jj extends Lm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=V2(this,e,!0),r=this.cc.map(a=>Bm(a,t)),i=new Jd(r);return new Sm(e.path,i)}isEqual(e){return this===e}}class Xj extends Lm{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Xd(e.M,MS(e.M,this.hc));return new Sm(e.path,t)}isEqual(e){return this===e}}function vP(n,e,t,r){const i=n.ac(1,e,t);wP("Data must be an object, but it was:",i,r);const a=[],d=Cs.empty();Gf(r,(_,w)=>{const D=tA(e,_,t);w=(0,F.m9)(w);const S=i.sc(D);if(w instanceof jC)a.push(D);else{const M=Bm(w,S);null!=M&&(a.push(D),d.set(D,M))}});const f=new qf(a);return new F2(d,f,i.fieldTransforms)}function bP(n,e,t,r,i,a){const d=n.ac(1,e,t),f=[CP(e,r,t)],_=[i];if(a.length%2!=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<a.length;M+=2)f.push(CP(e,a[M])),_.push(a[M+1]);const w=[],D=Cs.empty();for(let M=f.length-1;M>=0;--M)if(!j2(w,f[M])){const V=f[M];let Y=_[M];Y=(0,F.m9)(Y);const ue=d.sc(V);if(Y instanceof jC)w.push(V);else{const De=Bm(Y,ue);null!=De&&(w.push(V),D.set(V,De))}}const S=new qf(w);return new F2(D,S,d.fieldTransforms)}function B2(n,e,t,r=!1){return Bm(t,n.ac(r?4:3,e))}function Bm(n,e){if($2(n=(0,F.m9)(n)))return wP("Unsupported field value:",e,n),U2(n,e);if(n instanceof Lm)return function(t,r){if(!L2(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const d of t){let f=Bm(d,r.ic(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return MS(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Er.fromDate(t);return{timestampValue:IC(r.M,i)}}if(t instanceof Er){const i=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:IC(r.M,i)}}if(t instanceof JS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:JF(r.M,t._byteString)};if(t instanceof xr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:VR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${KS(t)}`)}(n,e)}function U2(n,e){const t={};return bR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gf(n,(r,i)=>{const a=Bm(i,e.tc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function $2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof JS||n instanceof vc||n instanceof xr||n instanceof Lm)}function wP(n,e,t){if(!$2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=KS(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function CP(n,e,t){if((e=(0,F.m9)(e))instanceof ih)return e._internalPath;if("string"==typeof e)return tA(n,e);throw nA("Field path arguments must be of type string or ",n,!1,void 0,t)}const eH=new RegExp("[~\\*/\\[\\]]");function tA(n,e,t){if(e.search(eH)>=0)throw nA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ih(...e.split("."))._internalPath}catch(r){throw nA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nA(n,e,t,r,i){const a=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||d)&&(_+=" (found",a&&(_+=` in field ${r}`),d&&(_+=` in document ${i}`),_+=")"),new Pe(me.INVALID_ARGUMENT,f+n+_)}function j2(n,e){return n.some(t=>t.isEqual(e))}class HC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tH extends HC{data(){return super.data()}}function rA(n,e){return"string"==typeof e?tA(n,e):e instanceof ih?e._internalPath:e._delegate._internalPath}class Um{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sh extends HC{constructor(e,t,r,i,a,d){super(e,t,r,i,d),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new GC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class GC extends sh{data(e={}){return super.data(e)}}class op{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Um(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new GC(this._firestore,this._userDataWriter,r.key,r,new Um(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new GC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Um(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new GC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Um(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==d.type&&(_=a.indexOf(d.doc.key),a=a.delete(d.doc.key)),1!==d.type&&(a=a.add(d.doc),w=a.indexOf(d.doc.key)),{type:nH(d.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function H2(n,e){return n instanceof sh&&e instanceof sh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof op&&e instanceof op&&n._firestore===e._firestore&&R2(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function G2(n){if(Kf(n)&&0===n.explicitOrderBy.length)throw new Pe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qC{}function ap(n,...e){for(const t of e)n=t._apply(n);return n}class rH extends qC{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Vm(e.firestore),r=function(i,a,d,f,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){K2(D,w);const V=[];for(const Y of D)V.push(Y2(f,i,Y));S={arrayValue:{values:V}}}else S=Y2(f,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||K2(D,w),S=B2(d,"where",D,"in"===w||"not-in"===w);const M=Fn.create(_,w,S);return function(V,Y){if(Y.S()){const De=gC(V);if(null!==De&&!De.isEqual(Y.field))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${Y.field.toString()}'`);const rt=pC(V);null!==rt&&Q2(0,Y.field,rt)}const ue=function(De,rt){for(const Je of De.filters)if(rt.indexOf(Je.op)>=0)return Je.op;return null}(V,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==ue)throw new Pe(me.INVALID_ARGUMENT,ue===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,M),M}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new $s(e.firestore,e.converter,function(i,a){const d=i.filters.concat([a]);return new zl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class sH extends qC{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Yf(i,a);return function(f,_){if(null===pC(f)){const w=gC(f);null!==w&&Q2(0,w,_.field)}}(r,d),d}(e._query,this.lc,this._c);return new $s(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new zl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class q2 extends qC{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new $s(e.firestore,e.converter,_C(e._query,this.wc,this.mc))}}class W2 extends qC{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=z2(e,this.type,this.gc,this.yc);return new $s(e.firestore,e.converter,(i=t,new zl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class Z2 extends qC{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=z2(e,this.type,this.gc,this.yc);return new $s(e.firestore,e.converter,(i=t,new zl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function z2(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof HC)return function(i,a,d,f,_){if(!f)throw new Pe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const D of fc(i))if(D.field.isKeyField())w.push(Zf(a,f.key));else{const S=f.data.field(D.field);if(lC(S))throw new Pe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const M=D.field.canonicalString();throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}w.push(S)}return new dc(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Vm(n.firestore);return function(a,d,f,_,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Pe(me.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let V=0;V<w.length;V++){const Y=w[V];if(S[V].field.isKeyField()){if("string"!=typeof Y)throw new Pe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!mC(a)&&-1!==Y.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const ue=a.path.child(Cn.fromString(Y));if(!ze.isDocumentKey(ue))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const De=new ze(ue);M.push(Zf(d,De))}else{const ue=B2(f,_,Y);M.push(ue)}}return new dc(M,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Y2(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mC(e)&&-1!==t.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Cn.fromString(t));if(!ze.isDocumentKey(r))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zf(n,new ze(r))}if(t instanceof xr)return Zf(n,t._key);throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KS(t)}.`)}function K2(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Q2(n,e,t){if(!t.isEqual(e))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class EP{convertValue(e,t="none"){switch(Zd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return Gf(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new JS(Zr(e.latitude),Zr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gS(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_m(e));default:return null}}convertTimestamp(e){const t=uc(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Cn.fromString(e);Ot(lL(r));const i=new Zl(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function iA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class fH extends EP{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xr(this.firestore,null,t)}}class J2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Vm(e)}set(e,t,r){this._verifyNotCommitted();const i=lp(e,this._firestore),a=iA(i.converter,t,r),d=eA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,gi.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=lp(e,this._firestore);let d;return d="string"==typeof(t=(0,F.m9)(t))||t instanceof ih?bP(this._dataReader,"WriteBatch.update",a._key,t,r,i):vP(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(d.toMutation(a._key,gi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lp(e,this._firestore);return this._mutations=this._mutations.concat(new Dv(t._key,gi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lp(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Pe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $m extends EP{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xr(this.firestore,null,t)}}function X2(n,e,t){n=Dn(n,xr);const r=Dn(n.firestore,Ur),i=iA(n.converter,e,t);return Gv(r,[eA(Vm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,gi.none())])}function eV(n,e,t,...r){n=Dn(n,xr);const i=Dn(n.firestore,Ur),a=Vm(i);let d;return d="string"==typeof(e=(0,F.m9)(e))||e instanceof ih?bP(a,"updateDoc",n._key,e,t,r):vP(a,"updateDoc",n._key,e),Gv(i,[d.toMutation(n._key,gi.exists(!0))])}function tV(n,...e){var t,r,i;n=(0,F.m9)(n);let a={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||_P(e[d])||(a=e[d],d++);const f={includeMetadataChanges:a.includeMetadataChanges};if(_P(e[d])){const S=e[d];e[d]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[d+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[d+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(n instanceof xr)w=Dn(n.firestore,Ur),D=oo(n._key.path),_={next:S=>{e[d]&&e[d](DP(w,n,S))},error:e[d+1],complete:e[d+2]};else{const S=Dn(n,$s);w=Dn(S.firestore,Ur),D=S._query;const M=new $m(w);_={next:V=>{e[d]&&e[d](new op(w,M,S,V))},error:e[d+1],complete:e[d+2]},G2(n._query)}return function(S,M,V,Y){const ue=new zS(Y),De=new Ok(M,ue,V);return S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return xk(yield Hv(S),De)})),()=>{ue.Ia(),S.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return Rk(yield Hv(S),De)}))}}(Ti(w),D,f,_)}function Gv(n,e){return function(t,r){const i=new Ci;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e,t){return Uk.apply(this,arguments)}(yield pP(t),r,i)})),i.promise}(Ti(n),e)}function DP(n,e,t){const r=t.docs.get(e._key),i=new $m(n);return new sh(n,i,e._key,r,new Um(t.hasPendingWrites,t.fromCache),e.converter)}class EH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Vm(e)}get(e){const t=lp(e,this._firestore),r=new fH(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new HC(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new HC(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=lp(e,this._firestore),a=iA(i.converter,t,r),d=eA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(e,t,r,...i){const a=lp(e,this._firestore);let d;return d="string"==typeof(t=(0,F.m9)(t))||t instanceof ih?bP(this._dataReader,"Transaction.update",a._key,t,r,i):vP(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,d),this}delete(e){const t=lp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lp(e,this._firestore),r=new $m(this._firestore);return super.get(e).then(i=>new sh(this._firestore,r,t._key,i._document,new Um(!1,!1),t.converter))}}function TP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rV(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function iV(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){jf=Ki.SDK_VERSION,(0,Ki._registerComponent)(new ca.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new Ur(i,new oC(t.getProvider("auth-internal")),new mR(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Ki.registerVersion)(dS,"3.4.8",n),(0,Ki.registerVersion)(dS,"3.4.8","esm2017")}();class WC{constructor(e){this._delegate=e}static fromBase64String(e){return iV(),new WC(vc.fromBase64String(e))}static fromUint8Array(e){return rV(),new WC(vc.fromUint8Array(e))}toBase64(){return iV(),this._delegate.toBase64()}toUint8Array(){return rV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IP(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class kH{enableIndexedDbPersistence(e,t){return function(n,e){O2(n=Dn(n,Ur));const t=Ti(n),r=n._freezeSettings(),i=new aP;return P2(t,i,new m2(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){O2(n=Dn(n,Ur));const e=Ti(n),t=n._freezeSettings(),r=new aP;return P2(e,r,new Cj(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(r){if(!Ql.vt())return Promise.resolve();const i=r+"main";yield Ql.delete(i)}),function(r){return t.apply(this,arguments)})(XR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Zl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&qd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var i;const a=(n=Dn(n,$C))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&qd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Bi.MOCK_USER;else{d=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Bi(_)}n._authCredentials=new fS(new sC(d,f))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield b2(n),t=yield w2(n);return e.setNetworkEnabled(!0),function(r){const i=tt(r);return i.fu.delete(0),BC(i)}(t)}))}(Ti(n=Dn(n,Ur)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield b2(n),t=yield w2(n);return e.setNetworkEnabled(!1),(r=(0,Ce.Z)(function*(i){const a=tt(i);a.fu.add(0),yield Fv(a),a.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ti(n=Dn(n,Ur)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,T2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Ci;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(n,e){return qk.apply(this,arguments)}(yield pP(e),t)})),t.promise}(Ti(n=Dn(n,Ur)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new zS(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Hv(n),i=t,tt(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return r=yield Hv(n),i=t,void tt(r).Eu.delete(i);var r,i}))}}(Ti(n=Dn(n,Ur)),_P(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qv(this,x2(this._delegate,e))}catch(t){throw lo(t,"collection()","Firestore.collection()")}}doc(e){try{return new ll(this,QS(this._delegate,e))}catch(t){throw lo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new uo(this,function(n,e){if(n=Dn(n,$C),mP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $s(n,null,(t=e,new zl(Cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw lo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const r=yield(i=n,YS(i).then(a=>a.datastore));var i;new Tj(n.asyncQueue,r,e,t).run()})),t.promise}(Ti(n=Dn(n,Ur)),t=>e(new EH(n,t)))}(this._delegate,t=>e(new oV(this,t)))}batch(){return Ti(this._delegate),new aV(new J2(this._delegate,e=>Gv(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Ti(n=Dn(n,Ur)),r=new Vj;return function(n,e,t,r){const i=function(a,d){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return _2(_,w);if(_ instanceof ArrayBuffer)return _2(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Ej(_,d);var _}(t,VC(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function(n,e,t){const r=tt(n);var i;(i=(0,Ce.Z)(function*(a,d,f){try{const _=yield d.getMetadata();if(yield function(M,V){const Y=tt(M),ue=rs(V.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",De=>Y._s.getBundleMetadata(De,V.id)).then(De=>!!De&&De.createTime.compareTo(ue)>=0)}(a.localStore,_))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(M=_).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);f._updateProgress(o2(_));const w=new ej(_,a.localStore,d.M);let D=yield d.da();for(;D;){const M=yield w.ku(D);M&&f._updateProgress(M),D=yield d.da()}const S=yield w.complete();return yield rh(a,S.Fu,void 0),yield function(M,V){const Y=tt(M);return Y.persistence.runTransaction("Save bundle","readwrite",ue=>Y._s.saveBundleMetadata(ue,V))}(a.localStore,_),f._completeWith(S.progress),Promise.resolve(S.Ou)}catch(_){return qd("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var M}),function(a,d,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield pP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,r){const i=tt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield fP(n),e)}))}(Ti(n=Dn(n,Ur)),e).then(t=>t?new $s(n,null,t.query):null)}(this._delegate,e).then(t=>t?new uo(this,t):null)}}class sA extends EP{constructor(e){super(),this.firestore=e}convertBytes(e){return new WC(new vc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ll.forKey(t,this.firestore,null)}}class oV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sA(e)}get(e){const t=Hm(e);return this._delegate.get(t).then(r=>new ZC(this._firestore,new sh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Hm(e);return r?(TP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Hm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Hm(e);return this._delegate.delete(t),this}}class aV{constructor(e){this._delegate=e}set(e,t,r){const i=Hm(e);return r?(TP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Hm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Hm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new GC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zC(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new jm(e,new sA(e),t),i.set(t,a)),a}}jm.INSTANCES=new WeakMap;class ll{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ll(t,new xr(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new ll(t,new xr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qv(this.firestore,x2(this._delegate,e))}catch(t){throw lo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof xr&&M2(this._delegate,e)}set(e,t){t=TP("DocumentReference.set",t);try{return t?X2(this._delegate,e,t):X2(this._delegate,e)}catch(r){throw lo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?eV(this._delegate,e):eV(this._delegate,e,t,...r)}catch(i){throw lo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Gv(Dn(n.firestore,Ur),[new Dv(n._key,gi.none())])}(this._delegate)}onSnapshot(...e){const t=lV(e),r=uV(e,i=>new ZC(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return tV(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Dn(n,xr);const e=Dn(n.firestore,Ur),t=Ti(e),r=new $m(e);return function(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,d){try{const f=yield function(_,w){const D=tt(_);return D.persistence.runTransaction("read document","readonly",S=>D.ci.Ls(S,w))}(i,a);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Pe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Bv(f,`Failed to get document '${a} from cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield fP(n),e,t);var r})),t.promise}(t,n._key).then(i=>new sh(e,r,n._key,i,new Um(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Dn(n,xr);const e=Dn(n.firestore,Ur);return C2(Ti(e),n._key,{source:"server"}).then(t=>DP(e,n,t))}(this._delegate):function(n){n=Dn(n,xr);const e=Dn(n.firestore,Ur);return C2(Ti(e),n._key).then(t=>DP(e,n,t))}(this._delegate),t.then(r=>new ZC(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ll(this.firestore,this._delegate.withConverter(e?jm.getInstance(this.firestore,e):null))}}function lo(n,e,t){return n.message=n.message.replace(e,t),n}function lV(n){for(const e of n)if("object"==typeof e&&!IP(e))return e;return{}}function uV(n,e){var t,r;let i;return i=IP(n[0])?n[0]:IP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ZC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ll(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return H2(this._delegate,e._delegate)}}class zC extends ZC{data(e){const t=this._delegate.data(e);return function(n,e){n||ft()}(void 0!==t),t}}class uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sA(e)}where(e,t,r){try{return new uo(this.firestore,ap(this._delegate,function(n,e,t){const r=e,i=rA("where",n);return new rH(i,r,t)}(e,t,r)))}catch(i){throw lo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new uo(this.firestore,ap(this._delegate,function(n,e="asc"){const t=e,r=rA("orderBy",n);return new sH(r,t)}(e,t)))}catch(r){throw lo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new uo(this.firestore,ap(this._delegate,function(n){return A2("limit",n),new q2("limit",n,"F")}(e)))}catch(t){throw lo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new uo(this.firestore,ap(this._delegate,function(n){return A2("limitToLast",n),new q2("limitToLast",n,"L")}(e)))}catch(t){throw lo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new W2("startAt",n,!0)}(...e)))}catch(t){throw lo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new W2("startAfter",n,!1)}(...e)))}catch(t){throw lo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new Z2("endBefore",n,!1)}(...e)))}catch(t){throw lo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new Z2("endAt",n,!0)}(...e)))}catch(t){throw lo(t,"endAt()","Query.endAt()")}}isEqual(e){return R2(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=Dn(n,$s);const e=Dn(n.firestore,Ur),t=Ti(e),r=new $m(e);return function(n,e){const t=new Ci;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(r=(0,Ce.Z)(function*(i,a,d){try{const f=yield jS(i,a,!0),_=new u2(a,f.li),w=_.Gu(f.documents),D=_.applyChanges(w,!1);d.resolve(D.snapshot)}catch(f){const _=Bv(f,`Failed to execute query '${a} against cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield fP(n),e,t);var r})),t.promise}(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=Dn(n,$s);const e=Dn(n.firestore,Ur),t=Ti(e),r=new $m(e);return E2(t,n._query,{source:"server"}).then(i=>new op(e,r,n,i))}(this._delegate):function(n){n=Dn(n,$s);const e=Dn(n.firestore,Ur),t=Ti(e),r=new $m(e);return G2(n._query),E2(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate),t.then(r=>new SP(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=lV(e),r=uV(e,i=>new SP(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return tV(this._delegate,t,r)}withConverter(e){return new uo(this.firestore,this._delegate.withConverter(e?jm.getInstance(this.firestore,e):null))}}class OH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new zC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new OH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new zC(this._firestore,r))})}isEqual(e){return H2(this._delegate,e._delegate)}}class qv extends uo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ll(this.firestore,e):null}doc(e){try{return new ll(this.firestore,void 0===e?QS(this._delegate):QS(this._delegate,e))}catch(t){throw lo(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=Dn(n.firestore,Ur),r=QS(n),i=iA(n.converter,e);return Gv(t,[eA(Vm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,gi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ll(this.firestore,t))}isEqual(e){return M2(this._delegate,e._delegate)}withConverter(e){return new qv(this.firestore,this._delegate.withConverter(e?jm.getInstance(this.firestore,e):null))}}function Hm(n){return Dn(n,xr)}class AP{constructor(...e){this._delegate=new ih(...e)}static documentId(){return new AP(Di.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof ih&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new yP("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Gm(e)}static delete(){const e=new jC("deleteField");return e._methodName="FieldValue.delete",new Gm(e)}static arrayUnion(...e){const t=function(...n){return new Qj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gm(t)}static arrayRemove(...e){const t=function(...n){return new Jj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gm(t)}static increment(e){const t=function(n){return new Xj("increment",n)}(e);return t._methodName="FieldValue.increment",new Gm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const FH={Firestore:sV,GeoPoint:JS,Timestamp:Er,Blob:WC,Transaction:oV,WriteBatch:aV,DocumentReference:ll,DocumentSnapshot:ZC,Query:uo,QueryDocumentSnapshot:zC,QuerySnapshot:SP,CollectionReference:qv,FieldPath:AP,FieldValue:Gm,setLogLevel:function(n){!function(n){lc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function cV(n,e){return function(n,e=ku.z){return new Yn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function NP(n,e){return cV(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function oA(n,e){return NP(n,e).pipe(ea(void 0),Oy(),(0,pt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const _=i.find(D=>D.doc.ref.isEqual(d.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),a}))}function dV(n,e,t){return oA(n,t).pipe($a((r,i)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return xP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return xP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return xP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),pd(),(0,pt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function xP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function hV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new ca.wA("firestore-compat",t=>((e,t)=>new sV(e,t,new kH))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},FH)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(jE.Z);class fV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=oA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ea(void 0),Oy(),Qn(([r,i])=>i.length>0||!r),(0,pt.U)(([r,i])=>i),wn.iC)}auditTrail(e){return this.stateChanges(e).pipe($a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hV(e);return dV(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return NP(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),wn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(wn.iC)}add(e){return this.ref.add(e)}doc(e){return new pV(this.ref.doc(e),this.afs)}}class pV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=_V(r,t);return new fV(i,a,this.afs)}snapshotChanges(){return function(n,e){return cV(n,e).pipe(ea(void 0),Oy(),(0,pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Xt.D)(this.ref.get(e)).pipe(wn.iC)}}class HH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?oA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qn(t=>t.length>0),wn.iC):oA(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(e){return this.stateChanges(e).pipe($a((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hV(e);return dV(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return NP(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),wn.iC)}get(e){return(0,Xt.D)(this.query.get(e)).pipe(wn.iC)}}const gV=new u.OlP("angularfire2.enableFirestorePersistence"),mV=new u.OlP("angularfire2.firestore.persistenceSettings"),GH=new u.OlP("angularfire2.firestore.settings"),qH=new u.OlP("angularfire2.firestore.use-emulator");function _V(n,e=(t=>t)){return{query:e(n),ref:n}}let yV=(()=>{class n{constructor(t,r,i,a,d,f,_,w,D,S,M,V,Y,ue,De,rt,Je){this.schedulers=_;const it=(0,Fr.on)(t,f,r),at=D;S&&zw(it,f,M,Y,ue,De,V,rt),[this.firestore,this.persistenceEnabled$]=(0,Fr.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const Ft=f.runOutsideAngular(()=>it.firestore());if(a&&Ft.settings(a),at&&Ft.useEmulator(...at),i&&!gh(d)){const ln=()=>{try{return(0,Xt.D)(Ft.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Yr){return"undefined"!=typeof console&&console.warn(Yr),(0,ct.of)(!1)}};return[Ft,f.runOutsideAngular(ln)]}return[Ft,(0,ct.of)(!1)]},[a,at,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:d}=_V(i,r),f=this.schedulers.ngZone.run(()=>a);return new fV(f,d,this)}collectionGroup(t,r){const i=r||(d=>d),a=this.firestore.collectionGroup(t);return new HH(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new pV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fr.Dh),u.LFG(Fr.xv,8),u.LFG(gV,8),u.LFG(GH,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(wn.HU),u.LFG(mV,8),u.LFG(qH,8),u.LFG(jg,8),u.LFG(qw,8),u.LFG(ky,8),u.LFG($g,8),u.LFG(Ww,8),u.LFG(mI,8),u.LFG(Zw,8),u.LFG(Bg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WH=(()=>{class n{constructor(){Ug.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gV,useValue:!0},{provide:mV,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[yV]}),n})(),ZH=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r)}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=t),null!==t}GoogleAuth(){return this.AuthLogin(new FM.N).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload()})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(yV),u.LFG(jg),u.LFG(gs),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var zH=B(9105);function Es(n,e,t,r){return(0,zH.m)(t)&&(r=t,t=void 0),r?Es(n,e,t).pipe((0,pt.U)(i=>(0,xs.k)(i)?r(...i):r(i))):new Yn.y(i=>{vV(n,e,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,t)})}function vV(n,e,t,r,i){let a;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(e,t,i),a=()=>d.removeEventListener(e,t,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(e,t),a=()=>d.off(e,t)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(e,t),a=()=>d.removeListener(e,t)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)vV(n[d],e,t,r,i)}r.add(a)}function JH(n){const{index:e,period:t,subscriber:r}=n;if(r.next(e),!r.closed){if(-1===t)return r.complete();n.index=e+1,this.schedule(n,t)}}class XH{call(e,t){return t.subscribe(new e6(e))}}class e6 extends Th{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let r=0;r<t&&!this.hasFirst;r++){const a=Kn(this,e[r],void 0,r);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}}notifyNext(e,t,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(t)}}var t6=B(8640);new Yn.y(t6.Z);var aA=B(377);function lA(...n){const e=n[n.length-1];return"function"==typeof e&&n.pop(),(0,_u.n)(n,void 0).lift(new n6(e))}class n6{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new r6(e,this.resultSelector))}}class r6 extends or.L{constructor(e,t,r=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;(0,xs.k)(e)?t.push(new s6(e)):t.push("function"==typeof e[aA.hZ]?new i6(e[aA.hZ]()):new o6(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let r=0;r<t;r++){let i=e[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,r=this.destination;for(let d=0;d<t;d++){let f=e[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const a=[];for(let d=0;d<t;d++){let f=e[d],_=f.next();if(f.hasCompleted()&&(i=!0),_.done)return void r.complete();a.push(_.value)}this.resultSelector?this._tryresultSelector(a):r.next(a),i&&r.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class i6{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class s6{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[aA.hZ](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class o6 extends Yi.Ds{constructor(e,t,r){super(e),this.parent=t,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[aA.hZ](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return(0,Yi.ft)(this.observable,new Yi.IY(this))}}function ti(n){return e=>e.lift(new l6(n))}class l6{constructor(e){this.notifier=e}call(e,t){const r=new u6(e),i=(0,Yi.ft)(this.notifier,new Yi.IY(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r}}class u6 extends Yi.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}B(1593);var m6=B(1555);function uA(n,e){return new Yn.y(t=>{const r=n.length;if(0===r)return void t.complete();const i=new Array(r);let a=0,d=0;for(let f=0;f<r;f++){const _=(0,Xt.D)(n[f]);let w=!1;t.add(_.subscribe({next:D=>{w||(w=!0,d++),i[f]=D},error:D=>t.error(D),complete:()=>{a++,(a===r||!w)&&(d===r&&t.next(e?e.reduce((D,S,M)=>(D[S]=i[M],D),{}):i),t.complete())}}))}})}let TV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),qm=(()=>{class n extends TV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Ds=new u.OlP("NgValueAccessor"),v6={provide:Ds,useExisting:(0,u.Gpc)(()=>cA),multi:!0},w6=new u.OlP("CompositionEventMode");let cA=(()=>{class n extends TV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(w6,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([v6]),u.qOj]}),n})();const Ts=new u.OlP("NgValidators"),cp=new u.OlP("NgAsyncValidators");function FV(n){return null!=n}function LV(n){const e=(0,u.QGY)(n)?(0,Xt.D)(n):n;return(0,u.CqO)(e),e}function VV(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function BV(n,e){return e.map(t=>t(n))}function UV(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function RP(n){return null!=n?function(n){if(!n)return null;const e=n.filter(FV);return 0==e.length?null:function(t){return VV(BV(t,e))}}(UV(n)):null}function kP(n){return null!=n?function(n){if(!n)return null;const e=n.filter(FV);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,xs.k)(e))return uA(e,null);if((0,m6.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return uA(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return uA(n=1===n.length&&(0,xs.k)(n[0])?n[0]:n,null).pipe((0,pt.U)(t=>e(...t)))}return uA(n,null)}(BV(t,e).map(LV)).pipe((0,pt.U)(VV))}}(UV(n)):null}function HV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PP(n){return n?Array.isArray(n)?n:[n]:[]}function dA(n,e){return Array.isArray(n)?n.includes(e):n===e}function WV(n,e){const t=PP(e);return PP(n).forEach(i=>{dA(t,i)||t.push(i)}),t}function ZV(n,e){return PP(e).filter(t=>!dA(n,t))}let zV=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=RP(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n}),n})(),co=(()=>{class n extends zV{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();class hp extends zV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let KV=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(hp,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})();function YC(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(HV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(HV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();gA(e._rawValidators,i),gA(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&QV(n,e)})}(n,e),function(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&QV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function QV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _A(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const KC="VALID",yA="INVALID",Wv="PENDING",QC="DISABLED";function UP(n){return(jP(n)?n.validators:n)||null}function eB(n){return Array.isArray(n)?RP(n):n||null}function $P(n,e){return(jP(e)?e.asyncValidators:n)||null}function tB(n){return Array.isArray(n)?kP(n):n||null}function jP(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class HP{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=eB(this._rawValidators),this._composedAsyncValidatorFn=tB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===KC}get invalid(){return this.status===yA}get pending(){return this.status==Wv}get disabled(){return this.status===QC}get enabled(){return this.status!==QC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=eB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=tB(e)}addValidators(e){this.setValidators(WV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ZV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ZV(e,this._rawAsyncValidators))}hasValidator(e){return dA(this._rawValidators,e)}hasAsyncValidator(e){return dA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=QC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=KC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===KC||this.status===Wv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?QC:KC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wv,this._hasOwnPendingAsyncValidator=!0;const t=LV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=r instanceof GP?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof F6&&r.at(i)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?QC:this.errors?yA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wv)?Wv:this._anyControlsHaveStatus(yA)?yA:KC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jP(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vA extends HP{constructor(e=null,t,r){super(UP(t),$P(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_A(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_A(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class GP extends HP{constructor(e,t,r){super(UP(t),$P(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof vA?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class F6 extends HP{constructor(e,t,r){super(UP(t),$P(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof vA?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const B6={provide:hp,useExisting:(0,u.Gpc)(()=>WP)},iB=(()=>Promise.resolve(null))();let WP=(()=>{class n extends hp{constructor(t,r,i,a){super(),this.control=new vA,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===cA?t=a:function(n){return Object.getPrototypeOf(n.constructor)===qm}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){YC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){iB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;iB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(co,9),u.Y36(Ts,10),u.Y36(cp,10),u.Y36(Ds,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([B6]),u.qOj,u.TTD]}),n})(),oB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const K6={provide:Ds,useExisting:(0,u.Gpc)(()=>bA),multi:!0};function hB(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let bA=(()=>{class n extends qm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const i=hB(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([K6]),u.qOj]}),n})(),QP=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(hB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(bA,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const J6={provide:Ds,useExisting:(0,u.Gpc)(()=>JP),multi:!0};function fB(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let JP=(()=>{class n extends qm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,d)=>{a._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const a=r.selectedOptions;for(let d=0;d<a.length;d++){const f=a.item(d),_=this._getOptionValue(f.value);i.push(_)}}else{const a=r.options;for(let d=0;d<a.length;d++){const f=a.item(d);if(f.selected){const _=this._getOptionValue(f.value);i.push(_)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([J6]),u.qOj]}),n})(),XP=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(fB(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(fB(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(JP,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),EB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[oB]]}),n})(),DB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[EB]}),n})();const Zv=["*"],YG=["dialog"];function fp(n){return null!=n}function Yv(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const SB={animation:!0,transitionTimerDelayMs:5};let os=(()=>{class n{constructor(){this.animation=SB.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const a8=()=>{},{transitionTimerDelayMs:l8}=SB,eE=new Map,$i=(n,e,t,r)=>{let i=r.context||{};const a=eE.get(e);if(a)switch(r.runningTransition){case"continue":return ci.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),eE.delete(e)}const d=t(e,r.animation,i)||a8;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>d()),(0,ct.of)(void 0).pipe(function(n){return e=>new Yn.y(t=>e.subscribe(d=>n.run(()=>t.next(d)),d=>n.run(()=>t.error(d)),()=>n.run(()=>t.complete())))}(n));const f=new En.xQ,_=new En.xQ,w=f.pipe(function(...n){return e=>Zs(e,(0,ct.of)(...n))}(!0));eE.set(e,{transition$:f,complete:()=>{_.next(),_.complete()},context:i});const D=function(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const S=Es(e,"transitionend").pipe(ti(w),Qn(({target:V})=>V===e));(function(...n){if(1===n.length){if(!(0,xs.k)(n[0]))return n[0];n=n[0]}return(0,_u.n)(n,void 0).lift(new XH)})(function(n=0,e,t){let r=-1;return(0,P_.k)(e)?r=Number(e)<1?1:Number(e):(0,Jo.K)(e)&&(t=e),(0,Jo.K)(t)||(t=ku.P),new Yn.y(i=>{const a=(0,P_.k)(n)?n:+n-t.now();return t.schedule(JH,a,{index:0,period:r,subscriber:i})})}(D+l8).pipe(ti(w)),S,_).pipe(ti(w)).subscribe(()=>{eE.delete(e),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var pn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(pn||(pn={})),pn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const GB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function qB(n){const e=Array.from(n.querySelectorAll(GB)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new class{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))r=e.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const a=this.offsetParent(e);r=this.offset(e,!1),a!==document.documentElement&&(i=this.offset(a,!1)),i.top+=a.clientTop,i.left+=a.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,t&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(e,t=!0){const r=e.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let a={height:r.height||e.offsetHeight,width:r.width||e.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return t&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}positionElements(e,t,r,i){const[a="top",d="center"]=r.split("-"),f=i?this.offset(e,!1):this.position(e,!1),_=this.getAllStyles(t),w=parseFloat(_.marginTop),D=parseFloat(_.marginBottom),S=parseFloat(_.marginLeft),M=parseFloat(_.marginRight);let V=0,Y=0;switch(a){case"top":V=f.top-(t.offsetHeight+w+D);break;case"bottom":V=f.top+f.height;break;case"left":Y=f.left-(t.offsetWidth+S+M);break;case"right":Y=f.left+f.width}switch(d){case"top":V=f.top;break;case"bottom":V=f.top+f.height-t.offsetHeight;break;case"left":Y=f.left;break;case"right":Y=f.left+f.width-t.offsetWidth;break;case"center":"top"===a||"bottom"===a?Y=f.left+f.width/2-t.offsetWidth/2:V=f.top+f.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(Y)}px, ${Math.round(V)}px)`;const ue=t.getBoundingClientRect(),De=document.documentElement,rt=window.innerHeight||De.clientHeight,Je=window.innerWidth||De.clientWidth;return ue.left>=0&&ue.top>=0&&ue.right<=Je&&ue.bottom<=rt}},new Date(1882,10,12),new Date(2174,10,25);let fO=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(os))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(os))},token:n,providedIn:"root"}),n})();class Km{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}const s5=()=>{};let oU=(()=>{class n{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):s5}_adjustBody(t){const r=this._document.body,i=r.style.paddingRight,a=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${a+t}px`,()=>r.style["padding-right"]=i}_isPresent(t){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(t);const i=t.getBoundingClientRect().width-t.clientWidth;return r.removeChild(t),i}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(de))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(de))},token:n,providedIn:"root"}),n})(),o5=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(yi(1)).subscribe(()=>{$i(this._zone,this._el.nativeElement,(t,r)=>{r&&Yv(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return $i(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,r){2&t&&(u.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),u.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class aU{close(e){}dismiss(e){}}class a5{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new En.xQ,this._dismissed=new En.xQ,this._hidden=new En.xQ,e.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,d)=>{this._resolve=a,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ti(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ti(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(r=>{!1!==r&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ct.of)(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),lA(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var oE=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(oE||(oE={})),oE))();let l5=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new En.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new En.xQ,this.hidden=new En.xQ}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(yi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=lA($i(this._zone,t,()=>t.classList.remove("show"),r),$i(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const t={animation:this.animation,runningTransition:"continue"};lA($i(this._zone,this._elRef.nativeElement,(a,d)=>{d&&Yv(a),a.classList.add("show")},t),$i(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Es(t,"keydown").pipe(ti(this._closed$),Qn(i=>i.which===pn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(oE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Es(this._dialogEl.nativeElement,"mousedown").pipe(ti(this._closed$),(0,lr.b)(()=>r=!1),nr(()=>Es(t,"mouseup").pipe(ti(this._closed$),yi(1))),Qn(({target:i})=>t===i)).subscribe(()=>{r=!0}),Es(t,"click").pipe(ti(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(oE.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=qB(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&$i(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(de),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&u.Gf(YG,7),2&t){let i;u.iGM(i=u.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),u.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),u.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Zv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div",0,1),u.TgZ(2,"div",2),u.Hsn(3),u.qZA(),u.qZA()),2&t&&u.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),lU=(()=>{class n{constructor(t,r,i,a,d,f){this._applicationRef=t,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new En.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const i=Es(e,"focusin").pipe(ti(t),(0,pt.U)(a=>a.target));Es(e,"keydown").pipe(ti(t),Qn(a=>a.which===pn.Tab),Yp(i)).subscribe(([a,d])=>{const[f,_]=qB(e);(d===f||d===e)&&a.shiftKey&&(_.focus(),a.preventDefault()),d===_&&!a.shiftKey&&(f.focus(),a.preventDefault())}),r&&Es(e,"click").pipe(ti(t),Yp(i),(0,pt.U)(a=>a[1])).subscribe(a=>a.focus())})})(this._ngZone,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}open(t,r,i,a){const d=a.container instanceof HTMLElement?a.container:fp(a.container)?this._document.querySelector(a.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),_=this._scrollBar.compensate(),w=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const D=new aU,S=this._getContentRef(t,a.injector||r,i,D,a);let M=!1!==a.backdrop?this._attachBackdrop(t,d):void 0,V=this._attachWindowComponent(t,d,S),Y=new a5(V,S,M,a.beforeDismiss);return this._registerModalRef(Y),this._registerWindowCmpt(V),Y.result.then(_,_),Y.result.then(w,w),D.close=ue=>{Y.close(ue)},D.dismiss=ue=>{Y.dismiss(ue)},this._applyWindowOptions(V.instance,a),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),M&&M.instance&&(this._applyBackdropOptions(M.instance,a),M.changeDetectorRef.detectChanges()),V.changeDetectorRef.detectChanges(),Y}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let a=t.resolveComponentFactory(o5).create(this._injector);return this._applicationRef.attachView(a.hostView),r.appendChild(a.location.nativeElement),a}_attachWindowComponent(t,r,i){let d=t.resolveComponentFactory(l5).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(t,r){this._windowAttributes.forEach(i=>{fp(r[i])&&(t[i]=r[i])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(i=>{fp(r[i])&&(t[i]=r[i])})}_getContentRef(t,r,i,a,d){return i?i instanceof u.Rgc?this._createFromTemplateRef(i,a):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(t,r,i,a,d):new Km([])}_createFromTemplateRef(t,r){const a=t.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(a),new Km([a.rootNodes],a)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Km([[r]])}_createFromComponent(t,r,i,a,d){const f=t.resolveComponentFactory(i),_=u.zs3.create({providers:[{provide:aU,useValue:a}],parent:r}),w=f.create(_),D=w.location.nativeElement;return d.scrollable&&D.classList.add("component-host-scrollable"),this._applicationRef.attachView(w.hostView),new Km([[D]],w.hostView,w)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(de),u.LFG(oU),u.LFG(u.FYo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(u.z2F),u.LFG(u.gxx),u.LFG(de),u.LFG(oU),u.LFG(u.FYo),u.LFG(u.R0b))},token:n,providedIn:"root"}),n})(),uU=(()=>{class n{constructor(t,r,i,a){this._moduleCFR=t,this._injector=r,this._modalStack=i,this._config=a}open(t,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(lU),u.LFG(fO))},n.\u0275prov=u.Yz7({factory:function(){return new n(u.LFG(u._Vd),u.LFG(u.gxx),u.LFG(lU),u.LFG(fO))},token:n,providedIn:"root"}),n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});const W5=["modalLogin"];function Z5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",10),u.TgZ(1,"button",11),u.NdJ("click",function(){return u.CHM(t),u.oxw().novoSinal()}),u._uU(2,"Novo sinal"),u.qZA(),u.qZA()}}function z5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"button",12),u.NdJ("click",function(){return u.CHM(t),u.oxw().AuthService.SignOut()}),u._UZ(2,"i",13),u.qZA(),u.qZA()}}function Y5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",25),u.TgZ(1,"div",26),u.TgZ(2,"input",27),u.NdJ("ngModelChange",function(i){return u.CHM(t).$implicit.valor=i}),u.qZA(),u.qZA(),u.TgZ(3,"div",26),u.TgZ(4,"input",28),u.NdJ("ngModelChange",function(i){return u.CHM(t).$implicit.descricao=i}),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit;u.xp6(2),u.Q6J("ngModel",t.valor),u.xp6(2),u.Q6J("ngModel",t.descricao)}}function K5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",14),u.TgZ(1,"div",15),u.TgZ(2,"label",16),u._uU(3,"Data"),u.qZA(),u.TgZ(4,"input",17),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().sinalModel.data=i}),u.qZA(),u.qZA(),u.TgZ(5,"div",15),u.TgZ(6,"label",16),u._uU(7,"Moeda"),u.qZA(),u.TgZ(8,"input",18),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().sinalModel.moeda=i}),u.qZA(),u.qZA(),u.TgZ(9,"div",15),u.TgZ(10,"label",16),u._uU(11,"Tipo"),u.qZA(),u.TgZ(12,"select",19),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().sinalModel.tipo=i}),u.TgZ(13,"option",20),u._uU(14,"LONG"),u.qZA(),u.TgZ(15,"option",21),u._uU(16,"SHORT"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(17,"div",15),u.TgZ(18,"label",16),u._uU(19,"Entradas"),u.qZA(),u.YNc(20,Y5,5,2,"div",22),u.qZA(),u.TgZ(21,"div",15),u.TgZ(22,"button",23),u.NdJ("click",function(){return u.CHM(t),u.oxw().salvarEntrada()}),u._uU(23,"Salvar"),u.qZA(),u.TgZ(24,"button",24),u.NdJ("click",function(){return u.CHM(t),u.oxw().showFormNovoSinal=!1}),u._uU(25,"Cancelar"),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(4),u.Q6J("ngModel",t.sinalModel.data),u.xp6(4),u.Q6J("ngModel",t.sinalModel.moeda),u.xp6(4),u.Q6J("ngModel",t.sinalModel.tipo),u.xp6(8),u.Q6J("ngForOf",t.sinalModel.entradas)}}function Q5(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw(2);u.xp6(1),u.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function J5(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",45),u.TgZ(1,"span",46),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw(2).copyEntry(i.sugestao)}),u._uU(2),u.qZA(),u._UZ(3,"br"),u.qZA()}if(2&n){const t=u.oxw().$implicit;u.xp6(2),u.hij(" Sugest\xe3o entrada ",t.sugestao,"")}}function X5(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",":: "+t.priceCoinPercentage+"%"," ")}}function eq(n,e){if(1&n&&(u.TgZ(0,"div",49),u._UZ(1,"i",50),u.TgZ(2,"small"),u._uU(3),u.YNc(4,X5,2,1,"ng-container",3),u.qZA(),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw(2);u.xp6(3),u.hij("",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price," "),u.xp6(1),u.Q6J("ngIf",t.priceCoinPercentage)}}function tq(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",":: "+t.priceCoinPercentage+"%"," ")}}function nq(n,e){if(1&n&&(u.TgZ(0,"div",49),u._UZ(1,"i",50),u.TgZ(2,"small"),u._uU(3),u.qZA(),u.YNc(4,tq,2,1,"ng-container",3),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw(2);u.xp6(3),u.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price),u.xp6(1),u.Q6J("ngIf",t.priceCoinPercentage)}}function rq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li"),u.YNc(1,eq,5,2,"div",47),u.TgZ(2,"div"),u.TgZ(3,"i",48),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(3).toggleAlcancado(a)}),u.qZA(),u.TgZ(4,"span",46),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(3).copyEntry(a.valor)}),u._uU(5),u.qZA(),u.qZA(),u.YNc(6,nq,5,2,"div",47),u._UZ(7,"div"),u.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=u.oxw().$implicit,a=u.oxw(2);u.xp6(1),u.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),u.xp6(2),u.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),u.xp6(2),u.AsE(" ",t.valor," - ",t.descricao," "),u.xp6(1),u.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(t.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(t.valor)))}}function iq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",33),u.TgZ(1,"div",34),u.TgZ(2,"span",35),u.TgZ(3,"i",36),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(2).togglePinWatcher(a)}),u.qZA(),u.qZA(),u.TgZ(4,"h5",37),u.TgZ(5,"strong"),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"h5"),u.YNc(8,Q5,2,1,"span",3),u.qZA(),u.TgZ(9,"h6",38),u._uU(10),u.ALo(11,"date"),u.qZA(),u.YNc(12,J5,4,1,"div",39),u.TgZ(13,"div"),u.TgZ(14,"ul",40),u.YNc(15,rq,8,5,"li",41),u.qZA(),u.qZA(),u.TgZ(16,"div"),u.TgZ(17,"span",35),u.TgZ(18,"button",42),u.NdJ("click",function(){const i=u.CHM(t),a=i.$implicit,d=i.index;return u.oxw(2).editarSinal(a,d)}),u._UZ(19,"i",43),u.qZA(),u.TgZ(20,"button",12),u.NdJ("click",function(){const i=u.CHM(t),a=i.$implicit,d=i.index;return u.oxw(2).excluirSinal(a,d)}),u._UZ(21,"i",44),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),u.xp6(3),u.Q6J("ngClass",r.watchersIDPinnedList.indexOf(t.id)>-1?"fa-star text-danger":"fa-star-o"),u.xp6(3),u.Oqu(t.moeda),u.xp6(2),u.Q6J("ngIf",r.PriceCoinMap[t.moeda]),u.xp6(1),u.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),u.xp6(1),u.AsE(" ",t.tipo," - ",u.xi3(11,9,t.data,"dd/MM/yyyy")," "),u.xp6(2),u.Q6J("ngIf",t.sugestao),u.xp6(3),u.Q6J("ngForOf",t.entradas)}}function sq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"h3",29),u._uU(2,"Favoritados "),u.TgZ(3,"button",30),u.NdJ("click",function(){return u.CHM(t),u.MAs(5).classList.toggle("hidden")}),u.qZA(),u.qZA(),u.TgZ(4,"div",25,31),u.YNc(6,iq,22,12,"div",32),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(6),u.Q6J("ngForOf",t.watchersPinnedList)}}function oq(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw(2);u.xp6(1),u.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function aq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",45),u.TgZ(1,"span",46),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw(2).copyEntry(i.sugestao)}),u._uU(2),u.qZA(),u._UZ(3,"br"),u.qZA()}if(2&n){const t=u.oxw().$implicit;u.xp6(2),u.hij(" Sugest\xe3o entrada ",t.sugestao,"")}}function lq(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",":: "+t.priceCoinPercentage+"%"," ")}}function uq(n,e){if(1&n&&(u.TgZ(0,"div",49),u._UZ(1,"i",50),u.TgZ(2,"small"),u._uU(3),u.YNc(4,lq,2,1,"ng-container",3),u.qZA(),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw(2);u.xp6(3),u.hij(" ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price," "),u.xp6(1),u.Q6J("ngIf",t.priceCoinPercentage)}}function cq(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",":: "+t.priceCoinPercentage+"%"," ")}}function dq(n,e){if(1&n&&(u.TgZ(0,"div",49),u._UZ(1,"i",50),u.TgZ(2,"small"),u._uU(3),u.YNc(4,cq,2,1,"ng-container",3),u.qZA(),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw(2);u.xp6(3),u.hij("",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price," "),u.xp6(1),u.Q6J("ngIf",t.priceCoinPercentage)}}function hq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li"),u.YNc(1,uq,5,2,"div",47),u.TgZ(2,"div"),u.TgZ(3,"i",48),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(3).toggleAlcancado(a)}),u.qZA(),u.TgZ(4,"span",46),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(3).copyEntry(a.valor)}),u._uU(5),u.qZA(),u.qZA(),u.YNc(6,dq,5,2,"div",47),u._UZ(7,"div"),u.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=u.oxw().$implicit,a=u.oxw(2);u.xp6(1),u.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),u.xp6(2),u.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),u.xp6(2),u.AsE(" ",t.valor," - ",t.descricao," "),u.xp6(1),u.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(t.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(t.valor)))}}function fq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",33),u.TgZ(1,"div",34),u.TgZ(2,"span",35),u.TgZ(3,"i",36),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(2).togglePinWatcher(a)}),u.qZA(),u.qZA(),u.TgZ(4,"h5",37),u.TgZ(5,"strong"),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"h5"),u.YNc(8,oq,2,1,"span",3),u.qZA(),u.TgZ(9,"h6",38),u._uU(10),u.ALo(11,"date"),u.qZA(),u.YNc(12,aq,4,1,"div",39),u.TgZ(13,"div"),u.TgZ(14,"ul",40),u.YNc(15,hq,8,5,"li",41),u.qZA(),u.qZA(),u.TgZ(16,"div"),u.TgZ(17,"span",35),u.TgZ(18,"button",42),u.NdJ("click",function(){const i=u.CHM(t),a=i.$implicit,d=i.index;return u.oxw(2).editarSinal(a,d)}),u._UZ(19,"i",43),u.qZA(),u.TgZ(20,"button",12),u.NdJ("click",function(){const i=u.CHM(t),a=i.$implicit,d=i.index;return u.oxw(2).excluirSinal(a,d)}),u._UZ(21,"i",44),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),u.xp6(3),u.Q6J("ngClass",r.watchersIDPinnedList.indexOf(t.id)>-1?"fa-star text-danger":"fa-star-o"),u.xp6(3),u.Oqu(t.moeda),u.xp6(2),u.Q6J("ngIf",r.PriceCoinMap[t.moeda]),u.xp6(1),u.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),u.xp6(1),u.AsE(" ",t.tipo," - ",u.xi3(11,9,t.data,"dd/MM/yyyy")," "),u.xp6(2),u.Q6J("ngIf",t.sugestao),u.xp6(3),u.Q6J("ngForOf",t.entradas)}}function pq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"h3",29),u._uU(2),u.TgZ(3,"button",30),u.NdJ("click",function(){return u.CHM(t),u.MAs(5).classList.toggle("hidden")}),u.qZA(),u.qZA(),u.TgZ(4,"div",25,51),u.YNc(6,fq,22,12,"div",32),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(2),u.hij("Sinais na entrada (",t.watchersEntradaList.length,") "),u.xp6(4),u.Q6J("ngForOf",t.watchersEntradaList)}}function gq(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw(2);u.xp6(1),u.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function mq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",45),u.TgZ(1,"span",46),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw(2).copyEntry(i.sugestao)}),u._uU(2),u.qZA(),u._UZ(3,"br"),u.qZA()}if(2&n){const t=u.oxw().$implicit;u.xp6(2),u.hij(" Sugest\xe3o entrada ",t.sugestao,"")}}function _q(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",":: "+t.priceCoinPercentage+"%"," ")}}function yq(n,e){if(1&n&&(u.TgZ(0,"div",49),u._UZ(1,"i",50),u.TgZ(2,"small"),u._uU(3),u.YNc(4,_q,2,1,"ng-container",3),u.qZA(),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw(2);u.xp6(3),u.hij("",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price," "),u.xp6(1),u.Q6J("ngIf",t.priceCoinPercentage)}}function vq(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(3).$implicit;u.xp6(1),u.hij(" ",":: "+t.priceCoinPercentage+"%"," ")}}function bq(n,e){if(1&n&&(u.TgZ(0,"div",49),u._UZ(1,"i",50),u.TgZ(2,"small"),u._uU(3),u.YNc(4,vq,2,1,"ng-container",3),u.qZA(),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw(2);u.xp6(3),u.hij("",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price," "),u.xp6(1),u.Q6J("ngIf",t.priceCoinPercentage)}}function wq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li"),u.YNc(1,yq,5,2,"div",47),u.TgZ(2,"div"),u.TgZ(3,"i",48),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(3).toggleAlcancado(a)}),u.qZA(),u.TgZ(4,"span",46),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(3).copyEntry(a.valor)}),u._uU(5),u.qZA(),u.qZA(),u.YNc(6,bq,5,2,"div",47),u._UZ(7,"div"),u.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=u.oxw().$implicit,a=u.oxw(2);u.xp6(1),u.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),u.xp6(2),u.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),u.xp6(2),u.AsE(" ",t.valor," - ",t.descricao," "),u.xp6(1),u.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(t.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(t.valor)))}}function Cq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",33),u.TgZ(1,"div",34),u.TgZ(2,"span",35),u.TgZ(3,"i",36),u.NdJ("click",function(){const a=u.CHM(t).$implicit;return u.oxw(2).togglePinWatcher(a)}),u.qZA(),u.qZA(),u.TgZ(4,"h5",37),u.TgZ(5,"strong"),u._uU(6),u.qZA(),u.qZA(),u.TgZ(7,"h5"),u.YNc(8,gq,2,1,"span",3),u.qZA(),u.TgZ(9,"h6",38),u._uU(10),u.ALo(11,"date"),u.qZA(),u.YNc(12,mq,4,1,"div",39),u.TgZ(13,"div"),u.TgZ(14,"ul",40),u.YNc(15,wq,8,5,"li",41),u.qZA(),u.qZA(),u.TgZ(16,"div"),u.TgZ(17,"span",35),u.TgZ(18,"button",42),u.NdJ("click",function(){const i=u.CHM(t),a=i.$implicit,d=i.index;return u.oxw(2).editarSinal(a,d)}),u._UZ(19,"i",43),u.qZA(),u.TgZ(20,"button",12),u.NdJ("click",function(){const i=u.CHM(t),a=i.$implicit,d=i.index;return u.oxw(2).excluirSinal(a,d)}),u._UZ(21,"i",44),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),u.xp6(3),u.Q6J("ngClass",r.watchersIDPinnedList.indexOf(t.id)>-1?"fa-star text-danger":"fa-star-o"),u.xp6(3),u.Oqu(t.moeda),u.xp6(2),u.Q6J("ngIf",r.PriceCoinMap[t.moeda]),u.xp6(1),u.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),u.xp6(1),u.AsE(" ",t.tipo," - ",u.xi3(11,9,t.data,"dd/MM/yyyy")," "),u.xp6(2),u.Q6J("ngIf",t.sugestao),u.xp6(3),u.Q6J("ngForOf",t.entradas)}}function Eq(n,e){if(1&n&&(u.TgZ(0,"div",52),u.TgZ(1,"h3",29),u._uU(2,"Lista de Sinais"),u.qZA(),u.TgZ(3,"div",25),u.YNc(4,Cq,22,12,"div",32),u.qZA(),u.qZA()),2&n){const t=u.oxw();u.xp6(4),u.Q6J("ngForOf",t.watchersList)}}function Dq(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",53),u.TgZ(1,"h4",54),u._uU(2,"Sign In"),u.qZA(),u.qZA(),u.TgZ(3,"div",55),u.TgZ(4,"div",5),u.TgZ(5,"div",5),u.TgZ(6,"div",5,56),u.TgZ(8,"div",57),u._UZ(9,"input",58,59),u.qZA(),u.TgZ(11,"div",57),u.TgZ(12,"label",60),u._uU(13,"Password"),u.qZA(),u.TgZ(14,"div",61),u.TgZ(15,"input",62,63),u.NdJ("keydown",function(i){const d=u.CHM(t).$implicit,f=u.MAs(10),_=u.MAs(16);return u.oxw().submitSeach(i,f.value,_.value,d)}),u.qZA(),u.TgZ(17,"div",64),u.TgZ(18,"span",65),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return i.showPassword=!i.showPassword}),u._UZ(19,"i",66),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(20,"div",57),u.TgZ(21,"button",67),u.NdJ("click",function(){const a=u.CHM(t).$implicit,d=u.MAs(10),f=u.MAs(16);return u.oxw().sigin(d.value,f.value,a)}),u._uU(22,"Login"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&n){const t=u.oxw();u.xp6(15),u.Q6J("type",t.showPassword?"text":"password"),u.xp6(4),u.Q6J("ngClass",t.showPassword?"fa-eye-slash":"fa-eye")}}k_.extend($t);let Tq=(()=>{class n{constructor(t,r,i,a){this.db=t,this.AuthService=r,this.modalService=i,this.config=a,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.watchersList=[],this.watchersPinnedList=[],this.watchersIDPinnedList=[],this.watchersEntradaList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.editandoSinalIdx=-1,this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){setTimeout(()=>{this.AuthService.isLoggedIn?(console.log(this.AuthService.userData),this.startPriceWatcher(),this.loadWatcherList()):this.openModalLogin()},1e3)}startPriceWatcher(){const r=function(n=0,e=ku.P){return(!(0,P_.k)(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=ku.P),new Yn.y(t=>(t.add(e.schedule(ua,n,{subscriber:t,counter:0,period:n})),t))}(5e3);this.populatePriceCoinMap(),r.subscribe(i=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let i=[];r.forEach(d=>{this.PriceCoinMap[d.symbol]={price:d.price},i.push(d.symbol)});let a=this;i.sort(),i.forEach(d=>{a.PriceCoinList.push({symbol:d,price:this.PriceCoinMap[d].price})}),this.setOrderSinais()})}setOrderSinais(){if(this.watchersList&&this.watchersList.length>0){this.watchersList.forEach((r,i)=>{let a=0;try{a=parseFloat(this.PriceCoinMap[r.moeda].price)}catch(d){}if(a){let d=-1,f=0;"LONG"===r.tipo?(f=(r.entradas[r.entradas.length-1].valor-r.entradas[0].valor)/100,r.priceCoinPercentage=a>r.entradas[0].valor?((a-r.entradas[0].valor)/f).toFixed(2):0):(f=(r.entradas[0].valor-r.entradas[r.entradas.length-1].valor)/100,r.priceCoinPercentage=a<r.entradas[0].valor?(100-(a-r.entradas[r.entradas.length-1].valor)/f).toFixed(2):0);for(let _=0;_<r.entradas.length;_++){let D=parseFloat(r.entradas[_].valor);if("LONG"===r.tipo){if(0==_||_===r.entradas.length-1){if(a<=D){d=_;break}if(_===r.entradas.length-1&&a>D){d=1e3;break}continue}if(a>=parseFloat(r.entradas[_-1].valor)&&a<=D){d=_;break}}else if("SHORT"===r.tipo){if(0==_||_===r.entradas.length-1){if(a>=D){d=_,0==_&&(r.alert=!0);break}continue}if(a<=parseFloat(r.entradas[_-1].valor)&&a>=D){d=_,r.alert&&(this.playAlert(),r.alert=!1);break}}}this.watchersList[i].indexPricePosition=d}}),this.watchersEntradaList=[],this.watchersList.forEach(r=>{r.indexPricePosition>=1&&this.watchersEntradaList.push(r)});let t=(r,i)=>r.indexPricePosition<=i.indexPricePosition?-1:1;this.watchersEntradaList.length>0&&this.watchersEntradaList.sort(t),this.watchersList.sort(t),console.log(this.watchersList)}}castPrice(t){return parseFloat(t)}novoSinal(){let t=k_().format("YYYY-MM-DD");console.log(t),this.editandoSinalIdx=-1,this.sinalModel={data:t,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let a=Object.assign({},this.entradaModel);a.descricao=r[i],this.sinalModel.entradas.push(a)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadWatcherList(){this.watchersObservable=this.db.list("/sinais").valueChanges(),this.watchersObservable.subscribe(t=>{console.log(t),this.watchersList=t,this.watchersList&&this.watchersList.length>0&&(this.watchersList.forEach(r=>{if(r.entradas&&r.entradas.length>0){let i=parseFloat(r.entradas[0].valor),a=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?i+(a-i)/4:i-(i-a)/4,r.sugestao){let d=r.entradas[r.entradas.length-1].valor,f=d.indexOf(".")-1,_=d.substr(f).length;r.sugestao=r.sugestao.toFixed(_)}}}),this.watchersList.sort((r,i)=>k_(r.data)>k_(i.data)?-1:1)),this.loadWatchersFavoritos(),this.setOrderSinais()})}salvarEntrada(){console.log(this.sinalModel);let t=Object.assign({},this.sinalModel);if(!t.moeda)return void alert("Moeda inv\xe1lida");if(t.moeda=t.moeda.toUpperCase(),-1==t.moeda.indexOf("USDT")&&(t.moeda+="USDT"),!this.PriceCoinMap[t.moeda])return void alert("Moeda inv\xe1lida");if(!t.tipo)return void alert("Tipo inv\xe1lido");t.entradas.length>0&&t.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=t.id?t.id:"_"+Math.random().toString().replace(".","");t.id=r,this.db.object("/sinais/"+r).set(t).then(()=>{this.showFormNovoSinal=!1})}editarSinal(t,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},t),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(t,r){var i=this;return(0,Ce.Z)(function*(){window.confirm("Realmente deseja excluir o sinal?")&&(yield i.db.object("/sinais/"+t.id).remove())})()}playAlert(){}toggleAlcancado(t){t.alcancado=!t.alcancado||!t.alcancado}togglePinWatcher(t){var r=this;return(0,Ce.Z)(function*(){let i=r.watchersIDPinnedList.indexOf(t.id);if(i>-1){r.watchersIDPinnedList.splice(i,1);for(let d=0;d<r.watchersPinnedList.length;d++)if(r.watchersPinnedList[d].id===t.id){r.watchersPinnedList.splice(d,1);break}}else r.watchersIDPinnedList.push(t.id),r.watchersPinnedList.push(t);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.watchersIDPinnedList).then(()=>{console.log("salvo?")}).catch(d=>{console.error(d)})})()}loadWatchersFavoritos(){this.watchersPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(t=>{let r=t.val();r&&(this.watchersIDPinnedList=r,this.watchersIDPinnedList.forEach(i=>{this.watchersList.forEach(a=>{a.id===i&&this.watchersPinnedList.push(a)})}))})}copyEntry(t){this.canCopyClipboard?window.navigator.clipboard.writeText(t.toString()).then(function(){window.toastr.success(":D",`Entrada ${t} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(t=>{},t=>{})}sigin(t,r,i){this.AuthService.SignIn(t.trim(),r).then(()=>{this.startPriceWatcher(),this.loadWatcherList(),i&&i.close()}).catch(a=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(t,r,i,a){13==t.keyCode&&this.sigin(r,i,a)}signOut(){this.AuthService.SignOut()}submitForm(t,r){13==r.keyCode&&t.submit()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(OM),u.Y36(ZH),u.Y36(uU),u.Y36(fO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(1&t&&u.Gf(W5,5),2&t){let i;u.iGM(i=u.CRH())&&(r.modalLogin=i.first)}},decls:13,vars:6,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,""],["class","col-md-6",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["modalLogin",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-white"],[1,"btn","bt-sm","btn-outline-secondary","fa","fa-chevron-up",3,"click"],["divPinnedList",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"float-right"],[1,"fa","clickable",3,"ngClass","click"],[1,"card-title"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],[1,"alert","alert-primary"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["divWatchersEntrada",""],[1,"container","mt-4"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],["for","email"],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],[1,"fa",3,"ngClass"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"nav",0),u.TgZ(1,"div",1),u.YNc(2,Z5,3,0,"div",2),u.YNc(3,z5,3,0,"div",3),u.qZA(),u.qZA(),u.TgZ(4,"main",4),u.TgZ(5,"section",5),u.TgZ(6,"div",1),u.YNc(7,K5,26,4,"div",6),u.qZA(),u.YNc(8,sq,7,1,"div",7),u.YNc(9,pq,7,2,"div",7),u.YNc(10,Eq,5,1,"div",8),u.qZA(),u.YNc(11,Dq,23,2,"ng-template",null,9,u.W1O),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngIf",r.AuthService.isLoggedIn),u.xp6(1),u.Q6J("ngIf",r.AuthService.isLoggedIn),u.xp6(4),u.Q6J("ngIf",r.showFormNovoSinal),u.xp6(1),u.Q6J("ngIf",r.watchersPinnedList&&r.watchersPinnedList.length>0),u.xp6(1),u.Q6J("ngIf",r.watchersEntradaList&&r.watchersEntradaList.length>0),u.xp6(1),u.Q6J("ngIf",r.watchersList&&r.watchersList.length>0))},directives:[Mr,cA,KV,WP,bA,QP,XP,zt,po],pipes:[tu],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();class Sq{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new Aq(e,this.dueTime,this.scheduler))}}class Aq extends or.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Nq,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function Nq(n){n.debouncedNext()}const LU="firebasestorage.googleapis.com",VU="storageBucket";class ri extends F.ZR{constructor(e,t){super(yO(e),`Firebase Storage: ${t} (${yO(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ri.prototype)}_codeEquals(e){return yO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function yO(n){return"storage/"+n}function vO(){return new ri("unknown","An unknown error occurred, please check the error payload for server response.")}function BU(){return new ri("canceled","User canceled the upload/download.")}function UU(){return new ri("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xv(n){return new ri("invalid-argument",n)}function $U(){return new ri("app-deleted","The Firebase app was deleted.")}function jU(n){return new ri("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aE(n,e){return new ri("invalid-format","String does not match format '"+n+"': "+e)}function lE(n){throw new ri("internal-error","Internal error: "+n)}class js{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=js.makeFromUrl(e,t)}catch(i){return new js(e,"")}if(""===r.path)return r;throw function(n){return new ri("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(at){at.path_=decodeURIComponent(at.path)}const S=t.replace(/[.]/g,"\\."),it=[{regex:f,indices:{bucket:1,path:3},postModify:function(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===LU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let at=0;at<it.length;at++){const Ft=it[at],ln=Ft.regex.exec(e);if(ln){let ii=ln[Ft.indices.path];ii||(ii=""),r=new js(ln[Ft.indices.bucket],ii),Ft.postModify(r);break}}if(null==r)throw function(n){return new ri("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Hq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kA(n){return"string"==typeof n||n instanceof String}function HU(n){return bO()&&n instanceof Blob}function bO(){return"undefined"!=typeof Blob}function wO(n,e,t,r){if(r<e)throw Xv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Xv(`Invalid value for '${n}'. Expected ${t} or less.`)}function oh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function GU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var gp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(gp||(gp={})),gp))();class Yq{constructor(e,t,r,i,a,d,f,_,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,V)=>{this.resolve_=M,this.reject_=V,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(_)?a():a(_)}catch(_){d(_)}else if(null!==f){const _=vO();_.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,_):_)}else d(i.canceled?this.appDelete_?$U():BU():new ri("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new PA(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,i=null,a=null,d=!1,f=0;function _(){return 2===f}let w=!1;function D(...De){w||(w=!0,e.apply(null,De))}function S(De){i=setTimeout(()=>{i=null,n(V,_())},De)}function M(){a&&clearTimeout(a)}function V(De,...rt){if(w)return void M();if(De)return M(),void D.call(null,De,...rt);if(_()||d)return M(),void D.call(null,De,...rt);let it;r<64&&(r*=2),1===f?(f=2,it=0):it=1e3*(r+Math.random()),S(it)}let Y=!1;function ue(De){Y||(Y=!0,M(),!w&&(null!==i?(De||(f=2),clearTimeout(i),S(0)):De||(f=1)))}return S(0),a=setTimeout(()=>{d=!0,ue(!0)},t),ue}((r,i)=>{if(i)return void r(!1,new PA(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(d),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(d),this.pendingConnection_=null;const f=a.getErrorCode()===gp.NO_ERROR,_=a.getStatus();if(!f||this.isRetryStatusCode_(_)){const D=a.getErrorCode()===gp.ABORT;return void r(!1,new PA(!1,null,D))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new PA(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class PA{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function nW(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(bO())return new Blob(n);throw new ri("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class CO{constructor(e,t){this.data=e,this.contentType=t||null}}function EO(n,e){switch(n){case Ca.RAW:return new CO(qU(e));case Ca.BASE64:case Ca.BASE64URL:return new CO(WU(n,e));case Ca.DATA_URL:return new CO(function(n){const e=new ZU(n);return e.base64?WU(Ca.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw aE(Ca.DATA_URL,"Malformed data URL.")}return qU(e)}(e.rest)}(e),function(n){return new ZU(n).contentType}(e))}throw vO()}function qU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function WU(n,e){switch(n){case Ca.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw aE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ca.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw aE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(i){throw aE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class ZU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw aE(Ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class bc{constructor(e,t){let r=0,i="";HU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(HU(this.data_)){const i=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new bc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bc(r,!0)}}static getBlob(...e){if(bO()){const t=e.map(r=>r instanceof bc?r.data_:r);return new bc(nW.apply(null,t))}{const t=e.map(d=>kA(d)?EO(Ca.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(d=>{for(let f=0;f<d.length;f++)i[a++]=d[f]}),new bc(i,!0)}}uploadData(){return this.data_}}function DO(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function zU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function dW(n,e){return e}class ho{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||dW}}let OA=null;function uE(){if(OA)return OA;const n=[];n.push(new ho("bucket")),n.push(new ho("generation")),n.push(new ho("metageneration")),n.push(new ho("name","fullPath",!0));const t=new ho("name");t.xform=function(a,d){return function(n){return!kA(n)||n.length<2?n:zU(n)}(d)},n.push(t);const i=new ho("size");return i.xform=function(a,d){return void 0!==d?Number(d):d},n.push(i),n.push(new ho("timeCreated")),n.push(new ho("updated")),n.push(new ho("md5Hash",null,!0)),n.push(new ho("cacheControl",null,!0)),n.push(new ho("contentDisposition",null,!0)),n.push(new ho("contentEncoding",null,!0)),n.push(new ho("contentLanguage",null,!0)),n.push(new ho("contentType",null,!0)),n.push(new ho("metadata","customMetadata",!0)),OA=n,OA}function YU(n,e,t){const r=DO(e);return null===r?null:function(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const d=t[a];r[d.local]=d.xform(r,e[d.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const a=new js(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function TO(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const KU="prefixes";class wc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cc(n){if(!n)throw vO()}function FA(n,e){return function(r,i){const a=YU(n,i,e);return Cc(null!==a),a}}function e0(n){return function(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new ri("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ri("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new ri("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new ri("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function cE(n){const e=e0(n);return function(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function(n){return new ri("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function JU(n,e,t){const i=oh(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new wc(i,"GET",FA(n,t),d);return f.errorHandler=cE(e),f}function bW(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=oh(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new wc(f,"GET",function(n,e){return function(r,i){const a=function(n,e,t){const r=DO(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[KU])for(const i of t[KU]){const a=i.replace(/\/$/,""),d=n._makeStorageReference(new js(e,a));r.prefixes.push(d)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new js(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Cc(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=e0(e),D}function e3(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class LA{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function IO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Cc(!1)}return Cc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const AW={STATE_CHANGED:"state_changed"},fo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function SO(n){switch(n){case"running":case"pausing":case"canceling":return fo.RUNNING;case"paused":return fo.PAUSED;case"success":return fo.SUCCESS;case"canceled":return fo.CANCELED;case"error":default:return fo.ERROR}}class NW{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function t0(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class MW extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw lE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw lE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Xl(){return new MW}class i3{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),d=e3(e,r,i),f={name:d.fullPath},_=oh(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},S=TO(d,t),Y=new wc(_,"POST",function(ue){let De;IO(ue);try{De=ue.getResponseHeader("X-Goog-Upload-URL")}catch(rt){Cc(!1)}return Cc(kA(De)),De},n.maxUploadRetryTime);return Y.urlParams=f,Y.headers=D,Y.body=S,Y.errorHandler=e0(e),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function(n,e,t,r){const _=new wc(t,"POST",function(w){const D=IO(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Cc(!1)}S||Cc(!1);const M=Number(S);return Cc(!isNaN(M)),new LA(M,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=e0(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Xl,t,r);this._request=a,a.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new LA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let d;try{d=function(n,e,t,r,i,a,d,f){const _=new LA(0,0);if(d?(_.current=d.current,_.total=d.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw new ri("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const w=_.total-_.current;let D=w;i>0&&(D=Math.min(D,i));const S=_.current,Y={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ue=r.slice(S,S+D);if(null===ue)throw UU();const it=new wc(t,"POST",function(at,Ft){const ln=IO(at,["active","final"]),Yr=_.current+D,ii=r.size();let xO;return xO="final"===ln?FA(e,a)(at,Ft):null,new LA(Yr,ii,"final"===ln,xO)},e.maxUploadRetryTime);return it.headers=Y,it.body=ue.uploadData(),it.progressCallback=f||null,it.errorHandler=e0(n),it}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(d,Xl,i,a);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=JU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},_=function(){let it="";for(let at=0;at<2;at++)it+=Math.random().toString().slice(2);return it}();d["Content-Type"]="multipart/related; boundary="+_;const w=e3(e,r,i),D=TO(w,t),V=bc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw UU();const Y={name:w.fullPath},ue=oh(a,n.host,n._protocol),rt=n.maxUploadRetryTime,Je=new wc(ue,"POST",FA(n,t),rt);return Je.urlParams=Y,Je.headers=d,Je.body=V.uploadData(),Je.errorHandler=e0(e),Je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=BU(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=SO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new NW(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(SO(this._state)){case fo.SUCCESS:t0(this._resolve.bind(null,this.snapshot))();break;case fo.CANCELED:case fo.ERROR:t0(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(SO(this._state)){case fo.RUNNING:case fo.PAUSED:e.next&&t0(e.next.bind(e,this.snapshot))();break;case fo.SUCCESS:e.complete&&t0(e.complete.bind(e))();break;case fo.CANCELED:case fo.ERROR:e.error&&t0(e.error.bind(e,this._error))();break;default:e.error&&t0(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Qm{constructor(e,t){this._service=e,this._location=t instanceof js?t:js.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qm(e,t)}get root(){const e=new js(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zU(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new js(this._location.bucket,e);return new Qm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw jU(e)}}function o3(n,e,t){return AO.apply(this,arguments)}function AO(){return(AO=(0,Ce.Z)(function*(n,e,t){const i=yield a3(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield o3(n,e,i.nextPageToken))})).apply(this,arguments)}function a3(n,e){null!=e&&"number"==typeof e.maxResults&&wO("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=bW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Xl)}function HW(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const i=oh(e.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new wc(i,"GET",function(n,e){return function(r,i){const a=YU(n,i,e);return Cc(null!==a),function(n,e,t,r){const i=DO(e);if(null===i||!kA(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const d=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return oh("/b/"+d(n.bucket)+"/o/"+d(S),t,r)+GU({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),d);return f.errorHandler=cE(e),f}(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,Xl).then(t=>{if(null===t)throw new ri("no-download-url","The given file does not have any download URLs.");return t})}function l3(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new js(n._location.bucket,t);return new Qm(n.storage,r)}function u3(n,e){if(n instanceof NO){const t=n;if(null==t._bucket)throw new ri("no-default-bucket","No default bucket found. Did you set the '"+VU+"' property when initializing the app?");const r=new Qm(t,t._bucket);return null!=e?u3(r,e):r}return void 0!==e?l3(n,e):n}function ZW(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof NO)return function(n,e){return new Qm(n,e)}(n,e);throw Xv("To use ref(service, url), the first argument must be a Storage instance.")}return u3(n,e)}function c3(n,e){const t=null==e?void 0:e[VU];return null==t?null:js.makeFromBucketSpec(t,n)}class NO{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=LU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?js.makeFromBucketSpec(i,this._host):c3(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?js.makeFromBucketSpec(this._url,e):c3(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ce.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ce.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qm(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Hq($U());{const a=function(n,e,t,r,i,a){const d=GU(n.urlParams),f=n.url+d,_=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new Yq(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ce.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const d3="@firebase/storage";function p3(n,e){return ZW(n=(0,F.m9)(n),e)}(0,Ki._registerComponent)(new ca.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new NO(t,r,i,e,Ki.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(d3,"0.9.5",""),(0,Ki.registerVersion)(d3,"0.9.5","esm2017");class VA{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class g3{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new VA(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new VA(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?d=>t(new VA(d,this,this._ref)):{next:t.next?d=>t.next(new VA(d,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class m3{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ah(e,this._service))}get items(){return this._delegate.items.map(e=>new ah(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ah{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return l3(n,e)}(this._delegate,e);return new ah(t,this.storage)}get root(){return new ah(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ah(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new g3(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new i3(n,new bc(e),t)}(n=(0,F.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ca.RAW,r){this._throwIfRoot("putString");const i=EO(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new g3(new i3(this._delegate,new bc(i.data,!0),a),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return o3(n,e).then(()=>e)}(n=(0,F.m9)(n))}(this._delegate).then(e=>new m3(e,this.storage))}list(e){return function(n,e){return a3(n=(0,F.m9)(n),e)}(this._delegate,e||void 0).then(t=>new m3(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=JU(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const a=oh(e.fullServerUrl(),n.host,n._protocol),f=TO(t,r),w=n.maxOperationRetryTime,D=new wc(a,"PATCH",FA(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=f,D.errorHandler=cE(e),D}(n.storage,n._location,e,uE());return n.storage.makeRequestWithTokens(t,Xl)}(n=(0,F.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return HW(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=oh(e.fullServerUrl(),n.host,n._protocol),f=new wc(r,"DELETE",function(_,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=cE(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw jU(e)}}class _3{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(y3(e))throw Xv("ref() expected a child path but got a URL, use refFromURL instead.");return new ah(p3(this._delegate,e),this)}refFromURL(e){if(!y3(e))throw Xv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{js.makeFromUrl(e,this._delegate.host)}catch(t){throw Xv("refFromUrl() expected a valid full URL but got an invalid one.")}return new ah(p3(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function y3(n){return/^[A-Za-z]+:\/\//.test(n)}function uZ(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new _3(t,r)}function v3(n){const e=function(n){return new Yn.y(e=>{const t=d=>e.next(d);t(n.snapshot);const a=n.on("state_changed",t);return n.then(d=>{t(d),e.complete()},d=>{t(n.snapshot),(d=>{e.error(d)})(d)}),function(){a()}}).pipe(function(n,e=ku.P){return t=>t.lift(new Sq(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function BA(n){return{getDownloadURL:()=>(0,ct.of)(void 0).pipe(wn.fc,nr(()=>n.getDownloadURL()),wn.iC),getMetadata:()=>(0,ct.of)(void 0).pipe(wn.fc,nr(()=>n.getMetadata()),wn.iC),delete:()=>(0,Xt.D)(n.delete()),child:e=>BA(n.child(e)),updateMetadata:e=>(0,Xt.D)(n.updateMetadata(e)),put:(e,t)=>v3(n.put(e,t)),putString:(e,t,r)=>v3(n.putString(e,t,r)),list:e=>(0,Xt.D)(n.list(e)),listAll:()=>(0,Xt.D)(n.listAll())}}!function(n){const e={TaskState:fo,TaskEvent:AW,StringFormat:Ca,Storage:_3,Reference:ah};n.INTERNAL.registerComponent(new ca.wA("storage-compat",uZ,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(jE.Z);const hZ=new u.OlP("angularfire2.storageBucket"),fZ=new u.OlP("angularfire2.storage.maxUploadRetryTime"),pZ=new u.OlP("angularfire2.storage.maxOperationRetryTime"),gZ=new u.OlP("angularfire2.storage.use-emulator");let mZ=(()=>{class n{constructor(t,r,i,a,d,f,_,w,D,S){const M=(0,Fr.on)(t,d,r);this.storage=(0,Fr.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const V=d.runOutsideAngular(()=>M.storage(i||void 0)),Y=D;return Y&&V.useEmulator(...Y),_&&V.setMaxUploadRetryTime(_),w&&V.setMaxOperationRetryTime(w),V},[_,w])}ref(t){return BA(this.storage.ref(t))}refFromURL(t){return BA(this.storage.refFromURL(t))}upload(t,r,i){return BA(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Fr.Dh),u.LFG(Fr.xv,8),u.LFG(hZ,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(wn.HU),u.LFG(fZ,8),u.LFG(pZ,8),u.LFG(gZ,8),u.LFG(Bg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_Z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),yZ=(()=>{class n{constructor(){Ug.Z.registerVersion("angularfire",wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[mZ],imports:[_Z]}),n})();const vZ={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let bZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[Tq]}),n.\u0275inj=u.cJS({providers:[],imports:[[Ep,pN,DB,Fr.hO.initializeApp(vZ),WH,DM,yZ]]}),n})();(0,u.G48)(),La().bootstrapModule(bZ).catch(n=>console.error(n))},3394:(st,Ee,B)=>{"use strict";B.d(Ee,{Z:()=>Se});var u=B(3854),G=B(3910),O=B(8026),ie=B(5422);class oe{constructor(Ve,ce){this._delegate=Ve,this.firebase=ce,(0,O._addComponent)(Ve,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ve,ce=O._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(Ve);return!ke.isInitialized()&&"EXPLICIT"===(null===(fe=ke.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:ce})}_removeServiceInstance(Ve,ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(ce)}_addComponent(Ve){(0,O._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,O._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function J(){const be=function(be){const Ve={},ce={__esModule:!0,initializeApp:function(dt,Ke={}){const xe=O.initializeApp(dt,Ke);if((0,u.r3)(Ve,xe.name))return Ve[xe.name];const Te=new be(xe,ce);return Ve[xe.name]=Te,Te},app:ke,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(dt){const Ke=dt.name,xe=Ke.replace("-compat","");if(O._registerComponent(dt)&&"PUBLIC"===dt.type){const Te=($e=ke())=>{if("function"!=typeof $e[xe])throw de.create("invalid-app-argument",{appName:Ke});return $e[xe]()};void 0!==dt.serviceProps&&(0,u.ZB)(Te,dt.serviceProps),ce[xe]=Te,be.prototype[xe]=function(...$e){return this._getService.bind(this,Ke).apply(this,dt.multipleInstances?$e:[])}}return"PUBLIC"===dt.type?ce[xe]:null},removeApp:function(dt){delete Ve[dt]},useAsService:function(dt,Ke){return"serverAuth"===Ke?null:Ke},modularAPIs:O}};function ke(dt){if(!(0,u.r3)(Ve,dt=dt||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:dt});return Ve[dt]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function(){return Object.keys(Ve).map(dt=>Ve[dt])}}),ke.App=be,ce}(oe);return be.INTERNAL=Object.assign(Object.assign({},be.INTERNAL),{createFirebaseNamespace:J,extendNamespace:function(ce){(0,u.ZB)(be,ce)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),be}(),z=new ie.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const be=self.firebase.SDK_VERSION;be&&be.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=U;(0,O.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(st,Ee,B)=>{"use strict";B.r(Ee),B.d(Ee,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Hi,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>Dr,_addOrOverwriteComponent:()=>mi,_apps:()=>Ht,_clearComponents:()=>cn,_components:()=>yt,_getProvider:()=>wt,_registerComponent:()=>Wn,_removeServiceInstance:()=>er,deleteApp:()=>fr,getApp:()=>hr,getApps:()=>Le,initializeApp:()=>si,onLog:()=>vn,registerVersion:()=>ot,setLogLevel:()=>Zn});var u=B(8239),G=B(3910),O=B(5422),ie=B(3854);class oe{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function(Ge){const Ne=Ge.getComponent();return"VERSION"===(null==Ne?void 0:Ne.type)}(lt)){const Et=lt.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(lt=>lt).join(" ")}}const de="@firebase/app",J=new O.Yd("@firebase/app"),Qt="[DEFAULT]",An={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,yt=new Map;function Dr(Ge,Ne){try{Ge.container.addComponent(Ne)}catch(lt){J.debug(`Component ${Ne.name} failed to register with FirebaseApp ${Ge.name}`,lt)}}function mi(Ge,Ne){Ge.container.addOrOverwriteComponent(Ne)}function Wn(Ge){const Ne=Ge.name;if(yt.has(Ne))return J.debug(`There were multiple attempts to register component ${Ne}.`),!1;yt.set(Ne,Ge);for(const lt of Ht.values())Dr(lt,Ge);return!0}function wt(Ge,Ne){const lt=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),Ge.container.getProvider(Ne)}function er(Ge,Ne,lt=Qt){wt(Ge,Ne).clearInstance(lt)}function cn(){yt.clear()}const dn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ln{constructor(Ne,lt,Et){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}const Hi="9.6.11";function si(Ge,Ne={}){"object"!=typeof Ne&&(Ne={name:Ne});const lt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},Ne),Et=lt.name;if("string"!=typeof Et||!Et)throw dn.create("bad-app-name",{appName:String(Et)});const Rt=Ht.get(Et);if(Rt){if((0,ie.vZ)(Ge,Rt.options)&&(0,ie.vZ)(lt,Rt.config))return Rt;throw dn.create("duplicate-app",{appName:Et})}const Jt=new G.H0(Et);for(const Z of yt.values())Jt.addComponent(Z);const Q=new Ln(Ge,lt,Jt);return Ht.set(Et,Q),Q}function hr(Ge=Qt){const Ne=Ht.get(Ge);if(!Ne)throw dn.create("no-app",{appName:Ge});return Ne}function Le(){return Array.from(Ht.values())}function fr(Ge){return ir.apply(this,arguments)}function ir(){return(ir=(0,u.Z)(function*(Ge){const Ne=Ge.name;Ht.has(Ne)&&(Ht.delete(Ne),yield Promise.all(Ge.container.getProviders().map(lt=>lt.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function ot(Ge,Ne,lt){var Et;let Rt=null!==(Et=An[Ge])&&void 0!==Et?Et:Ge;lt&&(Rt+=`-${lt}`);const Jt=Rt.match(/\s|\//),Q=Ne.match(/\s|\//);if(Jt||Q){const Z=[`Unable to register library "${Rt}" with version "${Ne}":`];return Jt&&Z.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Jt&&Q&&Z.push("and"),Q&&Z.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void J.warn(Z.join(" "))}Wn(new G.wA(`${Rt}-version`,()=>({library:Rt,version:Ne}),"VERSION"))}function vn(Ge,Ne){if(null!==Ge&&"function"!=typeof Ge)throw dn.create("invalid-log-argument");(0,O.Am)(Ge,Ne)}function Zn(Ge){(0,O.Ub)(Ge)}const jr="firebase-heartbeat-store";let pr=null;function Vn(){return pr||(pr=(0,ie.X3)("firebase-heartbeat-database",1,(Ge,Ne)=>{switch(Ne){case 0:Ge.createObjectStore(jr)}}).catch(Ge=>{throw dn.create("storage-open",{originalErrorMessage:Ge.message})})),pr}function _n(){return(_n=(0,u.Z)(function*(Ge){try{return(yield Vn()).transaction(jr).objectStore(jr).get(Gi(Ge))}catch(Ne){throw dn.create("storage-get",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function qe(Ge,Ne){return gt.apply(this,arguments)}function gt(){return(gt=(0,u.Z)(function*(Ge,Ne){try{const Et=(yield Vn()).transaction(jr,"readwrite");return yield Et.objectStore(jr).put(Ne,Gi(Ge)),Et.complete}catch(lt){throw dn.create("storage-set",{originalErrorMessage:lt.message})}})).apply(this,arguments)}function Gi(Ge){return`${Ge.name}!${Ge.options.appId}`}class It{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new sn(lt),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var Ne=this;return(0,u.Z)(function*(){const Et=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Tr();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!Ne._heartbeatsCache.heartbeats.some(Jt=>Jt.date===Rt))return Ne._heartbeatsCache.heartbeats.push({date:Rt,agent:Et}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Jt=>{const Q=new Date(Jt.date).valueOf();return Date.now()-Q<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,u.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const lt=Tr(),{heartbeatsToSend:Et,unsentEntries:Rt}=function(Ge,Ne=1024){const lt=[];let Et=Ge.slice();for(const Rt of Ge){const Jt=lt.find(Q=>Q.agent===Rt.agent);if(Jt){if(Jt.dates.push(Rt.date),bt(lt)>Ne){Jt.dates.pop();break}}else if(lt.push({agent:Rt.agent,dates:[Rt.date]}),bt(lt)>Ne){lt.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:lt,unsentEntries:Et}}(Ne._heartbeatsCache.heartbeats),Jt=(0,ie.L)(JSON.stringify({version:2,heartbeats:Et}));return Ne._heartbeatsCache.lastSentHeartbeatDate=lt,Rt.length>0?(Ne._heartbeatsCache.heartbeats=Rt,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Jt})()}}function Tr(){return(new Date).toISOString().substring(0,10)}class sn{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,u.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function(Ge){return _n.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var lt=this;return(0,u.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const Jt=yield lt.read();return qe(lt.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Jt.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var lt=this;return(0,u.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const Jt=yield lt.read();return qe(lt.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Jt.lastSentHeartbeatDate,heartbeats:[...Jt.heartbeats,...Ne.heartbeats]})}})()}}function bt(Ge){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Ge})).length}Wn(new G.wA("platform-logger",Ne=>new oe(Ne),"PRIVATE")),Wn(new G.wA("heartbeat",Ne=>new It(Ne),"PRIVATE")),ot(de,"0.7.21",""),ot(de,"0.7.21","esm2017"),ot("fire-js","")},3910:(st,Ee,B)=>{"use strict";B.d(Ee,{wA:()=>O,H0:()=>ee,zt:()=>oe});var u=B(8239),G=B(3854);class O{constructor(U,z,H){this.name=U,this.instanceFactory=z,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ie="[DEFAULT]";class oe{constructor(U,z){this.name=U,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const z=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(z)){const H=new G.BH;if(this.instancesDeferred.set(z,H),this.isInitialized(z)||this.shouldAutoInitialize())try{const ae=this.getOrInitializeService({instanceIdentifier:z});ae&&H.resolve(ae)}catch(ae){}}return this.instancesDeferred.get(z).promise}getImmediate(U){var z;const H=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),ae=null!==(z=null==U?void 0:U.optional)&&void 0!==z&&z;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(Re){if(ae)return null;throw Re}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ie})}catch(z){}for(const[z,H]of this.instancesDeferred.entries()){const ae=this.normalizeInstanceIdentifier(z);try{const Re=this.getOrInitializeService({instanceIdentifier:ae});H.resolve(Re)}catch(Re){}}}}clearInstance(U=ie){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,u.Z)(function*(){const z=Array.from(U.instances.values());yield Promise.all([...z.filter(H=>"INTERNAL"in H).map(H=>H.INTERNAL.delete()),...z.filter(H=>"_delete"in H).map(H=>H._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ie){return this.instances.has(U)}getOptions(U=ie){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:z={}}=U,H=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(H))throw Error(`${this.name}(${H}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ae=this.getOrInitializeService({instanceIdentifier:H,options:z});for(const[Re,Se]of this.instancesDeferred.entries())H===this.normalizeInstanceIdentifier(Re)&&Se.resolve(ae);return ae}onInit(U,z){var H;const ae=this.normalizeInstanceIdentifier(z),Re=null!==(H=this.onInitCallbacks.get(ae))&&void 0!==H?H:new Set;Re.add(U),this.onInitCallbacks.set(ae,Re);const Se=this.instances.get(ae);return Se&&U(Se,ae),()=>{Re.delete(U)}}invokeOnInitCallbacks(U,z){const H=this.onInitCallbacks.get(z);if(H)for(const ae of H)try{ae(U,z)}catch(Re){}}getOrInitializeService({instanceIdentifier:U,options:z={}}){let H=this.instances.get(U);if(!H&&this.component&&(H=this.component.instanceFactory(this.container,{instanceIdentifier:(J=U,J===ie?void 0:J),options:z}),this.instances.set(U,H),this.instancesOptions.set(U,z),this.invokeOnInitCallbacks(H,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,H)}catch(ae){}var J;return H||null}normalizeInstanceIdentifier(U=ie){return this.component?this.component.multipleInstances?U:ie:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const z=this.getProvider(U.name);if(z.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);z.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const z=new oe(U,this);return this.providers.set(U,z),z}getProviders(){return Array.from(this.providers.values())}}},5422:(st,Ee,B)=>{"use strict";B.d(Ee,{in:()=>G,Yd:()=>de,Ub:()=>ee,Am:()=>J});const u=[];var G=(()=>{return(U=G||(G={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",G;var U})();const O={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ie=G.INFO,oe={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},te=(U,z,...H)=>{if(z<U.logLevel)return;const ae=(new Date).toISOString(),Re=oe[z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Re](`[${ae}]  ${U.name}:`,...H)};class de{constructor(z){this.name=z,this._logLevel=ie,this._logHandler=te,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in G))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...z),this._logHandler(this,G.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...z),this._logHandler(this,G.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,G.INFO,...z),this._logHandler(this,G.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,G.WARN,...z),this._logHandler(this,G.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...z),this._logHandler(this,G.ERROR,...z)}}function ee(U){u.forEach(z=>{z.setLogLevel(U)})}function J(U,z){for(const H of u){let ae=null;z&&z.level&&(ae=O[z.level]),H.userLogHandler=null===U?null:(Re,Se,...be)=>{const Ve=be.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(fe){return null}}).filter(ce=>ce).join(" ");Se>=(null!=ae?ae:Re.logLevel)&&U({level:G[Se].toLowerCase(),message:Ve,args:be,type:Re.name})}}}},8239:(st,Ee,B)=>{"use strict";function u(O,ie,oe,te,de,ee,J){try{var U=O[ee](J),z=U.value}catch(H){return void oe(H)}U.done?ie(z):Promise.resolve(z).then(te,de)}function G(O){return function(){var ie=this,oe=arguments;return new Promise(function(te,de){var ee=O.apply(ie,oe);function J(z){u(ee,te,de,J,U,"next",z)}function U(z){u(ee,te,de,J,U,"throw",z)}J(void 0)})}}B.d(Ee,{Z:()=>G})}},st=>{st(st.s=8340)}]);