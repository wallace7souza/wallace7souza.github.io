(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:Fe=>{function me(O){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+O+"'");throw a.code="MODULE_NOT_FOUND",a})}me.keys=()=>[],me.resolve=me,me.id=8255,Fe.exports=me},7716:(Fe,me,O)=>{"use strict";O.d(me,{deG:()=>Bh,tb:()=>qT,AFp:()=>GT,ip1:()=>_r,CZH:()=>ic,hGG:()=>zf,z2F:()=>hu,sBO:()=>H1,Sil:()=>sc,_Vd:()=>If,EJc:()=>Zf,SBq:()=>mr,qLn:()=>ef,vpe:()=>dl,gxx:()=>Dd,tBr:()=>qa,XFs:()=>gt,OlP:()=>er,zs3:()=>Ar,ZZ4:()=>B1,aQg:()=>U1,soG:()=>Py,YKP:()=>ry,v3s:()=>qf,h0i:()=>ec,PXZ:()=>zw,R0b:()=>ho,FiY:()=>Wa,Lbi:()=>Hw,g9A:()=>ZT,Qsj:()=>mM,FYo:()=>ty,JOm:()=>Ja,Tiy:()=>qg,q3G:()=>wn,tp0:()=>Qr,EAV:()=>RR,Rgc:()=>ou,dDg:()=>Zw,DyG:()=>to,q4F:()=>Af,GfV:()=>L1,s_b:()=>iy,ifc:()=>it,eFA:()=>bm,G48:()=>iI,Gpc:()=>N,X6Q:()=>oh,_c5:()=>Bt,VLi:()=>oc,c2e:()=>WT,zSh:()=>cf,wAp:()=>kt,vHH:()=>Y,EiD:()=>Tt,mCW:()=>Ka,qzn:()=>$c,JVY:()=>w0,pB0:()=>fd,eBb:()=>zp,L6k:()=>Wp,LAX:()=>ha,cg1:()=>V_,Tjo:()=>po,kL8:()=>b1,yhl:()=>Zh,dqk:()=>At,sIi:()=>sl,CqO:()=>C_,QGY:()=>w_,F4k:()=>LD,RDi:()=>Li,AaK:()=>L,z3N:()=>da,qOj:()=>$b,TTD:()=>ar,_Bn:()=>xx,xp6:()=>rf,uIk:()=>Wb,Tol:()=>l1,DjV:()=>tx,ekj:()=>Mg,Suo:()=>Cw,Xpm:()=>le,lG2:()=>Et,Yz7:()=>yt,cJS:()=>Xt,oAB:()=>se,Yjl:()=>Rt,Y36:()=>Vd,_UZ:()=>FD,BQk:()=>y_,ynx:()=>Xb,qZA:()=>xg,TgZ:()=>__,EpF:()=>b_,n5z:()=>Ha,Ikx:()=>js,SDv:()=>X_,QtT:()=>M1,pQV:()=>N1,LFG:()=>cr,$8M:()=>kc,NdJ:()=>Tg,CRH:()=>bT,oxw:()=>HD,ALo:()=>gT,lcZ:()=>_w,xi3:()=>yy,Hsn:()=>$D,F$t:()=>t1,Q6J:()=>m_,s9C:()=>E_,MGl:()=>Ig,DdM:()=>uT,VKq:()=>hw,WLB:()=>my,kEZ:()=>om,iGM:()=>Cy,MAs:()=>a_,CHM:()=>Ra,LSH:()=>md,kYT:()=>Ae,Udp:()=>a1,YNc:()=>ao,W1O:()=>Dy,_uU:()=>f1,Oqu:()=>p1,hij:()=>S_,AsE:()=>A_,Gf:()=>ww});var a=O(9765),M=O(5319),k=O(7574),K=O(6682),te=O(8819);function Z(s){for(let o in s)if(s[o]===Z)return o;throw Error("Could not find renamed property on target object.")}function ee(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function L(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(L).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function U(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const R=Z({__forward_ref__:Z});function N(s){return s.__forward_ref__=N,s.toString=function(){return L(this())},s}function S(s){return B(s)?s():s}function B(s){return"function"==typeof s&&s.hasOwnProperty(R)&&s.__forward_ref__===N}class Y extends Error{constructor(o,c){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,c)),this.code=o}}function H(s){return"string"==typeof s?s:null==s?"":String(s)}function G(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():H(s)}function _e(s,o){const c=o?` in ${o}`:"";throw new Y("201",`No provider for ${G(s)} found${c}`)}function ke(s,o,c,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${c} ${u} ${o} <=Actual]`))}function yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return an(s,Yn)||an(s,Kn)}function an(s,o){return s.hasOwnProperty(o)?s[o]:null}function Mn(s){return s&&(s.hasOwnProperty(ze)||s.hasOwnProperty($n))?s[ze]:null}const Yn=Z({\u0275prov:Z}),ze=Z({\u0275inj:Z}),Kn=Z({ngInjectableDef:Z}),$n=Z({ngInjectorDef:Z});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let fn;function ln(s){const o=fn;return fn=s,o}function nr(s,o,c){const u=qt(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&gt.Optional?null:void 0!==o?o:void _e(L(s),"Injector")}function or(s){return{toString:s}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),it=(()=>((it=it||{})[it.Emulated=0]="Emulated",it[it.None=2]="None",it[it.ShadowDom=3]="ShadowDom",it))();const xt="undefined"!=typeof globalThis&&globalThis,Mr="undefined"!=typeof window&&window,zr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,At=xt||"undefined"!=typeof global&&global||Mr||zr,cn={},St=[],Wt=Z({\u0275cmp:Z}),rt=Z({\u0275dir:Z}),qe=Z({\u0275pipe:Z}),_t=Z({\u0275mod:Z}),Nt=Z({\u0275loc:Z}),Lt=Z({\u0275fac:Z}),en=Z({__NG_ELEMENT_ID__:Z});let pe=0;function le(s){return or(()=>{const c={},u={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||it.Emulated,id:"c",styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,_=s.pipes;return u.id+=pe++,u.inputs=et(s.inputs,c),u.outputs=et(s.outputs),p&&p.forEach(v=>v(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(Be):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(X):null,u})}function Be(s){return at(s)||function(s){return s[rt]||null}(s)}function X(s){return function(s){return s[qe]||null}(s)}const ie={};function se(s){return or(()=>{const o={type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(ie[s.id]=s.type),o})}function Ae(s,o){return or(()=>{const c=Pn(s,!0);c.declarations=o.declarations||St,c.imports=o.imports||St,c.exports=o.exports||St})}function et(s,o){if(null==s)return cn;const c={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=u,o&&(o[h]=p)}return c}const Et=le;function Rt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function at(s){return s[Wt]||null}function Pn(s,o){const c=s[_t]||null;if(!c&&!0===o)throw new Error(`Type ${L(s)} does not have '\u0275mod' property.`);return c}function Zn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Qi(s){return Array.isArray(s)&&!0===s[1]}function Nu(s){return 0!=(8&s.flags)}function ml(s){return 2==(2&s.flags)}function wi(s){return 1==(1&s.flags)}function us(s){return null!==s.template}function ds(s){return 0!=(512&s[2])}function Ks(s,o){return s.hasOwnProperty(Lt)?s[Lt]:null}class bl{constructor(o,c,u){this.previousValue=o,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function ar(){return vc}function vc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Vr),Sa}function Sa(){const s=Aa(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===cn)s.previous=o;else for(let u in o)c[u]=o[u];s.current=null,this.ngOnChanges(o)}}function Vr(s,o,c,u){const h=Aa(s)||function(s,o){return s[Sh]=o}(s,{previous:cn,current:null}),p=h.current||(h.current={}),_=h.previous,v=this.declaredInputs[c],C=_[v];p[v]=new bl(C&&C.currentValue,o,_===cn),s[u]=o}ar.ngInherit=!0;const Sh="__ngSimpleChanges__";function Aa(s){return s[Sh]||null}let Na;function Li(s){Na=s}function bc(){return void 0!==Na?Na:"undefined"!=typeof document?document:void 0}function qn(s){return!!s.listen}const Ms={createRenderer:(s,o)=>bc()};function On(s){for(;Array.isArray(s);)s=s[0];return s}function wc(s,o){return On(o[s])}function Fn(s,o){return On(o[s.index])}function Rs(s,o){return s.data[o]}function Ma(s,o){return s[o]}function Br(s,o){const c=o[s];return Zn(c)?c:c[0]}function Mh(s){return 4==(4&s[2])}function Cl(s){return 128==(128&s[2])}function Dr(s,o){return null==o?null:s[o]}function El(s){s[18]=0}function Cc(s,o){s[5]+=o;let c=s,u=s[3];for(;null!==u&&(1===o&&1===c[5]||-1===o&&0===c[5]);)u[5]+=o,c=u,u=u[3]}const Ot={lFrame:Wu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Hu(){return Ot.bindingsEnabled}function We(){return Ot.lFrame.lView}function sn(){return Ot.lFrame.tView}function Ra(s){return Ot.lFrame.contextLView=s,s[8]}function Jn(){let s=xl();for(;null!==s&&64===s.type;)s=s.parent;return s}function xl(){return Ot.lFrame.currentTNode}function Qs(){const s=Ot.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function gi(s,o){const c=Ot.lFrame;c.currentTNode=s,c.isParent=o}function ka(){return Ot.lFrame.isParent}function Tl(){Ot.lFrame.isParent=!1}function Io(){return Ot.isInCheckNoChangesMode}function xc(s){Ot.isInCheckNoChangesMode=s}function yr(){const s=Ot.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Vi(){return Ot.lFrame.bindingIndex}function Bi(){return Ot.lFrame.bindingIndex++}function Ui(s){const o=Ot.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function Gu(s){Ot.lFrame.inI18n=s}function Pa(s,o){const c=Ot.lFrame;c.bindingIndex=c.bindingRootIndex=s,na(o)}function na(s){Ot.lFrame.currentDirectiveIndex=s}function Tc(){return Ot.lFrame.currentQueryIndex}function So(s){Ot.lFrame.currentQueryIndex=s}function Sl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function qu(s,o,c){if(c&gt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&gt.Host||(h=Sl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const u=Ot.lFrame=kh();return u.currentTNode=o,u.lView=s,!0}function Oa(s){const o=kh(),c=s[1];Ot.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function kh(){const s=Ot.lFrame,o=null===s?null:s.child;return null===o?Wu(s):o}function Wu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function zu(){const s=Ot.lFrame;return Ot.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Yu=zu;function ra(){const s=zu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Kr(){return Ot.lFrame.selectedIndex}function Fa(s){Ot.lFrame.selectedIndex=s}function Xn(){const s=Ot.lFrame;return Rs(s.tView,s.selectedIndex)}function Sc(s,o){for(let c=o.directiveStart,u=o.directiveEnd;c<u;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:I,ngOnDestroy:P}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-c,_),v&&((s.contentHooks||(s.contentHooks=[])).push(c,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-c,C),I&&((s.viewHooks||(s.viewHooks=[])).push(c,I),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,I)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(c,P)}}function Js(s,o,c){Ph(s,o,3,c)}function xr(s,o,c,u){(3&s[2])===c&&Ph(s,o,c,u)}function La(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function Ph(s,o,c,u){const p=null!=u?u:-1,_=o.length-1;let v=0;for(let C=void 0!==u?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=u&&v>=u)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(kp(s,c,o,C),s[18]=(4294901760&s[18])+C+2),C++}function kp(s,o,c,u){const h=c[u]<0,p=c[u+1],v=s[h?-c[u]:c[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Ao{constructor(o,c,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function Xu(s,o,c){const u=qn(s);let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const _=c[h++],v=c[h++],C=c[h++];u?s.setAttribute(o,v,C,_):o.setAttributeNS(_,v,C)}else{const _=p,v=c[++h];ks(_)?u&&s.setProperty(o,_,v):u?s.setAttribute(o,_,v):o.setAttribute(_,v),h++}}return h}function Oh(s){return 3===s||4===s||6===s}function ks(s){return 64===s.charCodeAt(0)}function ed(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?c=h:0===c||Op(s,c,h,null,-1===c||2===c?o[++u]:null)}}return s}function Op(s,o,c,u,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===c){if(null===u)return void(null!==h&&(s[p+1]=h));if(u===s[p+1])return void(s[p+2]=h)}p++,null!==u&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,c),null!==u&&s.splice(p++,0,u),null!==h&&s.splice(p++,0,h)}function Nl(s){return-1!==s}function Ba(s){return 32767&s}function Xi(s,o){let c=function(s){return s>>16}(s),u=o;for(;c>0;)u=u[15],c--;return u}let Ua=!0;function Nc(s){const o=Ua;return Ua=s,o}let Mc=0;function ia(s,o){const c=un(s,o);if(-1!==c)return c;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,Ml(u.data,s),Ml(o,null),Ml(u.blueprint,null));const h=Dt(s,o),p=s.injectorIndex;if(Nl(h)){const _=Ba(h),v=Xi(h,o),C=v[1].data;for(let I=0;I<8;I++)o[p+I]=v[_+I]|C[_+I]}return o[p+8]=h,p}function Ml(s,o){s.push(0,0,0,0,0,0,0,0,o)}function un(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Dt(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,u=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(u=2===_?p.declTNode:1===_?h[6]:null,null===u)return-1;if(c++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return-1}function Tn(s,o,c){!function(s,o,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(en)&&(u=c[en]),null==u&&(u=c[en]=Mc++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,c)}function Tr(s,o,c){if(c&gt.Optional)return s;_e(o,"NodeInjector")}function sa(s,o,c,u){if(c&gt.Optional&&void 0===u&&(u=null),0==(c&(gt.Self|gt.Host))){const h=s[9],p=ln(void 0);try{return h?h.get(o,u,c&gt.Optional):nr(o,u,c&gt.Optional)}finally{ln(p)}}return Tr(u,o,c)}function Ps(s,o,c,u=gt.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(en)?s[en]:void 0;return"number"==typeof o?o>=0?255&o:Vh:o}(c);if("function"==typeof p){if(!qu(o,s,u))return u&gt.Host?Tr(h,c,u):sa(o,c,u,h);try{const _=p(u);if(null!=_||u&gt.Optional)return _;_e(c)}finally{Yu()}}else if("number"==typeof p){let _=null,v=un(s,o),C=-1,I=u&gt.Host?o[16][6]:null;for((-1===v||u&gt.SkipSelf)&&(C=-1===v?Dt(s,o):o[v+8],-1!==C&&oa(u,!1)?(_=o[1],v=Ba(C),o=Xi(C,o)):v=-1);-1!==v;){const P=o[1];if(Rc(p,v,P.data)){const q=Lp(v,o,c,_,u,I);if(q!==fr)return q}C=o[v+8],-1!==C&&oa(u,o[1].data[v+8]===I)&&Rc(p,v,o)?(_=P,v=Ba(C),o=Xi(C,o)):v=-1}}}return sa(o,c,u,h)}const fr={};function Vh(){return new Ro(Jn(),We())}function Lp(s,o,c,u,h,p){const _=o[1],v=_.data[s+8],P=Mo(v,_,c,null==u?ml(v)&&Ua:u!=_&&0!=(3&v.type),h&gt.Host&&p===v);return null!==P?zn(o,_,P,v):fr}function Mo(s,o,c,u,h){const p=s.providerIndexes,_=o.data,v=1048575&p,C=s.directiveStart,P=p>>20,J=h?v+P:s.directiveEnd;for(let ce=u?v:v+P;ce<J;ce++){const fe=_[ce];if(ce<C&&c===fe||ce>=C&&fe.type===c)return ce}if(h){const ce=_[C];if(ce&&us(ce)&&ce.type===c)return C}return null}function zn(s,o,c,u){let h=s[c];const p=o.data;if(function(s){return s instanceof Ao}(h)){const _=h;_.resolving&&function(s,o){throw new Y("200",`Circular dependency in DI detected for ${s}`)}(G(p[c]));const v=Nc(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?ln(_.injectImpl):null;qu(s,u,gt.Default);try{h=s[c]=_.factory(void 0,p,s,u),o.firstCreatePass&&c>=u.directiveStart&&function(s,o,c){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(u){const _=vc(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,_)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,h),p&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,p),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,p))}(c,p[c],o)}finally{null!==C&&ln(C),Nc(v),_.resolving=!1,Yu()}}return h}function Rc(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function oa(s,o){return!(s&gt.Self||s&gt.Host&&o)}class Ro{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,u){return Ps(this._tNode,this._lView,o,u,c)}}function Ha(s){return or(()=>{const o=s.prototype.constructor,c=o[Lt]||td(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const p=h[Lt]||td(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function td(s){return B(s)?()=>{const o=td(S(s));return o&&o()}:Ks(s)}function kc(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const u=c.length;let h=0;for(;h<u;){const p=c[h];if(Oh(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<u&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(Jn(),s)}const fs="__parameters__";function Hi(s,o,c){return or(()=>{const u=function(s){return function(...c){if(s){const u=s(...c);for(const h in u)this[h]=u[h]}}}(o);function h(...p){if(this instanceof h)return u.apply(this,p),this;const _=new h(...p);return v.annotation=_,v;function v(C,I,P){const q=C.hasOwnProperty(fs)?C[fs]:Object.defineProperty(C,fs,{value:[]})[fs];for(;q.length<=P;)q.push(null);return(q[P]=q[P]||[]).push(_),C}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class er{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=yt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Bh=new er("AnalyzeForEntryComponents"),to=Function;function Ei(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let u=s[c];Array.isArray(u)?(o===s&&(o=s.slice(0,c)),Ei(u,o)):o!==s&&o.push(u)}return o}function Fs(s,o){s.forEach(c=>Array.isArray(c)?Fs(c,o):o(c))}function Ls(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Fo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Lo(s,o){const c=[];for(let u=0;u<s;u++)c.push(o);return c}function Ir(s,o,c){let u=Ga(s,o);return u>=0?s[1|u]=c:(u=~u,function(s,o,c,u){let h=s.length;if(h==o)s.push(c,u);else if(1===h)s.push(u,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=u}}(s,u,o,c)),u}function br(s,o){const c=Ga(s,o);if(c>=0)return s[1|c]}function Ga(s,o){return function(s,o,c){let u=0,h=s.length>>c;for(;h!==u;){const p=u+(h-u>>1),_=s[p<<c];if(o===_)return p<<c;_>o?h=p:u=p+1}return~(h<<c)}(s,o,1)}const pn={},$t="__NG_DI_FLAG__",kr="ngTempTokenPath",kl=/\n/gm,ro="__source",Vs=Z({provide:String,useValue:Z});let la;function Gt(s){const o=la;return la=s,o}function $p(s,o=gt.Default){if(void 0===la)throw new Error("inject() must be called from an injection context");return null===la?nr(s,void 0,o):la.get(s,o&gt.Optional?null:void 0,o)}function cr(s,o=gt.Default){return(fn||$p)(S(s),o)}function Pl(s){const o=[];for(let c=0;c<s.length;c++){const u=S(s[c]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,p=gt.Default;for(let _=0;_<u.length;_++){const v=u[_],C=jp(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(cr(h,p))}else o.push(cr(u))}return o}function Ol(s,o){return s[$t]=o,s.prototype[$t]=o,s}function jp(s){return s[$t]}function ps(s,o,c,u){const h=s[kr];throw o[ro]&&h.unshift(o[ro]),s.message=function(s,o,c,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=L(o);if(Array.isArray(o))h=o.map(L).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];p.push(_+":"+("string"==typeof v?JSON.stringify(v):L(v)))}h=`{${p.join(", ")}}`}return`${c}${u?"("+u+")":""}[${h}]: ${s.replace(kl,"\n  ")}`}("\n"+s.message,h,c,u),s.ngTokenPath=h,s[kr]=null,s}const qa=Ol(Hi("Inject",s=>({token:s})),-1),Wa=Ol(Hi("Optional"),8),Qr=Ol(Hi("SkipSelf"),4);let Bc;function ua(s){var o;return(null===(o=function(){if(void 0===Bc&&(Bc=null,At.trustedTypes))try{Bc=At.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Bc}())||void 0===o?void 0:o.createHTML(s))||s}class Ll{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class $v extends Ll{getTypeName(){return"HTML"}}class jv extends Ll{getTypeName(){return"Style"}}class Gh extends Ll{getTypeName(){return"Script"}}class Gv extends Ll{getTypeName(){return"URL"}}class Zv extends Ll{getTypeName(){return"ResourceURL"}}function da(s){return s instanceof Ll?s.changingThisBreaksApplicationSecurity:s}function $c(s,o){const c=Zh(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}function Zh(s){return s instanceof Ll&&s.getTypeName()||null}function w0(s){return new $v(s)}function Wp(s){return new jv(s)}function zp(s){return new Gh(s)}function ha(s){return new Gv(s)}function fd(s){return new Zv(s)}function qh(s){const o=new qv(s);return function(){try{return!!(new window.DOMParser).parseFromString(ua(""),"text/html")}catch(s){return!1}}()?new C0(o):o}class C0{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const c=(new window.DOMParser).parseFromString(ua(o),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(o):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class qv{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const u=this.inertDocument.createElement("body");c.appendChild(u)}}getInertBodyElement(o){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=ua(o),c;const u=this.inertDocument.createElement("body");return u.innerHTML=ua(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const c=o.attributes;for(let h=c.length-1;0<h;h--){const _=c.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const E0=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ka(s){return(s=String(s)).match(E0)||s.match(Wh)?s:"unsafe:"+s}function zh(s){return(s=String(s)).split(",").map(o=>Ka(o.trim())).join(", ")}function Bs(s){const o={};for(const c of s.split(","))o[c]=!0;return o}function Bl(...s){const o={};for(const c of s)for(const u in c)c.hasOwnProperty(u)&&(o[u]=!0);return o}const jc=Bs("area,br,col,hr,img,wbr"),x0=Bs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gc=Bs("rp,rt"),Yp=Bl(jc,Bl(x0,Bs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bl(Gc,Bs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bl(Gc,x0)),pd=Bs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),w=Bs("srcset"),E=Bl(pd,w,Bs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),V=Bs("script,style,template");class j{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let c=o.firstChild,u=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?u=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,u&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let h=this.checkClobberedElement(c,c.nextSibling);if(h){c=h;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(o){const c=o.nodeName.toLowerCase();if(!Yp.hasOwnProperty(c))return this.sanitizedSomething=!0,!V.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const u=o.attributes;for(let h=0;h<u.length;h++){const p=u.item(h),_=p.name,v=_.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;pd[v]&&(C=Ka(C)),w[v]&&(C=zh(C)),this.buf.push(" ",_,'="',ft(C),'"')}return this.buf.push(">"),!0}endElement(o){const c=o.nodeName.toLowerCase();Yp.hasOwnProperty(c)&&!jc.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(o){this.buf.push(ft(o))}checkClobberedElement(o,c){if(c&&(o.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return c}}const be=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ge=/([^\#-~ |!])/g;function ft(s){return s.replace(/&/g,"&amp;").replace(be,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ge,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let tt;function Tt(s,o){let c=null;try{tt=tt||qh(s);let u=o?String(o):"";c=tt.getInertBodyElement(u);let h=5,p=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=p,p=c.innerHTML,c=tt.getInertBodyElement(u)}while(u!==p);return ua((new j).sanitizeChildren(Sn(c)||c))}finally{if(c){const u=Sn(c)||c;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Sn(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var wn=(()=>((wn=wn||{})[wn.NONE=0]="NONE",wn[wn.HTML=1]="HTML",wn[wn.STYLE=2]="STYLE",wn[wn.SCRIPT=3]="SCRIPT",wn[wn.URL=4]="URL",wn[wn.RESOURCE_URL=5]="RESOURCE_URL",wn))();function md(s){const o=function(){const s=We();return s&&s[12]}();return o?o.sanitize(wn.URL,s)||"":$c(s,"URL")?da(s):Ka(H(s))}const Qh="__ngContext__";function ji(s,o){s[Qh]=o}function zv(s){const o=function(s){return s[Qh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function _d(s){return s.ngOriginalError}function JS(s,...o){s.error(...o)}class ef{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),u=this._findContext(o),h=(s=o)&&s.ngErrorLogger||JS;var s;h(this._console,"ERROR",o),c&&h(this._console,"ORIGINAL ERROR",c),u&&h(this._console,"ERROR CONTEXT",u)}_findContext(o){return o?o.ngDebugContext||this._findContext(_d(o)):null}_findOriginalError(o){let c=o&&_d(o);for(;c&&_d(c);)c=_d(c);return c||null}}const tA=/^>|^->|<!--|-->|--!>|<!-$/g,Xv=/(<|>)/;const fE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))();function Qa(s){return s instanceof Function?s():s}var Ja=(()=>((Ja=Ja||{})[Ja.Important=1]="Important",Ja[Ja.DashCase=2]="DashCase",Ja))();let eb;function M0(s,o){return eb(s,o)}function rg(s){const o=s[3];return Qi(o)?o[3]:o}function R0(s){return tb(s[13])}function yE(s){return tb(s[4])}function tb(s){for(;null!==s&&!Qi(s);)s=s[4];return s}function yd(s,o,c,u,h){if(null!=u){let p,_=!1;Qi(u)?p=u:Zn(u)&&(_=!0,u=u[0]);const v=On(u);0===s&&null!==c?null==h?EE(o,c,v):qc(o,c,v,h||null,!0):1===s&&null!==c?qc(o,c,v,h||null,!0):2===s?ab(o,v,_):3===s&&o.destroyNode(v),null!=p&&function(s,o,c,u,h){const p=c[7];p!==On(c)&&yd(o,s,u,p,h);for(let v=10;v<c.length;v++){const C=c[v];bd(C[1],C,s,o,u,p)}}(o,s,p,c,h)}}function k0(s,o){return qn(s)?s.createText(o):s.createTextNode(o)}function vE(s,o,c){qn(s)?s.setValue(o,c):o.textContent=c}function lA(s,o){return s.createComment(function(s){return s.replace(tA,o=>o.replace(Xv,"\u200b$1\u200b"))}(o))}function nb(s,o,c){return qn(s)?s.createElement(o,c):null===c?s.createElement(o):s.createElementNS(c,o)}function P0(s,o){const c=s[9],u=c.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Cc(h,-1)),c.splice(u,1)}function O0(s,o){if(s.length<=10)return;const c=10+o,u=s[c];if(u){const h=u[17];null!==h&&h!==s&&P0(h,u),o>0&&(s[c-1][4]=u[4]);const p=Fo(s,10+o);!function(s,o){bd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const _=p[19];null!==_&&_.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function bE(s,o){if(!(256&o[2])){const c=o[11];qn(c)&&c.destroyNode&&bd(s,o,c,3,null,null),function(s){let o=s[13];if(!o)return Zc(s[1],s);for(;o;){let c=null;if(Zn(o))c=o[13];else{const u=o[10];u&&(c=u)}if(!c){for(;o&&!o[4]&&o!==s;)Zn(o)&&Zc(o[1],o),o=o[3];null===o&&(o=s),Zn(o)&&Zc(o[1],o),c=o&&o[4]}o=c}}(o)}}function Zc(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let u=0;u<c.length;u+=2){const h=o[c[u]];if(!(h instanceof Ao)){const p=c[u+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const v=h[p[_]],C=p[_+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const c=s.cleanup,u=o[7];let h=-1;if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const _=c[p+1],v="function"==typeof _?_(o):On(o[_]),C=u[h=c[p+2]],I=c[p+3];"boolean"==typeof I?v.removeEventListener(c[p],C,I):I>=0?u[h=I]():u[h=-I].unsubscribe(),p+=2}else{const _=u[h=c[p+1]];c[p].call(_)}if(null!==u){for(let p=h+1;p<u.length;p++)u[p]();o[7]=null}}(s,o),1===o[1].type&&qn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&Qi(o[3])){c!==o[3]&&P0(c,o);const u=o[19];null!==u&&u.detachView(s)}}}function wE(s,o,c){return CE(s,o.parent,c)}function CE(s,o,c){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return c[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===it.None||h===it.Emulated)return null}return Fn(u,c)}function qc(s,o,c,u,h){qn(s)?s.insertBefore(o,c,u,h):o.insertBefore(c,u,h)}function EE(s,o,c){qn(s)?s.appendChild(o,c):o.appendChild(c)}function DE(s,o,c,u,h){null!==u?qc(s,o,c,u,h):EE(s,o,c)}function F0(s,o){return qn(s)?s.parentNode(o):o.parentNode}function V0(s,o,c){return vd(s,o,c)}function ig(s,o,c){return 40&s.type?Fn(s,c):null}let ib,vd=ig;function xE(s,o){vd=s,ib=o}function nf(s,o,c,u){const h=wE(s,u,o),p=o[11],v=V0(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(c))for(let C=0;C<c.length;C++)DE(p,h,c[C],v,!1);else DE(p,h,c,v,!1);void 0!==ib&&ib(p,u,o,c,h)}function B0(s,o){if(null!==o){const c=o.type;if(3&c)return Fn(o,s);if(4&c)return ob(-1,s[o.index]);if(8&c){const u=o.child;if(null!==u)return B0(s,u);{const h=s[o.index];return Qi(h)?ob(-1,h):On(h)}}if(32&c)return M0(o,s)()||On(s[o.index]);{const u=sb(s,o);return null!==u?Array.isArray(u)?u[0]:B0(rg(s[16]),u):B0(s,o.next)}}return null}function sb(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ob(s,o){const c=10+s+1;if(c<o.length){const u=o[c],h=u[1].firstChild;if(null!==h)return B0(u,h)}return o[7]}function ab(s,o,c){const u=F0(s,o);u&&function(s,o,c,u){qn(s)?s.removeChild(o,c,u):o.removeChild(c)}(s,u,o,c)}function U0(s,o,c,u,h,p,_){for(;null!=c;){const v=u[c.index],C=c.type;if(_&&0===o&&(v&&ji(On(v),u),c.flags|=4),64!=(64&c.flags))if(8&C)U0(s,o,c.child,u,h,p,!1),yd(o,s,h,v,p);else if(32&C){const I=M0(c,u);let P;for(;P=I();)yd(o,s,h,P,p);yd(o,s,h,v,p)}else 16&C?Wc(s,o,u,c,h,p):yd(o,s,h,v,p);c=_?c.projectionNext:c.next}}function bd(s,o,c,u,h,p){U0(c,u,s.firstChild,o,h,p,!1)}function Wc(s,o,c,u,h,p){const _=c[16],C=_[6].projection[u.projection];if(Array.isArray(C))for(let I=0;I<C.length;I++)yd(o,s,h,C[I],p);else U0(s,o,C,_[3],h,p,!0)}function IE(s,o,c){qn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function lb(s,o,c){qn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function cb(s,o,c){let u=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===u||s.charCodeAt(h+p)<=32)return h}c=h+1}}const SE="ng-template";function _A(s,o,c){let u=0;for(;u<s.length;){let h=s[u++];if(c&&"class"===h){if(h=s[u],-1!==cb(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function ub(s){return 4===s.type&&s.value!==SE}function yA(s,o,c){return o===(4!==s.type||c?s.value:SE)}function vA(s,o,c){let u=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(Oh(s[o]))return o;return s.length}(h);let _=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!_)if(4&u){if(u=2|1&u,""!==C&&!yA(s,C,c)||""===C&&1===o.length){if(ga(u))return!1;_=!0}}else{const I=8&u?C:o[++v];if(8&u&&null!==s.attrs){if(!_A(s.attrs,I,c)){if(ga(u))return!1;_=!0}continue}const q=db(8&u?"class":C,h,ub(s),c);if(-1===q){if(ga(u))return!1;_=!0;continue}if(""!==I){let J;J=q>p?"":h[q+1].toLowerCase();const ce=8&u?J:null;if(ce&&-1!==cb(ce,I,0)||2&u&&I!==J){if(ga(u))return!1;_=!0}}}}else{if(!_&&!ga(u)&&!ga(C))return!1;if(_&&ga(C))continue;_=!1,u=C|1&u}}return ga(u)||_}function ga(s){return 0==(1&s)}function db(s,o,c,u){if(null===o)return-1;let h=0;if(u||!c){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const u=s[c];if("number"==typeof u)return-1;if(u===o)return c;c++}return-1}(o,s)}function AE(s,o,c=!1){for(let u=0;u<o.length;u++)if(vA(s,o[u],c))return!0;return!1}function i2(s,o){e:for(let c=0;c<o.length;c++){const u=o[c];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function He(s,o){return s?":not("+o.trim()+")":o}function so(s){let o=s[0],c=1,u=2,h="",p=!1;for(;c<s.length;){let _=s[c];if("string"==typeof _)if(2&u){const v=s[++c];h+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?h+="."+_:4&u&&(h+=" "+_);else""!==h&&!ga(_)&&(o+=He(p,h),h=""),u=_,p=p||!ga(u);c++}return""!==h&&(o+=He(p,h)),o}const Qt={};function rf(s){ME(sn(),We(),Kr()+s,Io())}function ME(s,o,c,u){if(!u)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Js(o,p,c)}else{const p=s.preOrderHooks;null!==p&&xr(o,p,0,c)}Fa(c)}function wd(s,o){return s<<17|o<<2}function ma(s){return s>>17&32767}function og(s){return 2|s}function _a(s){return(131068&s)>>2}function hb(s,o){return-131069&s|o<<2}function fb(s){return 1|s}function LE(s,o){const c=s.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const h=c[u],p=c[u+1];if(-1!==p){const _=s.data[p];So(h),_.contentQueries(2,o[p],p)}}}function oo(s,o,c,u,h,p,_,v,C,I){const P=o.blueprint.slice();return P[0]=h,P[2]=140|u,El(P),P[3]=P[15]=s,P[8]=c,P[10]=_||s&&s[10],P[11]=v||s&&s[11],P[12]=C||s&&s[12]||null,P[9]=I||s&&s[9]||null,P[6]=p,P[16]=2==o.type?s[16]:P,P}function ys(s,o,c,u,h){let p=s.data[o];if(null===p)p=Gl(s,o,c,u,h),Ot.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=c,p.value=u,p.attrs=h;const _=Qs();p.injectorIndex=null===_?-1:_.injectorIndex}return gi(p,!0),p}function Gl(s,o,c,u,h){const p=xl(),_=ka(),C=s.data[o]=function(s,o,c,u,h,p){return{type:c,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,c,o,u,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function lf(s,o,c,u){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function Zl(s,o,c){Oa(o);try{const u=s.viewQuery;null!==u&&Ed(1,u,c);const h=s.template;null!==h&&yi(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&LE(s,o),s.staticViewQueries&&Ed(2,s.viewQuery,c);const p=s.components;null!==p&&function(s,o){for(let c=0;c<o.length;c++)$A(s,o[c])}(o,p)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,ra()}}function Kc(s,o,c,u){const h=o[2];if(256==(256&h))return;Oa(o);const p=Io();try{El(o),function(s){Ot.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&yi(s,o,c,2,u);const _=3==(3&h);if(!p)if(_){const I=s.preOrderCheckHooks;null!==I&&Js(o,I,null)}else{const I=s.preOrderHooks;null!==I&&xr(o,I,0,null),La(o,0)}if(function(s){for(let o=R0(s);null!==o;o=yE(o)){if(!o[2])continue;const c=o[9];for(let u=0;u<c.length;u++){const h=c[u],p=h[3];0==(1024&h[2])&&Cc(p,1),h[2]|=1024}}}(o),function(s){for(let o=R0(s);null!==o;o=yE(o))for(let c=10;c<o.length;c++){const u=o[c],h=u[1];Cl(u)&&Kc(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&LE(s,o),!p)if(_){const I=s.contentCheckHooks;null!==I&&Js(o,I)}else{const I=s.contentHooks;null!==I&&xr(o,I,1),La(o,1)}!function(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let u=0;u<c.length;u++){const h=c[u];if(h<0)Fa(~h);else{const p=h,_=c[++u],v=c[++u];Pa(_,p),v(2,o[p])}}}finally{Fa(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let c=0;c<o.length;c++)HA(s,o[c])}(o,v);const C=s.viewQuery;if(null!==C&&Ed(2,C,u),!p)if(_){const I=s.viewCheckHooks;null!==I&&Js(o,I)}else{const I=s.viewHooks;null!==I&&xr(o,I,2),La(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Cc(o[3],-1))}finally{ra()}}function VE(s,o,c,u){const h=o[10],p=!Io(),_=Mh(o);try{p&&!_&&h.begin&&h.begin(),_&&Zl(s,o,u),Kc(s,o,c,u)}finally{p&&!_&&h.end&&h.end()}}function yi(s,o,c,u,h){const p=Kr(),_=2&u;try{Fa(-1),_&&o.length>20&&ME(s,o,20,Io()),c(u,h)}finally{Fa(p)}}function _b(s,o,c){if(Nu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,c[p],p)}}}function yb(s,o,c){!Hu()||(function(s,o,c,u){const h=c.directiveStart,p=c.directiveEnd;s.firstCreatePass||ia(c,o),ji(u,o);const _=c.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],I=us(C);I&&zE(o,c,C);const P=zn(o,s,v,c);ji(P,o),null!==_&&LA(0,v-h,P,C,0,_),I&&(Br(c.index,o)[8]=P)}}(s,o,c,Fn(c,o)),128==(128&c.flags)&&function(s,o,c){const u=c.directiveStart,h=c.directiveEnd,_=c.index,v=Ot.lFrame.currentDirectiveIndex;try{Fa(_);for(let C=u;C<h;C++){const I=s.data[C],P=o[C];na(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Db(I,P)}}finally{Fa(-1),na(v)}}(s,o,c))}function vb(s,o,c=Fn){const u=o.localNames;if(null!==u){let h=o.index+1;for(let p=0;p<u.length;p+=2){const _=u[p+1],v=-1===_?c(o,s):s[_];s[h++]=v}}}function BE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Z0(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Z0(s,o,c,u,h,p,_,v,C,I){const P=20+u,q=P+h,J=function(s,o){const c=[];for(let u=0;u<o;u++)c.push(u<s?null:Qt);return c}(P,q),ce="function"==typeof I?I():I;return J[1]={type:s,blueprint:J,template:c,queries:null,viewQuery:v,declTNode:o,data:J.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:ce,incompleteFirstPass:!1}}function HE(s,o,c,u){const h=QE(o);null===c?h.push(u):(h.push(c),s.firstCreatePass&&JE(s).push(u,h.length-1))}function $E(s,o,c){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(c=null===c?{}:c).hasOwnProperty(u)?c[u].push(o,h):c[u]=[o,h]}return c}function ts(s,o,c,u,h,p,_,v){const C=Fn(o,c);let P,I=o.inputs;!v&&null!=I&&(P=I[u])?(K0(s,c,P,u,h),ml(o)&&function(s,o){const c=Br(o,s);16&c[2]||(c[2]|=64)}(c,o.index)):3&o.type&&(u=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=_?_(h,o.value||"",u):h,qn(p)?p.setProperty(C,u,h):ks(u)||(C.setProperty?C.setProperty(u,h):C[u]=h))}function hg(s,o,c,u){let h=!1;if(Hu()){const p=function(s,o,c){const u=s.directiveRegistry;let h=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];AE(c,_.selectors,!1)&&(h||(h=[]),Tn(ia(c,o),s,_.type),us(_)?(W0(s,c),h.unshift(_)):h.push(_))}return h}(s,o,c),_=null===u?null:{"":-1};if(null!==p){h=!0,qE(c,s.data.length,p.length);for(let P=0;P<p.length;P++){const q=p[P];q.providersResolver&&q.providersResolver(q)}let v=!1,C=!1,I=lf(s,o,p.length,null);for(let P=0;P<p.length;P++){const q=p[P];c.mergedAttrs=ed(c.mergedAttrs,q.hostAttrs),WE(s,c,o,I,q),Tb(I,q,_),null!==q.contentQueries&&(c.flags|=8),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(c.flags|=128);const J=q.type.prototype;!v&&(J.ngOnChanges||J.ngOnInit||J.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),v=!0),!C&&(J.ngOnChanges||J.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),C=!0),I++}!function(s,o){const u=o.directiveEnd,h=s.data,p=o.attrs,_=[];let v=null,C=null;for(let I=o.directiveStart;I<u;I++){const P=h[I],q=P.inputs,J=null===p||ub(o)?null:YE(q,p);_.push(J),v=$E(q,I,v),C=$E(P.outputs,I,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=C}(s,c)}_&&function(s,o,c){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new Y("301",`Export of name '${o[h+1]}' not found!`);u.push(o[h],p)}}}(c,u,_)}return c.mergedAttrs=ed(c.mergedAttrs,c.attrs),h}function Cb(s,o,c,u,h,p){const _=p.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(v)!=C&&v.push(C),v.push(u,h,_)}}function Db(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function W0(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Tb(s,o,c){if(c){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)c[o.exportAs[u]]=s;us(o)&&(c[""]=s)}}function qE(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function WE(s,o,c,u,h){s.data[u]=h;const p=h.factory||(h.factory=Ks(h.type)),_=new Ao(p,us(h),null);s.blueprint[u]=_,c[u]=_,Cb(s,o,0,u,lf(s,c,h.hostVars,Qt),h)}function zE(s,o,c){const u=Fn(o,s),h=BE(c),p=s[10],_=fg(s,oo(s,h,null,c.onPush?64:16,u,o,p,p.createRenderer(u,c),null,null));s[o.index]=_}function Ib(s,o,c,u,h,p,_){if(null==p)qn(s)?s.removeAttribute(o,h,c):o.removeAttribute(h);else{const v=null==_?H(p):_(p,u||"",h);qn(s)?s.setAttribute(o,h,v,c):c?o.setAttributeNS(c,h,v):o.setAttribute(h,v)}}function LA(s,o,c,u,h,p){const _=p[o];if(null!==_){const v=u.setInput;for(let C=0;C<_.length;){const I=_[C++],P=_[C++],q=_[C++];null!==v?u.setInput(c,q,I,P):c[P]=q}}}function YE(s,o){let c=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return c}function Sb(s,o,c,u){return new Array(s,!0,!1,o,null,0,u,c,null,null)}function HA(s,o){const c=Br(o,s);if(Cl(c)){const u=c[1];80&c[2]?Kc(u,c,u.template,c[8]):c[5]>0&&Ab(c)}}function Ab(s){for(let u=R0(s);null!==u;u=yE(u))for(let h=10;h<u.length;h++){const p=u[h];if(1024&p[2]){const _=p[1];Kc(_,p,_.template,p[8])}else p[5]>0&&Ab(p)}const c=s[1].components;if(null!==c)for(let u=0;u<c.length;u++){const h=Br(c[u],s);Cl(h)&&h[5]>0&&Ab(h)}}function $A(s,o){const c=Br(o,s),u=c[1];(function(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(u,c),Zl(u,c,c[8])}function fg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Nb(s){for(;s;){s[2]|=64;const o=rg(s);if(ds(s)&&!o)return s;s=o}return null}function Qc(s,o,c){const u=o[10];u.begin&&u.begin();try{Kc(s,o,s.template,c)}catch(h){throw eD(o,h),h}finally{u.end&&u.end()}}function z0(s){!function(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],u=zv(c),h=u[1];VE(h,u,h.template,c)}}(s[8])}function Ed(s,o,c){So(0),o(s,c)}const Rb=(()=>Promise.resolve(null))();function QE(s){return s[7]||(s[7]=[])}function JE(s){return s.cleanup||(s.cleanup=[])}function eD(s,o){const c=s[9],u=c?c.get(ef,null):null;u&&u.handleError(o)}function K0(s,o,c,u,h){for(let p=0;p<c.length;){const _=c[p++],v=c[p++],C=o[_],I=s.data[_];null!==I.setInput?I.setInput(C,h,u,v):C[v]=h}}function rl(s,o,c){const u=wc(o,s);vE(s[11],u,c)}function Q0(s,o,c){let u=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?p=v:1==p?h=U(h,v):2==p&&(u=U(u,v+": "+o[++_]+";"))}c?s.styles=u:s.stylesWithoutHost=u,c?s.classes=h:s.classesWithoutHost=h}const Dd=new er("INJECTOR",-1);class kb{get(o,c=pn){if(c===pn){const u=new Error(`NullInjectorError: No provider for ${L(o)}!`);throw u.name="NullInjectorError",u}return c}}const cf=new er("Set Injector scope."),pg={},nD={};let J0;function Pb(){return void 0===J0&&(J0=new kb),J0}function Ob(s,o=null,c=null,u){return new rD(s,c,o||Pb(),u)}class rD{constructor(o,c,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];c&&Fs(c,v=>this.processProvider(v,o,c)),Fs([o],v=>this.processInjectorType(v,[],p)),this.records.set(Dd,Un(void 0,this));const _=this.records.get(cf);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:L(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=pn,u=gt.Default){this.assertNotDestroyed();const h=Gt(this),p=ln(void 0);try{if(!(u&gt.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof er)&&qt(o);v=C&&this.injectableDefInScope(C)?Un(Vn(o),pg):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(u&gt.Self?Pb():this.parent).get(o,c=u&gt.Optional&&c===pn?null:c)}catch(_){if("NullInjectorError"===_.name){if((_[kr]=_[kr]||[]).unshift(L(o)),h)throw _;return ps(_,o,"R3InjectorError",this.source)}throw _}finally{ln(p),Gt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((u,h)=>o.push(L(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,c,u){if(!(o=S(o)))return!1;let h=Mn(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,v=-1!==u.indexOf(_);if(void 0!==p&&(h=Mn(p)),null==h)return!1;if(null!=h.imports&&!v){let P;u.push(_);try{Fs(h.imports,q=>{this.processInjectorType(q,c,u)&&(void 0===P&&(P=[]),P.push(q))})}finally{}if(void 0!==P)for(let q=0;q<P.length;q++){const{ngModule:J,providers:ce}=P[q];Fs(ce,fe=>this.processProvider(fe,J,ce||St))}}this.injectorDefTypes.add(_);const C=Ks(_)||(()=>new _);this.records.set(_,Un(C,pg));const I=h.providers;if(null!=I&&!v){const P=o;Fs(I,q=>this.processProvider(q,P,I))}return void 0!==p&&void 0!==o.providers}processProvider(o,c,u){let h=xd(o=S(o))?o:S(o&&o.provide);const p=e_(s=o)?Un(void 0,s.useValue):Un(ql(s),pg);var s;if(xd(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=Un(void 0,pg,!0),_.factory=()=>Pl(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,c){return c.value===pg&&(c.value=nD,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(s=c.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const c=S(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function Vn(s){const o=qt(s),c=null!==o?o.factory:Ks(s);if(null!==c)return c;if(s instanceof er)throw new Error(`Token ${L(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const u=Lo(o,"?");throw new Error(`Can't resolve all parameters for ${L(s)}: (${u.join(", ")}).`)}const c=function(s){const o=s&&(s[Yn]||s[Kn]);if(o){const c=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Error("unreachable")}function ql(s,o,c){let u;if(xd(s)){const h=S(s);return Ks(h)||Vn(h)}if(e_(s))u=()=>S(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...Pl(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))u=()=>cr(S(s.useExisting));else{const h=S(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return Ks(h)||Vn(h);u=()=>new h(...Pl(s.deps))}return u}function Un(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function e_(s){return null!==s&&"object"==typeof s&&Vs in s}function xd(s){return"function"==typeof s}const sD=function(s,o,c){return function(s,o=null,c=null,u){const h=Ob(s,o,c,u);return h._resolveInjectorDefTypes(),h}({name:c},o,s,c)};let Ar=(()=>{class s{static create(c,u){return Array.isArray(c)?sD(c,u,""):sD(c.providers,c.parent,c.name||"")}}return s.THROW_IF_NOT_FOUND=pn,s.NULL=new kb,s.\u0275prov=yt({token:s,providedIn:"any",factory:()=>cr(Dd)}),s.__NG_ELEMENT_ID__=-1,s})();function nn(s,o){Sc(zv(s)[1],Jn())}function $b(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const u=[s];for(;o;){let h;if(us(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(c){u.push(h);const _=s;_.inputs=vg(s.inputs),_.declaredInputs=vg(s.declaredInputs),_.outputs=vg(s.outputs);const v=h.hostBindings;v&&ff(s,v);const C=h.viewQuery,I=h.contentQueries;if(C&&nN(s,C),I&&jb(s,I),ee(s.inputs,h.inputs),ee(s.declaredInputs,h.declaredInputs),ee(s.outputs,h.outputs),us(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const v=p[_];v&&v.ngInherit&&v(s),v===$b&&(c=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,c=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=ed(h.hostAttrs,c=ed(c,h.hostAttrs))}}(u)}function vg(s){return s===cn?{}:s===St?[]:s}function nN(s,o){const c=s.viewQuery;s.viewQuery=c?(u,h)=>{o(u,h),c(u,h)}:o}function jb(s,o){const c=s.contentQueries;s.contentQueries=c?(u,h,p)=>{o(u,h,p),c(u,h,p)}:o}function ff(s,o){const c=s.hostBindings;s.hostBindings=c?(u,h)=>{o(u,h),c(u,h)}:o}let r_=null;function Ad(){if(!r_){const s=At.Symbol;if(s&&s.iterator)r_=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const u=o[c];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(r_=u)}}}return r_}class Ho{constructor(o){this.wrapped=o}static wrap(o){return new Ho(o)}static unwrap(o){return Ho.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof Ho}}function sl(s){return!!qb(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ad()in s)}function qb(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function $o(s,o,c){return s[o]=c}function ns(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function ol(s,o,c,u){const h=ns(s,o,c);return ns(s,o+1,u)||h}function Wb(s,o,c,u){const h=We();return ns(h,Bi(),o)&&(sn(),function(s,o,c,u,h,p){const _=Fn(s,o);Ib(o[11],_,p,s.value,c,u,h)}(Xn(),h,s,o,c,u)),Wb}function pf(s,o,c,u){return ns(s,Bi(),c)?o+H(c)+u:Qt}function zl(s,o,c,u,h,p,_,v,C,I){const q=function(s,o,c,u,h,p){const _=ol(s,o,c,u);return ol(s,o+2,h,p)||_}(s,Vi(),c,h,_,C);return Ui(4),q?o+H(c)+u+H(h)+p+H(_)+v+H(C)+I:Qt}function ao(s,o,c,u,h,p,_,v){const C=We(),I=sn(),P=s+20,q=I.firstCreatePass?function(s,o,c,u,h,p,_,v,C){const I=o.consts,P=ys(o,s,4,_||null,Dr(I,v));hg(o,c,P,Dr(I,C)),Sc(o,P);const q=P.tViews=Z0(2,P,u,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,I);return null!==o.queries&&(o.queries.template(o,P),q.queries=o.queries.embeddedTView(P)),P}(P,I,C,o,c,u,h,p,_):I.data[P];gi(q,!1);const J=C[11].createComment("");nf(I,C,J,q),ji(J,C),fg(C,C[P]=Sb(J,C,J,q)),wi(q)&&yb(I,C,q),null!=_&&vb(C,q,v)}function a_(s){return Ma(Ot.lFrame.contextLView,20+s)}function Vd(s,o=gt.Default){const c=We();return null===c?cr(s,o):Ps(Jn(),c,S(s),o)}function m_(s,o,c){const u=We();return ns(u,Bi(),o)&&ts(sn(),Xn(),u,s,o,u[11],c,!1),m_}function Jb(s,o,c,u,h){const _=h?"class":"style";K0(s,c,o.inputs[_],_,u)}function __(s,o,c,u){const h=We(),p=sn(),_=20+s,v=h[11],C=h[_]=nb(v,o,Ot.lFrame.currentNamespace),I=p.firstCreatePass?function(s,o,c,u,h,p,_){const v=o.consts,I=ys(o,s,2,h,Dr(v,p));return hg(o,c,I,Dr(v,_)),null!==I.attrs&&Q0(I,I.attrs,!1),null!==I.mergedAttrs&&Q0(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(_,p,h,0,o,c,u):p.data[_];gi(I,!0);const P=I.mergedAttrs;null!==P&&Xu(v,C,P);const q=I.classes;null!==q&&lb(v,C,q);const J=I.styles;null!==J&&IE(v,C,J),64!=(64&I.flags)&&nf(p,h,C,I),0===Ot.lFrame.elementDepthCount&&ji(C,h),Ot.lFrame.elementDepthCount++,wi(I)&&(yb(p,h,I),_b(p,I,h)),null!==u&&vb(h,I)}function xg(){let s=Jn();ka()?Tl():(s=s.parent,gi(s,!1));const o=s;Ot.lFrame.elementDepthCount--;const c=sn();c.firstCreatePass&&(Sc(c,s),Nu(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Jb(c,o,We(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Jb(c,o,We(),o.stylesWithoutHost,!1)}function FD(s,o,c,u){__(s,o,c,u),xg()}function Xb(s,o,c){const u=We(),h=sn(),p=s+20,_=h.firstCreatePass?function(s,o,c,u,h){const p=o.consts,_=Dr(p,u),v=ys(o,s,8,"ng-container",_);return null!==_&&Q0(v,_,!0),hg(o,c,v,Dr(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,u,o,c):h.data[p];gi(_,!0);const v=u[p]=u[11].createComment("");nf(h,u,v,_),ji(v,u),wi(_)&&(yb(h,u,_),_b(h,_,u)),null!=c&&vb(u,_)}function y_(){let s=Jn();const o=sn();ka()?Tl():(s=s.parent,gi(s,!1)),o.firstCreatePass&&(Sc(o,s),Nu(s)&&o.queries.elementEnd(s))}function b_(){return We()}function w_(s){return!!s&&"function"==typeof s.then}function LD(s){return!!s&&"function"==typeof s.subscribe}const C_=LD;function Tg(s,o,c,u){const h=We(),p=sn(),_=Jn();return function(s,o,c,u,h,p,_,v){const C=wi(u),P=s.firstCreatePass&&JE(s),q=o[8],J=QE(o);let ce=!0;if(3&u.type||v){const Te=Fn(u,o),Xe=v?v(Te):Te,$e=J.length,It=v?Ft=>v(On(Ft[u.index])):u.index;if(qn(c)){let Ft=null;if(!v&&C&&(Ft=function(s,o,c,u){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===c&&h[p+1]===u){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,u.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=p,Ft.__ngLastListenerFn__=p,ce=!1;else{p=e1(u,o,q,p,!1);const hn=c.listen(Xe,h,p);J.push(p,hn),P&&P.push(h,It,$e,$e+1)}}else p=e1(u,o,q,p,!0),Xe.addEventListener(h,p,_),J.push(p),P&&P.push(h,It,$e,_)}else p=e1(u,o,q,p,!1);const fe=u.outputs;let Pe;if(ce&&null!==fe&&(Pe=fe[h])){const Te=Pe.length;if(Te)for(let Xe=0;Xe<Te;Xe+=2){const bi=o[Pe[Xe]][Pe[Xe+1]].subscribe(p),Ko=J.length;J.push(p,bi),P&&P.push(h,u.index,Ko,-(Ko+1))}}}(p,h,h[11],_,s,o,!!c,u),Tg}function UD(s,o,c,u){try{return!1!==c(u)}catch(h){return eD(s,h),!1}}function e1(s,o,c,u,h){return function p(_){if(_===Function)return u;const v=2&s.flags?Br(s.index,o):o;0==(32&o[2])&&Nb(v);let C=UD(o,0,u,_),I=p.__ngNextListenerFn__;for(;I;)C=UD(o,0,I,_)&&C,I=I.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function HD(s=1){return function(s){return(Ot.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,Ot.lFrame.contextLView))[8]}(s)}function yN(s,o){let c=null;const u=function(s){const o=s.attrs;if(null!=o){const c=o.indexOf(5);if(0==(1&c))return o[c+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===u?AE(s,p,!0):i2(u,p))return h}else c=h}return c}function t1(s){const o=We()[16][6];if(!o.projection){const u=o.projection=Lo(s?s.length:1,null),h=u.slice();let p=o.child;for(;null!==p;){const _=s?yN(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:u[_]=p,h[_]=p),p=p.next}}}function $D(s,o=0,c){const u=We(),h=sn(),p=ys(h,20+s,16,null,c||null);null===p.projection&&(p.projection=o),Tl(),64!=(64&p.flags)&&function(s,o,c){Wc(o[11],0,o,c,wE(s,c,o),V0(c.parent||o[6],c,o))}(h,u,p)}function E_(s,o,c){return Ig(s,"",o,"",c),E_}function Ig(s,o,c,u,h){const p=We(),_=pf(p,o,c,u);return _!==Qt&&ts(sn(),Xn(),p,s,_,p[11],h,!1),Ig}function i1(s,o,c,u,h){const p=s[c+1],_=null===o;let v=u?ma(p):_a(p),C=!1;for(;0!==v&&(!1===C||_);){const P=s[v+1];nu(s[v],o)&&(C=!0,s[v+1]=u?fb(P):og(P)),v=u?ma(P):_a(P)}C&&(s[c+1]=u?og(p):fb(p))}function nu(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ga(s,o)>=0}const ii={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function s1(s){return s.substring(ii.key,ii.keyEnd)}function Ag(s,o){const c=ii.textEnd;return c===o?-1:(o=ii.keyEnd=function(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,ii.key=o,c),Bd(s,o,c))}function Bd(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function a1(s,o,c){return ba(s,o,c,!1),a1}function Mg(s,o){return ba(s,o,null,!0),Mg}function l1(s){rs(Ir,co,s,!0)}function co(s,o){for(let c=function(s){return function(s){ii.key=0,ii.keyEnd=0,ii.value=0,ii.valueEnd=0,ii.textEnd=s.length}(s),Ag(s,Bd(s,0,ii.textEnd))}(o);c>=0;c=Ag(o,c))Ir(s,s1(o),!0)}function ba(s,o,c,u){const h=We(),p=sn(),_=Ui(2);p.firstUpdatePass&&u1(p,s,_,u),o!==Qt&&ns(h,_,o)&&QD(p,p.data[Kr()],h,h[11],s,h[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=L(da(s)))),s}(o,c),u,_)}function rs(s,o,c,u){const h=sn(),p=Ui(2);h.firstUpdatePass&&u1(h,null,p,u);const _=We();if(c!==Qt&&ns(_,p,c)){const v=h.data[Kr()];if(XD(v,u)&&!c1(h,p)){let C=u?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(c=U(C,c||"")),Jb(h,v,_,c,u)}else!function(s,o,c,u,h,p,_,v){h===Qt&&(h=St);let C=0,I=0,P=0<h.length?h[0]:null,q=0<p.length?p[0]:null;for(;null!==P||null!==q;){const J=C<h.length?h[C+1]:void 0,ce=I<p.length?p[I+1]:void 0;let Pe,fe=null;P===q?(C+=2,I+=2,J!==ce&&(fe=q,Pe=ce)):null===q||null!==P&&P<q?(C+=2,fe=P):(I+=2,fe=q,Pe=ce),null!==fe&&QD(s,o,c,u,fe,Pe,_,v),P=C<h.length?h[C]:null,q=I<p.length?p[I]:null}}(h,v,_,_[11],_[p+1],_[p+1]=function(s,o,c){if(null==c||""===c)return St;const u=[],h=da(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(u,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(u,p,h[p]);else"string"==typeof h&&o(u,h);return u}(s,o,c),u,p)}}function c1(s,o){return o>=s.expandoStartIndex}function u1(s,o,c,u){const h=s.data;if(null===h[c+1]){const p=h[Kr()],_=c1(s,c);XD(p,u)&&null===o&&!_&&(o=!1),o=function(s,o,c,u){const h=function(s){const o=Ot.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(c=Ud(c=Rg(null,s,o,c,u),o.attrs,u),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(c=Rg(h,s,o,c,u),null===p){let C=function(s,o,c){const u=c?o.classBindings:o.styleBindings;if(0!==_a(u))return s[ma(u)]}(s,o,u);void 0!==C&&Array.isArray(C)&&(C=Rg(null,s,o,C[1],u),C=Ud(C,o.attrs,u),function(s,o,c,u){s[ma(c?o.classBindings:o.styleBindings)]=u}(s,o,u,C))}else p=function(s,o,c){let u;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)u=Ud(u,s[p].hostAttrs,c);return Ud(u,o.attrs,c)}(s,o,u)}return void 0!==p&&(u?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,u),function(s,o,c,u,h,p){let _=p?o.classBindings:o.styleBindings,v=ma(_),C=_a(_);s[u]=c;let P,I=!1;if(Array.isArray(c)){const q=c;P=q[1],(null===P||Ga(q,P)>0)&&(I=!0)}else P=c;if(h)if(0!==C){const J=ma(s[v+1]);s[u+1]=wd(J,v),0!==J&&(s[J+1]=hb(s[J+1],u)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],u)}else s[u+1]=wd(v,0),0!==v&&(s[v+1]=hb(s[v+1],u)),v=u;else s[u+1]=wd(C,0),0===v?v=u:s[C+1]=hb(s[C+1],u),C=u;I&&(s[u+1]=og(s[u+1])),i1(s,P,u,!0),i1(s,P,u,!1),function(s,o,c,u,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ga(p,o)>=0&&(c[u+1]=fb(c[u+1]))}(o,P,s,u,p),_=wd(v,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,c,_,u)}}function Rg(s,o,c,u,h){let p=null;const _=c.directiveEnd;let v=c.directiveStylingLast;for(-1===v?v=c.directiveStart:v++;v<_&&(p=o[v],u=Ud(u,p.hostAttrs,h),p!==s);)v++;return null!==s&&(c.directiveStylingLast=v),u}function Ud(s,o,c){const u=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ir(s,_,!!c||o[++p]))}return void 0===s?null:s}function QD(s,o,c,u,h,p,_,v){if(!(3&o.type))return;const C=s.data,I=C[v+1];wf(function(s){return 1==(1&s)}(I)?JD(C,o,c,h,_a(I),_):void 0)||(wf(p)||function(s){return 2==(2&s)}(I)&&(p=JD(C,null,c,h,v,_)),function(s,o,c,u,h){const p=qn(s);if(o)h?p?s.addClass(c,u):c.classList.add(u):p?s.removeClass(c,u):c.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:Ja.DashCase;if(null==h)p?s.removeStyle(c,u,_):c.style.removeProperty(u);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),_|=Ja.Important),p?s.setStyle(c,u,h,_):c.style.setProperty(u,h,v?"important":"")}}}(u,_,wc(Kr(),c),h,p))}function JD(s,o,c,u,h,p){const _=null===o;let v;for(;h>0;){const C=s[h],I=Array.isArray(C),P=I?C[1]:C,q=null===P;let J=c[h+1];J===Qt&&(J=q?St:void 0);let ce=q?br(J,u):P===u?J:void 0;if(I&&!wf(ce)&&(ce=br(C,u)),wf(ce)&&(v=ce,_))return v;const fe=s[h+1];h=_?ma(fe):_a(fe)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=br(C,u))}return v}function wf(s){return void 0!==s}function XD(s,o){return 0!=(s.flags&(o?16:32))}function f1(s,o=""){const c=We(),u=sn(),h=s+20,p=u.firstCreatePass?ys(u,h,1,o,null):u.data[h],_=c[h]=k0(c[11],o);nf(u,c,_,p),gi(p,!1)}function p1(s){return S_("",s,""),p1}function S_(s,o,c){const u=We(),h=pf(u,s,o,c);return h!==Qt&&rl(u,Kr(),h),S_}function A_(s,o,c,u,h){const p=We(),_=function(s,o,c,u,h,p){const v=ol(s,Vi(),c,h);return Ui(2),v?o+H(c)+u+H(h)+p:Qt}(p,s,o,c,u,h);return _!==Qt&&rl(p,Kr(),_),A_}function tx(s,o,c,u,h,p,_,v,C){rs(Ir,co,zl(We(),s,o,c,u,h,p,_,v,C),!0)}function js(s,o,c){const u=We();return ns(u,Bi(),o)&&ts(sn(),Xn(),u,s,o,u[11],c,!0),js}const Hd=void 0;var kN=["en",[["a","p"],["AM","PM"],Hd],[["AM","PM"],Hd,Hd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hd,"{1} 'at' {0}",Hd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let Df={};function V_(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=w1(o);if(c)return c;const u=o.split("-")[0];if(c=w1(u),c)return c;if("en"===u)return kN;throw new Error(`Missing locale data for the locale "${s}".`)}function b1(s){return V_(s)[kt.PluralCase]}function w1(s){return s in Df||(Df[s]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[s]),Df[s]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const PN=["zero","one","two","few","many"],H_="en-US",$_={marker:"element"},Vg={marker:"ICU"};var $r=(()=>(($r=$r||{})[$r.SHIFT=2]="SHIFT",$r[$r.APPEND_EAGERLY=1]="APPEND_EAGERLY",$r[$r.COMMENT=2]="COMMENT",$r))();let ax=H_;function Bg(s){(function(s,o){null==s&&ke(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(ax=s.toLowerCase().replace(/_/g,"-"))}function cx(s,o,c){const u=o.insertBeforeIndex,h=Array.isArray(u)?u[0]:u;return null===h?ig(s,0,c):On(c[h])}function $d(s,o,c,u,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let _=u,v=null;if(3&o.type||(v=_,_=h),null!==_&&0==(2&o.flags))for(let C=1;C<p.length;C++)qc(s,_,c[p[C]],v,!1)}}function Jl(s,o){if(s.push(o),s.length>1)for(let c=s.length-2;c>=0;c--){const u=s[c];ux(u)||E1(u,o)&&null===j_(u)&&FN(u,o.index)}}function ux(s){return!(64&s.type)}function E1(s,o){return ux(o)||s.index>o.index}function j_(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function FN(s,o){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=o:(xE(cx,$d),s.insertBeforeIndex=o)}function cl(s,o){const c=s.data[o];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function hx(s,o,c){const u=Gl(s,c,64,null,null);return Jl(o,u),u}function Ug(s,o){const c=o[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function Hg(s){return s>>>17}function G_(s){return(131070&s)>>>1}let $g=0,jd=0;function D1(s,o,c,u){const h=c[11];let _,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const I=o[++v];null===c[I]&&(c[I]=k0(h,C))}else if("number"==typeof C)switch(1&C){case 0:const I=Hg(C);let P,q;if(null===p&&(p=I,_=F0(h,u)),I===p?(P=u,q=_):(P=null,q=On(c[I])),null!==q){const Pe=G_(C);qc(h,q,c[Pe],P,!1);const Xe=cl(s,Pe);if(null!==Xe&&"object"==typeof Xe){const $e=Ug(Xe,c);null!==$e&&D1(s,Xe.create[$e],c,c[Xe.anchorIdx])}}break;case 1:const ce=o[++v],fe=o[++v];Ib(h,wc(C>>>1,c),null,null,ce,fe,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case Vg:const I=o[++v],P=o[++v];null===c[P]&&ji(c[P]=lA(h,I),c);break;case $_:const q=o[++v],J=o[++v];null===c[J]&&ji(c[J]=nb(h,q,null),c)}}}function x1(s,o,c,u,h){for(let p=0;p<c.length;p++){const _=c[p],v=c[++p];if(_&h){let C="";for(let I=p+1;I<=p+v;I++){const P=c[I];if("string"==typeof P)C+=P;else if("number"==typeof P)if(P<0)C+=H(o[u-P]);else{const q=P>>>2;switch(3&P){case 1:const J=c[++I],ce=c[++I],fe=s.data[q];"string"==typeof fe?Ib(o[11],o[q],null,fe,J,C,ce):ts(s,fe,o,J,C,o[11],ce,!1);break;case 0:const Pe=o[q];null!==Pe&&vE(o[11],Pe,C);break;case 2:q_(s,cl(s,q),o,C);break;case 3:ws(s,cl(s,q),u,o)}}}}else{const C=c[p+1];if(C>0&&3==(3&C)){const P=cl(s,C>>>2);o[P.currentCaseLViewIndex]<0&&ws(s,P,u,o)}}p+=v}}function ws(s,o,c,u){let h=u[o.currentCaseLViewIndex];if(null!==h){let p=$g;h<0&&(h=u[o.currentCaseLViewIndex]=~h,p=-1),x1(s,u,o.update[h],c,p)}}function q_(s,o,c,u){const h=function(s,o){let c=s.cases.indexOf(o);if(-1===c)switch(s.type){case 1:{const u=function(s,o){const c=b1(o)(parseInt(s,10)),u=PN[c];return void 0!==u?u:"other"}(o,ax);c=s.cases.indexOf(u),-1===c&&"other"!==u&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(o,u);if(Ug(o,c)!==h&&(Xl(s,o,c),c[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const _=c[o.anchorIdx];_&&D1(s,o.create[h],c,_)}}function Xl(s,o,c){let u=Ug(o,c);if(null!==u){const h=o.remove[u];for(let p=0;p<h.length;p++){const _=h[p];if(_>0){const v=wc(_,c);null!==v&&ab(c[11],v)}else Xl(s,cl(s,~_),c)}}}function Go(){const s=[];let c,u,o=-1;function p(v,C){o=0;const I=Ug(v,C);u=null!==I?v.remove[I]:St}function _(){if(o<u.length){const v=u[o++];return v>0?c[v]:(s.push(o,u),p(c[1].data[~v],c),_())}return 0===s.length?null:(u=s.pop(),o=s.pop(),_())}return function(v,C){for(c=C;s.length;)s.pop();return p(v.value,C),_}}const z_=/\ufffd(\d+):?\d*\ufffd/gi,T1=/\ufffd(\d+)\ufffd/,gx=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,GN=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ZN=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Y_=/\uE500/g;function Q_(s,o,c,u,h,p,_){const v=lf(s,u,1,null);let C=v<<$r.SHIFT,I=Qs();o===I&&(I=null),null===I&&(C|=$r.APPEND_EAGERLY),_&&(C|=$r.COMMENT,function(s){void 0===eb&&(eb=s())}(Go)),h.push(C,null===p?"":p);const P=Gl(s,v,_?32:1,null===p?"":p,null);Jl(c,P);const q=P.index;return gi(P,!1),null!==I&&o!==I&&function(s,o){let c=s.insertBeforeIndex;null===c?(xE(cx,$d),c=s.insertBeforeIndex=[null,o]):(function(s,o,c){s!=o&&ke(c,s,o,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(o))}(I,q),P}function mx(s,o,c,u,h,p,_){const v=_.match(z_),C=Q_(s,o,c,p,u,v?null:_,!1);v&&Gd(h,_,C.index,null,0,null)}function Gd(s,o,c,u,h,p){const _=s.length,v=_+1;s.push(null,null);const C=_+2,I=o.split(z_);let P=0;for(let q=0;q<I.length;q++){const J=I[q];if(1&q){const ce=h+parseInt(J,10);s.push(-1-ce),P|=I1(ce)}else""!==J&&s.push(J)}return s.push(c<<2|(u?1:0)),u&&s.push(u,p),s[_]=P,s[v]=s.length-C,P}function I1(s){return 1<<Math.min(s,31)}function S1(s){let o,p,c="",u=0,h=!1;for(;null!==(o=GN.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(u=o.index,h=!1):(c+=s.substring(u,o.index+o[0].length),p=o[1],h=!0);return c+=s.substr(u),c}function vx(s,o,c,u,h,p){let _=0;const v={type:h.type,currentCaseLViewIndex:lf(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,c){s.push(I1(o.mainBinding),2,-1-o.mainBinding,c<<2|2)})(c,h,p),function(s,o,c){const u=s.data[o];null===u?s.data[o]=c:u.value=c}(s,p,v);const C=h.values;for(let I=0;I<C.length;I++){const P=C[I],q=[];for(let J=0;J<P.length;J++){const ce=P[J];if("string"!=typeof ce){const fe=q.push(ce)-1;P[J]=`\x3c!--\ufffd${fe}\ufffd--\x3e`}}_=zN(s,v,o,c,u,h.cases[I],P.join(""),q)|_}_&&function(s,o,c){s.push(o,1,c<<2|3)}(c,_,p)}function WN(s){const o=[],c=[];let u=1,h=0;const p=J_(s=s.replace(gx,function(_,v,C){return u="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let _=0;_<p.length;){let v=p[_++].trim();1===u&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=J_(p[_++]);o.length>c.length&&c.push(C)}return{type:u,mainBinding:h,cases:o,values:c}}function J_(s){if(!s)return[];let o=0;const c=[],u=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(c.pop(),0==c.length){const C=s.substring(o,v);gx.test(C)?u.push(WN(C)):u.push(C),o=v+1}}else{if(0==c.length){const C=s.substring(o,v);u.push(C),o=v+1}c.push("{")}}const _=s.substring(o);return u.push(_),u}function zN(s,o,c,u,h,p,_,v){const C=[],I=[],P=[];o.cases.push(p),o.create.push(C),o.remove.push(I),o.update.push(P);const J=qh(bc()).getInertBodyElement(_),ce=Sn(J)||J;return ce?bx(s,o,c,u,C,I,P,ce,h,v,0):0}function bx(s,o,c,u,h,p,_,v,C,I,P){let q=0,J=v.firstChild;for(;J;){const ce=lf(s,c,1,null);switch(J.nodeType){case Node.ELEMENT_NODE:const fe=J,Pe=fe.tagName.toLowerCase();if(Yp.hasOwnProperty(Pe)){A1(h,$_,Pe,C,ce),s.data[ce]=Pe;const It=fe.attributes;for(let Ft=0;Ft<It.length;Ft++){const hn=It.item(Ft),bi=hn.name.toLowerCase();hn.value.match(z_)?E.hasOwnProperty(bi)&&Gd(_,hn.value,ce,hn.name,0,pd[bi]?Ka:w[bi]?zh:null):JN(h,ce,hn)}q=bx(s,o,c,u,h,p,_,J,ce,I,P+1)|q,wx(p,ce,P)}break;case Node.TEXT_NODE:const Te=J.textContent||"",Xe=Te.match(z_);A1(h,null,Xe?"":Te,C,ce),wx(p,ce,P),Xe&&(q=Gd(_,Te,ce,null,0,null)|q);break;case Node.COMMENT_NODE:const $e=T1.exec(J.textContent||"");if($e){const Ft=I[parseInt($e[1],10)];A1(h,Vg,"",C,ce),vx(s,c,u,C,Ft,ce),YN(p,ce,P)}}J=J.nextSibling}return q}function wx(s,o,c){0===c&&s.push(o)}function YN(s,o,c){0===c&&(s.push(~o),s.push(o))}function A1(s,o,c,u,h){null!==o&&s.push(o),s.push(c,h,function(s,o,c){return 0|o<<17|c<<1}(0,u,h))}function JN(s,o,c){s.push(o<<1|1,c.name,c.value)}function Zo(s,o,c=-1){const u=sn(),h=We(),p=20+s,_=Dr(u.consts,o),v=Qs();u.firstCreatePass&&function(s,o,c,u,h,p){const _=Qs(),v=[],C=[],I=[[]],P=function(s){return s.replace(Y_," ")}(h=function(s,o){if(function(s){return-1===s}(o))return S1(s);{const c=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,u=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return S1(s.substring(c,u))}}(h,p)).split(ZN);for(let q=0;q<P.length;q++){let J=P[q];if(0==(1&q)){const ce=J_(J);for(let fe=0;fe<ce.length;fe++){let Pe=ce[fe];if(0==(1&fe)){const Te=Pe;""!==Te&&mx(s,_,I[0],v,C,c,Te)}else{const Te=Pe;if("object"!=typeof Te)throw new Error(`Unable to parse ICU expression in "${h}" message.`);vx(s,c,C,o,Te,Q_(s,_,I[0],c,v,"",!0).index)}}}else{const ce=47===J.charCodeAt(0),Pe=(J.charCodeAt(ce?1:0),20+Number.parseInt(J.substring(ce?2:1)));if(ce)I.shift(),gi(Qs(),!1);else{const Te=hx(s,I[0],Pe);I.unshift([]),gi(Te,!0)}}}s.data[u]={create:v,update:C}}(u,null===v?0:v.index,h,p,_,c);const C=u.data[p],P=CE(u,v===h[6]?null:v,h);(function(s,o,c,u){const h=s[11];for(let p=0;p<o.length;p++){const _=o[p++],v=o[p],C=(_&$r.COMMENT)===$r.COMMENT,I=(_&$r.APPEND_EAGERLY)===$r.APPEND_EAGERLY,P=_>>>$r.SHIFT;let q=s[P];null===q&&(q=s[P]=C?h.createComment(v):k0(h,v)),I&&null!==c&&qc(h,c,q,u,!1)}})(h,C.create,P,v&&8&v.type?h[v.index]:null),Gu(!0)}function X_(s,o,c){Zo(s,o,c),Gu(!1)}function N1(s){return function(s){s&&($g|=1<<Math.min(jd,31)),jd++}(ns(We(),Bi(),s)),N1}function M1(s){!function(s,o,c){if(jd>0){const u=s.data[c];x1(s,o,Array.isArray(u)?u:u.update,Vi()-jd-1,$g)}$g=0,jd=0}(sn(),We(),s+20)}function R1(s,o,c,u,h){if(s=S(s),Array.isArray(s))for(let p=0;p<s.length;p++)R1(s[p],o,c,u,h);else{const p=sn(),_=We();let v=xd(s)?s:S(s.provide),C=ql(s);const I=Jn(),P=1048575&I.providerIndexes,q=I.directiveStart,J=I.providerIndexes>>20;if(xd(s)||!s.multi){const ce=new Ao(C,h,Vd),fe=P1(v,o,h?P:P+J,q);-1===fe?(Tn(ia(I,_),p,v),k1(p,s,o.length),o.push(v),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),c.push(ce),_.push(ce)):(c[fe]=ce,_[fe]=ce)}else{const ce=P1(v,o,P+J,q),fe=P1(v,o,P,P+J),Pe=ce>=0&&c[ce],Te=fe>=0&&c[fe];if(h&&!Te||!h&&!Pe){Tn(ia(I,_),p,v);const Xe=function(s,o,c,u,h){const p=new Ao(s,c,Vd);return p.multi=[],p.index=o,p.componentProviders=0,cM(p,h,u&&!c),p}(h?dM:uM,c.length,h,u,C);!h&&Te&&(c[fe].providerFactory=Xe),k1(p,s,o.length,0),o.push(v),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),c.push(Xe),_.push(Xe)}else k1(p,s,ce>-1?ce:fe,cM(c[h?fe:ce],C,!h&&u));!h&&u&&Te&&c[fe].componentProviders++}}}function k1(s,o,c,u){const h=xd(o);if(h||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(c);-1===C?v.push(c,[u,_]):v[C+1].push(u,_)}else v.push(c,_)}}}function cM(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function P1(s,o,c,u){for(let h=c;h<u;h++)if(o[h]===s)return h;return-1}function uM(s,o,c,u){return O1(this.multi,[])}function dM(s,o,c,u){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=zn(c,c[1],this.providerFactory.index,u);p=v.slice(0,_),O1(h,p);for(let C=_;C<v.length;C++)p.push(v[C])}else p=[],O1(h,p);return p}function O1(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function xx(s,o=[]){return c=>{c.providersResolver=(u,h)=>function(s,o,c){const u=sn();if(u.firstCreatePass){const h=us(s);R1(c,u.data,u.blueprint,h,!0),R1(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class Tx{}const Sx="ngComponent";class C2{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${L(s)}. Did you add it to @NgModule.entryComponents?`);return o[Sx]=s,o}(o)}}let If=(()=>{class s{}return s.NULL=new C2,s})();function Zg(...s){}function Sf(s,o){return new mr(Fn(s,o))}const su=function(){return Sf(Jn(),We())};let mr=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=su,s})();function Gs(s){return s instanceof mr?s.nativeElement:s}class ty{}let mM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>Ax(),s})();const Ax=function(){const s=We(),c=Br(Jn().index,s);return function(s){return s[11]}(Zn(c)?c:s)};let qg=(()=>{class s{}return s.\u0275prov=yt({token:s,providedIn:"root",factory:()=>null}),s})();class L1{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Af=new L1("12.2.16");class Mx{constructor(){}supports(o){return sl(o)}create(o){return new V1(o)}}const T2=(s,o)=>o;class V1{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||T2}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,u=this._removalsHead,h=0,p=null;for(;c||u;){const _=!u||c&&c.currentIndex<kx(u,h,p)?c:u,v=kx(_,h,p),C=_.currentIndex;if(_===u)h--,u=u._nextRemoved;else if(c=c._next,null==_.previousIndex)h++;else{p||(p=[]);const I=v-h,P=C-h;if(I!=P){for(let J=0;J<I;J++){const ce=J<p.length?p[J]:p[J]=0,fe=ce+J;P<=fe&&fe<I&&(p[J]=ce+1)}p[_.previousIndex]=P-I}}v!==C&&o(_,v,C)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!sl(o))throw new Error(`Error trying to diff '${L(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,c=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],_=this._trackByFn(v,p),null!==c&&Object.is(c.trackById,_)?(u&&(c=this._verifyReinsertion(c,p,_,v)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,_,v),u=!0),c=c._next}else h=0,function(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[Ad()]();let u;for(;!(u=c.next()).done;)o(u.value)}}(o,v=>{_=this._trackByFn(h,v),null!==c&&Object.is(c.trackById,_)?(u&&(c=this._verifyReinsertion(c,v,_,h)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,_,h),u=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,u,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new S2(c,u),p,h),o}_verifyReinsertion(o,c,u,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,u),this._addToMoves(o,u),o}_moveAfter(o,c,u){return this._unlink(o),this._insertAfter(o,c,u),this._addToMoves(o,u),o}_addAfter(o,c,u){return this._insertAfter(o,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,u){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new Rx),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,u=o._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rx),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class S2{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class A2{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const c=o._prevDup,u=o._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class Rx{constructor(){this.map=new Map}put(o){const c=o.trackById;let u=this.map.get(c);u||(u=new A2,this.map.set(c,u)),u.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function kx(s,o,c){const u=s.previousIndex;if(null===u)return u;let h=0;return c&&u<c.length&&(h=c[u]),u+o+h}class vM{constructor(){}supports(o){return o instanceof Map||qb(o)}create(){return new N2}}class N2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||qb(o)))throw new Error(`Error trying to diff '${L(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,u);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const u=o._prev;return c._next=o,c._prev=u,o._prev=c,u&&(u._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const u=new M2(o);return this._records.set(o,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(u=>c(o[u],u))}}class M2{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bM(){return new B1([new Mx])}let B1=(()=>{class s{constructor(c){this.factories=c}static create(c,u){if(null!=u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||bM()),deps:[[s,new Qr,new Wa]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(s){return s.name||typeof s}(c)}'`)}}return s.\u0275prov=yt({token:s,providedIn:"root",factory:bM}),s})();function wM(){return new U1([new vM])}let U1=(()=>{class s{constructor(c){this.factories=c}static create(c,u){if(u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||wM()),deps:[[s,new Qr,new Wa]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(u)return u;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return s.\u0275prov=yt({token:s,providedIn:"root",factory:wM}),s})();function Wg(s,o,c,u,h=!1){for(;null!==c;){const p=o[c.index];if(null!==p&&u.push(On(p)),Qi(p))for(let v=10;v<p.length;v++){const C=p[v],I=C[1].firstChild;null!==I&&Wg(C[1],C,I,u)}const _=c.type;if(8&_)Wg(s,o,c.child,u);else if(32&_){const v=M0(c,o);let C;for(;C=v();)u.push(C)}else if(16&_){const v=sb(o,c);if(Array.isArray(v))u.push(...v);else{const C=rg(o[16]);Wg(C[1],C,v,u,!0)}}c=h?c.projectionNext:c.next}return u}class zg{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return Wg(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Qi(o)){const c=o[8],u=c?c.indexOf(this):-1;u>-1&&(O0(o,u),Fo(c,u))}this._attachedToViewContainer=!1}bE(this._lView[1],this._lView)}onDestroy(o){HE(this._lView[1],this._lView,null,o)}markForCheck(){Nb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Qc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,c){xc(!0);try{Qc(s,o,c)}finally{xc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,bd(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class CM extends zg{constructor(o){super(o),this._view=o}detectChanges(){z0(this._view)}checkNoChanges(){!function(s){xc(!0);try{z0(s)}finally{xc(!1)}}(this._view)}get context(){return null}}const ny=function(s){return function(s,o,c){if(ml(s)&&!c){const u=Br(s.index,o);return new zg(u,u)}return 47&s.type?new zg(o[16],o):null}(Jn(),We(),16==(16&s))};let H1=(()=>{class s{}return s.__NG_ELEMENT_ID__=ny,s})();const xM=[new vM],TM=new B1([new Mx]),IM=new U1(xM),Cs=function(){return Zd(Jn(),We())};let ou=(()=>{class s{}return s.__NG_ELEMENT_ID__=Cs,s})();const Ox=ou,AM=class extends Ox{constructor(o,c,u){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=u}createEmbeddedView(o){const c=this._declarationTContainer.tViews,u=oo(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(u[19]=p.createEmbeddedView(c)),Zl(c,u,o),new zg(u)}};function Zd(s,o){return 4&s.type?new AM(o,s,Sf(s,o)):null}class ec{}class ry{}const MM=function(){return Fx(Jn(),We())};let iy=(()=>{class s{}return s.__NG_ELEMENT_ID__=MM,s})();const Yg=iy,j1=class extends Yg{constructor(o,c,u){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=u}get element(){return Sf(this._hostTNode,this._hostLView)}get injector(){return new Ro(this._hostTNode,this._hostLView)}get parentInjector(){const o=Dt(this._hostTNode,this._hostLView);if(Nl(o)){const c=Xi(o,this._hostLView),u=Ba(o);return new Ro(c[1].data[u+8],c)}return new Ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=Kg(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,u){const h=o.createEmbeddedView(c||{});return this.insert(h,u),h}createComponent(o,c,u,h,p){const _=u||this.parentInjector;if(!p&&null==o.ngModule&&_){const C=_.get(ec,null);C&&(p=C)}const v=o.create(_,h,void 0,p);return this.insert(v.hostView,c),v}insert(o,c){const u=o._lView,h=u[1];if(Qi(u[3])){const P=this.indexOf(o);if(-1!==P)this.detach(P);else{const q=u[3],J=new j1(q,q[6],q[3]);J.detach(J.indexOf(o))}}const p=this._adjustIndex(c),_=this._lContainer;!function(s,o,c,u){const h=10+u,p=c.length;u>0&&(c[h-1][4]=o),u<p-10?(o[4]=c[h],Ls(c,10+u,o)):(c.push(o),o[4]=null),o[3]=c;const _=o[17];null!==_&&c!==_&&function(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,u,_,p);const v=ob(p,_),C=u[11],I=F0(C,_[7]);return null!==I&&function(s,o,c,u,h,p){u[0]=h,u[6]=o,bd(s,u,c,1,h,p)}(h,_[6],C,u,I,v),o.attachToViewContainerRef(),Ls(sy(_),p,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=Kg(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),u=O0(this._lContainer,c);u&&(Fo(sy(this._lContainer),c),bE(u[1],u))}detach(o){const c=this._adjustIndex(o,-1),u=O0(this._lContainer,c);return u&&null!=Fo(sy(this._lContainer),c)?new zg(u):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function Kg(s){return s[8]}function sy(s){return s[8]||(s[8]=[])}function Fx(s,o){let c;const u=o[s.index];if(Qi(u))c=u;else{let h;if(8&s.type)h=On(u);else{const p=o[11];h=p.createComment("");const _=Fn(s,o);qc(p,F0(p,_),h,function(s,o){return qn(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=c=Sb(u,o,h,s),fg(o,c)}return new j1(c,s,o)}const Lf={};class fy extends If{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=at(o);return new aT(c,this.ngModule)}}function Kt(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}const cw=new er("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>fE});class aT extends Tx{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=o.selectors.map(so).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Kt(this.componentDef.inputs)}get outputs(){return Kt(this.componentDef.outputs)}create(o,c,u,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(c,u,h)=>{const p=s.get(c,Lf,h);return p!==Lf||u===Lf?p:o.get(c,u,h)}}}(o,h.injector):o,_=p.get(ty,Ms),v=p.get(qg,null),C=_.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",P=u?function(s,o,c){if(qn(s))return s.selectRootElement(o,c===it.ShadowDom);let u="string"==typeof o?s.querySelector(o):o;return u.textContent="",u}(C,u,this.componentDef.encapsulation):nb(_.createRenderer(null,this.componentDef),I,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(I)),q=this.componentDef.onPush?576:528,J=function(s,o){return{components:[],scheduler:s||fE,clean:Rb,playerHandler:o||null,flags:0}}(),ce=Z0(0,null,null,1,0,null,null,null,null,null),fe=oo(null,ce,J,q,null,null,_,C,v,p);let Pe,Te;Oa(fe);try{const Xe=function(s,o,c,u,h,p){const _=c[1];c[20]=s;const C=ys(_,20,2,"#host",null),I=C.mergedAttrs=o.hostAttrs;null!==I&&(Q0(C,I,!0),null!==s&&(Xu(h,s,I),null!==C.classes&&lb(h,s,C.classes),null!==C.styles&&IE(h,s,C.styles)));const P=u.createRenderer(s,o),q=oo(c,BE(o),null,o.onPush?64:16,c[20],C,u,P,p||null,null);return _.firstCreatePass&&(Tn(ia(C,c),_,o.type),W0(_,C),qE(C,c.length,1)),fg(c,q),c[20]=q}(P,this.componentDef,fe,_,C);if(P)if(u)Xu(C,P,["ng-version",Af.full]);else{const{attrs:$e,classes:It}=function(s){const o=[],c=[];let u=1,h=2;for(;u<s.length;){let p=s[u];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++u]):8===h&&c.push(p);else{if(!ga(h))break;h=p}u++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);$e&&Xu(C,P,$e),It&&It.length>0&&lb(C,P,It.join(" "))}if(Te=Rs(ce,20),void 0!==c){const $e=Te.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Ft=c[It];$e.push(null!=Ft?Array.from(Ft):null)}}Pe=function(s,o,c,u,h){const p=c[1],_=function(s,o,c){const u=Jn();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),WE(s,u,o,lf(s,o,1,null),c));const h=zn(o,s,u.directiveStart,u);ji(h,o);const p=Fn(u,o);return p&&ji(p,o),h}(p,c,o);if(u.components.push(_),s[8]=_,h&&h.forEach(C=>C(_,o)),o.contentQueries){const C=Jn();o.contentQueries(1,_,C.directiveStart)}const v=Jn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Fa(v.index),Cb(c[1],v,0,v.directiveStart,v.directiveEnd,o),Db(o,_)),_}(Xe,this.componentDef,fe,J,[nn]),Zl(ce,fe,null)}finally{ra()}return new rR(this.componentType,Pe,Sf(Te,fe),fe,Te)}}class rR extends class{}{constructor(o,c,u,h,p){super(),this.location=u,this._rootLView=h,this._tNode=p,this.instance=c,this.hostView=this.changeDetectorRef=new CM(h),this.componentType=o}get injector(){return new Ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const jr=new Map;class cT extends ec{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new fy(this);const u=Pn(o),h=o[Nt]||null;h&&Bg(h),this._bootstrapComponents=Qa(u.bootstrap),this._r3Injector=Ob(o,c,[{provide:ec,useValue:this},{provide:If,useValue:this.componentFactoryResolver}],L(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=Ar.THROW_IF_NOT_FOUND,u=gt.Default){return o===Ar||o===ec||o===Dd?this:this._r3Injector.get(o,c,u)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class gy extends ry{constructor(o){super(),this.moduleType=o,null!==Pn(o)&&function(s){const o=new Set;!function c(u){const h=Pn(u,!0),p=h.id;null!==p&&(function(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${L(o)} vs ${L(o.name)}`)}(p,jr.get(p),u),jr.set(p,u));const _=Qa(h.imports);for(const v of _)o.has(v)||(o.add(v),c(v))}(s)}(o)}create(o){return new cT(this.moduleType,o)}}function uT(s,o,c){const u=yr()+s,h=We();return h[u]===Qt?$o(h,u,c?o.call(c):o()):function(s,o){return s[o]}(h,u)}function hw(s,o,c,u){return pw(We(),yr(),s,o,c,u)}function my(s,o,c,u,h){return gw(We(),yr(),s,o,c,u,h)}function om(s,o,c,u,h,p){return function(s,o,c,u,h,p,_,v){const C=o+c;return function(s,o,c,u,h){const p=ol(s,o,c,u);return ns(s,o+2,h)||p}(s,C,h,p,_)?$o(s,C+3,v?u.call(v,h,p,_):u(h,p,_)):Yd(s,C+3)}(We(),yr(),s,o,c,u,h,p)}function Yd(s,o){const c=s[o];return c===Qt?void 0:c}function pw(s,o,c,u,h,p){const _=o+c;return ns(s,_,h)?$o(s,_+1,p?u.call(p,h):u(h)):Yd(s,_+1)}function gw(s,o,c,u,h,p,_){const v=o+c;return ol(s,v,h,p)?$o(s,v+2,_?u.call(_,h,p):u(h,p)):Yd(s,v+2)}function gT(s,o){const c=sn();let u;const h=s+20;c.firstCreatePass?(u=function(s,o){if(o)for(let c=o.length-1;c>=0;c--){const u=o[c];if(s===u.name)return u}throw new Y("302",`The pipe '${s}' could not be found!`)}(o,c.pipeRegistry),c.data[h]=u,u.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(h,u.onDestroy)):u=c.data[h];const p=u.factory||(u.factory=Ks(u.type)),_=ln(Vd);try{const v=Nc(!1),C=p();return Nc(v),function(s,o,c,u){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=u}(c,We(),h,C),C}finally{ln(_)}}function _w(s,o,c){const u=s+20,h=We(),p=Ma(h,u);return Kd(h,lu(h,u)?pw(h,yr(),o,p.transform,c,p):p.transform(c))}function yy(s,o,c,u){const h=s+20,p=We(),_=Ma(p,h);return Kd(p,lu(p,h)?gw(p,yr(),o,_.transform,c,u,_):_.transform(c,u))}function lu(s,o){return s[1].data[o].pure}function Kd(s,o){return Ho.isWrapped(o)&&(o=Ho.unwrap(o),s[Vi()]=Qt),o}function am(s){return o=>{setTimeout(s,void 0,o)}}const dl=class extends a.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,u){var h,p,_;let v=o,C=c||(()=>null),I=u;if(o&&"object"==typeof o){const q=o;v=null===(h=q.next)||void 0===h?void 0:h.bind(q),C=null===(p=q.error)||void 0===p?void 0:p.bind(q),I=null===(_=q.complete)||void 0===_?void 0:_.bind(q)}this.__isAsync&&(C=am(C),v&&(v=am(v)),I&&(I=am(I)));const P=super.subscribe({next:v,error:C,complete:I});return o instanceof M.w&&o.add(P),P}};function oR(){return this._results[Ad()]()}class Bf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Ad(),u=Bf.prototype;u[c]||(u[c]=oR)}get changes(){return this._changes||(this._changes=new dl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const u=this;u.dirty=!1;const h=Ei(o);(this._changesDetected=!function(s,o,c){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],p=o[u];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(u._results,h,c))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Si{constructor(o){this.queryList=o,this.matches=null}clone(){return new Si(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const u=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<u;p++){const _=c.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new Qd(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==ET(o,c).matches&&this.queries[c].setDirty()}}class vT{constructor(o,c,u=null){this.predicate=o,this.flags=c,this.read=u}}class Jd{constructor(o=[]){this.queries=o}elementStart(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let u=0;u<this.length;u++){const h=null!==c?c.length:0,p=this.getByIndex(u).embeddedTView(o,h);p&&(p.indexInDeclarationView=u,null!==c?c.push(p):c=[p])}return null!==c?new Jd(c):null}template(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class vw{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new vw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const p=u[h];this.matchTNodeWithReadOption(o,c,lR(c,p)),this.matchTNodeWithReadOption(o,c,Mo(c,o,p,!1,!1))}else u===ou?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Mo(c,o,u,!1,!1))}matchTNodeWithReadOption(o,c,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===mr||h===iy||h===ou&&4&c.type)this.addMatch(c.index,-2);else{const p=Mo(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,u)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function lR(s,o){const c=s.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===o)return c[u+1];return null}function by(s,o,c,u){return-1===c?function(s,o){return 11&s.type?Sf(s,o):4&s.type?Zd(s,o):null}(o,s):-2===c?function(s,o,c){return c===mr?Sf(o,s):c===ou?Zd(o,s):c===iy?Fx(o,s):void 0}(s,o,u):zn(s,s[1],c,o)}function wy(s,o,c,u){const h=o[19].queries[u];if(null===h.matches){const p=s.data,_=c.matches,v=[];for(let C=0;C<_.length;C+=2){const I=_[C];v.push(I<0?null:by(o,p[I],_[C+1],c.metadata.read))}h.matches=v}return h.matches}function lm(s,o,c,u){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const _=wy(s,o,h,c);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)u.push(_[v/2]);else{const I=p[v+1],P=o[-C];for(let q=10;q<P.length;q++){const J=P[q];J[17]===J[3]&&lm(J[1],J,I,u)}if(null!==P[9]){const q=P[9];for(let J=0;J<q.length;J++){const ce=q[J];lm(ce[1],ce,I,u)}}}}}return u}function Cy(s){const o=We(),c=sn(),u=Tc();So(u+1);const h=ET(c,u);if(s.dirty&&Mh(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?lm(c,o,u,[]):wy(c,o,h,u);s.reset(p,Gs),s.notifyOnChanges()}return!0}return!1}function ww(s,o,c){const u=sn();u.firstCreatePass&&(Ey(u,new vT(s,o,c),-1),2==(2&o)&&(u.staticViewQueries=!0)),Ew(u,We(),o)}function Cw(s,o,c,u){const h=sn();if(h.firstCreatePass){const p=Jn();Ey(h,new vT(o,c,u),p.index),function(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}Ew(h,We(),c)}function bT(){return s=We(),o=Tc(),s[19].queries[o].queryList;var s,o}function Ew(s,o,c){const u=new Bf(4==(4&c));HE(s,o,u,u.destroy),null===o[19]&&(o[19]=new Qd),o[19].queries.push(new Si(u))}function Ey(s,o,c){null===s.queries&&(s.queries=new Jd),s.queries.track(new vw(o,c))}function ET(s,o){return s.queries.getByIndex(o)}function Dy(s,o){return Zd(s,o)}const _r=new er("Application Initializer");let ic=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Zg,this.reject=Zg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(w_(p))c.push(p);else if(C_(p)){const _=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});c.push(_)}}Promise.all(c).then(()=>{u()}).catch(h=>{this.reject(h)}),0===c.length&&u(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(cr(_r,8))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();const GT=new er("AppId"),gm={provide:GT,useFactory:function(){return`${rh()}${rh()}${rh()}`},deps:[]};function rh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ZT=new er("Platform Initializer"),Hw=new er("Platform ID"),qT=new er("appBootstrapListener");let WT=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();const Py=new er("LocaleId"),Zf=new er("DefaultCurrencyCode");class wR{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}const Fy=function(s){return new gy(s)},YT=Fy,JT=function(s){return Promise.resolve(Fy(s))},Ly=function(s){const o=Fy(s),u=Qa(Pn(s).declarations).reduce((h,p)=>{const _=at(p);return _&&h.push(new aT(_)),h},[]);return new wR(o,u)},DR=Ly,Vy=function(s){return Promise.resolve(Ly(s))};let sc=(()=>{class s{constructor(){this.compileModuleSync=YT,this.compileModuleAsync=JT,this.compileModuleAndAllComponentsSync=DR,this.compileModuleAndAllComponentsAsync=Vy}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();const XT=(()=>Promise.resolve(0))();function sh(s){"undefined"==typeof Zone?XT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ho{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dl(!1),this.onMicrotaskEmpty=new dl(!1),this.onStable=new dl(!1),this.onError=new dl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&c,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=At.requestAnimationFrame,o=At.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(At,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,jw(s),s.isCheckStableRunning=!0,Uy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),jw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,h,p,_,v)=>{try{return eI(s),c.invokeTask(h,p,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Gw(s)}},onInvoke:(c,u,h,p,_,v,C)=>{try{return eI(s),c.invoke(h,p,_,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Gw(s)}},onHasTask:(c,u,h,p)=>{c.hasTask(h,p),u===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,jw(s),Uy(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,u,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,u){return this._inner.run(o,c,u)}runTask(o,c,u,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,si,Zg,Zg);try{return p.runTask(_,c,u)}finally{p.cancelTask(_)}}runGuarded(o,c,u){return this._inner.runGuarded(o,c,u)}runOutsideAngular(o){return this._outer.run(o)}}const si={};function Uy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function jw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function eI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Gw(s){s._nesting--,Uy(s)}class tI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dl,this.onMicrotaskEmpty=new dl,this.onStable=new dl,this.onError=new dl}run(o,c,u){return o.apply(c,u)}runGuarded(o,c,u){return o.apply(c,u)}runOutsideAngular(o){return o()}runTask(o,c,u,h){return o.apply(c,u)}}let Zw=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),sh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sh(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(c)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,u,h){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),c(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,u,h){return[]}}return s.\u0275fac=function(c){return new(c||s)(cr(ho))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})(),ym=(()=>{class s{constructor(){this._applications=new Map,Hy.addToWindow(this)}registerApplication(c,u){this._applications.set(c,u)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,u=!0){return Hy.findTestabilityInTree(this,c,u)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();class nI{addToWindow(o){}findTestabilityInTree(o,c,u){return null}}function oc(s){Hy=s}let Hy=new nI,rI=!0,$y=!1;function oh(){return $y=!0,rI}function iI(){if($y)throw new Error("Cannot enable prod mode after platform setup.");rI=!1}let fo;const Gy=new er("AllowMultipleToken");class zw{constructor(o,c){this.name=o,this.token=c}}function bm(s,o,c=[]){const u=`Platform: ${o}`,h=new er(u);return(p=[])=>{let _=du();if(!_||_.injector.get(Gy,!1))if(s)s(c.concat(p).concat({provide:h,useValue:!0}));else{const v=c.concat(p).concat({provide:h,useValue:!0},{provide:cf,useValue:"platform"});!function(s){if(fo&&!fo.destroyed&&!fo.injector.get(Gy,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");fo=s.get(Yw);const o=s.get(ZT,null);o&&o.forEach(c=>c())}(Ar.create({providers:v,name:u}))}return function(s){const o=du();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function du(){return fo&&!fo.destroyed?fo:null}let Yw=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,u){const v=function(s,o){let c;return c="noop"===s?new tI:("zone.js"===s?void 0:s)||new ho({enableLongStackTrace:oh(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),C=[{provide:ho,useValue:v}];return v.run(()=>{const I=Ar.create({providers:C,parent:this.injector,name:c.moduleType.name}),P=c.create(I),q=P.injector.get(ef,null);if(!q)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const J=v.onError.subscribe({next:ce=>{q.handleError(ce)}});P.onDestroy(()=>{Ts(this._modules,P),J.unsubscribe()})}),function(s,o,c){try{const u=c();return w_(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(q,v,()=>{const J=P.injector.get(ic);return J.runInitializers(),J.donePromise.then(()=>(Bg(P.injector.get(Py,H_)||H_),this._moduleDoBootstrap(P),P))})})}bootstrapModule(c,u=[]){const h=Kw({},u);return function(s,o,c){const u=new gy(c);return Promise.resolve(u)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const u=c.injector.get(hu);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new Error(`The module ${L(c.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);c.instance.ngDoBootstrap(u)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(cr(Ar))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();function Kw(s,o){return Array.isArray(o)?o.reduce(Kw,s):Object.assign(Object.assign({},s),o)}let hu=(()=>{class s{constructor(c,u,h,p,_){this._zone=c,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new k.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new k.y(I=>{let P;this._zone.runOutsideAngular(()=>{P=this._zone.onStable.subscribe(()=>{ho.assertNotInAngularZone(),sh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{ho.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{P.unsubscribe(),q.unsubscribe()}});this.isStable=(0,K.T)(v,C.pipe((0,te.B)()))}bootstrap(c,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=c instanceof Tx?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(ec),v=h.create(Ar.NULL,[],u||h.selector,p),C=v.location.nativeElement,I=v.injector.get(Zw,null),P=I&&v.injector.get(ym);return I&&P&&P.registerApplication(C,I),v.onDestroy(()=>{this.detachView(v.hostView),Ts(this.components,v),P&&P.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const u=c;this._views.push(u),u.attachToAppRef(this)}detachView(c){const u=c;Ts(this._views,u),u.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(qT,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(cr(ho),cr(Ar),cr(ef),cr(If),cr(ic))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();function Ts(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}class qf{}class MR{}const Zy={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let RR=(()=>{class s{constructor(c,u){this._compiler=c,this._config=u||Zy}load(c){return this.loadAndCompile(c)}loadAndCompile(c){let[u,h]=c.split("#");return void 0===h&&(h="default"),O(8255)(u).then(p=>p[h]).then(p=>Jw(p,u,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(c){let[u,h]=c.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),O(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(_=>_[h+p]).then(_=>Jw(_,u,h))}}return s.\u0275fac=function(c){return new(c||s)(cr(sc),cr(MR,8))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();function Jw(s,o,c){if(!s)throw new Error(`Cannot find '${c}' in '${o}'`);return s}const po=function(s){return null},Bt=bm(null,"core",[{provide:Hw,useValue:"unknown"},{provide:Yw,deps:[Ar]},{provide:ym,deps:[]},{provide:WT,deps:[]}]),LR=[{provide:hu,useClass:hu,deps:[ho,Ar,ef,If,ic]},{provide:cw,deps:[ho],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(c){o.push(c)}}},{provide:ic,useClass:ic,deps:[[new Wa,_r]]},{provide:sc,useClass:sc,deps:[]},gm,{provide:B1,useFactory:function(){return TM},deps:[]},{provide:U1,useFactory:function(){return IM},deps:[]},{provide:Py,useFactory:function(s){return Bg(s=s||"undefined"!=typeof $localize&&$localize.locale||H_),s},deps:[[new qa(Py),new Wa,new Qr]]},{provide:Zf,useValue:"USD"}];let zf=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(cr(hu))},s.\u0275mod=se({type:s}),s.\u0275inj=Xt({providers:LR}),s})()},8939:(Fe,me,O)=>{"use strict";O.d(me,{hO:()=>B,xv:()=>U,Dh:()=>L,GT:()=>Z,cc:()=>z,on:()=>R,pX:()=>te});var a=O(7716),M=O(7841),k=O(8971);Fe=O.hmd(Fe);const K=["ngOnDestroy"],te=(H,G,ue,he={})=>new Proxy(H,{get:(we,_e)=>ue.runOutsideAngular(()=>{var Ue;if(H[_e])return(null===(Ue=null==he?void 0:he.spy)||void 0===Ue?void 0:Ue.get)&&he.spy.get(_e,H[_e]),H[_e];if(K.indexOf(_e)>-1)return()=>{};const Re=G.toPromise().then(Se=>{const Ce=Se&&Se[_e];return"function"==typeof Ce?Ce.bind(Se):Ce&&Ce.then?Ce.then(de=>ue.run(()=>de)):ue.run(()=>Ce)});return new Proxy(()=>{},{get:(Se,Ce)=>Re[Ce],apply:(Se,Ce,de)=>Re.then(Ee=>{var ve;const De=Ee&&Ee(...de);return(null===(ve=null==he?void 0:he.spy)||void 0===ve?void 0:ve.apply)&&he.spy.apply(_e,de,De),De})})})}),Z=(H,G)=>{G.forEach(ue=>{Object.getOwnPropertyNames(ue.prototype||ue).forEach(he=>{Object.defineProperty(H.prototype,he,Object.getOwnPropertyDescriptor(ue.prototype||ue,he))})})};class ee{constructor(G){return G}}const L=new a.OlP("angularfire2.app.options"),U=new a.OlP("angularfire2.app.name");function R(H,G,ue){const we="object"==typeof ue&&ue||{};we.name=we.name||"string"==typeof ue&&ue||"[DEFAULT]";const Ue=M.Z.apps.filter(Re=>Re&&Re.name===we.name)[0]||G.runOutsideAngular(()=>M.Z.initializeApp(H,we));try{JSON.stringify(H)!==JSON.stringify(Ue.options)&&N("error",`${Ue.name} Firebase App already initialized with different options${Fe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Re){}return new ee(Ue)}const N=(H,...G)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[H](...G)},S={provide:ee,useFactory:R,deps:[L,a.R0b,[new a.FiY,U]]};let B=(()=>{class H{constructor(ue){M.Z.registerVersion("angularfire",k.q4.full,"core"),M.Z.registerVersion("angularfire",k.q4.full,"app-compat"),M.Z.registerVersion("angular",a.q4F.full,ue.toString())}static initializeApp(ue,he){return{ngModule:H,providers:[{provide:L,useValue:ue},{provide:U,useValue:he}]}}}return H.\u0275fac=function(ue){return new(ue||H)(a.LFG(a.Lbi))},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({providers:[S]}),H})();function z(H,G,ue,he,we){const[,_e,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===H)||[];if(_e)return function(H,G){try{return H.toString()===G.toString()}catch(ue){return H===G}}(we,Ue)||(ae("error",`${G} was already initialized on the ${ue} Firebase App with different settings.${ne?" You may need to reload as Firebase is not HMR aware.":""}`),ae("warn",{is:we,was:Ue})),_e;{const Re=he();return globalThis.\u0275AngularfireInstanceCache.push([H,Re,we]),Re}}const ne=!!Fe.hot,ae=(H,...G)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[H](...G)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(Fe,me,O)=>{"use strict";O.d(me,{q4:()=>p0,iC:()=>Ir,fc:()=>Hp,HU:()=>Hh,vb:()=>Fs,JM:()=>Ei});var a=O(7716),M=O(2329),k=O(8239),K=O(8026),te=O(3854),Z=O(3910),ee=O(5422);const L="@firebase/installations",U="0.5.8",N=`w:${U}`,S="FIS_v2",H=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function G(T){return T instanceof te.ZR&&T.code.includes("request-failed")}function ue({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function he(T){return{token:T.token,requestStatus:2,expiresIn:de(T.expiresIn),creationTime:Date.now()}}function we(T,A){return _e.apply(this,arguments)}function _e(){return(_e=(0,k.Z)(function*(T,A){const oe=(yield A.json()).error;return H.create("request-failed",{requestName:T,serverCode:oe.code,serverMessage:oe.message,serverStatus:oe.status})})).apply(this,arguments)}function Ue({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Re(T,{refreshToken:A}){const W=Ue(T);return W.append("Authorization",function(T){return`${S} ${T}`}(A)),W}function Se(T){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,k.Z)(function*(T){const A=yield T();return A.status>=500&&A.status<600?T():A})).apply(this,arguments)}function de(T){return Number(T.replace("s","000"))}function ve(T,A){return De.apply(this,arguments)}function De(){return(De=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:A},{fid:W}){const oe=ue(T),xe=Ue(T),Ne=A.getImmediate({optional:!0});if(Ne){const Ht=yield Ne.getHeartbeatsHeader();Ht&&xe.append("x-firebase-client",Ht)}const ut={method:"POST",headers:xe,body:JSON.stringify({fid:W,authVersion:S,appId:T.appId,sdkVersion:N})},Pt=yield Se(()=>fetch(oe,ut));if(Pt.ok){const Ht=yield Pt.json();return{fid:Ht.fid||W,registrationStatus:2,refreshToken:Ht.refreshToken,authToken:he(Ht.authToken)}}throw yield we("Create Installation",Pt)})).apply(this,arguments)}function Ie(T){return new Promise(A=>{setTimeout(A,T)})}const ht=/^[cdef][\w-]{21}$/;function Le(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const W=function(T){return function(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return ht.test(W)?W:""}catch(T){return""}}function ke(T){return`${T.appName}!${T.appId}`}const Ze=new Map;function Jt(T,A){const W=ke(T);Ct(W,A),function(T,A){const W=(!qt&&"BroadcastChannel"in self&&(qt=new BroadcastChannel("[Firebase] FID Change"),qt.onmessage=T=>{Ct(T.data.key,T.data.fid)}),qt);W&&W.postMessage({key:T,fid:A}),0===Ze.size&&qt&&(qt.close(),qt=null)}(W,A)}function Ct(T,A){const W=Ze.get(T);if(W)for(const oe of W)oe(A)}let qt=null;const Yn="firebase-installations-store";let ze=null;function Kn(){return ze||(ze=(0,te.X3)("firebase-installations-database",1,(T,A)=>{switch(A){case 0:T.createObjectStore(Yn)}})),ze}function $n(T,A){return gt.apply(this,arguments)}function gt(){return(gt=(0,k.Z)(function*(T,A){const W=ke(T),xe=(yield Kn()).transaction(Yn,"readwrite"),Ne=xe.objectStore(Yn),Ke=yield Ne.get(W);return yield Ne.put(A,W),yield xe.complete,(!Ke||Ke.fid!==A.fid)&&Jt(T,A.fid),A})).apply(this,arguments)}function fn(T){return mn.apply(this,arguments)}function mn(){return(mn=(0,k.Z)(function*(T){const A=ke(T),oe=(yield Kn()).transaction(Yn,"readwrite");yield oe.objectStore(Yn).delete(A),yield oe.complete})).apply(this,arguments)}function ln(T,A){return nr.apply(this,arguments)}function nr(){return(nr=(0,k.Z)(function*(T,A){const W=ke(T),xe=(yield Kn()).transaction(Yn,"readwrite"),Ne=xe.objectStore(Yn),Ke=yield Ne.get(W),ut=A(Ke);return void 0===ut?yield Ne.delete(W):yield Ne.put(ut,W),yield xe.complete,ut&&(!Ke||Ke.fid!==ut.fid)&&Jt(T,ut.fid),ut})).apply(this,arguments)}function dr(T){return or.apply(this,arguments)}function or(){return(or=(0,k.Z)(function*(T){let A;const W=yield ln(T.appConfig,oe=>{const xe=xn(oe),Ne=Yi(T,xe);return A=Ne.registrationPromise,Ne.installationEntry});return""===W.fid?{installationEntry:yield A}:{installationEntry:W,registrationPromise:A}})).apply(this,arguments)}function xn(T){return _n(T||{fid:Le(),registrationStatus:0})}function Yi(T,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(H.create("app-offline"))};const W={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:W,registrationPromise:function(T,A){return it.apply(this,arguments)}(T,W)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:xt(T)}:{installationEntry:A}}function it(){return(it=(0,k.Z)(function*(T,A){try{const W=yield ve(T,A);return $n(T.appConfig,W)}catch(W){throw G(W)&&409===W.customData.serverCode?yield fn(T.appConfig):yield $n(T.appConfig,{fid:A.fid,registrationStatus:0}),W}})).apply(this,arguments)}function xt(T){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,k.Z)(function*(T){let A=yield zr(T.appConfig);for(;1===A.registrationStatus;)yield Ie(100),A=yield zr(T.appConfig);if(0===A.registrationStatus){const{installationEntry:W,registrationPromise:oe}=yield dr(T);return oe||W}return A})).apply(this,arguments)}function zr(T){return ln(T,A=>{if(!A)throw H.create("installation-not-found");return _n(A)})}function _n(T){return function(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function hr(T,A){return rr.apply(this,arguments)}function rr(){return(rr=(0,k.Z)(function*({appConfig:T,heartbeatServiceProvider:A},W){const oe=cn(T,W),xe=Re(T,W),Ne=A.getImmediate({optional:!0});if(Ne){const Ht=yield Ne.getHeartbeatsHeader();Ht&&xe.append("x-firebase-client",Ht)}const ut={method:"POST",headers:xe,body:JSON.stringify({installation:{sdkVersion:N,appId:T.appId}})},Pt=yield Se(()=>fetch(oe,ut));if(Pt.ok)return he(yield Pt.json());throw yield we("Generate Auth Token",Pt)})).apply(this,arguments)}function cn(T,{fid:A}){return`${ue(T)}/${A}/authTokens:generate`}function St(T){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,k.Z)(function*(T,A=!1){let W;const oe=yield ln(T.appConfig,Ne=>{if(!en(Ne))throw H.create("not-registered");const Ke=Ne.authToken;if(!A&&pe(Ke))return Ne;if(1===Ke.requestStatus)return W=rt(T,A),Ne;{if(!navigator.onLine)throw H.create("app-offline");const ut=ye(Ne);return W=Nt(T,ut),ut}});return W?yield W:oe.authToken})).apply(this,arguments)}function rt(T,A){return qe.apply(this,arguments)}function qe(){return(qe=(0,k.Z)(function*(T,A){let W=yield _t(T.appConfig);for(;1===W.authToken.requestStatus;)yield Ie(100),W=yield _t(T.appConfig);const oe=W.authToken;return 0===oe.requestStatus?St(T,A):oe})).apply(this,arguments)}function _t(T){return ln(T,A=>{if(!en(A))throw H.create("not-registered");return function(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Nt(T,A){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,k.Z)(function*(T,A){try{const W=yield hr(T,A),oe=Object.assign(Object.assign({},A),{authToken:W});return yield $n(T.appConfig,oe),W}catch(W){if(!G(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const oe=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield $n(T.appConfig,oe)}else yield fn(T.appConfig);throw W}})).apply(this,arguments)}function en(T){return void 0!==T&&2===T.registrationStatus}function pe(T){return 2===T.requestStatus&&!function(T){const A=Date.now();return A<T.creationTime||T.creationTime+T.expiresIn<A+36e5}(T)}function ye(T){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:A})}function ie(){return(ie=(0,k.Z)(function*(T){const A=T,{installationEntry:W,registrationPromise:oe}=yield dr(A);return oe?oe.catch(console.error):St(A).catch(console.error),W.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,k.Z)(function*(T,A=!1){const W=T;return yield et(W),(yield St(W,A)).token})).apply(this,arguments)}function et(T){return Et.apply(this,arguments)}function Et(){return(Et=(0,k.Z)(function*(T){const{registrationPromise:A}=yield dr(T);A&&(yield A)})).apply(this,arguments)}function zt(T){return H.create("missing-app-config-values",{valueName:T})}const Gn="installations";(0,K._registerComponent)(new Z.wA(Gn,T=>{const A=T.getProvider("app").getImmediate();return{app:A,appConfig:function(T){if(!T||!T.options)throw zt("App Configuration");if(!T.name)throw zt("App Name");const A=["projectId","apiKey","appId"];for(const W of A)if(!T.options[W])throw zt(W);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(A),heartbeatServiceProvider:(0,K._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,K._registerComponent)(new Z.wA("installations-internal",T=>{const A=T.getProvider("app").getImmediate(),W=(0,K._getProvider)(A,Gn).getImmediate();return{getId:()=>function(T){return ie.apply(this,arguments)}(W),getToken:xe=>function(T){return Ae.apply(this,arguments)}(W,xe)}},"PRIVATE")),(0,K.registerVersion)(L,U),(0,K.registerVersion)(L,U,"esm2017");const An="@firebase/remote-config",Qn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ml{constructor(A,W,oe,xe){this.client=A,this.storage=W,this.storageCache=oe,this.logger=xe}isCachedDataFresh(A,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-W,xe=oe<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${xe}.`),xe}fetch(A){var W=this;return(0,k.Z)(function*(){const[oe,xe]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(xe&&W.isCachedDataFresh(A.cacheMaxAgeMillis,oe))return xe;A.eTag=xe&&xe.eTag;const Ne=yield W.client.fetch(A),Ke=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ne.status&&Ke.push(W.storage.setLastSuccessfulFetchResponse(Ne)),yield Promise.all(Ke),Ne})()}}function wi(T=navigator){return T.languages&&T.languages[0]||T.language}class us{constructor(A,W,oe,xe,Ne,Ke){this.firebaseInstallations=A,this.sdkVersion=W,this.namespace=oe,this.projectId=xe,this.apiKey=Ne,this.appId=Ke}fetch(A){var W=this;return(0,k.Z)(function*(){const[oe,xe]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),Ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Pt={sdk_version:W.sdkVersion,app_instance_id:oe,app_instance_id_token:xe,app_id:W.appId,language_code:wi()},Ht={method:"POST",headers:ut,body:JSON.stringify(Pt)},pn=fetch(Ke,Ht),$t=new Promise((Za,Vs)=>{A.signal.addEventListener(()=>{const la=new Error("The operation was aborted.");la.name="AbortError",Vs(la)})});let kr;try{yield Promise.race([pn,$t]),kr=yield pn}catch(Za){let Vs="fetch-client-network";throw"AbortError"===Za.name&&(Vs="fetch-timeout"),Qn.create(Vs,{originalErrorMessage:Za.message})}let Pr=kr.status;const kl=kr.headers.get("ETag")||void 0;let od,ro;if(200===kr.status){let Za;try{Za=yield kr.json()}catch(Vs){throw Qn.create("fetch-client-parse",{originalErrorMessage:Vs.message})}od=Za.entries,ro=Za.state}if("INSTANCE_STATE_UNSPECIFIED"===ro?Pr=500:"NO_CHANGE"===ro?Pr=304:("NO_TEMPLATE"===ro||"EMPTY_CONFIG"===ro)&&(od={}),304!==Pr&&200!==Pr)throw Qn.create("fetch-status",{httpStatus:Pr});return{status:Pr,eTag:kl,config:od}})()}}class Ch{constructor(A,W){this.client=A,this.storage=W}fetch(A){var W=this;return(0,k.Z)(function*(){const oe=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(A,oe)})()}attemptFetch(A,{throttleEndTimeMillis:W,backoffCount:oe}){var xe=this;return(0,k.Z)(function*(){yield function(T,A){return new Promise((W,oe)=>{const xe=Math.max(A-Date.now(),0),Ne=setTimeout(W,xe);T.addEventListener(()=>{clearTimeout(Ne),oe(Qn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,W);try{const Ne=yield xe.client.fetch(A);return yield xe.storage.deleteThrottleMetadata(),Ne}catch(Ne){if(!function(T){if(!(T instanceof te.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}(Ne))throw Ne;const Ke={throttleEndTimeMillis:Date.now()+(0,te.$s)(oe),backoffCount:oe+1};return yield xe.storage.setThrottleMetadata(Ke),xe.attemptFetch(A,Ke)}})()}}class Eh{constructor(A,W,oe,xe,Ne){this.app=A,this._client=W,this._storageCache=oe,this._storage=xe,this._logger=Ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ru(T,A){const W=T.target.error||void 0;return Qn.create(A,{originalErrorMessage:W&&W.message})}const Do="app_namespace_store";class xh{constructor(A,W,oe,xe=function(){return new Promise((T,A)=>{try{const W=indexedDB.open("firebase_remote_config",1);W.onerror=oe=>{A(Ru(oe,"storage-open"))},W.onsuccess=oe=>{T(oe.target.result)},W.onupgradeneeded=oe=>{const xe=oe.target.result;switch(oe.oldVersion){case 0:xe.createObjectStore(Do,{keyPath:"compositeKey"})}}}catch(W){A(Qn.create("storage-open",{originalErrorMessage:W}))}})}()){this.appId=A,this.appName=W,this.namespace=oe,this.openDbPromise=xe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var W=this;return(0,k.Z)(function*(){const oe=yield W.openDbPromise;return new Promise((xe,Ne)=>{const ut=oe.transaction([Do],"readonly").objectStore(Do),Pt=W.createCompositeKey(A);try{const Ht=ut.get(Pt);Ht.onerror=pn=>{Ne(Ru(pn,"storage-get"))},Ht.onsuccess=pn=>{const $t=pn.target.result;xe($t?$t.value:void 0)}}catch(Ht){Ne(Qn.create("storage-get",{originalErrorMessage:Ht&&Ht.message}))}})})()}set(A,W){var oe=this;return(0,k.Z)(function*(){const xe=yield oe.openDbPromise;return new Promise((Ne,Ke)=>{const Pt=xe.transaction([Do],"readwrite").objectStore(Do),Ht=oe.createCompositeKey(A);try{const pn=Pt.put({compositeKey:Ht,value:W});pn.onerror=$t=>{Ke(Ru($t,"storage-set"))},pn.onsuccess=()=>{Ne()}}catch(pn){Ke(Qn.create("storage-set",{originalErrorMessage:pn&&pn.message}))}})})()}delete(A){var W=this;return(0,k.Z)(function*(){const oe=yield W.openDbPromise;return new Promise((xe,Ne)=>{const ut=oe.transaction([Do],"readwrite").objectStore(Do),Pt=W.createCompositeKey(A);try{const Ht=ut.delete(Pt);Ht.onerror=pn=>{Ne(Ru(pn,"storage-delete"))},Ht.onsuccess=()=>{xe()}}catch(Ht){Ne(Qn.create("storage-delete",{originalErrorMessage:Ht&&Ht.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class c0{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,k.Z)(function*(){const W=A.storage.getLastFetchStatus(),oe=A.storage.getLastSuccessfulFetchTimestampMillis(),xe=A.storage.getActiveConfig(),Ne=yield W;Ne&&(A.lastFetchStatus=Ne);const Ke=yield oe;Ke&&(A.lastSuccessfulFetchTimestampMillis=Ke);const ut=yield xe;ut&&(A.activeConfig=ut)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function u0(){return vl.apply(this,arguments)}function vl(){return(vl=(0,k.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(T){return!1}})).apply(this,arguments)}(0,K._registerComponent)(new Z.wA("remote-config",function(A,{instanceIdentifier:W}){const oe=A.getProvider("app").getImmediate(),xe=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Qn.create("registration-window");if(!(0,te.hl)())throw Qn.create("indexed-db-unavailable");const{projectId:Ne,apiKey:Ke,appId:ut}=oe.options;if(!Ne)throw Qn.create("registration-project-id");if(!Ke)throw Qn.create("registration-api-key");if(!ut)throw Qn.create("registration-app-id");const Pt=new xh(ut,oe.name,W=W||"firebase"),Ht=new c0(Pt),pn=new ee.Yd(An);pn.logLevel=ee.in.ERROR;const $t=new us(xe,K.SDK_VERSION,W,Ne,Ke,ut),kr=new Ch($t,Pt),Pr=new ml(kr,Pt,Ht,pn),kl=new Eh(oe,Pr,Ht,Pt,pn);return function(T){const A=(0,te.m9)(T);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(kl),kl},"PUBLIC").setMultipleInstances(!0)),(0,K.registerVersion)(An,"0.3.7"),(0,K.registerVersion)(An,"0.3.7","esm2017");const Ih="/firebase-messaging-sw.js",Ia="/firebase-cloud-messaging-push-scope",Sp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ku="google.c.a.c_id",Ks="google.c.a.c_l",bl="google.c.a.ts",ar="google.c.a.e";var Sa=(()=>{return(T=Sa||(Sa={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",Sa;var T})();function Vr(T){const A=new Uint8Array(T);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sh(T){const W=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(W),xe=new Uint8Array(oe.length);for(let Ne=0;Ne<oe.length;++Ne)xe[Ne]=oe.charCodeAt(Ne);return xe}const Aa="fcm_token_details_db",wl="fcm_token_object_Store";function d0(T){return pi.apply(this,arguments)}function pi(){return(pi=(0,k.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ne=>Ne.name).includes(Aa))return null;let A=null;return(yield(0,te.X3)(Aa,5,function(){var oe=(0,k.Z)(function*(xe,Ne,Ke,ut){var Pt;if(Ne<2||!xe.objectStoreNames.contains(wl))return;const Ht=ut.objectStore(wl),pn=yield Ht.index("fcmSenderId").get(T);if(yield Ht.clear(),pn)if(2===Ne){const $t=pn;if(!$t.auth||!$t.p256dh||!$t.endpoint)return;A={token:$t.fcmToken,createTime:null!==(Pt=$t.createTime)&&void 0!==Pt?Pt:Date.now(),subscriptionOptions:{auth:$t.auth,p256dh:$t.p256dh,endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:"string"==typeof $t.vapidKey?$t.vapidKey:Vr($t.vapidKey)}}}else if(3===Ne){const $t=pn;A={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:Vr($t.auth),p256dh:Vr($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:Vr($t.vapidKey)}}}else if(4===Ne){const $t=pn;A={token:$t.fcmToken,createTime:$t.createTime,subscriptionOptions:{auth:Vr($t.auth),p256dh:Vr($t.p256dh),endpoint:$t.endpoint,swScope:$t.swScope,vapidKey:Vr($t.vapidKey)}}}});return function(xe,Ne,Ke,ut){return oe.apply(this,arguments)}}())).close(),yield(0,te.Lj)(Aa),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),Pu(A)?A:null})).apply(this,arguments)}function Pu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:A}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Li="firebase-messaging-store";let bc=null;function Ou(){return bc||(bc=(0,te.X3)("firebase-messaging-database",1,(T,A)=>{switch(A){case 0:T.createObjectStore(Li)}})),bc}function qn(T){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(T){const A=Lu(T),oe=yield(yield Ou()).transaction(Li).objectStore(Li).get(A);if(oe)return oe;{const xe=yield d0(T.appConfig.senderId);if(xe)return yield Ms(T,xe),xe}})).apply(this,arguments)}function Ms(T,A){return hs.apply(this,arguments)}function hs(){return(hs=(0,k.Z)(function*(T,A){const W=Lu(T),xe=(yield Ou()).transaction(Li,"readwrite");return yield xe.objectStore(Li).put(A,W),yield xe.complete,A})).apply(this,arguments)}function On(T){return ta.apply(this,arguments)}function ta(){return(ta=(0,k.Z)(function*(T){const A=Lu(T),oe=(yield Ou()).transaction(Li,"readwrite");yield oe.objectStore(Li).delete(A),yield oe.complete})).apply(this,arguments)}function Lu({appConfig:T}){return T.appId}const Fn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vu(T,A){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,k.Z)(function*(T,A){const W=yield Dr(T),oe=Cc(A),xe={method:"POST",headers:W,body:JSON.stringify(oe)};let Ne;try{Ne=yield(yield fetch(xo(T.appConfig),xe)).json()}catch(Ke){throw Fn.create("token-subscribe-failed",{errorInfo:Ke})}if(Ne.error)throw Fn.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Fn.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function Ma(T,A){return Br.apply(this,arguments)}function Br(){return(Br=(0,k.Z)(function*(T,A){const W=yield Dr(T),oe=Cc(A.subscriptionOptions),xe={method:"PATCH",headers:W,body:JSON.stringify(oe)};let Ne;try{Ne=yield(yield fetch(`${xo(T.appConfig)}/${A.token}`,xe)).json()}catch(Ke){throw Fn.create("token-update-failed",{errorInfo:Ke})}if(Ne.error)throw Fn.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Fn.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Mh(T,A){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,k.Z)(function*(T,A){const oe={method:"DELETE",headers:yield Dr(T)};try{const Ne=yield(yield fetch(`${xo(T.appConfig)}/${A}`,oe)).json();if(Ne.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(xe){throw Fn.create("token-unsubscribe-failed",{errorInfo:xe})}})).apply(this,arguments)}function xo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Dr(T){return El.apply(this,arguments)}function El(){return(El=(0,k.Z)(function*({appConfig:T,installations:A}){const W=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function Cc({p256dh:T,auth:A,endpoint:W,vapidKey:oe}){const xe={web:{endpoint:W,auth:A,p256dh:T}};return oe!==Sp&&(xe.web.applicationPubKey=oe),xe}const Ot=6048e5;function Ec(T){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,k.Z)(function*(T){const A=yield sn(T.swRegistration,T.vapidKey),W={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:A.endpoint,auth:Vr(A.getKey("auth")),p256dh:Vr(A.getKey("p256dh"))},oe=yield qn(T.firebaseDependencies);if(oe){if(Jn(oe.subscriptionOptions,W))return Date.now()>=oe.createTime+Ot?Hu(T,{token:oe.token,createTime:Date.now(),subscriptionOptions:W}):oe.token;try{yield Mh(T.firebaseDependencies,oe.token)}catch(xe){console.warn(xe)}return To(T.firebaseDependencies,W)}return To(T.firebaseDependencies,W)})).apply(this,arguments)}function Bu(T){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,k.Z)(function*(T){const A=yield qn(T.firebaseDependencies);A&&(yield Mh(T.firebaseDependencies,A.token),yield On(T.firebaseDependencies));const W=yield T.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function Hu(T,A){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,k.Z)(function*(T,A){try{const W=yield Ma(T.firebaseDependencies,A),oe=Object.assign(Object.assign({},A),{token:W,createTime:Date.now()});return yield Ms(T.firebaseDependencies,oe),W}catch(W){throw yield Bu(T),W}})).apply(this,arguments)}function To(T,A){return We.apply(this,arguments)}function We(){return(We=(0,k.Z)(function*(T,A){const oe={token:yield Vu(T,A),createTime:Date.now(),subscriptionOptions:A};return yield Ms(T,oe),oe.token})).apply(this,arguments)}function sn(T,A){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,k.Z)(function*(T,A){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sh(A)})})).apply(this,arguments)}function Jn(T,A){return A.vapidKey===T.vapidKey&&A.endpoint===T.endpoint&&A.auth===T.auth&&A.p256dh===T.p256dh}function xl(T){const A={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function(T,A){if(!A.notification)return;T.notification={};const W=A.notification.title;W&&(T.notification.title=W);const oe=A.notification.body;oe&&(T.notification.body=oe);const xe=A.notification.image;xe&&(T.notification.image=xe)}(A,T),function(T,A){!A.data||(T.data=A.data)}(A,T),function(T,A){if(!A.fcmOptions)return;T.fcmOptions={};const W=A.fcmOptions.link;W&&(T.fcmOptions.link=W);const oe=A.fcmOptions.analytics_label;oe&&(T.fcmOptions.analyticsLabel=oe)}(A,T),A}function Tl(T){return"object"==typeof T&&!!T&&ku in T}function $u(T,A){const W=[];for(let oe=0;oe<T.length;oe++)W.push(T.charAt(oe)),oe<A.length&&W.push(A.charAt(oe));return W.join("")}function Io(T){return Fn.create("missing-app-config-values",{valueName:T})}$u("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$u("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xc{constructor(A,W,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const xe=function(T){if(!T||!T.options)throw Io("App Configuration Object");if(!T.name)throw Io("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:W}=T;for(const oe of A)if(!W[oe])throw Io(oe);return{appName:T.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:xe,installations:W,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function yr(T){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,k.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Ih,{scope:Ia}),T.swRegistration.update().catch(()=>{})}catch(A){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function ju(T,A){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,k.Z)(function*(T,A){if(!A&&!T.swRegistration&&(yield yr(T)),A||!T.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");T.swRegistration=A}})).apply(this,arguments)}function Ui(T,A){return Il.apply(this,arguments)}function Il(){return(Il=(0,k.Z)(function*(T,A){A?T.vapidKey=A:T.vapidKey||(T.vapidKey=Sp)})).apply(this,arguments)}function Pa(){return(Pa=(0,k.Z)(function*(T,A){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield Ui(T,null==A?void 0:A.vapidKey),yield ju(T,null==A?void 0:A.serviceWorkerRegistration),Ec(T)})).apply(this,arguments)}function Ap(T,A,W){return na.apply(this,arguments)}function na(){return(na=(0,k.Z)(function*(T,A,W){const oe=Zu(A);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:W[ku],message_name:W[Ks],message_time:W[bl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zu(T){switch(T){case Sa.NOTIFICATION_CLICKED:return"notification_open";case Sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function So(){return(So=(0,k.Z)(function*(T,A){const W=A.data;if(!W.isFirebaseMessaging)return;T.onMessageHandler&&W.messageType===Sa.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(xl(W)):T.onMessageHandler.next(xl(W)));const oe=W.data;Tl(oe)&&"1"===oe[ar]&&(yield Ap(T,W.messageType,oe))})).apply(this,arguments)}const Sl="@firebase/messaging";function zu(){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,k.Z)(function*(){try{yield(0,te.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,K._registerComponent)(new Z.wA("messaging",T=>{const A=new xc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function(T,A){return So.apply(this,arguments)}(A,W)),A},"PUBLIC")),(0,K._registerComponent)(new Z.wA("messaging-internal",T=>{const A=T.getProvider("messaging").getImmediate();return{getToken:oe=>function(T,A){return Pa.apply(this,arguments)}(A,oe)}},"PRIVATE")),(0,K.registerVersion)(Sl,"0.9.12"),(0,K.registerVersion)(Sl,"0.9.12","esm2017");const Ic="analytics",Qu="firebase_id",Sc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Js="https://www.googletagmanager.com/gtag/js",xr=new ee.Yd("@firebase/analytics");function La(T){return Promise.all(T.map(A=>A.catch(W=>W)))}function Ph(T,A){const W=document.createElement("script");W.src=`${Js}?l=${T}&id=${A}`,W.async=!0,document.head.appendChild(W)}function Xs(T,A,W,oe,xe,Ne){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,k.Z)(function*(T,A,W,oe,xe,Ne){const Ke=oe[xe];try{if(Ke)yield A[Ke];else{const Pt=(yield La(W)).find(Ht=>Ht.measurementId===xe);Pt&&(yield A[Pt.appId])}}catch(ut){xr.error(ut)}T("config",xe,Ne)})).apply(this,arguments)}function h0(T,A,W,oe,xe){return No.apply(this,arguments)}function No(){return(No=(0,k.Z)(function*(T,A,W,oe,xe){try{let Ne=[];if(xe&&xe.send_to){let Ke=xe.send_to;Array.isArray(Ke)||(Ke=[Ke]);const ut=yield La(W);for(const Pt of Ke){const Ht=ut.find($t=>$t.measurementId===Pt),pn=Ht&&A[Ht.appId];if(!pn){Ne=[];break}Ne.push(pn)}}0===Ne.length&&(Ne=Object.values(A)),yield Promise.all(Ne),T("event",oe,xe||{})}catch(Ne){xr.error(Ne)}})).apply(this,arguments)}function Pp(){const T=window.document.getElementsByTagName("script");for(const A of Object.values(T))if(A.src&&A.src.includes(Js))return A;return null}const Ji=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ks=new class{constructor(A={},W=1e3){this.throttleMetadata=A,this.intervalMillis=W}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,W){this.throttleMetadata[A]=W}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function ed(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Op(T){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,k.Z)(function*(T){var A;const{appId:W,apiKey:oe}=T,xe={method:"GET",headers:ed(oe)},Ne=Sc.replace("{app-id}",W),Ke=yield fetch(Ne,xe);if(200!==Ke.status&&304!==Ke.status){let ut="";try{const Pt=yield Ke.json();(null===(A=Pt.error)||void 0===A?void 0:A.message)&&(ut=Pt.error.message)}catch(Pt){}throw Ji.create("config-fetch-failed",{httpStatus:Ke.status,responseMessage:ut})}return Ke.json()})).apply(this,arguments)}function Ba(T){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,k.Z)(function*(T,A=ks,W){const{appId:oe,apiKey:xe,measurementId:Ne}=T.options;if(!oe)throw Ji.create("no-app-id");if(!xe){if(Ne)return{measurementId:Ne,appId:oe};throw Ji.create("no-api-key")}const Ke=A.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ut=new Fh;return setTimeout((0,k.Z)(function*(){ut.abort()}),void 0!==W?W:6e4),Xi({appId:oe,apiKey:xe,measurementId:Ne},Ke,ut,A)})).apply(this,arguments)}function Xi(T,A,W){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,k.Z)(function*(T,{throttleEndTimeMillis:A,backoffCount:W},oe,xe=ks){const{appId:Ne,measurementId:Ke}=T;try{yield Nc(oe,A)}catch(ut){if(Ke)return xr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${ut.message}]`),{appId:Ne,measurementId:Ke};throw ut}try{const ut=yield Op(T);return xe.deleteThrottleMetadata(Ne),ut}catch(ut){if(!Fv(ut)){if(xe.deleteThrottleMetadata(Ne),Ke)return xr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${ut.message}]`),{appId:Ne,measurementId:Ke};throw ut}const Pt=503===Number(ut.customData.httpStatus)?(0,te.$s)(W,xe.intervalMillis,30):(0,te.$s)(W,xe.intervalMillis),Ht={throttleEndTimeMillis:Date.now()+Pt,backoffCount:W+1};return xe.setThrottleMetadata(Ne,Ht),xr.debug(`Calling attemptFetch again in ${Pt} millis`),Xi(T,Ht,oe,xe)}})).apply(this,arguments)}function Nc(T,A){return new Promise((W,oe)=>{const xe=Math.max(A-Date.now(),0),Ne=setTimeout(W,xe);T.addEventListener(()=>{clearTimeout(Ne),oe(Ji.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function Fv(T){if(!(T instanceof te.ZR&&T.customData))return!1;const A=Number(T.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Fh{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Fp(){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(){if(!(0,te.hl)())return xr.warn(Ji.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(T){return xr.warn(Ji.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function ia(){return(ia=(0,k.Z)(function*(T,A,W,oe,xe,Ne,Ke){var ut;const Pt=Ba(T);Pt.then(Pr=>{W[Pr.measurementId]=Pr.appId,T.options.measurementId&&Pr.measurementId!==T.options.measurementId&&xr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Pr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Pr=>xr.error(Pr)),A.push(Pt);const Ht=Fp().then(Pr=>{if(Pr)return oe.getId()}),[pn,$t]=yield Promise.all([Pt,Ht]);Pp()||Ph(Ne,pn.measurementId),xe("js",new Date);const kr=null!==(ut=null==Ke?void 0:Ke.config)&&void 0!==ut?ut:{};return kr.origin="firebase",kr.update=!0,null!=$t&&(kr[Qu]=$t),xe("config",pn.measurementId,kr),pn.measurementId})).apply(this,arguments)}class Ml{constructor(A){this.app=A}_delete(){return delete un[this.app.options.appId],Promise.resolve()}}let un={},Dt=[];const Tn={};let sa,Ps,Rl="dataLayer",fr=!1;function Mo(T,A,W){!function(){const T=[];if((0,te.ru)()&&T.push("This is a browser extension environment."),(0,te.zI)()||T.push("Cookies are not available."),T.length>0){const A=T.map((oe,xe)=>`(${xe+1}) ${oe}`).join(" "),W=Ji.create("invalid-analytics-context",{errorInfo:A});xr.warn(W.message)}}();const oe=T.options.appId;if(!oe)throw Ji.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Ji.create("no-api-key");xr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=un[oe])throw Ji.create("already-exists",{id:oe});if(!fr){!function(T){let A=[];Array.isArray(window[T])?A=window[T]:window[T]=A}(Rl);const{wrappedGtag:Ne,gtagCore:Ke}=function(T,A,W,oe,xe){let Ne=function(...Ke){window[oe].push(arguments)};return window[xe]&&"function"==typeof window[xe]&&(Ne=window[xe]),window[xe]=function(T,A,W,oe){function Ne(){return(Ne=(0,k.Z)(function*(Ke,ut,Pt){try{"event"===Ke?yield h0(T,A,W,ut,Pt):"config"===Ke?yield Xs(T,A,W,oe,ut,Pt):T("set",ut)}catch(Ht){xr.error(Ht)}})).apply(this,arguments)}return function(Ke,ut,Pt){return Ne.apply(this,arguments)}}(Ne,T,A,W),{gtagCore:Ne,wrappedGtag:window[xe]}}(un,Dt,Tn,Rl,"gtag");Ps=Ne,sa=Ke,fr=!0}return un[oe]=function(T,A,W,oe,xe,Ne,Ke){return ia.apply(this,arguments)}(T,Dt,Tn,A,sa,Rl,W),new Ml(T)}function lr(){return(lr=(0,k.Z)(function*(T,A,W,oe,xe){if(xe&&xe.global)T("event",W,oe);else{const Ne=yield A;T("event",W,Object.assign(Object.assign({},oe),{send_to:Ne}))}})).apply(this,arguments)}function mi(){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,k.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(T){return!1}})).apply(this,arguments)}const er="@firebase/analytics";(0,K._registerComponent)(new Z.wA(Ic,(A,{options:W})=>Mo(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),W),"PUBLIC")),(0,K._registerComponent)(new Z.wA("analytics-internal",function(A){try{const W=A.getProvider(Ic).getImmediate();return{logEvent:(oe,xe,Ne)=>function(T,A,W,oe){T=(0,te.m9)(T),function(T,A,W,oe,xe){return lr.apply(this,arguments)}(Ps,un[T.app.options.appId],A,W,oe).catch(xe=>xr.error(xe))}(W,oe,xe,Ne)}}catch(W){throw Ji.create("interop-component-reg-failed",{reason:W})}},"PRIVATE")),(0,K.registerVersion)(er,"0.7.8"),(0,K.registerVersion)(er,"0.7.8","esm2017");var Ci=O(7771),Vv=O(3637),Bp=O(8307),aa=O(9746),$a=O(2639);const p0=new a.GfV("7.3.0"),Pc="__angularfire_symbol__analyticsIsSupportedValue",sr="__angularfire_symbol__analyticsIsSupported",rd="__angularfire_symbol__remoteConfigIsSupportedValue",Po="__angularfire_symbol__remoteConfigIsSupported",Oo="__angularfire_symbol__messagingIsSupportedValue",vr="__angularfire_symbol__messagingIsSupported";function Ei(T,A,W){if(A){if(1===A.length)return A[0];const Ne=A.filter(Ke=>Ke.app===W);if(1===Ne.length)return Ne[0]}return W.container.getProvider(T).getImmediate({optional:!0})}globalThis[sr]||(globalThis[sr]=mi().then(T=>globalThis[Pc]=T).catch(()=>globalThis[Pc]=!1)),globalThis[vr]||(globalThis[vr]=zu().then(T=>globalThis[Oo]=T).catch(()=>globalThis[Oo]=!1)),globalThis[Po]||(globalThis[Po]=u0().then(T=>globalThis[rd]=T).catch(()=>globalThis[rd]=!1));const Fs=(T,A)=>{const W=A?[A]:(0,M.C6)(),oe=[];return W.forEach(xe=>{xe.container.getProvider(T).instances.forEach(Ke=>{oe.includes(Ke)||oe.push(Ke)})}),oe};function Ls(){}class Fo{constructor(A,W=Ci.N){this.zone=A,this.delegate=W}now(){return this.delegate.now()}schedule(A,W,oe){const xe=this.zone;return this.delegate.schedule(function(Ke){xe.runGuarded(()=>{A.apply(this,[Ke])})},W,oe)}}class Lo{constructor(A){this.zone=A,this.task=null}call(A,W){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ls,{},Ls,Ls)),W.pipe((0,Bp.b)({next:oe,complete:oe,error:oe})).subscribe(A).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Hh=(()=>{class T{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new Fo(Zone.current)),this.insideAngular=W.run(()=>new Fo(Zone.current,Vv.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(W){return new(W||T)(a.LFG(a.R0b))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function no(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Hp(T){return T.pipe((0,aa.QV)(no().outsideAngular))}function Ir(T){return no(),function(T){return function(W){return(W=W.lift(new Lo(T.ngZone))).pipe((0,$a.R)(T.outsideAngular),(0,aa.QV)(T.insideAngular))}}(no())(T)}},982:(Fe,me,O)=>{"use strict";O.d(me,{$:()=>Gu,A:()=>Ve,E:()=>Nu,G:()=>_l,I:()=>Vr,K:()=>Vt,L:()=>Ms,M:()=>Lu,N:()=>wc,P:()=>Ke,Q:()=>Fn,R:()=>ja,T:()=>ta,U:()=>Br,V:()=>Mh,W:()=>Cc,X:()=>gi,Y:()=>Tl,Z:()=>Rh,_:()=>Vi,a:()=>fr,a0:()=>Ap,a1:()=>Zu,a2:()=>So,a3:()=>qu,a4:()=>kh,a5:()=>zu,a6:()=>Yu,a7:()=>Ku,a8:()=>Np,a9:()=>Pv,aA:()=>za,aB:()=>Gp,aC:()=>Zn,aG:()=>Mo,aJ:()=>Rs,aa:()=>Ic,ab:()=>Rp,ae:()=>xr,af:()=>Ph,ag:()=>kp,aj:()=>Uu,ak:()=>Ov,am:()=>Nc,an:()=>ia,ao:()=>Rr,ap:()=>$n,aq:()=>ea,ar:()=>fi,as:()=>an,at:()=>D0,au:()=>Bc,av:()=>In,aw:()=>ze,ax:()=>fn,ay:()=>cs,az:()=>Hv,b:()=>sa,c:()=>od,d:()=>la,e:()=>Za,f:()=>Wa,g:()=>ad,h:()=>Bv,i:()=>Bp,j:()=>Uv,k:()=>Bs,l:()=>Ga,m:()=>x0,o:()=>ht,r:()=>T,s:()=>Ir,u:()=>xe,z:()=>Jt});var a=O(8239),M=O(3854),k=O(8026);function ee(w,m){var y={};for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&m.indexOf(E)<0&&(y[E]=w[E]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var V=0;for(E=Object.getOwnPropertySymbols(w);V<E.length;V++)m.indexOf(E[V])<0&&Object.prototype.propertyIsEnumerable.call(w,E[V])&&(y[E[V]]=w[E[V]])}return y}var De=O(5422),Ie=O(3910);const ht={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Jt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Mt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new M.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xt=new De.Yd("@firebase/auth");function qt(w,...m){Xt.logLevel<=De.in.ERROR&&Xt.error(`Auth (${k.SDK_VERSION}): ${w}`,...m)}function an(w,...m){throw Yn(w,...m)}function In(w,...m){return Yn(w,...m)}function tr(w,m,y){const E=Object.assign(Object.assign({},Mt()),{[m]:y});return new M.LL("auth","Firebase",E).create(m,{appName:w.name})}function Mn(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&an(w,"argument-error"),tr(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yn(w,...m){if("string"!=typeof w){const y=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return yt.create(w,...m)}function ze(w,m,...y){if(!w)throw Yn(m,...y)}function Kn(w){const m="INTERNAL ASSERTION FAILED: "+w;throw qt(m),new Error(m)}function $n(w,m){w||Kn(m)}const gt=new Map;function fn(w){$n(w instanceof Function,"Expected a class definition");let m=gt.get(w);return m?($n(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,gt.set(w,m),m)}function nr(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function dr(){return"http:"===or()||"https:"===or()}function or(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class En{constructor(m,y){this.shortDelay=m,this.longDelay=y,$n(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,M.uI)()||(0,M.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dr()||(0,M.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function it(w,m){$n(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class xt{static initialize(m,y,E){this.fetchImpl=m,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zr=new En(3e4,6e4);function _n(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function At(w,m,y,E){return hr.apply(this,arguments)}function hr(){return(hr=(0,a.Z)(function*(w,m,y,E,V={}){return rr(w,V,(0,a.Z)(function*(){let j={},be={};E&&("GET"===m?be=E:j={body:JSON.stringify(E)});const Ge=(0,M.xO)(Object.assign({key:w.config.apiKey},be)).slice(1),ft=yield w._getAdditionalHeaders();return ft["Content-Type"]="application/json",w.languageCode&&(ft["X-Firebase-Locale"]=w.languageCode),xt.fetch()(rt(w,w.config.apiHost,y,Ge),Object.assign({method:m,headers:ft,referrerPolicy:"no-referrer"},j))}))})).apply(this,arguments)}function rr(w,m,y){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(function*(w,m,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},Mr),m);try{const V=new qe(w),j=yield Promise.race([y(),V.promise]);V.clearNetworkTimeout();const be=yield j.json();if("needConfirmation"in be)throw _t(w,"account-exists-with-different-credential",be);if(j.ok&&!("errorMessage"in be))return be;{const Ge=j.ok?be.errorMessage:be.error.message,[ft,tt]=Ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ft)throw _t(w,"credential-already-in-use",be);if("EMAIL_EXISTS"===ft)throw _t(w,"email-already-in-use",be);const Tt=E[ft]||ft.toLowerCase().replace(/[_\s]+/g,"-");if(tt)throw tr(w,Tt,tt);an(w,Tt)}}catch(V){if(V instanceof M.ZR)throw V;an(w,"network-request-failed")}})).apply(this,arguments)}function St(w,m,y,E){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,a.Z)(function*(w,m,y,E,V={}){const j=yield At(w,m,y,E,V);return"mfaPendingCredential"in j&&an(w,"multi-factor-auth-required",{_serverResponse:j}),j})).apply(this,arguments)}function rt(w,m,y,E){const V=`${m}${y}?${E}`;return w.config.emulator?it(w.config,V):`${w.config.apiScheme}://${V}`}class qe{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(In(this.auth,"network-request-failed")),zr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _t(w,m,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const V=In(w,m,E);return V.customData._tokenResponse=y,V}function Lt(){return(Lt=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function en(w,m){return pe.apply(this,arguments)}function pe(){return(pe=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function le(w,m){return ye.apply(this,arguments)}function ye(){return(ye=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Be(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function se(){return(se=(0,a.Z)(function*(w,m=!1){const y=(0,M.m9)(w),E=yield y.getIdToken(m),V=et(E);ze(V&&V.exp&&V.auth_time&&V.iat,y.auth,"internal-error");const j="object"==typeof V.firebase?V.firebase:void 0,be=null==j?void 0:j.sign_in_provider;return{claims:V,token:E,authTime:Be(Ae(V.auth_time)),issuedAtTime:Be(Ae(V.iat)),expirationTime:Be(Ae(V.exp)),signInProvider:be||null,signInSecondFactor:(null==j?void 0:j.sign_in_second_factor)||null}})).apply(this,arguments)}function Ae(w){return 1e3*Number(w)}function et(w){const[m,y,E]=w.split(".");if(void 0===m||void 0===y||void 0===E)return qt("JWT malformed, contained fewer than 3 sections"),null;try{const V=(0,M.tV)(y);return V?JSON.parse(V):(qt("Failed to decode base64 JWT payload"),null)}catch(V){return qt("Caught error parsing JWT payload as JSON",V),null}}function Rt(w,m){return at.apply(this,arguments)}function at(){return(at=(0,a.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(E){throw E instanceof M.ZR&&rn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function rn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class jn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const V=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,V)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,a.Z)(function*(){yield y.iteration()}),E)}iteration(){var m=this;return(0,a.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&m.schedule(!0))}m.schedule()})()}}class Pn{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Be(this.lastLoginAt),this.creationTime=Be(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yn(w){return ir.apply(this,arguments)}function ir(){return(ir=(0,a.Z)(function*(w){var m;const y=w.auth,E=yield w.getIdToken(),V=yield Rt(w,le(y,{idToken:E}));ze(null==V?void 0:V.users.length,y,"internal-error");const j=V.users[0];w._notifyReloadListener(j);const be=(null===(m=j.providerUserInfo)||void 0===m?void 0:m.length)?Oi(j.providerUserInfo):[],Ge=Gn(w.providerData,be),Tt=!!w.isAnonymous&&!(w.email&&j.passwordHash||(null==Ge?void 0:Ge.length)),Sn={uid:j.localId,displayName:j.displayName||null,photoURL:j.photoUrl||null,email:j.email||null,emailVerified:j.emailVerified||!1,phoneNumber:j.phoneNumber||null,tenantId:j.tenantId||null,providerData:Ge,metadata:new Pn(j.createdAt,j.lastLoginAt),isAnonymous:Tt};Object.assign(w,Sn)})).apply(this,arguments)}function zt(){return(zt=(0,a.Z)(function*(w){const m=(0,M.m9)(w);yield yn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Gn(w,m){return[...w.filter(E=>!m.some(V=>V.providerId===E.providerId)),...m]}function Oi(w){return w.map(m=>{var{providerId:y}=m,E=ee(m,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Er(){return(Er=(0,a.Z)(function*(w,m){const y=yield rr(w,{},(0,a.Z)(function*(){const E=(0,M.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:V,apiKey:j}=w.config,be=rt(w,V,"/v1/token",`key=${j}`),Ge=yield w._getAdditionalHeaders();return Ge["Content-Type"]="application/x-www-form-urlencoded",xt.fetch()(be,{method:"POST",headers:Ge,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Fi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ze(m.idToken,"internal-error"),ze(void 0!==m.idToken,"internal-error"),ze(void 0!==m.refreshToken,"internal-error");const y="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function(w){const m=et(w);return ze(m,"internal-error"),ze(void 0!==m.exp,"internal-error"),ze(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var E=this;return(0,a.Z)(function*(){return ze(!E.accessToken||E.refreshToken,m,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var E=this;return(0,a.Z)(function*(){const{accessToken:V,refreshToken:j,expiresIn:be}=yield function(w,m){return Er.apply(this,arguments)}(m,y);E.updateTokensAndExpiration(V,j,Number(be))})()}updateTokensAndExpiration(m,y,E){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,y){const{refreshToken:E,accessToken:V,expirationTime:j}=y,be=new Fi;return E&&(ze("string"==typeof E,"internal-error",{appName:m}),be.refreshToken=E),V&&(ze("string"==typeof V,"internal-error",{appName:m}),be.accessToken=V),j&&(ze("number"==typeof j,"internal-error",{appName:m}),be.expirationTime=j),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Fi,this.toJSON())}_performRefresh(){return Kn("not implemented")}}function An(w,m){ze("string"==typeof w||void 0===w,"internal-error",{appName:m})}class Ki{constructor(m){var{uid:y,auth:E,stsTokenManager:V}=m,j=ee(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=j.displayName||null,this.email=j.email||null,this.emailVerified=j.emailVerified||!1,this.phoneNumber=j.phoneNumber||null,this.photoURL=j.photoURL||null,this.isAnonymous=j.isAnonymous||!1,this.tenantId=j.tenantId||null,this.providerData=j.providerData?[...j.providerData]:[],this.metadata=new Pn(j.createdAt||void 0,j.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,a.Z)(function*(){const E=yield Rt(y,y.stsTokenManager.getToken(y.auth,m));return ze(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(m){return function(w){return se.apply(this,arguments)}(this,m)}reload(){return function(w){return zt.apply(this,arguments)}(this)}_assign(m){this!==m&&(ze(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Ki(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var E=this;return(0,a.Z)(function*(){let V=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),V=!0),y&&(yield yn(E)),yield E.auth._persistUserIfCurrent(E),V&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,a.Z)(function*(){const y=yield m.getIdToken();return yield Rt(m,function(w,m){return Lt.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var E,V,j,be,Ge,ft,tt,Tt;const Sn=null!==(E=y.displayName)&&void 0!==E?E:void 0,Wn=null!==(V=y.email)&&void 0!==V?V:void 0,wn=null!==(j=y.phoneNumber)&&void 0!==j?j:void 0,fa=null!==(be=y.photoURL)&&void 0!==be?be:void 0,gd=null!==(Ge=y.tenantId)&&void 0!==Ge?Ge:void 0,md=null!==(ft=y._redirectEventId)&&void 0!==ft?ft:void 0,Kp=null!==(tt=y.createdAt)&&void 0!==tt?tt:void 0,Qp=null!==(Tt=y.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Jp,emailVerified:Yh,isAnonymous:pa,providerData:Xp,stsTokenManager:Ul}=y;ze(Jp&&Ul,m,"internal-error");const oE=Fi.fromJSON(this.name,Ul);ze("string"==typeof Jp,m,"internal-error"),An(Sn,m.name),An(Wn,m.name),ze("boolean"==typeof Yh,m,"internal-error"),ze("boolean"==typeof pa,m,"internal-error"),An(wn,m.name),An(fa,m.name),An(gd,m.name),An(md,m.name),An(Kp,m.name),An(Qp,m.name);const Hl=new Ki({uid:Jp,auth:m,email:Wn,emailVerified:Yh,displayName:Sn,isAnonymous:pa,photoURL:fa,phoneNumber:wn,tenantId:gd,stsTokenManager:oE,createdAt:Kp,lastLoginAt:Qp});return Xp&&Array.isArray(Xp)&&(Hl.providerData=Xp.map($i=>Object.assign({},$i))),md&&(Hl._redirectEventId=md),Hl}static _fromIdTokenResponse(m,y,E=!1){return(0,a.Z)(function*(){const V=new Fi;V.updateFromServerResponse(y);const j=new Ki({uid:y.localId,auth:m,stsTokenManager:V,isAnonymous:E});return yield yn(j),j})()}}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(y,E){var V=this;return(0,a.Z)(function*(){V.storage[y]=E})()}_get(y){var E=this;return(0,a.Z)(function*(){const V=E.storage[y];return void 0===V?null:V})()}_remove(y){var E=this;return(0,a.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function cs(w,m,y){return`firebase:${w}:${m}:${y}`}class Qn{constructor(m,y,E){this.persistence=m,this.auth=y,this.userKey=E;const{config:V,name:j}=this.auth;this.fullUserKey=cs(this.userKey,V.apiKey,j),this.fullPersistenceKey=cs("persistence",V.apiKey,j),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,a.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?Ki._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,a.Z)(function*(){if(y.persistence===m)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,E="authUser"){return(0,a.Z)(function*(){if(!y.length)return new Qn(fn(Vt),m,E);const V=(yield Promise.all(y.map(function(){var tt=(0,a.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return tt.apply(this,arguments)}}()))).filter(tt=>tt);let j=V[0]||fn(Vt);const be=cs(E,m.config.apiKey,m.name);let Ge=null;for(const tt of y)try{const Tt=yield tt._get(be);if(Tt){const Sn=Ki._fromJSON(m,Tt);tt!==j&&(Ge=Sn),j=tt;break}}catch(Tt){}const ft=V.filter(tt=>tt._shouldAllowMigration);return j._shouldAllowMigration&&ft.length?(j=ft[0],Ge&&(yield j._set(be,Ge.toJSON())),yield Promise.all(y.map(function(){var tt=(0,a.Z)(function*(Tt){if(Tt!==j)try{yield Tt._remove(be)}catch(Sn){}});return function(Tt){return tt.apply(this,arguments)}}())),new Qn(j,m,E)):new Qn(j,m,E)})()}}function mc(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Xo(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(xa(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(tn(m))return"Blackberry";if(Su(m))return"Webos";if(Yr(m))return"Safari";if((m.includes("chrome/")||Ys(m))&&!m.includes("edge/"))return"Chrome";if(fi(m))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function xa(w=(0,M.z$)()){return/firefox\//i.test(w)}function Yr(w=(0,M.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ys(w=(0,M.z$)()){return/crios\//i.test(w)}function Xo(w=(0,M.z$)()){return/iemobile/i.test(w)}function fi(w=(0,M.z$)()){return/android/i.test(w)}function tn(w=(0,M.z$)()){return/blackberry/i.test(w)}function Su(w=(0,M.z$)()){return/webos/i.test(w)}function ea(w=(0,M.z$)()){return/iphone|ipad|ipod/i.test(w)}function Rr(w=(0,M.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Ta(w=(0,M.z$)()){return ea(w)||fi(w)||Su(w)||tn(w)||/windows phone/i.test(w)||Xo(w)}function ni(w,m=[]){let y;switch(w){case"Browser":y=mc((0,M.z$)());break;case"Worker":y=`${mc((0,M.z$)())}-${w}`;break;default:y=w}const E=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${k.SDK_VERSION}/${E}`}class a0{constructor(m,y,E){this.app=m,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qi(this),this.idTokenSubscription=new Qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(m,y){var E=this;return y&&(this._popupRedirectResolver=fn(y)),this._initializationPromise=this.queue((0,a.Z)(function*(){var V,j;if(!E._deleted&&(E.persistenceManager=yield Qn.create(E,m),!E._deleted)){if(null===(V=E._popupRedirectResolver)||void 0===V?void 0:V._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(be){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(j=E.currentUser)||void 0===j?void 0:j.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,a.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y)}})()}initializeCurrentUser(m){var y=this;return(0,a.Z)(function*(){var E;let V=yield y.assertedPersistence.getCurrentUser();if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const j=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,be=null==V?void 0:V._redirectEventId,Ge=yield y.tryRedirectSignIn(m);(!j||j===be)&&(null==Ge?void 0:Ge.user)&&(V=Ge.user)}return V?V._redirectEventId?(ze(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===V._redirectEventId?y.directlySetCurrentUser(V):y.reloadAndSetCurrentUserOrClear(V)):y.reloadAndSetCurrentUserOrClear(V):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var y=this;return(0,a.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch(V){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,a.Z)(function*(){try{yield yn(m)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,a.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,a.Z)(function*(){const E=m?(0,M.m9)(m):null;return E&&ze(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(m){var y=this;return(0,a.Z)(function*(){if(!y._deleted)return m&&ze(y.tenantId===m.tenantId,y,"tenant-id-mismatch"),y.queue((0,a.Z)(function*(){yield y.directlySetCurrentUser(m),y.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,a.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var y=this;return this.queue((0,a.Z)(function*(){yield y.assertedPersistence.setPersistence(fn(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new M.LL("auth","Firebase",m())}onAuthStateChanged(m,y,E){return this.registerStateListener(this.authStateSubscription,m,y,E)}onIdTokenChanged(m,y,E){return this.registerStateListener(this.idTokenSubscription,m,y,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var E=this;return(0,a.Z)(function*(){const V=yield E.getOrInitRedirectPersistenceManager(y);return null===m?V.removeCurrentUser():V.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,a.Z)(function*(){if(!y.redirectPersistenceManager){const E=m&&fn(m)||y._popupRedirectResolver;ze(E,y,"argument-error"),y.redirectPersistenceManager=yield Qn.create(y,[fn(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,a.Z)(function*(){var E,V;return y._isInitialized&&(yield y.queue((0,a.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===m?y._currentUser:(null===(V=y.redirectUser)||void 0===V?void 0:V._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,a.Z)(function*(){if(m===y.currentUser)return y.queue((0,a.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,E,V){if(this._deleted)return()=>{};const j="function"==typeof y?y:y.next.bind(y),be=this._isInitialized?Promise.resolve():this._initializationPromise;return ze(be,this,"internal-error"),be.then(()=>j(this.currentUser)),"function"==typeof y?m.addObserver(y,E,V):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,a.Z)(function*(){y.currentUser&&y.currentUser!==m&&(y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh()),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=ni(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,a.Z)(function*(){var y;const E={"X-Client-Version":m.clientVersion};m.app.options.appId&&(E["X-Firebase-gmpid"]=m.app.options.appId);const V=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return V&&(E["X-Firebase-Client"]=V),E})()}}function Zn(w){return(0,M.m9)(w)}class Qi{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,M.ne)(y=>this.observer=y)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nu(w,m,y){const E=Zn(w);ze(E._canInitEmulator,E,"emulator-config-failed"),ze(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const V=!!(null==y?void 0:y.disableWarnings),j=ml(m),{host:be,port:Ge}=function(w){const m=ml(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",V=/^(\[[^\]]+\])(:|$)/.exec(E);if(V){const j=V[1];return{host:j,port:us(E.substr(j.length+1))}}{const[j,be]=E.split(":");return{host:j,port:us(be)}}}(m);E.config.emulator={url:`${j}//${be}${null===Ge?"":`:${Ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:be,port:Ge,protocol:j.replace(":",""),options:Object.freeze({disableWarnings:V})}),V||function(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function ml(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function us(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class _l{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return Kn("not implemented")}_getIdTokenResponse(m){return Kn("not implemented")}_linkToIdToken(m,y){return Kn("not implemented")}_getReauthenticationResolver(m){return Kn("not implemented")}}function Ch(w,m){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:resetPassword",_n(w,m))})).apply(this,arguments)}function Ip(w,m){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ru(w,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:update",_n(w,m))})).apply(this,arguments)}function Dh(){return(Dh=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signInWithPassword",_n(w,m))})).apply(this,arguments)}function yl(w,m){return xh.apply(this,arguments)}function xh(){return(xh=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:sendOobCode",_n(w,m))})).apply(this,arguments)}function c0(w,m){return Th.apply(this,arguments)}function Th(){return(Th=(0,a.Z)(function*(w,m){return yl(w,m)})).apply(this,arguments)}function kv(w,m){return _c.apply(this,arguments)}function _c(){return(_c=(0,a.Z)(function*(w,m){return yl(w,m)})).apply(this,arguments)}function u0(w,m){return vl.apply(this,arguments)}function vl(){return(vl=(0,a.Z)(function*(w,m){return yl(w,m)})).apply(this,arguments)}function Ih(w,m){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,a.Z)(function*(w,m){return yl(w,m)})).apply(this,arguments)}function yc(){return(yc=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signInWithEmailLink",_n(w,m))})).apply(this,arguments)}function Ks(){return(Ks=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signInWithEmailLink",_n(w,m))})).apply(this,arguments)}class bl extends _l{constructor(m,y,E,V=null){super("password",E),this._email=m,this._password=y,this._tenantId=V}static _fromEmailAndPassword(m,y){return new bl(m,y,"password")}static _fromEmailAndCode(m,y,E=null){return new bl(m,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,a.Z)(function*(){switch(y.signInMethod){case"password":return function(w,m){return Dh.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,m){return yc.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:an(m,"internal-error")}})()}_linkToIdToken(m,y){var E=this;return(0,a.Z)(function*(){switch(E.signInMethod){case"password":return Ip(m,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(w,m){return Ks.apply(this,arguments)}(m,{idToken:y,email:E._email,oobCode:E._password});default:an(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function ar(w,m){return vc.apply(this,arguments)}function vc(){return(vc=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signInWithIdp",_n(w,m))})).apply(this,arguments)}class Vr extends _l{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new Vr(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):an("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:V}=y,j=ee(y,["providerId","signInMethod"]);if(!E||!V)return null;const be=new Vr(E,V);return be.idToken=j.idToken||void 0,be.accessToken=j.accessToken||void 0,be.secret=j.secret,be.nonce=j.nonce,be.pendingToken=j.pendingToken||null,be}_getIdTokenResponse(m){return ar(m,this.buildRequest())}_linkToIdToken(m,y){const E=this.buildRequest();return E.idToken=y,ar(m,E)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,ar(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,M.xO)(y)}return m}}function Sh(w,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:sendVerificationCode",_n(w,m))})).apply(this,arguments)}function wl(){return(wl=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signInWithPhoneNumber",_n(w,m))})).apply(this,arguments)}function pi(){return(pi=(0,a.Z)(function*(w,m){const y=yield St(w,"POST","/v1/accounts:signInWithPhoneNumber",_n(w,m));if(y.temporaryProof)throw _t(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Pu={USER_NOT_FOUND:"user-not-found"};function Na(){return(Na=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signInWithPhoneNumber",_n(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Pu)})).apply(this,arguments)}class Li extends _l{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new Li({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new Li({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function(w,m){return wl.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function(w,m){return pi.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function(w,m){return Na.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:E,verificationCode:V}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:E,code:V}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:E,phoneNumber:V,temporaryProof:j}=m;return E||y||V||j?new Li({verificationId:y,verificationCode:E,phoneNumber:V,temporaryProof:j}):null}}class qn{constructor(m){var y,E,V,j,be,Ge;const ft=(0,M.zd)((0,M.pd)(m)),tt=null!==(y=ft.apiKey)&&void 0!==y?y:null,Tt=null!==(E=ft.oobCode)&&void 0!==E?E:null,Sn=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=ft.mode)&&void 0!==V?V:null);ze(tt&&Tt&&Sn,"argument-error"),this.apiKey=tt,this.operation=Sn,this.code=Tt,this.continueUrl=null!==(j=ft.continueUrl)&&void 0!==j?j:null,this.languageCode=null!==(be=ft.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(Ge=ft.tenantId)&&void 0!==Ge?Ge:null}static parseLink(m){const y=function(w){const m=(0,M.zd)((0,M.pd)(w)).link,y=m?(0,M.zd)((0,M.pd)(m)).deep_link_id:null,E=(0,M.zd)((0,M.pd)(w)).deep_link_id;return(E?(0,M.zd)((0,M.pd)(E)).link:null)||E||y||m||w}(m);try{return new qn(y)}catch(E){return null}}}let Ms=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return bl._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const V=qn.parseLink(E);return ze(V,"argument-error"),bl._fromEmailAndCode(y,V.code,V.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class hs{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class On extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class ta extends On{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return ze("providerId"in y&&"signInMethod"in y,"argument-error"),Vr._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ze(m.idToken||m.accessToken,"argument-error"),Vr._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return ta.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return ta.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:V,pendingToken:j,nonce:be,providerId:Ge}=m;if(!E&&!V&&!y&&!j||!Ge)return null;try{return new ta(Ge)._credential({idToken:y,accessToken:E,nonce:be,pendingToken:j})}catch(ft){return null}}}let Lu=(()=>{class w extends On{constructor(){super("facebook.com")}static credential(y){return Vr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),wc=(()=>{class w extends On{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Vr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:V}=y;if(!E&&!V)return null;try{return w.credential(E,V)}catch(j){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Fn=(()=>{class w extends On{constructor(){super("github.com")}static credential(y){return Vr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Rs extends _l{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return ar(m,this.buildRequest())}_linkToIdToken(m,y){const E=this.buildRequest();return E.idToken=y,ar(m,E)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,ar(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:V,pendingToken:j}=y;return E&&V&&j&&E===V?new Rs(E,j):null}static _create(m,y){return new Rs(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Br extends hs{constructor(m){ze(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Br.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Br.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=Rs.fromJSON(m);return ze(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:E}=m;if(!y||!E)return null;try{return Rs._create(E,y)}catch(V){return null}}}let Mh=(()=>{class w extends On{constructor(){super("twitter.com")}static credential(y,E){return Vr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:V}=y;if(!E||!V)return null;try{return w.credential(E,V)}catch(j){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Cl(w,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signUp",_n(w,m))})).apply(this,arguments)}class Dr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,E,V=!1){return(0,a.Z)(function*(){const j=yield Ki._fromIdTokenResponse(m,E,V),be=El(E);return new Dr({user:j,providerId:be,_tokenResponse:E,operationType:y})})()}static _forOperation(m,y,E){return(0,a.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const V=El(E);return new Dr({user:m,providerId:V,_tokenResponse:E,operationType:y})})()}}function El(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Cc(w){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,a.Z)(function*(w){var m;const y=Zn(w);if(yield y._initializationPromise,null===(m=y.currentUser)||void 0===m?void 0:m.isAnonymous)return new Dr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield Cl(y,{returnSecureToken:!0}),V=yield Dr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(V.user),V})).apply(this,arguments)}class Ec extends M.ZR{constructor(m,y,E,V){var j;super(y.code,y.message),this.operationType=E,this.user=V,Object.setPrototypeOf(this,Ec.prototype),this.customData={appName:m.name,tenantId:null!==(j=m.tenantId)&&void 0!==j?j:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,y,E,V){return new Ec(m,y,E,V)}}function Dc(w,m,y,E){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(j=>{throw"auth/multi-factor-auth-required"===j.code?Ec._fromErrorAndOperation(w,j,m,E):j})}function Bu(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Uu(w,m){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,a.Z)(function*(w,m){const y=(0,M.m9)(w);yield We(!0,y,m);const{providerUserInfo:E}=yield en(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),V=Bu(E||[]);return y.providerData=y.providerData.filter(j=>V.has(j.providerId)),V.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Dl(w,m){return To.apply(this,arguments)}function To(){return(To=(0,a.Z)(function*(w,m,y=!1){const E=yield Rt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return Dr._forOperation(w,"link",E)})).apply(this,arguments)}function We(w,m,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,a.Z)(function*(w,m,y){yield yn(m);const V=!1===w?"provider-already-linked":"no-such-provider";ze(Bu(m.providerData).has(y)===w,m.auth,V)})).apply(this,arguments)}function Ra(w,m){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(w,m,y=!1){const{auth:E}=w,V="reauthenticate";try{const j=yield Rt(w,Dc(E,V,m,w),y);ze(j.idToken,E,"internal-error");const be=et(j.idToken);ze(be,E,"internal-error");const{sub:Ge}=be;return ze(w.uid===Ge,E,"user-mismatch"),Dr._forOperation(w,V,j)}catch(j){throw"auth/user-not-found"===(null==j?void 0:j.code)&&an(E,"user-mismatch"),j}})).apply(this,arguments)}function xl(w,m){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,a.Z)(function*(w,m,y=!1){const E="signIn",V=yield Dc(w,E,m),j=yield Dr._fromIdTokenResponse(w,E,V);return y||(yield w._updateCurrentUser(j.user)),j})).apply(this,arguments)}function gi(w,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,a.Z)(function*(w,m){return xl(Zn(w),m)})).apply(this,arguments)}function Tl(w,m){return $u.apply(this,arguments)}function $u(){return($u=(0,a.Z)(function*(w,m){const y=(0,M.m9)(w);return yield We(!1,y,m.providerId),Dl(y,m)})).apply(this,arguments)}function Rh(w,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,a.Z)(function*(w,m){return Ra((0,M.m9)(w),m)})).apply(this,arguments)}function xc(w,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,a.Z)(function*(w,m){return St(w,"POST","/v1/accounts:signInWithCustomToken",_n(w,m))})).apply(this,arguments)}function Vi(w,m){return ju.apply(this,arguments)}function ju(){return(ju=(0,a.Z)(function*(w,m){const y=Zn(w),E=yield xc(y,{token:m,returnSecureToken:!0}),V=yield Dr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(V.user),V})).apply(this,arguments)}class Bi{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Ui._fromServerResponse(m,y):an(m,"internal-error")}}class Ui extends Bi{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Ui(y)}}function Il(w,m,y){var E;ze((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ze(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ze(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(ze(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function Gu(w,m,y){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w),V={requestType:"PASSWORD_RESET",email:m};y&&Il(E,V,y),yield kv(E,V)})).apply(this,arguments)}function Ap(w,m,y){return na.apply(this,arguments)}function na(){return(na=(0,a.Z)(function*(w,m,y){yield Ch((0,M.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function Zu(w,m){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,a.Z)(function*(w,m){yield Ru((0,M.m9)(w),{oobCode:m})})).apply(this,arguments)}function So(w,m){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,a.Z)(function*(w,m){const y=(0,M.m9)(w),E=yield Ch(y,{oobCode:m}),V=E.requestType;switch(ze(V,y,"internal-error"),V){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ze(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ze(E.mfaInfo,y,"internal-error");default:ze(E.email,y,"internal-error")}let j=null;return E.mfaInfo&&(j=Bi._fromServerResponse(Zn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:j},operation:V}})).apply(this,arguments)}function qu(w,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,a.Z)(function*(w,m){const{data:y}=yield So((0,M.m9)(w),m);return y.email})).apply(this,arguments)}function kh(w,m,y){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,a.Z)(function*(w,m,y){const E=Zn(w),V=yield Cl(E,{returnSecureToken:!0,email:m,password:y}),j=yield Dr._fromIdTokenResponse(E,"signIn",V);return yield E._updateCurrentUser(j.user),j})).apply(this,arguments)}function zu(w,m,y){return gi((0,M.m9)(w),Ms.credential(m,y))}function Yu(w,m,y){return ra.apply(this,arguments)}function ra(){return(ra=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w),V={requestType:"EMAIL_SIGNIN",email:m};ze(y.handleCodeInApp,E,"argument-error"),y&&Il(E,V,y),yield u0(E,V)})).apply(this,arguments)}function Ku(w,m){const y=qn.parseLink(m);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function Np(w,m,y){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w),V=Ms.credentialWithLink(m,y||nr());return ze(V._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),gi(E,V)})).apply(this,arguments)}function Fa(w,m){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:createAuthUri",_n(w,m))})).apply(this,arguments)}function Pv(w,m){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,a.Z)(function*(w,m){const E={identifier:m,continueUri:dr()?nr():"http://localhost"},{signinMethods:V}=yield Fa((0,M.m9)(w),E);return V||[]})).apply(this,arguments)}function Ic(w,m){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,a.Z)(function*(w,m){const y=(0,M.m9)(w),V={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Il(y.auth,V,m);const{email:j}=yield c0(y.auth,V);j!==w.email&&(yield w.reload())})).apply(this,arguments)}function Rp(w,m,y){return Al.apply(this,arguments)}function Al(){return(Al=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w),j={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&Il(E.auth,j,y);const{email:be}=yield Ih(E.auth,j);be!==w.email&&(yield w.reload())})).apply(this,arguments)}function Sc(w,m){return Js.apply(this,arguments)}function Js(){return(Js=(0,a.Z)(function*(w,m){return At(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function xr(w,m){return La.apply(this,arguments)}function La(){return(La=(0,a.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const E=(0,M.m9)(w),j={idToken:yield E.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},be=yield Rt(E,Sc(E.auth,j));E.displayName=be.displayName||null,E.photoURL=be.photoUrl||null;const Ge=E.providerData.find(({providerId:ft})=>"password"===ft);Ge&&(Ge.displayName=E.displayName,Ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(be)})).apply(this,arguments)}function Ph(w,m){return Xs((0,M.m9)(w),m,null)}function kp(w,m){return Xs((0,M.m9)(w),null,m)}function Xs(w,m,y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,a.Z)(function*(w,m,y){const{auth:E}=w,j={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(j.email=m),y&&(j.password=y);const be=yield Rt(w,Ip(E,j));yield w._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class No{constructor(m,y,E={}){this.isNewUser=m,this.providerId=y,this.profile=E}}class Va extends No{constructor(m,y,E,V){super(m,y,E),this.username=V}}class Ju extends No{constructor(m,y){super(m,"facebook.com",y)}}class Pp extends Va{constructor(m,y){super(m,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class f0 extends No{constructor(m,y){super(m,"google.com",y)}}class Ji extends Va{constructor(m,y,E){super(m,"twitter.com",y,E)}}function Ov(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var m,y;if(!w)return null;const{providerId:E}=w,V=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},j=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const be=null===(y=null===(m=et(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(be)return new No(j,"anonymous"!==be&&"custom"!==be?be:null)}if(!E)return null;switch(E){case"facebook.com":return new Ju(j,V);case"github.com":return new Pp(j,V);case"google.com":return new f0(j,V);case"twitter.com":return new Ji(j,V,w.screenName||null);case"custom":case"anonymous":return new No(j,null);default:return new No(j,E,V)}}(y)}class Xi{constructor(m,y){this.type=m,this.credential=y}static _fromIdtoken(m){return new Xi("enroll",m)}static _fromMfaPendingCredential(m){return new Xi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,E;if(null==m?void 0:m.multiFactorSession){if(null===(y=m.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return Xi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(E=m.multiFactorSession)||void 0===E?void 0:E.idToken)return Xi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ua{constructor(m,y,E){this.session=m,this.hints=y,this.signInResolver=E}static _fromError(m,y){const E=Zn(m),V=y.customData._serverResponse,j=(V.mfaInfo||[]).map(Ge=>Bi._fromServerResponse(E,Ge));ze(V.mfaPendingCredential,E,"internal-error");const be=Xi._fromMfaPendingCredential(V.mfaPendingCredential);return new Ua(be,j,function(){var Ge=(0,a.Z)(function*(ft){const tt=yield ft._process(E,be);delete V.mfaInfo,delete V.mfaPendingCredential;const Tt=Object.assign(Object.assign({},V),{idToken:tt.idToken,refreshToken:tt.refreshToken});switch(y.operationType){case"signIn":const Sn=yield Dr._fromIdTokenResponse(E,y.operationType,Tt);return yield E._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return ze(y.user,E,"internal-error"),Dr._forOperation(y.user,y.operationType,Tt);default:an(E,"internal-error")}});return function(ft){return Ge.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,a.Z)(function*(){return y.signInResolver(m)})()}}function Nc(w,m){var y;const E=(0,M.m9)(w),V=m;return ze(m.customData.operationType,E,"argument-error"),ze(null===(y=V.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Ua._fromError(E,V)}function Fv(w,m){return At(w,"POST","/v2/accounts/mfaEnrollment:start",_n(w,m))}class Mc{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>Bi._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new Mc(m)}getSession(){var m=this;return(0,a.Z)(function*(){return Xi._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,y){var E=this;return(0,a.Z)(function*(){const V=m,j=yield E.getSession(),be=yield Rt(E.user,V._process(E.user.auth,j,y));return yield E.user._updateTokensIfNecessary(be),E.user.reload()})()}unenroll(m){var y=this;return(0,a.Z)(function*(){const E="string"==typeof m?m:m.uid,V=yield y.user.getIdToken(),j=yield Rt(y.user,function(w,m){return At(w,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(w,m))}(y.user.auth,{idToken:V,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:be})=>be!==E),yield y.user._updateTokensIfNecessary(j);try{yield y.user.reload()}catch(be){if("auth/user-token-expired"!==be.code)throw be}})()}}const Lh=new WeakMap;function ia(w){const m=(0,M.m9)(w);return Lh.has(m)||Lh.set(m,Mc._fromUser(m)),Lh.get(m)}const Ml="__sak";class un{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Ml,"1"),this.storage.removeItem(Ml),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const sa=(()=>{class w extends un{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,M.z$)();return Yr(w)||ea(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Ta(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const V=this.storage.getItem(E),j=this.localCache[E];V!==j&&y(E,j,V)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Ge,ft,tt)=>{this.notifyListeners(Ge,tt)});const V=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ge=this.storage.getItem(V);if(y.newValue!==Ge)null!==y.newValue?this.storage.setItem(V,y.newValue):this.storage.removeItem(V);else if(this.localCache[V]===y.newValue&&!E)return}const j=()=>{const Ge=this.storage.getItem(V);!E&&this.localCache[V]===Ge||this.notifyListeners(V,Ge)},be=this.storage.getItem(V);(0,M.w1)()&&10===document.documentMode&&be!==y.newValue&&y.newValue!==y.oldValue?setTimeout(j,10):j()}notifyListeners(y,E){this.localCache[y]=E;const V=this.listeners[y];if(V)for(const j of Array.from(V))j(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,V)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:V}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var V=()=>super._set,j=this;return(0,a.Z)(function*(){yield V().call(j,y,E),j.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,V=this;return(0,a.Z)(function*(){const j=yield E().call(V,y);return V.localCache[y]=JSON.stringify(j),j})()}_remove(y){var E=()=>super._remove,V=this;return(0,a.Z)(function*(){yield E().call(V,y),delete V.localCache[y]})()}}return w.type="LOCAL",w})(),fr=(()=>{class w extends un{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Lp=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(j=>j.isListeningto(y));if(E)return E;const V=new w(y);return this.receivers.push(V),V}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,a.Z)(function*(){const V=y,{eventId:j,eventType:be,data:Ge}=V.data,ft=E.handlersMap[be];if(!(null==ft?void 0:ft.size))return;V.ports[0].postMessage({status:"ack",eventId:j,eventType:be});const tt=Array.from(ft).map(function(){var Sn=(0,a.Z)(function*(Wn){return Wn(V.origin,Ge)});return function(Wn){return Sn.apply(this,arguments)}}()),Tt=yield function(w){return Promise.all(w.map(function(){var m=(0,a.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return m.apply(this,arguments)}}()))}(tt);V.ports[0].postMessage({status:"done",eventId:j,eventType:be,response:Tt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Mo(w="",m=10){let y="";for(let E=0;E<m;E++)y+=Math.floor(10*Math.random());return w+y}class zn{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,E=50){var V=this;return(0,a.Z)(function*(){const j="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!j)throw new Error("connection_unavailable");let be,Ge;return new Promise((ft,tt)=>{const Tt=Mo("",20);j.port1.start();const Sn=setTimeout(()=>{tt(new Error("unsupported_event"))},E);Ge={messageChannel:j,onMessage(Wn){const wn=Wn;if(wn.data.eventId===Tt)switch(wn.data.status){case"ack":clearTimeout(Sn),be=setTimeout(()=>{tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),ft(wn.data.response);break;default:clearTimeout(Sn),clearTimeout(be),tt(new Error("invalid_response"))}}},V.handlers.add(Ge),j.port1.addEventListener("message",Ge.onMessage),V.target.postMessage({eventType:m,eventId:Tt,data:y},[j.port2])}).finally(()=>{Ge&&V.removeMessageHandler(Ge)})})()}}function lr(){return window}function oa(){return void 0!==lr().WorkerGlobalScope&&"function"==typeof lr().importScripts}function Ha(){return(Ha=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Os="firebaseLocalStorageDb",ko="firebaseLocalStorage",eo="fbase_key";class mi{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Hi(w,m){return w.transaction([ko],m?"readwrite":"readonly").objectStore(ko)}function wt(){const w=indexedDB.open(Os,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(ko,{keyPath:eo})}catch(V){y(V)}}),w.addEventListener("success",(0,a.Z)(function*(){const E=w.result;E.objectStoreNames.contains(ko)?m(E):(E.close(),yield function(){const w=indexedDB.deleteDatabase(Os);return new mi(w).toPromise()}(),m(yield wt()))}))})}function es(w,m,y){return pr.apply(this,arguments)}function pr(){return(pr=(0,a.Z)(function*(w,m,y){const E=Hi(w,!0).put({[eo]:m,value:y});return new mi(E).toPromise()})).apply(this,arguments)}function er(){return(er=(0,a.Z)(function*(w,m){const y=Hi(w,!1).get(m),E=yield new mi(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Bh(w,m){const y=Hi(w,!0).delete(m);return new mi(y).toPromise()}const Bp=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,a.Z)(function*(){return y.db||(y.db=yield wt()),y.db})()}_withRetries(y){var E=this;return(0,a.Z)(function*(){let V=0;for(;;)try{const j=yield E._openDb();return yield y(j)}catch(j){if(V++>3)throw j;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,a.Z)(function*(){return oa()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,a.Z)(function*(){y.receiver=Lp._getInstance(oa()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,a.Z)(function*(V,j){return{keyProcessed:(yield y._poll()).includes(j.key)}});return function(V,j){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,a.Z)(function*(V,j){return["keyChanged"]});return function(V,j){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,a.Z)(function*(){var E,V;if(y.activeServiceWorker=yield function(){return Ha.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new zn(y.activeServiceWorker);const j=yield y.sender._send("ping",{},800);!j||(null===(E=j[0])||void 0===E?void 0:E.fulfilled)&&(null===(V=j[0])||void 0===V?void 0:V.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,a.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(V){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const y=yield wt();return yield es(y,Ml,"1"),yield Bh(y,Ml),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,a.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var V=this;return(0,a.Z)(function*(){return V._withPendingWrite((0,a.Z)(function*(){return yield V._withRetries(j=>es(j,y,E)),V.localCache[y]=E,V.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,a.Z)(function*(){const V=yield E._withRetries(j=>function(w,m){return er.apply(this,arguments)}(j,y));return E.localCache[y]=V,V})()}_remove(y){var E=this;return(0,a.Z)(function*(){return E._withPendingWrite((0,a.Z)(function*(){return yield E._withRetries(V=>Bh(V,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,a.Z)(function*(){const E=yield y._withRetries(be=>{const Ge=Hi(be,!1).getAll();return new mi(Ge).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const V=[],j=new Set;for(const{fbase_key:be,value:Ge}of E)j.add(be),JSON.stringify(y.localCache[be])!==JSON.stringify(Ge)&&(y.notifyListeners(be,Ge),V.push(be));for(const be of Object.keys(y.localCache))y.localCache[be]&&!j.has(be)&&(y.notifyListeners(be,null),V.push(be));return V})()}notifyListeners(y,E){this.localCache[y]=E;const V=this.listeners[y];if(V)for(const j of Array.from(V))j(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function aa(w,m){return At(w,"POST","/v2/accounts/mfaSignIn:start",_n(w,m))}function Pc(){return(Pc=(0,a.Z)(function*(w){return(yield At(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function rd(w){return new Promise((m,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=m,E.onerror=V=>{const j=In("internal-error");j.customData=V,y(j)},E.type="text/javascript",E.charset="UTF-8",function(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(E)})}function Po(w){return`__${w}${Math.floor(1e6*Math.random())}`}const to=1e12;class Ur{constructor(m){this.auth=m,this.counter=to,this._widgets=new Map}render(m,y){const E=this.counter;return this._widgets.set(E,new Oc(m,this.auth.name,y||{})),this.counter++,E}reset(m){var y;const E=m||to;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(m){var y;return(null===(y=this._widgets.get(m||to))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,a.Z)(function*(){var E;return null===(E=y._widgets.get(m||to))||void 0===E||E.execute(),""})()}}class Oc{constructor(m,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const V="string"==typeof m?document.getElementById(m):m;ze(V,"argument-error",{appName:y}),this.container=V,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}();const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ei=Po("rcb"),Fs=new En(3e4,6e4);class Fo{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!lr().grecaptcha}load(m,y=""){return ze((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(lr().grecaptcha):new Promise((E,V)=>{const j=lr().setTimeout(()=>{V(In(m,"network-request-failed"))},Fs.get());lr()[Ei]=()=>{lr().clearTimeout(j),delete lr()[Ei];const Ge=lr().grecaptcha;if(!Ge)return void V(In(m,"internal-error"));const ft=Ge.render;Ge.render=(tt,Tt)=>{const Sn=ft(tt,Tt);return this.counter++,Sn},this.hostLanguage=y,E(Ge)},rd(`https://www.google.com/recaptcha/api.js??${(0,M.xO)({onload:Ei,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(j),V(In(m,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!lr().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hh{load(m){return(0,a.Z)(function*(){return new Ur(m)})()}clearedOneInstance(){}}const no="recaptcha",Up={theme:"light",type:"image"};class ja{constructor(m,y=Object.assign({},Up),E){this.parameters=y,this.type=no,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zn(E),this.isInvisible="invisible"===this.parameters.size,ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const V="string"==typeof m?document.getElementById(m):m;ze(V,this.auth,"argument-error"),this.container=V,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hh:new Fo,this.validateStartingState()}verify(){var m=this;return(0,a.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(y)||new Promise(j=>{const be=Ge=>{!Ge||(m.tokenChangeListeners.delete(be),j(Ge))};m.tokenChangeListeners.add(be),m.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ze(!this.parameters.sitekey,this.auth,"argument-error"),ze(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof m)m(y);else if("string"==typeof m){const E=lr()[m];"function"==typeof E&&E(y)}}}assertNotDestroyed(){ze(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,a.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,a.Z)(function*(){ze(dr()&&!oa(),m.auth,"internal-error"),yield function(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function(w){return Pc.apply(this,arguments)}(m.auth);ze(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return ze(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class id{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=Li._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function Ir(w,m,y){return br.apply(this,arguments)}function br(){return(br=(0,a.Z)(function*(w,m,y){const E=Zn(w),V=yield W(E,m,(0,M.m9)(y));return new id(V,j=>gi(E,j))})).apply(this,arguments)}function Ga(w,m,y){return sd.apply(this,arguments)}function sd(){return(sd=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w);yield We(!1,E,"phone");const V=yield W(E.auth,m,(0,M.m9)(y));return new id(V,j=>Tl(E,j))})).apply(this,arguments)}function T(w,m,y){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w),V=yield W(E.auth,m,(0,M.m9)(y));return new id(V,j=>Rh(E,j))})).apply(this,arguments)}function W(w,m,y){return oe.apply(this,arguments)}function oe(){return(oe=(0,a.Z)(function*(w,m,y){var E;const V=yield y.verify();try{let j;if(ze("string"==typeof V,w,"argument-error"),ze(y.type===no,w,"argument-error"),j="string"==typeof m?{phoneNumber:m}:m,"session"in j){const be=j.session;if("phoneNumber"in j)return ze("enroll"===be.type,w,"internal-error"),(yield Fv(w,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:j.phoneNumber,recaptchaToken:V}})).phoneSessionInfo.sessionInfo;{ze("signin"===be.type,w,"internal-error");const Ge=(null===(E=j.multiFactorHint)||void 0===E?void 0:E.uid)||j.multiFactorUid;return ze(Ge,w,"missing-multi-factor-info"),(yield aa(w,{mfaPendingCredential:be.credential,mfaEnrollmentId:Ge,phoneSignInInfo:{recaptchaToken:V}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield Sh(w,{phoneNumber:j.phoneNumber,recaptchaToken:V});return be}}finally{y._reset()}})).apply(this,arguments)}function xe(w,m){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,a.Z)(function*(w,m){yield Dl((0,M.m9)(w),m)})).apply(this,arguments)}let Ke=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=Zn(y)}verifyPhoneNumber(y,E){return W(this.auth,y,(0,M.m9)(E))}static credential(y,E){return Li._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:V}=y;return E&&V?Li._fromTokenResponse(E,V):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ut(w,m){return m?fn(m):(ze(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Pt extends _l{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return ar(m,this._buildIdpRequest())}_linkToIdToken(m,y){return ar(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return ar(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function Ht(w){return xl(w.auth,new Pt(w),w.bypassAuthState)}function pn(w){const{auth:m,user:y}=w;return ze(y,m,"internal-error"),Ra(y,new Pt(w),w.bypassAuthState)}function $t(w){return kr.apply(this,arguments)}function kr(){return(kr=(0,a.Z)(function*(w){const{auth:m,user:y}=w;return ze(y,m,"internal-error"),Dl(y,new Pt(w),w.bypassAuthState)})).apply(this,arguments)}class Pr{constructor(m,y,E,V,j=!1){this.auth=m,this.resolver=E,this.user=V,this.bypassAuthState=j,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,a.Z)(function*(E,V){m.pendingPromise={resolve:E,reject:V};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(j){m.reject(j)}});return function(E,V){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,a.Z)(function*(){const{urlResponse:E,sessionId:V,postBody:j,tenantId:be,error:Ge,type:ft}=m;if(Ge)return void y.reject(Ge);const tt={auth:y.auth,requestUri:E,sessionId:V,tenantId:be||void 0,postBody:j||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(ft)(tt))}catch(Tt){y.reject(Tt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ht;case"linkViaPopup":case"linkViaRedirect":return $t;case"reauthViaPopup":case"reauthViaRedirect":return pn;default:an(this.auth,"internal-error")}}resolve(m){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){$n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kl=new En(2e3,1e4);function od(w,m,y){return ro.apply(this,arguments)}function ro(){return(ro=(0,a.Z)(function*(w,m,y){const E=Zn(w);Mn(w,m,hs);const V=ut(E,y);return new $p(E,"signInViaPopup",m,V).executeNotNull()})).apply(this,arguments)}function Za(w,m,y){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w);Mn(E.auth,m,hs);const V=ut(E.auth,y);return new $p(E.auth,"reauthViaPopup",m,V,E).executeNotNull()})).apply(this,arguments)}function la(w,m,y){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w);Mn(E.auth,m,hs);const V=ut(E.auth,y);return new $p(E.auth,"linkViaPopup",m,V,E).executeNotNull()})).apply(this,arguments)}let $p=(()=>{class w extends Pr{constructor(y,E,V,j,be){super(y,E,j,be),this.provider=V,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,a.Z)(function*(){const E=yield y.execute();return ze(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,a.Z)(function*(){$n(1===y.filter.length,"Popup operations only handle one event");const E=Mo();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(V=>{y.reject(V)}),y.resolver._isIframeWebStorageSupported(y.auth,V=>{V||y.reject(In(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,V;this.pollId=(null===(V=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===V?void 0:V.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,kl.get())};y()}}return w.currentPopupAction=null,w})();const Fc=new Map;class g0 extends Pr{constructor(m,y,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,a.Z)(function*(){let E=Fc.get(y.auth._key());if(!E){try{const j=(yield function(w,m){return Ol.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;E=()=>Promise.resolve(j)}catch(V){E=()=>Promise.reject(V)}Fc.set(y.auth._key(),E)}return y.bypassAuthState||Fc.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,E=this;return(0,a.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(E,m);if("unknown"!==m.type){if(m.eventId){const V=yield E.auth._redirectUserForId(m.eventId);if(V)return E.user=V,y().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Ol(){return(Ol=(0,a.Z)(function*(w,m){const y=qa(m),E=m0(w);if(!(yield E._isAvailable()))return!1;const V="true"===(yield E._get(y));return yield E._remove(y),V})).apply(this,arguments)}function jp(w,m){return ps.apply(this,arguments)}function ps(){return(ps=(0,a.Z)(function*(w,m){return m0(w)._set(qa(m),"true")})).apply(this,arguments)}function Gp(){Fc.clear()}function m0(w){return fn(w._redirectPersistence)}function qa(w){return cs("pendingRedirect",w.config.apiKey,w.name)}function Wa(w,m,y){return function(w,m,y){return Qr.apply(this,arguments)}(w,m,y)}function Qr(){return(Qr=(0,a.Z)(function*(w,m,y){const E=Zn(w);Mn(w,m,hs);const V=ut(E,y);return yield jp(V,E),V._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function Bv(w,m,y){return function(w,m,y){return Lc.apply(this,arguments)}(w,m,y)}function Lc(){return(Lc=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w);Mn(E.auth,m,hs);const V=ut(E.auth,y);yield jp(V,E.auth);const j=yield Fl(E);return V._openRedirect(E.auth,m,"reauthViaRedirect",j)})).apply(this,arguments)}function ad(w,m,y){return function(w,m,y){return $h.apply(this,arguments)}(w,m,y)}function $h(){return($h=(0,a.Z)(function*(w,m,y){const E=(0,M.m9)(w);Mn(E.auth,m,hs);const V=ut(E.auth,y);yield We(!1,E,m.providerId),yield jp(V,E.auth);const j=yield Fl(E);return V._openRedirect(E.auth,m,"linkViaRedirect",j)})).apply(this,arguments)}function Uv(w,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,a.Z)(function*(w,m){return yield Zn(w)._initializationPromise,za(w,m,!1)})).apply(this,arguments)}function za(w,m){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,a.Z)(function*(w,m,y=!1){const E=Zn(w),V=ut(E,m),be=yield new g0(E,V,y).execute();return be&&!y&&(delete be.user._redirectEventId,yield E._persistUserIfCurrent(be.user),yield E._setRedirectUser(null,m)),be})).apply(this,arguments)}function Fl(w){return dn.apply(this,arguments)}function dn(){return(dn=(0,a.Z)(function*(w){const m=Mo(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Hv{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(y=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v0(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var E;if(m.error&&!v0(m)){const V=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(In(this.auth,V))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const E=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ya(m))}saveEventToCache(m){this.cachedEventUids.add(Ya(m)),this.lastProcessedEventTime=Date.now()}}function Ya(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function v0({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Bc(w){return cd.apply(this,arguments)}function cd(){return(cd=(0,a.Z)(function*(w,m={}){return At(w,"GET","/v1/projects",m)})).apply(this,arguments)}const ua=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ud=/^https?/;function dd(){return(dd=(0,a.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Bc(w);for(const y of m)try{if(jh(y))return}catch(E){}an(w,"unauthorized-domain")})).apply(this,arguments)}function jh(w){const m=nr(),{protocol:y,hostname:E}=new URL(m);if(w.startsWith("chrome-extension://")){const be=new URL(w);return""===be.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&be.hostname===E}if(!ud.test(y))return!1;if(ua.test(w))return E===w;const V=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+V+"|"+V+")$","i").test(E)}const hd=new En(3e4,6e4);function Uc(){const w=lr().___jsl;if(null==w?void 0:w.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Hc=null;function Ll(w){return Hc=Hc||function(w){return new Promise((m,y)=>{var E,V,j;function be(){Uc(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Uc(),y(In(w,"network-request-failed"))},timeout:hd.get()})}if(null===(V=null===(E=lr().gapi)||void 0===E?void 0:E.iframes)||void 0===V?void 0:V.Iframe)m(gapi.iframes.getContext());else{if(!(null===(j=lr().gapi)||void 0===j?void 0:j.load)){const Ge=Po("iframefcb");return lr()[Ge]=()=>{gapi.load?be():y(In(w,"network-request-failed"))},rd(`https://apis.google.com/js/api.js?onload=${Ge}`).catch(ft=>y(ft))}be()}}).catch(m=>{throw Hc=null,m})}(w),Hc}const $v=new En(5e3,15e3),Gv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function da(w){const m=w.config;ze(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?it(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:m.apiKey,appName:w.name,v:k.SDK_VERSION},V=Zv.get(w.config.apiHost);V&&(E.eid=V);const j=w._getFrameworks();return j.length&&(E.fw=j.join(",")),`${y}?${(0,M.xO)(E).slice(1)}`}function Zh(){return(Zh=(0,a.Z)(function*(w){const m=yield Ll(w),y=lr().gapi;return ze(y,w,"internal-error"),m.open({where:document.body,url:da(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gv,dontclear:!0},E=>new Promise(function(){var V=(0,a.Z)(function*(j,be){yield E.restyle({setHideOnLeave:!1});const Ge=In(w,"network-request-failed"),ft=lr().setTimeout(()=>{be(Ge)},$v.get());function tt(){lr().clearTimeout(ft),j(E)}E.ping(tt).then(tt,()=>{be(Ge)})});return function(j,be){return V.apply(this,arguments)}}()))})).apply(this,arguments)}const w0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qh{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function D0(w,m,y,E,V,j){ze(w.config.authDomain,w,"auth-domain-config-required"),ze(w.config.apiKey,w,"invalid-api-key");const be={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:k.SDK_VERSION,eventId:V};if(m instanceof hs){m.setDefaultLanguage(w.languageCode),be.providerId=m.providerId||"",(0,M.xb)(m.getCustomParameters())||(be.customParameters=JSON.stringify(m.getCustomParameters()));for(const[ft,tt]of Object.entries(j||{}))be[ft]=tt}if(m instanceof On){const ft=m.getScopes().filter(tt=>""!==tt);ft.length>0&&(be.scopes=ft.join(","))}w.tenantId&&(be.tid=w.tenantId);const Ge=be;for(const ft of Object.keys(Ge))void 0===Ge[ft]&&delete Ge[ft];return`${function({config:w}){return w.emulator?it(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,M.xO)(Ge).slice(1)}`}const Ka="webStorageSupport",Bs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fr,this._completeRedirectFn=za}_openPopup(m,y,E,V){var j=this;return(0,a.Z)(function*(){var be;$n(null===(be=j.eventManagers[m._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const Ge=D0(m,y,E,nr(),V);return function(w,m,y,E=500,V=600){const j=Math.max((window.screen.availHeight-V)/2,0).toString(),be=Math.max((window.screen.availWidth-E)/2,0).toString();let Ge="";const ft=Object.assign(Object.assign({},w0),{width:E.toString(),height:V.toString(),top:j,left:be}),tt=(0,M.z$)().toLowerCase();y&&(Ge=Ys(tt)?"_blank":y),xa(tt)&&(m=m||"http://localhost",ft.scrollbars="yes");const Tt=Object.entries(ft).reduce((Wn,[wn,fa])=>`${Wn}${wn}=${fa},`,"");if(function(w=(0,M.z$)()){var m;return ea(w)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(tt)&&"_self"!==Ge)return function(w,m){const y=document.createElement("a");y.href=w,y.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(m||"",Ge),new qh(null);const Sn=window.open(m||"",Ge,Tt);ze(Sn,w,"popup-blocked");try{Sn.focus()}catch(Wn){}return new qh(Sn)}(m,Ge,Mo())})()}_openRedirect(m,y,E,V){var j=this;return(0,a.Z)(function*(){return yield j._originValidation(m),w=D0(m,y,E,nr(),V),lr().location.href=w,new Promise(()=>{});var w})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:V,promise:j}=this.eventManagers[y];return V?Promise.resolve(V):($n(j,"If manager is not set, promise should be"),j)}const E=this.initAndGetManager(m);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(m){var y=this;return(0,a.Z)(function*(){const E=yield function(w){return Zh.apply(this,arguments)}(m),V=new Hv(m);return E.register("authEvent",j=>(ze(null==j?void 0:j.authEvent,m,"invalid-auth-event"),{status:V.onEvent(j.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:V},y.iframes[m._key()]=E,V})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(Ka,{type:Ka},V=>{var j;const be=null===(j=null==V?void 0:V[0])||void 0===j?void 0:j[Ka];void 0!==be&&y(!!be),an(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return dd.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ta()||Yr()||ea()}};class jc extends class{constructor(m){this.factorId=m}_process(m,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,E);case"signin":return this._finalizeSignIn(m,y.credential);default:return Kn("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new jc(m)}_finalizeEnroll(m,y,E){return function(w,m){return At(w,"POST","/v2/accounts/mfaEnrollment:finalize",_n(w,m))}(m,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function(w,m){return At(w,"POST","/v2/accounts/mfaSignIn:finalize",_n(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let x0=(()=>{class w{constructor(){}static assertion(y){return jc._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w,Gc="@firebase/auth",T0="0.19.12";class iE{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,a.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(E=>{var V;m((null===(V=E)||void 0===V?void 0:V.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}w="Browser",(0,k._registerComponent)(new Ie.wA("auth",(m,{options:y})=>{const E=m.getProvider("app").getImmediate(),V=m.getProvider("heartbeat"),{apiKey:j,authDomain:be}=E.options;return((Ge,ft)=>{ze(j&&!j.includes(":"),"invalid-api-key",{appName:Ge.name}),ze(!(null==be?void 0:be.includes(":")),"argument-error",{appName:Ge.name});const tt={apiKey:j,authDomain:be,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ni(w)},Tt=new a0(Ge,ft,tt);return function(w,m){const y=(null==m?void 0:m.persistence)||[],E=(Array.isArray(y)?y:[y]).map(fn);(null==m?void 0:m.errorMap)&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(E,null==m?void 0:m.popupRedirectResolver)}(Tt,y),Tt})(E,V)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,E)=>{m.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new Ie.wA("auth-internal",m=>{const y=Zn(m.getProvider("auth").getImmediate());return new iE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Gc,T0,void 0),(0,k.registerVersion)(Gc,T0,"esm2017")},3854:(Fe,me,O)=>{"use strict";O.d(me,{BH:()=>z,LL:()=>Je,ZR:()=>Ie,gQ:()=>Kn,zI:()=>Ee,hu:()=>k,g5:()=>K,US:()=>ee,tV:()=>R,h$:()=>L,L:()=>U,$s:()=>At,r3:()=>Ct,Sg:()=>Y,ne:()=>$n,p$:()=>N,vZ:()=>In,ZB:()=>S,Lj:()=>Lt,gK:()=>dr,pd:()=>ze,m9:()=>cn,z$:()=>ne,GJ:()=>yt,jU:()=>G,ru:()=>ue,d:()=>we,xb:()=>qt,w1:()=>_e,hl:()=>Ce,uI:()=>ae,UG:()=>H,Yr:()=>Re,b$:()=>he,G6:()=>Se,Mn:()=>Ue,w9:()=>Mt,cI:()=>Le,UI:()=>an,X3:()=>Nt,xO:()=>Mn,zd:()=>Yn,DV:()=>Xt,ug:()=>it,dS:()=>En,Pz:()=>Ve,Dv:()=>nr,Wj:()=>xn,lb:()=>Yi,eu:()=>de});var a=O(8239);const k=function(pe,le){if(!pe)throw K(le)},K=function(pe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+pe)},te=function(pe){const le=[];let ye=0;for(let Be=0;Be<pe.length;Be++){let X=pe.charCodeAt(Be);X<128?le[ye++]=X:X<2048?(le[ye++]=X>>6|192,le[ye++]=63&X|128):55296==(64512&X)&&Be+1<pe.length&&56320==(64512&pe.charCodeAt(Be+1))?(X=65536+((1023&X)<<10)+(1023&pe.charCodeAt(++Be)),le[ye++]=X>>18|240,le[ye++]=X>>12&63|128,le[ye++]=X>>6&63|128,le[ye++]=63&X|128):(le[ye++]=X>>12|224,le[ye++]=X>>6&63|128,le[ye++]=63&X|128)}return le},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,le){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ye=le?this.byteToCharMapWebSafe_:this.byteToCharMap_,Be=[];for(let X=0;X<pe.length;X+=3){const ie=pe[X],se=X+1<pe.length,Ae=se?pe[X+1]:0,et=X+2<pe.length,Et=et?pe[X+2]:0;let rn=(15&Ae)<<2|Et>>6,jn=63&Et;et||(jn=64,se||(rn=64)),Be.push(ye[ie>>2],ye[(3&ie)<<4|Ae>>4],ye[rn],ye[jn])}return Be.join("")},encodeString(pe,le){return this.HAS_NATIVE_SUPPORT&&!le?btoa(pe):this.encodeByteArray(te(pe),le)},decodeString(pe,le){return this.HAS_NATIVE_SUPPORT&&!le?atob(pe):function(pe){const le=[];let ye=0,Be=0;for(;ye<pe.length;){const X=pe[ye++];if(X<128)le[Be++]=String.fromCharCode(X);else if(X>191&&X<224){const ie=pe[ye++];le[Be++]=String.fromCharCode((31&X)<<6|63&ie)}else if(X>239&&X<365){const et=((7&X)<<18|(63&pe[ye++])<<12|(63&pe[ye++])<<6|63&pe[ye++])-65536;le[Be++]=String.fromCharCode(55296+(et>>10)),le[Be++]=String.fromCharCode(56320+(1023&et))}else{const ie=pe[ye++],se=pe[ye++];le[Be++]=String.fromCharCode((15&X)<<12|(63&ie)<<6|63&se)}}return le.join("")}(this.decodeStringToByteArray(pe,le))},decodeStringToByteArray(pe,le){this.init_();const ye=le?this.charToByteMapWebSafe_:this.charToByteMap_,Be=[];for(let X=0;X<pe.length;){const ie=ye[pe.charAt(X++)],Ae=X<pe.length?ye[pe.charAt(X)]:0;++X;const Et=X<pe.length?ye[pe.charAt(X)]:64;++X;const at=X<pe.length?ye[pe.charAt(X)]:64;if(++X,null==ie||null==Ae||null==Et||null==at)throw Error();Be.push(ie<<2|Ae>>4),64!==Et&&(Be.push(Ae<<4&240|Et>>2),64!==at&&Be.push(Et<<6&192|at))}return Be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}},L=function(pe){const le=te(pe);return ee.encodeByteArray(le,!0)},U=function(pe){return L(pe).replace(/\./g,"")},R=function(pe){try{return ee.decodeString(pe,!0)}catch(le){console.error("base64Decode failed: ",le)}return null};function N(pe){return S(void 0,pe)}function S(pe,le){if(!(le instanceof Object))return le;switch(le.constructor){case Date:return new Date(le.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return le}for(const ye in le)!le.hasOwnProperty(ye)||!B(ye)||(pe[ye]=S(pe[ye],le[ye]));return pe}function B(pe){return"__proto__"!==pe}class z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((le,ye)=>{this.resolve=le,this.reject=ye})}wrapCallback(le){return(ye,Be)=>{ye?this.reject(ye):this.resolve(Be),"function"==typeof le&&(this.promise.catch(()=>{}),1===le.length?le(ye):le(ye,Be))}}}function Y(pe,le){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Be=le||"demo-project",X=pe.iat||0,ie=pe.sub||pe.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${Be}`,aud:Be,iat:X,exp:X+3600,auth_time:X,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[U(JSON.stringify({alg:"none",type:"JWT"})),U(JSON.stringify(se)),""].join(".")}function ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ae(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ne())}function H(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(pe){return!1}}function G(){return"object"==typeof self&&self.self===self}function ue(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function we(){return ne().indexOf("Electron/")>=0}function _e(){const pe=ne();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function Ue(){return ne().indexOf("MSAppHost/")>=0}function Re(){return!1}function Se(){return!H()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ce(){return"object"==typeof indexedDB}function de(){return new Promise((pe,le)=>{try{let ye=!0;const Be="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(Be);X.onsuccess=()=>{X.result.close(),ye||self.indexedDB.deleteDatabase(Be),pe(!0)},X.onupgradeneeded=()=>{ye=!1},X.onerror=()=>{var ie;le((null===(ie=X.error)||void 0===ie?void 0:ie.message)||"")}}catch(ye){le(ye)}})}function Ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ie extends Error{constructor(le,ye,Be){super(ye),this.code=le,this.customData=Be,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(le,ye,Be){this.service=le,this.serviceName=ye,this.errors=Be}create(le,...ye){const Be=ye[0]||{},X=`${this.service}/${le}`,ie=this.errors[le],se=ie?function(pe,le){return pe.replace(ct,(ye,Be)=>{const X=le[Be];return null!=X?String(X):`<${Be}?>`})}(ie,Be):"Error";return new Ie(X,`${this.serviceName}: ${se} (${X}).`,Be)}}const ct=/\{\$([^}]+)}/g;function Le(pe){return JSON.parse(pe)}function Ve(pe){return JSON.stringify(pe)}const ke=function(pe){let le={},ye={},Be={},X="";try{const ie=pe.split(".");le=Le(R(ie[0])||""),ye=Le(R(ie[1])||""),X=ie[2],Be=ye.d||{},delete ye.d}catch(ie){}return{header:le,claims:ye,data:Be,signature:X}},Mt=function(pe){const ye=ke(pe).claims;return!!ye&&"object"==typeof ye&&ye.hasOwnProperty("iat")},yt=function(pe){const le=ke(pe).claims;return"object"==typeof le&&!0===le.admin};function Ct(pe,le){return Object.prototype.hasOwnProperty.call(pe,le)}function Xt(pe,le){if(Object.prototype.hasOwnProperty.call(pe,le))return pe[le]}function qt(pe){for(const le in pe)if(Object.prototype.hasOwnProperty.call(pe,le))return!1;return!0}function an(pe,le,ye){const Be={};for(const X in pe)Object.prototype.hasOwnProperty.call(pe,X)&&(Be[X]=le.call(ye,pe[X],X,pe));return Be}function In(pe,le){if(pe===le)return!0;const ye=Object.keys(pe),Be=Object.keys(le);for(const X of ye){if(!Be.includes(X))return!1;const ie=pe[X],se=le[X];if(tr(ie)&&tr(se)){if(!In(ie,se))return!1}else if(ie!==se)return!1}for(const X of Be)if(!ye.includes(X))return!1;return!0}function tr(pe){return null!==pe&&"object"==typeof pe}function Mn(pe){const le=[];for(const[ye,Be]of Object.entries(pe))Array.isArray(Be)?Be.forEach(X=>{le.push(encodeURIComponent(ye)+"="+encodeURIComponent(X))}):le.push(encodeURIComponent(ye)+"="+encodeURIComponent(Be));return le.length?"&"+le.join("&"):""}function Yn(pe){const le={};return pe.replace(/^\?/,"").split("&").forEach(Be=>{if(Be){const[X,ie]=Be.split("=");le[decodeURIComponent(X)]=decodeURIComponent(ie)}}),le}function ze(pe){const le=pe.indexOf("?");if(!le)return"";const ye=pe.indexOf("#",le);return pe.substring(le,ye>0?ye:void 0)}class Kn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let le=1;le<this.blockSize;++le)this.pad_[le]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(le,ye){ye||(ye=0);const Be=this.W_;if("string"==typeof le)for(let at=0;at<16;at++)Be[at]=le.charCodeAt(ye)<<24|le.charCodeAt(ye+1)<<16|le.charCodeAt(ye+2)<<8|le.charCodeAt(ye+3),ye+=4;else for(let at=0;at<16;at++)Be[at]=le[ye]<<24|le[ye+1]<<16|le[ye+2]<<8|le[ye+3],ye+=4;for(let at=16;at<80;at++){const rn=Be[at-3]^Be[at-8]^Be[at-14]^Be[at-16];Be[at]=4294967295&(rn<<1|rn>>>31)}let Et,Rt,X=this.chain_[0],ie=this.chain_[1],se=this.chain_[2],Ae=this.chain_[3],et=this.chain_[4];for(let at=0;at<80;at++){at<40?at<20?(Et=Ae^ie&(se^Ae),Rt=1518500249):(Et=ie^se^Ae,Rt=1859775393):at<60?(Et=ie&se|Ae&(ie|se),Rt=2400959708):(Et=ie^se^Ae,Rt=3395469782);const rn=(X<<5|X>>>27)+Et+et+Rt+Be[at]&4294967295;et=Ae,Ae=se,se=4294967295&(ie<<30|ie>>>2),ie=X,X=rn}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+ie&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Ae&4294967295,this.chain_[4]=this.chain_[4]+et&4294967295}update(le,ye){if(null==le)return;void 0===ye&&(ye=le.length);const Be=ye-this.blockSize;let X=0;const ie=this.buf_;let se=this.inbuf_;for(;X<ye;){if(0===se)for(;X<=Be;)this.compress_(le,X),X+=this.blockSize;if("string"==typeof le){for(;X<ye;)if(ie[se]=le.charCodeAt(X),++se,++X,se===this.blockSize){this.compress_(ie),se=0;break}}else for(;X<ye;)if(ie[se]=le[X],++se,++X,se===this.blockSize){this.compress_(ie),se=0;break}}this.inbuf_=se,this.total_+=ye}digest(){const le=[];let ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&ye,ye/=256;this.compress_(this.buf_);let Be=0;for(let X=0;X<5;X++)for(let ie=24;ie>=0;ie-=8)le[Be]=this.chain_[X]>>ie&255,++Be;return le}}function $n(pe,le){const ye=new gt(pe,le);return ye.subscribe.bind(ye)}class gt{constructor(le,ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ye,this.task.then(()=>{le(this)}).catch(Be=>{this.error(Be)})}next(le){this.forEachObserver(ye=>{ye.next(le)})}error(le){this.forEachObserver(ye=>{ye.error(le)}),this.close(le)}complete(){this.forEachObserver(le=>{le.complete()}),this.close()}subscribe(le,ye,Be){let X;if(void 0===le&&void 0===ye&&void 0===Be)throw new Error("Missing Observer.");X=function(pe,le){if("object"!=typeof pe||null===pe)return!1;for(const ye of["next","error","complete"])if(ye in pe&&"function"==typeof pe[ye])return!0;return!1}(le)?le:{next:le,error:ye,complete:Be},void 0===X.next&&(X.next=ln),void 0===X.error&&(X.error=ln),void 0===X.complete&&(X.complete=ln);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch(se){}}),this.observers.push(X),ie}unsubscribeOne(le){void 0===this.observers||void 0===this.observers[le]||(delete this.observers[le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(le){if(!this.finalized)for(let ye=0;ye<this.observers.length;ye++)this.sendOne(ye,le)}sendOne(le,ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[le])try{ye(this.observers[le])}catch(Be){"undefined"!=typeof console&&console.error&&console.error(Be)}})}close(le){this.finalized||(this.finalized=!0,void 0!==le&&(this.finalError=le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ln(){}const nr=function(pe,le,ye,Be){let X;if(Be<le?X="at least "+le:Be>ye&&(X=0===ye?"none":"no more than "+ye),X)throw new Error(pe+" failed: Was called with "+Be+(1===Be?" argument.":" arguments.")+" Expects "+X+".")};function dr(pe,le){return`${pe} failed: ${le} argument `}function xn(pe,le,ye,Be){if((!Be||ye)&&"function"!=typeof ye)throw new Error(dr(pe,le)+"must be a valid function.")}function Yi(pe,le,ye,Be){if((!Be||ye)&&("object"!=typeof ye||null===ye))throw new Error(dr(pe,le)+"must be a valid context object.")}const En=function(pe){const le=[];let ye=0;for(let Be=0;Be<pe.length;Be++){let X=pe.charCodeAt(Be);if(X>=55296&&X<=56319){const ie=X-55296;Be++,k(Be<pe.length,"Surrogate pair missing trail surrogate."),X=65536+(ie<<10)+(pe.charCodeAt(Be)-56320)}X<128?le[ye++]=X:X<2048?(le[ye++]=X>>6|192,le[ye++]=63&X|128):X<65536?(le[ye++]=X>>12|224,le[ye++]=X>>6&63|128,le[ye++]=63&X|128):(le[ye++]=X>>18|240,le[ye++]=X>>12&63|128,le[ye++]=X>>6&63|128,le[ye++]=63&X|128)}return le},it=function(pe){let le=0;for(let ye=0;ye<pe.length;ye++){const Be=pe.charCodeAt(ye);Be<128?le++:Be<2048?le+=2:Be>=55296&&Be<=56319?(le+=4,ye++):le+=3}return le};function At(pe,le=1e3,ye=2){const Be=le*Math.pow(ye,pe),X=Math.round(.5*Be*(Math.random()-.5)*2);return Math.min(144e5,Be+X)}function cn(pe){return pe&&pe._delegate?pe._delegate:pe}function St(pe,le){return new Promise((ye,Be)=>{pe.onsuccess=X=>{ye(X.target.result)},pe.onerror=X=>{var ie;Be(`${le}: ${null===(ie=X.target.error)||void 0===ie?void 0:ie.message}`)}})}class Wt{constructor(le){this._db=le,this.objectStoreNames=this._db.objectStoreNames}transaction(le,ye="readonly"){return new rt(this._db.transaction.call(this._db,le,ye))}createObjectStore(le,ye){return new qe(this._db.createObjectStore(le,ye))}close(){this._db.close()}}class rt{constructor(le){this._transaction=le,this.complete=new Promise((ye,Be)=>{this._transaction.oncomplete=function(){ye()},this._transaction.onerror=()=>{Be(this._transaction.error)},this._transaction.onabort=()=>{Be(this._transaction.error)}})}objectStore(le){return new qe(this._transaction.objectStore(le))}}class qe{constructor(le){this._store=le}index(le){return new _t(this._store.index(le))}createIndex(le,ye,Be){return new _t(this._store.createIndex(le,ye,Be))}get(le){return St(this._store.get(le),"Error reading from IndexedDB")}put(le,ye){return St(this._store.put(le,ye),"Error writing to IndexedDB")}delete(le){return St(this._store.delete(le),"Error deleting from IndexedDB")}clear(){return St(this._store.clear(),"Error clearing IndexedDB object store")}}class _t{constructor(le){this._index=le}get(le){return St(this._index.get(le),"Error reading from IndexedDB")}}function Nt(pe,le,ye){return new Promise((Be,X)=>{try{const ie=indexedDB.open(pe,le);ie.onsuccess=se=>{Be(new Wt(se.target.result))},ie.onerror=se=>{var Ae;X(`Error opening indexedDB: ${null===(Ae=se.target.error)||void 0===Ae?void 0:Ae.message}`)},ie.onupgradeneeded=se=>{ye(new Wt(ie.result),se.oldVersion,se.newVersion,new rt(ie.transaction))}}catch(ie){X(`Error opening indexedDB: ${ie.message}`)}})}function Lt(pe){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*(pe){return new Promise((le,ye)=>{try{const Be=indexedDB.deleteDatabase(pe);Be.onsuccess=()=>{le()},Be.onerror=X=>{var ie;ye(`Error deleting indexedDB database "${pe}": ${null===(ie=X.target.error)||void 0===ie?void 0:ie.message}`)}}catch(Be){ye(`Error deleting indexedDB database "${pe}": ${Be.message}`)}})})).apply(this,arguments)}},7832:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,K=M.lib.BlockCipher,te=M.algo,Z=[],ee=[],L=[],U=[],R=[],N=[],S=[],B=[],z=[],Y=[];!function(){for(var H=[],G=0;G<256;G++)H[G]=G<128?G<<1:G<<1^283;var ue=0,he=0;for(G=0;G<256;G++){var we=he^he<<1^he<<2^he<<3^he<<4;Z[ue]=we=we>>>8^255&we^99,ee[we]=ue;var Se,_e=H[ue],Ue=H[_e],Re=H[Ue];L[ue]=(Se=257*H[we]^16843008*we)<<24|Se>>>8,U[ue]=Se<<16|Se>>>16,R[ue]=Se<<8|Se>>>24,N[ue]=Se,S[we]=(Se=16843009*Re^65537*Ue^257*_e^16843008*ue)<<24|Se>>>8,B[we]=Se<<16|Se>>>16,z[we]=Se<<8|Se>>>24,Y[we]=Se,ue?(ue=_e^H[H[H[Re^_e]]],he^=H[H[he]]):ue=he=1}}();var ne=[0,1,2,4,8,16,32,64,128,27,54],ae=te.AES=K.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var G=this._keyPriorReset=this._key,ue=G.words,he=G.sigBytes/4,_e=4*((this._nRounds=he+6)+1),Ue=this._keySchedule=[],Re=0;Re<_e;Re++)Re<he?Ue[Re]=ue[Re]:(H=Ue[Re-1],Re%he?he>6&&Re%he==4&&(H=Z[H>>>24]<<24|Z[H>>>16&255]<<16|Z[H>>>8&255]<<8|Z[255&H]):(H=Z[(H=H<<8|H>>>24)>>>24]<<24|Z[H>>>16&255]<<16|Z[H>>>8&255]<<8|Z[255&H],H^=ne[Re/he|0]<<24),Ue[Re]=Ue[Re-he]^H);for(var Se=this._invKeySchedule=[],Ce=0;Ce<_e;Ce++){if(Re=_e-Ce,Ce%4)var H=Ue[Re];else H=Ue[Re-4];Se[Ce]=Ce<4||Re<=4?H:S[Z[H>>>24]]^B[Z[H>>>16&255]]^z[Z[H>>>8&255]]^Y[Z[255&H]]}}},encryptBlock:function(H,G){this._doCryptBlock(H,G,this._keySchedule,L,U,R,N,Z)},decryptBlock:function(H,G){var ue=H[G+1];H[G+1]=H[G+3],H[G+3]=ue,this._doCryptBlock(H,G,this._invKeySchedule,S,B,z,Y,ee),ue=H[G+1],H[G+1]=H[G+3],H[G+3]=ue},_doCryptBlock:function(H,G,ue,he,we,_e,Ue,Re){for(var Se=this._nRounds,Ce=H[G]^ue[0],de=H[G+1]^ue[1],Ee=H[G+2]^ue[2],ve=H[G+3]^ue[3],De=4,Ie=1;Ie<Se;Ie++){var Je=he[Ce>>>24]^we[de>>>16&255]^_e[Ee>>>8&255]^Ue[255&ve]^ue[De++],ht=he[de>>>24]^we[Ee>>>16&255]^_e[ve>>>8&255]^Ue[255&Ce]^ue[De++],ct=he[Ee>>>24]^we[ve>>>16&255]^_e[Ce>>>8&255]^Ue[255&de]^ue[De++],Le=he[ve>>>24]^we[Ce>>>16&255]^_e[de>>>8&255]^Ue[255&Ee]^ue[De++];Ce=Je,de=ht,Ee=ct,ve=Le}Je=(Re[Ce>>>24]<<24|Re[de>>>16&255]<<16|Re[Ee>>>8&255]<<8|Re[255&ve])^ue[De++],ht=(Re[de>>>24]<<24|Re[Ee>>>16&255]<<16|Re[ve>>>8&255]<<8|Re[255&Ce])^ue[De++],ct=(Re[Ee>>>24]<<24|Re[ve>>>16&255]<<16|Re[Ce>>>8&255]<<8|Re[255&de])^ue[De++],Le=(Re[ve>>>24]<<24|Re[Ce>>>16&255]<<16|Re[de>>>8&255]<<8|Re[255&Ee])^ue[De++],H[G]=Je,H[G+1]=ht,H[G+2]=ct,H[G+3]=Le},keySize:8});M.AES=K._createHelper(ae)}(),a.AES)},8822:function(Fe,me,O){var k,K,te,Z,ee,L,R,S,B,Y,ne,ae,G,he,_e,Ue,Se,Ce,a;Fe.exports=(a=O(1823),O(4369),void(a.lib.Cipher||(k=a,K=k.lib,te=K.Base,Z=K.WordArray,ee=K.BufferedBlockAlgorithm,L=k.enc,R=L.Base64,S=k.algo.EvpKDF,B=K.Cipher=ee.extend({cfg:te.extend(),createEncryptor:function(de,Ee){return this.create(this._ENC_XFORM_MODE,de,Ee)},createDecryptor:function(de,Ee){return this.create(this._DEC_XFORM_MODE,de,Ee)},init:function(de,Ee,ve){this.cfg=this.cfg.extend(ve),this._xformMode=de,this._key=Ee,this.reset()},reset:function(){ee.reset.call(this),this._doReset()},process:function(de){return this._append(de),this._process()},finalize:function(de){return de&&this._append(de),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function de(Ee){return"string"==typeof Ee?Ce:Ue}return function(Ee){return{encrypt:function(ve,De,Ie){return de(De).encrypt(Ee,ve,De,Ie)},decrypt:function(ve,De,Ie){return de(De).decrypt(Ee,ve,De,Ie)}}}}()}),K.StreamCipher=B.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),Y=k.mode={},ne=K.BlockCipherMode=te.extend({createEncryptor:function(de,Ee){return this.Encryptor.create(de,Ee)},createDecryptor:function(de,Ee){return this.Decryptor.create(de,Ee)},init:function(de,Ee){this._cipher=de,this._iv=Ee}}),ae=Y.CBC=function(){var de=ne.extend();function Ee(ve,De,Ie){var Je,ht=this._iv;ht?(Je=ht,this._iv=undefined):Je=this._prevBlock;for(var ct=0;ct<Ie;ct++)ve[De+ct]^=Je[ct]}return de.Encryptor=de.extend({processBlock:function(ve,De){var Ie=this._cipher,Je=Ie.blockSize;Ee.call(this,ve,De,Je),Ie.encryptBlock(ve,De),this._prevBlock=ve.slice(De,De+Je)}}),de.Decryptor=de.extend({processBlock:function(ve,De){var Ie=this._cipher,Je=Ie.blockSize,ht=ve.slice(De,De+Je);Ie.decryptBlock(ve,De),Ee.call(this,ve,De,Je),this._prevBlock=ht}}),de}(),G=(k.pad={}).Pkcs7={pad:function(de,Ee){for(var ve=4*Ee,De=ve-de.sigBytes%ve,Ie=De<<24|De<<16|De<<8|De,Je=[],ht=0;ht<De;ht+=4)Je.push(Ie);var ct=Z.create(Je,De);de.concat(ct)},unpad:function(de){de.sigBytes-=255&de.words[de.sigBytes-1>>>2]}},K.BlockCipher=B.extend({cfg:B.cfg.extend({mode:ae,padding:G}),reset:function(){var de;B.reset.call(this);var Ee=this.cfg,ve=Ee.iv,De=Ee.mode;this._xformMode==this._ENC_XFORM_MODE?de=De.createEncryptor:(de=De.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==de?this._mode.init(this,ve&&ve.words):(this._mode=de.call(De,this,ve&&ve.words),this._mode.__creator=de)},_doProcessBlock:function(de,Ee){this._mode.processBlock(de,Ee)},_doFinalize:function(){var de,Ee=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Ee.pad(this._data,this.blockSize),de=this._process(!0)):(de=this._process(!0),Ee.unpad(de)),de},blockSize:4}),he=K.CipherParams=te.extend({init:function(de){this.mixIn(de)},toString:function(de){return(de||this.formatter).stringify(this)}}),_e=(k.format={}).OpenSSL={stringify:function(de){var ve=de.ciphertext,De=de.salt;return(De?Z.create([1398893684,1701076831]).concat(De).concat(ve):ve).toString(R)},parse:function(de){var Ee,ve=R.parse(de),De=ve.words;return 1398893684==De[0]&&1701076831==De[1]&&(Ee=Z.create(De.slice(2,4)),De.splice(0,4),ve.sigBytes-=16),he.create({ciphertext:ve,salt:Ee})}},Ue=K.SerializableCipher=te.extend({cfg:te.extend({format:_e}),encrypt:function(de,Ee,ve,De){De=this.cfg.extend(De);var Ie=de.createEncryptor(ve,De),Je=Ie.finalize(Ee),ht=Ie.cfg;return he.create({ciphertext:Je,key:ve,iv:ht.iv,algorithm:de,mode:ht.mode,padding:ht.padding,blockSize:de.blockSize,formatter:De.format})},decrypt:function(de,Ee,ve,De){return De=this.cfg.extend(De),Ee=this._parse(Ee,De.format),de.createDecryptor(ve,De).finalize(Ee.ciphertext)},_parse:function(de,Ee){return"string"==typeof de?Ee.parse(de,this):de}}),Se=(k.kdf={}).OpenSSL={execute:function(de,Ee,ve,De){De||(De=Z.random(8));var Ie=S.create({keySize:Ee+ve}).compute(de,De),Je=Z.create(Ie.words.slice(Ee),4*ve);return Ie.sigBytes=4*Ee,he.create({key:Ie,iv:Je,salt:De})}},Ce=K.PasswordBasedCipher=Ue.extend({cfg:Ue.cfg.extend({kdf:Se}),encrypt:function(de,Ee,ve,De){var Ie=(De=this.cfg.extend(De)).kdf.execute(ve,de.keySize,de.ivSize);De.iv=Ie.iv;var Je=Ue.encrypt.call(this,de,Ee,Ie.key,De);return Je.mixIn(Ie),Je},decrypt:function(de,Ee,ve,De){De=this.cfg.extend(De),Ee=this._parse(Ee,De.format);var Ie=De.kdf.execute(ve,de.keySize,de.ivSize,Ee.salt);return De.iv=Ie.iv,Ue.decrypt.call(this,de,Ee,Ie.key,De)}}))))},1823:function(Fe,me,O){var a;Fe.exports=a=a||function(M,k){var K;if("undefined"!=typeof window&&window.crypto&&(K=window.crypto),"undefined"!=typeof self&&self.crypto&&(K=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(K=globalThis.crypto),!K&&"undefined"!=typeof window&&window.msCrypto&&(K=window.msCrypto),!K&&"undefined"!=typeof global&&global.crypto&&(K=global.crypto),!K)try{K=O(2480)}catch(H){}var te=function(){if(K){if("function"==typeof K.getRandomValues)try{return K.getRandomValues(new Uint32Array(1))[0]}catch(H){}if("function"==typeof K.randomBytes)try{return K.randomBytes(4).readInt32LE()}catch(H){}}throw new Error("Native crypto module could not be used to get secure random number.")},Z=Object.create||function(){function H(){}return function(G){var ue;return H.prototype=G,ue=new H,H.prototype=null,ue}}(),ee={},L=ee.lib={},U=L.Base={extend:function(H){var G=Z(this);return H&&G.mixIn(H),(!G.hasOwnProperty("init")||this.init===G.init)&&(G.init=function(){G.$super.init.apply(this,arguments)}),G.init.prototype=G,G.$super=this,G},create:function(){var H=this.extend();return H.init.apply(H,arguments),H},init:function(){},mixIn:function(H){for(var G in H)H.hasOwnProperty(G)&&(this[G]=H[G]);H.hasOwnProperty("toString")&&(this.toString=H.toString)},clone:function(){return this.init.prototype.extend(this)}},R=L.WordArray=U.extend({init:function(H,G){H=this.words=H||[],this.sigBytes=null!=G?G:4*H.length},toString:function(H){return(H||S).stringify(this)},concat:function(H){var G=this.words,ue=H.words,he=this.sigBytes,we=H.sigBytes;if(this.clamp(),he%4)for(var _e=0;_e<we;_e++)G[he+_e>>>2]|=(ue[_e>>>2]>>>24-_e%4*8&255)<<24-(he+_e)%4*8;else for(var Re=0;Re<we;Re+=4)G[he+Re>>>2]=ue[Re>>>2];return this.sigBytes+=we,this},clamp:function(){var H=this.words,G=this.sigBytes;H[G>>>2]&=4294967295<<32-G%4*8,H.length=M.ceil(G/4)},clone:function(){var H=U.clone.call(this);return H.words=this.words.slice(0),H},random:function(H){for(var G=[],ue=0;ue<H;ue+=4)G.push(te());return new R.init(G,H)}}),N=ee.enc={},S=N.Hex={stringify:function(H){for(var G=H.words,ue=H.sigBytes,he=[],we=0;we<ue;we++){var _e=G[we>>>2]>>>24-we%4*8&255;he.push((_e>>>4).toString(16)),he.push((15&_e).toString(16))}return he.join("")},parse:function(H){for(var G=H.length,ue=[],he=0;he<G;he+=2)ue[he>>>3]|=parseInt(H.substr(he,2),16)<<24-he%8*4;return new R.init(ue,G/2)}},B=N.Latin1={stringify:function(H){for(var G=H.words,ue=H.sigBytes,he=[],we=0;we<ue;we++)he.push(String.fromCharCode(G[we>>>2]>>>24-we%4*8&255));return he.join("")},parse:function(H){for(var G=H.length,ue=[],he=0;he<G;he++)ue[he>>>2]|=(255&H.charCodeAt(he))<<24-he%4*8;return new R.init(ue,G)}},z=N.Utf8={stringify:function(H){try{return decodeURIComponent(escape(B.stringify(H)))}catch(G){throw new Error("Malformed UTF-8 data")}},parse:function(H){return B.parse(unescape(encodeURIComponent(H)))}},Y=L.BufferedBlockAlgorithm=U.extend({reset:function(){this._data=new R.init,this._nDataBytes=0},_append:function(H){"string"==typeof H&&(H=z.parse(H)),this._data.concat(H),this._nDataBytes+=H.sigBytes},_process:function(H){var G,ue=this._data,he=ue.words,we=ue.sigBytes,_e=this.blockSize,Re=we/(4*_e),Se=(Re=H?M.ceil(Re):M.max((0|Re)-this._minBufferSize,0))*_e,Ce=M.min(4*Se,we);if(Se){for(var de=0;de<Se;de+=_e)this._doProcessBlock(he,de);G=he.splice(0,Se),ue.sigBytes-=Ce}return new R.init(G,Ce)},clone:function(){var H=U.clone.call(this);return H._data=this._data.clone(),H},_minBufferSize:0}),ae=(L.Hasher=Y.extend({cfg:U.extend(),init:function(H){this.cfg=this.cfg.extend(H),this.reset()},reset:function(){Y.reset.call(this),this._doReset()},update:function(H){return this._append(H),this._process(),this},finalize:function(H){return H&&this._append(H),this._doFinalize()},blockSize:16,_createHelper:function(H){return function(G,ue){return new H.init(ue).finalize(G)}},_createHmacHelper:function(H){return function(G,ue){return new ae.HMAC.init(H,ue).finalize(G)}}}),ee.algo={});return ee}(Math)},8341:function(Fe,me,O){var a,K;Fe.exports=(a=O(1823),K=a.lib.WordArray,a.enc.Base64={stringify:function(L){var U=L.words,R=L.sigBytes,N=this._map;L.clamp();for(var S=[],B=0;B<R;B+=3)for(var ae=(U[B>>>2]>>>24-B%4*8&255)<<16|(U[B+1>>>2]>>>24-(B+1)%4*8&255)<<8|U[B+2>>>2]>>>24-(B+2)%4*8&255,H=0;H<4&&B+.75*H<R;H++)S.push(N.charAt(ae>>>6*(3-H)&63));var G=N.charAt(64);if(G)for(;S.length%4;)S.push(G);return S.join("")},parse:function(L){var U=L.length,R=this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var S=0;S<R.length;S++)N[R.charCodeAt(S)]=S}var B=R.charAt(64);if(B){var z=L.indexOf(B);-1!==z&&(U=z)}return function(L,U,R){for(var N=[],S=0,B=0;B<U;B++)if(B%4){var z=R[L.charCodeAt(B-1)]<<B%4*2,Y=R[L.charCodeAt(B)]>>>6-B%4*2;N[S>>>2]|=(z|Y)<<24-S%4*8,S++}return K.create(N,S)}(L,U,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)},9237:function(Fe,me,O){var a,K;Fe.exports=(a=O(1823),K=a.lib.WordArray,a.enc.Base64url={stringify:function(L,U=!0){var R=L.words,N=L.sigBytes,S=U?this._safe_map:this._map;L.clamp();for(var B=[],z=0;z<N;z+=3)for(var H=(R[z>>>2]>>>24-z%4*8&255)<<16|(R[z+1>>>2]>>>24-(z+1)%4*8&255)<<8|R[z+2>>>2]>>>24-(z+2)%4*8&255,G=0;G<4&&z+.75*G<N;G++)B.push(S.charAt(H>>>6*(3-G)&63));var ue=S.charAt(64);if(ue)for(;B.length%4;)B.push(ue);return B.join("")},parse:function(L,U=!0){var R=L.length,N=U?this._safe_map:this._map,S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var B=0;B<N.length;B++)S[N.charCodeAt(B)]=B}var z=N.charAt(64);if(z){var Y=L.indexOf(z);-1!==Y&&(R=Y)}return function(L,U,R){for(var N=[],S=0,B=0;B<U;B++)if(B%4){var z=R[L.charCodeAt(B-1)]<<B%4*2,Y=R[L.charCodeAt(B)]>>>6-B%4*2;N[S>>>2]|=(z|Y)<<24-S%4*8,S++}return K.create(N,S)}(L,R,S)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},a.enc.Base64url)},4153:function(Fe,me,O){var a;Fe.exports=(a=O(1823),function(){var K=a.lib.WordArray,te=a.enc;function ee(L){return L<<8&4278255360|L>>>8&16711935}te.Utf16=te.Utf16BE={stringify:function(L){for(var U=L.words,R=L.sigBytes,N=[],S=0;S<R;S+=2)N.push(String.fromCharCode(U[S>>>2]>>>16-S%4*8&65535));return N.join("")},parse:function(L){for(var U=L.length,R=[],N=0;N<U;N++)R[N>>>1]|=L.charCodeAt(N)<<16-N%2*16;return K.create(R,2*U)}},te.Utf16LE={stringify:function(L){for(var U=L.words,R=L.sigBytes,N=[],S=0;S<R;S+=2){var B=ee(U[S>>>2]>>>16-S%4*8&65535);N.push(String.fromCharCode(B))}return N.join("")},parse:function(L){for(var U=L.length,R=[],N=0;N<U;N++)R[N>>>1]|=ee(L.charCodeAt(N)<<16-N%2*16);return K.create(R,2*U)}}}(),a.enc.Utf16)},4369:function(Fe,me,O){var M,k,K,te,Z,L,a;Fe.exports=(a=O(1823),O(6496),O(3331),te=(k=(M=a).lib).WordArray,L=(Z=M.algo).EvpKDF=(K=k.Base).extend({cfg:K.extend({keySize:4,hasher:Z.MD5,iterations:1}),init:function(U){this.cfg=this.cfg.extend(U)},compute:function(U,R){for(var N,S=this.cfg,B=S.hasher.create(),z=te.create(),Y=z.words,ne=S.keySize,ae=S.iterations;Y.length<ne;){N&&B.update(N),N=B.update(U).finalize(R),B.reset();for(var H=1;H<ae;H++)N=B.finalize(N),B.reset();z.concat(N)}return z.sigBytes=4*ne,z}}),M.EvpKDF=function(U,R,N){return L.create(N).compute(U,R)},a.EvpKDF)},5383:function(Fe,me,O){var a,te,ee;Fe.exports=(a=O(1823),O(8822),te=a.lib.CipherParams,ee=a.enc.Hex,a.format.Hex={stringify:function(R){return R.ciphertext.toString(ee)},parse:function(R){var N=ee.parse(R);return te.create({ciphertext:N})}},a.format.Hex)},3331:function(Fe,me,O){var a,Z;Fe.exports=(a=O(1823),Z=a.enc.Utf8,void(a.algo.HMAC=a.lib.Base.extend({init:function(U,R){U=this._hasher=new U.init,"string"==typeof R&&(R=Z.parse(R));var N=U.blockSize,S=4*N;R.sigBytes>S&&(R=U.finalize(R)),R.clamp();for(var B=this._oKey=R.clone(),z=this._iKey=R.clone(),Y=B.words,ne=z.words,ae=0;ae<N;ae++)Y[ae]^=1549556828,ne[ae]^=909522486;B.sigBytes=z.sigBytes=S,this.reset()},reset:function(){var U=this._hasher;U.reset(),U.update(this._iKey)},update:function(U){return this._hasher.update(U),this},finalize:function(U){var R=this._hasher,N=R.finalize(U);return R.reset(),R.finalize(this._oKey.clone().concat(N))}})))},2527:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(4615),O(4194),O(4153),O(8341),O(9237),O(916),O(6496),O(6946),O(6538),O(1206),O(7098),O(2633),O(5508),O(3331),O(3096),O(4369),O(8822),O(8915),O(9913),O(1981),O(7163),O(6447),O(3199),O(9049),O(2812),O(5355),O(1247),O(5383),O(7832),O(4994),O(1093),O(7076),O(5625),a)},4194:function(Fe,me,O){var a;Fe.exports=(a=O(1823),function(){if("function"==typeof ArrayBuffer){var K=a.lib.WordArray,te=K.init;(K.init=function(ee){if(ee instanceof ArrayBuffer&&(ee=new Uint8Array(ee)),(ee instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array)&&(ee=new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength)),ee instanceof Uint8Array){for(var L=ee.byteLength,U=[],R=0;R<L;R++)U[R>>>2]|=ee[R]<<24-R%4*8;te.call(this,U,L)}else te.apply(this,arguments)}).prototype=K}}(),a.lib.WordArray)},916:function(Fe,me,O){var a;Fe.exports=(a=O(1823),function(M){var k=a,K=k.lib,te=K.WordArray,Z=K.Hasher,ee=k.algo,L=[];!function(){for(var z=0;z<64;z++)L[z]=4294967296*M.abs(M.sin(z+1))|0}();var U=ee.MD5=Z.extend({_doReset:function(){this._hash=new te.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(z,Y){for(var ne=0;ne<16;ne++){var ae=Y+ne,H=z[ae];z[ae]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8)}var G=this._hash.words,ue=z[Y+0],he=z[Y+1],we=z[Y+2],_e=z[Y+3],Ue=z[Y+4],Re=z[Y+5],Se=z[Y+6],Ce=z[Y+7],de=z[Y+8],Ee=z[Y+9],ve=z[Y+10],De=z[Y+11],Ie=z[Y+12],Je=z[Y+13],ht=z[Y+14],ct=z[Y+15],Le=G[0],Ve=G[1],ke=G[2],Ze=G[3];Le=R(Le,Ve,ke,Ze,ue,7,L[0]),Ze=R(Ze,Le,Ve,ke,he,12,L[1]),ke=R(ke,Ze,Le,Ve,we,17,L[2]),Ve=R(Ve,ke,Ze,Le,_e,22,L[3]),Le=R(Le,Ve,ke,Ze,Ue,7,L[4]),Ze=R(Ze,Le,Ve,ke,Re,12,L[5]),ke=R(ke,Ze,Le,Ve,Se,17,L[6]),Ve=R(Ve,ke,Ze,Le,Ce,22,L[7]),Le=R(Le,Ve,ke,Ze,de,7,L[8]),Ze=R(Ze,Le,Ve,ke,Ee,12,L[9]),ke=R(ke,Ze,Le,Ve,ve,17,L[10]),Ve=R(Ve,ke,Ze,Le,De,22,L[11]),Le=R(Le,Ve,ke,Ze,Ie,7,L[12]),Ze=R(Ze,Le,Ve,ke,Je,12,L[13]),ke=R(ke,Ze,Le,Ve,ht,17,L[14]),Le=N(Le,Ve=R(Ve,ke,Ze,Le,ct,22,L[15]),ke,Ze,he,5,L[16]),Ze=N(Ze,Le,Ve,ke,Se,9,L[17]),ke=N(ke,Ze,Le,Ve,De,14,L[18]),Ve=N(Ve,ke,Ze,Le,ue,20,L[19]),Le=N(Le,Ve,ke,Ze,Re,5,L[20]),Ze=N(Ze,Le,Ve,ke,ve,9,L[21]),ke=N(ke,Ze,Le,Ve,ct,14,L[22]),Ve=N(Ve,ke,Ze,Le,Ue,20,L[23]),Le=N(Le,Ve,ke,Ze,Ee,5,L[24]),Ze=N(Ze,Le,Ve,ke,ht,9,L[25]),ke=N(ke,Ze,Le,Ve,_e,14,L[26]),Ve=N(Ve,ke,Ze,Le,de,20,L[27]),Le=N(Le,Ve,ke,Ze,Je,5,L[28]),Ze=N(Ze,Le,Ve,ke,we,9,L[29]),ke=N(ke,Ze,Le,Ve,Ce,14,L[30]),Le=S(Le,Ve=N(Ve,ke,Ze,Le,Ie,20,L[31]),ke,Ze,Re,4,L[32]),Ze=S(Ze,Le,Ve,ke,de,11,L[33]),ke=S(ke,Ze,Le,Ve,De,16,L[34]),Ve=S(Ve,ke,Ze,Le,ht,23,L[35]),Le=S(Le,Ve,ke,Ze,he,4,L[36]),Ze=S(Ze,Le,Ve,ke,Ue,11,L[37]),ke=S(ke,Ze,Le,Ve,Ce,16,L[38]),Ve=S(Ve,ke,Ze,Le,ve,23,L[39]),Le=S(Le,Ve,ke,Ze,Je,4,L[40]),Ze=S(Ze,Le,Ve,ke,ue,11,L[41]),ke=S(ke,Ze,Le,Ve,_e,16,L[42]),Ve=S(Ve,ke,Ze,Le,Se,23,L[43]),Le=S(Le,Ve,ke,Ze,Ee,4,L[44]),Ze=S(Ze,Le,Ve,ke,Ie,11,L[45]),ke=S(ke,Ze,Le,Ve,ct,16,L[46]),Le=B(Le,Ve=S(Ve,ke,Ze,Le,we,23,L[47]),ke,Ze,ue,6,L[48]),Ze=B(Ze,Le,Ve,ke,Ce,10,L[49]),ke=B(ke,Ze,Le,Ve,ht,15,L[50]),Ve=B(Ve,ke,Ze,Le,Re,21,L[51]),Le=B(Le,Ve,ke,Ze,Ie,6,L[52]),Ze=B(Ze,Le,Ve,ke,_e,10,L[53]),ke=B(ke,Ze,Le,Ve,ve,15,L[54]),Ve=B(Ve,ke,Ze,Le,he,21,L[55]),Le=B(Le,Ve,ke,Ze,de,6,L[56]),Ze=B(Ze,Le,Ve,ke,ct,10,L[57]),ke=B(ke,Ze,Le,Ve,Se,15,L[58]),Ve=B(Ve,ke,Ze,Le,Je,21,L[59]),Le=B(Le,Ve,ke,Ze,Ue,6,L[60]),Ze=B(Ze,Le,Ve,ke,De,10,L[61]),ke=B(ke,Ze,Le,Ve,we,15,L[62]),Ve=B(Ve,ke,Ze,Le,Ee,21,L[63]),G[0]=G[0]+Le|0,G[1]=G[1]+Ve|0,G[2]=G[2]+ke|0,G[3]=G[3]+Ze|0},_doFinalize:function(){var z=this._data,Y=z.words,ne=8*this._nDataBytes,ae=8*z.sigBytes;Y[ae>>>5]|=128<<24-ae%32;var H=M.floor(ne/4294967296),G=ne;Y[15+(ae+64>>>9<<4)]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),Y[14+(ae+64>>>9<<4)]=16711935&(G<<8|G>>>24)|4278255360&(G<<24|G>>>8),z.sigBytes=4*(Y.length+1),this._process();for(var ue=this._hash,he=ue.words,we=0;we<4;we++){var _e=he[we];he[we]=16711935&(_e<<8|_e>>>24)|4278255360&(_e<<24|_e>>>8)}return ue},clone:function(){var z=Z.clone.call(this);return z._hash=this._hash.clone(),z}});function R(z,Y,ne,ae,H,G,ue){var he=z+(Y&ne|~Y&ae)+H+ue;return(he<<G|he>>>32-G)+Y}function N(z,Y,ne,ae,H,G,ue){var he=z+(Y&ae|ne&~ae)+H+ue;return(he<<G|he>>>32-G)+Y}function S(z,Y,ne,ae,H,G,ue){var he=z+(Y^ne^ae)+H+ue;return(he<<G|he>>>32-G)+Y}function B(z,Y,ne,ae,H,G,ue){var he=z+(ne^(Y|~ae))+H+ue;return(he<<G|he>>>32-G)+Y}k.MD5=Z._createHelper(U),k.HmacMD5=Z._createHmacHelper(U)}(Math),a.MD5)},8915:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8822),a.mode.CFB=function(){var M=a.lib.BlockCipherMode.extend();function k(K,te,Z,ee){var L,U=this._iv;U?(L=U.slice(0),this._iv=void 0):L=this._prevBlock,ee.encryptBlock(L,0);for(var R=0;R<Z;R++)K[te+R]^=L[R]}return M.Encryptor=M.extend({processBlock:function(K,te){var Z=this._cipher,ee=Z.blockSize;k.call(this,K,te,ee,Z),this._prevBlock=K.slice(te,te+ee)}}),M.Decryptor=M.extend({processBlock:function(K,te){var Z=this._cipher,ee=Z.blockSize,L=K.slice(te,te+ee);k.call(this,K,te,ee,Z),this._prevBlock=L}}),M}(),a.mode.CFB)},1981:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8822),a.mode.CTRGladman=function(){var M=a.lib.BlockCipherMode.extend();function k(Z){if(255==(Z>>24&255)){var ee=Z>>16&255,L=Z>>8&255,U=255&Z;255===ee?(ee=0,255===L?(L=0,255===U?U=0:++U):++L):++ee,Z=0,Z+=ee<<16,Z+=L<<8,Z+=U}else Z+=1<<24;return Z}var te=M.Encryptor=M.extend({processBlock:function(Z,ee){var L=this._cipher,U=L.blockSize,R=this._iv,N=this._counter;R&&(N=this._counter=R.slice(0),this._iv=void 0),function(Z){0===(Z[0]=k(Z[0]))&&(Z[1]=k(Z[1]))}(N);var S=N.slice(0);L.encryptBlock(S,0);for(var B=0;B<U;B++)Z[ee+B]^=S[B]}});return M.Decryptor=te,M}(),a.mode.CTRGladman)},9913:function(Fe,me,O){var M,k,a;Fe.exports=(a=O(1823),O(8822),a.mode.CTR=(k=(M=a.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(K,te){var Z=this._cipher,ee=Z.blockSize,L=this._iv,U=this._counter;L&&(U=this._counter=L.slice(0),this._iv=void 0);var R=U.slice(0);Z.encryptBlock(R,0),U[ee-1]=U[ee-1]+1|0;for(var N=0;N<ee;N++)K[te+N]^=R[N]}}),M.Decryptor=k,M),a.mode.CTR)},6447:function(Fe,me,O){var M,a;Fe.exports=(a=O(1823),O(8822),a.mode.ECB=((M=a.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(k,K){this._cipher.encryptBlock(k,K)}}),M.Decryptor=M.extend({processBlock:function(k,K){this._cipher.decryptBlock(k,K)}}),M),a.mode.ECB)},7163:function(Fe,me,O){var M,k,a;Fe.exports=(a=O(1823),O(8822),a.mode.OFB=(k=(M=a.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(K,te){var Z=this._cipher,ee=Z.blockSize,L=this._iv,U=this._keystream;L&&(U=this._keystream=L.slice(0),this._iv=void 0),Z.encryptBlock(U,0);for(var R=0;R<ee;R++)K[te+R]^=U[R]}}),M.Decryptor=k,M),a.mode.OFB)},3199:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8822),a.pad.AnsiX923={pad:function(M,k){var K=M.sigBytes,te=4*k,Z=te-K%te,ee=K+Z-1;M.clamp(),M.words[ee>>>2]|=Z<<24-ee%4*8,M.sigBytes+=Z},unpad:function(M){M.sigBytes-=255&M.words[M.sigBytes-1>>>2]}},a.pad.Ansix923)},9049:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8822),a.pad.Iso10126={pad:function(M,k){var K=4*k,te=K-M.sigBytes%K;M.concat(a.lib.WordArray.random(te-1)).concat(a.lib.WordArray.create([te<<24],1))},unpad:function(M){M.sigBytes-=255&M.words[M.sigBytes-1>>>2]}},a.pad.Iso10126)},2812:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8822),a.pad.Iso97971={pad:function(M,k){M.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(M,k)},unpad:function(M){a.pad.ZeroPadding.unpad(M),M.sigBytes--}},a.pad.Iso97971)},1247:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8822),a.pad.NoPadding={pad:function(){},unpad:function(){}},a.pad.NoPadding)},5355:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8822),a.pad.ZeroPadding={pad:function(M,k){var K=4*k;M.clamp(),M.sigBytes+=K-(M.sigBytes%K||K)},unpad:function(M){var k=M.words,K=M.sigBytes-1;for(K=M.sigBytes-1;K>=0;K--)if(k[K>>>2]>>>24-K%4*8&255){M.sigBytes=K+1;break}}},a.pad.ZeroPadding)},3096:function(Fe,me,O){var M,k,K,te,Z,L,U,a;Fe.exports=(a=O(1823),O(6496),O(3331),te=(k=(M=a).lib).WordArray,L=(Z=M.algo).HMAC,U=Z.PBKDF2=(K=k.Base).extend({cfg:K.extend({keySize:4,hasher:Z.SHA1,iterations:1}),init:function(R){this.cfg=this.cfg.extend(R)},compute:function(R,N){for(var S=this.cfg,B=L.create(S.hasher,R),z=te.create(),Y=te.create([1]),ne=z.words,ae=Y.words,H=S.keySize,G=S.iterations;ne.length<H;){var ue=B.update(N).finalize(Y);B.reset();for(var he=ue.words,we=he.length,_e=ue,Ue=1;Ue<G;Ue++){_e=B.finalize(_e),B.reset();for(var Re=_e.words,Se=0;Se<we;Se++)he[Se]^=Re[Se]}z.concat(ue),ae[0]++}return z.sigBytes=4*H,z}}),M.PBKDF2=function(R,N,S){return U.create(S).compute(R,N)},a.PBKDF2)},5625:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,K=M.lib.StreamCipher,Z=[],ee=[],L=[],U=M.algo.RabbitLegacy=K.extend({_doReset:function(){var N=this._key.words,S=this.cfg.iv,B=this._X=[N[0],N[3]<<16|N[2]>>>16,N[1],N[0]<<16|N[3]>>>16,N[2],N[1]<<16|N[0]>>>16,N[3],N[2]<<16|N[1]>>>16],z=this._C=[N[2]<<16|N[2]>>>16,4294901760&N[0]|65535&N[1],N[3]<<16|N[3]>>>16,4294901760&N[1]|65535&N[2],N[0]<<16|N[0]>>>16,4294901760&N[2]|65535&N[3],N[1]<<16|N[1]>>>16,4294901760&N[3]|65535&N[0]];this._b=0;for(var Y=0;Y<4;Y++)R.call(this);for(Y=0;Y<8;Y++)z[Y]^=B[Y+4&7];if(S){var ne=S.words,ae=ne[0],H=ne[1],G=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),ue=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),he=G>>>16|4294901760&ue,we=ue<<16|65535&G;for(z[0]^=G,z[1]^=he,z[2]^=ue,z[3]^=we,z[4]^=G,z[5]^=he,z[6]^=ue,z[7]^=we,Y=0;Y<4;Y++)R.call(this)}},_doProcessBlock:function(N,S){var B=this._X;R.call(this),Z[0]=B[0]^B[5]>>>16^B[3]<<16,Z[1]=B[2]^B[7]>>>16^B[5]<<16,Z[2]=B[4]^B[1]>>>16^B[7]<<16,Z[3]=B[6]^B[3]>>>16^B[1]<<16;for(var z=0;z<4;z++)Z[z]=16711935&(Z[z]<<8|Z[z]>>>24)|4278255360&(Z[z]<<24|Z[z]>>>8),N[S+z]^=Z[z]},blockSize:4,ivSize:2});function R(){for(var N=this._X,S=this._C,B=0;B<8;B++)ee[B]=S[B];for(S[0]=S[0]+1295307597+this._b|0,S[1]=S[1]+3545052371+(S[0]>>>0<ee[0]>>>0?1:0)|0,S[2]=S[2]+886263092+(S[1]>>>0<ee[1]>>>0?1:0)|0,S[3]=S[3]+1295307597+(S[2]>>>0<ee[2]>>>0?1:0)|0,S[4]=S[4]+3545052371+(S[3]>>>0<ee[3]>>>0?1:0)|0,S[5]=S[5]+886263092+(S[4]>>>0<ee[4]>>>0?1:0)|0,S[6]=S[6]+1295307597+(S[5]>>>0<ee[5]>>>0?1:0)|0,S[7]=S[7]+3545052371+(S[6]>>>0<ee[6]>>>0?1:0)|0,this._b=S[7]>>>0<ee[7]>>>0?1:0,B=0;B<8;B++){var z=N[B]+S[B],Y=65535&z,ne=z>>>16;L[B]=((Y*Y>>>17)+Y*ne>>>15)+ne*ne^((4294901760&z)*z|0)+((65535&z)*z|0)}N[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,N[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,N[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,N[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,N[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,N[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,N[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,N[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}M.RabbitLegacy=K._createHelper(U)}(),a.RabbitLegacy)},7076:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,K=M.lib.StreamCipher,Z=[],ee=[],L=[],U=M.algo.Rabbit=K.extend({_doReset:function(){for(var N=this._key.words,S=this.cfg.iv,B=0;B<4;B++)N[B]=16711935&(N[B]<<8|N[B]>>>24)|4278255360&(N[B]<<24|N[B]>>>8);var z=this._X=[N[0],N[3]<<16|N[2]>>>16,N[1],N[0]<<16|N[3]>>>16,N[2],N[1]<<16|N[0]>>>16,N[3],N[2]<<16|N[1]>>>16],Y=this._C=[N[2]<<16|N[2]>>>16,4294901760&N[0]|65535&N[1],N[3]<<16|N[3]>>>16,4294901760&N[1]|65535&N[2],N[0]<<16|N[0]>>>16,4294901760&N[2]|65535&N[3],N[1]<<16|N[1]>>>16,4294901760&N[3]|65535&N[0]];for(this._b=0,B=0;B<4;B++)R.call(this);for(B=0;B<8;B++)Y[B]^=z[B+4&7];if(S){var ne=S.words,ae=ne[0],H=ne[1],G=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8),ue=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),he=G>>>16|4294901760&ue,we=ue<<16|65535&G;for(Y[0]^=G,Y[1]^=he,Y[2]^=ue,Y[3]^=we,Y[4]^=G,Y[5]^=he,Y[6]^=ue,Y[7]^=we,B=0;B<4;B++)R.call(this)}},_doProcessBlock:function(N,S){var B=this._X;R.call(this),Z[0]=B[0]^B[5]>>>16^B[3]<<16,Z[1]=B[2]^B[7]>>>16^B[5]<<16,Z[2]=B[4]^B[1]>>>16^B[7]<<16,Z[3]=B[6]^B[3]>>>16^B[1]<<16;for(var z=0;z<4;z++)Z[z]=16711935&(Z[z]<<8|Z[z]>>>24)|4278255360&(Z[z]<<24|Z[z]>>>8),N[S+z]^=Z[z]},blockSize:4,ivSize:2});function R(){for(var N=this._X,S=this._C,B=0;B<8;B++)ee[B]=S[B];for(S[0]=S[0]+1295307597+this._b|0,S[1]=S[1]+3545052371+(S[0]>>>0<ee[0]>>>0?1:0)|0,S[2]=S[2]+886263092+(S[1]>>>0<ee[1]>>>0?1:0)|0,S[3]=S[3]+1295307597+(S[2]>>>0<ee[2]>>>0?1:0)|0,S[4]=S[4]+3545052371+(S[3]>>>0<ee[3]>>>0?1:0)|0,S[5]=S[5]+886263092+(S[4]>>>0<ee[4]>>>0?1:0)|0,S[6]=S[6]+1295307597+(S[5]>>>0<ee[5]>>>0?1:0)|0,S[7]=S[7]+3545052371+(S[6]>>>0<ee[6]>>>0?1:0)|0,this._b=S[7]>>>0<ee[7]>>>0?1:0,B=0;B<8;B++){var z=N[B]+S[B],Y=65535&z,ne=z>>>16;L[B]=((Y*Y>>>17)+Y*ne>>>15)+ne*ne^((4294901760&z)*z|0)+((65535&z)*z|0)}N[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,N[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,N[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,N[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,N[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,N[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,N[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,N[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}M.Rabbit=K._createHelper(U)}(),a.Rabbit)},1093:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,K=M.lib.StreamCipher,te=M.algo,Z=te.RC4=K.extend({_doReset:function(){for(var U=this._key,R=U.words,N=U.sigBytes,S=this._S=[],B=0;B<256;B++)S[B]=B;B=0;for(var z=0;B<256;B++){var Y=B%N,ae=S[B];S[B]=S[z=(z+S[B]+(R[Y>>>2]>>>24-Y%4*8&255))%256],S[z]=ae}this._i=this._j=0},_doProcessBlock:function(U,R){U[R]^=ee.call(this)},keySize:8,ivSize:0});function ee(){for(var U=this._S,R=this._i,N=this._j,S=0,B=0;B<4;B++){var z=U[R=(R+1)%256];U[R]=U[N=(N+U[R])%256],U[N]=z,S|=U[(U[R]+U[N])%256]<<24-8*B}return this._i=R,this._j=N,S}M.RC4=K._createHelper(Z);var L=te.RC4Drop=Z.extend({cfg:Z.cfg.extend({drop:192}),_doReset:function(){Z._doReset.call(this);for(var U=this.cfg.drop;U>0;U--)ee.call(this)}});M.RC4Drop=K._createHelper(L)}(),a.RC4)},5508:function(Fe,me,O){var a;Fe.exports=(a=O(1823),function(M){var k=a,K=k.lib,te=K.WordArray,Z=K.Hasher,ee=k.algo,L=te.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),U=te.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),R=te.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),N=te.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),S=te.create([0,1518500249,1859775393,2400959708,2840853838]),B=te.create([1352829926,1548603684,1836072691,2053994217,0]),z=ee.RIPEMD160=Z.extend({_doReset:function(){this._hash=te.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(he,we){for(var _e=0;_e<16;_e++){var Ue=we+_e,Re=he[Ue];he[Ue]=16711935&(Re<<8|Re>>>24)|4278255360&(Re<<24|Re>>>8)}var Je,ht,ct,Le,Ve,ke,Ze,Jt,Mt,yt,Ct,Se=this._hash.words,Ce=S.words,de=B.words,Ee=L.words,ve=U.words,De=R.words,Ie=N.words;for(ke=Je=Se[0],Ze=ht=Se[1],Jt=ct=Se[2],Mt=Le=Se[3],yt=Ve=Se[4],_e=0;_e<80;_e+=1)Ct=Je+he[we+Ee[_e]]|0,Ct+=_e<16?Y(ht,ct,Le)+Ce[0]:_e<32?ne(ht,ct,Le)+Ce[1]:_e<48?ae(ht,ct,Le)+Ce[2]:_e<64?H(ht,ct,Le)+Ce[3]:G(ht,ct,Le)+Ce[4],Ct=(Ct=ue(Ct|=0,De[_e]))+Ve|0,Je=Ve,Ve=Le,Le=ue(ct,10),ct=ht,ht=Ct,Ct=ke+he[we+ve[_e]]|0,Ct+=_e<16?G(Ze,Jt,Mt)+de[0]:_e<32?H(Ze,Jt,Mt)+de[1]:_e<48?ae(Ze,Jt,Mt)+de[2]:_e<64?ne(Ze,Jt,Mt)+de[3]:Y(Ze,Jt,Mt)+de[4],Ct=(Ct=ue(Ct|=0,Ie[_e]))+yt|0,ke=yt,yt=Mt,Mt=ue(Jt,10),Jt=Ze,Ze=Ct;Ct=Se[1]+ct+Mt|0,Se[1]=Se[2]+Le+yt|0,Se[2]=Se[3]+Ve+ke|0,Se[3]=Se[4]+Je+Ze|0,Se[4]=Se[0]+ht+Jt|0,Se[0]=Ct},_doFinalize:function(){var he=this._data,we=he.words,_e=8*this._nDataBytes,Ue=8*he.sigBytes;we[Ue>>>5]|=128<<24-Ue%32,we[14+(Ue+64>>>9<<4)]=16711935&(_e<<8|_e>>>24)|4278255360&(_e<<24|_e>>>8),he.sigBytes=4*(we.length+1),this._process();for(var Re=this._hash,Se=Re.words,Ce=0;Ce<5;Ce++){var de=Se[Ce];Se[Ce]=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8)}return Re},clone:function(){var he=Z.clone.call(this);return he._hash=this._hash.clone(),he}});function Y(he,we,_e){return he^we^_e}function ne(he,we,_e){return he&we|~he&_e}function ae(he,we,_e){return(he|~we)^_e}function H(he,we,_e){return he&_e|we&~_e}function G(he,we,_e){return he^(we|~_e)}function ue(he,we){return he<<we|he>>>32-we}k.RIPEMD160=Z._createHelper(z),k.HmacRIPEMD160=Z._createHmacHelper(z)}(Math),a.RIPEMD160)},6496:function(Fe,me,O){var M,k,K,te,ee,L,a;Fe.exports=(a=O(1823),K=(k=(M=a).lib).WordArray,ee=[],L=M.algo.SHA1=(te=k.Hasher).extend({_doReset:function(){this._hash=new K.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,R){for(var N=this._hash.words,S=N[0],B=N[1],z=N[2],Y=N[3],ne=N[4],ae=0;ae<80;ae++){if(ae<16)ee[ae]=0|U[R+ae];else{var H=ee[ae-3]^ee[ae-8]^ee[ae-14]^ee[ae-16];ee[ae]=H<<1|H>>>31}var G=(S<<5|S>>>27)+ne+ee[ae];G+=ae<20?1518500249+(B&z|~B&Y):ae<40?1859775393+(B^z^Y):ae<60?(B&z|B&Y|z&Y)-1894007588:(B^z^Y)-899497514,ne=Y,Y=z,z=B<<30|B>>>2,B=S,S=G}N[0]=N[0]+S|0,N[1]=N[1]+B|0,N[2]=N[2]+z|0,N[3]=N[3]+Y|0,N[4]=N[4]+ne|0},_doFinalize:function(){var U=this._data,R=U.words,N=8*this._nDataBytes,S=8*U.sigBytes;return R[S>>>5]|=128<<24-S%32,R[14+(S+64>>>9<<4)]=Math.floor(N/4294967296),R[15+(S+64>>>9<<4)]=N,U.sigBytes=4*R.length,this._process(),this._hash},clone:function(){var U=te.clone.call(this);return U._hash=this._hash.clone(),U}}),M.SHA1=te._createHelper(L),M.HmacSHA1=te._createHmacHelper(L),a.SHA1)},6538:function(Fe,me,O){var M,K,te,Z,ee,a;Fe.exports=(a=O(1823),O(6946),K=(M=a).lib.WordArray,ee=(te=M.algo).SHA224=(Z=te.SHA256).extend({_doReset:function(){this._hash=new K.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var L=Z._doFinalize.call(this);return L.sigBytes-=4,L}}),M.SHA224=Z._createHelper(ee),M.HmacSHA224=Z._createHmacHelper(ee),a.SHA224)},6946:function(Fe,me,O){var a;Fe.exports=(a=O(1823),function(M){var k=a,K=k.lib,te=K.WordArray,Z=K.Hasher,ee=k.algo,L=[],U=[];!function(){function S(ne){for(var ae=M.sqrt(ne),H=2;H<=ae;H++)if(!(ne%H))return!1;return!0}function B(ne){return 4294967296*(ne-(0|ne))|0}for(var z=2,Y=0;Y<64;)S(z)&&(Y<8&&(L[Y]=B(M.pow(z,.5))),U[Y]=B(M.pow(z,1/3)),Y++),z++}();var R=[],N=ee.SHA256=Z.extend({_doReset:function(){this._hash=new te.init(L.slice(0))},_doProcessBlock:function(S,B){for(var z=this._hash.words,Y=z[0],ne=z[1],ae=z[2],H=z[3],G=z[4],ue=z[5],he=z[6],we=z[7],_e=0;_e<64;_e++){if(_e<16)R[_e]=0|S[B+_e];else{var Ue=R[_e-15],Se=R[_e-2];R[_e]=((Ue<<25|Ue>>>7)^(Ue<<14|Ue>>>18)^Ue>>>3)+R[_e-7]+((Se<<15|Se>>>17)^(Se<<13|Se>>>19)^Se>>>10)+R[_e-16]}var Ee=Y&ne^Y&ae^ne&ae,Ie=we+((G<<26|G>>>6)^(G<<21|G>>>11)^(G<<7|G>>>25))+(G&ue^~G&he)+U[_e]+R[_e];we=he,he=ue,ue=G,G=H+Ie|0,H=ae,ae=ne,ne=Y,Y=Ie+(((Y<<30|Y>>>2)^(Y<<19|Y>>>13)^(Y<<10|Y>>>22))+Ee)|0}z[0]=z[0]+Y|0,z[1]=z[1]+ne|0,z[2]=z[2]+ae|0,z[3]=z[3]+H|0,z[4]=z[4]+G|0,z[5]=z[5]+ue|0,z[6]=z[6]+he|0,z[7]=z[7]+we|0},_doFinalize:function(){var S=this._data,B=S.words,z=8*this._nDataBytes,Y=8*S.sigBytes;return B[Y>>>5]|=128<<24-Y%32,B[14+(Y+64>>>9<<4)]=M.floor(z/4294967296),B[15+(Y+64>>>9<<4)]=z,S.sigBytes=4*B.length,this._process(),this._hash},clone:function(){var S=Z.clone.call(this);return S._hash=this._hash.clone(),S}});k.SHA256=Z._createHelper(N),k.HmacSHA256=Z._createHmacHelper(N)}(Math),a.SHA256)},2633:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(4615),function(M){var k=a,K=k.lib,te=K.WordArray,Z=K.Hasher,L=k.x64.Word,U=k.algo,R=[],N=[],S=[];!function(){for(var Y=1,ne=0,ae=0;ae<24;ae++){R[Y+5*ne]=(ae+1)*(ae+2)/2%64;var G=(2*Y+3*ne)%5;Y=ne%5,ne=G}for(Y=0;Y<5;Y++)for(ne=0;ne<5;ne++)N[Y+5*ne]=ne+(2*Y+3*ne)%5*5;for(var ue=1,he=0;he<24;he++){for(var we=0,_e=0,Ue=0;Ue<7;Ue++){if(1&ue){var Re=(1<<Ue)-1;Re<32?_e^=1<<Re:we^=1<<Re-32}128&ue?ue=ue<<1^113:ue<<=1}S[he]=L.create(we,_e)}}();var B=[];!function(){for(var Y=0;Y<25;Y++)B[Y]=L.create()}();var z=U.SHA3=Z.extend({cfg:Z.cfg.extend({outputLength:512}),_doReset:function(){for(var Y=this._state=[],ne=0;ne<25;ne++)Y[ne]=new L.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(Y,ne){for(var ae=this._state,H=this.blockSize/2,G=0;G<H;G++){var ue=Y[ne+2*G],he=Y[ne+2*G+1];ue=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8),(we=ae[G]).high^=he=16711935&(he<<8|he>>>24)|4278255360&(he<<24|he>>>8),we.low^=ue}for(var _e=0;_e<24;_e++){for(var Ue=0;Ue<5;Ue++){for(var Re=0,Se=0,Ce=0;Ce<5;Ce++)Re^=(we=ae[Ue+5*Ce]).high,Se^=we.low;var de=B[Ue];de.high=Re,de.low=Se}for(Ue=0;Ue<5;Ue++){var Ee=B[(Ue+4)%5],ve=B[(Ue+1)%5],De=ve.high,Ie=ve.low;for(Re=Ee.high^(De<<1|Ie>>>31),Se=Ee.low^(Ie<<1|De>>>31),Ce=0;Ce<5;Ce++)(we=ae[Ue+5*Ce]).high^=Re,we.low^=Se}for(var Je=1;Je<25;Je++){var ht=(we=ae[Je]).high,ct=we.low,Le=R[Je];Le<32?(Re=ht<<Le|ct>>>32-Le,Se=ct<<Le|ht>>>32-Le):(Re=ct<<Le-32|ht>>>64-Le,Se=ht<<Le-32|ct>>>64-Le);var Ve=B[N[Je]];Ve.high=Re,Ve.low=Se}var ke=B[0],Ze=ae[0];for(ke.high=Ze.high,ke.low=Ze.low,Ue=0;Ue<5;Ue++)for(Ce=0;Ce<5;Ce++){var Jt=B[Je=Ue+5*Ce],Mt=B[(Ue+1)%5+5*Ce],yt=B[(Ue+2)%5+5*Ce];(we=ae[Je]).high=Jt.high^~Mt.high&yt.high,we.low=Jt.low^~Mt.low&yt.low}var we,Ct=S[_e];(we=ae[0]).high^=Ct.high,we.low^=Ct.low}},_doFinalize:function(){var Y=this._data,ne=Y.words,H=8*Y.sigBytes,G=32*this.blockSize;ne[H>>>5]|=1<<24-H%32,ne[(M.ceil((H+1)/G)*G>>>5)-1]|=128,Y.sigBytes=4*ne.length,this._process();for(var ue=this._state,he=this.cfg.outputLength/8,we=he/8,_e=[],Ue=0;Ue<we;Ue++){var Re=ue[Ue],Se=Re.high,Ce=Re.low;Se=16711935&(Se<<8|Se>>>24)|4278255360&(Se<<24|Se>>>8),_e.push(Ce=16711935&(Ce<<8|Ce>>>24)|4278255360&(Ce<<24|Ce>>>8)),_e.push(Se)}return new te.init(_e,he)},clone:function(){for(var Y=Z.clone.call(this),ne=Y._state=this._state.slice(0),ae=0;ae<25;ae++)ne[ae]=ne[ae].clone();return Y}});k.SHA3=Z._createHelper(z),k.HmacSHA3=Z._createHmacHelper(z)}(Math),a.SHA3)},7098:function(Fe,me,O){var M,k,K,te,Z,ee,L,a;Fe.exports=(a=O(1823),O(4615),O(1206),K=(k=(M=a).x64).Word,te=k.WordArray,L=(Z=M.algo).SHA384=(ee=Z.SHA512).extend({_doReset:function(){this._hash=new te.init([new K.init(3418070365,3238371032),new K.init(1654270250,914150663),new K.init(2438529370,812702999),new K.init(355462360,4144912697),new K.init(1731405415,4290775857),new K.init(2394180231,1750603025),new K.init(3675008525,1694076839),new K.init(1203062813,3204075428)])},_doFinalize:function(){var U=ee._doFinalize.call(this);return U.sigBytes-=16,U}}),M.SHA384=ee._createHelper(L),M.HmacSHA384=ee._createHmacHelper(L),a.SHA384)},1206:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(4615),function(){var M=a,K=M.lib.Hasher,te=M.x64,Z=te.Word,ee=te.WordArray,L=M.algo;function U(){return Z.create.apply(Z,arguments)}var R=[U(1116352408,3609767458),U(1899447441,602891725),U(3049323471,3964484399),U(3921009573,2173295548),U(961987163,4081628472),U(1508970993,3053834265),U(2453635748,2937671579),U(2870763221,3664609560),U(3624381080,2734883394),U(310598401,1164996542),U(607225278,1323610764),U(1426881987,3590304994),U(1925078388,4068182383),U(2162078206,991336113),U(2614888103,633803317),U(3248222580,3479774868),U(3835390401,2666613458),U(4022224774,944711139),U(264347078,2341262773),U(604807628,2007800933),U(770255983,1495990901),U(1249150122,1856431235),U(1555081692,3175218132),U(1996064986,2198950837),U(2554220882,3999719339),U(2821834349,766784016),U(2952996808,2566594879),U(3210313671,3203337956),U(3336571891,1034457026),U(3584528711,2466948901),U(113926993,3758326383),U(338241895,168717936),U(666307205,1188179964),U(773529912,1546045734),U(1294757372,1522805485),U(1396182291,2643833823),U(1695183700,2343527390),U(1986661051,1014477480),U(2177026350,1206759142),U(2456956037,344077627),U(2730485921,1290863460),U(2820302411,3158454273),U(3259730800,3505952657),U(3345764771,106217008),U(3516065817,3606008344),U(3600352804,1432725776),U(4094571909,1467031594),U(275423344,851169720),U(430227734,3100823752),U(506948616,1363258195),U(659060556,3750685593),U(883997877,3785050280),U(958139571,3318307427),U(1322822218,3812723403),U(1537002063,2003034995),U(1747873779,3602036899),U(1955562222,1575990012),U(2024104815,1125592928),U(2227730452,2716904306),U(2361852424,442776044),U(2428436474,593698344),U(2756734187,3733110249),U(3204031479,2999351573),U(3329325298,3815920427),U(3391569614,3928383900),U(3515267271,566280711),U(3940187606,3454069534),U(4118630271,4000239992),U(116418474,1914138554),U(174292421,2731055270),U(289380356,3203993006),U(460393269,320620315),U(685471733,587496836),U(852142971,1086792851),U(1017036298,365543100),U(1126000580,2618297676),U(1288033470,3409855158),U(1501505948,4234509866),U(1607167915,987167468),U(1816402316,1246189591)],N=[];!function(){for(var B=0;B<80;B++)N[B]=U()}();var S=L.SHA512=K.extend({_doReset:function(){this._hash=new ee.init([new Z.init(1779033703,4089235720),new Z.init(3144134277,2227873595),new Z.init(1013904242,4271175723),new Z.init(2773480762,1595750129),new Z.init(1359893119,2917565137),new Z.init(2600822924,725511199),new Z.init(528734635,4215389547),new Z.init(1541459225,327033209)])},_doProcessBlock:function(B,z){for(var Y=this._hash.words,ne=Y[0],ae=Y[1],H=Y[2],G=Y[3],ue=Y[4],he=Y[5],we=Y[6],_e=Y[7],Ue=ne.high,Re=ne.low,Se=ae.high,Ce=ae.low,de=H.high,Ee=H.low,ve=G.high,De=G.low,Ie=ue.high,Je=ue.low,ht=he.high,ct=he.low,Le=we.high,Ve=we.low,ke=_e.high,Ze=_e.low,Jt=Ue,Mt=Re,yt=Se,Ct=Ce,Xt=de,qt=Ee,an=ve,In=De,tr=Ie,Mn=Je,Yn=ht,ze=ct,Kn=Le,$n=Ve,gt=ke,fn=Ze,mn=0;mn<80;mn++){var ln,nr,dr=N[mn];if(mn<16)nr=dr.high=0|B[z+2*mn],ln=dr.low=0|B[z+2*mn+1];else{var or=N[mn-15],xn=or.high,Yi=or.low,it=(Yi>>>1|xn<<31)^(Yi>>>8|xn<<24)^(Yi>>>7|xn<<25),xt=N[mn-2],Mr=xt.high,zr=xt.low,At=(zr>>>19|Mr<<13)^(zr<<3|Mr>>>29)^(zr>>>6|Mr<<26),hr=N[mn-7],St=N[mn-16],rt=St.low;dr.high=nr=(nr=(nr=((xn>>>1|Yi<<31)^(xn>>>8|Yi<<24)^xn>>>7)+hr.high+((ln=it+hr.low)>>>0<it>>>0?1:0))+((Mr>>>19|zr<<13)^(Mr<<3|zr>>>29)^Mr>>>6)+((ln+=At)>>>0<At>>>0?1:0))+St.high+((ln+=rt)>>>0<rt>>>0?1:0),dr.low=ln}var se,qe=tr&Yn^~tr&Kn,_t=Mn&ze^~Mn&$n,Nt=Jt&yt^Jt&Xt^yt&Xt,pe=(Mt>>>28|Jt<<4)^(Mt<<30|Jt>>>2)^(Mt<<25|Jt>>>7),Be=R[mn],ie=Be.low,Ae=gt+((tr>>>14|Mn<<18)^(tr>>>18|Mn<<14)^(tr<<23|Mn>>>9))+((se=fn+((Mn>>>14|tr<<18)^(Mn>>>18|tr<<14)^(Mn<<23|tr>>>9)))>>>0<fn>>>0?1:0),et=pe+(Mt&Ct^Mt&qt^Ct&qt);gt=Kn,fn=$n,Kn=Yn,$n=ze,Yn=tr,ze=Mn,tr=an+(Ae=(Ae=(Ae=Ae+qe+((se+=_t)>>>0<_t>>>0?1:0))+Be.high+((se+=ie)>>>0<ie>>>0?1:0))+nr+((se+=ln)>>>0<ln>>>0?1:0))+((Mn=In+se|0)>>>0<In>>>0?1:0)|0,an=Xt,In=qt,Xt=yt,qt=Ct,yt=Jt,Ct=Mt,Jt=Ae+(((Jt>>>28|Mt<<4)^(Jt<<30|Mt>>>2)^(Jt<<25|Mt>>>7))+Nt+(et>>>0<pe>>>0?1:0))+((Mt=se+et|0)>>>0<se>>>0?1:0)|0}Re=ne.low=Re+Mt,ne.high=Ue+Jt+(Re>>>0<Mt>>>0?1:0),Ce=ae.low=Ce+Ct,ae.high=Se+yt+(Ce>>>0<Ct>>>0?1:0),Ee=H.low=Ee+qt,H.high=de+Xt+(Ee>>>0<qt>>>0?1:0),De=G.low=De+In,G.high=ve+an+(De>>>0<In>>>0?1:0),Je=ue.low=Je+Mn,ue.high=Ie+tr+(Je>>>0<Mn>>>0?1:0),ct=he.low=ct+ze,he.high=ht+Yn+(ct>>>0<ze>>>0?1:0),Ve=we.low=Ve+$n,we.high=Le+Kn+(Ve>>>0<$n>>>0?1:0),Ze=_e.low=Ze+fn,_e.high=ke+gt+(Ze>>>0<fn>>>0?1:0)},_doFinalize:function(){var B=this._data,z=B.words,Y=8*this._nDataBytes,ne=8*B.sigBytes;return z[ne>>>5]|=128<<24-ne%32,z[30+(ne+128>>>10<<5)]=Math.floor(Y/4294967296),z[31+(ne+128>>>10<<5)]=Y,B.sigBytes=4*z.length,this._process(),this._hash.toX32()},clone:function(){var B=K.clone.call(this);return B._hash=this._hash.clone(),B},blockSize:32});M.SHA512=K._createHelper(S),M.HmacSHA512=K._createHmacHelper(S)}(),a.SHA512)},4994:function(Fe,me,O){var a;Fe.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,k=M.lib,K=k.WordArray,te=k.BlockCipher,Z=M.algo,ee=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],L=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],U=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],R=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],N=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],S=Z.DES=te.extend({_doReset:function(){for(var ae=this._key.words,H=[],G=0;G<56;G++){var ue=ee[G]-1;H[G]=ae[ue>>>5]>>>31-ue%32&1}for(var he=this._subKeys=[],we=0;we<16;we++){var _e=he[we]=[],Ue=U[we];for(G=0;G<24;G++)_e[G/6|0]|=H[(L[G]-1+Ue)%28]<<31-G%6,_e[4+(G/6|0)]|=H[28+(L[G+24]-1+Ue)%28]<<31-G%6;for(_e[0]=_e[0]<<1|_e[0]>>>31,G=1;G<7;G++)_e[G]=_e[G]>>>4*(G-1)+3;_e[7]=_e[7]<<5|_e[7]>>>27}var Re=this._invSubKeys=[];for(G=0;G<16;G++)Re[G]=he[15-G]},encryptBlock:function(ne,ae){this._doCryptBlock(ne,ae,this._subKeys)},decryptBlock:function(ne,ae){this._doCryptBlock(ne,ae,this._invSubKeys)},_doCryptBlock:function(ne,ae,H){this._lBlock=ne[ae],this._rBlock=ne[ae+1],B.call(this,4,252645135),B.call(this,16,65535),z.call(this,2,858993459),z.call(this,8,16711935),B.call(this,1,1431655765);for(var G=0;G<16;G++){for(var ue=H[G],he=this._lBlock,we=this._rBlock,_e=0,Ue=0;Ue<8;Ue++)_e|=R[Ue][((we^ue[Ue])&N[Ue])>>>0];this._lBlock=we,this._rBlock=he^_e}var Re=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Re,B.call(this,1,1431655765),z.call(this,8,16711935),z.call(this,2,858993459),B.call(this,16,65535),B.call(this,4,252645135),ne[ae]=this._lBlock,ne[ae+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function B(ne,ae){var H=(this._lBlock>>>ne^this._rBlock)&ae;this._rBlock^=H,this._lBlock^=H<<ne}function z(ne,ae){var H=(this._rBlock>>>ne^this._lBlock)&ae;this._lBlock^=H,this._rBlock^=H<<ne}M.DES=te._createHelper(S);var Y=Z.TripleDES=te.extend({_doReset:function(){var ae=this._key.words;if(2!==ae.length&&4!==ae.length&&ae.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var H=ae.slice(0,2),G=ae.length<4?ae.slice(0,2):ae.slice(2,4),ue=ae.length<6?ae.slice(0,2):ae.slice(4,6);this._des1=S.createEncryptor(K.create(H)),this._des2=S.createEncryptor(K.create(G)),this._des3=S.createEncryptor(K.create(ue))},encryptBlock:function(ne,ae){this._des1.encryptBlock(ne,ae),this._des2.decryptBlock(ne,ae),this._des3.encryptBlock(ne,ae)},decryptBlock:function(ne,ae){this._des3.decryptBlock(ne,ae),this._des2.encryptBlock(ne,ae),this._des1.decryptBlock(ne,ae)},keySize:6,ivSize:2,blockSize:2});M.TripleDES=te._createHelper(Y)}(),a.TripleDES)},4615:function(Fe,me,O){var K,te,Z,ee,a;Fe.exports=(a=O(1823),te=(K=a.lib).Base,Z=K.WordArray,(ee=a.x64={}).Word=te.extend({init:function(R,N){this.high=R,this.low=N}}),ee.WordArray=te.extend({init:function(R,N){R=this.words=R||[],this.sigBytes=null!=N?N:8*R.length},toX32:function(){for(var R=this.words,N=R.length,S=[],B=0;B<N;B++){var z=R[B];S.push(z.high),S.push(z.low)}return Z.create(S,this.sigBytes)},clone:function(){for(var R=te.clone.call(this),N=R.words=this.words.slice(0),S=N.length,B=0;B<S;B++)N[B]=N[B].clone();return R}}),a)},8873:function(Fe){Fe.exports=function(){"use strict";var O=6e4,a=36e5,M="millisecond",k="second",K="minute",te="hour",Z="day",ee="week",L="month",U="quarter",R="year",N="date",S="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},ne=function(Se,Ce,de){var Ee=String(Se);return!Ee||Ee.length>=Ce?Se:""+Array(Ce+1-Ee.length).join(de)+Se},ae={s:ne,z:function(Se){var Ce=-Se.utcOffset(),de=Math.abs(Ce),Ee=Math.floor(de/60),ve=de%60;return(Ce<=0?"+":"-")+ne(Ee,2,"0")+":"+ne(ve,2,"0")},m:function Se(Ce,de){if(Ce.date()<de.date())return-Se(de,Ce);var Ee=12*(de.year()-Ce.year())+(de.month()-Ce.month()),ve=Ce.clone().add(Ee,L),De=de-ve<0,Ie=Ce.clone().add(Ee+(De?-1:1),L);return+(-(Ee+(de-ve)/(De?ve-Ie:Ie-ve))||0)},a:function(Se){return Se<0?Math.ceil(Se)||0:Math.floor(Se)},p:function(Se){return{M:L,y:R,w:ee,d:Z,D:N,h:te,m:K,s:k,ms:M,Q:U}[Se]||String(Se||"").toLowerCase().replace(/s$/,"")},u:function(Se){return void 0===Se}},H="en",G={};G[H]=Y;var ue=function(Se){return Se instanceof Ue},he=function Se(Ce,de,Ee){var ve;if(!Ce)return H;if("string"==typeof Ce){var De=Ce.toLowerCase();G[De]&&(ve=De),de&&(G[De]=de,ve=De);var Ie=Ce.split("-");if(!ve&&Ie.length>1)return Se(Ie[0])}else{var Je=Ce.name;G[Je]=Ce,ve=Je}return!Ee&&ve&&(H=ve),ve||!Ee&&H},we=function(Se,Ce){if(ue(Se))return Se.clone();var de="object"==typeof Ce?Ce:{};return de.date=Se,de.args=arguments,new Ue(de)},_e=ae;_e.l=he,_e.i=ue,_e.w=function(Se,Ce){return we(Se,{locale:Ce.$L,utc:Ce.$u,x:Ce.$x,$offset:Ce.$offset})};var Ue=function(){function Se(de){this.$L=he(de.locale,null,!0),this.parse(de)}var Ce=Se.prototype;return Ce.parse=function(de){this.$d=function(Ee){var ve=Ee.date,De=Ee.utc;if(null===ve)return new Date(NaN);if(_e.u(ve))return new Date;if(ve instanceof Date)return new Date(ve);if("string"==typeof ve&&!/Z$/i.test(ve)){var Ie=ve.match(B);if(Ie){var Je=Ie[2]-1||0,ht=(Ie[7]||"0").substring(0,3);return De?new Date(Date.UTC(Ie[1],Je,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,ht)):new Date(Ie[1],Je,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,ht)}}return new Date(ve)}(de),this.$x=de.x||{},this.init()},Ce.init=function(){var de=this.$d;this.$y=de.getFullYear(),this.$M=de.getMonth(),this.$D=de.getDate(),this.$W=de.getDay(),this.$H=de.getHours(),this.$m=de.getMinutes(),this.$s=de.getSeconds(),this.$ms=de.getMilliseconds()},Ce.$utils=function(){return _e},Ce.isValid=function(){return this.$d.toString()!==S},Ce.isSame=function(de,Ee){var ve=we(de);return this.startOf(Ee)<=ve&&ve<=this.endOf(Ee)},Ce.isAfter=function(de,Ee){return we(de)<this.startOf(Ee)},Ce.isBefore=function(de,Ee){return this.endOf(Ee)<we(de)},Ce.$g=function(de,Ee,ve){return _e.u(de)?this[Ee]:this.set(ve,de)},Ce.unix=function(){return Math.floor(this.valueOf()/1e3)},Ce.valueOf=function(){return this.$d.getTime()},Ce.startOf=function(de,Ee){var ve=this,De=!!_e.u(Ee)||Ee,Ie=_e.p(de),Je=function(Mt,yt){var Ct=_e.w(ve.$u?Date.UTC(ve.$y,yt,Mt):new Date(ve.$y,yt,Mt),ve);return De?Ct:Ct.endOf(Z)},ht=function(Mt,yt){return _e.w(ve.toDate()[Mt].apply(ve.toDate("s"),(De?[0,0,0,0]:[23,59,59,999]).slice(yt)),ve)},ct=this.$W,Le=this.$M,Ve=this.$D,ke="set"+(this.$u?"UTC":"");switch(Ie){case R:return De?Je(1,0):Je(31,11);case L:return De?Je(1,Le):Je(0,Le+1);case ee:var Ze=this.$locale().weekStart||0,Jt=(ct<Ze?ct+7:ct)-Ze;return Je(De?Ve-Jt:Ve+(6-Jt),Le);case Z:case N:return ht(ke+"Hours",0);case te:return ht(ke+"Minutes",1);case K:return ht(ke+"Seconds",2);case k:return ht(ke+"Milliseconds",3);default:return this.clone()}},Ce.endOf=function(de){return this.startOf(de,!1)},Ce.$set=function(de,Ee){var ve,De=_e.p(de),Ie="set"+(this.$u?"UTC":""),Je=(ve={},ve[Z]=Ie+"Date",ve[N]=Ie+"Date",ve[L]=Ie+"Month",ve[R]=Ie+"FullYear",ve[te]=Ie+"Hours",ve[K]=Ie+"Minutes",ve[k]=Ie+"Seconds",ve[M]=Ie+"Milliseconds",ve)[De],ht=De===Z?this.$D+(Ee-this.$W):Ee;if(De===L||De===R){var ct=this.clone().set(N,1);ct.$d[Je](ht),ct.init(),this.$d=ct.set(N,Math.min(this.$D,ct.daysInMonth())).$d}else Je&&this.$d[Je](ht);return this.init(),this},Ce.set=function(de,Ee){return this.clone().$set(de,Ee)},Ce.get=function(de){return this[_e.p(de)]()},Ce.add=function(de,Ee){var ve,De=this;de=Number(de);var Ie=_e.p(Ee),Je=function(Le){var Ve=we(De);return _e.w(Ve.date(Ve.date()+Math.round(Le*de)),De)};if(Ie===L)return this.set(L,this.$M+de);if(Ie===R)return this.set(R,this.$y+de);if(Ie===Z)return Je(1);if(Ie===ee)return Je(7);var ht=(ve={},ve[K]=O,ve[te]=a,ve[k]=1e3,ve)[Ie]||1,ct=this.$d.getTime()+de*ht;return _e.w(ct,this)},Ce.subtract=function(de,Ee){return this.add(-1*de,Ee)},Ce.format=function(de){var Ee=this,ve=this.$locale();if(!this.isValid())return ve.invalidDate||S;var De=de||"YYYY-MM-DDTHH:mm:ssZ",Ie=_e.z(this),Je=this.$H,ht=this.$m,ct=this.$M,Le=ve.weekdays,Ve=ve.months,ke=function(yt,Ct,Xt,qt){return yt&&(yt[Ct]||yt(Ee,De))||Xt[Ct].slice(0,qt)},Ze=function(yt){return _e.s(Je%12||12,yt,"0")},Jt=ve.meridiem||function(yt,Ct,Xt){var qt=yt<12?"AM":"PM";return Xt?qt.toLowerCase():qt},Mt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ct+1,MM:_e.s(ct+1,2,"0"),MMM:ke(ve.monthsShort,ct,Ve,3),MMMM:ke(Ve,ct),D:this.$D,DD:_e.s(this.$D,2,"0"),d:String(this.$W),dd:ke(ve.weekdaysMin,this.$W,Le,2),ddd:ke(ve.weekdaysShort,this.$W,Le,3),dddd:Le[this.$W],H:String(Je),HH:_e.s(Je,2,"0"),h:Ze(1),hh:Ze(2),a:Jt(Je,ht,!0),A:Jt(Je,ht,!1),m:String(ht),mm:_e.s(ht,2,"0"),s:String(this.$s),ss:_e.s(this.$s,2,"0"),SSS:_e.s(this.$ms,3,"0"),Z:Ie};return De.replace(z,function(yt,Ct){return Ct||Mt[yt]||Ie.replace(":","")})},Ce.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ce.diff=function(de,Ee,ve){var De,Ie=_e.p(Ee),Je=we(de),ht=(Je.utcOffset()-this.utcOffset())*O,ct=this-Je,Le=_e.m(this,Je);return Le=(De={},De[R]=Le/12,De[L]=Le,De[U]=Le/3,De[ee]=(ct-ht)/6048e5,De[Z]=(ct-ht)/864e5,De[te]=ct/a,De[K]=ct/O,De[k]=ct/1e3,De)[Ie]||ct,ve?Le:_e.a(Le)},Ce.daysInMonth=function(){return this.endOf(L).$D},Ce.$locale=function(){return G[this.$L]},Ce.locale=function(de,Ee){if(!de)return this.$L;var ve=this.clone(),De=he(de,Ee,!0);return De&&(ve.$L=De),ve},Ce.clone=function(){return _e.w(this.$d,this)},Ce.toDate=function(){return new Date(this.valueOf())},Ce.toJSON=function(){return this.isValid()?this.toISOString():null},Ce.toISOString=function(){return this.$d.toISOString()},Ce.toString=function(){return this.$d.toUTCString()},Se}(),Re=Ue.prototype;return we.prototype=Re,[["$ms",M],["$s",k],["$m",K],["$H",te],["$W",Z],["$M",L],["$y",R],["$D",N]].forEach(function(Se){Re[Se[1]]=function(Ce){return this.$g(Ce,Se[0],Se[1])}}),we.extend=function(Se,Ce){return Se.$i||(Se(Ce,Ue,we),Se.$i=!0),we},we.locale=he,we.isDayjs=ue,we.unix=function(Se){return we(1e3*Se)},we.en=G[H],we.Ls=G,we.p={},we}()},4292:function(Fe){Fe.exports=function(){"use strict";var me={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},O=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,M=/\d\d?/,k=/\d*[^\s\d-_:/()]+/,K={},te=function(S){return(S=+S)+(S>68?1900:2e3)},Z=function(S){return function(B){this[S]=+B}},ee=[/[+-]\d\d:?(\d\d)?|Z/,function(S){(this.zone||(this.zone={})).offset=function(B){if(!B||"Z"===B)return 0;var z=B.match(/([+-]|\d\d)/g),Y=60*z[1]+(+z[2]||0);return 0===Y?0:"+"===z[0]?-Y:Y}(S)}],L=function(S){var B=K[S];return B&&(B.indexOf?B:B.s.concat(B.f))},U=function(S,B){var z,Y=K.meridiem;if(Y){for(var ne=1;ne<=24;ne+=1)if(S.indexOf(Y(ne,0,B))>-1){z=ne>12;break}}else z=S===(B?"pm":"PM");return z},R={A:[k,function(S){this.afternoon=U(S,!1)}],a:[k,function(S){this.afternoon=U(S,!0)}],S:[/\d/,function(S){this.milliseconds=100*+S}],SS:[a,function(S){this.milliseconds=10*+S}],SSS:[/\d{3}/,function(S){this.milliseconds=+S}],s:[M,Z("seconds")],ss:[M,Z("seconds")],m:[M,Z("minutes")],mm:[M,Z("minutes")],H:[M,Z("hours")],h:[M,Z("hours")],HH:[M,Z("hours")],hh:[M,Z("hours")],D:[M,Z("day")],DD:[a,Z("day")],Do:[k,function(S){var B=K.ordinal,z=S.match(/\d+/);if(this.day=z[0],B)for(var Y=1;Y<=31;Y+=1)B(Y).replace(/\[|\]/g,"")===S&&(this.day=Y)}],M:[M,Z("month")],MM:[a,Z("month")],MMM:[k,function(S){var B=L("months"),z=(L("monthsShort")||B.map(function(Y){return Y.slice(0,3)})).indexOf(S)+1;if(z<1)throw new Error;this.month=z%12||z}],MMMM:[k,function(S){var B=L("months").indexOf(S)+1;if(B<1)throw new Error;this.month=B%12||B}],Y:[/[+-]?\d+/,Z("year")],YY:[a,function(S){this.year=te(S)}],YYYY:[/\d{4}/,Z("year")],Z:ee,ZZ:ee};return function(S,B,z){z.p.customParseFormat=!0,S&&S.parseTwoDigitYear&&(te=S.parseTwoDigitYear);var Y=B.prototype,ne=Y.parse;Y.parse=function(ae){var H=ae.date,G=ae.utc,ue=ae.args;this.$u=G;var he=ue[1];if("string"==typeof he){var we=!0===ue[2],_e=!0===ue[3],Ue=we||_e,Re=ue[2];_e&&(Re=ue[2]),K=this.$locale(),!we&&Re&&(K=z.Ls[Re]),this.$d=function(Ee,ve,De){try{if(["x","X"].indexOf(ve)>-1)return new Date(("X"===ve?1e3:1)*Ee);var Ie=function(S){var z;z=K&&K.formats;for(var Y=(S=S.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(we,_e,Ue){var Re=Ue&&Ue.toUpperCase();return _e||z[Ue]||me[Ue]||z[Re].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Se,Ce,de){return Ce||de.slice(1)})})).match(O),ne=Y.length,ae=0;ae<ne;ae+=1){var H=Y[ae],G=R[H],he=G&&G[1];Y[ae]=he?{regex:G&&G[0],parser:he}:H.replace(/^\[|\]$/g,"")}return function(we){for(var _e={},Ue=0,Re=0;Ue<ne;Ue+=1){var Se=Y[Ue];if("string"==typeof Se)Re+=Se.length;else{var Ce=Se.regex,de=Se.parser,Ee=we.slice(Re),ve=Ce.exec(Ee)[0];de.call(_e,ve),we=we.replace(ve,"")}}return function(De){var Ie=De.afternoon;if(void 0!==Ie){var Je=De.hours;Ie?Je<12&&(De.hours+=12):12===Je&&(De.hours=0),delete De.afternoon}}(_e),_e}}(ve)(Ee),Je=Ie.year,ht=Ie.month,ct=Ie.day,Le=Ie.hours,Ve=Ie.minutes,ke=Ie.seconds,Ze=Ie.milliseconds,Jt=Ie.zone,Mt=new Date,yt=ct||(Je||ht?1:Mt.getDate()),Ct=Je||Mt.getFullYear(),Xt=0;Je&&!ht||(Xt=ht>0?ht-1:Mt.getMonth());var qt=Le||0,an=Ve||0,In=ke||0,tr=Ze||0;return Jt?new Date(Date.UTC(Ct,Xt,yt,qt,an,In,tr+60*Jt.offset*1e3)):De?new Date(Date.UTC(Ct,Xt,yt,qt,an,In,tr)):new Date(Ct,Xt,yt,qt,an,In,tr)}catch(Mn){return new Date("")}}(H,he,G),this.init(),Re&&!0!==Re&&(this.$L=this.locale(Re).$L),Ue&&H!=this.format(he)&&(this.$d=new Date("")),K={}}else if(he instanceof Array)for(var Se=he.length,Ce=1;Ce<=Se;Ce+=1){ue[1]=he[Ce-1];var de=z.apply(this,ue);if(de.isValid()){this.$d=de.$d,this.$L=de.$L,this.init();break}Ce===Se&&(this.$d=new Date(""))}else ne.call(this,ae)}}}()},5416:function(Fe){Fe.exports=function(){"use strict";var me={year:0,month:1,day:2,hour:3,minute:4,second:5},O={};return function(a,M,k){var K,te=function(U,R,N){void 0===N&&(N={});var S=new Date(U);return function(z,Y){void 0===Y&&(Y={});var ne=Y.timeZoneName||"short",ae=z+"|"+ne,H=O[ae];return H||(H=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:z,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:ne}),O[ae]=H),H}(R,N).formatToParts(S)},Z=function(U,R){for(var N=te(U,R),S=[],B=0;B<N.length;B+=1){var z=N[B],ae=me[z.type];ae>=0&&(S[ae]=parseInt(z.value,10))}var H=S[3],he=+U;return(k.utc(S[0]+"-"+S[1]+"-"+S[2]+" "+(24===H?0:H)+":"+S[4]+":"+S[5]+":000").valueOf()-(he-=he%1e3))/6e4},ee=M.prototype;ee.tz=function(U,R){void 0===U&&(U=K);var N=this.utcOffset(),S=this.toDate(),B=S.toLocaleString("en-US",{timeZone:U}),z=Math.round((S-new Date(B))/1e3/60),Y=k(B).$set("millisecond",this.$ms).utcOffset(15*-Math.round(S.getTimezoneOffset()/15)-z,!0);if(R){var ne=Y.utcOffset();Y=Y.add(N-ne,"minute")}return Y.$x.$timezone=U,Y},ee.offsetName=function(U){var R=this.$x.$timezone||k.tz.guess(),N=te(this.valueOf(),R,{timeZoneName:U}).find(function(S){return"timezonename"===S.type.toLowerCase()});return N&&N.value};var L=ee.startOf;ee.startOf=function(U,R){if(!this.$x||!this.$x.$timezone)return L.call(this,U,R);var N=k(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return L.call(N,U,R).tz(this.$x.$timezone,!0)},k.tz=function(U,R,N){var S=N&&R,B=N||R||K,z=Z(+k(),B);if("string"!=typeof U)return k(U).tz(B);var Y=function(G,ue,he){var we=G-60*ue*1e3,_e=Z(we,he);if(ue===_e)return[we,ue];var Ue=Z(we-=60*(_e-ue)*1e3,he);return _e===Ue?[we,_e]:[G-60*Math.min(_e,Ue)*1e3,Math.max(_e,Ue)]}(k.utc(U,S).valueOf(),z,B),ae=Y[1],H=k(Y[0]).utcOffset(ae);return H.$x.$timezone=B,H},k.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},k.tz.setDefault=function(U){K=U}}}()},6472:function(Fe){Fe.exports=function(){"use strict";var O=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(M,k,K){var te=k.prototype;K.utc=function(S){return new k({date:S,utc:!0,args:arguments})},te.utc=function(S){var B=K(this.toDate(),{locale:this.$L,utc:!0});return S?B.add(this.utcOffset(),"minute"):B},te.local=function(){return K(this.toDate(),{locale:this.$L,utc:!1})};var Z=te.parse;te.parse=function(S){S.utc&&(this.$u=!0),this.$utils().u(S.$offset)||(this.$offset=S.$offset),Z.call(this,S)};var ee=te.init;te.init=function(){if(this.$u){var S=this.$d;this.$y=S.getUTCFullYear(),this.$M=S.getUTCMonth(),this.$D=S.getUTCDate(),this.$W=S.getUTCDay(),this.$H=S.getUTCHours(),this.$m=S.getUTCMinutes(),this.$s=S.getUTCSeconds(),this.$ms=S.getUTCMilliseconds()}else ee.call(this)};var L=te.utcOffset;te.utcOffset=function(S,B){var z=this.$utils().u;if(z(S))return this.$u?0:z(this.$offset)?L.call(this):this.$offset;if("string"==typeof S&&null===(S=function(H){void 0===H&&(H="");var G=H.match(O);if(!G)return null;var ue=(""+G[0]).match(a)||["-",0,0],we=60*+ue[1]+ +ue[2];return 0===we?0:"+"===ue[0]?we:-we}(S)))return this;var Y=Math.abs(S)<=16?60*S:S,ne=this;if(B)return ne.$offset=Y,ne.$u=0===S,ne;if(0!==S){var ae=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(ne=this.local().add(Y+ae,"minute")).$offset=Y,ne.$x.$localOffset=ae}else ne=this.utc();return ne};var U=te.format;te.format=function(S){return U.call(this,S||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":""))},te.valueOf=function(){var S=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||(new Date).getTimezoneOffset());return this.$d.valueOf()-6e4*S},te.isUTC=function(){return!!this.$u},te.toISOString=function(){return this.toDate().toISOString()},te.toString=function(){return this.toDate().toUTCString()};var R=te.toDate;te.toDate=function(S){return"s"===S&&this.$offset?K(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():R.call(this)};var N=te.diff;te.diff=function(S,B,z){if(S&&this.$u===S.$u)return N.call(this,S,B,z);var Y=this.local(),ne=K(S).local();return N.call(Y,ne,B,z)}}}()},2329:(Fe,me,O)=>{"use strict";O.d(me,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=O(8026);(0,a.registerVersion)("firebase","9.6.11","app")},7841:(Fe,me,O)=>{"use strict";O.d(me,{Z:()=>a.Z});var a=O(3394);a.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(Fe,me,O)=>{"use strict";O.r(me);var a=O(8239),M=O(3394),k=O(982),K=O(3854),ee=(O(8026),O(5422),O(3910));function L(){return window}function N(){return(N=(0,a.Z)(function*(X,ie,se){var Ae;const{BuildInfo:et}=L();(0,k.ap)(ie.sessionId,"AuthEvent did not contain a session ID");const Et=yield H(ie.sessionId),Rt={};return(0,k.aq)()?Rt.ibi=et.packageName:(0,k.ar)()?Rt.apn=et.packageName:(0,k.as)(X,"operation-not-supported-in-this-environment"),et.displayName&&(Rt.appDisplayName=et.displayName),Rt.sessionId=Et,(0,k.at)(X,se,ie.type,void 0,null!==(Ae=ie.eventId)&&void 0!==Ae?Ae:void 0,Rt)})).apply(this,arguments)}function B(){return(B=(0,a.Z)(function*(X){const{BuildInfo:ie}=L(),se={};(0,k.aq)()?se.iosBundleId=ie.packageName:(0,k.ar)()?se.androidPackageName=ie.packageName:(0,k.as)(X,"operation-not-supported-in-this-environment"),yield(0,k.au)(X,se)})).apply(this,arguments)}function ne(){return(ne=(0,a.Z)(function*(X,ie,se){const{cordova:Ae}=L();let et=()=>{};try{yield new Promise((Et,Rt)=>{let at=null;function rn(){var yn;Et();const ir=null===(yn=Ae.plugins.browsertab)||void 0===yn?void 0:yn.close;"function"==typeof ir&&ir(),"function"==typeof(null==se?void 0:se.close)&&se.close()}function jn(){at||(at=window.setTimeout(()=>{Rt((0,k.av)(X,"redirect-cancelled-by-user"))},2e3))}function Pn(){"visible"===(null==document?void 0:document.visibilityState)&&jn()}ie.addPassiveListener(rn),document.addEventListener("resume",jn,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",Pn,!1),et=()=>{ie.removePassiveListener(rn),document.removeEventListener("resume",jn,!1),document.removeEventListener("visibilitychange",Pn,!1),at&&window.clearTimeout(at)}})}finally{et()}})).apply(this,arguments)}function H(X){return G.apply(this,arguments)}function G(){return(G=(0,a.Z)(function*(X){const ie=ue(X),se=yield crypto.subtle.digest("SHA-256",ie);return Array.from(new Uint8Array(se)).map(et=>et.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ue(X){if((0,k.ap)(/[0-9a-zA-Z]+/.test(X),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(X);const ie=new ArrayBuffer(X.length),se=new Uint8Array(ie);for(let Ae=0;Ae<X.length;Ae++)se[Ae]=X.charCodeAt(Ae);return se}class we extends k.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ie=>{this.resolveInialized=ie})}addPassiveListener(ie){this.passiveListeners.add(ie)}removePassiveListener(ie){this.passiveListeners.delete(ie)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ie){return this.resolveInialized(),this.passiveListeners.forEach(se=>se(ie)),super.onEvent(ie)}initialized(){var ie=this;return(0,a.Z)(function*(){yield ie.initPromise})()}}function Re(X){return Se.apply(this,arguments)}function Se(){return(Se=(0,a.Z)(function*(X){const ie=yield Ee()._get(ve(X));return ie&&(yield Ee()._remove(ve(X))),ie})).apply(this,arguments)}function de(){const X=[],ie="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let se=0;se<20;se++){const Ae=Math.floor(Math.random()*ie.length);X.push(ie.charAt(Ae))}return X.join("")}function Ee(){return(0,k.ax)(k.b)}function ve(X){return(0,k.ay)("authEvent",X.config.apiKey,X.name)}function Je(X){if(!(null==X?void 0:X.includes("?")))return{};const[ie,...se]=X.split("?");return(0,K.zd)(se.join("?"))}function Ve(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.av)("no-auth-event")}}function yt(){var X;return(null===(X=null==self?void 0:self.location)||void 0===X?void 0:X.protocol)||null}function Xt(X=(0,K.z$)()){return!("file:"!==yt()&&"ionic:"!==yt()||!X.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mn(){try{const X=self.localStorage,ie=k.aG();if(X)return X.setItem(ie,"1"),X.removeItem(ie),!function(X=(0,K.z$)()){return(0,K.w1)()&&11===(null==document?void 0:document.documentMode)||function(X=(0,K.z$)()){return/Edge\/\d+/.test(X)}(X)}()||(0,K.hl)()}catch(X){return Yn()&&(0,K.hl)()}return!1}function Yn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ze(){return("http:"===yt()||"https:"===yt()||(0,K.ru)()||Xt())&&!((0,K.b$)()||(0,K.UG)())&&Mn()&&!Yn()}function Kn(){return Xt()&&"undefined"!=typeof document}function gt(){return(gt=(0,a.Z)(function*(){return!!Kn()&&new Promise(X=>{const ie=setTimeout(()=>{X(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ie),X(!0)})})})).apply(this,arguments)}const mn={LOCAL:"local",NONE:"none",SESSION:"session"},ln=k.aw,nr="persistence";function or(X){return xn.apply(this,arguments)}function xn(){return(xn=(0,a.Z)(function*(X){yield X._initializationPromise;const ie=En(),se=k.ay(nr,X.config.apiKey,X.name);ie&&ie.setItem(se,X._getPersistence())})).apply(this,arguments)}function En(){var X;try{return(null===(X="undefined"!=typeof window?window:null)||void 0===X?void 0:X.sessionStorage)||null}catch(ie){return null}}const it=k.aw;class xt{constructor(){this.browserResolver=k.ax(k.k),this.cordovaResolver=k.ax(class{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aA}_initialize(ie){var se=this;return(0,a.Z)(function*(){const Ae=ie._key();let et=se.eventManagers.get(Ae);return et||(et=new we(ie),se.eventManagers.set(Ae,et),se.attachCallbackListeners(ie,et)),et})()}_openPopup(ie){(0,k.as)(ie,"operation-not-supported-in-this-environment")}_openRedirect(ie,se,Ae,et){var Et=this;return(0,a.Z)(function*(){!function(X){var ie,se,Ae,et,Et,Rt,at,rn,jn,Pn;const yn=L();(0,k.aw)("function"==typeof(null===(ie=null==yn?void 0:yn.universalLinks)||void 0===ie?void 0:ie.subscribe),X,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aw)(void 0!==(null===(se=null==yn?void 0:yn.BuildInfo)||void 0===se?void 0:se.packageName),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aw)("function"==typeof(null===(Et=null===(et=null===(Ae=null==yn?void 0:yn.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===et?void 0:et.browsertab)||void 0===Et?void 0:Et.openUrl),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(rn=null===(at=null===(Rt=null==yn?void 0:yn.cordova)||void 0===Rt?void 0:Rt.plugins)||void 0===at?void 0:at.browsertab)||void 0===rn?void 0:rn.isAvailable),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(Pn=null===(jn=null==yn?void 0:yn.cordova)||void 0===jn?void 0:jn.InAppBrowser)||void 0===Pn?void 0:Pn.open),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ie);const Rt=yield Et._initialize(ie);yield Rt.initialized(),Rt.resetRedirect(),(0,k.aB)(),yield Et._originValidation(ie);const at=function(X,ie,se=null){return{type:ie,eventId:se,urlResponse:null,sessionId:de(),postBody:null,tenantId:X.tenantId,error:(0,k.av)(X,"no-auth-event")}}(ie,Ae,et);yield function(X,ie){return Ee()._set(ve(X),ie)}(ie,at);const rn=yield function(X,ie,se){return N.apply(this,arguments)}(ie,at,se),jn=yield function(X){const{cordova:ie}=L();return new Promise(se=>{ie.plugins.browsertab.isAvailable(Ae=>{let et=null;Ae?ie.plugins.browsertab.openUrl(X):et=ie.InAppBrowser.open(X,(0,k.ao)()?"_blank":"_system","location=yes"),se(et)})})}(rn);return function(X,ie,se){return ne.apply(this,arguments)}(ie,Rt,jn)})()}_isIframeWebStorageSupported(ie,se){throw new Error("Method not implemented.")}_originValidation(ie){const se=ie._key();return this.originValidationPromises[se]||(this.originValidationPromises[se]=function(X){return B.apply(this,arguments)}(ie)),this.originValidationPromises[se]}attachCallbackListeners(ie,se){const{universalLinks:Ae,handleOpenURL:et,BuildInfo:Et}=L(),Rt=setTimeout((0,a.Z)(function*(){yield Re(ie),se.onEvent(Ve())}),500),at=function(){var Pn=(0,a.Z)(function*(yn){clearTimeout(Rt);const ir=yield Re(ie);let ot=null;ir&&(null==yn?void 0:yn.url)&&(ot=function(X,ie){var se,Ae;const et=function(X){const ie=Je(X),se=ie.link?decodeURIComponent(ie.link):void 0,Ae=Je(se).link,et=ie.deep_link_id?decodeURIComponent(ie.deep_link_id):void 0;return Je(et).link||et||Ae||se||X}(ie);if(et.includes("/__/auth/callback")){const Et=Je(et),Rt=Et.firebaseError?function(X){try{return JSON.parse(X)}catch(ie){return null}}(decodeURIComponent(Et.firebaseError)):null,at=null===(Ae=null===(se=null==Rt?void 0:Rt.code)||void 0===se?void 0:se.split("auth/"))||void 0===Ae?void 0:Ae[1],rn=at?(0,k.av)(at):null;return rn?{type:X.type,eventId:X.eventId,tenantId:X.tenantId,error:rn,urlResponse:null,sessionId:null,postBody:null}:{type:X.type,eventId:X.eventId,tenantId:X.tenantId,sessionId:X.sessionId,urlResponse:et,postBody:null}}return null}(ir,yn.url)),se.onEvent(ot||Ve())});return function(ir){return Pn.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,at);const rn=et,jn=`${Et.packageName.toLowerCase()}://`;L().handleOpenURL=function(){var Pn=(0,a.Z)(function*(yn){if(yn.toLowerCase().startsWith(jn)&&at({url:yn}),"function"==typeof rn)try{rn(yn)}catch(ir){console.error(ir)}});return function(yn){return Pn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aA}_initialize(ie){var se=this;return(0,a.Z)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._initialize(ie)})()}_openPopup(ie,se,Ae,et){var Et=this;return(0,a.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openPopup(ie,se,Ae,et)})()}_openRedirect(ie,se,Ae,et){var Et=this;return(0,a.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openRedirect(ie,se,Ae,et)})()}_isIframeWebStorageSupported(ie,se){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ie,se)}_originValidation(ie){return this.assertedUnderlyingResolver._originValidation(ie)}get _shouldInitProactively(){return Kn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return it(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ie=this;return(0,a.Z)(function*(){if(ie.underlyingResolver)return;const se=yield function(){return gt.apply(this,arguments)}();ie.underlyingResolver=se?ie.cordovaResolver:ie.browserResolver})()}}function Mr(X){return X.unwrap()}function _n(X){return hr(X)}function hr(X){const{_tokenResponse:ie}=X instanceof K.ZR?X.customData:X;if(!ie)return null;if(!(X instanceof K.ZR)&&"temporaryProof"in ie&&"phoneNumber"in ie)return k.P.credentialFromResult(X);const se=ie.providerId;if(!se||se===k.o.PASSWORD)return null;let Ae;switch(se){case k.o.GOOGLE:Ae=k.N;break;case k.o.FACEBOOK:Ae=k.M;break;case k.o.GITHUB:Ae=k.Q;break;case k.o.TWITTER:Ae=k.V;break;default:const{oauthIdToken:et,oauthAccessToken:Et,oauthTokenSecret:Rt,pendingToken:at,nonce:rn}=ie;return Et||Rt||et||at?at?se.startsWith("saml.")?k.aJ._create(se,at):k.I._fromParams({providerId:se,signInMethod:se,pendingToken:at,idToken:et,accessToken:Et}):new k.T(se).credential({idToken:et,accessToken:Et,rawNonce:rn}):null}return X instanceof K.ZR?Ae.credentialFromError(X):Ae.credentialFromResult(X)}function rr(X,ie){return ie.catch(se=>{throw se instanceof K.ZR&&function(X,ie){var se;const Ae=null===(se=ie.customData)||void 0===se?void 0:se._tokenResponse;if("auth/multi-factor-auth-required"===ie.code)ie.resolver=new Wt(X,k.am(X,ie));else if(Ae){const et=hr(ie),Et=ie;et&&(Et.credential=et,Et.tenantId=Ae.tenantId||void 0,Et.email=Ae.email||void 0,Et.phoneNumber=Ae.phoneNumber||void 0)}}(X,se),se}).then(se=>{const et=se.user;return{operationType:se.operationType,credential:_n(se),additionalUserInfo:k.ak(se),user:rt.getOrCreate(et)}})}function cn(X,ie){return St.apply(this,arguments)}function St(){return(St=(0,a.Z)(function*(X,ie){const se=yield ie;return{verificationId:se.verificationId,confirm:Ae=>rr(X,se.confirm(Ae))}})).apply(this,arguments)}class Wt{constructor(ie,se){this.resolver=se,this.auth=ie.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ie){return rr(Mr(this.auth),this.resolver.resolveSignIn(ie))}}class rt{constructor(ie){this._delegate=ie,this.multiFactor=k.an(ie)}static getOrCreate(ie){return rt.USER_MAP.has(ie)||rt.USER_MAP.set(ie,new rt(ie)),rt.USER_MAP.get(ie)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ie){return this._delegate.getIdTokenResult(ie)}getIdToken(ie){return this._delegate.getIdToken(ie)}linkAndRetrieveDataWithCredential(ie){return this.linkWithCredential(ie)}linkWithCredential(ie){var se=this;return(0,a.Z)(function*(){return rr(se.auth,k.Y(se._delegate,ie))})()}linkWithPhoneNumber(ie,se){var Ae=this;return(0,a.Z)(function*(){return cn(Ae.auth,k.l(Ae._delegate,ie,se))})()}linkWithPopup(ie){var se=this;return(0,a.Z)(function*(){return rr(se.auth,k.d(se._delegate,ie,xt))})()}linkWithRedirect(ie){var se=this;return(0,a.Z)(function*(){return yield or(k.aC(se.auth)),k.g(se._delegate,ie,xt)})()}reauthenticateAndRetrieveDataWithCredential(ie){return this.reauthenticateWithCredential(ie)}reauthenticateWithCredential(ie){var se=this;return(0,a.Z)(function*(){return rr(se.auth,k.Z(se._delegate,ie))})()}reauthenticateWithPhoneNumber(ie,se){return cn(this.auth,k.r(this._delegate,ie,se))}reauthenticateWithPopup(ie){return rr(this.auth,k.e(this._delegate,ie,xt))}reauthenticateWithRedirect(ie){var se=this;return(0,a.Z)(function*(){return yield or(k.aC(se.auth)),k.h(se._delegate,ie,xt)})()}sendEmailVerification(ie){return k.aa(this._delegate,ie)}unlink(ie){var se=this;return(0,a.Z)(function*(){return yield k.aj(se._delegate,ie),se})()}updateEmail(ie){return k.af(this._delegate,ie)}updatePassword(ie){return k.ag(this._delegate,ie)}updatePhoneNumber(ie){return k.u(this._delegate,ie)}updateProfile(ie){return k.ae(this._delegate,ie)}verifyBeforeUpdateEmail(ie,se){return k.ab(this._delegate,ie,se)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rt.USER_MAP=new WeakMap;const qe=k.aw;let _t=(()=>{class X{constructor(se,Ae){if(this.app=se,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:et}=se.options;qe(et,"invalid-api-key",{appName:se.name}),qe(et,"invalid-api-key",{appName:se.name});const Et="undefined"!=typeof window?xt:void 0;this._delegate=Ae.initialize({options:{persistence:Lt(et,se.name),popupRedirectResolver:Et}}),this._delegate._updateErrorMap(k.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(se){this._delegate.languageCode=se}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(se){this._delegate.tenantId=se}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(se,Ae){k.E(this._delegate,se,Ae)}applyActionCode(se){return k.a1(this._delegate,se)}checkActionCode(se){return k.a2(this._delegate,se)}confirmPasswordReset(se,Ae){return k.a0(this._delegate,se,Ae)}createUserWithEmailAndPassword(se,Ae){var et=this;return(0,a.Z)(function*(){return rr(et._delegate,k.a4(et._delegate,se,Ae))})()}fetchProvidersForEmail(se){return this.fetchSignInMethodsForEmail(se)}fetchSignInMethodsForEmail(se){return k.a9(this._delegate,se)}isSignInWithEmailLink(se){return k.a7(this._delegate,se)}getRedirectResult(){var se=this;return(0,a.Z)(function*(){qe(ze(),se._delegate,"operation-not-supported-in-this-environment");const Ae=yield k.j(se._delegate,xt);return Ae?rr(se._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(se){!function(X,ie){(0,k.aC)(X)._logFramework(ie)}(this._delegate,se)}onAuthStateChanged(se,Ae,et){const{next:Et,error:Rt,complete:at}=Nt(se,Ae,et);return this._delegate.onAuthStateChanged(Et,Rt,at)}onIdTokenChanged(se,Ae,et){const{next:Et,error:Rt,complete:at}=Nt(se,Ae,et);return this._delegate.onIdTokenChanged(Et,Rt,at)}sendSignInLinkToEmail(se,Ae){return k.a6(this._delegate,se,Ae)}sendPasswordResetEmail(se,Ae){return k.$(this._delegate,se,Ae||void 0)}setPersistence(se){var Ae=this;return(0,a.Z)(function*(){let et;switch(function(X,ie){ln(Object.values(mn).includes(ie),X,"invalid-persistence-type"),(0,K.b$)()?ln(ie!==mn.SESSION,X,"unsupported-persistence-type"):(0,K.UG)()?ln(ie===mn.NONE,X,"unsupported-persistence-type"):Yn()?ln(ie===mn.NONE||ie===mn.LOCAL&&(0,K.hl)(),X,"unsupported-persistence-type"):ln(ie===mn.NONE||Mn(),X,"unsupported-persistence-type")}(Ae._delegate,se),se){case mn.SESSION:et=k.a;break;case mn.LOCAL:et=(yield k.ax(k.i)._isAvailable())?k.i:k.b;break;case mn.NONE:et=k.K;break;default:return k.as("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(et)})()}signInAndRetrieveDataWithCredential(se){return this.signInWithCredential(se)}signInAnonymously(){return rr(this._delegate,k.W(this._delegate))}signInWithCredential(se){return rr(this._delegate,k.X(this._delegate,se))}signInWithCustomToken(se){return rr(this._delegate,k._(this._delegate,se))}signInWithEmailAndPassword(se,Ae){return rr(this._delegate,k.a5(this._delegate,se,Ae))}signInWithEmailLink(se,Ae){return rr(this._delegate,k.a8(this._delegate,se,Ae))}signInWithPhoneNumber(se,Ae){return cn(this._delegate,k.s(this._delegate,se,Ae))}signInWithPopup(se){var Ae=this;return(0,a.Z)(function*(){return qe(ze(),Ae._delegate,"operation-not-supported-in-this-environment"),rr(Ae._delegate,k.c(Ae._delegate,se,xt))})()}signInWithRedirect(se){var Ae=this;return(0,a.Z)(function*(){return qe(ze(),Ae._delegate,"operation-not-supported-in-this-environment"),yield or(Ae._delegate),k.f(Ae._delegate,se,xt)})()}updateCurrentUser(se){return this._delegate.updateCurrentUser(se)}verifyPasswordResetCode(se){return k.a3(this._delegate,se)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return X.Persistence=mn,X})();function Nt(X,ie,se){let Ae=X;"function"!=typeof X&&({next:Ae,error:ie,complete:se}=X);const et=Ae;return{next:Rt=>et(Rt&&rt.getOrCreate(Rt)),error:ie,complete:se}}function Lt(X,ie){const se=function(X,ie){const se=En();if(!se)return[];const Ae=k.ay(nr,X,ie);switch(se.getItem(Ae)){case mn.NONE:return[k.K];case mn.LOCAL:return[k.i,k.a];case mn.SESSION:return[k.a];default:return[]}}(X,ie);if("undefined"!=typeof self&&!se.includes(k.i)&&se.push(k.i),"undefined"!=typeof window)for(const Ae of[k.b,k.a])se.includes(Ae)||se.push(Ae);return se.includes(k.K)||se.push(k.K),se}class en{constructor(){this.providerId="phone",this._delegate=new k.P(Mr(M.Z.auth()))}static credential(ie,se){return k.P.credential(ie,se)}verifyPhoneNumber(ie,se){return this._delegate.verifyPhoneNumber(ie,se)}unwrap(){return this._delegate}}en.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,en.PROVIDER_ID=k.P.PROVIDER_ID;const pe=k.aw;var X;(X=M.Z).INTERNAL.registerComponent(new ee.wA("auth-compat",ie=>{const se=ie.getProvider("app-compat").getImmediate(),Ae=ie.getProvider("auth");return new _t(se,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.L,FacebookAuthProvider:k.M,GithubAuthProvider:k.Q,GoogleAuthProvider:k.N,OAuthProvider:k.T,SAMLAuthProvider:k.U,PhoneAuthProvider:en,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:class{constructor(ie,se,Ae=M.Z.app()){var et;pe(null===(et=Ae.options)||void 0===et?void 0:et.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new k.R(ie,se,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:k.V,Auth:_t,AuthCredential:k.G,Error:K.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),X.registerVersion("@firebase/auth-compat","0.2.12")},1593:(Fe,me,O)=>{"use strict";O.d(me,{P:()=>ee});var a=O(9193),M=O(5917),k=O(7574);class ee{constructor(U,R,N){this.kind=U,this.value=R,this.error=N,this.hasValue="N"===U}observe(U){switch(this.kind){case"N":return U.next&&U.next(this.value);case"E":return U.error&&U.error(this.error);case"C":return U.complete&&U.complete()}}do(U,R,N){switch(this.kind){case"N":return U&&U(this.value);case"E":return R&&R(this.error);case"C":return N&&N()}}accept(U,R,N){return U&&"function"==typeof U.next?this.observe(U):this.do(U,R,N)}toObservable(){switch(this.kind){case"N":return(0,M.of)(this.value);case"E":return L=this.error,new k.y(R=>R.error(L));case"C":return(0,a.c)()}var L;throw new Error("unexpected notification kind value")}static createNext(U){return void 0!==U?new ee("N",U):ee.undefinedValueNotification}static createError(U){return new ee("E",void 0,U)}static createComplete(){return ee.completeNotification}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0)},7574:(Fe,me,O)=>{"use strict";O.d(me,{y:()=>N});var a=O(7393),k=O(9181),K=O(6490),Z=O(6554),ee=O(4487);var R=O(2494);let N=(()=>{class B{constructor(Y){this._isScalar=!1,Y&&(this._subscribe=Y)}lift(Y){const ne=new B;return ne.source=this,ne.operator=Y,ne}subscribe(Y,ne,ae){const{operator:H}=this,G=function(B,z,Y){if(B){if(B instanceof a.L)return B;if(B[k.b])return B[k.b]()}return B||z||Y?new a.L(B,z,Y):new a.L(K.c)}(Y,ne,ae);if(G.add(H?H.call(G,this.source):this.source||R.v.useDeprecatedSynchronousErrorHandling&&!G.syncErrorThrowable?this._subscribe(G):this._trySubscribe(G)),R.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable&&(G.syncErrorThrowable=!1,G.syncErrorThrown))throw G.syncErrorValue;return G}_trySubscribe(Y){try{return this._subscribe(Y)}catch(ne){R.v.useDeprecatedSynchronousErrorHandling&&(Y.syncErrorThrown=!0,Y.syncErrorValue=ne),function(B){for(;B;){const{closed:z,destination:Y,isStopped:ne}=B;if(z||ne)return!1;B=Y&&Y instanceof a.L?Y:null}return!0}(Y)?Y.error(ne):console.warn(ne)}}forEach(Y,ne){return new(ne=S(ne))((ae,H)=>{let G;G=this.subscribe(ue=>{try{Y(ue)}catch(he){H(he),G&&G.unsubscribe()}},H,ae)})}_subscribe(Y){const{source:ne}=this;return ne&&ne.subscribe(Y)}[Z.L](){return this}pipe(...Y){return 0===Y.length?this:function(B){return 0===B.length?ee.y:1===B.length?B[0]:function(Y){return B.reduce((ne,ae)=>ae(ne),Y)}}(Y)(this)}toPromise(Y){return new(Y=S(Y))((ne,ae)=>{let H;this.subscribe(G=>H=G,G=>ae(G),()=>ne(H))})}}return B.create=z=>new B(z),B})();function S(B){if(B||(B=R.v.Promise||Promise),!B)throw new Error("no Promise impl found");return B}},6490:(Fe,me,O)=>{"use strict";O.d(me,{c:()=>k});var a=O(2494),M=O(4449);const k={closed:!0,next(K){},error(K){if(a.v.useDeprecatedSynchronousErrorHandling)throw K;(0,M.z)(K)},complete(){}}},9765:(Fe,me,O)=>{"use strict";O.d(me,{Yc:()=>ee,xQ:()=>L,ug:()=>U});var a=O(7574),M=O(7393),k=O(5319),K=O(7971),te=O(8858),Z=O(9181);class ee extends M.L{constructor(N){super(N),this.destination=N}}let L=(()=>{class R extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Z.b](){return new ee(this)}lift(S){const B=new U(this,this);return B.operator=S,B}next(S){if(this.closed)throw new K.N;if(!this.isStopped){const{observers:B}=this,z=B.length,Y=B.slice();for(let ne=0;ne<z;ne++)Y[ne].next(S)}}error(S){if(this.closed)throw new K.N;this.hasError=!0,this.thrownError=S,this.isStopped=!0;const{observers:B}=this,z=B.length,Y=B.slice();for(let ne=0;ne<z;ne++)Y[ne].error(S);this.observers.length=0}complete(){if(this.closed)throw new K.N;this.isStopped=!0;const{observers:S}=this,B=S.length,z=S.slice();for(let Y=0;Y<B;Y++)z[Y].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(S){if(this.closed)throw new K.N;return super._trySubscribe(S)}_subscribe(S){if(this.closed)throw new K.N;return this.hasError?(S.error(this.thrownError),k.w.EMPTY):this.isStopped?(S.complete(),k.w.EMPTY):(this.observers.push(S),new te.W(this,S))}asObservable(){const S=new a.y;return S.source=this,S}}return R.create=(N,S)=>new U(N,S),R})();class U extends L{constructor(N,S){super(),this.destination=N,this.source=S}next(N){const{destination:S}=this;S&&S.next&&S.next(N)}error(N){const{destination:S}=this;S&&S.error&&this.destination.error(N)}complete(){const{destination:N}=this;N&&N.complete&&this.destination.complete()}_subscribe(N){const{source:S}=this;return S?this.source.subscribe(N):k.w.EMPTY}}},8858:(Fe,me,O)=>{"use strict";O.d(me,{W:()=>M});var a=O(5319);class M extends a.w{constructor(K,te){super(),this.subject=K,this.subscriber=te,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const K=this.subject,te=K.observers;if(this.subject=null,!te||0===te.length||K.isStopped||K.closed)return;const Z=te.indexOf(this.subscriber);-1!==Z&&te.splice(Z,1)}}},7393:(Fe,me,O)=>{"use strict";O.d(me,{L:()=>ee});var a=O(9105),M=O(6490),k=O(5319),K=O(9181),te=O(2494),Z=O(4449);class ee extends k.w{constructor(R,N,S){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=M.c;break;case 1:if(!R){this.destination=M.c;break}if("object"==typeof R){R instanceof ee?(this.syncErrorThrowable=R.syncErrorThrowable,this.destination=R,R.add(this)):(this.syncErrorThrowable=!0,this.destination=new L(this,R));break}default:this.syncErrorThrowable=!0,this.destination=new L(this,R,N,S)}}[K.b](){return this}static create(R,N,S){const B=new ee(R,N,S);return B.syncErrorThrowable=!1,B}next(R){this.isStopped||this._next(R)}error(R){this.isStopped||(this.isStopped=!0,this._error(R))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(R){this.destination.next(R)}_error(R){this.destination.error(R),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:R}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=R,this}}class L extends ee{constructor(R,N,S,B){super(),this._parentSubscriber=R;let z,Y=this;(0,a.m)(N)?z=N:N&&(z=N.next,S=N.error,B=N.complete,N!==M.c&&(Y=Object.create(N),(0,a.m)(Y.unsubscribe)&&this.add(Y.unsubscribe.bind(Y)),Y.unsubscribe=this.unsubscribe.bind(this))),this._context=Y,this._next=z,this._error=S,this._complete=B}next(R){if(!this.isStopped&&this._next){const{_parentSubscriber:N}=this;te.v.useDeprecatedSynchronousErrorHandling&&N.syncErrorThrowable?this.__tryOrSetError(N,this._next,R)&&this.unsubscribe():this.__tryOrUnsub(this._next,R)}}error(R){if(!this.isStopped){const{_parentSubscriber:N}=this,{useDeprecatedSynchronousErrorHandling:S}=te.v;if(this._error)S&&N.syncErrorThrowable?(this.__tryOrSetError(N,this._error,R),this.unsubscribe()):(this.__tryOrUnsub(this._error,R),this.unsubscribe());else if(N.syncErrorThrowable)S?(N.syncErrorValue=R,N.syncErrorThrown=!0):(0,Z.z)(R),this.unsubscribe();else{if(this.unsubscribe(),S)throw R;(0,Z.z)(R)}}}complete(){if(!this.isStopped){const{_parentSubscriber:R}=this;if(this._complete){const N=()=>this._complete.call(this._context);te.v.useDeprecatedSynchronousErrorHandling&&R.syncErrorThrowable?(this.__tryOrSetError(R,N),this.unsubscribe()):(this.__tryOrUnsub(N),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(R,N){try{R.call(this._context,N)}catch(S){if(this.unsubscribe(),te.v.useDeprecatedSynchronousErrorHandling)throw S;(0,Z.z)(S)}}__tryOrSetError(R,N,S){if(!te.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{N.call(this._context,S)}catch(B){return te.v.useDeprecatedSynchronousErrorHandling?(R.syncErrorValue=B,R.syncErrorThrown=!0,!0):((0,Z.z)(B),!0)}return!1}_unsubscribe(){const{_parentSubscriber:R}=this;this._context=null,this._parentSubscriber=null,R.unsubscribe()}}},5319:(Fe,me,O)=>{"use strict";O.d(me,{w:()=>Z});var a=O(9796),M=O(1555),k=O(9105);const te=(()=>{function L(U){return Error.call(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((R,N)=>`${N+1}) ${R.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U,this}return L.prototype=Object.create(Error.prototype),L})();class Z{constructor(U){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,U&&(this._ctorUnsubscribe=!0,this._unsubscribe=U)}unsubscribe(){let U;if(this.closed)return;let{_parentOrParents:R,_ctorUnsubscribe:N,_unsubscribe:S,_subscriptions:B}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,R instanceof Z)R.remove(this);else if(null!==R)for(let z=0;z<R.length;++z)R[z].remove(this);if((0,k.m)(S)){N&&(this._unsubscribe=void 0);try{S.call(this)}catch(z){U=z instanceof te?ee(z.errors):[z]}}if((0,a.k)(B)){let z=-1,Y=B.length;for(;++z<Y;){const ne=B[z];if((0,M.K)(ne))try{ne.unsubscribe()}catch(ae){U=U||[],ae instanceof te?U=U.concat(ee(ae.errors)):U.push(ae)}}}if(U)throw new te(U)}add(U){let R=U;if(!U)return Z.EMPTY;switch(typeof U){case"function":R=new Z(U);case"object":if(R===this||R.closed||"function"!=typeof R.unsubscribe)return R;if(this.closed)return R.unsubscribe(),R;if(!(R instanceof Z)){const B=R;R=new Z,R._subscriptions=[B]}break;default:throw new Error("unrecognized teardown "+U+" added to Subscription.")}let{_parentOrParents:N}=R;if(null===N)R._parentOrParents=this;else if(N instanceof Z){if(N===this)return R;R._parentOrParents=[N,this]}else{if(-1!==N.indexOf(this))return R;N.push(this)}const S=this._subscriptions;return null===S?this._subscriptions=[R]:S.push(R),R}remove(U){const R=this._subscriptions;if(R){const N=R.indexOf(U);-1!==N&&R.splice(N,1)}}}var L;function ee(L){return L.reduce((U,R)=>U.concat(R instanceof te?R.errors:R),[])}Z.EMPTY=((L=new Z).closed=!0,L)},2494:(Fe,me,O)=>{"use strict";O.d(me,{v:()=>M});let a=!1;const M={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const K=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+K.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=k},get useDeprecatedSynchronousErrorHandling(){return a}}},5345:(Fe,me,O)=>{"use strict";O.d(me,{IY:()=>K,Ds:()=>Z,ft:()=>L});var a=O(7393),M=O(7574),k=O(7444);class K extends a.L{constructor(R){super(),this.parent=R}_next(R){this.parent.notifyNext(R)}_error(R){this.parent.notifyError(R),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Z extends a.L{notifyNext(R){this.destination.next(R)}notifyError(R){this.destination.error(R)}notifyComplete(){this.destination.complete()}}function L(U,R){if(R.closed)return;if(U instanceof M.y)return U.subscribe(R);let N;try{N=(0,k.s)(U)(R)}catch(S){R.error(S)}return N}},2441:(Fe,me,O)=>{"use strict";O.d(me,{c:()=>te,N:()=>Z});var a=O(9765),M=O(7574),k=O(5319),K=O(1307);class te extends M.y{constructor(N,S){super(),this.source=N,this.subjectFactory=S,this._refCount=0,this._isComplete=!1}_subscribe(N){return this.getSubject().subscribe(N)}getSubject(){const N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let N=this._connection;return N||(this._isComplete=!1,N=this._connection=new k.w,N.add(this.source.subscribe(new ee(this.getSubject(),this))),N.closed&&(this._connection=null,N=k.w.EMPTY)),N}refCount(){return(0,K.x)()(this)}}const Z=(()=>{const R=te.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:R._subscribe},_isComplete:{value:R._isComplete,writable:!0},getSubject:{value:R.getSubject},connect:{value:R.connect},refCount:{value:R.refCount}}})();class ee extends a.Yc{constructor(N,S){super(N),this.connectable=S}_error(N){this._unsubscribe(),super._error(N)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const N=this.connectable;if(N){this.connectable=null;const S=N._connection;N._refCount=0,N._subject=null,N._connection=null,S&&S.unsubscribe()}}}},9193:(Fe,me,O)=>{"use strict";O.d(me,{E:()=>M,c:()=>k});var a=O(7574);const M=new a.y(te=>te.complete());function k(te){return te?function(te){return new a.y(Z=>te.schedule(()=>Z.complete()))}(te):M}},4402:(Fe,me,O)=>{"use strict";O.d(me,{D:()=>Y});var a=O(7574),M=O(7444),k=O(5319),K=O(6554),ee=O(4087),L=O(377),N=O(4072),S=O(9489);function Y(ne,ae){return ae?function(ne,ae){if(null!=ne){if(function(ne){return ne&&"function"==typeof ne[K.L]}(ne))return function(ne,ae){return new a.y(H=>{const G=new k.w;return G.add(ae.schedule(()=>{const ue=ne[K.L]();G.add(ue.subscribe({next(he){G.add(ae.schedule(()=>H.next(he)))},error(he){G.add(ae.schedule(()=>H.error(he)))},complete(){G.add(ae.schedule(()=>H.complete()))}}))})),G})}(ne,ae);if((0,N.t)(ne))return function(ne,ae){return new a.y(H=>{const G=new k.w;return G.add(ae.schedule(()=>ne.then(ue=>{G.add(ae.schedule(()=>{H.next(ue),G.add(ae.schedule(()=>H.complete()))}))},ue=>{G.add(ae.schedule(()=>H.error(ue)))}))),G})}(ne,ae);if((0,S.z)(ne))return(0,ee.r)(ne,ae);if(function(ne){return ne&&"function"==typeof ne[L.hZ]}(ne)||"string"==typeof ne)return function(ne,ae){if(!ne)throw new Error("Iterable cannot be null");return new a.y(H=>{const G=new k.w;let ue;return G.add(()=>{ue&&"function"==typeof ue.return&&ue.return()}),G.add(ae.schedule(()=>{ue=ne[L.hZ](),G.add(ae.schedule(function(){if(H.closed)return;let he,we;try{const _e=ue.next();he=_e.value,we=_e.done}catch(_e){return void H.error(_e)}we?H.complete():(H.next(he),this.schedule())}))})),G})}(ne,ae)}throw new TypeError((null!==ne&&typeof ne||ne)+" is not observable")}(ne,ae):ne instanceof a.y?ne:new a.y((0,M.s)(ne))}},6693:(Fe,me,O)=>{"use strict";O.d(me,{n:()=>K});var a=O(7574),M=O(5015),k=O(4087);function K(te,Z){return Z?(0,k.r)(te,Z):new a.y((0,M.V)(te))}},6682:(Fe,me,O)=>{"use strict";O.d(me,{T:()=>te});var a=O(7574),M=O(4869),k=O(3282),K=O(6693);function te(...Z){let ee=Number.POSITIVE_INFINITY,L=null,U=Z[Z.length-1];return(0,M.K)(U)?(L=Z.pop(),Z.length>1&&"number"==typeof Z[Z.length-1]&&(ee=Z.pop())):"number"==typeof U&&(ee=Z.pop()),null===L&&1===Z.length&&Z[0]instanceof a.y?Z[0]:(0,k.J)(ee)((0,K.n)(Z,L))}},5917:(Fe,me,O)=>{"use strict";O.d(me,{of:()=>K});var a=O(4869),M=O(6693),k=O(4087);function K(...te){let Z=te[te.length-1];return(0,a.K)(Z)?(te.pop(),(0,k.r)(te,Z)):(0,M.n)(te)}},8002:(Fe,me,O)=>{"use strict";O.d(me,{U:()=>M});var a=O(7393);function M(te,Z){return function(L){if("function"!=typeof te)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return L.lift(new k(te,Z))}}class k{constructor(Z,ee){this.project=Z,this.thisArg=ee}call(Z,ee){return ee.subscribe(new K(Z,this.project,this.thisArg))}}class K extends a.L{constructor(Z,ee,L){super(Z),this.project=ee,this.count=0,this.thisArg=L||this}_next(Z){let ee;try{ee=this.project.call(this.thisArg,Z,this.count++)}catch(L){return void this.destination.error(L)}this.destination.next(ee)}}},3282:(Fe,me,O)=>{"use strict";O.d(me,{J:()=>k});var a=O(9773),M=O(4487);function k(K=Number.POSITIVE_INFINITY){return(0,a.zg)(M.y,K)}},9773:(Fe,me,O)=>{"use strict";O.d(me,{zg:()=>K});var a=O(8002),M=O(4402),k=O(5345);function K(L,U,R=Number.POSITIVE_INFINITY){return"function"==typeof U?N=>N.pipe(K((S,B)=>(0,M.D)(L(S,B)).pipe((0,a.U)((z,Y)=>U(S,z,B,Y))),R)):("number"==typeof U&&(R=U),N=>N.lift(new te(L,R)))}class te{constructor(U,R=Number.POSITIVE_INFINITY){this.project=U,this.concurrent=R}call(U,R){return R.subscribe(new Z(U,this.project,this.concurrent))}}class Z extends k.Ds{constructor(U,R,N=Number.POSITIVE_INFINITY){super(U),this.project=R,this.concurrent=N,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(U){this.active<this.concurrent?this._tryNext(U):this.buffer.push(U)}_tryNext(U){let R;const N=this.index++;try{R=this.project(U,N)}catch(S){return void this.destination.error(S)}this.active++,this._innerSub(R)}_innerSub(U){const R=new k.IY(this),N=this.destination;N.add(R);const S=(0,k.ft)(U,R);S!==R&&N.add(S)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(U){this.destination.next(U)}notifyComplete(){const U=this.buffer;this.active--,U.length>0?this._next(U.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(Fe,me,O)=>{"use strict";O.d(me,{QV:()=>k,ht:()=>te});var a=O(7393),M=O(1593);function k(ee,L=0){return function(R){return R.lift(new K(ee,L))}}class K{constructor(L,U=0){this.scheduler=L,this.delay=U}call(L,U){return U.subscribe(new te(L,this.scheduler,this.delay))}}class te extends a.L{constructor(L,U,R=0){super(L),this.scheduler=U,this.delay=R}static dispatch(L){const{notification:U,destination:R}=L;U.observe(R),this.unsubscribe()}scheduleMessage(L){this.destination.add(this.scheduler.schedule(te.dispatch,this.delay,new Z(L,this.destination)))}_next(L){this.scheduleMessage(M.P.createNext(L))}_error(L){this.scheduleMessage(M.P.createError(L)),this.unsubscribe()}_complete(){this.scheduleMessage(M.P.createComplete()),this.unsubscribe()}}class Z{constructor(L,U){this.notification=L,this.destination=U}}},1307:(Fe,me,O)=>{"use strict";O.d(me,{x:()=>M});var a=O(7393);function M(){return function(Z){return Z.lift(new k(Z))}}class k{constructor(Z){this.connectable=Z}call(Z,ee){const{connectable:L}=this;L._refCount++;const U=new K(Z,L),R=ee.subscribe(U);return U.closed||(U.connection=L.connect()),R}}class K extends a.L{constructor(Z,ee){super(Z),this.connectable=ee}_unsubscribe(){const{connectable:Z}=this;if(!Z)return void(this.connection=null);this.connectable=null;const ee=Z._refCount;if(ee<=0)return void(this.connection=null);if(Z._refCount=ee-1,ee>1)return void(this.connection=null);const{connection:L}=this,U=Z._connection;this.connection=null,U&&(!L||U===L)&&U.unsubscribe()}}},8819:(Fe,me,O)=>{"use strict";O.d(me,{B:()=>ee});var a=O(2441);var K=O(1307),te=O(9765);function Z(){return new te.xQ}function ee(){return L=>(0,K.x)()(function(L,U){return function(N){let S;S="function"==typeof L?L:function(){return L};const B=Object.create(N,a.N);return B.source=N,B.subjectFactory=S,B}}(Z)(L))}},2639:(Fe,me,O)=>{"use strict";O.d(me,{R:()=>ne});var a=O(7574);let M=1;const k=Promise.resolve(),K={};function te(H){return H in K&&(delete K[H],!0)}const Z={setImmediate(H){const G=M++;return K[G]=!0,k.then(()=>te(G)&&H()),G},clearImmediate(H){te(H)}};var L=O(6465),R=O(6102);const B=new class extends R.v{flush(G){this.active=!0,this.scheduled=void 0;const{actions:ue}=this;let he,we=-1,_e=ue.length;G=G||ue.shift();do{if(he=G.execute(G.state,G.delay))break}while(++we<_e&&(G=ue.shift()));if(this.active=!1,he){for(;++we<_e&&(G=ue.shift());)G.unsubscribe();throw he}}}(class extends L.o{constructor(G,ue){super(G,ue),this.scheduler=G,this.work=ue}requestAsyncId(G,ue,he=0){return null!==he&&he>0?super.requestAsyncId(G,ue,he):(G.actions.push(this),G.scheduled||(G.scheduled=Z.setImmediate(G.flush.bind(G,null))))}recycleAsyncId(G,ue,he=0){if(null!==he&&he>0||null===he&&this.delay>0)return super.recycleAsyncId(G,ue,he);0===G.actions.length&&(Z.clearImmediate(ue),G.scheduled=void 0)}});var z=O(6561);class Y extends a.y{constructor(G,ue=0,he=B){super(),this.source=G,this.delayTime=ue,this.scheduler=he,(!(0,z.k)(ue)||ue<0)&&(this.delayTime=0),(!he||"function"!=typeof he.schedule)&&(this.scheduler=B)}static create(G,ue=0,he=B){return new Y(G,ue,he)}static dispatch(G){const{source:ue,subscriber:he}=G;return this.add(ue.subscribe(he))}_subscribe(G){return this.scheduler.schedule(Y.dispatch,this.delayTime,{source:this.source,subscriber:G})}}function ne(H,G=0){return function(he){return he.lift(new ae(H,G))}}class ae{constructor(G,ue){this.scheduler=G,this.delay=ue}call(G,ue){return new Y(ue,this.delay,this.scheduler).subscribe(G)}}},8307:(Fe,me,O)=>{"use strict";O.d(me,{b:()=>K});var a=O(7393),M=O(8640),k=O(9105);function K(ee,L,U){return function(N){return N.lift(new te(ee,L,U))}}class te{constructor(L,U,R){this.nextOrObserver=L,this.error=U,this.complete=R}call(L,U){return U.subscribe(new Z(L,this.nextOrObserver,this.error,this.complete))}}class Z extends a.L{constructor(L,U,R,N){super(L),this._tapNext=M.Z,this._tapError=M.Z,this._tapComplete=M.Z,this._tapError=R||M.Z,this._tapComplete=N||M.Z,(0,k.m)(U)?(this._context=this,this._tapNext=U):U&&(this._context=U,this._tapNext=U.next||M.Z,this._tapError=U.error||M.Z,this._tapComplete=U.complete||M.Z)}_next(L){try{this._tapNext.call(this._context,L)}catch(U){return void this.destination.error(U)}this.destination.next(L)}_error(L){try{this._tapError.call(this._context,L)}catch(U){return void this.destination.error(U)}this.destination.error(L)}_complete(){try{this._tapComplete.call(this._context)}catch(L){return void this.destination.error(L)}return this.destination.complete()}}},4087:(Fe,me,O)=>{"use strict";O.d(me,{r:()=>k});var a=O(7574),M=O(5319);function k(K,te){return new a.y(Z=>{const ee=new M.w;let L=0;return ee.add(te.schedule(function(){L!==K.length?(Z.next(K[L++]),Z.closed||ee.add(this.schedule())):Z.complete()})),ee})}},6465:(Fe,me,O)=>{"use strict";O.d(me,{o:()=>k});var a=O(5319);class M extends a.w{constructor(te,Z){super()}schedule(te,Z=0){return this}}class k extends M{constructor(te,Z){super(te,Z),this.scheduler=te,this.work=Z,this.pending=!1}schedule(te,Z=0){if(this.closed)return this;this.state=te;const ee=this.id,L=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(L,ee,Z)),this.pending=!0,this.delay=Z,this.id=this.id||this.requestAsyncId(L,this.id,Z),this}requestAsyncId(te,Z,ee=0){return setInterval(te.flush.bind(te,this),ee)}recycleAsyncId(te,Z,ee=0){if(null!==ee&&this.delay===ee&&!1===this.pending)return Z;clearInterval(Z)}execute(te,Z){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ee=this._execute(te,Z);if(ee)return ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,Z){let L,ee=!1;try{this.work(te)}catch(U){ee=!0,L=!!U&&U||new Error(U)}if(ee)return this.unsubscribe(),L}_unsubscribe(){const te=this.id,Z=this.scheduler,ee=Z.actions,L=ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==L&&ee.splice(L,1),null!=te&&(this.id=this.recycleAsyncId(Z,te,null)),this.delay=null}}},6102:(Fe,me,O)=>{"use strict";O.d(me,{v:()=>M});let a=(()=>{class k{constructor(te,Z=k.now){this.SchedulerAction=te,this.now=Z}schedule(te,Z=0,ee){return new this.SchedulerAction(this,te).schedule(ee,Z)}}return k.now=()=>Date.now(),k})();class M extends a{constructor(K,te=a.now){super(K,()=>M.delegate&&M.delegate!==this?M.delegate.now():te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(K,te=0,Z){return M.delegate&&M.delegate!==this?M.delegate.schedule(K,te,Z):super.schedule(K,te,Z)}flush(K){const{actions:te}=this;if(this.active)return void te.push(K);let Z;this.active=!0;do{if(Z=K.execute(K.state,K.delay))break}while(K=te.shift());if(this.active=!1,Z){for(;K=te.shift();)K.unsubscribe();throw Z}}}},3637:(Fe,me,O)=>{"use strict";O.d(me,{z:()=>k,P:()=>K});var a=O(6465);const k=new(O(6102).v)(a.o),K=k},7771:(Fe,me,O)=>{"use strict";O.d(me,{c:()=>Z,N:()=>te});var a=O(6465),k=O(6102);const te=new class extends k.v{}(class extends a.o{constructor(L,U){super(L,U),this.scheduler=L,this.work=U}schedule(L,U=0){return U>0?super.schedule(L,U):(this.delay=U,this.state=L,this.scheduler.flush(this),this)}execute(L,U){return U>0||this.closed?super.execute(L,U):this._execute(L,U)}requestAsyncId(L,U,R=0){return null!==R&&R>0||null===R&&this.delay>0?super.requestAsyncId(L,U,R):L.flush(this)}}),Z=te},377:(Fe,me,O)=>{"use strict";O.d(me,{hZ:()=>M});const M="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Fe,me,O)=>{"use strict";O.d(me,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Fe,me,O)=>{"use strict";O.d(me,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Fe,me,O)=>{"use strict";O.d(me,{N:()=>M});const M=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(Fe,me,O)=>{"use strict";function a(M){setTimeout(()=>{throw M},0)}O.d(me,{z:()=>a})},4487:(Fe,me,O)=>{"use strict";function a(M){return M}O.d(me,{y:()=>a})},9796:(Fe,me,O)=>{"use strict";O.d(me,{k:()=>a});const a=Array.isArray||(M=>M&&"number"==typeof M.length)},9489:(Fe,me,O)=>{"use strict";O.d(me,{z:()=>a});const a=M=>M&&"number"==typeof M.length&&"function"!=typeof M},9105:(Fe,me,O)=>{"use strict";function a(M){return"function"==typeof M}O.d(me,{m:()=>a})},6561:(Fe,me,O)=>{"use strict";O.d(me,{k:()=>M});var a=O(9796);function M(k){return!(0,a.k)(k)&&k-parseFloat(k)+1>=0}},1555:(Fe,me,O)=>{"use strict";function a(M){return null!==M&&"object"==typeof M}O.d(me,{K:()=>a})},4072:(Fe,me,O)=>{"use strict";function a(M){return!!M&&"function"!=typeof M.subscribe&&"function"==typeof M.then}O.d(me,{t:()=>a})},4869:(Fe,me,O)=>{"use strict";function a(M){return M&&"function"==typeof M.schedule}O.d(me,{K:()=>a})},8640:(Fe,me,O)=>{"use strict";function a(){}O.d(me,{Z:()=>a})},7444:(Fe,me,O)=>{"use strict";O.d(me,{s:()=>N});var a=O(5015),M=O(4449),K=O(377),Z=O(6554),L=O(9489),U=O(4072),R=O(1555);const N=S=>{if(S&&"function"==typeof S[Z.L])return(S=>B=>{const z=S[Z.L]();if("function"!=typeof z.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return z.subscribe(B)})(S);if((0,L.z)(S))return(0,a.V)(S);if((0,U.t)(S))return(S=>B=>(S.then(z=>{B.closed||(B.next(z),B.complete())},z=>B.error(z)).then(null,M.z),B))(S);if(S&&"function"==typeof S[K.hZ])return(S=>B=>{const z=S[K.hZ]();for(;;){let Y;try{Y=z.next()}catch(ne){return B.error(ne),B}if(Y.done){B.complete();break}if(B.next(Y.value),B.closed)break}return"function"==typeof z.return&&B.add(()=>{z.return&&z.return()}),B})(S);{const z=`You provided ${(0,R.K)(S)?"an invalid object":`'${S}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(z)}}},5015:(Fe,me,O)=>{"use strict";O.d(me,{V:()=>a});const a=M=>k=>{for(let K=0,te=M.length;K<te&&!k.closed;K++)k.next(M[K]);k.complete()}},6355:function(Fe,me){!function(O){"use strict";const a=("Number",S=>"[object Number]"===Object.prototype.toString.call(S)),M=S=>a(S)&&!Number.isNaN(S);const K=(S,B)=>S+B;function Z(S){if(S.length)return S.slice(-1)[0]}function U(S,B,z){const Y=2/(B+1);return[z].concat(function(S,B,...z){return function(Y){const ne=Math.min(...Y.map(H=>H.length)),ae=[];for(let H=0;H<ne;H++){const G=[];for(const ue of Y)G.push(ue[H]);ae.push(G)}return ae}(z).map(Y=>B=S(B,...Y))}((ne,ae)=>M(ne)?Y*ae+(1-Y)*ne:ae,z,S))}function R(S,B,z=1){let Y=S.findIndex(M);Y<0&&(Y=S.length);const ne=Math.min(Y+z-1,S.length);Y=Math.max(Y,ne);const ae=function(S){return new Array(Math.max(S,0)).fill(NaN)}(Y),H=(G=S.slice(Y+1-z,Y+1).filter(M)).length<=0?NaN:function(...S){return(B=S,B.filter(z=>"number"==typeof z).map(z=>z).filter(z=>!Number.isNaN(z))).reduce(K,0);var B}(...G)/G.length;var G;return ae.concat(U(S.slice(Y+1),B,H)).slice(0,S.length)}function N(S,B=12,z=26,Y=9,ne=!1){const ae=(he,we)=>R(he,we,ne?we:1),H=ae(S,B),G=ae(S,z),ue=H.map((he,we)=>he-G[we]);return{line:ue,signal:ae(ue,Y)}}O.ema=R,O.emaCore=U,O.macd=N,O.macdGetOneResult=function(S,B=12,z=26,Y=9,ne=!1){const ae=N(S,B,z,Y,ne);return{line:Z(ae.line)||NaN,signal:Z(ae.signal)||NaN}},Object.defineProperty(O,"__esModule",{value:!0})}(me)},3901:(Fe,me,O)=>{"use strict";var a=O(7716);let M=null;function k(){return M}const ee=new a.OlP("DocumentToken");let L=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:U,token:n,providedIn:"platform"}),n})();function U(){return(0,a.LFG)(N)}const R=new a.OlP("Location Initialized");let N=(()=>{class n extends L{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(e){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){S()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){S()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=(0,a.Yz7)({factory:B,token:n,providedIn:"platform"}),n})();function S(){return!!window.history.pushState}function B(){return new N((0,a.LFG)(ee))}function z(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Y(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function ne(n){return n&&"?"!==n[0]?"?"+n:n}let ae=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:H,token:n,providedIn:"root"}),n})();function H(n){const t=(0,a.LFG)(ee).location;return new ue((0,a.LFG)(L),t&&t.origin||"")}const G=new a.OlP("appBaseHref");let ue=(()=>{class n extends ae{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return z(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+ne(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,l){const d=this.prepareExternalUrl(i+ne(l));this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){const d=this.prepareExternalUrl(i+ne(l));this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(L),a.LFG(G,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),he=(()=>{class n extends ae{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=z(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,l){let d=this.prepareExternalUrl(i+ne(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){let d=this.prepareExternalUrl(i+ne(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(L),a.LFG(G,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(e,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Y(Re(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+ne(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Re(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ne(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ne(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ae),a.LFG(L))},n.normalizeQueryParams=ne,n.joinWithSlash=z,n.stripTrailingSlash=Y,n.\u0275prov=(0,a.Yz7)({factory:_e,token:n,providedIn:"root"}),n})();function _e(){return new we((0,a.LFG)(ae),(0,a.LFG)(L))}function Re(n){return n.replace(/\/index.html$/,"")}var de=(()=>((de=de||{})[de.Zero=0]="Zero",de[de.One=1]="One",de[de.Two=2]="Two",de[de.Few=3]="Few",de[de.Many=4]="Many",de[de.Other=5]="Other",de))(),Ee=(()=>((Ee=Ee||{})[Ee.Format=0]="Format",Ee[Ee.Standalone=1]="Standalone",Ee))(),ve=(()=>((ve=ve||{})[ve.Narrow=0]="Narrow",ve[ve.Abbreviated=1]="Abbreviated",ve[ve.Wide=2]="Wide",ve[ve.Short=3]="Short",ve))(),De=(()=>((De=De||{})[De.Short=0]="Short",De[De.Medium=1]="Medium",De[De.Long=2]="Long",De[De.Full=3]="Full",De))(),Ie=(()=>((Ie=Ie||{})[Ie.Decimal=0]="Decimal",Ie[Ie.Group=1]="Group",Ie[Ie.List=2]="List",Ie[Ie.PercentSign=3]="PercentSign",Ie[Ie.PlusSign=4]="PlusSign",Ie[Ie.MinusSign=5]="MinusSign",Ie[Ie.Exponential=6]="Exponential",Ie[Ie.SuperscriptingExponent=7]="SuperscriptingExponent",Ie[Ie.PerMille=8]="PerMille",Ie[Ie.Infinity=9]="Infinity",Ie[Ie.NaN=10]="NaN",Ie[Ie.TimeSeparator=11]="TimeSeparator",Ie[Ie.CurrencyDecimal=12]="CurrencyDecimal",Ie[Ie.CurrencyGroup=13]="CurrencyGroup",Ie))();function Mt(n,t){return fn((0,a.cg1)(n)[a.wAp.DateFormat],t)}function yt(n,t){return fn((0,a.cg1)(n)[a.wAp.TimeFormat],t)}function Ct(n,t){return fn((0,a.cg1)(n)[a.wAp.DateTimeFormat],t)}function Xt(n,t){const e=(0,a.cg1)(n),r=e[a.wAp.NumberSymbols][t];if(void 0===r){if(t===Ie.CurrencyDecimal)return e[a.wAp.NumberSymbols][Ie.Decimal];if(t===Ie.CurrencyGroup)return e[a.wAp.NumberSymbols][Ie.Group]}return r}const Yn=a.kL8;function ze(n){if(!n[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fn(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function mn(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const or=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,xn={},Yi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var En=(()=>((En=En||{})[En.Short=0]="Short",En[En.ShortGMT=1]="ShortGMT",En[En.Long=2]="Long",En[En.Extended=3]="Extended",En))(),it=(()=>((it=it||{})[it.FullYear=0]="FullYear",it[it.Month=1]="Month",it[it.Date=2]="Date",it[it.Hours=3]="Hours",it[it.Minutes=4]="Minutes",it[it.Seconds=5]="Seconds",it[it.FractionalSeconds=6]="FractionalSeconds",it[it.Day=7]="Day",it))(),xt=(()=>((xt=xt||{})[xt.DayPeriods=0]="DayPeriods",xt[xt.Days=1]="Days",xt[xt.Months=2]="Months",xt[xt.Eras=3]="Eras",xt))();function Mr(n,t,e,r){let i=function(n){if(Et(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,l=1,d=1]=n.split("-").map(f=>+f);return zr(i,l-1,d)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(or))return function(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,l=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-e,f=Number(n[5]||0)-r,g=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(t,d,f,g,b),t}(r)}const t=new Date(n);if(!Et(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=_n(e,t)||t;let f,d=[];for(;t;){if(f=Yi.exec(t),!f){d.push(t);break}{d=d.concat(f.slice(1));const D=d.pop();if(!D)break;t=D}}let g=i.getTimezoneOffset();r&&(g=X(r,g),i=function(n,t,e){const i=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*(X(t,i)-i))}(i,r));let b="";return d.forEach(D=>{const x=function(n){if(ye[n])return ye[n];let t;switch(n){case"G":case"GG":case"GGG":t=Wt(xt.Eras,ve.Abbreviated);break;case"GGGG":t=Wt(xt.Eras,ve.Wide);break;case"GGGGG":t=Wt(xt.Eras,ve.Narrow);break;case"y":t=cn(it.FullYear,1,0,!1,!0);break;case"yy":t=cn(it.FullYear,2,0,!0,!0);break;case"yyy":t=cn(it.FullYear,3,0,!1,!0);break;case"yyyy":t=cn(it.FullYear,4,0,!1,!0);break;case"Y":t=le(1);break;case"YY":t=le(2,!0);break;case"YYY":t=le(3);break;case"YYYY":t=le(4);break;case"M":case"L":t=cn(it.Month,1,1);break;case"MM":case"LL":t=cn(it.Month,2,1);break;case"MMM":t=Wt(xt.Months,ve.Abbreviated);break;case"MMMM":t=Wt(xt.Months,ve.Wide);break;case"MMMMM":t=Wt(xt.Months,ve.Narrow);break;case"LLL":t=Wt(xt.Months,ve.Abbreviated,Ee.Standalone);break;case"LLLL":t=Wt(xt.Months,ve.Wide,Ee.Standalone);break;case"LLLLL":t=Wt(xt.Months,ve.Narrow,Ee.Standalone);break;case"w":t=pe(1);break;case"ww":t=pe(2);break;case"W":t=pe(1,!0);break;case"d":t=cn(it.Date,1);break;case"dd":t=cn(it.Date,2);break;case"c":case"cc":t=cn(it.Day,1);break;case"ccc":t=Wt(xt.Days,ve.Abbreviated,Ee.Standalone);break;case"cccc":t=Wt(xt.Days,ve.Wide,Ee.Standalone);break;case"ccccc":t=Wt(xt.Days,ve.Narrow,Ee.Standalone);break;case"cccccc":t=Wt(xt.Days,ve.Short,Ee.Standalone);break;case"E":case"EE":case"EEE":t=Wt(xt.Days,ve.Abbreviated);break;case"EEEE":t=Wt(xt.Days,ve.Wide);break;case"EEEEE":t=Wt(xt.Days,ve.Narrow);break;case"EEEEEE":t=Wt(xt.Days,ve.Short);break;case"a":case"aa":case"aaa":t=Wt(xt.DayPeriods,ve.Abbreviated);break;case"aaaa":t=Wt(xt.DayPeriods,ve.Wide);break;case"aaaaa":t=Wt(xt.DayPeriods,ve.Narrow);break;case"b":case"bb":case"bbb":t=Wt(xt.DayPeriods,ve.Abbreviated,Ee.Standalone,!0);break;case"bbbb":t=Wt(xt.DayPeriods,ve.Wide,Ee.Standalone,!0);break;case"bbbbb":t=Wt(xt.DayPeriods,ve.Narrow,Ee.Standalone,!0);break;case"B":case"BB":case"BBB":t=Wt(xt.DayPeriods,ve.Abbreviated,Ee.Format,!0);break;case"BBBB":t=Wt(xt.DayPeriods,ve.Wide,Ee.Format,!0);break;case"BBBBB":t=Wt(xt.DayPeriods,ve.Narrow,Ee.Format,!0);break;case"h":t=cn(it.Hours,1,-12);break;case"hh":t=cn(it.Hours,2,-12);break;case"H":t=cn(it.Hours,1);break;case"HH":t=cn(it.Hours,2);break;case"m":t=cn(it.Minutes,1);break;case"mm":t=cn(it.Minutes,2);break;case"s":t=cn(it.Seconds,1);break;case"ss":t=cn(it.Seconds,2);break;case"S":t=cn(it.FractionalSeconds,1);break;case"SS":t=cn(it.FractionalSeconds,2);break;case"SSS":t=cn(it.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=qe(En.Short);break;case"ZZZZZ":t=qe(En.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=qe(En.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=qe(En.Long);break;default:return null}return ye[n]=t,t}(D);b+=x?x(i,e,g):"''"===D?"'":D.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function zr(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function _n(n,t){const e=function(n){return(0,a.cg1)(n)[a.wAp.LocaleId]}(n);if(xn[e]=xn[e]||{},xn[e][t])return xn[e][t];let r="";switch(t){case"shortDate":r=Mt(n,De.Short);break;case"mediumDate":r=Mt(n,De.Medium);break;case"longDate":r=Mt(n,De.Long);break;case"fullDate":r=Mt(n,De.Full);break;case"shortTime":r=yt(n,De.Short);break;case"mediumTime":r=yt(n,De.Medium);break;case"longTime":r=yt(n,De.Long);break;case"fullTime":r=yt(n,De.Full);break;case"short":const i=_n(n,"shortTime"),l=_n(n,"shortDate");r=At(Ct(n,De.Short),[i,l]);break;case"medium":const d=_n(n,"mediumTime"),f=_n(n,"mediumDate");r=At(Ct(n,De.Medium),[d,f]);break;case"long":const g=_n(n,"longTime"),b=_n(n,"longDate");r=At(Ct(n,De.Long),[g,b]);break;case"full":const D=_n(n,"fullTime"),x=_n(n,"fullDate");r=At(Ct(n,De.Full),[D,x])}return r&&(xn[e][t]=r),r}function At(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function hr(n,t,e="-",r,i){let l="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,l=e));let d=String(n);for(;d.length<t;)d="0"+d;return r&&(d=d.substr(d.length-t)),l+d}function cn(n,t,e=0,r=!1,i=!1){return function(l,d){let f=function(n,t){switch(n){case it.FullYear:return t.getFullYear();case it.Month:return t.getMonth();case it.Date:return t.getDate();case it.Hours:return t.getHours();case it.Minutes:return t.getMinutes();case it.Seconds:return t.getSeconds();case it.FractionalSeconds:return t.getMilliseconds();case it.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((e>0||f>-e)&&(f+=e),n===it.Hours)0===f&&-12===e&&(f=12);else if(n===it.FractionalSeconds)return function(n,t){return hr(n,3).substr(0,t)}(f,t);const g=Xt(d,Ie.MinusSign);return hr(f,t,g,r,i)}}function Wt(n,t,e=Ee.Format,r=!1){return function(i,l){return function(n,t,e,r,i,l){switch(e){case xt.Months:return function(n,t,e){const r=(0,a.cg1)(n),l=fn([r[a.wAp.MonthsFormat],r[a.wAp.MonthsStandalone]],t);return fn(l,e)}(t,i,r)[n.getMonth()];case xt.Days:return function(n,t,e){const r=(0,a.cg1)(n),l=fn([r[a.wAp.DaysFormat],r[a.wAp.DaysStandalone]],t);return fn(l,e)}(t,i,r)[n.getDay()];case xt.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(l){const b=function(n){const t=(0,a.cg1)(n);return ze(t),(t[a.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?mn(r):[mn(r[0]),mn(r[1])])}(t),D=function(n,t,e){const r=(0,a.cg1)(n);ze(r);const l=fn([r[a.wAp.ExtraData][0],r[a.wAp.ExtraData][1]],t)||[];return fn(l,e)||[]}(t,i,r),x=b.findIndex(F=>{if(Array.isArray(F)){const[$,re]=F,ge=d>=$.hours&&f>=$.minutes,Me=d<re.hours||d===re.hours&&f<re.minutes;if($.hours<re.hours){if(ge&&Me)return!0}else if(ge||Me)return!0}else if(F.hours===d&&F.minutes===f)return!0;return!1});if(-1!==x)return D[x]}return function(n,t,e){const r=(0,a.cg1)(n),l=fn([r[a.wAp.DayPeriodsFormat],r[a.wAp.DayPeriodsStandalone]],t);return fn(l,e)}(t,i,r)[d<12?0:1];case xt.Eras:return function(n,t){return fn((0,a.cg1)(n)[a.wAp.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,l,n,t,e,r)}}function qe(n){return function(t,e,r){const i=-1*r,l=Xt(e,Ie.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case En.Short:return(i>=0?"+":"")+hr(d,2,l)+hr(Math.abs(i%60),2,l);case En.ShortGMT:return"GMT"+(i>=0?"+":"")+hr(d,1,l);case En.Long:return"GMT"+(i>=0?"+":"")+hr(d,2,l)+":"+hr(Math.abs(i%60),2,l);case En.Extended:return 0===r?"Z":(i>=0?"+":"")+hr(d,2,l)+":"+hr(Math.abs(i%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function en(n){return zr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function pe(n,t=!1){return function(e,r){let i;if(t){const l=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();i=1+Math.floor((d+l)/7)}else{const l=en(e),d=function(n){const t=zr(n,0,1).getDay();return zr(n,0,1+(t<=4?4:11)-t)}(l.getFullYear()),f=l.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return hr(i,n,Xt(r,Ie.MinusSign))}}function le(n,t=!1){return function(e,r){return hr(en(e).getFullYear(),n,Xt(r,Ie.MinusSign),t)}}const ye={};function X(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Et(n){return n instanceof Date&&!isNaN(n.valueOf())}class cs{}let mc=(()=>{class n extends cs{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(Yn(r||this.locale)(e)){case de.Zero:return"zero";case de.One:return"one";case de.Two:return"two";case de.Few:return"few";case de.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Yr(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,l]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(l)}return null}let Ys=(()=>{class n{constructor(e,r,i,l){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,a.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,a.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class fi{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tn=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,l,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new fi(null,this._ngForOf,-1,-1),null===d?void 0:d),g=new Su(i,f);r.push(g)}else if(null==d)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const f=this._viewContainer.get(l);this._viewContainer.move(f,d);const g=new Su(i,f);r.push(g)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,l=this._viewContainer.length;i<l;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=l,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Su{constructor(t,e){this.record=t,this.view=e}}let Rr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Au,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Co("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Co("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Au{constructor(){this.$implicit=null,this.ngIf=null}}function Co(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(t)}'.`)}let yl=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",i,l){if(null==e||""===e||e!=e)return null;try{return Mr(e,r,l||this.locale,i)}catch(d){throw function(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,a.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.soG,16))},n.\u0275pipe=a.Yjl({name:"date",type:n,pure:!0}),n})(),ar=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:cs,useClass:mc}]}),n})();function Ah(n){return"server"===n}let Pu=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new Nh((0,a.LFG)(ee),window)}),n})();class Nh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const d=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Na(this.window.history)||Na(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Na(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ou{}class Fu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Fu,M||(M=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ms=Ms||document.querySelector("base"),Ms?Ms.getAttribute("href"):null);return null==e?null:function(n){On=On||document.createElement("a"),On.setAttribute("href",n);const t=On.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Yr(document.cookie,t)}}let On,Ms=null;const Lu=new a.OlP("TRANSITION_ID"),Fn=[{provide:a.ip1,useFactory:function(n,t,e){return()=>{e.get(a.CZH).donePromise.then(()=>{const r=k(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[Lu,ee,a.zs3],multi:!0}];class Vu{static init(){(0,a.VLi)(new Vu)}addToWindow(t){a.dqk.getAngularTestability=(r,i=!0)=>{const l=t.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let l=i.length,d=!1;const f=function(g){d=d||g,l--,0==l&&r(d)};i.forEach(function(g){g.whenStable(f)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?k().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Rs=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const To=new a.OlP("EventManagerPlugins");let We=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const d=i[l];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(To),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class sn{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=k().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Ra=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Jn=(()=>{class n extends Ra{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,i.push(r.appendChild(d))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(xl),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(xl))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function xl(n){k().remove(n)}const Qs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gi=/%COMP%/g;function yr(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?yr(n,i,e):(i=i.replace(gi,n),e.push(i))}return e}function Vi(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Bi=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ui(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ap(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case a.ifc.ShadowDom:return new na(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=yr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(We),a.LFG(Jn),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Ui{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Qs[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const l=Qs[i];l?t.setAttributeNS(l,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Qs[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,r,i&a.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Vi(r)):this.eventManager.addEventListener(t,e,Vi(r))}}class Ap extends Ui{constructor(t,e,r,i){super(t),this.component=r;const l=yr(i+"-"+r.id,r.styles,[]);e.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(gi,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(gi,i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class na extends Ui{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=yr(i.id,i.styles,[]);for(let d=0;d<l.length;d++){const f=document.createElement("style");f.textContent=l[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Zu=(()=>{class n extends sn{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const ra=["alt","control","meta","shift"],Np={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Kr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ic={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qu=(()=>{class n extends sn{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(e,l.domEventName,d))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let d="";if(ra.forEach(g=>{const b=r.indexOf(g);b>-1&&(r.splice(b,1),d+=g+".")}),d+=l,0!=r.length||0===l.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Kr.hasOwnProperty(t)&&(t=Kr[t]))}return Np[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ra.forEach(l=>{l!=i&&Ic[l](e)&&(r+=l+".")}),r+=i,r}static eventCallback(e,r,i){return l=>{n.getEventFullKey(l)===e&&i.runGuarded(()=>r(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Va=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){Fu.makeCurrent(),Vu.init()},multi:!0},{provide:ee,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Ju=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:To,useClass:Zu,multi:!0,deps:[ee,a.R0b,a.Lbi]},{provide:To,useClass:Qu,multi:!0,deps:[ee]},[],{provide:Bi,useClass:Bi,deps:[We,Jn,a.AFp]},{provide:a.FYo,useExisting:Bi},{provide:Ra,useExisting:Jn},{provide:Jn,useClass:Jn,deps:[ee]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:We,useClass:We,deps:[To,a.R0b]},{provide:Ou,useClass:Rs,deps:[]},[]];let Pp=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:a.AFp,useValue:e.appId},{provide:Lu,useExisting:a.AFp},Fn]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:Ju,imports:[ar,a.hGG]}),n})();function Xu(){return new Oh((0,a.LFG)(ee))}let Oh=(()=>{class n{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=(0,a.Yz7)({factory:Xu,token:n,providedIn:"root"}),n})();"undefined"!=typeof window&&window;var un=O(4402),Dt=O(5917),Tn=O(9765),Rl=O(7971);class Tr extends Tn.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Rl.N;return this._value}next(t){super.next(this._value=t)}}var sa=O(4869),Ps=O(9796),fr=O(7393);class Vh extends fr.L{notifyNext(t,e,r,i,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Lp extends fr.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Mo=O(7444),zn=O(7574);function lr(n,t,e,r,i=new Lp(n,e,r)){if(!i.closed)return t instanceof zn.y?t.subscribe(i):(0,Mo.s)(t)(i)}var Rc=O(6693);const oa={};class Ha{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new td(t,this.resultSelector))}}class td extends Vh{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(oa),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(lr(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,d=this.toRespond?i[r]===oa?--this.toRespond:this.toRespond:0;i[r]=e,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const Os=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var fs=O(3282);function eo(...n){return(0,fs.J)(1)((0,Dt.of)(...n))}var mi=O(9193);function Hi(n){return new zn.y(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?(0,un.D)(e):(0,mi.c)()).subscribe(t)})}var Lv=O(2441),wt=O(8002),es=O(5345);function pr(n,t){return"function"==typeof t?e=>e.pipe(pr((r,i)=>(0,un.D)(n(r,i)).pipe((0,wt.U)((l,d)=>t(r,l,i,d))))):e=>e.lift(new Vp(n))}class Vp{constructor(t){this.project=t}call(t,e){return e.subscribe(new er(t,this.project))}}class er extends es.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new es.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,es.ft)(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const nd=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Ci(n){return t=>0===n?(0,mi.c)():t.lift(new Vv(n))}class Vv{constructor(t){if(this.total=t,this.total<0)throw new nd}call(t,e){return e.subscribe(new Bp(t,this.total))}}class Bp extends fr.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function aa(...n){const t=n[n.length-1];return(0,sa.K)(t)?(n.pop(),e=>eo(n,e,t)):e=>eo(n,e)}function $a(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new p0(n,t,e))}}class p0{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Pc(t,this.accumulator,this.seed,this.hasSeed))}}class Pc extends fr.L{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function sr(n,t){return function(r){return r.lift(new rd(n,t))}}class rd{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Po(t,this.predicate,this.thisArg))}}class Po extends fr.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Oo(n){return function(e){const r=new vr(n),i=e.lift(r);return r.caught=i}}class vr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new to(t,this.selector,this.caught))}}class to extends es.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new es.IY(this);this.add(r);const i=(0,es.ft)(e,r);i!==r&&this.add(i)}}}var Ur=O(9773);function Oc(n,t){return(0,Ur.zg)(n,t,1)}function Uh(n){return function(e){return 0===n?(0,mi.c)():e.lift(new Ei(n))}}class Ei{constructor(t){if(this.total=t,this.total<0)throw new nd}call(t,e){return e.subscribe(new Fs(t,this.total))}}class Fs extends fr.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let l=0;l<r;l++){const d=e++%r;t.next(i[d])}}t.complete()}}function Ls(n=Hh){return t=>t.lift(new Fo(n))}class Fo{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Lo(t,this.errorFactory))}}class Lo extends fr.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Hh(){return new Os}function no(n=null){return t=>t.lift(new Up(n))}class Up{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new ja(t,this.defaultValue))}}class ja extends fr.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Hp=O(4487);function Ir(n,t){const e=arguments.length>=2;return r=>r.pipe(n?sr((i,l)=>n(i,l,r)):Hp.y,Ci(1),e?no(t):Ls(()=>new Os))}var br=O(8307),Ga=O(1307),sd=O(5319);class A{constructor(t){this.callback=t}call(t,e){return e.subscribe(new W(t,this.callback))}}class W extends fr.L{constructor(t,e){super(t),this.add(new sd.w(e))}}class oe{constructor(t,e){this.id=t,this.url=e}}class xe extends oe{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ne extends oe{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ke extends oe{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ut extends oe{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Pt extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ht extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pn extends oe{constructor(t,e,r,i,l){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $t extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kr extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kl{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class od{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ro{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Za{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vs{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class $p{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function cr(n){return new $p(n)}const Fc="ngNavigationCancelingError";function g0(n){const t=Error("NavigationCancelingError: "+n);return t[Fc]=!0,t}function Ol(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const d=r[l],f=n[l];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ps(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let l=0;l<e.length;l++)if(i=e[l],!Gp(n[i],t[i]))return!1;return!0}function Gp(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,l)=>r[l]===i)}return n===t}function m0(n){return Array.prototype.concat.apply([],n)}function qa(n){return n.length>0?n[n.length-1]:null}function Hr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Qr(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,un.D)(Promise.resolve(n)):(0,Dt.of)(n)}const _0={exact:function $h(n,t,e){if(!Ya(n.segments,t.segments)||!Vc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!$h(n.children[r],t.children[r],e))return!1;return!0},subset:ca},Lc={exact:function(n,t){return ps(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Gp(n[e],t[e]))},ignored:()=>!0};function ad(n,t,e){return _0[e.paths](n.root,t.root,e.matrixParams)&&Lc[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function ca(n,t,e){return za(n,t,t.segments,e)}function za(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Ya(i,e)||t.hasChildren()||!Vc(i,e,r))}if(n.segments.length===e.length){if(!Ya(n.segments,e)||!Vc(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!ca(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),l=e.slice(n.segments.length);return!!(Ya(n.segments,i)&&Vc(n.segments,i,r)&&n.children[Gt])&&za(n.children[Gt],t,l,r)}}function Vc(n,t,e){return t.every((r,i)=>Lc[e](n[i].parameters,r.parameters))}class Fl{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return cd.serialize(this)}}class dn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Hr(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ua(this)}}class ld{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=cr(this.parameters)),this._parameterMap}toString(){return Hc(this)}}function Ya(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class Zp{}class Bc{parse(t){const e=new Zh(t);return new Fl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${ud(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${dd(e)}=${dd(i)}`).join("&"):`${dd(e)}=${dd(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const cd=new Bc;function ua(n){return n.segments.map(t=>Hc(t)).join("/")}function ud(n,t){if(!n.hasChildren())return ua(n);if(t){const e=n.children[Gt]?ud(n.children[Gt],!1):"",r=[];return Hr(n.children,(i,l)=>{l!==Gt&&r.push(`${l}:${ud(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Hr(n.children,(r,i)=>{i===Gt&&(e=e.concat(t(r,i)))}),Hr(n.children,(r,i)=>{i!==Gt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Gt?[ud(n.children[Gt],!1)]:[`${i}:${ud(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${ua(n)}/${e[0]}`:`${ua(n)}/(${e.join("//")})`}}function b0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dd(n){return b0(n).replace(/%3B/gi,";")}function hd(n){return b0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uc(n){return decodeURIComponent(n)}function qp(n){return Uc(n.replace(/\+/g,"%20"))}function Hc(n){return`${hd(n.path)}${function(n){return Object.keys(n).map(t=>`;${hd(t)}=${hd(n[t])}`).join("")}(n.parameters)}`}const jv=/^[^\/()?;=#]+/;function Gh(n){const t=n.match(jv);return t?t[0]:""}const Gv=/^[^=?&#]+/,da=/^[^?&#]+/;class Zh{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Gt]=new dn(t,e)),r}parseSegment(){const t=Gh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ld(Uc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Gh(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Gh(this.remaining);i&&(r=i,this.capture(r))}t[Uc(e)]=Uc(r)}parseQueryParam(t){const e=function(n){const t=n.match(Gv);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const d=function(n){const t=n.match(da);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=qp(e),l=qp(r);if(t.hasOwnProperty(i)){let d=t[i];Array.isArray(d)||(d=[d],t[i]=d),d.push(l)}else t[i]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Gh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=Gt);const d=this.parseChildren();e[l]=1===Object.keys(d).length?d[Gt]:new dn([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class w0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Wp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Wp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=zp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return zp(t,this._root).map(e=>e.value)}}function Wp(n,t){if(n===t.value)return t;for(const e of t.children){const r=Wp(n,e);if(r)return r}return null}function zp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=zp(n,e);if(r.length)return r.unshift(t),r}return[]}class ha{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function fd(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class qh extends w0{constructor(t,e){super(t),this.snapshot=e,zh(this,t)}toString(){return this.snapshot.toString()}}function C0(n,t){const e=function(n,t){const d=new Wh([],{},{},"",{},Gt,t,null,n.root,-1,{});return new Ka("",new ha(d,[]))}(n,t),r=new Tr([new ld("",{})]),i=new Tr({}),l=new Tr({}),d=new Tr({}),f=new Tr(""),g=new Vl(r,i,d,f,l,Gt,t,e.root);return g.snapshot=e.root,new qh(new ha(g,[]),e)}class Vl{constructor(t,e,r,i,l,d,f,g){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(t=>cr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(t=>cr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function E0(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],l=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Wh{constructor(t,e,r,i,l,d,f,g,b,D,x){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this.routeConfig=g,this._urlSegment=b,this._lastPathIndex=D,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ka extends w0{constructor(t,e){super(e),this.url=t,zh(this,e)}toString(){return Bs(this._root)}}function zh(n,t){t.value._routerState=n,t.children.forEach(e=>zh(n,e))}function Bs(n){const t=n.children.length>0?` { ${n.children.map(Bs).join(", ")} } `:"";return`${n.value}${t}`}function Bl(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ps(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ps(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ps(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ps(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function jc(n,t){return ps(n.params,t.params)&&function(n,t){return Ya(n,t)&&n.every((e,r)=>ps(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||jc(n.parent,t.parent))}function Gc(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Gc(n,r,i);return Gc(n,r)})}(n,t,e);return new ha(r,i)}{if(n.shouldAttach(t.value)){const l=n.retrieve(t.value);if(null!==l){const d=l.route;return T0(t,d),d}}const r=function(n){return new Vl(new Tr(n.url),new Tr(n.params),new Tr(n.queryParams),new Tr(n.fragment),new Tr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(l=>Gc(n,l));return new ha(r,i)}}function T0(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)T0(n.children[e],t.children[e])}function pd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function w(n){return"object"==typeof n&&null!=n&&n.outlets}function m(n,t,e,r,i){let l={};return r&&Hr(r,(d,f)=>{l[f]=Array.isArray(d)?d.map(g=>`${g}`):`${d}`}),new Fl(e.root===n?t:y(e.root,n,t),l,i)}function y(n,t,e){const r={};return Hr(n.children,(i,l)=>{r[l]=i===t?e:y(i,t,e)}),new dn(n.segments,r)}class E{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&pd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(w);if(i&&i!==qa(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class j{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function tt(n,t,e){if(n||(n=new dn([],{})),0===n.segments.length&&n.hasChildren())return Tt(n,t,e);const r=function(n,t,e){let r=0,i=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return l;const d=n.segments[i],f=e[r];if(w(f))break;const g=`${f}`,b=r<e.length-1?e[r+1]:null;if(i>0&&void 0===g)break;if(g&&b&&"object"==typeof b&&void 0===b.outlets){if(!gd(g,b,d))return l;r+=2}else{if(!gd(g,{},d))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new dn(n.segments.slice(0,r.pathIndex),{});return l.children[Gt]=new dn(n.segments.slice(r.pathIndex),n.children),Tt(l,0,i)}return r.match&&0===i.length?new dn(n.segments,{}):r.match&&!n.hasChildren()?Wn(n,t,e):r.match?Tt(n,0,i):Wn(n,t,e)}function Tt(n,t,e){if(0===e.length)return new dn(n.segments,{});{const r=function(n){return w(n[0])?n[0].outlets:{[Gt]:n}}(e),i={};return Hr(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[d]=tt(n.children[d],t,l))}),Hr(n.children,(l,d)=>{void 0===r[d]&&(i[d]=l)}),new dn(n.segments,i)}}function Wn(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const l=e[i];if(w(l)){const g=wn(l.outlets);return new dn(r,g)}if(0===i&&pd(e[0])){r.push(new ld(n.segments[t].path,fa(e[0]))),i++;continue}const d=w(l)?l.outlets[Gt]:`${l}`,f=i<e.length-1?e[i+1]:null;d&&f&&pd(f)?(r.push(new ld(d,fa(f))),i+=2):(r.push(new ld(d,{})),i++)}return new dn(r,{})}function wn(n){const t={};return Hr(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Wn(new dn([],{}),0,e))}),t}function fa(n){const t={};return Hr(n,(e,r)=>t[r]=`${e}`),t}function gd(n,t,e){return n==e.path&&ps(t,e.parameters)}class Kp{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Bl(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=fd(e);t.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,i[d],r),delete i[d]}),Hr(i,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(i===l)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,r);else l&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,l=fd(t);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=fd(e);t.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new Vs(l.value.snapshot))}),t.children.length&&this.forwardEvent(new ro(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(Bl(i),i===l)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Qp(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),g=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=g,d.outlet&&d.outlet.activateWith(i,g),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}function Qp(n){Bl(n.value),n.children.forEach(Qp)}class Yh{constructor(t,e){this.routes=t,this.module=e}}function pa(n){return"function"==typeof n}function Ul(n){return n instanceof Fl}const Kh=Symbol("INITIAL_VALUE");function Qh(){return pr(n=>function(...n){let t,e;return(0,sa.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,Ps.k)(n[0])&&(n=n[0]),(0,Rc.n)(n,e).lift(new Ha(t))}(n.map(t=>t.pipe(Ci(1),aa(Kh)))).pipe($a((t,e)=>{let r=!1;return e.reduce((i,l,d)=>i!==Kh?i:(l===Kh&&(r=!0),r||!1!==l&&d!==e.length-1&&!Ul(l)?i:l),t)},Kh),sr(t=>t!==Kh),(0,wt.U)(t=>Ul(t)?t:!0===t),Ci(1)))}let ji=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[nf]},encapsulation:2}),n})();function Jh(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];zv(r,zS(t,r))}}function zv(n,t){n.children&&Jh(n.children,t)}function zS(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Yv(n){const t=n.children&&n.children.map(Yv),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Gt&&(e.component=ji),e}function io(n){return n.outlet||Gt}function aE(n,t){const e=n.filter(r=>io(r)===t);return e.push(...n.filter(r=>io(r)!==t)),e}const Kv={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function I0(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},Kv):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||Ol)(e,n,t);if(!l)return Object.assign({},Kv);const d={};Hr(l.posParams,(g,b)=>{d[b]=g.path});const f=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:f,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function eg(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Xh(n,t,r)&&io(r)!==Gt)}(n,e,r)){const d=new dn(t,function(n,t,e,r){const i={};i[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&io(l)!==Gt){const d=new dn([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,i[io(l)]=d}return i}(n,t,r,new dn(e,n.children)));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Xh(n,t,r))}(n,e,r)){const d=new dn(n.segments,function(n,t,e,r,i,l){const d={};for(const f of r)if(Xh(n,e,f)&&!i[io(f)]){const g=new dn([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===l?n.segments.length:t.length,d[io(f)]=g}return Object.assign(Object.assign({},i),d)}(n,t,e,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const l=new dn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function Xh(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function Qv(n,t,e,r){return!!(io(n)===r||r!==Gt&&Xh(t,e,n))&&("**"===n.path||I0(t,n,e).matched)}function cE(n,t,e){return 0===t.length&&!n.children[e]}class S0{constructor(t){this.segmentGroup=t||null}}class Jv{constructor(t){this.urlTree=t}}function _d(n){return new zn.y(t=>t.error(new S0(n)))}function uE(n){return new zn.y(t=>t.error(new Jv(n)))}function JS(n){return new zn.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class eA{constructor(t,e,r,i,l){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}apply(){const t=eg(this.urlTree.root,[],[],this.config).segmentGroup,e=new dn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Gt).pipe((0,wt.U)(l=>this.createUrlTree(Xv(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oo(l=>{if(l instanceof Jv)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof S0?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Gt).pipe((0,wt.U)(i=>this.createUrlTree(Xv(i),t.queryParams,t.fragment))).pipe(Oo(i=>{throw i instanceof S0?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new dn([],{[Gt]:t}):t;return new Fl(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,wt.U)(l=>new dn([],l))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,un.D)(i).pipe(Oc(l=>{const d=r.children[l],f=aE(e,l);return this.expandSegmentGroup(t,f,d,l).pipe((0,wt.U)(g=>({segment:g,outlet:l})))}),$a((l,d)=>(l[d.outlet]=d.segment,l),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?sr((i,l)=>n(i,l,r)):Hp.y,Uh(1),e?no(t):Ls(()=>new Os))}())}expandSegment(t,e,r,i,l,d){return(0,un.D)(r).pipe(Oc(f=>this.expandSegmentAgainstRoute(t,e,r,f,i,l,d).pipe(Oo(b=>{if(b instanceof S0)return(0,Dt.of)(null);throw b}))),Ir(f=>!!f),Oo((f,g)=>{if(f instanceof Os||"EmptyError"===f.name){if(cE(e,i,l))return(0,Dt.of)(new dn([],{}));throw new S0(e)}throw f}))}expandSegmentAgainstRoute(t,e,r,i,l,d,f){return Qv(i,e,l,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,l,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d):_d(e):_d(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?uE(l):this.lineralizeSegments(r,l).pipe((0,Ur.zg)(d=>{const f=new dn(d,{});return this.expandSegment(t,f,e,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){const{matched:f,consumedSegments:g,lastChild:b,positionalParamSegments:D}=I0(e,i,l);if(!f)return _d(e);const x=this.applyRedirectCommands(g,i.redirectTo,D);return i.redirectTo.startsWith("/")?uE(x):this.lineralizeSegments(i,x).pipe((0,Ur.zg)(F=>this.expandSegment(t,e,r,F.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(t,e,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,Dt.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,wt.U)(F=>(r._loadedConfig=F,new dn(i,{})))):(0,Dt.of)(new dn(i,{}));const{matched:d,consumedSegments:f,lastChild:g}=I0(e,r,i);if(!d)return _d(e);const b=i.slice(g);return this.getChildConfig(t,r,i).pipe((0,Ur.zg)(x=>{const F=x.module,$=x.routes,{segmentGroup:re,slicedSegments:ge}=eg(e,f,b,$),Me=new dn(re.segments,re.children);if(0===ge.length&&Me.hasChildren())return this.expandChildren(F,$,Me).pipe((0,wt.U)(mt=>new dn(f,mt)));if(0===$.length&&0===ge.length)return(0,Dt.of)(new dn(f,{}));const Qe=io(r)===l;return this.expandSegment(F,Me,$,ge,Qe?Gt:l,!0).pipe((0,wt.U)(pt=>new dn(f.concat(pt.segments),pt.children)))}))}getChildConfig(t,e,r){return e.children?(0,Dt.of)(new Yh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,Dt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Ur.zg)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,wt.U)(l=>(e._loadedConfig=l,l))):(n=e,new zn.y(t=>t.error(g0(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Dt.of)(new Yh([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;if(!i||0===i.length)return(0,Dt.of)(!0);const l=i.map(d=>{const f=t.get(d);let g;if((n=f)&&pa(n.canLoad))g=f.canLoad(e,r);else{if(!pa(f))throw new Error("Invalid CanLoad guard");g=f(e,r)}var n;return Qr(g)});return(0,Dt.of)(l).pipe(Qh(),(0,br.b)(d=>{if(!Ul(d))return;const f=g0(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,wt.U)(d=>!0===d))}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,Dt.of)(r);if(i.numberOfChildren>1||!i.children[Gt])return JS(t.redirectTo);i=i.children[Gt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const l=this.createSegmentGroup(t,e.root,r,i);return new Fl(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Hr(t,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=e[f]}else r[l]=i}),r}createSegmentGroup(t,e,r,i){const l=this.createSegments(t,e.segments,r,i);let d={};return Hr(e.children,(f,g)=>{d[g]=this.createSegmentGroup(t,f,r,i)}),new dn(l,d)}createSegments(t,e,r,i){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,i):this.findOrReturn(l,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function Xv(n){const t={};for(const r of Object.keys(n.children)){const l=Xv(n.children[r]);(l.segments.length>0||l.hasChildren())&&(t[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Gt]){const t=n.children[Gt];return new dn(n.segments.concat(t.segments),t.children)}return n}(new dn(n.segments,t))}class tg{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gs{constructor(t,e){this.component=t,this.route=e}}function dE(n,t,e){const r=n._root;return N0(r,t?t._root:null,e,[r.value])}function A0(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function N0(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=fd(t);return n.children.forEach(d=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const g=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Ya(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ya(n.url,t.url)||!ps(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jc(n,t)||!ps(n.queryParams,t.queryParams);case"paramsChange":default:return!jc(n,t)}}(d,l,l.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new tg(r)):(l.data=d.data,l._resolvedData=d._resolvedData),N0(n,t,l.component?f?f.children:null:e,r,i),g&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new gs(f.outlet.component,d))}else d&&ng(t,f,i),i.canActivateChecks.push(new tg(r)),N0(n,null,l.component?f?f.children:null:e,r,i)})(d,l[d.value.outlet],e,r.concat([d.value]),i),delete l[d.value.outlet]}),Hr(l,(d,f)=>ng(d,e.getContext(f),i)),i}function ng(n,t,e){const r=fd(n),i=n.value;Hr(r,(l,d)=>{ng(l,i.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new gs(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class eb{}function M0(n){return new zn.y(t=>t.error(n))}class gE{constructor(t,e,r,i,l,d){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const t=eg(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Gt);if(null===e)return null;const r=new Wh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ha(r,e),l=new Ka(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,r=E0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const l of Object.keys(e.children)){const d=e.children[l],f=aE(t,l),g=this.processSegmentGroup(f,d,l);if(null===g)return null;r.push(...g)}const i=R0(r);return i.sort((t,e)=>t.value.outlet===Gt?-1:e.value.outlet===Gt?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const l of t){const d=this.processSegmentAgainstRoute(l,e,r,i);if(null!==d)return d}return cE(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!Qv(t,e,r,i))return null;let l,d=[],f=[];if("**"===t.path){const $=r.length>0?qa(r).parameters:{};l=new Wh(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,yd(t),io(t),t.component,t,tb(e),aA(e)+r.length,k0(t))}else{const $=I0(e,t,r);if(!$.matched)return null;d=$.consumedSegments,f=r.slice($.lastChild),l=new Wh(d,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,yd(t),io(t),t.component,t,tb(e),aA(e)+d.length,k0(t))}const g=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:D}=eg(e,d,f,g.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);var n;if(0===D.length&&b.hasChildren()){const $=this.processChildren(g,b);return null===$?null:[new ha(l,$)]}if(0===g.length&&0===D.length)return[new ha(l,[])];const x=io(t)===i,F=this.processSegment(g,b,D,x?Gt:i);return null===F?null:[new ha(l,F)]}}function _E(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function R0(n){const t=[],e=new Set;for(const r of n){if(!_E(r)){t.push(r);continue}const i=t.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=R0(r.children);t.push(new ha(r.value,i))}return t.filter(r=>!e.has(r))}function tb(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function aA(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function yd(n){return n.data||{}}function k0(n){return n.resolve||{}}function rb(n){return pr(t=>{const e=n(t);return e?(0,un.D)(e).pipe((0,wt.U)(()=>t)):(0,Dt.of)(t)})}class fA extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const P0=new a.OlP("ROUTES");class O0{constructor(t,e,r,i){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,wt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=l.create(t);return new Yh(m0(d.injector.get(P0,void 0,a.XFs.Self|a.XFs.Optional)).map(Yv),d)}),Oo(l=>{throw e._loader$=void 0,l}));return e._loader$=new Lv.c(i,()=>new Tn.xQ).pipe((0,Ga.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,un.D)(this.loader.load(t)):Qr(t()).pipe((0,Ur.zg)(e=>e instanceof a.YKP?(0,Dt.of)(e):(0,un.D)(this.compiler.compileModuleAsync(e))))}}class bE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Zc,this.attachRef=null}}class Zc{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new bE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class gA{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function wE(n){throw n}function CE(n,t,e){return t.parse("/")}function qc(n,t){return(0,Dt.of)(null)}const EE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ms=(()=>{class n{constructor(e,r,i,l,d,f,g,b){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tn.xQ,this.errorHandler=wE,this.malformedUriErrorHandler=CE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qc,afterPreactivation:qc},this.urlHandlingStrategy=new gA,this.routeReuseStrategy=new fA,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(a.h0i),this.console=d.get(a.c2e);const F=d.get(a.R0b);this.isNgZoneEnabled=F instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new Fl(new dn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new O0(f,g,$=>this.triggerEvent(new Pr($)),$=>this.triggerEvent(new kl($))),this.routerState=C0(this.currentUrlTree,this.rootComponentType),this.transitions=new Tr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(sr(i=>0!==i.id),(0,wt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),pr(i=>{let l=!1,d=!1;return(0,Dt.of)(i).pipe((0,br.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),pr(f=>{const g=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return L0(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,Dt.of)(f).pipe(pr(x=>{const F=this.transitions.getValue();return r.next(new xe(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),F!==this.transitions.getValue()?mi.E:Promise.resolve(x)}),function(n,t,e,r){return pr(i=>function(n,t,e,r,i){return new eA(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,wt.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,br.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,t,e,r,i){return(0,Ur.zg)(l=>function(n,t,e,r,i="emptyOnly",l="legacy"){try{const d=new gE(n,t,e,r,i,l).recognize();return null===d?M0(new eb):(0,Dt.of)(d)}catch(d){return M0(d)}}(n,t,l.urlAfterRedirects,e(l.urlAfterRedirects),r,i).pipe((0,wt.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,br.b)(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const F=new Pt(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(F)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:$,source:re,restoredState:ge,extras:Me}=f,Qe=new xe(F,this.serializeUrl($),re,ge);r.next(Qe);const st=C0($,this.rootComponentType).snapshot;return(0,Dt.of)(Object.assign(Object.assign({},f),{targetSnapshot:st,urlAfterRedirects:$,extras:Object.assign(Object.assign({},Me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),mi.E}),rb(f=>{const{targetSnapshot:g,id:b,extractedUrl:D,rawUrl:x,extras:{skipLocationChange:F,replaceUrl:$}}=f;return this.hooks.beforePreactivation(g,{navigationId:b,appliedUrlTree:D,rawUrlTree:x,skipLocationChange:!!F,replaceUrl:!!$})}),(0,br.b)(f=>{const g=new Ht(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(g)}),(0,wt.U)(f=>Object.assign(Object.assign({},f),{guards:dE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,Ur.zg)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:d}}=e;return 0===d.length&&0===l.length?(0,Dt.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,un.D)(n).pipe((0,Ur.zg)(i=>function(n,t,e,r,i){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Dt.of)(!0);const d=l.map(f=>{const g=A0(f,t,i);let b;if(function(n){return n&&pa(n.canDeactivate)}(g))b=Qr(g.canDeactivate(n,t,e,r));else{if(!pa(g))throw new Error("Invalid CanDeactivate guard");b=Qr(g(n,t,e,r))}return b.pipe(Ir())});return(0,Dt.of)(d).pipe(Qh())}(i.component,i.route,e,t,r)),Ir(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Ur.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,r){return(0,un.D)(t).pipe(Oc(i=>eo(function(n,t){return null!==n&&t&&t(new od(n)),(0,Dt.of)(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new Za(n)),(0,Dt.of)(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(d=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(d)).filter(d=>null!==d).map(d=>Hi(()=>{const f=d.guards.map(g=>{const b=A0(g,d.node,e);let D;if(function(n){return n&&pa(n.canActivateChild)}(b))D=Qr(b.canActivateChild(r,n));else{if(!pa(b))throw new Error("Invalid CanActivateChild guard");D=Qr(b(r,n))}return D.pipe(Ir())});return(0,Dt.of)(f).pipe(Qh())}));return(0,Dt.of)(l).pipe(Qh())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Dt.of)(!0);const i=r.map(l=>Hi(()=>{const d=A0(l,t,e);let f;if(function(n){return n&&pa(n.canActivate)}(d))f=Qr(d.canActivate(t,n));else{if(!pa(d))throw new Error("Invalid CanActivate guard");f=Qr(d(t,n))}return f.pipe(Ir())}));return(0,Dt.of)(i).pipe(Qh())}(n,i.route,e))),Ir(i=>!0!==i,!0))}(r,l,n,t):(0,Dt.of)(f)),(0,wt.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,br.b)(f=>{if(Ul(f.guardsResult)){const b=g0(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const g=new pn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(g)}),sr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),rb(f=>{if(f.guards.canActivateChecks.length)return(0,Dt.of)(f).pipe((0,br.b)(g=>{const b=new $t(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(b)}),pr(g=>{let b=!1;return(0,Dt.of)(g).pipe(function(n,t){return(0,Ur.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,Dt.of)(e);let l=0;return(0,un.D)(i).pipe(Oc(d=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return(0,Dt.of)({});const l={};return(0,un.D)(i).pipe((0,Ur.zg)(d=>function(n,t,e,r){const i=A0(n,t,r);return Qr(i.resolve?i.resolve(t,e):i(t,e))}(n[d],t,e,r).pipe((0,br.b)(f=>{l[d]=f}))),Uh(1),(0,Ur.zg)(()=>Object.keys(l).length===i.length?(0,Dt.of)(l):mi.E))}(n._resolve,n,t,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),E0(n,e).resolve),null)))}(d.route,r,n,t)),(0,br.b)(()=>l++),Uh(1),(0,Ur.zg)(d=>l===i.length?(0,Dt.of)(e):mi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,br.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,br.b)(g=>{const b=new kr(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(b)}))}),rb(f=>{const{targetSnapshot:g,id:b,extractedUrl:D,rawUrl:x,extras:{skipLocationChange:F,replaceUrl:$}}=f;return this.hooks.afterPreactivation(g,{navigationId:b,appliedUrlTree:D,rawUrlTree:x,skipLocationChange:!!F,replaceUrl:!!$})}),(0,wt.U)(f=>{const g=function(n,t,e){const r=Gc(n,t._root,e?e._root:void 0);return new qh(r,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:g})}),(0,br.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,wt.U)(r=>(new Kp(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,br.b)({next(){l=!0},complete(){l=!0}}),function(n){return t=>t.lift(new A(n))}(()=>{var f;if(!l&&!d){const g=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,g)):this.cancelNavigationTransition(i,g)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Oo(f=>{if(d=!0,function(n){return n&&n[Fc]}(f)){const g=Ul(f.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Ke(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),g?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||L0(i.source)};this.scheduleNavigation(D,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new ut(i.id,this.serializeUrl(i.extractedUrl),f);r.next(g);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return mi.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:l,urlTree:d}=r,f={replaceUrl:!0};if(l){const g=Object.assign({},l);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(f.state=g)}this.scheduleNavigation(d,i,l,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const i=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!i||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Jh(e),this.config=e.map(Yv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:l,fragment:d,queryParamsHandling:f,preserveFragment:g}=r,b=i||this.routerState.root,D=g?this.currentUrlTree.fragment:d;let x=null;switch(f){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=l||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,t,e,r,i){if(0===e.length)return m(t.root,t.root,t,r,i);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new E(!0,0,n);let t=0,e=!1;const r=n.reduce((i,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return Hr(l.outlets,(g,b)=>{f[b]="string"==typeof g?g.split("/"):g}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===d?(l.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?e=!0:".."===f?t++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new E(e,t,r)}(e);if(l.toRoot())return m(t.root,new dn([],{}),t,r,i);const d=function(n,t,e){if(n.isAbsolute)return new j(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new j(l,l===t.root,0)}const r=pd(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,l=e;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new j(r,!1,i-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,t,n),f=d.processChildren?Tt(d.segmentGroup,d.index,l.commands):tt(d.segmentGroup,d.index,l.commands);return m(d.segmentGroup,f,t,r,i)}(b,this.currentUrlTree,e,x,null!=D?D:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Ul(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},EE):!1===r?Object.assign({},DE):r,Ul(e))return ad(this.currentUrlTree,e,i);const l=this.parseUrl(e);return ad(this.currentUrlTree,l,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const l=e[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ne(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,l,d){var f,g;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),D=L0(r)&&b&&!L0(b.source),$=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===e.toString();if(D&&$)return Promise.resolve(!0);let re,ge,Me;d?(re=d.resolve,ge=d.reject,Me=d.promise):Me=new Promise((pt,mt)=>{re=pt,ge=mt});const Qe=++this.navigationId;let st;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),st=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):st=0,this.setTransition({id:Qe,targetPageId:st,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:re,reject:ge,promise:Me,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Me.catch(pt=>Promise.reject(pt))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(e,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Ke(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.DyG),a.LFG(Zp),a.LFG(Zc),a.LFG(we),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function L0(n){return"imperative"!==n}let ig=(()=>{class n{constructor(e,r,i){this.router=e,this.route=r,this.locationStrategy=i,this.commands=[],this.onChanges=new Tn.xQ,this.subscription=e.events.subscribe(l=>{l instanceof Ne&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,r,i,l,d){if(0!==e||r||i||l||d||"string"==typeof this.target&&"_self"!=this.target)return!0;const f={skipLocationChange:vd(this.skipLocationChange),replaceUrl:vd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:vd(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(ms),a.Y36(Vl),a.Y36(ae))},n.\u0275dir=a.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&a.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&e&&(a.Ikx("href",r.href,a.LSH),a.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[a.TTD]}),n})();function vd(n){return""===n||!!n}let nf=(()=>{class n{constructor(e,r,i,l,d){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=l||Gt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,g=new B0(e,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Zc),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class B0{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Vl?this.route:t===Zc?this.childContexts:this.parent.get(t,e)}}class sb{}class ab{preload(t,e){return(0,Dt.of)(null)}}let U0=(()=>{class n{constructor(e,r,i,l,d){this.router=e,this.injector=l,this.preloadingStrategy=d,this.loader=new O0(r,i,b=>e.triggerEvent(new Pr(b)),b=>e.triggerEvent(new kl(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(sr(e=>e instanceof Ne),Oc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(e,l)):l.children&&i.push(this.processRoutes(e,l.children));return(0,un.D)(i).pipe((0,fs.J)(),(0,wt.U)(l=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,Dt.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Ur.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ms),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(sb))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),bd=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof xe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ne&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof la&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new la(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ms),a.LFG(Pu),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Wc=new a.OlP("ROUTER_CONFIGURATION"),TE=new a.OlP("ROUTER_FORROOT_GUARD"),IE=[we,{provide:Zp,useClass:Bc},{provide:ms,useFactory:function(n,t,e,r,i,l,d,f={},g,b){const D=new ms(null,n,t,e,r,i,l,m0(d));return g&&(D.urlHandlingStrategy=g),b&&(D.routeReuseStrategy=b),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,D),f.enableTracing&&D.events.subscribe(x=>{var F,$;null===(F=console.group)||void 0===F||F.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===($=console.groupEnd)||void 0===$||$.call(console)}),D},deps:[Zp,Zc,we,a.zs3,a.v3s,a.Sil,P0,Wc,[class{},new a.FiY],[class{},new a.FiY]]},Zc,{provide:Vl,useFactory:function(n){return n.routerState.root},deps:[ms]},{provide:a.v3s,useClass:a.EAV},U0,ab,class{preload(t,e){return e().pipe(Oo(()=>(0,Dt.of)(null)))}},{provide:Wc,useValue:{enableTracing:!1}}];function lb(){return new a.PXZ("Router",ms)}let cb=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[IE,ub(e),{provide:TE,useFactory:_A,deps:[[ms,new a.FiY,new a.tp0]]},{provide:Wc,useValue:r||{}},{provide:ae,useFactory:SE,deps:[L,[new a.tBr(G),new a.FiY],Wc]},{provide:bd,useFactory:r2,deps:[ms,Pu,Wc]},{provide:sb,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ab},{provide:a.PXZ,multi:!0,useFactory:lb},[db,{provide:a.ip1,multi:!0,useFactory:AE,deps:[db]},{provide:NE,useFactory:bA,deps:[db]},{provide:a.tb,multi:!0,useExisting:NE}]]}}static forChild(e){return{ngModule:n,providers:[ub(e)]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(TE,8),a.LFG(ms,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function r2(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new bd(n,t,e)}function SE(n,t,e={}){return e.useHash?new he(n,t):new ue(n,t)}function _A(n){return"guarded"}function ub(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:P0,multi:!0,useValue:n}]}let db=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tn.xQ}appInitializer(){return this.injector.get(R,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),l=this.injector.get(ms),d=this.injector.get(Wc);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Dt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(Wc),i=this.injector.get(U0),l=this.injector.get(bd),d=this.injector.get(ms),f=this.injector.get(a.z2F);e===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),l.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function AE(n){return n.appInitializer.bind(n)}function bA(n){return n.bootstrapListener.bind(n)}const NE=new a.OlP("Router Initializer");var He=O(8239);let so=(()=>{class n{static randomString(e,r){for(var i="",l=e;l>0;--l)i+=r[Math.floor(Math.random()*r.length)];return i}static defaultRandomString(e){return n.randomString(e,n.chars)}static castPrice(e){return parseFloat(e)}static objectToURLQuery(e){var r=[];for(var i in e)null!=e[i]&&r.push(i+"="+e[i]);return r.join("&")}static copyEntry(e){window.navigator.clipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Valor ${e} copiada!`)},function(i){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}}return n.chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n})(),sg=(()=>{class n{constructor(){this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.myHeaders=new Headers,this.myInit=null,this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}populatePriceCoinMap(){let e=`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`;return new Promise((r,i)=>{fetch(e,this.myInit).then(l=>{if(l.ok)return l.json();i()}).then(l=>{let d=[];l.forEach(f=>{n.PriceCoinMap[f.symbol]={price:f.price},d.push(f.symbol)}),d.sort(),d.forEach(f=>{n.PriceCoinList.push({symbol:f,price:n.PriceCoinMap[f].price})}),r(!0)})})}}return n.PriceCoinMap={},n.PriceCoinList=[],n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var wr=O(8873),Qt=O(7771),rf=O(9746),ME=O(8858);class wd extends Tn.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new ma(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,l=r.length;let d;if(this.closed)throw new Rl.N;if(this.isStopped||this.hasError?d=sd.w.EMPTY:(this.observers.push(t),d=new ME.W(this,t)),i&&t.add(t=new rf.ht(t,i)),e)for(let f=0;f<l&&!t.closed;f++)t.next(r[f]);else for(let f=0;f<l&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||Qt.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,l=i.length;let d=0;for(;d<l&&!(t-i[d].time<r);)d++;return l>e&&(d=Math.max(d,l-e)),d>0&&i.splice(0,d),i}}class ma{constructor(t,e){this.time=t,this.value=e}}const RE={url:"",deserializer:n=>JSON.parse(n.data),serializer:n=>JSON.stringify(n)};class og extends Tn.ug{constructor(t,e){if(super(),t instanceof zn.y)this.destination=e,this.source=t;else{const r=this._config=Object.assign({},RE);if(this._output=new Tn.xQ,"string"==typeof t)r.url=t;else for(let i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);if(!r.WebSocketCtor&&WebSocket)r.WebSocketCtor=WebSocket;else if(!r.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new wd}}lift(t){const e=new og(this._config,this.destination);return e.operator=t,e.source=this,e}_resetState(){this._socket=null,this.source||(this.destination=new wd),this._output=new Tn.xQ}multiplex(t,e,r){const i=this;return new zn.y(l=>{try{i.next(t())}catch(f){l.error(f)}const d=i.subscribe(f=>{try{r(f)&&l.next(f)}catch(g){l.error(g)}},f=>l.error(f),()=>l.complete());return()=>{try{i.next(e())}catch(f){l.error(f)}d.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:t,protocol:e,url:r,binaryType:i}=this._config,l=this._output;let d=null;try{d=e?new t(r,e):new t(r),this._socket=d,i&&(this._socket.binaryType=i)}catch(g){return void l.error(g)}const f=new sd.w(()=>{this._socket=null,d&&1===d.readyState&&d.close()});d.onopen=g=>{const{_socket:b}=this;if(!b)return d.close(),void this._resetState();const{openObserver:D}=this._config;D&&D.next(g);const x=this.destination;this.destination=fr.L.create(F=>{if(1===d.readyState)try{const{serializer:$}=this._config;d.send($(F))}catch($){this.destination.error($)}},F=>{const{closingObserver:$}=this._config;$&&$.next(void 0),F&&F.code?d.close(F.code,F.reason):l.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:F}=this._config;F&&F.next(void 0),d.close(),this._resetState()}),x&&x instanceof wd&&f.add(x.subscribe(this.destination))},d.onerror=g=>{this._resetState(),l.error(g)},d.onclose=g=>{this._resetState();const{closeObserver:b}=this._config;b&&b.next(g),g.wasClean?l.complete():l.error(g)},d.onmessage=g=>{try{const{deserializer:b}=this._config;l.next(b(g))}catch(b){l.error(b)}}}_subscribe(t){const{source:e}=this;return e?e.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add(()=>{const{_socket:r}=this;0===this._output.observers.length&&(r&&1===r.readyState&&r.close(),this._resetState())}),t)}unsubscribe(){const{_socket:t}=this;t&&1===t.readyState&&t.close(),this._resetState(),super.unsubscribe()}}function _a(n){return new og(n)}class hb{constructor(){this.high=0,this.open=0,this.close=0,this.low=0}}var Jr=O(2527);class fb{constructor(t,e){this.sinal=t,this.confRobo=e,this.umPorCento=0,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com",this.ENPOINT_ORDER="/fapi/v1/order",this.stopLossPriceParameter=0,this._10porcentoDasMoedas=0,this.gainPricePercentage=0,this.stopGainPercentagem=0,this.status="IDLE",this.increasePriceLoss=0,this.novoPrecoStopLoss=0,this.priceCoinLength=0,this.umPorCento="LONG"===t.tipo?(parseFloat(t.entradas[t.entradas.length-1].valor)-parseFloat(t.entradas[0].valor))/100:(parseFloat(t.entradas[0].valor)-parseFloat(t.entradas[t.entradas.length-1].valor))/100,this.precoEntrada=parseFloat(this.sinal.entradas[0].valor)}makeRequestEntradaAMercadoStop(){if("LONG"===this.sinal.tipo&&this.sinal.priceCoin<this.precoEntrada||"SHORT"===this.sinal.tipo&&this.sinal.priceCoin>this.precoEntrada){this.quantidadeMoedaComprada=this.converterUSDT2MOEDA(this.confRobo.valorEntradaUsdt,this.precoEntrada);var t=1e3*wr().unix(),e={symbol:this.sinal.moeda,side:"LONG"===this.sinal.tipo?"BUY":"SELL",type:"STOP_MARKET",stopPrice:this.precoEntrada,timestamp:t,recvWindow:6e4,quantity:this.quantidadeMoedaComprada};let l=window.localStorage.getItem("apiKey"),d=window.localStorage.getItem("apiSecret"),f=so.objectToURLQuery(e);var r=Jr.HmacSHA256(f,d).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+f+"&signature="+r,{method:"POST",headers:{"X-MBX-APIKEY":l}}).then(x=>{if(x.ok)return x.json();throw x.text()}).then(x=>{"NEW"===x.status&&(this.responseBuyRequestJson=x)}).catch(x=>{x.then(F=>{let $=wr();console.error($,F),console.log($,`Erro ao comprar moeda ${this.sinal.moeda}`)})})}}converterUSDT2MOEDA(t,e){let l=parseFloat((t/e*20).toFixed(0));return l<=0?1:l}makeRequestBuyOrder(){this.status="makeRequestBuyOrder";let t=parseFloat(this.sinal.priceCoin),e=this.converterUSDT2MOEDA(this.confRobo.valorEntradaUsdt,t);var r=1e3*wr().unix(),l={symbol:this.sinal.moeda,side:"LONG"===this.sinal.tipo?"BUY":"SELL",type:"MARKET",timestamp:r,recvWindow:6e4,quantity:e};let d=window.localStorage.getItem("apiKey"),f=window.localStorage.getItem("apiSecret"),g=so.objectToURLQuery(l);var b=Jr.HmacSHA256(g,f).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+g+"&signature="+b,{method:"POST",headers:{"X-MBX-APIKEY":d}}).then($=>{if($.ok)return $.json();throw $.text()}).then($=>{if("NEW"===$.status){if(window.toastr.error("Ok!","Compra realizada na binance"),!window.document.hasFocus())try{new Notification("Binace watcher",{body:`Compra realizada na binance em ${this.sinal.moeda}::${this.sinal.tipo}`,icon:"assets/bot.png"})}catch(ge){}this.playAlert(),this.checkBuyOrder()}}).catch($=>{$.then(re=>{let ge=wr();console.error(ge,re),console.log(ge,`Erro ao comprar moeda ${this.sinal.moeda}, moeda foi bloqueada!`)})})}makeRequestClosePosition(){if(!this.responseBuyRequestJson)return;let t=null;t="LONG"===this.sinal.tipo?"SELL":"BUY";var r={symbol:this.sinal.moeda,side:t,type:"MARKET",reduceOnly:!0,quantity:this.quantidadeMoedaComprada,timestamp:Date.now()};let i=window.localStorage.getItem("apiKey"),l=window.localStorage.getItem("apiSecret"),d=so.objectToURLQuery(r);var f=Jr.HmacSHA256(d,l).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+d+"&signature="+f,{method:"POST",headers:{"X-MBX-APIKEY":i}}).then(x=>{if(x.ok)return x.json();throw x.text()}).then(x=>{}).catch(x=>{x.then(F=>{console.error(wr(),"makeRequestClosePosition",F)})})}sellBuy40PorcentoPosition(){if(!this.responseBuyRequestJson)return;let t=null;t="LONG"===this.sinal.tipo?"SELL":"BUY";const e=4*this._10porcentoDasMoedas;var r={symbol:this.sinal.moeda,side:t,type:"MARKET",qquantity:e.toString(),timestamp:Date.now()};let i=window.localStorage.getItem("apiKey"),l=window.localStorage.getItem("apiSecret"),d=so.objectToURLQuery(r),f=Jr.HmacSHA256(d,l).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+d+"&signature="+f,{method:"POST",headers:{"X-MBX-APIKEY":i}}).then(x=>{if(x.ok)return x.json();throw x.text()}).then(x=>{"NEW"===x.status&&(this.quantidadeMoedaComprada=this.quantidadeMoedaComprada-e)}).catch(x=>{x.then(F=>{console.error(wr(),"sellBuy10PorcentoPosition",F)})})}checkBuyOrder(){var t={symbol:this.sinal.moeda,orderId:this.responseBuyRequestJson.orderId,timestamp:Date.now()};let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret"),i=so.objectToURLQuery(t),l=Jr.HmacSHA256(i,r).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+i+"&signature="+l,{method:"GET",headers:{"X-MBX-APIKEY":e}}).then(b=>{if(b.ok)return b.json();throw b.text()}).then(b=>{"FILLED"===b.status?(this.responseBuyRequestJson=b,this.quantidadeMoedaComprada=parseFloat(this.responseBuyRequestJson.origQty),this._10porcentoDasMoedas=parseFloat((parseFloat(this.quantidadeMoedaComprada.toString())/100).toFixed()),this._10porcentoDasMoedas=parseFloat(this._10porcentoDasMoedas.toString()),this.stopLossPriceParameter>0?this.makeRequestStopLossOrder(this.stopLossPriceParameter):this.makeRequestStopLossOrder()):"EXPIRED"===b.status?this.stopBot():"NEW"===b.status&&setTimeout(()=>{this.checkBuyOrder()},1e3)}).catch(b=>{b.then(D=>{console.error(wr(),"checkBuyOrder",D)})})}stopBot(){this.responseStopLossJson&&"NEW"===this.responseStopLossJson.status&&(this.cancelOrder(this.responseStopLossJson.orderId).then(()=>{}),this.makeRequestClosePosition()),this.responseStopLossJson=null,this.responseStopLossJson=null,this.increasePriceLoss=0,this.novoPrecoStopLoss=0,this.stopLossPriceParameter=0,this.gainPricePercentage=0,this.stopGainPercentagem=0,this.quantidadeMoedaComprada=0,this.status="IDLE"}makeRequestStopLossOrder(t){let e=0,r=parseFloat(this.responseBuyRequestJson.avgPrice),i=(this.increasePriceLoss+5)*this.umPorCento,l=null;l="LONG"===this.sinal.tipo?"SELL":"BUY",e=t||("LONG"===this.sinal.tipo?r-i:r+i);let d=this.priceCoinLength;e=parseFloat(e.toString().substr(0,d));var f={symbol:this.sinal.moeda,side:l,closePosition:!0,type:"STOP_MARKET",stopPrice:e,timestamp:Date.now()};let g=window.localStorage.getItem("apiKey"),b=window.localStorage.getItem("apiSecret"),D=so.objectToURLQuery(f),x=Jr.HmacSHA256(D,b).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+D+"&signature="+x,{method:"POST",headers:{"X-MBX-APIKEY":g}}).then(ge=>{if(ge.ok)return ge.json();throw ge.text()}).then(ge=>{"NEW"===ge.status&&(this.novoPrecoStopLoss=t||0,this.increasePriceLoss=0,this.responseStopLossJson=ge,this.status="COMPRADO",this.checkStopLossOrder())}).catch(ge=>{ge.then(Me=>{console.error(wr(),"makeRequestStopLossOrder",Me),'{"code":-2021,"msg":"Order would immediately trigger."}'===Me&&(3===this.increasePriceLoss&&this.makeRequestClosePosition(),this.increasePriceLoss++)})})}cancelOrder(t=null){return t?new Promise((e,r)=>{var i={symbol:this.sinal.moeda,orderId:t,timestamp:Date.now()};let l=window.localStorage.getItem("apiKey"),d=window.localStorage.getItem("apiSecret"),f=so.objectToURLQuery(i),g=Jr.HmacSHA256(f,d).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+f+"&signature="+g,{method:"DELETE",headers:{"X-MBX-APIKEY":l}}).then(F=>{if(F.ok)return F.json();throw F.text()}).then(F=>{e(F)}).catch(F=>{F.then($=>{console.error(wr(),"cancelStopLossOrder",$)}),r(F)})}):Promise.resolve()}checkStopLossOrder(){var t={symbol:this.sinal.moeda,orderId:this.responseStopLossJson.orderId,timestamp:Date.now()};let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret"),i=so.objectToURLQuery(t),l=Jr.HmacSHA256(i,r).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+i+"&signature="+l,{method:"GET",headers:{"X-MBX-APIKEY":e}}).then(b=>{if(b.ok)return b.json();throw b.text()}).then(b=>{if(this.responseStopLossJson=b,"NEW"===b.status){let D=parseFloat(this.responseBuyRequestJson.avgPrice);if("LONG"===this.sinal.tipo){let F=D-parseFloat(this.sinal.entradas[0].valor);this.gainPricePercentage=parseFloat((F/this.umPorCento).toFixed(2))}else{let F=D-parseFloat(this.sinal.entradas[this.sinal.entradas.length-1].valor);this.gainPricePercentage=parseFloat((100-F/this.umPorCento).toFixed(2))}this.gainPricePercentage=this.sinal.priceCoinPercentage-this.gainPricePercentage;let x=0;this.gainPricePercentage>=10&&this.stopGainPercentagem<10?(this.stopGainPercentagem=10,x="LONG"===this.sinal.tipo?D+this.umPorCento:D-this.umPorCento):this.gainPricePercentage>=20&&this.stopGainPercentagem<20?(this.stopGainPercentagem=20,x="LONG"===this.sinal.tipo?D+5*this.umPorCento:D-5*this.umPorCento):this.gainPricePercentage>=30&&this.stopGainPercentagem<30?(this.stopGainPercentagem=30,x="LONG"===this.sinal.tipo?D+10*this.umPorCento:D-10*this.umPorCento):this.gainPricePercentage>=40&&this.stopGainPercentagem<40&&this.sellBuy40PorcentoPosition(),x>0?this.cancelOrder(this.responseStopLossJson.orderId).then(()=>{this.makeRequestStopLossOrder(x)}):setTimeout(()=>{this.checkStopLossOrder()},5e3)}else"FILLED"===b.status||("CANCELED"===b.status||"EXPIRED"===b.status)&&this.stopBot()}).catch(b=>{b.then(D=>{console.error(wr(),"checkStopLossOrder",D)})})}playAlert(){superMarioCoinAudio.play()}}class s2{constructor(t,e,r,i){this.sinal=t,this.http=e,this.coinDecimalLength=r,this.confRobo=i,this._1second=1e3,this._5seconds=5*this._1second,this._5minutes=60*this._1second*5,this._valorEntrada=0,this._lastCoinPrice=0,this.umPorCento=0,this._20PorCento=0,this.binance5minCandleDataList=[],this.binance1minCandleDataList=[],this.priceUpdateEmitter=new a.vpe,this.mediana1minCandleList=[],this.mediana5minCandleList=[],this._minutoAtual=0,this.getMovingAverage=(l=[])=>{const d=[];let f=0,g=0;for(let b=0;b<l.length;b++)f+=l[b],g++,d[b]=f/g;return d},this._valorEntrada=parseFloat(t.entradas[0].valor),this.umPorCento="LONG"===t.tipo?(parseFloat(t.entradas[t.entradas.length-1].valor)-parseFloat(t.entradas[0].valor))/100:(parseFloat(t.entradas[0].valor)-parseFloat(t.entradas[t.entradas.length-1].valor))/100,this._20PorCento=10*this.umPorCento,this.updateCandleDataList()}stop(){}updatePricePosition(t){this.sinal.indexPricePosition=t.indexPricePosition,this.sinal.priceCoinPercentage=t.priceCoinPercentage;try{this.robo.sinal=this.sinal}catch(e){}}verificarCompra(){var t,e;let r=null;r="LONG"===this.sinal.tipo?this.verificarLong():this.verificarShort();let i=this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-1]);if(r&&r.canBuy&&"IDLE"===this.robo.status){let l=this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-1]),d=this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-2]);this.robo.stopLossPriceParameter="LONG"===this.sinal.tipo?l.low>d.low?l.low:d.low:l.high>d.high?l.high:d.high,this.robo.makeRequestBuyOrder()}else if("COMPRADO"===this.robo.status){let l=parseFloat(this.sinal.entradas[0].valor);this.isRedCandle(i)&&"LONG"===this.sinal.tipo&&i.close<l?null===(t=this.robo)||void 0===t||t.stopBot():this.isGreenCandle(i)&&"SHORT"===this.sinal.tipo&&i.close>l&&(null===(e=this.robo)||void 0===e||e.stopBot())}}updateCandleDataList(){let e=this;this.http.get(`https://api.binance.com/api/v3/klines?symbol=${this.sinal.moeda}&interval=5m&limit=200`).subscribe(r=>{this.binance5minCandleDataList=r,this.mediana5minCandleList=this.mapCandleToMediasMoveis(this.binance5minCandleDataList),sg.PriceCoinMap[this.sinal.moeda]&&(this.coin5minSocket||(this.coin5minSocket=_a(`wss://fstream.binance.com/ws/${this.sinal.moeda.toLowerCase()}@kline_5m`),this.coin5minSocket.subscribe(l=>{e.robo||(e.robo=new fb(e.sinal,e.confRobo)),e.update5minLastCandle(l),e.updatePricePositionOnSinais(),l.k.x&&e.updateCandleDataList()},l=>{console.error(l)})))},r=>console.error(r))}update5minLastCandle(t){let e=t.k,r=[];r[0]=e.t,r[1]=e.o,r[2]=e.h,r[3]=e.l,r[4]=e.c,r[5]=e.T,this.binance5minCandleDataList[this.binance5minCandleDataList.length-1]=r,this.sinal.price=parseFloat(e.c);try{this.robo.sinal=this.sinal}catch(i){}this.priceUpdateEmitter.emit({price:e.c})}verificarShort(){let e=this.mediana5minCandleList[this.mediana5minCandleList.length-1],r=this.mediana5minCandleList[this.mediana5minCandleList.length-2],l=this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-1]),d=this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-2]),g=(this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-3]),{canBuy:!1,stopLossPrice:"",tipo:""}),b=parseFloat(this.sinal.entradas[1].valor);return l.close<this._valorEntrada&&l.close>b&&this.isRedCandle(l)&&r.MA5>e.MA5&&(d.close<this._valorEntrada?(g.canBuy=!0,g.tipo="Ultimo candle fechou na entrada"):e.MA5<e.MA12&&e.MA12<e.MA26?(g.canBuy=!0,g.tipo="Pre\xe7o na entrada"):e.MA5<e.MA26&&e.MA26<e.MA12&&r.MA26<r.MA5&&r.MA5<r.MA12&&(g.canBuy=!0,g.tipo="M\xe9dia cruzada pra baixo")),g}verificarLong(){let e=this.mediana5minCandleList[this.mediana5minCandleList.length-1],r=this.mediana5minCandleList[this.mediana5minCandleList.length-2],d=this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-1]),f=this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-2]),D=(this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-3]),this.parseCandle(this.binance5minCandleDataList[this.binance5minCandleDataList.length-4]),{canBuy:!1,stopLossPrice:"",tipo:""}),x=parseFloat(this.sinal.entradas[1].valor);return d.close>this._valorEntrada&&d.close<x&&this.isGreenCandle(d)&&r.MA5<e.MA5&&(this.isGreenCandle(f)&&f.close>this._valorEntrada?(D.canBuy=!0,D.tipo="Candle anterior fechou na entrada"):e.MA5>e.MA12&&e.MA12>e.MA26?(D.canBuy=!0,D.tipo="Candle fechado na entrada"):e.MA5>e.MA26&&e.MA26>e.MA12&&r.MA26>r.MA5&&r.MA5>r.MA12&&(D.canBuy=!0,D.tipo="M\xe9dia cruzada pra cima")),D}parseCandle(t){let e=new hb;return e.open=parseFloat(t[1]),e.high=parseFloat(t[2]),e.low=parseFloat(t[3]),e.close=parseFloat(t[4]),e}calculateStopLoss(t){let e=t.length-1,r=parseFloat(t[e][2]),i=parseFloat(t[e][4]),l=parseFloat(t[--e][2]),d=parseFloat(t[--e][4]),f=parseFloat(t[--e][2]),g=parseFloat(t[--e][4]),b=0;return b="LONG"===this.sinal.tipo?[i,d,g].sort((D,x)=>D-x)[0]:[r,l,f].sort((D,x)=>x-D)[0],b.toString()}mapCandleToMediasMoveis(t=[]){let e=[];return t.forEach(r=>{let i=(parseFloat(r[1])+parseFloat(r[4]))/2;e.push({data:wr(r[0]).add(3,"hours").format("HH:mm:ss"),mediana:parseFloat(String(i)),MA5:0,MA12:0,MA26:0})}),this.fillMA5(e),this.fillMA12(e),this.fillM26(e),e}fillMA5(t=[]){let e=[];for(let i=t.length-5;i<t.length;i++)e.push(t[i]);let r=this.coinDecimalLength;e=this.getMovingAverage(e.map(i=>i.mediana));for(let i=t.length-5;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA5=l}}fillMA12(t=[]){let e=[];for(let i=t.length-12;i<t.length;i++)e.push(t[i]);e=this.getMovingAverage(e.map(i=>i.mediana));let r=this.coinDecimalLength;for(let i=t.length-12;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA12=l}}fillM26(t=[]){let e=t.map(l=>l.mediana),r=this.getMovingAverage(e),i=this.coinDecimalLength;t.forEach((l,d)=>{let f=r[d];f=parseFloat(f.toString().substr(0,i)),l.MA26=f})}checkCandleSinal(t){let e=t[t.length-1],r=t[t.length-2],i=t[t.length-3],l=parseFloat(e[1]),d=parseFloat(e[4]),g=(parseFloat(e[2]),parseFloat(e[3])),x=(parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[2])),F=parseFloat(r[3]),ge=(parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[2])),Me=parseFloat(i[3]),Qe=!1;return Qe="LONG"===this.sinal.tipo?l<d&&d>x&&d>ge&&g>F&&g>Me:l>d&&d<F&&d<Me&&d<x&&d<ge,Qe}checkDiffMAIsValid(t,e){let i=0,l=0,d=0,f=0;for(let b=e.length-3;b<e.length;b++){let D=e[b],x=e[b+1];if(b===e.length-1){"LONG"===t?(D.MA5>D.MA12&&l++,D.MA5>D.MA26&&d++,D.MA12>D.MA26&&f++):(D.MA5<D.MA12&&l--,D.MA5<D.MA26&&d--,D.MA12<D.MA26&&f--);break}"LONG"===t?(D.MA5<x.MA5&&i++,D.MA5>D.MA12&&l++,D.MA5>D.MA26&&d++,D.MA12>D.MA26&&f++):(D.MA5>x.MA5&&i--,D.MA5<D.MA12&&l--,D.MA5<D.MA26&&d--,D.MA12<D.MA26&&f--)}let g=!1;return("LONG"===t&&2===i&&3===l&&3===d&&3===f||"SHORT"===t&&-2===i&&-3===l&&-3===d&&-3===f)&&(g=!0),g}isGreenCandle(t){let e=!1;return e=t.open&&t.close?t.open<t.close:parseFloat(t[1])<parseFloat(t[4]),e}isRedCandle(t){let e=!1;return e=t.open&&t.close?t.open>t.close:parseFloat(t[1])>parseFloat(t[4]),e}updatePricePositionOnSinais(){let t=parseFloat(this.sinal.price);if(t>0){let e=-1;this.sinal.priceCoinPercentage="LONG"===this.sinal.tipo?t>this._valorEntrada?((t-this._valorEntrada)/this.umPorCento).toFixed(2):0:t<this._valorEntrada?(100-(t-this.sinal.entradas[this.sinal.entradas.length-1].valor)/this.umPorCento).toFixed(2):0;for(let r=0;r<this.sinal.entradas.length;r++){let l=parseFloat(this.sinal.entradas[r].valor);if("LONG"===this.sinal.tipo){if(0==r||r===this.sinal.entradas.length-1){if(t<=l){e=r;break}if(r===this.sinal.entradas.length-1&&t>l){e=1e3;break}continue}if(t>=parseFloat(this.sinal.entradas[r-1].valor)&&t<=l){e=r;break}}else if("SHORT"===this.sinal.tipo){if(0==r||r===this.sinal.entradas.length-1){if(t>=l){e=r;break}if(r===this.sinal.entradas.length-1&&t<l){e=1e3;break}continue}if(t<=parseFloat(this.sinal.entradas[r-1].valor)&&t>=l){e=r;break}}}this.sinal.indexPricePosition=e}}}var zc=O(3637),H0=O(6682),Xa=O(8819);function Yc(n,t){return e=>e.lift(new $0(n,t))}class $0{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new pb(t,this.compare,this.keySelector))}}class pb extends fr.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function gb(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new EA(n,e))}}class EA{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new kE(t,this.observables,this.project))}}class kE extends Vh{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let l=0;l<i;l++)this.toRespond.push(l);for(let l=0;l<i;l++)this.add(lr(this,e[l],void 0,l))}notifyNext(t,e,r){this.values[r]=e;const i=this.toRespond;if(i.length>0){const l=i.indexOf(r);-1!==l&&i.splice(l,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class DA{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new a2(t,this.predicate))}}class a2 extends fr.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Ln=O(8971),ri=O(8939),ag=(O(4828),O(3394)),el=O(3910),Us=O(8026),Q=O(3854),tl=O(5422);const xA="@firebase/database";let PE="";function IA(n){PE=n}class c2{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,Q.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,Q.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class u2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,Q.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const SA=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new c2(t)}}catch(t){}return new u2},Hs=SA("localStorage"),lg=SA("sessionStorage"),sf=new tl.Yd("@firebase/database"),mb=function(){let n=1;return function(){return n++}}(),j0=function(n){const t=(0,Q.dS)(n),e=new Q.gQ;e.update(t);const r=e.digest();return Q.US.encodeByteArray(r)},af=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=af.apply(null,r):t+="object"==typeof r?(0,Q.Pz)(r):r,t+=" "}return t};let $l=null,OE=!0;const jl=function(n,t){(0,Q.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(sf.logLevel=tl.in.VERBOSE,$l=sf.log.bind(sf),t&&lg.set("logging_enabled",!0)):"function"==typeof n?$l=n:($l=null,lg.remove("logging_enabled"))},_i=function(...n){if(!0===OE&&(OE=!1,null===$l&&!0===lg.get("logging_enabled")&&jl(!0)),$l){const t=af.apply(null,n);$l(t)}},cg=function(n){return function(...t){_i(n,...t)}},FE=function(...n){const t="FIREBASE INTERNAL ERROR: "+af(...n);sf.error(t)},Vo=function(...n){const t=`FIREBASE FATAL ERROR: ${af(...n)}`;throw sf.error(t),new Error(t)},_s=function(...n){const t="FIREBASE WARNING: "+af(...n);sf.warn(t)},G0=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},oo="[MIN_NAME]",ys="[MAX_NAME]",Gl=function(n,t){if(n===t)return 0;if(n===oo||t===ys)return-1;if(t===oo||n===ys)return 1;{const e=bb(n),r=bb(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},lf=function(n,t){return n===t?0:n<t?-1:1},Zl=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,Q.Pz)(t))},Kc=function(n){if("object"!=typeof n||null===n)return(0,Q.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,Q.Pz)(t[r]),e+=":",e+=Kc(n[t[r]]);return e+="}",e},VE=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function yi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const _b=function(n){(0,Q.hu)(!G0(n),"Invalid JSON number");const r=1023;let i,l,d,f,g;0===n?(l=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(g=52;g;g-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(g=11;g;g-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(i?1:0),b.reverse();const D=b.join("");let x="";for(g=0;g<64;g+=8){let F=parseInt(D.substr(g,8),2).toString(16);1===F.length&&(F="0"+F),x+=F}return x.toLowerCase()},Z0=new RegExp("^-?(0*)\\d{1,10}$"),UE=-2147483648,q0=2147483647,bb=function(n){if(Z0.test(n)){const t=Number(n);if(t>=UE&&t<=q0)return t}return null},Cd=function(n){try{n()}catch(t){setTimeout(()=>{throw _s("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},ug=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class $E{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){_s(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class NA{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(_i("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_s(t)}}let dg=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const wb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cb="websocket",ZE="long_polling";class Eb{constructor(t,e,r,i,l=!1,d="",f=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hs.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Hs.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Db(n,t,e){let r;if((0,Q.hu)("string"==typeof t,"typeof type must == string"),(0,Q.hu)("object"==typeof e,"typeof params must == object"),t===Cb)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==ZE)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return yi(e,(l,d)=>{i.push(l+"="+d)}),r+i.join("&")}class FA{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,Q.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,Q.p$)(this.counters_)}}const W0={},xb={};function Tb(n){const t=n.toString();return W0[t]||(W0[t]=new FA),W0[t]}class WE{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Cd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qc{constructor(t,e,r,i,l,d,f){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cg(t),this.stats_=Tb(e),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),Db(e,ZE,g))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new WE(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Q.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new z0((...l)=>{const[d,f,g,b,D]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=g;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&wb.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qc.forceAllow_=!0}static forceDisallow(){Qc.forceDisallow_=!0}static isAvailable(){return!((0,Q.Yr)()||!Qc.forceAllow_&&(Qc.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,Q.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,Q.h$)(e),i=VE(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,Q.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,Q.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class z0{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Q.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=mb(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=z0.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){_i("frame writing exception"),f.stack&&_i(f.stack),_i(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_i("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,Q.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{_i("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Ed=null;"undefined"!=typeof MozWebSocket?Ed=MozWebSocket:"undefined"!=typeof WebSocket&&(Ed=WebSocket);let Y0=(()=>{class n{constructor(e,r,i,l,d,f,g){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cg(this.connId),this.stats_=Tb(r),this.connURL=n.connectionURL_(r,f,g,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,l){const d={v:"5"};return!(0,Q.Yr)()&&"undefined"!=typeof location&&location.hostname&&wb.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),l&&(d.ac=l),Db(e,Cb,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hs.set("previous_websocket_failure",!0);try{if((0,Q.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${PE}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new Ed(this.connURL,[],l)}else this.mySock=new Ed(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==Ed&&!n.forceDisallow_}static previouslyFailed(){return Hs.isInMemoryStorage||!0===Hs.get("previous_websocket_failure")}markConnectionHealthy(){Hs.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Q.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,Q.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,Q.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=VE(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Rb{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Qc,Y0]}initTransports_(t){const e=Y0&&Y0.isAvailable();let r=e&&!Y0.previouslyFailed();if(t.webSocketOnly&&(e||_s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Y0];else{const i=this.transports_=[];for(const l of Rb.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class nD{constructor(t,e,r,i,l,d,f,g,b,D){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=g,this.onKill_=b,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cg("c:"+this.id+":"),this.transportManager_=new Rb(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ug(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Zl("t",t),r=Zl("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Zl("t",t),r=Zl("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Zl("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?FE("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):FE("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&_s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),ug(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ug(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class J0{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class Pb{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,Q.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let l=0;l<i.length;l++)if(i[l].callback===e&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(t){(0,Q.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class X0 extends Pb{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Q.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new X0}getInitialEvent(t){return(0,Q.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Bn(){return new Vn("")}function vn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ql(n){return n.pieces_.length-n.pieceNum_}function Un(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Vn(n.pieces_,t)}function e_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gg(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function xd(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Vn(t,0)}function Sr(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Vn)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Vn(e,0)}function bn(n){return n.pieceNum_>=n.pieces_.length}function vs(n,t){const e=vn(n),r=vn(t);if(null===e)return t;if(e===r)return vs(Un(n),Un(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function YA(n,t){const e=gg(n,0),r=gg(t,0);for(let i=0;i<e.length&&i<r.length;i++){const l=Gl(e[i],r[i]);if(0!==l)return l}return e.length===r.length?0:e.length<r.length?-1:1}function iD(n,t){if(ql(n)!==ql(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function Bo(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(ql(n)>ql(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class sD{constructor(t,e){this.errorPrefix_=e,this.parts_=gg(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Q.ug)(this.parts_[r]);KA(this)}}function KA(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+bs(n))}function bs(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class mg extends Pb{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mg}getInitialEvent(t){return(0,Q.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Td=1e3;let uf,Id=(()=>{class n extends J0{constructor(e,r,i,l,d,f,g,b){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=g,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=cg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Td,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,Q.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mg.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&X0.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const l=++this.requestNumber_,d={r:l,a:e,b:r};this.log_((0,Q.Pz)(d)),(0,Q.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const r=new Q.BH,i={p:e._path.toString(),q:e._queryObject},l={action:"g",request:i,onComplete:f=>{const g=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||l!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(e,r,i,l){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,Q.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Q.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const g={onComplete:l,hashFn:r,query:e,tag:i};this.listens.get(f).set(d,g),this.connected_&&this.sendListen_(g)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const d={p:i};e.tag&&(d.q=r._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest("q",d,g=>{const b=g.d,D=g.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",g),"ok"!==D&&this.removeListen_(i,l),e.onComplete&&e.onComplete(D,b))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,Q.r3)(e,"w")){const i=(0,Q.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();_s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,Q.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,Q.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const d=l.s,f=l.d||"error";this.authToken_===e&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,Q.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,r)}sendUnlisten_(e,r,i,l){this.log_("Unlisten on "+e+" for "+r);const d={p:e};l&&(d.q=i,d.t=l),this.sendRequest("n",d)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,l){const d={p:r,d:i};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(e,r,i,l){this.putInternal("p",e,r,i,l)}merge(e,r,i,l){this.putInternal("m",e,r,i,l)}putInternal(e,r,i,l,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,Q.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):FE("Unrecognized action received from server: "+(0,Q.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,Q.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Td,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Td,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Td),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,He.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),l=e.onRealtimeDisconnect_.bind(e),d=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let g=!1,b=null;const D=function(){b?b.close():(g=!0,l())};e.realtime_={close:D,sendRequest:function($){(0,Q.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest($)}};const F=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[$,re]=yield Promise.all([e.authTokenProvider_.getToken(F),e.appCheckTokenProvider_.getToken(F)]);g?_i("getToken() completed but was canceled"):(_i("getToken() completed. Creating connection."),e.authToken_=$&&$.accessToken,e.appCheckToken_=re&&re.token,b=new nD(d,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,l,ge=>{_s(ge+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch($){e.log_("Failed to get token: "+$),g||(e.repoInfo_.nodeAdmin&&_s($),D())}}})()}interrupt(e){_i("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_i("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,Q.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Td,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(d=>Kc(d)).join("$"):"default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const i=new Vn(e).toString();let l;if(this.listens.has(i)){const d=this.listens.get(i);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,r){_i("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){_i("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,Q.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+PE.replace(/\./g,"-")]=1,(0,Q.uI)()?e["framework.cordova"]=1:(0,Q.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=X0.getInstance().currentlyOnline();return(0,Q.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Cn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Cn(t,e)}}class Jc{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new Cn(oo,t),i=new Cn(oo,e);return 0!==this.compare(r,i)}minPost(){return Cn.MIN}}class Vb extends Jc{static get __EMPTY_NODE(){return uf}static set __EMPTY_NODE(t){uf=t}compare(t,e){return Gl(t.name,e.name)}isDefinedOn(t){throw(0,Q.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Cn.MIN}maxPost(){return new Cn(ys,uf)}makePost(t,e){return(0,Q.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Cn(t,uf)}toString(){return".key"}}const ya=new Vb;class _g{constructor(t,e,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=e?r(t.key,e):1,i&&(d*=-1),d<0)t=this.isReverse_?t.left:t.right;else{if(0===d){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let t_,Uo=(()=>{class n{constructor(e,r,i,l,d){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=l?l:$s.EMPTY_NODE,this.right=null!=d?d:$s.EMPTY_NODE}copy(e,r,i,l,d){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let l=this;const d=i(e,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(e,r,i),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return $s.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,l;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return $s.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class $s{constructor(t,e=$s.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new $s(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Uo.BLACK,null,null))}remove(t){return new $s(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Uo.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new _g(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new _g(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new _g(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new _g(this.root_,null,this.comparator_,!0,t)}}function XA(n,t){return Gl(n.name,t.name)}function Bb(n,t){return Gl(n,t)}$s.EMPTY_NODE=new class{copy(t,e,r,i,l){return this}insert(t,e,r){return new Uo(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ub=function(n){return"number"==typeof n?"number:"+_b(n):"string:"+n},uD=function(n){if(n.isLeafNode()){const t=n.val();(0,Q.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,Q.r3)(t,".sv"),"Priority must be a string or number.")}else(0,Q.hu)(n===t_||n.isEmpty(),"priority of unexpected type.");(0,Q.hu)(n===t_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let dD,eN,n_,yg=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,Q.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),uD(this.priorityNode_)}static set __childrenNodeConstructor(e){dD=e}static get __childrenNodeConstructor(){return dD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return bn(e)?this:".priority"===vn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=vn(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Q.hu)(".priority"!==i||1===ql(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ub(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?_b(this.value_):this.value_,this.lazyHash_=j0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,Q.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Q.hu)(l>=0,"Unknown leaf type: "+r),(0,Q.hu)(d>=0,"Unknown leaf type: "+i),l===d?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Cr=new class extends Jc{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),l=r.compareTo(i);return 0===l?Gl(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Cn.MIN}maxPost(){return new Cn(ys,new yg("[PRIORITY-POST]",n_))}makePost(t,e){const r=eN(t);return new Cn(e,new yg("[PRIORITY-POST]",r))}toString(){return".priority"}},va=Math.log(2);class f2{constructor(t){this.count=parseInt(Math.log(t+1)/va,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Hb=function(n,t,e,r){n.sort(t);const i=function(g,b){const D=b-g;let x,F;if(0===D)return null;if(1===D)return x=n[g],F=e?e(x):x,new Uo(F,x.node,Uo.BLACK,null,null);{const $=parseInt(D/2,10)+g,re=i(g,$),ge=i($+1,b);return x=n[$],F=e?e(x):x,new Uo(F,x.node,Uo.BLACK,re,ge)}},f=function(g){let b=null,D=null,x=n.length;const F=function(re,ge){const Me=x-re,Qe=x;x-=re;const st=i(Me+1,Qe),pt=n[Me],mt=e?e(pt):pt;$(new Uo(mt,pt.node,ge,null,st))},$=function(re){b?(b.left=re,b=re):(D=re,b=re)};for(let re=0;re<g.count;++re){const ge=g.nextBitIsOne(),Me=Math.pow(2,g.count-(re+1));ge?F(Me,Uo.BLACK):(F(Me,Uo.BLACK),F(Me,Uo.RED))}return D}(new f2(n.length));return new $s(r||t,f)};let pD;const Sd={};class il{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,Q.hu)(Sd&&Cr,"ChildrenNode.ts has not been loaded"),pD=pD||new il({".priority":Sd},{".priority":Cr}),pD}get(t){const e=(0,Q.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof $s?e:null}hasIndex(t){return(0,Q.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,Q.hu)(t!==ya,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=e.getIterator(Cn.Wrap);let f,d=l.getNext();for(;d;)i=i||t.isDefinedOn(d.node),r.push(d),d=l.getNext();f=i?Hb(r,t.getCompare()):Sd;const g=t.toString(),b=Object.assign({},this.indexSet_);b[g]=t;const D=Object.assign({},this.indexes_);return D[g]=f,new il(D,b)}addToIndexes(t,e){const r=(0,Q.UI)(this.indexes_,(i,l)=>{const d=(0,Q.DV)(this.indexSet_,l);if((0,Q.hu)(d,"Missing index implementation for "+l),i===Sd){if(d.isDefinedOn(t.node)){const f=[],g=e.getIterator(Cn.Wrap);let b=g.getNext();for(;b;)b.name!==t.name&&f.push(b),b=g.getNext();return f.push(t),Hb(f,d.getCompare())}return Sd}{const f=e.get(t.name);let g=i;return f&&(g=g.remove(new Cn(t.name,f))),g.insert(t,t.node)}});return new il(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,Q.UI)(this.indexes_,i=>{if(i===Sd)return i;{const l=e.get(t.name);return l?i.remove(new Cn(t.name,l)):i}});return new il(r,this.indexSet_)}}let df,nn=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&uD(this.priorityNode_),this.children_.isEmpty()&&(0,Q.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return df||(df=new n(new $s(Bb),null,il.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||df}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?df:r}}getChild(e){const r=vn(e);return null===r?this:this.getImmediateChild(r).getChild(Un(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,Q.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new Cn(e,r);let l,d;r.isEmpty()?(l=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?df:this.priorityNode_;return new n(l,f,d)}}updateChild(e,r){const i=vn(e);if(null===i)return r;{(0,Q.hu)(".priority"!==vn(e)||1===ql(e),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(Un(e),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,l=0,d=!0;if(this.forEachChild(Cr,(f,g)=>{r[f]=g.val(e),i++,d&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):d=!1}),!e&&d&&l<2*i){const f=[];for(const g in r)f[g]=r[g];return f}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ub(this.getPriority().val())+":"),this.forEachChild(Cr,(r,i)=>{const l=i.hash();""!==l&&(e+=":"+r+":"+l)}),this.lazyHash_=""===e?"":j0(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const l=this.resolveIndex_(i);if(l){const d=l.getPredecessorKey(new Cn(e,r));return d?d.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new Cn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new Cn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Cn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Cn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)>0;)l.getNext(),d=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hf?-1:0}withIndex(e){if(e===ya||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===ya||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Cr),l=r.getIterator(Cr);let d=i.getNext(),f=l.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=l.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(e){return e===ya?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const hf=new class extends nn{constructor(){super(new $s(Bb),nn.EMPTY_NODE,il.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return nn.EMPTY_NODE}isEmpty(){return!1}};function Or(n,t=null){if(null===n)return nn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,Q.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new yg(n,Or(t));if(n instanceof Array){let e=nn.EMPTY_NODE;return yi(n,(r,i)=>{if((0,Q.r3)(n,r)&&"."!==r.substring(0,1)){const l=Or(i);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(r,l))}}),e.updatePriority(Or(t))}{const e=[];let r=!1;if(yi(n,(d,f)=>{if("."!==d.substring(0,1)){const g=Or(f);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),e.push(new Cn(d,g)))}}),0===e.length)return nn.EMPTY_NODE;const l=Hb(e,XA,d=>d.name,Bb);if(r){const d=Hb(e,Cr.getCompare());return new nn(l,Or(t),new il({".priority":d},{".priority":Cr}))}return new nn(l,Or(t),il.Default)}}Object.defineProperties(Cn,{MIN:{value:new Cn(oo,nn.EMPTY_NODE)},MAX:{value:new Cn(ys,hf)}}),Vb.__EMPTY_NODE=nn.EMPTY_NODE,yg.__childrenNodeConstructor=nn,t_=hf,n_=hf,function(n){eN=n}(Or);class vg extends Jc{constructor(t){super(),this.indexPath_=t,(0,Q.hu)(!bn(t)&&".priority"!==vn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),l=r.compareTo(i);return 0===l?Gl(t.name,e.name):l}makePost(t,e){const r=Or(t),i=nn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Cn(e,i)}maxPost(){const t=nn.EMPTY_NODE.updateChild(this.indexPath_,hf);return new Cn(ys,t)}toString(){return gg(this.indexPath_,0).join("/")}}const jb=new class extends Jc{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?Gl(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Cn.MIN}maxPost(){return Cn.MAX}makePost(t,e){const r=Or(t);return new Cn(e,r)}toString(){return".value"}},ff="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",r_=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const l=new Array(8);for(i=7;i>=0;i--)l[i]=ff.charAt(e%64),e=Math.floor(e/64);(0,Q.hu)(0===e,"Cannot push at time == 0");let d=l.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=ff.charAt(t[i]);return(0,Q.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),Ad=function(n){if(n===""+q0)return"-";const t=bb(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let d=0;d<e.length;d++)e[d]=n.charAt(d);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return ys;const l=ff.charAt(ff.indexOf(e[r])+1);return e[r]=l,e.slice(0,r+1).join("")},Zb=function(n){if(n===""+UE)return oo;const t=bb(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+q0:(delete e[e.length-1],e.join("")):(e[e.length-1]=ff.charAt(ff.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function Ho(n){return{type:"value",snapshotNode:n}}function sl(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function bg(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function wg(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class $o{constructor(t){this.index_=t}updateChild(t,e,r,i,l,d){(0,Q.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?t.hasChild(e)?d.trackChildChange(bg(e,f)):(0,Q.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(sl(e,r)):d.trackChildChange(wg(e,r,f))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(Cr,(i,l)=>{e.hasChild(i)||r.trackChildChange(bg(i,l))}),e.isLeafNode()||e.forEachChild(Cr,(i,l)=>{if(t.hasChild(i)){const d=t.getImmediateChild(i);d.equals(l)||r.trackChildChange(wg(i,l,d))}else r.trackChildChange(sl(i,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?nn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Wl{constructor(t){this.indexedFilter_=new $o(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Wl.getStartPost_(t),this.endPost_=Wl.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,l,d){return this.matches(new Cn(e,r))||(r=nn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,l,d)}updateFullNode(t,e,r){e.isLeafNode()&&(e=nn.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(nn.EMPTY_NODE);const l=this;return e.forEachChild(Cr,(d,f)=>{l.matches(new Cn(d,f))||(i=i.updateImmediateChild(d,nn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class ns{constructor(t){this.rangedFilter_=new Wl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,l,d){return this.rangedFilter_.matches(new Cn(e,r))||(r=nn.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,l,d):this.fullLimitUpdateChild_(t,e,r,l,d)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=nn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let l;i=nn.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const f=l.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let l,d,f,g;if(i=e.withIndex(this.index_),i=i.updatePriority(nn.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();f=(F,$)=>x($,F)}else g=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let b=0,D=!1;for(;g.hasNext();){const x=g.getNext();!D&&f(l,x)<=0&&(D=!0),D&&b<this.limit_&&f(x,d)<=0?b++:i=i.updateImmediateChild(x.name,nn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,l){let d;if(this.reverse_){const x=this.index_.getCompare();d=(F,$)=>x($,F)}else d=this.index_.getCompare();const f=t;(0,Q.hu)(f.numChildren()===this.limit_,"");const g=new Cn(e,r),b=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),D=this.rangedFilter_.matches(g);if(f.hasChild(e)){const x=f.getImmediateChild(e);let F=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=F&&(F.name===e||f.hasChild(F.name));)F=i.getChildAfterChild(this.index_,F,this.reverse_);const $=null==F?1:d(F,g);if(D&&!r.isEmpty()&&$>=0)return null!=l&&l.trackChildChange(wg(e,r,x)),f.updateImmediateChild(e,r);{null!=l&&l.trackChildChange(bg(e,x));const ge=f.updateImmediateChild(e,nn.EMPTY_NODE);return null!=F&&this.rangedFilter_.matches(F)?(null!=l&&l.trackChildChange(sl(F.name,F.node)),ge.updateImmediateChild(F.name,F.node)):ge}}return r.isEmpty()?t:D&&d(b,g)>=0?(null!=l&&(l.trackChildChange(bg(b.name,b.node)),l.trackChildChange(sl(e,r))),f.updateImmediateChild(e,r).updateImmediateChild(b.name,nn.EMPTY_NODE)):t}}class ol{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Q.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:oo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Q.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ys}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Q.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Cr}copy(){const t=new ol;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Xc(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function eu(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function zl(n,t){const e=n.copy();return e.index_=t,e}function Nd(n){const t={};if(n.isDefault())return t;let e;return n.index_===Cr?e="$priority":n.index_===jb?e="$value":n.index_===ya?e="$key":((0,Q.hu)(n.index_ instanceof vg,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,Q.Pz)(e),n.startSet_&&(t.startAt=(0,Q.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,Q.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,Q.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,Q.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Md(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Cr&&(t.i=n.index_.toString()),t}class Yl extends J0{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=cg("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,Q.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const d=Yl.getListenId_(t,r),f={};this.listens_[d]=f;const g=Nd(t._queryParams);this.restRequest_(l+".json",g,(b,D)=>{let x=D;if(404===b&&(x=null,b=null),null===b&&this.onDataUpdate_(l,x,!1,r),(0,Q.DV)(this.listens_,d)===f){let F;F=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(F,null)}})}unlisten(t,e){const r=Yl.getListenId_(t,e);delete this.listens_[r]}get(t){const e=Nd(t._queryParams),r=t._path.toString(),i=new Q.BH;return this.restRequest_(r+".json",e,(l,d)=>{let f=d;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(e.auth=i.accessToken),l&&l.token&&(e.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,Q.xO)(e);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let g=null;if(f.status>=200&&f.status<300){try{g=(0,Q.cI)(f.responseText)}catch(b){_s("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,g)}else 401!==f.status&&404!==f.status&&_s("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class mf{constructor(){this.rootNode_=nn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Cg(){return{value:null,children:new Map}}function Rd(n,t,e){if(bn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=vn(t);n.children.has(r)||n.children.set(r,Cg()),Rd(n.children.get(r),t=Un(t),e)}}function s_(n,t){if(bn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Cr,(r,i)=>{Rd(n,new Vn(r),i)}),s_(n,t)}}if(n.children.size>0){const e=vn(t);return t=Un(t),n.children.has(e)&&s_(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function o_(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{o_(i,new Vn(t.toString()+"/"+r),e)})}class yD{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&yi(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class rN{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new yD(t);const r=1e4+2e4*Math.random();ug(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;yi(t,(i,l)=>{l>0&&(0,Q.r3)(this.statsToReport_,i)&&(e[i]=l,r=!0)}),r&&this.server_.reportStats(e),ug(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ao=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ao||(ao={})),ao))();function l_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class c_{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=ao.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(bn(this.path)){if(null!=this.affectedTree.value)return(0,Q.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Vn(t));return new c_(Bn(),e,this.revert)}}return(0,Q.hu)(vn(this.path)===t,"operationForChild called for unrelated child."),new c_(Un(this.path),this.affectedTree,this.revert)}}class u_{constructor(t,e){this.source=t,this.path=e,this.type=ao.LISTEN_COMPLETE}operationForChild(t){return bn(this.path)?new u_(this.source,Bn()):new u_(this.source,Un(this.path))}}class kd{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=ao.OVERWRITE}operationForChild(t){return bn(this.path)?new kd(this.source,Bn(),this.snap.getImmediateChild(t)):new kd(this.source,Un(this.path),this.snap)}}class Pd{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=ao.MERGE}operationForChild(t){if(bn(this.path)){const e=this.children.subtree(new Vn(t));return e.isEmpty()?null:e.value?new kd(this.source,Bn(),e.value):new Pd(this.source,Bn(),e)}return(0,Q.hu)(vn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Pd(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class tu{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(bn(t))return this.isFullyInitialized()&&!this.filtered_;const e=vn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class wD{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Eg(n,t,e,r,i,l){const d=r.filter(f=>f.type===e);d.sort((f,g)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,Q.g5)("Should only compare child_ events.");const r=new Cn(t.childName,t.snapshotNode),i=new Cn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,f,g)),d.forEach(f=>{const g=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,l);i.forEach(b=>{b.respondsTo(f.type)&&t.push(b.createEvent(g,n.query_))})})}function Dg(n,t){return{eventCache:n,serverCache:t}}function d_(n,t,e,r){return Dg(new tu(t,e,r),n.serverCache)}function oN(n,t,e,r){return Dg(n.eventCache,new tu(t,e,r))}function Kb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Od(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let CD;class gr{constructor(t,e=(()=>(CD||(CD=new $s(lf)),CD))()){this.value=t,this.children=e}static fromObject(t){let e=new gr(null);return yi(t,(r,i)=>{e=e.set(new Vn(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Bn(),value:this.value};if(bn(t))return null;{const r=vn(t),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(Un(t),e);return null!=l?{path:Sr(new Vn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(bn(t))return this;{const e=vn(t),r=this.children.get(e);return null!==r?r.subtree(Un(t)):new gr(null)}}set(t,e){if(bn(t))return new gr(e,this.children);{const r=vn(t),l=(this.children.get(r)||new gr(null)).set(Un(t),e),d=this.children.insert(r,l);return new gr(this.value,d)}}remove(t){if(bn(t))return this.children.isEmpty()?new gr(null):new gr(null,this.children);{const e=vn(t),r=this.children.get(e);if(r){const i=r.remove(Un(t));let l;return l=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&l.isEmpty()?new gr(null):new gr(this.value,l)}return this}}get(t){if(bn(t))return this.value;{const e=vn(t),r=this.children.get(e);return r?r.get(Un(t)):null}}setTree(t,e){if(bn(t))return e;{const r=vn(t),l=(this.children.get(r)||new gr(null)).setTree(Un(t),e);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new gr(this.value,d)}}fold(t){return this.fold_(Bn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(Sr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,Bn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(bn(t))return null;{const l=vn(t),d=this.children.get(l);return d?d.findOnPath_(Un(t),Sr(e,l),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Bn(),e)}foreachOnPath_(t,e,r){if(bn(t))return this;{this.value&&r(e,this.value);const i=vn(t),l=this.children.get(i);return l?l.foreachOnPath_(Un(t),Sr(e,i),r):new gr(null)}}foreach(t){this.foreach_(Bn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(Sr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class lo{constructor(t){this.writeTree_=t}static empty(){return new lo(new gr(null))}}function Fd(n,t,e){if(bn(t))return new lo(new gr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let l=r.value;const d=vs(i,t);return l=l.updateChild(d,e),new lo(n.writeTree_.set(i,l))}{const i=new gr(e),l=n.writeTree_.setTree(t,i);return new lo(l)}}}function Qb(n,t,e){let r=n;return yi(e,(i,l)=>{r=Fd(r,Sr(t,i),l)}),r}function lN(n,t){if(bn(t))return lo.empty();{const e=n.writeTree_.setTree(t,new gr(null));return new lo(e)}}function ED(n,t){return null!=_f(n,t)}function _f(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(vs(e.path,t)):null}function DD(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Cr,(r,i)=>{t.push(new Cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new Cn(r,i.value))}),t}function Kl(n,t){if(bn(t))return n;{const e=_f(n,t);return new lo(null!=e?new gr(e):n.writeTree_.subtree(t))}}function xD(n){return n.writeTree_.isEmpty()}function yf(n,t){return Ld(Bn(),n.writeTree_,t)}function Ld(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,l)=>{".priority"===i?((0,Q.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):e=Ld(Sr(n,i),l,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(Sr(n,".priority"),r)),e}}function h_(n,t){return m_(t,n)}function uN(n,t){if(n.snap)return Bo(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Bo(Sr(n.path,e),t))return!0;return!1}function dN(n){return n.visible}function AD(n,t,e){let r=lo.empty();for(let i=0;i<n.length;++i){const l=n[i];if(t(l)){const d=l.path;let f;if(l.snap)Bo(e,d)?(f=vs(e,d),r=Fd(r,f,l.snap)):Bo(d,e)&&(f=vs(d,e),r=Fd(r,Bn(),l.snap.getChild(f)));else{if(!l.children)throw(0,Q.g5)("WriteRecord should have .snap or .children");if(Bo(e,d))f=vs(e,d),r=Qb(r,f,l.children);else if(Bo(d,e))if(f=vs(d,e),bn(f))r=Qb(r,Bn(),l.children);else{const g=(0,Q.DV)(l.children,vn(f));if(g){const b=g.getChild(Un(f));r=Fd(r,Bn(),b)}}}}}return r}function ND(n,t,e,r,i){if(r||i){const l=Kl(n.visibleWrites,t);return!i&&xD(l)?e:i||null!=e||ED(l,Bn())?yf(AD(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(Bo(b.path,t)||Bo(t,b.path))},t),e||nn.EMPTY_NODE):null}{const l=_f(n.visibleWrites,t);if(null!=l)return l;{const d=Kl(n.visibleWrites,t);return xD(d)?e:null!=e||ED(d,Bn())?yf(d,e||nn.EMPTY_NODE):null}}}function vf(n,t,e,r){return ND(n.writeTree,n.treePath,t,e,r)}function PD(n,t){return function(n,t,e){let r=nn.EMPTY_NODE;const i=_f(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Cr,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(e){const l=Kl(n.visibleWrites,t);return e.forEachChild(Cr,(d,f)=>{const g=yf(Kl(l,new Vn(d)),f);r=r.updateImmediateChild(d,g)}),DD(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return DD(Kl(n.visibleWrites,t)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,t)}function p_(n,t,e,r){return function(n,t,e,r,i){(0,Q.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=Sr(t,e);if(ED(n.visibleWrites,l))return null;{const d=Kl(n.visibleWrites,l);return xD(d)?i.getChild(e):yf(d,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function g_(n,t){return function(n,t){return _f(n.visibleWrites,t)}(n.writeTree,Sr(n.treePath,t))}function Vd(n,t,e){return function(n,t,e,r){const i=Sr(t,e),l=_f(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(e)?yf(Kl(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function OD(n,t){return m_(Sr(n.treePath,t),n.writeTree)}function m_(n,t){return{treePath:n,writeTree:t}}class Jb{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,Q.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,Q.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===e&&"child_removed"===l)this.changeMap.set(r,wg(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===l)this.changeMap.set(r,bg(r,i.oldSnap));else if("child_changed"===e&&"child_added"===l)this.changeMap.set(r,sl(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==l)throw(0,Q.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,wg(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const __=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class xg{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new tu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vd(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Od(this.viewCache_),l=function(n,t,e,r,i,l){return function(n,t,e,r,i,l,d){let f;const g=Kl(n.visibleWrites,t),b=_f(g,Bn());if(null!=b)f=b;else{if(null==e)return[];f=yf(g,e)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const D=[],x=d.getCompare(),F=l?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let $=F.getNext();for(;$&&D.length<i;)0!==x($,r)&&D.push($),$=F.getNext();return D}}(n.writeTree,n.treePath,t,e,r,i,l)}(this.writes_,i,e,1,r,t);return 0===l.length?null:l[0]}}function y_(n,t,e,r,i,l){const d=t.eventCache;if(null!=g_(r,e))return t;{let f,g;if(bn(e))if((0,Q.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const b=Od(t),x=PD(r,b instanceof nn?b:nn.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),x,l)}else{const b=vf(r,Od(t));f=n.filter.updateFullNode(t.eventCache.getNode(),b,l)}else{const b=vn(e);if(".priority"===b){(0,Q.hu)(1===ql(e),"Can't have a priority with additional path components");const D=d.getNode();g=t.serverCache.getNode();const x=p_(r,e,D,g);f=null!=x?n.filter.updatePriority(D,x):d.getNode()}else{const D=Un(e);let x;if(d.isCompleteForChild(b)){g=t.serverCache.getNode();const F=p_(r,e,d.getNode(),g);x=null!=F?d.getNode().getImmediateChild(b).updateChild(D,F):d.getNode().getImmediateChild(b)}else x=Vd(r,b,t.serverCache);f=null!=x?n.filter.updateChild(d.getNode(),b,x,D,i,l):d.getNode()}}return d_(t,f,d.isFullyInitialized()||bn(e),n.filter.filtersNodes())}}function v_(n,t,e,r,i,l,d,f){const g=t.serverCache;let b;const D=d?n.filter:n.filter.getIndexedFilter();if(bn(e))b=D.updateFullNode(g.getNode(),r,null);else if(D.filtersNodes()&&!g.isFiltered()){const $=g.getNode().updateChild(e,r);b=D.updateFullNode(g.getNode(),$,null)}else{const $=vn(e);if(!g.isCompleteForPath(e)&&ql(e)>1)return t;const re=Un(e),Me=g.getNode().getImmediateChild($).updateChild(re,r);b=".priority"===$?D.updatePriority(g.getNode(),Me):D.updateChild(g.getNode(),$,Me,re,__,null)}const x=oN(t,b,g.isFullyInitialized()||bn(e),D.filtersNodes());return y_(n,x,e,i,new xg(i,x,l),f)}function b_(n,t,e,r,i,l,d){const f=t.eventCache;let g,b;const D=new xg(i,t,l);if(bn(e))b=n.filter.updateFullNode(t.eventCache.getNode(),r,d),g=d_(t,b,!0,n.filter.filtersNodes());else{const x=vn(e);if(".priority"===x)b=n.filter.updatePriority(t.eventCache.getNode(),r),g=d_(t,b,f.isFullyInitialized(),f.isFiltered());else{const F=Un(e),$=f.getNode().getImmediateChild(x);let re;if(bn(F))re=r;else{const ge=D.getCompleteChild(x);re=null!=ge?".priority"===e_(F)&&ge.getChild(xd(F)).isEmpty()?ge:ge.updateChild(F,r):nn.EMPTY_NODE}g=$.equals(re)?t:d_(t,n.filter.updateChild(f.getNode(),x,re,F,D,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return g}function w_(n,t){return n.eventCache.isCompleteForChild(t)}function C_(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function Tg(n,t,e,r,i,l,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let b,g=t;b=bn(e)?r:new gr(null).setTree(e,r);const D=t.serverCache.getNode();return b.children.inorderTraversal((x,F)=>{if(D.hasChild(x)){const re=C_(0,t.serverCache.getNode().getImmediateChild(x),F);g=v_(n,g,new Vn(x),re,i,l,d,f)}}),b.children.inorderTraversal((x,F)=>{const $=!t.serverCache.isCompleteForChild(x)&&void 0===F.value;if(!D.hasChild(x)&&!$){const ge=C_(0,t.serverCache.getNode().getImmediateChild(x),F);g=v_(n,g,new Vn(x),ge,i,l,d,f)}}),g}class UD{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new $o(r.getIndex()),l=function(n){return n.loadsAllData()?new $o(n.getIndex()):n.hasLimit()?new ns(n):new Wl(n)}(r);this.processor_=function(n){return{filter:n}}(l);const d=e.serverCache,f=e.eventCache,g=i.updateFullNode(nn.EMPTY_NODE,d.getNode(),null),b=l.updateFullNode(nn.EMPTY_NODE,f.getNode(),null),D=new tu(g,d.isFullyInitialized(),i.filtersNodes()),x=new tu(b,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=Dg(x,D),this.eventGenerator_=new wD(this.query_)}get query(){return this.query_}}function yN(n,t){const e=Od(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!bn(t)&&!e.getImmediateChild(vn(t)).isEmpty())?e.getChild(t):null}function t1(n){return 0===n.eventRegistrations_.length}function E_(n,t,e){const r=[];if(e){(0,Q.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(e,i);d&&r.push(d)})}if(t){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Ig(n,t,e,r){t.type===ao.MERGE&&null!==t.source.queryId&&((0,Q.hu)(Od(n.viewCache_),"We should always have a full cache before handling merges"),(0,Q.hu)(Kb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function(n,t,e,r,i){const l=new Jb;let d,f;if(e.type===ao.OVERWRITE){const b=e;b.source.fromUser?d=b_(n,t,b.path,b.snap,r,i,l):((0,Q.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered()&&!bn(b.path),d=v_(n,t,b.path,b.snap,r,i,f,l))}else if(e.type===ao.MERGE){const b=e;b.source.fromUser?d=function(n,t,e,r,i,l,d){let f=t;return r.foreach((g,b)=>{const D=Sr(e,g);w_(t,vn(D))&&(f=b_(n,f,D,b,i,l,d))}),r.foreach((g,b)=>{const D=Sr(e,g);w_(t,vn(D))||(f=b_(n,f,D,b,i,l,d))}),f}(n,t,b.path,b.children,r,i,l):((0,Q.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered(),d=Tg(n,t,b.path,b.children,r,i,f,l))}else if(e.type===ao.ACK_USER_WRITE){const b=e;d=b.revert?function(n,t,e,r,i,l){let d;if(null!=g_(r,e))return t;{const f=new xg(r,t,i),g=t.eventCache.getNode();let b;if(bn(e)||".priority"===vn(e)){let D;if(t.serverCache.isFullyInitialized())D=vf(r,Od(t));else{const x=t.serverCache.getNode();(0,Q.hu)(x instanceof nn,"serverChildren would be complete if leaf node"),D=PD(r,x)}D=D,b=n.filter.updateFullNode(g,D,l)}else{const D=vn(e);let x=Vd(r,D,t.serverCache);null==x&&t.serverCache.isCompleteForChild(D)&&(x=g.getImmediateChild(D)),b=null!=x?n.filter.updateChild(g,D,x,Un(e),f,l):t.eventCache.getNode().hasChild(D)?n.filter.updateChild(g,D,nn.EMPTY_NODE,Un(e),f,l):g,b.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=vf(r,Od(t)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,l)))}return d=t.serverCache.isFullyInitialized()||null!=g_(r,Bn()),d_(t,b,d,n.filter.filtersNodes())}}(n,t,b.path,r,i,l):function(n,t,e,r,i,l,d){if(null!=g_(i,e))return t;const f=t.serverCache.isFiltered(),g=t.serverCache;if(null!=r.value){if(bn(e)&&g.isFullyInitialized()||g.isCompleteForPath(e))return v_(n,t,e,g.getNode().getChild(e),i,l,f,d);if(bn(e)){let b=new gr(null);return g.getNode().forEachChild(ya,(D,x)=>{b=b.set(new Vn(D),x)}),Tg(n,t,e,b,i,l,f,d)}return t}{let b=new gr(null);return r.foreach((D,x)=>{const F=Sr(e,D);g.isCompleteForPath(F)&&(b=b.set(D,g.getNode().getChild(F)))}),Tg(n,t,e,b,i,l,f,d)}}(n,t,b.path,b.affectedTree,r,i,l)}else{if(e.type!==ao.LISTEN_COMPLETE)throw(0,Q.g5)("Unknown operation type: "+e.type);d=function(n,t,e,r,i){const l=t.serverCache;return y_(n,oN(t,l.getNode(),l.isFullyInitialized()||bn(e),l.isFiltered()),e,r,__,i)}(n,t,e.path,r,l)}const g=l.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=Kb(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&e.push(Ho(Kb(t)))}}(t,d,g),{viewCache:d,changes:g}}(n.processor_,i,t,e,r);return function(n,t){(0,Q.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Q.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,Q.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,n1(n,l.changes,l.viewCache.eventCache.getNode(),null)}function n1(n,t,e,r){return function(n,t,e,r){const i=[],l=[];return t.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(d.childName,d.snapshotNode))}),Eg(n,i,"child_removed",t,r,e),Eg(n,i,"child_added",t,r,e),Eg(n,i,"child_moved",l,r,e),Eg(n,i,"child_changed",t,r,e),Eg(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let Sg,Ag;class r1{constructor(){this.views=new Map}}function D_(n,t,e,r){const i=t.source.queryId;if(null!==i){const l=n.views.get(i);return(0,Q.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Ig(l,t,e,r)}{let l=[];for(const d of n.views.values())l=l.concat(Ig(d,t,e,r));return l}}function vN(n,t,e,r,i){const d=n.views.get(t._queryIdentifier);if(!d){let f=vf(e,i?r:null),g=!1;f?g=!0:r instanceof nn?(f=PD(e,r),g=!1):(f=nn.EMPTY_NODE,g=!1);const b=Dg(new tu(f,g,!1),new tu(r,i,!1));return new UD(t,b)}return d}function i1(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function nu(n,t){let e=null;for(const r of n.views.values())e=e||yN(r,t);return e}function ii(n,t){return t._queryParams.loadsAllData()?x_(n):n.views.get(t._queryIdentifier)}function s1(n,t){return null!=ii(n,t)}function ru(n){return null!=x_(n)}function x_(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let zD=1;class Bd{constructor(t){this.listenProvider_=t,this.syncPointTree_=new gr(null),this.pendingWriteTree_={visibleWrites:lo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function o1(n,t,e,r,i){return function(n,t,e,r,i){(0,Q.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=Fd(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?rs(n,new kd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Ql(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,Q.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,l=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=e&&uN(f,r.path)?i=!1:Bo(r.path,f.path)&&(l=!0)),d--}return!!i&&(l?(function(n){n.visibleWrites=AD(n.allWrites,dN,Bn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=lN(n.visibleWrites,r.path):yi(r.children,g=>{n.visibleWrites=lN(n.visibleWrites,Sr(r.path,g))}),!0))}(n.pendingWriteTree_,t)){let l=new gr(null);return null!=r.snap?l=l.set(Bn(),!0):yi(r.children,d=>{l=l.set(new Vn(d),!0)}),rs(n,new c_(r.path,l,e))}return[]}function Ng(n,t,e){return rs(n,new kd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Mg(n,t,e,r){const i=t._path,l=n.syncPointTree_.get(i);let d=[];if(l&&("default"===t._queryIdentifier||s1(l,t))){const f=function(n,t,e,r){const i=t._queryIdentifier,l=[];let d=[];const f=ru(n);if("default"===i)for(const[g,b]of n.views.entries())d=d.concat(E_(b,e,r)),t1(b)&&(n.views.delete(g),b.query._queryParams.loadsAllData()||l.push(b.query));else{const g=n.views.get(i);g&&(d=d.concat(E_(g,e,r)),t1(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||l.push(g.query)))}return f&&!ru(n)&&l.push(new((0,Q.hu)(Sg,"Reference.ts has not been loaded"),Sg)(t._repo,t._path)),{removed:l,events:d}}(l,t,e,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=f.removed;d=f.events;const b=-1!==g.findIndex(x=>x._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(x,F)=>ru(F));if(b&&!D){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const F=function(n){return n.fold((t,e,r)=>{if(e&&ru(e))return[x_(e)];{let i=[];return e&&(i=i1(e)),yi(r,(l,d)=>{i=i.concat(d)}),i}})}(x);for(let $=0;$<F.length;++$){const re=F[$],ge=re.query,Me=KD(n,re);n.listenProvider_.startListening(bf(ge),T_(n,ge),Me.hashFn,Me.onComplete)}}}if(!D&&g.length>0&&!r)if(b){const x=null;n.listenProvider_.stopListening(bf(t),x)}else g.forEach(x=>{const F=n.queryToTagMap.get(I_(x));n.listenProvider_.stopListening(bf(x),F)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=I_(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,g)}return d}function l1(n,t,e){const r=t._path;let i=null,l=!1;n.syncPointTree_.foreachOnPath(r,(x,F)=>{const $=vs(x,r);i=i||nu(F,$),l=l||ru(F)});let f,d=n.syncPointTree_.get(r);d?(l=l||ru(d),i=i||nu(d,Bn())):(d=new r1,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=nn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((F,$)=>{const re=nu($,Bn());re&&(i=i.updateImmediateChild(F,re))}));const g=s1(d,t);if(!g&&!t._queryParams.loadsAllData()){const x=I_(t);(0,Q.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const F=zD++;n.queryToTagMap.set(x,F),n.tagToQueryMap.set(F,x)}let D=function(n,t,e,r,i,l){const d=vN(n,t,r,i,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,d),function(n,t){n.eventRegistrations_.push(t)}(d,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Cr,(l,d)=>{r.push(sl(l,d))}),e.isFullyInitialized()&&r.push(Ho(e.getNode())),n1(n,r,e.getNode(),t)}(d,e)}(d,t,e,h_(n.pendingWriteTree_,r),i,f);if(!g&&!l){const x=ii(d,t);D=D.concat(function(n,t,e){const r=t._path,i=T_(n,t),l=KD(n,e),d=n.listenProvider_.startListening(bf(t),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,Q.hu)(!ru(f.value),"If we're adding a query, it shouldn't be shadowed");else{const g=f.fold((b,D,x)=>{if(!bn(b)&&D&&ru(D))return[x_(D).query];{let F=[];return D&&(F=F.concat(i1(D).map($=>$.query))),yi(x,($,re)=>{F=F.concat(re)}),F}});for(let b=0;b<g.length;++b){const D=g[b];n.listenProvider_.stopListening(bf(D),T_(n,D))}}return d}(n,t,x))}return D}function co(n,t,e){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(d,f)=>{const b=nu(f,vs(d,t));if(b)return b});return ND(i,t,l,e,!0)}function rs(n,t){return c1(t,n.syncPointTree_,null,h_(n.pendingWriteTree_,Bn()))}function c1(n,t,e,r){if(bn(n.path))return u1(n,t,e,r);{const i=t.get(Bn());null==e&&null!=i&&(e=nu(i,Bn()));let l=[];const d=vn(n.path),f=n.operationForChild(d),g=t.children.get(d);if(g&&f){const b=e?e.getImmediateChild(d):null,D=OD(r,d);l=l.concat(c1(f,g,b,D))}return i&&(l=l.concat(D_(i,n,r,e))),l}}function u1(n,t,e,r){const i=t.get(Bn());null==e&&null!=i&&(e=nu(i,Bn()));let l=[];return t.children.inorderTraversal((d,f)=>{const g=e?e.getImmediateChild(d):null,b=OD(r,d),D=n.operationForChild(d);D&&(l=l.concat(u1(D,f,g,b)))}),i&&(l=l.concat(D_(i,n,r,e))),l}function KD(n,t){const e=t.query,r=T_(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||nn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=d1(n,e);if(r){const i=Rg(r),l=i.path,d=i.queryId,f=vs(l,t);return Ud(n,l,new u_(l_(d),f))}return[]}(n,e._path,r):function(n,t){return rs(n,new u_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const l=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return Mg(n,e,null,l)}}}}function T_(n,t){const e=I_(t);return n.queryToTagMap.get(e)}function I_(n){return n._path.toString()+"$"+n._queryIdentifier}function d1(n,t){return n.tagToQueryMap.get(t)}function Rg(n){const t=n.indexOf("$");return(0,Q.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Vn(n.substr(0,t))}}function Ud(n,t,e){const r=n.syncPointTree_.get(t);return(0,Q.hu)(r,"Missing sync point for query tag that we're tracking"),D_(r,e,h_(n.pendingWriteTree_,t),null)}function bf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,Q.hu)(Ag,"Reference.ts has not been loaded"),Ag)(n._repo,n._path):n}class wf{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new wf(e)}node(){return this.node_}}class h1{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Sr(this.path_,t);return new h1(this.syncTree_,e)}node(){return co(this.syncTree_,this.path_)}}const f1=function(n,t,e){return n&&"object"==typeof n?((0,Q.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?p1(n[".sv"],t,e):"object"==typeof n[".sv"]?S_(n[".sv"],t):void(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},p1=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,Q.hu)(!1,"Unexpected server value: "+n)}},S_=function(n,t,e){n.hasOwnProperty("increment")||(0,Q.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Q.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,Q.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},A_=function(n,t,e,r){return M_(t,new h1(e,n),r)},N_=function(n,t,e){return M_(n,new wf(t),e)};function M_(n,t,e){const r=n.getPriority().val(),i=f1(r,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const d=n,f=f1(d.getValue(),t,e);return f!==d.getValue()||i!==d.getPriority().val()?new yg(f,Or(i)):n}{const d=n;return l=d,i!==d.getPriority().val()&&(l=l.updatePriority(new yg(i))),d.forEachChild(Cr,(f,g)=>{const b=M_(g,t.getImmediateChild(f),e);b!==g&&(l=l.updateImmediateChild(f,b))}),l}}class R_{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function kg(n,t){let e=t instanceof Vn?t:new Vn(t),r=n,i=vn(e);for(;null!==i;){const l=(0,Q.DV)(r.node.children,i)||{children:{},childCount:0};r=new R_(i,r,l),e=Un(e),i=vn(e)}return r}function iu(n){return n.node.value}function k_(n,t){n.node.value=t,m1(n)}function g1(n){return n.node.childCount>0}function P_(n,t){yi(n.node.children,(e,r)=>{t(new R_(e,n,r))})}function ex(n,t,e,r){e&&!r&&t(n),P_(n,i=>{ex(i,t,!0,r)}),e&&r&&t(n)}function Pg(n){return new Vn(null===n.parent?n.name:Pg(n.parent)+"/"+n.name)}function m1(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===iu(n)&&!g1(n)}(e),i=(0,Q.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,m1(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,m1(n))}(n.parent,n.name,n)}const AN=/[\[\].#$\/\u0000-\u001F\u007F]/,NN=/[\[\].#$\u0000-\u001F\u007F]/,_1=10485760,O_=function(n){return"string"==typeof n&&0!==n.length&&!AN.test(n)},nx=function(n){return"string"==typeof n&&0!==n.length&&!NN.test(n)},Og=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!G0(n)||n&&"object"==typeof n&&(0,Q.r3)(n,".sv")},ll=function(n,t,e,r){r&&void 0===t||Fg((0,Q.gK)(n,"value"),t,e)},Fg=function(n,t,e){const r=e instanceof Vn?new sD(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+bs(r));if("function"==typeof t)throw new Error(n+"contains a function "+bs(r)+" with contents = "+t.toString());if(G0(t))throw new Error(n+"contains "+t.toString()+" "+bs(r));if("string"==typeof t&&t.length>_1/3&&(0,Q.ug)(t)>_1)throw new Error(n+"contains a string greater than "+_1+" utf8 bytes "+bs(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,l=!1;if(yi(t,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!O_(d)))throw new Error(n+" contains an invalid key ("+d+") "+bs(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,Q.ug)(t),KA(n)})(r,d),Fg(n,f,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,Q.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+bs(r)+" in addition to actual children.")}},rx=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,Q.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const l=[];yi(t,(d,f)=>{const g=new Vn(d);if(Fg(i,f,Sr(e,g)),".priority"===e_(g)&&!Og(f))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(g)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const l=gg(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!O_(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(YA);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&Bo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},F_=function(n,t,e){if(!e||void 0!==t){if(G0(t))throw new Error((0,Q.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Og(t))throw new Error((0,Q.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cf=function(n,t,e,r){if(!(r&&void 0===e||O_(e)))throw new Error((0,Q.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ef=function(n,t,e,r){if(!(r&&void 0===e||nx(e)))throw new Error((0,Q.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},uo=function(n,t){if(".info"===vn(t))throw new Error(n+" failed = Can't modify data under /.info/")},y1=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!O_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nx(n)}(e))throw new Error((0,Q.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sx{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lg(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],l=i.getPath();null!==e&&!iD(l,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:l}),e.events.push(i)}e&&n.eventLists_.push(e)}function L_(n,t,e){Lg(n,e),v1(n,r=>iD(r,t))}function js(n,t,e){Lg(n,e),v1(n,r=>Bo(r,t)||Bo(t,r))}function v1(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(Hd(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Hd(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();$l&&_i("event: "+e.toString()),Cd(r)}}}const ox="repo_interrupt";class Df{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cg(),this.transactionQueueTree_=new R_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function V_(n){const e=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function B_(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:V_(n)})}function b1(n,t,e,r,i){n.dataUpdateCount++;const l=new Vn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let d=[];if(i)if(r){const g=(0,Q.UI)(e,b=>Or(b));d=function(n,t,e,r){const i=d1(n,r);if(i){const l=Rg(i),d=l.path,f=l.queryId,g=vs(d,t),b=gr.fromObject(e);return Ud(n,d,new Pd(l_(f),g,b))}return[]}(n.serverSyncTree_,l,g,i)}else{const g=Or(e);d=function(n,t,e,r){const i=d1(n,r);if(null!=i){const l=Rg(i),d=l.path,f=l.queryId,g=vs(d,t);return Ud(n,d,new kd(l_(f),g,e))}return[]}(n.serverSyncTree_,l,g,i)}else if(r){const g=(0,Q.UI)(e,b=>Or(b));d=function(n,t,e){const r=gr.fromObject(e);return rs(n,new Pd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,l,g)}else{const g=Or(e);d=Ng(n.serverSyncTree_,l,g)}let f=l;d.length>0&&(f=cl(n,l)),js(n.eventQueue_,f,d)}function w1(n,t){kt(n,"connected",t),!1===t&&function(n){$d(n,"onDisconnectEvents");const t=B_(n),e=Cg();o_(n.onDisconnect_,Bn(),(i,l)=>{const d=A_(i,l,n.serverSyncTree_,t);Rd(e,i,d)});let r=[];o_(e,Bn(),(i,l)=>{r=r.concat(Ng(n.serverSyncTree_,i,l));const d=G_(n,i);cl(n,d)}),n.onDisconnect_=Cg(),js(n.eventQueue_,Bn(),r)}(n)}function kt(n,t,e){const r=new Vn("/.info/"+t),i=Or(e);n.infoData_.updateSnapshot(r,i);const l=Ng(n.infoSyncTree_,r,i);js(n.eventQueue_,r,l)}function U_(n){return n.nextWriteId_++}function C1(n,t,e,r,i){$d(n,"set",{path:t.toString(),value:e,priority:r});const l=B_(n),d=Or(e,r),f=co(n.serverSyncTree_,t),g=N_(d,f,l),b=U_(n),D=o1(n.serverSyncTree_,t,g,b,!0);Lg(n.eventQueue_,D),n.server_.put(t.toString(),d.val(!0),(F,$)=>{const re="ok"===F;re||_s("set at "+t+" failed: "+F);const ge=Ql(n.serverSyncTree_,b,!re);js(n.eventQueue_,t,ge),Jl(0,i,F,$)});const x=G_(n,t);cl(n,x),js(n.eventQueue_,x,[])}function $_(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&s_(n.onDisconnect_,t),Jl(0,e,r,i)})}function Vg(n,t,e,r){const i=Or(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(l,d)=>{"ok"===l&&Rd(n.onDisconnect_,t,i),Jl(0,r,l,d)})}function Bg(n,t,e){let r;r=".info"===vn(t._path)?Mg(n.infoSyncTree_,t,e):Mg(n.serverSyncTree_,t,e),L_(n.eventQueue_,t._path,r)}function lx(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ox)}function $d(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),_i(e,...t)}function Jl(n,t,e,r){t&&Cd(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let l=i;r&&(l+=": "+r);const d=new Error(l);d.code=i,t(d)}})}function E1(n,t,e){return co(n.serverSyncTree_,t,e)||nn.EMPTY_NODE}function j_(n,t=n.transactionQueueTree_){if(t||Hg(n,t),iu(t)){const e=hx(n,t);(0,Q.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(b=>b.currentWriteId),i=E1(n,t,r);let l=i;const d=i.hash();for(let b=0;b<e.length;b++){const D=e[b];(0,Q.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const x=vs(t,D.path);l=l.updateChild(x,D.currentOutputSnapshotRaw)}const f=l.val(!0),g=t;n.server_.put(g.toString(),f,b=>{$d(n,"transaction put response",{path:g.toString(),status:b});let D=[];if("ok"===b){const x=[];for(let F=0;F<e.length;F++)e[F].status=2,D=D.concat(Ql(n.serverSyncTree_,e[F].currentWriteId)),e[F].onComplete&&x.push(()=>e[F].onComplete(null,!0,e[F].currentOutputSnapshotResolved)),e[F].unwatcher();Hg(n,kg(n.transactionQueueTree_,t)),j_(n,n.transactionQueueTree_),js(n.eventQueue_,t,D);for(let F=0;F<x.length;F++)Cd(x[F])}else{if("datastale"===b)for(let x=0;x<e.length;x++)e[x].status=3===e[x].status?4:0;else{_s("transaction at "+g.toString()+" failed: "+b);for(let x=0;x<e.length;x++)e[x].status=4,e[x].abortReason=b}cl(n,t)}},d)}(n,Pg(t),e)}else g1(t)&&P_(t,e=>{j_(n,e)})}function cl(n,t){const e=dx(n,t),r=Pg(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const d=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const g=t[f],b=vs(e,g.path);let x,D=!1;if((0,Q.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)D=!0,x=g.abortReason,i=i.concat(Ql(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)D=!0,x="maxretry",i=i.concat(Ql(n.serverSyncTree_,g.currentWriteId,!0));else{const F=E1(n,g.path,d);g.currentInputSnapshot=F;const $=t[f].update(F.val());if(void 0!==$){Fg("transaction failed: Data returned ",$,g.path);let re=Or($);"object"==typeof $&&null!=$&&(0,Q.r3)($,".priority")||(re=re.updatePriority(F.getPriority()));const Me=g.currentWriteId,Qe=B_(n),st=N_(re,F,Qe);g.currentOutputSnapshotRaw=re,g.currentOutputSnapshotResolved=st,g.currentWriteId=U_(n),d.splice(d.indexOf(Me),1),i=i.concat(o1(n.serverSyncTree_,g.path,st,g.currentWriteId,g.applyLocally)),i=i.concat(Ql(n.serverSyncTree_,Me,!0))}else D=!0,x="nodata",i=i.concat(Ql(n.serverSyncTree_,g.currentWriteId,!0))}js(n.eventQueue_,e,i),i=[],D&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&r.push("nodata"===x?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(x),!1,null)))}Hg(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Cd(r[f]);j_(n,n.transactionQueueTree_)}(n,hx(n,e),r),r}function dx(n,t){let e,r=n.transactionQueueTree_;for(e=vn(t);null!==e&&void 0===iu(r);)r=kg(r,e),e=vn(t=Un(t));return r}function hx(n,t){const e=[];return Ug(n,t,e),e.sort((r,i)=>r.order-i.order),e}function Ug(n,t,e){const r=iu(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);P_(t,i=>{Ug(n,i,e)})}function Hg(n,t){const e=iu(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,k_(t,e.length>0?e:void 0)}P_(t,r=>{Hg(n,r)})}function G_(n,t){const e=Pg(dx(n,t)),r=kg(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{Z_(n,i)}),Z_(n,r),ex(r,i=>{Z_(n,i)}),e}function Z_(n,t){const e=iu(t);if(e){const r=[];let i=[],l=-1;for(let d=0;d<e.length;d++)3===e[d].status||(1===e[d].status?((0,Q.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,e[d].status=3,e[d].abortReason="set"):((0,Q.hu)(0===e[d].status,"Unexpected transaction status in abort"),e[d].unwatcher(),i=i.concat(Ql(n.serverSyncTree_,e[d].currentWriteId,!0)),e[d].onComplete&&r.push(e[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?k_(t,void 0):e.length=l+1,js(n.eventQueue_,Pg(t),i);for(let d=0;d<r.length;d++)Cd(r[d])}}const jd=function(n,t){const e=BN(n),r=e.namespace;return"firebase.com"===e.domain&&Vo(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&Vo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Eb(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Vn(e.pathString)}},BN=function(n){let t="",e="",r="",i="",l="",d=!0,f="https",g=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(f=n.substring(0,b-1),n=n.substring(b+2));let D=n.indexOf("/");-1===D&&(D=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),t=n.substring(0,Math.min(D,x)),D<x&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(l){}t+="/"+i}return t}(n.substring(D,x)));const F=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):_s(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,x)));b=t.indexOf(":"),b>=0?(d="https"===f||"wss"===f,g=parseInt(t.substring(b+1),10)):b=t.length;const $=t.slice(0,b);if("localhost"===$.toLowerCase())e="localhost";else if($.split(".").length<=2)e=$;else{const re=t.indexOf(".");r=t.substring(0,re).toLowerCase(),e=t.substring(re+1),l=r}"ns"in F&&(l=F.ns)}return{host:t,port:g,domain:e,subdomain:r,secure:d,scheme:f,pathString:i,namespace:l}};class fx{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Q.Pz)(this.snapshot.exportVal())}}class px{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class D1{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,Q.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class x1{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new Q.BH;return $_(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){uo("OnDisconnect.remove",this._path);const t=new Q.BH;return Vg(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){uo("OnDisconnect.set",this._path),ll("OnDisconnect.set",t,this._path,!1);const e=new Q.BH;return Vg(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){uo("OnDisconnect.setWithPriority",this._path),ll("OnDisconnect.setWithPriority",t,this._path,!1),F_("OnDisconnect.setWithPriority",e,!1);const r=new Q.BH;return function(n,t,e,r,i){const l=Or(e,r);n.server_.onDisconnectPut(t.toString(),l.val(!0),(d,f)=>{"ok"===d&&Rd(n.onDisconnect_,t,l),Jl(0,i,d,f)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){uo("OnDisconnect.update",this._path),rx("OnDisconnect.update",t,this._path,!1);const e=new Q.BH;return function(n,t,e,r){if((0,Q.xb)(e))return _i("onDisconnect().update() called with empty data.  Don't do anything."),void Jl(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,l)=>{"ok"===i&&yi(e,(d,f)=>{const g=Or(f);Rd(n.onDisconnect_,Sr(t,d),g)}),Jl(0,r,i,l)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class ws{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return bn(this._path)?null:e_(this._path)}get ref(){return new Go(this._repo,this._path)}get _queryIdentifier(){const t=Md(this._queryParams),e=Kc(t);return"{}"===e?"default":e}get _queryObject(){return Md(this._queryParams)}isEqual(t){if(!((t=(0,Q.m9)(t))instanceof ws))return!1;const e=this._repo===t._repo,r=iD(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function q_(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Xl(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===ya){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==oo)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ys)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===Cr){if(null!=t&&!Og(t)||null!=e&&!Og(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Q.hu)(n.getIndex()instanceof vg||n.getIndex()===jb,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function W_(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Go extends ws{constructor(t,e){super(t,e,new ol,!1)}get parent(){const t=xd(this._path);return null===t?null:new Go(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class xf{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Vn(t),r=Tf(this.ref,t);return new xf(this._node.getChild(e),r,Cr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new xf(i,Tf(this.ref,r),Cr)))}hasChild(t){const e=new Vn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function UN(n,t){return(n=(0,Q.m9)(n))._checkNotDeleted("ref"),void 0!==t?Tf(n._root,t):n._root}function HN(n,t){(n=(0,Q.m9)(n))._checkNotDeleted("refFromURL");const e=jd(t,n._repo.repoInfo_.nodeAdmin);y1("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Vo("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),UN(n,e.path.toString())}function Tf(n,t){return null===vn((n=(0,Q.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ef("child","path",e,!1)):Ef("child","path",t,!1),new Go(n._repo,Sr(n._path,t));var e}function T1(n,t){n=(0,Q.m9)(n),uo("set",n._path),ll("set",t,n._path,!1);const e=new Q.BH;return C1(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function GN(n,t){rx("update",t,n._path,!1);const e=new Q.BH;return function(n,t,e,r){$d(n,"update",{path:t.toString(),value:e});let i=!0;const l=B_(n),d={};if(yi(e,(f,g)=>{i=!1,d[f]=A_(Sr(t,f),Or(g),n.serverSyncTree_,l)}),i)_i("update() called with empty data.  Don't do anything."),Jl(0,r,"ok",void 0);else{const f=U_(n),g=function(n,t,e,r){!function(n,t,e,r){(0,Q.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=Qb(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=gr.fromObject(e);return rs(n,new Pd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,d,f);Lg(n.eventQueue_,g),n.server_.merge(t.toString(),e,(b,D)=>{const x="ok"===b;x||_s("update at "+t+" failed: "+b);const F=Ql(n.serverSyncTree_,f,!x),$=F.length>0?cl(n,t):t;js(n.eventQueue_,$,F),Jl(0,r,b,D)}),yi(e,b=>{const D=G_(n,Sr(t,b));cl(n,D)}),js(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function ZN(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(b,D)=>{const x=vs(b,e);r=r||nu(D,x)});let i=n.syncPointTree_.get(e);i?r=r||nu(i,Bn()):(i=new r1,n.syncPointTree_=n.syncPointTree_.set(e,i));const l=null!=r,d=l?new tu(r,!0,!1):null;return function(n){return Kb(n.viewCache_)}(vN(i,t,h_(n.pendingWriteTree_,t._path),l?d.getNode():nn.EMPTY_NODE,l))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Or(r).withIndex(t._queryParams.getIndex()),l=Ng(n.serverSyncTree_,t._path,i);return L_(n.eventQueue_,t._path,l),Promise.resolve(i)},r=>($d(n,"get for query "+(0,Q.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,Q.m9)(n))._repo,n).then(t=>new xf(t,new Go(n._repo,n._path),n._queryParams.getIndex()))}class Y_{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new fx("value",this,new xf(t.snapshotNode,new Go(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new px(this,t,e):null}matches(t){return t instanceof Y_&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class K_{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new px(this,t,e):null}createEvent(t,e){(0,Q.hu)(null!=t.childName,"Child events should have a childName.");const r=Tf(new Go(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new fx(t.type,this,new xf(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof K_&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Gg(n,t,e,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const g=e,b=(D,x)=>{Bg(n._repo,n,f),g(D,x)};b.userCallback=e.userCallback,b.context=e.context,e=b}const d=new D1(e,l||void 0),f="value"===t?new Y_(d):new K_(t,d);return function(n,t,e){let r;r=".info"===vn(t._path)?l1(n.infoSyncTree_,t,e):l1(n.serverSyncTree_,t,e),L_(n.eventQueue_,t._path,r)}(n._repo,n,f),()=>Bg(n._repo,n,f)}function Q_(n,t,e,r){return Gg(n,"value",t,e,r)}function mx(n,t,e,r){return Gg(n,"child_added",t,e,r)}function _x(n,t,e,r){return Gg(n,"child_changed",t,e,r)}function Gd(n,t,e,r){return Gg(n,"child_moved",t,e,r)}function yx(n,t,e,r){return Gg(n,"child_removed",t,e,r)}function I1(n,t,e){let r=null;const i=e?new D1(e):null;"value"===t?r=new Y_(i):t&&(r=new K_(t,i)),Bg(n._repo,n,r)}class wa{}class S1 extends wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ll("endAt",this._value,t._path,!0);const e=eu(t._queryParams,this._value,this._key);if(W_(e),Xl(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)}}class vx extends wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ll("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===ya?("string"==typeof t&&(t=Zb(t)),i=eu(n,t,e)):(r=null==e?oo:Zb(e),i=eu(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(W_(e),Xl(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)}}class J_ extends wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ll("startAt",this._value,t._path,!0);const e=Xc(t._queryParams,this._value,this._key);if(W_(e),Xl(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)}}class bx extends wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ll("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===ya)"string"==typeof t&&(t=Ad(t)),r=Xc(n,t,e);else{let i;i=null==e?ys:Ad(e),r=Xc(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(W_(e),Xl(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ws(t._repo,t._path,e,t._orderByCalled)}}class YN extends wa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class QN extends wa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class JN extends wa{constructor(t){super(),this._path=t}_apply(t){q_(t,"orderByChild");const e=new Vn(this._path);if(bn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new vg(e),i=zl(t._queryParams,r);return Xl(i),new ws(t._repo,t._path,i,!0)}}class XN extends wa{_apply(t){q_(t,"orderByKey");const e=zl(t._queryParams,ya);return Xl(e),new ws(t._repo,t._path,e,!0)}}class tM extends wa{_apply(t){q_(t,"orderByPriority");const e=zl(t._queryParams,Cr);return Xl(e),new ws(t._repo,t._path,e,!0)}}class rM extends wa{_apply(t){q_(t,"orderByValue");const e=zl(t._queryParams,jb);return Xl(e),new ws(t._repo,t._path,e,!0)}}class sM extends wa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(ll("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new S1(this._value,this._key)._apply(new J_(this._value,this._key)._apply(t))}}function Zo(n,...t){let e=(0,Q.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,Q.hu)(!Sg,"__referenceConstructor has already been defined"),Sg=n})(Go),function(n){(0,Q.hu)(!Ag,"__referenceConstructor has already been defined"),Ag=n}(Go);const X_={};function M1(n,t,e,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Vo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_i("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,b,d=jd(l,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(g=!0,l=`http://${b}?ns=${f.namespace}`,d=jd(l,i),f=d.repoInfo):g=!d.repoInfo.secure;const D=i&&g?new dg(dg.OWNER):new NA(n.name,n.options,t);y1("Invalid Firebase Database URL",d),bn(d.path)||Vo("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,t,e,r){let i=X_[t.name];i||(i={},X_[t.name]=i);let l=i[n.toURLString()];return l&&Vo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new Df(n,false,e,r),i[n.toURLString()]=l,l}(f,n,D,new $E(n.name,e));return new k1(x,n)}class k1{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=Tb(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Yl(n.repoInfo_,(r,i,l,d)=>{b1(n,r,i,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>w1(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Q.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Id(n.repoInfo_,t,(r,i,l,d)=>{b1(n,r,i,l,d)},r=>{w1(n,r)},r=>{!function(n,t){yi(t,(e,r)=>{kt(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return xb[e]||(xb[e]=t()),xb[e]}(n.repoInfo_,()=>new rN(n.stats_,n.server_)),n.infoData_=new mf,n.infoSyncTree_=new Bd({startListening:(r,i,l,d)=>{let f=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(f=Ng(n.infoSyncTree_,r._path,g),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),kt(n,"connected",!1),n.serverSyncTree_=new Bd({startListening:(r,i,l,d)=>(n.server_.listen(r,l,i,(f,g)=>{const b=d(f,g);js(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Go(this._repo,Bn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=X_[t];(!e||e[n.key]!==n)&&Vo(`Database ${t}(${n.repoInfo_}) has already been deleted.`),lx(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Vo("Cannot call "+t+" on a deleted database.")}}function O1(n,t){jl(n,t)}class Ix{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Id.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Id.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},IA(Us.SDK_VERSION),(0,Us._registerComponent)(new el.wA("database",(t,{instanceIdentifier:e})=>M1(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Us.registerVersion)(xA,"0.12.8",void 0),(0,Us.registerVersion)(xA,"0.12.8","esm2017");const F1=new tl.Yd("@firebase/database-compat"),Zg=function(n){F1.warn("FIREBASE WARNING: "+n)};class gM{constructor(t){this._delegate=t}cancel(t){(0,Q.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,Q.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Q.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,Q.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Q.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,Q.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Q.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),l=>r(l)),i}update(t,e){if((0,Q.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,Zg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Q.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class D2{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,Q.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class su{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,Q.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Q.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Q.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Q.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,Q.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Ef("DataSnapshot.child","path",t,!1),new su(this._database,this._delegate.child(t))}hasChild(t){return(0,Q.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ef("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,Q.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,Q.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Q.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new su(this._database,e)))}hasChildren(){return(0,Q.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Q.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Q.Dv)("DataSnapshot.ref",0,0,arguments.length),new Gs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class mr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var l;(0,Q.Dv)("Query.on",2,4,arguments.length),(0,Q.Wj)("Query.on","callback",e,!1);const d=mr.getCancelAndContextArgs_("Query.on",r,i),f=(b,D)=>{e.call(d.context,new su(this.database,b),D)};f.userCallback=e,f.context=d.context;const g=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(t){case"value":return Q_(this._delegate,f,g),e;case"child_added":return mx(this._delegate,f,g),e;case"child_removed":return yx(this._delegate,f,g),e;case"child_changed":return _x(this._delegate,f,g),e;case"child_moved":return Gd(this._delegate,f,g),e;default:throw new Error((0,Q.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,Q.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Q.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,Q.Wj)("Query.off","callback",e,!0),(0,Q.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,I1(this._delegate,t,i)}else I1(this._delegate,t)}get(){return ZN(this._delegate).then(t=>new su(this.database,t))}once(t,e,r,i){(0,Q.Dv)("Query.once",1,4,arguments.length),(0,Q.Wj)("Query.once","callback",e,!0);const l=mr.getCancelAndContextArgs_("Query.once",r,i),d=new Q.BH,f=(b,D)=>{const x=new su(this.database,b);e&&e.call(l.context,x,D),d.resolve(x)};f.userCallback=e,f.context=l.context;const g=b=>{l.cancel&&l.cancel.call(l.context,b),d.reject(b)};switch(t){case"value":Q_(this._delegate,f,g,{onlyOnce:!0});break;case"child_added":mx(this._delegate,f,g,{onlyOnce:!0});break;case"child_removed":yx(this._delegate,f,g,{onlyOnce:!0});break;case"child_changed":_x(this._delegate,f,g,{onlyOnce:!0});break;case"child_moved":Gd(this._delegate,f,g,{onlyOnce:!0});break;default:throw new Error((0,Q.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(t){return(0,Q.Dv)("Query.limitToFirst",1,1,arguments.length),new mr(this.database,Zo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new YN(n)}(t)))}limitToLast(t){return(0,Q.Dv)("Query.limitToLast",1,1,arguments.length),new mr(this.database,Zo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new QN(n)}(t)))}orderByChild(t){return(0,Q.Dv)("Query.orderByChild",1,1,arguments.length),new mr(this.database,Zo(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ef("orderByChild","path",n,!1),new JN(n)}(t)))}orderByKey(){return(0,Q.Dv)("Query.orderByKey",0,0,arguments.length),new mr(this.database,Zo(this._delegate,new XN))}orderByPriority(){return(0,Q.Dv)("Query.orderByPriority",0,0,arguments.length),new mr(this.database,Zo(this._delegate,new tM))}orderByValue(){return(0,Q.Dv)("Query.orderByValue",0,0,arguments.length),new mr(this.database,Zo(this._delegate,new rM))}startAt(t=null,e){return(0,Q.Dv)("Query.startAt",0,2,arguments.length),new mr(this.database,Zo(this._delegate,function(n=null,t){return Cf("startAt","key",t,!0),new J_(n,t)}(t,e)))}startAfter(t=null,e){return(0,Q.Dv)("Query.startAfter",0,2,arguments.length),new mr(this.database,Zo(this._delegate,function(n,t){return Cf("startAfter","key",t,!0),new bx(n,t)}(t,e)))}endAt(t=null,e){return(0,Q.Dv)("Query.endAt",0,2,arguments.length),new mr(this.database,Zo(this._delegate,function(n,t){return Cf("endAt","key",t,!0),new S1(n,t)}(t,e)))}endBefore(t=null,e){return(0,Q.Dv)("Query.endBefore",0,2,arguments.length),new mr(this.database,Zo(this._delegate,function(n,t){return Cf("endBefore","key",t,!0),new vx(n,t)}(t,e)))}equalTo(t,e){return(0,Q.Dv)("Query.equalTo",1,2,arguments.length),new mr(this.database,Zo(this._delegate,function(n,t){return Cf("equalTo","key",t,!0),new sM(n,t)}(t,e)))}toString(){return(0,Q.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Q.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,Q.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof mr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,Q.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,Q.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,Q.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Gs(this.database,new Go(this._delegate._repo,this._delegate._path))}}class Gs extends mr{constructor(t,e){super(t,new ws(e._repo,e._path,new ol,!1)),this.database=t,this._delegate=e}getKey(){return(0,Q.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,Q.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Gs(this.database,Tf(this._delegate,t))}getParent(){(0,Q.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Gs(this.database,t):null}getRoot(){return(0,Q.Dv)("Reference.root",0,0,arguments.length),new Gs(this.database,this._delegate.root)}set(t,e){(0,Q.Dv)("Reference.set",1,2,arguments.length),(0,Q.Wj)("Reference.set","onComplete",e,!0);const r=T1(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,Q.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,Zg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}uo("Reference.update",this._delegate._path),(0,Q.Wj)("Reference.update","onComplete",e,!0);const r=GN(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,Q.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Q.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(uo("setWithPriority",n._path),ll("setWithPriority",t,n._path,!1),F_("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Q.BH;return C1(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),l=>r(l)),i}remove(t){(0,Q.Dv)("Reference.remove",0,1,arguments.length),(0,Q.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return uo("remove",n._path),T1(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,Q.Dv)("Reference.transaction",1,3,arguments.length),(0,Q.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,Q.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,Q.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,Q.m9)(n),uo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,l=new Q.BH,f=Q_(n,()=>{});return function(n,t,e,r,i,l){$d(n,"transaction on "+t);const d={path:t,update:e,onComplete:r,status:null,order:mb(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=E1(n,t,void 0);d.currentInputSnapshot=f;const g=d.update(f.val());if(void 0===g)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{Fg("transaction failed: Data returned ",g,d.path),d.status=0;const b=kg(n.transactionQueueTree_,t),D=iu(b)||[];let x;D.push(d),k_(b,D),"object"==typeof g&&null!==g&&(0,Q.r3)(g,".priority")?(x=(0,Q.DV)(g,".priority"),(0,Q.hu)(Og(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(co(n.serverSyncTree_,t)||nn.EMPTY_NODE).getPriority().val();const F=B_(n),$=Or(g,x),re=N_($,f,F);d.currentOutputSnapshotRaw=$,d.currentOutputSnapshotResolved=re,d.currentWriteId=U_(n);const ge=o1(n.serverSyncTree_,t,re,d.currentWriteId,d.applyLocally);js(n.eventQueue_,t,ge),j_(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(g,b,D)=>{let x=null;g?l.reject(g):(x=new xf(D,new Go(n._repo,n._path),Cr),l.resolve(new Ix(b,x)))},f,i),l.promise}(this._delegate,t,{applyLocally:r}).then(l=>new D2(l.committed,new su(this.database,l.snapshot)));return e&&i.then(l=>e(null,l.committed,l.snapshot),l=>e(l,!1,null)),i}setPriority(t,e){(0,Q.Dv)("Reference.setPriority",1,2,arguments.length),(0,Q.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,Q.m9)(n),uo("setPriority",n._path),F_("setPriority",t,!1);const e=new Q.BH;return C1(n._repo,Sr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,Q.Dv)("Reference.push",0,2,arguments.length),(0,Q.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,Q.m9)(n),uo("push",n._path),ll("push",t,n._path,!0);const e=V_(n._repo),r=r_(e),i=Tf(n,r),l=Tf(n,r);let d;return d=null!=t?T1(l,t).then(()=>l):Promise.resolve(l),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,t),i=r.then(d=>new Gs(this.database,d));e&&i.then(()=>e(null),d=>e(d));const l=new Gs(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return uo("Reference.onDisconnect",this._delegate._path),new gM(new x1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ey{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,Q.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Vo("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new dg(dg.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,Q.Sg)(r.mockUserToken,n.app.options.projectId);l=new dg(d)}!function(n,t,e,r){n.repoInfo_=new Eb(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,l)}(this._delegate,t,e,r)}ref(t){if((0,Q.Dv)("database.ref",0,1,arguments.length),t instanceof Gs){const e=HN(this._delegate,t.toString());return new Gs(this,e)}{const e=UN(this._delegate,t);return new Gs(this,e)}}refFromURL(t){(0,Q.Dv)("database.refFromURL",1,1,arguments.length);const r=HN(this._delegate,t);return new Gs(this,r)}goOffline(){return(0,Q.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,Q.m9)(n))._checkNotDeleted("goOffline"),lx(n._repo)}(this._delegate)}goOnline(){return(0,Q.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,Q.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(ox)}(n._repo)}(this._delegate)}}ey.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var mM=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){IA(e);const d=new el.zt("auth-internal",new el.H0("database-standalone"));return d.setComponent(new el.wA("auth-internal",()=>r,"PRIVATE")),{instance:new ey(M1(n,d,void 0,t,l),n),namespace:i}}});const _M=ey.ServerValue;function Ax(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let i,d,l=0,f=!1,g=!1;return function(D){let x;l++,!i||f?(f=!1,i=new wd(n,t,r),x=i.subscribe(this),d=D.subscribe({next(F){i.next(F)},error(F){f=!0,i.error(F)},complete(){g=!0,d=void 0,i.complete()}}),g&&(d=void 0)):x=i.subscribe(this),this.add(()=>{l--,x.unsubscribe(),x=void 0,d&&!g&&e&&0===l&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function Nx(n,t){return t?pr(()=>n,t):pr(()=>n)}!function(n){n.INTERNAL.registerComponent(new el.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new ey(i,r)},"PUBLIC").setServiceProps({Reference:Gs,Query:mr,Database:ey,DataSnapshot:su,enableLogging:O1,INTERNAL:mM,ServerValue:_M}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(ag.Z);var qg=O(2639);O(2329);const Wg=new Map,zg={activated:!1,tokenObservers:[]},CM={initialized:!1,enabled:!1};function Di(n){return Wg.get(n)||zg}function ul(n,t){Wg.set(n,t)}function ny(){return CM}class IM{constructor(t,e,r,i,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,He.Z)(function*(){e.stop();try{e.pending=new Q.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new Q.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Cs=new Q.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ox(n){if(!Di(n).activated)throw Cs.create("use-before-activation",{appName:n.name})}function ec(n,t){return ry.apply(this,arguments)}function ry(){return(ry=(0,He.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const l={method:"POST",body:JSON.stringify(t),headers:r};let d,f;try{d=yield fetch(n,l)}catch(x){throw Cs.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==d.status)throw Cs.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(x){throw Cs.create("fetch-parse-error",{originalErrorMessage:x.message})}const g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Cs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(g[1]),D=Date.now();return{token:f.attestationToken,expireTimeMillis:D+b,issuedAtTimeMillis:D}})).apply(this,arguments)}function MM(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Yg="firebase-app-check-store";let Kg=null;function sy(){return Kg||(Kg=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(Cs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Yg,{keyPath:"compositeKey"})}}}catch(e){t(Cs.create("storage-open",{originalErrorMessage:e.message}))}}),Kg)}function Z1(){return(Z1=(0,He.Z)(function*(n,t){const r=(yield sy()).transaction(Yg,"readwrite"),l=r.objectStore(Yg).put({compositeKey:n,value:t});return new Promise((d,f)=>{l.onsuccess=g=>{d()},r.onerror=g=>{var b;f(Cs.create("storage-set",{originalErrorMessage:null===(b=g.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const oy=new tl.Yd("@firebase/app-check");function tc(n,t){return(0,Q.hl)()?function(n,t){return function(n,t){return Z1.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{oy.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function OM(){return ny().enabled}function Yt(){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,He.Z)(function*(){const n=ny();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Wd={error:"UNKNOWN_ERROR"};function O2(n){return Q.US.encodeString(JSON.stringify(n),!1)}function Xg(n){return ay.apply(this,arguments)}function ay(){return(ay=(0,He.Z)(function*(n,t=!1){const e=n.app;Ox(e);const r=Di(e);let l,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&qs(g)&&(i=g)}if(!t&&i&&qs(i))return{token:i.token};let f,d=!1;if(OM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ec(MM(e,yield Yt()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const g=yield r.exchangeTokenPromise;return yield tc(e,g),ul(e,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),d=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?oy.warn(g.message):oy.error(g),l=g}return i?(f={token:i.token},ul(e,Object.assign(Object.assign({},r),{token:i})),yield tc(e,i)):f=Ux(l),d&&Nr(e,f),f})).apply(this,arguments)}function z1(n,t){const e=Di(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),ul(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function Bx(n){const{app:t}=n,e=Di(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new IM((0,He.Z)(function*(){let r;if(r=Di(t).token?yield Xg(n,!0):yield Xg(n),r.error)throw r.error}),()=>!0,()=>{const e=Di(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ul(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function Nr(n,t){const e=Di(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function qs(n){return n.expireTimeMillis-Date.now()>0}function Ux(n){return{token:O2(Wd),error:n}}class FM{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Di(this.app);for(const e of t)z1(this.app,e.next);return Promise.resolve()}}const Zx="app-check-internal";(0,Us._registerComponent)(new el.wA("app-check",n=>function(n,t){return new FM(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Zx).initialize()})),(0,Us._registerComponent)(new el.wA(Zx,n=>function(n){return{getToken:t=>Xg(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,l=Di(i),d={next:e,error:r,type:t};if(ul(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&qs(l.token)){const f=l.token;Promise.resolve().then(()=>{e({token:f.token}),Bx(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Bx(n))}(n,"INTERNAL",t),removeTokenListener:t=>z1(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Us.registerVersion)("@firebase/app-check","0.5.6");class dy{constructor(){return(0,Ln.vb)("app-check")}}"undefined"!=typeof window&&window;var rm=O(7841);const Kx=new a.OlP("angularfire2.auth.use-emulator"),ew=new a.OlP("angularfire2.auth.settings"),tw=new a.OlP("angularfire2.auth.tenant-id"),nw=new a.OlP("angularfire2.auth.langugage-code"),rw=new a.OlP("angularfire2.auth.use-device-language"),iw=new a.OlP("angularfire.auth.persistence"),sw=(n,t,e,r,i,l,d,f)=>(0,ri.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=t.runOutsideAngular(()=>n.auth());if(e&&g.useEmulator(...e),r&&(g.tenantId=r),g.languageCode=i,l&&g.useDeviceLanguage(),d)for(const[b,D]of Object.entries(d))g.settings[b]=D;return f&&g.setPersistence(f),g},[e,r,i,l,d,f]);let nc=(()=>{class n{constructor(e,r,i,l,d,f,g,b,D,x,F,$){const re=new Tn.xQ,ge=(0,Dt.of)(void 0).pipe((0,rf.QV)(d.outsideAngular),pr(()=>l.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,4828)))),(0,wt.U)(()=>(0,ri.on)(e,l,r)),(0,wt.U)(Me=>sw(Me,l,f,b,D,x,g,F)),Ax({bufferSize:1,refCount:!1}));if(Ah(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Dt.of)(null);else{ge.pipe(Ir()).subscribe();const Qe=ge.pipe(pr(mt=>mt.getRedirectResult().then(Ut=>Ut,()=>null)),Ln.iC,Ax({bufferSize:1,refCount:!1})),st=ge.pipe(pr(mt=>new zn.y(Ut=>({unsubscribe:l.runOutsideAngular(()=>mt.onAuthStateChanged(gn=>Ut.next(gn),gn=>Ut.error(gn),()=>Ut.complete()))})))),pt=ge.pipe(pr(mt=>new zn.y(Ut=>({unsubscribe:l.runOutsideAngular(()=>mt.onIdTokenChanged(gn=>Ut.next(gn),gn=>Ut.error(gn),()=>Ut.complete()))}))));this.authState=Qe.pipe(Nx(st),(0,qg.R)(d.outsideAngular),(0,rf.QV)(d.insideAngular)),this.user=Qe.pipe(Nx(pt),(0,qg.R)(d.outsideAngular),(0,rf.QV)(d.insideAngular)),this.idToken=this.user.pipe(pr(mt=>mt?(0,un.D)(mt.getIdToken()):(0,Dt.of)(null))),this.idTokenResult=this.user.pipe(pr(mt=>mt?(0,un.D)(mt.getIdTokenResult()):(0,Dt.of)(null))),this.credential=(0,H0.T)(Qe,re,this.authState.pipe(sr(mt=>!mt))).pipe((0,wt.U)(mt=>(null==mt?void 0:mt.user)?mt:null),(0,qg.R)(d.outsideAngular),(0,rf.QV)(d.insideAngular))}return(0,ri.pX)(this,ge,l,{spy:{apply:(Me,Qe,st)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&st.then(pt=>re.next(pt))}}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ri.Dh),a.LFG(ri.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Ln.HU),a.LFG(Kx,8),a.LFG(ew,8),a.LFG(tw,8),a.LFG(nw,8),a.LFG(rw,8),a.LFG(iw,8),a.LFG(dy,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WM=(()=>{class n{constructor(){rm.Z.registerVersion("angularfire",Ln.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[nc]}),n})();function Ff(n){return null==n}function YM(n){return"function"==typeof n.set}function ow(n,t){return YM(t)?t:n.ref(t)}function Jx(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(YM(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function im(n,t,e="on",r=zc.z){return new zn.y(i=>{let l=null;return l=n[e](t,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===e&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===e?{unsubscribe(){null!=l&&n.off(t,l)}}:{unsubscribe(){}}}).pipe((0,wt.U)(i=>{const{snapshot:l,prevKey:d}=i;let f=null;return l.exists()&&(f=l.key),{type:t,payload:l,prevKey:d,key:f}}),(0,Xa.B)())}function Xx(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function eT(n,t){const{payload:e,prevKey:r,key:i}=t,l=Xx(n,i),d=function(n,t){if(Ff(t))return 0;{const e=Xx(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(g=>{const b={payload:g,type:"value",prevKey:f,key:g.key};return f=g.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(g=>g.payload.key!==e.key)).splice(d,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(d,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===i?t:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function tT(n){return(Ff(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function nT(n,t,e){return function(n,t,e){return im(n,"value","once",e).pipe(pr(r=>{const i=[(0,Dt.of)(r)];return t.forEach(l=>i.push(im(n,l,"on",e))),(0,H0.T)(...i).pipe($a(eT,[]))}),Yc())}(n,t=tT(t),e)}function JM(n,t,e){const r=(t=tT(t)).map(i=>im(n,i,"on",e));return(0,H0.T)(...r)}function rT(n,t){return function(r,i){return Jx(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function XM(n){return function(e){return e?Jx(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function iT(n,t){return function(){return im(n,"value","on",t)}}const nR=new a.OlP("angularfire2.realtimeDatabaseURL"),sT=new a.OlP("angularfire2.database.use-emulator");let hy=(()=>{class n{constructor(e,r,i,l,d,f,g,b,D,x,F,$,re,ge,Me){this.schedulers=f;const Qe=g,st=(0,ri.on)(e,d,r);b&&sw(st,d,D,F,$,re,x,ge),this.database=(0,ri.cc)(`${st.name}.database.${i}`,"AngularFireDatabase",st.name,()=>{const pt=d.runOutsideAngular(()=>st.database(i||void 0));return Qe&&pt.useEmulator(...Qe),pt},[Qe])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ow(this.database,e));let l=i;return r&&(l=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:rT(r,"update"),set:rT(r,"set"),push:i=>r.push(i),remove:XM(r),snapshotChanges:i=>nT(n,i,e).pipe(Ln.iC),stateChanges:i=>JM(n,i,e).pipe(Ln.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return im(n,"value","on",t).pipe((0,wt.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(gb(t),(0,wt.U)(([i,l])=>{const d=i.lastKeyToLoad,f=l.map(g=>g.key);return{actions:l,lastKeyToLoad:d,loadedKeys:f}}),function(n){return t=>t.lift(new DA(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,wt.U)(i=>i.actions))}(n,JM(n,t).pipe($a((i,l)=>[...i,l],[])),e)}(n,i,e).pipe(Ln.iC),valueChanges:(i,l)=>nT(n,i,e).pipe((0,wt.U)(f=>f.map(g=>l&&l.idField?Object.assign(Object.assign({},g.payload.val()),{[l.idField]:g.key}):g.payload.val())),Ln.iC)}}(l,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>iT(n,t.schedulers.outsideAngular)().pipe(Ln.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>iT(n,t.schedulers.outsideAngular)().pipe(Ln.iC,(0,wt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ow(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ri.Dh),a.LFG(ri.xv,8),a.LFG(nR,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Ln.HU),a.LFG(sT,8),a.LFG(nc,8),a.LFG(Kx,8),a.LFG(ew,8),a.LFG(tw,8),a.LFG(nw,8),a.LFG(rw,8),a.LFG(iw,8),a.LFG(dy,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Lf=O(982);function Ti(){return n=>n.lift(new oT)}class oT{call(t,e){return e.subscribe(new Ca(t))}}class Ca extends fr.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var vt,lw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rc={},fy=fy||{},Kt=lw||self;function py(){}function cw(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function sm(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var uw="closure_uid_"+(1e9*Math.random()>>>0),q2=0;function rR(n,t,e){return n.call.apply(n.bind,arguments)}function iR(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function jr(n,t,e){return(jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rR:iR).apply(null,arguments)}function dw(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ii(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return t.prototype[i].apply(r,d)}}function au(){this.s=this.s,this.o=this.o}var lT={};au.prototype.s=!1,au.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,uw)&&n[uw]||(n[uw]=++q2)}(this);delete lT[n]}},au.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cT=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},gy=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&t.call(e,i[l],l,n)};function hw(n){return Array.prototype.concat.apply([],arguments)}function my(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function om(n){return/^[\s\xa0]*$/.test(n)}var Ds,dT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Es(n,t){return-1!=n.indexOf(t)}function fw(n,t){return n<t?-1:n>t?1:0}e:{var hT=Kt.navigator;if(hT){var fT=hT.userAgent;if(fT){Ds=fT;break e}}Ds=""}function Yd(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function pw(n){const t={};for(const e in n)t[e]=n[e];return t}var gw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mw(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let l=0;l<gw.length;l++)e=gw[l],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function _y(n){return _y[" "](n),n}_y[" "]=py;var lu,gT=Es(Ds,"Opera"),Vf=Es(Ds,"Trident")||Es(Ds,"MSIE"),_w=Es(Ds,"Edge"),yy=_w||Vf,mT=Es(Ds,"Gecko")&&!(Es(Ds.toLowerCase(),"webkit")&&!Es(Ds,"Edge"))&&!(Es(Ds,"Trident")||Es(Ds,"MSIE"))&&!Es(Ds,"Edge"),sR=Es(Ds.toLowerCase(),"webkit")&&!Es(Ds,"Edge");function _T(){var n=Kt.document;return n?n.documentMode:void 0}e:{var Kd="",yw=function(){var n=Ds;return mT?/rv:([^\);]+)(\)|;)/.exec(n):_w?/Edge\/([\d\.]+)/.exec(n):Vf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sR?/WebKit\/(\S+)/.exec(n):gT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(yw&&(Kd=yw?yw[1]:""),Vf){var am=_T();if(null!=am&&am>parseFloat(Kd)){lu=String(am);break e}}lu=Kd}var dl={};function oR(){return t=dl,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=dT(String(lu)).split("."),e=dT("9").split("."),r=Math.max(t.length,e.length);for(let d=0;0==n&&d<r;d++){var i=t[d]||"",l=e[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=fw(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||fw(0==i[2].length,0==l[2].length)||fw(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n}();var t}var aR=Kt.document&&Vf&&(_T()||parseInt(lu,10))||void 0,z2=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",py,t),Kt.removeEventListener("test",py,t)}catch(e){}return n}();function Si(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Qd(n,t){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(mT){e:{try{_y(t.nodeName);var i=!0;break e}catch(l){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:vT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Qd.Z.h.call(this)}}Si.prototype.h=function(){this.defaultPrevented=!0},Ii(Qd,Si);var vT={2:"touch",3:"pen",4:"mouse"};Qd.prototype.h=function(){Qd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jd="closure_listenable_"+(1e6*Math.random()|0),vw=0;function lR(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++vw,this.ca=this.fa=!1}function vy(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function by(n){this.src=n,this.g={},this.h=0}function bw(n,t){var e=t.type;if(e in n.g){var l,r=n.g[e],i=cT(r,t);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(vy(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function wy(n,t,e,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==r)return i}return-1}by.prototype.add=function(n,t,e,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=wy(n,t,r,i);return-1<d?(t=n[d],e||(t.fa=!1)):((t=new lR(t,this.src,l,!!r,i)).fa=e,n.push(t)),t};var lm="closure_lm_"+(1e6*Math.random()|0),Cy={};function ww(n,t,e,r,i){if(r&&r.once)return wT(n,t,e,r,i);if(Array.isArray(t)){for(var l=0;l<t.length;l++)ww(n,t[l],e,r,i);return null}return e=Gi(e),n&&n[Jd]?n.N(t,e,sm(r)?!!r.capture:!!r,i):Cw(n,t,e,!1,r,i)}function Cw(n,t,e,r,i,l){if(!t)throw Error("Invalid event type");var d=sm(i)?!!i.capture:!!i,f=Dy(n);if(f||(n[lm]=f=new by(n)),(e=f.add(t,e,r,d,l)).proxy)return e;if(r=function(){var t=ET;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)z2||(i=d),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(CT(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function wT(n,t,e,r,i){if(Array.isArray(t)){for(var l=0;l<t.length;l++)wT(n,t[l],e,r,i);return null}return e=Gi(e),n&&n[Jd]?n.O(t,e,sm(r)?!!r.capture:!!r,i):Cw(n,t,e,!0,r,i)}function Ew(n,t,e,r,i){if(Array.isArray(t))for(var l=0;l<t.length;l++)Ew(n,t[l],e,r,i);else r=sm(r)?!!r.capture:!!r,e=Gi(e),n&&n[Jd]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=wy(l=n.g[t],e,r,i))&&(vy(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete n.g[t],n.h--))):n&&(n=Dy(n))&&(t=n.g[t.toString()],n=-1,t&&(n=wy(t,e,r,i)),(e=-1<n?t[n]:null)&&Ey(e))}function Ey(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Jd])bw(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(CT(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=Dy(t))?(bw(e,n),0==e.h&&(e.src=null,t[lm]=null)):vy(n)}}}function CT(n){return n in Cy?Cy[n]:Cy[n]="on"+n}function ET(n,t){if(n.ca)n=!0;else{t=new Qd(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&Ey(n),n=e.call(r,t)}return n}function Dy(n){return(n=n[lm])instanceof by?n:null}var DT="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gi(n){return"function"==typeof n?n:(n[DT]||(n[DT]=function(t){return n.handleEvent(t)}),n[DT])}function Fr(){au.call(this),this.i=new by(this),this.P=this,this.I=null}function Zi(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Si(t,n);else if(t instanceof Si)t.target=t.target||n;else{var i=t;mw(t=new Si(r,n),i)}if(i=!0,e)for(var l=e.length-1;0<=l;l--){var d=t.g=e[l];i=xy(d,r,!0,t)&&i}if(i=xy(d=t.g=n,r,!0,t)&&i,i=xy(d,r,!1,t)&&i,e)for(l=0;l<e.length;l++)i=xy(d=t.g=e[l],r,!1,t)&&i}function xy(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,l=0;l<t.length;++l){var d=t[l];if(d&&!d.ca&&d.capture==e){var f=d.listener,g=d.ia||d.src;d.fa&&bw(n.i,d),i=!1!==f.call(g,r)&&i}}return i&&!r.defaultPrevented}Ii(Fr,au),Fr.prototype[Jd]=!0,Fr.prototype.removeEventListener=function(n,t,e,r){Ew(this,n,t,e,r)},Fr.prototype.M=function(){if(Fr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)vy(e[r]);delete n.g[t],n.h--}}this.I=null},Fr.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},Fr.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var xT=Kt.JSON.stringify;function cm(){var n=Iw;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var xw,Ty=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new uR,n=>n.reset());class uR{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function TT(n){Kt.setTimeout(()=>{throw n},0)}function Dw(n,t){xw||function(){var n=Kt.Promise.resolve(void 0);xw=function(){n.then(Sy)}}(),Iy||(xw(),Iy=!0),Iw.add(n,t)}var Iy=!1,Iw=new class{constructor(){this.h=this.g=null}add(t,e){const r=Ty.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function Sy(){for(var n;n=cm();){try{n.h.call(n.g)}catch(e){TT(e)}var t=Ty;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Iy=!1}function Uf(n,t){Fr.call(this),this.h=n||1,this.g=t||Kt,this.j=jr(this.kb,this),this.l=Date.now()}function IT(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ay(n,t,e){if("function"==typeof n)e&&(n=jr(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=jr(n.handleEvent,n)}return 2147483647<Number(t)?-1:Kt.setTimeout(n,t||0)}function ST(n){n.g=Ay(()=>{n.g=null,n.i&&(n.i=!1,ST(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Ii(Uf,Fr),(vt=Uf.prototype).da=!1,vt.S=null,vt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zi(this,"tick"),this.da&&(IT(this),this.start()))}},vt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vt.M=function(){Uf.Z.M.call(this),IT(this),delete this.g};class AT extends au{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ST(this)}M(){super.M(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cu(n){au.call(this),this.h=n,this.g={}}Ii(cu,au);var Sw=[];function NT(n,t,e,r){Array.isArray(e)||(e&&(Sw[0]=e.toString()),e=Sw);for(var i=0;i<e.length;i++){var l=ww(t,e[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Ny(n){Yd(n.g,function(t,e){this.g.hasOwnProperty(e)&&Ey(t)},n),n.g={}}function Hf(){this.g=!0}function Xd(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<i.length;d++)i[d]=""}}}return xT(e)}catch(f){return t}}(n,e)+(r?" "+r:"")})}cu.prototype.M=function(){cu.Z.M.call(this),Ny(this)},cu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hf.prototype.Aa=function(){this.g=!1},Hf.prototype.info=function(){};var eh={},Aw=null;function um(){return Aw=Aw||new Fr}function kT(n){Si.call(this,eh.Ma,n)}function dm(n){const t=um();Zi(t,new kT(t,n))}function Nw(n,t){Si.call(this,eh.STAT_EVENT,n),this.stat=t}function xs(n){const t=um();Zi(t,new Nw(t,n))}function Mw(n,t){Si.call(this,eh.Na,n),this.size=t}function $f(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},t)}eh.Ma="serverreachability",Ii(kT,Si),eh.STAT_EVENT="statevent",Ii(Nw,Si),eh.Na="timingevent",Ii(Mw,Si);var hm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Rw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function kw(){}function OT(){}kw.prototype.h=null;var VT,jf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function FT(){Si.call(this,"d")}function LT(){Si.call(this,"c")}function Pw(){}function My(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new cu(this),this.P=Y2,this.W=new Uf(n=yy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fR}function fR(){this.i=null,this.g="",this.h=!1}Ii(FT,Si),Ii(LT,Si),Ii(Pw,kw),Pw.prototype.g=function(){return new XMLHttpRequest},Pw.prototype.i=function(){return{}},VT=new Pw;var Y2=45e3,BT={},Ow={};function UT(n,t,e){n.K=1,n.v=ic(uu(t)),n.s=e,n.U=!0,pR(n,null)}function pR(n,t){n.F=Date.now(),Ry(n),n.A=uu(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),zT(e.h,"t",r),n.C=0,e=n.l.H,n.h=new fR,n.g=uI(n.l,e?t:null,!n.s),0<n.O&&(n.L=new AT(jr(n.Ia,n,n.g),n.O)),NT(n.V,n.g,"readystatechange",n.gb),t=n.H?pw(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),dm(1),function(n,t,e,r,i,l){n.info(function(){if(n.g)if(l)for(var d="",f=l.split("&"),g=0;g<f.length;g++){var b=f[g].split("=");if(1<b.length){var D=b[0];b=b[1];var x=D.split("_");d=2<=x.length&&"type"==x[1]?d+(D+"=")+b+"&":d+(D+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function gR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function mR(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=K2(n,e),i==Ow){4==t&&(n.o=4,xs(14),r=!1),Xd(n.j,n.m,null,"[Incomplete Response]");break}if(i==BT){n.o=4,xs(15),Xd(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}Xd(n.j,n.m,i,null),Lw(n,i)}gR(n)&&i!=Ow&&i!=BT&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,xs(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),zw(t),t.L=!0,xs(11))):(Xd(n.j,n.m,e,"[Invalid Chunked Response]"),th(n),fm(n))}function K2(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?Ow:(e=Number(t.substring(e,r)),isNaN(e)?BT:(r+=1)+e>t.length?Ow:(t=t.substr(r,e),n.C=r+e,t))}function Ry(n){n.Y=Date.now()+n.P,_R(n,n.P)}function _R(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$f(jr(n.eb,n),t)}function Fw(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function fm(n){0==n.l.G||n.I||lI(n.l,n)}function th(n){Fw(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,IT(n.W),Ny(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Lw(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||KT(e.i,n)))if(e.I=n.N,!n.J&&KT(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=$f(jr(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;bm(e),jy(e)}Gy(e),xs(18)}if(1>=YT(e.i)&&e.ka){try{e.ka()}catch(b){}e.ka=void 0}}else du(e,11)}else if((n.J||e.g==n)&&bm(e),!om(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let b=i[t];if(e.U=b[0],b=b[1],2==e.G)if("c"==b[0]){e.J=b[1],e.la=b[2];const D=b[3];null!=D&&(e.ma=D,e.h.info("VER="+e.ma));const x=b[4];null!=x&&(e.za=x,e.h.info("SVER="+e.za));const F=b[5];null!=F&&"number"==typeof F&&0<F&&(e.K=r=1.5*F,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const $=n.g;if($){const re=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(re){var l=r.i;!l.g&&(Es(re,"spdy")||Es(re,"quic")||Es(re,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(QT(l,l.h),l.h=null))}if(r.D){const ge=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(r.sa=ge,_r(r.F,r.D,ge))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var d=n;if((r=e).oa=cI(r,r.H?r.la:null,r.W),d.J){JT(r.i,d);var f=d,g=r.K;g&&f.setTimeout(g),f.B&&(Fw(f),Ry(f)),r.g=d}else oI(r);0<e.l.length&&Ww(e)}else"stop"!=b[0]&&"close"!=b[0]||du(e,7);else 3==e.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?du(e,7):fo(e):"noop"!=b[0]&&e.j&&e.j.wa(b),e.A=0)}dm(4)}catch(b){}}function HT(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(cw(n)||"string"==typeof n)gy(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(cw(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(cw(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var l=0;l<i;l++)t.call(void 0,r[l],e&&e[l],n)}}function pm(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof pm)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function Vw(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];nh(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)nh(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function nh(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(vt=My.prototype).setTimeout=function(n){this.P=n},vt.gb=function(n){n=n.target;const t=this.L;t&&3==oc(n)?t.l():this.Ia(n)},vt.Ia=function(n){try{if(n==this.g)e:{const D=oc(this.g);var t=this.g.Da();const x=this.g.ba();if(!(3>D)&&(3!=D||yy||this.g&&(this.h.h||this.g.ga()||Hy(this.g)))){this.I||4!=D||7==t||dm(8==t||0>=x?3:2),Fw(this);var e=this.g.ba();this.N=e;t:if(gR(this)){var r=Hy(this.g);n="";var i=r.length,l=4==oc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){th(this),fm(this);var d="";break t}this.h.i=new Kt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:l&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,D,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,g=this.g;if((f=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!om(f)){var b=f;break t}}b=null}if(!(e=b)){this.i=!1,this.o=3,xs(12),th(this),fm(this);break e}Xd(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Lw(this,e)}this.U?(mR(this,D,d),yy&&this.i&&3==D&&(NT(this.V,this.W,"tick",this.fb),this.W.start())):(Xd(this.j,this.m,d,null),Lw(this,d)),4==D&&th(this),this.i&&!this.I&&(4==D?lI(this.l,this):(this.i=!1,Ry(this)))}else 400==e&&0<d.indexOf("Unknown SID")?(this.o=3,xs(12)):(this.o=0,xs(13)),th(this),fm(this)}}}catch(D){}},vt.fb=function(){if(this.g){var n=oc(this.g),t=this.g.ga();this.C<t.length&&(Fw(this),mR(this,n,t),this.i&&4!=n&&Ry(this))}},vt.cancel=function(){this.I=!0,th(this)},vt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(dm(3),xs(17)),th(this),this.o=2,fm(this)):_R(this,this.Y-n)},(vt=pm.prototype).R=function(){Vw(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},vt.T=function(){return Vw(this),this.g.concat()},vt.get=function(n,t){return nh(this.h,n)?this.h[n]:t},vt.set=function(n,t){nh(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},vt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],l=this.get(i);n.call(t,l,i,this)}};var $T=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gf(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Gf){this.g=void 0!==t?t:n.g,Bw(this,n.j),this.s=n.s,ky(this,n.i),Uw(this,n.m),this.l=n.l,t=n.h;var e=new Zf;e.i=t.i,t.g&&(e.g=new pm(t.g),e.h=t.h),jT(this,e),this.o=n.o}else n&&(e=String(n).match($T))?(this.g=!!t,Bw(this,e[1]||"",!0),this.s=gm(e[2]||""),ky(this,e[3]||"",!0),Uw(this,e[4]),this.l=gm(e[5]||"",!0),jT(this,e[6]||"",!0),this.o=gm(e[7]||"")):(this.g=!!t,this.h=new Zf(null,this.g))}function uu(n){return new Gf(n)}function Bw(n,t,e){n.j=e?gm(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function ky(n,t,e){n.i=e?gm(t,!0):t}function Uw(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function jT(n,t,e){t instanceof Zf?(n.h=t,function(n,t){t&&!n.j&&(ih(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(vR(this,r),zT(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=rh(t,WT)),n.h=new Zf(t,n.g))}function _r(n,t,e){n.h.set(t,e)}function ic(n){return _r(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function gm(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function rh(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,ZT),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gf.prototype.toString=function(){var n=[],t=this.j;t&&n.push(rh(t,Hw,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(rh(t,Hw,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(rh(e,"/"==e.charAt(0)?X2:qT,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",rh(e,Py)),n.join("")};var Hw=/[#\/\?@]/g,qT=/[#\?:]/g,X2=/[#\?]/g,WT=/[#\?@]/g,Py=/#/g;function Zf(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function ih(n){n.g||(n.g=new pm,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var l=n[e].substring(0,r);i=n[e].substring(r+1)}else l=n[e];t(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function vR(n,t){ih(n),t=mm(n,t),nh(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,nh((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&Vw(n)))}function bR(n,t){return ih(n),t=mm(n,t),nh(n.g.h,t)}function zT(n,t,e){vR(n,t),0<e.length&&(n.i=null,n.g.set(mm(n,t),my(e)),n.h+=e.length)}function mm(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function CR(n){this.l=n||eF,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ea&&Kt.g.Ea()&&Kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(vt=Zf.prototype).add=function(n,t){ih(this),this.i=null,n=mm(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},vt.forEach=function(n,t){ih(this),this.g.forEach(function(e,r){gy(e,function(i){n.call(t,i,r,this)},this)},this)},vt.T=function(){ih(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],l=0;l<i.length;l++)e.push(t[r]);return e},vt.R=function(n){ih(this);var t=[];if("string"==typeof n)bR(this,n)&&(t=hw(t,this.g.get(mm(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=hw(t,n[e])}return t},vt.set=function(n,t){return ih(this),this.i=null,bR(this,n=mm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},vt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},vt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=i;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var eF=10;function Fy(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YT(n){return n.h?1:n.g?n.g.size:0}function KT(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function QT(n,t){n.g?n.g.add(t):n.h=t}function JT(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function ER(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return my(n.i)}function Ly(){}function DR(){this.g=new Ly}function tF(n,t,e){const r=e||"";try{HT(n,function(i,l){let d=i;sm(i)&&(d=xT(i)),t.push(r+l+"="+encodeURIComponent(d))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vy(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(l){}}function sc(n){this.l=n.$b||null,this.j=n.ib||!1}function By(n,t){Fr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=$w,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}CR.prototype.cancel=function(){if(this.i=ER(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ly.prototype.stringify=function(n){return Kt.JSON.stringify(n,void 0)},Ly.prototype.parse=function(n){return Kt.JSON.parse(n,void 0)},Ii(sc,kw),sc.prototype.g=function(){return new By(this.l,this.j)},sc.prototype.i=function(n){return function(){return n}}({}),Ii(By,Fr);var $w=0;function XT(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function sh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_m(n)}function _m(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(vt=By.prototype).open=function(n,t){if(this.readyState!=$w)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,_m(this)},vt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Kt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},vt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,sh(this)),this.readyState=$w},vt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_m(this)),this.g&&(this.readyState=3,_m(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Kt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XT(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},vt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?sh(this):_m(this),3==this.readyState&&XT(this)}},vt.Ua=function(n){this.g&&(this.response=this.responseText=n,sh(this))},vt.Ta=function(n){this.g&&(this.response=n,sh(this))},vt.ha=function(){this.g&&sh(this)},vt.setRequestHeader=function(n,t){this.v.append(n,t)},vt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},vt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(By.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ho=Kt.JSON.parse;function si(n){Fr.call(this),this.headers=new pm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uy,this.K=this.L=!1}Ii(si,Fr);var Uy="",xR=/^https?$/i,TR=["POST","PUT"];function eI(n){return"content-type"==n.toLowerCase()}function Gw(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,tI(n),ym(n)}function tI(n){n.D||(n.D=!0,Zi(n,"complete"),Zi(n,"error"))}function Zw(n){if(n.h&&void 0!==fy&&(!n.C[1]||4!=oc(n)||2!=n.ba()))if(n.v&&4==oc(n))Ay(n.Fa,0,n);else if(Zi(n,"readystatechange"),4==oc(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===f){var i=String(n.H).match($T)[1]||null;if(!i&&Kt.self&&Kt.self.location){var l=Kt.self.location.protocol;i=l.substr(0,l.length-1)}r=!xR.test(i?i.toLowerCase():"")}e=r}if(e)Zi(n,"complete"),Zi(n,"success");else{n.m=6;try{var d=2<oc(n)?n.g.statusText:""}catch(g){d=""}n.j=d+" ["+n.ba()+"]",tI(n)}}finally{ym(n)}}}function ym(n,t){if(n.g){nI(n);const e=n.g,r=n.C[0]?py:null;n.g=null,n.C=null,t||Zi(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function nI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function oc(n){return n.g?n.g.readyState:0}function Hy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Uy:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $y(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return Yd(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):_r(n,t,e))}function oh(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function iI(n){this.za=0,this.l=[],this.h=new Hf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=oh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=oh("baseRetryDelayMs",5e3,n),this.$a=oh("retryDelaySeedMs",1e4,n),this.Ya=oh("forwardChannelMaxRetries",2,n),this.ra=oh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new CR(n&&n.concurrentRequestLimit),this.Ca=new DR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function fo(n){if(IR(n),3==n.G){var t=n.V++,e=uu(n.F);_r(e,"SID",n.J),_r(e,"RID",t),_r(e,"TYPE","terminate"),vm(n,e),(t=new My(n,n.h,t,void 0)).K=2,t.v=ic(uu(e)),e=!1,Kt.navigator&&Kt.navigator.sendBeacon&&(e=Kt.navigator.sendBeacon(t.v.toString(),"")),!e&&Kt.Image&&((new Image).src=t.v,e=!0),e||(t.g=uI(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ry(t)}Yw(n)}function jy(n){n.g&&(zw(n),n.g.cancel(),n.g=null)}function IR(n){jy(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),bm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function qw(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&Ww(n)}function Ww(n){Fy(n.i)||n.m||(n.m=!0,Dw(n.Ha,n),n.C=0)}function sI(n,t){var e;e=t?t.m:n.V++;const r=uu(n.F);_r(r,"SID",n.J),_r(r,"RID",e),_r(r,"AID",n.U),vm(n,r),n.o&&n.s&&$y(r,n.o,n.s),e=new My(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=AR(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),QT(n.i,e),UT(e,r,t)}function vm(n,t){n.j&&HT({},function(e,r){_r(t,r,e)})}function AR(n,t,e){e=Math.min(n.l.length,e);var r=n.j?jr(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const d=["count="+e];-1==l?0<e?(l=i[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let f=!0;for(let g=0;g<e;g++){let b=i[g].h;const D=i[g].g;if(b-=l,0>b)l=Math.max(0,i[g].h-100),f=!1;else try{tF(D,d,"req"+b+"_")}catch(x){r&&r(D)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function oI(n){n.g||n.u||(n.Y=1,Dw(n.Ga,n),n.A=0)}function Gy(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=$f(jr(n.Ga,n),NR(n,n.A)),n.A++,0))}function zw(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function aI(n){n.g=new My(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=uu(n.oa);_r(t,"RID","rpc"),_r(t,"SID",n.J),_r(t,"CI",n.N?"0":"1"),_r(t,"AID",n.U),vm(n,t),_r(t,"TYPE","xmlhttp"),n.o&&n.s&&$y(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=ic(uu(t)),e.s=null,e.U=!0,pR(e,n)}function bm(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function lI(n,t){var e=null;if(n.g==t){bm(n),zw(n),n.g=null;var r=2}else{if(!KT(n.i,t))return;e=t.D,JT(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;Zi(r=um(),new Mw(r,e,t,i)),Ww(n)}else oI(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(YT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=$f(jr(n.Ha,n,t),NR(n,n.C)),n.C++,0)))}(n,t)||2==r&&Gy(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:du(n,5);break;case 4:du(n,10);break;case 3:du(n,6);break;default:du(n,2)}}function NR(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function du(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=jr(n.jb,n);e||(e=new Gf("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||Bw(e,"https"),ic(e)),function(n,t){const e=new Hf;if(Kt.Image){const r=new Image;r.onload=dw(Vy,e,r,"TestLoadImage: loaded",!0,t),r.onerror=dw(Vy,e,r,"TestLoadImage: error",!1,t),r.onabort=dw(Vy,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=dw(Vy,e,r,"TestLoadImage: timeout",!1,t),Kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else xs(2);n.G=0,n.j&&n.j.va(t),Yw(n),IR(n)}function Yw(n){n.G=0,n.I=-1,n.j&&((0!=ER(n.i).length||0!=n.l.length)&&(n.i.i.length=0,my(n.l),n.l.length=0),n.j.ua())}function cI(n,t,e){let r=function(n){return n instanceof Gf?uu(n):new Gf(n,void 0)}(e);if(""!=r.i)t&&ky(r,t+"."+r.i),Uw(r,r.m);else{const i=Kt.location;r=function(n,t,e,r){var i=new Gf(null,void 0);return n&&Bw(i,n),t&&ky(i,t),e&&Uw(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&Yd(n.aa,function(i,l){_r(r,l,i)}),e=n.sa,(t=n.D)&&e&&_r(r,t,e),_r(r,"VER",n.ma),vm(n,r),r}function uI(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new si(e&&n.Ba&&!n.qa?new sc({ib:!0}):n.qa)).L=n.H,t}function Kw(){}function hu(){if(Vf&&!(10<=Number(aR)))throw Error("Environmental error: no available transport.")}function Ts(n,t){Fr.call(this),this.g=new iI(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!om(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!om(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new qf(this)}function Qw(n){FT.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function dI(){LT.call(this),this.status=1}function qf(n){this.g=n}(vt=si.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():VT.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:VT),this.g.onreadystatechange=jr(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(l){return void Gw(this,l)}n=e||"";const i=new pm(this.headers);r&&HT(r,function(l,d){i.set(d,l)}),r=function(n){e:{var t=eI;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=Kt.FormData&&n instanceof Kt.FormData,!(0<=cT(TR,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nI(this),0<this.B&&((this.K=function(n){return Vf&&oR()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jr(this.pa,this)):this.A=Ay(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Gw(this,l)}},vt.pa=function(){void 0!==fy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zi(this,"timeout"),this.abort(8))},vt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zi(this,"complete"),Zi(this,"abort"),ym(this))},vt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ym(this,!0)),si.Z.M.call(this)},vt.Fa=function(){this.s||(this.F||this.v||this.l?Zw(this):this.cb())},vt.cb=function(){Zw(this)},vt.ba=function(){try{return 2<oc(this)?this.g.status:-1}catch(n){return-1}},vt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},vt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),ho(t)}},vt.Da=function(){return this.m},vt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(vt=iI.prototype).ma=8,vt.G=1,vt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},vt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new My(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=pw(l),mw(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=AR(this,i,t),_r(e=uu(this.F),"RID",n),_r(e,"CVER",22),this.D&&_r(e,"X-HTTP-Session-Id",this.D),vm(this,e),this.o&&l&&$y(e,this.o,l),QT(this.i,i),this.Ra&&_r(e,"TYPE","init"),this.ja?(_r(e,"$req",t),_r(e,"SID","null"),i.$=!0,UT(i,e,null)):UT(i,e,t),this.G=2}}else 3==this.G&&(n?sI(this,n):0==this.l.length||Fy(this.i)||sI(this))},vt.Ga=function(){if(this.u=null,aI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=$f(jr(this.bb,this),n)}},vt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xs(10),jy(this),aI(this))},vt.ab=function(){null!=this.v&&(this.v=null,jy(this),Gy(this),xs(19))},vt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),xs(2)):(this.h.info("Failed to ping google.com"),xs(1))},(vt=Kw.prototype).xa=function(){},vt.wa=function(){},vt.va=function(){},vt.ua=function(){},vt.Oa=function(){},hu.prototype.g=function(n,t){return new Ts(n,t)},Ii(Ts,Fr),Ts.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Dw(jr(n.hb,n,t))),xs(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=cI(n,null,n.W),Ww(n)},Ts.prototype.close=function(){fo(this.g)},Ts.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,qw(this.g,t)}else this.v?((t={}).__data__=xT(n),qw(this.g,t)):qw(this.g,n)},Ts.prototype.M=function(){this.g.j=null,delete this.j,fo(this.g),delete this.g,Ts.Z.M.call(this)},Ii(Qw,FT),Ii(dI,LT),Ii(qf,Kw),qf.prototype.xa=function(){Zi(this.g,"a")},qf.prototype.wa=function(n){Zi(this.g,new Qw(n))},qf.prototype.va=function(n){Zi(this.g,new dI(n))},qf.prototype.ua=function(){Zi(this.g,"b")},hu.prototype.createWebChannel=hu.prototype.g,Ts.prototype.send=Ts.prototype.u,Ts.prototype.open=Ts.prototype.m,Ts.prototype.close=Ts.prototype.close,hm.NO_ERROR=0,hm.TIMEOUT=8,hm.HTTP_ERROR=6,Rw.COMPLETE="complete",OT.EventType=jf,jf.OPEN="a",jf.CLOSE="b",jf.ERROR="c",jf.MESSAGE="d",Fr.prototype.listen=Fr.prototype.N,si.prototype.listenOnce=si.prototype.O,si.prototype.getLastError=si.prototype.La,si.prototype.getLastErrorCode=si.prototype.Da,si.prototype.getStatus=si.prototype.ba,si.prototype.getResponseJson=si.prototype.Qa,si.prototype.getResponseText=si.prototype.ga,si.prototype.send=si.prototype.ea;var rF=rc.createWebChannelTransport=function(){return new hu},iF=rc.getStatEventTarget=function(){return um()},hI=rc.ErrorCode=hm,fI=rc.EventType=Rw,pI=rc.Event=eh,gI=rc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},MR=rc.FetchXmlHttpFactory=sc,Zy=rc.WebChannel=OT,RR=rc.XhrIo=si;const Jw="@firebase/firestore";class is{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}is.UNAUTHENTICATED=new is(null),is.GOOGLE_CREDENTIALS=new is("google-credentials-uid"),is.FIRST_PARTY=new is("first-party-uid"),is.MOCK_USER=new is("mock-user");let wm="9.6.11";const fu=new tl.Yd("@firebase/firestore");function Cm(){return fu.logLevel}function nt(n,...t){if(fu.logLevel<=tl.in.DEBUG){const e=t.map(Xw);fu.debug(`Firestore (${wm}): ${n}`,...e)}}function Xr(n,...t){if(fu.logLevel<=tl.in.ERROR){const e=t.map(Xw);fu.error(`Firestore (${wm}): ${n}`,...e)}}function Wf(n,...t){if(fu.logLevel<=tl.in.WARN){const e=t.map(Xw);fu.warn(`Firestore (${wm}): ${n}`,...e)}}function Xw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function bt(n="Unexpected state"){const t=`FIRESTORE (${wm}) INTERNAL ASSERTION FAILED: `+n;throw Xr(t),new Error(t)}function Zt(n,t){n||bt()}function dt(n,t){return n}const Oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Q.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class oi{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class qy{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class PR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(is.UNAUTHENTICATED))}shutdown(){}}class Wy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class OR{constructor(t){this.t=t,this.currentUser=is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const l=b=>this.i!==i?(i=this.i,e(b)):Promise.resolve();let d=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new oi,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const b=d;t.enqueueRetryable((0,He.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},g=b=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>g(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?g(b):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new oi)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Zt("string"==typeof r.accessToken),new qy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Zt(null===t||"string"==typeof t),new is(t)}}class eC{constructor(t,e,r){this.type="FirstParty",this.user=is.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class mI{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new eC(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sF{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=l=>{null!=l.error&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,nt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const i=l=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Zt("string"==typeof e.token),this.p=e.token,new vi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class po{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function aF(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}po.A=-1;class Em{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=aF(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<e&&(r+=t.charAt(i[l]%t.length))}return r}}function on(n,t){return n<t?-1:n>t?1:0}function Dm(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function FR(n){return n+"\0"}class ai{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ye(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ye(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ye(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ye(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ai.fromMillis(Date.now())}static fromDate(t){return ai.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new ai(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?on(this.nanoseconds,t.nanoseconds):on(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new ai(0,0))}static max(){return new Bt(new ai(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _I(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ah(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class xm{constructor(t,e,r){void 0===e?e=0:e>t.length&&bt(),void 0===r?r=t.length-e:r>t.length-e&&bt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===xm.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof xm?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const l=t.get(i),d=e.get(i);if(l<d)return-1;if(l>d)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Rn extends xm{construct(t,e,r){return new Rn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ye(Oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Rn(e)}static emptyPath(){return new Rn([])}}const LR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ni extends xm{construct(t,e,r){return new Ni(t,e,r)}static isValidIdentifier(t){return LR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ni.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ni(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Ye(Oe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let d=!1;for(;i<t.length;){const f=t[i];if("\\"===f){if(i+1===t.length)throw new Ye(Oe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Ye(Oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(l(),i++)}if(l(),d)throw new Ye(Oe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ni(e)}static emptyPath(){return new Ni([])}}class zf{constructor(t){this.fields=t,t.sort(Ni.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Dm(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class Mi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Mi(e)}static fromUint8Array(t){const e=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(t);return new Mi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return on(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Mi.EMPTY_BYTE_STRING=new Mi("");const VR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(n){if(Zt(!!n),"string"==typeof n){let t=0;const e=VR.exec(n);if(Zt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Gr(n.seconds),nanos:Gr(n.nanos)}}function Gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function lh(n){return"string"==typeof n?Mi.fromBase64String(n):Mi.fromUint8Array(n)}function tC(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Wo(n){const t=n.mapValue.fields.__previous_value__;return tC(t)?Wo(t):t}function Tm(n){const t=pu(n.mapValue.fields.__local_write_time__.timestampValue);return new ai(t.seconds,t.nanos)}class BR{constructor(t,e,r,i,l,d,f,g){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=g}}class ac{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ac("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ac&&t.projectId===this.projectId&&t.database===this.database}}function ch(n){return null==n}function zy(n){return 0===n&&1/n==-1/0}function vI(n){return"number"==typeof n&&Number.isInteger(n)&&!zy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class lt{constructor(t){this.path=t}static fromPath(t){return new lt(Rn.fromString(t))}static fromName(t){return new lt(Rn.fromString(t).popFirst(5))}static empty(){return new lt(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Rn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Rn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new Rn(t.slice()))}}const bI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yf={nullValue:"NULL_VALUE"};function gu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tC(n)?4:zo(n)?9:10:bt()}function lc(n,t){if(n===t)return!0;const e=gu(n);if(e!==gu(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Tm(n).isEqual(Tm(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=pu(r.timestampValue),d=pu(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,lh(n.bytesValue).isEqual(lh(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Gr(r.geoPointValue.latitude)===Gr(i.geoPointValue.latitude)&&Gr(r.geoPointValue.longitude)===Gr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Gr(r.integerValue)===Gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=Gr(r.doubleValue),d=Gr(i.doubleValue);return l===d?zy(l)===zy(d):isNaN(l)&&isNaN(d)}return!1}(n,t);case 9:return Dm(n.arrayValue.values||[],t.arrayValue.values||[],lc);case 10:return function(r,i){const l=r.mapValue.fields||{},d=i.mapValue.fields||{};if(_I(l)!==_I(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===d[f]||!lc(l[f],d[f])))return!1;return!0}(n,t);default:return bt()}var i}function Im(n,t){return void 0!==(n.values||[]).find(e=>lc(e,t))}function uh(n,t){if(n===t)return 0;const e=gu(n),r=gu(t);if(e!==r)return on(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return on(n.booleanValue,t.booleanValue);case 2:return function(i,l){const d=Gr(i.integerValue||i.doubleValue),f=Gr(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,t);case 3:return UR(n.timestampValue,t.timestampValue);case 4:return UR(Tm(n),Tm(t));case 5:return on(n.stringValue,t.stringValue);case 6:return function(i,l){const d=lh(i),f=lh(l);return d.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(i,l){const d=i.split("/"),f=l.split("/");for(let g=0;g<d.length&&g<f.length;g++){const b=on(d[g],f[g]);if(0!==b)return b}return on(d.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,l){const d=on(Gr(i.latitude),Gr(l.latitude));return 0!==d?d:on(Gr(i.longitude),Gr(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,l){const d=i.values||[],f=l.values||[];for(let g=0;g<d.length&&g<f.length;++g){const b=uh(d[g],f[g]);if(b)return b}return on(d.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,l){const d=i.fields||{},f=Object.keys(d),g=l.fields||{},b=Object.keys(g);f.sort(),b.sort();for(let D=0;D<f.length&&D<b.length;++D){const x=on(f[D],b[D]);if(0!==x)return x;const F=uh(d[f[D]],g[b[D]]);if(0!==F)return F}return on(f.length,b.length)}(n.mapValue,t.mapValue);default:throw bt()}}function UR(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return on(n,t);const e=pu(n),r=pu(t),i=on(e.seconds,r.seconds);return 0!==i?i:on(e.nanos,r.nanos)}function Sm(n){return Am(n)}function Am(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=pu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?lh(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const d of r.values||[])l?l=!1:i+=",",i+=Am(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const f of i)d?d=!1:l+=",",l+=`${f}:${Am(r.fields[f])}`;return l+"}"}(n.mapValue):bt();var t}function dh(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function nC(n){return!!n&&"integerValue"in n}function Nm(n){return!!n&&"arrayValue"in n}function HR(n){return!!n&&"nullValue"in n}function wI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yy(n){return!!n&&"mapValue"in n}function Mm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ah(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Mm(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Mm(n.arrayValue.values[e]);return t}return Object.assign({},n)}function zo(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function cF(n){return"nullValue"in n?Yf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dh(ac.empty(),lt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:bt()}function CI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dh(ac.empty(),lt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?bI:bt()}function EI(n,t){return void 0===n?t:void 0===t||uh(n,t)>0?n:t}function rC(n,t){return void 0===n?t:void 0===t||uh(n,t)<0?n:t}class qi{constructor(t){this.value=t}static empty(){return new qi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Yy(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Mm(e)}setAll(t){let e=Ni.emptyPath(),r={},i=[];t.forEach((d,f)=>{if(!e.isImmediateParentOf(f)){const g=this.getFieldsMap(e);this.applyChanges(g,r,i),r={},i=[],e=f.popLast()}d?r[f.lastSegment()]=Mm(d):i.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,i)}delete(t){const e=this.field(t.popLast());Yy(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return lc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];Yy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){ah(e,(i,l)=>t[i]=l);for(const i of r)delete t[i]}clone(){return new qi(Mm(this.value))}}function iC(n){const t=[];return ah(n.fields,(e,r)=>{const i=new Ni([e]);if(Yy(r)){const l=iC(r.mapValue).fields;if(0===l.length)t.push(i);else for(const d of l)t.push(i.child(d))}else t.push(i)}),new zf(t)}class ur{constructor(t,e,r,i,l,d){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=l,this.documentState=d}static newInvalidDocument(t){return new ur(t,0,Bt.min(),Bt.min(),qi.empty(),0)}static newFoundDocument(t,e,r){return new ur(t,1,e,Bt.min(),r,0)}static newNoDocument(t,e){return new ur(t,2,e,Bt.min(),qi.empty(),0)}static newUnknownDocument(t,e){return new ur(t,3,e,Bt.min(),qi.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=qi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ur&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kf{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function Rm(n){return n.fields.find(t=>2===t.kind)}function hl(n){return n.fields.filter(t=>2!==t.kind)}Kf.UNKNOWN_ID=-1;class hh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Qf{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Qf(0,cc.min())}}function sC(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Bt.fromTimestamp(1e9===r?new ai(e+1,0):new ai(e,r));return new cc(i,lt.empty(),t)}function $R(n){return new cc(n.readTime,n.key,-1)}class cc{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new cc(Bt.min(),lt.empty(),-1)}static max(){return new cc(Bt.max(),lt.empty(),-1)}}function DI(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=lt.comparator(n.documentKey,t.documentKey),0!==e?e:on(n.largestBatchId,t.largestBatchId))}class jR{constructor(t,e=null,r=[],i=[],l=null,d=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=d,this.endAt=f,this.P=null}}function xI(n,t=null,e=[],r=[],i=null,l=null,d=null){return new jR(n,t,e,r,i,l,d)}function fh(n){const t=dt(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Sm(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ch(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Sm(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Sm(r)).join(",")),t.P=e}return t.P}function km(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!WR(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!lc(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Xf(n.startAt,t.startAt)&&Xf(n.endAt,t.endAt)}function Ri(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mu(n,t){return n.filters.filter(e=>e instanceof li&&e.field.isEqual(t))}function Pm(n,t,e){let r,i=!0;for(const l of mu(n,t)){let d,f=!0;switch(l.op){case"<":case"<=":d=cF(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,f=!1;break;case"!=":case"not-in":d=Yf}EI(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];EI(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}function aC(n,t,e){let r,i=!0;for(const l of mu(n,t)){let d,f=!0;switch(l.op){case">=":case">":d=CI(l.value),f=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,f=!1;break;case"!=":case"not-in":d=bI}rC(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];rC(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}class li extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new lC(t,e,r):"array-contains"===e?new GR(t,r):"in"===e?new ZR(t,r):"not-in"===e?new qR(t,r):"array-contains-any"===e?new SI(t,r):new li(t,e,r)}static V(t,e,r){return"in"===e?new TI(t,r):new Ky(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(uh(e,this.value)):null!==e&&gu(this.value)===gu(e)&&this.v(uh(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return bt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class lC extends li{constructor(t,e,r){super(t,e,r),this.key=lt.fromName(r.referenceValue)}matches(t){const e=lt.comparator(t.key,this.key);return this.v(e)}}class TI extends li{constructor(t,e){super(t,"in",e),this.keys=II(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Ky extends li{constructor(t,e){super(t,"not-in",e),this.keys=II(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function II(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>lt.fromName(r.referenceValue))}class GR extends li{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Nm(e)&&Im(e.arrayValue,this.value)}}class ZR extends li{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Im(this.value.arrayValue,e)}}class qR extends li{constructor(t,e){super(t,"not-in",e)}matches(t){if(Im(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Im(this.value.arrayValue,e)}}class SI extends li{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Nm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Im(this.value.arrayValue,r))}}class _u{constructor(t,e){this.position=t,this.inclusive=e}}class Jf{constructor(t,e="asc"){this.field=t,this.dir=e}}function WR(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function uc(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const l=t[i],d=n.position[i];if(r=l.field.isKeyField()?lt.comparator(lt.fromName(d.referenceValue),e.key):uh(d,e.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Xf(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!lc(n.position[e],t.position[e]))return!1;return!0}class Ea{constructor(t,e=null,r=[],i=[],l=null,d="F",f=null,g=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=g,this.D=null,this.C=null}}function AI(n,t,e,r,i,l,d,f){return new Ea(n,t,e,r,i,l,d,f)}function ep(n){return new Ea(n)}function Qy(n){return!ch(n.limit)&&"F"===n.limitType}function tp(n){return!ch(n.limit)&&"L"===n.limitType}function cC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Jy(n){for(const t of n.filters)if(t.S())return t.field;return null}function Xy(n){return null!==n.collectionGroup}function np(n){const t=dt(n);if(null===t.D){t.D=[];const e=Jy(t),r=cC(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new Jf(e)),t.D.push(new Jf(Ni.keyField(),"asc"));else{let i=!1;for(const l of t.explicitOrderBy)t.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Jf(Ni.keyField(),l))}}}return t.D}function Yo(n){const t=dt(n);if(!t.C)if("F"===t.limitType)t.C=xI(t.path,t.collectionGroup,np(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of np(t))e.push(new Jf(l.field,"desc"===l.dir?"asc":"desc"));const r=t.endAt?new _u(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new _u(t.startAt.position,!t.startAt.inclusive):null;t.C=xI(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function NI(n,t,e){return new Ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function go(n,t){return km(Yo(n),Yo(t))&&n.limitType===t.limitType}function rp(n){return`${fh(Yo(n))}|lt:${n.limitType}`}function yu(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${Sm(r.value)}`;var r}).join(", ")}]`),ch(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Sm(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Sm(e)).join(",")),`Target(${t})`}(Yo(n))}; limitType=${n.limitType})`}function ip(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):lt.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,l,d){const f=uc(i,l,d);return i.inclusive?f<=0:f<0}(e.startAt,np(e),r)||e.endAt&&!function(i,l,d){const f=uc(i,l,d);return i.inclusive?f>=0:f>0}(e.endAt,np(e),r)));var e,r}function ph(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MI(n){return(t,e)=>{let r=!1;for(const i of np(n)){const l=zR(i,t,e);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function zR(n,t,e){const r=n.field.isKeyField()?lt.comparator(t.key,e.key):function(i,l,d){const f=l.data.field(i),g=d.data.field(i);return null!==f&&null!==g?uh(f,g):bt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return bt()}}function RI(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zy(t)?"-0":t}}function uC(n){return{integerValue:""+n}}function dC(n,t){return vI(t)?uC(t):RI(n,t)}class Om{constructor(){this._=void 0}}function kI(n,t,e){return n instanceof sp?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(e,t):n instanceof vu?bu(n,t):n instanceof dc?OI(n,t):function(r,i){const l=PI(r,i),d=YR(l)+YR(r.k);return nC(l)&&nC(r.k)?uC(d):RI(r.M,d)}(n,t)}function hC(n,t,e){return n instanceof vu?bu(n,t):n instanceof dc?OI(n,t):e}function PI(n,t){return n instanceof op?nC(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class sp extends Om{}class vu extends Om{constructor(t){super(),this.elements=t}}function bu(n,t){const e=KR(t);for(const r of n.elements)e.some(i=>lc(i,r))||e.push(r);return{arrayValue:{values:e}}}class dc extends Om{constructor(t){super(),this.elements=t}}function OI(n,t){let e=KR(t);for(const r of n.elements)e=e.filter(i=>!lc(i,r));return{arrayValue:{values:e}}}class op extends Om{constructor(t,e){super(),this.M=t,this.k=e}}function YR(n){return Gr(n.integerValue||n.doubleValue)}function KR(n){return Nm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ev{constructor(t,e){this.field=t,this.transform=e}}class QR{constructor(t,e){this.version=t,this.transformResults=e}}class ci{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ci}static exists(t){return new ci(void 0,t)}static updateTime(t){return new ci(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fC(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class pC{}function dF(n,t,e){n instanceof tv?function(r,i,l){const d=r.value.clone(),f=o(r.fieldTransforms,i,l.transformResults);d.setAll(f),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):n instanceof ap?function(r,i,l){if(!fC(r.precondition,i))return void i.convertToUnknownDocument(l.version);const d=o(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(s(r)),f.setAll(d),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function FI(n,t,e){var i;n instanceof tv?function(r,i,l){if(!fC(r.precondition,i))return;const d=r.value.clone(),f=c(r.fieldTransforms,l,i);d.setAll(f),i.convertToFoundDocument(ek(i),d).setHasLocalMutations()}(n,t,e):n instanceof ap?function(r,i,l){if(!fC(r.precondition,i))return;const d=c(r.fieldTransforms,l,i),f=i.data;f.setAll(s(r)),f.setAll(d),i.convertToFoundDocument(ek(i),f).setHasLocalMutations()}(n,t,e):fC(n.precondition,i=t)&&i.convertToNoDocument(Bt.min())}function JR(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),l=PI(r.transform,i||null);null!=l&&(null==e&&(e=qi.empty()),e.set(r.field,l))}return e||null}function XR(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&Dm(e,r,(i,l)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof vu&&r instanceof vu||e instanceof dc&&r instanceof dc?Dm(e.elements,r.elements,lc):e instanceof op&&r instanceof op?lc(e.k,r.k):e instanceof sp&&r instanceof sp);var e,r}(i,l))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function ek(n){return n.isFoundDocument()?n.version:Bt.min()}class tv extends pC{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class ap extends pC{constructor(t,e,r,i,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function s(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function o(n,t,e){const r=new Map;Zt(n.length===e.length);for(let i=0;i<e.length;i++){const l=n[i],d=l.transform,f=t.data.field(l.field);r.set(l.field,hC(d,f,e[i]))}return r}function c(n,t,e){const r=new Map;for(const i of n){const l=i.transform,d=e.data.field(i.field);r.set(i.field,kI(l,d,t))}return r}class u extends pC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class h extends pC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class p{constructor(t){this.count=t}}var _,v;function C(n){switch(n){default:return bt();case Oe.CANCELLED:case Oe.UNKNOWN:case Oe.DEADLINE_EXCEEDED:case Oe.RESOURCE_EXHAUSTED:case Oe.INTERNAL:case Oe.UNAVAILABLE:case Oe.UNAUTHENTICATED:return!1;case Oe.INVALID_ARGUMENT:case Oe.NOT_FOUND:case Oe.ALREADY_EXISTS:case Oe.PERMISSION_DENIED:case Oe.FAILED_PRECONDITION:case Oe.ABORTED:case Oe.OUT_OF_RANGE:case Oe.UNIMPLEMENTED:case Oe.DATA_LOSS:return!0}}function I(n){if(void 0===n)return Xr("GRPC error has no .code"),Oe.UNKNOWN;switch(n){case _.OK:return Oe.OK;case _.CANCELLED:return Oe.CANCELLED;case _.UNKNOWN:return Oe.UNKNOWN;case _.DEADLINE_EXCEEDED:return Oe.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return Oe.RESOURCE_EXHAUSTED;case _.INTERNAL:return Oe.INTERNAL;case _.UNAVAILABLE:return Oe.UNAVAILABLE;case _.UNAUTHENTICATED:return Oe.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return Oe.INVALID_ARGUMENT;case _.NOT_FOUND:return Oe.NOT_FOUND;case _.ALREADY_EXISTS:return Oe.ALREADY_EXISTS;case _.PERMISSION_DENIED:return Oe.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return Oe.FAILED_PRECONDITION;case _.ABORTED:return Oe.ABORTED;case _.OUT_OF_RANGE:return Oe.OUT_OF_RANGE;case _.UNIMPLEMENTED:return Oe.UNIMPLEMENTED;case _.DATA_LOSS:return Oe.DATA_LOSS;default:return bt()}}(v=_||(_={}))[v.OK=0]="OK",v[v.CANCELLED=1]="CANCELLED",v[v.UNKNOWN=2]="UNKNOWN",v[v.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",v[v.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",v[v.NOT_FOUND=5]="NOT_FOUND",v[v.ALREADY_EXISTS=6]="ALREADY_EXISTS",v[v.PERMISSION_DENIED=7]="PERMISSION_DENIED",v[v.UNAUTHENTICATED=16]="UNAUTHENTICATED",v[v.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",v[v.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",v[v.ABORTED=10]="ABORTED",v[v.OUT_OF_RANGE=11]="OUT_OF_RANGE",v[v.UNIMPLEMENTED=12]="UNIMPLEMENTED",v[v.INTERNAL=13]="INTERNAL",v[v.UNAVAILABLE=14]="UNAVAILABLE",v[v.DATA_LOSS=15]="DATA_LOSS";class P{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ah(this.inner,(e,r)=>{for(const[i,l]of r)t(i,l)})}isEmpty(){return yI(this.inner)}size(){return this.innerSize}}class q{constructor(t,e){this.comparator=t,this.root=e||ce.EMPTY}insert(t,e){return new q(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ce.BLACK,null,null))}remove(t){return new q(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ce.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new J(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new J(this.root,t,this.comparator,!1)}getReverseIterator(){return new J(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new J(this.root,t,this.comparator,!0)}}class J{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,e&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ce{constructor(t,e,r,i,l){this.key=t,this.value=e,this.color=null!=r?r:ce.RED,this.left=null!=i?i:ce.EMPTY,this.right=null!=l?l:ce.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,l){return new ce(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const l=r(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===l?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ce.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return ce.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const t=this.left.check();if(t!==this.right.check())throw bt();return t+(this.isRed()?0:1)}}ce.EMPTY=null,ce.RED=!0,ce.BLACK=!1,ce.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(n,t,e,r,i){return this}insert(n,t,e){return new ce(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fe{constructor(t){this.comparator=t,this.data=new q(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Pe(this.data.getIterator())}getIteratorFrom(t){return new Pe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof fe)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new fe(this.comparator);return e.data=t,e}}class Pe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Te(n){return n.hasNext()?n.getNext():void 0}const Xe=new q(lt.comparator);function $e(){return Xe}const It=new q(lt.comparator);function Ft(){return It}function hn(){return new P(n=>n.toString(),(n,t)=>n.isEqual(t))}const bi=new q(lt.comparator),Ko=new fe(lt.comparator);function Nn(...n){let t=Ko;for(const e of n)t=t.add(e);return t}const lp=new fe(on);function hc(){return lp}class fl{constructor(t,e,r,i,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,gh.createSynthesizedTargetChangeForCurrentChange(t,e)),new fl(Bt.min(),r,hc(),$e(),Nn())}}class gh{constructor(t,e,r,i,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new gh(Mi.EMPTY_BYTE_STRING,e,Nn(),Nn(),Nn())}}class cp{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class nv{constructor(t,e){this.targetId=t,this.$=e}}class rv{constructor(t,e,r=Mi.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class iv{constructor(){this.B=0,this.L=fF(),this.U=Mi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Nn(),e=Nn(),r=Nn();return this.L.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:bt()}}),new gh(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=fF()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class J6{constructor(t){this.nt=t,this.st=new Map,this.it=$e(),this.rt=hF(),this.ot=new fe(on)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:bt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const l=i.target;if(Ri(l))if(0===r){const d=new lt(l.path);this.ct(e,d,ur.newNoDocument(d,Bt.min()))}else Zt(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((l,d)=>{const f=this.wt(d);if(f){if(l.current&&Ri(f.target)){const g=new lt(f.target.path);null!==this.it.get(g)||this.It(d,g)||this.ct(d,g,ur.newNoDocument(g,t))}l.j&&(e.set(d,l.H()),l.J())}});let r=Nn();this.rt.forEach((l,d)=>{let f=!0;d.forEachWhile(g=>{const b=this.wt(g);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(t));const i=new fl(t,e,this.ot,this.it,r);return this.it=$e(),this.rt=hF(),this.ot=new fe(on),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new iv,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new fe(on),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||nt("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new iv),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function hF(){return new q(lt.comparator)}function fF(){return new q(lt.comparator)}const X6={asc:"ASCENDING",desc:"DESCENDING"},e4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class t4{constructor(t,e){this.databaseId=t,this.N=e}}function gC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function pF(n,t){return n.N?t.toBase64():t.toUint8Array()}function n4(n,t){return gC(n,t.toTimestamp())}function ss(n){return Zt(!!n),Bt.fromTimestamp(function(t){const e=pu(t);return new ai(e.seconds,e.nanos)}(n))}function tk(n,t){return(e=n,new Rn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function gF(n){const t=Rn.fromString(n);return Zt(DF(t)),t}function mC(n,t){return tk(n.databaseId,t.path)}function wu(n,t){const e=gF(t);if(e.get(1)!==n.databaseId.projectId)throw new Ye(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ye(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new lt(_F(e))}function nk(n,t){return tk(n.databaseId,t)}function mF(n){const t=gF(n);return 4===t.length?Rn.emptyPath():_F(t)}function _C(n){return new Rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _F(n){return Zt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function yF(n,t,e){return{name:mC(n,t),fields:e.value.mapValue.fields}}function vF(n,t,e){const r=wu(n,t.name),i=ss(t.updateTime),l=new qi({mapValue:{fields:t.fields}}),d=ur.newFoundDocument(r,i,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function yC(n,t){let e;if(t instanceof tv)e={update:yF(n,t.key,t.value)};else if(t instanceof u)e={delete:mC(n,t.key)};else if(t instanceof ap)e={update:yF(n,t.key,t.data),updateMask:d4(t.fieldMask)};else{if(!(t instanceof h))return bt();e={verify:mC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,l){const d=l.transform;if(d instanceof sp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof vu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof dc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof op)return{fieldPath:l.field.canonicalString(),increment:d.k};throw bt()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:n4(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:bt()),e;var i}function rk(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?ci.updateTime(ss(i.updateTime)):void 0!==i.exists?ci.exists(i.exists):ci.none():ci.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(l,d){let f=null;"setToServerValue"in d?(Zt("REQUEST_TIME"===d.setToServerValue),f=new sp):"appendMissingElements"in d?f=new vu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new dc(d.removeAllFromArray.values||[]):"increment"in d?f=new op(l,d.increment):bt();const g=Ni.fromServerFormat(d.fieldPath);return new ev(g,f)}(n,i)):[];var i;if(t.update){const i=wu(n,t.update.name),l=new qi({mapValue:{fields:t.update.fields}});if(t.updateMask){const d=new zf((t.updateMask.fieldPaths||[]).map(b=>Ni.fromServerFormat(b)));return new ap(i,l,d,e,r)}return new tv(i,l,e,r)}if(t.delete){const i=wu(n,t.delete);return new u(i,e)}if(t.verify){const i=wu(n,t.verify);return new h(i,e)}return bt()}function bF(n,t){return{documents:[nk(n,t.path)]}}function wF(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=nk(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=nk(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const b=g.map(D=>function(x){if("=="===x.op){if(wI(x.value))return{unaryFilter:{field:sv(x.field),op:"IS_NAN"}};if(HR(x.value))return{unaryFilter:{field:sv(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(wI(x.value))return{unaryFilter:{field:sv(x.field),op:"IS_NOT_NAN"}};if(HR(x.value))return{unaryFilter:{field:sv(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sv(x.field),op:l4(x.op),value:x.value}}}(D));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);i&&(e.structuredQuery.where=i);const l=function(g){if(0!==g.length)return g.map(b=>{return{field:sv((D=b).field),direction:a4(D.dir)};var D})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const d=(b=t.limit,n.N||ch(b)?b:{value:b});var b,f,g;return null!==d&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt={before:(f=t.startAt).inclusive,values:f.position}),t.endAt&&(e.structuredQuery.endAt={before:!(g=t.endAt).inclusive,values:g.position}),e}function CF(n){let t=mF(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Zt(1===r);const D=e.from[0];D.allDescendants?i=D.collectionId:t=t.child(D.collectionId)}let l=[];e.where&&(l=EF(e.where));let d=[];e.orderBy&&(d=e.orderBy.map(D=>{return new Jf(ov((x=D).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;e.limit&&(f=function(D){let x;return x="object"==typeof D?D.value:D,ch(x)?null:x}(e.limit));let g=null;var D;e.startAt&&(g=new _u((D=e.startAt).values||[],!!D.before));let b=null;return e.endAt&&(b=function(D){return new _u(D.values||[],!D.before)}(e.endAt)),AI(t,i,d,l,f,"F",g,b)}function EF(n){return n?void 0!==n.unaryFilter?[u4(n)]:void 0!==n.fieldFilter?[c4(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>EF(t)).reduce((t,e)=>t.concat(e)):bt():[]}function a4(n){return X6[n]}function l4(n){return e4[n]}function sv(n){return{fieldPath:n.canonicalString()}}function ov(n){return Ni.fromServerFormat(n.fieldPath)}function c4(n){return li.create(ov(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(n.fieldFilter.op),n.fieldFilter.value)}function u4(n){switch(n.unaryFilter.op){case"IS_NAN":const t=ov(n.unaryFilter.field);return li.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=ov(n.unaryFilter.field);return li.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ov(n.unaryFilter.field);return li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ov(n.unaryFilter.field);return li.create(i,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}function d4(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function DF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function mo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=xF(t)),t=h4(n.get(e),t);return xF(t)}function h4(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function xF(n){return n+"\x01\x01"}function Cu(n){const t=n.length;if(Zt(t>=2),2===t)return Zt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Rn.emptyPath();const e=t-2,r=[];let i="";for(let l=0;l<t;){const d=n.indexOf("\x01",l);switch((d<0||d>e)&&bt(),n.charAt(d+1)){case"\x01":const f=n.substring(l,d);let g;0===i.length?g=f:(i+=f,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(l,d),i+="\0";break;case"\x11":i+=n.substring(l,d+1);break;default:bt()}l=d+2}return new Rn(r)}const TF=["userId","batchId"];function LI(n,t){return[n,mo(t)]}function IF(n,t,e){return[n,mo(t),e]}const f4={},p4=["prefixPath","collectionGroup","readTime","documentId"],g4=["prefixPath","collectionGroup","documentId"],m4=["collectionGroup","readTime","prefixPath","documentId"],_4=["canonicalId","targetId"],y4=["targetId","path"],v4=["path","targetId"],b4=["collectionId","parent"],w4=["indexId","uid"],C4=["uid","sequenceNumber"],E4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],D4=["indexId","uid","orderedDocumentKey"],x4=["userId","collectionPath","documentId"],T4=["userId","collectionPath","largestBatchId"],I4=["userId","collectionGroup","largestBatchId"],SF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],S4=[...SF,"documentOverlays"],AF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],A4=[...AF,"indexConfiguration","indexState","indexEntries"],NF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class je{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new je((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof je?e:je.resolve(e)}catch(e){return je.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):je.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):je.reject(e)}static resolve(t){return new je((e,r)=>{e(t)})}static reject(t){return new je((e,r)=>{r(t)})}static waitFor(t){return new je((e,r)=>{let i=0,l=0,d=!1;t.forEach(f=>{++i,f.next(()=>{++l,d&&l===i&&e()},g=>r(g))}),d=!0,l===i&&e()})}static or(t){let e=je.resolve(!1);for(const r of t)e=e.next(i=>i?je.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,l)=>{r.push(e.call(this,i,l))}),this.waitFor(r)}}class VI{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new oi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new vC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=ik(r.target.error);this.At.reject(new vC(t,i))}}static open(t,e,r,i){try{return new VI(e,t.transaction(i,r))}catch(l){throw new vC(e,l)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(nt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new M4(e)}}class fc{constructor(t,e,r){this.name=t,this.version=e,this.bt=r,12.2===fc.Vt((0,Q.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return nt("SimpleDb","Removing database:",t),Lm(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,Q.hl)())return!1;if(fc.St())return!0;const t=(0,Q.z$)(),e=fc.Vt(t),r=0<e&&e<10,i=fc.Dt(t),l=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,He.Z)(function*(){return e.db||(nt("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{i(new vC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Ye(Oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ye(Oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new vC(t,f))},l.onupgradeneeded=d=>{nt("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',d.oldVersion),e.bt.kt(d.target.result,l.transaction,d.oldVersion,e.version).next(()=>{nt("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var l=this;return(0,He.Z)(function*(){const d="readonly"===e;let f=0;for(;;){++f;try{l.db=yield l.Nt(t);const g=VI.open(l.db,t,d?"readonly":"readwrite",r),b=i(g).next(D=>(g.Pt(),D)).catch(D=>(g.abort(D),je.reject(D))).toPromise();return b.catch(()=>{}),yield g.Rt,b}catch(g){const b="FirebaseError"!==g.name&&f<3;if(nt("SimpleDb","Transaction failed with error:",g.message,"Retrying:",b),l.close(),!b)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class N4{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Lm(this.Ft.delete())}}class vC extends Ye{constructor(t,e){super(Oe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Fm(n){return"IndexedDbTransactionError"===n.name}class M4{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(nt("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(nt("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Lm(r)}add(t){return nt("SimpleDb","ADD",this.store.name,t,t),Lm(this.store.add(t))}get(t){return Lm(this.store.get(t)).next(e=>(void 0===e&&(e=null),nt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return nt("SimpleDb","DELETE",this.store.name,t),Lm(this.store.delete(t))}count(){return nt("SimpleDb","COUNT",this.store.name),Lm(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(d,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new je((l,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new je((i,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(t,e){nt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,d,f)=>f.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new je((r,i)=>{e.onerror=l=>{const d=ik(l.target.error);i(d)},e.onsuccess=l=>{const d=l.target.result;d?t(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(t,e){const r=[];return new je((i,l)=>{t.onerror=d=>{l(d.target.error)},t.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const g=new N4(f),b=e(f.primaryKey,f.value,g);if(b instanceof je){const D=b.catch(x=>(g.done(),je.reject(x)));r.push(D)}g.isDone?i():null===g.Lt?f.continue():f.continue(g.Lt)}}).next(()=>je.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Lm(n){return new je((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=ik(r.target.error);e(i)}})}let RF=!1;function ik(n){const t=fc.Vt((0,Q.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RF||(RF=!0,setTimeout(()=>{throw r},0)),r}}return n}class kF extends MF{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function os(n,t){const e=dt(n);return fc.xt(e.Ht,t)}class sk{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&dF(l,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&FI(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&FI(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Bt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Nn())}isEqual(t){return this.batchId===t.batchId&&Dm(this.mutations,t.mutations,(e,r)=>XR(e,r))&&Dm(this.baseMutations,t.baseMutations,(e,r)=>XR(e,r))}}class ok{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Zt(t.mutations.length===r.length);let i=bi;const l=t.mutations;for(let d=0;d<l.length;d++)i=i.insert(l[d].key,r[d].version);return new ok(t,e,r,i)}}class ak{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class up{constructor(t,e,r,i,l=Bt.min(),d=Bt.min(),f=Mi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(t){return new up(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new up(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new up(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class PF{constructor(t){this.Jt=t}}function OF(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:BI(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:mC(i=n.Jt,(l=t).key),fields:l.data.value.mapValue.fields,updateTime:gC(i,l.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Vm(t.version)};else{if(!t.isUnknownDocument())return bt();r.unknownDocument={path:e.path.toArray(),version:Vm(t.version)}}var i,l;return r}function BI(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Vm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Bm(n){const t=new ai(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function av(n,t){const e=(t.baseMutations||[]).map(l=>rk(n.Jt,l));for(let l=0;l<t.mutations.length-1;++l){const d=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(d.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const r=t.mutations.map(l=>rk(n.Jt,l)),i=ai.fromMillis(t.localWriteTimeMs);return new sk(t.batchId,i,e,r)}function bC(n){const t=Bm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Bm(n.lastLimboFreeSnapshotVersion):Bt.min();let r;var i;return void 0!==n.query.documents?(Zt(1===(i=n.query).documents.length),r=Yo(ep(mF(i.documents[0])))):r=Yo(CF(n.query)),new up(r,n.targetId,0,n.lastListenSequenceNumber,t,e,Mi.fromBase64String(n.resumeToken))}function FF(n,t){const e=Vm(t.snapshotVersion),r=Vm(t.lastLimboFreeSnapshotVersion);let i;i=Ri(t.target)?bF(n.Jt,t.target):wF(n.Jt,t.target);const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fh(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lk(n){const t=CF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?NI(t,t.limit,"L"):t}function ck(n,t){return new ak(t.largestBatchId,rk(n.Jt,t.overlayMutation))}function LF(n,t){const e=t.path.lastSegment();return[n,mo(t.path.popLast()),e]}class k4{getBundleMetadata(t,e){return VF(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Bm(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return VF(t).put({bundleId:(r=e).id,createTime:Vm(ss(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return BF(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:lk(i.bundledQuery),readTime:Bm(i.readTime)};var i})}saveNamedQuery(t,e){return BF(t).put({name:(r=e).name,readTime:Vm(ss(r.readTime)),bundledQuery:r.bundledQuery});var r}}function VF(n){return os(n,"bundles")}function BF(n){return os(n,"namedQueries")}class uk{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new uk(t,e.uid||"")}getOverlay(t,e){return wC(t).get(LF(this.userId,e)).next(r=>r?ck(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((l,d)=>{const f=new ak(e,d);i.push(this.Xt(t,f))}),je.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(d=>i.add(mo(d.getCollectionPath())));const l=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(wC(t).Qt("collectionPathOverlayIndex",f))}),je.waitFor(l)}getOverlaysForCollection(t,e,r){const i=hn(),l=mo(e),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return wC(t).qt("collectionPathOverlayIndex",d).next(f=>{for(const g of f){const b=ck(this.M,g);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const l=hn();let d;const f=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return wC(t).Wt({index:"collectionGroupOverlayIndex",range:f},(g,b,D)=>{const x=ck(this.M,b);l.size()<i||x.largestBatchId===d?(l.set(x.getKey(),x),d=x.largestBatchId):D.done()}).next(()=>l)}Xt(t,e){return wC(t).put(function(r,i,l){const[d,f,g]=LF(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:g,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:yC(r.Jt,l.mutation)}}(this.M,this.userId,e))}}function wC(n){return os(n,"documentOverlays")}class Um{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Gr(t.integerValue));else if("doubleValue"in t){const r=Gr(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),zy(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(lh(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?zo(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):bt()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),lt.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function P4(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function UF(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const l=P4(255&e[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(t/8)}Um.fe=new Um;class O4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=UF(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=UF(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class F4{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class L4{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class CC{constructor(){this.De=new O4,this.Ce=new F4(this.De),this.xe=new L4(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class dp{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new dp(this.indexId,this.documentKey,this.arrayValue,r)}}function Hm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=HF(n.arrayValue,t.arrayValue),0!==e?e:(e=HF(n.directionalValue,t.directionalValue),0!==e?e:lt.comparator(n.documentKey,t.documentKey)))}function HF(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class V4{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=Rm(t);if(void 0!==e&&!this.Be(e))return!1;const r=hl(t);let i=0,l=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class B4{constructor(){this.qe=new dk}addToCollectionParentIndex(t,e){return this.qe.add(e),je.resolve()}getCollectionParents(t,e){return je.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return je.resolve()}deleteFieldIndex(t,e){return je.resolve()}getDocumentsMatchingTarget(t,e){return je.resolve(null)}getFieldIndex(t,e){return je.resolve(null)}getFieldIndexes(t,e){return je.resolve([])}getNextCollectionGroupToUpdate(t){return je.resolve(null)}updateCollectionGroup(t,e,r){return je.resolve()}updateIndexEntries(t,e){return je.resolve()}}class dk{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new fe(Rn.comparator),l=!i.has(r);return this.index[e]=i.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new fe(Rn.comparator)).toArray()}}const lv=new Uint8Array(0);class U4{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new dk,this.Ge=new P(r=>fh(r),(r,i)=>km(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const l={collectionId:r,parent:mo(i)};return $F(t).put(l)}return je.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[FR(e),""],!1,!0);return $F(t).qt(i).next(l=>{for(const d of l){if(d.collectionId!==e)break;r.push(Cu(d.parent))}return r})}addFieldIndex(t,e){const r=UI(t),i={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=UI(t),i=HI(t),l=EC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=EC(t);let i=!0;const l=new Map;return je.forEach(this.Qe(e),d=>this.getFieldIndex(t,d).next(f=>{i&&(i=!!f),l.set(d,f)})).next(()=>{if(i){let d=Nn();const f=[];return je.forEach(l,(g,b)=>{var D;nt("IndexedDbIndexManager",`Using index ${D=g,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(pt=>`${pt.fieldPath}:${pt.kind}`).join(",")}`} to execute ${fh(e)}`);const x=function(pt,mt){const Ut=Rm(mt);if(void 0===Ut)return null;for(const gn of mu(pt,Ut.fieldPath))switch(gn.op){case"array-contains-any":return gn.value.arrayValue.values||[];case"array-contains":return[gn.value]}return null}(b,g),F=function(pt,mt){const Ut=new Map;for(const gn of hl(mt))for(const Wr of mu(pt,gn.fieldPath))switch(Wr.op){case"==":case"in":Ut.set(gn.fieldPath.canonicalString(),Wr.value);break;case"not-in":case"!=":return Ut.set(gn.fieldPath.canonicalString(),Wr.value),Array.from(Ut.values())}return null}(b,g),$=function(pt,mt){const Ut=[];let gn=!0;for(const Wr of hl(mt)){const ti=0===Wr.kind?Pm(pt,Wr.fieldPath,pt.startAt):aC(pt,Wr.fieldPath,pt.startAt);if(!ti.value)return null;Ut.push(ti.value),gn&&(gn=ti.inclusive)}return new _u(Ut,gn)}(b,g),re=function(pt,mt){const Ut=[];let gn=!0;for(const Wr of hl(mt)){const ti=0===Wr.kind?aC(pt,Wr.fieldPath,pt.endAt):Pm(pt,Wr.fieldPath,pt.endAt);if(!ti.value)return null;Ut.push(ti.value),gn&&(gn=ti.inclusive)}return new _u(Ut,gn)}(b,g),ge=this.je(g,b,$),Me=this.je(g,b,re),Qe=this.We(g,b,F),st=this.ze(g.indexId,x,ge,!!$&&$.inclusive,Me,!!re&&re.inclusive,Qe);return je.forEach(st,pt=>r.Gt(pt,e.limit).next(mt=>{mt.forEach(Ut=>{const gn=lt.fromSegments(Ut.documentKey);d.has(gn)||(d=d.add(gn),f.push(gn))})}))}).next(()=>f)}return je.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,r,i,l,d,f){const g=(null!=e?e.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),b=g/(null!=e?e.length:1),D=[];for(let x=0;x<g;++x){const F=e?this.He(e[x/b]):lv,$=r?this.Je(t,F,r[x%b],i):this.Ye(t),re=l?this.Xe(t,F,l[x%b],d):this.Ye(t+1);D.push(...this.createRange($,re,f.map(ge=>this.Je(t,F,ge,!0))))}return D}Je(t,e,r,i){const l=new dp(t,lt.empty(),e,r);return i?l:l.ke()}Xe(t,e,r,i){const l=new dp(t,lt.empty(),e,r);return i?l.ke():l}Ye(t){return new dp(t,lt.empty(),lv,lv)}getFieldIndex(t,e){const r=new V4(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(l=>{const d=l.filter(f=>r.$e(f));return d.sort((f,g)=>g.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(t,e){const r=new CC;for(const i of hl(t)){const l=e.data.field(i.fieldPath);if(null==l)return null;const d=r.Ne(i.kind);Um.fe.Zt(l,d)}return r.Se()}He(t){const e=new CC;return Um.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new CC;return Um.fe.Zt(dh(this.databaseId,e),r.Ne(function(i){const l=hl(i);return 0===l.length?0:l[l.length-1].kind}(t))),r.Se()}We(t,e,r){if(null===r)return[];let i=[];i.push(new CC);let l=0;for(const d of hl(t)){const f=r[l++];for(const g of i)if(this.en(e,d.fieldPath)&&Nm(f))i=this.nn(i,d,f);else{const b=g.Ne(d.kind);Um.fe.Zt(f,b)}}return this.sn(i)}je(t,e,r){return null==r?null:this.We(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],l=[];for(const d of r.arrayValue.values||[])for(const f of i){const g=new CC;g.seed(f.Se()),Um.fe.Zt(d,g.Ne(e.kind)),l.push(g)}return l}en(t,e){return!!t.filters.find(r=>r instanceof li&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=UI(t),i=HI(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(l=>{const d=[];return je.forEach(l,f=>i.get([f.indexId,this.uid]).next(g=>{d.push(function(b,D){const x=D?new Qf(D.sequenceNumber,new cc(Bm(D.readTime),new lt(Cu(D.documentKey)),D.largestBatchId)):Qf.empty(),F=b.fields.map(([$,re])=>new hh(Ni.fromServerFormat($),re));return new Kf(b.indexId,b.collectionGroup,F,x)}(f,g))})).next(()=>d)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:on(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=UI(t),l=HI(t);return this.rn(t).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(f=>je.forEach(f,g=>{return l.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Vm((F=r).readTime),documentKey:mo(F.documentKey.path),largestBatchId:F.largestBatchId});var F})))}updateIndexEntries(t,e){const r=new Map;return je.forEach(e,(i,l)=>{const d=r.get(i.collectionGroup);return(d?je.resolve(d):this.getFieldIndexes(t,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),je.forEach(f,g=>this.on(t,i,g).next(b=>{const D=this.un(l,g);return b.isEqual(D)?je.resolve():this.an(t,l,g,b,D)}))))})}cn(t,e,r,i){return EC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return EC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=EC(t);let l=new fe(Hm);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(d,f)=>{l=l.add(new dp(r.indexId,e,f.arrayValue,f.directionalValue))}).next(()=>l)}un(t,e){let r=new fe(Hm);const i=this.Ze(e,t);if(null==i)return r;const l=Rm(e);if(null!=l){const d=t.data.field(l.fieldPath);if(Nm(d))for(const f of d.arrayValue.values||[])r=r.add(new dp(e.indexId,t.key,this.He(f),i))}else r=r.add(new dp(e.indexId,t.key,lv,i));return r}an(t,e,r,i,l){nt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const d=[];return function(f,g,b,D,x){const F=f.getIterator(),$=g.getIterator();let re=Te(F),ge=Te($);for(;re||ge;){let Me=!1,Qe=!1;if(re&&ge){const st=b(re,ge);st<0?Qe=!0:st>0&&(Me=!0)}else null!=re?Qe=!0:Me=!0;Me?(D(ge),ge=Te($)):Qe?(x(re),re=Te(F)):(re=Te(F),ge=Te($))}}(i,l,Hm,f=>{d.push(this.cn(t,e,r,f))},f=>{d.push(this.hn(t,e,r,f))}),je.waitFor(d)}rn(t){let e=1;return HI(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((d,f)=>Hm(d,f)).filter((d,f,g)=>!f||0!==Hm(d,g[f-1]));const i=[];i.push(t);for(const d of r){const f=Hm(d,t),g=Hm(d,e);if(0===f)i[0]=t.ke();else if(f>0&&g<0)i.push(d),i.push(d.ke());else if(g>0)break}i.push(e);const l=[];for(let d=0;d<i.length;d+=2)l.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,lv,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,lv,[]]));return l}}function $F(n){return os(n,"collectionParents")}function EC(n){return os(n,"indexEntries")}function UI(n){return os(n,"indexConfiguration")}function HI(n){return os(n,"indexState")}const jF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qo{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new Qo(t,Qo.DEFAULT_COLLECTION_PERCENTILE,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function GF(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],d=IDBKeyRange.only(e.batchId);let f=0;const g=r.Wt({range:d},(D,x,F)=>(f++,F.delete()));l.push(g.next(()=>{Zt(1===f)}));const b=[];for(const D of e.mutations){const x=IF(t,D.key.path,e.batchId);l.push(i.delete(x)),b.push(D.key)}return je.waitFor(l).next(()=>b)}function $I(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw bt();t=n.noDocument}return JSON.stringify(t).length}Qo.DEFAULT_COLLECTION_PERCENTILE=10,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qo.DEFAULT=new Qo(41943040,Qo.DEFAULT_COLLECTION_PERCENTILE,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qo.DISABLED=new Qo(-1,0,0);class hk{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){Zt(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new hk(l,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hp(t).Wt({index:"userMutationsIndex",range:r},(i,l,d)=>{e=!1,d.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const l=cv(t),d=hp(t);return d.add({}).next(f=>{Zt("number"==typeof f);const g=new sk(f,e,r,i),b=function(F,$,re){const ge=re.baseMutations.map(Qe=>yC(F.Jt,Qe)),Me=re.mutations.map(Qe=>yC(F.Jt,Qe));return{userId:$,batchId:re.batchId,localWriteTimeMs:re.localWriteTime.toMillis(),baseMutations:ge,mutations:Me}}(this.M,this.userId,g),D=[];let x=new fe((F,$)=>on(F.canonicalString(),$.canonicalString()));for(const F of i){const $=IF(this.userId,F.key.path,f);x=x.add(F.key.path.popLast()),D.push(d.put(b)),D.push(l.put($,f4))}return x.forEach(F=>{D.push(this.indexManager.addToCollectionParentIndex(t,F))}),t.addOnCommittedListener(()=>{this.ln[f]=g.keys()}),je.waitFor(D).next(()=>g)})}lookupMutationBatch(t,e){return hp(t).get(e).next(r=>r?(Zt(r.userId===this.userId),av(this.M,r)):null)}fn(t,e){return this.ln[e]?je.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return hp(t).Wt({index:"userMutationsIndex",range:i},(d,f,g)=>{f.userId===this.userId&&(Zt(f.batchId>=r),l=av(this.M,f)),g.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hp(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hp(t).qt("userMutationsIndex",e).next(r=>r.map(i=>av(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=LI(this.userId,e.path),i=IDBKeyRange.lowerBound(r),l=[];return cv(t).Wt({range:i},(d,f,g)=>{const[b,D,x]=d,F=Cu(D);if(b===this.userId&&e.path.isEqual(F))return hp(t).get(x).next($=>{if(!$)throw bt();Zt($.userId===this.userId),l.push(av(this.M,$))});g.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new fe(on);const i=[];return e.forEach(l=>{const d=LI(this.userId,l.path),f=IDBKeyRange.lowerBound(d),g=cv(t).Wt({range:f},(b,D,x)=>{const[F,$,re]=b,ge=Cu($);F===this.userId&&l.path.isEqual(ge)?r=r.add(re):x.done()});i.push(g)}),je.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,l=LI(this.userId,r),d=IDBKeyRange.lowerBound(l);let f=new fe(on);return cv(t).Wt({range:d},(g,b,D)=>{const[x,F,$]=g,re=Cu(F);x===this.userId&&r.isPrefixOf(re)?re.length===i&&(f=f.add($)):D.done()}).next(()=>this.dn(t,f))}dn(t,e){const r=[],i=[];return e.forEach(l=>{i.push(hp(t).get(l).next(d=>{if(null===d)throw bt();Zt(d.userId===this.userId),r.push(av(this.M,d))}))}),je.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return GF(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),je.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return je.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return cv(t).Wt({range:r},(l,d,f)=>{if(l[0]===this.userId){const g=Cu(l[1]);i.push(g)}else f.done()}).next(()=>{Zt(0===i.length)})})}containsKey(t,e){return ZF(t,this.userId,e)}wn(t){return qF(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ZF(n,t,e){const r=LI(t,e.path),i=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return cv(n).Wt({range:l,jt:!0},(f,g,b)=>{const[D,x,F]=f;D===t&&x===i&&(d=!0),b.done()}).next(()=>d)}function hp(n){return os(n,"mutations")}function cv(n){return os(n,"documentMutations")}function qF(n){return os(n,"mutationQueues")}class $m{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new $m(0)}static yn(){return new $m(-1)}}class H4{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new $m(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>Bt.fromTimestamp(new ai(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>uv(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(Zt(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const l=[];return uv(t).Wt((d,f)=>{const g=bC(f);g.sequenceNumber<=e&&null===r.get(g.targetId)&&(i++,l.push(this.removeTargetData(t,g)))}).next(()=>je.waitFor(l)).next(()=>i)}forEachTarget(t,e){return uv(t).Wt((r,i)=>{const l=bC(i);e(l)})}pn(t){return WF(t).get("targetGlobalKey").next(e=>(Zt(null!==e),e))}In(t,e){return WF(t).put("targetGlobalKey",e)}Tn(t,e){return uv(t).put(FF(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=fh(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return uv(t).Wt({range:i,index:"queryTargetsIndex"},(d,f,g)=>{const b=bC(f);km(e,b.target)&&(l=b,g.done())}).next(()=>l)}addMatchingKeys(t,e,r){const i=[],l=fp(t);return e.forEach(d=>{const f=mo(d.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(t,r,d))}),je.waitFor(i)}removeMatchingKeys(t,e,r){const i=fp(t);return je.forEach(e,l=>{const d=mo(l.path);return je.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=fp(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=fp(t);let l=Nn();return i.Wt({range:r,jt:!0},(d,f,g)=>{const b=Cu(d[1]),D=new lt(b);l=l.add(D)}).next(()=>l)}containsKey(t,e){const r=mo(e.path),i=IDBKeyRange.bound([r],[FR(r)],!1,!0);let l=0;return fp(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],g,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Et(t,e){return uv(t).get(e).next(r=>r?bC(r):null)}}function uv(n){return os(n,"targets")}function WF(n){return os(n,"targetGlobal")}function fp(n){return os(n,"targetDocuments")}function jm(n){return fk.apply(this,arguments)}function fk(){return(fk=(0,He.Z)(function*(n){if(n.code!==Oe.FAILED_PRECONDITION||n.message!==NF)throw n;nt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function zF([n,t],[e,r]){const i=on(n,e);return 0===i?on(t,r):i}class $4{constructor(t){this.An=t,this.buffer=new fe(zF),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();zF(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class j4{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;nt("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,He.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Fm(i)?nt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield jm(i)}yield e.Sn(t)}))}}class G4{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return je.resolve(po.A);const r=new $4(e);return this.Dn.forEachTarget(t,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(jF)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jF):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,l,d,f,g,b;const D=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,d=Date.now(),this.nthSequenceNumber(t,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(t,r,e))).next(x=>(l=x,g=Date.now(),this.removeOrphanedDocuments(t,r))).next(x=>(b=Date.now(),Cm()<=tl.in.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-D}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${l} targets in `+(g-f)+`ms\n\tRemoved ${x} documents in `+(b-g)+`ms\nTotal Duration: ${b-D}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:x})))}}class Z4{constructor(t,e){this.db=t,this.garbageCollector=new G4(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return jI(t,r)}removeReference(t,e,r){return jI(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return jI(t,e)}On(t,e){return function(r,i){let l=!1;return qF(r).zt(d=>ZF(r,d,i).next(f=>(f&&(l=!0),je.resolve(!f)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Mn(t,(d,f)=>{if(f<=e){const g=this.On(t,d).next(b=>{if(!b)return l++,r.getEntry(t,d).next(()=>(r.removeEntry(d,Bt.min()),fp(t).delete([0,mo(d.path)])))});i.push(g)}}).next(()=>je.waitFor(i)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return jI(t,e)}Mn(t,e){const r=fp(t);let i,l=po.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:g,sequenceNumber:b})=>{0===d?(l!==po.A&&e(new lt(Cu(i)),l),l=b,i=g):l=po.A}).next(()=>{l!==po.A&&e(new lt(Cu(i)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function jI(n,t){return fp(n).put((r=n.currentSequenceNumber,{targetId:0,path:mo(t.path),sequenceNumber:r}));var r}class YF{constructor(){this.changes=new P(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ur.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?je.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class q4{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Gm(t).put(r)}removeEntry(t,e,r){return Gm(t).delete(function(i,l){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],BI(l),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=ur.newInvalidDocument(e);return Gm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(DC(e))},(i,l)=>{r=this.$n(e,l)}).next(()=>r)}Bn(t,e){let r={size:0,document:ur.newInvalidDocument(e)};return Gm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(DC(e))},(i,l)=>{r={document:this.$n(e,l),size:$I(l)}}).next(()=>r)}getEntries(t,e){let r=$e();return this.Ln(t,e,(i,l)=>{const d=this.$n(i,l);r=r.insert(i,d)}).next(()=>r)}Un(t,e){let r=$e(),i=new q(lt.comparator);return this.Ln(t,e,(l,d)=>{const f=this.$n(l,d);r=r.insert(l,f),i=i.insert(l,$I(d))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return je.resolve();let i=new fe(JF);e.forEach(g=>i=i.add(g));const l=IDBKeyRange.bound(DC(i.first()),DC(i.last())),d=i.getIterator();let f=d.getNext();return Gm(t).Wt({index:"documentKeyIndex",range:l},(g,b,D)=>{const x=lt.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&JF(f,x)<0;)r(f,null),f=d.getNext();f&&f.isEqual(x)&&(r(f,b),f=d.hasNext()?d.getNext():null),f?D.Ut(DC(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),BI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gm(t).qt(IDBKeyRange.bound(i,l,!0)).next(d=>{let f=$e();for(const g of d){const b=this.$n(lt.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(t,e,r,i){let l=$e();const d=QF(e,r),f=QF(e,cc.max());return Gm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(g,b,D)=>{const x=this.$n(lt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);l=l.insert(x.key,x),l.size===i&&D.done()}).next(()=>l)}newChangeBuffer(t){return new W4(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return KF(t).get("remoteDocumentGlobalKey").next(e=>(Zt(!!e),e))}Fn(t,e){return KF(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=vF(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=lt.fromSegments(t.noDocument.path),i=Bm(t.noDocument.readTime);e=ur.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return bt();{const r=lt.fromSegments(t.unknownDocument.path),i=Bm(t.unknownDocument.version);e=ur.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new ai(r[0],r[1]);return Bt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(Bt.min()))return r}return ur.newInvalidDocument(t)}}class W4 extends YF{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new P(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new fe((l,d)=>on(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const f=this.Gn.get(l);if(e.push(this.Kn.removeEntry(t,l,f.readTime)),d.isValidDocument()){const g=OF(this.Kn.M,d);i=i.add(l.path.popLast()),r+=$I(g)-f.size,e.push(this.Kn.addEntry(t,l,g))}else if(r-=f.size,this.trackRemovals){const g=OF(this.Kn.M,d.convertToNoDocument(Bt.min()));e.push(this.Kn.addEntry(t,l,g))}}),i.forEach(l=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.Kn.updateMetadata(t,r)),je.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function KF(n){return os(n,"remoteDocumentGlobal")}function Gm(n){return os(n,"remoteDocumentsV14")}function DC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function QF(n,t){const e=t.documentKey.path.toArray();return[n,BI(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function JF(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let l=0;l<e.length-2&&l<r.length-2;++l)if(i=on(e[l],r[l]),i)return i;return i=on(e.length,r.length),i||(i=on(e[e.length-2],r[r.length-2]),i||on(e[e.length-1],r[r.length-1]))}class z4{constructor(t){this.M=t}kt(t,e,r,i){const l=new VI("createOrUpgrade",e);var f;r<1&&i>=1&&(t.createObjectStore("owner"),(f=t).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TF,{unique:!0}),f.createObjectStore("documentMutations"),XF(t),function(f){f.createObjectStore("remoteDocuments")}(t));let d=je.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(t),XF(t)),d=d.next(()=>function(f){const g=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",b)}(l))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,g){return g.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TF,{unique:!0});const D=g.store("mutations"),x=b.map(F=>D.put(F));return je.waitFor(x)})}(t,l))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(l))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(t),this.jn(l)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(l))),r<8&&i>=8&&(d=d.next(()=>this.zn(t,l))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(l))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const g=f.createObjectStore("documentOverlays",{keyPath:x4});g.createIndex("collectionPathOverlayIndex",T4,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",I4,{unique:!1})}(t)})),r<13&&i>=13&&(d=d.next(()=>function(f){const g=f.createObjectStore("remoteDocumentsV14",{keyPath:p4});g.createIndex("documentKeyIndex",g4),g.createIndex("collectionGroupIndex",m4)}(t)).next(()=>this.Jn(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:w4}).createIndex("sequenceNumberIndex",C4,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:E4}).createIndex("documentKeyIndex",D4,{unique:!1})}(t)})),d}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=$I(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>je.forEach(i,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>je.forEach(f,g=>{Zt(g.userId===l.userId);const b=av(this.M,g);return GF(t,l.userId,b).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Wt((d,f)=>{const g=new Rn(d),b=[0,mo(g)];l.push(e.get(b).next(D=>D?je.resolve():e.put({targetId:0,path:mo(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>je.waitFor(l))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:b4});const r=e.store("collectionParents"),i=new dk,l=d=>{if(i.add(d)){const f=d.lastSegment(),g=d.popLast();return r.put({collectionId:f,parent:mo(g)})}};return e.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const g=new Rn(d);return l(g.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([d,f,g],b)=>{const D=Cu(f);return l(D.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const l=bC(i),d=FF(this.M,l);return e.put(d)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((l,d)=>{const f=e.store("remoteDocumentsV14"),g=(b=d,b.document?new lt(Rn.fromString(b.document.name).popFirst(5)):b.noDocument?lt.fromSegments(b.noDocument.path):b.unknownDocument?lt.fromSegments(b.unknownDocument.path):bt()).path.toArray();var b;const D={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(D))}).next(()=>je.waitFor(i))}}function XF(n){n.createObjectStore("targetDocuments",{keyPath:y4}).createIndex("documentTargetsIndex",v4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_4,{unique:!0}),n.createObjectStore("targetGlobal")}const pk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gk{constructor(t,e,r,i,l,d,f,g,b,D,x=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=l,this.window=d,this.document=f,this.Xn=b,this.Zn=D,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=F=>Promise.resolve(),!gk.vt())throw new Ye(Oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Z4(this,i),this.hs=e+"main",this.M=new PF(g),this.ls=new fc(this.hs,this.ts,new z4(this.M)),this.fs=new H4(this.referenceDelegate,this.M),this.ds=new q4(this.M),this._s=new k4,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(Oe.FAILED_PRECONDITION,pk);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new po(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,He.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,He.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,He.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>GI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(Fm(t))return nt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return nt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return xC(t).get("owner").next(e=>je.resolve(this.bs(e)))}Vs(t){return GI(t).delete(this.clientId)}vs(){var t=this;return(0,He.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=os(r,"clientMetadata");return i.qt().next(l=>{const d=t.Ds(l,18e5),f=l.filter(g=>-1===d.indexOf(g));return je.forEach(f,g=>i.delete(g.clientId)).next(()=>f)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?je.resolve(!0):xC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Ye(Oe.FAILED_PRECONDITION,pk);return!1}}return!(!this.networkEnabled||!this.inForeground)||GI(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&nt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,He.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new kF(e,po.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>GI(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return hk.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new U4(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return uk.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){nt("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",l=14===(d=this.ts)?A4:13===d?AF:12===d?S4:11===d?SF:void bt();var d;let f;return this.ls.runTransaction(t,i,l,g=>(f=new kF(g,this.es?this.es.next():po.A),"readwrite-primary"===e?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw Xr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ye(Oe.FAILED_PRECONDITION,NF);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(g=>(f.raiseOnCommittedEvent(),g))}$s(t){return xC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ye(Oe.FAILED_PRECONDITION,pk)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xC(t).put("owner",e)}static vt(){return fc.vt()}Rs(t){const e=xC(t);return e.get("owner").next(r=>this.bs(r)?(nt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):je.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(Xr(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Q.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return nt("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Xr("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function xC(n){return os(n,"owner")}function GI(n){return os(n,"clientMetadata")}function mk(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class Y4{constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const l of e)l.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return lt.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):Xy(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new lt(e)).next(r=>{let i=Ft();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let l=Ft();return this.indexManager.getCollectionParents(t,i).next(d=>je.forEach(d,f=>{const g=(b=e,D=f.child(i),new Ea(D,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,D;return this.zs(t,g,r).next(b=>{b.forEach((D,x)=>{l=l.insert(D,x)})})}).next(()=>l))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(l=>(i=l,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(l=>{for(const d of l)for(const f of d.mutations){const g=f.key;let b=i.get(g);null==b&&(b=ur.newInvalidDocument(g),i=i.insert(g,b)),FI(f,b,d.localWriteTime),b.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((l,d)=>{ip(e,d)||(i=i.remove(l))}),i))}}class _k{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=Nn(),i=Nn();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new _k(t,e.fromCache,r,i)}}class eL{Xs(t){this.Zs=t}Qs(t,e,r,i){return 0===(l=e).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Bt.min())?this.ti(t,e):this.Zs.Ks(t,i).next(l=>{const d=this.ei(e,l);return(Qy(e)||tp(e))&&this.ni(e.limitType,d,i,r)?this.ti(t,e):(Cm()<=tl.in.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yu(e)),this.Zs.Qs(t,e,sC(r,-1)).next(f=>(d.forEach(g=>{f=f.insert(g.key,g)}),f)))});var l}ei(t,e){let r=new fe(MI(t));return e.forEach((i,l)=>{ip(t,l)&&(r=r.add(l))}),r}ni(t,e,r,i){if(r.size!==e.size)return!0;const l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ti(t,e){return Cm()<=tl.in.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",yu(e)),this.Zs.Qs(t,e,cc.min())}}class K4{constructor(t,e,r,i){this.persistence=t,this.si=e,this.M=i,this.ii=new q(on),this.ri=new P(l=>fh(l),km),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new Y4(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function tL(n,t,e,r){return new K4(n,t,e,r)}function nL(n,t){return yk.apply(this,arguments)}function yk(){return(yk=(0,He.Z)(function*(n,t){const e=dt(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(l=>(i=l,e.ai(t),e.Bs.getAllMutationBatches(r))).next(l=>{const d=[],f=[];let g=Nn();for(const b of i){d.push(b.batchId);for(const D of b.mutations)g=g.add(D.key)}for(const b of l){f.push(b.batchId);for(const D of b.mutations)g=g.add(D.key)}return e.ci.Ks(r,g).next(b=>({hi:b,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function Q4(n,t){const e=dt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),l=e.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,g,b){const D=g.batch,x=D.keys();let F=je.resolve();return x.forEach($=>{F=F.next(()=>b.getEntry(f,$)).next(re=>{const ge=g.docVersions.get($);Zt(null!==ge),re.version.compareTo(ge)<0&&(D.applyToRemoteDocument(re,g),re.isValidDocument()&&(re.setReadTime(g.commitVersion),b.addEntry(re)))})}),F.next(()=>d.Bs.removeMutationBatch(f,D))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.ci.Ks(r,i))})}function rL(n){const t=dt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function J4(n,t){const e=dt(n),r=t.snapshotVersion;let i=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=e.ui.newChangeBuffer({trackRemovals:!0});i=e.ii;const f=[];t.targetChanges.forEach((b,D)=>{const x=i.get(D);if(!x)return;f.push(e.fs.removeMatchingKeys(l,b.removedDocuments,D).next(()=>e.fs.addMatchingKeys(l,b.addedDocuments,D)));let F=x.withSequenceNumber(l.currentSequenceNumber);var $,re,ge;t.targetMismatches.has(D)?F=F.withResumeToken(Mi.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):b.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(b.resumeToken,r)),i=i.insert(D,F),re=F,ge=b,(0===($=x).resumeToken.approximateByteSize()||re.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ge.addedDocuments.size+ge.modifiedDocuments.size+ge.removedDocuments.size>0)&&f.push(e.fs.updateTargetData(l,F))});let g=$e();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,b))}),f.push(iL(l,d,t.documentUpdates).next(b=>{g=b})),!r.isEqual(Bt.min())){const b=e.fs.getLastRemoteSnapshotVersion(l).next(D=>e.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(b)}return je.waitFor(f).next(()=>d.apply(l)).next(()=>e.ci.Gs(l,g)).next(()=>g)}).then(l=>(e.ii=i,l))}function iL(n,t,e){let r=Nn();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let l=$e();return e.forEach((d,f)=>{const g=i.get(d);f.isNoDocument()&&f.version.isEqual(Bt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!g.isValidDocument()||f.version.compareTo(g.version)>0||0===f.version.compareTo(g.version)&&g.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):nt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",f.version)}),l})}function X4(n,t){const e=dt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function dv(n,t){const e=dt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(l=>l?(i=l,je.resolve(i)):e.fs.allocateTargetId(r).next(d=>(i=new up(t,d,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ii=e.ii.insert(r.targetId,r),e.ri.set(t,r.targetId)),r})}function hv(n,t,e){return vk.apply(this,arguments)}function vk(){return(vk=(0,He.Z)(function*(n,t,e){const r=dt(n),i=r.ii.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Fm(d))throw d;nt("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function ZI(n,t,e){const r=dt(n);let i=Bt.min(),l=Nn();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,g,b){const D=dt(f),x=D.ri.get(b);return void 0!==x?je.resolve(D.ii.get(x)):D.fs.getTargetData(g,b)}(r,d,Yo(t)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(g=>{l=g})}).next(()=>r.si.Qs(d,t,e?i:Bt.min(),e?l:Nn())).next(f=>(aL(r,ph(t),f),{documents:f,li:l})))}function sL(n,t){const e=dt(n),r=dt(e.fs),i=e.ii.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,t).next(d=>d?d.target:null))}function oL(n,t){const e=dt(n),r=e.oi.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.ui.getAllFromCollectionGroup(i,t,sC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aL(e,t,i),i))}function aL(n,t,e){let r=Bt.min();e.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(t,r)}function bk(){return(bk=(0,He.Z)(function*(n,t,e,r){const i=dt(n);let l=Nn(),d=$e();for(const b of e){const D=t.fi(b.metadata.name);b.document&&(l=l.add(D));const x=t.di(b);x.setReadTime(t._i(b.metadata.readTime)),d=d.insert(D,x)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),g=yield dv(i,(b=r,Yo(ep(Rn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>iL(b,f,d).next(D=>(f.apply(b),D)).next(D=>i.fs.removeMatchingKeysForTargetId(b,g.targetId).next(()=>i.fs.addMatchingKeys(b,l,g.targetId)).next(()=>i.ci.Gs(b,D)).next(()=>D)))})).apply(this,arguments)}function t8(n,t){return wk.apply(this,arguments)}function wk(){return(wk=(0,He.Z)(function*(n,t,e=Nn()){const r=yield dv(n,Yo(lk(t.bundledQuery))),i=dt(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const d=ss(t.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(l,t);const f=r.withResumeToken(Mi.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(l,f).next(()=>i.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.fs.addMatchingKeys(l,e,r.targetId)).next(()=>i._s.saveNamedQuery(l,t))})})).apply(this,arguments)}class n8{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return je.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var r;return this.wi.set(e.id,{id:(r=e).id,version:r.version,createTime:ss(r.createTime)}),je.resolve()}getNamedQuery(t,e){return je.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(r=e).name,query:lk(r.bundledQuery),readTime:ss(r.readTime)}),je.resolve();var r}}class r8{constructor(){this.overlays=new q(lt.comparator),this.gi=new Map}getOverlay(t,e){return je.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,l)=>{this.Xt(t,e,l)}),je.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),je.resolve()}getOverlaysForCollection(t,e,r){const i=hn(),l=e.length+1,d=new lt(e.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,b=g.getKey();if(!e.isPrefixOf(b.path))break;b.path.length===l&&g.largestBatchId>r&&i.set(g.getKey(),g)}return je.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let l=new q((b,D)=>b-D);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===e&&b.largestBatchId>r){let D=l.get(b.largestBatchId);null===D&&(D=hn(),l=l.insert(b.largestBatchId,D)),D.set(b.getKey(),b)}}const f=hn(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((b,D)=>f.set(b,D)),!(f.size()>=i)););return je.resolve(f)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new ak(e,r));let l=this.gi.get(e);void 0===l&&(l=Nn(),this.gi.set(e,l)),this.gi.set(e,l.add(r.key))}}class Ck{constructor(){this.yi=new fe(as.pi),this.Ii=new fe(as.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const r=new as(t,e);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Ai(new as(t,e))}Ri(t,e){t.forEach(r=>this.removeReference(r,e))}Pi(t){const e=new lt(new Rn([])),r=new as(e,t),i=new as(e,t+1),l=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new lt(new Rn([])),r=new as(e,t),i=new as(e,t+1);let l=Nn();return this.Ii.forEachInRange([r,i],d=>{l=l.add(d.key)}),l}containsKey(t){const e=new as(t,0),r=this.yi.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class as{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return lt.comparator(t.key,e.key)||on(t.vi,e.vi)}static Ti(t,e){return on(t.vi,e.vi)||lt.comparator(t.key,e.key)}}class i8{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new fe(as.pi)}checkEmpty(t){return je.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const l=this.Si;this.Si++;const d=new sk(l,e,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new as(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return je.resolve(d)}lookupMutationBatch(t,e){return je.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.xi(e+1),l=i<0?0:i;return je.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return je.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new as(e,0),i=new as(e,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);l.push(f)}),je.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new fe(on);return e.forEach(i=>{const l=new as(i,0),d=new as(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],f=>{r=r.add(f.vi)})}),je.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let l=r;lt.isDocumentKey(l)||(l=l.child(""));const d=new as(new lt(l),0);let f=new fe(on);return this.Di.forEachWhile(g=>{const b=g.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(g.vi)),!0)},d),je.resolve(this.Ni(f))}Ni(t){const e=[];return t.forEach(r=>{const i=this.Ci(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Zt(0===this.ki(e.batchId,"removed")),this.Bs.shift();let r=this.Di;return je.forEach(e.mutations,i=>{const l=new as(i.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,e){const r=new as(e,0),i=this.Di.firstAfterOrEqual(r);return je.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return je.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class s8{constructor(t){this.Mi=t,this.docs=new q(lt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),l=i?i.size:0,d=this.Mi(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return je.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(e))}getEntries(t,e){let r=$e();return e.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():ur.newInvalidDocument(i))}),je.resolve(r)}getAllFromCollection(t,e,r){let i=$e();const l=new lt(e.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!e.isPrefixOf(f.path))break;f.path.length>e.length+1||DI($R(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return je.resolve(i)}getAllFromCollectionGroup(t,e,r,i){bt()}Oi(t,e){return je.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new o8(this)}getSize(t){return je.resolve(this.size)}}class o8 extends YF{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),je.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class a8{constructor(t){this.persistence=t,this.Fi=new P(e=>fh(e),km),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Ck,this.targetCount=0,this.Li=$m.gn()}forEachTarget(t,e){return this.Fi.forEach((r,i)=>e(i)),je.resolve()}getLastRemoteSnapshotVersion(t){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return je.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$i&&(this.$i=e),je.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new $m(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,je.resolve()}updateTargetData(t,e){return this.Tn(e),je.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,je.resolve()}removeTargets(t,e,r){let i=0;const l=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=e&&null===r.get(f.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),i++)}),je.waitFor(l).next(()=>i)}getTargetCount(t){return je.resolve(this.targetCount)}getTargetData(t,e){const r=this.Fi.get(e)||null;return je.resolve(r)}addMatchingKeys(t,e,r){return this.Bi.Ei(e,r),je.resolve()}removeMatchingKeys(t,e,r){this.Bi.Ri(e,r);const i=this.persistence.referenceDelegate,l=[];return i&&e.forEach(d=>{l.push(i.markPotentiallyOrphaned(t,d))}),je.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),je.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Bi.Vi(e);return je.resolve(r)}containsKey(t,e){return je.resolve(this.Bi.containsKey(e))}}class l8{constructor(t,e){this.Ui={},this.overlays={},this.es=new po(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new a8(this),this.indexManager=new B4,this.ds=new s8(r=>this.referenceDelegate.qi(r)),this.M=new PF(e),this._s=new n8(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new r8,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Ui[t.toKey()];return r||(r=new i8(e,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){nt("MemoryPersistence","Starting transaction:",t);const i=new c8(this.es.next());return this.referenceDelegate.Ki(),r(i).next(l=>this.referenceDelegate.Gi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Qi(t,e){return je.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,e)))}}class c8 extends MF{constructor(t){super(),this.currentSequenceNumber=t}}class Ek{constructor(t){this.persistence=t,this.ji=new Ck,this.Wi=null}static zi(t){return new Ek(t)}get Hi(){if(this.Wi)return this.Wi;throw bt()}addReference(t,e,r){return this.ji.addReference(r,e),this.Hi.delete(r.toString()),je.resolve()}removeReference(t,e,r){return this.ji.removeReference(r,e),this.Hi.add(r.toString()),je.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),je.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Hi,r=>{const i=lt.fromPath(r);return this.Ji(t,i).next(l=>{l||e.removeEntry(i,Bt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(r=>{r?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return je.or([()=>je.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function lL(n,t){return`firestore_clients_${n}_${t}`}function cL(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Dk(n,t){return`firestore_targets_${n}_${t}`}class qI{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Yi(t,e,r){const i=JSON.parse(r);let l,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(l=new Ye(i.error.code,i.error.message))),d?new qI(t,e,i.state,l):(Xr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class TC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Yi(t,e){const r=JSON.parse(e);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Ye(r.error.code,r.error.message))),l?new TC(t,r.state,i):(Xr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class WI{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=hc();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=vI(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return i?new WI(t,l):(Xr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class xk{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new xk(e.clientId,e.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Tk{constructor(){this.activeTargetIds=hc()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ik{constructor(t,e,r,i,l){this.window=t,this.Yn=e,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new q(on),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=lL(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Tk),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,He.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.er)continue;const l=t.getItem(lL(t.persistenceKey,i));if(l){const d=WI.Yi(i,l);d&&(t.ir=t.ir.insert(d.clientId,d))}}t.wr();const r=t.storage.getItem(t.dr);if(r){const i=t.mr(r);i&&t.gr(i)}for(const i of t.rr)t.sr(i);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,r){this.pr(t,e,r),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(Dk(this.persistenceKey,t));if(r){const i=TC.Yi(t,r);i&&(e=i.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Dk(this.persistenceKey,t))}updateQueryState(t,e,r){this.Er(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ir(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return nt("SharedClientState","READ",t,e),e}setItem(t,e){nt("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){nt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(nt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,He.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Pr(r.key);return e.br(i,null)}{const i=e.Vr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Sr(i)}}else if(e.lr.test(r.key)){if(null!==r.newValue){const i=e.Dr(r.key,r.newValue);if(i)return e.Cr(i)}}else if(r.key===e.dr){if(null!==r.newValue){const i=e.mr(r.newValue);if(i)return e.gr(i)}}else if(r.key===e.ar){const i=function(l){let d=po.A;if(null!=l)try{const f=JSON.parse(l);Zt("number"==typeof f),d=f}catch(f){Xr("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==po.A&&e.sequenceNumberHandler(i)}else if(r.key===e._r){const i=e.Nr(r.newValue);yield Promise.all(i.map(l=>e.syncEngine.kr(l)))}}else e.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,r){const i=new qI(this.currentUser,t,e,r),l=cL(this.persistenceKey,this.currentUser,t);this.setItem(l,i.Xi())}Ir(t){const e=cL(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,r){const i=Dk(this.persistenceKey,t),l=new TC(t,e,r);this.setItem(i,l.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const r=this.Pr(t);return WI.Yi(r,e)}vr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return qI.Yi(new is(void 0!==r[2]?r[2]:null),i,e)}Dr(t,e){const r=this.lr.exec(t),i=Number(r[1]);return TC.Yi(i,e)}mr(t){return xk.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,He.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);nt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const r=e?this.ir.insert(t,e):this.ir.remove(t),i=this.yr(this.ir),l=this.yr(r),d=[],f=[];return l.forEach(g=>{i.has(g)||d.push(g)}),i.forEach(g=>{l.has(g)||f.push(g)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=hc();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class uL{constructor(){this.$r=new Tk,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,r){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new Tk,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class u8{Lr(t){}shutdown(){}}class dL{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const d8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class h8{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class f8 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,r,i,l){const d=this.uo(t,e);nt("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,l),this.co(t,d,f,r).then(g=>(nt("RestConnection","Received: ",g),g),g=>{throw Wf("RestConnection",`${t} failed with error: `,g,"url: ",d,"request:",r),g})}ho(t,e,r,i,l){return this.oo(t,e,r,i,l)}ao(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+wm,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,l)=>t[l]=i),r&&r.headers.forEach((i,l)=>t[l]=i)}uo(t,e){return`${this.io}/v1/${e}:${d8[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((l,d)=>{const f=new RR;f.listenOnce(fI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case hI.NO_ERROR:const b=f.getResponseJson();nt("Connection","XHR received:",JSON.stringify(b)),l(b);break;case hI.TIMEOUT:nt("Connection",'RPC "'+t+'" timed out'),d(new Ye(Oe.DEADLINE_EXCEEDED,"Request time out"));break;case hI.HTTP_ERROR:const D=f.getStatus();if(nt("Connection",'RPC "'+t+'" failed with status:',D,"response text:",f.getResponseText()),D>0){const x=f.getResponseJson().error;if(x&&x.status&&x.message){const F=function($){const re=$.toLowerCase().replace(/_/g,"-");return Object.values(Oe).indexOf(re)>=0?re:Oe.UNKNOWN}(x.status);d(new Ye(F,x.message))}else d(new Ye(Oe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ye(Oe.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{nt("Connection",'RPC "'+t+'" completed.')}});const g=JSON.stringify(i);f.send(e,"POST",g,r,15)})}lo(t,e,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=rF(),d=iF(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new MR({})),this.ao(f.initMessageHeaders,e,r),(0,Q.uI)()||(0,Q.b$)()||(0,Q.d)()||(0,Q.w1)()||(0,Q.Mn)()||(0,Q.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");nt("Connection","Creating WebChannel: "+g,f);const b=l.createWebChannel(g,f);let D=!1,x=!1;const F=new h8({Wr:re=>{x?nt("Connection","Not sending because WebChannel is closed:",re):(D||(nt("Connection","Opening WebChannel transport."),b.open(),D=!0),nt("Connection","WebChannel sending:",re),b.send(re))},zr:()=>b.close()}),$=(re,ge,Me)=>{re.listen(ge,Qe=>{try{Me(Qe)}catch(st){setTimeout(()=>{throw st},0)}})};return $(b,Zy.EventType.OPEN,()=>{x||nt("Connection","WebChannel transport opened.")}),$(b,Zy.EventType.CLOSE,()=>{x||(x=!0,nt("Connection","WebChannel transport closed"),F.no())}),$(b,Zy.EventType.ERROR,re=>{x||(x=!0,Wf("Connection","WebChannel transport errored:",re),F.no(new Ye(Oe.UNAVAILABLE,"The operation could not be completed")))}),$(b,Zy.EventType.MESSAGE,re=>{var ge;if(!x){const Me=re.data[0];Zt(!!Me);const Qe=Me,st=Qe.error||(null===(ge=Qe[0])||void 0===ge?void 0:ge.error);if(st){nt("Connection","WebChannel received error:",st);const pt=st.status;let mt=function(gn){const Wr=_[gn];if(void 0!==Wr)return I(Wr)}(pt),Ut=st.message;void 0===mt&&(mt=Oe.INTERNAL,Ut="Unknown error status: "+pt+" with message "+st.message),x=!0,F.no(new Ye(mt,Ut)),b.close()}else nt("Connection","WebChannel received:",Me),F.so(Me)}}),$(d,pI.STAT_EVENT,re=>{re.stat===gI.PROXY?nt("Connection","Detected buffering proxy"):re.stat===gI.NOPROXY&&nt("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.eo()},0),F}}function hL(){return"undefined"!=typeof window?window:null}function zI(){return"undefined"!=typeof document?document:null}function IC(n){return new t4(n,!0)}class Sk{constructor(t,e,r=1e3,i=1.5,l=6e4){this.Yn=t,this.timerId=e,this.fo=r,this._o=i,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,e-r);i>0&&nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class fL{constructor(t,e,r,i,l,d,f,g){this.Yn=t,this.Ro=r,this.Po=i,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Sk(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,He.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,He.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var r=this;return(0,He.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==t?r.Do.reset():e&&e.code===Oe.RESOURCE_EXHAUSTED?(Xr(e.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):e&&e.code===Oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===e&&this.qo(r,i)},r=>{t(()=>{const i=new Ye(Oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,e){const r=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var t=this;this.state=5,this.Do.To((0,He.Z)(function*(){t.state=0,t.start()}))}Ko(t){return nt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p8 extends fL{constructor(t,e,r,i,l,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,d),this.M=l}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(g=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:bt(),i=t.targetChange.targetIds||[],l=function(g,b){return g.N?(Zt(void 0===b||"string"==typeof b),Mi.fromBase64String(b||"")):(Zt(void 0===b||b instanceof Uint8Array),Mi.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),d=t.targetChange.cause,f=d&&function(g){const b=void 0===g.code?Oe.UNKNOWN:I(g.code);return new Ye(b,g.message||"")}(d);e=new rv(r,i,l,f||null)}else if("documentChange"in t){const r=t.documentChange,i=wu(n,r.document.name),l=ss(r.document.updateTime),d=new qi({mapValue:{fields:r.document.fields}}),f=ur.newFoundDocument(i,l,d);e=new cp(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const r=t.documentDelete,i=wu(n,r.document),l=r.readTime?ss(r.readTime):Bt.min(),d=ur.newNoDocument(i,l);e=new cp([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){const r=t.documentRemove,i=wu(n,r.document);e=new cp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return bt();{const r=t.filter,l=new p(r.count||0);e=new nv(r.targetId,l)}}var g;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return Bt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Bt.min():l.readTime?ss(l.readTime):Bt.min()}(t);return this.listener.Qo(e,r)}jo(t){const e={};e.database=_C(this.M),e.addTarget=function(i,l){let d;const f=l.target;return d=Ri(f)?{documents:bF(i,f)}:{query:wF(i,f)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=pF(i,l.resumeToken):l.snapshotVersion.compareTo(Bt.min())>0&&(d.readTime=gC(i,l.snapshotVersion.toTimestamp())),d}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Fo(e)}Wo(t){const e={};e.database=_C(this.M),e.removeTarget=t,this.Fo(e)}}class g8 extends fL{constructor(t,e,r,i,l,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(Zt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(n,t){return n&&n.length>0?(Zt(void 0!==t),n.map(e=>function(r,i){let l=ss(r.updateTime?r.updateTime:i);return l.isEqual(Bt.min())&&(l=ss(i)),new QR(l,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ss(t.commitTime);return this.listener.Yo(r,e)}return Zt(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=_C(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>yC(this.M,r))};this.Fo(e)}}class m8 extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Ye(Oe.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.oo(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Oe.UNKNOWN,i.toString())})}ho(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ho(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Oe.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class _8{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Xr(e),this.iu=!1):nt("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class y8{constructor(t,e,r,i,l){var d=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(f=>{r.enqueueAndForget((0,He.Z)(function*(){var g;pp(d)&&(nt("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,He.Z)(function*(b){const D=dt(b);D.fu.add(4),yield fv(D),D.wu.set("Unknown"),D.fu.delete(4),yield SC(D)}),function(b){return g.apply(this,arguments)})(d))}))}),this.wu=new _8(r,i)}}function SC(n){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,He.Z)(function*(n){if(pp(n))for(const t of n.du)yield t(!0)})).apply(this,arguments)}function fv(n){return Nk.apply(this,arguments)}function Nk(){return(Nk=(0,He.Z)(function*(n){for(const t of n.du)yield t(!1)})).apply(this,arguments)}function YI(n,t){const e=dt(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),kk(e)?Rk(e):gv(e).xo()&&Mk(e,t))}function AC(n,t){const e=dt(n),r=gv(e);e.lu.delete(t),r.xo()&&pL(e,t),0===e.lu.size&&(r.xo()?r.Mo():pp(e)&&e.wu.set("Unknown"))}function Mk(n,t){n.mu.Z(t.targetId),gv(n).jo(t)}function pL(n,t){n.mu.Z(t),gv(n).Wo(t)}function Rk(n){n.mu=new J6({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),gv(n).start(),n.wu.ru()}function kk(n){return pp(n)&&!gv(n).Co()&&n.lu.size>0}function pp(n){return 0===dt(n).fu.size}function gL(n){n.mu=void 0}function v8(n){return Pk.apply(this,arguments)}function Pk(){return(Pk=(0,He.Z)(function*(n){n.lu.forEach((t,e)=>{Mk(n,t)})})).apply(this,arguments)}function b8(n,t){return Ok.apply(this,arguments)}function Ok(){return(Ok=(0,He.Z)(function*(n,t){gL(n),kk(n)?(n.wu.au(t),Rk(n)):n.wu.set("Unknown")})).apply(this,arguments)}function w8(n,t,e){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,He.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof rv&&2===t.state&&t.cause)try{yield(r=(0,He.Z)(function*(i,l){const d=l.cause;for(const f of l.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,t)}catch(r){nt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield KI(n,r)}else if(t instanceof cp?n.mu.ut(t):t instanceof nv?n.mu._t(t):n.mu.ht(t),!e.isEqual(Bt.min()))try{const r=yield rL(n.localStore);e.compareTo(r)>=0&&(yield function(i,l){const d=i.mu.yt(l);return d.targetChanges.forEach((f,g)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(g);b&&i.lu.set(g,b.withResumeToken(f.resumeToken,l))}}),d.targetMismatches.forEach(f=>{const g=i.lu.get(f);if(!g)return;i.lu.set(f,g.withResumeToken(Mi.EMPTY_BYTE_STRING,g.snapshotVersion)),pL(i,f);const b=new up(g.target,f,1,g.sequenceNumber);Mk(i,b)}),i.remoteSyncer.applyRemoteEvent(d)}(n,e))}catch(r){nt("RemoteStore","Failed to raise snapshot:",r),yield KI(n,r)}var r})).apply(this,arguments)}function KI(n,t,e){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,He.Z)(function*(n,t,e){if(!Fm(t))throw t;n.fu.add(1),yield fv(n),n.wu.set("Offline"),e||(e=()=>rL(n.localStore)),n.asyncQueue.enqueueRetryable((0,He.Z)(function*(){nt("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield SC(n)}))})).apply(this,arguments)}function mL(n,t){return t().catch(e=>KI(n,e,t))}function pv(n){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,He.Z)(function*(n){const t=dt(n),e=gp(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;C8(t);)try{const i=yield X4(t.localStore,r);if(null===i){0===t.hu.length&&e.Mo();break}r=i.batchId,E8(t,i)}catch(i){yield KI(t,i)}_L(t)&&yL(t)})).apply(this,arguments)}function C8(n){return pp(n)&&n.hu.length<10}function E8(n,t){n.hu.push(t);const e=gp(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function _L(n){return pp(n)&&!gp(n).Co()&&n.hu.length>0}function yL(n){gp(n).start()}function D8(n){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,He.Z)(function*(n){gp(n).Zo()})).apply(this,arguments)}function x8(n){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,He.Z)(function*(n){const t=gp(n);for(const e of n.hu)t.Jo(e.mutations)})).apply(this,arguments)}function T8(n,t,e){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,He.Z)(function*(n,t,e){const r=n.hu.shift(),i=ok.from(r,t,e);yield mL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield pv(n)})).apply(this,arguments)}function I8(n,t){return $k.apply(this,arguments)}function $k(){return($k=(0,He.Z)(function*(n,t){var e;t&&gp(n).Ho&&(yield(e=(0,He.Z)(function*(r,i){if(C(l=i.code)&&l!==Oe.ABORTED){const d=r.hu.shift();gp(r).ko(),yield mL(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield pv(r)}var l}),function(r,i){return e.apply(this,arguments)})(n,t)),_L(n)&&yL(n)})).apply(this,arguments)}function vL(n,t){return jk.apply(this,arguments)}function jk(){return(jk=(0,He.Z)(function*(n,t){const e=dt(n);e.asyncQueue.verifyOperationInProgress(),nt("RemoteStore","RemoteStore received new credentials");const r=pp(e);e.fu.add(3),yield fv(e),r&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield SC(e)})).apply(this,arguments)}function Gk(n,t){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,He.Z)(function*(n,t){const e=dt(n);t?(e.fu.delete(2),yield SC(e)):t||(e.fu.add(2),yield fv(e),e.wu.set("Unknown"))})).apply(this,arguments)}function gv(n){return n.gu||(n.gu=function(t,e,r){const i=dt(t);return i.eu(),new p8(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:v8.bind(null,n),Yr:b8.bind(null,n),Qo:w8.bind(null,n)}),n.du.push(function(){var t=(0,He.Z)(function*(e){e?(n.gu.ko(),kk(n)?Rk(n):n.wu.set("Unknown")):(yield n.gu.stop(),gL(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function gp(n){return n.yu||(n.yu=function(t,e,r){const i=dt(t);return i.eu(),new g8(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:D8.bind(null,n),Yr:I8.bind(null,n),Xo:x8.bind(null,n),Yo:T8.bind(null,n)}),n.du.push(function(){var t=(0,He.Z)(function*(e){e?(n.yu.ko(),yield pv(n)):(yield n.yu.stop(),n.hu.length>0&&(nt("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class qk{constructor(t,e,r,i,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(t,e,r,i,l){const d=Date.now()+r,f=new qk(t,e,d,i,l);return f.start(r),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(Oe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mv(n,t){if(Xr("AsyncQueue",`${t}: ${n}`),Fm(n))return new Ye(Oe.UNAVAILABLE,`${t}: ${n}`);throw n}class _v{constructor(t){this.comparator=t?(e,r)=>t(e,r)||lt.comparator(e.key,r.key):(e,r)=>lt.comparator(e.key,r.key),this.keyedMap=Ft(),this.sortedSet=new q(this.comparator)}static emptySet(t){return new _v(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof _v)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new _v;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class bL{constructor(){this.pu=new q(lt.comparator)}track(t){const e=t.doc.key,r=this.pu.get(e);r?0!==t.type&&3===r.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==r.type?this.pu=this.pu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.pu=this.pu.remove(e):1===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):bt():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,r)=>{t.push(r)}),t}}class yv{constructor(t,e,r,i,l,d,f,g){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g}static fromInitialDocuments(t,e,r,i){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new yv(t,e,_v.emptySet(e),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&go(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class S8{constructor(){this.Tu=void 0,this.listeners=[]}}class A8{constructor(){this.queries=new P(t=>rp(t),go),this.onlineState="Unknown",this.Eu=new Set}}function Wk(n,t){return zk.apply(this,arguments)}function zk(){return(zk=(0,He.Z)(function*(n,t){const e=dt(n),r=t.query;let i=!1,l=e.queries.get(r);if(l||(i=!0,l=new S8),i)try{l.Tu=yield e.onListen(r)}catch(d){const f=mv(d,`Initialization of query '${yu(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,l),l.listeners.push(t),t.Au(e.onlineState),l.Tu&&t.Ru(l.Tu)&&Qk(e)})).apply(this,arguments)}function Yk(n,t){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,He.Z)(function*(n,t){const e=dt(n),r=t.query;let i=!1;const l=e.queries.get(r);if(l){const d=l.listeners.indexOf(t);d>=0&&(l.listeners.splice(d,1),i=0===l.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function N8(n,t){const e=dt(n);let r=!1;for(const i of t){const d=e.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&Qk(e)}function M8(n,t,e){const r=dt(n),i=r.queries.get(t);if(i)for(const l of i.listeners)l.onError(e);r.queries.delete(t)}function Qk(n){n.Eu.forEach(t=>{t.next()})}class Jk{constructor(t,e,r){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new yv(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=yv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class R8{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class wL{constructor(t){this.M=t}fi(t){return wu(this.M,t)}di(t){return t.metadata.exists?vF(this.M,t.document,!1):ur.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return ss(t)}}class k8{constructor(t,e,r){this.Nu=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CL(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=Rn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,r=new wL(this.M);for(const i of t)if(i.metadata.queries){const l=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(e.get(d)||Nn()).add(l);e.set(d,f)}}return e}complete(){var t=this;return(0,He.Z)(function*(){const e=yield function(n,t,e,r){return bk.apply(this,arguments)}(t.localStore,new wL(t.M),t.documents,t.Nu.id),r=t.Mu(t.documents);for(const i of t.queries)yield t8(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function CL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class EL{constructor(t){this.key=t}}class DL{constructor(t){this.key=t}}class xL{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=Nn(),this.mutatedKeys=Nn(),this.Uu=MI(t),this.qu=new _v(this.Uu)}get Ku(){return this.$u}Gu(t,e){const r=e?e.Qu:new bL,i=e?e.qu:this.qu;let l=e?e.mutatedKeys:this.mutatedKeys,d=i,f=!1;const g=Qy(this.query)&&i.size===this.query.limit?i.last():null,b=tp(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((D,x)=>{const F=i.get(D),$=ip(this.query,x)?x:null,re=!!F&&this.mutatedKeys.has(F.key),ge=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let Me=!1;F&&$?F.data.isEqual($.data)?re!==ge&&(r.track({type:3,doc:$}),Me=!0):this.ju(F,$)||(r.track({type:2,doc:$}),Me=!0,(g&&this.Uu($,g)>0||b&&this.Uu($,b)<0)&&(f=!0)):!F&&$?(r.track({type:0,doc:$}),Me=!0):F&&!$&&(r.track({type:1,doc:F}),Me=!0,(g||b)&&(f=!0)),Me&&($?(d=d.add($),l=ge?l.add(D):l.delete(D)):(d=d.delete(D),l=l.delete(D)))}),Qy(this.query)||tp(this.query))for(;d.size>this.query.limit;){const D=Qy(this.query)?d.last():d.first();d=d.delete(D.key),l=l.delete(D.key),r.track({type:1,doc:D})}return{qu:d,Qu:r,ni:f,mutatedKeys:l}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const l=t.Qu.Iu();l.sort((b,D)=>function(x,F){const $=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return $(x)-$(F)}(b.type,D.type)||this.Uu(b.doc,D.doc)),this.Wu(r);const d=e?this.zu():[],f=0===this.Lu.size&&this.current?1:0,g=f!==this.Bu;return this.Bu=f,0!==l.length||g?{snapshot:new yv(this.query,t.qu,i,l,t.mutatedKeys,0===f,g,!1),Hu:d}:{Hu:d}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new bL,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=Nn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const e=[];return t.forEach(r=>{this.Lu.has(r)||e.push(new DL(r))}),this.Lu.forEach(r=>{t.has(r)||e.push(new EL(r))}),e}Yu(t){this.$u=t.li,this.Lu=Nn();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return yv.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class P8{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class O8{constructor(t){this.key=t,this.Zu=!1}}class F8{constructor(t,e,r,i,l,d){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new P(f=>rp(f),go),this.na=new Map,this.sa=new Set,this.ia=new q(lt.comparator),this.ra=new Map,this.oa=new Ck,this.ua={},this.aa=new Map,this.ca=$m.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function L8(n,t){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,He.Z)(function*(n,t){const e=CP(n);let r,i;const l=e.ea.get(t);if(l)r=l.targetId,e.sharedClientState.addLocalQueryTarget(r),i=l.view.Xu();else{const d=yield dv(e.localStore,Yo(t));e.isPrimaryClient&&YI(e.remoteStore,d);const f=e.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield eP(e,t,r,"current"===f)}return i})).apply(this,arguments)}function eP(n,t,e,r){return tP.apply(this,arguments)}function tP(){return(tP=(0,He.Z)(function*(n,t,e,r){n.la=(D,x,F)=>{return($=(0,He.Z)(function*(re,ge,Me,Qe){let st=ge.view.Gu(Me);st.ni&&(st=yield ZI(re.localStore,ge.query,!1).then(({documents:Ut})=>ge.view.Gu(Ut,st)));const pt=Qe&&Qe.targetChanges.get(ge.targetId),mt=ge.view.applyChanges(st,re.isPrimaryClient,pt);return dP(re,ge.targetId,mt.Hu),mt.snapshot}),function(re,ge,Me,Qe){return $.apply(this,arguments)})(n,D,x,F);var $};const i=yield ZI(n.localStore,t,!0),l=new xL(t,i.li),d=l.Gu(i.documents),f=gh.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),g=l.applyChanges(d,n.isPrimaryClient,f);dP(n,e,g.Hu);const b=new P8(t,e,l);return n.ea.set(t,b),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),g.snapshot})).apply(this,arguments)}function V8(n,t){return nP.apply(this,arguments)}function nP(){return(nP=(0,He.Z)(function*(n,t){const e=dt(n),r=e.ea.get(t),i=e.na.get(r.targetId);if(i.length>1)return e.na.set(r.targetId,i.filter(l=>!go(l,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield hv(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),AC(e.remoteStore,r.targetId),vv(e,r.targetId)}).catch(jm))):(vv(e,r.targetId),yield hv(e.localStore,r.targetId,!0))})).apply(this,arguments)}function rP(){return(rP=(0,He.Z)(function*(n,t,e){const r=EP(n);try{const i=yield function(l,d){const f=dt(l),g=ai.now(),b=d.reduce((x,F)=>x.add(F.key),Nn());let D;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>f.ci.Ks(x,b).next(F=>{D=F;const $=[];for(const re of d){const ge=JR(re,D.get(re.key));null!=ge&&$.push(new ap(re.key,ge,iC(ge.value.mapValue),ci.exists(!0)))}return f.Bs.addMutationBatch(x,g,$,d)})).then(x=>(x.applyToLocalDocumentSet(D),{batchId:x.batchId,changes:D}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,f){let g=l.ua[l.currentUser.toKey()];g||(g=new q(on)),g=g.insert(d,f),l.ua[l.currentUser.toKey()]=g}(r,i.batchId,e),yield mh(r,i.changes),yield pv(r.remoteStore)}catch(i){const l=mv(i,"Failed to persist write");e.reject(l)}})).apply(this,arguments)}function TL(n,t){return iP.apply(this,arguments)}function iP(){return(iP=(0,He.Z)(function*(n,t){const e=dt(n);try{const r=yield J4(e.localStore,t);t.targetChanges.forEach((i,l)=>{const d=e.ra.get(l);d&&(Zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?Zt(d.Zu):i.removedDocuments.size>0&&(Zt(d.Zu),d.Zu=!1))}),yield mh(e,r,t)}catch(r){yield jm(r)}})).apply(this,arguments)}function IL(n,t,e){const r=dt(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ea.forEach((l,d)=>{const f=d.view.Au(t);f.snapshot&&i.push(f.snapshot)}),function(l,d){const f=dt(l);f.onlineState=d;let g=!1;f.queries.forEach((b,D)=>{for(const x of D.listeners)x.Au(d)&&(g=!0)}),g&&Qk(f)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function U8(n,t,e){return sP.apply(this,arguments)}function sP(){return(sP=(0,He.Z)(function*(n,t,e){const r=dt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ra.get(t),l=i&&i.key;if(l){let d=new q(lt.comparator);d=d.insert(l,ur.newNoDocument(l,Bt.min()));const f=Nn().add(l),g=new fl(Bt.min(),new Map,new fe(on),d,f);yield TL(r,g),r.ia=r.ia.remove(l),r.ra.delete(t),hP(r)}else yield hv(r.localStore,t,!1).then(()=>vv(r,t,e)).catch(jm)})).apply(this,arguments)}function H8(n,t){return oP.apply(this,arguments)}function oP(){return(oP=(0,He.Z)(function*(n,t){const e=dt(n),r=t.batch.batchId;try{const i=yield Q4(e.localStore,t);uP(e,r,null),cP(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield mh(e,i)}catch(i){yield jm(i)}})).apply(this,arguments)}function $8(n,t,e){return aP.apply(this,arguments)}function aP(){return(aP=(0,He.Z)(function*(n,t,e){const r=dt(n);try{const i=yield function(l,d){const f=dt(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let b;return f.Bs.lookupMutationBatch(g,d).next(D=>(Zt(null!==D),b=D.keys(),f.Bs.removeMutationBatch(g,D))).next(()=>f.Bs.performConsistencyCheck(g)).next(()=>f.ci.Ks(g,b))})}(r.localStore,t);uP(r,t,e),cP(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield mh(r,i)}catch(i){yield jm(i)}})).apply(this,arguments)}function lP(){return(lP=(0,He.Z)(function*(n,t){const e=dt(n);pp(e.remoteStore)||nt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=dt(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===r)return void t.resolve();const i=e.aa.get(r)||[];i.push(t),e.aa.set(r,i)}catch(r){const i=mv(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})).apply(this,arguments)}function cP(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function uP(n,t,e){const r=dt(n);let i=r.ua[r.currentUser.toKey()];if(i){const l=i.get(t);l&&(e?l.reject(e):l.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function vv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),e&&n.ta.fa(r,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||SL(n,r)})}function SL(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(AC(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),hP(n))}function dP(n,t,e){for(const r of e)r instanceof EL?(n.oa.addReference(r.key,t),G8(n,r)):r instanceof DL?(nt("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||SL(n,r.key)):bt()}function G8(n,t){const e=t.key,r=e.path.canonicalString();n.ia.get(e)||n.sa.has(r)||(nt("SyncEngine","New document in limbo: "+e),n.sa.add(r),hP(n))}function hP(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new lt(Rn.fromString(t)),r=n.ca.next();n.ra.set(r,new O8(e)),n.ia=n.ia.insert(e,r),YI(n.remoteStore,new up(Yo(ep(e.path)),r,2,po.A))}}function mh(n,t,e){return fP.apply(this,arguments)}function fP(){return(fP=(0,He.Z)(function*(n,t,e){const r=dt(n),i=[],l=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,g)=>{d.push(r.la(g,t,e).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,b.fromCache?"not-current":"current"),i.push(b);const D=_k.Ys(g.targetId,b);l.push(D)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,He.Z)(function*(g,b){const D=dt(g);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>je.forEach(b,F=>je.forEach(F.Hs,$=>D.persistence.referenceDelegate.addReference(x,F.targetId,$)).next(()=>je.forEach(F.Js,$=>D.persistence.referenceDelegate.removeReference(x,F.targetId,$)))))}catch(x){if(!Fm(x))throw x;nt("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const F=x.targetId;if(!x.fromCache){const $=D.ii.get(F),ge=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);D.ii=D.ii.insert(F,ge)}}}),function(g,b){return f.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function Z8(n,t){return pP.apply(this,arguments)}function pP(){return(pP=(0,He.Z)(function*(n,t){const e=dt(n);if(!e.currentUser.isEqual(t)){nt("SyncEngine","User change. New user:",t.toKey());const r=yield nL(e.localStore,t);e.currentUser=t,(i=e).aa.forEach(d=>{d.forEach(f=>{f.reject(new Ye(Oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield mh(e,r.hi)}var i})).apply(this,arguments)}function q8(n,t){const e=dt(n),r=e.ra.get(t);if(r&&r.Zu)return Nn().add(r.key);{let i=Nn();const l=e.na.get(t);if(!l)return i;for(const d of l){const f=e.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function W8(n,t){return gP.apply(this,arguments)}function gP(){return(gP=(0,He.Z)(function*(n,t){const e=dt(n),r=yield ZI(e.localStore,t.query,!0),i=t.view.Yu(r);return e.isPrimaryClient&&dP(e,t.targetId,i.Hu),i})).apply(this,arguments)}function z8(n,t){return mP.apply(this,arguments)}function mP(){return(mP=(0,He.Z)(function*(n,t){const e=dt(n);return oL(e.localStore,t).then(r=>mh(e,r))})).apply(this,arguments)}function Y8(n,t,e,r){return _P.apply(this,arguments)}function _P(){return(_P=(0,He.Z)(function*(n,t,e,r){const i=dt(n),l=yield function(d,f){const g=dt(d),b=dt(g.Bs);return g.persistence.runTransaction("Lookup mutation documents","readonly",D=>b.fn(D,f).next(x=>x?g.ci.Ks(D,x):je.resolve(null)))}(i.localStore,t);var f;null!==l?("pending"===e?yield pv(i.remoteStore):"acknowledged"===e||"rejected"===e?(uP(i,t,r||null),cP(i,t),f=t,dt(dt(i.localStore).Bs)._n(f)):bt(),yield mh(i,l)):nt("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function yP(){return(yP=(0,He.Z)(function*(n,t){const e=dt(n);if(CP(e),EP(e),!0===t&&!0!==e.ha){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield AL(e,r.toArray());e.ha=!0,yield Gk(e.remoteStore,!0);for(const l of i)YI(e.remoteStore,l)}else if(!1===t&&!1!==e.ha){const r=[];let i=Promise.resolve();e.na.forEach((l,d)=>{e.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(vv(e,d),hv(e.localStore,d,!0))),AC(e.remoteStore,d)}),yield i,yield AL(e,r),function(l){const d=dt(l);d.ra.forEach((f,g)=>{AC(d.remoteStore,g)}),d.oa.bi(),d.ra=new Map,d.ia=new q(lt.comparator)}(e),e.ha=!1,yield Gk(e.remoteStore,!1)}})).apply(this,arguments)}function AL(n,t,e){return vP.apply(this,arguments)}function vP(){return(vP=(0,He.Z)(function*(n,t,e){const r=dt(n),i=[],l=[];for(const d of t){let f;const g=r.na.get(d);if(g&&0!==g.length){f=yield dv(r.localStore,Yo(g[0]));for(const b of g){const D=r.ea.get(b),x=yield W8(r,D);x.snapshot&&l.push(x.snapshot)}}else{const b=yield sL(r.localStore,d);f=yield dv(r.localStore,b),yield eP(r,NL(b),d,!1)}i.push(f)}return r.ta.Qo(l),i})).apply(this,arguments)}function NL(n){return AI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Q8(n){const t=dt(n);return dt(dt(t.localStore).persistence).Fs()}function J8(n,t,e,r){return bP.apply(this,arguments)}function bP(){return(bP=(0,He.Z)(function*(n,t,e,r){const i=dt(n);if(i.ha)return void nt("SyncEngine","Ignoring unexpected query state notification.");const l=i.na.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const d=yield oL(i.localStore,ph(l[0])),f=fl.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield mh(i,d,f);break}case"rejected":yield hv(i.localStore,t,!0),vv(i,t,r);break;default:bt()}})).apply(this,arguments)}function X8(n,t,e){return wP.apply(this,arguments)}function wP(){return(wP=(0,He.Z)(function*(n,t,e){const r=CP(n);if(r.ha){for(const i of t){if(r.na.has(i)){nt("SyncEngine","Adding an already active target "+i);continue}const l=yield sL(r.localStore,i),d=yield dv(r.localStore,l);yield eP(r,NL(l),d.targetId,!1),YI(r.remoteStore,d)}for(const i of e)r.na.has(i)&&(yield hv(r.localStore,i,!1).then(()=>{AC(r.remoteStore,i),vv(r,i)}).catch(jm))}})).apply(this,arguments)}function CP(n){const t=dt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=TL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=q8.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=U8.bind(null,t),t.ta.Qo=N8.bind(null,t.eventManager),t.ta.fa=M8.bind(null,t.eventManager),t}function EP(n){const t=dt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=H8.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$8.bind(null,t),t}class ML{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,He.Z)(function*(){e.M=IC(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return tL(this.persistence,new eL,t.initialUser,this.M)}wa(t){return new l8(Ek.zi,this.M)}_a(t){return new uL}terminate(){var t=this;return(0,He.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class RL extends ML{constructor(t,e,r){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,He.Z)(function*(){yield e().call(r,t),yield r.ya.initialize(r,t),yield EP(r.ya.syncEngine),yield pv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(t){return tL(this.persistence,new eL,t.initialUser,this.M)}ma(t){return new j4(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=mk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Qo.withCacheSize(this.cacheSizeBytes):Qo.DEFAULT;return new gk(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,hL(),zI(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new uL}}class tU extends RL{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,He.Z)(function*(){yield e().call(r,t);const i=r.ya.syncEngine;r.sharedClientState instanceof Ik&&(r.sharedClientState.syncEngine={Mr:Y8.bind(null,i),Or:J8.bind(null,i),Fr:X8.bind(null,i),Fs:Q8.bind(null,i),kr:z8.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,He.Z)(function*(d){yield function(n,t){return yP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(t){const e=hL();if(!Ik.vt(e))throw new Ye(Oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ik(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class DP{initialize(t,e){var r=this;return(0,He.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>IL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Z8.bind(null,r.syncEngine),yield Gk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new A8}createDatastore(t){const e=IC(t.databaseInfo.databaseId),r=new f8(t.databaseInfo);return new m8(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,l=f=>IL(this.syncEngine,f,0),d=dL.vt()?new dL:new u8,new y8(e,r,i,l,d);var e,r,i,l,d}createSyncEngine(t,e){return function(r,i,l,d,f,g,b){const D=new F8(r,i,l,d,f,g);return b&&(D.ha=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,He.Z)(function*(e){const r=dt(e);nt("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield fv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function kL(n,t=10240){let e=0;return{read:()=>(0,He.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,He.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class QI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class nU{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new oi,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,He.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,He.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,He.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const r=t.Ea.decode(e),i=Number(r);isNaN(i)&&t.Pa(`length string (${r}) is not valid number`);const l=yield t.ba(i);return new R8(JSON.parse(l),e.length+i)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,He.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ba(t){var e=this;return(0,He.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const r=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,He.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class rU{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,He.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ye(Oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,He.Z)(function*(l,d){const f=dt(l),g=_C(f.M)+"/documents",b={documents:d.map($=>mC(f.M,$))},D=yield f.ho("BatchGetDocuments",g,b),x=new Map;D.forEach($=>{const re=function(n,t){return"found"in t?function(e,r){Zt(!!r.found);const i=wu(e,r.found.name),l=ss(r.found.updateTime),d=new qi({mapValue:{fields:r.found.fields}});return ur.newFoundDocument(i,l,d)}(n,t):"missing"in t?function(e,r){Zt(!!r.missing),Zt(!!r.readTime);const i=wu(e,r.missing),l=ss(r.readTime);return ur.newNoDocument(i,l)}(n,t):bt()}(f.M,$);x.set(re.key.toString(),re)});const F=[];return d.forEach($=>{const re=x.get($.toString());Zt(!!re),F.push(re)}),F}),function(l,d){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new u(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,He.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const l=lt.fromPath(i);t.mutations.push(new h(l,t.precondition(l)))}),yield(r=(0,He.Z)(function*(i,l){const d=dt(i),f=_C(d.M)+"/documents",g={writes:l.map(b=>yC(d.M,b))};yield d.oo("Commit",f,g)}),function(i,l){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw bt();e=Bt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Ye(Oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ci.updateTime(e):ci.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new Ye(Oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ci.updateTime(e)}return ci.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class iU{constructor(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Sk(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,He.Z)(function*(){const e=new rU(t.datastore),r=t.Ca(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(l=>{t.xa(l)}))}).catch(i=>{t.xa(i)})}))}Ca(t){try{const e=this.updateFunction(t);return!ch(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!C(e)}return!1}}class sU{constructor(t,e,r,i){var l=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=is.UNAUTHENTICATED,this.clientId=Em.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,He.Z)(function*(f){nt("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(nt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var t=this;return(0,He.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(Oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,He.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=mv(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function PL(n,t){return xP.apply(this,arguments)}function xP(){return(xP=(0,He.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),nt("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,He.Z)(function*(l){r.isEqual(l)||(yield nL(t.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function OL(n,t){return TP.apply(this,arguments)}function TP(){return(TP=(0,He.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield IP(n);nt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>vL(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>vL(t.remoteStore,l)),n.onlineComponents=t})).apply(this,arguments)}function IP(n){return SP.apply(this,arguments)}function SP(){return(SP=(0,He.Z)(function*(n){return n.offlineComponents||(nt("FirestoreClient","Using default OfflineComponentProvider"),yield PL(n,new ML)),n.offlineComponents})).apply(this,arguments)}function JI(n){return AP.apply(this,arguments)}function AP(){return(AP=(0,He.Z)(function*(n){return n.onlineComponents||(nt("FirestoreClient","Using default OnlineComponentProvider"),yield OL(n,new DP)),n.onlineComponents})).apply(this,arguments)}function FL(n){return IP(n).then(t=>t.persistence)}function NP(n){return IP(n).then(t=>t.localStore)}function LL(n){return JI(n).then(t=>t.remoteStore)}function MP(n){return JI(n).then(t=>t.syncEngine)}function bv(n){return RP.apply(this,arguments)}function RP(){return(RP=(0,He.Z)(function*(n){const t=yield JI(n),e=t.eventManager;return e.onListen=L8.bind(null,t.syncEngine),e.onUnlisten=V8.bind(null,t.syncEngine),e})).apply(this,arguments)}function VL(n,t,e={}){const r=new oi;return n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(i,l,d,f,g){const b=new QI({next:x=>{l.enqueueAndForget(()=>Yk(i,D));const F=x.docs.has(d);!F&&x.fromCache?g.reject(new Ye(Oe.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&x.fromCache&&f&&"server"===f.source?g.reject(new Ye(Oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(x)},error:x=>g.reject(x)}),D=new Jk(ep(d.path),b,{includeMetadataChanges:!0,Cu:!0});return Wk(i,D)}(yield bv(n),n.asyncQueue,t,e,r)})),r.promise}function BL(n,t,e={}){const r=new oi;return n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(i,l,d,f,g){const b=new QI({next:x=>{l.enqueueAndForget(()=>Yk(i,D)),x.fromCache&&"server"===f.source?g.reject(new Ye(Oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(x)},error:x=>g.reject(x)}),D=new Jk(d,b,{includeMetadataChanges:!0,Cu:!0});return Wk(i,D)}(yield bv(n),n.asyncQueue,t,e,r)})),r.promise}const UL=new Map;function kP(n,t,e){if(!e)throw new Ye(Oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function HL(n,t,e,r){if(!0===t&&!0===r)throw new Ye(Oe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function $L(n){if(!lt.isDocumentKey(n))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jL(n){if(lt.isDocumentKey(n))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function XI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":bt()}function kn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ye(Oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=XI(n);throw new Ye(Oe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function GL(n,t){if(t<=0)throw new Ye(Oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class ZL{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ye(Oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ye(Oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,HL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class NC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZL({}),this._settingsFrozen=!1,t instanceof ac?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ye(Oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ac(i.options.projectId)}(t))}get app(){if(!this._app)throw new Ye(Oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ye(Oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZL(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new PR;switch(e.type){case"gapi":const r=e.client;return Zt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new mI(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ye(Oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=UL.get(t);e&&(nt("ComponentProvider","Removing Datastore"),UL.delete(t),e.terminate())}(this),Promise.resolve()}}class Lr{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Lr(this.firestore,t,this._key)}}class Ws{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ws(this.firestore,t,this._query)}}class Eu extends Ws{constructor(t,e,r){super(t,e,ep(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Lr(this.firestore,null,new lt(t))}withConverter(t){return new Eu(this.firestore,t,this._path)}}function qL(n,t,...e){if(n=(0,Q.m9)(n),kP("collection","path",t),n instanceof NC){const r=Rn.fromString(t,...e);return jL(r),new Eu(n,null,r)}{if(!(n instanceof Lr||n instanceof Eu))throw new Ye(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(t,...e));return jL(r),new Eu(n.firestore,null,r)}}function eS(n,t,...e){if(n=(0,Q.m9)(n),1===arguments.length&&(t=Em.R()),kP("doc","path",t),n instanceof NC){const r=Rn.fromString(t,...e);return $L(r),new Lr(n,null,new lt(r))}{if(!(n instanceof Lr||n instanceof Eu))throw new Ye(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Rn.fromString(t,...e));return $L(r),new Lr(n.firestore,n instanceof Eu?n.converter:null,new lt(r))}}function WL(n,t){return n=(0,Q.m9)(n),t=(0,Q.m9)(t),(n instanceof Lr||n instanceof Eu)&&(t instanceof Lr||t instanceof Eu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function zL(n,t){return n=(0,Q.m9)(n),t=(0,Q.m9)(t),n instanceof Ws&&t instanceof Ws&&n.firestore===t.firestore&&go(n._query,t._query)&&n.converter===t.converter}class mU{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Sk(this,"async_queue_retry"),this.qa=()=>{const e=zI();e&&nt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=zI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=zI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new oi;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,He.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!Fm(e))throw e;nt("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{throw this.$a=r,this.Ba=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=e,e}enqueueAfterDelay(t,e,r){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const i=qk.createAndSchedule(this,t,e,r,l=>this.ja(l));return this.Fa.push(i),i}Ka(){this.$a&&bt()}verifyOperationInProgress(){}Wa(){var t=this;return(0,He.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function PP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class _U{constructor(){this._progressObserver={},this._taskCompletionResolver=new oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Zr extends NC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new mU,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||YL(this),this._firestoreClient.terminate()}}function ki(n){return n._firestoreClient||YL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function YL(n){var t;const e=n._freezeSettings(),r=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new BR(n._databaseId,l,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new sU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function KL(n,t,e){const r=new oi;return n.asyncQueue.enqueue((0,He.Z)(function*(){try{yield PL(n,e),yield OL(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===Oe.FAILED_PRECONDITION||l.code===Oe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function QL(n){if(n._initialized||n._terminated)throw new Ye(Oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _h{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ye(Oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ni(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Du{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Du(Mi.fromBase64String(t))}catch(e){throw new Ye(Oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Du(Mi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Zm{constructor(t){this._methodName=t}}class tS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ye(Oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ye(Oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return on(this._lat,t._lat)||on(this._long,t._long)}}const IU=/^__.*__$/;class SU{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new ap(t,this.data,this.fieldMask,e,this.fieldTransforms):new tv(t,this.data,e,this.fieldTransforms)}}class JL{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new ap(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function XL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class nS{constructor(t,e,r,i,l,d){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new nS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return sS(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(XL(this.Xa)&&IU.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class AU{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||IC(t)}ac(t,e,r,i=!1){return new nS({Xa:t,methodName:e,uc:r,path:Ni.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function qm(n){const t=n._freezeSettings(),e=IC(n._databaseId);return new AU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function rS(n,t,e,r,i,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,t,e,i);VP("Data must be an object, but it was:",d,r);const f=n3(r,d);let g,b;if(l.merge)g=new zf(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const D=[];for(const x of l.mergeFields){const F=BP(t,x,e);if(!d.contains(F))throw new Ye(Oe.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);i3(D,F)||D.push(F)}g=new zf(D),b=d.fieldTransforms.filter(x=>g.covers(x.field))}else g=null,b=d.fieldTransforms;return new SU(new qi(f),g,b)}class MC extends Zm{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof MC}}function e3(n,t,e){return new nS({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class OP extends Zm{_toFieldTransform(t){return new ev(t.path,new sp)}isEqual(t){return t instanceof OP}}class NU extends Zm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=e3(this,t,!0),r=this.cc.map(l=>Wm(l,e)),i=new vu(r);return new ev(t.path,i)}isEqual(t){return this===t}}class MU extends Zm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=e3(this,t,!0),r=this.cc.map(l=>Wm(l,e)),i=new dc(r);return new ev(t.path,i)}isEqual(t){return this===t}}class RU extends Zm{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new op(t.M,dC(t.M,this.hc));return new ev(t.path,e)}isEqual(t){return this===t}}function FP(n,t,e,r){const i=n.ac(1,t,e);VP("Data must be an object, but it was:",i,r);const l=[],d=qi.empty();ah(r,(g,b)=>{const D=iS(t,g,e);b=(0,Q.m9)(b);const x=i.sc(D);if(b instanceof MC)l.push(D);else{const F=Wm(b,x);null!=F&&(l.push(D),d.set(D,F))}});const f=new zf(l);return new JL(d,f,i.fieldTransforms)}function LP(n,t,e,r,i,l){const d=n.ac(1,t,e),f=[BP(t,r,e)],g=[i];if(l.length%2!=0)throw new Ye(Oe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<l.length;F+=2)f.push(BP(t,l[F])),g.push(l[F+1]);const b=[],D=qi.empty();for(let F=f.length-1;F>=0;--F)if(!i3(b,f[F])){const $=f[F];let re=g[F];re=(0,Q.m9)(re);const ge=d.sc($);if(re instanceof MC)b.push($);else{const Me=Wm(re,ge);null!=Me&&(b.push($),D.set($,Me))}}const x=new zf(b);return new JL(D,x,d.fieldTransforms)}function t3(n,t,e,r=!1){return Wm(e,n.ac(r?4:3,t))}function Wm(n,t){if(r3(n=(0,Q.m9)(n)))return VP("Unsupported field value:",t,n),n3(n,t);if(n instanceof Zm)return function(e,r){if(!XL(r.Xa))throw r.rc(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,r){const i=[];let l=0;for(const d of e){let f=Wm(d,r.ic(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,Q.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dC(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=ai.fromDate(e);return{timestampValue:gC(r.M,i)}}if(e instanceof ai){const i=new ai(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gC(r.M,i)}}if(e instanceof tS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Du)return{bytesValue:pF(r.M,e._byteString)};if(e instanceof Lr){const i=r.databaseId,l=e.firestore._databaseId;if(!l.isEqual(i))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tk(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.rc(`Unsupported field value: ${XI(e)}`)}(n,t)}function n3(n,t){const e={};return yI(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ah(n,(r,i)=>{const l=Wm(i,t.tc(r));null!=l&&(e[r]=l)}),{mapValue:{fields:e}}}function r3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ai||n instanceof tS||n instanceof Du||n instanceof Lr||n instanceof Zm)}function VP(n,t,e){if(!r3(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=XI(e);throw t.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function BP(n,t,e){if((t=(0,Q.m9)(t))instanceof _h)return t._internalPath;if("string"==typeof t)return iS(n,t);throw sS("Field path arguments must be of type string or ",n,!1,void 0,e)}const kU=new RegExp("[~\\*/\\[\\]]");function iS(n,t,e){if(t.search(kU)>=0)throw sS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new _h(...t.split("."))._internalPath}catch(r){throw sS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function sS(n,t,e,r,i){const l=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${r}`),d&&(g+=` in document ${i}`),g+=")"),new Ye(Oe.INVALID_ARGUMENT,f+n+g)}function i3(n,t){return n.some(e=>e.isEqual(t))}class RC{constructor(t,e,r,i,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Lr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new PU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(oS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class PU extends RC{data(){return super.data()}}function oS(n,t){return"string"==typeof t?iS(n,t):t instanceof _h?t._internalPath:t._delegate._internalPath}class zm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yh extends RC{constructor(t,e,r,i,l,d){super(t,e,r,i,d),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new kC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(oS("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class kC extends yh{data(t={}){return super.data(t)}}class mp{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new zm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new kC(this._firestore,this._userDataWriter,r.key,r,new zm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ye(Oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new kC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new zm(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new kC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new zm(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,b=-1;return 0!==d.type&&(g=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:OU(d.type),doc:f,oldIndex:g,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function OU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}function s3(n,t){return n instanceof yh&&t instanceof yh?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof mp&&t instanceof mp&&n._firestore===t._firestore&&zL(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function o3(n){if(tp(n)&&0===n.explicitOrderBy.length)throw new Ye(Oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PC{}function _p(n,...t){for(const e of t)n=e._apply(n);return n}class FU extends PC{constructor(t,e,r){super(),this.lc=t,this.fc=e,this.dc=r,this.type="where"}_apply(t){const e=qm(t.firestore),r=function(i,l,d,f,g,b,D){let x;if(g.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ye(Oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){h3(D,b);const $=[];for(const re of D)$.push(d3(f,i,re));x={arrayValue:{values:$}}}else x=d3(f,i,D)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||h3(D,b),x=t3(d,"where",D,"in"===b||"not-in"===b);const F=li.create(g,b,x);return function($,re){if(re.S()){const Me=Jy($);if(null!==Me&&!Me.isEqual(re.field))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${re.field.toString()}'`);const Qe=cC($);null!==Qe&&f3(0,re.field,Qe)}const ge=function(Me,Qe){for(const st of Me.filters)if(Qe.indexOf(st.op)>=0)return st.op;return null}($,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(re.op));if(null!==ge)throw new Ye(Oe.INVALID_ARGUMENT,ge===re.op?`Invalid query. You cannot use more than one '${re.op.toString()}' filter.`:`Invalid query. You cannot use '${re.op.toString()}' filters with '${ge.toString()}' filters.`)}(i,F),F}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new Ws(t.firestore,t.converter,function(i,l){const d=i.filters.concat([l]);return new Ea(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class VU extends PC{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(r,i,l){if(null!==r.startAt)throw new Ye(Oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ye(Oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Jf(i,l);return function(f,g){if(null===cC(f)){const b=Jy(f);null!==b&&f3(0,b,g.field)}}(r,d),d}(t._query,this.lc,this._c);return new Ws(t.firestore,t.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new Ea(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class a3 extends PC{constructor(t,e,r){super(),this.type=t,this.wc=e,this.mc=r}_apply(t){return new Ws(t.firestore,t.converter,NI(t._query,this.wc,this.mc))}}class l3 extends PC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=u3(t,this.type,this.gc,this.yc);return new Ws(t.firestore,t.converter,(i=e,new Ea((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class c3 extends PC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=u3(t,this.type,this.gc,this.yc);return new Ws(t.firestore,t.converter,(i=e,new Ea((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function u3(n,t,e,r){if(e[0]=(0,Q.m9)(e[0]),e[0]instanceof RC)return function(i,l,d,f,g){if(!f)throw new Ye(Oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const D of np(i))if(D.field.isKeyField())b.push(dh(l,f.key));else{const x=f.data.field(D.field);if(tC(x))throw new Ye(Oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const F=D.field.canonicalString();throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}b.push(x)}return new _u(b,g)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=qm(n.firestore);return function(l,d,f,g,b,D){const x=l.explicitOrderBy;if(b.length>x.length)throw new Ye(Oe.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let $=0;$<b.length;$++){const re=b[$];if(x[$].field.isKeyField()){if("string"!=typeof re)throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof re}`);if(!Xy(l)&&-1!==re.indexOf("/"))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${re}' contains a slash.`);const ge=l.path.child(Rn.fromString(re));if(!lt.isDocumentKey(ge))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const Me=new lt(ge);F.push(dh(d,Me))}else{const ge=t3(f,g,re);F.push(ge)}}return new _u(F,D)}(n._query,n.firestore._databaseId,i,t,e,r)}}function d3(n,t,e){if("string"==typeof(e=(0,Q.m9)(e))){if(""===e)throw new Ye(Oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xy(t)&&-1!==e.indexOf("/"))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Rn.fromString(e));if(!lt.isDocumentKey(r))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dh(n,new lt(r))}if(e instanceof Lr)return dh(n,e._key);throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${XI(e)}.`)}function h3(n,t){if(!Array.isArray(n)||0===n.length)throw new Ye(Oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ye(Oe.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function f3(n,t,e){if(!e.isEqual(t))throw new Ye(Oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class UP{convertValue(t,e="none"){switch(gu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lh(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw bt()}}convertObject(t,e){const r={};return ah(t.fields,(i,l)=>{r[i]=this.convertValue(l,e)}),r}convertGeoPoint(t){return new tS(Gr(t.latitude),Gr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Wo(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Tm(t));default:return null}}convertTimestamp(t){const e=pu(t);return new ai(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Rn.fromString(t);Zt(DF(r));const i=new ac(r.get(1),r.get(3)),l=new lt(r.popFirst(5));return i.isEqual(e)||Xr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function aS(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class qU extends UP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Du(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lr(this.firestore,null,e)}}class p3{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=qm(t)}set(t,e,r){this._verifyNotCommitted();const i=yp(t,this._firestore),l=aS(i.converter,e,r),d=rS(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,ci.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const l=yp(t,this._firestore);let d;return d="string"==typeof(e=(0,Q.m9)(e))||e instanceof _h?LP(this._dataReader,"WriteBatch.update",l._key,e,r,i):FP(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(d.toMutation(l._key,ci.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=yp(t,this._firestore);return this._mutations=this._mutations.concat(new u(e._key,ci.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(Oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yp(n,t){if((n=(0,Q.m9)(n)).firestore!==t)throw new Ye(Oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ym extends UP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Du(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Lr(this.firestore,null,e)}}function g3(n,t,e){n=kn(n,Lr);const r=kn(n.firestore,Zr),i=aS(n.converter,t,e);return wv(r,[rS(qm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,ci.none())])}function m3(n,t,e,...r){n=kn(n,Lr);const i=kn(n.firestore,Zr),l=qm(i);let d;return d="string"==typeof(t=(0,Q.m9)(t))||t instanceof _h?LP(l,"updateDoc",n._key,t,e,r):FP(l,"updateDoc",n._key,t),wv(i,[d.toMutation(n._key,ci.exists(!0))])}function _3(n,...t){var e,r,i;n=(0,Q.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof t[d]||PP(t[d])||(l=t[d],d++);const f={includeMetadataChanges:l.includeMetadataChanges};if(PP(t[d])){const x=t[d];t[d]=null===(e=x.next)||void 0===e?void 0:e.bind(x),t[d+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),t[d+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let g,b,D;if(n instanceof Lr)b=kn(n.firestore,Zr),D=ep(n._key.path),g={next:x=>{t[d]&&t[d](HP(b,n,x))},error:t[d+1],complete:t[d+2]};else{const x=kn(n,Ws);b=kn(x.firestore,Zr),D=x._query;const F=new Ym(b);g={next:$=>{t[d]&&t[d](new mp(b,F,x,$))},error:t[d+1],complete:t[d+2]},o3(n._query)}return function(x,F,$,re){const ge=new QI(re),Me=new Jk(F,ge,$);return x.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return Wk(yield bv(x),Me)})),()=>{ge.Ia(),x.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return Yk(yield bv(x),Me)}))}}(ki(b),D,f,g)}function wv(n,t){return function(e,r){const i=new oi;return e.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(n,t,e){return rP.apply(this,arguments)}(yield MP(e),r,i)})),i.promise}(ki(n),t)}function HP(n,t,e){const r=e.docs.get(t._key),i=new Ym(n);return new yh(n,i,t._key,r,new zm(e.hasPendingWrites,e.fromCache),t.converter)}class n5 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=qm(t)}get(t){const e=yp(t,this._firestore),r=new qU(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return bt();const l=i[0];if(l.isFoundDocument())return new RC(this._firestore,r,l.key,l,e.converter);if(l.isNoDocument())return new RC(this._firestore,r,e._key,null,e.converter);throw bt()})}set(t,e,r){const i=yp(t,this._firestore),l=aS(i.converter,e,r),d=rS(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(t,e,r,...i){const l=yp(t,this._firestore);let d;return d="string"==typeof(e=(0,Q.m9)(e))||e instanceof _h?LP(this._dataReader,"Transaction.update",l._key,e,r,i):FP(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,d),this}delete(t){const e=yp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=yp(t,this._firestore),r=new Ym(this._firestore);return super.get(t).then(i=>new yh(this._firestore,r,e._key,i._document,new zm(!1,!1),e.converter))}}function $P(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function v3(){if("undefined"==typeof Uint8Array)throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function b3(){if("undefined"==typeof atob)throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){wm=Us.SDK_VERSION,(0,Us._registerComponent)(new el.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),l=new Zr(i,new OR(e.getProvider("auth-internal")),new sF(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC")),(0,Us.registerVersion)(Jw,"3.4.8",n),(0,Us.registerVersion)(Jw,"3.4.8","esm2017")}();class OC{constructor(t){this._delegate=t}static fromBase64String(t){return b3(),new OC(Du.fromBase64String(t))}static fromUint8Array(t){return v3(),new OC(Du.fromUint8Array(t))}toBase64(){return b3(),this._delegate.toBase64()}toUint8Array(){return v3(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jP(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class h5{enableIndexedDbPersistence(t,e){return function(n,t){QL(n=kn(n,Zr));const e=ki(n),r=n._freezeSettings(),i=new DP;return KL(e,i,new RL(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){QL(n=kn(n,Zr));const t=ki(n),e=n._freezeSettings(),r=new DP;return KL(t,r,new tU(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Ye(Oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,He.Z)(function*(){try{yield(e=(0,He.Z)(function*(r){if(!fc.vt())return Promise.resolve();const i=r+"main";yield fc.delete(i)}),function(r){return e.apply(this,arguments)})(mk(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class w3{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof ac||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Wf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const l=(n=kn(n,NC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&Wf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=is.MOCK_USER;else{d=(0,Q.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ye(Oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new is(g)}n._authCredentials=new Wy(new qy(d,f))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,He.Z)(function*(){const t=yield FL(n),e=yield LL(n);return t.setNetworkEnabled(!0),function(r){const i=dt(r);return i.fu.delete(0),SC(i)}(e)}))}(ki(n=kn(n,Zr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,He.Z)(function*(){const t=yield FL(n),e=yield LL(n);return t.setNetworkEnabled(!1),(r=(0,He.Z)(function*(i){const l=dt(i);l.fu.add(0),yield fv(l),l.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(ki(n=kn(n,Zr)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,HL("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new oi;return t.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return function(n,t){return lP.apply(this,arguments)}(yield MP(t),e)})),e.promise}(ki(n=kn(n,Zr)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new QI(t);return n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return r=yield bv(n),i=e,dt(r).Eu.add(i),void i.next();var r,i})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return r=yield bv(n),i=e,void dt(r).Eu.delete(i);var r,i}))}}(ki(n=kn(n,Zr)),PP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Cv(this,qL(this._delegate,t))}catch(e){throw _o(e,"collection()","Firestore.collection()")}}doc(t){try{return new pl(this,eS(this._delegate,t))}catch(e){throw _o(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new yo(this,function(n,t){if(n=kn(n,NC),kP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ye(Oe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ws(n,null,(e=t,new Ea(Rn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw _o(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new oi;return n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){const r=yield(i=n,JI(i).then(l=>l.datastore));var i;new iU(n.asyncQueue,r,t,e).run()})),e.promise}(ki(n=kn(n,Zr)),e=>t(new n5(n,e)))}(this._delegate,e=>t(new C3(this,e)))}batch(){return ki(this._delegate),new E3(new p3(this._delegate,t=>wv(this._delegate,t)))}loadBundle(t){return function(n,t){const e=ki(n=kn(n,Zr)),r=new _U;return function(n,t,e,r){const i=function(l,d){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,g=function(g,b){if(g instanceof Uint8Array)return kL(g,b);if(g instanceof ArrayBuffer)return kL(new Uint8Array(g),b);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new nU(g,d);var g}(e,IC(t));n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){!function(n,t,e){const r=dt(n);var i;(i=(0,He.Z)(function*(l,d,f){try{const g=yield d.getMetadata();if(yield function(F,$){const re=dt(F),ge=ss($.createTime);return re.persistence.runTransaction("hasNewerBundle","readonly",Me=>re._s.getBundleMetadata(Me,$.id)).then(Me=>!!Me&&Me.createTime.compareTo(ge)>=0)}(l.localStore,g))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(F=g).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);f._updateProgress(CL(g));const b=new k8(g,l.localStore,d.M);let D=yield d.da();for(;D;){const F=yield b.ku(D);F&&f._updateProgress(F),D=yield d.da()}const x=yield b.complete();return yield mh(l,x.Fu,void 0),yield function(F,$){const re=dt(F);return re.persistence.runTransaction("Save bundle","readwrite",ge=>re._s.saveBundleMetadata(ge,$))}(l.localStore,g),f._completeWith(x.progress),Promise.resolve(x.Ou)}catch(g){return Wf("SyncEngine",`Loading bundle failed with ${g}`),f._failWith(g),Promise.resolve(new Set)}var F}),function(l,d,f){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,He.Z)(function*(){return function(e,r){const i=dt(e);return i.persistence.runTransaction("Get named query","readonly",l=>i._s.getNamedQuery(l,r))}(yield NP(n),t)}))}(ki(n=kn(n,Zr)),t).then(e=>e?new Ws(n,null,e.query):null)}(this._delegate,t).then(e=>e?new yo(this,e):null)}}class lS extends UP{constructor(t){super(),this.firestore=t}convertBytes(t){return new OC(new Du(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return pl.forKey(e,this.firestore,null)}}class C3{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new lS(t)}get(t){const e=Qm(t);return this._delegate.get(e).then(r=>new FC(this._firestore,new yh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Qm(t);return r?($P("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Qm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Qm(t);return this._delegate.delete(e),this}}class E3{constructor(t){this._delegate=t}set(t,e,r){const i=Qm(t);return r?($P("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Qm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Qm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Km{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new kC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new LC(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Km.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let l=i.get(e);return l||(l=new Km(t,new lS(t),e),i.set(e,l)),l}}Km.INSTANCES=new WeakMap;class pl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lS(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new pl(e,new Lr(e._delegate,r,new lt(t)))}static forKey(t,e,r){return new pl(e,new Lr(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new Cv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Cv(this.firestore,qL(this._delegate,t))}catch(e){throw _o(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,Q.m9)(t))instanceof Lr&&WL(this._delegate,t)}set(t,e){e=$P("DocumentReference.set",e);try{return e?g3(this._delegate,t,e):g3(this._delegate,t)}catch(r){throw _o(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?m3(this._delegate,t):m3(this._delegate,t,e,...r)}catch(i){throw _o(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return wv(kn(n.firestore,Zr),[new u(n._key,ci.none())])}(this._delegate)}onSnapshot(...t){const e=D3(t),r=x3(t,i=>new FC(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return _3(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=kn(n,Lr);const t=kn(n.firestore,Zr),e=ki(t),r=new Ym(t);return function(n,t){const e=new oi;return n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return(r=(0,He.Z)(function*(i,l,d){try{const f=yield function(g,b){const D=dt(g);return D.persistence.runTransaction("read document","readonly",x=>D.ci.Ls(x,b))}(i,l);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Ye(Oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const g=mv(f,`Failed to get document '${l} from cache`);d.reject(g)}}),function(i,l,d){return r.apply(this,arguments)})(yield NP(n),t,e);var r})),e.promise}(e,n._key).then(i=>new yh(t,r,n._key,i,new zm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=kn(n,Lr);const t=kn(n.firestore,Zr);return VL(ki(t),n._key,{source:"server"}).then(e=>HP(t,n,e))}(this._delegate):function(n){n=kn(n,Lr);const t=kn(n.firestore,Zr);return VL(ki(t),n._key).then(e=>HP(t,n,e))}(this._delegate),e.then(r=>new FC(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new pl(this.firestore,this._delegate.withConverter(t?Km.getInstance(this.firestore,t):null))}}function _o(n,t,e){return n.message=n.message.replace(t,e),n}function D3(n){for(const t of n)if("object"==typeof t&&!jP(t))return t;return{}}function x3(n,t){var e,r;let i;return i=jP(n[0])?n[0]:jP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(t(l))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class FC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new pl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return s3(this._delegate,t._delegate)}}class LC extends FC{data(t){const e=this._delegate.data(t);return function(n,t){n||bt()}(void 0!==e),e}}class yo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new lS(t)}where(t,e,r){try{return new yo(this.firestore,_p(this._delegate,function(n,t,e){const r=t,i=oS("where",n);return new FU(i,r,e)}(t,e,r)))}catch(i){throw _o(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new yo(this.firestore,_p(this._delegate,function(n,t="asc"){const e=t,r=oS("orderBy",n);return new VU(r,e)}(t,e)))}catch(r){throw _o(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new yo(this.firestore,_p(this._delegate,function(n){return GL("limit",n),new a3("limit",n,"F")}(t)))}catch(e){throw _o(e,"limit()","Query.limit()")}}limitToLast(t){try{return new yo(this.firestore,_p(this._delegate,function(n){return GL("limitToLast",n),new a3("limitToLast",n,"L")}(t)))}catch(e){throw _o(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new yo(this.firestore,_p(this._delegate,function(...n){return new l3("startAt",n,!0)}(...t)))}catch(e){throw _o(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new yo(this.firestore,_p(this._delegate,function(...n){return new l3("startAfter",n,!1)}(...t)))}catch(e){throw _o(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new yo(this.firestore,_p(this._delegate,function(...n){return new c3("endBefore",n,!1)}(...t)))}catch(e){throw _o(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new yo(this.firestore,_p(this._delegate,function(...n){return new c3("endAt",n,!0)}(...t)))}catch(e){throw _o(e,"endAt()","Query.endAt()")}}isEqual(t){return zL(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=kn(n,Ws);const t=kn(n.firestore,Zr),e=ki(t),r=new Ym(t);return function(n,t){const e=new oi;return n.asyncQueue.enqueueAndForget((0,He.Z)(function*(){return(r=(0,He.Z)(function*(i,l,d){try{const f=yield ZI(i,l,!0),g=new xL(l,f.li),b=g.Gu(f.documents),D=g.applyChanges(b,!1);d.resolve(D.snapshot)}catch(f){const g=mv(f,`Failed to execute query '${l} against cache`);d.reject(g)}}),function(i,l,d){return r.apply(this,arguments)})(yield NP(n),t,e);var r})),e.promise}(e,n._query).then(i=>new mp(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=kn(n,Ws);const t=kn(n.firestore,Zr),e=ki(t),r=new Ym(t);return BL(e,n._query,{source:"server"}).then(i=>new mp(t,r,n,i))}(this._delegate):function(n){n=kn(n,Ws);const t=kn(n.firestore,Zr),e=ki(t),r=new Ym(t);return o3(n._query),BL(e,n._query).then(i=>new mp(t,r,n,i))}(this._delegate),e.then(r=>new GP(this.firestore,new mp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=D3(t),r=x3(t,i=>new GP(this.firestore,new mp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return _3(this._delegate,e,r)}withConverter(t){return new yo(this.firestore,this._delegate.withConverter(t?Km.getInstance(this.firestore,t):null))}}class p5{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new LC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new LC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new p5(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new LC(this._firestore,r))})}isEqual(t){return s3(this._delegate,t._delegate)}}class Cv extends yo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new pl(this.firestore,t):null}doc(t){try{return new pl(this.firestore,void 0===t?eS(this._delegate):eS(this._delegate,t))}catch(e){throw _o(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=kn(n.firestore,Zr),r=eS(n),i=aS(n.converter,t);return wv(e,[rS(qm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ci.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new pl(this.firestore,e))}isEqual(t){return WL(this._delegate,t._delegate)}withConverter(t){return new Cv(this.firestore,this._delegate.withConverter(t?Km.getInstance(this.firestore,t):null))}}function Qm(n){return kn(n,Lr)}class ZP{constructor(...t){this._delegate=new _h(...t)}static documentId(){return new ZP(Ni.keyField().canonicalString())}isEqual(t){return(t=(0,Q.m9)(t))instanceof _h&&this._delegate._internalPath.isEqual(t._internalPath)}}class Jm{constructor(t){this._delegate=t}static serverTimestamp(){const t=new OP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Jm(t)}static delete(){const t=new MC("deleteField");return t._methodName="FieldValue.delete",new Jm(t)}static arrayUnion(...t){const e=function(...n){return new NU("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Jm(e)}static arrayRemove(...t){const e=function(...n){return new MU("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Jm(e)}static increment(t){const e=function(n){return new RU("increment",n)}(t);return e._methodName="FieldValue.increment",new Jm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const g5={Firestore:w3,GeoPoint:tS,Timestamp:ai,Blob:OC,Transaction:C3,WriteBatch:E3,DocumentReference:pl,DocumentSnapshot:FC,Query:yo,QueryDocumentSnapshot:LC,QuerySnapshot:GP,CollectionReference:Cv,FieldPath:ZP,FieldValue:Jm,setLogLevel:function(n){!function(n){fu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function T3(n,t){return function(n,t=zc.z){return new zn.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function qP(n,t){return T3(n,t).pipe((0,wt.U)(e=>({payload:e,type:"query"})))}function cS(n,t){return qP(n,t).pipe(aa(void 0),Ti(),(0,wt.U)(([e,r])=>{const i=r.payload.docChanges(),l=i.map(d=>({type:d.type,payload:d}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const g=i.find(D=>D.doc.ref.isEqual(d.ref)),b=null==e?void 0:e.payload.docs.find(D=>D.ref.isEqual(d.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(d.metadata)||!g&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),l}))}function I3(n,t,e){return cS(n,e).pipe($a((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return WP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return WP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return WP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),t),[]),Yc(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function WP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function S3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new el.wA("firestore-compat",e=>((t,e)=>new w3(t,e,new h5))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},g5)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(ag.Z);class A3{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=cS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,wt.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(aa(void 0),Ti(),sr(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),Ln.iC)}auditTrail(t){return this.stateChanges(t).pipe($a((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=S3(t);return I3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(t={}){return qP(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),Ln.iC)}get(t){return(0,un.D)(this.query.get(t)).pipe(Ln.iC)}add(t){return this.ref.add(t)}doc(t){return new N3(this.ref.doc(t),this.afs)}}class N3{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:l}=k3(r,e);return new A3(i,l,this.afs)}snapshotChanges(){return function(n,t){return T3(n,t).pipe(aa(void 0),Ti(),(0,wt.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,un.D)(this.ref.get(t)).pipe(Ln.iC)}}class C5{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?cS(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),sr(e=>e.length>0),Ln.iC):cS(this.query,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}auditTrail(t){return this.stateChanges(t).pipe($a((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=S3(t);return I3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Ln.iC)}valueChanges(t={}){return qP(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),Ln.iC)}get(t){return(0,un.D)(this.query.get(t)).pipe(Ln.iC)}}const M3=new a.OlP("angularfire2.enableFirestorePersistence"),R3=new a.OlP("angularfire2.firestore.persistenceSettings"),E5=new a.OlP("angularfire2.firestore.settings"),D5=new a.OlP("angularfire2.firestore.use-emulator");function k3(n,t=(e=>e)){return{query:t(n),ref:n}}let P3=(()=>{class n{constructor(e,r,i,l,d,f,g,b,D,x,F,$,re,ge,Me,Qe,st){this.schedulers=g;const pt=(0,ri.on)(e,f,r),mt=D;x&&sw(pt,f,F,re,ge,Me,$,Qe),[this.firestore,this.persistenceEnabled$]=(0,ri.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const Ut=f.runOutsideAngular(()=>pt.firestore());if(l&&Ut.settings(l),mt&&Ut.useEmulator(...mt),i&&!Ah(d)){const gn=()=>{try{return(0,un.D)(Ut.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Wr){return"undefined"!=typeof console&&console.warn(Wr),(0,Dt.of)(!1)}};return[Ut,f.runOutsideAngular(gn)]}return[Ut,(0,Dt.of)(!1)]},[l,mt,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:d}=k3(i,r),f=this.schedulers.ngZone.run(()=>l);return new A3(f,d,this)}collectionGroup(e,r){const i=r||(d=>d),l=this.firestore.collectionGroup(e);return new C5(i(l),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new N3(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ri.Dh),a.LFG(ri.xv,8),a.LFG(M3,8),a.LFG(E5,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Ln.HU),a.LFG(R3,8),a.LFG(D5,8),a.LFG(nc,8),a.LFG(Kx,8),a.LFG(ew,8),a.LFG(tw,8),a.LFG(nw,8),a.LFG(rw,8),a.LFG(iw,8),a.LFG(dy,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),x5=(()=>{class n{constructor(){rm.Z.registerVersion("angularfire",Ln.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:M3,useValue:!0},{provide:R3,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[P3]}),n})(),O3=(()=>{class n{constructor(e,r,i,l){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=l,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,r){return this.afAuth.signInWithEmailAndPassword(e,r)}SignUp(e,r){return this.afAuth.createUserWithEmailAndPassword(e,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=e),null!==e}GoogleAuth(){return this.AuthLogin(new Lf.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("apiKey"),localStorage.removeItem("apiSecret"),window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(P3),a.LFG(nc),a.LFG(ms),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T5=O(9105);function Is(n,t,e,r){return(0,T5.m)(e)&&(r=e,e=void 0),r?Is(n,t,e).pipe((0,wt.U)(i=>(0,Ps.k)(i)?r(...i):r(i))):new zn.y(i=>{F3(n,t,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,e)})}function F3(n,t,e,r,i){let l;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(t,e,i),l=()=>d.removeEventListener(t,e,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(t,e),l=()=>d.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(t,e),l=()=>d.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)F3(n[d],t,e,r,i)}r.add(l)}var zP=O(6561);function N5(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class M5{call(t,e){return e.subscribe(new R5(t))}}class R5 extends Vh{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const l=lr(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(l),this.add(l)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let l=this.subscriptions[i];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(e)}}var k5=O(8640);new zn.y(k5.Z);var uS=O(377);function dS(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,Rc.n)(n,void 0).lift(new P5(t))}class P5{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new O5(t,this.resultSelector))}}class O5 extends fr.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,Ps.k)(t)?e.push(new L5(t)):e.push("function"==typeof t[uS.hZ]?new F5(t[uS.hZ]()):new V5(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let d=0;d<e;d++){let f=t[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const l=[];for(let d=0;d<e;d++){let f=t[d],g=f.next();if(f.hasCompleted()&&(i=!0),g.done)return void r.complete();l.push(g.value)}this.resultSelector?this._tryresultSelector(l):r.next(l),i&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class F5{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class L5{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[uS.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class V5 extends es.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[uS.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,es.ft)(this.observable,new es.IY(this))}}function ui(n){return t=>t.lift(new U5(n))}class U5{constructor(t){this.notifier=t}call(t,e){const r=new H5(t),i=(0,es.ft)(this.notifier,new es.IY(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class H5 extends es.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}O(1593);var z5=O(1555);function hS(n,t){return new zn.y(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let l=0,d=0;for(let f=0;f<r;f++){const g=(0,un.D)(n[f]);let b=!1;e.add(g.subscribe({next:D=>{b||(b=!0,d++),i[f]=D},error:D=>e.error(D),complete:()=>{l++,(l===r||!b)&&(d===r&&e.next(t?t.reduce((D,x,F)=>(D[x]=i[F],D),{}):i),e.complete())}}))}})}let $3=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),Xm=(()=>{class n extends $3{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const Ss=new a.OlP("NgValueAccessor"),K5={provide:Ss,useExisting:(0,a.Gpc)(()=>fS),multi:!0};let fS=(()=>{class n extends Xm{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[a._Bn([K5]),a.qOj]}),n})();const Q5={provide:Ss,useExisting:(0,a.Gpc)(()=>VC),multi:!0},X5=new a.OlP("CompositionEventMode");let VC=(()=>{class n extends $3{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(X5,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&a.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[a._Bn([Q5]),a.qOj]}),n})();const As=new a.OlP("NgValidators"),bp=new a.OlP("NgAsyncValidators");function J3(n){return null!=n}function X3(n){const t=(0,a.QGY)(n)?(0,un.D)(n):n;return(0,a.CqO)(t),t}function eV(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function tV(n,t){return t.map(e=>e(n))}function nV(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function KP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(J3);return 0==t.length?null:function(e){return eV(tV(e,t))}}(nV(n)):null}function QP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(J3);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,Ps.k)(t))return hS(t,null);if((0,z5.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return hS(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return hS(n=1===n.length&&(0,Ps.k)(n[0])?n[0]:n,null).pipe((0,wt.U)(e=>t(...e)))}return hS(n,null)}(tV(e,t).map(X3)).pipe((0,wt.U)(eV))}}(nV(n)):null}function sV(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function JP(n){return n?Array.isArray(n)?n:[n]:[]}function pS(n,t){return Array.isArray(n)?n.includes(t):n===t}function lV(n,t){const e=JP(t);return JP(n).forEach(i=>{pS(e,i)||e.push(i)}),e}function cV(n,t){return JP(t).filter(e=>!pS(n,e))}let uV=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=KP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=QP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n}),n})(),vo=(()=>{class n extends uV{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();class Cp extends uV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let XP=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Cp,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[a.qOj]}),n})();function BC(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(sV(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(sV(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();yS(t._rawValidators,i),yS(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&hV(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&hV(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function yS(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function hV(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function bS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const UC="VALID",wS="INVALID",Ev="PENDING",HC="DISABLED";function sO(n){return(aO(n)?n.validators:n)||null}function gV(n){return Array.isArray(n)?KP(n):n||null}function oO(n,t){return(aO(t)?t.asyncValidators:n)||null}function mV(n){return Array.isArray(n)?QP(n):n||null}function aO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class lO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=gV(this._rawValidators),this._composedAsyncValidatorFn=mV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===UC}get invalid(){return this.status===wS}get pending(){return this.status==Ev}get disabled(){return this.status===HC}get enabled(){return this.status!==HC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=gV(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=mV(t)}addValidators(t){this.setValidators(lV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(lV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(cV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(cV(t,this._rawAsyncValidators))}hasValidator(t){return pS(this._rawValidators,t)}hasAsyncValidator(t){return pS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ev,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=HC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=UC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===UC||this.status===Ev)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?HC:UC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ev,this._hasOwnPendingAsyncValidator=!0;const e=X3(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof cO?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof pH&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?HC:this.errors?wS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ev)?Ev:this._anyControlsHaveStatus(wS)?wS:UC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){aO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class CS extends lO{constructor(t=null,e,r){super(sO(e),oO(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){bS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){bS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class cO extends lO{constructor(t,e,r){super(sO(e),oO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof CS?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,l)=>{r=e(r,i,l)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class pH extends lO{constructor(t,e,r){super(sO(e),oO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof CS?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const _H={provide:Cp,useExisting:(0,a.Gpc)(()=>ES)},vV=(()=>Promise.resolve(null))();let ES=(()=>{class n extends Cp{constructor(e,r,i,l){super(),this.control=new CS,this._registered=!1,this.update=new a.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(l=>{l.constructor===VC?e=l:function(n){return Object.getPrototypeOf(n.constructor)===Xm}(l)?r=l:i=l}),i||r||e||null}(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){BC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){vV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;vV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(vo,9),a.Y36(As,10),a.Y36(bp,10),a.Y36(Ss,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([_H]),a.qOj,a.TTD]}),n})(),wV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const SH={provide:Ss,useExisting:(0,a.Gpc)(()=>jC),multi:!0};function IV(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let jC=(()=>{class n extends Xm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const i=IV(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([SH]),a.qOj]}),n})(),DS=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(IV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(jC,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const NH={provide:Ss,useExisting:(0,a.Gpc)(()=>gO),multi:!0};function SV(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let gO=(()=>{class n extends Xm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(l=>this._getOptionId(l));r=(l,d)=>{l._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let d=0;d<l.length;d++){const f=l.item(d),g=this._getOptionValue(f.value);i.push(g)}}else{const l=r.options;for(let d=0;d<l.length;d++){const f=l.item(d);if(f.selected){const g=this._getOptionValue(f.value);i.push(g)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([NH]),a.qOj]}),n})(),xS=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(SV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(SV(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(gO,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const PH={provide:As,useExisting:(0,a.Gpc)(()=>GC),multi:!0};let GC=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&a.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[a._Bn([PH])]}),n})(),VV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[wV]]}),n})(),BV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[VV]}),n})();const Dv=["*"],I$=["dialog"];function Ep(n){return null!=n}function Tv(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const $V={animation:!0,transitionTimerDelayMs:5};let ls=(()=>{class n{constructor(){this.animation=$V.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Bj=()=>{},{transitionTimerDelayMs:Uj}=$V,qC=new Map,Wi=(n,t,e,r)=>{let i=r.context||{};const l=qC.get(t);if(l)switch(r.runningTransition){case"continue":return mi.E;case"stop":n.run(()=>l.transition$.complete()),i=Object.assign(l.context,i),qC.delete(t)}const d=e(t,r.animation,i)||Bj;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>d()),(0,Dt.of)(void 0).pipe(function(n){return t=>new zn.y(e=>t.subscribe(d=>n.run(()=>e.next(d)),d=>n.run(()=>e.error(d)),()=>n.run(()=>e.complete())))}(n));const f=new Tn.xQ,g=new Tn.xQ,b=f.pipe(function(...n){return t=>eo(t,(0,Dt.of)(...n))}(!0));qC.set(t,{transition$:f,complete:()=>{g.next(),g.complete()},context:i});const D=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const x=Is(t,"transitionend").pipe(ui(b),sr(({target:$})=>$===t));(function(...n){if(1===n.length){if(!(0,Ps.k)(n[0]))return n[0];n=n[0]}return(0,Rc.n)(n,void 0).lift(new M5)})(function(n=0,t,e){let r=-1;return(0,zP.k)(t)?r=Number(t)<1?1:Number(t):(0,sa.K)(t)&&(e=t),(0,sa.K)(e)||(e=zc.P),new zn.y(i=>{const l=(0,zP.k)(n)?n:+n-e.now();return e.schedule(N5,l,{index:0,period:r,subscriber:i})})}(D+Uj).pipe(ui(b)),x,g).pipe(ui(b)).subscribe(()=>{qC.delete(t),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var Dn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Dn||(Dn={})),Dn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const sB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function oB(n){const t=Array.from(n.querySelectorAll(sB)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const l=this.offsetParent(t);r=this.offset(t,!1),l!==document.documentElement&&(i=this.offset(l,!1)),i.top+=l.clientTop,i.left+=l.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let l={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(l.height=Math.round(l.height),l.width=Math.round(l.width),l.top=Math.round(l.top),l.bottom=Math.round(l.bottom),l.left=Math.round(l.left),l.right=Math.round(l.right)),l}positionElements(t,e,r,i){const[l="top",d="center"]=r.split("-"),f=i?this.offset(t,!1):this.position(t,!1),g=this.getAllStyles(e),b=parseFloat(g.marginTop),D=parseFloat(g.marginBottom),x=parseFloat(g.marginLeft),F=parseFloat(g.marginRight);let $=0,re=0;switch(l){case"top":$=f.top-(e.offsetHeight+b+D);break;case"bottom":$=f.top+f.height;break;case"left":re=f.left-(e.offsetWidth+x+F);break;case"right":re=f.left+f.width}switch(d){case"top":$=f.top;break;case"bottom":$=f.top+f.height-e.offsetHeight;break;case"left":re=f.left;break;case"right":re=f.left+f.width-e.offsetWidth;break;case"center":"top"===l||"bottom"===l?re=f.left+f.width/2-e.offsetWidth/2:$=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(re)}px, ${Math.round($)}px)`;const ge=e.getBoundingClientRect(),Me=document.documentElement,Qe=window.innerHeight||Me.clientHeight,st=window.innerWidth||Me.clientWidth;return ge.left>=0&&ge.top>=0&&ge.right<=st&&ge.bottom<=Qe}},new Date(1882,10,12),new Date(2174,10,25);let VS=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ls))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ls))},token:n,providedIn:"root"}),n})();class s0{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const LG=()=>{};let wB=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):LG}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,l=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${l+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ee))},token:n,providedIn:"root"}),n})(),VG=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(Ci(1)).subscribe(()=>{Wi(this._zone,this._el.nativeElement,(e,r)=>{r&&Tv(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Wi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(a.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),a.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class CB{close(t){}dismiss(t){}}class BG{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Tn.xQ,this._dismissed=new Tn.xQ,this._hidden=new Tn.xQ,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,d)=>{this._resolve=l,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ui(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ui(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Dt.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),dS(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var JC=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(JC||(JC={})),JC))();let UG=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new Tn.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Tn.xQ,this.hidden=new Tn.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Ci(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=dS(Wi(this._zone,e,()=>e.classList.remove("show"),r),Wi(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};dS(Wi(this._zone,this._elRef.nativeElement,(l,d)=>{d&&Tv(l),l.classList.add("show")},e),Wi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Is(e,"keydown").pipe(ui(this._closed$),sr(i=>i.which===Dn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(JC.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Is(this._dialogEl.nativeElement,"mousedown").pipe(ui(this._closed$),(0,br.b)(()=>r=!1),pr(()=>Is(e,"mouseup").pipe(ui(this._closed$),Ci(1))),sr(({target:i})=>e===i)).subscribe(()=>{r=!0}),Is(e,"click").pipe(ui(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(JC.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=oB(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Wi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(ee),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&a.Gf(I$,7),2&e){let i;a.iGM(i=a.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(a.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),a.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),a.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Dv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(a.F$t(),a.TgZ(0,"div",0,1),a.TgZ(2,"div",2),a.Hsn(3),a.qZA(),a.qZA()),2&e&&a.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),EB=(()=>{class n{constructor(e,r,i,l,d,f){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=l,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new Tn.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const g=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=Is(t,"focusin").pipe(ui(e),(0,wt.U)(l=>l.target));Is(t,"keydown").pipe(ui(e),sr(l=>l.which===Dn.Tab),gb(i)).subscribe(([l,d])=>{const[f,g]=oB(t);(d===f||d===t)&&l.shiftKey&&(g.focus(),l.preventDefault()),d===g&&!l.shiftKey&&(f.focus(),l.preventDefault())}),r&&Is(t,"click").pipe(ui(e),gb(i),(0,wt.U)(l=>l[1])).subscribe(l=>l.focus())})})(this._ngZone,g.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(g.location.nativeElement)}})}open(e,r,i,l){const d=l.container instanceof HTMLElement?l.container:Ep(l.container)?this._document.querySelector(l.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),g=this._scrollBar.compensate(),b=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);const D=new CB,x=this._getContentRef(e,l.injector||r,i,D,l);let F=!1!==l.backdrop?this._attachBackdrop(e,d):void 0,$=this._attachWindowComponent(e,d,x),re=new BG($,x,F,l.beforeDismiss);return this._registerModalRef(re),this._registerWindowCmpt($),re.result.then(g,g),re.result.then(b,b),D.close=ge=>{re.close(ge)},D.dismiss=ge=>{re.dismiss(ge)},this._applyWindowOptions($.instance,l),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),F&&F.instance&&(this._applyBackdropOptions(F.instance,l),F.changeDetectorRef.detectChanges()),$.changeDetectorRef.detectChanges(),re}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let l=e.resolveComponentFactory(VG).create(this._injector);return this._applicationRef.attachView(l.hostView),r.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,r,i){let d=e.resolveComponentFactory(UG).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{Ep(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{Ep(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,l,d){return i?i instanceof a.Rgc?this._createFromTemplateRef(i,l):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,l,d):new s0([])}_createFromTemplateRef(e,r){const l=e.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(l),new s0([l.rootNodes],l)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new s0([[r]])}_createFromComponent(e,r,i,l,d){const f=e.resolveComponentFactory(i),g=a.zs3.create({providers:[{provide:CB,useValue:l}],parent:r}),b=f.create(g),D=b.location.nativeElement;return d.scrollable&&D.classList.add("component-host-scrollable"),this._applicationRef.attachView(b.hostView),new s0([[D]],b.hostView,b)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(ee),a.LFG(wB),a.LFG(a.FYo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.z2F),a.LFG(a.gxx),a.LFG(ee),a.LFG(wB),a.LFG(a.FYo),a.LFG(a.R0b))},token:n,providedIn:"root"}),n})(),AO=(()=>{class n{constructor(e,r,i,l){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=l}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(EB),a.LFG(VS))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a._Vd),a.LFG(a.gxx),a.LFG(EB),a.LFG(VS))},token:n,providedIn:"root"}),n})();new a.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});class QB{}class JB{}class vh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),l=i.toLowerCase(),d=e.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof vh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new vh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof vh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const l=t.value;if(l){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===l.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class D7{encodeKey(t){return XB(t)}encodeValue(t){return XB(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const T7=/%(\d[a-f0-9])/gi,I7={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function XB(n){return encodeURIComponent(n).replace(T7,(t,e)=>{var r;return null!==(r=I7[e])&&void 0!==r?r:t})}function e6(n){return`${n}`}class xp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new D7,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[d,f]=-1==l?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,l)),t.decodeValue(i.slice(l+1))],g=e.get(d)||[];g.push(f),e.set(d,g)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(l=>{e.push({param:r,value:l,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new xp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(e6(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(e6(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class S7{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function t6(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function n6(n){return"undefined"!=typeof Blob&&n instanceof Blob}function r6(n){return"undefined"!=typeof FormData&&n instanceof FormData}class XC{constructor(t,e,r,i){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new vh),this.context||(this.context=new S7),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new xp,this.urlWithParams=e}serializeBody(){return null===this.body?null:t6(this.body)||n6(this.body)||r6(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||r6(this.body)?null:n6(this.body)?this.body.type||null:t6(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,l=t.responseType||this.responseType,d=void 0!==t.body?t.body:this.body,f=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,g=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let b=t.headers||this.headers,D=t.params||this.params;const x=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(b=Object.keys(t.setHeaders).reduce((F,$)=>F.set($,t.setHeaders[$]),b)),t.setParams&&(D=Object.keys(t.setParams).reduce((F,$)=>F.set($,t.setParams[$]),D)),new XC(r,i,d,{params:D,headers:b,context:x,reportProgress:g,responseType:l,withCredentials:f})}}var Pi=(()=>((Pi=Pi||{})[Pi.Sent=0]="Sent",Pi[Pi.UploadProgress=1]="UploadProgress",Pi[Pi.ResponseHeader=2]="ResponseHeader",Pi[Pi.DownloadProgress=3]="DownloadProgress",Pi[Pi.Response=4]="Response",Pi[Pi.User=5]="User",Pi))();class kO{constructor(t,e=200,r="OK"){this.headers=t.headers||new vh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class PO extends kO{constructor(t={}){super(t),this.type=Pi.ResponseHeader}clone(t={}){return new PO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class BS extends kO{constructor(t={}){super(t),this.type=Pi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new BS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class i6 extends kO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function OO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let FO=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let l;if(e instanceof XC)l=e;else{let g,b;g=i.headers instanceof vh?i.headers:new vh(i.headers),i.params&&(b=i.params instanceof xp?i.params:new xp({fromObject:i.params})),l=new XC(e,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=(0,Dt.of)(l).pipe(Oc(g=>this.handler.handle(g)));if(e instanceof XC||"events"===i.observe)return d;const f=d.pipe(sr(g=>g instanceof BS));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,wt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));case"json":default:return f.pipe((0,wt.U)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new xp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,OO(i,r))}post(e,r,i={}){return this.request("POST",e,OO(i,r))}put(e,r,i={}){return this.request("PUT",e,OO(i,r))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(QB))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class s6{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const o6=new a.OlP("HTTP_INTERCEPTORS");let M7=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const R7=/^\)\]\}',?\n/;let a6=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zn.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach(($,re)=>i.setRequestHeader($,re.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const $=e.detectContentTypeHeader();null!==$&&i.setRequestHeader("Content-Type",$)}if(e.responseType){const $=e.responseType.toLowerCase();i.responseType="json"!==$?$:"text"}const l=e.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const $=1223===i.status?204:i.status,re=i.statusText||"OK",ge=new vh(i.getAllResponseHeaders()),Me=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return d=new PO({headers:ge,status:$,statusText:re,url:Me}),d},g=()=>{let{headers:$,status:re,statusText:ge,url:Me}=f(),Qe=null;204!==re&&(Qe=void 0===i.response?i.responseText:i.response),0===re&&(re=Qe?200:0);let st=re>=200&&re<300;if("json"===e.responseType&&"string"==typeof Qe){const pt=Qe;Qe=Qe.replace(R7,"");try{Qe=""!==Qe?JSON.parse(Qe):null}catch(mt){Qe=pt,st&&(st=!1,Qe={error:mt,text:Qe})}}st?(r.next(new BS({body:Qe,headers:$,status:re,statusText:ge,url:Me||void 0})),r.complete()):r.error(new i6({error:Qe,headers:$,status:re,statusText:ge,url:Me||void 0}))},b=$=>{const{url:re}=f(),ge=new i6({error:$,status:i.status||0,statusText:i.statusText||"Unknown Error",url:re||void 0});r.error(ge)};let D=!1;const x=$=>{D||(r.next(f()),D=!0);let re={type:Pi.DownloadProgress,loaded:$.loaded};$.lengthComputable&&(re.total=$.total),"text"===e.responseType&&!!i.responseText&&(re.partialText=i.responseText),r.next(re)},F=$=>{let re={type:Pi.UploadProgress,loaded:$.loaded};$.lengthComputable&&(re.total=$.total),r.next(re)};return i.addEventListener("load",g),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),e.reportProgress&&(i.addEventListener("progress",x),null!==l&&i.upload&&i.upload.addEventListener("progress",F)),i.send(l),r.next({type:Pi.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",g),i.removeEventListener("timeout",b),e.reportProgress&&(i.removeEventListener("progress",x),null!==l&&i.upload&&i.upload.removeEventListener("progress",F)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Ou))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const LO=new a.OlP("XSRF_COOKIE_NAME"),VO=new a.OlP("XSRF_HEADER_NAME");class l6{}let P7=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yr(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee),a.LFG(a.Lbi),a.LFG(LO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),BO=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(l6),a.LFG(VO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),O7=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(o6,[]);this.chain=r.reduceRight((i,l)=>new s6(i,l),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(JB),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),F7=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:BO,useClass:M7}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:LO,useValue:e.cookieName}:[],e.headerName?{provide:VO,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[BO,{provide:o6,useExisting:BO,multi:!0},{provide:l6,useClass:P7},{provide:LO,useValue:"XSRF-TOKEN"},{provide:VO,useValue:"X-XSRF-TOKEN"}]}),n})(),L7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[FO,{provide:QB,useClass:O7},a6,{provide:JB,useExisting:a6}],imports:[[F7.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),c6=(()=>{class n{constructor(){this.selfId=so.defaultRandomString(7)}ngOnInit(){setTimeout(()=>{this.showTime()},1e3)}showTime(){this.time=wr().format("HH:mm:ss"),setTimeout(()=>this.showTime(),1e3)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["digital-clock-ui"]],decls:2,vars:2,consts:[[2,"position","absolute","top","50%","left","50%","transform","translateX(-50%) translateY(-50%)","color","#17D4FE","font-size","25px","letter-spacing","7px",3,"id"]],template:function(e,r){1&e&&(a.TgZ(0,"div",0),a._uU(1),a.qZA()),2&e&&(a.Q6J("id",r.selfId),a.xp6(1),a.Oqu(r.time))},encapsulation:2}),n})();var V7=O(5416),B7=O(6472);let U7=(()=>{class n{constructor(){this.getMovingAverage=(e=[])=>{const r=[];let i=0,l=0;for(let d=0;d<e.length;d++)i+=e[d],l++,r[d]=i/l;return r}}mapCandleToMediasMoveis(e=[],r){let i=[];return e.forEach(l=>{let d=(parseFloat(l[1])+parseFloat(l[4]))/2,f=r;d=parseFloat(d.toString().substr(0,f)),i.push({data:wr(l[0]/1e3).toDate().getTime(),mediana:d,MA5:0,MA12:0,MA26:0})}),this.fillMA5(i,r),this.fillMA12(i,r),this.fillM26(i,r),i}fillMA5(e=[],r){let i=[];for(let d=e.length-5;d<e.length;d++)i.push(e[d]);let l=r;i=this.getMovingAverage(i.map(d=>d.mediana));for(let d=e.length-5;d<e.length;d++){let f=i.shift();f=parseFloat(f.toString().substr(0,l)),e[d].MA5=f}}fillMA12(e=[],r){let i=[];for(let d=e.length-12;d<e.length;d++)i.push(e[d]);i=this.getMovingAverage(i.map(d=>d.mediana));let l=r;for(let d=e.length-12;d<e.length;d++){let f=i.shift();f=parseFloat(f.toString().substr(0,l)),e[d].MA12=f}}fillM26(e=[],r){let i=e.map(f=>f.mediana),l=this.getMovingAverage(i),d=r;e.forEach((f,g)=>{let b=l[g];b=parseFloat(b.toString().substr(0,d)),f.MA26=b})}calculateSMA(e,r){for(var i=function(b){for(var D=0,x=0;x<b.length;x++)D+=b[x].mediana;return D/b.length},l=[],d=r-1,f=e.length;d<f;d++){var g=i(e.slice(d-r+1,d));l.push({time:e[d].data,value:g})}return l}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();wr.extend(B7),wr.extend(V7);let H7=(()=>{class n{constructor(e,r){this.IndicadoresUtilsService=e,this.priceMarkerListenerService=r,this.selfId=so.defaultRandomString(7),this.mediasAdicionadas=!1,this.binance5minCandleDataList=[],this.binance1minCandleDataList=[],this.coinPriceLength=0,this.chartProperties={timeScale:{timeVisible:!0,secondsVisible:!1},crosshair:{mode:LightweightCharts.CrosshairMode.Normal},layout:{textColor:"white",background:{type:"solid",color:"#2c333a"}},grid:{vertLines:{color:"rgba(42, 46, 57, 0)"},horzLines:{color:"rgba(42, 46, 57, 0)"}}}}set coinWatcherModel(e){this.coinWatcher=e,this.coinWatcher&&this.loadCandleChart()}set sinalInput(e){this.sinal=e}ngOnDestroy(){this.socketSubscription&&this.socketSubscription.unsubscribe()}ngOnInit(){}loadCandleChart(){this.sinal?(this.coinPriceLength=sg.PriceCoinMap[this.sinal.moeda].price.length,setTimeout(()=>{var r,i,l;if(this.coinWatcher&&(null===(r=this.coinWatcher)||void 0===r?void 0:r.coin5minSocket)&&this.coinWatcher.binance5minCandleDataList&&this.coinWatcher.binance5minCandleDataList.length>0){this.binance5minCandleDataList=this.coinWatcher.binance5minCandleDataList;let d=this.IndicadoresUtilsService.mapCandleToMediasMoveis(this.binance5minCandleDataList,this.coinPriceLength);const f=document.getElementById(this.selfId);this.chart||(this.chart=LightweightCharts.createChart(f,this.chartProperties),this.candleChart=this.chart.addCandlestickSeries({upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350"}));const g=this.binance5minCandleDataList.map($=>({time:$[0]/1e3,open:parseFloat($[1]),high:parseFloat($[2]),low:parseFloat($[3]),close:parseFloat($[4])}));this.candleChart.setData(g);let b=parseFloat(null===(i=this.sinal)||void 0===i?void 0:i.entradas[0].valor);this.minPriceLine||(this.minPriceLine={price:b,color:"LONG"===(null===(l=this.sinal)||void 0===l?void 0:l.tipo)?"#23be12":"#be1238",lineWidth:2,lineStyle:LightweightCharts.LineStyle.Solid,axisLabelVisible:!0,title:"Entrada "+b},this.candleChart.createPriceLine(this.minPriceLine)),!this.smaLine5&&(this.smaLine5=this.chart.addLineSeries({color:"rgb(91,215,7)",lineWidth:1})),!this.smaLine12&&(this.smaLine12=this.chart.addLineSeries({color:"rgb(255,236,84)",lineWidth:1})),!this.smaLine26&&(this.smaLine26=this.chart.addLineSeries({color:"rgb(248,4,67)",lineWidth:1}));let D=this.IndicadoresUtilsService.calculateSMA(d,5),x=this.IndicadoresUtilsService.calculateSMA(d,12),F=this.IndicadoresUtilsService.calculateSMA(d,26);this.smaLine5.setData(D),this.smaLine12.setData(x),this.smaLine26.setData(F),this.socketSubscription||(this.socketSubscription=this.coinWatcher.coin5minSocket.subscribe($=>{let re=$.k,ge={time:re.t/1e3,open:parseFloat(re.o),high:parseFloat(re.h),low:parseFloat(re.l),close:parseFloat(re.c)};this.candleChart.update(ge),re.x&&this.loadCandleChart()}))}else setTimeout(()=>{this.loadCandleChart()},1e3)},1e3)):setTimeout(()=>{this.loadCandleChart()},200)}}return n.chars="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n.\u0275fac=function(e){return new(e||n)(a.Y36(U7),a.Y36(sg))},n.\u0275cmp=a.Xpm({type:n,selectors:[["lightweight-chart-comp"]],inputs:{coinWatcherModel:["coin-watcher","coinWatcherModel"],sinalInput:["sinal-input","sinalInput"]},decls:1,vars:1,consts:[[2,"height","100%","width","100%",3,"id"]],template:function(e,r){1&e&&a._UZ(0,"div",0),2&e&&a.Q6J("id",r.selfId)},encapsulation:2}),n})();function $7(n,t){1&n&&a._UZ(0,"div",17)}function j7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",28),a.TgZ(1,"div",29),a.TgZ(2,"input",30),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.valor=i}),a.qZA(),a.qZA(),a.TgZ(3,"div",29),a.TgZ(4,"input",31),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.descricao=i}),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(2),a.Q6J("ngModel",e.valor),a.xp6(2),a.Q6J("ngModel",e.descricao)}}function G7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",18),a.TgZ(1,"div",9),a.TgZ(2,"label",19),a._uU(3,"Data"),a.qZA(),a.TgZ(4,"input",20),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.data=i}),a.qZA(),a.qZA(),a.TgZ(5,"div",9),a.TgZ(6,"label",19),a._uU(7,"Moeda"),a.qZA(),a.TgZ(8,"input",21),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.moeda=i}),a.qZA(),a.qZA(),a.TgZ(9,"div",9),a.TgZ(10,"label",19),a._uU(11,"Tipo"),a.qZA(),a.TgZ(12,"select",22),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.tipo=i}),a.TgZ(13,"option",23),a._uU(14,"LONG"),a.qZA(),a.TgZ(15,"option",24),a._uU(16,"SHORT"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",9),a.TgZ(18,"label",19),a._uU(19,"Entradas"),a.qZA(),a.YNc(20,j7,5,2,"div",25),a.qZA(),a.TgZ(21,"div",9),a.TgZ(22,"button",26),a.NdJ("click",function(){return a.CHM(e),a.oxw().salvarEntrada()}),a._uU(23,"Salvar"),a.qZA(),a.TgZ(24,"button",27),a.NdJ("click",function(){return a.CHM(e),a.oxw().showFormNovoSinal=!1}),a._uU(25,"Cancelar"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngModel",e.sinalModel.data),a.xp6(4),a.Q6J("ngModel",e.sinalModel.moeda),a.xp6(4),a.Q6J("ngModel",e.sinalModel.tipo),a.xp6(8),a.Q6J("ngForOf",e.sinalModel.entradas)}}function Z7(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw(2);a.xp6(1),a.hij("$: ",e.priceCoin,"")}}function q7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",44),a.TgZ(1,"span",45),a.NdJ("click",function(){a.CHM(e);const i=a.oxw(2);return i.copyEntry(null==i.sinal?null:i.sinal.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw(2);a.xp6(2),a.hij(" Sugest\xe3o entrada ",null==e.sinal?null:e.sinal.sugestao,"")}}function W7(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(4);a.xp6(1),a.hij(" ",":: "+(null==e.sinal?null:e.sinal.priceCoinPercentage)+"%"," ")}}function z7(n,t){if(1&n&&(a.TgZ(0,"div",48),a._UZ(1,"i",49),a.TgZ(2,"small"),a._uU(3),a.YNc(4,W7,2,1,"ng-container",15),a.qZA(),a.qZA()),2&n){const e=a.oxw(3);a.xp6(3),a.hij("",e.priceCoin," "),a.xp6(1),a.Q6J("ngIf",null==e.sinal?null:e.sinal.priceCoinPercentage)}}function Y7(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(4);a.xp6(1),a.hij(" ",":: "+(null==e.sinal?null:e.sinal.priceCoinPercentage)+"%"," ")}}function K7(n,t){if(1&n&&(a.TgZ(0,"div",48),a._UZ(1,"i",49),a.TgZ(2,"small"),a._uU(3),a.YNc(4,Y7,2,1,"ng-container",15),a.qZA(),a.qZA()),2&n){const e=a.oxw(3);a.xp6(3),a.hij("",e.priceCoin," "),a.xp6(1),a.Q6J("ngIf",null==e.sinal?null:e.sinal.priceCoinPercentage)}}function Q7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,z7,5,2,"div",46),a.TgZ(2,"div"),a._UZ(3,"i",47),a.TgZ(4,"span",45),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,K7,5,2,"div",46),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw(2);a.xp6(1),a.Q6J("ngIf",i.priceCoin&&(null==i.sinal?null:i.sinal.indexPricePosition)===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",i.priceCoin&&r==(null==i.sinal?null:i.sinal.entradas.length)-1&&("LONG"===(null==i.sinal?null:i.sinal.tipo)&&i.priceCoin>i.castPrice(e.valor)||"SHORT"===(null==i.sinal?null:i.sinal.tipo)&&i.priceCoin<i.castPrice(e.valor)))}}function J7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",32),a._UZ(1,"i",33),a.TgZ(2,"h5",34),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"h5"),a.YNc(6,Z7,2,1,"span",15),a.qZA(),a.TgZ(7,"h6",35),a._uU(8),a.ALo(9,"date"),a.qZA(),a.YNc(10,q7,4,1,"div",36),a.TgZ(11,"div"),a.TgZ(12,"ul",37),a.YNc(13,Q7,8,5,"li",38),a.qZA(),a.qZA(),a.TgZ(14,"div"),a.TgZ(15,"div",39),a.TgZ(16,"button",40),a.NdJ("click",function(){return a.CHM(e),a.oxw().comprarAlerta()}),a._uU(17," Comprar "),a.qZA(),a.qZA(),a.TgZ(18,"div",41),a.TgZ(19,"button",42),a.NdJ("click",function(){a.CHM(e);const i=a.oxw();return i.editarSinal(i.sinal)}),a._UZ(20,"i",43),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(1),a.Q6J("ngClass",e.checkSinalBloqueado()?"fa-lock":"fa-unlock"),a.xp6(3),a.Oqu(null==e.sinal?null:e.sinal.moeda),a.xp6(2),a.Q6J("ngIf",e.priceCoin),a.xp6(1),a.Q6J("ngClass","LONG"===(null==e.sinal?null:e.sinal.tipo)?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",null==e.sinal?null:e.sinal.tipo," - ",a.xi3(9,8,null==e.sinal?null:e.sinal.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",null==e.sinal?null:e.sinal.sugestao),a.xp6(3),a.Q6J("ngForOf",null==e.sinal?null:e.sinal.entradas)}}function X7(n,t){if(1&n&&(a.ynx(0),a._UZ(1,"lightweight-chart-comp",50),a.BQk()),2&n){const e=a.oxw();a.xp6(1),a.Q6J("coin-watcher",e.coinWatcher)("sinal-input",e.sinal)}}function eZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",56),a.TgZ(1,"div",57),a.TgZ(2,"div",57),a.TgZ(3,"div",57,58),a.TgZ(5,"div",59),a.TgZ(6,"label"),a._uU(7,"Valor entrada em USDT"),a.qZA(),a.TgZ(8,"input",60),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw(2).configuracaoRobo.valorEntradaUsdt=i}),a.qZA(),a.qZA(),a.TgZ(9,"div",59),a.TgZ(10,"label"),a._uU(11,"M\xe1ximo de rob\xf4s ativos"),a.qZA(),a.TgZ(12,"input",61),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw(2).configuracaoRobo.maximoRobosAtivos=i}),a.qZA(),a.qZA(),a.TgZ(13,"div",62),a.TgZ(14,"input",63),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw(2).configuracaoRobo.ativo=i}),a.qZA(),a.TgZ(15,"label",64),a._uU(16," Ativo "),a.qZA(),a.qZA(),a.TgZ(17,"div",59),a.TgZ(18,"button",65),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw().salvarConfiguracacaoRobo(i)}),a._uU(19," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw(2);a.xp6(8),a.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),a.xp6(4),a.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),a.xp6(2),a.Q6J("ngModel",e.configuracaoRobo.ativo)}}function tZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",51),a.TgZ(1,"h4",52),a._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),a.qZA(),a.TgZ(3,"button",53),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",54),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.YNc(6,eZ,20,3,"div",55)}if(2&n){const e=a.oxw();a.xp6(6),a.Q6J("ngIf",e.configuracaoRobo)}}let nZ=(()=>{class n{constructor(e,r,i,l,d,f,g,b,D){this.db=e,this.AuthService=r,this.modalService=i,this.titleService=l,this.cdr=d,this.config=f,this.http=g,this.activatedRoute=b,this.priceMarkerListenerService=D,this.myHeaders=new Headers,this.myInit=null,this.showFormNovoSinal=!1,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.sinaisList=[],this.priceCoin=0,this.umPorCento=0,this.castPrice=so.castPrice,this.copyEntry=so.copyEntry,this.editandoSinalIdx=-1,this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{this.loadSinal(e.sinalId)})}salvarConfiguracacaoRobo(e){var r=this;return(0,He.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt.toString()),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos.toString()),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}salvarEntrada(){let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase().trim(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}comprarAlerta(){let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret");e&&r||window.toastr.error("Erro","Sem configura\xe7\xe3o da binance")}loadSinal(e){this.AuthService.userData?Promise.all([this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).query.once("value"),this.db.list("/sinais/"+e).query.once("value")]).then(r=>{let i=r[0].val(),l=r[1].val();i&&(this.configuracaoRobo=i),l&&(this.sinal=l,this.sinaisList.push(this.sinal),this.umPorCento="LONG"===this.sinal.tipo?(this.sinal.entradas[this.sinal.entradas.length-1].valor-this.sinal.entradas[0].valor)/100:(this.sinal.entradas[0].valor-this.sinal.entradas[this.sinal.entradas.length-1].valor)/100,this.titleService.setTitle(this.sinal.moeda+" :: "+this.sinal.tipo),this.setupCoinWatcher())}):setTimeout(()=>{this.loadSinal(e)},200)}setupCoinWatcher(){this.priceMarkerListenerService.populatePriceCoinMap().then(()=>{this.coinWatcher=new s2(this.sinal,this.http,sg.PriceCoinMap[this.sinal.moeda].price.length,this.configuracaoRobo),this.coinWatcher.priceUpdateEmitter.subscribe(e=>{this.priceCoin=parseFloat(e.price),this.titleService.setTitle(this.sinal.moeda+" :: "+this.sinal.tipo+" "+this.sinal.priceCoinPercentage+" %"),this.updatePricePositionOnSinais()})},e=>{setTimeout(()=>{this.setupCoinWatcher()},1e3)})}editarSinal(e){this.editandoSinalIdx=1,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}updatePricePositionOnSinais(){let e=this.priceCoin;if(e>0){let r=-1;if("LONG"===this.sinal.tipo)if(e>this.sinal.entradas[0].valor){let i=e-parseFloat(this.sinal.entradas[0].valor);this.sinal.priceCoinPercentage=(i/this.umPorCento).toFixed(2)}else this.sinal.priceCoinPercentage=0;else this.sinal.priceCoinPercentage=e<this.sinal.entradas[0].valor?(100-(e-this.sinal.entradas[this.sinal.entradas.length-1].valor)/this.umPorCento).toFixed(2):0;for(let i=0;i<this.sinal.entradas.length;i++){let d=parseFloat(this.sinal.entradas[i].valor);if("LONG"===this.sinal.tipo){if(0==i||i===this.sinal.entradas.length-1){if(e<=d){r=i;break}if(i===this.sinal.entradas.length-1&&e>d){r=1e3;break}continue}if(e>=parseFloat(this.sinal.entradas[i-1].valor)&&e<=d){r=i;break}}else if("SHORT"===this.sinal.tipo){if(0==i||i===this.sinal.entradas.length-1){if(e>=d){r=i;break}if(i===this.sinal.entradas.length-1&&e<d){r=1e3;break}continue}if(e<=parseFloat(this.sinal.entradas[i-1].valor)&&e>=d){r=i;break}}}this.sinal.indexPricePosition=r}}checkSinalBloqueado(){let e=!1;return this.sinal&&this.configuracaoRobo&&this.configuracaoRobo.sinaisBloqueadosList&&(e=this.configuracaoRobo.sinaisBloqueadosList.indexOf(this.sinal.id)>-1),e}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(hy),a.Y36(O3),a.Y36(AO),a.Y36(Oh),a.Y36(a.sBO),a.Y36(VS),a.Y36(FO),a.Y36(Vl),a.Y36(sg))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-coinbot"]],decls:20,vars:5,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[1,"m-5"],["role","main",1,"",2,"margin-top","100px"],[1,"h-100"],["class","col-md-8 col-lg-6",4,"ngIf"],[1,"row","h-100"],[1,"col-2"],[1,"mb-3"],[2,"overflow-y","auto","max-height","80vh"],[1,"row","ml-3"],[1,"card","w-100",3,"ngClass"],["class","card-body",4,"ngIf"],[1,"col-10",2,"height","85vh","width","100vw"],[4,"ngIf"],["modalConfiguracaoRobo",""],[1,"text-center"],[1,"col-md-8","col-lg-6"],[1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-body"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass"],[1,"card-title"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","text-success",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"float-left"],[1,"btn","btn-button","btn-sm","btn-success","mr-3",3,"click"],[1,"float-right"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"text-success"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],[3,"coin-watcher","sinal-input"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","modal-body",4,"ngIf"],[1,"modal-body"],[1,""],["formLogin",""],[1,"form-group"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"]],template:function(e,r){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.YNc(2,$7,1,0,"div",2),a.TgZ(3,"div",3),a._UZ(4,"digital-clock-ui"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"main",4),a.TgZ(6,"section",5),a.TgZ(7,"div",1),a.YNc(8,G7,26,4,"div",6),a.qZA(),a.TgZ(9,"div",7),a.TgZ(10,"div",8),a._UZ(11,"div",9),a.TgZ(12,"div",10),a.TgZ(13,"div",11),a.TgZ(14,"div",12),a.YNc(15,J7,21,11,"div",13),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"div",14),a.YNc(17,X7,2,2,"ng-container",15),a.qZA(),a.qZA(),a.qZA(),a.YNc(18,tZ,7,1,"ng-template",null,16,a.W1O),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(6),a.Q6J("ngIf",r.showFormNovoSinal),a.xp6(6),a.Q6J("ngClass","LONG"===(null==r.sinal?null:r.sinal.tipo)?"border-long":"border-short"),a.xp6(1),a.Q6J("ngIf",r.sinal),a.xp6(2),a.Q6J("ngIf",r.sinal&&r.coinWatcher&&r.coinWatcher.coin5minSocket))},directives:[Rr,c6,Ys,VC,XP,ES,jC,DS,xS,tn,H7,GC,fS],pipes:[yl],styles:[""]}),n})();function u6(n=0,t=zc.P){return(!(0,zP.k)(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=zc.P),new zn.y(e=>(e.add(t.schedule(rZ,n,{subscriber:e,counter:0,period:n})),e))}function rZ(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}var iZ=O(6355);class sZ{constructor(t,e,r){this.sinal=t,this.http=e,this.appComponent=r,this._1second=1e3,this._5seconds=5*this._1second,this._5minutes=60*this._1second*5,this._valorEntrada=0,this._lastCoinPrice=0,this.umPorCento=0,this._20PorCento=0,this.binance5minCandleDataList=[],this.binance1minCandleDataList=[],this.mediana1minCandleList=[],this.mediana5minCandleList=[],this._minutoAtual=0,this.getMovingAverage=(i=[])=>{const l=[];let d=0,f=0;for(let g=0;g<i.length;g++)d+=i[g],f++,l[g]=d/f;return l},this._valorEntrada=parseFloat(t.entradas[0].valor),this.umPorCento="LONG"===t.tipo?(parseFloat(t.entradas[t.entradas.length-1].valor)-parseFloat(t.entradas[0].valor))/100:(parseFloat(t.entradas[0].valor)-parseFloat(t.entradas[t.entradas.length-1].valor))/100,this._20PorCento=20*this.umPorCento,this.updateCandleDataList()}stop(){}update(t){this.sinal.indexPricePosition=t.indexPricePosition,this.sinal.priceCoinPercentage=t.priceCoinPercentage}verificarCompra(){let t=null;t="LONG"===this.sinal.tipo?this.verificarLong():this.verificarShort(),t&&t.canBuy&&this.acionarAlerta(t.tipo)}verificarStartRobo(){}acionarAlerta(t){let e={};e.sinal=this.sinal,e.id=this.sinal.moeda+this.sinal.tipo,e.dataHora=wr().format("DD/MM/YYYY HH:mm:ss"),e.tipo=t,this.appComponent.acionarAlerta(e)}updateCandleDataList(){if(!this.sinal.priceCoin)return;let e=this;this.http.get(`https://api.binance.com/api/v3/klines?symbol=${this.sinal.moeda}&interval=5m&limit=200`).subscribe(i=>{this.binance5minCandleDataList=i,this.mediana5minCandleList=this.mapCandleResult(this.binance5minCandleDataList),this.fillMA5(this.mediana5minCandleList),this.fillMA12(this.mediana5minCandleList),this.fillM26(this.mediana5minCandleList),this.coin5minSocket||(this.coin5minSocket=_a(`wss://fstream.binance.com/ws/${this.sinal.moeda.toLowerCase()}@kline_5m`),this.coin5minSocket.subscribe(l=>{e.update5minLastCandle(l)},l=>{console.error(l)}))},i=>console.error(i)),this.http.get(`https://api.binance.com/api/v3/klines?symbol=${this.sinal.moeda}&interval=1m&limit=52`).subscribe(i=>{this.binance1minCandleDataList=i,this.mediana1minCandleList=this.mapCandleResult(this.binance1minCandleDataList),this.fillMA5(this.mediana1minCandleList),this.fillMA12(this.mediana1minCandleList),this.fillM26(this.mediana1minCandleList),this.coin1minSocket||(this.coin1minSocket=_a(`wss://fstream.binance.com/ws/${this.sinal.moeda.toLowerCase()}@kline_1m`),this.coin1minSocket.subscribe(l=>{e.update1minLastCandle(l,e)},l=>{console.error(l)}))},i=>console.error(i))}update5minLastCandle(t){let e=t.k;if(e.x)this.updateCandleDataList(),this._minutoAtual=0;else{let r=[];r[0]=e.t,r[1]=e.o,r[2]=e.h,r[3]=e.l,r[4]=e.c,r[5]=e.T,this.binance5minCandleDataList[this.binance5minCandleDataList.length-1]=r}}update1minLastCandle(t,e){let r=t.k;if(r.x)this.updateCandleDataList(),this._minutoAtual++;else{let i=[];i[0]=r.t,i[1]=r.o,i[2]=r.h,i[3]=r.l,i[4]=r.c,i[5]=r.T,this._lastCoinPrice=parseFloat(r.c),e.binance1minCandleDataList[e.binance1minCandleDataList.length-1]=i,this.verificarCompra()}}getMACD(t=[]){let l=this.appComponent.sinaisMap[this.sinal.id].priceCoin.toString(),d=l.indexOf("."),f=l.substr(d+1).length,g=(0,iZ.macd)(t,12,26,9);return g.line.forEach((b,D)=>{b&&(g.line[D]=parseFloat(b.toFixed(d+f+1)))}),g.signal.forEach((b,D)=>{b&&(g.signal[D]=parseFloat(b.toFixed(d+f+1)))}),{MACD:g.line,signal:g.signal}}verificarShort(){let t=this.binance1minCandleDataList.map(JO=>parseFloat(JO[4])),e=this.binance5minCandleDataList.map(JO=>parseFloat(JO[4])),d=this.mediana5minCandleList[this.mediana5minCandleList.length-1],f=this.mediana5minCandleList[this.mediana5minCandleList.length-2],g=this.mediana5minCandleList[this.mediana5minCandleList.length-3],b=this.binance1minCandleDataList[this.binance1minCandleDataList.length-1],Qe=(this.getMACD(t),this.getMACD(e),{canBuy:!1,stopLossPrice:"",tipo:""});return this._lastCoinPrice<this._valorEntrada&&this._lastCoinPrice>parseFloat(this.sinal.entradas[1].valor)&&d.MA5<this._valorEntrada&&g.MA5>f.MA5&&f.MA5>d.MA5&&this.isRedCandle(b)?(Qe.canBuy=!0,Qe.tipo="Pre\xe7o na entrada"):d.MA5<d.MA26&&d.MA26<d.MA12&&f.MA26<f.MA5&&f.MA5<f.MA12?(Qe.canBuy=!0,Qe.tipo="Gr\xe1fico de 5min - Cruzamento de m\xe9dia"):this._lastCoinPrice>this._valorEntrada+this._20PorCento&&d.MA5<d.MA26&&d.MA5<d.MA12&&(Qe.canBuy=!0,Qe.tipo="A 20% da entrada"),Qe}verificarLong(){this.binance5minCandleDataList.map(x=>parseFloat(x[4]));let e=this.mediana5minCandleList[this.mediana5minCandleList.length-1],r=this.mediana5minCandleList[this.mediana5minCandleList.length-2],i=this.mediana5minCandleList[this.mediana5minCandleList.length-3],d=this.binance5minCandleDataList[this.binance5minCandleDataList.length-1],D={canBuy:!1,stopLossPrice:"",tipo:""};return this._lastCoinPrice>this._valorEntrada&&this._lastCoinPrice<parseFloat(this.sinal.entradas[1].valor)&&e.MA5>this._valorEntrada&&e.MA5>e.MA12&&e.MA5>e.MA26&&i.MA5<r.MA5&&r.MA5<e.MA5&&this.isGreenCandle(d)&&2===this._minutoAtual?(D.canBuy=!0,D.tipo="Pre\xe7o na entrada"):e.MA5>e.MA26&&e.MA26>e.MA12&&r.MA26>r.M5&&r.MA5>r.MA12?(D.canBuy=!0,D.tipo="Cruzamento de m\xe9dia no gr\xe1fico de 5min"):this._lastCoinPrice<this._valorEntrada-this._20PorCento&&e.MA5>e.MA12&&e.MA5>e.MA26&&(D.canBuy=!0,D.tipo="A 20% da entrada"),D}calculateStopLoss(t){let e=t.length-1,r=parseFloat(t[e][2]),i=parseFloat(t[e][4]),l=parseFloat(t[--e][2]),d=parseFloat(t[--e][4]),f=parseFloat(t[--e][2]),g=parseFloat(t[--e][4]),b=0;return b="LONG"===this.sinal.tipo?[i,d,g].sort((D,x)=>D-x)[0]:[r,l,f].sort((D,x)=>x-D)[0],b.toString()}mapCandleResult(t=[]){let e=[];return t.forEach(r=>{let i=(parseFloat(r[1])+parseFloat(r[4]))/2;e.push({data:wr(r[0]).add(3,"hours").format("HH:mm:ss"),mediana:parseFloat(String(i)),MA5:0,MA12:0,MA26:0})}),e}fillMA5(t=[]){let e=[];for(let i=t.length-5;i<t.length;i++)e.push(t[i]);let r=this.sinal.priceCoin.toString().length;e=this.getMovingAverage(e.map(i=>i.mediana));for(let i=t.length-5;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA5=l}}fillMA12(t=[]){let e=[];for(let i=t.length-12;i<t.length;i++)e.push(t[i]);e=this.getMovingAverage(e.map(i=>i.mediana));let r=this.sinal.priceCoin.toString().length;for(let i=t.length-12;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA12=l}}fillM26(t=[]){let e=t.map(l=>l.mediana),r=this.getMovingAverage(e),i=this.sinal.priceCoin.toString().length;t.forEach((l,d)=>{let f=r[d];f=parseFloat(f.toString().substr(0,i)),l.MA26=f})}checkCandleSinal(t){let e=t[t.length-1],r=t[t.length-2],i=t[t.length-3],l=parseFloat(e[1]),d=parseFloat(e[4]),g=(parseFloat(e[2]),parseFloat(e[3])),x=(parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[2])),F=parseFloat(r[3]),ge=(parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[2])),Me=parseFloat(i[3]),Qe=!1;return Qe="LONG"===this.sinal.tipo?l<d&&d>x&&d>ge&&g>F&&g>Me:l>d&&d<F&&d<Me&&d<x&&d<ge,Qe}checkDiffMAIsValid(t,e){let i=0,l=0,d=0,f=0;for(let b=e.length-3;b<e.length;b++){let D=e[b],x=e[b+1];if(b===e.length-1){"LONG"===t?(D.MA5>D.MA12&&l++,D.MA5>D.MA26&&d++,D.MA12>D.MA26&&f++):(D.MA5<D.MA12&&l--,D.MA5<D.MA26&&d--,D.MA12<D.MA26&&f--);break}"LONG"===t?(D.MA5<x.MA5&&i++,D.MA5>D.MA12&&l++,D.MA5>D.MA26&&d++,D.MA12>D.MA26&&f++):(D.MA5>x.MA5&&i--,D.MA5<D.MA12&&l--,D.MA5<D.MA26&&d--,D.MA12<D.MA26&&f--)}let g=!1;return("LONG"===t&&2===i&&3===l&&3===d&&3===f||"SHORT"===t&&-2===i&&-3===l&&-3===d&&-3===f)&&(g=!0),g}calculate_MA5_MA26_MA12(t,e){let r=t[t.length-1],i=this.checkCandleSinal(e[e.length-1]),l=!1,d=!1,f=!1;"LONG"===this.sinal.tipo?(l=r.MA5>r.MA26&&r.MA26>r.MA12,d=this.sinal.priceCoin>r.MA5):(l=r.MA5<r.MA26&&r.MA26<r.MA12,d=this.sinal.priceCoin<r.MA5);let g=0,b=0;for(let x=t.length-3;x<t.length;x++){let F=t[x],$=t[x+1];if(!$)break;"LONG"===this.sinal.tipo?(F.MA5<$.MA5&&g++,F.MA26<$.MA26&&b++):(F.MA5>$.MA5&&g--,F.MA26>$.MA26&&b--)}return("LONG"===this.sinal.tipo&&2===g&&2===b||"SHORT"===this.sinal.tipo&&-2===g&&-2===b)&&(f=!0),f&&i&&l&&d}calculate_MA5_MA12(t,e){let r=t[t.length-1],i=this.checkDiffMAIsValid(this.sinal.tipo,t),l=this.checkCandleSinal(e),d=!1,f=!1;return"LONG"===this.sinal.tipo?(d=r.MA5>r.MA12&&r.MA5>r.MA26&&r.MA12>r.MA26,f=this.sinal.priceCoin>r.MA5):(d=r.MA5<r.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26,f=this.sinal.priceCoin<r.MA5),i&&l&&d&&f}isGreenCandle(t){return parseFloat(t[1])<parseFloat(t[4])}isRedCandle(t){return parseFloat(t[1])>parseFloat(t[4])}}class oZ{constructor(t,e){this.sinal=t,this.confRobo=e,this.umPorCento=0,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com",this.ENPOINT_ORDER="/fapi/v1/order",this.umPorCento="LONG"===t.tipo?(parseFloat(t.entradas[t.entradas.length-1].valor)-parseFloat(t.entradas[0].valor))/100:(parseFloat(t.entradas[0].valor)-parseFloat(t.entradas[t.entradas.length-1].valor))/100,this.precoEntrada=parseFloat(this.sinal.entradas[0].valor)}update(t){this.sinal=t}makeRequestEntradaAMercadoStop(){if("LONG"===this.sinal.tipo&&this.sinal.priceCoin<this.precoEntrada||"SHORT"===this.sinal.tipo&&this.sinal.priceCoin>this.precoEntrada){this.quantidadeMoedaComprada=this.converterUSDT2MOEDA(this.confRobo.valorEntradaUsdt,this.precoEntrada);var t=1e3*wr().unix(),e={symbol:this.sinal.moeda,side:"LONG"===this.sinal.tipo?"BUY":"SELL",type:"STOP_MARKET",stopPrice:this.precoEntrada,timestamp:t,recvWindow:6e4,quantity:this.quantidadeMoedaComprada};let l=window.localStorage.getItem("apiKey"),d=window.localStorage.getItem("apiSecret"),f=this.objectToURLQuery(e);var r=Jr.HmacSHA256(f,d).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+f+"&signature="+r,{method:"POST",headers:{"X-MBX-APIKEY":l}}).then(x=>{if(x.ok)return x.json();throw x.text()}).then(x=>{"NEW"===x.status&&(this.responseBuyRequestJson=x)}).catch(x=>{x.then(F=>{let $=wr();console.error($,F),console.log($,`Erro ao comprar moeda ${this.sinal.moeda}`)})})}}converterUSDT2MOEDA(t,e){let l=parseFloat((t/e*20).toFixed(0));return l<=0?1:l}objectToURLQuery(t){var e=[];for(var r in t)null!=t[r]&&e.push(r+"="+t[r]);return e.join("&")}makeRequestBuyOrder(){let t=parseFloat(this.sinal.priceCoin),e=this.converterUSDT2MOEDA(this.confRobo.valorEntradaUsdt,t);var r=1e3*wr().unix(),l={symbol:this.sinal.moeda,side:"LONG"===this.sinal.tipo?"BUY":"SELL",type:"MARKET",timestamp:r,recvWindow:6e4,quantity:e};let d=window.localStorage.getItem("apiKey"),f=window.localStorage.getItem("apiSecret"),g=this.objectToURLQuery(l);var b=Jr.HmacSHA256(g,f).toString(Jr.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+g+"&signature="+b,{method:"POST",headers:{"X-MBX-APIKEY":d}}).then($=>{if($.ok)return $.json();throw $.text()}).then($=>{"NEW"===$.status&&window.toastr.error("Ok!","Compra realizada na binance")}).catch($=>{$.then(re=>{let ge=wr();console.error(ge,re),console.log(ge,`Erro ao comprar moeda ${this.sinal.moeda}, moeda foi bloqueada!`)})})}}let aZ=(()=>{class n{constructor(){this.selfId=so.defaultRandomString(7)}set symbols(e){if(e){let r=e.split(",").sort();r.forEach((i,l)=>r[l]="BINANCE:"+i),this.options={autosize:!0,symbol:r[0],interval:"5",timezone:"America/Sao_Paulo",theme:"dark",style:"1",allow_symbol_change:!0,locale:"br",studies:["MACD@tv-basicstudies","MASimple@tv-basicstudies","MASimple@tv-basicstudies"],toolbar_bg:"#f1f3f6",save_image:!1,enable_publishing:!1,container_id:this.selfId},r.length>1&&(this.options.watchlist=r),this.loadCandleChart()}}ngOnInit(){}loadCandleChart(){setTimeout(()=>{this.chart||(this.chart=new TradingView.widget(this.options),console.log(this.chart))},1e3)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["candle-chart-comp"]],inputs:{symbols:"symbols"},decls:1,vars:1,consts:[[2,"height","100%",3,"id"]],template:function(e,r){1&e&&a._UZ(0,"div",0),2&e&&a.Q6J("id",r.selfId)},encapsulation:2}),n})(),lZ=(()=>{class n{constructor(e){this.el=e}onKeyDown(e){let r=e;if(this.OnlyNumber){if(-1!==[46,8,9,27,13,110,190].indexOf(r.keyCode)||65===r.keyCode&&(r.ctrlKey||r.metaKey)||67===r.keyCode&&(r.ctrlKey||r.metaKey)||86===r.keyCode&&(r.ctrlKey||r.metaKey)||88===r.keyCode&&(r.ctrlKey||r.metaKey)||r.keyCode>=35&&r.keyCode<=39)return;(r.shiftKey||r.keyCode<48||r.keyCode>57)&&(r.keyCode<96||r.keyCode>105)&&r.preventDefault()}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n,selectors:[["","OnlyNumber",""]],hostBindings:function(e,r){1&e&&a.NdJ("keydown",function(l){return r.onKeyDown(l)})},inputs:{OnlyNumber:"OnlyNumber"}}),n})();const cZ=["modalLogin"],uZ=["modalConfiguracaoRobo"],dZ=["modalBinanceApiKey"],hZ=["modalAlertaEntrada"];function fZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",25),a.TgZ(1,"button",26),a.NdJ("click",function(){return a.CHM(e),a.oxw().novoSinal()}),a._uU(2,"Novo sinal"),a.qZA(),a.qZA()}}function pZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",27),a.NdJ("click",function(){return a.CHM(e),a.oxw().openModalConfiguracaoRobo()}),a._UZ(2,"i",28),a.qZA(),a._UZ(3,"digital-clock-ui"),a.TgZ(4,"button",29),a.NdJ("click",function(){return a.CHM(e),a.oxw().AuthService.SignOut()}),a._UZ(5,"i",30),a.qZA(),a.qZA()}}function gZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",41),a.TgZ(1,"div",42),a.TgZ(2,"input",43),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.valor=i})("blur",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).setNextValueEntrada(l,d)}),a.qZA(),a.qZA(),a.TgZ(3,"div",42),a.TgZ(4,"input",44),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.descricao=i}),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(2),a.Q6J("ngModel",e.valor),a.xp6(2),a.Q6J("ngModel",e.descricao)}}function mZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",31),a.TgZ(1,"div",9),a.TgZ(2,"label",32),a._uU(3,"Data"),a.qZA(),a.TgZ(4,"input",33),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.data=i}),a.qZA(),a.qZA(),a.TgZ(5,"div",9),a.TgZ(6,"label",32),a._uU(7,"Moeda"),a.qZA(),a.TgZ(8,"input",34),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.moeda=i}),a.qZA(),a.qZA(),a.TgZ(9,"div",9),a.TgZ(10,"label",32),a._uU(11,"Tipo"),a.qZA(),a.TgZ(12,"select",35),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.tipo=i}),a.TgZ(13,"option",36),a._uU(14,"LONG"),a.qZA(),a.TgZ(15,"option",37),a._uU(16,"SHORT"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",9),a.TgZ(18,"label",32),a._uU(19,"Entradas"),a.qZA(),a.YNc(20,gZ,5,2,"div",38),a.qZA(),a.TgZ(21,"div",9),a.TgZ(22,"button",39),a.NdJ("click",function(){return a.CHM(e),a.oxw().salvarEntrada()}),a._uU(23,"Salvar"),a.qZA(),a.TgZ(24,"button",40),a.NdJ("click",function(){return a.CHM(e),a.oxw().showFormNovoSinal=!1}),a._uU(25,"Cancelar"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngModel",e.sinalModel.data),a.xp6(4),a.Q6J("ngModel",e.sinalModel.moeda),a.xp6(4),a.Q6J("ngModel",e.sinalModel.tipo),a.xp6(8),a.Q6J("ngForOf",e.sinalModel.entradas)}}function _Z(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw();a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function yZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"span",64),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw().copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function vZ(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function bZ(n,t){if(1&n&&(a.TgZ(0,"div",67),a._UZ(1,"i",68),a.TgZ(2,"small"),a._uU(3),a.YNc(4,vZ,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function wZ(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function CZ(n,t){if(1&n&&(a.TgZ(0,"div",67),a._UZ(1,"i",68),a.TgZ(2,"small"),a._uU(3),a.YNc(4,wZ,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function EZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,bZ,5,2,"div",65),a.TgZ(2,"div"),a.TgZ(3,"i",66),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw().toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",64),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,CZ,5,2,"div",65),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw();a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}const DZ=function(){return["/coin-bot"]},xZ=function(n){return{sinalId:n}};function TZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",45),a.TgZ(1,"div",46),a.TgZ(2,"i",47),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(3,"h5",48),a.TgZ(4,"strong"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"h5"),a.YNc(7,_Z,2,1,"span",3),a.qZA(),a.TgZ(8,"h6",49),a._uU(9),a.ALo(10,"date"),a.qZA(),a.YNc(11,yZ,4,1,"div",50),a.TgZ(12,"div"),a.TgZ(13,"ul",51),a.YNc(14,EZ,8,5,"li",52),a.qZA(),a.qZA(),a.TgZ(15,"div"),a.TgZ(16,"div",53),a.TgZ(17,"button",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().comprarAlerta(l)}),a._uU(18," Comprar "),a.qZA(),a.TgZ(19,"button",55),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().abrirGrafico(l)}),a._UZ(20,"i",56),a.qZA(),a.TgZ(21,"a",57),a._UZ(22,"i",58),a.qZA(),a.qZA(),a.TgZ(23,"div",59),a.TgZ(24,"button",60),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().editarSinal(l,d)}),a._UZ(25,"i",61),a.qZA(),a.TgZ(26,"button",29),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().excluirSinal(l,d)}),a._UZ(27,"i",62),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw();a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(2),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),a.xp6(3),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(10,11,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas),a.xp6(7),a.Q6J("routerLink",a.DdM(14,DZ))("queryParams",a.VKq(15,xZ,e.id))}}function IZ(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw();a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function SZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"span",64),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw().copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function AZ(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function NZ(n,t){if(1&n&&(a.TgZ(0,"div",67),a._UZ(1,"i",68),a.TgZ(2,"small"),a._uU(3),a.YNc(4,AZ,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function MZ(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function RZ(n,t){if(1&n&&(a.TgZ(0,"div",67),a._UZ(1,"i",68),a.TgZ(2,"small"),a._uU(3),a.YNc(4,MZ,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function kZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,NZ,5,2,"div",65),a.TgZ(2,"div"),a.TgZ(3,"i",66),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw().toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",64),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,RZ,5,2,"div",65),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw();a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function PZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",45),a.TgZ(1,"div",46),a.TgZ(2,"div"),a.TgZ(3,"button",69),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().toggleSinalBloqueado(l)}),a._UZ(4,"i",70),a.qZA(),a.TgZ(5,"button",55),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().abrirGrafico(l.moeda)}),a._UZ(6,"i",56),a.qZA(),a.qZA(),a.TgZ(7,"h5",48),a.TgZ(8,"strong"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"h5"),a.YNc(11,IZ,2,1,"span",3),a.qZA(),a.TgZ(12,"h6",49),a._uU(13),a.ALo(14,"date"),a.qZA(),a.YNc(15,SZ,4,1,"div",50),a.TgZ(16,"div"),a.TgZ(17,"ul",51),a.YNc(18,kZ,8,5,"li",52),a.qZA(),a.qZA(),a.TgZ(19,"div"),a.TgZ(20,"div",53),a.TgZ(21,"button",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().comprarAlerta(l)}),a._uU(22," Comprar "),a.qZA(),a.qZA(),a.TgZ(23,"div",59),a.TgZ(24,"button",60),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().editarSinal(l,d)}),a._UZ(25,"i",61),a.qZA(),a.TgZ(26,"button",29),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw().excluirSinal(l,d)}),a._UZ(27,"i",62),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw();a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(4),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),a.xp6(5),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(14,9,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function OZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"button",71),a.NdJ("click",function(){return a.CHM(e),a.oxw().removerTodosAlerta()}),a._uU(1," Remover todos "),a.qZA()}}function FZ(n,t){1&n&&(a.TgZ(0,"strong",72),a._uU(1,"Sem sugest\xe3o de compra"),a.qZA())}function LZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"span",64),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw().copyEntry(i.sinal.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sinal.sugestao,"")}}function VZ(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.sinal.priceCoinPercentage+"%"," ")}}function BZ(n,t){if(1&n&&(a.TgZ(0,"div",67),a._UZ(1,"i",68),a.TgZ(2,"small"),a._uU(3),a.YNc(4,VZ,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.sinal.moeda]?null:r.PriceCoinMap[e.sinal.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.sinal.priceCoinPercentage)}}function UZ(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.sinal.priceCoinPercentage+"%"," ")}}function HZ(n,t){if(1&n&&(a.TgZ(0,"div",67),a._UZ(1,"i",68),a.TgZ(2,"small"),a._uU(3),a.YNc(4,UZ,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw();a.xp6(3),a.hij("",null==r.PriceCoinMap[e.sinal.moeda]?null:r.PriceCoinMap[e.sinal.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.sinal.priceCoinPercentage)}}function $Z(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,BZ,5,2,"div",65),a.TgZ(2,"div"),a.TgZ(3,"i",66),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw().toggleAlcancado(d.sinal,l)}),a.qZA(),a.TgZ(4,"span",64),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,HZ,5,2,"div",65),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw();a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.sinal.moeda]&&i.sinal.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.sinal.moeda]&&r==i.sinal.entradas.length-1&&("LONG"===i.sinal.tipo&&l.castPrice(null==l.PriceCoinMap[i.sinal.moeda]?null:l.PriceCoinMap[i.sinal.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.sinal.tipo&&l.castPrice(null==l.PriceCoinMap[i.sinal.moeda]?null:l.PriceCoinMap[i.sinal.moeda].price)<l.castPrice(e.valor)))}}function jZ(n,t){if(1&n){const e=a.EpF();a.ynx(0),a.TgZ(1,"div",73),a.TgZ(2,"div",46),a.TgZ(3,"h5",48),a.TgZ(4,"strong"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"h6",74),a.TgZ(7,"span",75),a.TgZ(8,"strong"),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"span"),a._uU(11),a.qZA(),a.qZA(),a.TgZ(12,"div"),a.TgZ(13,"div"),a._uU(14),a.ALo(15,"date"),a._UZ(16,"br"),a.TgZ(17,"strong"),a._uU(18),a.qZA(),a.qZA(),a.YNc(19,LZ,4,1,"div",50),a.TgZ(20,"ul",51),a.YNc(21,$Z,8,5,"li",52),a.qZA(),a.qZA(),a.TgZ(22,"button",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().comprarAlerta(l.sinal)}),a._uU(23," Comprar "),a.qZA(),a.TgZ(24,"button",76),a.NdJ("click",function(){const l=a.CHM(e).index;return a.oxw().removerAlerta(l)}),a._uU(25," excluir "),a.qZA(),a.TgZ(26,"button",55),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().abrirGrafico(l.sinal.moeda)}),a._UZ(27,"i",56),a.qZA(),a.qZA(),a.qZA(),a.BQk()}if(2&n){const e=t.$implicit,r=a.oxw();a.xp6(5),a.AsE("",e.sinal.moeda," -$ ",null==r.PriceCoinMap[e.sinal.moeda]?null:r.PriceCoinMap[e.sinal.moeda].price,""),a.xp6(2),a.Q6J("ngClass","LONG"===e.sinal.tipo?"text-success":"text-danger"),a.xp6(2),a.hij("",e.sinal.tipo," "),a.xp6(2),a.Oqu(e.dataHora),a.xp6(3),a.hij(" Data sinal: ",a.xi3(15,9,e.sinal.data,"dd/MM/yyyy")," "),a.xp6(4),a.Oqu(e.tipo),a.xp6(1),a.Q6J("ngIf",e.sinal.sugestao),a.xp6(2),a.Q6J("ngForOf",e.sinal.entradas)}}function GZ(n,t){if(1&n){const e=a.EpF();a.ynx(0),a.TgZ(1,"div"),a.TgZ(2,"div"),a.TgZ(3,"span",77),a._uU(4),a.qZA(),a.TgZ(5,"button",78),a.NdJ("click",function(){const l=a.CHM(e).index;return a.oxw().coinNameIndividualChart.splice(l,1)}),a._UZ(6,"i",79),a.qZA(),a.qZA(),a.qZA(),a._UZ(7,"candle-chart-comp",20),a.BQk()}if(2&n){const e=t.$implicit;a.xp6(4),a.Oqu(e.moeda),a.xp6(3),a.Q6J("symbols",e.moeda)}}function ZZ(n,t){if(1&n&&(a.ynx(0),a._UZ(1,"candle-chart-comp",20),a.BQk()),2&n){const e=a.oxw();a.xp6(1),a.Q6J("symbols",e.coinNameList.join(","))}}function qZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",80),a.TgZ(1,"h4",81),a._uU(2,"Sign In"),a.qZA(),a.qZA(),a.TgZ(3,"div",82),a.TgZ(4,"div",83),a.TgZ(5,"div",83),a.TgZ(6,"div",83,84),a.TgZ(8,"div",85),a._UZ(9,"input",86,87),a.qZA(),a.TgZ(11,"div",85),a.TgZ(12,"label"),a._uU(13,"Password"),a.qZA(),a.TgZ(14,"div",88),a.TgZ(15,"input",89,90),a.NdJ("keydown",function(i){const d=a.CHM(e).$implicit,f=a.MAs(10),g=a.MAs(16);return a.oxw().submitSeach(i,f.value,g.value,d)}),a.qZA(),a.TgZ(17,"div",91),a.TgZ(18,"span",92),a.NdJ("click",function(){a.CHM(e);const i=a.oxw();return i.showPassword=!i.showPassword}),a._UZ(19,"i",70),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"div",85),a.TgZ(21,"button",93),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.MAs(10),f=a.MAs(16);return a.oxw().sigin(d.value,f.value,l)}),a._uU(22,"Login"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(15),a.Q6J("type",e.showPassword?"text":"password"),a.xp6(4),a.Q6J("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function WZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",80),a.TgZ(1,"h4",94),a._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),a.qZA(),a.TgZ(3,"button",95),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",96),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",82),a.TgZ(7,"div",83),a.TgZ(8,"div",83),a.TgZ(9,"div",83,84),a.TgZ(11,"div",85),a.TgZ(12,"label"),a._uU(13,"Valor entrada em USDT"),a.qZA(),a.TgZ(14,"input",97),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.valorEntradaUsdt=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",85),a.TgZ(16,"label"),a._uU(17,"M\xe1ximo de rob\xf4s ativos"),a.qZA(),a.TgZ(18,"input",98),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.maximoRobosAtivos=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",99),a.TgZ(20,"input",100),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.ativo=i}),a.qZA(),a.TgZ(21,"label",101),a._uU(22," Ativo "),a.qZA(),a.qZA(),a.TgZ(23,"div",99),a.TgZ(24,"input",102),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().operacaoLivre=i}),a.qZA(),a.TgZ(25,"label",101),a._uU(26," Opera\xe7\xe3o livre "),a.qZA(),a.qZA(),a.TgZ(27,"div",85),a.TgZ(28,"button",93),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().salvarConfiguracacaoRobo(l)}),a._uU(29," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),a.xp6(4),a.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),a.xp6(2),a.Q6J("ngModel",e.configuracaoRobo.ativo),a.xp6(4),a.Q6J("ngModel",e.operacaoLivre)}}function zZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",80),a.TgZ(1,"h4",94),a._uU(2,"Salvar Binace API KEY"),a.qZA(),a.TgZ(3,"button",95),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",96),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",82),a.TgZ(7,"div",83),a.TgZ(8,"div",83),a.TgZ(9,"div",83,84),a.TgZ(11,"div",85),a.TgZ(12,"label"),a._uU(13,"API KEY"),a.qZA(),a.TgZ(14,"input",103),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiKey=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",85),a.TgZ(16,"label"),a._uU(17,"API SECRET"),a.qZA(),a.TgZ(18,"input",103),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiSecret=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",85),a.TgZ(20,"button",93),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(21," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.binanceModel.apiKey),a.xp6(4),a.Q6J("ngModel",e.binanceModel.apiSecret)}}function YZ(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",80),a.TgZ(1,"h4",104),a._uU(2,"Configura\xe7\xe3o MACD"),a.qZA(),a.TgZ(3,"button",95),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",96),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",82),a.TgZ(7,"div",83),a.TgZ(8,"div",83),a.TgZ(9,"div",83,84),a.TgZ(11,"div",85),a.TgZ(12,"div",85),a.TgZ(13,"label"),a._uU(14,"Intervalo em minutos"),a.qZA(),a.TgZ(15,"input",105),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().macdModel.interval=i}),a.qZA(),a.qZA(),a.TgZ(16,"div",85),a.TgZ(17,"label"),a._uU(18,"Limit"),a.qZA(),a.TgZ(19,"input",105),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().macdModel.limit=i}),a.qZA(),a.qZA(),a.TgZ(20,"div",85),a.TgZ(21,"button",93),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(22," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(15),a.Q6J("ngModel",e.macdModel.interval),a.xp6(4),a.Q6J("ngModel",e.macdModel.limit)}}const KZ=[{path:"coin-bot",pathMatch:"full",component:nZ},{path:"main",component:(()=>{class n{constructor(e,r,i,l,d){this.db=e,this.AuthService=r,this.modalService=i,this.config=l,this.http=d,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.listView="lista_sinais",this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.sinaisList=[],this.sinaisMap={},this.coinCandleWatcherMap={},this.sinaisPinnedList=[],this.coinNameList=[],this.coinNameIndividualChart=[],this.sinaisIDPinnedList=[],this.watchersEntradaList=[],this.sinaisBloqueadosList=[],this.myHeaders=new Headers,this.myInit=null,this.operacaoLivre=!1,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.canSendNotification=!1,this._1second=1e3,this._5seconds=5*this._1second,this.sinaisCompradosMap={},this.editandoSinalIdx=-1,this.configuracaoRobo={id:null,valorEntradaUsdt:10,maximoRobosAtivos:10,ativo:!1,sinaisBloqueadosList:[]},this.binanceModel={apiKey:"",apiSecret:""},this.macdModel={interval:5,limit:52},this.modalAberto=!1,this.alertaEntradasList=[],this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){var e=this;"denied"===Notification.permission?Notification.requestPermission().then(r=>{this.canSendNotification="granted"===r}):"granted"===Notification.permission&&(this.canSendNotification=!0),setTimeout(()=>{if(this.AuthService.isLoggedIn){this.populatePriceCoinMap().then((0,He.Z)(function*(){yield e.loadSinaisList(),yield e.populatePriceCoinMap(),e.updatePricePositionOnSinais(),e.sinaisList.forEach(l=>{e.sinaisMap[l.id]||(e.sinaisMap[l.id]=l,e.coinCandleWatcherMap[l.id]=new sZ(l,e.http,e))}),u6(e._5seconds).subscribe(l=>{e.populatePriceCoinMap().then(()=>e.updatePricePositionOnSinais())})})),this.loadConfiguracaoRobo(),this.checkBinaceApiKey();let r=window.localStorage.getItem("alerta_list");r&&(this.alertaEntradasList=JSON.parse(r))}else this.openModalLogin()},1e3)}startPriceWatcher(){return u6(this._5seconds).subscribe(r=>{this.populatePriceCoinMap().then(()=>this.updatePricePositionOnSinais())}),this.populatePriceCoinMap()}populatePriceCoinMap(){return this.BINANCE_FUTURE_ENDPOINT?new Promise((e,r)=>{fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(l=>{if(l.ok)return l.json();setTimeout(()=>{this.populatePriceCoinMap()},1e3)}).then(l=>{this.PriceCoinList=[];let d=[];l.forEach(g=>{this.PriceCoinMap[g.symbol]={price:g.price},d.push(g.symbol)});let f=this;d.sort(),d.forEach(g=>{f.PriceCoinList.push({symbol:g,price:this.PriceCoinMap[g].price}),e()})})}):Promise.resolve()}updatePricePositionOnSinais(){this.sinaisList&&this.sinaisList.length>0&&(this.sinaisList.forEach((e,r)=>{let i=0;try{i=parseFloat(this.PriceCoinMap[e.moeda].price)}catch(l){}if(i){e.priceCoin=i;let l=-1,d=0;"LONG"===e.tipo?(d=(e.entradas[e.entradas.length-1].valor-e.entradas[0].valor)/100,e.priceCoinPercentage=i>e.entradas[0].valor?((i-e.entradas[0].valor)/d).toFixed(2):0):(d=(e.entradas[0].valor-e.entradas[e.entradas.length-1].valor)/100,e.priceCoinPercentage=i<e.entradas[0].valor?(100-(i-e.entradas[e.entradas.length-1].valor)/d).toFixed(2):0);for(let f=0;f<e.entradas.length;f++){let b=parseFloat(e.entradas[f].valor);if("LONG"===e.tipo){if(0==f||f===e.entradas.length-1){if(i<=b){l=f;break}if(f===e.entradas.length-1&&i>b){l=1e3;break}continue}if(i>=parseFloat(e.entradas[f-1].valor)&&i<=b){l=f;break}}else if("SHORT"===e.tipo){if(0==f||f===e.entradas.length-1){if(i>=b){l=f;break}if(f===e.entradas.length-1&&i<b){l=1e3;break}continue}if(i<=parseFloat(e.entradas[f-1].valor)&&i>=b){l=f;break}}}this.sinaisList[r].indexPricePosition=l;try{this.coinCandleWatcherMap[e.id].update(e)}catch(f){}}}),this.sortWatcherList(),this.sortWatcherEntradaList())}sortWatcherEntradaList(){this.watchersEntradaList=[],this.sinaisList.forEach(r=>{1==r.indexPricePosition&&this.watchersEntradaList.push(r)}),this.watchersEntradaList.sort((r,i)=>{let l=0;return l=r.indexPricePosition>0?r.indexPricePosition-i.indexPricePosition:-1,l||r.priceCoinPercentage-i.priceCoinPercentage})}castPrice(e){return parseFloat(e)}novoSinal(){let e=wr().format("YYYY-MM-DD");this.editandoSinalIdx=-1,this.sinalModel={data:e,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let l=Object.assign({},this.entradaModel);l.descricao=r[i],this.sinalModel.entradas.push(l)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadSinaisComprados(){this.sinaisCompradosObservable=this.db.object("/sinais-comprados/"+this.AuthService.userData.uid).valueChanges(),this.sinaisCompradosObservable.subscribe(r=>{if(r){try{for(let l in r)if(!this.sinaisCompradosMap[l]){let d=this.sinaisMap[l];new Notification("Binace watcher",{body:`Sinal comprado ${d.moeda}::${d.tipo}`,icon:"assets/bot.png"})}}catch(l){}this.sinaisCompradosMap=r}else this.sinaisCompradosMap={}})}loadSinaisList(){return this.sinaisFirebaseObservable=this.db.list("/sinais").valueChanges(),new Promise((e,r)=>{this.sinaisFirebaseObservable.subscribe(i=>{this.sinaisList=i,this.coinNameList=this.sinaisList.map(l=>l.moeda),this.sinaisList&&this.sinaisList.length>0&&this.sinaisList.forEach(l=>{if(l.entradas&&l.entradas.length>0){let d=parseFloat(l.entradas[0].valor);if(parseFloat(l.entradas[1].valor),l.sugestao="LONG"===l.tipo?d+(l.entradas[l.entradas.length-1].valor-l.entradas[0].valor)/100*5:d-(l.entradas[0].valor-l.entradas[l.entradas.length-1].valor)/100*5,l.sugestao){let g=l.entradas[l.entradas.length-1].valor,b=g.indexOf(".")+1,D=g.substr(b).length;l.sugestao=l.sugestao.toFixed(D)}}}),e&&e(!0)})})}sortWatcherList(){this.sinaisList.sort((e,r)=>{let i=wr(e.data).toDate().getTime(),l=wr(r.data).toDate().getTime(),d=-10;i==l?d=0:i>l?d=-1:i<l&&(d=1);let f=e.moeda.localeCompare(r.moeda);return d||f})}salvarEntrada(){let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase().trim(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!this.PriceCoinMap[e.moeda])return void alert("Moeda inv\xe1lida");if(!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}updateEntrada(e){this.db.object("/sinais/"+e.id).set(e).then(()=>{})}editarSinal(e,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(e,r){var i=this;return(0,He.Z)(function*(){if(window.confirm("Realmente deseja excluir o sinal?")){try{i.coinCandleWatcherMap[e.id].stop(),delete i.coinCandleWatcherMap[e.id]}catch(l){}yield i.db.object("/sinais/"+e.id).remove()}})()}playAlert(){notificationAudio.play()}toggleAlcancado(e,r){r.alcancado=!r.alcancado||!r.alcancado,this.updateEntrada(e)}togglePinWatcher(e){var r=this;return(0,He.Z)(function*(){let i=r.sinaisIDPinnedList.indexOf(e.id);if(i>-1){r.sinaisIDPinnedList.splice(i,1);for(let d=0;d<r.sinaisPinnedList.length;d++)if(r.sinaisPinnedList[d].id===e.id){r.sinaisPinnedList.splice(d,1);break}}else r.sinaisIDPinnedList.push(e.id),r.sinaisPinnedList.push(e);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.sinaisIDPinnedList).then(()=>{}).catch(d=>{console.error(d)})})()}loadSinaisFavoritos(){this.sinaisPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.sinaisIDPinnedList=r,this.sinaisIDPinnedList.forEach(i=>{this.sinaisList.forEach(l=>{l.id===i&&this.sinaisPinnedList.push(l)})}))})}toggleSinalBloqueado(e){var r=this;return(0,He.Z)(function*(){r.configuracaoRobo.sinaisBloqueadosList||(r.configuracaoRobo.sinaisBloqueadosList=[]);let i=r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id);i>-1?r.configuracaoRobo.sinaisBloqueadosList.splice(i,1):r.configuracaoRobo.sinaisBloqueadosList.push(e.id),yield r.salvarConfiguracacaoRobo()})()}copyEntry(e){this.canCopyClipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Entrada ${e} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(e=>{},e=>{})}sigin(e,r,i){this.AuthService.SignIn(e.trim(),r).then(()=>{this.startPriceWatcher().then(()=>{this.updatePricePositionOnSinais(),this.loadSinaisList(),this.checkBinaceApiKey(),i&&i.close()})}).catch(l=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(e,r,i,l){13==e.keyCode&&this.sigin(r,i,l)}signOut(){this.AuthService.SignOut()}submitForm(e,r){13==r.keyCode&&e.submit()}loadConfiguracaoRobo(){var e;this.sinaisPinnedList=[],this.configuracaoRoboObservable=this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).valueChanges(),null===(e=this.configuracaoRoboObservable)||void 0===e||e.subscribe(r=>{r&&(this.configuracaoRobo=r,this.configuracaoRobo.sinaisBloqueadosList?this.sinaisBloqueadosList=this.configuracaoRobo.sinaisBloqueadosList:(this.configuracaoRobo.sinaisBloqueadosList=[],this.configuracaoRobo.sinaisBloqueadosList=[]))})}openModalConfiguracaoRobo(){this.modalService.open(this.modalConfiguracaoRobo,{centered:!0}).result.then(e=>{},e=>{})}salvarConfiguracacaoRobo(e){var r=this;return(0,He.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}checkBinaceApiKey(){let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret");!e&&!r&&this.openModalBinanceApiKey()}openModalBinanceApiKey(){this.modalService.open(this.modalBinanceApiKey,{centered:!0}).result.then(e=>{e&&this.binanceModel.apiKey&&this.binanceModel.apiSecret&&(window.localStorage.setItem("apiKey",this.binanceModel.apiKey.trim()),window.localStorage.setItem("apiSecret",this.binanceModel.apiSecret.trim()),window.toastr.success("Chaves salvas!","Sucesso!"))},e=>{})}removerAlerta(e){this.alertaEntradasList.splice(e,1),window.localStorage.setItem("alerta_list",JSON.stringify(this.alertaEntradasList))}removerTodosAlerta(){this.alertaEntradasList=[],window.localStorage.setItem("alerta_list",JSON.stringify([]))}acionarAlerta(e){let r=this.sinaisBloqueadosList.indexOf(e.sinal.id)>-1,i=this.alertaEntradasList.filter(d=>d.id==e.id);i.length>0||r||(0===i.length&&this.alertaEntradasList.splice(0,0,e),"lista_sugestao_compra"!==this.listView&&(this.listView="lista_sugestao_compra"),window.localStorage.setItem("alerta_list",JSON.stringify(this.alertaEntradasList)),window.document.hasFocus())||(this.playAlert(),new Notification("Binace watcher",{body:`Poss\xedvel compra em ${e.sinal.moeda}::${e.sinal.tipo}`,icon:"assets/bot.png"}))}openModalConfiguracaoMACD(){this.config.backdrop="static",this.config.keyboard=!1,this.modalAberto=!0;let e=window.localStorage.getItem("macdInterval")?parseInt(window.localStorage.getItem("macdInterval")):5,r=window.localStorage.getItem("macdLimit")?parseInt(window.localStorage.getItem("macdLimit")):52;this.macdModel.interval=e,this.macdModel.limit=r,this.modalService.open(this.modalAlertaEntrada,{centered:!0}).result.then(i=>{this.modalAberto=!1,i&&(window.localStorage.setItem("macdInterval",this.macdModel.interval.toString()),window.localStorage.setItem("macdLimit",this.macdModel.limit.toString()),window.toastr.success("OK!","Configura\xe7\xe3o salva"))},i=>{this.modalAberto=!1})}setNextValueEntrada(e,r){e.valor&&this.sinalModel.entradas[r+1]&&(this.sinalModel.entradas[r+1].valor=e.valor)}comprarAlerta(e){let r=window.localStorage.getItem("apiKey"),i=window.localStorage.getItem("apiSecret");r&&i?new oZ(this.sinaisMap[e.id],this.configuracaoRobo).makeRequestBuyOrder():window.toastr.error("Erro","Sem configura\xe7\xe3o da binance")}abrirGrafico(e){this.coinNameIndividualChart.splice(0,0,e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(hy),a.Y36(O3),a.Y36(AO),a.Y36(VS),a.Y36(FO))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-main-dashboard"]],viewQuery:function(e,r){if(1&e&&(a.Gf(cZ,5),a.Gf(uZ,5),a.Gf(dZ,5),a.Gf(hZ,5)),2&e){let i;a.iGM(i=a.CRH())&&(r.modalLogin=i.first),a.iGM(i=a.CRH())&&(r.modalConfiguracaoRobo=i.first),a.iGM(i=a.CRH())&&(r.modalBinanceApiKey=i.first),a.iGM(i=a.CRH())&&(r.modalAlertaEntrada=i.first)}},decls:41,vars:18,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,"h-100"],["class","col-md-8 col-lg-6",4,"ngIf"],[1,"row","h-100"],[1,"col-2"],[1,"mb-3"],[1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],[2,"overflow-y","scroll","max-height","80vh",3,"hidden"],[1,"row","ml-3"],["class","card w-100",3,"ngClass",4,"ngFor","ngForOf"],["class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["class","text-white text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-5",2,"height","85vh","overflow-y","auto"],[1,"col-5",2,"height","85vh"],[3,"symbols"],["modalLogin",""],["modalConfiguracaoRobo",""],["modalBinanceApiKey",""],["modalAlertaEntrada",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-white",3,"click"],[1,"fa","fa-cogs","fa-2x"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-8","col-lg-6"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange","blur"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"card","w-100",3,"ngClass"],[1,"card-body"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass","click"],[1,"card-title"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","text-success",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"float-left"],[1,"btn","btn-button","btn-sm","btn-success","mr-3",3,"click"],["title","Abrir gr\xe1fico",1,"mr-2","btn","btn-link",2,"color","gray",3,"click"],[1,"fa","fa-line-chart"],["title","Abrir gr\xe1fico","target","_blank",1,"mr-2","btn","btn-link",2,"color","gray",3,"routerLink","queryParams"],[1,"fa","fa-android"],[1,"float-right"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],[1,"text-success"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["title","Rob\xf4 bloqueado",1,"mr-2","btn","btn-link",2,"color","gray",3,"click"],[1,"fa",3,"ngClass"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"text-white","text-center"],[1,"card"],[1,"card-subtitle","mb-2","text-muted"],[3,"ngClass"],[1,"btn","btn-button","btn-sm","btn-danger",3,"click"],[1,"text-white"],[1,"btn","bt-link",3,"click"],[1,"fa","fa-times","text-danger"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,""],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"],["type","checkbox","value","","id","operacaoLivre",1,"form-check-input",3,"ngModel","ngModelChange"],["type","text","placeholder","","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","",1,"modal-title"],["type","text","placeholder","","OnlyNumber","true","required","",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,r){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.YNc(2,fZ,3,0,"div",2),a.YNc(3,pZ,6,0,"div",3),a.qZA(),a.qZA(),a.TgZ(4,"main",4),a.TgZ(5,"section",5),a.TgZ(6,"div",1),a.YNc(7,mZ,26,4,"div",6),a.qZA(),a.TgZ(8,"div",7),a.TgZ(9,"div",8),a.TgZ(10,"div",9),a.TgZ(11,"select",10),a.NdJ("ngModelChange",function(l){return r.listView=l}),a.TgZ(12,"option",11),a._uU(13,"Lista de sinais"),a.qZA(),a.TgZ(14,"option",11),a._uU(15,"Sugest\xe3o de compra"),a.qZA(),a.TgZ(16,"option",11),a._uU(17,"Sinais na entrada"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",12),a.TgZ(19,"div",13),a.YNc(20,TZ,28,17,"div",14),a.qZA(),a.qZA(),a.TgZ(21,"div",12),a.TgZ(22,"div",13),a.YNc(23,PZ,28,12,"div",14),a.qZA(),a.qZA(),a.TgZ(24,"div",12),a.YNc(25,OZ,2,0,"button",15),a.YNc(26,FZ,2,0,"strong",16),a.YNc(27,jZ,28,12,"ng-container",17),a.qZA(),a.qZA(),a.TgZ(28,"div",18),a.YNc(29,GZ,8,2,"ng-container",17),a.YNc(30,ZZ,2,1,"ng-container",3),a.qZA(),a.TgZ(31,"div",19),a._UZ(32,"candle-chart-comp",20),a.qZA(),a.qZA(),a.qZA(),a.YNc(33,qZ,23,2,"ng-template",null,21,a.W1O),a.YNc(35,WZ,30,4,"ng-template",null,22,a.W1O),a.YNc(37,zZ,22,2,"ng-template",null,23,a.W1O),a.YNc(39,YZ,23,2,"ng-template",null,24,a.W1O),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(1),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(4),a.Q6J("ngIf",r.showFormNovoSinal),a.xp6(4),a.Q6J("ngModel",r.listView),a.xp6(1),a.Q6J("value","lista_sinais"),a.xp6(2),a.Q6J("value","lista_sugestao_compra"),a.xp6(2),a.Q6J("value","lista_sinais_entrada"),a.xp6(2),a.Q6J("hidden","lista_sinais"!=r.listView),a.xp6(2),a.Q6J("ngForOf",r.sinaisList),a.xp6(1),a.Q6J("hidden","lista_sinais_entrada"!=r.listView),a.xp6(2),a.Q6J("ngForOf",r.watchersEntradaList),a.xp6(1),a.Q6J("hidden","lista_sugestao_compra"!=r.listView),a.xp6(1),a.Q6J("ngIf",r.alertaEntradasList.length>1),a.xp6(1),a.Q6J("ngIf",0===r.alertaEntradasList.length),a.xp6(1),a.Q6J("ngForOf",r.alertaEntradasList),a.xp6(2),a.Q6J("ngForOf",r.coinNameIndividualChart),a.xp6(1),a.Q6J("ngIf",r.coinNameList.length>0),a.xp6(2),a.Q6J("symbols","BTCUSDT"))},directives:[Rr,jC,XP,ES,DS,xS,tn,aZ,c6,VC,Ys,ig,GC,fS,lZ],pipes:[yl],styles:[""]}),n})()},{path:"",redirectTo:"main",pathMatch:"full"}];let QZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[cb.forRoot(KZ)],cb]}),n})();var JZ=O(4292);wr.extend(JZ);let XZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,r){1&e&&a._UZ(0,"router-outlet")},directives:[nf],styles:[""]}),n})();class tq{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new nq(t,this.dueTime,this.scheduler))}}class nq extends fr.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(rq,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function rq(n){n.debouncedNext()}const d6="firebasestorage.googleapis.com",h6="storageBucket";class hi extends Q.ZR{constructor(t,e){super(UO(t),`Firebase Storage: ${e} (${UO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hi.prototype)}_codeEquals(t){return UO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function UO(n){return"storage/"+n}function HO(){return new hi("unknown","An unknown error occurred, please check the error payload for server response.")}function f6(){return new hi("canceled","User canceled the upload/download.")}function p6(){return new hi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Nv(n){return new hi("invalid-argument",n)}function g6(){return new hi("app-deleted","The Firebase app was deleted.")}function m6(n){return new hi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eE(n,t){return new hi("invalid-format","String does not match format '"+n+"': "+t)}function tE(n){throw new hi("internal-error","Internal error: "+n)}class zs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=zs.makeFromUrl(t,e)}catch(i){return new zs(t,"")}if(""===r.path)return r;throw function(n){return new hi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(mt){mt.path_=decodeURIComponent(mt.path)}const x=e.replace(/[.]/g,"\\."),pt=[{regex:f,indices:{bucket:1,path:3},postModify:function(mt){"/"===mt.path.charAt(mt.path.length-1)&&(mt.path_=mt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${e===d6?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let mt=0;mt<pt.length;mt++){const Ut=pt[mt],gn=Ut.regex.exec(t);if(gn){let ti=gn[Ut.indices.path];ti||(ti=""),r=new zs(gn[Ut.indices.bucket],ti),Ut.postModify(r);break}}if(null==r)throw function(n){return new hi("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class _q{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function US(n){return"string"==typeof n||n instanceof String}function _6(n){return $O()&&n instanceof Blob}function $O(){return"undefined"!=typeof Blob}function jO(n,t,e,r){if(r<t)throw Nv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw Nv(`Invalid value for '${n}'. Expected ${e} or less.`)}function bh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function y6(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var Tp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Tp||(Tp={})),Tp))();class Eq{constructor(t,e,r,i,l,d,f,g,b,D,x){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=g,this.timeout_=b,this.progressCallback_=D,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((F,$)=>{this.resolve_=F,this.reject_=$,this.start_()})}start_(){const e=(r,i)=>{const l=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(g)?l():l(g)}catch(g){d(g)}else if(null!==f){const g=HO();g.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,g):g)}else d(i.canceled?this.appDelete_?g6():f6():new hi("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new HS(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,i=null,l=null,d=!1,f=0;function g(){return 2===f}let b=!1;function D(...Me){b||(b=!0,t.apply(null,Me))}function x(Me){i=setTimeout(()=>{i=null,n($,g())},Me)}function F(){l&&clearTimeout(l)}function $(Me,...Qe){if(b)return void F();if(Me)return F(),void D.call(null,Me,...Qe);if(g()||d)return F(),void D.call(null,Me,...Qe);let pt;r<64&&(r*=2),1===f?(f=2,pt=0):pt=1e3*(r+Math.random()),x(pt)}let re=!1;function ge(Me){re||(re=!0,F(),!b&&(null!==i?(Me||(f=2),clearTimeout(i),x(0)):Me||(f=1)))}return x(0),l=setTimeout(()=>{d=!0,ge(!0)},e),ge}((r,i)=>{if(i)return void r(!1,new HS(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const f=l.getErrorCode()===Tp.NO_ERROR,g=l.getStatus();if(!f||this.isRetryStatusCode_(g)){const D=l.getErrorCode()===Tp.ABORT;return void r(!1,new HS(!1,null,D))}const b=-1!==this.successCodes_.indexOf(g);r(!0,new HS(b,l))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),l=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||l}}class HS{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function Nq(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if($O())return new Blob(n);throw new hi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Da={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class GO{constructor(t,e){this.data=t,this.contentType=e||null}}function ZO(n,t){switch(n){case Da.RAW:return new GO(v6(t));case Da.BASE64:case Da.BASE64URL:return new GO(b6(n,t));case Da.DATA_URL:return new GO(function(n){const t=new w6(n);return t.base64?b6(Da.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw eE(Da.DATA_URL,"Malformed data URL.")}return v6(t)}(t.rest)}(t),function(n){return new w6(n).contentType}(t))}throw HO()}function v6(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function b6(n,t){switch(n){case Da.BASE64:{const i=-1!==t.indexOf("-"),l=-1!==t.indexOf("_");if(i||l)throw eE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Da.BASE64URL:{const i=-1!==t.indexOf("+"),l=-1!==t.indexOf("/");if(i||l)throw eE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(i){throw eE(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class w6{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw eE(Da.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class xu{constructor(t,e){let r=0,i="";_6(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(_6(this.data_)){const i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new xu(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new xu(r,!0)}}static getBlob(...t){if($O()){const e=t.map(r=>r instanceof xu?r.data_:r);return new xu(Nq.apply(null,e))}{const e=t.map(d=>US(d)?ZO(Da.RAW,d).data:d.data_);let r=0;e.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let l=0;return e.forEach(d=>{for(let f=0;f<d.length;f++)i[l++]=d[f]}),new xu(i,!0)}}uploadData(){return this.data_}}function qO(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function C6(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function Bq(n,t){return t}class bo{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||Bq}}let $S=null;function nE(){if($S)return $S;const n=[];n.push(new bo("bucket")),n.push(new bo("generation")),n.push(new bo("metageneration")),n.push(new bo("name","fullPath",!0));const e=new bo("name");e.xform=function(l,d){return function(n){return!US(n)||n.length<2?n:C6(n)}(d)},n.push(e);const i=new bo("size");return i.xform=function(l,d){return void 0!==d?Number(d):d},n.push(i),n.push(new bo("timeCreated")),n.push(new bo("updated")),n.push(new bo("md5Hash",null,!0)),n.push(new bo("cacheControl",null,!0)),n.push(new bo("contentDisposition",null,!0)),n.push(new bo("contentEncoding",null,!0)),n.push(new bo("contentLanguage",null,!0)),n.push(new bo("contentType",null,!0)),n.push(new bo("metadata","customMetadata",!0)),$S=n,$S}function E6(n,t,e){const r=qO(t);return null===r?null:function(n,t,e){const r={type:"file"},i=e.length;for(let l=0;l<i;l++){const d=e[l];r[d.local]=d.xform(r,t[d.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const l=new zs(n.bucket,n.fullPath);return t._makeStorageReference(l)}})}(r,n),r}(n,r,e)}function WO(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const l=t[i];l.writable&&(e[l.server]=n[l.local])}return JSON.stringify(e)}const D6="prefixes";class Tu{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Iu(n){if(!n)throw HO()}function jS(n,t){return function(r,i){const l=E6(n,i,t);return Iu(null!==l),l}}function Mv(n){return function(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new hi("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new hi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new hi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new hi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function rE(n){const t=Mv(n);return function(r,i){let l=t(r,i);return 404===r.getStatus()&&(l=function(n){return new hi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function T6(n,t,e){const i=bh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Tu(i,"GET",jS(n,e),d);return f.errorHandler=rE(t),f}function zq(n,t,e,r,i){const l={};l.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(l.delimiter=e),r&&(l.pageToken=r),i&&(l.maxResults=i);const f=bh(t.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,D=new Tu(f,"GET",function(n,t){return function(r,i){const l=function(n,t,e){const r=qO(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[D6])for(const i of e[D6]){const l=i.replace(/\/$/,""),d=n._makeStorageReference(new zs(t,l));r.prefixes.push(d)}if(e.items)for(const i of e.items){const l=n._makeStorageReference(new zs(t,i.name));r.items.push(l)}return r}(n,t,r)}(n,t,i);return Iu(null!==l),l}}(n,t.bucket),b);return D.urlParams=l,D.errorHandler=Mv(t),D}function S6(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class GS{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function zO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Iu(!1)}return Iu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const nW={STATE_CHANGED:"state_changed"},wo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function YO(n){switch(n){case"running":case"pausing":case"canceling":return wo.RUNNING;case"paused":return wo.PAUSED;case"success":return wo.SUCCESS;case"canceled":return wo.CANCELED;case"error":default:return wo.ERROR}}class rW{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Rv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class sW extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Tp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Tp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Tp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw tE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw tE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function gc(){return new sW}class R6{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=nE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d=S6(t,r,i),f={name:d.fullPath},g=bh(l,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},x=WO(d,e),re=new Tu(g,"POST",function(ge){let Me;zO(ge);try{Me=ge.getResponseHeader("X-Goog-Upload-URL")}catch(Qe){Iu(!1)}return Iu(US(Me)),Me},n.maxUploadRetryTime);return re.urlParams=f,re.headers=D,re.body=x,re.errorHandler=Mv(t),re}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,gc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function(n,t,e,r){const g=new Tu(e,"POST",function(b){const D=zO(b,["active","final"]);let x=null;try{x=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){Iu(!1)}x||Iu(!1);const F=Number(x);return Iu(!isNaN(F)),new GS(F,r.size(),"final"===D)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=Mv(t),g}(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(i,gc,e,r);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new GS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let d;try{d=function(n,t,e,r,i,l,d,f){const g=new GS(0,0);if(d?(g.current=d.current,g.total=d.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw new hi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=g.total-g.current;let D=b;i>0&&(D=Math.min(D,i));const x=g.current,re={"X-Goog-Upload-Command":D===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},ge=r.slice(x,x+D);if(null===ge)throw p6();const pt=new Tu(e,"POST",function(mt,Ut){const gn=zO(mt,["active","final"]),Wr=g.current+D,ti=r.size();let WS;return WS="final"===gn?jS(t,l)(mt,Ut):null,new GS(Wr,ti,"final"===gn,WS)},t.maxUploadRetryTime);return pt.headers=re,pt.body=ge.uploadData(),pt.progressCallback=f||null,pt.errorHandler=Mv(n),pt}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const f=this._ref.storage._makeRequest(d,gc,i,l);this._request=f,f.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=T6(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,gc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},g=function(){let pt="";for(let mt=0;mt<2;mt++)pt+=Math.random().toString().slice(2);return pt}();d["Content-Type"]="multipart/related; boundary="+g;const b=S6(t,r,i),D=WO(b,e),$=xu.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+g+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===$)throw p6();const re={name:b.fullPath},ge=bh(l,n.host,n._protocol),Qe=n.maxUploadRetryTime,st=new Tu(ge,"POST",jS(n,e),Qe);return st.urlParams=re,st.headers=d,st.body=$.uploadData(),st.errorHandler=Mv(t),st}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,gc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=f6(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=YO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const l=new rW(e||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(YO(this._state)){case wo.SUCCESS:Rv(this._resolve.bind(null,this.snapshot))();break;case wo.CANCELED:case wo.ERROR:Rv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(YO(this._state)){case wo.RUNNING:case wo.PAUSED:t.next&&Rv(t.next.bind(t,this.snapshot))();break;case wo.SUCCESS:t.complete&&Rv(t.complete.bind(t))();break;case wo.CANCELED:case wo.ERROR:t.error&&Rv(t.error.bind(t,this._error))();break;default:t.error&&Rv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class o0{constructor(t,e){this._service=t,this._location=e instanceof zs?e:zs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new o0(t,e)}get root(){const t=new zs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C6(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new zs(this._location.bucket,t);return new o0(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw m6(t)}}function P6(n,t,e){return KO.apply(this,arguments)}function KO(){return(KO=(0,He.Z)(function*(n,t,e){const i=yield O6(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield P6(n,t,i.nextPageToken))})).apply(this,arguments)}function O6(n,t){null!=t&&"number"==typeof t.maxResults&&jO("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=zq(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,gc)}function _W(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const i=bh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Tu(i,"GET",function(n,t){return function(r,i){const l=E6(n,i,t);return Iu(null!==l),function(n,t,e,r){const i=qO(t);if(null===i||!US(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const d=encodeURIComponent;return l.split(",").map(b=>{const x=n.fullPath;return bh("/b/"+d(n.bucket)+"/o/"+d(x),e,r)+y6({alt:"media",token:b})})[0]}(l,i,n.host,n._protocol)}}(n,e),d);return f.errorHandler=rE(t),f}(n.storage,n._location,nE());return n.storage.makeRequestWithTokens(t,gc).then(e=>{if(null===e)throw new hi("no-download-url","The given file does not have any download URLs.");return e})}function F6(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new zs(n._location.bucket,e);return new o0(n.storage,r)}function L6(n,t){if(n instanceof QO){const e=n;if(null==e._bucket)throw new hi("no-default-bucket","No default bucket found. Did you set the '"+h6+"' property when initializing the app?");const r=new o0(e,e._bucket);return null!=t?L6(r,t):r}return void 0!==t?F6(n,t):n}function wW(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof QO)return function(n,t){return new o0(n,t)}(n,t);throw Nv("To use ref(service, url), the first argument must be a Storage instance.")}return L6(n,t)}function V6(n,t){const e=null==t?void 0:t[h6];return null==e?null:zs.makeFromBucketSpec(e,n)}class QO{constructor(t,e,r,i,l){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=d6,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?zs.makeFromBucketSpec(i,this._host):V6(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?zs.makeFromBucketSpec(this._url,t):V6(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,He.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,He.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new o0(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new _q(g6());{const l=function(n,t,e,r,i,l){const d=y6(n.urlParams),f=n.url+d,g=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(g,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(g,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(g,l),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(g,r),new Eq(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var r=this;return(0,He.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,l).getPromise()})()}}const B6="@firebase/storage";function $6(n,t){return wW(n=(0,Q.m9)(n),t)}(0,Us._registerComponent)(new el.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new QO(e,r,i,t,Us.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Us.registerVersion)(B6,"0.9.5",""),(0,Us.registerVersion)(B6,"0.9.5","esm2017");class ZS{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class j6{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ZS(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new ZS(r,this,this._ref))},e)}on(t,e,r,i){let l;return e&&(l="function"==typeof e?d=>e(new ZS(d,this,this._ref)):{next:e.next?d=>e.next(new ZS(d,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,r||void 0,i||void 0)}}class G6{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new wh(t,this._service))}get items(){return this._delegate.items.map(t=>new wh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class wh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return F6(n,t)}(this._delegate,t);return new wh(e,this.storage)}get root(){return new wh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new wh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new j6(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new R6(n,new xu(t),e)}(n=(0,Q.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Da.RAW,r){this._throwIfRoot("putString");const i=ZO(e,t),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new j6(new R6(this._delegate,new xu(i.data,!0),l),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return P6(n,t).then(()=>t)}(n=(0,Q.m9)(n))}(this._delegate).then(t=>new G6(t,this.storage))}list(t){return function(n,t){return O6(n=(0,Q.m9)(n),t)}(this._delegate,t||void 0).then(e=>new G6(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=T6(n.storage,n._location,nE());return n.storage.makeRequestWithTokens(t,gc)}(n=(0,Q.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const l=bh(t.fullServerUrl(),n.host,n._protocol),f=WO(e,r),b=n.maxOperationRetryTime,D=new Tu(l,"PATCH",jS(n,r),b);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=f,D.errorHandler=rE(t),D}(n.storage,n._location,t,nE());return n.storage.makeRequestWithTokens(e,gc)}(n=(0,Q.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return _W(n=(0,Q.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=bh(t.fullServerUrl(),n.host,n._protocol),f=new Tu(r,"DELETE",function(g,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=rE(t),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,gc)}(n=(0,Q.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw m6(t)}}class Z6{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(q6(t))throw Nv("ref() expected a child path but got a URL, use refFromURL instead.");return new wh($6(this._delegate,t),this)}refFromURL(t){if(!q6(t))throw Nv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{zs.makeFromUrl(t,this._delegate.host)}catch(e){throw Nv("refFromUrl() expected a valid full URL but got an invalid one.")}return new wh($6(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Q.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function q6(n){return/^[A-Za-z]+:\/\//.test(n)}function LW(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new Z6(e,r)}function W6(n){const t=function(n){return new zn.y(t=>{const e=d=>t.next(d);e(n.snapshot);const l=n.on("state_changed",e);return n.then(d=>{e(d),t.complete()},d=>{e(n.snapshot),(d=>{t.error(d)})(d)}),function(){l()}}).pipe(function(n,t=zc.P){return e=>e.lift(new tq(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,wt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function qS(n){return{getDownloadURL:()=>(0,Dt.of)(void 0).pipe(Ln.fc,pr(()=>n.getDownloadURL()),Ln.iC),getMetadata:()=>(0,Dt.of)(void 0).pipe(Ln.fc,pr(()=>n.getMetadata()),Ln.iC),delete:()=>(0,un.D)(n.delete()),child:t=>qS(n.child(t)),updateMetadata:t=>(0,un.D)(n.updateMetadata(t)),put:(t,e)=>W6(n.put(t,e)),putString:(t,e,r)=>W6(n.putString(t,e,r)),list:t=>(0,un.D)(n.list(t)),listAll:()=>(0,un.D)(n.listAll())}}!function(n){const t={TaskState:wo,TaskEvent:nW,StringFormat:Da,Storage:Z6,Reference:wh};n.INTERNAL.registerComponent(new el.wA("storage-compat",LW,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(ag.Z);const UW=new a.OlP("angularfire2.storageBucket"),HW=new a.OlP("angularfire2.storage.maxUploadRetryTime"),$W=new a.OlP("angularfire2.storage.maxOperationRetryTime"),jW=new a.OlP("angularfire2.storage.use-emulator");let GW=(()=>{class n{constructor(e,r,i,l,d,f,g,b,D,x){const F=(0,ri.on)(e,d,r);this.storage=(0,ri.cc)(`${F.name}.storage.${i}`,"AngularFireStorage",F.name,()=>{const $=d.runOutsideAngular(()=>F.storage(i||void 0)),re=D;return re&&$.useEmulator(...re),g&&$.setMaxUploadRetryTime(g),b&&$.setMaxOperationRetryTime(b),$},[g,b])}ref(e){return qS(this.storage.ref(e))}refFromURL(e){return qS(this.storage.refFromURL(e))}upload(e,r,i){return qS(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ri.Dh),a.LFG(ri.xv,8),a.LFG(UW,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Ln.HU),a.LFG(HW,8),a.LFG($W,8),a.LFG(jW,8),a.LFG(dy,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ZW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),qW=(()=>{class n{constructor(){rm.Z.registerVersion("angularfire",Ln.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[GW],imports:[ZW]}),n})();const WW={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let zW=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[XZ]}),n.\u0275inj=a.cJS({providers:[],imports:[[Pp,QZ,BV,L7,ri.hO.initializeApp(WW),x5,WM,qW]]}),n})();(0,a.G48)(),Va().bootstrapModule(zW).catch(n=>console.error(n))},2480:()=>{},3394:(Fe,me,O)=>{"use strict";O.d(me,{Z:()=>Y});var a=O(3854),M=O(3910),k=O(8026),K=O(5422);class te{constructor(ae,H){this._delegate=ae,this.firebase=H,(0,k._addComponent)(ae,new M.wA("app-compat",()=>this,"PUBLIC")),this.container=ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ae){this._delegate.automaticDataCollectionEnabled=ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ae=>{this._delegate.checkDestroyed(),ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ae,H=k._DEFAULT_ENTRY_NAME){var G;this._delegate.checkDestroyed();const ue=this._delegate.container.getProvider(ae);return!ue.isInitialized()&&"EXPLICIT"===(null===(G=ue.getComponent())||void 0===G?void 0:G.instantiationMode)&&ue.initialize(),ue.getImmediate({identifier:H})}_removeServiceInstance(ae,H=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ae).clearInstance(H)}_addComponent(ae){(0,k._addComponent)(this._delegate,ae)}_addOrOverwriteComponent(ae){(0,k._addOrOverwriteComponent)(this._delegate,ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ee=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),R=function U(){const ne=function(ne){const ae={},H={__esModule:!0,initializeApp:function(Re,Se={}){const Ce=k.initializeApp(Re,Se);if((0,a.r3)(ae,Ce.name))return ae[Ce.name];const de=new ne(Ce,H);return ae[Ce.name]=de,de},app:ue,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(Re){const Se=Re.name,Ce=Se.replace("-compat","");if(k._registerComponent(Re)&&"PUBLIC"===Re.type){const de=(Ee=ue())=>{if("function"!=typeof Ee[Ce])throw ee.create("invalid-app-argument",{appName:Se});return Ee[Ce]()};void 0!==Re.serviceProps&&(0,a.ZB)(de,Re.serviceProps),H[Ce]=de,ne.prototype[Ce]=function(...Ee){return this._getService.bind(this,Se).apply(this,Re.multipleInstances?Ee:[])}}return"PUBLIC"===Re.type?H[Ce]:null},removeApp:function(Re){delete ae[Re]},useAsService:function(Re,Se){return"serverAuth"===Se?null:Se},modularAPIs:k}};function ue(Re){if(!(0,a.r3)(ae,Re=Re||k._DEFAULT_ENTRY_NAME))throw ee.create("no-app",{appName:Re});return ae[Re]}return H.default=H,Object.defineProperty(H,"apps",{get:function(){return Object.keys(ae).map(Re=>ae[Re])}}),ue.App=ne,H}(te);return ne.INTERNAL=Object.assign(Object.assign({},ne.INTERNAL),{createFirebaseNamespace:U,extendNamespace:function(H){(0,a.ZB)(ne,H)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),ne}(),N=new K.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){N.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ne=self.firebase.SDK_VERSION;ne&&ne.indexOf("LITE")>=0&&N.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Y=R;(0,k.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(Fe,me,O)=>{"use strict";O.r(me),O.d(me,{FirebaseError:()=>K.ZR,SDK_VERSION:()=>tr,_DEFAULT_ENTRY_NAME:()=>ct,_addComponent:()=>Ze,_addOrOverwriteComponent:()=>Jt,_apps:()=>Ve,_clearComponents:()=>Xt,_components:()=>ke,_getProvider:()=>yt,_registerComponent:()=>Mt,_removeServiceInstance:()=>Ct,deleteApp:()=>Kn,getApp:()=>Yn,getApps:()=>ze,initializeApp:()=>Mn,onLog:()=>fn,registerVersion:()=>gt,setLogLevel:()=>mn});var a=O(8239),M=O(3910),k=O(5422),K=O(3854);class te{constructor(qe){this.container=qe}getPlatformInfoString(){return this.container.getProviders().map(_t=>{if(function(rt){const qe=rt.getComponent();return"VERSION"===(null==qe?void 0:qe.type)}(_t)){const Nt=_t.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(_t=>_t).join(" ")}}const ee="@firebase/app",L="0.7.21",U=new k.Yd("@firebase/app"),ct="[DEFAULT]",Le={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ve=new Map,ke=new Map;function Ze(rt,qe){try{rt.container.addComponent(qe)}catch(_t){U.debug(`Component ${qe.name} failed to register with FirebaseApp ${rt.name}`,_t)}}function Jt(rt,qe){rt.container.addOrOverwriteComponent(qe)}function Mt(rt){const qe=rt.name;if(ke.has(qe))return U.debug(`There were multiple attempts to register component ${qe}.`),!1;ke.set(qe,rt);for(const _t of Ve.values())Ze(_t,rt);return!0}function yt(rt,qe){const _t=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return _t&&_t.triggerHeartbeat(),rt.container.getProvider(qe)}function Ct(rt,qe,_t=ct){yt(rt,qe).clearInstance(_t)}function Xt(){ke.clear()}const an=new K.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class In{constructor(qe,_t,Nt){this._isDeleted=!1,this._options=Object.assign({},qe),this._config=Object.assign({},_t),this._name=_t.name,this._automaticDataCollectionEnabled=_t.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new M.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this.checkDestroyed(),this._automaticDataCollectionEnabled=qe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(qe){this._isDeleted=qe}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const tr="9.6.11";function Mn(rt,qe={}){"object"!=typeof qe&&(qe={name:qe});const _t=Object.assign({name:ct,automaticDataCollectionEnabled:!1},qe),Nt=_t.name;if("string"!=typeof Nt||!Nt)throw an.create("bad-app-name",{appName:String(Nt)});const Lt=Ve.get(Nt);if(Lt){if((0,K.vZ)(rt,Lt.options)&&(0,K.vZ)(_t,Lt.config))return Lt;throw an.create("duplicate-app",{appName:Nt})}const en=new M.H0(Nt);for(const le of ke.values())en.addComponent(le);const pe=new In(rt,_t,en);return Ve.set(Nt,pe),pe}function Yn(rt=ct){const qe=Ve.get(rt);if(!qe)throw an.create("no-app",{appName:rt});return qe}function ze(){return Array.from(Ve.values())}function Kn(rt){return $n.apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(rt){const qe=rt.name;Ve.has(qe)&&(Ve.delete(qe),yield Promise.all(rt.container.getProviders().map(_t=>_t.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function gt(rt,qe,_t){var Nt;let Lt=null!==(Nt=Le[rt])&&void 0!==Nt?Nt:rt;_t&&(Lt+=`-${_t}`);const en=Lt.match(/\s|\//),pe=qe.match(/\s|\//);if(en||pe){const le=[`Unable to register library "${Lt}" with version "${qe}":`];return en&&le.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),en&&pe&&le.push("and"),pe&&le.push(`version name "${qe}" contains illegal characters (whitespace or "/")`),void U.warn(le.join(" "))}Mt(new M.wA(`${Lt}-version`,()=>({library:Lt,version:qe}),"VERSION"))}function fn(rt,qe){if(null!==rt&&"function"!=typeof rt)throw an.create("invalid-log-argument");(0,k.Am)(rt,qe)}function mn(rt){(0,k.Ub)(rt)}const dr="firebase-heartbeat-store";let or=null;function xn(){return or||(or=(0,K.X3)("firebase-heartbeat-database",1,(rt,qe)=>{switch(qe){case 0:rt.createObjectStore(dr)}}).catch(rt=>{throw an.create("storage-open",{originalErrorMessage:rt.message})})),or}function En(){return(En=(0,a.Z)(function*(rt){try{return(yield xn()).transaction(dr).objectStore(dr).get(Mr(rt))}catch(qe){throw an.create("storage-get",{originalErrorMessage:qe.message})}})).apply(this,arguments)}function it(rt,qe){return xt.apply(this,arguments)}function xt(){return(xt=(0,a.Z)(function*(rt,qe){try{const Nt=(yield xn()).transaction(dr,"readwrite");return yield Nt.objectStore(dr).put(qe,Mr(rt)),Nt.complete}catch(_t){throw an.create("storage-set",{originalErrorMessage:_t.message})}})).apply(this,arguments)}function Mr(rt){return`${rt.name}!${rt.options.appId}`}class At{constructor(qe){this.container=qe,this._heartbeatsCache=null;const _t=this.container.getProvider("app").getImmediate();this._storage=new cn(_t),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var qe=this;return(0,a.Z)(function*(){const Nt=qe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=hr();if(null===qe._heartbeatsCache&&(qe._heartbeatsCache=yield qe._heartbeatsCachePromise),qe._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!qe._heartbeatsCache.heartbeats.some(en=>en.date===Lt))return qe._heartbeatsCache.heartbeats.push({date:Lt,agent:Nt}),qe._heartbeatsCache.heartbeats=qe._heartbeatsCache.heartbeats.filter(en=>{const pe=new Date(en.date).valueOf();return Date.now()-pe<=2592e6}),qe._storage.overwrite(qe._heartbeatsCache)})()}getHeartbeatsHeader(){var qe=this;return(0,a.Z)(function*(){if(null===qe._heartbeatsCache&&(yield qe._heartbeatsCachePromise),null===qe._heartbeatsCache||0===qe._heartbeatsCache.heartbeats.length)return"";const _t=hr(),{heartbeatsToSend:Nt,unsentEntries:Lt}=function(rt,qe=1024){const _t=[];let Nt=rt.slice();for(const Lt of rt){const en=_t.find(pe=>pe.agent===Lt.agent);if(en){if(en.dates.push(Lt.date),St(_t)>qe){en.dates.pop();break}}else if(_t.push({agent:Lt.agent,dates:[Lt.date]}),St(_t)>qe){_t.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:_t,unsentEntries:Nt}}(qe._heartbeatsCache.heartbeats),en=(0,K.L)(JSON.stringify({version:2,heartbeats:Nt}));return qe._heartbeatsCache.lastSentHeartbeatDate=_t,Lt.length>0?(qe._heartbeatsCache.heartbeats=Lt,yield qe._storage.overwrite(qe._heartbeatsCache)):(qe._heartbeatsCache.heartbeats=[],qe._storage.overwrite(qe._heartbeatsCache)),en})()}}function hr(){return(new Date).toISOString().substring(0,10)}class cn{constructor(qe){this.app=qe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,K.hl)()&&(0,K.eu)().then(()=>!0).catch(()=>!1)})()}read(){var qe=this;return(0,a.Z)(function*(){return(yield qe._canUseIndexedDBPromise)&&(yield function(rt){return En.apply(this,arguments)}(qe.app))||{heartbeats:[]}})()}overwrite(qe){var _t=this;return(0,a.Z)(function*(){var Nt;if(yield _t._canUseIndexedDBPromise){const en=yield _t.read();return it(_t.app,{lastSentHeartbeatDate:null!==(Nt=qe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:en.lastSentHeartbeatDate,heartbeats:qe.heartbeats})}})()}add(qe){var _t=this;return(0,a.Z)(function*(){var Nt;if(yield _t._canUseIndexedDBPromise){const en=yield _t.read();return it(_t.app,{lastSentHeartbeatDate:null!==(Nt=qe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...qe.heartbeats]})}})()}}function St(rt){return(0,K.L)(JSON.stringify({version:2,heartbeats:rt})).length}Mt(new M.wA("platform-logger",qe=>new te(qe),"PRIVATE")),Mt(new M.wA("heartbeat",qe=>new At(qe),"PRIVATE")),gt(ee,L,""),gt(ee,L,"esm2017"),gt("fire-js","")},3910:(Fe,me,O)=>{"use strict";O.d(me,{wA:()=>k,H0:()=>L,zt:()=>te});var a=O(8239),M=O(3854);class k{constructor(R,N,S){this.name=R,this.instanceFactory=N,this.type=S,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(R){return this.instantiationMode=R,this}setMultipleInstances(R){return this.multipleInstances=R,this}setServiceProps(R){return this.serviceProps=R,this}setInstanceCreatedCallback(R){return this.onInstanceCreated=R,this}}const K="[DEFAULT]";class te{constructor(R,N){this.name=R,this.container=N,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(R){const N=this.normalizeInstanceIdentifier(R);if(!this.instancesDeferred.has(N)){const S=new M.BH;if(this.instancesDeferred.set(N,S),this.isInitialized(N)||this.shouldAutoInitialize())try{const B=this.getOrInitializeService({instanceIdentifier:N});B&&S.resolve(B)}catch(B){}}return this.instancesDeferred.get(N).promise}getImmediate(R){var N;const S=this.normalizeInstanceIdentifier(null==R?void 0:R.identifier),B=null!==(N=null==R?void 0:R.optional)&&void 0!==N&&N;if(!this.isInitialized(S)&&!this.shouldAutoInitialize()){if(B)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:S})}catch(z){if(B)return null;throw z}}getComponent(){return this.component}setComponent(R){if(R.name!==this.name)throw Error(`Mismatching Component ${R.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=R,this.shouldAutoInitialize()){if("EAGER"===R.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:K})}catch(N){}for(const[N,S]of this.instancesDeferred.entries()){const B=this.normalizeInstanceIdentifier(N);try{const z=this.getOrInitializeService({instanceIdentifier:B});S.resolve(z)}catch(z){}}}}clearInstance(R=K){this.instancesDeferred.delete(R),this.instancesOptions.delete(R),this.instances.delete(R)}delete(){var R=this;return(0,a.Z)(function*(){const N=Array.from(R.instances.values());yield Promise.all([...N.filter(S=>"INTERNAL"in S).map(S=>S.INTERNAL.delete()),...N.filter(S=>"_delete"in S).map(S=>S._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(R=K){return this.instances.has(R)}getOptions(R=K){return this.instancesOptions.get(R)||{}}initialize(R={}){const{options:N={}}=R,S=this.normalizeInstanceIdentifier(R.instanceIdentifier);if(this.isInitialized(S))throw Error(`${this.name}(${S}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const B=this.getOrInitializeService({instanceIdentifier:S,options:N});for(const[z,Y]of this.instancesDeferred.entries())S===this.normalizeInstanceIdentifier(z)&&Y.resolve(B);return B}onInit(R,N){var S;const B=this.normalizeInstanceIdentifier(N),z=null!==(S=this.onInitCallbacks.get(B))&&void 0!==S?S:new Set;z.add(R),this.onInitCallbacks.set(B,z);const Y=this.instances.get(B);return Y&&R(Y,B),()=>{z.delete(R)}}invokeOnInitCallbacks(R,N){const S=this.onInitCallbacks.get(N);if(S)for(const B of S)try{B(R,N)}catch(z){}}getOrInitializeService({instanceIdentifier:R,options:N={}}){let S=this.instances.get(R);if(!S&&this.component&&(S=this.component.instanceFactory(this.container,{instanceIdentifier:(U=R,U===K?void 0:U),options:N}),this.instances.set(R,S),this.instancesOptions.set(R,N),this.invokeOnInitCallbacks(S,R),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,R,S)}catch(B){}var U;return S||null}normalizeInstanceIdentifier(R=K){return this.component?this.component.multipleInstances?R:K:R}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(R){this.name=R,this.providers=new Map}addComponent(R){const N=this.getProvider(R.name);if(N.isComponentSet())throw new Error(`Component ${R.name} has already been registered with ${this.name}`);N.setComponent(R)}addOrOverwriteComponent(R){this.getProvider(R.name).isComponentSet()&&this.providers.delete(R.name),this.addComponent(R)}getProvider(R){if(this.providers.has(R))return this.providers.get(R);const N=new te(R,this);return this.providers.set(R,N),N}getProviders(){return Array.from(this.providers.values())}}},5422:(Fe,me,O)=>{"use strict";O.d(me,{in:()=>M,Yd:()=>ee,Ub:()=>L,Am:()=>U});const a=[];var M=(()=>{return(R=M||(M={}))[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT",M;var R})();const k={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},K=M.INFO,te={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},Z=(R,N,...S)=>{if(N<R.logLevel)return;const B=(new Date).toISOString(),z=te[N];if(!z)throw new Error(`Attempted to log a message with an invalid logType (value: ${N})`);console[z](`[${B}]  ${R.name}:`,...S)};class ee{constructor(N){this.name=N,this._logLevel=K,this._logHandler=Z,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(N){if(!(N in M))throw new TypeError(`Invalid value "${N}" assigned to \`logLevel\``);this._logLevel=N}setLogLevel(N){this._logLevel="string"==typeof N?k[N]:N}get logHandler(){return this._logHandler}set logHandler(N){if("function"!=typeof N)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=N}get userLogHandler(){return this._userLogHandler}set userLogHandler(N){this._userLogHandler=N}debug(...N){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...N),this._logHandler(this,M.DEBUG,...N)}log(...N){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...N),this._logHandler(this,M.VERBOSE,...N)}info(...N){this._userLogHandler&&this._userLogHandler(this,M.INFO,...N),this._logHandler(this,M.INFO,...N)}warn(...N){this._userLogHandler&&this._userLogHandler(this,M.WARN,...N),this._logHandler(this,M.WARN,...N)}error(...N){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...N),this._logHandler(this,M.ERROR,...N)}}function L(R){a.forEach(N=>{N.setLogLevel(R)})}function U(R,N){for(const S of a){let B=null;N&&N.level&&(B=k[N.level]),S.userLogHandler=null===R?null:(z,Y,...ne)=>{const ae=ne.map(H=>{if(null==H)return null;if("string"==typeof H)return H;if("number"==typeof H||"boolean"==typeof H)return H.toString();if(H instanceof Error)return H.message;try{return JSON.stringify(H)}catch(G){return null}}).filter(H=>H).join(" ");Y>=(null!=B?B:z.logLevel)&&R({level:M[Y].toLowerCase(),message:ae,args:ne,type:z.name})}}}},8239:(Fe,me,O)=>{"use strict";function a(k,K,te,Z,ee,L,U){try{var R=k[L](U),N=R.value}catch(S){return void te(S)}R.done?K(N):Promise.resolve(N).then(Z,ee)}function M(k){return function(){var K=this,te=arguments;return new Promise(function(Z,ee){var L=k.apply(K,te);function U(N){a(L,Z,ee,U,R,"next",N)}function R(N){a(L,Z,ee,U,R,"throw",N)}U(void 0)})}}O.d(me,{Z:()=>M})}},Fe=>{Fe(Fe.s=3901)}]);