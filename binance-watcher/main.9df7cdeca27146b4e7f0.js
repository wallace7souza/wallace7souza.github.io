(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:ot=>{function Te(B){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+B+"'");throw a.code="MODULE_NOT_FOUND",a})}Te.keys=()=>[],Te.resolve=Te,Te.id=8255,ot.exports=Te},7716:(ot,Te,B)=>{"use strict";B.d(Te,{deG:()=>vh,tb:()=>HI,AFp:()=>Vf,ip1:()=>J1,CZH:()=>cl,hGG:()=>NR,z2F:()=>$f,sBO:()=>cM,Sil:()=>Bf,_Vd:()=>no,EJc:()=>X1,SBq:()=>al,qLn:()=>Oh,vpe:()=>va,gxx:()=>bd,tBr:()=>Ga,XFs:()=>at,OlP:()=>Hn,zs3:()=>cr,ZZ4:()=>Zw,aQg:()=>$y,soG:()=>gm,YKP:()=>UD,v3s:()=>dC,h0i:()=>xd,PXZ:()=>rA,R0b:()=>io,FiY:()=>qa,Lbi:()=>$I,g9A:()=>UI,Qsj:()=>OD,FYo:()=>Vy,JOm:()=>Ka,Tiy:()=>qw,q3G:()=>un,tp0:()=>Hr,EAV:()=>Hf,Rgc:()=>Nd,dDg:()=>dl,DyG:()=>Ws,q4F:()=>Ww,GfV:()=>nM,s_b:()=>Gg,ifc:()=>Ze,eFA:()=>fc,G48:()=>JI,Gpc:()=>Y,X6Q:()=>Uf,_c5:()=>pA,VLi:()=>sC,c2e:()=>nu,zSh:()=>Cn,wAp:()=>St,vHH:()=>Ae,EiD:()=>_t,mCW:()=>za,qzn:()=>Hu,JVY:()=>b_,pB0:()=>ld,eBb:()=>Vp,L6k:()=>Lp,LAX:()=>oa,cg1:()=>Og,Tjo:()=>Jt,kL8:()=>lD,yhl:()=>Ih,dqk:()=>It,sIi:()=>pg,CqO:()=>Qb,QGY:()=>Jb,F4k:()=>LT,RDi:()=>Ii,AaK:()=>X,z3N:()=>sa,qOj:()=>uy,TTD:()=>Kn,_Bn:()=>MD,xp6:()=>Yu,uIk:()=>Xh,Tol:()=>Tg,DjV:()=>fw,ekj:()=>Ny,Suo:()=>N1,Xpm:()=>z,lG2:()=>pt,Yz7:()=>wt,cJS:()=>cn,oAB:()=>Z,Yjl:()=>Ct,Y36:()=>bg,_UZ:()=>OT,BQk:()=>Kb,ynx:()=>Yb,qZA:()=>Cy,TgZ:()=>wg,EpF:()=>FT,n5z:()=>Ba,Ikx:()=>Dd,SDv:()=>Gx,QtT:()=>SD,pQV:()=>Bw,LFG:()=>Qn,$8M:()=>ku,NdJ:()=>Ey,CRH:()=>uv,oxw:()=>Cg,ALo:()=>sv,lcZ:()=>DI,xi3:()=>v1,Hsn:()=>jT,F$t:()=>HT,Q6J:()=>Zb,s9C:()=>ew,MGl:()=>hf,VKq:()=>m1,WLB:()=>Ji,kEZ:()=>rv,iGM:()=>AI,MAs:()=>TT,CHM:()=>xa,LSH:()=>dd,kYT:()=>ge,Udp:()=>Sy,YNc:()=>zl,W1O:()=>ui,_uU:()=>sc,Oqu:()=>Sg,hij:()=>Ng,AsE:()=>cw,Gf:()=>S1});var a=B(9765),q=B(5319),F=B(7574),se=B(6682),ae=B(8819);function ee(s){for(let o in s)if(s[o]===ee)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Q(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const U=ee({__forward_ref__:ee});function Y(s){return s.__forward_ref__=Y,s.toString=function(){return X(this())},s}function j(s){return le(s)?s():s}function le(s){return"function"==typeof s&&s.hasOwnProperty(U)&&s.__forward_ref__===Y}class Ae extends Error{constructor(o,u){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function ce(s){return"string"==typeof s?s:null==s?"":String(s)}function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ce(s)}function rt(s,o){const u=o?` in ${o}`:"";throw new Ae("201",`No provider for ${pe(s)} found${u}`)}function yt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}function wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function cn(s){return{providers:s.providers||[],imports:s.imports||[]}}function rn(s){return dn(s,dr)||dn(s,hr)}function dn(s,o){return s.hasOwnProperty(o)?s[o]:null}function ri(s){return s&&(s.hasOwnProperty(Fe)||s.hasOwnProperty(sr))?s[Fe]:null}const dr=ee({\u0275prov:ee}),Fe=ee({\u0275inj:ee}),hr=ee({ngInjectableDef:ee}),sr=ee({ngInjectorDef:ee});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let vn;function jn(s){const o=vn;return vn=s,o}function ii(s,o,u){const c=rn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&at.Optional?null:void 0!==o?o:void rt(X(s),"Injector")}function fr(s){return{toString:s}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),Ze=(()=>((Ze=Ze||{})[Ze.Emulated=0]="Emulated",Ze[Ze.None=2]="None",Ze[Ze.ShadowDom=3]="ShadowDom",Ze))();const gt="undefined"!=typeof globalThis&&globalThis,Bi="undefined"!=typeof window&&window,ss="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It=gt||"undefined"!=typeof global&&global||Bi||ss,sn={},bt=[],qt=ee({\u0275cmp:ee}),We=ee({\u0275dir:ee}),Ne=ee({\u0275pipe:ee}),lt=ee({\u0275mod:ee}),Et=ee({\u0275loc:ee}),Pt=ee({\u0275fac:ee}),Xt=ee({__NG_ELEMENT_ID__:ee});let J=0;function z(s){return fr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Ze.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,_=s.pipes;return c.id+=J++,c.inputs=Ue(s.inputs,u),c.outputs=Ue(s.outputs),p&&p.forEach(v=>v(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(ye):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,c})}function ye(s){return Ye(s)||function(s){return s[We]||null}(s)}function $(s){return function(s){return s[Ne]||null}(s)}const H={};function Z(s){return fr(()=>{const o={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(H[s.id]=s.type),o})}function ge(s,o){return fr(()=>{const u=In(s,!0);u.declarations=o.declarations||bt,u.imports=o.imports||bt,u.exports=o.exports||bt})}function Ue(s,o){if(null==s)return sn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const pt=z;function Ct(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ye(s){return s[qt]||null}function In(s,o){const u=s[lt]||null;if(!u&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return u}function kn(s){return Array.isArray(s)&&"object"==typeof s[1]}function $i(s){return Array.isArray(s)&&!0===s[1]}function Ac(s){return 0!=(8&s.flags)}function yl(s){return 2==(2&s.flags)}function mi(s){return 1==(1&s.flags)}function as(s){return null!==s.template}function ls(s){return 0!=(512&s[2])}function $s(s,o){return s.hasOwnProperty(Pt)?s[Pt]:null}class wl{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Kn(){return vu}function vu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Sr),Ia}function Ia(){const s=Aa(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===sn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Sr(s,o,u,c){const h=Aa(s)||function(s,o){return s[lh]=o}(s,{previous:sn,current:null}),p=h.current||(h.current={}),_=h.previous,v=this.declaredInputs[u],C=_[v];p[v]=new wl(C&&C.currentValue,o,_===sn),s[c]=o}Kn.ngInherit=!0;const lh="__ngSimpleChanges__";function Aa(s){return s[lh]||null}let Sa;function Ii(s){Sa=s}function bu(){return void 0!==Sa?Sa:"undefined"!=typeof document?document:void 0}function Pn(s){return!!s.listen}const Is={createRenderer:(s,o)=>bu()};function An(s){for(;Array.isArray(s);)s=s[0];return s}function wu(s,o){return An(o[s])}function Sn(s,o){return An(o[s.index])}function As(s,o){return s.data[o]}function Na(s,o){return s[o]}function Nr(s,o){const u=o[s];return kn(u)?u:u[0]}function dh(s){return 4==(4&s[2])}function El(s){return 128==(128&s[2])}function gr(s,o){return null==o?null:s[o]}function Tl(s){s[18]=0}function Cu(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const At={lFrame:Gc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Vc(){return At.bindingsEnabled}function Me(){return At.lFrame.lView}function Yt(){return At.lFrame.tView}function xa(s){return At.lFrame.contextLView=s,s[8]}function Un(){let s=Il();for(;null!==s&&64===s.type;)s=s.parent;return s}function Il(){return At.lFrame.currentTNode}function Hs(){const s=At.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ai(s,o){const u=At.lFrame;u.currentTNode=s,u.isParent=o}function Ma(){return At.lFrame.isParent}function Al(){At.lFrame.isParent=!1}function wo(){return At.isInCheckNoChangesMode}function Du(s){At.isInCheckNoChangesMode=s}function or(){const s=At.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ai(){return At.lFrame.bindingIndex}function Si(){return At.lFrame.bindingIndex++}function Ni(s){const o=At.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function $c(s){At.lFrame.inI18n=s}function Ra(s,o){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ko(o)}function Ko(s){At.lFrame.currentDirectiveIndex=s}function Iu(){return At.lFrame.currentQueryIndex}function Co(s){At.lFrame.currentQueryIndex=s}function Nl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function jc(s,o,u){if(u&at.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&at.Host||(h=Nl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=At.lFrame=fh();return c.currentTNode=o,c.lView=s,!0}function ka(s){const o=fh(),u=s[1];At.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function fh(){const s=At.lFrame,o=null===s?null:s.child;return null===o?Gc(s):o}function Gc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function qc(){const s=At.lFrame;return At.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Wc=qc;function Jo(){const s=qc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function $r(){return At.lFrame.selectedIndex}function Pa(s){At.lFrame.selectedIndex=s}function $n(){const s=At.lFrame;return As(s.tView,s.selectedIndex)}function Su(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:I,ngOnDestroy:N}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),v&&((s.contentHooks||(s.contentHooks=[])).push(u,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),I&&((s.viewHooks||(s.viewHooks=[])).push(u,I),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,I)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function js(s,o,u){ph(s,o,3,u)}function mr(s,o,u,c){(3&s[2])===u&&ph(s,o,u,c)}function Oa(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function ph(s,o,u,c){const p=null!=c?c:-1,_=o.length-1;let v=0;for(let C=void 0!==c?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(Cp(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Cp(s,o,u,c){const h=u[c]<0,p=u[c+1],v=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Eo{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function gh(s,o,u){const c=Pn(s);let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const _=u[h++],v=u[h++],C=u[h++];c?s.setAttribute(o,v,C,_):o.setAttributeNS(_,v,C)}else{const _=p,v=u[++h];Ss(_)?c&&s.setProperty(o,_,v):c?s.setAttribute(o,_,v):o.setAttribute(_,v),h++}}return h}function Tp(s){return 3===s||4===s||6===s}function Ss(s){return 64===s.charCodeAt(0)}function Kc(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Dp(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Dp(s,o,u,c,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Ml(s){return-1!==s}function La(s){return 32767&s}function ji(s,o){let u=function(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Va=!0;function xu(s){const o=Va;return Va=s,o}let Mu=0;function Qo(s,o){const u=en(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Rl(c.data,s),Rl(o,null),Rl(c.blueprint,null));const h=dt(s,o),p=s.injectorIndex;if(Ml(h)){const _=La(h),v=ji(h,o),C=v[1].data;for(let I=0;I<8;I++)o[p+I]=v[_+I]|C[_+I]}return o[p+8]=h,p}function Rl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function en(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function dt(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(c=2===_?p.declTNode:1===_?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Tn(s,o,u){!function(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Xt)&&(c=u[Xt]),null==c&&(c=u[Xt]=Mu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function _r(s,o,u){if(u&at.Optional)return s;rt(o,"NodeInjector")}function Xo(s,o,u,c){if(u&at.Optional&&void 0===c&&(c=null),0==(u&(at.Self|at.Host))){const h=s[9],p=jn(void 0);try{return h?h.get(o,c,u&at.Optional):ii(o,c,u&at.Optional)}finally{jn(p)}}return _r(c,o,u)}function Ns(s,o,u,c=at.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Xt)?s[Xt]:void 0;return"number"==typeof o?o>=0?255&o:yh:o}(u);if("function"==typeof p){if(!jc(o,s,c))return c&at.Host?_r(h,u,c):Xo(o,u,c,h);try{const _=p(c);if(null!=_||c&at.Optional)return _;rt(u)}finally{Wc()}}else if("number"==typeof p){let _=null,v=en(s,o),C=-1,I=c&at.Host?o[16][6]:null;for((-1===v||c&at.SkipSelf)&&(C=-1===v?dt(s,o):o[v+8],-1!==C&&ea(c,!1)?(_=o[1],v=La(C),o=ji(C,o)):v=-1);-1!==v;){const N=o[1];if(Ru(p,v,N.data)){const k=Ap(v,o,u,_,c,I);if(k!==ar)return k}C=o[v+8],-1!==C&&ea(c,o[1].data[v+8]===I)&&Ru(p,v,o)?(_=N,v=La(C),o=ji(C,o)):v=-1}}}return Xo(o,u,c,h)}const ar={};function yh(){return new Io(Un(),Me())}function Ap(s,o,u,c,h,p){const _=o[1],v=_.data[s+8],N=Do(v,_,u,null==c?yl(v)&&Va:c!=_&&0!=(3&v.type),h&at.Host&&p===v);return null!==N?qn(o,_,N,v):ar}function Do(s,o,u,c,h){const p=s.providerIndexes,_=o.data,v=1048575&p,C=s.directiveStart,N=p>>20,V=h?v+N:s.directiveEnd;for(let K=c?v:v+N;K<V;K++){const te=_[K];if(K<C&&u===te||K>=C&&te.type===u)return K}if(h){const K=_[C];if(K&&as(K)&&K.type===u)return C}return null}function qn(s,o,u,c){let h=s[u];const p=o.data;if(function(s){return s instanceof Eo}(h)){const _=h;_.resolving&&function(s,o){throw new Ae("200",`Circular dependency in DI detected for ${s}`)}(pe(p[u]));const v=xu(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?jn(_.injectImpl):null;jc(s,c,at.Default);try{h=s[u]=_.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const _=vu(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&jn(C),xu(v),_.resolving=!1,Wc()}}return h}function Ru(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ea(s,o){return!(s&at.Self||s&at.Host&&o)}class Io{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Ns(this._tNode,this._lView,o,c,u)}}function Ba(s){return fr(()=>{const o=s.prototype.constructor,u=o[Pt]||Jc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Pt]||Jc(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Jc(s){return le(s)?()=>{const o=Jc(j(s));return o&&o()}:$s(s)}function ku(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(Tp(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(Un(),s)}const cs="__parameters__";function xi(s,o,u){return fr(()=>{const c=function(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const _=new h(...p);return v.annotation=_,v;function v(C,I,N){const k=C.hasOwnProperty(cs)?C[cs]:Object.defineProperty(C,cs,{value:[]})[cs];for(;k.length<=N;)k.push(null);return(k[N]=k[N]||[]).push(_),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Hn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const vh=new Hn("AnalyzeForEntryComponents"),Ws=Function;function yi(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),yi(c,o)):o!==s&&o.push(c)}return o}function Ms(s,o){s.forEach(u=>Array.isArray(u)?Ms(u,o):o(u))}function Rs(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function xo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Mo(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function yr(s,o,u){let c=Ha(s,o);return c>=0?s[1|c]=u:(c=~c,function(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ur(s,o){const u=Ha(s,o);if(u>=0)return s[1|u]}function Ha(s,o){return function(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),_=s[p<<u];if(o===_)return p<<u;_>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const nn={},Ft="__NG_DI_FLAG__",Er="ngTempTokenPath",Pl=/\n/gm,zs="__source",ks=ee({provide:String,useValue:ee});let na;function Vt(s){const o=na;return na=s,o}function Rp(s,o=at.Default){if(void 0===na)throw new Error("inject() must be called from an injection context");return null===na?ii(s,void 0,o):na.get(s,o&at.Optional?null:void 0,o)}function Qn(s,o=at.Default){return(vn||Rp)(j(s),o)}function Ol(s){const o=[];for(let u=0;u<s.length;u++){const c=j(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,p=at.Default;for(let _=0;_<c.length;_++){const v=c[_],C=kp(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(Qn(h,p))}else o.push(Qn(c))}return o}function Fl(s,o){return s[Ft]=o,s.prototype[Ft]=o,s}function kp(s){return s[Ft]}function ds(s,o,u,c){const h=s[Er];throw o[zs]&&h.unshift(o[zs]),s.message=function(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=X(o);if(Array.isArray(o))h=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];p.push(_+":"+("string"==typeof v?JSON.stringify(v):X(v)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Pl,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Er]=null,s}const Ga=Fl(xi("Inject",s=>({token:s})),-1),qa=Fl(xi("Optional"),8),Hr=Fl(xi("SkipSelf"),4);let Bu;function ia(s){var o;return(null===(o=function(){if(void 0===Bu&&(Bu=null,It.trustedTypes))try{Bu=It.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Bu}())||void 0===o?void 0:o.createHTML(s))||s}class Vl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class R0 extends Vl{getTypeName(){return"HTML"}}class k0 extends Vl{getTypeName(){return"Style"}}class Dh extends Vl{getTypeName(){return"Script"}}class P0 extends Vl{getTypeName(){return"URL"}}class O0 extends Vl{getTypeName(){return"ResourceURL"}}function sa(s){return s instanceof Vl?s.changingThisBreaksApplicationSecurity:s}function Hu(s,o){const u=Ih(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function Ih(s){return s instanceof Vl&&s.getTypeName()||null}function b_(s){return new R0(s)}function Lp(s){return new k0(s)}function Vp(s){return new Dh(s)}function oa(s){return new P0(s)}function ld(s){return new O0(s)}function Ah(s){const o=new F0(s);return function(){try{return!!(new window.DOMParser).parseFromString(ia(""),"text/html")}catch(s){return!1}}()?new w_(o):o}class w_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(ia(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class F0{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=ia(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=ia(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const _=u.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const C_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Sh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function za(s){return(s=String(s)).match(C_)||s.match(Sh)?s:"unsafe:"+s}function Nh(s){return(s=String(s)).split(",").map(o=>za(o.trim())).join(", ")}function Ps(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function Bl(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const Gu=Ps("area,br,col,hr,img,wbr"),T_=Ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qu=Ps("rp,rt"),Bp=Bl(Gu,Bl(T_,Ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bl(qu,Ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bl(qu,T_)),ud=Ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),w=Ps("srcset"),E=Bl(ud,w,Ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),x=Ps("script,style,template");class R{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Bp.hasOwnProperty(u))return this.sanitizedSomething=!0,!x.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),_=p.name,v=_.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;ud[v]&&(C=za(C)),w[v]&&(C=Nh(C)),this.buf.push(" ",_,'="',nt(C),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Bp.hasOwnProperty(u)&&!Gu.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(nt(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const re=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ee=/([^\#-~ |!])/g;function nt(s){return s.replace(/&/g,"&amp;").replace(re,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ee,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Be;function _t(s,o){let u=null;try{Be=Be||Ah(s);let c=o?String(o):"";u=Be.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=u.innerHTML,u=Be.getInertBodyElement(c)}while(c!==p);return ia((new R).sanitizeChildren(yn(u)||u))}finally{if(u){const c=yn(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function yn(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var un=(()=>((un=un||{})[un.NONE=0]="NONE",un[un.HTML=1]="HTML",un[un.STYLE=2]="STYLE",un[un.SCRIPT=3]="SCRIPT",un[un.URL=4]="URL",un[un.RESOURCE_URL=5]="RESOURCE_URL",un))();function dd(s){const o=function(){const s=Me();return s&&s[12]}();return o?o.sanitize(un.URL,s)||"":Hu(s,"URL")?sa(s):za(ce(s))}const Rh="__ngContext__";function Ri(s,o){s[Rh]=o}function V0(s){const o=function(s){return s[Rh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function hd(s){return s.ngOriginalError}function QS(s,...o){s.error(...o)}class Oh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=this._findContext(o),h=(s=o)&&s.ngErrorLogger||QS;var s;h(this._console,"ERROR",o),u&&h(this._console,"ORIGINAL ERROR",u),c&&h(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(hd(o)):null}_findOriginalError(o){let u=o&&hd(o);for(;u&&hd(u);)u=hd(u);return u||null}}const tN=/^>|^->|<!--|-->|--!>|<!-$/g,j0=/(<|>)/;const vE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It))();function Ya(s){return s instanceof Function?s():s}var Ka=(()=>((Ka=Ka||{})[Ka.Important=1]="Important",Ka[Ka.DashCase=2]="DashCase",Ka))();let G0;function x_(s,o){return G0(s,o)}function Zp(s){const o=s[3];return $i(o)?o[3]:o}function M_(s){return q0(s[13])}function TE(s){return q0(s[4])}function q0(s){for(;null!==s&&!$i(s);)s=s[4];return s}function fd(s,o,u,c,h){if(null!=c){let p,_=!1;$i(c)?p=c:kn(c)&&(_=!0,c=c[0]);const v=An(c);0===s&&null!==u?null==h?NE(o,u,v):Zu(o,u,v,h||null,!0):1===s&&null!==u?Zu(o,u,v,h||null,!0):2===s?J0(o,v,_):3===s&&o.destroyNode(v),null!=p&&function(s,o,u,c,h){const p=u[7];p!==An(u)&&fd(o,s,c,p,h);for(let v=10;v<u.length;v++){const C=u[v];gd(C[1],C,s,o,c,p)}}(o,s,p,u,h)}}function R_(s,o){return Pn(s)?s.createText(o):s.createTextNode(o)}function DE(s,o,u){Pn(s)?s.setValue(o,u):o.textContent=u}function lN(s,o){return s.createComment(function(s){return s.replace(tN,o=>o.replace(j0,"\u200b$1\u200b"))}(o))}function W0(s,o,u){return Pn(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function k_(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Cu(h,-1)),u.splice(c,1)}function P_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&k_(h,c),o>0&&(s[u-1][4]=c[4]);const p=xo(s,10+o);!function(s,o){gd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function IE(s,o){if(!(256&o[2])){const u=o[11];Pn(u)&&u.destroyNode&&gd(s,o,u,3,null,null),function(s){let o=s[13];if(!o)return Wu(s[1],s);for(;o;){let u=null;if(kn(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)kn(o)&&Wu(o[1],o),o=o[3];null===o&&(o=s),kn(o)&&Wu(o[1],o),u=o&&o[4]}o=u}}(o)}}function Wu(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Eo)){const p=u[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const v=h[p[_]],C=p[_+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const _=u[p+1],v="function"==typeof _?_(o):An(o[_]),C=c[h=u[p+2]],I=u[p+3];"boolean"==typeof I?v.removeEventListener(u[p],C,I):I>=0?c[h=I]():c[h=-I].unsubscribe(),p+=2}else{const _=c[h=u[p+1]];u[p].call(_)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Pn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&$i(o[3])){u!==o[3]&&k_(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function AE(s,o,u){return SE(s,o.parent,u)}function SE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Ze.None||h===Ze.Emulated)return null}return Sn(c,u)}function Zu(s,o,u,c,h){Pn(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function NE(s,o,u){Pn(s)?s.appendChild(o,u):o.appendChild(u)}function xE(s,o,u,c,h){null!==c?Zu(s,o,u,c,h):NE(s,o,u)}function O_(s,o){return Pn(s)?s.parentNode(o):o.parentNode}function L_(s,o,u){return pd(s,o,u)}function V_(s,o,u){return 40&s.type?Sn(s,u):null}let z0,pd=V_;function ME(s,o){pd=s,z0=o}function zp(s,o,u,c){const h=AE(s,c,o),p=o[11],v=L_(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)xE(p,h,u[C],v,!1);else xE(p,h,u,v,!1);void 0!==z0&&z0(p,c,o,u,h)}function B_(s,o){if(null!==o){const u=o.type;if(3&u)return Sn(o,s);if(4&u)return K0(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return B_(s,c);{const h=s[o.index];return $i(h)?K0(-1,h):An(h)}}if(32&u)return x_(o,s)()||An(s[o.index]);{const c=Y0(s,o);return null!==c?Array.isArray(c)?c[0]:B_(Zp(s[16]),c):B_(s,o.next)}}return null}function Y0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function K0(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return B_(c,h)}return o[7]}function J0(s,o,u){const c=O_(s,o);c&&function(s,o,u,c){Pn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}function U_(s,o,u,c,h,p,_){for(;null!=u;){const v=c[u.index],C=u.type;if(_&&0===o&&(v&&Ri(An(v),c),u.flags|=4),64!=(64&u.flags))if(8&C)U_(s,o,u.child,c,h,p,!1),fd(o,s,h,v,p);else if(32&C){const I=x_(u,c);let N;for(;N=I();)fd(o,s,h,N,p);fd(o,s,h,v,p)}else 16&C?zu(s,o,c,u,h,p):fd(o,s,h,v,p);u=_?u.projectionNext:u.next}}function gd(s,o,u,c,h,p){U_(u,c,s.firstChild,o,h,p,!1)}function zu(s,o,u,c,h,p){const _=u[16],C=_[6].projection[c.projection];if(Array.isArray(C))for(let I=0;I<C.length;I++)fd(o,s,h,C[I],p);else U_(s,o,C,_[3],h,p,!0)}function kE(s,o,u){Pn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Q0(s,o,u){Pn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function X0(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const PE="ng-template";function _N(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==X0(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function eb(s){return 4===s.type&&s.value!==PE}function yN(s,o,u){return o===(4!==s.type||u?s.value:PE)}function vN(s,o,u){let c=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(Tp(s[o]))return o;return s.length}(h);let _=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!_)if(4&c){if(c=2|1&c,""!==C&&!yN(s,C,u)||""===C&&1===o.length){if(ua(c))return!1;_=!0}}else{const I=8&c?C:o[++v];if(8&c&&null!==s.attrs){if(!_N(s.attrs,I,u)){if(ua(c))return!1;_=!0}continue}const k=tb(8&c?"class":C,h,eb(s),u);if(-1===k){if(ua(c))return!1;_=!0;continue}if(""!==I){let V;V=k>p?"":h[k+1].toLowerCase();const K=8&c?V:null;if(K&&-1!==X0(K,I,0)||2&c&&I!==V){if(ua(c))return!1;_=!0}}}}else{if(!_&&!ua(c)&&!ua(C))return!1;if(_&&ua(C))continue;_=!1,c=C|1&c}}return ua(c)||_}function ua(s){return 0==(1&s)}function tb(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function OE(s,o,u=!1){for(let c=0;c<o.length;c++)if(vN(s,o[c],u))return!0;return!1}function KO(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function LE(s,o){return s?":not("+o.trim()+")":o}function CN(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const v=s[++u];h+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+_:4&c&&(h+=" "+_);else""!==h&&!ua(_)&&(o+=LE(p,h),h=""),c=_,p=p||!ua(c);u++}return""!==h&&(o+=LE(p,h)),o}const $t={};function Yu(s){$_(Yt(),Me(),$r()+s,wo())}function $_(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&js(o,p,u)}else{const p=s.preOrderHooks;null!==p&&mr(o,p,0,u)}Pa(u)}function H_(s,o){return s<<17|o<<2}function ca(s){return s>>17&32767}function j_(s){return 2|s}function Ks(s){return(131068&s)>>2}function nb(s,o){return-131069&s|o<<2}function Lh(s){return 1|s}function Y_(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const _=s.data[p];Co(h),_.contentQueries(2,o[p],p)}}}function $h(s,o,u,c,h,p,_,v,C,I){const N=o.blueprint.slice();return N[0]=h,N[2]=140|c,Tl(N),N[3]=N[15]=s,N[8]=u,N[10]=_||s&&s[10],N[11]=v||s&&s[11],N[12]=C||s&&s[12]||null,N[9]=I||s&&s[9]||null,N[6]=p,N[16]=2==o.type?s[16]:N,N}function Hh(s,o,u,c,h){let p=s.data[o];if(null===p)p=ub(s,o,u,c,h),At.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const _=Hs();p.injectorIndex=null===_?-1:_.injectorIndex}return ai(p,!0),p}function ub(s,o,u,c,h){const p=Il(),_=Ma(),C=s.data[o]=function(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function jh(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function eg(s,o,u){ka(o);try{const c=s.viewQuery;null!==c&&Q_(1,c,u);const h=s.template;null!==h&&tg(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Y_(s,o),s.staticViewQueries&&Q_(2,s.viewQuery,u);const p=s.components;null!==p&&function(s,o){for(let u=0;u<o.length;u++)LN(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Jo()}}function md(s,o,u,c){const h=o[2];if(256==(256&h))return;ka(o);const p=wo();try{Tl(o),function(s){At.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&tg(s,o,u,2,c);const _=3==(3&h);if(!p)if(_){const I=s.preOrderCheckHooks;null!==I&&js(o,I,null)}else{const I=s.preOrderHooks;null!==I&&mr(o,I,0,null),Oa(o,0)}if(function(s){for(let o=M_(s);null!==o;o=TE(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(1024&h[2])&&Cu(p,1),h[2]|=1024}}}(o),function(s){for(let o=M_(s);null!==o;o=TE(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];El(c)&&md(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&Y_(s,o),!p)if(_){const I=s.contentCheckHooks;null!==I&&js(o,I)}else{const I=s.contentHooks;null!==I&&mr(o,I,1),Oa(o,1)}!function(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Pa(~h);else{const p=h,_=u[++c],v=u[++c];Ra(_,p),v(2,o[p])}}}finally{Pa(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let u=0;u<o.length;u++)Gh(s,o[u])}(o,v);const C=s.viewQuery;if(null!==C&&Q_(2,C,c),!p)if(_){const I=s.viewCheckHooks;null!==I&&js(o,I)}else{const I=s.viewHooks;null!==I&&mr(o,I,2),Oa(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Cu(o[3],-1))}finally{Jo()}}function cb(s,o,u,c){const h=o[10],p=!wo(),_=dh(o);try{p&&!_&&h.begin&&h.begin(),_&&eg(s,o,c),md(s,o,u,c)}finally{p&&!_&&h.end&&h.end()}}function tg(s,o,u,c,h){const p=$r(),_=2&c;try{Pa(-1),_&&o.length>20&&$_(s,o,20,wo()),u(c,h)}finally{Pa(p)}}function _d(s,o,u){if(Ac(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,u[p],p)}}}function db(s,o,u){!Vc()||(function(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||Qo(u,o),Ri(c,o);const _=u.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],I=as(C);I&&RN(o,u,C);const N=qn(o,s,v,u);Ri(N,o),null!==_&&kN(0,v-h,N,C,0,_),I&&(Nr(u.index,o)[8]=N)}}(s,o,u,Sn(u,o)),128==(128&u.flags)&&function(s,o,u){const c=u.directiveStart,h=u.directiveEnd,_=u.index,v=At.lFrame.currentDirectiveIndex;try{Pa(_);for(let C=c;C<h;C++){const I=s.data[C],N=o[C];Ko(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&KE(I,N)}}finally{Pa(-1),Ko(v)}}(s,o,u))}function yd(s,o,u=Sn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],v=-1===_?u(o,s):s[_];s[h++]=v}}}function jE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=K_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function K_(s,o,u,c,h,p,_,v,C,I){const N=20+c,k=N+h,V=function(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:$t);return u}(N,k),K="function"==typeof I?I():I;return V[1]={type:s,blueprint:V,template:u,queries:null,viewQuery:v,declTNode:o,data:V.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function fb(s,o,u,c){const h=sT(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&Eb(s).push(c,h.length-1))}function pb(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function ps(s,o,u,c,h,p,_,v){const C=Sn(o,u);let N,I=o.inputs;!v&&null!=I&&(N=I[c])?(Ib(s,u,N,c,h),yl(o)&&function(s,o){const u=Nr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=_?_(h,o.value||"",c):h,Pn(p)?p.setProperty(C,c,h):Ss(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function ig(s,o,u,c){let h=!1;if(Vc()){const p=function(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const _=c[p];OE(u,_.selectors,!1)&&(h||(h=[]),Tn(Qo(u,o),s,_.type),as(_)?(JE(s,u),h.unshift(_)):h.push(_))}return h}(s,o,u),_=null===c?null:{"":-1};if(null!==p){h=!0,_b(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const k=p[N];k.providersResolver&&k.providersResolver(k)}let v=!1,C=!1,I=jh(s,o,p.length,null);for(let N=0;N<p.length;N++){const k=p[N];u.mergedAttrs=Kc(u.mergedAttrs,k.hostAttrs),eT(s,u,o,I,k),XE(I,k,_),null!==k.contentQueries&&(u.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(u.flags|=128);const V=k.type.prototype;!v&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),I++}!function(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,_=[];let v=null,C=null;for(let I=o.directiveStart;I<c;I++){const N=h[I],k=N.inputs,V=null===p||eb(o)?null:tT(k,p);_.push(V),v=pb(k,I,v),C=pb(N.outputs,I,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=C}(s,u)}_&&function(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new Ae("301",`Export of name '${o[h+1]}' not found!`);c.push(o[h],p)}}}(u,c,_)}return u.mergedAttrs=Kc(u.mergedAttrs,u.attrs),h}function J_(s,o,u,c,h,p){const _=p.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=C&&v.push(C),v.push(c,h,_)}}function KE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function JE(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function XE(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;as(o)&&(u[""]=s)}}function _b(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function eT(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=$s(h.type)),_=new Eo(p,as(h),null);s.blueprint[c]=_,u[c]=_,J_(s,o,0,c,jh(s,u,h.hostVars,$t),h)}function RN(s,o,u){const c=Sn(o,s),h=jE(u),p=s[10],_=Ju(s,$h(s,h,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=_}function yb(s,o,u,c,h,p,_){if(null==p)Pn(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const v=null==_?ce(p):_(p,c||"",h);Pn(s)?s.setAttribute(o,h,v,u):u?o.setAttributeNS(u,h,v):o.setAttribute(h,v)}}function kN(s,o,u,c,h,p){const _=p[o];if(null!==_){const v=c.setInput;for(let C=0;C<_.length;){const I=_[C++],N=_[C++],k=_[C++];null!==v?c.setInput(u,k,I,N):u[N]=k}}}function tT(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function nT(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Gh(s,o){const u=Nr(o,s);if(El(u)){const c=u[1];80&u[2]?md(c,u,c.template,u[8]):u[5]>0&&sg(u)}}function sg(s){for(let c=M_(s);null!==c;c=TE(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const _=p[1];md(_,p,_.template,p[8])}else p[5]>0&&sg(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=Nr(u[c],s);El(h)&&h[5]>0&&sg(h)}}function LN(s,o){const u=Nr(o,s),c=u[1];(function(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),eg(c,u,u[8])}function Ju(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function vd(s){for(;s;){s[2]|=64;const o=Zp(s);if(ls(s)&&!o)return s;s=o}return null}function wb(s,o,u){const c=o[10];c.begin&&c.begin();try{md(s,o,s.template,u)}catch(h){throw Db(o,h),h}finally{c.end&&c.end()}}function rT(s){!function(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=V0(u),h=c[1];cb(h,c,h.template,u)}}(s[8])}function Q_(s,o,u){Co(0),o(s,u)}const iT=(()=>Promise.resolve(null))();function sT(s){return s[7]||(s[7]=[])}function Eb(s){return s.cleanup||(s.cleanup=[])}function Db(s,o){const u=s[9],c=u?u.get(Oh,null):null;c&&c.handleError(o)}function Ib(s,o,u,c,h){for(let p=0;p<u.length;){const _=u[p++],v=u[p++],C=o[_],I=s.data[_];null!==I.setInput?I.setInput(C,h,c,v):C[v]=h}}function Gl(s,o,u){const c=wu(o,s);DE(s[11],c,u)}function og(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?p=v:1==p?h=Q(h,v):2==p&&(c=Q(c,v+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const bd=new Hn("INJECTOR",-1);class Sb{get(o,u=nn){if(u===nn){const c=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw c.name="NullInjectorError",c}return u}}const Cn=new Hn("Set Injector scope."),mn={},an={};let tl;function Zn(){return void 0===tl&&(tl=new Sb),tl}function lT(s,o=null,u=null,c){return new ag(s,u,o||Zn(),c)}class ag{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&Ms(u,v=>this.processProvider(v,o,u)),Ms([o],v=>this.processInjectorType(v,[],p)),this.records.set(bd,qh(void 0,this));const _=this.records.get(Cn);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:X(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=nn,c=at.Default){this.assertNotDestroyed();const h=Vt(this),p=jn(void 0);try{if(!(c&at.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof Hn)&&rn(o);v=C&&this.injectableDefInScope(C)?qh(X_(o),mn):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(c&at.Self?Zn():this.parent).get(o,u=c&at.Optional&&u===nn?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Er]=_[Er]||[]).unshift(X(o)),h)throw _;return ds(_,o,"R3InjectorError",this.source)}throw _}finally{jn(p),Vt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(X(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,c){if(!(o=j(o)))return!1;let h=ri(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,v=-1!==c.indexOf(_);if(void 0!==p&&(h=ri(p)),null==h)return!1;if(null!=h.imports&&!v){let N;c.push(_);try{Ms(h.imports,k=>{this.processInjectorType(k,u,c)&&(void 0===N&&(N=[]),N.push(k))})}finally{}if(void 0!==N)for(let k=0;k<N.length;k++){const{ngModule:V,providers:K}=N[k];Ms(K,te=>this.processProvider(te,V,K||bt))}}this.injectorDefTypes.add(_);const C=$s(_)||(()=>new _);this.records.set(_,qh(C,mn));const I=h.providers;if(null!=I&&!v){const N=o;Ms(I,k=>this.processProvider(k,N,I))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let h=Wh(o=j(o))?o:j(o&&o.provide);const p=ey(s=o)?qh(void 0,s.useValue):qh(Wi(s),mn);var s;if(Wh(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=qh(void 0,mn,!0),_.factory=()=>Ol(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,u){return u.value===mn&&(u.value=an,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(s=u.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const u=j(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function X_(s){const o=rn(s),u=null!==o?o.factory:$s(s);if(null!==u)return u;if(s instanceof Hn)throw new Error(`Token ${X(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=Mo(o,"?");throw new Error(`Can't resolve all parameters for ${X(s)}: (${c.join(", ")}).`)}const u=function(s){const o=s&&(s[dr]||s[hr]);if(o){const u=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function Wi(s,o,u){let c;if(Wh(s)){const h=j(s);return $s(h)||X_(h)}if(ey(s))c=()=>j(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ol(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>Qn(j(s.useExisting));else{const h=j(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return $s(h)||X_(h);c=()=>new h(...Ol(s.deps))}return c}function qh(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function ey(s){return null!==s&&"object"==typeof s&&ks in s}function Wh(s){return"function"==typeof s}const cT=function(s,o,u){return function(s,o=null,u=null,c){const h=lT(s,o,u,c);return h._resolveInjectorDefTypes(),h}({name:u},o,s,u)};let cr=(()=>{class s{static create(u,c){return Array.isArray(u)?cT(u,c,""):cT(u.providers,u.parent,u.name||"")}}return s.THROW_IF_NOT_FOUND=nn,s.NULL=new Sb,s.\u0275prov=wt({token:s,providedIn:"any",factory:()=>Qn(bd)}),s.__NG_ELEMENT_ID__=-1,s})();function Kh(s,o){Su(V0(s)[1],Un())}function uy(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(as(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(u){c.push(h);const _=s;_.inputs=cy(s.inputs),_.declaredInputs=cy(s.declaredInputs),_.outputs=cy(s.outputs);const v=h.hostBindings;v&&Jh(s,v);const C=h.viewQuery,I=h.contentQueries;if(C&&vT(s,C),I&&bT(s,I),de(s.inputs,h.inputs),de(s.declaredInputs,h.declaredInputs),de(s.outputs,h.outputs),as(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const v=p[_];v&&v.ngInherit&&v(s),v===uy&&(u=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Kc(h.hostAttrs,u=Kc(u,h.hostAttrs))}}(c)}function cy(s){return s===sn?{}:s===bt?[]:s}function vT(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function bT(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function Jh(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Qh=null;function rl(){if(!Qh){const s=It.Symbol;if(s&&s.iterator)Qh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Qh=c)}}}return Qh}class Ls{constructor(o){this.wrapped=o}static wrap(o){return new Ls(o)}static unwrap(o){return Ls.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof Ls}}function pg(s){return!!gg(s)&&(Array.isArray(s)||!(s instanceof Map)&&rl()in s)}function gg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function il(s,o,u){return s[o]=u}function Zi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function sl(s,o,u,c){const h=Zi(s,o,u);return Zi(s,o+1,c)||h}function Xh(s,o,u,c){const h=Me();return Zi(h,Si(),o)&&(Yt(),function(s,o,u,c,h,p){const _=Sn(s,o);yb(o[11],_,p,s.value,u,c,h)}($n(),h,s,o,u,c)),Xh}function Zl(s,o,u,c){return Zi(s,Si(),u)?o+ce(u)+c:$t}function Xu(s,o,u,c,h,p,_,v,C,I){const k=function(s,o,u,c,h,p){const _=sl(s,o,u,c);return sl(s,o+2,h,p)||_}(s,Ai(),u,h,_,C);return Ni(4),k?o+ce(u)+c+ce(h)+p+ce(_)+v+ce(C)+I:$t}function zl(s,o,u,c,h,p,_,v){const C=Me(),I=Yt(),N=s+20,k=I.firstCreatePass?function(s,o,u,c,h,p,_,v,C){const I=o.consts,N=Hh(o,s,4,_||null,gr(I,v));ig(o,u,N,gr(I,C)),Su(o,N);const k=N.tViews=K_(2,N,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,I);return null!==o.queries&&(o.queries.template(o,N),k.queries=o.queries.embeddedTView(N)),N}(N,I,C,o,u,c,h,p,_):I.data[N];ai(k,!1);const V=C[11].createComment("");zp(I,C,V,k),Ri(V,C),Ju(C,C[N]=nT(V,C,V,k)),mi(k)&&db(I,C,k),null!=_&&yd(C,k,v)}function TT(s){return Na(At.lFrame.contextLView,20+s)}function bg(s,o=at.Default){const u=Me();return null===u?Qn(s,o):Ns(Un(),u,j(s),o)}function Zb(s,o,u){const c=Me();return Zi(c,Si(),o)&&ps(Yt(),$n(),c,s,o,c[11],u,!1),Zb}function by(s,o,u,c,h){const _=h?"class":"style";Ib(s,u,o.inputs[_],_,c)}function wg(s,o,u,c){const h=Me(),p=Yt(),_=20+s,v=h[11],C=h[_]=W0(v,o,At.lFrame.currentNamespace),I=p.firstCreatePass?function(s,o,u,c,h,p,_){const v=o.consts,I=Hh(o,s,2,h,gr(v,p));return ig(o,u,I,gr(v,_)),null!==I.attrs&&og(I,I.attrs,!1),null!==I.mergedAttrs&&og(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(_,p,h,0,o,u,c):p.data[_];ai(I,!0);const N=I.mergedAttrs;null!==N&&gh(v,C,N);const k=I.classes;null!==k&&Q0(v,C,k);const V=I.styles;null!==V&&kE(v,C,V),64!=(64&I.flags)&&zp(p,h,C,I),0===At.lFrame.elementDepthCount&&Ri(C,h),At.lFrame.elementDepthCount++,mi(I)&&(db(p,h,I),_d(p,I,h)),null!==c&&yd(h,I)}function Cy(){let s=Un();Ma()?Al():(s=s.parent,ai(s,!1));const o=s;At.lFrame.elementDepthCount--;const u=Yt();u.firstCreatePass&&(Su(u,s),Ac(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&by(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&by(u,o,Me(),o.stylesWithoutHost,!1)}function OT(s,o,u,c){wg(s,o,u,c),Cy()}function Yb(s,o,u){const c=Me(),h=Yt(),p=s+20,_=h.firstCreatePass?function(s,o,u,c,h){const p=o.consts,_=gr(p,c),v=Hh(o,s,8,"ng-container",_);return null!==_&&og(v,_,!0),ig(o,u,v,gr(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,c,o,u):h.data[p];ai(_,!0);const v=c[p]=c[11].createComment("");zp(h,c,v,_),Ri(v,c),mi(_)&&(db(h,c,_),_d(h,_,c)),null!=u&&yd(c,_)}function Kb(){let s=Un();const o=Yt();Ma()?Al():(s=s.parent,ai(s,!1)),o.firstCreatePass&&(Su(o,s),Ac(s)&&o.queries.elementEnd(s))}function FT(){return Me()}function Jb(s){return!!s&&"function"==typeof s.then}function LT(s){return!!s&&"function"==typeof s.subscribe}const Qb=LT;function Ey(s,o,u,c){const h=Me(),p=Yt(),_=Un();return function(s,o,u,c,h,p,_,v){const C=mi(c),N=s.firstCreatePass&&Eb(s),k=o[8],V=sT(o);let K=!0;if(3&c.type||v){const ue=Sn(c,o),Le=v?v(ue):ue,De=V.length,vt=v?kt=>v(An(kt[c.index])):c.index;if(Pn(u)){let kt=null;if(!v&&C&&(kt=function(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===u&&h[p+1]===c){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,c.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=p,kt.__ngLastListenerFn__=p,K=!1;else{p=Ty(c,o,k,p,!1);const ct=u.listen(Le,h,p);V.push(p,ct),N&&N.push(h,vt,De,De+1)}}else p=Ty(c,o,k,p,!0),Le.addEventListener(h,p,_),V.push(p),N&&N.push(h,vt,De,_)}else p=Ty(c,o,k,p,!1);const te=c.outputs;let he;if(K&&null!==te&&(he=te[h])){const ue=he.length;if(ue)for(let Le=0;Le<ue;Le+=2){const pi=o[he[Le]][he[Le+1]].subscribe(p),ws=V.length;V.push(p,pi),N&&N.push(h,c.index,ws,-(ws+1))}}}(p,h,h[11],_,s,o,!!u,c),Ey}function UT(s,o,u,c){try{return!1!==u(c)}catch(h){return Db(s,h),!1}}function Ty(s,o,u,c,h){return function p(_){if(_===Function)return c;const v=2&s.flags?Nr(s.index,o):o;0==(32&o[2])&&vd(v);let C=UT(o,0,c,_),I=p.__ngNextListenerFn__;for(;I;)C=UT(o,0,I,_)&&C,I=I.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Cg(s=1){return function(s){return(At.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,At.lFrame.contextLView))[8]}(s)}function $T(s,o){let u=null;const c=function(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?OE(s,p,!0):KO(c,p))return h}else u=h}return u}function HT(s){const o=Me()[16][6];if(!o.projection){const c=o.projection=Mo(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const _=s?$T(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:c[_]=p,h[_]=p),p=p.next}}}function jT(s,o=0,u){const c=Me(),h=Yt(),p=Hh(h,20+s,16,null,u||null);null===p.projection&&(p.projection=o),Al(),64!=(64&p.flags)&&function(s,o,u){zu(o[11],0,o,u,AE(s,u,o),L_(u.parent||o[6],u,o))}(h,c,p)}function ew(s,o,u){return hf(s,"",o,"",u),ew}function hf(s,o,u,c,h){const p=Me(),_=Zl(p,o,u,c);return _!==$t&&ps(Yt(),$n(),p,s,_,p[11],h,!1),hf}function WT(s,o,u,c,h){const p=s[u+1],_=null===o;let v=c?ca(p):Ks(p),C=!1;for(;0!==v&&(!1===C||_);){const N=s[v+1];ax(s[v],o)&&(C=!0,s[v+1]=c?Lh(N):j_(N)),v=c?ca(N):Ks(N)}C&&(s[u+1]=c?j_(p):Lh(p))}function ax(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ha(s,o)>=0}const Qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Iy(s){return s.substring(Qr.key,Qr.keyEnd)}function ff(s,o){const u=Qr.textEnd;return u===o?-1:(o=Qr.keyEnd=function(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Qr.key=o,u),ic(s,o,u))}function ic(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function Sy(s,o,u){return Xs(s,o,u,!1),Sy}function Ny(s,o){return Xs(s,o,null,!0),Ny}function Tg(s){eo(yr,Lo,s,!0)}function Lo(s,o){for(let u=function(s){return function(s){Qr.key=0,Qr.keyEnd=0,Qr.value=0,Qr.valueEnd=0,Qr.textEnd=s.length}(s),ff(s,ic(s,0,Qr.textEnd))}(o);u>=0;u=ff(o,u))yr(s,Iy(o),!0)}function Xs(s,o,u,c){const h=Me(),p=Yt(),_=Ni(2);p.firstUpdatePass&&pf(p,s,_,c),o!==$t&&Zi(h,_,o)&&lw(p,p.data[$r()],h,h[11],s,h[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(sa(s)))),s}(o,u),c,_)}function eo(s,o,u,c){const h=Yt(),p=Ni(2);h.firstUpdatePass&&pf(h,null,p,c);const _=Me();if(u!==$t&&Zi(_,p,u)){const v=h.data[$r()];if(Ag(v,c)&&!KT(h,p)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(u=Q(C,u||"")),by(h,v,_,u,c)}else!function(s,o,u,c,h,p,_,v){h===$t&&(h=bt);let C=0,I=0,N=0<h.length?h[0]:null,k=0<p.length?p[0]:null;for(;null!==N||null!==k;){const V=C<h.length?h[C+1]:void 0,K=I<p.length?p[I+1]:void 0;let he,te=null;N===k?(C+=2,I+=2,V!==K&&(te=k,he=K)):null===k||null!==N&&N<k?(C+=2,te=N):(I+=2,te=k,he=K),null!==te&&lw(s,o,u,c,te,he,_,v),N=C<h.length?h[C]:null,k=I<p.length?p[I]:null}}(h,v,_,_[11],_[p+1],_[p+1]=function(s,o,u){if(null==u||""===u)return bt;const c=[],h=sa(u);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,p)}}function KT(s,o){return o>=s.expandoStartIndex}function pf(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[$r()],_=KT(s,u);Ag(p,c)&&null===o&&!_&&(o=!1),o=function(s,o,u,c){const h=function(s){const o=At.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Ig(u=Dg(null,s,o,u,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(u=Dg(h,s,o,u,c),null===p){let C=function(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Ks(c))return s[ca(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Dg(null,s,o,C[1],c),C=Ig(C,o.attrs,c),function(s,o,u,c){s[ca(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Ig(c,s[p].hostAttrs,u);return Ig(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function(s,o,u,c,h,p){let _=p?o.classBindings:o.styleBindings,v=ca(_),C=Ks(_);s[c]=u;let N,I=!1;if(Array.isArray(u)){const k=u;N=k[1],(null===N||Ha(k,N)>0)&&(I=!0)}else N=u;if(h)if(0!==C){const V=ca(s[v+1]);s[c+1]=H_(V,v),0!==V&&(s[V+1]=nb(s[V+1],c)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],c)}else s[c+1]=H_(v,0),0!==v&&(s[v+1]=nb(s[v+1],c)),v=c;else s[c+1]=H_(C,0),0===v?v=c:s[C+1]=nb(s[C+1],c),C=c;I&&(s[c+1]=j_(s[c+1])),WT(s,N,c,!0),WT(s,N,c,!1),function(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ha(p,o)>=0&&(u[c+1]=Lh(u[c+1]))}(o,N,s,c,p),_=H_(v,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,u,_,c)}}function Dg(s,o,u,c,h){let p=null;const _=u.directiveEnd;let v=u.directiveStylingLast;for(-1===v?v=u.directiveStart:v++;v<_&&(p=o[v],c=Ig(c,p.hostAttrs,h),p!==s);)v++;return null!==s&&(u.directiveStylingLast=v),c}function Ig(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),yr(s,_,!!u||o[++p]))}return void 0===s?null:s}function lw(s,o,u,c,h,p,_,v){if(!(3&o.type))return;const C=s.data,I=C[v+1];gf(function(s){return 1==(1&s)}(I)?My(C,o,u,h,Ks(I),_):void 0)||(gf(p)||function(s){return 2==(2&s)}(I)&&(p=My(C,null,u,h,v,_)),function(s,o,u,c,h){const p=Pn(s);if(o)h?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let _=-1===c.indexOf("-")?void 0:Ka.DashCase;if(null==h)p?s.removeStyle(u,c,_):u.style.removeProperty(c);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),_|=Ka.Important),p?s.setStyle(u,c,h,_):u.style.setProperty(c,h,v?"important":"")}}}(c,_,wu($r(),u),h,p))}function My(s,o,u,c,h,p){const _=null===o;let v;for(;h>0;){const C=s[h],I=Array.isArray(C),N=I?C[1]:C,k=null===N;let V=u[h+1];V===$t&&(V=k?bt:void 0);let K=k?ur(V,c):N===c?V:void 0;if(I&&!gf(K)&&(K=ur(C,c)),gf(K)&&(v=K,_))return v;const te=s[h+1];h=_?ca(te):Ks(te)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=ur(C,c))}return v}function gf(s){return void 0!==s}function Ag(s,o){return 0!=(s.flags&(o?16:32))}function sc(s,o=""){const u=Me(),c=Yt(),h=s+20,p=c.firstCreatePass?Hh(c,h,1,o,null):c.data[h],_=u[h]=R_(u[11],o);zp(c,u,_,p),ai(p,!1)}function Sg(s){return Ng("",s,""),Sg}function Ng(s,o,u){const c=Me(),h=Zl(c,s,o,u);return h!==$t&&Gl(c,$r(),h),Ng}function cw(s,o,u,c,h){const p=Me(),_=function(s,o,u,c,h,p){const v=sl(s,Ai(),u,h);return Ni(2),v?o+ce(u)+c+ce(h)+p:$t}(p,s,o,u,c,h);return _!==$t&&Gl(p,$r(),_),cw}function fw(s,o,u,c,h,p,_,v,C){eo(yr,Lo,Xu(Me(),s,o,u,c,h,p,_,v,C),!0)}function Dd(s,o,u){const c=Me();return Zi(c,Si(),o)&&ps(Yt(),$n(),c,s,o,c[11],u,!0),Dd}const oc=void 0;var vw=["en",[["a","p"],["AM","PM"],oc],[["AM","PM"],oc,oc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oc,"{1} 'at' {0}",oc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Jl={};function Og(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=uD(o);if(u)return u;const c=o.split("-")[0];if(u=uD(c),u)return u;if("en"===c)return vw;throw new Error(`Missing locale data for the locale "${s}".`)}function lD(s){return Og(s)[St.PluralCase]}function uD(s){return s in Jl||(Jl[s]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[s]),Jl[s]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const Tx=["zero","one","two","few","many"],Fg="en-US",Ql={marker:"element"},ga={marker:"ICU"};var kr=(()=>((kr=kr||{})[kr.SHIFT=2]="SHIFT",kr[kr.APPEND_EAGERLY=1]="APPEND_EAGERLY",kr[kr.COMMENT=2]="COMMENT",kr))();let Lg=Fg;function ww(s){(function(s,o){null==s&&yt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(Lg=s.toLowerCase().replace(/_/g,"-"))}function dD(s,o,u){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?V_(s,0,u):An(u[h])}function Cw(s,o,u,c,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let _=c,v=null;if(3&o.type||(v=_,_=h),null!==_&&0==(2&o.flags))for(let C=1;C<p.length;C++)Zu(s,_,u[p[C]],v,!1)}}function Ew(s,o){if(s.push(o),s.length>1)for(let u=s.length-2;u>=0;u--){const c=s[u];Tw(c)||Fy(c,o)&&null===Dw(c)&&Iw(c,o.index)}}function Tw(s){return!(64&s.type)}function Fy(s,o){return Tw(o)||s.index>o.index}function Dw(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function Iw(s,o){const u=s.insertBeforeIndex;Array.isArray(u)?u[0]=o:(ME(dD,Cw),s.insertBeforeIndex=o)}function Vg(s,o){const u=s.data[o];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function Ax(s,o,u){const c=ub(s,u,64,null,null);return Ew(o,c),c}function Bg(s,o){const u=o[s.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function Sw(s){return s>>>17}function Nw(s){return(131070&s)>>>1}let ac=0,Bo=0;function Mw(s,o,u,c){const h=u[11];let _,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const I=o[++v];null===u[I]&&(u[I]=R_(h,C))}else if("number"==typeof C)switch(1&C){case 0:const I=Sw(C);let N,k;if(null===p&&(p=I,_=O_(h,c)),I===p?(N=c,k=_):(N=null,k=An(u[I])),null!==k){const he=Nw(C);Zu(h,k,u[he],N,!1);const Le=Vg(s,he);if(null!==Le&&"object"==typeof Le){const De=Bg(Le,u);null!==De&&Mw(s,Le.create[De],u,u[Le.anchorIdx])}}break;case 1:const K=o[++v],te=o[++v];yb(h,wu(C>>>1,u),null,null,K,te,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case ga:const I=o[++v],N=o[++v];null===u[N]&&Ri(u[N]=lN(h,I),u);break;case Ql:const k=o[++v],V=o[++v];null===u[V]&&Ri(u[V]=W0(h,k,null),u)}}}function Rw(s,o,u,c,h){for(let p=0;p<u.length;p++){const _=u[p],v=u[++p];if(_&h){let C="";for(let I=p+1;I<=p+v;I++){const N=u[I];if("string"==typeof N)C+=N;else if("number"==typeof N)if(N<0)C+=ce(o[c-N]);else{const k=N>>>2;switch(3&N){case 1:const V=u[++I],K=u[++I],te=s.data[k];"string"==typeof te?yb(o[11],o[k],null,te,V,C,K):ps(s,te,o,V,C,o[11],K,!1);break;case 0:const he=o[k];null!==he&&DE(o[11],he,C);break;case 2:_F(s,Vg(s,k),o,C);break;case 3:lc(s,Vg(s,k),c,o)}}}}else{const C=u[p+1];if(C>0&&3==(3&C)){const N=Vg(s,C>>>2);o[N.currentCaseLViewIndex]<0&&lc(s,N,c,o)}}p+=v}}function lc(s,o,u,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let p=ac;h<0&&(h=c[o.currentCaseLViewIndex]=~h,p=-1),Rw(s,c,o.update[h],u,p)}}function _F(s,o,u,c){const h=function(s,o){let u=s.cases.indexOf(o);if(-1===u)switch(s.type){case 1:{const c=function(s,o){const u=lD(o)(parseInt(s,10)),c=Tx[u];return void 0!==c?c:"other"}(o,Lg);u=s.cases.indexOf(c),-1===u&&"other"!==c&&(u=s.cases.indexOf("other"));break}case 0:u=s.cases.indexOf("other")}return-1===u?null:u}(o,c);if(Bg(o,u)!==h&&(hD(s,o,u),u[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const _=u[o.anchorIdx];_&&Mw(s,o.create[h],u,_)}}function hD(s,o,u){let c=Bg(o,u);if(null!==c){const h=o.remove[c];for(let p=0;p<h.length;p++){const _=h[p];if(_>0){const v=wu(_,u);null!==v&&J0(u[11],v)}else hD(s,Vg(s,~_),u)}}}function kw(){const s=[];let u,c,o=-1;function p(v,C){o=0;const I=Bg(v,C);c=null!==I?v.remove[I]:bt}function _(){if(o<c.length){const v=c[o++];return v>0?u[v]:(s.push(o,c),p(u[1].data[~v],u),_())}return 0===s.length?null:(c=s.pop(),o=s.pop(),_())}return function(v,C){for(u=C;s.length;)s.pop();return p(v.value,C),_}}const Ad=/\ufffd(\d+):?\d*\ufffd/gi,Pw=/\ufffd(\d+)\ufffd/,Ow=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,fD=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,pD=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,gD=/\uE500/g;function _D(s,o,u,c,h,p,_){const v=jh(s,c,1,null);let C=v<<kr.SHIFT,I=Hs();o===I&&(I=null),null===I&&(C|=kr.APPEND_EAGERLY),_&&(C|=kr.COMMENT,function(s){void 0===G0&&(G0=s())}(kw)),h.push(C,null===p?"":p);const N=ub(s,v,_?32:1,null===p?"":p,null);Ew(u,N);const k=N.index;return ai(N,!1),null!==I&&o!==I&&function(s,o){let u=s.insertBeforeIndex;null===u?(ME(dD,Cw),u=s.insertBeforeIndex=[null,o]):(function(s,o,u){s!=o&&yt(u,s,o,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(o))}(I,k),N}function Nx(s,o,u,c,h,p,_){const v=_.match(Ad),C=_D(s,o,u,p,c,v?null:_,!1);v&&Sd(h,_,C.index,null,0,null)}function Sd(s,o,u,c,h,p){const _=s.length,v=_+1;s.push(null,null);const C=_+2,I=o.split(Ad);let N=0;for(let k=0;k<I.length;k++){const V=I[k];if(1&k){const K=h+parseInt(V,10);s.push(-1-K),N|=yD(K)}else""!==V&&s.push(V)}return s.push(u<<2|(c?1:0)),c&&s.push(c,p),s[_]=N,s[v]=s.length-C,N}function yD(s){return 1<<Math.min(s,31)}function vD(s){let o,p,u="",c=0,h=!1;for(;null!==(o=fD.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,h=!1):(u+=s.substring(c,o.index+o[0].length),p=o[1],h=!0);return u+=s.substr(c),u}function bD(s,o,u,c,h,p){let _=0;const v={type:h.type,currentCaseLViewIndex:jh(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,u){s.push(yD(o.mainBinding),2,-1-o.mainBinding,u<<2|2)})(u,h,p),function(s,o,u){const c=s.data[o];null===c?s.data[o]=u:c.value=u}(s,p,v);const C=h.values;for(let I=0;I<C.length;I++){const N=C[I],k=[];for(let V=0;V<N.length;V++){const K=N[V];if("string"!=typeof K){const te=k.push(K)-1;N[V]=`\x3c!--\ufffd${te}\ufffd--\x3e`}}_=Ox(s,v,o,u,c,h.cases[I],N.join(""),k)|_}_&&function(s,o,u){s.push(o,1,u<<2|3)}(u,_,p)}function Px(s){const o=[],u=[];let c=1,h=0;const p=Fw(s=s.replace(Ow,function(_,v,C){return c="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let _=0;_<p.length;){let v=p[_++].trim();1===c&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=Fw(p[_++]);o.length>u.length&&u.push(C)}return{type:c,mainBinding:h,cases:o,values:u}}function Fw(s){if(!s)return[];let o=0;const u=[],c=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(u.pop(),0==u.length){const C=s.substring(o,v);Ow.test(C)?c.push(Px(C)):c.push(C),o=v+1}}else{if(0==u.length){const C=s.substring(o,v);c.push(C),o=v+1}u.push("{")}}const _=s.substring(o);return c.push(_),c}function Ox(s,o,u,c,h,p,_,v){const C=[],I=[],N=[];o.cases.push(p),o.create.push(C),o.remove.push(I),o.update.push(N);const V=Ah(bu()).getInertBodyElement(_),K=yn(V)||V;return K?wD(s,o,u,c,C,I,N,K,h,v,0):0}function wD(s,o,u,c,h,p,_,v,C,I,N){let k=0,V=v.firstChild;for(;V;){const K=jh(s,u,1,null);switch(V.nodeType){case Node.ELEMENT_NODE:const te=V,he=te.tagName.toLowerCase();if(Bp.hasOwnProperty(he)){Lw(h,Ql,he,C,K),s.data[K]=he;const vt=te.attributes;for(let kt=0;kt<vt.length;kt++){const ct=vt.item(kt),pi=ct.name.toLowerCase();ct.value.match(Ad)?E.hasOwnProperty(pi)&&Sd(_,ct.value,K,ct.name,0,ud[pi]?za:w[pi]?Nh:null):Bx(h,K,ct)}k=wD(s,o,u,c,h,p,_,V,K,I,N+1)|k,CD(p,K,N)}break;case Node.TEXT_NODE:const ue=V.textContent||"",Le=ue.match(Ad);Lw(h,null,Le?"":ue,C,K),CD(p,K,N),Le&&(k=Sd(_,ue,K,null,0,null)|k);break;case Node.COMMENT_NODE:const De=Pw.exec(V.textContent||"");if(De){const kt=I[parseInt(De[1],10)];Lw(h,ga,"",C,K),bD(s,u,c,C,kt,K),Fx(p,K,N)}}V=V.nextSibling}return k}function CD(s,o,u){0===u&&s.push(o)}function Fx(s,o,u){0===u&&(s.push(~o),s.push(o))}function Lw(s,o,u,c,h){null!==o&&s.push(o),s.push(u,h,function(s,o,u){return 0|o<<17|u<<1}(0,c,h))}function Bx(s,o,u){s.push(o<<1|1,u.name,u.value)}function ID(s,o,u=-1){const c=Yt(),h=Me(),p=20+s,_=gr(c.consts,o),v=Hs();c.firstCreatePass&&function(s,o,u,c,h,p){const _=Hs(),v=[],C=[],I=[[]],N=function(s){return s.replace(gD," ")}(h=function(s,o){if(function(s){return-1===s}(o))return vD(s);{const u=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return vD(s.substring(u,c))}}(h,p)).split(pD);for(let k=0;k<N.length;k++){let V=N[k];if(0==(1&k)){const K=Fw(V);for(let te=0;te<K.length;te++){let he=K[te];if(0==(1&te)){const ue=he;""!==ue&&Nx(s,_,I[0],v,C,u,ue)}else{const ue=he;if("object"!=typeof ue)throw new Error(`Unable to parse ICU expression in "${h}" message.`);bD(s,u,C,o,ue,_D(s,_,I[0],u,v,"",!0).index)}}}else{const K=47===V.charCodeAt(0),he=(V.charCodeAt(K?1:0),20+Number.parseInt(V.substring(K?2:1)));if(K)I.shift(),ai(Hs(),!1);else{const ue=Ax(s,I[0],he);I.unshift([]),ai(ue,!0)}}}s.data[c]={create:v,update:C}}(c,null===v?0:v.index,h,p,_,u);const C=c.data[p],N=SE(c,v===h[6]?null:v,h);(function(s,o,u,c){const h=s[11];for(let p=0;p<o.length;p++){const _=o[p++],v=o[p],C=(_&kr.COMMENT)===kr.COMMENT,I=(_&kr.APPEND_EAGERLY)===kr.APPEND_EAGERLY,N=_>>>kr.SHIFT;let k=s[N];null===k&&(k=s[N]=C?h.createComment(v):R_(h,v)),I&&null!==u&&Zu(h,u,k,c,!1)}})(h,C.create,N,v&&8&v.type?h[v.index]:null),$c(!0)}function Gx(s,o,u){ID(s,o,u),$c(!1)}function Bw(s){return function(s){s&&(ac|=1<<Math.min(Bo,31)),Bo++}(Zi(Me(),Si(),s)),Bw}function SD(s){!function(s,o,u){if(Bo>0){const c=s.data[u];Rw(s,o,Array.isArray(c)?c:c.update,Ai()-Bo-1,ac)}ac=0,Bo=0}(Yt(),Me(),s+20)}function Uw(s,o,u,c,h){if(s=j(s),Array.isArray(s))for(let p=0;p<s.length;p++)Uw(s[p],o,u,c,h);else{const p=Yt(),_=Me();let v=Wh(s)?s:j(s.provide),C=Wi(s);const I=Un(),N=1048575&I.providerIndexes,k=I.directiveStart,V=I.providerIndexes>>20;if(Wh(s)||!s.multi){const K=new Eo(C,h,bg),te=Hw(v,o,h?N:N+V,k);-1===te?(Tn(Qo(I,_),p,v),$w(p,s,o.length),o.push(v),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),u.push(K),_.push(K)):(u[te]=K,_[te]=K)}else{const K=Hw(v,o,N+V,k),te=Hw(v,o,N,N+V),he=K>=0&&u[K],ue=te>=0&&u[te];if(h&&!ue||!h&&!he){Tn(Qo(I,_),p,v);const Le=function(s,o,u,c,h){const p=new Eo(s,u,bg);return p.multi=[],p.index=o,p.componentProviders=0,ND(p,h,c&&!u),p}(h?CF:zx,u.length,h,c,C);!h&&ue&&(u[te].providerFactory=Le),$w(p,s,o.length,0),o.push(v),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),u.push(Le),_.push(Le)}else $w(p,s,K>-1?K:te,ND(u[h?te:K],C,!h&&c));!h&&c&&ue&&u[te].componentProviders++}}}function $w(s,o,u,c){const h=Wh(o);if(h||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(u);-1===C?v.push(u,[c,_]):v[C+1].push(c,_)}else v.push(u,_)}}}function ND(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Hw(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function zx(s,o,u,c){return xD(this.multi,[])}function CF(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=qn(u,u[1],this.providerFactory.index,c);p=v.slice(0,_),xD(h,p);for(let C=_;C<v.length;C++)p.push(v[C])}else p=[],xD(h,p);return p}function xD(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function MD(s,o=[]){return u=>{u.providersResolver=(c,h)=>function(s,o,u){const c=Yt();if(c.firstCreatePass){const h=as(s);Uw(u,c.data,c.blueprint,h,!0),Uw(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class jw{}const kD="ngComponent";class Jx{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${X(s)}. Did you add it to @NgModule.entryComponents?`);return o[kD]=s,o}(o)}}let no=(()=>{class s{}return s.NULL=new Jx,s})();function uc(...s){}function vf(s,o){return new al(Sn(s,o))}const Hg=function(){return vf(Un(),Me())};let al=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Hg,s})();function PD(s){return s instanceof al?s.nativeElement:s}class Vy{}let OD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>Gw(),s})();const Gw=function(){const s=Me(),u=Nr(Un().index,s);return function(s){return s[11]}(kn(u)?u:s)};let qw=(()=>{class s{}return s.\u0275prov=wt({token:s,providedIn:"root",factory:()=>null}),s})();class nM{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ww=new nM("12.2.16");class Uy{constructor(){}supports(o){return pg(o)}create(o){return new rM(o)}}const IF=(s,o)=>o;class rM{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||IF}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const _=!c||u&&u.currentIndex<oM(c,h,p)?u:c,v=oM(_,h,p),C=_.currentIndex;if(_===c)h--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)h++;else{p||(p=[]);const I=v-h,N=C-h;if(I!=N){for(let V=0;V<I;V++){const K=V<p.length?p[V]:p[V]=0,te=K+V;N<=te&&te<I&&(p[V]=K+1)}p[_.previousIndex]=N-I}}v!==C&&o(_,v,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!pg(o))throw new Error(`Error trying to diff '${X(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],_=this._trackByFn(v,p),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,p,_,v)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,_,v),c=!0),u=u._next}else h=0,function(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[rl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,v=>{_=this._trackByFn(h,v),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,v,_,h)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,_,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new iM(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new sM),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sM),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class iM{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AF{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class sM{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new AF,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oM(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class aM{constructor(){}supports(o){return o instanceof Map||gg(o)}create(){return new SF}}class SF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||gg(o)))throw new Error(`Error trying to diff '${X(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const c=new NF(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class NF{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lM(){return new Zw([new Uy])}let Zw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||lM()),deps:[[s,new Hr,new qa]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:lM}),s})();function VD(){return new $y([new aM])}let $y=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||VD()),deps:[[s,new Hr,new qa]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:VD}),s})();function Gr(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(An(p)),$i(p))for(let v=10;v<p.length;v++){const C=p[v],I=C[1].firstChild;null!==I&&Gr(C[1],C,I,c)}const _=u.type;if(8&_)Gr(s,o,u.child,c);else if(32&_){const v=x_(u,o);let C;for(;C=v();)c.push(C)}else if(16&_){const v=Y0(o,u);if(Array.isArray(v))c.push(...v);else{const C=Zp(o[16]);Gr(C[1],C,v,c,!0)}}u=h?u.projectionNext:u.next}return c}class ms{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Gr(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if($i(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(P_(o,c),xo(u,c))}this._attachedToViewContainer=!1}IE(this._lView[1],this._lView)}onDestroy(o){fb(this._lView[1],this._lView,null,o)}markForCheck(){vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wb(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,u){Du(!0);try{wb(s,o,u)}finally{Du(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,gd(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class Hy extends ms{constructor(o){super(o),this._view=o}detectChanges(){rT(this._view)}checkNoChanges(){!function(s){Du(!0);try{rT(s)}finally{Du(!1)}}(this._view)}get context(){return null}}const uM=function(s){return function(s,o,u){if(yl(s)&&!u){const c=Nr(s.index,o);return new ms(c,c)}return 47&s.type?new ms(o[16],o):null}(Un(),Me(),16==(16&s))};let cM=(()=>{class s{}return s.__NG_ELEMENT_ID__=uM,s})();const hM=[new aM],pM=new Zw([new Uy]),_s=new $y(hM),mM=function(){return qy(Un(),Me())};let Nd=(()=>{class s{}return s.__NG_ELEMENT_ID__=mM,s})();const Gy=Nd,Yw=class extends Gy{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=$h(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),eg(u,c,o),new ms(c)}};function qy(s,o){return 4&s.type?new Yw(o,s,vf(s,o)):null}class xd{}class UD{}const jg=function(){return GD(Un(),Me())};let Gg=(()=>{class s{}return s.__NG_ELEMENT_ID__=jg,s})();const $D=Gg,HD=class extends $D{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return vf(this._hostTNode,this._hostLView)}get injector(){return new Io(this._hostTNode,this._hostLView)}get parentInjector(){const o=dt(this._hostTNode,this._hostLView);if(Ml(o)){const u=ji(o,this._hostLView),c=La(o);return new Io(u[1].data[c+8],u)}return new Io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=jD(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,p){const _=c||this.parentInjector;if(!p&&null==o.ngModule&&_){const C=_.get(xd,null);C&&(p=C)}const v=o.create(_,h,void 0,p);return this.insert(v.hostView,u),v}insert(o,u){const c=o._lView,h=c[1];if($i(c[3])){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const k=c[3],V=new HD(k,k[6],k[3]);V.detach(V.indexOf(o))}}const p=this._adjustIndex(u),_=this._lContainer;!function(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],Rs(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,c,_,p);const v=K0(p,_),C=c[11],I=O_(C,_[7]);return null!==I&&function(s,o,u,c,h,p){c[0]=h,c[6]=o,gd(s,c,u,1,h,p)}(h,_[6],C,c,I,v),o.attachToViewContainerRef(),Rs(Jw(_),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=jD(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=P_(this._lContainer,u);c&&(xo(Jw(this._lContainer),u),IE(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=P_(this._lContainer,u);return c&&null!=xo(Jw(this._lContainer),u)?new ms(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function jD(s){return s[8]}function Jw(s){return s[8]||(s[8]=[])}function GD(s,o){let u;const c=o[s.index];if($i(c))u=c;else{let h;if(8&s.type)h=An(c);else{const p=o[11];h=p.createComment("");const _=Sn(s,o);Zu(p,O_(p,_),h,function(s,o){return Pn(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=u=nT(c,o,h,s),Ju(o,u)}return new HD(u,s,o)}const If={};class ev extends no{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Ye(o);return new fI(u,this.ngModule)}}function Af(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const g1=new Hn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>vE});class fI extends jw{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=o.selectors.map(CN).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Af(this.componentDef.inputs)}get outputs(){return Af(this.componentDef.outputs)}create(o,u,c,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(u,c,h)=>{const p=s.get(u,If,h);return p!==If||c===If?p:o.get(u,c,h)}}}(o,h.injector):o,_=p.get(Vy,Is),v=p.get(qw,null),C=_.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",N=c?function(s,o,u){if(Pn(s))return s.selectRootElement(o,u===Ze.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):W0(_.createRenderer(null,this.componentDef),I,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(I)),k=this.componentDef.onPush?576:528,V=function(s,o){return{components:[],scheduler:s||vE,clean:iT,playerHandler:o||null,flags:0}}(),K=K_(0,null,null,1,0,null,null,null,null,null),te=$h(null,K,V,k,null,null,_,C,v,p);let he,ue;ka(te);try{const Le=function(s,o,u,c,h,p){const _=u[1];u[20]=s;const C=Hh(_,20,2,"#host",null),I=C.mergedAttrs=o.hostAttrs;null!==I&&(og(C,I,!0),null!==s&&(gh(h,s,I),null!==C.classes&&Q0(h,s,C.classes),null!==C.styles&&kE(h,s,C.styles)));const N=c.createRenderer(s,o),k=$h(u,jE(o),null,o.onPush?64:16,u[20],C,c,N,p||null,null);return _.firstCreatePass&&(Tn(Qo(C,u),_,o.type),JE(_,C),_b(C,u.length,1)),Ju(u,k),u[20]=k}(N,this.componentDef,te,_,C);if(N)if(c)gh(C,N,["ng-version",Ww.full]);else{const{attrs:De,classes:vt}=function(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!ua(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);De&&gh(C,N,De),vt&&vt.length>0&&Q0(C,N,vt.join(" "))}if(ue=As(K,20),void 0!==u){const De=ue.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const kt=u[vt];De.push(null!=kt?Array.from(kt):null)}}he=function(s,o,u,c,h){const p=u[1],_=function(s,o,u){const c=Un();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),eT(s,c,o,jh(s,o,1,null),u));const h=qn(o,s,c.directiveStart,c);Ri(h,o);const p=Sn(c,o);return p&&Ri(p,o),h}(p,u,o);if(c.components.push(_),s[8]=_,h&&h.forEach(C=>C(_,o)),o.contentQueries){const C=Un();o.contentQueries(1,_,C.directiveStart)}const v=Un();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Pa(v.index),J_(u[1],v,0,v.directiveStart,v.directiveEnd,o),KE(o,_)),_}(Le,this.componentDef,te,V,[Kh]),eg(K,te,null)}finally{Jo()}return new tv(this.componentType,he,vf(ue,te),te,ue)}}class tv extends class{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new Hy(h),this.componentType=o}get injector(){return new Io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const ro=new Map;class _I extends xd{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ev(this);const c=In(o),h=o[Et]||null;h&&ww(h),this._bootstrapComponents=Ya(c.bootstrap),this._r3Injector=lT(o,u,[{provide:xd,useValue:this},{provide:no,useValue:this.componentFactoryResolver}],X(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=cr.THROW_IF_NOT_FOUND,c=at.Default){return o===cr||o===xd||o===bd?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class im extends UD{constructor(o){super(),this.moduleType=o,null!==In(o)&&function(s){const o=new Set;!function u(c){const h=In(c,!0),p=h.id;null!==p&&(function(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${X(o)} vs ${X(o.name)}`)}(p,ro.get(p),c),ro.set(p,c));const _=Ya(h.imports);for(const v of _)o.has(v)||(o.add(v),u(v))}(s)}(o)}create(o){return new _I(this.moduleType,o)}}function m1(s,o,u,c){return iv(Me(),or(),s,o,u,c)}function Ji(s,o,u,c,h){return CI(Me(),or(),s,o,u,c,h)}function rv(s,o,u,c,h,p){return function(s,o,u,c,h,p,_,v){const C=o+u;return function(s,o,u,c,h){const p=sl(s,o,u,c);return Zi(s,o+2,h)||p}(s,C,h,p,_)?il(s,C+3,v?c.call(v,h,p,_):c(h,p,_)):Sf(s,C+3)}(Me(),or(),s,o,u,c,h,p)}function Sf(s,o){const u=s[o];return u===$t?void 0:u}function iv(s,o,u,c,h,p){const _=o+u;return Zi(s,_,h)?il(s,_+1,p?c.call(p,h):c(h)):Sf(s,_+1)}function CI(s,o,u,c,h,p,_){const v=o+u;return sl(s,v,h,p)?il(s,v+2,_?c.call(_,h,p):c(h,p)):Sf(s,v+2)}function sv(s,o){const u=Yt();let c;const h=s+20;u.firstCreatePass?(c=function(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}throw new Ae("302",`The pipe '${s}' could not be found!`)}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=$s(c.type)),_=jn(bg);try{const v=xu(!1),C=p();return xu(v),function(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Me(),h,C),C}finally{jn(_)}}function DI(s,o,u){const c=s+20,h=Me(),p=Na(h,c);return sm(h,Od(h,c)?iv(h,or(),o,p.transform,u,p):p.transform(u))}function v1(s,o,u,c){const h=s+20,p=Me(),_=Na(p,h);return sm(p,Od(p,h)?CI(p,or(),o,_.transform,u,c,_):_.transform(u,c))}function Od(s,o){return s[1].data[o].pure}function sm(s,o){return Ls.isWrapped(o)&&(o=Ls.unwrap(o),s[Ai()]=$t),o}function om(s){return o=>{setTimeout(s,void 0,o)}}const va=class extends a.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,p,_;let v=o,C=u||(()=>null),I=c;if(o&&"object"==typeof o){const k=o;v=null===(h=k.next)||void 0===h?void 0:h.bind(k),C=null===(p=k.error)||void 0===p?void 0:p.bind(k),I=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(C=om(C),v&&(v=om(v)),I&&(I=om(I)));const N=super.subscribe({next:v,error:C,complete:I});return o instanceof q.w&&o.add(N),N}};function GM(){return this._results[rl()]()}class av{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=rl(),c=av.prototype;c[u]||(c[u]=GM)}get changes(){return this._changes||(this._changes=new va)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=yi(o);(this._changesDetected=!function(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Fd{constructor(o){this.queryList=o,this.matches=null}clone(){return new Fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class C1{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const _=u.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new C1(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==dv(o,u).matches&&this.queries[u].setDirty()}}class II{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Nf{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new Nf(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class xf{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new xf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,E1(u,p)),this.matchTNodeWithReadOption(o,u,Do(u,o,p,!1,!1))}else c===Nd?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Do(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===al||h===Gg||h===Nd&&4&u.type)this.addMatch(u.index,-2);else{const p=Do(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function E1(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function D1(s,o,u,c){return-1===u?function(s,o){return 11&s.type?vf(s,o):4&s.type?qy(s,o):null}(o,s):-2===u?function(s,o,u){return u===al?vf(o,s):u===Nd?qy(o,s):u===Gg?GD(o,s):void 0}(s,o,c):qn(s,s[1],u,o)}function A1(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,_=u.matches,v=[];for(let C=0;C<_.length;C+=2){const I=_[C];v.push(I<0?null:D1(o,p[I],_[C+1],u.metadata.read))}h.matches=v}return h.matches}function lv(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const _=A1(s,o,h,u);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)c.push(_[v/2]);else{const I=p[v+1],N=o[-C];for(let k=10;k<N.length;k++){const V=N[k];V[17]===V[3]&&lv(V[1],V,I,c)}if(null!==N[9]){const k=N[9];for(let V=0;V<k.length;V++){const K=k[V];lv(K[1],K,I,c)}}}}}return c}function AI(s){const o=Me(),u=Yt(),c=Iu();Co(c+1);const h=dv(u,c);if(s.dirty&&dh(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?lv(u,o,c,[]):A1(u,o,h,c);s.reset(p,PD),s.notifyOnChanges()}return!0}return!1}function S1(s,o,u){const c=Yt();c.firstCreatePass&&(cv(c,new II(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),NI(c,Me(),o)}function N1(s,o,u,c){const h=Yt();if(h.firstCreatePass){const p=Un();cv(h,new II(o,u,c),p.index),function(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}NI(h,Me(),u)}function uv(){return s=Me(),o=Iu(),s[19].queries[o].queryList;var s,o}function NI(s,o,u){const c=new av(4==(4&u));fb(s,o,c,c.destroy),null===o[19]&&(o[19]=new C1),o[19].queries.push(new Fd(c))}function cv(s,o,u){null===s.queries&&(s.queries=new Nf),s.queries.track(new xf(o,u))}function dv(s,o){return s.queries.getByIndex(o)}function ui(s,o){return qy(s,o)}const J1=new Hn("Application Initializer");let cl=(()=>{class s{constructor(u){this.appInits=u,this.resolve=uc,this.reject=uc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Jb(p))u.push(p);else if(Qb(p)){const _=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Qn(J1,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const Vf=new Hn("AppId"),BI={provide:Vf,useFactory:function(){return`${Q1()}${Q1()}${Q1()}`},deps:[]};function Q1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UI=new Hn("Platform Initializer"),$I=new Hn("Platform ID"),HI=new Hn("appBootstrapListener");let nu=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const gm=new Hn("LocaleId"),X1=new Hn("DefaultCurrencyCode");class jI{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}const _m=function(s){return new im(s)},qI=_m,pR=function(s){return Promise.resolve(_m(s))},ZI=function(s){const o=_m(s),c=Ya(In(s).declarations).reduce((h,p)=>{const _=Ye(p);return _&&h.push(new fI(_)),h},[]);return new jI(o,c)},Cv=ZI,tC=function(s){return Promise.resolve(ZI(s))};let Bf=(()=>{class s{constructor(){this.compileModuleSync=qI,this.compileModuleAsync=pR,this.compileModuleAndAllComponentsSync=Cv,this.compileModuleAndAllComponentsAsync=tC}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const gR=(()=>Promise.resolve(0))();function Pr(s){"undefined"==typeof Zone?gR.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class io{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new va(!1),this.onMicrotaskEmpty=new va(!1),this.onStable=new va(!1),this.onError=new va(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=It.requestAnimationFrame,o=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(It,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Tv(s),s.isCheckStableRunning=!0,nC(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Tv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,_,v)=>{try{return rC(s),u.invokeTask(h,p,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),bm(s)}},onInvoke:(u,c,h,p,_,v,C)=>{try{return rC(s),u.invoke(h,p,_,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),bm(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Tv(s),nC(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!io.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(io.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,mR,uc,uc);try{return p.runTask(_,u,c)}finally{p.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const mR={};function nC(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Tv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function rC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function bm(s){s._nesting--,nC(s)}class KI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new va,this.onMicrotaskEmpty=new va,this.onStable=new va,this.onError=new va}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let dl=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{io.assertNotInAngularZone(),Pr(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pr(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(Qn(io))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})(),iC=(()=>{class s{constructor(){this._applications=new Map,Vd.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Vd.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();class yR{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function sC(s){Vd=s}let Vd=new yR,oC=!0,Dv=!1;function Uf(){return Dv=!0,oC}function JI(){if(Dv)throw new Error("Cannot enable prod mode after platform setup.");oC=!1}let so;const wm=new Hn("AllowMultipleToken");class rA{constructor(o,u){this.name=o,this.token=u}}function fc(s,o,u=[]){const c=`Platform: ${o}`,h=new Hn(c);return(p=[])=>{let _=lC();if(!_||_.injector.get(wm,!1))if(s)s(u.concat(p).concat({provide:h,useValue:!0}));else{const v=u.concat(p).concat({provide:h,useValue:!0},{provide:Cn,useValue:"platform"});!function(s){if(so&&!so.destroyed&&!so.injector.get(wm,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");so=s.get(uC);const o=s.get(UI,null);o&&o.forEach(u=>u())}(cr.create({providers:v,name:c}))}return function(s){const o=lC();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function lC(){return so&&!so.destroyed?so:null}let uC=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const v=function(s,o){let u;return u="noop"===s?new KI:("zone.js"===s?void 0:s)||new io({enableLongStackTrace:Uf(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:io,useValue:v}];return v.run(()=>{const I=cr.create({providers:C,parent:this.injector,name:u.moduleType.name}),N=u.create(I),k=N.injector.get(Oh,null);if(!k)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const V=v.onError.subscribe({next:K=>{k.handleError(K)}});N.onDestroy(()=>{pc(this._modules,N),V.unsubscribe()})}),function(s,o,u){try{const c=u();return Jb(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(k,v,()=>{const V=N.injector.get(cl);return V.runInitializers(),V.donePromise.then(()=>(ww(N.injector.get(gm,Fg)||Fg),this._moduleDoBootstrap(N),N))})})}bootstrapModule(u,c=[]){const h=cC({},c);return function(s,o,u){const c=new im(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get($f);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${X(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Qn(cr))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function cC(s,o){return Array.isArray(o)?o.reduce(cC,s):Object.assign(Object.assign({},s),o)}let $f=(()=>{class s{constructor(u,c,h,p,_){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new F.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new F.y(I=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{io.assertNotInAngularZone(),Pr(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{N.unsubscribe(),k.unsubscribe()}});this.isStable=(0,se.T)(v,C.pipe((0,ae.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=u instanceof jw?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(xd),v=h.create(cr.NULL,[],c||h.selector,p),C=v.location.nativeElement,I=v.injector.get(dl,null),N=I&&v.injector.get(iC);return I&&N&&N.registerApplication(C,I),v.onDestroy(()=>{this.detachView(v.hostView),pc(this.components,v),N&&N.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;pc(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(HI,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Qn(io),Qn(cr),Qn(Oh),Qn(no),Qn(cl))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function pc(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}class dC{}class lA{}const Pi={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Hf=(()=>{class s{constructor(u,c){this._compiler=u,this._config=c||Pi}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,h]=u.split("#");return void 0===h&&(h="default"),B(8255)(c).then(p=>p[h]).then(p=>ru(p,c,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(u){let[c,h]=u.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),B(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(_=>_[h+p]).then(_=>ru(_,c,h))}}return s.\u0275fac=function(u){return new(u||s)(Qn(Bf),Qn(lA,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function ru(s,o,u){if(!s)throw new Error(`Cannot find '${u}' in '${o}'`);return s}const Jt=function(s){return null},pA=fc(null,"core",[{provide:$I,useValue:"unknown"},{provide:uC,deps:[cr]},{provide:iC,deps:[]},{provide:nu,deps:[]}]),SR=[{provide:$f,useClass:$f,deps:[io,cr,Oh,no,cl]},{provide:g1,deps:[io],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:cl,useClass:cl,deps:[[new qa,J1]]},{provide:Bf,useClass:Bf,deps:[]},BI,{provide:Zw,useFactory:function(){return pM},deps:[]},{provide:$y,useFactory:function(){return _s},deps:[]},{provide:gm,useFactory:function(s){return ww(s=s||"undefined"!=typeof $localize&&$localize.locale||Fg),s},deps:[[new Ga(gm),new qa,new Hr]]},{provide:X1,useValue:"USD"}];let NR=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Qn($f))},s.\u0275mod=Z({type:s}),s.\u0275inj=cn({providers:SR}),s})()},8939:(ot,Te,B)=>{"use strict";B.d(Te,{hO:()=>le,xv:()=>Q,Dh:()=>X,GT:()=>ee,cc:()=>Re,on:()=>U,pX:()=>ae});var a=B(7716),q=B(7841),F=B(8971);ot=B.hmd(ot);const se=["ngOnDestroy"],ae=(ce,pe,ke,Je={})=>new Proxy(ce,{get:(mt,rt)=>ke.runOutsideAngular(()=>{var Dt;if(ce[rt])return(null===(Dt=null==Je?void 0:Je.spy)||void 0===Dt?void 0:Dt.get)&&Je.spy.get(rt,ce[rt]),ce[rt];if(se.indexOf(rt)>-1)return()=>{};const ft=pe.toPromise().then(Qe=>{const xe=Qe&&Qe[rt];return"function"==typeof xe?xe.bind(Qe):xe&&xe.then?xe.then(Ie=>ke.run(()=>Ie)):ke.run(()=>xe)});return new Proxy(()=>{},{get:(Qe,xe)=>ft[xe],apply:(Qe,xe,Ie)=>ft.then(je=>{var ve;const Ge=je&&je(...Ie);return(null===(ve=null==Je?void 0:Je.spy)||void 0===ve?void 0:ve.apply)&&Je.spy.apply(rt,Ie,Ge),Ge})})})}),ee=(ce,pe)=>{pe.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach(Je=>{Object.defineProperty(ce.prototype,Je,Object.getOwnPropertyDescriptor(ke.prototype||ke,Je))})})};class de{constructor(pe){return pe}}const X=new a.OlP("angularfire2.app.options"),Q=new a.OlP("angularfire2.app.name");function U(ce,pe,ke){const mt="object"==typeof ke&&ke||{};mt.name=mt.name||"string"==typeof ke&&ke||"[DEFAULT]";const Dt=q.Z.apps.filter(ft=>ft&&ft.name===mt.name)[0]||pe.runOutsideAngular(()=>q.Z.initializeApp(ce,mt));try{JSON.stringify(ce)!==JSON.stringify(Dt.options)&&Y("error",`${Dt.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ft){}return new de(Dt)}const Y=(ce,...pe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[ce](...pe)},j={provide:de,useFactory:U,deps:[X,a.R0b,[new a.FiY,Q]]};let le=(()=>{class ce{constructor(ke){q.Z.registerVersion("angularfire",F.q4.full,"core"),q.Z.registerVersion("angularfire",F.q4.full,"app-compat"),q.Z.registerVersion("angular",a.q4F.full,ke.toString())}static initializeApp(ke,Je){return{ngModule:ce,providers:[{provide:X,useValue:ke},{provide:Q,useValue:Je}]}}}return ce.\u0275fac=function(ke){return new(ke||ce)(a.LFG(a.Lbi))},ce.\u0275mod=a.oAB({type:ce}),ce.\u0275inj=a.cJS({providers:[j]}),ce})();function Re(ce,pe,ke,Je,mt){const[,rt,Dt]=globalThis.\u0275AngularfireInstanceCache.find(ft=>ft[0]===ce)||[];if(rt)return function(ce,pe){try{return ce.toString()===pe.toString()}catch(ke){return ce===pe}}(mt,Dt)||(Ve("error",`${pe} was already initialized on the ${ke} Firebase App with different settings.${Ce?" You may need to reload as Firebase is not HMR aware.":""}`),Ve("warn",{is:mt,was:Dt})),rt;{const ft=Je();return globalThis.\u0275AngularfireInstanceCache.push([ce,ft,mt]),ft}}const Ce=!!ot.hot,Ve=(ce,...pe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[ce](...pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(ot,Te,B)=>{"use strict";B.d(Te,{q4:()=>f_,iC:()=>yr,fc:()=>Mp,HU:()=>wh,vb:()=>Ms,JM:()=>yi});var a=B(7716),q=B(2329),F=B(8239),se=B(8026),ae=B(3854),ee=B(3910),de=B(5422);const X="@firebase/installations",Q="0.5.8",Y=`w:${Q}`,j="FIS_v2",ce=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pe(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function ke({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Je(D){return{token:D.token,requestStatus:2,expiresIn:Ie(D.expiresIn),creationTime:Date.now()}}function mt(D,S){return rt.apply(this,arguments)}function rt(){return(rt=(0,F.Z)(function*(D,S){const W=(yield S.json()).error;return ce.create("request-failed",{requestName:D,serverCode:W.code,serverMessage:W.message,serverStatus:W.status})})).apply(this,arguments)}function Dt({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ft(D,{refreshToken:S}){const P=Dt(D);return P.append("Authorization",function(D){return`${j} ${D}`}(S)),P}function Qe(D){return xe.apply(this,arguments)}function xe(){return(xe=(0,F.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function Ie(D){return Number(D.replace("s","000"))}function ve(D,S){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,F.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:P}){const W=ke(D),oe=Dt(D),fe=S.getImmediate({optional:!0});if(fe){const Ot=yield fe.getHeartbeatsHeader();Ot&&oe.append("x-firebase-client",Ot)}const et={method:"POST",headers:oe,body:JSON.stringify({fid:P,authVersion:j,appId:D.appId,sdkVersion:Y})},Tt=yield Qe(()=>fetch(W,et));if(Tt.ok){const Ot=yield Tt.json();return{fid:Ot.fid||P,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:Je(Ot.authToken)}}throw yield mt("Create Installation",Tt)})).apply(this,arguments)}function Se(D){return new Promise(S=>{setTimeout(S,D)})}const gn=/^[cdef][\w-]{21}$/;function xn(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const P=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return gn.test(P)?P:""}catch(D){return""}}function yt(D){return`${D.appName}!${D.appId}`}const wr=new Map;function gi(D,S){const P=yt(D);Xn(P,S),function(D,S){const P=(!rn&&"BroadcastChannel"in self&&(rn=new BroadcastChannel("[Firebase] FID Change"),rn.onmessage=D=>{Xn(D.data.key,D.data.fid)}),rn);P&&P.postMessage({key:D,fid:S}),0===wr.size&&rn&&(rn.close(),rn=null)}(P,S)}function Xn(D,S){const P=wr.get(D);if(P)for(const W of P)W(S)}let rn=null;const dr="firebase-installations-store";let Fe=null;function hr(){return Fe||(Fe=(0,ae.X3)("firebase-installations-database",1,(D,S)=>{switch(S){case 0:D.createObjectStore(dr)}})),Fe}function sr(D,S){return at.apply(this,arguments)}function at(){return(at=(0,F.Z)(function*(D,S){const P=yt(D),oe=(yield hr()).transaction(dr,"readwrite"),fe=oe.objectStore(dr),Oe=yield fe.get(P);return yield fe.put(S,P),yield oe.complete,(!Oe||Oe.fid!==S.fid)&&gi(D,S.fid),S})).apply(this,arguments)}function vn(D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,F.Z)(function*(D){const S=yt(D),W=(yield hr()).transaction(dr,"readwrite");yield W.objectStore(dr).delete(S),yield W.complete})).apply(this,arguments)}function jn(D,S){return ii.apply(this,arguments)}function ii(){return(ii=(0,F.Z)(function*(D,S){const P=yt(D),oe=(yield hr()).transaction(dr,"readwrite"),fe=oe.objectStore(dr),Oe=yield fe.get(P),et=S(Oe);return void 0===et?yield fe.delete(P):yield fe.put(et,P),yield oe.complete,et&&(!Oe||Oe.fid!==et.fid)&&gi(D,et.fid),et})).apply(this,arguments)}function Br(D){return fr.apply(this,arguments)}function fr(){return(fr=(0,F.Z)(function*(D){let S;const P=yield jn(D.appConfig,W=>{const oe=Vn(W),fe=Ca(D,oe);return S=fe.registrationPromise,fe.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function Vn(D){return hn(D||{fid:xn(),registrationStatus:0})}function Ca(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ce.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:P,registrationPromise:function(D,S){return Ze.apply(this,arguments)}(D,P)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:gt(D)}:{installationEntry:S}}function Ze(){return(Ze=(0,F.Z)(function*(D,S){try{const P=yield ve(D,S);return sr(D.appConfig,P)}catch(P){throw pe(P)&&409===P.customData.serverCode?yield vn(D.appConfig):yield sr(D.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function gt(D){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,F.Z)(function*(D){let S=yield ss(D.appConfig);for(;1===S.registrationStatus;)yield Se(100),S=yield ss(D.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:W}=yield Br(D);return W||P}return S})).apply(this,arguments)}function ss(D){return jn(D,S=>{if(!S)throw ce.create("installation-not-found");return hn(S)})}function hn(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Cr(D,S){return er.apply(this,arguments)}function er(){return(er=(0,F.Z)(function*({appConfig:D,heartbeatServiceProvider:S},P){const W=sn(D,P),oe=ft(D,P),fe=S.getImmediate({optional:!0});if(fe){const Ot=yield fe.getHeartbeatsHeader();Ot&&oe.append("x-firebase-client",Ot)}const et={method:"POST",headers:oe,body:JSON.stringify({installation:{sdkVersion:Y,appId:D.appId}})},Tt=yield Qe(()=>fetch(W,et));if(Tt.ok)return Je(yield Tt.json());throw yield mt("Generate Auth Token",Tt)})).apply(this,arguments)}function sn(D,{fid:S}){return`${ke(D)}/${S}/authTokens:generate`}function bt(D){return qt.apply(this,arguments)}function qt(){return(qt=(0,F.Z)(function*(D,S=!1){let P;const W=yield jn(D.appConfig,fe=>{if(!Xt(fe))throw ce.create("not-registered");const Oe=fe.authToken;if(!S&&J(Oe))return fe;if(1===Oe.requestStatus)return P=We(D,S),fe;{if(!navigator.onLine)throw ce.create("app-offline");const et=ne(fe);return P=Et(D,et),et}});return P?yield P:W.authToken})).apply(this,arguments)}function We(D,S){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,F.Z)(function*(D,S){let P=yield lt(D.appConfig);for(;1===P.authToken.requestStatus;)yield Se(100),P=yield lt(D.appConfig);const W=P.authToken;return 0===W.requestStatus?bt(D,S):W})).apply(this,arguments)}function lt(D){return jn(D,S=>{if(!Xt(S))throw ce.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Et(D,S){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,F.Z)(function*(D,S){try{const P=yield Cr(D,S),W=Object.assign(Object.assign({},S),{authToken:P});return yield sr(D.appConfig,W),P}catch(P){if(!pe(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const W=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield sr(D.appConfig,W)}else yield vn(D.appConfig);throw P}})).apply(this,arguments)}function Xt(D){return void 0!==D&&2===D.registrationStatus}function J(D){return 2===D.requestStatus&&!function(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function ne(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function H(){return(H=(0,F.Z)(function*(D){const S=D,{installationEntry:P,registrationPromise:W}=yield Br(S);return W?W.catch(console.error):bt(S).catch(console.error),P.fid})).apply(this,arguments)}function ge(){return(ge=(0,F.Z)(function*(D,S=!1){const P=D;return yield Ue(P),(yield bt(P,S)).token})).apply(this,arguments)}function Ue(D){return pt.apply(this,arguments)}function pt(){return(pt=(0,F.Z)(function*(D){const{registrationPromise:S}=yield Br(D);S&&(yield S)})).apply(this,arguments)}function Ut(D){return ce.create("missing-app-config-values",{valueName:D})}const Rn="installations";(0,se._registerComponent)(new ee.wA(Rn,D=>{const S=D.getProvider("app").getImmediate();return{app:S,appConfig:function(D){if(!D||!D.options)throw Ut("App Configuration");if(!D.name)throw Ut("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!D.options[P])throw Ut(P);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S),heartbeatServiceProvider:(0,se._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,se._registerComponent)(new ee.wA("installations-internal",D=>{const S=D.getProvider("app").getImmediate(),P=(0,se._getProvider)(S,Rn).getImmediate();return{getId:()=>function(D){return H.apply(this,arguments)}(P),getToken:oe=>function(D){return ge.apply(this,arguments)}(P,oe)}},"PRIVATE")),(0,se.registerVersion)(X,Q),(0,se.registerVersion)(X,Q,"esm2017");const bn="@firebase/remote-config",Bn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yl{constructor(S,P,W,oe){this.client=S,this.storage=P,this.storageCache=W,this.logger=oe}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const W=Date.now()-P,oe=W<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${W}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${oe}.`),oe}fetch(S){var P=this;return(0,F.Z)(function*(){const[W,oe]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(oe&&P.isCachedDataFresh(S.cacheMaxAgeMillis,W))return oe;S.eTag=oe&&oe.eTag;const fe=yield P.client.fetch(S),Oe=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===fe.status&&Oe.push(P.storage.setLastSuccessfulFetchResponse(fe)),yield Promise.all(Oe),fe})()}}function mi(D=navigator){return D.languages&&D.languages[0]||D.language}class as{constructor(S,P,W,oe,fe,Oe){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=W,this.projectId=oe,this.apiKey=fe,this.appId=Oe}fetch(S){var P=this;return(0,F.Z)(function*(){const[W,oe]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Tt={sdk_version:P.sdkVersion,app_instance_id:W,app_instance_id_token:oe,app_id:P.appId,language_code:mi()},Ot={method:"POST",headers:et,body:JSON.stringify(Tt)},nn=fetch(Oe,Ot),Ft=new Promise((ja,ks)=>{S.signal.addEventListener(()=>{const na=new Error("The operation was aborted.");na.name="AbortError",ks(na)})});let Er;try{yield Promise.race([nn,Ft]),Er=yield nn}catch(ja){let ks="fetch-client-network";throw"AbortError"===ja.name&&(ks="fetch-timeout"),Bn.create(ks,{originalErrorMessage:ja.message})}let Tr=Er.status;const Pl=Er.headers.get("ETag")||void 0;let td,zs;if(200===Er.status){let ja;try{ja=yield Er.json()}catch(ks){throw Bn.create("fetch-client-parse",{originalErrorMessage:ks.message})}td=ja.entries,zs=ja.state}if("INSTANCE_STATE_UNSPECIFIED"===zs?Tr=500:"NO_CHANGE"===zs?Tr=304:("NO_TEMPLATE"===zs||"EMPTY_CONFIG"===zs)&&(td={}),304!==Tr&&200!==Tr)throw Bn.create("fetch-status",{httpStatus:Tr});return{status:Tr,eTag:Pl,config:td}})()}}class nh{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,F.Z)(function*(){const W=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,W)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:W}){var oe=this;return(0,F.Z)(function*(){yield function(D,S){return new Promise((P,W)=>{const oe=Math.max(S-Date.now(),0),fe=setTimeout(P,oe);D.addEventListener(()=>{clearTimeout(fe),W(Bn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const fe=yield oe.client.fetch(S);return yield oe.storage.deleteThrottleMetadata(),fe}catch(fe){if(!function(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(fe))throw fe;const Oe={throttleEndTimeMillis:Date.now()+(0,ae.$s)(W),backoffCount:W+1};return yield oe.storage.setThrottleMetadata(Oe),oe.attemptFetch(S,Oe)}})()}}class rh{constructor(S,P,W,oe,fe){this.app=S,this._client=P,this._storageCache=W,this._storage=oe,this._logger=fe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nc(D,S){const P=D.target.error||void 0;return Bn.create(S,{originalErrorMessage:P&&P.message})}const yo="app_namespace_store";class sh{constructor(S,P,W,oe=function(){return new Promise((D,S)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=W=>{S(Nc(W,"storage-open"))},P.onsuccess=W=>{D(W.target.result)},P.onupgradeneeded=W=>{const oe=W.target.result;switch(W.oldVersion){case 0:oe.createObjectStore(yo,{keyPath:"compositeKey"})}}}catch(P){S(Bn.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=S,this.appName=P,this.namespace=W,this.openDbPromise=oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,F.Z)(function*(){const W=yield P.openDbPromise;return new Promise((oe,fe)=>{const et=W.transaction([yo],"readonly").objectStore(yo),Tt=P.createCompositeKey(S);try{const Ot=et.get(Tt);Ot.onerror=nn=>{fe(Nc(nn,"storage-get"))},Ot.onsuccess=nn=>{const Ft=nn.target.result;oe(Ft?Ft.value:void 0)}}catch(Ot){fe(Bn.create("storage-get",{originalErrorMessage:Ot&&Ot.message}))}})})()}set(S,P){var W=this;return(0,F.Z)(function*(){const oe=yield W.openDbPromise;return new Promise((fe,Oe)=>{const Tt=oe.transaction([yo],"readwrite").objectStore(yo),Ot=W.createCompositeKey(S);try{const nn=Tt.put({compositeKey:Ot,value:P});nn.onerror=Ft=>{Oe(Nc(Ft,"storage-set"))},nn.onsuccess=()=>{fe()}}catch(nn){Oe(Bn.create("storage-set",{originalErrorMessage:nn&&nn.message}))}})})()}delete(S){var P=this;return(0,F.Z)(function*(){const W=yield P.openDbPromise;return new Promise((oe,fe)=>{const et=W.transaction([yo],"readwrite").objectStore(yo),Tt=P.createCompositeKey(S);try{const Ot=et.delete(Tt);Ot.onerror=nn=>{fe(Nc(nn,"storage-delete"))},Ot.onsuccess=()=>{oe()}}catch(Ot){fe(Bn.create("storage-delete",{originalErrorMessage:Ot&&Ot.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class l_{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,F.Z)(function*(){const P=S.storage.getLastFetchStatus(),W=S.storage.getLastSuccessfulFetchTimestampMillis(),oe=S.storage.getActiveConfig(),fe=yield P;fe&&(S.lastFetchStatus=fe);const Oe=yield W;Oe&&(S.lastSuccessfulFetchTimestampMillis=Oe);const et=yield oe;et&&(S.activeConfig=et)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function u_(){return bl.apply(this,arguments)}function bl(){return(bl=(0,F.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,se._registerComponent)(new ee.wA("remote-config",function(S,{instanceIdentifier:P}){const W=S.getProvider("app").getImmediate(),oe=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,ae.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:fe,apiKey:Oe,appId:et}=W.options;if(!fe)throw Bn.create("registration-project-id");if(!Oe)throw Bn.create("registration-api-key");if(!et)throw Bn.create("registration-app-id");const Tt=new sh(et,W.name,P=P||"firebase"),Ot=new l_(Tt),nn=new de.Yd(bn);nn.logLevel=de.in.ERROR;const Ft=new as(oe,se.SDK_VERSION,P,fe,Oe,et),Er=new nh(Ft,Tt),Tr=new yl(Er,Tt,Ot,nn),Pl=new rh(W,Tr,Ot,Tt,nn);return function(D){const S=(0,ae.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Pl),Pl},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(bn,"0.3.7"),(0,se.registerVersion)(bn,"0.3.7","esm2017");const ah="/firebase-messaging-sw.js",Da="/firebase-cloud-messaging-push-scope",_p="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xc="google.c.a.c_id",$s="google.c.a.c_l",wl="google.c.a.ts",Kn="google.c.a.e";var Ia=(()=>{return(D=Ia||(Ia={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ia;var D})();function Sr(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lh(D){const P=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),W=atob(P),oe=new Uint8Array(W.length);for(let fe=0;fe<W.length;++fe)oe[fe]=W.charCodeAt(fe);return oe}const Aa="fcm_token_details_db",Cl="fcm_token_object_Store";function c_(D){return oi.apply(this,arguments)}function oi(){return(oi=(0,F.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(fe=>fe.name).includes(Aa))return null;let S=null;return(yield(0,ae.X3)(Aa,5,function(){var W=(0,F.Z)(function*(oe,fe,Oe,et){var Tt;if(fe<2||!oe.objectStoreNames.contains(Cl))return;const Ot=et.objectStore(Cl),nn=yield Ot.index("fcmSenderId").get(D);if(yield Ot.clear(),nn)if(2===fe){const Ft=nn;if(!Ft.auth||!Ft.p256dh||!Ft.endpoint)return;S={token:Ft.fcmToken,createTime:null!==(Tt=Ft.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:Ft.auth,p256dh:Ft.p256dh,endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:"string"==typeof Ft.vapidKey?Ft.vapidKey:Sr(Ft.vapidKey)}}}else if(3===fe){const Ft=nn;S={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Sr(Ft.auth),p256dh:Sr(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Sr(Ft.vapidKey)}}}else if(4===fe){const Ft=nn;S={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Sr(Ft.auth),p256dh:Sr(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Sr(Ft.vapidKey)}}}});return function(oe,fe,Oe,et){return W.apply(this,arguments)}}())).close(),yield(0,ae.Lj)(Aa),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Mc(S)?S:null})).apply(this,arguments)}function Mc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ii="firebase-messaging-store";let bu=null;function Rc(){return bu||(bu=(0,ae.X3)("firebase-messaging-database",1,(D,S)=>{switch(S){case 0:D.createObjectStore(Ii)}})),bu}function Pn(D){return kc.apply(this,arguments)}function kc(){return(kc=(0,F.Z)(function*(D){const S=Pc(D),W=yield(yield Rc()).transaction(Ii).objectStore(Ii).get(S);if(W)return W;{const oe=yield c_(D.appConfig.senderId);if(oe)return yield Is(D,oe),oe}})).apply(this,arguments)}function Is(D,S){return us.apply(this,arguments)}function us(){return(us=(0,F.Z)(function*(D,S){const P=Pc(D),oe=(yield Rc()).transaction(Ii,"readwrite");return yield oe.objectStore(Ii).put(S,P),yield oe.complete,S})).apply(this,arguments)}function An(D){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,F.Z)(function*(D){const S=Pc(D),W=(yield Rc()).transaction(Ii,"readwrite");yield W.objectStore(Ii).delete(S),yield W.complete})).apply(this,arguments)}function Pc({appConfig:D}){return D.appId}const Sn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Oc(D,S){return As.apply(this,arguments)}function As(){return(As=(0,F.Z)(function*(D,S){const P=yield gr(D),W=Cu(S),oe={method:"POST",headers:P,body:JSON.stringify(W)};let fe;try{fe=yield(yield fetch(vo(D.appConfig),oe)).json()}catch(Oe){throw Sn.create("token-subscribe-failed",{errorInfo:Oe})}if(fe.error)throw Sn.create("token-subscribe-failed",{errorInfo:fe.error.message});if(!fe.token)throw Sn.create("token-subscribe-no-token");return fe.token})).apply(this,arguments)}function Na(D,S){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,F.Z)(function*(D,S){const P=yield gr(D),W=Cu(S.subscriptionOptions),oe={method:"PATCH",headers:P,body:JSON.stringify(W)};let fe;try{fe=yield(yield fetch(`${vo(D.appConfig)}/${S.token}`,oe)).json()}catch(Oe){throw Sn.create("token-update-failed",{errorInfo:Oe})}if(fe.error)throw Sn.create("token-update-failed",{errorInfo:fe.error.message});if(!fe.token)throw Sn.create("token-update-no-token");return fe.token})).apply(this,arguments)}function dh(D,S){return El.apply(this,arguments)}function El(){return(El=(0,F.Z)(function*(D,S){const W={method:"DELETE",headers:yield gr(D)};try{const fe=yield(yield fetch(`${vo(D.appConfig)}/${S}`,W)).json();if(fe.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:fe.error.message})}catch(oe){throw Sn.create("token-unsubscribe-failed",{errorInfo:oe})}})).apply(this,arguments)}function vo({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function gr(D){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,F.Z)(function*({appConfig:D,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Cu({p256dh:D,auth:S,endpoint:P,vapidKey:W}){const oe={web:{endpoint:P,auth:S,p256dh:D}};return W!==_p&&(oe.web.applicationPubKey=W),oe}const At=6048e5;function Eu(D){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,F.Z)(function*(D){const S=yield Yt(D.swRegistration,D.vapidKey),P={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Sr(S.getKey("auth")),p256dh:Sr(S.getKey("p256dh"))},W=yield Pn(D.firebaseDependencies);if(W){if(Un(W.subscriptionOptions,P))return Date.now()>=W.createTime+At?Vc(D,{token:W.token,createTime:Date.now(),subscriptionOptions:P}):W.token;try{yield dh(D.firebaseDependencies,W.token)}catch(oe){console.warn(oe)}return bo(D.firebaseDependencies,P)}return bo(D.firebaseDependencies,P)})).apply(this,arguments)}function Fc(D){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,F.Z)(function*(D){const S=yield Pn(D.firebaseDependencies);S&&(yield dh(D.firebaseDependencies,S.token),yield An(D.firebaseDependencies));const P=yield D.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Vc(D,S){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,F.Z)(function*(D,S){try{const P=yield Na(D.firebaseDependencies,S),W=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield Is(D.firebaseDependencies,W),P}catch(P){throw yield Fc(D),P}})).apply(this,arguments)}function bo(D,S){return Me.apply(this,arguments)}function Me(){return(Me=(0,F.Z)(function*(D,S){const W={token:yield Oc(D,S),createTime:Date.now(),subscriptionOptions:S};return yield Is(D,W),W.token})).apply(this,arguments)}function Yt(D,S){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lh(S)})})).apply(this,arguments)}function Un(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function Il(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function(D,S){if(!S.notification)return;D.notification={};const P=S.notification.title;P&&(D.notification.title=P);const W=S.notification.body;W&&(D.notification.body=W);const oe=S.notification.image;oe&&(D.notification.image=oe)}(S,D),function(D,S){!S.data||(D.data=S.data)}(S,D),function(D,S){if(!S.fcmOptions)return;D.fcmOptions={};const P=S.fcmOptions.link;P&&(D.fcmOptions.link=P);const W=S.fcmOptions.analytics_label;W&&(D.fcmOptions.analyticsLabel=W)}(S,D),S}function Al(D){return"object"==typeof D&&!!D&&xc in D}function Bc(D,S){const P=[];for(let W=0;W<D.length;W++)P.push(D.charAt(W)),W<S.length&&P.push(S.charAt(W));return P.join("")}function wo(D){return Sn.create("missing-app-config-values",{valueName:D})}Bc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Bc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Du{constructor(S,P,W){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const oe=function(D){if(!D||!D.options)throw wo("App Configuration Object");if(!D.name)throw wo("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=D;for(const W of S)if(!P[W])throw wo(W);return{appName:D.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:oe,installations:P,analyticsProvider:W}}_delete(){return Promise.resolve()}}function or(D){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,F.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(ah,{scope:Da}),D.swRegistration.update().catch(()=>{})}catch(S){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Uc(D,S){return Si.apply(this,arguments)}function Si(){return(Si=(0,F.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield or(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Ni(D,S){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,F.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=_p)})).apply(this,arguments)}function Ra(){return(Ra=(0,F.Z)(function*(D,S){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield Ni(D,null==S?void 0:S.vapidKey),yield Uc(D,null==S?void 0:S.serviceWorkerRegistration),Eu(D)})).apply(this,arguments)}function yp(D,S,P){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,F.Z)(function*(D,S,P){const W=Hc(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(W,{message_id:P[xc],message_name:P[$s],message_time:P[wl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Hc(D){switch(D){case Ia.NOTIFICATION_CLICKED:return"notification_open";case Ia.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Co(){return(Co=(0,F.Z)(function*(D,S){const P=S.data;if(!P.isFirebaseMessaging)return;D.onMessageHandler&&P.messageType===Ia.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Il(P)):D.onMessageHandler.next(Il(P)));const W=P.data;Al(W)&&"1"===W[Kn]&&(yield yp(D,P.messageType,W))})).apply(this,arguments)}const Nl="@firebase/messaging";function qc(){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,F.Z)(function*(){try{yield(0,ae.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,se._registerComponent)(new ee.wA("messaging",D=>{const S=new Du(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function(D,S){return Co.apply(this,arguments)}(S,P)),S},"PUBLIC")),(0,se._registerComponent)(new ee.wA("messaging-internal",D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:W=>function(D,S){return Ra.apply(this,arguments)}(S,W)}},"PRIVATE")),(0,se.registerVersion)(Nl,"0.9.12"),(0,se.registerVersion)(Nl,"0.9.12","esm2017");const Au="analytics",zc="firebase_id",Su="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",js="https://www.googletagmanager.com/gtag/js",mr=new de.Yd("@firebase/analytics");function Oa(D){return Promise.all(D.map(S=>S.catch(P=>P)))}function ph(D,S){const P=document.createElement("script");P.src=`${js}?l=${D}&id=${S}`,P.async=!0,document.head.appendChild(P)}function Gs(D,S,P,W,oe,fe){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,F.Z)(function*(D,S,P,W,oe,fe){const Oe=W[oe];try{if(Oe)yield S[Oe];else{const Tt=(yield Oa(P)).find(Ot=>Ot.measurementId===oe);Tt&&(yield S[Tt.appId])}}catch(et){mr.error(et)}D("config",oe,fe)})).apply(this,arguments)}function d_(D,S,P,W,oe){return To.apply(this,arguments)}function To(){return(To=(0,F.Z)(function*(D,S,P,W,oe){try{let fe=[];if(oe&&oe.send_to){let Oe=oe.send_to;Array.isArray(Oe)||(Oe=[Oe]);const et=yield Oa(P);for(const Tt of Oe){const Ot=et.find(Ft=>Ft.measurementId===Tt),nn=Ot&&S[Ot.appId];if(!nn){fe=[];break}fe.push(nn)}}0===fe.length&&(fe=Object.values(S)),yield Promise.all(fe),D("event",W,oe||{})}catch(fe){mr.error(fe)}})).apply(this,arguments)}function Ep(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(js))return S;return null}const Hi=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ss=new class{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Kc(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Dp(D){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,F.Z)(function*(D){var S;const{appId:P,apiKey:W}=D,oe={method:"GET",headers:Kc(W)},fe=Su.replace("{app-id}",P),Oe=yield fetch(fe,oe);if(200!==Oe.status&&304!==Oe.status){let et="";try{const Tt=yield Oe.json();(null===(S=Tt.error)||void 0===S?void 0:S.message)&&(et=Tt.error.message)}catch(Tt){}throw Hi.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:et})}return Oe.json()})).apply(this,arguments)}function La(D){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,F.Z)(function*(D,S=Ss,P){const{appId:W,apiKey:oe,measurementId:fe}=D.options;if(!W)throw Hi.create("no-app-id");if(!oe){if(fe)return{measurementId:fe,appId:W};throw Hi.create("no-api-key")}const Oe=S.getThrottleMetadata(W)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new mh;return setTimeout((0,F.Z)(function*(){et.abort()}),void 0!==P?P:6e4),ji({appId:W,apiKey:oe,measurementId:fe},Oe,et,S)})).apply(this,arguments)}function ji(D,S,P){return Va.apply(this,arguments)}function Va(){return(Va=(0,F.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:P},W,oe=Ss){const{appId:fe,measurementId:Oe}=D;try{yield xu(W,S)}catch(et){if(Oe)return mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:fe,measurementId:Oe};throw et}try{const et=yield Dp(D);return oe.deleteThrottleMetadata(fe),et}catch(et){if(!I0(et)){if(oe.deleteThrottleMetadata(fe),Oe)return mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:fe,measurementId:Oe};throw et}const Tt=503===Number(et.customData.httpStatus)?(0,ae.$s)(P,oe.intervalMillis,30):(0,ae.$s)(P,oe.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+Tt,backoffCount:P+1};return oe.setThrottleMetadata(fe,Ot),mr.debug(`Calling attemptFetch again in ${Tt} millis`),ji(D,Ot,W,oe)}})).apply(this,arguments)}function xu(D,S){return new Promise((P,W)=>{const oe=Math.max(S-Date.now(),0),fe=setTimeout(P,oe);D.addEventListener(()=>{clearTimeout(fe),W(Hi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function I0(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class mh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Ip(){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,F.Z)(function*(){if(!(0,ae.hl)())return mr.warn(Hi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(D){return mr.warn(Hi.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(D,S,P,W,oe,fe,Oe){var et;const Tt=La(D);Tt.then(Tr=>{P[Tr.measurementId]=Tr.appId,D.options.measurementId&&Tr.measurementId!==D.options.measurementId&&mr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Tr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tr=>mr.error(Tr)),S.push(Tt);const Ot=Ip().then(Tr=>{if(Tr)return W.getId()}),[nn,Ft]=yield Promise.all([Tt,Ot]);Ep()||ph(fe,nn.measurementId),oe("js",new Date);const Er=null!==(et=null==Oe?void 0:Oe.config)&&void 0!==et?et:{};return Er.origin="firebase",Er.update=!0,null!=Ft&&(Er[zc]=Ft),oe("config",nn.measurementId,Er),nn.measurementId})).apply(this,arguments)}class Rl{constructor(S){this.app=S}_delete(){return delete en[this.app.options.appId],Promise.resolve()}}let en={},dt=[];const Tn={};let Xo,Ns,kl="dataLayer",ar=!1;function Do(D,S,P){!function(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((W,oe)=>`(${oe+1}) ${W}`).join(" "),P=Hi.create("invalid-analytics-context",{errorInfo:S});mr.warn(P.message)}}();const W=D.options.appId;if(!W)throw Hi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Hi.create("no-api-key");mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=en[W])throw Hi.create("already-exists",{id:W});if(!ar){!function(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(kl);const{wrappedGtag:fe,gtagCore:Oe}=function(D,S,P,W,oe){let fe=function(...Oe){window[W].push(arguments)};return window[oe]&&"function"==typeof window[oe]&&(fe=window[oe]),window[oe]=function(D,S,P,W){function fe(){return(fe=(0,F.Z)(function*(Oe,et,Tt){try{"event"===Oe?yield d_(D,S,P,et,Tt):"config"===Oe?yield Gs(D,S,P,W,et,Tt):D("set",et)}catch(Ot){mr.error(Ot)}})).apply(this,arguments)}return function(Oe,et,Tt){return fe.apply(this,arguments)}}(fe,D,S,P),{gtagCore:fe,wrappedGtag:window[oe]}}(en,dt,Tn,kl,"gtag");Ns=fe,Xo=Oe,ar=!0}return en[W]=function(D,S,P,W,oe,fe,Oe){return Qo.apply(this,arguments)}(D,dt,Tn,S,Xo,kl,P),new Rl(D)}function Jn(){return(Jn=(0,F.Z)(function*(D,S,P,W,oe){if(oe&&oe.global)D("event",P,W);else{const fe=yield S;D("event",P,Object.assign(Object.assign({},W),{send_to:fe}))}})).apply(this,arguments)}function li(){return xi.apply(this,arguments)}function xi(){return(xi=(0,F.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(D){return!1}})).apply(this,arguments)}const Hn="@firebase/analytics";(0,se._registerComponent)(new ee.wA(Au,(S,{options:P})=>Do(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,se._registerComponent)(new ee.wA("analytics-internal",function(S){try{const P=S.getProvider(Au).getImmediate();return{logEvent:(W,oe,fe)=>function(D,S,P,W){D=(0,ae.m9)(D),function(D,S,P,W,oe){return Jn.apply(this,arguments)}(Ns,en[D.app.options.appId],S,P,W).catch(oe=>mr.error(oe))}(P,W,oe,fe)}}catch(P){throw Hi.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,se.registerVersion)(Hn,"0.7.8"),(0,se.registerVersion)(Hn,"0.7.8","esm2017");var _i=B(7771),S0=B(3637),Np=B(8307),ta=B(9746),Ua=B(2639);const f_=new a.GfV("7.3.0"),Pu="__angularfire_symbol__analyticsIsSupportedValue",Wn="__angularfire_symbol__analyticsIsSupported",Xc="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",No="__angularfire_symbol__messagingIsSupportedValue",lr="__angularfire_symbol__messagingIsSupported";function yi(D,S,P){if(S){if(1===S.length)return S[0];const fe=S.filter(Oe=>Oe.app===P);if(1===fe.length)return fe[0]}return P.container.getProvider(D).getImmediate({optional:!0})}globalThis[Wn]||(globalThis[Wn]=li().then(D=>globalThis[Pu]=D).catch(()=>globalThis[Pu]=!1)),globalThis[lr]||(globalThis[lr]=qc().then(D=>globalThis[No]=D).catch(()=>globalThis[No]=!1)),globalThis[So]||(globalThis[So]=u_().then(D=>globalThis[Xc]=D).catch(()=>globalThis[Xc]=!1));const Ms=(D,S)=>{const P=S?[S]:(0,q.C6)(),W=[];return P.forEach(oe=>{oe.container.getProvider(D).instances.forEach(Oe=>{W.includes(Oe)||W.push(Oe)})}),W};function Rs(){}class xo{constructor(S,P=_i.N){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,W){const oe=this.zone;return this.delegate.schedule(function(Oe){oe.runGuarded(()=>{S.apply(this,[Oe])})},P,W)}}class Mo{constructor(S){this.zone=S,this.task=null}call(S,P){const W=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)),P.pipe((0,Np.b)({next:W,complete:W,error:W})).subscribe(S).add(W)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wh=(()=>{class D{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new xo(Zone.current)),this.insideAngular=P.run(()=>new xo(Zone.current,S0.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(P){return new(P||D)(a.LFG(a.R0b))},D.\u0275prov=a.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Zs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Mp(D){return D.pipe((0,ta.QV)(Zs().outsideAngular))}function yr(D){return Zs(),function(D){return function(P){return(P=P.lift(new Mo(D.ngZone))).pipe((0,Ua.R)(D.outsideAngular),(0,ta.QV)(D.insideAngular))}}(Zs())(D)}},982:(ot,Te,B)=>{"use strict";B.d(Te,{$:()=>$c,A:()=>Gt,E:()=>Ac,G:()=>vl,I:()=>Sr,K:()=>xt,L:()=>Is,M:()=>Pc,N:()=>wu,P:()=>Oe,Q:()=>Sn,R:()=>$a,T:()=>Yo,U:()=>Nr,V:()=>dh,W:()=>Cu,X:()=>ai,Y:()=>Al,Z:()=>hh,_:()=>Ai,a:()=>ar,a0:()=>yp,a1:()=>Hc,a2:()=>Co,a3:()=>jc,a4:()=>fh,a5:()=>qc,a6:()=>Wc,a7:()=>Zc,a8:()=>vp,a9:()=>T0,aA:()=>Wa,aB:()=>Pp,aC:()=>kn,aG:()=>Do,aJ:()=>As,aa:()=>Au,ab:()=>wp,ae:()=>mr,af:()=>ph,ag:()=>Cp,aj:()=>Lc,ak:()=>D0,am:()=>xu,an:()=>Qo,ao:()=>Ar,ap:()=>sr,aq:()=>zo,ar:()=>si,as:()=>dn,at:()=>E_,au:()=>Bu,av:()=>Ln,aw:()=>Fe,ax:()=>vn,ay:()=>os,az:()=>M0,b:()=>Xo,c:()=>td,d:()=>na,e:()=>ja,f:()=>qa,g:()=>nd,h:()=>N0,i:()=>Np,j:()=>x0,k:()=>Ps,l:()=>Ha,m:()=>T_,o:()=>gn,r:()=>D,s:()=>yr,u:()=>oe,z:()=>gi});var a=B(8239),q=B(3854),F=B(8026);function de(w,g){var y={};for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&g.indexOf(E)<0&&(y[E]=w[E]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(E=Object.getOwnPropertySymbols(w);x<E.length;x++)g.indexOf(E[x])<0&&Object.prototype.propertyIsEnumerable.call(w,E[x])&&(y[E[x]]=w[E[x]])}return y}var Ge=B(5422),Se=B(3910);const gn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Gt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const gi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},zn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cn=new Ge.Yd("@firebase/auth");function rn(w,...g){cn.logLevel<=Ge.in.ERROR&&cn.error(`Auth (${F.SDK_VERSION}): ${w}`,...g)}function dn(w,...g){throw dr(w,...g)}function Ln(w,...g){return dr(w,...g)}function Vi(w,g,y){const E=Object.assign(Object.assign({},zn()),{[g]:y});return new q.LL("auth","Firebase",E).create(g,{appName:w.name})}function ri(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&dn(w,"argument-error"),Vi(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dr(w,...g){if("string"!=typeof w){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return wt.create(w,...g)}function Fe(w,g,...y){if(!w)throw dr(g,...y)}function hr(w){const g="INTERNAL ASSERTION FAILED: "+w;throw rn(g),new Error(g)}function sr(w,g){w||hr(g)}const at=new Map;function vn(w){sr(w instanceof Function,"Expected a class definition");let g=at.get(w);return g?(sr(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,at.set(w,g),g)}function ii(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Br(){return"http:"===fr()||"https:"===fr()}function fr(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class _n{constructor(g,y){this.shortDelay=g,this.longDelay=y,sr(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,q.uI)()||(0,q.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Br()||(0,q.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ze(w,g){sr(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class gt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ss=new _n(3e4,6e4);function hn(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function It(w,g,y,E){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,a.Z)(function*(w,g,y,E,x={}){return er(w,x,(0,a.Z)(function*(){let R={},re={};E&&("GET"===g?re=E:R={body:JSON.stringify(E)});const Ee=(0,q.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),gt.fetch()(We(w,w.config.apiHost,y,Ee),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function er(w,g,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,a.Z)(function*(w,g,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},Bi),g);try{const x=new Ne(w),R=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const re=yield R.json();if("needConfirmation"in re)throw lt(w,"account-exists-with-different-credential",re);if(R.ok&&!("errorMessage"in re))return re;{const Ee=R.ok?re.errorMessage:re.error.message,[nt,Be]=Ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw lt(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===nt)throw lt(w,"email-already-in-use",re);const _t=E[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw Vi(w,_t,Be);dn(w,_t)}}catch(x){if(x instanceof q.ZR)throw x;dn(w,"network-request-failed")}})).apply(this,arguments)}function bt(w,g,y,E){return qt.apply(this,arguments)}function qt(){return(qt=(0,a.Z)(function*(w,g,y,E,x={}){const R=yield It(w,g,y,E,x);return"mfaPendingCredential"in R&&dn(w,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function We(w,g,y,E){const x=`${g}${y}?${E}`;return w.config.emulator?Ze(w.config,x):`${w.config.apiScheme}://${x}`}class Ne{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Ln(this.auth,"network-request-failed")),ss.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lt(w,g,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const x=Ln(w,g,E);return x.customData._tokenResponse=y,x}function Pt(){return(Pt=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Xt(w,g){return J.apply(this,arguments)}function J(){return(J=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function z(w,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ye(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Z(){return(Z=(0,a.Z)(function*(w,g=!1){const y=(0,q.m9)(w),E=yield y.getIdToken(g),x=Ue(E);Fe(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const R="object"==typeof x.firebase?x.firebase:void 0,re=null==R?void 0:R.sign_in_provider;return{claims:x,token:E,authTime:ye(ge(x.auth_time)),issuedAtTime:ye(ge(x.iat)),expirationTime:ye(ge(x.exp)),signInProvider:re||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function ge(w){return 1e3*Number(w)}function Ue(w){const[g,y,E]=w.split(".");if(void 0===g||void 0===y||void 0===E)return rn("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,q.tV)(y);return x?JSON.parse(x):(rn("Failed to decode base64 JWT payload"),null)}catch(x){return rn("Caught error parsing JWT payload as JSON",x),null}}function Ct(w,g){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,a.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof q.ZR&&Zt(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Zt({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Mn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,a.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class In{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ye(this.lastLoginAt),this.creationTime=ye(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function on(w){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,a.Z)(function*(w){var g;const y=w.auth,E=yield w.getIdToken(),x=yield Ct(w,z(y,{idToken:E}));Fe(null==x?void 0:x.users.length,y,"internal-error");const R=x.users[0];w._notifyReloadListener(R);const re=(null===(g=R.providerUserInfo)||void 0===g?void 0:g.length)?Ti(R.providerUserInfo):[],Ee=Rn(w.providerData,re),_t=!!w.isAnonymous&&!(w.email&&R.passwordHash||(null==Ee?void 0:Ee.length)),yn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Ee,metadata:new In(R.createdAt,R.lastLoginAt),isAnonymous:_t};Object.assign(w,yn)})).apply(this,arguments)}function Ut(){return(Ut=(0,a.Z)(function*(w){const g=(0,q.m9)(w);yield on(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Rn(w,g){return[...w.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function Ti(w){return w.map(g=>{var{providerId:y}=g,E=de(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function pr(){return(pr=(0,a.Z)(function*(w,g){const y=yield er(w,{},(0,a.Z)(function*(){const E=(0,q.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:R}=w.config,re=We(w,x,"/v1/token",`key=${R}`),Ee=yield w._getAdditionalHeaders();return Ee["Content-Type"]="application/x-www-form-urlencoded",gt.fetch()(re,{method:"POST",headers:Ee,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Fe(g.idToken,"internal-error"),Fe(void 0!==g.idToken,"internal-error"),Fe(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=Ue(w);return Fe(g,"internal-error"),Fe(void 0!==g.exp,"internal-error"),Fe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,a.Z)(function*(){return Fe(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,a.Z)(function*(){const{accessToken:x,refreshToken:R,expiresIn:re}=yield function(w,g){return pr.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(x,R,Number(re))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:x,expirationTime:R}=y,re=new Di;return E&&(Fe("string"==typeof E,"internal-error",{appName:g}),re.refreshToken=E),x&&(Fe("string"==typeof x,"internal-error",{appName:g}),re.accessToken=x),R&&(Fe("number"==typeof R,"internal-error",{appName:g}),re.expirationTime=R),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Di,this.toJSON())}_performRefresh(){return hr("not implemented")}}function bn(w,g){Fe("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Ui{constructor(g){var{uid:y,auth:E,stsTokenManager:x}=g,R=de(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new In(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,a.Z)(function*(){const E=yield Ct(y,y.stsTokenManager.getToken(y.auth,g));return Fe(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function(w){return Z.apply(this,arguments)}(this,g)}reload(){return function(w){return Ut.apply(this,arguments)}(this)}_assign(g){this!==g&&(Fe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ui(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,a.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield on(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,a.Z)(function*(){const y=yield g.getIdToken();return yield Ct(g,function(w,g){return Pt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,x,R,re,Ee,nt,Be,_t;const yn=null!==(E=y.displayName)&&void 0!==E?E:void 0,On=null!==(x=y.email)&&void 0!==x?x:void 0,un=null!==(R=y.phoneNumber)&&void 0!==R?R:void 0,aa=null!==(re=y.photoURL)&&void 0!==re?re:void 0,cd=null!==(Ee=y.tenantId)&&void 0!==Ee?Ee:void 0,dd=null!==(nt=y._redirectEventId)&&void 0!==nt?nt:void 0,Up=null!==(Be=y.createdAt)&&void 0!==Be?Be:void 0,$p=null!==(_t=y.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:Hp,emailVerified:xh,isAnonymous:la,providerData:jp,stsTokenManager:Ul}=y;Fe(Hp&&Ul,g,"internal-error");const hE=Di.fromJSON(this.name,Ul);Fe("string"==typeof Hp,g,"internal-error"),bn(yn,g.name),bn(On,g.name),Fe("boolean"==typeof xh,g,"internal-error"),Fe("boolean"==typeof la,g,"internal-error"),bn(un,g.name),bn(aa,g.name),bn(cd,g.name),bn(dd,g.name),bn(Up,g.name),bn($p,g.name);const $l=new Ui({uid:Hp,auth:g,email:On,emailVerified:xh,displayName:yn,isAnonymous:la,photoURL:aa,phoneNumber:un,tenantId:cd,stsTokenManager:hE,createdAt:Up,lastLoginAt:$p});return jp&&Array.isArray(jp)&&($l.providerData=jp.map(Mi=>Object.assign({},Mi))),dd&&($l._redirectEventId=dd),$l}static _fromIdTokenResponse(g,y,E=!1){return(0,a.Z)(function*(){const x=new Di;x.updateFromServerResponse(y);const R=new Ui({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield on(R),R})()}}const xt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(y,E){var x=this;return(0,a.Z)(function*(){x.storage[y]=E})()}_get(y){var E=this;return(0,a.Z)(function*(){const x=E.storage[y];return void 0===x?null:x})()}_remove(y){var E=this;return(0,a.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function os(w,g,y){return`firebase:${w}:${g}:${y}`}class Bn{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:x,name:R}=this.auth;this.fullUserKey=os(this.userKey,x.apiKey,R),this.fullPersistenceKey=os("persistence",x.apiKey,R),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Ui._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,a.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,a.Z)(function*(){if(!y.length)return new Bn(vn(xt),g,E);const x=(yield Promise.all(y.map(function(){var Be=(0,a.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let R=x[0]||vn(xt);const re=os(E,g.config.apiKey,g.name);let Ee=null;for(const Be of y)try{const _t=yield Be._get(re);if(_t){const yn=Ui._fromJSON(g,_t);Be!==R&&(Ee=yn),R=Be;break}}catch(_t){}const nt=x.filter(Be=>Be._shouldAllowMigration);return R._shouldAllowMigration&&nt.length?(R=nt[0],Ee&&(yield R._set(re,Ee.toJSON())),yield Promise.all(y.map(function(){var Be=(0,a.Z)(function*(_t){if(_t!==R)try{yield _t._remove(re)}catch(yn){}});return function(_t){return Be.apply(this,arguments)}}())),new Bn(R,g,E)):new Bn(R,g,E)})()}}function gu(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Zo(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ea(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(zt(g))return"Blackberry";if(Dc(g))return"Webos";if(Ur(g))return"Safari";if((g.includes("chrome/")||go(g))&&!g.includes("edge/"))return"Chrome";if(si(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ea(w=(0,q.z$)()){return/firefox\//i.test(w)}function Ur(w=(0,q.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function go(w=(0,q.z$)()){return/crios\//i.test(w)}function Zo(w=(0,q.z$)()){return/iemobile/i.test(w)}function si(w=(0,q.z$)()){return/android/i.test(w)}function zt(w=(0,q.z$)()){return/blackberry/i.test(w)}function Dc(w=(0,q.z$)()){return/webos/i.test(w)}function zo(w=(0,q.z$)()){return/iphone|ipad|ipod/i.test(w)}function Ar(w=(0,q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Ta(w=(0,q.z$)()){return zo(w)||si(w)||Dc(w)||zt(w)||/windows phone/i.test(w)||Zo(w)}function Kr(w,g=[]){let y;switch(w){case"Browser":y=gu((0,q.z$)());break;case"Worker":y=`${gu((0,q.z$)())}-${w}`;break;default:y=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${F.SDK_VERSION}/${E}`}class o_{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $i(this),this.idTokenSubscription=new $i(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=vn(y)),this._initializationPromise=this.queue((0,a.Z)(function*(){var x,R;if(!E._deleted&&(E.persistenceManager=yield Bn.create(E,g),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(re){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,a.Z)(function*(){var E;let x=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const R=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,re=null==x?void 0:x._redirectEventId,Ee=yield y.tryRedirectSignIn(g);(!R||R===re)&&(null==Ee?void 0:Ee.user)&&(x=Ee.user)}return x?x._redirectEventId?(Fe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===x._redirectEventId?y.directlySetCurrentUser(x):y.reloadAndSetCurrentUserOrClear(x)):y.reloadAndSetCurrentUserOrClear(x):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,a.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(x){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,a.Z)(function*(){try{yield on(g)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){const E=g?(0,q.m9)(g):null;return E&&Fe(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){if(!y._deleted)return g&&Fe(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,a.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,a.Z)(function*(){yield y.assertedPersistence.setPersistence(vn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new q.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,a.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,a.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&vn(g)||y._popupRedirectResolver;Fe(E,y,"argument-error"),y.redirectPersistenceManager=yield Bn.create(y,[vn(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,a.Z)(function*(){var E,x;return y._isInitialized&&(yield y.queue((0,a.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,a.Z)(function*(){if(g===y.currentUser)return y.queue((0,a.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,x){if(this._deleted)return()=>{};const R="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Fe(re,this,"internal-error"),re.then(()=>R(this.currentUser)),"function"==typeof y?g.addObserver(y,E,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,a.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Kr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,a.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function kn(w){return(0,q.m9)(w)}class $i{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,q.ne)(y=>this.observer=y)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ac(w,g,y){const E=kn(w);Fe(E._canInitEmulator,E,"emulator-config-failed"),Fe(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!(null==y?void 0:y.disableWarnings),R=yl(g),{host:re,port:Ee}=function(w){const g=yl(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const R=x[1];return{host:R,port:as(E.substr(R.length+1))}}{const[R,re]=E.split(":");return{host:R,port:as(re)}}}(g);E.config.emulator={url:`${R}//${re}${null===Ee?"":`:${Ee}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:re,port:Ee,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function yl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function as(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class vl{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return hr("not implemented")}_getIdTokenResponse(g){return hr("not implemented")}_linkToIdToken(g,y){return hr("not implemented")}_getReauthenticationResolver(g){return hr("not implemented")}}function nh(w,g){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:resetPassword",hn(w,g))})).apply(this,arguments)}function mp(w,g){return rh.apply(this,arguments)}function rh(){return(rh=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Nc(w,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:update",hn(w,g))})).apply(this,arguments)}function ih(){return(ih=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signInWithPassword",hn(w,g))})).apply(this,arguments)}function mu(w,g){return sh.apply(this,arguments)}function sh(){return(sh=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:sendOobCode",hn(w,g))})).apply(this,arguments)}function l_(w,g){return oh.apply(this,arguments)}function oh(){return(oh=(0,a.Z)(function*(w,g){return mu(w,g)})).apply(this,arguments)}function E0(w,g){return _u.apply(this,arguments)}function _u(){return(_u=(0,a.Z)(function*(w,g){return mu(w,g)})).apply(this,arguments)}function u_(w,g){return bl.apply(this,arguments)}function bl(){return(bl=(0,a.Z)(function*(w,g){return mu(w,g)})).apply(this,arguments)}function ah(w,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,a.Z)(function*(w,g){return mu(w,g)})).apply(this,arguments)}function yu(){return(yu=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signInWithEmailLink",hn(w,g))})).apply(this,arguments)}function $s(){return($s=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signInWithEmailLink",hn(w,g))})).apply(this,arguments)}class wl extends vl{constructor(g,y,E,x=null){super("password",E),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new wl(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new wl(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,a.Z)(function*(){switch(y.signInMethod){case"password":return function(w,g){return ih.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,g){return yu.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:dn(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,a.Z)(function*(){switch(E.signInMethod){case"password":return mp(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(w,g){return $s.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:dn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Kn(w,g){return vu.apply(this,arguments)}function vu(){return(vu=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signInWithIdp",hn(w,g))})).apply(this,arguments)}class Sr extends vl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Sr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):dn("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=y,R=de(y,["providerId","signInMethod"]);if(!E||!x)return null;const re=new Sr(E,x);return re.idToken=R.idToken||void 0,re.accessToken=R.accessToken||void 0,re.secret=R.secret,re.nonce=R.nonce,re.pendingToken=R.pendingToken||null,re}_getIdTokenResponse(g){return Kn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Kn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Kn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,q.xO)(y)}return g}}function lh(w,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:sendVerificationCode",hn(w,g))})).apply(this,arguments)}function Cl(){return(Cl=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signInWithPhoneNumber",hn(w,g))})).apply(this,arguments)}function oi(){return(oi=(0,a.Z)(function*(w,g){const y=yield bt(w,"POST","/v1/accounts:signInWithPhoneNumber",hn(w,g));if(y.temporaryProof)throw lt(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Mc={USER_NOT_FOUND:"user-not-found"};function Sa(){return(Sa=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signInWithPhoneNumber",hn(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Mc)})).apply(this,arguments)}class Ii extends vl{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Ii({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Ii({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(w,g){return Cl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(w,g){return oi.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return Sa.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}=g;return E||y||x||R?new Ii({verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}):null}}class Pn{constructor(g){var y,E,x,R,re,Ee;const nt=(0,q.zd)((0,q.pd)(g)),Be=null!==(y=nt.apiKey)&&void 0!==y?y:null,_t=null!==(E=nt.oobCode)&&void 0!==E?E:null,yn=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);Fe(Be&&_t&&yn,"argument-error"),this.apiKey=Be,this.operation=yn,this.code=_t,this.continueUrl=null!==(R=nt.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(re=nt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Ee=nt.tenantId)&&void 0!==Ee?Ee:null}static parseLink(g){const y=function(w){const g=(0,q.zd)((0,q.pd)(w)).link,y=g?(0,q.zd)((0,q.pd)(g)).deep_link_id:null,E=(0,q.zd)((0,q.pd)(w)).deep_link_id;return(E?(0,q.zd)((0,q.pd)(E)).link:null)||E||y||g||w}(g);try{return new Pn(y)}catch(E){return null}}}let Is=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return wl._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const x=Pn.parseLink(E);return Fe(x,"argument-error"),wl._fromEmailAndCode(y,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class us{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class An extends us{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Yo extends An{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Fe("providerId"in y&&"signInMethod"in y,"argument-error"),Sr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Fe(g.idToken||g.accessToken,"argument-error"),Sr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Yo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Yo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:R,nonce:re,providerId:Ee}=g;if(!E&&!x&&!y&&!R||!Ee)return null;try{return new Yo(Ee)._credential({idToken:y,accessToken:E,nonce:re,pendingToken:R})}catch(nt){return null}}}let Pc=(()=>{class w extends An{constructor(){super("facebook.com")}static credential(y){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),wu=(()=>{class w extends An{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:x}=y;if(!E&&!x)return null;try{return w.credential(E,x)}catch(R){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Sn=(()=>{class w extends An{constructor(){super("github.com")}static credential(y){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class As extends vl{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Kn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Kn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Kn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:R}=y;return E&&x&&R&&E===x?new As(E,R):null}static _create(g,y){return new As(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends us{constructor(g){Fe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Nr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Nr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=As.fromJSON(g);return Fe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return As._create(E,y)}catch(x){return null}}}let dh=(()=>{class w extends An{constructor(){super("twitter.com")}static credential(y,E){return Sr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=y;if(!E||!x)return null;try{return w.credential(E,x)}catch(R){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function El(w,g){return vo.apply(this,arguments)}function vo(){return(vo=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signUp",hn(w,g))})).apply(this,arguments)}class gr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,x=!1){return(0,a.Z)(function*(){const R=yield Ui._fromIdTokenResponse(g,E,x),re=Tl(E);return new gr({user:R,providerId:re,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=Tl(E);return new gr({user:g,providerId:x,_tokenResponse:E,operationType:y})})()}}function Tl(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Cu(w){return At.apply(this,arguments)}function At(){return(At=(0,a.Z)(function*(w){var g;const y=kn(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new gr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield El(y,{returnSecureToken:!0}),x=yield gr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class Eu extends q.ZR{constructor(g,y,E,x){var R;super(y.code,y.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Eu.prototype),this.customData={appName:g.name,tenantId:null!==(R=g.tenantId)&&void 0!==R?R:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,x){return new Eu(g,y,E,x)}}function Tu(w,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Eu._fromErrorAndOperation(w,R,g,E):R})}function Fc(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Lc(w,g){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,a.Z)(function*(w,g){const y=(0,q.m9)(w);yield Me(!0,y,g);const{providerUserInfo:E}=yield Xt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=Fc(E||[]);return y.providerData=y.providerData.filter(R=>x.has(R.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Dl(w,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,a.Z)(function*(w,g,y=!1){const E=yield Ct(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return gr._forOperation(w,"link",E)})).apply(this,arguments)}function Me(w,g,y){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,a.Z)(function*(w,g,y){yield on(g);const x=!1===w?"provider-already-linked":"no-such-provider";Fe(Fc(g.providerData).has(y)===w,g.auth,x)})).apply(this,arguments)}function xa(w,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,a.Z)(function*(w,g,y=!1){const{auth:E}=w,x="reauthenticate";try{const R=yield Ct(w,Tu(E,x,g,w),y);Fe(R.idToken,E,"internal-error");const re=Ue(R.idToken);Fe(re,E,"internal-error");const{sub:Ee}=re;return Fe(w.uid===Ee,E,"user-mismatch"),gr._forOperation(w,x,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&dn(E,"user-mismatch"),R}})).apply(this,arguments)}function Il(w,g){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,a.Z)(function*(w,g,y=!1){const E="signIn",x=yield Tu(w,E,g),R=yield gr._fromIdTokenResponse(w,E,x);return y||(yield w._updateCurrentUser(R.user)),R})).apply(this,arguments)}function ai(w,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,a.Z)(function*(w,g){return Il(kn(w),g)})).apply(this,arguments)}function Al(w,g){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,a.Z)(function*(w,g){const y=(0,q.m9)(w);return yield Me(!1,y,g.providerId),Dl(y,g)})).apply(this,arguments)}function hh(w,g){return wo.apply(this,arguments)}function wo(){return(wo=(0,a.Z)(function*(w,g){return xa((0,q.m9)(w),g)})).apply(this,arguments)}function Du(w,g){return or.apply(this,arguments)}function or(){return(or=(0,a.Z)(function*(w,g){return bt(w,"POST","/v1/accounts:signInWithCustomToken",hn(w,g))})).apply(this,arguments)}function Ai(w,g){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,a.Z)(function*(w,g){const y=kn(w),E=yield Du(y,{token:g,returnSecureToken:!0}),x=yield gr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class Si{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Ni._fromServerResponse(g,y):dn(g,"internal-error")}}class Ni extends Si{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Ni(y)}}function Sl(w,g,y){var E;Fe((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),Fe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Fe(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Fe(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function $c(w,g,y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w),x={requestType:"PASSWORD_RESET",email:g};y&&Sl(E,x,y),yield E0(E,x)})).apply(this,arguments)}function yp(w,g,y){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,a.Z)(function*(w,g,y){yield nh((0,q.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Hc(w,g){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,a.Z)(function*(w,g){yield Nc((0,q.m9)(w),{oobCode:g})})).apply(this,arguments)}function Co(w,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,a.Z)(function*(w,g){const y=(0,q.m9)(w),E=yield nh(y,{oobCode:g}),x=E.requestType;switch(Fe(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Fe(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Fe(E.mfaInfo,y,"internal-error");default:Fe(E.email,y,"internal-error")}let R=null;return E.mfaInfo&&(R=Si._fromServerResponse(kn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:x}})).apply(this,arguments)}function jc(w,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,a.Z)(function*(w,g){const{data:y}=yield Co((0,q.m9)(w),g);return y.email})).apply(this,arguments)}function fh(w,g,y){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,a.Z)(function*(w,g,y){const E=kn(w),x=yield El(E,{returnSecureToken:!0,email:g,password:y}),R=yield gr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function qc(w,g,y){return ai((0,q.m9)(w),Is.credential(g,y))}function Wc(w,g,y){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};Fe(y.handleCodeInApp,E,"argument-error"),y&&Sl(E,x,y),yield u_(E,x)})).apply(this,arguments)}function Zc(w,g){const y=Pn.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function vp(w,g,y){return $r.apply(this,arguments)}function $r(){return($r=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w),x=Is.credentialWithLink(g,y||ii());return Fe(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ai(E,x)})).apply(this,arguments)}function Pa(w,g){return $n.apply(this,arguments)}function $n(){return($n=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:createAuthUri",hn(w,g))})).apply(this,arguments)}function T0(w,g){return bp.apply(this,arguments)}function bp(){return(bp=(0,a.Z)(function*(w,g){const E={identifier:g,continueUri:Br()?ii():"http://localhost"},{signinMethods:x}=yield Pa((0,q.m9)(w),E);return x||[]})).apply(this,arguments)}function Au(w,g){return zc.apply(this,arguments)}function zc(){return(zc=(0,a.Z)(function*(w,g){const y=(0,q.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&Sl(y.auth,x,g);const{email:R}=yield l_(y.auth,x);R!==w.email&&(yield w.reload())})).apply(this,arguments)}function wp(w,g,y){return xl.apply(this,arguments)}function xl(){return(xl=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&Sl(E.auth,R,y);const{email:re}=yield ah(E.auth,R);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function Su(w,g){return js.apply(this,arguments)}function js(){return(js=(0,a.Z)(function*(w,g){return It(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function mr(w,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,a.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,q.m9)(w),R={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},re=yield Ct(E,Su(E.auth,R));E.displayName=re.displayName||null,E.photoURL=re.photoUrl||null;const Ee=E.providerData.find(({providerId:nt})=>"password"===nt);Ee&&(Ee.displayName=E.displayName,Ee.photoURL=E.photoURL),yield E._updateTokensIfNecessary(re)})).apply(this,arguments)}function ph(w,g){return Gs((0,q.m9)(w),g,null)}function Cp(w,g){return Gs((0,q.m9)(w),null,g)}function Gs(w,g,y){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,a.Z)(function*(w,g,y){const{auth:E}=w,R={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(R.email=g),y&&(R.password=y);const re=yield Ct(w,mp(E,R));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class To{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class Fa extends To{constructor(g,y,E,x){super(g,y,E),this.username=x}}class Yc extends To{constructor(g,y){super(g,"facebook.com",y)}}class Ep extends Fa{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class h_ extends To{constructor(g,y){super(g,"google.com",y)}}class Hi extends Fa{constructor(g,y,E){super(g,"twitter.com",y,E)}}function D0(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,y;if(!w)return null;const{providerId:E}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},R=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const re=null===(y=null===(g=Ue(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new To(R,"anonymous"!==re&&"custom"!==re?re:null)}if(!E)return null;switch(E){case"facebook.com":return new Yc(R,x);case"github.com":return new Ep(R,x);case"google.com":return new h_(R,x);case"twitter.com":return new Hi(R,x,w.screenName||null);case"custom":case"anonymous":return new To(R,null);default:return new To(R,E,x)}}(y)}class ji{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new ji("enroll",g)}static _fromMfaPendingCredential(g){return new ji("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return ji._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return ji._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Va{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=kn(g),x=y.customData._serverResponse,R=(x.mfaInfo||[]).map(Ee=>Si._fromServerResponse(E,Ee));Fe(x.mfaPendingCredential,E,"internal-error");const re=ji._fromMfaPendingCredential(x.mfaPendingCredential);return new Va(re,R,function(){var Ee=(0,a.Z)(function*(nt){const Be=yield nt._process(E,re);delete x.mfaInfo,delete x.mfaPendingCredential;const _t=Object.assign(Object.assign({},x),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(y.operationType){case"signIn":const yn=yield gr._fromIdTokenResponse(E,y.operationType,_t);return yield E._updateCurrentUser(yn.user),yn;case"reauthenticate":return Fe(y.user,E,"internal-error"),gr._forOperation(y.user,y.operationType,_t);default:dn(E,"internal-error")}});return function(nt){return Ee.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,a.Z)(function*(){return y.signInResolver(g)})()}}function xu(w,g){var y;const E=(0,q.m9)(w),x=g;return Fe(g.customData.operationType,E,"argument-error"),Fe(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Va._fromError(E,x)}function I0(w,g){return It(w,"POST","/v2/accounts/mfaEnrollment:start",hn(w,g))}class Mu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>Si._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Mu(g)}getSession(){var g=this;return(0,a.Z)(function*(){return ji._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,a.Z)(function*(){const x=g,R=yield E.getSession(),re=yield Ct(E.user,x._process(E.user.auth,R,y));return yield E.user._updateTokensIfNecessary(re),E.user.reload()})()}unenroll(g){var y=this;return(0,a.Z)(function*(){const E="string"==typeof g?g:g.uid,x=yield y.user.getIdToken(),R=yield Ct(y.user,function(w,g){return It(w,"POST","/v2/accounts/mfaEnrollment:withdraw",hn(w,g))}(y.user.auth,{idToken:x,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:re})=>re!==E),yield y.user._updateTokensIfNecessary(R);try{yield y.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const _h=new WeakMap;function Qo(w){const g=(0,q.m9)(w);return _h.has(g)||_h.set(g,Mu._fromUser(g)),_h.get(g)}const Rl="__sak";class en{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Rl,"1"),this.storage.removeItem(Rl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xo=(()=>{class w extends en{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,q.z$)();return Ur(w)||zo(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Ta(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),R=this.localCache[E];x!==R&&y(E,R,x)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Ee,nt,Be)=>{this.notifyListeners(Ee,Be)});const x=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ee=this.storage.getItem(x);if(y.newValue!==Ee)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!E)return}const R=()=>{const Ee=this.storage.getItem(x);!E&&this.localCache[x]===Ee||this.notifyListeners(x,Ee)},re=this.storage.getItem(x);(0,q.w1)()&&10===document.documentMode&&re!==y.newValue&&y.newValue!==y.oldValue?setTimeout(R,10):R()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var x=()=>super._set,R=this;return(0,a.Z)(function*(){yield x().call(R,y,E),R.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,x=this;return(0,a.Z)(function*(){const R=yield E().call(x,y);return x.localCache[y]=JSON.stringify(R),R})()}_remove(y){var E=()=>super._remove,x=this;return(0,a.Z)(function*(){yield E().call(x,y),delete x.localCache[y]})()}}return w.type="LOCAL",w})(),ar=(()=>{class w extends en{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Ap=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(R=>R.isListeningto(y));if(E)return E;const x=new w(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,a.Z)(function*(){const x=y,{eventId:R,eventType:re,data:Ee}=x.data,nt=E.handlersMap[re];if(!(null==nt?void 0:nt.size))return;x.ports[0].postMessage({status:"ack",eventId:R,eventType:re});const Be=Array.from(nt).map(function(){var yn=(0,a.Z)(function*(On){return On(x.origin,Ee)});return function(On){return yn.apply(this,arguments)}}()),_t=yield function(w){return Promise.all(w.map(function(){var g=(0,a.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(Be);x.ports[0].postMessage({status:"done",eventId:R,eventType:re,response:_t})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Do(w="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return w+y}class qn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var x=this;return(0,a.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let re,Ee;return new Promise((nt,Be)=>{const _t=Do("",20);R.port1.start();const yn=setTimeout(()=>{Be(new Error("unsupported_event"))},E);Ee={messageChannel:R,onMessage(On){const un=On;if(un.data.eventId===_t)switch(un.data.status){case"ack":clearTimeout(yn),re=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),nt(un.data.response);break;default:clearTimeout(yn),clearTimeout(re),Be(new Error("invalid_response"))}}},x.handlers.add(Ee),R.port1.addEventListener("message",Ee.onMessage),x.target.postMessage({eventType:g,eventId:_t,data:y},[R.port2])}).finally(()=>{Ee&&x.removeMessageHandler(Ee)})})()}}function Jn(){return window}function ea(){return void 0!==Jn().WorkerGlobalScope&&"function"==typeof Jn().importScripts}function Ba(){return(Ba=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const xs="firebaseLocalStorageDb",Ao="firebaseLocalStorage",qs="fbase_key";class li{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function xi(w,g){return w.transaction([Ao],g?"readwrite":"readonly").objectStore(Ao)}function ut(){const w=indexedDB.open(xs,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Ao,{keyPath:qs})}catch(x){y(x)}}),w.addEventListener("success",(0,a.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Ao)?g(E):(E.close(),yield function(){const w=indexedDB.deleteDatabase(xs);return new li(w).toPromise()}(),g(yield ut()))}))})}function Gi(w,g,y){return tr.apply(this,arguments)}function tr(){return(tr=(0,a.Z)(function*(w,g,y){const E=xi(w,!0).put({[qs]:g,value:y});return new li(E).toPromise()})).apply(this,arguments)}function Hn(){return(Hn=(0,a.Z)(function*(w,g){const y=xi(w,!1).get(g),E=yield new li(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function vh(w,g){const y=xi(w,!0).delete(g);return new li(y).toPromise()}const Np=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,a.Z)(function*(){return y.db||(y.db=yield ut()),y.db})()}_withRetries(y){var E=this;return(0,a.Z)(function*(){let x=0;for(;;)try{const R=yield E._openDb();return yield y(R)}catch(R){if(x++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,a.Z)(function*(){return ea()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,a.Z)(function*(){y.receiver=Ap._getInstance(ea()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,a.Z)(function*(x,R){return{keyProcessed:(yield y._poll()).includes(R.key)}});return function(x,R){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,a.Z)(function*(x,R){return["keyChanged"]});return function(x,R){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,a.Z)(function*(){var E,x;if(y.activeServiceWorker=yield function(){return Ba.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new qn(y.activeServiceWorker);const R=yield y.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=R[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,a.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ut();return yield Gi(y,Rl,"1"),yield vh(y,Rl),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,a.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var x=this;return(0,a.Z)(function*(){return x._withPendingWrite((0,a.Z)(function*(){return yield x._withRetries(R=>Gi(R,y,E)),x.localCache[y]=E,x.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,a.Z)(function*(){const x=yield E._withRetries(R=>function(w,g){return Hn.apply(this,arguments)}(R,y));return E.localCache[y]=x,x})()}_remove(y){var E=this;return(0,a.Z)(function*(){return E._withPendingWrite((0,a.Z)(function*(){return yield E._withRetries(x=>vh(x,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,a.Z)(function*(){const E=yield y._withRetries(re=>{const Ee=xi(re,!1).getAll();return new li(Ee).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const x=[],R=new Set;for(const{fbase_key:re,value:Ee}of E)R.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(Ee)&&(y.notifyListeners(re,Ee),x.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!R.has(re)&&(y.notifyListeners(re,null),x.push(re));return x})()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function ta(w,g){return It(w,"POST","/v2/accounts/mfaSignIn:start",hn(w,g))}function Pu(){return(Pu=(0,a.Z)(function*(w){return(yield It(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xc(w){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=x=>{const R=Ln("internal-error");R.customData=x,y(R)},E.type="text/javascript",E.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function So(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Ws=1e12;class xr{constructor(g){this.auth=g,this.counter=Ws,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Ou(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||Ws;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Ws))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,a.Z)(function*(){var E;return null===(E=y._widgets.get(g||Ws))||void 0===E||E.execute(),""})()}}class Ou{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;Fe(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yi=So("rcb"),Ms=new _n(3e4,6e4);class xo{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Jn().grecaptcha}load(g,y=""){return Fe((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Jn().grecaptcha):new Promise((E,x)=>{const R=Jn().setTimeout(()=>{x(Ln(g,"network-request-failed"))},Ms.get());Jn()[yi]=()=>{Jn().clearTimeout(R),delete Jn()[yi];const Ee=Jn().grecaptcha;if(!Ee)return void x(Ln(g,"internal-error"));const nt=Ee.render;Ee.render=(Be,_t)=>{const yn=nt(Be,_t);return this.counter++,yn},this.hostLanguage=y,E(Ee)},Xc(`https://www.google.com/recaptcha/api.js??${(0,q.xO)({onload:yi,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(R),x(Ln(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Jn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wh{load(g){return(0,a.Z)(function*(){return new xr(g)})()}clearedOneInstance(){}}const Zs="recaptcha",xp={theme:"light",type:"image"};class $a{constructor(g,y=Object.assign({},xp),E){this.parameters=y,this.type=Zs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kn(E),this.isInvisible="invisible"===this.parameters.size,Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;Fe(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wh:new xo,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(R=>{const re=Ee=>{!Ee||(g.tokenChangeListeners.delete(re),R(Ee))};g.tokenChangeListeners.add(re),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Fe(!this.parameters.sitekey,this.auth,"argument-error"),Fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Jn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){Fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){Fe(Br()&&!ea(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(w){return Pu.apply(this,arguments)}(g.auth);Fe(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ed{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Ii._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function yr(w,g,y){return ur.apply(this,arguments)}function ur(){return(ur=(0,a.Z)(function*(w,g,y){const E=kn(w),x=yield P(E,g,(0,q.m9)(y));return new ed(x,R=>ai(E,R))})).apply(this,arguments)}function Ha(w,g,y){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w);yield Me(!1,E,"phone");const x=yield P(E.auth,g,(0,q.m9)(y));return new ed(x,R=>Al(E,R))})).apply(this,arguments)}function D(w,g,y){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w),x=yield P(E.auth,g,(0,q.m9)(y));return new ed(x,R=>hh(E,R))})).apply(this,arguments)}function P(w,g,y){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)(function*(w,g,y){var E;const x=yield y.verify();try{let R;if(Fe("string"==typeof x,w,"argument-error"),Fe(y.type===Zs,w,"argument-error"),R="string"==typeof g?{phoneNumber:g}:g,"session"in R){const re=R.session;if("phoneNumber"in R)return Fe("enroll"===re.type,w,"internal-error"),(yield I0(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Fe("signin"===re.type,w,"internal-error");const Ee=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return Fe(Ee,w,"missing-multi-factor-info"),(yield ta(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:Ee,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield lh(w,{phoneNumber:R.phoneNumber,recaptchaToken:x});return re}}finally{y._reset()}})).apply(this,arguments)}function oe(w,g){return fe.apply(this,arguments)}function fe(){return(fe=(0,a.Z)(function*(w,g){yield Dl((0,q.m9)(w),g)})).apply(this,arguments)}let Oe=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=kn(y)}verifyPhoneNumber(y,E){return P(this.auth,y,(0,q.m9)(E))}static credential(y,E){return Ii._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:x}=y;return E&&x?Ii._fromTokenResponse(E,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function et(w,g){return g?vn(g):(Fe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Tt extends vl{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Kn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Kn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Kn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Ot(w){return Il(w.auth,new Tt(w),w.bypassAuthState)}function nn(w){const{auth:g,user:y}=w;return Fe(y,g,"internal-error"),xa(y,new Tt(w),w.bypassAuthState)}function Ft(w){return Er.apply(this,arguments)}function Er(){return(Er=(0,a.Z)(function*(w){const{auth:g,user:y}=w;return Fe(y,g,"internal-error"),Dl(y,new Tt(w),w.bypassAuthState)})).apply(this,arguments)}class Tr{constructor(g,y,E,x,R=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,a.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(R){g.reject(R)}});return function(E,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,a.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:R,tenantId:re,error:Ee,type:nt}=g;if(Ee)return void y.reject(Ee);const Be={auth:y.auth,requestUri:E,sessionId:x,tenantId:re||void 0,postBody:R||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(nt)(Be))}catch(_t){y.reject(_t)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ot;case"linkViaPopup":case"linkViaRedirect":return Ft;case"reauthViaPopup":case"reauthViaRedirect":return nn;default:dn(this.auth,"internal-error")}}resolve(g){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pl=new _n(2e3,1e4);function td(w,g,y){return zs.apply(this,arguments)}function zs(){return(zs=(0,a.Z)(function*(w,g,y){const E=kn(w);ri(w,g,us);const x=et(E,y);return new Rp(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function ja(w,g,y){return ks.apply(this,arguments)}function ks(){return(ks=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w);ri(E.auth,g,us);const x=et(E.auth,y);return new Rp(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function na(w,g,y){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w);ri(E.auth,g,us);const x=et(E.auth,y);return new Rp(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let Rp=(()=>{class w extends Tr{constructor(y,E,x,R,re){super(y,E,R,re),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,a.Z)(function*(){const E=yield y.execute();return Fe(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,a.Z)(function*(){sr(1===y.filter.length,"Popup operations only handle one event");const E=Do();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Ln(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Pl.get())};y()}}return w.currentPopupAction=null,w})();const Fu=new Map;class p_ extends Tr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,a.Z)(function*(){let E=Fu.get(y.auth._key());if(!E){try{const R=(yield function(w,g){return Fl.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(R)}catch(x){E=()=>Promise.reject(x)}Fu.set(y.auth._key(),E)}return y.bypassAuthState||Fu.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Fl(){return(Fl=(0,a.Z)(function*(w,g){const y=Ga(g),E=g_(w);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(y));return yield E._remove(y),x})).apply(this,arguments)}function kp(w,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,a.Z)(function*(w,g){return g_(w)._set(Ga(g),"true")})).apply(this,arguments)}function Pp(){Fu.clear()}function g_(w){return vn(w._redirectPersistence)}function Ga(w){return os("pendingRedirect",w.config.apiKey,w.name)}function qa(w,g,y){return function(w,g,y){return Hr.apply(this,arguments)}(w,g,y)}function Hr(){return(Hr=(0,a.Z)(function*(w,g,y){const E=kn(w);ri(w,g,us);const x=et(E,y);return yield kp(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function N0(w,g,y){return function(w,g,y){return Lu.apply(this,arguments)}(w,g,y)}function Lu(){return(Lu=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w);ri(E.auth,g,us);const x=et(E.auth,y);yield kp(x,E.auth);const R=yield Ll(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",R)})).apply(this,arguments)}function nd(w,g,y){return function(w,g,y){return Eh.apply(this,arguments)}(w,g,y)}function Eh(){return(Eh=(0,a.Z)(function*(w,g,y){const E=(0,q.m9)(w);ri(E.auth,g,us);const x=et(E.auth,y);yield Me(!1,E,g.providerId),yield kp(x,E.auth);const R=yield Ll(E);return x._openRedirect(E.auth,g,"linkViaRedirect",R)})).apply(this,arguments)}function x0(w,g){return ra.apply(this,arguments)}function ra(){return(ra=(0,a.Z)(function*(w,g){return yield kn(w)._initializationPromise,Wa(w,g,!1)})).apply(this,arguments)}function Wa(w,g){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,a.Z)(function*(w,g,y=!1){const E=kn(w),x=et(E,g),re=yield new p_(E,x,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield E._persistUserIfCurrent(re.user),yield E._setRedirectUser(null,g)),re})).apply(this,arguments)}function Ll(w){return tn.apply(this,arguments)}function tn(){return(tn=(0,a.Z)(function*(w){const g=Do(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class M0{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return y_(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!y_(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Ln(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Za(g))}saveEventToCache(g){this.cachedEventUids.add(Za(g)),this.lastProcessedEventTime=Date.now()}}function Za(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function y_({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Bu(w){return id.apply(this,arguments)}function id(){return(id=(0,a.Z)(function*(w,g={}){return It(w,"GET","/v1/projects",g)})).apply(this,arguments)}const ia=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sd=/^https?/;function od(){return(od=(0,a.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Bu(w);for(const y of g)try{if(Th(y))return}catch(E){}dn(w,"unauthorized-domain")})).apply(this,arguments)}function Th(w){const g=ii(),{protocol:y,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===E}if(!sd.test(y))return!1;if(ia.test(w))return E===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const ad=new _n(3e4,6e4);function Uu(){const w=Jn().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let $u=null;function Vl(w){return $u=$u||function(w){return new Promise((g,y)=>{var E,x,R;function re(){Uu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Uu(),y(Ln(w,"network-request-failed"))},timeout:ad.get()})}if(null===(x=null===(E=Jn().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(R=Jn().gapi)||void 0===R?void 0:R.load)){const Ee=So("iframefcb");return Jn()[Ee]=()=>{gapi.load?re():y(Ln(w,"network-request-failed"))},Xc(`https://apis.google.com/js/api.js?onload=${Ee}`).catch(nt=>y(nt))}re()}}).catch(g=>{throw $u=null,g})}(w),$u}const R0=new _n(5e3,15e3),P0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sa(w){const g=w.config;Fe(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?Ze(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:F.SDK_VERSION},x=O0.get(w.config.apiHost);x&&(E.eid=x);const R=w._getFrameworks();return R.length&&(E.fw=R.join(",")),`${y}?${(0,q.xO)(E).slice(1)}`}function Ih(){return(Ih=(0,a.Z)(function*(w){const g=yield Vl(w),y=Jn().gapi;return Fe(y,w,"internal-error"),g.open({where:document.body,url:sa(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P0,dontclear:!0},E=>new Promise(function(){var x=(0,a.Z)(function*(R,re){yield E.restyle({setHideOnLeave:!1});const Ee=Ln(w,"network-request-failed"),nt=Jn().setTimeout(()=>{re(Ee)},R0.get());function Be(){Jn().clearTimeout(nt),R(E)}E.ping(Be).then(Be,()=>{re(Ee)})});return function(R,re){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const b_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ah{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function E_(w,g,y,E,x,R){Fe(w.config.authDomain,w,"auth-domain-config-required"),Fe(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:F.SDK_VERSION,eventId:x};if(g instanceof us){g.setDefaultLanguage(w.languageCode),re.providerId=g.providerId||"",(0,q.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,Be]of Object.entries(R||{}))re[nt]=Be}if(g instanceof An){const nt=g.getScopes().filter(Be=>""!==Be);nt.length>0&&(re.scopes=nt.join(","))}w.tenantId&&(re.tid=w.tenantId);const Ee=re;for(const nt of Object.keys(Ee))void 0===Ee[nt]&&delete Ee[nt];return`${function({config:w}){return w.emulator?Ze(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,q.xO)(Ee).slice(1)}`}const za="webStorageSupport",Ps=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ar,this._completeRedirectFn=Wa}_openPopup(g,y,E,x){var R=this;return(0,a.Z)(function*(){var re;sr(null===(re=R.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Ee=E_(g,y,E,ii(),x);return function(w,g,y,E=500,x=600){const R=Math.max((window.screen.availHeight-x)/2,0).toString(),re=Math.max((window.screen.availWidth-E)/2,0).toString();let Ee="";const nt=Object.assign(Object.assign({},b_),{width:E.toString(),height:x.toString(),top:R,left:re}),Be=(0,q.z$)().toLowerCase();y&&(Ee=go(Be)?"_blank":y),Ea(Be)&&(g=g||"http://localhost",nt.scrollbars="yes");const _t=Object.entries(nt).reduce((On,[un,aa])=>`${On}${un}=${aa},`,"");if(function(w=(0,q.z$)()){var g;return zo(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Be)&&"_self"!==Ee)return function(w,g){const y=document.createElement("a");y.href=w,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",Ee),new Ah(null);const yn=window.open(g||"",Ee,_t);Fe(yn,w,"popup-blocked");try{yn.focus()}catch(On){}return new Ah(yn)}(g,Ee,Do())})()}_openRedirect(g,y,E,x){var R=this;return(0,a.Z)(function*(){return yield R._originValidation(g),w=E_(g,y,E,ii(),x),Jn().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:R}=this.eventManagers[y];return x?Promise.resolve(x):(sr(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,a.Z)(function*(){const E=yield function(w){return Ih.apply(this,arguments)}(g),x=new M0(g);return E.register("authEvent",R=>(Fe(null==R?void 0:R.authEvent,g,"invalid-auth-event"),{status:x.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(za,{type:za},x=>{var R;const re=null===(R=null==x?void 0:x[0])||void 0===R?void 0:R[za];void 0!==re&&y(!!re),dn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return od.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ta()||Ur()||zo()}};class Gu extends class{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return hr("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Gu(g)}_finalizeEnroll(g,y,E){return function(w,g){return It(w,"POST","/v2/accounts/mfaEnrollment:finalize",hn(w,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(w,g){return It(w,"POST","/v2/accounts/mfaSignIn:finalize",hn(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let T_=(()=>{class w{constructor(){}static assertion(y){return Gu._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w,qu="@firebase/auth",D_="0.19.12";class cE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,a.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}w="Browser",(0,F._registerComponent)(new Se.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:R,authDomain:re}=E.options;return((Ee,nt)=>{Fe(R&&!R.includes(":"),"invalid-api-key",{appName:Ee.name}),Fe(!(null==re?void 0:re.includes(":")),"argument-error",{appName:Ee.name});const Be={apiKey:R,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kr(w)},_t=new o_(Ee,nt,Be);return function(w,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(vn);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(_t,y),_t})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new Se.wA("auth-internal",g=>{const y=kn(g.getProvider("auth").getImmediate());return new cE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(qu,D_,void 0),(0,F.registerVersion)(qu,D_,"esm2017")},3854:(ot,Te,B)=>{"use strict";B.d(Te,{BH:()=>Re,LL:()=>Mt,ZR:()=>Se,gQ:()=>hr,zI:()=>je,hu:()=>F,g5:()=>se,US:()=>de,tV:()=>U,h$:()=>X,L:()=>Q,$s:()=>It,r3:()=>Xn,Sg:()=>Ae,ne:()=>sr,p$:()=>Y,vZ:()=>Ln,ZB:()=>j,Lj:()=>Pt,gK:()=>Br,pd:()=>Fe,m9:()=>sn,z$:()=>Ce,GJ:()=>wt,jU:()=>pe,ru:()=>ke,d:()=>mt,xb:()=>rn,w1:()=>rt,hl:()=>xe,uI:()=>Ve,UG:()=>ce,Yr:()=>ft,b$:()=>Je,G6:()=>Qe,Mn:()=>Dt,w9:()=>zn,cI:()=>xn,UI:()=>dn,X3:()=>Et,xO:()=>ri,zd:()=>dr,DV:()=>cn,ug:()=>Ze,dS:()=>_n,Pz:()=>Gt,Dv:()=>ii,Wj:()=>Vn,lb:()=>Ca,eu:()=>Ie});var a=B(8239);const F=function(J,z){if(!J)throw se(z)},se=function(J){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+J)},ae=function(J){const z=[];let ne=0;for(let ye=0;ye<J.length;ye++){let $=J.charCodeAt(ye);$<128?z[ne++]=$:$<2048?(z[ne++]=$>>6|192,z[ne++]=63&$|128):55296==(64512&$)&&ye+1<J.length&&56320==(64512&J.charCodeAt(ye+1))?($=65536+((1023&$)<<10)+(1023&J.charCodeAt(++ye)),z[ne++]=$>>18|240,z[ne++]=$>>12&63|128,z[ne++]=$>>6&63|128,z[ne++]=63&$|128):(z[ne++]=$>>12|224,z[ne++]=$>>6&63|128,z[ne++]=63&$|128)}return z},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,z){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let $=0;$<J.length;$+=3){const H=J[$],Z=$+1<J.length,ge=Z?J[$+1]:0,Ue=$+2<J.length,pt=Ue?J[$+2]:0;let Zt=(15&ge)<<2|pt>>6,Mn=63&pt;Ue||(Mn=64,Z||(Zt=64)),ye.push(ne[H>>2],ne[(3&H)<<4|ge>>4],ne[Zt],ne[Mn])}return ye.join("")},encodeString(J,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(J):this.encodeByteArray(ae(J),z)},decodeString(J,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(J):function(J){const z=[];let ne=0,ye=0;for(;ne<J.length;){const $=J[ne++];if($<128)z[ye++]=String.fromCharCode($);else if($>191&&$<224){const H=J[ne++];z[ye++]=String.fromCharCode((31&$)<<6|63&H)}else if($>239&&$<365){const Ue=((7&$)<<18|(63&J[ne++])<<12|(63&J[ne++])<<6|63&J[ne++])-65536;z[ye++]=String.fromCharCode(55296+(Ue>>10)),z[ye++]=String.fromCharCode(56320+(1023&Ue))}else{const H=J[ne++],Z=J[ne++];z[ye++]=String.fromCharCode((15&$)<<12|(63&H)<<6|63&Z)}}return z.join("")}(this.decodeStringToByteArray(J,z))},decodeStringToByteArray(J,z){this.init_();const ne=z?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let $=0;$<J.length;){const H=ne[J.charAt($++)],ge=$<J.length?ne[J.charAt($)]:0;++$;const pt=$<J.length?ne[J.charAt($)]:64;++$;const Ye=$<J.length?ne[J.charAt($)]:64;if(++$,null==H||null==ge||null==pt||null==Ye)throw Error();ye.push(H<<2|ge>>4),64!==pt&&(ye.push(ge<<4&240|pt>>2),64!==Ye&&ye.push(pt<<6&192|Ye))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},X=function(J){const z=ae(J);return de.encodeByteArray(z,!0)},Q=function(J){return X(J).replace(/\./g,"")},U=function(J){try{return de.decodeString(J,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function Y(J){return j(void 0,J)}function j(J,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return z}for(const ne in z)!z.hasOwnProperty(ne)||!le(ne)||(J[ne]=j(J[ne],z[ne]));return J}function le(J){return"__proto__"!==J}class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,ne)=>{this.resolve=z,this.reject=ne})}wrapCallback(z){return(ne,ye)=>{ne?this.reject(ne):this.resolve(ye),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(ne):z(ne,ye))}}}function Ae(J,z){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=z||"demo-project",$=J.iat||0,H=J.sub||J.user_id;if(!H)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Z=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:$,exp:$+3600,auth_time:$,sub:H,user_id:H,firebase:{sign_in_provider:"custom",identities:{}}},J);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(Z)),""].join(".")}function Ce(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(J){return!1}}function pe(){return"object"==typeof self&&self.self===self}function ke(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function Je(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mt(){return Ce().indexOf("Electron/")>=0}function rt(){const J=Ce();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function Dt(){return Ce().indexOf("MSAppHost/")>=0}function ft(){return!1}function Qe(){return!ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xe(){return"object"==typeof indexedDB}function Ie(){return new Promise((J,z)=>{try{let ne=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(ye);$.onsuccess=()=>{$.result.close(),ne||self.indexedDB.deleteDatabase(ye),J(!0)},$.onupgradeneeded=()=>{ne=!1},$.onerror=()=>{var H;z((null===(H=$.error)||void 0===H?void 0:H.message)||"")}}catch(ne){z(ne)}})}function je(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Se extends Error{constructor(z,ne,ye){super(ne),this.code=z,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(z,ne,ye){this.service=z,this.serviceName=ne,this.errors=ye}create(z,...ne){const ye=ne[0]||{},$=`${this.service}/${z}`,H=this.errors[z],Z=H?function(J,z){return J.replace(Qt,(ne,ye)=>{const $=z[ye];return null!=$?String($):`<${ye}?>`})}(H,ye):"Error";return new Se($,`${this.serviceName}: ${Z} (${$}).`,ye)}}const Qt=/\{\$([^}]+)}/g;function xn(J){return JSON.parse(J)}function Gt(J){return JSON.stringify(J)}const yt=function(J){let z={},ne={},ye={},$="";try{const H=J.split(".");z=xn(U(H[0])||""),ne=xn(U(H[1])||""),$=H[2],ye=ne.d||{},delete ne.d}catch(H){}return{header:z,claims:ne,data:ye,signature:$}},zn=function(J){const ne=yt(J).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},wt=function(J){const z=yt(J).claims;return"object"==typeof z&&!0===z.admin};function Xn(J,z){return Object.prototype.hasOwnProperty.call(J,z)}function cn(J,z){if(Object.prototype.hasOwnProperty.call(J,z))return J[z]}function rn(J){for(const z in J)if(Object.prototype.hasOwnProperty.call(J,z))return!1;return!0}function dn(J,z,ne){const ye={};for(const $ in J)Object.prototype.hasOwnProperty.call(J,$)&&(ye[$]=z.call(ne,J[$],$,J));return ye}function Ln(J,z){if(J===z)return!0;const ne=Object.keys(J),ye=Object.keys(z);for(const $ of ne){if(!ye.includes($))return!1;const H=J[$],Z=z[$];if(Vi(H)&&Vi(Z)){if(!Ln(H,Z))return!1}else if(H!==Z)return!1}for(const $ of ye)if(!ne.includes($))return!1;return!0}function Vi(J){return null!==J&&"object"==typeof J}function ri(J){const z=[];for(const[ne,ye]of Object.entries(J))Array.isArray(ye)?ye.forEach($=>{z.push(encodeURIComponent(ne)+"="+encodeURIComponent($))}):z.push(encodeURIComponent(ne)+"="+encodeURIComponent(ye));return z.length?"&"+z.join("&"):""}function dr(J){const z={};return J.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[$,H]=ye.split("=");z[decodeURIComponent($)]=decodeURIComponent(H)}}),z}function Fe(J){const z=J.indexOf("?");if(!z)return"";const ne=J.indexOf("#",z);return J.substring(z,ne>0?ne:void 0)}class hr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,ne){ne||(ne=0);const ye=this.W_;if("string"==typeof z)for(let Ye=0;Ye<16;Ye++)ye[Ye]=z.charCodeAt(ne)<<24|z.charCodeAt(ne+1)<<16|z.charCodeAt(ne+2)<<8|z.charCodeAt(ne+3),ne+=4;else for(let Ye=0;Ye<16;Ye++)ye[Ye]=z[ne]<<24|z[ne+1]<<16|z[ne+2]<<8|z[ne+3],ne+=4;for(let Ye=16;Ye<80;Ye++){const Zt=ye[Ye-3]^ye[Ye-8]^ye[Ye-14]^ye[Ye-16];ye[Ye]=4294967295&(Zt<<1|Zt>>>31)}let pt,Ct,$=this.chain_[0],H=this.chain_[1],Z=this.chain_[2],ge=this.chain_[3],Ue=this.chain_[4];for(let Ye=0;Ye<80;Ye++){Ye<40?Ye<20?(pt=ge^H&(Z^ge),Ct=1518500249):(pt=H^Z^ge,Ct=1859775393):Ye<60?(pt=H&Z|ge&(H|Z),Ct=2400959708):(pt=H^Z^ge,Ct=3395469782);const Zt=($<<5|$>>>27)+pt+Ue+Ct+ye[Ye]&4294967295;Ue=ge,ge=Z,Z=4294967295&(H<<30|H>>>2),H=$,$=Zt}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+H&4294967295,this.chain_[2]=this.chain_[2]+Z&4294967295,this.chain_[3]=this.chain_[3]+ge&4294967295,this.chain_[4]=this.chain_[4]+Ue&4294967295}update(z,ne){if(null==z)return;void 0===ne&&(ne=z.length);const ye=ne-this.blockSize;let $=0;const H=this.buf_;let Z=this.inbuf_;for(;$<ne;){if(0===Z)for(;$<=ye;)this.compress_(z,$),$+=this.blockSize;if("string"==typeof z){for(;$<ne;)if(H[Z]=z.charCodeAt($),++Z,++$,Z===this.blockSize){this.compress_(H),Z=0;break}}else for(;$<ne;)if(H[Z]=z[$],++Z,++$,Z===this.blockSize){this.compress_(H),Z=0;break}}this.inbuf_=Z,this.total_+=ne}digest(){const z=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&ne,ne/=256;this.compress_(this.buf_);let ye=0;for(let $=0;$<5;$++)for(let H=24;H>=0;H-=8)z[ye]=this.chain_[$]>>H&255,++ye;return z}}function sr(J,z){const ne=new at(J,z);return ne.subscribe.bind(ne)}class at{constructor(z,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{z(this)}).catch(ye=>{this.error(ye)})}next(z){this.forEachObserver(ne=>{ne.next(z)})}error(z){this.forEachObserver(ne=>{ne.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,ne,ye){let $;if(void 0===z&&void 0===ne&&void 0===ye)throw new Error("Missing Observer.");$=function(J,z){if("object"!=typeof J||null===J)return!1;for(const ne of["next","error","complete"])if(ne in J&&"function"==typeof J[ne])return!0;return!1}(z)?z:{next:z,error:ne,complete:ye},void 0===$.next&&($.next=jn),void 0===$.error&&($.error=jn),void 0===$.complete&&($.complete=jn);const H=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Z){}}),this.observers.push($),H}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,z)}sendOne(z,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{ne(this.observers[z])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jn(){}const ii=function(J,z,ne,ye){let $;if(ye<z?$="at least "+z:ye>ne&&($=0===ne?"none":"no more than "+ne),$)throw new Error(J+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+$+".")};function Br(J,z){return`${J} failed: ${z} argument `}function Vn(J,z,ne,ye){if((!ye||ne)&&"function"!=typeof ne)throw new Error(Br(J,z)+"must be a valid function.")}function Ca(J,z,ne,ye){if((!ye||ne)&&("object"!=typeof ne||null===ne))throw new Error(Br(J,z)+"must be a valid context object.")}const _n=function(J){const z=[];let ne=0;for(let ye=0;ye<J.length;ye++){let $=J.charCodeAt(ye);if($>=55296&&$<=56319){const H=$-55296;ye++,F(ye<J.length,"Surrogate pair missing trail surrogate."),$=65536+(H<<10)+(J.charCodeAt(ye)-56320)}$<128?z[ne++]=$:$<2048?(z[ne++]=$>>6|192,z[ne++]=63&$|128):$<65536?(z[ne++]=$>>12|224,z[ne++]=$>>6&63|128,z[ne++]=63&$|128):(z[ne++]=$>>18|240,z[ne++]=$>>12&63|128,z[ne++]=$>>6&63|128,z[ne++]=63&$|128)}return z},Ze=function(J){let z=0;for(let ne=0;ne<J.length;ne++){const ye=J.charCodeAt(ne);ye<128?z++:ye<2048?z+=2:ye>=55296&&ye<=56319?(z+=4,ne++):z+=3}return z};function It(J,z=1e3,ne=2){const ye=z*Math.pow(ne,J),$=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+$)}function sn(J){return J&&J._delegate?J._delegate:J}function bt(J,z){return new Promise((ne,ye)=>{J.onsuccess=$=>{ne($.target.result)},J.onerror=$=>{var H;ye(`${z}: ${null===(H=$.target.error)||void 0===H?void 0:H.message}`)}})}class qt{constructor(z){this._db=z,this.objectStoreNames=this._db.objectStoreNames}transaction(z,ne="readonly"){return new We(this._db.transaction.call(this._db,z,ne))}createObjectStore(z,ne){return new Ne(this._db.createObjectStore(z,ne))}close(){this._db.close()}}class We{constructor(z){this._transaction=z,this.complete=new Promise((ne,ye)=>{this._transaction.oncomplete=function(){ne()},this._transaction.onerror=()=>{ye(this._transaction.error)},this._transaction.onabort=()=>{ye(this._transaction.error)}})}objectStore(z){return new Ne(this._transaction.objectStore(z))}}class Ne{constructor(z){this._store=z}index(z){return new lt(this._store.index(z))}createIndex(z,ne,ye){return new lt(this._store.createIndex(z,ne,ye))}get(z){return bt(this._store.get(z),"Error reading from IndexedDB")}put(z,ne){return bt(this._store.put(z,ne),"Error writing to IndexedDB")}delete(z){return bt(this._store.delete(z),"Error deleting from IndexedDB")}clear(){return bt(this._store.clear(),"Error clearing IndexedDB object store")}}class lt{constructor(z){this._index=z}get(z){return bt(this._index.get(z),"Error reading from IndexedDB")}}function Et(J,z,ne){return new Promise((ye,$)=>{try{const H=indexedDB.open(J,z);H.onsuccess=Z=>{ye(new qt(Z.target.result))},H.onerror=Z=>{var ge;$(`Error opening indexedDB: ${null===(ge=Z.target.error)||void 0===ge?void 0:ge.message}`)},H.onupgradeneeded=Z=>{ne(new qt(H.result),Z.oldVersion,Z.newVersion,new We(H.transaction))}}catch(H){$(`Error opening indexedDB: ${H.message}`)}})}function Pt(J){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,a.Z)(function*(J){return new Promise((z,ne)=>{try{const ye=indexedDB.deleteDatabase(J);ye.onsuccess=()=>{z()},ye.onerror=$=>{var H;ne(`Error deleting indexedDB database "${J}": ${null===(H=$.target.error)||void 0===H?void 0:H.message}`)}}catch(ye){ne(`Error deleting indexedDB database "${J}": ${ye.message}`)}})})).apply(this,arguments)}},8873:function(ot){ot.exports=function(){"use strict";var B=6e4,a=36e5,q="millisecond",F="second",se="minute",ae="hour",ee="day",de="week",X="month",Q="quarter",U="year",Y="date",j="Invalid Date",le=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Re=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ae={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Ce=function(Qe,xe,Ie){var je=String(Qe);return!je||je.length>=xe?Qe:""+Array(xe+1-je.length).join(Ie)+Qe},Ve={s:Ce,z:function(Qe){var xe=-Qe.utcOffset(),Ie=Math.abs(xe),je=Math.floor(Ie/60),ve=Ie%60;return(xe<=0?"+":"-")+Ce(je,2,"0")+":"+Ce(ve,2,"0")},m:function Qe(xe,Ie){if(xe.date()<Ie.date())return-Qe(Ie,xe);var je=12*(Ie.year()-xe.year())+(Ie.month()-xe.month()),ve=xe.clone().add(je,X),Ge=Ie-ve<0,Se=xe.clone().add(je+(Ge?-1:1),X);return+(-(je+(Ie-ve)/(Ge?ve-Se:Se-ve))||0)},a:function(Qe){return Qe<0?Math.ceil(Qe)||0:Math.floor(Qe)},p:function(Qe){return{M:X,y:U,w:de,d:ee,D:Y,h:ae,m:se,s:F,ms:q,Q}[Qe]||String(Qe||"").toLowerCase().replace(/s$/,"")},u:function(Qe){return void 0===Qe}},ce="en",pe={};pe[ce]=Ae;var ke=function(Qe){return Qe instanceof Dt},Je=function Qe(xe,Ie,je){var ve;if(!xe)return ce;if("string"==typeof xe){var Ge=xe.toLowerCase();pe[Ge]&&(ve=Ge),Ie&&(pe[Ge]=Ie,ve=Ge);var Se=xe.split("-");if(!ve&&Se.length>1)return Qe(Se[0])}else{var Mt=xe.name;pe[Mt]=xe,ve=Mt}return!je&&ve&&(ce=ve),ve||!je&&ce},mt=function(Qe,xe){if(ke(Qe))return Qe.clone();var Ie="object"==typeof xe?xe:{};return Ie.date=Qe,Ie.args=arguments,new Dt(Ie)},rt=Ve;rt.l=Je,rt.i=ke,rt.w=function(Qe,xe){return mt(Qe,{locale:xe.$L,utc:xe.$u,x:xe.$x,$offset:xe.$offset})};var Dt=function(){function Qe(Ie){this.$L=Je(Ie.locale,null,!0),this.parse(Ie)}var xe=Qe.prototype;return xe.parse=function(Ie){this.$d=function(je){var ve=je.date,Ge=je.utc;if(null===ve)return new Date(NaN);if(rt.u(ve))return new Date;if(ve instanceof Date)return new Date(ve);if("string"==typeof ve&&!/Z$/i.test(ve)){var Se=ve.match(le);if(Se){var Mt=Se[2]-1||0,gn=(Se[7]||"0").substring(0,3);return Ge?new Date(Date.UTC(Se[1],Mt,Se[3]||1,Se[4]||0,Se[5]||0,Se[6]||0,gn)):new Date(Se[1],Mt,Se[3]||1,Se[4]||0,Se[5]||0,Se[6]||0,gn)}}return new Date(ve)}(Ie),this.$x=Ie.x||{},this.init()},xe.init=function(){var Ie=this.$d;this.$y=Ie.getFullYear(),this.$M=Ie.getMonth(),this.$D=Ie.getDate(),this.$W=Ie.getDay(),this.$H=Ie.getHours(),this.$m=Ie.getMinutes(),this.$s=Ie.getSeconds(),this.$ms=Ie.getMilliseconds()},xe.$utils=function(){return rt},xe.isValid=function(){return this.$d.toString()!==j},xe.isSame=function(Ie,je){var ve=mt(Ie);return this.startOf(je)<=ve&&ve<=this.endOf(je)},xe.isAfter=function(Ie,je){return mt(Ie)<this.startOf(je)},xe.isBefore=function(Ie,je){return this.endOf(je)<mt(Ie)},xe.$g=function(Ie,je,ve){return rt.u(Ie)?this[je]:this.set(ve,Ie)},xe.unix=function(){return Math.floor(this.valueOf()/1e3)},xe.valueOf=function(){return this.$d.getTime()},xe.startOf=function(Ie,je){var ve=this,Ge=!!rt.u(je)||je,Se=rt.p(Ie),Mt=function(zn,wt){var Xn=rt.w(ve.$u?Date.UTC(ve.$y,wt,zn):new Date(ve.$y,wt,zn),ve);return Ge?Xn:Xn.endOf(ee)},gn=function(zn,wt){return rt.w(ve.toDate()[zn].apply(ve.toDate("s"),(Ge?[0,0,0,0]:[23,59,59,999]).slice(wt)),ve)},Qt=this.$W,xn=this.$M,Gt=this.$D,yt="set"+(this.$u?"UTC":"");switch(Se){case U:return Ge?Mt(1,0):Mt(31,11);case X:return Ge?Mt(1,xn):Mt(0,xn+1);case de:var wr=this.$locale().weekStart||0,gi=(Qt<wr?Qt+7:Qt)-wr;return Mt(Ge?Gt-gi:Gt+(6-gi),xn);case ee:case Y:return gn(yt+"Hours",0);case ae:return gn(yt+"Minutes",1);case se:return gn(yt+"Seconds",2);case F:return gn(yt+"Milliseconds",3);default:return this.clone()}},xe.endOf=function(Ie){return this.startOf(Ie,!1)},xe.$set=function(Ie,je){var ve,Ge=rt.p(Ie),Se="set"+(this.$u?"UTC":""),Mt=(ve={},ve[ee]=Se+"Date",ve[Y]=Se+"Date",ve[X]=Se+"Month",ve[U]=Se+"FullYear",ve[ae]=Se+"Hours",ve[se]=Se+"Minutes",ve[F]=Se+"Seconds",ve[q]=Se+"Milliseconds",ve)[Ge],gn=Ge===ee?this.$D+(je-this.$W):je;if(Ge===X||Ge===U){var Qt=this.clone().set(Y,1);Qt.$d[Mt](gn),Qt.init(),this.$d=Qt.set(Y,Math.min(this.$D,Qt.daysInMonth())).$d}else Mt&&this.$d[Mt](gn);return this.init(),this},xe.set=function(Ie,je){return this.clone().$set(Ie,je)},xe.get=function(Ie){return this[rt.p(Ie)]()},xe.add=function(Ie,je){var ve,Ge=this;Ie=Number(Ie);var Se=rt.p(je),Mt=function(xn){var Gt=mt(Ge);return rt.w(Gt.date(Gt.date()+Math.round(xn*Ie)),Ge)};if(Se===X)return this.set(X,this.$M+Ie);if(Se===U)return this.set(U,this.$y+Ie);if(Se===ee)return Mt(1);if(Se===de)return Mt(7);var gn=(ve={},ve[se]=B,ve[ae]=a,ve[F]=1e3,ve)[Se]||1,Qt=this.$d.getTime()+Ie*gn;return rt.w(Qt,this)},xe.subtract=function(Ie,je){return this.add(-1*Ie,je)},xe.format=function(Ie){var je=this,ve=this.$locale();if(!this.isValid())return ve.invalidDate||j;var Ge=Ie||"YYYY-MM-DDTHH:mm:ssZ",Se=rt.z(this),Mt=this.$H,gn=this.$m,Qt=this.$M,xn=ve.weekdays,Gt=ve.months,yt=function(wt,Xn,cn,rn){return wt&&(wt[Xn]||wt(je,Ge))||cn[Xn].slice(0,rn)},wr=function(wt){return rt.s(Mt%12||12,wt,"0")},gi=ve.meridiem||function(wt,Xn,cn){var rn=wt<12?"AM":"PM";return cn?rn.toLowerCase():rn},zn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Qt+1,MM:rt.s(Qt+1,2,"0"),MMM:yt(ve.monthsShort,Qt,Gt,3),MMMM:yt(Gt,Qt),D:this.$D,DD:rt.s(this.$D,2,"0"),d:String(this.$W),dd:yt(ve.weekdaysMin,this.$W,xn,2),ddd:yt(ve.weekdaysShort,this.$W,xn,3),dddd:xn[this.$W],H:String(Mt),HH:rt.s(Mt,2,"0"),h:wr(1),hh:wr(2),a:gi(Mt,gn,!0),A:gi(Mt,gn,!1),m:String(gn),mm:rt.s(gn,2,"0"),s:String(this.$s),ss:rt.s(this.$s,2,"0"),SSS:rt.s(this.$ms,3,"0"),Z:Se};return Ge.replace(Re,function(wt,Xn){return Xn||zn[wt]||Se.replace(":","")})},xe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},xe.diff=function(Ie,je,ve){var Ge,Se=rt.p(je),Mt=mt(Ie),gn=(Mt.utcOffset()-this.utcOffset())*B,Qt=this-Mt,xn=rt.m(this,Mt);return xn=(Ge={},Ge[U]=xn/12,Ge[X]=xn,Ge[Q]=xn/3,Ge[de]=(Qt-gn)/6048e5,Ge[ee]=(Qt-gn)/864e5,Ge[ae]=Qt/a,Ge[se]=Qt/B,Ge[F]=Qt/1e3,Ge)[Se]||Qt,ve?xn:rt.a(xn)},xe.daysInMonth=function(){return this.endOf(X).$D},xe.$locale=function(){return pe[this.$L]},xe.locale=function(Ie,je){if(!Ie)return this.$L;var ve=this.clone(),Ge=Je(Ie,je,!0);return Ge&&(ve.$L=Ge),ve},xe.clone=function(){return rt.w(this.$d,this)},xe.toDate=function(){return new Date(this.valueOf())},xe.toJSON=function(){return this.isValid()?this.toISOString():null},xe.toISOString=function(){return this.$d.toISOString()},xe.toString=function(){return this.$d.toUTCString()},Qe}(),ft=Dt.prototype;return mt.prototype=ft,[["$ms",q],["$s",F],["$m",se],["$H",ae],["$W",ee],["$M",X],["$y",U],["$D",Y]].forEach(function(Qe){ft[Qe[1]]=function(xe){return this.$g(xe,Qe[0],Qe[1])}}),mt.extend=function(Qe,xe){return Qe.$i||(Qe(xe,Dt,mt),Qe.$i=!0),mt},mt.locale=Je,mt.isDayjs=ke,mt.unix=function(Qe){return mt(1e3*Qe)},mt.en=pe[ce],mt.Ls=pe,mt.p={},mt}()},4292:function(ot){ot.exports=function(){"use strict";var Te={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},B=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,q=/\d\d?/,F=/\d*[^\s\d-_:/()]+/,se={},ae=function(j){return(j=+j)+(j>68?1900:2e3)},ee=function(j){return function(le){this[j]=+le}},de=[/[+-]\d\d:?(\d\d)?|Z/,function(j){(this.zone||(this.zone={})).offset=function(le){if(!le||"Z"===le)return 0;var Re=le.match(/([+-]|\d\d)/g),Ae=60*Re[1]+(+Re[2]||0);return 0===Ae?0:"+"===Re[0]?-Ae:Ae}(j)}],X=function(j){var le=se[j];return le&&(le.indexOf?le:le.s.concat(le.f))},Q=function(j,le){var Re,Ae=se.meridiem;if(Ae){for(var Ce=1;Ce<=24;Ce+=1)if(j.indexOf(Ae(Ce,0,le))>-1){Re=Ce>12;break}}else Re=j===(le?"pm":"PM");return Re},U={A:[F,function(j){this.afternoon=Q(j,!1)}],a:[F,function(j){this.afternoon=Q(j,!0)}],S:[/\d/,function(j){this.milliseconds=100*+j}],SS:[a,function(j){this.milliseconds=10*+j}],SSS:[/\d{3}/,function(j){this.milliseconds=+j}],s:[q,ee("seconds")],ss:[q,ee("seconds")],m:[q,ee("minutes")],mm:[q,ee("minutes")],H:[q,ee("hours")],h:[q,ee("hours")],HH:[q,ee("hours")],hh:[q,ee("hours")],D:[q,ee("day")],DD:[a,ee("day")],Do:[F,function(j){var le=se.ordinal,Re=j.match(/\d+/);if(this.day=Re[0],le)for(var Ae=1;Ae<=31;Ae+=1)le(Ae).replace(/\[|\]/g,"")===j&&(this.day=Ae)}],M:[q,ee("month")],MM:[a,ee("month")],MMM:[F,function(j){var le=X("months"),Re=(X("monthsShort")||le.map(function(Ae){return Ae.slice(0,3)})).indexOf(j)+1;if(Re<1)throw new Error;this.month=Re%12||Re}],MMMM:[F,function(j){var le=X("months").indexOf(j)+1;if(le<1)throw new Error;this.month=le%12||le}],Y:[/[+-]?\d+/,ee("year")],YY:[a,function(j){this.year=ae(j)}],YYYY:[/\d{4}/,ee("year")],Z:de,ZZ:de};return function(j,le,Re){Re.p.customParseFormat=!0,j&&j.parseTwoDigitYear&&(ae=j.parseTwoDigitYear);var Ae=le.prototype,Ce=Ae.parse;Ae.parse=function(Ve){var ce=Ve.date,pe=Ve.utc,ke=Ve.args;this.$u=pe;var Je=ke[1];if("string"==typeof Je){var mt=!0===ke[2],rt=!0===ke[3],Dt=mt||rt,ft=ke[2];rt&&(ft=ke[2]),se=this.$locale(),!mt&&ft&&(se=Re.Ls[ft]),this.$d=function(je,ve,Ge){try{if(["x","X"].indexOf(ve)>-1)return new Date(("X"===ve?1e3:1)*je);var Se=function(j){var Re;Re=se&&se.formats;for(var Ae=(j=j.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(mt,rt,Dt){var ft=Dt&&Dt.toUpperCase();return rt||Re[Dt]||Te[Dt]||Re[ft].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Qe,xe,Ie){return xe||Ie.slice(1)})})).match(B),Ce=Ae.length,Ve=0;Ve<Ce;Ve+=1){var ce=Ae[Ve],pe=U[ce],Je=pe&&pe[1];Ae[Ve]=Je?{regex:pe&&pe[0],parser:Je}:ce.replace(/^\[|\]$/g,"")}return function(mt){for(var rt={},Dt=0,ft=0;Dt<Ce;Dt+=1){var Qe=Ae[Dt];if("string"==typeof Qe)ft+=Qe.length;else{var xe=Qe.regex,Ie=Qe.parser,je=mt.slice(ft),ve=xe.exec(je)[0];Ie.call(rt,ve),mt=mt.replace(ve,"")}}return function(Ge){var Se=Ge.afternoon;if(void 0!==Se){var Mt=Ge.hours;Se?Mt<12&&(Ge.hours+=12):12===Mt&&(Ge.hours=0),delete Ge.afternoon}}(rt),rt}}(ve)(je),Mt=Se.year,gn=Se.month,Qt=Se.day,xn=Se.hours,Gt=Se.minutes,yt=Se.seconds,wr=Se.milliseconds,gi=Se.zone,zn=new Date,wt=Qt||(Mt||gn?1:zn.getDate()),Xn=Mt||zn.getFullYear(),cn=0;Mt&&!gn||(cn=gn>0?gn-1:zn.getMonth());var rn=xn||0,dn=Gt||0,Ln=yt||0,Vi=wr||0;return gi?new Date(Date.UTC(Xn,cn,wt,rn,dn,Ln,Vi+60*gi.offset*1e3)):Ge?new Date(Date.UTC(Xn,cn,wt,rn,dn,Ln,Vi)):new Date(Xn,cn,wt,rn,dn,Ln,Vi)}catch(ri){return new Date("")}}(ce,Je,pe),this.init(),ft&&!0!==ft&&(this.$L=this.locale(ft).$L),Dt&&ce!=this.format(Je)&&(this.$d=new Date("")),se={}}else if(Je instanceof Array)for(var Qe=Je.length,xe=1;xe<=Qe;xe+=1){ke[1]=Je[xe-1];var Ie=Re.apply(this,ke);if(Ie.isValid()){this.$d=Ie.$d,this.$L=Ie.$L,this.init();break}xe===Qe&&(this.$d=new Date(""))}else Ce.call(this,Ve)}}}()},2329:(ot,Te,B)=>{"use strict";B.d(Te,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=B(8026);(0,a.registerVersion)("firebase","9.6.11","app")},7841:(ot,Te,B)=>{"use strict";B.d(Te,{Z:()=>a.Z});var a=B(3394);a.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(ot,Te,B)=>{"use strict";B.r(Te);var a=B(8239),q=B(3394),F=B(982),se=B(3854),de=(B(8026),B(5422),B(3910));function X(){return window}function Y(){return(Y=(0,a.Z)(function*($,H,Z){var ge;const{BuildInfo:Ue}=X();(0,F.ap)(H.sessionId,"AuthEvent did not contain a session ID");const pt=yield ce(H.sessionId),Ct={};return(0,F.aq)()?Ct.ibi=Ue.packageName:(0,F.ar)()?Ct.apn=Ue.packageName:(0,F.as)($,"operation-not-supported-in-this-environment"),Ue.displayName&&(Ct.appDisplayName=Ue.displayName),Ct.sessionId=pt,(0,F.at)($,Z,H.type,void 0,null!==(ge=H.eventId)&&void 0!==ge?ge:void 0,Ct)})).apply(this,arguments)}function le(){return(le=(0,a.Z)(function*($){const{BuildInfo:H}=X(),Z={};(0,F.aq)()?Z.iosBundleId=H.packageName:(0,F.ar)()?Z.androidPackageName=H.packageName:(0,F.as)($,"operation-not-supported-in-this-environment"),yield(0,F.au)($,Z)})).apply(this,arguments)}function Ce(){return(Ce=(0,a.Z)(function*($,H,Z){const{cordova:ge}=X();let Ue=()=>{};try{yield new Promise((pt,Ct)=>{let Ye=null;function Zt(){var on;pt();const Gn=null===(on=ge.plugins.browsertab)||void 0===on?void 0:on.close;"function"==typeof Gn&&Gn(),"function"==typeof(null==Z?void 0:Z.close)&&Z.close()}function Mn(){Ye||(Ye=window.setTimeout(()=>{Ct((0,F.av)($,"redirect-cancelled-by-user"))},2e3))}function In(){"visible"===(null==document?void 0:document.visibilityState)&&Mn()}H.addPassiveListener(Zt),document.addEventListener("resume",Mn,!1),(0,F.ar)()&&document.addEventListener("visibilitychange",In,!1),Ue=()=>{H.removePassiveListener(Zt),document.removeEventListener("resume",Mn,!1),document.removeEventListener("visibilitychange",In,!1),Ye&&window.clearTimeout(Ye)}})}finally{Ue()}})).apply(this,arguments)}function ce($){return pe.apply(this,arguments)}function pe(){return(pe=(0,a.Z)(function*($){const H=ke($),Z=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(Z)).map(Ue=>Ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ke($){if((0,F.ap)(/[0-9a-zA-Z]+/.test($),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode($);const H=new ArrayBuffer($.length),Z=new Uint8Array(H);for(let ge=0;ge<$.length;ge++)Z[ge]=$.charCodeAt(ge);return Z}class mt extends F.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(H)),super.onEvent(H)}initialized(){var H=this;return(0,a.Z)(function*(){yield H.initPromise})()}}function ft($){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,a.Z)(function*($){const H=yield je()._get(ve($));return H&&(yield je()._remove(ve($))),H})).apply(this,arguments)}function Ie(){const $=[],H="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const ge=Math.floor(Math.random()*H.length);$.push(H.charAt(ge))}return $.join("")}function je(){return(0,F.ax)(F.b)}function ve($){return(0,F.ay)("authEvent",$.config.apiKey,$.name)}function Mt($){if(!(null==$?void 0:$.includes("?")))return{};const[H,...Z]=$.split("?");return(0,se.zd)(Z.join("?"))}function Gt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.av)("no-auth-event")}}function wt(){var $;return(null===($=null==self?void 0:self.location)||void 0===$?void 0:$.protocol)||null}function cn($=(0,se.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()||!$.toLowerCase().match(/iphone|ipad|ipod|android/))}function ri(){try{const $=self.localStorage,H=F.aG();if($)return $.setItem(H,"1"),$.removeItem(H),!function($=(0,se.z$)()){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)||function($=(0,se.z$)()){return/Edge\/\d+/.test($)}($)}()||(0,se.hl)()}catch($){return dr()&&(0,se.hl)()}return!1}function dr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fe(){return("http:"===wt()||"https:"===wt()||(0,se.ru)()||cn())&&!((0,se.b$)()||(0,se.UG)())&&ri()&&!dr()}function hr(){return cn()&&"undefined"!=typeof document}function at(){return(at=(0,a.Z)(function*(){return!!hr()&&new Promise($=>{const H=setTimeout(()=>{$(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(H),$(!0)})})})).apply(this,arguments)}const Yn={LOCAL:"local",NONE:"none",SESSION:"session"},jn=F.aw,ii="persistence";function fr($){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,a.Z)(function*($){yield $._initializationPromise;const H=_n(),Z=F.ay(ii,$.config.apiKey,$.name);H&&H.setItem(Z,$._getPersistence())})).apply(this,arguments)}function _n(){var $;try{return(null===($="undefined"!=typeof window?window:null)||void 0===$?void 0:$.sessionStorage)||null}catch(H){return null}}const Ze=F.aw;class gt{constructor(){this.browserResolver=F.ax(F.k),this.cordovaResolver=F.ax(class{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aA}_initialize(H){var Z=this;return(0,a.Z)(function*(){const ge=H._key();let Ue=Z.eventManagers.get(ge);return Ue||(Ue=new mt(H),Z.eventManagers.set(ge,Ue),Z.attachCallbackListeners(H,Ue)),Ue})()}_openPopup(H){(0,F.as)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,Z,ge,Ue){var pt=this;return(0,a.Z)(function*(){!function($){var H,Z,ge,Ue,pt,Ct,Ye,Zt,Mn,In;const on=X();(0,F.aw)("function"==typeof(null===(H=null==on?void 0:on.universalLinks)||void 0===H?void 0:H.subscribe),$,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aw)(void 0!==(null===(Z=null==on?void 0:on.BuildInfo)||void 0===Z?void 0:Z.packageName),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aw)("function"==typeof(null===(pt=null===(Ue=null===(ge=null==on?void 0:on.cordova)||void 0===ge?void 0:ge.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===pt?void 0:pt.openUrl),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===(Zt=null===(Ye=null===(Ct=null==on?void 0:on.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===Ye?void 0:Ye.browsertab)||void 0===Zt?void 0:Zt.isAvailable),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===(In=null===(Mn=null==on?void 0:on.cordova)||void 0===Mn?void 0:Mn.InAppBrowser)||void 0===In?void 0:In.open),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const Ct=yield pt._initialize(H);yield Ct.initialized(),Ct.resetRedirect(),(0,F.aB)(),yield pt._originValidation(H);const Ye=function($,H,Z=null){return{type:H,eventId:Z,urlResponse:null,sessionId:Ie(),postBody:null,tenantId:$.tenantId,error:(0,F.av)($,"no-auth-event")}}(H,ge,Ue);yield function($,H){return je()._set(ve($),H)}(H,Ye);const Zt=yield function($,H,Z){return Y.apply(this,arguments)}(H,Ye,Z),Mn=yield function($){const{cordova:H}=X();return new Promise(Z=>{H.plugins.browsertab.isAvailable(ge=>{let Ue=null;ge?H.plugins.browsertab.openUrl($):Ue=H.InAppBrowser.open($,(0,F.ao)()?"_blank":"_system","location=yes"),Z(Ue)})})}(Zt);return function($,H,Z){return Ce.apply(this,arguments)}(H,Ct,Mn)})()}_isIframeWebStorageSupported(H,Z){throw new Error("Method not implemented.")}_originValidation(H){const Z=H._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function($){return le.apply(this,arguments)}(H)),this.originValidationPromises[Z]}attachCallbackListeners(H,Z){const{universalLinks:ge,handleOpenURL:Ue,BuildInfo:pt}=X(),Ct=setTimeout((0,a.Z)(function*(){yield ft(H),Z.onEvent(Gt())}),500),Ye=function(){var In=(0,a.Z)(function*(on){clearTimeout(Ct);const Gn=yield ft(H);let ze=null;Gn&&(null==on?void 0:on.url)&&(ze=function($,H){var Z,ge;const Ue=function($){const H=Mt($),Z=H.link?decodeURIComponent(H.link):void 0,ge=Mt(Z).link,Ue=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return Mt(Ue).link||Ue||ge||Z||$}(H);if(Ue.includes("/__/auth/callback")){const pt=Mt(Ue),Ct=pt.firebaseError?function($){try{return JSON.parse($)}catch(H){return null}}(decodeURIComponent(pt.firebaseError)):null,Ye=null===(ge=null===(Z=null==Ct?void 0:Ct.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===ge?void 0:ge[1],Zt=Ye?(0,F.av)(Ye):null;return Zt?{type:$.type,eventId:$.eventId,tenantId:$.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:$.type,eventId:$.eventId,tenantId:$.tenantId,sessionId:$.sessionId,urlResponse:Ue,postBody:null}}return null}(Gn,on.url)),Z.onEvent(ze||Gt())});return function(Gn){return In.apply(this,arguments)}}();void 0!==ge&&"function"==typeof ge.subscribe&&ge.subscribe(null,Ye);const Zt=Ue,Mn=`${pt.packageName.toLowerCase()}://`;X().handleOpenURL=function(){var In=(0,a.Z)(function*(on){if(on.toLowerCase().startsWith(Mn)&&Ye({url:on}),"function"==typeof Zt)try{Zt(on)}catch(Gn){console.error(Gn)}});return function(on){return In.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aA}_initialize(H){var Z=this;return(0,a.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,Z,ge,Ue){var pt=this;return(0,a.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openPopup(H,Z,ge,Ue)})()}_openRedirect(H,Z,ge,Ue){var pt=this;return(0,a.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openRedirect(H,Z,ge,Ue)})()}_isIframeWebStorageSupported(H,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,Z)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return hr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ze(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,a.Z)(function*(){if(H.underlyingResolver)return;const Z=yield function(){return at.apply(this,arguments)}();H.underlyingResolver=Z?H.cordovaResolver:H.browserResolver})()}}function Bi($){return $.unwrap()}function hn($){return Cr($)}function Cr($){const{_tokenResponse:H}=$ instanceof se.ZR?$.customData:$;if(!H)return null;if(!($ instanceof se.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return F.P.credentialFromResult($);const Z=H.providerId;if(!Z||Z===F.o.PASSWORD)return null;let ge;switch(Z){case F.o.GOOGLE:ge=F.N;break;case F.o.FACEBOOK:ge=F.M;break;case F.o.GITHUB:ge=F.Q;break;case F.o.TWITTER:ge=F.V;break;default:const{oauthIdToken:Ue,oauthAccessToken:pt,oauthTokenSecret:Ct,pendingToken:Ye,nonce:Zt}=H;return pt||Ct||Ue||Ye?Ye?Z.startsWith("saml.")?F.aJ._create(Z,Ye):F.I._fromParams({providerId:Z,signInMethod:Z,pendingToken:Ye,idToken:Ue,accessToken:pt}):new F.T(Z).credential({idToken:Ue,accessToken:pt,rawNonce:Zt}):null}return $ instanceof se.ZR?ge.credentialFromError($):ge.credentialFromResult($)}function er($,H){return H.catch(Z=>{throw Z instanceof se.ZR&&function($,H){var Z;const ge=null===(Z=H.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===H.code)H.resolver=new qt($,F.am($,H));else if(ge){const Ue=Cr(H),pt=H;Ue&&(pt.credential=Ue,pt.tenantId=ge.tenantId||void 0,pt.email=ge.email||void 0,pt.phoneNumber=ge.phoneNumber||void 0)}}($,Z),Z}).then(Z=>{const Ue=Z.user;return{operationType:Z.operationType,credential:hn(Z),additionalUserInfo:F.ak(Z),user:We.getOrCreate(Ue)}})}function sn($,H){return bt.apply(this,arguments)}function bt(){return(bt=(0,a.Z)(function*($,H){const Z=yield H;return{verificationId:Z.verificationId,confirm:ge=>er($,Z.confirm(ge))}})).apply(this,arguments)}class qt{constructor(H,Z){this.resolver=Z,this.auth=H.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return er(Bi(this.auth),this.resolver.resolveSignIn(H))}}class We{constructor(H){this._delegate=H,this.multiFactor=F.an(H)}static getOrCreate(H){return We.USER_MAP.has(H)||We.USER_MAP.set(H,new We(H)),We.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var Z=this;return(0,a.Z)(function*(){return er(Z.auth,F.Y(Z._delegate,H))})()}linkWithPhoneNumber(H,Z){var ge=this;return(0,a.Z)(function*(){return sn(ge.auth,F.l(ge._delegate,H,Z))})()}linkWithPopup(H){var Z=this;return(0,a.Z)(function*(){return er(Z.auth,F.d(Z._delegate,H,gt))})()}linkWithRedirect(H){var Z=this;return(0,a.Z)(function*(){return yield fr(F.aC(Z.auth)),F.g(Z._delegate,H,gt)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var Z=this;return(0,a.Z)(function*(){return er(Z.auth,F.Z(Z._delegate,H))})()}reauthenticateWithPhoneNumber(H,Z){return sn(this.auth,F.r(this._delegate,H,Z))}reauthenticateWithPopup(H){return er(this.auth,F.e(this._delegate,H,gt))}reauthenticateWithRedirect(H){var Z=this;return(0,a.Z)(function*(){return yield fr(F.aC(Z.auth)),F.h(Z._delegate,H,gt)})()}sendEmailVerification(H){return F.aa(this._delegate,H)}unlink(H){var Z=this;return(0,a.Z)(function*(){return yield F.aj(Z._delegate,H),Z})()}updateEmail(H){return F.af(this._delegate,H)}updatePassword(H){return F.ag(this._delegate,H)}updatePhoneNumber(H){return F.u(this._delegate,H)}updateProfile(H){return F.ae(this._delegate,H)}verifyBeforeUpdateEmail(H,Z){return F.ab(this._delegate,H,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}We.USER_MAP=new WeakMap;const Ne=F.aw;let lt=(()=>{class ${constructor(Z,ge){if(this.app=Z,ge.isInitialized())return this._delegate=ge.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ue}=Z.options;Ne(Ue,"invalid-api-key",{appName:Z.name}),Ne(Ue,"invalid-api-key",{appName:Z.name});const pt="undefined"!=typeof window?gt:void 0;this._delegate=ge.initialize({options:{persistence:Pt(Ue,Z.name),popupRedirectResolver:pt}}),this._delegate._updateErrorMap(F.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?We.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,ge){F.E(this._delegate,Z,ge)}applyActionCode(Z){return F.a1(this._delegate,Z)}checkActionCode(Z){return F.a2(this._delegate,Z)}confirmPasswordReset(Z,ge){return F.a0(this._delegate,Z,ge)}createUserWithEmailAndPassword(Z,ge){var Ue=this;return(0,a.Z)(function*(){return er(Ue._delegate,F.a4(Ue._delegate,Z,ge))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return F.a9(this._delegate,Z)}isSignInWithEmailLink(Z){return F.a7(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,a.Z)(function*(){Ne(Fe(),Z._delegate,"operation-not-supported-in-this-environment");const ge=yield F.j(Z._delegate,gt);return ge?er(Z._delegate,Promise.resolve(ge)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function($,H){(0,F.aC)($)._logFramework(H)}(this._delegate,Z)}onAuthStateChanged(Z,ge,Ue){const{next:pt,error:Ct,complete:Ye}=Et(Z,ge,Ue);return this._delegate.onAuthStateChanged(pt,Ct,Ye)}onIdTokenChanged(Z,ge,Ue){const{next:pt,error:Ct,complete:Ye}=Et(Z,ge,Ue);return this._delegate.onIdTokenChanged(pt,Ct,Ye)}sendSignInLinkToEmail(Z,ge){return F.a6(this._delegate,Z,ge)}sendPasswordResetEmail(Z,ge){return F.$(this._delegate,Z,ge||void 0)}setPersistence(Z){var ge=this;return(0,a.Z)(function*(){let Ue;switch(function($,H){jn(Object.values(Yn).includes(H),$,"invalid-persistence-type"),(0,se.b$)()?jn(H!==Yn.SESSION,$,"unsupported-persistence-type"):(0,se.UG)()?jn(H===Yn.NONE,$,"unsupported-persistence-type"):dr()?jn(H===Yn.NONE||H===Yn.LOCAL&&(0,se.hl)(),$,"unsupported-persistence-type"):jn(H===Yn.NONE||ri(),$,"unsupported-persistence-type")}(ge._delegate,Z),Z){case Yn.SESSION:Ue=F.a;break;case Yn.LOCAL:Ue=(yield F.ax(F.i)._isAvailable())?F.i:F.b;break;case Yn.NONE:Ue=F.K;break;default:return F.as("argument-error",{appName:ge._delegate.name})}return ge._delegate.setPersistence(Ue)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return er(this._delegate,F.W(this._delegate))}signInWithCredential(Z){return er(this._delegate,F.X(this._delegate,Z))}signInWithCustomToken(Z){return er(this._delegate,F._(this._delegate,Z))}signInWithEmailAndPassword(Z,ge){return er(this._delegate,F.a5(this._delegate,Z,ge))}signInWithEmailLink(Z,ge){return er(this._delegate,F.a8(this._delegate,Z,ge))}signInWithPhoneNumber(Z,ge){return sn(this._delegate,F.s(this._delegate,Z,ge))}signInWithPopup(Z){var ge=this;return(0,a.Z)(function*(){return Ne(Fe(),ge._delegate,"operation-not-supported-in-this-environment"),er(ge._delegate,F.c(ge._delegate,Z,gt))})()}signInWithRedirect(Z){var ge=this;return(0,a.Z)(function*(){return Ne(Fe(),ge._delegate,"operation-not-supported-in-this-environment"),yield fr(ge._delegate),F.f(ge._delegate,Z,gt)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return F.a3(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return $.Persistence=Yn,$})();function Et($,H,Z){let ge=$;"function"!=typeof $&&({next:ge,error:H,complete:Z}=$);const Ue=ge;return{next:Ct=>Ue(Ct&&We.getOrCreate(Ct)),error:H,complete:Z}}function Pt($,H){const Z=function($,H){const Z=_n();if(!Z)return[];const ge=F.ay(ii,$,H);switch(Z.getItem(ge)){case Yn.NONE:return[F.K];case Yn.LOCAL:return[F.i,F.a];case Yn.SESSION:return[F.a];default:return[]}}($,H);if("undefined"!=typeof self&&!Z.includes(F.i)&&Z.push(F.i),"undefined"!=typeof window)for(const ge of[F.b,F.a])Z.includes(ge)||Z.push(ge);return Z.includes(F.K)||Z.push(F.K),Z}class Xt{constructor(){this.providerId="phone",this._delegate=new F.P(Bi(q.Z.auth()))}static credential(H,Z){return F.P.credential(H,Z)}verifyPhoneNumber(H,Z){return this._delegate.verifyPhoneNumber(H,Z)}unwrap(){return this._delegate}}Xt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,Xt.PROVIDER_ID=F.P.PROVIDER_ID;const J=F.aw;var $;($=q.Z).INTERNAL.registerComponent(new de.wA("auth-compat",H=>{const Z=H.getProvider("app-compat").getImmediate(),ge=H.getProvider("auth");return new lt(Z,ge)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.L,FacebookAuthProvider:F.M,GithubAuthProvider:F.Q,GoogleAuthProvider:F.N,OAuthProvider:F.T,SAMLAuthProvider:F.U,PhoneAuthProvider:Xt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:class{constructor(H,Z,ge=q.Z.app()){var Ue;J(null===(Ue=ge.options)||void 0===Ue?void 0:Ue.apiKey,"invalid-api-key",{appName:ge.name}),this._delegate=new F.R(H,Z,ge.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:F.V,Auth:lt,AuthCredential:F.G,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$.registerVersion("@firebase/auth-compat","0.2.12")},1593:(ot,Te,B)=>{"use strict";B.d(Te,{P:()=>de});var a=B(9193),q=B(5917),F=B(7574);class de{constructor(Q,U,Y){this.kind=Q,this.value=U,this.error=Y,this.hasValue="N"===Q}observe(Q){switch(this.kind){case"N":return Q.next&&Q.next(this.value);case"E":return Q.error&&Q.error(this.error);case"C":return Q.complete&&Q.complete()}}do(Q,U,Y){switch(this.kind){case"N":return Q&&Q(this.value);case"E":return U&&U(this.error);case"C":return Y&&Y()}}accept(Q,U,Y){return Q&&"function"==typeof Q.next?this.observe(Q):this.do(Q,U,Y)}toObservable(){switch(this.kind){case"N":return(0,q.of)(this.value);case"E":return X=this.error,new F.y(U=>U.error(X));case"C":return(0,a.c)()}var X;throw new Error("unexpected notification kind value")}static createNext(Q){return void 0!==Q?new de("N",Q):de.undefinedValueNotification}static createError(Q){return new de("E",void 0,Q)}static createComplete(){return de.completeNotification}}de.completeNotification=new de("C"),de.undefinedValueNotification=new de("N",void 0)},7574:(ot,Te,B)=>{"use strict";B.d(Te,{y:()=>Y});var a=B(7393),F=B(9181),se=B(6490),ee=B(6554),de=B(4487);var U=B(2494);let Y=(()=>{class le{constructor(Ae){this._isScalar=!1,Ae&&(this._subscribe=Ae)}lift(Ae){const Ce=new le;return Ce.source=this,Ce.operator=Ae,Ce}subscribe(Ae,Ce,Ve){const{operator:ce}=this,pe=function(le,Re,Ae){if(le){if(le instanceof a.L)return le;if(le[F.b])return le[F.b]()}return le||Re||Ae?new a.L(le,Re,Ae):new a.L(se.c)}(Ae,Ce,Ve);if(pe.add(ce?ce.call(pe,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!pe.syncErrorThrowable?this._subscribe(pe):this._trySubscribe(pe)),U.v.useDeprecatedSynchronousErrorHandling&&pe.syncErrorThrowable&&(pe.syncErrorThrowable=!1,pe.syncErrorThrown))throw pe.syncErrorValue;return pe}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Ce){U.v.useDeprecatedSynchronousErrorHandling&&(Ae.syncErrorThrown=!0,Ae.syncErrorValue=Ce),function(le){for(;le;){const{closed:Re,destination:Ae,isStopped:Ce}=le;if(Re||Ce)return!1;le=Ae&&Ae instanceof a.L?Ae:null}return!0}(Ae)?Ae.error(Ce):console.warn(Ce)}}forEach(Ae,Ce){return new(Ce=j(Ce))((Ve,ce)=>{let pe;pe=this.subscribe(ke=>{try{Ae(ke)}catch(Je){ce(Je),pe&&pe.unsubscribe()}},ce,Ve)})}_subscribe(Ae){const{source:Ce}=this;return Ce&&Ce.subscribe(Ae)}[ee.L](){return this}pipe(...Ae){return 0===Ae.length?this:function(le){return 0===le.length?de.y:1===le.length?le[0]:function(Ae){return le.reduce((Ce,Ve)=>Ve(Ce),Ae)}}(Ae)(this)}toPromise(Ae){return new(Ae=j(Ae))((Ce,Ve)=>{let ce;this.subscribe(pe=>ce=pe,pe=>Ve(pe),()=>Ce(ce))})}}return le.create=Re=>new le(Re),le})();function j(le){if(le||(le=U.v.Promise||Promise),!le)throw new Error("no Promise impl found");return le}},6490:(ot,Te,B)=>{"use strict";B.d(Te,{c:()=>F});var a=B(2494),q=B(4449);const F={closed:!0,next(se){},error(se){if(a.v.useDeprecatedSynchronousErrorHandling)throw se;(0,q.z)(se)},complete(){}}},9765:(ot,Te,B)=>{"use strict";B.d(Te,{Yc:()=>de,xQ:()=>X});var a=B(7574),q=B(7393),F=B(5319),se=B(7971),ae=B(8858),ee=B(9181);class de extends q.L{constructor(Y){super(Y),this.destination=Y}}let X=(()=>{class U extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new de(this)}lift(j){const le=new Q(this,this);return le.operator=j,le}next(j){if(this.closed)throw new se.N;if(!this.isStopped){const{observers:le}=this,Re=le.length,Ae=le.slice();for(let Ce=0;Ce<Re;Ce++)Ae[Ce].next(j)}}error(j){if(this.closed)throw new se.N;this.hasError=!0,this.thrownError=j,this.isStopped=!0;const{observers:le}=this,Re=le.length,Ae=le.slice();for(let Ce=0;Ce<Re;Ce++)Ae[Ce].error(j);this.observers.length=0}complete(){if(this.closed)throw new se.N;this.isStopped=!0;const{observers:j}=this,le=j.length,Re=j.slice();for(let Ae=0;Ae<le;Ae++)Re[Ae].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(j){if(this.closed)throw new se.N;return super._trySubscribe(j)}_subscribe(j){if(this.closed)throw new se.N;return this.hasError?(j.error(this.thrownError),F.w.EMPTY):this.isStopped?(j.complete(),F.w.EMPTY):(this.observers.push(j),new ae.W(this,j))}asObservable(){const j=new a.y;return j.source=this,j}}return U.create=(Y,j)=>new Q(Y,j),U})();class Q extends X{constructor(Y,j){super(),this.destination=Y,this.source=j}next(Y){const{destination:j}=this;j&&j.next&&j.next(Y)}error(Y){const{destination:j}=this;j&&j.error&&this.destination.error(Y)}complete(){const{destination:Y}=this;Y&&Y.complete&&this.destination.complete()}_subscribe(Y){const{source:j}=this;return j?this.source.subscribe(Y):F.w.EMPTY}}},8858:(ot,Te,B)=>{"use strict";B.d(Te,{W:()=>q});var a=B(5319);class q extends a.w{constructor(se,ae){super(),this.subject=se,this.subscriber=ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const se=this.subject,ae=se.observers;if(this.subject=null,!ae||0===ae.length||se.isStopped||se.closed)return;const ee=ae.indexOf(this.subscriber);-1!==ee&&ae.splice(ee,1)}}},7393:(ot,Te,B)=>{"use strict";B.d(Te,{L:()=>de});var a=B(9105),q=B(6490),F=B(5319),se=B(9181),ae=B(2494),ee=B(4449);class de extends F.w{constructor(U,Y,j){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=q.c;break;case 1:if(!U){this.destination=q.c;break}if("object"==typeof U){U instanceof de?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new X(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new X(this,U,Y,j)}}[se.b](){return this}static create(U,Y,j){const le=new de(U,Y,j);return le.syncErrorThrowable=!1,le}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class X extends de{constructor(U,Y,j,le){super(),this._parentSubscriber=U;let Re,Ae=this;(0,a.m)(Y)?Re=Y:Y&&(Re=Y.next,j=Y.error,le=Y.complete,Y!==q.c&&(Ae=Object.create(Y),(0,a.m)(Ae.unsubscribe)&&this.add(Ae.unsubscribe.bind(Ae)),Ae.unsubscribe=this.unsubscribe.bind(this))),this._context=Ae,this._next=Re,this._error=j,this._complete=le}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:Y}=this;ae.v.useDeprecatedSynchronousErrorHandling&&Y.syncErrorThrowable?this.__tryOrSetError(Y,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:Y}=this,{useDeprecatedSynchronousErrorHandling:j}=ae.v;if(this._error)j&&Y.syncErrorThrowable?(this.__tryOrSetError(Y,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(Y.syncErrorThrowable)j?(Y.syncErrorValue=U,Y.syncErrorThrown=!0):(0,ee.z)(U),this.unsubscribe();else{if(this.unsubscribe(),j)throw U;(0,ee.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const Y=()=>this._complete.call(this._context);ae.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,Y),this.unsubscribe()):(this.__tryOrUnsub(Y),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,Y){try{U.call(this._context,Y)}catch(j){if(this.unsubscribe(),ae.v.useDeprecatedSynchronousErrorHandling)throw j;(0,ee.z)(j)}}__tryOrSetError(U,Y,j){if(!ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Y.call(this._context,j)}catch(le){return ae.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=le,U.syncErrorThrown=!0,!0):((0,ee.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(ot,Te,B)=>{"use strict";B.d(Te,{w:()=>ee});var a=B(9796),q=B(1555),F=B(9105);const ae=(()=>{function X(Q){return Error.call(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((U,Y)=>`${Y+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q,this}return X.prototype=Object.create(Error.prototype),X})();class ee{constructor(Q){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Q&&(this._ctorUnsubscribe=!0,this._unsubscribe=Q)}unsubscribe(){let Q;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:Y,_unsubscribe:j,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof ee)U.remove(this);else if(null!==U)for(let Re=0;Re<U.length;++Re)U[Re].remove(this);if((0,F.m)(j)){Y&&(this._unsubscribe=void 0);try{j.call(this)}catch(Re){Q=Re instanceof ae?de(Re.errors):[Re]}}if((0,a.k)(le)){let Re=-1,Ae=le.length;for(;++Re<Ae;){const Ce=le[Re];if((0,q.K)(Ce))try{Ce.unsubscribe()}catch(Ve){Q=Q||[],Ve instanceof ae?Q=Q.concat(de(Ve.errors)):Q.push(Ve)}}}if(Q)throw new ae(Q)}add(Q){let U=Q;if(!Q)return ee.EMPTY;switch(typeof Q){case"function":U=new ee(Q);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof ee)){const le=U;U=new ee,U._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+Q+" added to Subscription.")}let{_parentOrParents:Y}=U;if(null===Y)U._parentOrParents=this;else if(Y instanceof ee){if(Y===this)return U;U._parentOrParents=[Y,this]}else{if(-1!==Y.indexOf(this))return U;Y.push(this)}const j=this._subscriptions;return null===j?this._subscriptions=[U]:j.push(U),U}remove(Q){const U=this._subscriptions;if(U){const Y=U.indexOf(Q);-1!==Y&&U.splice(Y,1)}}}var X;function de(X){return X.reduce((Q,U)=>Q.concat(U instanceof ae?U.errors:U),[])}ee.EMPTY=((X=new ee).closed=!0,X)},2494:(ot,Te,B)=>{"use strict";B.d(Te,{v:()=>q});let a=!1;const q={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const se=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+se.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=F},get useDeprecatedSynchronousErrorHandling(){return a}}},5345:(ot,Te,B)=>{"use strict";B.d(Te,{IY:()=>se,Ds:()=>ee,ft:()=>X});var a=B(7393),q=B(7574),F=B(7444);class se extends a.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends a.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function X(Q,U){if(U.closed)return;if(Q instanceof q.y)return Q.subscribe(U);let Y;try{Y=(0,F.s)(Q)(U)}catch(j){U.error(j)}return Y}},2441:(ot,Te,B)=>{"use strict";B.d(Te,{c:()=>ae,N:()=>ee});var a=B(9765),q=B(7574),F=B(5319),se=B(1307);class ae extends q.y{constructor(Y,j){super(),this.source=Y,this.subjectFactory=j,this._refCount=0,this._isComplete=!1}_subscribe(Y){return this.getSubject().subscribe(Y)}getSubject(){const Y=this._subject;return(!Y||Y.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Y=this._connection;return Y||(this._isComplete=!1,Y=this._connection=new F.w,Y.add(this.source.subscribe(new de(this.getSubject(),this))),Y.closed&&(this._connection=null,Y=F.w.EMPTY)),Y}refCount(){return(0,se.x)()(this)}}const ee=(()=>{const U=ae.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class de extends a.Yc{constructor(Y,j){super(Y),this.connectable=j}_error(Y){this._unsubscribe(),super._error(Y)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Y=this.connectable;if(Y){this.connectable=null;const j=Y._connection;Y._refCount=0,Y._subject=null,Y._connection=null,j&&j.unsubscribe()}}}},9193:(ot,Te,B)=>{"use strict";B.d(Te,{E:()=>q,c:()=>F});var a=B(7574);const q=new a.y(ae=>ae.complete());function F(ae){return ae?function(ae){return new a.y(ee=>ae.schedule(()=>ee.complete()))}(ae):q}},4402:(ot,Te,B)=>{"use strict";B.d(Te,{D:()=>Ae});var a=B(7574),q=B(7444),F=B(5319),se=B(6554),de=B(4087),X=B(377),Y=B(4072),j=B(9489);function Ae(Ce,Ve){return Ve?function(Ce,Ve){if(null!=Ce){if(function(Ce){return Ce&&"function"==typeof Ce[se.L]}(Ce))return function(Ce,Ve){return new a.y(ce=>{const pe=new F.w;return pe.add(Ve.schedule(()=>{const ke=Ce[se.L]();pe.add(ke.subscribe({next(Je){pe.add(Ve.schedule(()=>ce.next(Je)))},error(Je){pe.add(Ve.schedule(()=>ce.error(Je)))},complete(){pe.add(Ve.schedule(()=>ce.complete()))}}))})),pe})}(Ce,Ve);if((0,Y.t)(Ce))return function(Ce,Ve){return new a.y(ce=>{const pe=new F.w;return pe.add(Ve.schedule(()=>Ce.then(ke=>{pe.add(Ve.schedule(()=>{ce.next(ke),pe.add(Ve.schedule(()=>ce.complete()))}))},ke=>{pe.add(Ve.schedule(()=>ce.error(ke)))}))),pe})}(Ce,Ve);if((0,j.z)(Ce))return(0,de.r)(Ce,Ve);if(function(Ce){return Ce&&"function"==typeof Ce[X.hZ]}(Ce)||"string"==typeof Ce)return function(Ce,Ve){if(!Ce)throw new Error("Iterable cannot be null");return new a.y(ce=>{const pe=new F.w;let ke;return pe.add(()=>{ke&&"function"==typeof ke.return&&ke.return()}),pe.add(Ve.schedule(()=>{ke=Ce[X.hZ](),pe.add(Ve.schedule(function(){if(ce.closed)return;let Je,mt;try{const rt=ke.next();Je=rt.value,mt=rt.done}catch(rt){return void ce.error(rt)}mt?ce.complete():(ce.next(Je),this.schedule())}))})),pe})}(Ce,Ve)}throw new TypeError((null!==Ce&&typeof Ce||Ce)+" is not observable")}(Ce,Ve):Ce instanceof a.y?Ce:new a.y((0,q.s)(Ce))}},6693:(ot,Te,B)=>{"use strict";B.d(Te,{n:()=>se});var a=B(7574),q=B(5015),F=B(4087);function se(ae,ee){return ee?(0,F.r)(ae,ee):new a.y((0,q.V)(ae))}},6682:(ot,Te,B)=>{"use strict";B.d(Te,{T:()=>ae});var a=B(7574),q=B(4869),F=B(3282),se=B(6693);function ae(...ee){let de=Number.POSITIVE_INFINITY,X=null,Q=ee[ee.length-1];return(0,q.K)(Q)?(X=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(de=ee.pop())):"number"==typeof Q&&(de=ee.pop()),null===X&&1===ee.length&&ee[0]instanceof a.y?ee[0]:(0,F.J)(de)((0,se.n)(ee,X))}},5917:(ot,Te,B)=>{"use strict";B.d(Te,{of:()=>se});var a=B(4869),q=B(6693),F=B(4087);function se(...ae){let ee=ae[ae.length-1];return(0,a.K)(ee)?(ae.pop(),(0,F.r)(ae,ee)):(0,q.n)(ae)}},8002:(ot,Te,B)=>{"use strict";B.d(Te,{U:()=>q});var a=B(7393);function q(ae,ee){return function(X){if("function"!=typeof ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return X.lift(new F(ae,ee))}}class F{constructor(ee,de){this.project=ee,this.thisArg=de}call(ee,de){return de.subscribe(new se(ee,this.project,this.thisArg))}}class se extends a.L{constructor(ee,de,X){super(ee),this.project=de,this.count=0,this.thisArg=X||this}_next(ee){let de;try{de=this.project.call(this.thisArg,ee,this.count++)}catch(X){return void this.destination.error(X)}this.destination.next(de)}}},3282:(ot,Te,B)=>{"use strict";B.d(Te,{J:()=>F});var a=B(9773),q=B(4487);function F(se=Number.POSITIVE_INFINITY){return(0,a.zg)(q.y,se)}},9773:(ot,Te,B)=>{"use strict";B.d(Te,{zg:()=>se});var a=B(8002),q=B(4402),F=B(5345);function se(X,Q,U=Number.POSITIVE_INFINITY){return"function"==typeof Q?Y=>Y.pipe(se((j,le)=>(0,q.D)(X(j,le)).pipe((0,a.U)((Re,Ae)=>Q(j,Re,le,Ae))),U)):("number"==typeof Q&&(U=Q),Y=>Y.lift(new ae(X,U)))}class ae{constructor(Q,U=Number.POSITIVE_INFINITY){this.project=Q,this.concurrent=U}call(Q,U){return U.subscribe(new ee(Q,this.project,this.concurrent))}}class ee extends F.Ds{constructor(Q,U,Y=Number.POSITIVE_INFINITY){super(Q),this.project=U,this.concurrent=Y,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Q){this.active<this.concurrent?this._tryNext(Q):this.buffer.push(Q)}_tryNext(Q){let U;const Y=this.index++;try{U=this.project(Q,Y)}catch(j){return void this.destination.error(j)}this.active++,this._innerSub(U)}_innerSub(Q){const U=new F.IY(this),Y=this.destination;Y.add(U);const j=(0,F.ft)(Q,U);j!==U&&Y.add(j)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Q){this.destination.next(Q)}notifyComplete(){const Q=this.buffer;this.active--,Q.length>0?this._next(Q.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(ot,Te,B)=>{"use strict";B.d(Te,{QV:()=>F,ht:()=>ae});var a=B(7393),q=B(1593);function F(de,X=0){return function(U){return U.lift(new se(de,X))}}class se{constructor(X,Q=0){this.scheduler=X,this.delay=Q}call(X,Q){return Q.subscribe(new ae(X,this.scheduler,this.delay))}}class ae extends a.L{constructor(X,Q,U=0){super(X),this.scheduler=Q,this.delay=U}static dispatch(X){const{notification:Q,destination:U}=X;Q.observe(U),this.unsubscribe()}scheduleMessage(X){this.destination.add(this.scheduler.schedule(ae.dispatch,this.delay,new ee(X,this.destination)))}_next(X){this.scheduleMessage(q.P.createNext(X))}_error(X){this.scheduleMessage(q.P.createError(X)),this.unsubscribe()}_complete(){this.scheduleMessage(q.P.createComplete()),this.unsubscribe()}}class ee{constructor(X,Q){this.notification=X,this.destination=Q}}},1307:(ot,Te,B)=>{"use strict";B.d(Te,{x:()=>q});var a=B(7393);function q(){return function(ee){return ee.lift(new F(ee))}}class F{constructor(ee){this.connectable=ee}call(ee,de){const{connectable:X}=this;X._refCount++;const Q=new se(ee,X),U=de.subscribe(Q);return Q.closed||(Q.connection=X.connect()),U}}class se extends a.L{constructor(ee,de){super(ee),this.connectable=de}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const de=ee._refCount;if(de<=0)return void(this.connection=null);if(ee._refCount=de-1,de>1)return void(this.connection=null);const{connection:X}=this,Q=ee._connection;this.connection=null,Q&&(!X||Q===X)&&Q.unsubscribe()}}},8819:(ot,Te,B)=>{"use strict";B.d(Te,{B:()=>de});var a=B(2441);var se=B(1307),ae=B(9765);function ee(){return new ae.xQ}function de(){return X=>(0,se.x)()(function(X,Q){return function(Y){let j;j="function"==typeof X?X:function(){return X};const le=Object.create(Y,a.N);return le.source=Y,le.subjectFactory=j,le}}(ee)(X))}},2639:(ot,Te,B)=>{"use strict";B.d(Te,{R:()=>Ce});var a=B(7574);let q=1;const F=Promise.resolve(),se={};function ae(ce){return ce in se&&(delete se[ce],!0)}const ee={setImmediate(ce){const pe=q++;return se[pe]=!0,F.then(()=>ae(pe)&&ce()),pe},clearImmediate(ce){ae(ce)}};var X=B(6465),U=B(6102);const le=new class extends U.v{flush(pe){this.active=!0,this.scheduled=void 0;const{actions:ke}=this;let Je,mt=-1,rt=ke.length;pe=pe||ke.shift();do{if(Je=pe.execute(pe.state,pe.delay))break}while(++mt<rt&&(pe=ke.shift()));if(this.active=!1,Je){for(;++mt<rt&&(pe=ke.shift());)pe.unsubscribe();throw Je}}}(class extends X.o{constructor(pe,ke){super(pe,ke),this.scheduler=pe,this.work=ke}requestAsyncId(pe,ke,Je=0){return null!==Je&&Je>0?super.requestAsyncId(pe,ke,Je):(pe.actions.push(this),pe.scheduled||(pe.scheduled=ee.setImmediate(pe.flush.bind(pe,null))))}recycleAsyncId(pe,ke,Je=0){if(null!==Je&&Je>0||null===Je&&this.delay>0)return super.recycleAsyncId(pe,ke,Je);0===pe.actions.length&&(ee.clearImmediate(ke),pe.scheduled=void 0)}});var Re=B(6561);class Ae extends a.y{constructor(pe,ke=0,Je=le){super(),this.source=pe,this.delayTime=ke,this.scheduler=Je,(!(0,Re.k)(ke)||ke<0)&&(this.delayTime=0),(!Je||"function"!=typeof Je.schedule)&&(this.scheduler=le)}static create(pe,ke=0,Je=le){return new Ae(pe,ke,Je)}static dispatch(pe){const{source:ke,subscriber:Je}=pe;return this.add(ke.subscribe(Je))}_subscribe(pe){return this.scheduler.schedule(Ae.dispatch,this.delayTime,{source:this.source,subscriber:pe})}}function Ce(ce,pe=0){return function(Je){return Je.lift(new Ve(ce,pe))}}class Ve{constructor(pe,ke){this.scheduler=pe,this.delay=ke}call(pe,ke){return new Ae(ke,this.delay,this.scheduler).subscribe(pe)}}},8307:(ot,Te,B)=>{"use strict";B.d(Te,{b:()=>se});var a=B(7393),q=B(8640),F=B(9105);function se(de,X,Q){return function(Y){return Y.lift(new ae(de,X,Q))}}class ae{constructor(X,Q,U){this.nextOrObserver=X,this.error=Q,this.complete=U}call(X,Q){return Q.subscribe(new ee(X,this.nextOrObserver,this.error,this.complete))}}class ee extends a.L{constructor(X,Q,U,Y){super(X),this._tapNext=q.Z,this._tapError=q.Z,this._tapComplete=q.Z,this._tapError=U||q.Z,this._tapComplete=Y||q.Z,(0,F.m)(Q)?(this._context=this,this._tapNext=Q):Q&&(this._context=Q,this._tapNext=Q.next||q.Z,this._tapError=Q.error||q.Z,this._tapComplete=Q.complete||q.Z)}_next(X){try{this._tapNext.call(this._context,X)}catch(Q){return void this.destination.error(Q)}this.destination.next(X)}_error(X){try{this._tapError.call(this._context,X)}catch(Q){return void this.destination.error(Q)}this.destination.error(X)}_complete(){try{this._tapComplete.call(this._context)}catch(X){return void this.destination.error(X)}return this.destination.complete()}}},4087:(ot,Te,B)=>{"use strict";B.d(Te,{r:()=>F});var a=B(7574),q=B(5319);function F(se,ae){return new a.y(ee=>{const de=new q.w;let X=0;return de.add(ae.schedule(function(){X!==se.length?(ee.next(se[X++]),ee.closed||de.add(this.schedule())):ee.complete()})),de})}},6465:(ot,Te,B)=>{"use strict";B.d(Te,{o:()=>F});var a=B(5319);class q extends a.w{constructor(ae,ee){super()}schedule(ae,ee=0){return this}}class F extends q{constructor(ae,ee){super(ae,ee),this.scheduler=ae,this.work=ee,this.pending=!1}schedule(ae,ee=0){if(this.closed)return this;this.state=ae;const de=this.id,X=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(X,de,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(X,this.id,ee),this}requestAsyncId(ae,ee,de=0){return setInterval(ae.flush.bind(ae,this),de)}recycleAsyncId(ae,ee,de=0){if(null!==de&&this.delay===de&&!1===this.pending)return ee;clearInterval(ee)}execute(ae,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(ae,ee);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ee){let X,de=!1;try{this.work(ae)}catch(Q){de=!0,X=!!Q&&Q||new Error(Q)}if(de)return this.unsubscribe(),X}_unsubscribe(){const ae=this.id,ee=this.scheduler,de=ee.actions,X=de.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==X&&de.splice(X,1),null!=ae&&(this.id=this.recycleAsyncId(ee,ae,null)),this.delay=null}}},6102:(ot,Te,B)=>{"use strict";B.d(Te,{v:()=>q});let a=(()=>{class F{constructor(ae,ee=F.now){this.SchedulerAction=ae,this.now=ee}schedule(ae,ee=0,de){return new this.SchedulerAction(this,ae).schedule(de,ee)}}return F.now=()=>Date.now(),F})();class q extends a{constructor(se,ae=a.now){super(se,()=>q.delegate&&q.delegate!==this?q.delegate.now():ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(se,ae=0,ee){return q.delegate&&q.delegate!==this?q.delegate.schedule(se,ae,ee):super.schedule(se,ae,ee)}flush(se){const{actions:ae}=this;if(this.active)return void ae.push(se);let ee;this.active=!0;do{if(ee=se.execute(se.state,se.delay))break}while(se=ae.shift());if(this.active=!1,ee){for(;se=ae.shift();)se.unsubscribe();throw ee}}}},3637:(ot,Te,B)=>{"use strict";B.d(Te,{z:()=>F,P:()=>se});var a=B(6465);const F=new(B(6102).v)(a.o),se=F},7771:(ot,Te,B)=>{"use strict";B.d(Te,{c:()=>ee,N:()=>ae});var a=B(6465),F=B(6102);const ae=new class extends F.v{}(class extends a.o{constructor(X,Q){super(X,Q),this.scheduler=X,this.work=Q}schedule(X,Q=0){return Q>0?super.schedule(X,Q):(this.delay=Q,this.state=X,this.scheduler.flush(this),this)}execute(X,Q){return Q>0||this.closed?super.execute(X,Q):this._execute(X,Q)}requestAsyncId(X,Q,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(X,Q,U):X.flush(this)}}),ee=ae},377:(ot,Te,B)=>{"use strict";B.d(Te,{hZ:()=>q});const q="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ot,Te,B)=>{"use strict";B.d(Te,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ot,Te,B)=>{"use strict";B.d(Te,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(ot,Te,B)=>{"use strict";B.d(Te,{N:()=>q});const q=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},4449:(ot,Te,B)=>{"use strict";function a(q){setTimeout(()=>{throw q},0)}B.d(Te,{z:()=>a})},4487:(ot,Te,B)=>{"use strict";function a(q){return q}B.d(Te,{y:()=>a})},9796:(ot,Te,B)=>{"use strict";B.d(Te,{k:()=>a});const a=Array.isArray||(q=>q&&"number"==typeof q.length)},9489:(ot,Te,B)=>{"use strict";B.d(Te,{z:()=>a});const a=q=>q&&"number"==typeof q.length&&"function"!=typeof q},9105:(ot,Te,B)=>{"use strict";function a(q){return"function"==typeof q}B.d(Te,{m:()=>a})},6561:(ot,Te,B)=>{"use strict";B.d(Te,{k:()=>q});var a=B(9796);function q(F){return!(0,a.k)(F)&&F-parseFloat(F)+1>=0}},1555:(ot,Te,B)=>{"use strict";function a(q){return null!==q&&"object"==typeof q}B.d(Te,{K:()=>a})},4072:(ot,Te,B)=>{"use strict";function a(q){return!!q&&"function"!=typeof q.subscribe&&"function"==typeof q.then}B.d(Te,{t:()=>a})},4869:(ot,Te,B)=>{"use strict";function a(q){return q&&"function"==typeof q.schedule}B.d(Te,{K:()=>a})},8640:(ot,Te,B)=>{"use strict";function a(){}B.d(Te,{Z:()=>a})},7444:(ot,Te,B)=>{"use strict";B.d(Te,{s:()=>Y});var a=B(5015),q=B(4449),se=B(377),ee=B(6554),X=B(9489),Q=B(4072),U=B(1555);const Y=j=>{if(j&&"function"==typeof j[ee.L])return(j=>le=>{const Re=j[ee.L]();if("function"!=typeof Re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Re.subscribe(le)})(j);if((0,X.z)(j))return(0,a.V)(j);if((0,Q.t)(j))return(j=>le=>(j.then(Re=>{le.closed||(le.next(Re),le.complete())},Re=>le.error(Re)).then(null,q.z),le))(j);if(j&&"function"==typeof j[se.hZ])return(j=>le=>{const Re=j[se.hZ]();for(;;){let Ae;try{Ae=Re.next()}catch(Ce){return le.error(Ce),le}if(Ae.done){le.complete();break}if(le.next(Ae.value),le.closed)break}return"function"==typeof Re.return&&le.add(()=>{Re.return&&Re.return()}),le})(j);{const Re=`You provided ${(0,U.K)(j)?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Re)}}},5015:(ot,Te,B)=>{"use strict";B.d(Te,{V:()=>a});const a=q=>F=>{for(let se=0,ae=q.length;se<ae&&!F.closed;se++)F.next(q[se]);F.complete()}},1437:(ot,Te,B)=>{"use strict";var a=B(7716);let q=null;function F(){return q}const de=new a.OlP("DocumentToken");let X=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:Q,token:n,providedIn:"platform"}),n})();function Q(){return(0,a.LFG)(Y)}const U=new a.OlP("Location Initialized");let Y=(()=>{class n extends X{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(e){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){j()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){j()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(de))},n.\u0275prov=(0,a.Yz7)({factory:le,token:n,providedIn:"platform"}),n})();function j(){return!!window.history.pushState}function le(){return new Y((0,a.LFG)(de))}function Re(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ae(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Ce(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:ce,token:n,providedIn:"root"}),n})();function ce(n){const t=(0,a.LFG)(de).location;return new ke((0,a.LFG)(X),t&&t.origin||"")}const pe=new a.OlP("appBaseHref");let ke=(()=>{class n extends Ve{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Ce(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,l){const d=this.prepareExternalUrl(i+Ce(l));this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){const d=this.prepareExternalUrl(i+Ce(l));this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(X),a.LFG(pe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Je=(()=>{class n extends Ve{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Re(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,l){let d=this.prepareExternalUrl(i+Ce(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){let d=this.prepareExternalUrl(i+Ce(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(X),a.LFG(pe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),mt=(()=>{class n{constructor(e,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ae(ft(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Ce(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,ft(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ce(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ce(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Ve),a.LFG(X))},n.normalizeQueryParams=Ce,n.joinWithSlash=Re,n.stripTrailingSlash=Ae,n.\u0275prov=(0,a.Yz7)({factory:rt,token:n,providedIn:"root"}),n})();function rt(){return new mt((0,a.LFG)(Ve),(0,a.LFG)(X))}function ft(n){return n.replace(/\/index.html$/,"")}var Ie=(()=>((Ie=Ie||{})[Ie.Zero=0]="Zero",Ie[Ie.One=1]="One",Ie[Ie.Two=2]="Two",Ie[Ie.Few=3]="Few",Ie[Ie.Many=4]="Many",Ie[Ie.Other=5]="Other",Ie))(),je=(()=>((je=je||{})[je.Format=0]="Format",je[je.Standalone=1]="Standalone",je))(),ve=(()=>((ve=ve||{})[ve.Narrow=0]="Narrow",ve[ve.Abbreviated=1]="Abbreviated",ve[ve.Wide=2]="Wide",ve[ve.Short=3]="Short",ve))(),Ge=(()=>((Ge=Ge||{})[Ge.Short=0]="Short",Ge[Ge.Medium=1]="Medium",Ge[Ge.Long=2]="Long",Ge[Ge.Full=3]="Full",Ge))(),Se=(()=>((Se=Se||{})[Se.Decimal=0]="Decimal",Se[Se.Group=1]="Group",Se[Se.List=2]="List",Se[Se.PercentSign=3]="PercentSign",Se[Se.PlusSign=4]="PlusSign",Se[Se.MinusSign=5]="MinusSign",Se[Se.Exponential=6]="Exponential",Se[Se.SuperscriptingExponent=7]="SuperscriptingExponent",Se[Se.PerMille=8]="PerMille",Se[Se.Infinity=9]="Infinity",Se[Se.NaN=10]="NaN",Se[Se.TimeSeparator=11]="TimeSeparator",Se[Se.CurrencyDecimal=12]="CurrencyDecimal",Se[Se.CurrencyGroup=13]="CurrencyGroup",Se))();function zn(n,t){return vn((0,a.cg1)(n)[a.wAp.DateFormat],t)}function wt(n,t){return vn((0,a.cg1)(n)[a.wAp.TimeFormat],t)}function Xn(n,t){return vn((0,a.cg1)(n)[a.wAp.DateTimeFormat],t)}function cn(n,t){const e=(0,a.cg1)(n),r=e[a.wAp.NumberSymbols][t];if(void 0===r){if(t===Se.CurrencyDecimal)return e[a.wAp.NumberSymbols][Se.Decimal];if(t===Se.CurrencyGroup)return e[a.wAp.NumberSymbols][Se.Group]}return r}const dr=a.kL8;function Fe(n){if(!n[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function vn(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function Yn(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const fr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vn={},Ca=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var _n=(()=>((_n=_n||{})[_n.Short=0]="Short",_n[_n.ShortGMT=1]="ShortGMT",_n[_n.Long=2]="Long",_n[_n.Extended=3]="Extended",_n))(),Ze=(()=>((Ze=Ze||{})[Ze.FullYear=0]="FullYear",Ze[Ze.Month=1]="Month",Ze[Ze.Date=2]="Date",Ze[Ze.Hours=3]="Hours",Ze[Ze.Minutes=4]="Minutes",Ze[Ze.Seconds=5]="Seconds",Ze[Ze.FractionalSeconds=6]="FractionalSeconds",Ze[Ze.Day=7]="Day",Ze))(),gt=(()=>((gt=gt||{})[gt.DayPeriods=0]="DayPeriods",gt[gt.Days=1]="Days",gt[gt.Months=2]="Months",gt[gt.Eras=3]="Eras",gt))();function Bi(n,t,e,r){let i=function(n){if(pt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,l=1,d=1]=n.split("-").map(f=>+f);return ss(i,l-1,d)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(fr))return function(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,l=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-e,f=Number(n[5]||0)-r,m=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(t,d,f,m,b),t}(r)}const t=new Date(n);if(!pt(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=hn(e,t)||t;let f,d=[];for(;t;){if(f=Ca.exec(t),!f){d.push(t);break}{d=d.concat(f.slice(1));const T=d.pop();if(!T)break;t=T}}let m=i.getTimezoneOffset();r&&(m=$(r,m),i=function(n,t,e){const i=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*($(t,i)-i))}(i,r));let b="";return d.forEach(T=>{const A=function(n){if(ne[n])return ne[n];let t;switch(n){case"G":case"GG":case"GGG":t=qt(gt.Eras,ve.Abbreviated);break;case"GGGG":t=qt(gt.Eras,ve.Wide);break;case"GGGGG":t=qt(gt.Eras,ve.Narrow);break;case"y":t=sn(Ze.FullYear,1,0,!1,!0);break;case"yy":t=sn(Ze.FullYear,2,0,!0,!0);break;case"yyy":t=sn(Ze.FullYear,3,0,!1,!0);break;case"yyyy":t=sn(Ze.FullYear,4,0,!1,!0);break;case"Y":t=z(1);break;case"YY":t=z(2,!0);break;case"YYY":t=z(3);break;case"YYYY":t=z(4);break;case"M":case"L":t=sn(Ze.Month,1,1);break;case"MM":case"LL":t=sn(Ze.Month,2,1);break;case"MMM":t=qt(gt.Months,ve.Abbreviated);break;case"MMMM":t=qt(gt.Months,ve.Wide);break;case"MMMMM":t=qt(gt.Months,ve.Narrow);break;case"LLL":t=qt(gt.Months,ve.Abbreviated,je.Standalone);break;case"LLLL":t=qt(gt.Months,ve.Wide,je.Standalone);break;case"LLLLL":t=qt(gt.Months,ve.Narrow,je.Standalone);break;case"w":t=J(1);break;case"ww":t=J(2);break;case"W":t=J(1,!0);break;case"d":t=sn(Ze.Date,1);break;case"dd":t=sn(Ze.Date,2);break;case"c":case"cc":t=sn(Ze.Day,1);break;case"ccc":t=qt(gt.Days,ve.Abbreviated,je.Standalone);break;case"cccc":t=qt(gt.Days,ve.Wide,je.Standalone);break;case"ccccc":t=qt(gt.Days,ve.Narrow,je.Standalone);break;case"cccccc":t=qt(gt.Days,ve.Short,je.Standalone);break;case"E":case"EE":case"EEE":t=qt(gt.Days,ve.Abbreviated);break;case"EEEE":t=qt(gt.Days,ve.Wide);break;case"EEEEE":t=qt(gt.Days,ve.Narrow);break;case"EEEEEE":t=qt(gt.Days,ve.Short);break;case"a":case"aa":case"aaa":t=qt(gt.DayPeriods,ve.Abbreviated);break;case"aaaa":t=qt(gt.DayPeriods,ve.Wide);break;case"aaaaa":t=qt(gt.DayPeriods,ve.Narrow);break;case"b":case"bb":case"bbb":t=qt(gt.DayPeriods,ve.Abbreviated,je.Standalone,!0);break;case"bbbb":t=qt(gt.DayPeriods,ve.Wide,je.Standalone,!0);break;case"bbbbb":t=qt(gt.DayPeriods,ve.Narrow,je.Standalone,!0);break;case"B":case"BB":case"BBB":t=qt(gt.DayPeriods,ve.Abbreviated,je.Format,!0);break;case"BBBB":t=qt(gt.DayPeriods,ve.Wide,je.Format,!0);break;case"BBBBB":t=qt(gt.DayPeriods,ve.Narrow,je.Format,!0);break;case"h":t=sn(Ze.Hours,1,-12);break;case"hh":t=sn(Ze.Hours,2,-12);break;case"H":t=sn(Ze.Hours,1);break;case"HH":t=sn(Ze.Hours,2);break;case"m":t=sn(Ze.Minutes,1);break;case"mm":t=sn(Ze.Minutes,2);break;case"s":t=sn(Ze.Seconds,1);break;case"ss":t=sn(Ze.Seconds,2);break;case"S":t=sn(Ze.FractionalSeconds,1);break;case"SS":t=sn(Ze.FractionalSeconds,2);break;case"SSS":t=sn(Ze.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Ne(_n.Short);break;case"ZZZZZ":t=Ne(_n.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ne(_n.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ne(_n.Long);break;default:return null}return ne[n]=t,t}(T);b+=A?A(i,e,m):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function ss(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function hn(n,t){const e=function(n){return(0,a.cg1)(n)[a.wAp.LocaleId]}(n);if(Vn[e]=Vn[e]||{},Vn[e][t])return Vn[e][t];let r="";switch(t){case"shortDate":r=zn(n,Ge.Short);break;case"mediumDate":r=zn(n,Ge.Medium);break;case"longDate":r=zn(n,Ge.Long);break;case"fullDate":r=zn(n,Ge.Full);break;case"shortTime":r=wt(n,Ge.Short);break;case"mediumTime":r=wt(n,Ge.Medium);break;case"longTime":r=wt(n,Ge.Long);break;case"fullTime":r=wt(n,Ge.Full);break;case"short":const i=hn(n,"shortTime"),l=hn(n,"shortDate");r=It(Xn(n,Ge.Short),[i,l]);break;case"medium":const d=hn(n,"mediumTime"),f=hn(n,"mediumDate");r=It(Xn(n,Ge.Medium),[d,f]);break;case"long":const m=hn(n,"longTime"),b=hn(n,"longDate");r=It(Xn(n,Ge.Long),[m,b]);break;case"full":const T=hn(n,"fullTime"),A=hn(n,"fullDate");r=It(Xn(n,Ge.Full),[T,A])}return r&&(Vn[e][t]=r),r}function It(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function Cr(n,t,e="-",r,i){let l="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,l=e));let d=String(n);for(;d.length<t;)d="0"+d;return r&&(d=d.substr(d.length-t)),l+d}function sn(n,t,e=0,r=!1,i=!1){return function(l,d){let f=function(n,t){switch(n){case Ze.FullYear:return t.getFullYear();case Ze.Month:return t.getMonth();case Ze.Date:return t.getDate();case Ze.Hours:return t.getHours();case Ze.Minutes:return t.getMinutes();case Ze.Seconds:return t.getSeconds();case Ze.FractionalSeconds:return t.getMilliseconds();case Ze.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((e>0||f>-e)&&(f+=e),n===Ze.Hours)0===f&&-12===e&&(f=12);else if(n===Ze.FractionalSeconds)return function(n,t){return Cr(n,3).substr(0,t)}(f,t);const m=cn(d,Se.MinusSign);return Cr(f,t,m,r,i)}}function qt(n,t,e=je.Format,r=!1){return function(i,l){return function(n,t,e,r,i,l){switch(e){case gt.Months:return function(n,t,e){const r=(0,a.cg1)(n),l=vn([r[a.wAp.MonthsFormat],r[a.wAp.MonthsStandalone]],t);return vn(l,e)}(t,i,r)[n.getMonth()];case gt.Days:return function(n,t,e){const r=(0,a.cg1)(n),l=vn([r[a.wAp.DaysFormat],r[a.wAp.DaysStandalone]],t);return vn(l,e)}(t,i,r)[n.getDay()];case gt.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(l){const b=function(n){const t=(0,a.cg1)(n);return Fe(t),(t[a.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Yn(r):[Yn(r[0]),Yn(r[1])])}(t),T=function(n,t,e){const r=(0,a.cg1)(n);Fe(r);const l=vn([r[a.wAp.ExtraData][0],r[a.wAp.ExtraData][1]],t)||[];return vn(l,e)||[]}(t,i,r),A=b.findIndex(M=>{if(Array.isArray(M)){const[O,G]=M,ie=d>=O.hours&&f>=O.minutes,_e=d<G.hours||d===G.hours&&f<G.minutes;if(O.hours<G.hours){if(ie&&_e)return!0}else if(ie||_e)return!0}else if(M.hours===d&&M.minutes===f)return!0;return!1});if(-1!==A)return T[A]}return function(n,t,e){const r=(0,a.cg1)(n),l=vn([r[a.wAp.DayPeriodsFormat],r[a.wAp.DayPeriodsStandalone]],t);return vn(l,e)}(t,i,r)[d<12?0:1];case gt.Eras:return function(n,t){return vn((0,a.cg1)(n)[a.wAp.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,l,n,t,e,r)}}function Ne(n){return function(t,e,r){const i=-1*r,l=cn(e,Se.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case _n.Short:return(i>=0?"+":"")+Cr(d,2,l)+Cr(Math.abs(i%60),2,l);case _n.ShortGMT:return"GMT"+(i>=0?"+":"")+Cr(d,1,l);case _n.Long:return"GMT"+(i>=0?"+":"")+Cr(d,2,l)+":"+Cr(Math.abs(i%60),2,l);case _n.Extended:return 0===r?"Z":(i>=0?"+":"")+Cr(d,2,l)+":"+Cr(Math.abs(i%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function Xt(n){return ss(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function J(n,t=!1){return function(e,r){let i;if(t){const l=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();i=1+Math.floor((d+l)/7)}else{const l=Xt(e),d=function(n){const t=ss(n,0,1).getDay();return ss(n,0,1+(t<=4?4:11)-t)}(l.getFullYear()),f=l.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return Cr(i,n,cn(r,Se.MinusSign))}}function z(n,t=!1){return function(e,r){return Cr(Xt(e).getFullYear(),n,cn(r,Se.MinusSign),t)}}const ne={};function $(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function pt(n){return n instanceof Date&&!isNaN(n.valueOf())}class os{}let gu=(()=>{class n extends os{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(dr(r||this.locale)(e)){case Ie.Zero:return"zero";case Ie.One:return"one";case Ie.Two:return"two";case Ie.Few:return"few";case Ie.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Ur(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,l]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(l)}return null}let go=(()=>{class n{constructor(e,r,i,l){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,a.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,a.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class si{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zt=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,l,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new si(null,this._ngForOf,-1,-1),null===d?void 0:d),m=new Dc(i,f);r.push(m)}else if(null==d)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const f=this._viewContainer.get(l);this._viewContainer.move(f,d);const m=new Dc(i,f);r.push(m)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,l=this._viewContainer.length;i<l;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=l,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Dc{constructor(t,e){this.record=t,this.view=e}}let Ar=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Ic,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){mo("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){mo("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ic{constructor(){this.$implicit=null,this.ngIf=null}}function mo(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(t)}'.`)}let mu=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",i,l){if(null==e||""===e||e!=e)return null;try{return Bi(e,r,l||this.locale,i)}catch(d){throw function(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,a.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.soG,16))},n.\u0275pipe=a.Yjl({name:"date",type:n,pure:!0}),n})(),Kn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:os,useClass:gu}]}),n})();function uh(n){return"server"===n}let Mc=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new ch((0,a.LFG)(de),window)}),n})();class ch{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const d=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Sa(this.window.history)||Sa(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Sa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Rc{}class kc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new kc,q||(q=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Is=Is||document.querySelector("base"),Is?Is.getAttribute("href"):null);return null==e?null:function(n){An=An||document.createElement("a"),An.setAttribute("href",n);const t=An.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Is=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ur(document.cookie,t)}}let An,Is=null;const Pc=new a.OlP("TRANSITION_ID"),Sn=[{provide:a.ip1,useFactory:function(n,t,e){return()=>{e.get(a.CZH).donePromise.then(()=>{const r=F(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[Pc,de,a.zs3],multi:!0}];class Oc{static init(){(0,a.VLi)(new Oc)}addToWindow(t){a.dqk.getAngularTestability=(r,i=!0)=>{const l=t.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let l=i.length,d=!1;const f=function(m){d=d||m,l--,0==l&&r(d)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?F().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let As=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const bo=new a.OlP("EventManagerPlugins");let Me=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const d=i[l];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(bo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Yt{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=F().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let xa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Un=(()=>{class n extends xa{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,i.push(r.appendChild(d))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(Il),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Il))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(de))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Il(n){F().remove(n)}const Hs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ai=/%COMP%/g;function or(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?or(n,i,e):(i=i.replace(ai,n),e.push(i))}return e}function Ai(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Si=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ni(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case a.ifc.ShadowDom:return new Ko(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=or(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Me),a.LFG(Un),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Ni{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Hs[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const l=Hs[i];l?t.setAttributeNS(l,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Hs[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,r,i&a.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ai(r)):this.eventManager.addEventListener(t,e,Ai(r))}}class yp extends Ni{constructor(t,e,r,i){super(t),this.component=r;const l=or(i+"-"+r.id,r.styles,[]);e.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(ai,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(ai,i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Ko extends Ni{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=or(i.id,i.styles,[]);for(let d=0;d<l.length;d++){const f=document.createElement("style");f.textContent=l[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Hc=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(de))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Jo=["alt","control","meta","shift"],vp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$r={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Au={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zc=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(e,l.domEventName,d))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let d="";if(Jo.forEach(m=>{const b=r.indexOf(m);b>-1&&(r.splice(b,1),d+=m+".")}),d+=l,0!=r.length||0===l.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&$r.hasOwnProperty(t)&&(t=$r[t]))}return vp[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Jo.forEach(l=>{l!=i&&Au[l](e)&&(r+=l+".")}),r+=i,r}static eventCallback(e,r,i){return l=>{n.getEventFullKey(l)===e&&i.runGuarded(()=>r(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(de))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){kc.makeCurrent(),Oc.init()},multi:!0},{provide:de,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Yc=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:bo,useClass:Hc,multi:!0,deps:[de,a.R0b,a.Lbi]},{provide:bo,useClass:zc,multi:!0,deps:[de]},[],{provide:Si,useClass:Si,deps:[Me,Un,a.AFp]},{provide:a.FYo,useExisting:Si},{provide:xa,useExisting:Un},{provide:Un,useClass:Un,deps:[de]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:Me,useClass:Me,deps:[bo,a.R0b]},{provide:Rc,useClass:As,deps:[]},[]];let Ep=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:a.AFp,useValue:e.appId},{provide:Pc,useExisting:a.AFp},Sn]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:Yc,imports:[Kn,a.hGG]}),n})();"undefined"!=typeof window&&window;var en=B(4402),dt=B(5917),Tn=B(9765),kl=B(7971);class _r extends Tn.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new kl.N;return this._value}next(t){super.next(this._value=t)}}var Xo=B(4869),Ns=B(9796),ar=B(7393);class yh extends ar.L{notifyNext(t,e,r,i,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Ap extends ar.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Do=B(7444),qn=B(7574);function Jn(n,t,e,r,i=new Ap(n,e,r)){if(!i.closed)return t instanceof qn.y?t.subscribe(i):(0,Do.s)(t)(i)}var Ru=B(6693);const ea={};class Ba{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Jc(t,this.resultSelector))}}class Jc extends yh{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(ea),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(Jn(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,d=this.toRespond?i[r]===ea?--this.toRespond:this.toRespond:0;i[r]=e,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const xs=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var cs=B(3282);function qs(...n){return(0,cs.J)(1)((0,dt.of)(...n))}var li=B(9193);function xi(n){return new qn.y(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?(0,en.D)(e):(0,li.c)()).subscribe(t)})}var A0=B(2441),ut=B(8002),Gi=B(5345);function tr(n,t){return"function"==typeof t?e=>e.pipe(tr((r,i)=>(0,en.D)(n(r,i)).pipe((0,ut.U)((l,d)=>t(r,l,i,d))))):e=>e.lift(new Sp(n))}class Sp{constructor(t){this.project=t}call(t,e){return e.subscribe(new Hn(t,this.project))}}class Hn extends Gi.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new Gi.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,Gi.ft)(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Qc=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function _i(n){return t=>0===n?(0,li.c)():t.lift(new S0(n))}class S0{constructor(t){if(this.total=t,this.total<0)throw new Qc}call(t,e){return e.subscribe(new Np(t,this.total))}}class Np extends ar.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function ta(...n){const t=n[n.length-1];return(0,Xo.K)(t)?(n.pop(),e=>qs(n,e,t)):e=>qs(n,e)}function Ua(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new f_(n,t,e))}}class f_{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Pu(t,this.accumulator,this.seed,this.hasSeed))}}class Pu extends ar.L{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Wn(n,t){return function(r){return r.lift(new Xc(n,t))}}class Xc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new So(t,this.predicate,this.thisArg))}}class So extends ar.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function No(n){return function(e){const r=new lr(n),i=e.lift(r);return r.caught=i}}class lr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ws(t,this.selector,this.caught))}}class Ws extends Gi.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new Gi.IY(this);this.add(r);const i=(0,Gi.ft)(e,r);i!==r&&this.add(i)}}}var xr=B(9773);function Ou(n,t){return(0,xr.zg)(n,t,1)}function bh(n){return function(e){return 0===n?(0,li.c)():e.lift(new yi(n))}}class yi{constructor(t){if(this.total=t,this.total<0)throw new Qc}call(t,e){return e.subscribe(new Ms(t,this.total))}}class Ms extends ar.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let l=0;l<r;l++){const d=e++%r;t.next(i[d])}}t.complete()}}function Rs(n=wh){return t=>t.lift(new xo(n))}class xo{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Mo(t,this.errorFactory))}}class Mo extends ar.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function wh(){return new xs}function Zs(n=null){return t=>t.lift(new xp(n))}class xp{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new $a(t,this.defaultValue))}}class $a extends ar.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Mp=B(4487);function yr(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Wn((i,l)=>n(i,l,r)):Mp.y,_i(1),e?Zs(t):Rs(()=>new xs))}var ur=B(8307),Ha=B(1307),Ch=B(5319);class S{constructor(t){this.callback=t}call(t,e){return e.subscribe(new P(t,this.callback))}}class P extends ar.L{constructor(t,e){super(t),this.add(new Ch.w(e))}}class W{constructor(t,e){this.id=t,this.url=e}}class oe extends W{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fe extends W{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oe extends W{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class et extends W{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tt extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ot extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nn extends W{constructor(t,e,r,i,l){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ft extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Er extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pl{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class td{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ja{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ks{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class Rp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Qn(n){return new Rp(n)}const Fu="ngNavigationCancelingError";function p_(n){const t=Error("NavigationCancelingError: "+n);return t[Fu]=!0,t}function Fl(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const d=r[l],f=n[l];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ds(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let l=0;l<e.length;l++)if(i=e[l],!Pp(n[i],t[i]))return!1;return!0}function Pp(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,l)=>r[l]===i)}return n===t}function g_(n){return Array.prototype.concat.apply([],n)}function Ga(n){return n.length>0?n[n.length-1]:null}function Mr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Hr(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,en.D)(Promise.resolve(n)):(0,dt.of)(n)}const m_={exact:function Eh(n,t,e){if(!Za(n.segments,t.segments)||!Vu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!Eh(n.children[r],t.children[r],e))return!1;return!0},subset:ra},Lu={exact:function(n,t){return ds(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Pp(n[e],t[e]))},ignored:()=>!0};function nd(n,t,e){return m_[e.paths](n.root,t.root,e.matrixParams)&&Lu[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function ra(n,t,e){return Wa(n,t,t.segments,e)}function Wa(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Za(i,e)||t.hasChildren()||!Vu(i,e,r))}if(n.segments.length===e.length){if(!Za(n.segments,e)||!Vu(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!ra(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),l=e.slice(n.segments.length);return!!(Za(n.segments,i)&&Vu(n.segments,i,r)&&n.children[Vt])&&Wa(n.children[Vt],t,l,r)}}function Vu(n,t,e){return t.every((r,i)=>Lu[e](n[i].parameters,r.parameters))}class Ll{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return id.serialize(this)}}class tn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Mr(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ia(this)}}class rd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Qn(this.parameters)),this._parameterMap}toString(){return $u(this)}}function Za(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class Op{}class Bu{parse(t){const e=new Ih(t);return new Ll(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${sd(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${od(e)}=${od(i)}`).join("&"):`${od(e)}=${od(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const id=new Bu;function ia(n){return n.segments.map(t=>$u(t)).join("/")}function sd(n,t){if(!n.hasChildren())return ia(n);if(t){const e=n.children[Vt]?sd(n.children[Vt],!1):"",r=[];return Mr(n.children,(i,l)=>{l!==Vt&&r.push(`${l}:${sd(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Mr(n.children,(r,i)=>{i===Vt&&(e=e.concat(t(r,i)))}),Mr(n.children,(r,i)=>{i!==Vt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Vt?[sd(n.children[Vt],!1)]:[`${i}:${sd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${ia(n)}/${e[0]}`:`${ia(n)}/(${e.join("//")})`}}function v_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function od(n){return v_(n).replace(/%3B/gi,";")}function ad(n){return v_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uu(n){return decodeURIComponent(n)}function Fp(n){return Uu(n.replace(/\+/g,"%20"))}function $u(n){return`${ad(n.path)}${function(n){return Object.keys(n).map(t=>`;${ad(t)}=${ad(n[t])}`).join("")}(n.parameters)}`}const k0=/^[^\/()?;=#]+/;function Dh(n){const t=n.match(k0);return t?t[0]:""}const P0=/^[^=?&#]+/,sa=/^[^?&#]+/;class Ih{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Vt]=new tn(t,e)),r}parseSegment(){const t=Dh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new rd(Uu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Dh(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Dh(this.remaining);i&&(r=i,this.capture(r))}t[Uu(e)]=Uu(r)}parseQueryParam(t){const e=function(n){const t=n.match(P0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const d=function(n){const t=n.match(sa);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Fp(e),l=Fp(r);if(t.hasOwnProperty(i)){let d=t[i];Array.isArray(d)||(d=[d],t[i]=d),d.push(l)}else t[i]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Dh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=Vt);const d=this.parseChildren();e[l]=1===Object.keys(d).length?d[Vt]:new tn([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class b_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Lp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Lp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Vp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Vp(t,this._root).map(e=>e.value)}}function Lp(n,t){if(n===t.value)return t;for(const e of t.children){const r=Lp(n,e);if(r)return r}return null}function Vp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Vp(n,e);if(r.length)return r.unshift(t),r}return[]}class oa{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ld(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ah extends b_{constructor(t,e){super(t),this.snapshot=e,Nh(this,t)}toString(){return this.snapshot.toString()}}function w_(n,t){const e=function(n,t){const d=new Sh([],{},{},"",{},Vt,t,null,n.root,-1,{});return new za("",new oa(d,[]))}(n,t),r=new _r([new rd("",{})]),i=new _r({}),l=new _r({}),d=new _r({}),f=new _r(""),m=new ju(r,i,d,f,l,Vt,t,e.root);return m.snapshot=e.root,new Ah(new oa(m,[]),e)}class ju{constructor(t,e,r,i,l,d,f,m){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(t=>Qn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(t=>Qn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function C_(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],l=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Sh{constructor(t,e,r,i,l,d,f,m,b,T,A){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this.routeConfig=m,this._urlSegment=b,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class za extends b_{constructor(t,e){super(e),this.url=t,Nh(this,e)}toString(){return Ps(this._root)}}function Nh(n,t){t.value._routerState=n,t.children.forEach(e=>Nh(n,e))}function Ps(n){const t=n.children.length>0?` { ${n.children.map(Ps).join(", ")} } `:"";return`${n.value}${t}`}function Bl(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ds(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ds(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ds(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ds(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Gu(n,t){return ds(n.params,t.params)&&function(n,t){return Za(n,t)&&n.every((e,r)=>ds(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||Gu(n.parent,t.parent))}function qu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qu(n,r,i);return qu(n,r)})}(n,t,e);return new oa(r,i)}{if(n.shouldAttach(t.value)){const l=n.retrieve(t.value);if(null!==l){const d=l.route;return D_(t,d),d}}const r=function(n){return new ju(new _r(n.url),new _r(n.params),new _r(n.queryParams),new _r(n.fragment),new _r(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(l=>qu(n,l));return new oa(r,i)}}function D_(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)D_(n.children[e],t.children[e])}function ud(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function w(n){return"object"==typeof n&&null!=n&&n.outlets}function g(n,t,e,r,i){let l={};return r&&Mr(r,(d,f)=>{l[f]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),new Ll(e.root===n?t:y(e.root,n,t),l,i)}function y(n,t,e){const r={};return Mr(n.children,(i,l)=>{r[l]=i===t?e:y(i,t,e)}),new tn(n.segments,r)}class E{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ud(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(w);if(i&&i!==Ga(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function Be(n,t,e){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return _t(n,t,e);const r=function(n,t,e){let r=0,i=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return l;const d=n.segments[i],f=e[r];if(w(f))break;const m=`${f}`,b=r<e.length-1?e[r+1]:null;if(i>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!cd(m,b,d))return l;r+=2}else{if(!cd(m,{},d))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new tn(n.segments.slice(0,r.pathIndex),{});return l.children[Vt]=new tn(n.segments.slice(r.pathIndex),n.children),_t(l,0,i)}return r.match&&0===i.length?new tn(n.segments,{}):r.match&&!n.hasChildren()?On(n,t,e):r.match?_t(n,0,i):On(n,t,e)}function _t(n,t,e){if(0===e.length)return new tn(n.segments,{});{const r=function(n){return w(n[0])?n[0].outlets:{[Vt]:n}}(e),i={};return Mr(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[d]=Be(n.children[d],t,l))}),Mr(n.children,(l,d)=>{void 0===r[d]&&(i[d]=l)}),new tn(n.segments,i)}}function On(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const l=e[i];if(w(l)){const m=un(l.outlets);return new tn(r,m)}if(0===i&&ud(e[0])){r.push(new rd(n.segments[t].path,aa(e[0]))),i++;continue}const d=w(l)?l.outlets[Vt]:`${l}`,f=i<e.length-1?e[i+1]:null;d&&f&&ud(f)?(r.push(new rd(d,aa(f))),i+=2):(r.push(new rd(d,{})),i++)}return new tn(r,{})}function un(n){const t={};return Mr(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=On(new tn([],{}),0,e))}),t}function aa(n){const t={};return Mr(n,(e,r)=>t[r]=`${e}`),t}function cd(n,t,e){return n==e.path&&ds(t,e.parameters)}class Up{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Bl(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=ld(e);t.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,i[d],r),delete i[d]}),Mr(i,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(i===l)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,r);else l&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,l=ld(t);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=ld(e);t.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new ks(l.value.snapshot))}),t.children.length&&this.forwardEvent(new zs(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(Bl(i),i===l)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),$p(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=m,d.outlet&&d.outlet.activateWith(i,m),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}function $p(n){Bl(n.value),n.children.forEach($p)}class xh{constructor(t,e){this.routes=t,this.module=e}}function la(n){return"function"==typeof n}function Ul(n){return n instanceof Ll}const Mh=Symbol("INITIAL_VALUE");function Rh(){return tr(n=>function(...n){let t,e;return(0,Xo.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,Ns.k)(n[0])&&(n=n[0]),(0,Ru.n)(n,e).lift(new Ba(t))}(n.map(t=>t.pipe(_i(1),ta(Mh)))).pipe(Ua((t,e)=>{let r=!1;return e.reduce((i,l,d)=>i!==Mh?i:(l===Mh&&(r=!0),r||!1!==l&&d!==e.length-1&&!Ul(l)?i:l),t)},Mh),Wn(t=>t!==Mh),(0,ut.U)(t=>Ul(t)?t:!0===t),_i(1)))}let Ri=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[zp]},encapsulation:2}),n})();function kh(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];V0(r,zS(t,r))}}function V0(n,t){n.children&&kh(n.children,t)}function zS(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function B0(n){const t=n.children&&n.children.map(B0),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Vt&&(e.component=Ri),e}function Ys(n){return n.outlet||Vt}function fE(n,t){const e=n.filter(r=>Ys(r)===t);return e.push(...n.filter(r=>Ys(r)!==t)),e}const U0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function I_(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},U0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||Fl)(e,n,t);if(!l)return Object.assign({},U0);const d={};Mr(l.posParams,(m,b)=>{d[b]=m.path});const f=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:f,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function Gp(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Ph(n,t,r)&&Ys(r)!==Vt)}(n,e,r)){const d=new tn(t,function(n,t,e,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&Ys(l)!==Vt){const d=new tn([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,i[Ys(l)]=d}return i}(n,t,r,new tn(e,n.children)));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Ph(n,t,r))}(n,e,r)){const d=new tn(n.segments,function(n,t,e,r,i,l){const d={};for(const f of r)if(Ph(n,e,f)&&!i[Ys(f)]){const m=new tn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===l?n.segments.length:t.length,d[Ys(f)]=m}return Object.assign(Object.assign({},i),d)}(n,t,e,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const l=new tn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function Ph(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function $0(n,t,e,r){return!!(Ys(n)===r||r!==Vt&&Ph(t,e,n))&&("**"===n.path||I_(t,n,e).matched)}function gE(n,t,e){return 0===t.length&&!n.children[e]}class A_{constructor(t){this.segmentGroup=t||null}}class H0{constructor(t){this.urlTree=t}}function hd(n){return new qn.y(t=>t.error(new A_(n)))}function mE(n){return new qn.y(t=>t.error(new H0(n)))}function QS(n){return new qn.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class eN{constructor(t,e,r,i,l){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}apply(){const t=Gp(this.urlTree.root,[],[],this.config).segmentGroup,e=new tn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Vt).pipe((0,ut.U)(l=>this.createUrlTree(j0(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(No(l=>{if(l instanceof H0)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof A_?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Vt).pipe((0,ut.U)(i=>this.createUrlTree(j0(i),t.queryParams,t.fragment))).pipe(No(i=>{throw i instanceof A_?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new tn([],{[Vt]:t}):t;return new Ll(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,ut.U)(l=>new tn([],l))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,en.D)(i).pipe(Ou(l=>{const d=r.children[l],f=fE(e,l);return this.expandSegmentGroup(t,f,d,l).pipe((0,ut.U)(m=>({segment:m,outlet:l})))}),Ua((l,d)=>(l[d.outlet]=d.segment,l),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Wn((i,l)=>n(i,l,r)):Mp.y,bh(1),e?Zs(t):Rs(()=>new xs))}())}expandSegment(t,e,r,i,l,d){return(0,en.D)(r).pipe(Ou(f=>this.expandSegmentAgainstRoute(t,e,r,f,i,l,d).pipe(No(b=>{if(b instanceof A_)return(0,dt.of)(null);throw b}))),yr(f=>!!f),No((f,m)=>{if(f instanceof xs||"EmptyError"===f.name){if(gE(e,i,l))return(0,dt.of)(new tn([],{}));throw new A_(e)}throw f}))}expandSegmentAgainstRoute(t,e,r,i,l,d,f){return $0(i,e,l,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,l,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d):hd(e):hd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?mE(l):this.lineralizeSegments(r,l).pipe((0,xr.zg)(d=>{const f=new tn(d,{});return this.expandSegment(t,f,e,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){const{matched:f,consumedSegments:m,lastChild:b,positionalParamSegments:T}=I_(e,i,l);if(!f)return hd(e);const A=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?mE(A):this.lineralizeSegments(i,A).pipe((0,xr.zg)(M=>this.expandSegment(t,e,r,M.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(t,e,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,dt.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,ut.U)(M=>(r._loadedConfig=M,new tn(i,{})))):(0,dt.of)(new tn(i,{}));const{matched:d,consumedSegments:f,lastChild:m}=I_(e,r,i);if(!d)return hd(e);const b=i.slice(m);return this.getChildConfig(t,r,i).pipe((0,xr.zg)(A=>{const M=A.module,O=A.routes,{segmentGroup:G,slicedSegments:ie}=Gp(e,f,b,O),_e=new tn(G.segments,G.children);if(0===ie.length&&_e.hasChildren())return this.expandChildren(M,O,_e).pipe((0,ut.U)(st=>new tn(f,st)));if(0===O.length&&0===ie.length)return(0,dt.of)(new tn(f,{}));const $e=Ys(r)===l;return this.expandSegment(M,_e,O,ie,$e?Vt:l,!0).pipe((0,ut.U)(it=>new tn(f.concat(it.segments),it.children)))}))}getChildConfig(t,e,r){return e.children?(0,dt.of)(new xh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,dt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,xr.zg)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,ut.U)(l=>(e._loadedConfig=l,l))):(n=e,new qn.y(t=>t.error(p_(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,dt.of)(new xh([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;if(!i||0===i.length)return(0,dt.of)(!0);const l=i.map(d=>{const f=t.get(d);let m;if((n=f)&&la(n.canLoad))m=f.canLoad(e,r);else{if(!la(f))throw new Error("Invalid CanLoad guard");m=f(e,r)}var n;return Hr(m)});return(0,dt.of)(l).pipe(Rh(),(0,ur.b)(d=>{if(!Ul(d))return;const f=p_(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,ut.U)(d=>!0===d))}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,dt.of)(r);if(i.numberOfChildren>1||!i.children[Vt])return QS(t.redirectTo);i=i.children[Vt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const l=this.createSegmentGroup(t,e.root,r,i);return new Ll(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Mr(t,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=e[f]}else r[l]=i}),r}createSegmentGroup(t,e,r,i){const l=this.createSegments(t,e.segments,r,i);let d={};return Mr(e.children,(f,m)=>{d[m]=this.createSegmentGroup(t,f,r,i)}),new tn(l,d)}createSegments(t,e,r,i){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,i):this.findOrReturn(l,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function j0(n){const t={};for(const r of Object.keys(n.children)){const l=j0(n.children[r]);(l.segments.length>0||l.hasChildren())&&(t[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Vt]){const t=n.children[Vt];return new tn(n.segments.concat(t.segments),t.children)}return n}(new tn(n.segments,t))}class qp{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class hs{constructor(t,e){this.component=t,this.route=e}}function _E(n,t,e){const r=n._root;return N_(r,t?t._root:null,e,[r.value])}function S_(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function N_(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=ld(t);return n.children.forEach(d=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const m=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Za(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Za(n.url,t.url)||!ds(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gu(n,t)||!ds(n.queryParams,t.queryParams);case"paramsChange":default:return!Gu(n,t)}}(d,l,l.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new qp(r)):(l.data=d.data,l._resolvedData=d._resolvedData),N_(n,t,l.component?f?f.children:null:e,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new hs(f.outlet.component,d))}else d&&Wp(t,f,i),i.canActivateChecks.push(new qp(r)),N_(n,null,l.component?f?f.children:null:e,r,i)})(d,l[d.value.outlet],e,r.concat([d.value]),i),delete l[d.value.outlet]}),Mr(l,(d,f)=>Wp(d,e.getContext(f),i)),i}function Wp(n,t,e){const r=ld(n),i=n.value;Mr(r,(l,d)=>{Wp(l,i.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new hs(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class G0{}function x_(n){return new qn.y(t=>t.error(n))}class wE{constructor(t,e,r,i,l,d){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const t=Gp(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Vt);if(null===e)return null;const r=new Sh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new oa(r,e),l=new za(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,r=C_(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const l of Object.keys(e.children)){const d=e.children[l],f=fE(t,l),m=this.processSegmentGroup(f,d,l);if(null===m)return null;r.push(...m)}const i=M_(r);return i.sort((t,e)=>t.value.outlet===Vt?-1:e.value.outlet===Vt?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const l of t){const d=this.processSegmentAgainstRoute(l,e,r,i);if(null!==d)return d}return gE(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!$0(t,e,r,i))return null;let l,d=[],f=[];if("**"===t.path){const O=r.length>0?Ga(r).parameters:{};l=new Sh(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fd(t),Ys(t),t.component,t,q0(e),aN(e)+r.length,R_(t))}else{const O=I_(e,t,r);if(!O.matched)return null;d=O.consumedSegments,f=r.slice(O.lastChild),l=new Sh(d,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,fd(t),Ys(t),t.component,t,q0(e),aN(e)+d.length,R_(t))}const m=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:T}=Gp(e,d,f,m.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);var n;if(0===T.length&&b.hasChildren()){const O=this.processChildren(m,b);return null===O?null:[new oa(l,O)]}if(0===m.length&&0===T.length)return[new oa(l,[])];const A=Ys(t)===i,M=this.processSegment(m,b,T,A?Vt:i);return null===M?null:[new oa(l,M)]}}function EE(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function M_(n){const t=[],e=new Set;for(const r of n){if(!EE(r)){t.push(r);continue}const i=t.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=M_(r.children);t.push(new oa(r.value,i))}return t.filter(r=>!e.has(r))}function q0(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function aN(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function fd(n){return n.data||{}}function R_(n){return n.resolve||{}}function Z0(n){return tr(t=>{const e=n(t);return e?(0,en.D)(e).pipe((0,ut.U)(()=>t)):(0,dt.of)(t)})}class fN extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const k_=new a.OlP("ROUTES");class P_{constructor(t,e,r,i){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,ut.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=l.create(t);return new xh(g_(d.injector.get(k_,void 0,a.XFs.Self|a.XFs.Optional)).map(B0),d)}),No(l=>{throw e._loader$=void 0,l}));return e._loader$=new A0.c(i,()=>new Tn.xQ).pipe((0,Ha.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,en.D)(this.loader.load(t)):Hr(t()).pipe((0,xr.zg)(e=>e instanceof a.YKP?(0,dt.of)(e):(0,en.D)(this.compiler.compileModuleAsync(e))))}}class IE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wu,this.attachRef=null}}class Wu{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new IE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class gN{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function AE(n){throw n}function SE(n,t,e){return t.parse("/")}function Zu(n,t){return(0,dt.of)(null)}const NE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fs=(()=>{class n{constructor(e,r,i,l,d,f,m,b){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tn.xQ,this.errorHandler=AE,this.malformedUriErrorHandler=SE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zu,afterPreactivation:Zu},this.urlHandlingStrategy=new gN,this.routeReuseStrategy=new fN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(a.h0i),this.console=d.get(a.c2e);const M=d.get(a.R0b);this.isNgZoneEnabled=M instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new Ll(new tn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new P_(f,m,O=>this.triggerEvent(new Tr(O)),O=>this.triggerEvent(new Pl(O))),this.routerState=w_(this.currentUrlTree,this.rootComponentType),this.transitions=new _r({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(Wn(i=>0!==i.id),(0,ut.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),tr(i=>{let l=!1,d=!1;return(0,dt.of)(i).pipe((0,ur.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),tr(f=>{const m=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return F_(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,dt.of)(f).pipe(tr(A=>{const M=this.transitions.getValue();return r.next(new oe(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),M!==this.transitions.getValue()?li.E:Promise.resolve(A)}),function(n,t,e,r){return tr(i=>function(n,t,e,r,i){return new eN(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,ut.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ur.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(n,t,e,r,i){return(0,xr.zg)(l=>function(n,t,e,r,i="emptyOnly",l="legacy"){try{const d=new wE(n,t,e,r,i,l).recognize();return null===d?x_(new G0):(0,dt.of)(d)}catch(d){return x_(d)}}(n,t,l.urlAfterRedirects,e(l.urlAfterRedirects),r,i).pipe((0,ut.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ur.b)(A=>{"eager"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(A.urlAfterRedirects,A),this.browserUrlTree=A.urlAfterRedirects);const M=new Tt(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(M)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:O,source:G,restoredState:ie,extras:_e}=f,$e=new oe(M,this.serializeUrl(O),G,ie);r.next($e);const qe=w_(O,this.rootComponentType).snapshot;return(0,dt.of)(Object.assign(Object.assign({},f),{targetSnapshot:qe,urlAfterRedirects:O,extras:Object.assign(Object.assign({},_e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),li.E}),Z0(f=>{const{targetSnapshot:m,id:b,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:O}}=f;return this.hooks.beforePreactivation(m,{navigationId:b,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!O})}),(0,ur.b)(f=>{const m=new Ot(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,ut.U)(f=>Object.assign(Object.assign({},f),{guards:_E(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,xr.zg)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:d}}=e;return 0===d.length&&0===l.length?(0,dt.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,en.D)(n).pipe((0,xr.zg)(i=>function(n,t,e,r,i){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,dt.of)(!0);const d=l.map(f=>{const m=S_(f,t,i);let b;if(function(n){return n&&la(n.canDeactivate)}(m))b=Hr(m.canDeactivate(n,t,e,r));else{if(!la(m))throw new Error("Invalid CanDeactivate guard");b=Hr(m(n,t,e,r))}return b.pipe(yr())});return(0,dt.of)(d).pipe(Rh())}(i.component,i.route,e,t,r)),yr(i=>!0!==i,!0))}(d,r,i,n).pipe((0,xr.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,r){return(0,en.D)(t).pipe(Ou(i=>qs(function(n,t){return null!==n&&t&&t(new td(n)),(0,dt.of)(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new ja(n)),(0,dt.of)(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(d=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(d)).filter(d=>null!==d).map(d=>xi(()=>{const f=d.guards.map(m=>{const b=S_(m,d.node,e);let T;if(function(n){return n&&la(n.canActivateChild)}(b))T=Hr(b.canActivateChild(r,n));else{if(!la(b))throw new Error("Invalid CanActivateChild guard");T=Hr(b(r,n))}return T.pipe(yr())});return(0,dt.of)(f).pipe(Rh())}));return(0,dt.of)(l).pipe(Rh())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,dt.of)(!0);const i=r.map(l=>xi(()=>{const d=S_(l,t,e);let f;if(function(n){return n&&la(n.canActivate)}(d))f=Hr(d.canActivate(t,n));else{if(!la(d))throw new Error("Invalid CanActivate guard");f=Hr(d(t,n))}return f.pipe(yr())}));return(0,dt.of)(i).pipe(Rh())}(n,i.route,e))),yr(i=>!0!==i,!0))}(r,l,n,t):(0,dt.of)(f)),(0,ut.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,ur.b)(f=>{if(Ul(f.guardsResult)){const b=p_(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const m=new nn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),Wn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Z0(f=>{if(f.guards.canActivateChecks.length)return(0,dt.of)(f).pipe((0,ur.b)(m=>{const b=new Ft(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}),tr(m=>{let b=!1;return(0,dt.of)(m).pipe(function(n,t){return(0,xr.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,dt.of)(e);let l=0;return(0,en.D)(i).pipe(Ou(d=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return(0,dt.of)({});const l={};return(0,en.D)(i).pipe((0,xr.zg)(d=>function(n,t,e,r){const i=S_(n,t,r);return Hr(i.resolve?i.resolve(t,e):i(t,e))}(n[d],t,e,r).pipe((0,ur.b)(f=>{l[d]=f}))),bh(1),(0,xr.zg)(()=>Object.keys(l).length===i.length?(0,dt.of)(l):li.E))}(n._resolve,n,t,r).pipe((0,ut.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),C_(n,e).resolve),null)))}(d.route,r,n,t)),(0,ur.b)(()=>l++),bh(1),(0,xr.zg)(d=>l===i.length?(0,dt.of)(e):li.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ur.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,ur.b)(m=>{const b=new Er(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}))}),Z0(f=>{const{targetSnapshot:m,id:b,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:O}}=f;return this.hooks.afterPreactivation(m,{navigationId:b,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!O})}),(0,ut.U)(f=>{const m=function(n,t,e){const r=qu(n,t._root,e?e._root:void 0);return new Ah(r,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,ur.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,ut.U)(r=>(new Up(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,ur.b)({next(){l=!0},complete(){l=!0}}),function(n){return t=>t.lift(new S(n))}(()=>{var f;if(!l&&!d){const m=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,m)):this.cancelNavigationTransition(i,m)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),No(f=>{if(d=!0,function(n){return n&&n[Fu]}(f)){const m=Ul(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Oe(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||F_(i.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new et(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return li.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:l,urlTree:d}=r,f={replaceUrl:!0};if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}this.scheduleNavigation(d,i,l,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const i=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!i||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){kh(e),this.config=e.map(B0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:l,fragment:d,queryParamsHandling:f,preserveFragment:m}=r,b=i||this.routerState.root,T=m?this.currentUrlTree.fragment:d;let A=null;switch(f){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=l||null}return null!==A&&(A=this.removeEmptyProps(A)),function(n,t,e,r,i){if(0===e.length)return g(t.root,t.root,t,r,i);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new E(!0,0,n);let t=0,e=!1;const r=n.reduce((i,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return Mr(l.outlets,(m,b)=>{f[b]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===d?(l.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?e=!0:".."===f?t++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new E(e,t,r)}(e);if(l.toRoot())return g(t.root,new tn([],{}),t,r,i);const d=function(n,t,e){if(n.isAbsolute)return new R(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new R(l,l===t.root,0)}const r=ud(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,l=e;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new R(r,!1,i-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,t,n),f=d.processChildren?_t(d.segmentGroup,d.index,l.commands):Be(d.segmentGroup,d.index,l.commands);return g(d.segmentGroup,f,t,r,i)}(b,this.currentUrlTree,e,A,null!=T?T:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Ul(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},NE):!1===r?Object.assign({},xE):r,Ul(e))return nd(this.currentUrlTree,e,i);const l=this.parseUrl(e);return nd(this.currentUrlTree,l,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const l=e[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new fe(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,l,d){var f,m;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),T=F_(r)&&b&&!F_(b.source),O=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===e.toString();if(T&&O)return Promise.resolve(!0);let G,ie,_e;d?(G=d.resolve,ie=d.reject,_e=d.promise):_e=new Promise((it,st)=>{G=it,ie=st});const $e=++this.navigationId;let qe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),qe=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):qe=0,this.setTransition({id:$e,targetPageId:qe,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:G,reject:ie,promise:_e,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_e.catch(it=>Promise.reject(it))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(e,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Oe(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.DyG),a.LFG(Op),a.LFG(Wu),a.LFG(mt),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function F_(n){return"imperative"!==n}let zp=(()=>{class n{constructor(e,r,i,l,d){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=l||Vt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new B_(e,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Wu),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class B_{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===ju?this.route:t===Wu?this.childContexts:this.parent.get(t,e)}}class Y0{}class J0{preload(t,e){return(0,dt.of)(null)}}let U_=(()=>{class n{constructor(e,r,i,l,d){this.router=e,this.injector=l,this.preloadingStrategy=d,this.loader=new P_(r,i,b=>e.triggerEvent(new Tr(b)),b=>e.triggerEvent(new Pl(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Wn(e=>e instanceof fe),Ou(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(e,l)):l.children&&i.push(this.processRoutes(e,l.children));return(0,en.D)(i).pipe((0,cs.J)(),(0,ut.U)(l=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,dt.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,xr.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(fs),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(Y0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),gd=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof oe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof fe&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof na&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new na(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(fs),a.LFG(Mc),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const zu=new a.OlP("ROUTER_CONFIGURATION"),RE=new a.OlP("ROUTER_FORROOT_GUARD"),kE=[mt,{provide:Op,useClass:Bu},{provide:fs,useFactory:function(n,t,e,r,i,l,d,f={},m,b){const T=new fs(null,n,t,e,r,i,l,g_(d));return m&&(T.urlHandlingStrategy=m),b&&(T.routeReuseStrategy=b),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,T),f.enableTracing&&T.events.subscribe(A=>{var M,O;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(O=console.groupEnd)||void 0===O||O.call(console)}),T},deps:[Op,Wu,mt,a.zs3,a.v3s,a.Sil,k_,zu,[class{},new a.FiY],[class{},new a.FiY]]},Wu,{provide:ju,useFactory:function(n){return n.routerState.root},deps:[fs]},{provide:a.v3s,useClass:a.EAV},U_,J0,class{preload(t,e){return e().pipe(No(()=>(0,dt.of)(null)))}},{provide:zu,useValue:{enableTracing:!1}}];function Q0(){return new a.PXZ("Router",fs)}let X0=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[kE,eb(e),{provide:RE,useFactory:_N,deps:[[fs,new a.FiY,new a.tp0]]},{provide:zu,useValue:r||{}},{provide:Ve,useFactory:PE,deps:[X,[new a.tBr(pe),new a.FiY],zu]},{provide:gd,useFactory:YO,deps:[fs,Mc,zu]},{provide:Y0,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:J0},{provide:a.PXZ,multi:!0,useFactory:Q0},[tb,{provide:a.ip1,multi:!0,useFactory:OE,deps:[tb]},{provide:FE,useFactory:bN,deps:[tb]},{provide:a.tb,multi:!0,useExisting:FE}]]}}static forChild(e){return{ngModule:n,providers:[eb(e)]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(RE,8),a.LFG(fs,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function YO(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new gd(n,t,e)}function PE(n,t,e={}){return e.useHash?new Je(n,t):new ke(n,t)}function _N(n){return"guarded"}function eb(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:k_,multi:!0,useValue:n}]}let tb=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tn.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),l=this.injector.get(fs),d=this.injector.get(zu);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,dt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(zu),i=this.injector.get(U_),l=this.injector.get(gd),d=this.injector.get(fs),f=this.injector.get(a.z2F);e===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),l.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function OE(n){return n.appInitializer.bind(n)}function bN(n){return n.bootstrapListener.bind(n)}const FE=new a.OlP("Router Initializer"),LE=[];let CN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[X0.forRoot(LE)],X0]}),n})();var be=B(8239),Yp=B(8873),$t=B(4292),Yu=B(3637),$_=B(6561);function ca(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}class VE{constructor(t,e){this.http=t,this.appComponent=e,this.robo=null,this._1second=1e3,this._5seconds=5*this._1second,this.getMovingAverage=(r=[])=>{const i=[];let l=0,d=0;for(let f=0;f<r.length;f++)l+=r[f],d++,i[f]=l/d;return i}}stop(){}loadCandleList(t){this.sinal=t,null==this.robo&&this.http.get(`https://api.binance.com/api/v3/klines?symbol=${t.moeda}&interval=5m&limit=26`).subscribe(r=>{let l=this.verificarCompra(r);l.canBuy&&(l.sinal=this.sinal,l.id=this.sinal.moeda+this.sinal.tipo,this.appComponent.acionarAlerta(l))},r=>console.error(r))}verificarCompra(t){const e=this.mapCandleResult(t);this.fillMA5(e),this.fillM26(e),this.fillMA12(e);let r=e[e.length-1],i=e[e.length-2],l=e[e.length-3],d=t[t.length-1],f=t[t.length-2],m=t[t.length-3];console.log(`Moeda ${this.sinal.moeda}-${this.sinal.tipo} ${this.sinal.priceCoinPercentage}% `);let b=!1;"LONG"===this.sinal.tipo&&(r.MA5>r.MA12&&m.MA5<m.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26||this.sinal.priceCoin>r.MA12&&this.isGreenCandle(d)&&this.isGreenCandle(f)&&this.isGreenCandle(m)&&r.MA5<r.MA12&&i.MA5<i.MA12&&l.MA5<l.MA12)&&(b=!0);let T=!1;"SHORT"===this.sinal.tipo&&r.MA5<r.MA26&&l.MA5>l.MA26&&r.MA12>r.MA26&&r.MA12>r.MA5&&(T=!0);let A=b||T;console.log("Resultado: "+A);let M={canBuy:A,stopLossPrice:0};if(A){let O=t.length-1,G=parseFloat(t[O][2]),ie=parseFloat(t[O][4]),_e=parseFloat(t[--O][2]),$e=parseFloat(t[--O][4]),qe=parseFloat(t[--O][2]),it=parseFloat(t[--O][4]),st=0;st="LONG"===this.sinal.tipo?[ie,$e,it].sort((Nt,Wt)=>Nt-Wt)[0]:[G,_e,qe].sort((Nt,Wt)=>Wt-Nt)[0],M.stopLossPrice=st}return M}mapCandleResult(t=[]){let e=[];return t.forEach(r=>{let i=(parseFloat(r[1])+parseFloat(r[4]))/2;e.push({data:Yp(r[0]).add(3,"hours").format("HH:mm:ss"),mediana:parseFloat(String(i)),MA5:0,MA12:0,MA26:0})}),e}fillMA5(t=[]){let e=[];for(let i=t.length-5;i<t.length;i++)e.push(t[i]);let r=this.sinal.priceCoin.toString().length;e=this.getMovingAverage(e.map(i=>i.mediana));for(let i=t.length-5;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA5=l}}fillMA12(t=[]){let e=[];for(let i=t.length-12;i<t.length;i++)e.push(t[i]);e=this.getMovingAverage(e.map(i=>i.mediana));let r=this.sinal.priceCoin.toString().length;for(let i=t.length-12;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA12=l}}fillM26(t=[]){let e=t.map(l=>l.mediana),r=this.getMovingAverage(e),i=this.sinal.priceCoin.toString().length;t.forEach((l,d)=>{let f=r[d];f=parseFloat(f.toString().substr(0,i)),l.MA26=f})}checkCandleSinal(t){let e=t[t.length-1],r=t[t.length-2],i=t[t.length-3],l=parseFloat(e[1]),d=parseFloat(e[4]),m=(parseFloat(e[2]),parseFloat(e[3])),A=(parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[2])),M=parseFloat(r[3]),ie=(parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[2])),_e=parseFloat(i[3]),$e=!1;return $e="LONG"===this.sinal.tipo?l<d&&d>A&&d>ie&&m>M&&m>_e:l>d&&d<M&&d<_e&&d<A&&d<ie,$e}checkDiffMAIsValid(t,e){let i=0,l=0,d=0,f=0;for(let b=e.length-3;b<e.length;b++){let T=e[b],A=e[b+1];if(b===e.length-1){"LONG"===t?(T.MA5>T.MA12&&l++,T.MA5>T.MA26&&d++,T.MA12>T.MA26&&f++):(T.MA5<T.MA12&&l--,T.MA5<T.MA26&&d--,T.MA12<T.MA26&&f--);break}"LONG"===t?(T.MA5<A.MA5&&i++,T.MA5>T.MA12&&l++,T.MA5>T.MA26&&d++,T.MA12>T.MA26&&f++):(T.MA5>A.MA5&&i--,T.MA5<T.MA12&&l--,T.MA5<T.MA26&&d--,T.MA12<T.MA26&&f--)}let m=!1;return("LONG"===t&&2===i&&3===l&&3===d&&3===f||"SHORT"===t&&-2===i&&-3===l&&-3===d&&-3===f)&&(m=!0),m}calculate_MA5_MA26_MA12(t,e){let r=t[t.length-1],i=this.checkCandleSinal(e[e.length-1]),l=!1,d=!1,f=!1;"LONG"===this.sinal.tipo?(l=r.MA5>r.MA26&&r.MA26>r.MA12,d=this.sinal.priceCoin>r.MA5):(l=r.MA5<r.MA26&&r.MA26<r.MA12,d=this.sinal.priceCoin<r.MA5);let m=0,b=0;for(let A=t.length-3;A<t.length;A++){let M=t[A],O=t[A+1];if(!O)break;"LONG"===this.sinal.tipo?(M.MA5<O.MA5&&m++,M.MA26<O.MA26&&b++):(M.MA5>O.MA5&&m--,M.MA26>O.MA26&&b--)}return("LONG"===this.sinal.tipo&&2===m&&2===b||"SHORT"===this.sinal.tipo&&-2===m&&-2===b)&&(f=!0),f&&i&&l&&d}calculate_MA5_MA12(t,e){let r=t[t.length-1],i=this.checkDiffMAIsValid(this.sinal.tipo,t),l=this.checkCandleSinal(e),d=!1,f=!1;return"LONG"===this.sinal.tipo?(d=r.MA5>r.MA12&&r.MA5>r.MA26&&r.MA12>r.MA26,f=this.sinal.priceCoin>r.MA5):(d=r.MA5<r.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26,f=this.sinal.priceCoin<r.MA5),i&&l&&d&&f}isGreenCandle(t){return parseFloat(t[1])<parseFloat(t[4])}isRedCandle(t){return parseFloat(t[1])>parseFloat(t[4])}}var Kp=B(6682),j_=B(8819);function Ks(n,t){return e=>e.lift(new nb(n,t))}class nb{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new BE(t,this.compare,this.keySelector))}}class BE extends ar.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function Lh(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new JO(n,e))}}class JO{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new UE(t,this.observables,this.project))}}class UE extends yh{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let l=0;l<i;l++)this.toRespond.push(l);for(let l=0;l<i;l++)this.add(Jn(this,e[l],void 0,l))}notifyNext(t,e,r){this.values[r]=e;const i=this.toRespond;if(i.length>0){const l=i.indexOf(r);-1!==l&&i.splice(l,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class Hl{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new G_(t,this.predicate))}}class G_ extends ar.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var wn=B(8971),jr=B(8939),rb=(B(4828),B(3394)),Ro=B(3910),Os=B(8026),L=B(3854),Ja=B(5422);const ib="@firebase/database";let ob="";function q_(n){ob=n}class XO{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,L.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,L.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class eF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,L.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const EN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new XO(t)}}catch(t){}return new eF},Vh=EN("localStorage"),$E=EN("sessionStorage"),Jp=new Ja.Yd("@firebase/database"),TN=function(){let n=1;return function(){return n++}}(),DN=function(n){const t=(0,L.dS)(n),e=new L.gQ;e.update(t);const r=e.digest();return L.US.encodeByteArray(r)},W_=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=W_.apply(null,r):t+="object"==typeof r?(0,L.Pz)(r):r,t+=" "}return t};let Bh=null,IN=!0;const jl=function(n,t){(0,L.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Jp.logLevel=Ja.in.VERBOSE,Bh=Jp.log.bind(Jp),t&&$E.set("logging_enabled",!0)):"function"==typeof n?Bh=n:(Bh=null,$E.remove("logging_enabled"))},Jr=function(...n){if(!0===IN&&(IN=!1,null===Bh&&!0===$E.get("logging_enabled")&&jl(!0)),Bh){const t=W_.apply(null,n);Bh(t)}},Qp=function(n){return function(...t){Jr(n,...t)}},Z_=function(...n){const t="FIREBASE INTERNAL ERROR: "+W_(...n);Jp.error(t)},ko=function(...n){const t=`FIREBASE FATAL ERROR: ${W_(...n)}`;throw Jp.error(t),new Error(t)},qi=function(...n){const t="FIREBASE WARNING: "+W_(...n);Jp.warn(t)},z_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Qa="[MIN_NAME]",Xa="[MAX_NAME]",Uh=function(n,t){if(n===t)return 0;if(n===Qa||t===Xa)return-1;if(t===Qa||n===Xa)return 1;{const e=tg(n),r=tg(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},lb=function(n,t){return n===t?0:n<t?-1:1},Xp=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Pz)(t))},Y_=function(n){if("object"!=typeof n||null===n)return(0,L.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,L.Pz)(t[r]),e+=":",e+=Y_(n[t[r]]);return e+="}",e},HE=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function vi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const $h=function(n){(0,L.hu)(!z_(n),"Invalid JSON number");const r=1023;let i,l,d,f,m;0===n?(l=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(m=52;m;m-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(m=11;m;m-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(i?1:0),b.reverse();const T=b.join("");let A="";for(m=0;m<64;m+=8){let M=parseInt(T.substr(m,8),2).toString(16);1===M.length&&(M="0"+M),A+=M}return A.toLowerCase()},eg=new RegExp("^-?(0*)\\d{1,10}$"),md=-2147483648,cb=2147483647,tg=function(n){if(eg.test(n)){const t=Number(n);if(t>=md&&t<=cb)return t}return null},_d=function(n){try{n()}catch(t){setTimeout(()=>{throw qi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},yd=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class jE{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){qi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class K_{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Jr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qi(t)}}let ng=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const pb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WE="websocket",ZE="long_polling";class zE{constructor(t,e,r,i,l=!1,d="",f=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vh.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Vh.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function gb(n,t,e){let r;if((0,L.hu)("string"==typeof t,"typeof type must == string"),(0,L.hu)("object"==typeof e,"typeof params must == object"),t===WE)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==ZE)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return vi(e,(l,d)=>{i.push(l+"="+d)}),r+i.join("&")}class nF{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,L.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,L.p$)(this.counters_)}}const mb={},ig={};function J_(n){const t=n.toString();return mb[t]||(mb[t]=new nF),mb[t]}class xN{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&_d(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Gh{constructor(t,e,r,i,l,d,f){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qp(t),this.stats_=J_(e),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),gb(e,ZE,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new xN(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sg((...l)=>{const[d,f,m,b,T]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=m;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&pb.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gh.forceAllow_=!0}static forceDisallow(){Gh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Gh.forceAllow_&&(Gh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,L.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,L.h$)(e),i=HE(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,L.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class sg{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=TN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=sg.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){Jr("frame writing exception"),f.stack&&Jr(f.stack),Jr(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Jr("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,L.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{Jr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Ju=null;"undefined"!=typeof MozWebSocket?Ju=MozWebSocket:"undefined"!=typeof WebSocket&&(Ju=WebSocket);let vd=(()=>{class n{constructor(e,r,i,l,d,f,m){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qp(this.connId),this.stats_=J_(r),this.connURL=n.connectionURL_(r,f,m,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,l){const d={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&pb.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),l&&(d.ac=l),gb(e,WE,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vh.set("previous_websocket_failure",!0);try{if((0,L.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${ob}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new Ju(this.connURL,[],l)}else this.mySock=new Ju(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==Ju&&!n.forceDisallow_}static previouslyFailed(){return Vh.isInMemoryStorage||!0===Vh.get("previous_websocket_failure")}markConnectionHealthy(){Vh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,L.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=HE(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class vb{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Gh,vd]}initTransports_(t){const e=vd&&vd.isAvailable();let r=e&&!vd.previouslyFailed();if(t.webSocketOnly&&(e||qi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[vd];else{const i=this.transports_=[];for(const l of vb.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class og{constructor(t,e,r,i,l,d,f,m,b,T){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=b,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qp("c:"+this.id+":"),this.transportManager_=new vb(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=yd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Xp("t",t),r=Xp("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Xp("t",t),r=Xp("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Xp("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?Z_("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Z_("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&qi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),yd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class oT{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class aT{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,L.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let l=0;l<i.length;l++)if(i[l].callback===e&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(t){(0,L.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Ab extends aT{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ab}getInitialEvent(t){return(0,L.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function mn(){return new Cn("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function tl(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Cn(n.pieces_,t)}function Nb(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ag(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function X_(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Cn(t,0)}function vr(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Cn)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Cn(e,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function Wi(n,t){const e=an(n),r=an(t);if(null===e)return t;if(e===r)return Wi(Zn(n),Zn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function qh(n,t){const e=ag(n,0),r=ag(t,0);for(let i=0;i<e.length&&i<r.length;i++){const l=Uh(e[i],r[i]);if(0!==l)return l}return e.length===r.length?0:e.length<r.length?-1:1}function ey(n,t){if(tl(n)!==tl(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function Po(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(tl(n)>tl(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class UN{constructor(t,e){this.errorPrefix_=e,this.parts_=ag(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);uT(this)}}function uT(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wd(n))}function wd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class xb extends aT{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new xb}getInitialEvent(t){return(0,L.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const ty=1e3;let iy,Wl=(()=>{class n extends oT{constructor(e,r,i,l,d,f,m,b){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=Qp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ty,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xb.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ab.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const l=++this.requestNumber_,d={r:l,a:e,b:r};this.log_((0,L.Pz)(d)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const r=new L.BH,i={p:e._path.toString(),q:e._queryObject},l={action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||l!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(e,r,i,l){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:r,query:e,tag:i};this.listens.get(f).set(d,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const d={p:i};e.tag&&(d.q=r._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest("q",d,m=>{const b=m.d,T=m.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,l),e.onComplete&&e.onComplete(T,b))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,L.r3)(e,"w")){const i=(0,L.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();qi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,L.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,L.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const d=l.s,f=l.d||"error";this.authToken_===e&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,L.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,r)}sendUnlisten_(e,r,i,l){this.log_("Unlisten on "+e+" for "+r);const d={p:e};l&&(d.q=i,d.t=l),this.sendRequest("n",d)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,l){const d={p:r,d:i};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(e,r,i,l){this.putInternal("p",e,r,i,l)}merge(e,r,i,l){this.putInternal("m",e,r,i,l)}putInternal(e,r,i,l,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,L.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):Z_("Unrecognized action received from server: "+(0,L.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ty,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ty,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ty),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,be.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),l=e.onRealtimeDisconnect_.bind(e),d=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let m=!1,b=null;const T=function(){b?b.close():(m=!0,l())};e.realtime_={close:T,sendRequest:function(O){(0,L.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(O)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[O,G]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);m?Jr("getToken() completed but was canceled"):(Jr("getToken() completed. Creating connection."),e.authToken_=O&&O.accessToken,e.appCheckToken_=G&&G.token,b=new og(d,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,l,ie=>{qi(ie+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch(O){e.log_("Failed to get token: "+O),m||(e.repoInfo_.nodeAdmin&&qi(O),T())}}})()}interrupt(e){Jr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Jr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ty,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(d=>Y_(d)).join("$"):"default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const i=new Cn(e).toString();let l;if(this.listens.has(i)){const d=this.listens.get(i);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,r){Jr("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Jr("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+ob.replace(/\./g,"-")]=1,(0,L.uI)()?e["framework.cordova"]=1:(0,L.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ab.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class fn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new fn(t,e)}}class ry{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new fn(Qa,t),i=new fn(Qa,e);return 0!==this.compare(r,i)}minPost(){return fn.MIN}}class Rb extends ry{static get __EMPTY_NODE(){return iy}static set __EMPTY_NODE(t){iy=t}compare(t,e){return Uh(t.name,e.name)}isDefinedOn(t){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return fn.MIN}maxPost(){return new fn(Xa,iy)}makePost(t,e){return(0,L.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new fn(t,iy)}toString(){return".key"}}const da=new Rb;class lg{constructor(t,e,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=e?r(t.key,e):1,i&&(d*=-1),d<0)t=this.isReverse_?t.left:t.right;else{if(0===d){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let sy,Oo=(()=>{class n{constructor(e,r,i,l,d){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=l?l:Fs.EMPTY_NODE,this.right=null!=d?d:Fs.EMPTY_NODE}copy(e,r,i,l,d){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let l=this;const d=i(e,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(e,r,i),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,l;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return Fs.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Fs{constructor(t,e=Fs.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Fs(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Oo.BLACK,null,null))}remove(t){return new Fs(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Oo.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new lg(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new lg(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new lg(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new lg(this.root_,null,this.comparator_,!0,t)}}function ug(n,t){return Uh(n.name,t.name)}function cg(n,t){return Uh(n,t)}Fs.EMPTY_NODE=new class{copy(t,e,r,i,l){return this}insert(t,e,r){return new Oo(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const kb=function(n){return"number"==typeof n?"number:"+$h(n):"string:"+n},Pb=function(n){if(n.isLeafNode()){const t=n.val();(0,L.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,L.r3)(t,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===sy||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===sy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let hT,fT,pT,Zh=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Pb(this.priorityNode_)}static set __childrenNodeConstructor(e){hT=e}static get __childrenNodeConstructor(){return hT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ln(e)?this:".priority"===an(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=an(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===tl(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+kb(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?$h(this.value_):this.value_,this.lazyHash_=DN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(l>=0,"Unknown leaf type: "+r),(0,L.hu)(d>=0,"Unknown leaf type: "+i),l===d?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class extends ry{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),l=r.compareTo(i);return 0===l?Uh(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return fn.MIN}maxPost(){return new fn(Xa,new Zh("[PRIORITY-POST]",pT))}makePost(t,e){const r=fT(t);return new fn(e,new Zh("[PRIORITY-POST]",r))}toString(){return".priority"}},GN=Math.log(2);class oF{constructor(t){this.count=parseInt(Math.log(t+1)/GN,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Ob=function(n,t,e,r){n.sort(t);const i=function(m,b){const T=b-m;let A,M;if(0===T)return null;if(1===T)return A=n[m],M=e?e(A):A,new Oo(M,A.node,Oo.BLACK,null,null);{const O=parseInt(T/2,10)+m,G=i(m,O),ie=i(O+1,b);return A=n[O],M=e?e(A):A,new Oo(M,A.node,Oo.BLACK,G,ie)}},f=function(m){let b=null,T=null,A=n.length;const M=function(G,ie){const _e=A-G,$e=A;A-=G;const qe=i(_e+1,$e),it=n[_e],st=e?e(it):it;O(new Oo(st,it.node,ie,null,qe))},O=function(G){b?(b.left=G,b=G):(T=G,b=G)};for(let G=0;G<m.count;++G){const ie=m.nextBitIsOne(),_e=Math.pow(2,m.count-(G+1));ie?M(_e,Oo.BLACK):(M(_e,Oo.BLACK),M(_e,Oo.RED))}return T}(new oF(n.length));return new Fs(r||t,f)};let dg;const zh={};class nl{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,L.hu)(zh&&nr,"ChildrenNode.ts has not been loaded"),dg=dg||new nl({".priority":zh},{".priority":nr}),dg}get(t){const e=(0,L.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Fs?e:null}hasIndex(t){return(0,L.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,L.hu)(t!==da,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=e.getIterator(fn.Wrap);let f,d=l.getNext();for(;d;)i=i||t.isDefinedOn(d.node),r.push(d),d=l.getNext();f=i?Ob(r,t.getCompare()):zh;const m=t.toString(),b=Object.assign({},this.indexSet_);b[m]=t;const T=Object.assign({},this.indexes_);return T[m]=f,new nl(T,b)}addToIndexes(t,e){const r=(0,L.UI)(this.indexes_,(i,l)=>{const d=(0,L.DV)(this.indexSet_,l);if((0,L.hu)(d,"Missing index implementation for "+l),i===zh){if(d.isDefinedOn(t.node)){const f=[],m=e.getIterator(fn.Wrap);let b=m.getNext();for(;b;)b.name!==t.name&&f.push(b),b=m.getNext();return f.push(t),Ob(f,d.getCompare())}return zh}{const f=e.get(t.name);let m=i;return f&&(m=m.remove(new fn(t.name,f))),m.insert(t,t.node)}});return new nl(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,L.UI)(this.indexes_,i=>{if(i===zh)return i;{const l=e.get(t.name);return l?i.remove(new fn(t.name,l)):i}});return new nl(r,this.indexSet_)}}let Yh,Kt=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Pb(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Yh||(Yh=new n(new Fs(cg),null,nl.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Yh}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?Yh:r}}getChild(e){const r=an(e);return null===r?this:this.getImmediateChild(r).getChild(Zn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new fn(e,r);let l,d;r.isEmpty()?(l=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?Yh:this.priorityNode_;return new n(l,f,d)}}updateChild(e,r){const i=an(e);if(null===i)return r;{(0,L.hu)(".priority"!==an(e)||1===tl(e),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(Zn(e),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,l=0,d=!0;if(this.forEachChild(nr,(f,m)=>{r[f]=m.val(e),i++,d&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):d=!1}),!e&&d&&l<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+kb(this.getPriority().val())+":"),this.forEachChild(nr,(r,i)=>{const l=i.hash();""!==l&&(e+=":"+r+":"+l)}),this.lazyHash_=""===e?"":DN(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const l=this.resolveIndex_(i);if(l){const d=l.getPredecessorKey(new fn(e,r));return d?d.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new fn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new fn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,fn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,fn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)>0;)l.getNext(),d=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===oy?-1:0}withIndex(e){if(e===da||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===da||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nr),l=r.getIterator(nr);let d=i.getNext(),f=l.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=l.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(e){return e===da?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const oy=new class extends Kt{constructor(){super(new Fs(cg),Kt.EMPTY_NODE,nl.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Kt.EMPTY_NODE}isEmpty(){return!1}};function Rr(n,t=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,L.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Zh(n,Rr(t));if(n instanceof Array){let e=Kt.EMPTY_NODE;return vi(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const l=Rr(i);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(r,l))}}),e.updatePriority(Rr(t))}{const e=[];let r=!1;if(vi(n,(d,f)=>{if("."!==d.substring(0,1)){const m=Rr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),e.push(new fn(d,m)))}}),0===e.length)return Kt.EMPTY_NODE;const l=Ob(e,ug,d=>d.name,cg);if(r){const d=Ob(e,nr.getCompare());return new Kt(l,Rr(t),new nl({".priority":d},{".priority":nr}))}return new Kt(l,Rr(t),nl.Default)}}Object.defineProperties(fn,{MIN:{value:new fn(Qa,Kt.EMPTY_NODE)},MAX:{value:new fn(Xa,oy)}}),Rb.__EMPTY_NODE=Kt.EMPTY_NODE,Zh.__childrenNodeConstructor=Kt,sy=oy,pT=oy,function(n){fT=n}(Rr);class ay extends ry{constructor(t){super(),this.indexPath_=t,(0,L.hu)(!ln(t)&&".priority"!==an(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),l=r.compareTo(i);return 0===l?Uh(t.name,e.name):l}makePost(t,e){const r=Rr(t),i=Kt.EMPTY_NODE.updateChild(this.indexPath_,r);return new fn(e,i)}maxPost(){const t=Kt.EMPTY_NODE.updateChild(this.indexPath_,oy);return new fn(Xa,t)}toString(){return ag(this.indexPath_,0).join("/")}}const ly=new class extends ry{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?Uh(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return fn.MIN}maxPost(){return fn.MAX}makePost(t,e){const r=Rr(t);return new fn(e,r)}toString(){return".value"}},Kh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",qN=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const l=new Array(8);for(i=7;i>=0;i--)l[i]=Kh.charAt(e%64),e=Math.floor(e/64);(0,L.hu)(0===e,"Cannot push at time == 0");let d=l.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=Kh.charAt(t[i]);return(0,L.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),cy=function(n){if(n===""+cb)return"-";const t=tg(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let d=0;d<e.length;d++)e[d]=n.charAt(d);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return Xa;const l=Kh.charAt(Kh.indexOf(e[r])+1);return e[r]=l,e.slice(0,r+1).join("")},vT=function(n){if(n===""+md)return Qa;const t=tg(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+cb:(delete e[e.length-1],e.join("")):(e[e.length-1]=Kh.charAt(Kh.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function bT(n){return{type:"value",snapshotNode:n}}function Jh(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function hg(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function fg(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Qh{constructor(t){this.index_=t}updateChild(t,e,r,i,l,d){(0,L.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?t.hasChild(e)?d.trackChildChange(hg(e,f)):(0,L.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(Jh(e,r)):d.trackChildChange(fg(e,r,f))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(nr,(i,l)=>{e.hasChild(i)||r.trackChildChange(hg(i,l))}),e.isLeafNode()||e.forEachChild(nr,(i,l)=>{if(t.hasChild(i)){const d=t.getImmediateChild(i);d.equals(l)||r.trackChildChange(fg(i,l,d))}else r.trackChildChange(Jh(i,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Kt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rl{constructor(t){this.indexedFilter_=new Qh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=rl.getStartPost_(t),this.endPost_=rl.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,l,d){return this.matches(new fn(e,r))||(r=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,l,d)}updateFullNode(t,e,r){e.isLeafNode()&&(e=Kt.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Kt.EMPTY_NODE);const l=this;return e.forEachChild(nr,(d,f)=>{l.matches(new fn(d,f))||(i=i.updateImmediateChild(d,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class wT{constructor(t){this.rangedFilter_=new rl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,l,d){return this.rangedFilter_.matches(new fn(e,r))||(r=Kt.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,l,d):this.fullLimitUpdateChild_(t,e,r,l,d)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let l;i=Kt.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const f=l.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let l,d,f,m;if(i=e.withIndex(this.index_),i=i.updatePriority(Kt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();f=(M,O)=>A(O,M)}else m=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let b=0,T=!1;for(;m.hasNext();){const A=m.getNext();!T&&f(l,A)<=0&&(T=!0),T&&b<this.limit_&&f(A,d)<=0?b++:i=i.updateImmediateChild(A.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,l){let d;if(this.reverse_){const A=this.index_.getCompare();d=(M,O)=>A(O,M)}else d=this.index_.getCompare();const f=t;(0,L.hu)(f.numChildren()===this.limit_,"");const m=new fn(e,r),b=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(f.hasChild(e)){const A=f.getImmediateChild(e);let M=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=M&&(M.name===e||f.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const O=null==M?1:d(M,m);if(T&&!r.isEmpty()&&O>=0)return null!=l&&l.trackChildChange(fg(e,r,A)),f.updateImmediateChild(e,r);{null!=l&&l.trackChildChange(hg(e,A));const ie=f.updateImmediateChild(e,Kt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=l&&l.trackChildChange(Jh(M.name,M.node)),ie.updateImmediateChild(M.name,M.node)):ie}}return r.isEmpty()?t:T&&d(b,m)>=0?(null!=l&&(l.trackChildChange(hg(b.name,b.node)),l.trackChildChange(Jh(e,r))),f.updateImmediateChild(e,r).updateImmediateChild(b.name,Kt.EMPTY_NODE)):t}}class Ls{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qa}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const t=new Ls;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function gg(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function Cd(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function sl(n,t){const e=n.copy();return e.index_=t,e}function mg(n){const t={};if(n.isDefault())return t;let e;return n.index_===nr?e="$priority":n.index_===ly?e="$value":n.index_===da?e="$key":((0,L.hu)(n.index_ instanceof ay,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,L.Pz)(e),n.startSet_&&(t.startAt=(0,L.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,L.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,L.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,L.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function Js(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==nr&&(t.i=n.index_.toString()),t}class Xh extends oT{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Qp("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,L.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const d=Xh.getListenId_(t,r),f={};this.listens_[d]=f;const m=mg(t._queryParams);this.restRequest_(l+".json",m,(b,T)=>{let A=T;if(404===b&&(A=null,b=null),null===b&&this.onDataUpdate_(l,A,!1,r),(0,L.DV)(this.listens_,d)===f){let M;M=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(M,null)}})}unlisten(t,e){const r=Xh.getListenId_(t,e);delete this.listens_[r]}get(t){const e=mg(t._queryParams),r=t._path.toString(),i=new L.BH;return this.restRequest_(r+".json",e,(l,d)=>{let f=d;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(e.auth=i.accessToken),l&&l.token&&(e.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,L.xO)(e);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,L.cI)(f.responseText)}catch(b){qi("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&qi("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class ef{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Zl(){return{value:null,children:new Map}}function fa(n,t,e){if(ln(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=an(t);n.children.has(r)||n.children.set(r,Zl()),fa(n.children.get(r),t=Zn(t),e)}}function Qu(n,t){if(ln(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(nr,(r,i)=>{fa(n,new Cn(r),i)}),Qu(n,t)}}if(n.children.size>0){const e=an(t);return t=Zn(t),n.children.has(e)&&Qu(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function Xu(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{Xu(i,new Cn(t.toString()+"/"+r),e)})}class nf{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&vi(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class ET{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new nf(t);const r=1e4+2e4*Math.random();yd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;vi(t,(i,l)=>{l>0&&(0,L.r3)(this.statsToReport_,i)&&(e[i]=l,r=!0)}),r&&this.server_.reportStats(e),yd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qs=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Qs||(Qs={})),Qs))();function fy(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class _g{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Qs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Cn(t));return new _g(mn(),e,this.revert)}}return(0,L.hu)(an(this.path)===t,"operationForChild called for unrelated child."),new _g(Zn(this.path),this.affectedTree,this.revert)}}class sf{constructor(t,e){this.source=t,this.path=e,this.type=Qs.LISTEN_COMPLETE}operationForChild(t){return ln(this.path)?new sf(this.source,mn()):new sf(this.source,Zn(this.path))}}class ec{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Qs.OVERWRITE}operationForChild(t){return ln(this.path)?new ec(this.source,mn(),this.snap.getImmediateChild(t)):new ec(this.source,Zn(this.path),this.snap)}}class af{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Qs.MERGE}operationForChild(t){if(ln(this.path)){const e=this.children.subtree(new Cn(t));return e.isEmpty()?null:e.value?new ec(this.source,mn(),e.value):new af(this.source,mn(),e)}return(0,L.hu)(an(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new af(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zl{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(ln(t))return this.isFullyInitialized()&&!this.filtered_;const e=an(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class YN{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function lf(n,t,e,r,i,l){const d=r.filter(f=>f.type===e);d.sort((f,m)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new fn(t.childName,t.snapshotNode),i=new fn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),d.forEach(f=>{const m=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,l);i.forEach(b=>{b.respondsTo(f.type)&&t.push(b.createEvent(m,n.query_))})})}function py(n,t){return{eventCache:n,serverCache:t}}function uf(n,t,e,r){return py(new zl(t,e,r),n.serverCache)}function DT(n,t,e,r){return py(n.eventCache,new zl(t,e,r))}function yg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Td(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Lb;class rr{constructor(t,e=(()=>(Lb||(Lb=new Fs(lb)),Lb))()){this.value=t,this.children=e}static fromObject(t){let e=new rr(null);return vi(t,(r,i)=>{e=e.set(new Cn(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:mn(),value:this.value};if(ln(t))return null;{const r=an(t),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(Zn(t),e);return null!=l?{path:vr(new Cn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(ln(t))return this;{const e=an(t),r=this.children.get(e);return null!==r?r.subtree(Zn(t)):new rr(null)}}set(t,e){if(ln(t))return new rr(e,this.children);{const r=an(t),l=(this.children.get(r)||new rr(null)).set(Zn(t),e),d=this.children.insert(r,l);return new rr(this.value,d)}}remove(t){if(ln(t))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const e=an(t),r=this.children.get(e);if(r){const i=r.remove(Zn(t));let l;return l=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&l.isEmpty()?new rr(null):new rr(this.value,l)}return this}}get(t){if(ln(t))return this.value;{const e=an(t),r=this.children.get(e);return r?r.get(Zn(t)):null}}setTree(t,e){if(ln(t))return e;{const r=an(t),l=(this.children.get(r)||new rr(null)).setTree(Zn(t),e);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new rr(this.value,d)}}fold(t){return this.fold_(mn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(vr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,mn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(ln(t))return null;{const l=an(t),d=this.children.get(l);return d?d.findOnPath_(Zn(t),vr(e,l),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,mn(),e)}foreachOnPath_(t,e,r){if(ln(t))return this;{this.value&&r(e,this.value);const i=an(t),l=this.children.get(i);return l?l.foreachOnPath_(Zn(t),vr(e,i),r):new rr(null)}}foreach(t){this.foreach_(mn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(vr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class Fo{constructor(t){this.writeTree_=t}static empty(){return new Fo(new rr(null))}}function gy(n,t,e){if(ln(t))return new Fo(new rr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let l=r.value;const d=Wi(i,t);return l=l.updateChild(d,e),new Fo(n.writeTree_.set(i,l))}{const i=new rr(e),l=n.writeTree_.setTree(t,i);return new Fo(l)}}}function IT(n,t,e){let r=n;return vi(e,(i,l)=>{r=gy(r,vr(t,i),l)}),r}function JN(n,t){if(ln(t))return Fo.empty();{const e=n.writeTree_.setTree(t,new rr(null));return new Fo(e)}}function Vb(n,t){return null!=cf(n,t)}function cf(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Wi(e.path,t)):null}function AT(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(nr,(r,i)=>{t.push(new fn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new fn(r,i.value))}),t}function tc(n,t){if(ln(t))return n;{const e=cf(n,t);return new Fo(null!=e?new rr(e):n.writeTree_.subtree(t))}}function vg(n){return n.writeTree_.isEmpty()}function nc(n,t){return ST(mn(),n.writeTree_,t)}function ST(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,l)=>{".priority"===i?((0,L.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):e=ST(vr(n,i),l,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(vr(n,".priority"),r)),e}}function Bb(n,t){return Gb(t,n)}function hF(n,t){if(n.snap)return Po(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Po(vr(n.path,e),t))return!0;return!1}function df(n){return n.visible}function xT(n,t,e){let r=Fo.empty();for(let i=0;i<n.length;++i){const l=n[i];if(t(l)){const d=l.path;let f;if(l.snap)Po(e,d)?(f=Wi(e,d),r=gy(r,f,l.snap)):Po(d,e)&&(f=Wi(d,e),r=gy(r,mn(),l.snap.getChild(f)));else{if(!l.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Po(e,d))f=Wi(e,d),r=IT(r,f,l.children);else if(Po(d,e))if(f=Wi(d,e),ln(f))r=IT(r,mn(),l.children);else{const m=(0,L.DV)(l.children,an(f));if(m){const b=m.getChild(Zn(f));r=gy(r,mn(),b)}}}}}return r}function Ub(n,t,e,r,i){if(r||i){const l=tc(n.visibleWrites,t);return!i&&vg(l)?e:i||null!=e||Vb(l,mn())?nc(xT(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(Po(b.path,t)||Po(t,b.path))},t),e||Kt.EMPTY_NODE):null}{const l=cf(n.visibleWrites,t);if(null!=l)return l;{const d=tc(n.visibleWrites,t);return vg(d)?e:null!=e||Vb(d,mn())?nc(d,e||Kt.EMPTY_NODE):null}}}function _y(n,t,e,r){return Ub(n.writeTree,n.treePath,t,e,r)}function $b(n,t){return function(n,t,e){let r=Kt.EMPTY_NODE;const i=cf(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(nr,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(e){const l=tc(n.visibleWrites,t);return e.forEachChild(nr,(d,f)=>{const m=nc(tc(l,new Cn(d)),f);r=r.updateImmediateChild(d,m)}),AT(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return AT(tc(n.visibleWrites,t)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,t)}function kT(n,t,e,r){return function(n,t,e,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=vr(t,e);if(Vb(n.visibleWrites,l))return null;{const d=tc(n.visibleWrites,l);return vg(d)?i.getChild(e):nc(d,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function yy(n,t){return function(n,t){return cf(n.visibleWrites,t)}(n.writeTree,vr(n.treePath,t))}function Hb(n,t,e){return function(n,t,e,r){const i=vr(t,e),l=cf(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(e)?nc(tc(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function jb(n,t){return Gb(vr(n.treePath,t),n.writeTree)}function Gb(n,t){return{treePath:n,writeTree:t}}class qb{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,L.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===e&&"child_removed"===l)this.changeMap.set(r,fg(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===l)this.changeMap.set(r,hg(r,i.oldSnap));else if("child_changed"===e&&"child_added"===l)this.changeMap.set(r,Jh(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==l)throw(0,L.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,fg(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const vy=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class Wb{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new zl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hb(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Td(this.viewCache_),l=function(n,t,e,r,i,l){return function(n,t,e,r,i,l,d){let f;const m=tc(n.visibleWrites,t),b=cf(m,mn());if(null!=b)f=b;else{if(null==e)return[];f=nc(m,e)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const T=[],A=d.getCompare(),M=l?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let O=M.getNext();for(;O&&T.length<i;)0!==A(O,r)&&T.push(O),O=M.getNext();return T}}(n.writeTree,n.treePath,t,e,r,i,l)}(this.writes_,i,e,1,r,t);return 0===l.length?null:l[0]}}function by(n,t,e,r,i,l){const d=t.eventCache;if(null!=yy(r,e))return t;{let f,m;if(ln(e))if((0,L.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const b=Td(t),A=$b(r,b instanceof Kt?b:Kt.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),A,l)}else{const b=_y(r,Td(t));f=n.filter.updateFullNode(t.eventCache.getNode(),b,l)}else{const b=an(e);if(".priority"===b){(0,L.hu)(1===tl(e),"Can't have a priority with additional path components");const T=d.getNode();m=t.serverCache.getNode();const A=kT(r,e,T,m);f=null!=A?n.filter.updatePriority(T,A):d.getNode()}else{const T=Zn(e);let A;if(d.isCompleteForChild(b)){m=t.serverCache.getNode();const M=kT(r,e,d.getNode(),m);A=null!=M?d.getNode().getImmediateChild(b).updateChild(T,M):d.getNode().getImmediateChild(b)}else A=Hb(r,b,t.serverCache);f=null!=A?n.filter.updateChild(d.getNode(),b,A,T,i,l):d.getNode()}}return uf(t,f,d.isFullyInitialized()||ln(e),n.filter.filtersNodes())}}function wy(n,t,e,r,i,l,d,f){const m=t.serverCache;let b;const T=d?n.filter:n.filter.getIndexedFilter();if(ln(e))b=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const O=m.getNode().updateChild(e,r);b=T.updateFullNode(m.getNode(),O,null)}else{const O=an(e);if(!m.isCompleteForPath(e)&&tl(e)>1)return t;const G=Zn(e),_e=m.getNode().getImmediateChild(O).updateChild(G,r);b=".priority"===O?T.updatePriority(m.getNode(),_e):T.updateChild(m.getNode(),O,_e,G,vy,null)}const A=DT(t,b,m.isFullyInitialized()||ln(e),T.filtersNodes());return by(n,A,e,i,new Wb(i,A,l),f)}function wg(n,t,e,r,i,l,d){const f=t.eventCache;let m,b;const T=new Wb(i,t,l);if(ln(e))b=n.filter.updateFullNode(t.eventCache.getNode(),r,d),m=uf(t,b,!0,n.filter.filtersNodes());else{const A=an(e);if(".priority"===A)b=n.filter.updatePriority(t.eventCache.getNode(),r),m=uf(t,b,f.isFullyInitialized(),f.isFiltered());else{const M=Zn(e),O=f.getNode().getImmediateChild(A);let G;if(ln(M))G=r;else{const ie=T.getCompleteChild(A);G=null!=ie?".priority"===Nb(M)&&ie.getChild(X_(M)).isEmpty()?ie:ie.updateChild(M,r):Kt.EMPTY_NODE}m=O.equals(G)?t:uf(t,n.filter.updateChild(f.getNode(),A,G,M,T,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Cy(n,t){return n.eventCache.isCompleteForChild(t)}function ix(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function zb(n,t,e,r,i,l,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let b,m=t;b=ln(e)?r:new rr(null).setTree(e,r);const T=t.serverCache.getNode();return b.children.inorderTraversal((A,M)=>{if(T.hasChild(A)){const G=ix(0,t.serverCache.getNode().getImmediateChild(A),M);m=wy(n,m,new Cn(A),G,i,l,d,f)}}),b.children.inorderTraversal((A,M)=>{const O=!t.serverCache.isCompleteForChild(A)&&void 0===M.value;if(!T.hasChild(A)&&!O){const ie=ix(0,t.serverCache.getNode().getImmediateChild(A),M);m=wy(n,m,new Cn(A),ie,i,l,d,f)}}),m}class FT{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Qh(r.getIndex()),l=function(n){return n.loadsAllData()?new Qh(n.getIndex()):n.hasLimit()?new wT(n):new rl(n)}(r);this.processor_=function(n){return{filter:n}}(l);const d=e.serverCache,f=e.eventCache,m=i.updateFullNode(Kt.EMPTY_NODE,d.getNode(),null),b=l.updateFullNode(Kt.EMPTY_NODE,f.getNode(),null),T=new zl(m,d.isFullyInitialized(),i.filtersNodes()),A=new zl(b,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=py(A,T),this.eventGenerator_=new YN(this.query_)}get query(){return this.query_}}function Qb(n,t){const e=Td(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!ln(t)&&!e.getImmediateChild(an(t)).isEmpty())?e.getChild(t):null}function Ey(n){return 0===n.eventRegistrations_.length}function BT(n,t,e){const r=[];if(e){(0,L.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(e,i);d&&r.push(d)})}if(t){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Xb(n,t,e,r){t.type===Qs.MERGE&&null!==t.source.queryId&&((0,L.hu)(Td(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(yg(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function(n,t,e,r,i){const l=new qb;let d,f;if(e.type===Qs.OVERWRITE){const b=e;b.source.fromUser?d=wg(n,t,b.path,b.snap,r,i,l):((0,L.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered()&&!ln(b.path),d=wy(n,t,b.path,b.snap,r,i,f,l))}else if(e.type===Qs.MERGE){const b=e;b.source.fromUser?d=function(n,t,e,r,i,l,d){let f=t;return r.foreach((m,b)=>{const T=vr(e,m);Cy(t,an(T))&&(f=wg(n,f,T,b,i,l,d))}),r.foreach((m,b)=>{const T=vr(e,m);Cy(t,an(T))||(f=wg(n,f,T,b,i,l,d))}),f}(n,t,b.path,b.children,r,i,l):((0,L.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered(),d=zb(n,t,b.path,b.children,r,i,f,l))}else if(e.type===Qs.ACK_USER_WRITE){const b=e;d=b.revert?function(n,t,e,r,i,l){let d;if(null!=yy(r,e))return t;{const f=new Wb(r,t,i),m=t.eventCache.getNode();let b;if(ln(e)||".priority"===an(e)){let T;if(t.serverCache.isFullyInitialized())T=_y(r,Td(t));else{const A=t.serverCache.getNode();(0,L.hu)(A instanceof Kt,"serverChildren would be complete if leaf node"),T=$b(r,A)}T=T,b=n.filter.updateFullNode(m,T,l)}else{const T=an(e);let A=Hb(r,T,t.serverCache);null==A&&t.serverCache.isCompleteForChild(T)&&(A=m.getImmediateChild(T)),b=null!=A?n.filter.updateChild(m,T,A,Zn(e),f,l):t.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,Kt.EMPTY_NODE,Zn(e),f,l):m,b.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=_y(r,Td(t)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,l)))}return d=t.serverCache.isFullyInitialized()||null!=yy(r,mn()),uf(t,b,d,n.filter.filtersNodes())}}(n,t,b.path,r,i,l):function(n,t,e,r,i,l,d){if(null!=yy(i,e))return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(null!=r.value){if(ln(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return wy(n,t,e,m.getNode().getChild(e),i,l,f,d);if(ln(e)){let b=new rr(null);return m.getNode().forEachChild(da,(T,A)=>{b=b.set(new Cn(T),A)}),zb(n,t,e,b,i,l,f,d)}return t}{let b=new rr(null);return r.foreach((T,A)=>{const M=vr(e,T);m.isCompleteForPath(M)&&(b=b.set(T,m.getNode().getChild(M)))}),zb(n,t,e,b,i,l,f,d)}}(n,t,b.path,b.affectedTree,r,i,l)}else{if(e.type!==Qs.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+e.type);d=function(n,t,e,r,i){const l=t.serverCache;return by(n,DT(t,l.getNode(),l.isFullyInitialized()||ln(e),l.isFiltered()),e,r,vy,i)}(n,t,e.path,r,l)}const m=l.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=yg(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&e.push(bT(yg(t)))}}(t,d,m),{viewCache:d,changes:m}}(n.processor_,i,t,e,r);return function(n,t){(0,L.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,L.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,Ty(n,l.changes,l.viewCache.eventCache.getNode(),null)}function Ty(n,t,e,r){return function(n,t,e,r){const i=[],l=[];return t.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(d.childName,d.snapshotNode))}),lf(n,i,"child_removed",t,r,e),lf(n,i,"child_added",t,r,e),lf(n,i,"child_moved",l,r,e),lf(n,i,"child_changed",t,r,e),lf(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let Cg,Dy;class $T{constructor(){this.views=new Map}}function hf(n,t,e,r){const i=t.source.queryId;if(null!==i){const l=n.views.get(i);return(0,L.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Xb(l,t,e,r)}{let l=[];for(const d of n.views.values())l=l.concat(Xb(d,t,e,r));return l}}function tw(n,t,e,r,i){const d=n.views.get(t._queryIdentifier);if(!d){let f=_y(e,i?r:null),m=!1;f?m=!0:r instanceof Kt?(f=$b(e,r),m=!1):(f=Kt.EMPTY_NODE,m=!1);const b=py(new zl(f,m,!1),new zl(r,i,!1));return new FT(t,b)}return d}function nw(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Yl(n,t){let e=null;for(const r of n.views.values())e=e||Qb(r,t);return e}function rw(n,t){return t._queryParams.loadsAllData()?sw(n):n.views.get(t._queryIdentifier)}function iw(n,t){return null!=rw(n,t)}function Kl(n){return null!=sw(n)}function sw(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ax=1;class Qr{constructor(t){this.listenProvider_=t,this.syncPointTree_=new rr(null),this.pendingWriteTree_={visibleWrites:Fo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Iy(n,t,e,r,i){return function(n,t,e,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=gy(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?Eg(n,new ec({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function rc(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,L.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,l=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=e&&hF(f,r.path)?i=!1:Po(r.path,f.path)&&(l=!0)),d--}return!!i&&(l?(function(n){n.visibleWrites=xT(n.allWrites,df,mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=JN(n.visibleWrites,r.path):vi(r.children,m=>{n.visibleWrites=JN(n.visibleWrites,vr(r.path,m))}),!0))}(n.pendingWriteTree_,t)){let l=new rr(null);return null!=r.snap?l=l.set(mn(),!0):vi(r.children,d=>{l=l.set(new Cn(d),!0)}),Eg(n,new _g(r.path,l,e))}return[]}function ff(n,t,e){return Eg(n,new ec({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function ic(n,t,e,r){const i=t._path,l=n.syncPointTree_.get(i);let d=[];if(l&&("default"===t._queryIdentifier||iw(l,t))){const f=function(n,t,e,r){const i=t._queryIdentifier,l=[];let d=[];const f=Kl(n);if("default"===i)for(const[m,b]of n.views.entries())d=d.concat(BT(b,e,r)),Ey(b)&&(n.views.delete(m),b.query._queryParams.loadsAllData()||l.push(b.query));else{const m=n.views.get(i);m&&(d=d.concat(BT(m,e,r)),Ey(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!Kl(n)&&l.push(new((0,L.hu)(Cg,"Reference.ts has not been loaded"),Cg)(t._repo,t._path)),{removed:l,events:d}}(l,t,e,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;d=f.events;const b=-1!==m.findIndex(A=>A._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(A,M)=>Kl(M));if(b&&!T){const A=n.syncPointTree_.subtree(i);if(!A.isEmpty()){const M=function(n){return n.fold((t,e,r)=>{if(e&&Kl(e))return[sw(e)];{let i=[];return e&&(i=nw(e)),vi(r,(l,d)=>{i=i.concat(d)}),i}})}(A);for(let O=0;O<M.length;++O){const G=M[O],ie=G.query,_e=pa(n,G);n.listenProvider_.startListening(pf(ie),xy(n,ie),_e.hashFn,_e.onComplete)}}}if(!T&&m.length>0&&!r)if(b){const A=null;n.listenProvider_.stopListening(pf(t),A)}else m.forEach(A=>{const M=n.queryToTagMap.get(Tg(A));n.listenProvider_.stopListening(pf(A),M)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=Tg(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,m)}return d}function ow(n,t,e){const r=t._path;let i=null,l=!1;n.syncPointTree_.foreachOnPath(r,(A,M)=>{const O=Wi(A,r);i=i||Yl(M,O),l=l||Kl(M)});let f,d=n.syncPointTree_.get(r);d?(l=l||Kl(d),i=i||Yl(d,mn())):(d=new $T,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=Kt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,O)=>{const G=Yl(O,mn());G&&(i=i.updateImmediateChild(M,G))}));const m=iw(d,t);if(!m&&!t._queryParams.loadsAllData()){const A=Tg(t);(0,L.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const M=ax++;n.queryToTagMap.set(A,M),n.tagToQueryMap.set(M,A)}let T=function(n,t,e,r,i,l){const d=tw(n,t,r,i,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,d),function(n,t){n.eventRegistrations_.push(t)}(d,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(nr,(l,d)=>{r.push(Jh(l,d))}),e.isFullyInitialized()&&r.push(bT(e.getNode())),Ty(n,r,e.getNode(),t)}(d,e)}(d,t,e,Bb(n.pendingWriteTree_,r),i,f);if(!m&&!l){const A=rw(d,t);T=T.concat(function(n,t,e){const r=t._path,i=xy(n,t),l=pa(n,e),d=n.listenProvider_.startListening(pf(t),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Kl(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((b,T,A)=>{if(!ln(b)&&T&&Kl(T))return[sw(T).query];{let M=[];return T&&(M=M.concat(nw(T).map(O=>O.query))),vi(A,(O,G)=>{M=M.concat(G)}),M}});for(let b=0;b<m.length;++b){const T=m[b];n.listenProvider_.stopListening(pf(T),xy(n,T))}}return d}(n,t,A))}return T}function Ay(n,t,e){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(d,f)=>{const b=Yl(f,Wi(d,t));if(b)return b});return Ub(i,t,l,e,!0)}function Eg(n,t){return Sy(t,n.syncPointTree_,null,Bb(n.pendingWriteTree_,mn()))}function Sy(n,t,e,r){if(ln(n.path))return Ny(n,t,e,r);{const i=t.get(mn());null==e&&null!=i&&(e=Yl(i,mn()));let l=[];const d=an(n.path),f=n.operationForChild(d),m=t.children.get(d);if(m&&f){const b=e?e.getImmediateChild(d):null,T=jb(r,d);l=l.concat(Sy(f,m,b,T))}return i&&(l=l.concat(hf(i,n,r,e))),l}}function Ny(n,t,e,r){const i=t.get(mn());null==e&&null!=i&&(e=Yl(i,mn()));let l=[];return t.children.inorderTraversal((d,f)=>{const m=e?e.getImmediateChild(d):null,b=jb(r,d),T=n.operationForChild(d);T&&(l=l.concat(Ny(T,f,m,b)))}),i&&(l=l.concat(hf(i,n,r,e))),l}function pa(n,t){const e=t.query,r=xy(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||Kt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=Lo(n,e);if(r){const i=Xs(r),l=i.path,d=i.queryId,f=Wi(l,t);return eo(n,l,new sf(fy(d),f))}return[]}(n,e._path,r):function(n,t){return Eg(n,new sf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const l=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return ic(n,e,null,l)}}}}function xy(n,t){const e=Tg(t);return n.queryToTagMap.get(e)}function Tg(n){return n._path.toString()+"$"+n._queryIdentifier}function Lo(n,t){return n.tagToQueryMap.get(t)}function Xs(n){const t=n.indexOf("$");return(0,L.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Cn(n.substr(0,t))}}function eo(n,t,e){const r=n.syncPointTree_.get(t);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),hf(r,e,Bb(n.pendingWriteTree_,t),null)}function pf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,L.hu)(Dy,"Reference.ts has not been loaded"),Dy)(n._repo,n._path):n}class aw{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new aw(e)}node(){return this.node_}}class Dg{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=vr(this.path_,t);return new Dg(this.syncTree_,e)}node(){return Ay(this.syncTree_,this.path_)}}const JT=function(n,t,e){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?QT(n[".sv"],t,e):"object"==typeof n[".sv"]?gx(n[".sv"],t):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},QT=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,L.hu)(!1,"Unexpected server value: "+n)}},gx=function(n,t,e){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,L.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},lw=function(n,t,e,r){return gf(t,new Dg(e,n),r)},My=function(n,t,e){return gf(n,new aw(t),e)};function gf(n,t,e){const r=n.getPriority().val(),i=JT(r,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const d=n,f=JT(d.getValue(),t,e);return f!==d.getValue()||i!==d.getPriority().val()?new Zh(f,Rr(i)):n}{const d=n;return l=d,i!==d.getPriority().val()&&(l=l.updatePriority(new Zh(i))),d.forEachChild(nr,(f,m)=>{const b=gf(m,t.getImmediateChild(f),e);b!==m&&(l=l.updateImmediateChild(f,b))}),l}}class uw{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function Ag(n,t){let e=t instanceof Cn?t:new Cn(t),r=n,i=an(e);for(;null!==i;){const l=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new uw(i,r,l),e=Zn(e),i=an(e)}return r}function sc(n){return n.node.value}function Sg(n,t){n.node.value=t,Ry(n)}function Ng(n){return n.node.childCount>0}function xg(n,t){vi(n.node.children,(e,r)=>{t(new uw(e,n,r))})}function dw(n,t,e,r){e&&!r&&t(n),xg(n,i=>{dw(i,t,!0,r)}),e&&r&&t(n)}function mf(n){return new Cn(null===n.parent?n.name:mf(n.parent)+"/"+n.name)}function Ry(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===sc(n)&&!Ng(n)}(e),i=(0,L.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,Ry(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,Ry(n))}(n.parent,n.name,n)}const tD=/[\[\].#$\/\u0000-\u001F\u007F]/,mx=/[\[\].#$\u0000-\u001F\u007F]/,hw=10485760,ky=function(n){return"string"==typeof n&&0!==n.length&&!tD.test(n)},fw=function(n){return"string"==typeof n&&0!==n.length&&!mx.test(n)},Mg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!z_(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},ol=function(n,t,e,r){r&&void 0===t||Rg((0,L.gK)(n,"value"),t,e)},Rg=function(n,t,e){const r=e instanceof Cn?new UN(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+wd(r));if("function"==typeof t)throw new Error(n+"contains a function "+wd(r)+" with contents = "+t.toString());if(z_(t))throw new Error(n+"contains "+t.toString()+" "+wd(r));if("string"==typeof t&&t.length>hw/3&&(0,L.ug)(t)>hw)throw new Error(n+"contains a string greater than "+hw+" utf8 bytes "+wd(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,l=!1;if(vi(t,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!ky(d)))throw new Error(n+" contains an invalid key ("+d+") "+wd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,L.ug)(t),uT(n)})(r,d),Rg(n,f,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,L.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+wd(r)+" in addition to actual children.")}},nD=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,L.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const l=[];vi(t,(d,f)=>{const m=new Cn(d);if(Rg(i,f,vr(e,m)),".priority"===Nb(m)&&!Mg(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const l=ag(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!ky(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(qh);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&Po(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},pw=function(n,t,e){if(!e||void 0!==t){if(z_(t))throw new Error((0,L.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Mg(t))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},kg=function(n,t,e,r){if(!(r&&void 0===e||ky(e)))throw new Error((0,L.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Pg=function(n,t,e,r){if(!(r&&void 0===e||fw(e)))throw new Error((0,L.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Vo=function(n,t){if(".info"===an(t))throw new Error(n+" failed = Can't modify data under /.info/")},rD=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!ky(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),fw(n)}(e))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bx{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Py(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],l=i.getPath();null!==e&&!ey(l,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:l}),e.events.push(i)}e&&n.eventLists_.push(e)}function Oy(n,t,e){Py(n,e),gw(n,r=>ey(r,t))}function to(n,t,e){Py(n,e),gw(n,r=>Po(r,t)||Po(t,r))}function gw(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(iD(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function iD(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();Bh&&Jr("event: "+e.toString()),_d(r)}}}const mw="repo_interrupt";class oD{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Zl(),this.transactionQueueTree_=new uw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _w(n){const e=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Dd(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:_w(n)})}function yw(n,t,e,r,i){n.dataUpdateCount++;const l=new Cn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let d=[];if(i)if(r){const m=(0,L.UI)(e,b=>Rr(b));d=function(n,t,e,r){const i=Lo(n,r);if(i){const l=Xs(i),d=l.path,f=l.queryId,m=Wi(d,t),b=rr.fromObject(e);return eo(n,d,new af(fy(f),m,b))}return[]}(n.serverSyncTree_,l,m,i)}else{const m=Rr(e);d=function(n,t,e,r){const i=Lo(n,r);if(null!=i){const l=Xs(i),d=l.path,f=l.queryId,m=Wi(d,t);return eo(n,d,new ec(fy(f),m,e))}return[]}(n.serverSyncTree_,l,m,i)}else if(r){const m=(0,L.UI)(e,b=>Rr(b));d=function(n,t,e){const r=rr.fromObject(e);return Eg(n,new af({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,l,m)}else{const m=Rr(e);d=ff(n.serverSyncTree_,l,m)}let f=l;d.length>0&&(f=_f(n,l)),to(n.eventQueue_,f,d)}function oc(n,t){vw(n,"connected",t),!1===t&&function(n){Ql(n,"onDisconnectEvents");const t=Dd(n),e=Zl();Xu(n.onDisconnect_,mn(),(i,l)=>{const d=lw(i,l,n.serverSyncTree_,t);fa(e,i,d)});let r=[];Xu(e,mn(),(i,l)=>{r=r.concat(ff(n.serverSyncTree_,i,l));const d=Dw(n,i);_f(n,d)}),n.onDisconnect_=Zl(),to(n.eventQueue_,mn(),r)}(n)}function vw(n,t,e){const r=new Cn("/.info/"+t),i=Rr(e);n.infoData_.updateSnapshot(r,i);const l=ff(n.infoSyncTree_,r,i);to(n.eventQueue_,r,l)}function Jl(n){return n.nextWriteId_++}function Og(n,t,e,r,i){Ql(n,"set",{path:t.toString(),value:e,priority:r});const l=Dd(n),d=Rr(e,r),f=Ay(n.serverSyncTree_,t),m=My(d,f,l),b=Jl(n),T=Iy(n.serverSyncTree_,t,m,b,!0);Py(n.eventQueue_,T),n.server_.put(t.toString(),d.val(!0),(M,O)=>{const G="ok"===M;G||qi("set at "+t+" failed: "+M);const ie=rc(n.serverSyncTree_,b,!G);to(n.eventQueue_,t,ie),ga(0,i,M,O)});const A=Dw(n,t);_f(n,A),to(n.eventQueue_,A,[])}function uD(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&Qu(n.onDisconnect_,t),ga(0,e,r,i)})}function Cx(n,t,e,r){const i=Rr(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(l,d)=>{"ok"===l&&fa(n.onDisconnect_,t,i),ga(0,r,l,d)})}function bw(n,t,e){let r;r=".info"===an(t._path)?ic(n.infoSyncTree_,t,e):ic(n.serverSyncTree_,t,e),Oy(n.eventQueue_,t._path,r)}function Fg(n){n.persistentConnection_&&n.persistentConnection_.interrupt(mw)}function Ql(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Jr(e,...t)}function ga(n,t,e,r){t&&_d(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let l=i;r&&(l+=": "+r);const d=new Error(l);d.code=i,t(d)}})}function cD(n,t,e){return Ay(n.serverSyncTree_,t,e)||Kt.EMPTY_NODE}function Lg(n,t=n.transactionQueueTree_){if(t||Fy(n,t),sc(t)){const e=Ew(n,t);(0,L.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(b=>b.currentWriteId),i=cD(n,t,r);let l=i;const d=i.hash();for(let b=0;b<e.length;b++){const T=e[b];(0,L.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const A=Wi(t,T.path);l=l.updateChild(A,T.currentOutputSnapshotRaw)}const f=l.val(!0),m=t;n.server_.put(m.toString(),f,b=>{Ql(n,"transaction put response",{path:m.toString(),status:b});let T=[];if("ok"===b){const A=[];for(let M=0;M<e.length;M++)e[M].status=2,T=T.concat(rc(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&A.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();Fy(n,Ag(n.transactionQueueTree_,t)),Lg(n,n.transactionQueueTree_),to(n.eventQueue_,t,T);for(let M=0;M<A.length;M++)_d(A[M])}else{if("datastale"===b)for(let A=0;A<e.length;A++)e[A].status=3===e[A].status?4:0;else{qi("transaction at "+m.toString()+" failed: "+b);for(let A=0;A<e.length;A++)e[A].status=4,e[A].abortReason=b}_f(n,t)}},d)}(n,mf(t),e)}else Ng(t)&&xg(t,e=>{Lg(n,e)})}function _f(n,t){const e=Cw(n,t),r=mf(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const d=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],b=Wi(e,m.path);let A,T=!1;if((0,L.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,A=m.abortReason,i=i.concat(rc(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,A="maxretry",i=i.concat(rc(n.serverSyncTree_,m.currentWriteId,!0));else{const M=cD(n,m.path,d);m.currentInputSnapshot=M;const O=t[f].update(M.val());if(void 0!==O){Rg("transaction failed: Data returned ",O,m.path);let G=Rr(O);"object"==typeof O&&null!=O&&(0,L.r3)(O,".priority")||(G=G.updatePriority(M.getPriority()));const _e=m.currentWriteId,$e=Dd(n),qe=My(G,M,$e);m.currentOutputSnapshotRaw=G,m.currentOutputSnapshotResolved=qe,m.currentWriteId=Jl(n),d.splice(d.indexOf(_e),1),i=i.concat(Iy(n.serverSyncTree_,m.path,qe,m.currentWriteId,m.applyLocally)),i=i.concat(rc(n.serverSyncTree_,_e,!0))}else T=!0,A="nodata",i=i.concat(rc(n.serverSyncTree_,m.currentWriteId,!0))}to(n.eventQueue_,e,i),i=[],T&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&r.push("nodata"===A?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(A),!1,null)))}Fy(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)_d(r[f]);Lg(n,n.transactionQueueTree_)}(n,Ew(n,e),r),r}function Cw(n,t){let e,r=n.transactionQueueTree_;for(e=an(t);null!==e&&void 0===sc(r);)r=Ag(r,e),e=an(t=Zn(t));return r}function Ew(n,t){const e=[];return Tw(n,t,e),e.sort((r,i)=>r.order-i.order),e}function Tw(n,t,e){const r=sc(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);xg(t,i=>{Tw(n,i,e)})}function Fy(n,t){const e=sc(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,Sg(t,e.length>0?e:void 0)}xg(t,r=>{Fy(n,r)})}function Dw(n,t){const e=mf(Cw(n,t)),r=Ag(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{Iw(n,i)}),Iw(n,r),dw(r,i=>{Iw(n,i)}),e}function Iw(n,t){const e=sc(t);if(e){const r=[];let i=[],l=-1;for(let d=0;d<e.length;d++)3===e[d].status||(1===e[d].status?((0,L.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,e[d].status=3,e[d].abortReason="set"):((0,L.hu)(0===e[d].status,"Unexpected transaction status in abort"),e[d].unwatcher(),i=i.concat(rc(n.serverSyncTree_,e[d].currentWriteId,!0)),e[d].onComplete&&r.push(e[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?Sg(t,void 0):e.length=l+1,to(n.eventQueue_,mf(t),i);for(let d=0;d<r.length;d++)_d(r[d])}}const Aw=function(n,t){const e=Ax(n),r=e.namespace;return"firebase.com"===e.domain&&ko(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&ko("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new zE(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Cn(e.pathString)}},Ax=function(n){let t="",e="",r="",i="",l="",d=!0,f="https",m=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(f=n.substring(0,b-1),n=n.substring(b+2));let T=n.indexOf("/");-1===T&&(T=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),t=n.substring(0,Math.min(T,A)),T<A&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(l){}t+="/"+i}return t}(n.substring(T,A)));const M=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,A)));b=t.indexOf(":"),b>=0?(d="https"===f||"wss"===f,m=parseInt(t.substring(b+1),10)):b=t.length;const O=t.slice(0,b);if("localhost"===O.toLowerCase())e="localhost";else if(O.split(".").length<=2)e=O;else{const G=t.indexOf(".");r=t.substring(0,G).toLowerCase(),e=t.substring(G+1),l=r}"ns"in M&&(l=M.ns)}return{host:t,port:m,domain:e,subdomain:r,secure:d,scheme:f,pathString:i,namespace:l}};class Bg{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Pz)(this.snapshot.exportVal())}}class Sw{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Nw{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class xw{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new L.BH;return uD(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Vo("OnDisconnect.remove",this._path);const t=new L.BH;return Cx(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Vo("OnDisconnect.set",this._path),ol("OnDisconnect.set",t,this._path,!1);const e=new L.BH;return Cx(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Vo("OnDisconnect.setWithPriority",this._path),ol("OnDisconnect.setWithPriority",t,this._path,!1),pw("OnDisconnect.setWithPriority",e,!1);const r=new L.BH;return function(n,t,e,r,i){const l=Rr(e,r);n.server_.onDisconnectPut(t.toString(),l.val(!0),(d,f)=>{"ok"===d&&fa(n.onDisconnect_,t,l),ga(0,i,d,f)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){Vo("OnDisconnect.update",this._path),nD("OnDisconnect.update",t,this._path,!1);const e=new L.BH;return function(n,t,e,r){if((0,L.xb)(e))return Jr("onDisconnect().update() called with empty data.  Don't do anything."),void ga(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,l)=>{"ok"===i&&vi(e,(d,f)=>{const m=Rr(f);fa(n.onDisconnect_,vr(t,d),m)}),ga(0,r,i,l)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Vs{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:Nb(this._path)}get ref(){return new Uo(this._repo,this._path)}get _queryIdentifier(){const t=Js(this._queryParams),e=Y_(t);return"{}"===e?"default":e}get _queryObject(){return Js(this._queryParams)}isEqual(t){if(!((t=(0,L.m9)(t))instanceof Vs))return!1;const e=this._repo===t._repo,r=ey(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function ac(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Bo(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===da){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Qa)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Xa)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===nr){if(null!=t&&!Mg(t)||null!=e&&!Mg(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof ay||n.getIndex()===ly,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ly(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Uo extends Vs{constructor(t,e){super(t,e,new Ls,!1)}get parent(){const t=X_(this._path);return null===t?null:new Uo(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Id{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Cn(t),r=lc(this.ref,t);return new Id(this._node.getChild(e),r,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new Id(i,lc(this.ref,r),nr)))}hasChild(t){const e=new Cn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Mw(n,t){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==t?lc(n._root,t):n._root}function Rw(n,t){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const e=Aw(t,n._repo.repoInfo_.nodeAdmin);rD("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ko("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Mw(n,e.path.toString())}function lc(n,t){return null===an((n=(0,L.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Pg("child","path",e,!1)):Pg("child","path",t,!1),new Uo(n._repo,vr(n._path,t));var e}function kw(n,t){n=(0,L.m9)(n),Vo("set",n._path),ol("set",t,n._path,!1);const e=new L.BH;return Og(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function bF(n,t){nD("update",t,n._path,!1);const e=new L.BH;return function(n,t,e,r){Ql(n,"update",{path:t.toString(),value:e});let i=!0;const l=Dd(n),d={};if(vi(e,(f,m)=>{i=!1,d[f]=lw(vr(t,f),Rr(m),n.serverSyncTree_,l)}),i)Jr("update() called with empty data.  Don't do anything."),ga(0,r,"ok",void 0);else{const f=Jl(n),m=function(n,t,e,r){!function(n,t,e,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=IT(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=rr.fromObject(e);return Eg(n,new af({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,d,f);Py(n.eventQueue_,m),n.server_.merge(t.toString(),e,(b,T)=>{const A="ok"===b;A||qi("update at "+t+" failed: "+b);const M=rc(n.serverSyncTree_,f,!A),O=M.length>0?_f(n,t):t;to(n.eventQueue_,O,M),ga(0,r,b,T)}),vi(e,b=>{const T=Dw(n,vr(t,b));_f(n,T)}),to(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function wF(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(b,T)=>{const A=Wi(b,e);r=r||Yl(T,A)});let i=n.syncPointTree_.get(e);i?r=r||Yl(i,mn()):(i=new $T,n.syncPointTree_=n.syncPointTree_.set(e,i));const l=null!=r,d=l?new zl(r,!0,!1):null;return function(n){return yg(n.viewCache_)}(tw(i,t,Bb(n.pendingWriteTree_,t._path),l?d.getNode():Kt.EMPTY_NODE,l))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Rr(r).withIndex(t._queryParams.getIndex()),l=ff(n.serverSyncTree_,t._path,i);return Oy(n.eventQueue_,t._path,l),Promise.resolve(i)},r=>(Ql(n,"get for query "+(0,L.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,L.m9)(n))._repo,n).then(t=>new Id(t,new Uo(n._repo,n._path),n._queryParams.getIndex()))}class Ug{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new Bg("value",this,new Id(t.snapshotNode,new Uo(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Sw(this,t,e):null}matches(t){return t instanceof Ug&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ad{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Sw(this,t,e):null}createEvent(t,e){(0,L.hu)(null!=t.childName,"Child events should have a childName.");const r=lc(new Uo(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new Bg(t.type,this,new Id(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Ad&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $g(n,t,e,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const m=e,b=(T,A)=>{bw(n._repo,n,f),m(T,A)};b.userCallback=e.userCallback,b.context=e.context,e=b}const d=new Nw(e,l||void 0),f="value"===t?new Ug(d):new Ad(t,d);return function(n,t,e){let r;r=".info"===an(t._path)?ow(n.infoSyncTree_,t,e):ow(n.serverSyncTree_,t,e),Oy(n.eventQueue_,t._path,r)}(n._repo,n,f),()=>bw(n._repo,n,f)}function Pw(n,t,e,r){return $g(n,"value",t,e,r)}function Ow(n,t,e,r){return $g(n,"child_added",t,e,r)}function yf(n,t,e,r){return $g(n,"child_changed",t,e,r)}function fD(n,t,e,r){return $g(n,"child_moved",t,e,r)}function pD(n,t,e,r){return $g(n,"child_removed",t,e,r)}function gD(n,t,e){let r=null;const i=e?new Nw(e):null;"value"===t?r=new Ug(i):t&&(r=new Ad(t,i)),bw(n._repo,n,r)}class ma{}class mD extends ma{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ol("endAt",this._value,t._path,!0);const e=Cd(t._queryParams,this._value,this._key);if(Ly(e),Bo(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class Nx extends ma{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ol("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===da?("string"==typeof t&&(t=vT(t)),i=Cd(n,t,e)):(r=null==e?Qa:vT(e),i=Cd(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Ly(e),Bo(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class Sd extends ma{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ol("startAt",this._value,t._path,!0);const e=gg(t._queryParams,this._value,this._key);if(Ly(e),Bo(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class yD extends ma{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ol("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===da)"string"==typeof t&&(t=cy(t)),r=gg(n,t,e);else{let i;i=null==e?Xa:cy(e),r=gg(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Ly(e),Bo(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class vD extends ma{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class bD extends ma{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Fw extends ma{constructor(t){super(),this._path=t}_apply(t){ac(t,"orderByChild");const e=new Cn(this._path);if(ln(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ay(e),i=sl(t._queryParams,r);return Bo(i),new Vs(t._repo,t._path,i,!0)}}class wD extends ma{_apply(t){ac(t,"orderByKey");const e=sl(t._queryParams,da);return Bo(e),new Vs(t._repo,t._path,e,!0)}}class Fx extends ma{_apply(t){ac(t,"orderByPriority");const e=sl(t._queryParams,nr);return Bo(e),new Vs(t._repo,t._path,e,!0)}}class Vx extends ma{_apply(t){ac(t,"orderByValue");const e=sl(t._queryParams,ly);return Bo(e),new Vs(t._repo,t._path,e,!0)}}class Bx extends ma{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(ol("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new mD(this._value,this._key)._apply(new Sd(this._value,this._key)._apply(t))}}function _a(n,...t){let e=(0,L.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,L.hu)(!Cg,"__referenceConstructor has already been defined"),Cg=n})(Uo),function(n){(0,L.hu)(!Dy,"__referenceConstructor has already been defined"),Dy=n}(Uo);const Vw={};function DD(n,t,e,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||ko("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jr("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,b,d=Aw(l,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(m=!0,l=`http://${b}?ns=${f.namespace}`,d=Aw(l,i),f=d.repoInfo):m=!d.repoInfo.secure;const T=i&&m?new ng(ng.OWNER):new K_(n.name,n.options,t);rD("Invalid Firebase Database URL",d),ln(d.path)||ko("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function(n,t,e,r){let i=Vw[t.name];i||(i={},Vw[t.name]=i);let l=i[n.toURLString()];return l&&ko("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new oD(n,false,e,r),i[n.toURLString()]=l,l}(f,n,T,new jE(n.name,e));return new AD(A,n)}class AD{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=J_(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Xh(n.repoInfo_,(r,i,l,d)=>{yw(n,r,i,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>oc(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Wl(n.repoInfo_,t,(r,i,l,d)=>{yw(n,r,i,l,d)},r=>{oc(n,r)},r=>{!function(n,t){vi(t,(e,r)=>{vw(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return ig[e]||(ig[e]=t()),ig[e]}(n.repoInfo_,()=>new ET(n.stats_,n.server_)),n.infoData_=new ef,n.infoSyncTree_=new Qr({startListening:(r,i,l,d)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=ff(n.infoSyncTree_,r._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),vw(n,"connected",!1),n.serverSyncTree_=new Qr({startListening:(r,i,l,d)=>(n.server_.listen(r,l,i,(f,m)=>{const b=d(f,m);to(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Uo(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=Vw[t];(!e||e[n.key]!==n)&&ko(`Database ${t}(${n.repoInfo_}) has already been deleted.`),Fg(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ko("Cannot call "+t+" on a deleted database.")}}function Wx(n,t){jl(n,t)}class Hw{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wl.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Wl.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},q_(Os.SDK_VERSION),(0,Os._registerComponent)(new Ro.wA("database",(t,{instanceIdentifier:e})=>DD(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Os.registerVersion)(ib,"0.12.8",void 0),(0,Os.registerVersion)(ib,"0.12.8","esm2017");const Kx=new Ja.Yd("@firebase/database-compat"),jw=function(n){Kx.warn("FIREBASE WARNING: "+n)};class EF{constructor(t){this._delegate=t}cancel(t){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),l=>r(l)),i}update(t,e){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,jw("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class Jx{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class no{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Pg("DataSnapshot.child","path",t,!1),new no(this._database,this._delegate.child(t))}hasChild(t){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Pg("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new no(this._database,e)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new gs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class zi{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var l;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",e,!1);const d=zi.getCancelAndContextArgs_("Query.on",r,i),f=(b,T)=>{e.call(d.context,new no(this.database,b),T)};f.userCallback=e,f.context=d.context;const m=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(t){case"value":return Pw(this._delegate,f,m),e;case"child_added":return Ow(this._delegate,f,m),e;case"child_removed":return pD(this._delegate,f,m),e;case"child_changed":return yf(this._delegate,f,m),e;case"child_moved":return fD(this._delegate,f,m),e;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,L.Wj)("Query.off","callback",e,!0),(0,L.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,gD(this._delegate,t,i)}else gD(this._delegate,t)}get(){return wF(this._delegate).then(t=>new no(this.database,t))}once(t,e,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",e,!0);const l=zi.getCancelAndContextArgs_("Query.once",r,i),d=new L.BH,f=(b,T)=>{const A=new no(this.database,b);e&&e.call(l.context,A,T),d.resolve(A)};f.userCallback=e,f.context=l.context;const m=b=>{l.cancel&&l.cancel.call(l.context,b),d.reject(b)};switch(t){case"value":Pw(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":Ow(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":pD(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":yf(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":fD(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(t){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new zi(this.database,_a(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new vD(n)}(t)))}limitToLast(t){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new zi(this.database,_a(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new bD(n)}(t)))}orderByChild(t){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new zi(this.database,_a(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pg("orderByChild","path",n,!1),new Fw(n)}(t)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new zi(this.database,_a(this._delegate,new wD))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new zi(this.database,_a(this._delegate,new Fx))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new zi(this.database,_a(this._delegate,new Vx))}startAt(t=null,e){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new zi(this.database,_a(this._delegate,function(n=null,t){return kg("startAt","key",t,!0),new Sd(n,t)}(t,e)))}startAfter(t=null,e){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new zi(this.database,_a(this._delegate,function(n,t){return kg("startAfter","key",t,!0),new yD(n,t)}(t,e)))}endAt(t=null,e){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new zi(this.database,_a(this._delegate,function(n,t){return kg("endAt","key",t,!0),new mD(n,t)}(t,e)))}endBefore(t=null,e){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new zi(this.database,_a(this._delegate,function(n,t){return kg("endBefore","key",t,!0),new Nx(n,t)}(t,e)))}equalTo(t,e){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new zi(this.database,_a(this._delegate,function(n,t){return kg("equalTo","key",t,!0),new Bx(n,t)}(t,e)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof zi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,L.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,L.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new gs(this.database,new Uo(this._delegate._repo,this._delegate._path))}}class gs extends zi{constructor(t,e){super(t,new Vs(e._repo,e._path,new Ls,!1)),this.database=t,this._delegate=e}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new gs(this.database,lc(this._delegate,t))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new gs(this.database,t):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new gs(this.database,this._delegate.root)}set(t,e){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",e,!0);const r=kw(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,jw("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vo("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",e,!0);const r=bF(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(Vo("setWithPriority",n._path),ol("setWithPriority",t,n._path,!1),pw("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return Og(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),l=>r(l)),i}remove(t){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return Vo("remove",n._path),kw(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,L.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,L.m9)(n),Vo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,l=new L.BH,f=Pw(n,()=>{});return function(n,t,e,r,i,l){Ql(n,"transaction on "+t);const d={path:t,update:e,onComplete:r,status:null,order:TN(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=cD(n,t,void 0);d.currentInputSnapshot=f;const m=d.update(f.val());if(void 0===m)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{Rg("transaction failed: Data returned ",m,d.path),d.status=0;const b=Ag(n.transactionQueueTree_,t),T=sc(b)||[];let A;T.push(d),Sg(b,T),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(A=(0,L.DV)(m,".priority"),(0,L.hu)(Mg(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(Ay(n.serverSyncTree_,t)||Kt.EMPTY_NODE).getPriority().val();const M=Dd(n),O=Rr(m,A),G=My(O,f,M);d.currentOutputSnapshotRaw=O,d.currentOutputSnapshotResolved=G,d.currentWriteId=Jl(n);const ie=Iy(n.serverSyncTree_,t,G,d.currentWriteId,d.applyLocally);to(n.eventQueue_,t,ie),Lg(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(m,b,T)=>{let A=null;m?l.reject(m):(A=new Id(T,new Uo(n._repo,n._path),nr),l.resolve(new Hw(b,A)))},f,i),l.promise}(this._delegate,t,{applyLocally:r}).then(l=>new Jx(l.committed,new no(this.database,l.snapshot)));return e&&i.then(l=>e(null,l.committed,l.snapshot),l=>e(l,!1,null)),i}setPriority(t,e){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,L.m9)(n),Vo("setPriority",n._path),pw("setPriority",t,!1);const e=new L.BH;return Og(n._repo,vr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,L.m9)(n),Vo("push",n._path),ol("push",t,n._path,!0);const e=_w(n._repo),r=qN(e),i=lc(n,r),l=lc(n,r);let d;return d=null!=t?kw(l,t).then(()=>l):Promise.resolve(l),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,t),i=r.then(d=>new gs(this.database,d));e&&i.then(()=>e(null),d=>e(d));const l=new gs(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return Vo("Reference.onDisconnect",this._delegate._path),new EF(new xw(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uc{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ko("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ko('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new ng(ng.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);l=new ng(d)}!function(n,t,e,r){n.repoInfo_=new zE(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,l)}(this._delegate,t,e,r)}ref(t){if((0,L.Dv)("database.ref",0,1,arguments.length),t instanceof gs){const e=Rw(this._delegate,t.toString());return new gs(this,e)}{const e=Mw(this._delegate,t);return new gs(this,e)}}refFromURL(t){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=Rw(this._delegate,t);return new gs(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),Fg(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(mw)}(n._repo)}(this._delegate)}}uc.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var vf=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){q_(e);const d=new Ro.zt("auth-internal",new Ro.H0("database-standalone"));return d.setComponent(new Ro.wA("auth-internal",()=>r,"PRIVATE")),{instance:new uc(DD(n,d,void 0,t,l),n),namespace:i}}});const Xx=uc.ServerValue;!function(n){n.INTERNAL.registerComponent(new Ro.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new uc(i,r)},"PUBLIC").setServiceProps({Reference:gs,Query:zi,Database:uc,DataSnapshot:no,enableLogging:Wx,INTERNAL:vf,ServerValue:Xx}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(rb.Z);var Hg=B(9746),al=B(7771),PD=B(8858);class DF extends Tn.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Vy(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,l=r.length;let d;if(this.closed)throw new kl.N;if(this.isStopped||this.hasError?d=Ch.w.EMPTY:(this.observers.push(t),d=new PD.W(this,t)),i&&t.add(t=new Hg.ht(t,i)),e)for(let f=0;f<l&&!t.closed;f++)t.next(r[f]);else for(let f=0;f<l&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||al.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,l=i.length;let d=0;for(;d<l&&!(t-i[d].time<r);)d++;return l>e&&(d=Math.max(d,l-e)),d>0&&i.splice(0,d),i}}class Vy{constructor(t,e){this.time=t,this.value=e}}function OD(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let i,d,l=0,f=!1,m=!1;return function(T){let A;l++,!i||f?(f=!1,i=new DF(n,t,r),A=i.subscribe(this),d=T.subscribe({next(M){i.next(M)},error(M){f=!0,i.error(M)},complete(){m=!0,d=void 0,i.complete()}}),m&&(d=void 0)):A=i.subscribe(this),this.add(()=>{l--,A.unsubscribe(),A=void 0,d&&!m&&e&&0===l&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function tM(n,t){return t?tr(()=>n,t):tr(()=>n)}var Gw=B(2639);B(2329);const LD=new Map,VD={activated:!1,tokenObservers:[]},$y={initialized:!1,enabled:!1};function Gr(n){return LD.get(n)||VD}function ms(n,t){LD.set(n,t)}function Hy(){return $y}class hM{constructor(t,e,r,i,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,be.Z)(function*(){e.stop();try{e.pending=new L.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new L.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const _s=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gM(n){if(!Gr(n).activated)throw _s.create("use-before-activation",{appName:n.name})}function Yw(n,t){return Kw.apply(this,arguments)}function Kw(){return(Kw=(0,be.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const l={method:"POST",body:JSON.stringify(t),headers:r};let d,f;try{d=yield fetch(n,l)}catch(A){throw _s.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==d.status)throw _s.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(A){throw _s.create("fetch-parse-error",{originalErrorMessage:A.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw _s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(m[1]),T=Date.now();return{token:f.attestationToken,expireTimeMillis:T+b,issuedAtTimeMillis:T}})).apply(this,arguments)}function UD(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const jg="firebase-app-check-store";let Wy=null;function $D(){return Wy||(Wy=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(_s.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(jg,{keyPath:"compositeKey"})}}}catch(e){t(_s.create("storage-open",{originalErrorMessage:e.message}))}}),Wy)}function Xw(){return(Xw=(0,be.Z)(function*(n,t){const r=(yield $D()).transaction(jg,"readwrite"),l=r.objectStore(jg).put({compositeKey:n,value:t});return new Promise((d,f)=>{l.onsuccess=m=>{d()},r.onerror=m=>{var b;f(_s.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const bf=new Ja.Yd("@firebase/app-check");function yM(n,t){return(0,L.hl)()?function(n,t){return function(n,t){return Xw.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{bf.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Xl(){return Hy().enabled}function Md(){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,be.Z)(function*(){const n=Hy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ht={error:"UNKNOWN_ERROR"};function $o(n){return L.US.encodeString(JSON.stringify(n),!1)}function Cf(n){return eu.apply(this,arguments)}function eu(){return(eu=(0,be.Z)(function*(n,t=!1){const e=n.app;gM(e);const r=Gr(e);let l,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Ky(m)&&(i=m)}if(!t&&i&&Ky(i))return{token:i.token};let f,d=!1;if(Xl()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Yw(UD(e,yield Md()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const m=yield r.exchangeTokenPromise;return yield yM(e,m),ms(e,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),d=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?bf.warn(m.message):bf.error(m),l=m}return i?(f={token:i.token},ms(e,Object.assign(Object.assign({},r),{token:i})),yield yM(e,i)):f=Ho(l),d&&zD(e,f),f})).apply(this,arguments)}function Yy(n,t){const e=Gr(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),ms(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function e1(n){const{app:t}=n,e=Gr(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new hM((0,be.Z)(function*(){let r;if(r=Gr(t).token?yield Cf(n,!0):yield Cf(n),r.error)throw r.error}),()=>!0,()=>{const e=Gr(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ms(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function zD(n,t){const e=Gr(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function Ky(n){return n.expireTimeMillis-Date.now()>0}function Ho(n){return{token:$o(Ht),error:n}}class Dr{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Gr(this.app);for(const e of t)Yy(this.app,e.next);return Promise.resolve()}}const Bt="app-check-internal";(0,Os._registerComponent)(new Ro.wA("app-check",n=>function(n,t){return new Dr(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(Bt).initialize()})),(0,Os._registerComponent)(new Ro.wA(Bt,n=>function(n){return{getToken:t=>Cf(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,l=Gr(i),d={next:e,error:r,type:t};if(ms(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&Ky(l.token)){const f=l.token;Promise.resolve().then(()=>{e({token:f.token}),e1(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>e1(n))}(n,"INTERNAL",t),removeTokenListener:t=>Yy(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Os.registerVersion)("@firebase/app-check","0.5.6");class Jg{constructor(){return(0,wn.vb)("app-check")}}"undefined"!=typeof window&&window;var a1=B(7841);const Qy=new a.OlP("angularfire2.auth.use-emulator"),Qg=new a.OlP("angularfire2.auth.settings"),l1=new a.OlP("angularfire2.auth.tenant-id"),iI=new a.OlP("angularfire2.auth.langugage-code"),u1=new a.OlP("angularfire2.auth.use-device-language"),c1=new a.OlP("angularfire.auth.persistence"),d1=(n,t,e,r,i,l,d,f)=>(0,jr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=t.runOutsideAngular(()=>n.auth());if(e&&m.useEmulator(...e),r&&(m.tenantId=r),m.languageCode=i,l&&m.useDeviceLanguage(),d)for(const[b,T]of Object.entries(d))m.settings[b]=T;return f&&m.setPersistence(f),m},[e,r,i,l,d,f]);let Xg=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A,M,O){const G=new Tn.xQ,ie=(0,dt.of)(void 0).pipe((0,Hg.QV)(d.outsideAngular),tr(()=>l.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4828)))),(0,ut.U)(()=>(0,jr.on)(e,l,r)),(0,ut.U)(_e=>d1(_e,l,f,b,T,A,m,M)),OD({bufferSize:1,refCount:!1}));if(uh(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,dt.of)(null);else{ie.pipe(yr()).subscribe();const $e=ie.pipe(tr(st=>st.getRedirectResult().then(Nt=>Nt,()=>null)),wn.iC,OD({bufferSize:1,refCount:!1})),qe=ie.pipe(tr(st=>new qn.y(Nt=>({unsubscribe:l.runOutsideAngular(()=>st.onAuthStateChanged(Wt=>Nt.next(Wt),Wt=>Nt.error(Wt),()=>Nt.complete()))})))),it=ie.pipe(tr(st=>new qn.y(Nt=>({unsubscribe:l.runOutsideAngular(()=>st.onIdTokenChanged(Wt=>Nt.next(Wt),Wt=>Nt.error(Wt),()=>Nt.complete()))}))));this.authState=$e.pipe(tM(qe),(0,Gw.R)(d.outsideAngular),(0,Hg.QV)(d.insideAngular)),this.user=$e.pipe(tM(it),(0,Gw.R)(d.outsideAngular),(0,Hg.QV)(d.insideAngular)),this.idToken=this.user.pipe(tr(st=>st?(0,en.D)(st.getIdToken()):(0,dt.of)(null))),this.idTokenResult=this.user.pipe(tr(st=>st?(0,en.D)(st.getIdTokenResult()):(0,dt.of)(null))),this.credential=(0,Kp.T)($e,G,this.authState.pipe(Wn(st=>!st))).pipe((0,ut.U)(st=>(null==st?void 0:st.user)?st:null),(0,Gw.R)(d.outsideAngular),(0,Hg.QV)(d.insideAngular))}return(0,jr.pX)(this,ie,l,{spy:{apply:(_e,$e,qe)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&qe.then(it=>G.next(it))}}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(jr.Dh),a.LFG(jr.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(wn.HU),a.LFG(Qy,8),a.LFG(Qg,8),a.LFG(l1,8),a.LFG(iI,8),a.LFG(u1,8),a.LFG(c1,8),a.LFG(Jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AM=(()=>{class n{constructor(){a1.Z.registerVersion("angularfire",wn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Xg]}),n})();function sI(n){return null==n}function oI(n){return"function"==typeof n.set}function h1(n,t){return oI(t)?t:n.ref(t)}function Df(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(oI(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Xy(n,t,e="on",r=Yu.z){return new qn.y(i=>{let l=null;return l=n[e](t,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===e&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===e?{unsubscribe(){null!=l&&n.off(t,l)}}:{unsubscribe(){}}}).pipe((0,ut.U)(i=>{const{snapshot:l,prevKey:d}=i;let f=null;return l.exists()&&(f=l.key),{type:t,payload:l,prevKey:d,key:f}}),(0,j_.B)())}function lI(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function xM(n,t){const{payload:e,prevKey:r,key:i}=t,l=lI(n,i),d=function(n,t){if(sI(t))return 0;{const e=lI(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(m=>{const b={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==e.key)).splice(d,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(d,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===i?t:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function uI(n){return(sI(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function cI(n,t,e){return function(n,t,e){return Xy(n,"value","once",e).pipe(tr(r=>{const i=[(0,dt.of)(r)];return t.forEach(l=>i.push(Xy(n,l,"on",e))),(0,Kp.T)(...i).pipe(Ua(xM,[]))}),Ks())}(n,t=uI(t),e)}function f1(n,t,e){const r=(t=uI(t)).map(i=>Xy(n,i,"on",e));return(0,Kp.T)(...r)}function kM(n,t){return function(r,i){return Df(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function GF(n){return function(e){return e?Df(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function dI(n,t){return function(){return Xy(n,"value","on",t)}}const OM=new a.OlP("angularfire2.realtimeDatabaseURL"),FM=new a.OlP("angularfire2.database.use-emulator");let LM=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A,M,O,G,ie,_e){this.schedulers=f;const $e=m,qe=(0,jr.on)(e,d,r);b&&d1(qe,d,T,M,O,G,A,ie),this.database=(0,jr.cc)(`${qe.name}.database.${i}`,"AngularFireDatabase",qe.name,()=>{const it=d.runOutsideAngular(()=>qe.database(i||void 0));return $e&&it.useEmulator(...$e),it},[$e])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>h1(this.database,e));let l=i;return r&&(l=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:kM(r,"update"),set:kM(r,"set"),push:i=>r.push(i),remove:GF(r),snapshotChanges:i=>cI(n,i,e).pipe(wn.iC),stateChanges:i=>f1(n,i,e).pipe(wn.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return Xy(n,"value","on",t).pipe((0,ut.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(Lh(t),(0,ut.U)(([i,l])=>{const d=i.lastKeyToLoad,f=l.map(m=>m.key);return{actions:l,lastKeyToLoad:d,loadedKeys:f}}),function(n){return t=>t.lift(new Hl(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ut.U)(i=>i.actions))}(n,f1(n,t).pipe(Ua((i,l)=>[...i,l],[])),e)}(n,i,e).pipe(wn.iC),valueChanges:(i,l)=>cI(n,i,e).pipe((0,ut.U)(f=>f.map(m=>l&&l.idField?Object.assign(Object.assign({},m.payload.val()),{[l.idField]:m.key}):m.payload.val())),wn.iC)}}(l,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>dI(n,t.schedulers.outsideAngular)().pipe(wn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>dI(n,t.schedulers.outsideAngular)().pipe(wn.iC,(0,ut.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>h1(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(jr.Dh),a.LFG(jr.xv,8),a.LFG(OM,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(wn.HU),a.LFG(FM,8),a.LFG(Xg,8),a.LFG(Qy,8),a.LFG(Qg,8),a.LFG(l1,8),a.LFG(iI,8),a.LFG(u1,8),a.LFG(c1,8),a.LFG(Jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var hI=B(982);function tm(){return n=>n.lift(new VM)}class VM{call(t,e){return e.subscribe(new If(t))}}class If extends ar.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var tt,Yi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ul={},nm=nm||{},jt=Yi||self;function rm(){}function ev(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Af(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var g1="closure_uid_"+(1e9*Math.random()>>>0),UM=0;function fI(n,t,e){return n.call.apply(n.bind,arguments)}function $M(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function Ki(n,t,e){return(Ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fI:$M).apply(null,arguments)}function tv(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ki(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return t.prototype[i].apply(r,d)}}function ro(){this.s=this.s,this.o=this.o}var pI={};ro.prototype.s=!1,ro.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,g1)&&n[g1]||(n[g1]=++UM)}(this);delete pI[n]}},ro.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gI=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},HM=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&t.call(e,i[l],l,n)};function _I(n){return Array.prototype.concat.apply([],arguments)}function im(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function nv(n){return/^[\s\xa0]*$/.test(n)}var vs,m1=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ji(n,t){return-1!=n.indexOf(t)}function rv(n,t){return n<t?-1:n>t?1:0}e:{var yI=jt.navigator;if(yI){var vI=yI.userAgent;if(vI){vs=vI;break e}}vs=""}function _1(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function bI(n){const t={};for(const e in n)t[e]=n[e];return t}var wI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sf(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let l=0;l<wI.length;l++)e=wI[l],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function iv(n){return iv[" "](n),n}iv[" "]=rm;var ov,EI=Ji(vs,"Opera"),Pd=Ji(vs,"Trident")||Ji(vs,"MSIE"),y1=Ji(vs,"Edge"),sv=y1||Pd,TI=Ji(vs,"Gecko")&&!(Ji(vs.toLowerCase(),"webkit")&&!Ji(vs,"Edge"))&&!(Ji(vs,"Trident")||Ji(vs,"MSIE"))&&!Ji(vs,"Edge"),DI=Ji(vs.toLowerCase(),"webkit")&&!Ji(vs,"Edge");function v1(){var n=jt.document;return n?n.documentMode:void 0}e:{var b1="",w1=function(){var n=vs;return TI?/rv:([^\);]+)(\)|;)/.exec(n):y1?/Edge\/([\d\.]+)/.exec(n):Pd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):DI?/WebKit\/(\S+)/.exec(n):EI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(w1&&(b1=w1?w1[1]:""),Pd){var Od=v1();if(null!=Od&&Od>parseFloat(b1)){ov=String(Od);break e}}ov=b1}var sm={};function jM(){return t=sm,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=m1(String(ov)).split("."),e=m1("9").split("."),r=Math.max(t.length,e.length);for(let d=0;0==n&&d<r;d++){var i=t[d]||"",l=e[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=rv(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||rv(0==i[2].length,0==l[2].length)||rv(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n}();var t}var GM=jt.document&&Pd&&(v1()||parseInt(ov,10))||void 0,av=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",rm,t),jt.removeEventListener("test",rm,t)}catch(e){}return n}();function Qi(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function am(n,t){if(Qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(TI){e:{try{iv(t.nodeName);var i=!0;break e}catch(l){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ZF[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&am.Z.h.call(this)}}Qi.prototype.h=function(){this.defaultPrevented=!0},ki(am,Qi);var ZF={2:"touch",3:"pen",4:"mouse"};am.prototype.h=function(){am.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fd="closure_listenable_"+(1e6*Math.random()|0),C1=0;function II(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++C1,this.ca=this.fa=!1}function Nf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function xf(n){this.src=n,this.g={},this.h=0}function E1(n,t){var e=t.type;if(e in n.g){var l,r=n.g[e],i=gI(r,t);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(Nf(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function T1(n,t,e,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==r)return i}return-1}xf.prototype.add=function(n,t,e,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=T1(n,t,r,i);return-1<d?(t=n[d],e||(t.fa=!1)):((t=new II(t,this.src,l,!!r,i)).fa=e,n.push(t)),t};var D1="closure_lm_"+(1e6*Math.random()|0),I1={};function A1(n,t,e,r,i){if(r&&r.once)return S1(n,t,e,r,i);if(Array.isArray(t)){for(var l=0;l<t.length;l++)A1(n,t[l],e,r,i);return null}return e=dv(e),n&&n[Fd]?n.N(t,e,Af(r)?!!r.capture:!!r,i):lv(n,t,e,!1,r,i)}function lv(n,t,e,r,i,l){if(!t)throw Error("Invalid event type");var d=Af(i)?!!i.capture:!!i,f=cv(n);if(f||(n[D1]=f=new xf(n)),(e=f.add(t,e,r,d,l)).proxy)return e;if(r=function(){var t=NI;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)av||(i=d),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(SI(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function S1(n,t,e,r,i){if(Array.isArray(t)){for(var l=0;l<t.length;l++)S1(n,t[l],e,r,i);return null}return e=dv(e),n&&n[Fd]?n.O(t,e,Af(r)?!!r.capture:!!r,i):lv(n,t,e,!0,r,i)}function N1(n,t,e,r,i){if(Array.isArray(t))for(var l=0;l<t.length;l++)N1(n,t[l],e,r,i);else r=Af(r)?!!r.capture:!!r,e=dv(e),n&&n[Fd]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=T1(l=n.g[t],e,r,i))&&(Nf(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete n.g[t],n.h--))):n&&(n=cv(n))&&(t=n.g[t.toString()],n=-1,t&&(n=T1(t,e,r,i)),(e=-1<n?t[n]:null)&&uv(e))}function uv(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Fd])E1(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(SI(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=cv(t))?(E1(e,n),0==e.h&&(e.src=null,t[D1]=null)):Nf(n)}}}function SI(n){return n in I1?I1[n]:I1[n]="on"+n}function NI(n,t){if(n.ca)n=!0;else{t=new am(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&uv(n),n=e.call(r,t)}return n}function cv(n){return(n=n[D1])instanceof xf?n:null}var x1="__closure_events_fn_"+(1e9*Math.random()>>>0);function dv(n){return"function"==typeof n?n:(n[x1]||(n[x1]=function(t){return n.handleEvent(t)}),n[x1])}function ui(){ro.call(this),this.i=new xf(this),this.P=this,this.I=null}function Xi(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Qi(t,n);else if(t instanceof Qi)t.target=t.target||n;else{var i=t;Sf(t=new Qi(r,n),i)}if(i=!0,e)for(var l=e.length-1;0<=l;l--){var d=t.g=e[l];i=bi(d,r,!0,t)&&i}if(i=bi(d=t.g=n,r,!0,t)&&i,i=bi(d,r,!1,t)&&i,e)for(l=0;l<e.length;l++)i=bi(d=t.g=e[l],r,!1,t)&&i}function bi(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,l=0;l<t.length;++l){var d=t[l];if(d&&!d.ca&&d.capture==e){var f=d.listener,m=d.ia||d.src;d.fa&&E1(n.i,d),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ki(ui,ro),ui.prototype[Fd]=!0,ui.prototype.removeEventListener=function(n,t,e,r){N1(this,n,t,e,r)},ui.prototype.M=function(){if(ui.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)Nf(e[r]);delete n.g[t],n.h--}}this.I=null},ui.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},ui.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var cc=jt.JSON.stringify;function qM(){var n=MI;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var M1,ZM=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lm,n=>n.reset());class lm{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function zM(n){jt.setTimeout(()=>{throw n},0)}function um(n,t){M1||function(){var n=jt.Promise.resolve(void 0);M1=function(){n.then(k1)}}(),R1||(M1(),R1=!0),MI.add(n,t)}var R1=!1,MI=new class{constructor(){this.h=this.g=null}add(t,e){const r=ZM.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function k1(){for(var n;n=qM();){try{n.h.call(n.g)}catch(e){zM(e)}var t=ZM;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}R1=!1}function cm(n,t){ui.call(this),this.h=n||1,this.g=t||jt,this.j=Ki(this.kb,this),this.l=Date.now()}function hv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Mf(n,t,e){if("function"==typeof n)e&&(n=Ki(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ki(n.handleEvent,n)}return 2147483647<Number(t)?-1:jt.setTimeout(n,t||0)}function fv(n){n.g=Mf(()=>{n.g=null,n.i&&(n.i=!1,fv(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}ki(cm,ui),(tt=cm.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Xi(this,"tick"),this.da&&(hv(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){cm.Z.M.call(this),hv(this),delete this.g};class zF extends ro{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:fv(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rf(n){ro.call(this),this.h=n,this.g={}}ki(Rf,ro);var RI=[];function P1(n,t,e,r){Array.isArray(e)||(e&&(RI[0]=e.toString()),e=RI);for(var i=0;i<e.length;i++){var l=A1(t,e[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function dm(n){_1(n.g,function(t,e){this.g.hasOwnProperty(e)&&uv(t)},n),n.g={}}function hm(){this.g=!0}function dc(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<i.length;d++)i[d]=""}}}return cc(e)}catch(f){return t}}(n,e)+(r?" "+r:"")})}Rf.prototype.M=function(){Rf.Z.M.call(this),dm(this)},Rf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hm.prototype.Aa=function(){this.g=!1},hm.prototype.info=function(){};var hc={},F1=null;function fm(){return F1=F1||new ui}function kI(n){Qi.call(this,hc.Ma,n)}function kf(n){const t=fm();Xi(t,new kI(t,n))}function L1(n,t){Qi.call(this,hc.STAT_EVENT,n),this.stat=t}function bs(n){const t=fm();Xi(t,new L1(t,n))}function PI(n,t){Qi.call(this,hc.Na,n),this.size=t}function Pf(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},t)}hc.Ma="serverreachability",ki(kI,Qi),hc.STAT_EVENT="statevent",ki(L1,Qi),hc.Na="timingevent",ki(PI,Qi);var pv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},V1={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gv(){}function U1(){}gv.prototype.h=null;var mv,pm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function $1(){Qi.call(this,"d")}function H1(){Qi.call(this,"c")}function j1(){}function _v(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new Rf(this),this.P=YF,this.W=new cm(n=sv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new QM}function QM(){this.i=null,this.g="",this.h=!1}ki($1,Qi),ki(H1,Qi),ki(j1,gv),j1.prototype.g=function(){return new XMLHttpRequest},j1.prototype.i=function(){return{}},mv=new j1;var YF=45e3,OI={},G1={};function FI(n,t,e){n.K=1,n.v=K1(tu(t)),n.s=e,n.U=!0,XM(n,null)}function XM(n,t){n.F=Date.now(),yv(n),n.A=tu(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),uR(e.h,"t",r),n.C=0,e=n.l.H,n.h=new QM,n.g=lC(n.l,e?t:null,!n.s),0<n.O&&(n.L=new zF(Ki(n.Ia,n,n.g),n.O)),P1(n.V,n.g,"readystatechange",n.gb),t=n.H?bI(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),kf(1),function(n,t,e,r,i,l){n.info(function(){if(n.g)if(l)for(var d="",f=l.split("&"),m=0;m<f.length;m++){var b=f[m].split("=");if(1<b.length){var T=b[0];b=b[1];var A=T.split("_");d=2<=A.length&&"type"==A[1]?d+(T+"=")+b+"&":d+(T+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function eR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function tR(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=KF(n,e),i==G1){4==t&&(n.o=4,bs(14),r=!1),dc(n.j,n.m,null,"[Incomplete Response]");break}if(i==OI){n.o=4,bs(15),dc(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}dc(n.j,n.m,i,null),LI(n,i)}eR(n)&&i!=G1&&i!=OI&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,bs(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),tA(t),t.L=!0,bs(11))):(dc(n.j,n.m,e,"[Invalid Chunked Response]"),Of(n),vv(n))}function KF(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?G1:(e=Number(t.substring(e,r)),isNaN(e)?OI:(r+=1)+e>t.length?G1:(t=t.substr(r,e),n.C=r+e,t))}function yv(n){n.Y=Date.now()+n.P,nR(n,n.P)}function nR(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Pf(Ki(n.eb,n),t)}function q1(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function vv(n){0==n.l.G||n.I||rA(n.l,n)}function Of(n){q1(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,hv(n.W),dm(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function LI(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||GI(e.i,n)))if(e.I=n.N,!n.J&&GI(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=Pf(Ki(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;wm(e),Uf(e)}aC(e),bs(18)}if(1>=hR(e.i)&&e.ka){try{e.ka()}catch(b){}e.ka=void 0}}else fc(e,11)}else if((n.J||e.g==n)&&wm(e),!nv(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let b=i[t];if(e.U=b[0],b=b[1],2==e.G)if("c"==b[0]){e.J=b[1],e.la=b[2];const T=b[3];null!=T&&(e.ma=T,e.h.info("VER="+e.ma));const A=b[4];null!=A&&(e.za=A,e.h.info("SVER="+e.za));const M=b[5];null!=M&&"number"==typeof M&&0<M&&(e.K=r=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const O=n.g;if(O){const G=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var l=r.i;!l.g&&(Ji(G,"spdy")||Ji(G,"quic")||Ji(G,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(_m(l,l.h),l.h=null))}if(r.D){const ie=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;ie&&(r.sa=ie,br(r.F,r.D,ie))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var d=n;if((r=e).oa=vR(r,r.H?r.la:null,r.W),d.J){qI(r.i,d);var f=d,m=r.K;m&&f.setTimeout(m),f.B&&(q1(f),yv(f)),r.g=d}else eA(r);0<e.l.length&&Iv(e)}else"stop"!=b[0]&&"close"!=b[0]||fc(e,7);else 3==e.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?fc(e,7):Dv(e):"noop"!=b[0]&&e.j&&e.j.wa(b),e.A=0)}kf(4)}catch(b){}}function W1(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(ev(n)||"string"==typeof n)HM(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(ev(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ev(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var l=0;l<i;l++)t.call(void 0,r[l],e&&e[l],n)}}function Ff(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ff)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function VI(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];Lf(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)Lf(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function Lf(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(tt=_v.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const t=this.L;t&&3==dl(n)?t.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const T=dl(this.g);var t=this.g.Da();const A=this.g.ba();if(!(3>T)&&(3!=T||sv||this.g&&(this.h.h||this.g.ga()||iC(this.g)))){this.I||4!=T||7==t||kf(8==t||0>=A?3:2),q1(this);var e=this.g.ba();this.N=e;t:if(eR(this)){var r=iC(this.g);n="";var i=r.length,l=4==dl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Of(this),vv(this);var d="";break t}this.h.i=new jt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:l&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,T,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nv(f)){var b=f;break t}}b=null}if(!(e=b)){this.i=!1,this.o=3,bs(12),Of(this),vv(this);break e}dc(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,LI(this,e)}this.U?(tR(this,T,d),sv&&this.i&&3==T&&(P1(this.V,this.W,"tick",this.fb),this.W.start())):(dc(this.j,this.m,d,null),LI(this,d)),4==T&&Of(this),this.i&&!this.I&&(4==T?rA(this.l,this):(this.i=!1,yv(this)))}else 400==e&&0<d.indexOf("Unknown SID")?(this.o=3,bs(12)):(this.o=0,bs(13)),Of(this),vv(this)}}}catch(T){}},tt.fb=function(){if(this.g){var n=dl(this.g),t=this.g.ga();this.C<t.length&&(q1(this),tR(this,n,t),this.i&&4!=n&&yv(this))}},tt.cancel=function(){this.I=!0,Of(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(kf(3),bs(17)),Of(this),this.o=2,vv(this)):nR(this,this.Y-n)},(tt=Ff.prototype).R=function(){VI(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},tt.T=function(){return VI(this),this.g.concat()},tt.get=function(n,t){return Lf(this.h,n)?this.h[n]:t},tt.set=function(n,t){Lf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},tt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],l=this.get(i);n.call(t,l,i,this)}};var iR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ld(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ld){this.g=void 0!==t?t:n.g,Z1(this,n.j),this.s=n.s,z1(this,n.i),Y1(this,n.m),this.l=n.l,t=n.h;var e=new bv;e.i=t.i,t.g&&(e.g=new Ff(t.g),e.h=t.h),oR(this,e),this.o=n.o}else n&&(e=String(n).match(iR))?(this.g=!!t,Z1(this,e[1]||"",!0),this.s=cl(e[2]||""),z1(this,e[3]||"",!0),Y1(this,e[4]),this.l=cl(e[5]||"",!0),oR(this,e[6]||"",!0),this.o=cl(e[7]||"")):(this.g=!!t,this.h=new bv(null,this.g))}function tu(n){return new Ld(n)}function Z1(n,t,e){n.j=e?cl(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function z1(n,t,e){n.i=e?cl(t,!0):t}function Y1(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function oR(n,t,e){t instanceof bv?(n.h=t,function(n,t){t&&!n.j&&(nu(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(gm(this,r),uR(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=Vf(t,$I)),n.h=new bv(t,n.g))}function br(n,t,e){n.h.set(t,e)}function K1(n){return br(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function cl(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Vf(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,lR),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function lR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ld.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Vf(t,BI,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Vf(t,BI,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(Vf(e,"/"==e.charAt(0)?UI:Q1,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Vf(e,HI)),n.join("")};var BI=/[#\/\?@]/g,Q1=/[#\?:]/g,UI=/[#\?]/g,$I=/[#\?@]/g,HI=/#/g;function bv(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function nu(n){n.g||(n.g=new Ff,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var l=n[e].substring(0,r);i=n[e].substring(r+1)}else l=n[e];t(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function gm(n,t){nu(n),t=mm(n,t),Lf(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Lf((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&VI(n)))}function X1(n,t){return nu(n),t=mm(n,t),Lf(n.g.h,t)}function uR(n,t,e){gm(n,t),0<e.length&&(n.i=null,n.g.set(mm(n,t),im(e)),n.h+=e.length)}function mm(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function dR(n){this.l=n||wv,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ea&&jt.g.Ea()&&jt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=bv.prototype).add=function(n,t){nu(this),this.i=null,n=mm(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},tt.forEach=function(n,t){nu(this),this.g.forEach(function(e,r){HM(e,function(i){n.call(t,i,r,this)},this)},this)},tt.T=function(){nu(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],l=0;l<i.length;l++)e.push(t[r]);return e},tt.R=function(n){nu(this);var t=[];if("string"==typeof n)X1(this,n)&&(t=_I(t,this.g.get(mm(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=_I(t,n[e])}return t},tt.set=function(n,t){return nu(this),this.i=null,X1(this,n=mm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},tt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=i;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var wv=10;function jI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function hR(n){return n.h?1:n.g?n.g.size:0}function GI(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function _m(n,t){n.g?n.g.add(t):n.h=t}function qI(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function fR(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return im(n.i)}function WI(){}function pR(){this.g=new WI}function QF(n,t,e){const r=e||"";try{W1(n,function(i,l){let d=i;Af(i)&&(d=cc(i)),t.push(r+l+"="+encodeURIComponent(d))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Cv(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(l){}}function Ev(n){this.l=n.$b||null,this.j=n.ib||!1}function eC(n,t){ui.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=tC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dR.prototype.cancel=function(){if(this.i=fR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},WI.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},WI.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},ki(Ev,gv),Ev.prototype.g=function(){return new eC(this.l,this.j)},Ev.prototype.i=function(n){return function(){return n}}({}),ki(eC,ui);var tC=0;function Bf(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ym(n){n.readyState=4,n.l=null,n.j=null,n.A=null,vm(n)}function vm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=eC.prototype).open=function(n,t){if(this.readyState!=tC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,vm(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||jt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ym(this)),this.readyState=tC},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,vm(this)),this.g&&(this.readyState=3,vm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==jt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bf(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?ym(this):vm(this),3==this.readyState&&Bf(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,ym(this))},tt.Ta=function(n){this.g&&(this.response=n,ym(this))},tt.ha=function(){this.g&&ym(this)},tt.setRequestHeader=function(n,t){this.v.append(n,t)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(eC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var gR=jt.JSON.parse;function Pr(n){ui.call(this),this.headers=new Ff,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zI,this.K=this.L=!1}ki(Pr,ui);var zI="",io=/^https?$/i,mR=["POST","PUT"];function _R(n){return"content-type"==n.toLowerCase()}function YI(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,Tv(n),bm(n)}function Tv(n){n.D||(n.D=!0,Xi(n,"complete"),Xi(n,"error"))}function rC(n){if(n.h&&void 0!==nm&&(!n.C[1]||4!=dl(n)||2!=n.ba()))if(n.v&&4==dl(n))Mf(n.Fa,0,n);else if(Xi(n,"readystatechange"),4==dl(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===f){var i=String(n.H).match(iR)[1]||null;if(!i&&jt.self&&jt.self.location){var l=jt.self.location.protocol;i=l.substr(0,l.length-1)}r=!io.test(i?i.toLowerCase():"")}e=r}if(e)Xi(n,"complete"),Xi(n,"success");else{n.m=6;try{var d=2<dl(n)?n.g.statusText:""}catch(m){d=""}n.j=d+" ["+n.ba()+"]",Tv(n)}}finally{bm(n)}}}function bm(n,t){if(n.g){KI(n);const e=n.g,r=n.C[0]?rm:null;n.g=null,n.C=null,t||Xi(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function KI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function dl(n){return n.g?n.g.readyState:0}function iC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case zI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function sC(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return _1(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):br(n,t,e))}function Vd(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function oC(n){this.za=0,this.l=[],this.h=new hm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vd("baseRetryDelayMs",5e3,n),this.$a=Vd("retryDelaySeedMs",1e4,n),this.Ya=Vd("forwardChannelMaxRetries",2,n),this.ra=Vd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new dR(n&&n.concurrentRequestLimit),this.Ca=new pR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Dv(n){if(JI(n),3==n.G){var t=n.V++,e=tu(n.F);br(e,"SID",n.J),br(e,"RID",t),br(e,"TYPE","terminate"),Av(n,e),(t=new _v(n,n.h,t,void 0)).K=2,t.v=K1(tu(e)),e=!1,jt.navigator&&jt.navigator.sendBeacon&&(e=jt.navigator.sendBeacon(t.v.toString(),"")),!e&&jt.Image&&((new Image).src=t.v,e=!0),e||(t.g=lC(t.l,null),t.g.ea(t.v)),t.F=Date.now(),yv(t)}sA(n)}function Uf(n){n.g&&(tA(n),n.g.cancel(),n.g=null)}function JI(n){Uf(n),n.u&&(jt.clearTimeout(n.u),n.u=null),wm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function so(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&Iv(n)}function Iv(n){jI(n.i)||n.m||(n.m=!0,um(n.Ha,n),n.C=0)}function QI(n,t){var e;e=t?t.m:n.V++;const r=tu(n.F);br(r,"SID",n.J),br(r,"RID",e),br(r,"AID",n.U),Av(n,r),n.o&&n.s&&sC(r,n.o,n.s),e=new _v(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=XI(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),_m(n.i,e),FI(e,r,t)}function Av(n,t){n.j&&W1({},function(e,r){br(t,r,e)})}function XI(n,t,e){e=Math.min(n.l.length,e);var r=n.j?Ki(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const d=["count="+e];-1==l?0<e?(l=i[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let f=!0;for(let m=0;m<e;m++){let b=i[m].h;const T=i[m].g;if(b-=l,0>b)l=Math.max(0,i[m].h-100),f=!1;else try{QF(T,d,"req"+b+"_")}catch(A){r&&r(T)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function eA(n){n.g||n.u||(n.Y=1,um(n.Ga,n),n.A=0)}function aC(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Pf(Ki(n.Ga,n),iA(n,n.A)),n.A++,0))}function tA(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function nA(n){n.g=new _v(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=tu(n.oa);br(t,"RID","rpc"),br(t,"SID",n.J),br(t,"CI",n.N?"0":"1"),br(t,"AID",n.U),Av(n,t),br(t,"TYPE","xmlhttp"),n.o&&n.s&&sC(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=K1(tu(t)),e.s=null,e.U=!0,XM(e,n)}function wm(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function rA(n,t){var e=null;if(n.g==t){wm(n),tA(n),n.g=null;var r=2}else{if(!GI(n.i,t))return;e=t.D,qI(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;Xi(r=fm(),new PI(r,e,t,i)),Iv(n)}else eA(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(hR(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Pf(Ki(n.Ha,n,t),iA(n,n.C)),n.C++,0)))}(n,t)||2==r&&aC(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:fc(n,5);break;case 4:fc(n,10);break;case 3:fc(n,6);break;default:fc(n,2)}}function iA(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function fc(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=Ki(n.jb,n);e||(e=new Ld("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||Z1(e,"https"),K1(e)),function(n,t){const e=new hm;if(jt.Image){const r=new Image;r.onload=tv(Cv,e,r,"TestLoadImage: loaded",!0,t),r.onerror=tv(Cv,e,r,"TestLoadImage: error",!1,t),r.onabort=tv(Cv,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=tv(Cv,e,r,"TestLoadImage: timeout",!1,t),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else bs(2);n.G=0,n.j&&n.j.va(t),sA(n),JI(n)}function sA(n){n.G=0,n.I=-1,n.j&&((0!=fR(n.i).length||0!=n.l.length)&&(n.i.i.length=0,im(n.l),n.l.length=0),n.j.ua())}function vR(n,t,e){let r=function(n){return n instanceof Ld?tu(n):new Ld(n,void 0)}(e);if(""!=r.i)t&&z1(r,t+"."+r.i),Y1(r,r.m);else{const i=jt.location;r=function(n,t,e,r){var i=new Ld(null,void 0);return n&&Z1(i,n),t&&z1(i,t),e&&Y1(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&_1(n.aa,function(i,l){br(r,l,i)}),e=n.sa,(t=n.D)&&e&&br(r,t,e),br(r,"VER",n.ma),Av(n,r),r}function lC(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Pr(e&&n.Ba&&!n.qa?new Ev({ib:!0}):n.qa)).L=n.H,t}function uC(){}function Sv(){if(Pd&&!(10<=Number(GM)))throw Error("Environmental error: no available transport.")}function oo(n,t){ui.call(this),this.g=new oC(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!nv(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nv(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new pc(this)}function cC(n){$1.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function $f(){H1.call(this),this.status=1}function pc(n){this.g=n}(tt=Pr.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():mv.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:mv),this.g.onreadystatechange=Ki(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(l){return void YI(this,l)}n=e||"";const i=new Ff(this.headers);r&&W1(r,function(l,d){i.set(d,l)}),r=function(n){e:{var t=_R;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=jt.FormData&&n instanceof jt.FormData,!(0<=gI(mR,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{KI(this),0<this.B&&((this.K=function(n){return Pd&&jM()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ki(this.pa,this)):this.A=Mf(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){YI(this,l)}},tt.pa=function(){void 0!==nm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xi(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xi(this,"complete"),Xi(this,"abort"),bm(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bm(this,!0)),Pr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?rC(this):this.cb())},tt.cb=function(){rC(this)},tt.ba=function(){try{return 2<dl(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),gR(t)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=oC.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new _v(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=bI(l),Sf(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=XI(this,i,t),br(e=tu(this.F),"RID",n),br(e,"CVER",22),this.D&&br(e,"X-HTTP-Session-Id",this.D),Av(this,e),this.o&&l&&sC(e,this.o,l),_m(this.i,i),this.Ra&&br(e,"TYPE","init"),this.ja?(br(e,"$req",t),br(e,"SID","null"),i.$=!0,FI(i,e,null)):FI(i,e,t),this.G=2}}else 3==this.G&&(n?QI(this,n):0==this.l.length||jI(this.i)||QI(this))},tt.Ga=function(){if(this.u=null,nA(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Pf(Ki(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,bs(10),Uf(this),nA(this))},tt.ab=function(){null!=this.v&&(this.v=null,Uf(this),aC(this),bs(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),bs(2)):(this.h.info("Failed to ping google.com"),bs(1))},(tt=uC.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},Sv.prototype.g=function(n,t){return new oo(n,t)},ki(oo,ui),oo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),um(Ki(n.hb,n,t))),bs(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=vR(n,null,n.W),Iv(n)},oo.prototype.close=function(){Dv(this.g)},oo.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,so(this.g,t)}else this.v?((t={}).__data__=cc(n),so(this.g,t)):so(this.g,n)},oo.prototype.M=function(){this.g.j=null,delete this.j,Dv(this.g),delete this.g,oo.Z.M.call(this)},ki(cC,$1),ki($f,H1),ki(pc,uC),pc.prototype.xa=function(){Xi(this.g,"a")},pc.prototype.wa=function(n){Xi(this.g,new cC(n))},pc.prototype.va=function(n){Xi(this.g,new $f(n))},pc.prototype.ua=function(){Xi(this.g,"b")},Sv.prototype.createWebChannel=Sv.prototype.g,oo.prototype.send=oo.prototype.u,oo.prototype.open=oo.prototype.m,oo.prototype.close=oo.prototype.close,pv.NO_ERROR=0,pv.TIMEOUT=8,pv.HTTP_ERROR=6,V1.COMPLETE="complete",U1.EventType=pm,pm.OPEN="a",pm.CLOSE="b",pm.ERROR="c",pm.MESSAGE="d",ui.prototype.listen=ui.prototype.N,Pr.prototype.listenOnce=Pr.prototype.O,Pr.prototype.getLastError=Pr.prototype.La,Pr.prototype.getLastErrorCode=Pr.prototype.Da,Pr.prototype.getStatus=Pr.prototype.ba,Pr.prototype.getResponseJson=Pr.prototype.Qa,Pr.prototype.getResponseText=Pr.prototype.ga,Pr.prototype.send=Pr.prototype.ea;var oA=ul.createWebChannelTransport=function(){return new Sv},bR=ul.getStatEventTarget=function(){return fm()},dC=ul.ErrorCode=pv,eL=ul.EventType=V1,tL=ul.Event=hc,wR=ul.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},aA=ul.FetchXmlHttpFactory=Ev,Cm=ul.WebChannel=U1,CR=ul.XhrIo=Pr;const lA="@firebase/firestore";class Pi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");let Hf="9.6.11";const ru=new Ja.Yd("@firebase/firestore");function uA(){return ru.logLevel}function He(n,...t){if(ru.logLevel<=Ja.in.DEBUG){const e=t.map(cA);ru.debug(`Firestore (${Hf}): ${n}`,...e)}}function Or(n,...t){if(ru.logLevel<=Ja.in.ERROR){const e=t.map(cA);ru.error(`Firestore (${Hf}): ${n}`,...e)}}function Fr(n,...t){if(ru.logLevel<=Ja.in.WARN){const e=t.map(cA);ru.warn(`Firestore (${Hf}): ${n}`,...e)}}function cA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function ht(n="Unexpected state"){const t=`FIRESTORE (${Hf}) INTERNAL ASSERTION FAILED: `+n;throw Or(t),new Error(t)}function Lt(n,t){n||ht()}function Xe(n,t){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends L.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class gc{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Pi.UNAUTHENTICATED))}shutdown(){}}class hC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class fC{constructor(t){this.t=t,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const l=b=>this.i!==i?(i=this.i,e(b)):Promise.resolve();let d=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new ci,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const b=d;t.enqueueRetryable((0,be.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},m=b=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new ci)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new gc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Lt(null===t||"string"==typeof t),new Pi(t)}}class TR{constructor(t,e,r){this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Nv{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new TR(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hA{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pC{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=l=>{null!=l.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,He("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const i=l=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Lt("string"==typeof e.token),this.p=e.token,new hA(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function rL(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Fn.A=-1;class fA{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=rL(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<e&&(r+=t.charAt(i[l]%t.length))}return r}}function Jt(n,t){return n<t?-1:n>t?1:0}function Em(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function Tm(n){return n+"\0"}class qr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return qr.fromMillis(Date.now())}static fromDate(t){return qr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new qr(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Jt(this.nanoseconds,t.nanoseconds):Jt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Rt(t)}static min(){return new Rt(new qr(0,0))}static max(){return new Rt(new qr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function IR(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function jf(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function pA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Dm{constructor(t,e,r){void 0===e?e=0:e>t.length&&ht(),void 0===r?r=t.length-e:r>t.length-e&&ht(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===Dm.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Dm?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const l=t.get(i),d=e.get(i);if(l<d)return-1;if(l>d)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class En extends Dm{construct(t,e,r){return new En(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new En(e)}static emptyPath(){return new En([])}}const AR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wi extends Dm{construct(t,e,r){return new wi(t,e,r)}static isValidIdentifier(t){return AR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wi(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let d=!1;for(;i<t.length;){const f=t[i];if("\\"===f){if(i+1===t.length)throw new Pe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Pe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(l(),i++)}if(l(),d)throw new Pe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new wi(e)}static emptyPath(){return new wi([])}}class Im{constructor(t){this.fields=t,t.sort(wi.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Em(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class di{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new di(e)}static fromUint8Array(t){const e=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(t);return new di(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Jt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}di.EMPTY_BYTE_STRING=new di("");const NR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bd(n){if(Lt(!!n),"string"==typeof n){let t=0;const e=NR.exec(n);if(Lt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Wr(n.seconds),nanos:Wr(n.nanos)}}function Wr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ud(n){return"string"==typeof n?di.fromBase64String(n):di.fromUint8Array(n)}function gC(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function gA(n){const t=n.mapValue.fields.__previous_value__;return gC(t)?gA(t):t}function Am(n){const t=Bd(n.mapValue.fields.__local_write_time__.timestampValue);return new qr(t.seconds,t.nanos)}class xR{constructor(t,e,r,i,l,d,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class hi{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new hi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof hi&&t.projectId===this.projectId&&t.database===this.database}}function $d(n){return null==n}function Sm(n){return 0===n&&1/n==-1/0}function mA(n){return"number"==typeof n&&Number.isInteger(n)&&!Sm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ke{constructor(t){this.path=t}static fromPath(t){return new Ke(En.fromString(t))}static fromName(t){return new Ke(En.fromString(t).popFirst(5))}static empty(){return new Ke(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===En.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return En.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ke(new En(t.slice()))}}const MR={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_A={nullValue:"NULL_VALUE"};function Hd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gC(n)?4:CA(n)?9:10:ht()}function hl(n,t){if(n===t)return!0;const e=Hd(n);if(e!==Hd(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Am(n).isEqual(Am(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Bd(r.timestampValue),d=Bd(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,Ud(n.bytesValue).isEqual(Ud(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Wr(r.geoPointValue.latitude)===Wr(i.geoPointValue.latitude)&&Wr(r.geoPointValue.longitude)===Wr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Wr(r.integerValue)===Wr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=Wr(r.doubleValue),d=Wr(i.doubleValue);return l===d?Sm(l)===Sm(d):isNaN(l)&&isNaN(d)}return!1}(n,t);case 9:return Em(n.arrayValue.values||[],t.arrayValue.values||[],hl);case 10:return function(r,i){const l=r.mapValue.fields||{},d=i.mapValue.fields||{};if(IR(l)!==IR(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===d[f]||!hl(l[f],d[f])))return!1;return!0}(n,t);default:return ht()}var i}function iu(n,t){return void 0!==(n.values||[]).find(e=>hl(e,t))}function su(n,t){if(n===t)return 0;const e=Hd(n),r=Hd(t);if(e!==r)return Jt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Jt(n.booleanValue,t.booleanValue);case 2:return function(i,l){const d=Wr(i.integerValue||i.doubleValue),f=Wr(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,t);case 3:return RR(n.timestampValue,t.timestampValue);case 4:return RR(Am(n),Am(t));case 5:return Jt(n.stringValue,t.stringValue);case 6:return function(i,l){const d=Ud(i),f=Ud(l);return d.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(i,l){const d=i.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const b=Jt(d[m],f[m]);if(0!==b)return b}return Jt(d.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,l){const d=Jt(Wr(i.latitude),Wr(l.latitude));return 0!==d?d:Jt(Wr(i.longitude),Wr(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,l){const d=i.values||[],f=l.values||[];for(let m=0;m<d.length&&m<f.length;++m){const b=su(d[m],f[m]);if(b)return b}return Jt(d.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,l){const d=i.fields||{},f=Object.keys(d),m=l.fields||{},b=Object.keys(m);f.sort(),b.sort();for(let T=0;T<f.length&&T<b.length;++T){const A=Jt(f[T],b[T]);if(0!==A)return A;const M=su(d[f[T]],m[b[T]]);if(0!==M)return M}return Jt(f.length,b.length)}(n.mapValue,t.mapValue);default:throw ht()}}function RR(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Jt(n,t);const e=Bd(n),r=Bd(t),i=Jt(e.seconds,r.seconds);return 0!==i?i:Jt(e.nanos,r.nanos)}function Gf(n){return yA(n)}function yA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Bd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ud(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const d of r.values||[])l?l=!1:i+=",",i+=yA(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const f of i)d?d=!1:l+=",",l+=`${f}:${yA(r.fields[f])}`;return l+"}"}(n.mapValue):ht();var t}function qf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function vA(n){return!!n&&"integerValue"in n}function jd(n){return!!n&&"arrayValue"in n}function bA(n){return!!n&&"nullValue"in n}function wA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xv(n){return!!n&&"mapValue"in n}function Mv(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return jf(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Mv(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Mv(n.arrayValue.values[e]);return t}return Object.assign({},n)}function CA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function kR(n){return"nullValue"in n?_A:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qf(hi.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function PR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qf(hi.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?MR:ht()}function jo(n,t){return void 0===n?t:void 0===t||su(n,t)>0?n:t}function OR(n,t){return void 0===n?t:void 0===t||su(n,t)<0?n:t}class Oi{constructor(t){this.value=t}static empty(){return new Oi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!xv(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Mv(e)}setAll(t){let e=wi.emptyPath(),r={},i=[];t.forEach((d,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,r,i),r={},i=[],e=f.popLast()}d?r[f.lastSegment()]=Mv(d):i.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,i)}delete(t){const e=this.field(t.popLast());xv(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return hl(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];xv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){jf(e,(i,l)=>t[i]=l);for(const i of r)delete t[i]}clone(){return new Oi(Mv(this.value))}}function EA(n){const t=[];return jf(n.fields,(e,r)=>{const i=new wi([e]);if(xv(r)){const l=EA(r.mapValue).fields;if(0===l.length)t.push(i);else for(const d of l)t.push(i.child(d))}else t.push(i)}),new Im(t)}class ir{constructor(t,e,r,i,l,d){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=l,this.documentState=d}static newInvalidDocument(t){return new ir(t,0,Rt.min(),Rt.min(),Oi.empty(),0)}static newFoundDocument(t,e,r){return new ir(t,1,e,Rt.min(),r,0)}static newNoDocument(t,e){return new ir(t,2,e,Rt.min(),Oi.empty(),0)}static newUnknownDocument(t,e){return new ir(t,3,e,Rt.min(),Oi.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ir&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nm{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function Rv(n){return n.fields.find(t=>2===t.kind)}function ou(n){return n.fields.filter(t=>2!==t.kind)}Nm.UNKNOWN_ID=-1;class Wf{constructor(t,e){this.fieldPath=t,this.kind=e}}class Gd{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Gd(0,fl.min())}}function xm(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new qr(e+1,0):new qr(e,r));return new fl(i,Ke.empty(),t)}function kv(n){return new fl(n.readTime,n.key,-1)}class fl{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new fl(Rt.min(),Ke.empty(),-1)}static max(){return new fl(Rt.max(),Ke.empty(),-1)}}function TA(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Ke.comparator(n.documentKey,t.documentKey),0!==e?e:Jt(n.largestBatchId,t.largestBatchId))}class FR{constructor(t,e=null,r=[],i=[],l=null,d=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=d,this.endAt=f,this.P=null}}function DA(n,t=null,e=[],r=[],i=null,l=null,d=null){return new FR(n,t,e,r,i,l,d)}function mc(n){const t=Xe(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Gf(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),$d(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Gf(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Gf(r)).join(",")),t.P=e}return t.P}function Mm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!NA(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!hl(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!MA(n.startAt,t.startAt)&&MA(n.endAt,t.endAt)}function Pv(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Zf(n,t){return n.filters.filter(e=>e instanceof Zr&&e.field.isEqual(t))}function IA(n,t,e){let r,i=!0;for(const l of Zf(n,t)){let d,f=!0;switch(l.op){case"<":case"<=":d=kR(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,f=!1;break;case"!=":case"not-in":d=_A}jo(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];jo(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}function es(n,t,e){let r,i=!0;for(const l of Zf(n,t)){let d,f=!0;switch(l.op){case">=":case">":d=PR(l.value),f=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,f=!1;break;case"!=":case"not-in":d=MR}OR(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];OR(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}class Zr extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new Ov(t,e,r):"array-contains"===e?new SA(t,r):"in"===e?new Vv(t,r):"not-in"===e?new VR(t,r):"array-contains-any"===e?new BR(t,r):new Zr(t,e,r)}static V(t,e,r){return"in"===e?new AA(t,r):new Fv(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(su(e,this.value)):null!==e&&Hd(this.value)===Hd(e)&&this.v(su(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ov extends Zr{constructor(t,e,r){super(t,e,r),this.key=Ke.fromName(r.referenceValue)}matches(t){const e=Ke.comparator(t.key,this.key);return this.v(e)}}class AA extends Zr{constructor(t,e){super(t,"in",e),this.keys=Lv(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Fv extends Zr{constructor(t,e){super(t,"not-in",e),this.keys=Lv(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Lv(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class SA extends Zr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return jd(e)&&iu(e.arrayValue,this.value)}}class Vv extends Zr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&iu(this.value.arrayValue,e)}}class VR extends Zr{constructor(t,e){super(t,"not-in",e)}matches(t){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!iu(this.value.arrayValue,e)}}class BR extends Zr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!jd(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>iu(this.value.arrayValue,r))}}class _c{constructor(t,e){this.position=t,this.inclusive=e}}class zf{constructor(t,e="asc"){this.field=t,this.dir=e}}function NA(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function xA(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const l=t[i],d=n.position[i];if(r=l.field.isKeyField()?Ke.comparator(Ke.fromName(d.referenceValue),e.key):su(d,e.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function MA(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!hl(n.position[e],t.position[e]))return!1;return!0}class au{constructor(t,e=null,r=[],i=[],l=null,d="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.D=null,this.C=null}}function lu(n,t,e,r,i,l,d,f){return new au(n,t,e,r,i,l,d,f)}function pl(n){return new au(n)}function Yf(n){return!$d(n.limit)&&"F"===n.limitType}function Bv(n){return!$d(n.limit)&&"L"===n.limitType}function mC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function _C(n){for(const t of n.filters)if(t.S())return t.field;return null}function Rm(n){return null!==n.collectionGroup}function Kf(n){const t=Xe(n);if(null===t.D){t.D=[];const e=_C(t),r=mC(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new zf(e)),t.D.push(new zf(wi.keyField(),"asc"));else{let i=!1;for(const l of t.explicitOrderBy)t.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new zf(wi.keyField(),l))}}}return t.D}function ao(n){const t=Xe(n);if(!t.C)if("F"===t.limitType)t.C=DA(t.path,t.collectionGroup,Kf(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of Kf(t))e.push(new zf(l.field,"desc"===l.dir?"asc":"desc"));const r=t.endAt?new _c(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new _c(t.startAt.position,!t.startAt.inclusive):null;t.C=DA(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function yC(n,t,e){return new au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function km(n,t){return Mm(ao(n),ao(t))&&n.limitType===t.limitType}function RA(n){return`${mc(ao(n))}|lt:${n.limitType}`}function vC(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${Gf(r.value)}`;var r}).join(", ")}]`),$d(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Gf(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Gf(e)).join(",")),`Target(${t})`}(ao(n))}; limitType=${n.limitType})`}function ba(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):Ke.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,l,d){const f=xA(i,l,d);return i.inclusive?f<=0:f<0}(e.startAt,Kf(e),r)||e.endAt&&!function(i,l,d){const f=xA(i,l,d);return i.inclusive?f>=0:f>0}(e.endAt,Kf(e),r)));var e,r}function Jf(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qd(n){return(t,e)=>{let r=!1;for(const i of Kf(n)){const l=Uv(i,t,e);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function Uv(n,t,e){const r=n.field.isKeyField()?Ke.comparator(t.key,e.key):function(i,l,d){const f=l.data.field(i),m=d.data.field(i);return null!==f&&null!==m?su(f,m):ht()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function Wd(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(t)?"-0":t}}function kA(n){return{integerValue:""+n}}function PA(n,t){return mA(t)?kA(t):Wd(n,t)}class $v{constructor(){this._=void 0}}function OA(n,t,e){return n instanceof Zd?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(e,t):n instanceof uu?LA(n,t):n instanceof zd?wC(n,t):function(r,i){const l=bC(r,i),d=Hv(l)+Hv(r.k);return vA(l)&&vA(r.k)?kA(d):Wd(r.M,d)}(n,t)}function FA(n,t,e){return n instanceof uu?LA(n,t):n instanceof zd?wC(n,t):e}function bC(n,t){return n instanceof Go?vA(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class Zd extends $v{}class uu extends $v{constructor(t){super(),this.elements=t}}function LA(n,t){const e=VA(t);for(const r of n.elements)e.some(i=>hl(i,r))||e.push(r);return{arrayValue:{values:e}}}class zd extends $v{constructor(t){super(),this.elements=t}}function wC(n,t){let e=VA(t);for(const r of n.elements)e=e.filter(i=>!hl(i,r));return{arrayValue:{values:e}}}class Go extends $v{constructor(t,e){super(),this.M=t,this.k=e}}function Hv(n){return Wr(n.integerValue||n.doubleValue)}function VA(n){return jd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Pm{constructor(t,e){this.field=t,this.transform=e}}class sL{constructor(t,e){this.version=t,this.transformResults=e}}class fi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new fi}static exists(t){return new fi(void 0,t)}static updateTime(t){return new fi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function CC(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class jv{}function UR(n,t,e){n instanceof Om?function(r,i,l){const d=r.value.clone(),f=GR(r.fieldTransforms,i,l.transformResults);d.setAll(f),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):n instanceof Qf?function(r,i,l){if(!CC(r.precondition,i))return void i.convertToUnknownDocument(l.version);const d=GR(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(jR(r)),f.setAll(d),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function BA(n,t,e){var i;n instanceof Om?function(r,i,l){if(!CC(r.precondition,i))return;const d=r.value.clone(),f=qR(r.fieldTransforms,l,i);d.setAll(f),i.convertToFoundDocument(HR(i),d).setHasLocalMutations()}(n,t,e):n instanceof Qf?function(r,i,l){if(!CC(r.precondition,i))return;const d=qR(r.fieldTransforms,l,i),f=i.data;f.setAll(jR(r)),f.setAll(d),i.convertToFoundDocument(HR(i),f).setHasLocalMutations()}(n,t,e):CC(n.precondition,i=t)&&i.convertToNoDocument(Rt.min())}function oL(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),l=bC(r.transform,i||null);null!=l&&(null==e&&(e=Oi.empty()),e.set(r.field,l))}return e||null}function $R(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&Em(e,r,(i,l)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof uu&&r instanceof uu||e instanceof zd&&r instanceof zd?Em(e.elements,r.elements,hl):e instanceof Go&&r instanceof Go?hl(e.k,r.k):e instanceof Zd&&r instanceof Zd);var e,r}(i,l))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function HR(n){return n.isFoundDocument()?n.version:Rt.min()}class Om extends jv{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Qf extends jv{constructor(t,e,r,i,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function jR(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function GR(n,t,e){const r=new Map;Lt(n.length===e.length);for(let i=0;i<e.length;i++){const l=n[i],d=l.transform,f=t.data.field(l.field);r.set(l.field,FA(d,f,e[i]))}return r}function qR(n,t,e){const r=new Map;for(const i of n){const l=i.transform,d=e.data.field(i.field);r.set(i.field,OA(l,d,t))}return r}class s extends jv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class o extends jv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class u{constructor(t){this.count=t}}var c,h;function p(n){switch(n){default:return ht();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function _(n){if(void 0===n)return Or("GRPC error has no .code"),me.UNKNOWN;switch(n){case c.OK:return me.OK;case c.CANCELLED:return me.CANCELLED;case c.UNKNOWN:return me.UNKNOWN;case c.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case c.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case c.INTERNAL:return me.INTERNAL;case c.UNAVAILABLE:return me.UNAVAILABLE;case c.UNAUTHENTICATED:return me.UNAUTHENTICATED;case c.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case c.NOT_FOUND:return me.NOT_FOUND;case c.ALREADY_EXISTS:return me.ALREADY_EXISTS;case c.PERMISSION_DENIED:return me.PERMISSION_DENIED;case c.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case c.ABORTED:return me.ABORTED;case c.OUT_OF_RANGE:return me.OUT_OF_RANGE;case c.UNIMPLEMENTED:return me.UNIMPLEMENTED;case c.DATA_LOSS:return me.DATA_LOSS;default:return ht()}}(h=c||(c={}))[h.OK=0]="OK",h[h.CANCELLED=1]="CANCELLED",h[h.UNKNOWN=2]="UNKNOWN",h[h.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",h[h.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",h[h.NOT_FOUND=5]="NOT_FOUND",h[h.ALREADY_EXISTS=6]="ALREADY_EXISTS",h[h.PERMISSION_DENIED=7]="PERMISSION_DENIED",h[h.UNAUTHENTICATED=16]="UNAUTHENTICATED",h[h.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",h[h.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",h[h.ABORTED=10]="ABORTED",h[h.OUT_OF_RANGE=11]="OUT_OF_RANGE",h[h.UNIMPLEMENTED=12]="UNIMPLEMENTED",h[h.INTERNAL=13]="INTERNAL",h[h.UNAVAILABLE=14]="UNAVAILABLE",h[h.DATA_LOSS=15]="DATA_LOSS";class v{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){jf(this.inner,(e,r)=>{for(const[i,l]of r)t(i,l)})}isEmpty(){return pA(this.inner)}size(){return this.innerSize}}class C{constructor(t,e){this.comparator=t,this.root=e||N.EMPTY}insert(t,e){return new C(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,N.BLACK,null,null))}remove(t){return new C(this.comparator,this.root.remove(t,this.comparator).copy(null,null,N.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new I(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new I(this.root,t,this.comparator,!1)}getReverseIterator(){return new I(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new I(this.root,t,this.comparator,!0)}}class I{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,e&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class N{constructor(t,e,r,i,l){this.key=t,this.value=e,this.color=null!=r?r:N.RED,this.left=null!=i?i:N.EMPTY,this.right=null!=l?l:N.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,l){return new N(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const l=r(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===l?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return N.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return N.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,N.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,N.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const t=this.left.check();if(t!==this.right.check())throw ht();return t+(this.isRed()?0:1)}}N.EMPTY=null,N.RED=!0,N.BLACK=!1,N.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,t,e,r,i){return this}insert(n,t,e){return new N(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class k{constructor(t){this.comparator=t,this.data=new C(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new V(this.data.getIterator())}getIteratorFrom(t){return new V(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof k)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new k(this.comparator);return e.data=t,e}}class V{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function K(n){return n.hasNext()?n.getNext():void 0}const te=new C(Ke.comparator);function he(){return te}const ue=new C(Ke.comparator);function Le(){return ue}function De(){return new v(n=>n.toString(),(n,t)=>n.isEqual(t))}const vt=new C(Ke.comparator),kt=new k(Ke.comparator);function ct(...n){let t=kt;for(const e of n)t=t.add(e);return t}const pi=new k(Jt);function ws(){return pi}class cu{constructor(t,e,r,i,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,gl.createSynthesizedTargetChangeForCurrentChange(t,e)),new cu(Rt.min(),r,ws(),he(),ct())}}class gl{constructor(t,e,r,i,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new gl(di.EMPTY_BYTE_STRING,e,ct(),ct(),ct())}}class du{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class Yd{constructor(t,e){this.targetId=t,this.$=e}}class Gv{constructor(t,e,r=di.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class qv{constructor(){this.B=0,this.L=Zv(),this.U=di.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=ct(),e=ct(),r=ct();return this.L.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new gl(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=Zv()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class EC{constructor(t){this.nt=t,this.st=new Map,this.it=he(),this.rt=Wv(),this.ot=new k(Jt)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:ht()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const l=i.target;if(Pv(l))if(0===r){const d=new Ke(l.path);this.ct(e,d,ir.newNoDocument(d,Rt.min()))}else Lt(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((l,d)=>{const f=this.wt(d);if(f){if(l.current&&Pv(f.target)){const m=new Ke(f.target.path);null!==this.it.get(m)||this.It(d,m)||this.ct(d,m,ir.newNoDocument(m,t))}l.j&&(e.set(d,l.H()),l.J())}});let r=ct();this.rt.forEach((l,d)=>{let f=!0;d.forEachWhile(m=>{const b=this.wt(m);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(t));const i=new cu(t,e,this.ot,this.it,r);return this.it=he(),this.rt=Wv(),this.ot=new k(Jt),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new qv,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new k(Jt),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||He("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new qv),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function Wv(){return new C(Ke.comparator)}function Zv(){return new C(Ke.comparator)}const q3={asc:"ASCENDING",desc:"DESCENDING"},W3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Z3{constructor(t,e){this.databaseId=t,this.N=e}}function TC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aL(n,t){return n.N?t.toBase64():t.toUint8Array()}function z3(n,t){return TC(n,t.toTimestamp())}function ts(n){return Lt(!!n),Rt.fromTimestamp(function(t){const e=Bd(t);return new qr(e.seconds,e.nanos)}(n))}function WR(n,t){return(e=n,new En(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function lL(n){const t=En.fromString(n);return Lt(_L(t)),t}function DC(n,t){return WR(n.databaseId,t.path)}function yc(n,t){const e=lL(t);if(e.get(1)!==n.databaseId.projectId)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Ke(cL(e))}function ZR(n,t){return WR(n.databaseId,t)}function uL(n){const t=lL(n);return 4===t.length?En.emptyPath():cL(t)}function IC(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cL(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function dL(n,t,e){return{name:DC(n,t),fields:e.value.mapValue.fields}}function hL(n,t,e){const r=yc(n,t.name),i=ts(t.updateTime),l=new Oi({mapValue:{fields:t.fields}}),d=ir.newFoundDocument(r,i,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function AC(n,t){let e;if(t instanceof Om)e={update:dL(n,t.key,t.value)};else if(t instanceof s)e={delete:DC(n,t.key)};else if(t instanceof Qf)e={update:dL(n,t.key,t.data),updateMask:r$(t.fieldMask)};else{if(!(t instanceof o))return ht();e={verify:DC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,l){const d=l.transform;if(d instanceof Zd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof uu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof zd)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Go)return{fieldPath:l.field.canonicalString(),increment:d.k};throw ht()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:z3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),e;var i}function zR(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?fi.updateTime(ts(i.updateTime)):void 0!==i.exists?fi.exists(i.exists):fi.none():fi.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(l,d){let f=null;"setToServerValue"in d?(Lt("REQUEST_TIME"===d.setToServerValue),f=new Zd):"appendMissingElements"in d?f=new uu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new zd(d.removeAllFromArray.values||[]):"increment"in d?f=new Go(l,d.increment):ht();const m=wi.fromServerFormat(d.fieldPath);return new Pm(m,f)}(n,i)):[];var i;if(t.update){const i=yc(n,t.update.name),l=new Oi({mapValue:{fields:t.update.fields}});if(t.updateMask){const d=new Im((t.updateMask.fieldPaths||[]).map(b=>wi.fromServerFormat(b)));return new Qf(i,l,d,e,r)}return new Om(i,l,e,r)}if(t.delete){const i=yc(n,t.delete);return new s(i,e)}if(t.verify){const i=yc(n,t.verify);return new o(i,e)}return ht()}function fL(n,t){return{documents:[ZR(n,t.path)]}}function pL(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=ZR(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=ZR(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const b=m.map(T=>function(A){if("=="===A.op){if(wA(A.value))return{unaryFilter:{field:zv(A.field),op:"IS_NAN"}};if(bA(A.value))return{unaryFilter:{field:zv(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(wA(A.value))return{unaryFilter:{field:zv(A.field),op:"IS_NOT_NAN"}};if(bA(A.value))return{unaryFilter:{field:zv(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zv(A.field),op:e$(A.op),value:A.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);i&&(e.structuredQuery.where=i);const l=function(m){if(0!==m.length)return m.map(b=>{return{field:zv((T=b).field),direction:X3(T.dir)};var T})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const d=(b=t.limit,n.N||$d(b)?b:{value:b});var b,f,m;return null!==d&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt={before:(f=t.startAt).inclusive,values:f.position}),t.endAt&&(e.structuredQuery.endAt={before:!(m=t.endAt).inclusive,values:m.position}),e}function gL(n){let t=uL(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Lt(1===r);const T=e.from[0];T.allDescendants?i=T.collectionId:t=t.child(T.collectionId)}let l=[];e.where&&(l=mL(e.where));let d=[];e.orderBy&&(d=e.orderBy.map(T=>{return new zf(Yv((A=T).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;e.limit&&(f=function(T){let A;return A="object"==typeof T?T.value:T,$d(A)?null:A}(e.limit));let m=null;var T;e.startAt&&(m=new _c((T=e.startAt).values||[],!!T.before));let b=null;return e.endAt&&(b=function(T){return new _c(T.values||[],!T.before)}(e.endAt)),lu(t,i,d,l,f,"F",m,b)}function mL(n){return n?void 0!==n.unaryFilter?[n$(n)]:void 0!==n.fieldFilter?[t$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>mL(t)).reduce((t,e)=>t.concat(e)):ht():[]}function X3(n){return q3[n]}function e$(n){return W3[n]}function zv(n){return{fieldPath:n.canonicalString()}}function Yv(n){return wi.fromServerFormat(n.fieldPath)}function t$(n){return Zr.create(Yv(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function n$(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Yv(n.unaryFilter.field);return Zr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Yv(n.unaryFilter.field);return Zr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yv(n.unaryFilter.field);return Zr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yv(n.unaryFilter.field);return Zr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function r$(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function _L(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function lo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=yL(t)),t=i$(n.get(e),t);return yL(t)}function i$(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function yL(n){return n+"\x01\x01"}function vc(n){const t=n.length;if(Lt(t>=2),2===t)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const e=t-2,r=[];let i="";for(let l=0;l<t;){const d=n.indexOf("\x01",l);switch((d<0||d>e)&&ht(),n.charAt(d+1)){case"\x01":const f=n.substring(l,d);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(l,d),i+="\0";break;case"\x11":i+=n.substring(l,d+1);break;default:ht()}l=d+2}return new En(r)}const vL=["userId","batchId"];function UA(n,t){return[n,lo(t)]}function bL(n,t,e){return[n,lo(t),e]}const s$={},o$=["prefixPath","collectionGroup","readTime","documentId"],a$=["prefixPath","collectionGroup","documentId"],l$=["collectionGroup","readTime","prefixPath","documentId"],u$=["canonicalId","targetId"],c$=["targetId","path"],d$=["path","targetId"],h$=["collectionId","parent"],f$=["indexId","uid"],p$=["uid","sequenceNumber"],g$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],m$=["indexId","uid","orderedDocumentKey"],_$=["userId","collectionPath","documentId"],y$=["userId","collectionPath","largestBatchId"],v$=["userId","collectionGroup","largestBatchId"],wL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],b$=[...wL,"documentOverlays"],CL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],w$=[...CL,"indexConfiguration","indexState","indexEntries"],EL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class we{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new we((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof we?e:we.resolve(e)}catch(e){return we.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):we.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):we.reject(e)}static resolve(t){return new we((e,r)=>{e(t)})}static reject(t){return new we((e,r)=>{r(t)})}static waitFor(t){return new we((e,r)=>{let i=0,l=0,d=!1;t.forEach(f=>{++i,f.next(()=>{++l,d&&l===i&&e()},m=>r(m))}),d=!0,l===i&&e()})}static or(t){let e=we.resolve(!1);for(const r of t)e=e.next(i=>i?we.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,l)=>{r.push(e.call(this,i,l))}),this.waitFor(r)}}class $A{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new ci,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new SC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=YR(r.target.error);this.At.reject(new SC(t,i))}}static open(t,e,r,i){try{return new $A(e,t.transaction(i,r))}catch(l){throw new SC(e,l)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(He("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new E$(e)}}class hu{constructor(t,e,r){this.name=t,this.version=e,this.bt=r,12.2===hu.Vt((0,L.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return He("SimpleDb","Removing database:",t),Lm(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,L.hl)())return!1;if(hu.St())return!0;const t=(0,L.z$)(),e=hu.Vt(t),r=0<e&&e<10,i=hu.Dt(t),l=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,be.Z)(function*(){return e.db||(He("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{i(new SC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Pe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Pe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new SC(t,f))},l.onupgradeneeded=d=>{He("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',d.oldVersion),e.bt.kt(d.target.result,l.transaction,d.oldVersion,e.version).next(()=>{He("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var l=this;return(0,be.Z)(function*(){const d="readonly"===e;let f=0;for(;;){++f;try{l.db=yield l.Nt(t);const m=$A.open(l.db,t,d?"readonly":"readwrite",r),b=i(m).next(T=>(m.Pt(),T)).catch(T=>(m.abort(T),we.reject(T))).toPromise();return b.catch(()=>{}),yield m.Rt,b}catch(m){const b="FirebaseError"!==m.name&&f<3;if(He("SimpleDb","Transaction failed with error:",m.message,"Retrying:",b),l.close(),!b)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class C${constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Lm(this.Ft.delete())}}class SC extends Pe{constructor(t,e){super(me.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Fm(n){return"IndexedDbTransactionError"===n.name}class E${constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(He("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Lm(r)}add(t){return He("SimpleDb","ADD",this.store.name,t,t),Lm(this.store.add(t))}get(t){return Lm(this.store.get(t)).next(e=>(void 0===e&&(e=null),He("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return He("SimpleDb","DELETE",this.store.name,t),Lm(this.store.delete(t))}count(){return He("SimpleDb","COUNT",this.store.name),Lm(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(d,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new we((l,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new we((i,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(t,e){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,d,f)=>f.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new we((r,i)=>{e.onerror=l=>{const d=YR(l.target.error);i(d)},e.onsuccess=l=>{const d=l.target.result;d?t(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(t,e){const r=[];return new we((i,l)=>{t.onerror=d=>{l(d.target.error)},t.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const m=new C$(f),b=e(f.primaryKey,f.value,m);if(b instanceof we){const T=b.catch(A=>(m.done(),we.reject(A)));r.push(T)}m.isDone?i():null===m.Lt?f.continue():f.continue(m.Lt)}}).next(()=>we.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Lm(n){return new we((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=YR(r.target.error);e(i)}})}let DL=!1;function YR(n){const t=hu.Vt((0,L.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DL||(DL=!0,setTimeout(()=>{throw r},0)),r}}return n}class IL extends TL{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function ns(n,t){const e=Xe(n);return hu.xt(e.Ht,t)}class KR{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&UR(l,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&BA(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&BA(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Rt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ct())}isEqual(t){return this.batchId===t.batchId&&Em(this.mutations,t.mutations,(e,r)=>$R(e,r))&&Em(this.baseMutations,t.baseMutations,(e,r)=>$R(e,r))}}class JR{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Lt(t.mutations.length===r.length);let i=vt;const l=t.mutations;for(let d=0;d<l.length;d++)i=i.insert(l[d].key,r[d].version);return new JR(t,e,r,i)}}class QR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Xf{constructor(t,e,r,i,l=Rt.min(),d=Rt.min(),f=di.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(t){return new Xf(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Xf(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class AL{constructor(t){this.Jt=t}}function SL(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:HA(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:DC(i=n.Jt,(l=t).key),fields:l.data.value.mapValue.fields,updateTime:TC(i,l.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Vm(t.version)};else{if(!t.isUnknownDocument())return ht();r.unknownDocument={path:e.path.toArray(),version:Vm(t.version)}}var i,l;return r}function HA(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Vm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Bm(n){const t=new qr(n.seconds,n.nanoseconds);return Rt.fromTimestamp(t)}function Kv(n,t){const e=(t.baseMutations||[]).map(l=>zR(n.Jt,l));for(let l=0;l<t.mutations.length-1;++l){const d=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(d.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const r=t.mutations.map(l=>zR(n.Jt,l)),i=qr.fromMillis(t.localWriteTimeMs);return new KR(t.batchId,i,e,r)}function NC(n){const t=Bm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Bm(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(Lt(1===(i=n.query).documents.length),r=ao(pl(uL(i.documents[0])))):r=ao(gL(n.query)),new Xf(r,n.targetId,0,n.lastListenSequenceNumber,t,e,di.fromBase64String(n.resumeToken))}function NL(n,t){const e=Vm(t.snapshotVersion),r=Vm(t.lastLimboFreeSnapshotVersion);let i;i=Pv(t.target)?fL(n.Jt,t.target):pL(n.Jt,t.target);const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:mc(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XR(n){const t=gL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?yC(t,t.limit,"L"):t}function ek(n,t){return new QR(t.largestBatchId,zR(n.Jt,t.overlayMutation))}function xL(n,t){const e=t.path.lastSegment();return[n,lo(t.path.popLast()),e]}class D${getBundleMetadata(t,e){return ML(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Bm(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return ML(t).put({bundleId:(r=e).id,createTime:Vm(ts(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return RL(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:XR(i.bundledQuery),readTime:Bm(i.readTime)};var i})}saveNamedQuery(t,e){return RL(t).put({name:(r=e).name,readTime:Vm(ts(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ML(n){return ns(n,"bundles")}function RL(n){return ns(n,"namedQueries")}class tk{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new tk(t,e.uid||"")}getOverlay(t,e){return xC(t).get(xL(this.userId,e)).next(r=>r?ek(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((l,d)=>{const f=new QR(e,d);i.push(this.Xt(t,f))}),we.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(d=>i.add(lo(d.getCollectionPath())));const l=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(xC(t).Qt("collectionPathOverlayIndex",f))}),we.waitFor(l)}getOverlaysForCollection(t,e,r){const i=De(),l=lo(e),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return xC(t).qt("collectionPathOverlayIndex",d).next(f=>{for(const m of f){const b=ek(this.M,m);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const l=De();let d;const f=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return xC(t).Wt({index:"collectionGroupOverlayIndex",range:f},(m,b,T)=>{const A=ek(this.M,b);l.size()<i||A.largestBatchId===d?(l.set(A.getKey(),A),d=A.largestBatchId):T.done()}).next(()=>l)}Xt(t,e){return xC(t).put(function(r,i,l){const[d,f,m]=xL(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:AC(r.Jt,l.mutation)}}(this.M,this.userId,e))}}function xC(n){return ns(n,"documentOverlays")}class Um{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Wr(t.integerValue));else if("doubleValue"in t){const r=Wr(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),Sm(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(Ud(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?CA(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):ht()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),Ke.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function I$(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function kL(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const l=I$(255&e[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(t/8)}Um.fe=new Um;class A${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=kL(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=kL(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class S${constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class N${constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class MC{constructor(){this.De=new A$,this.Ce=new S$(this.De),this.xe=new N$(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ep{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new ep(this.indexId,this.documentKey,this.arrayValue,r)}}function $m(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=PL(n.arrayValue,t.arrayValue),0!==e?e:(e=PL(n.directionalValue,t.directionalValue),0!==e?e:Ke.comparator(n.documentKey,t.documentKey)))}function PL(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class x${constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=Rv(t);if(void 0!==e&&!this.Be(e))return!1;const r=ou(t);let i=0,l=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class M${constructor(){this.qe=new nk}addToCollectionParentIndex(t,e){return this.qe.add(e),we.resolve()}getCollectionParents(t,e){return we.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return we.resolve()}deleteFieldIndex(t,e){return we.resolve()}getDocumentsMatchingTarget(t,e){return we.resolve(null)}getFieldIndex(t,e){return we.resolve(null)}getFieldIndexes(t,e){return we.resolve([])}getNextCollectionGroupToUpdate(t){return we.resolve(null)}updateCollectionGroup(t,e,r){return we.resolve()}updateIndexEntries(t,e){return we.resolve()}}class nk{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new k(En.comparator),l=!i.has(r);return this.index[e]=i.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new k(En.comparator)).toArray()}}const Jv=new Uint8Array(0);class R${constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new nk,this.Ge=new v(r=>mc(r),(r,i)=>Mm(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const l={collectionId:r,parent:lo(i)};return OL(t).put(l)}return we.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[Tm(e),""],!1,!0);return OL(t).qt(i).next(l=>{for(const d of l){if(d.collectionId!==e)break;r.push(vc(d.parent))}return r})}addFieldIndex(t,e){const r=jA(t),i={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=jA(t),i=GA(t),l=RC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=RC(t);let i=!0;const l=new Map;return we.forEach(this.Qe(e),d=>this.getFieldIndex(t,d).next(f=>{i&&(i=!!f),l.set(d,f)})).next(()=>{if(i){let d=ct();const f=[];return we.forEach(l,(m,b)=>{var T;He("IndexedDbIndexManager",`Using index ${T=m,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${mc(e)}`);const A=function(it,st){const Nt=Rv(st);if(void 0===Nt)return null;for(const Wt of Zf(it,Nt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(b,m),M=function(it,st){const Nt=new Map;for(const Wt of ou(st))for(const Yr of Zf(it,Wt.fieldPath))switch(Yr.op){case"==":case"in":Nt.set(Wt.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return Nt.set(Wt.fieldPath.canonicalString(),Yr.value),Array.from(Nt.values())}return null}(b,m),O=function(it,st){const Nt=[];let Wt=!0;for(const Yr of ou(st)){const ni=0===Yr.kind?IA(it,Yr.fieldPath,it.startAt):es(it,Yr.fieldPath,it.startAt);if(!ni.value)return null;Nt.push(ni.value),Wt&&(Wt=ni.inclusive)}return new _c(Nt,Wt)}(b,m),G=function(it,st){const Nt=[];let Wt=!0;for(const Yr of ou(st)){const ni=0===Yr.kind?es(it,Yr.fieldPath,it.endAt):IA(it,Yr.fieldPath,it.endAt);if(!ni.value)return null;Nt.push(ni.value),Wt&&(Wt=ni.inclusive)}return new _c(Nt,Wt)}(b,m),ie=this.je(m,b,O),_e=this.je(m,b,G),$e=this.We(m,b,M),qe=this.ze(m.indexId,A,ie,!!O&&O.inclusive,_e,!!G&&G.inclusive,$e);return we.forEach(qe,it=>r.Gt(it,e.limit).next(st=>{st.forEach(Nt=>{const Wt=Ke.fromSegments(Nt.documentKey);d.has(Wt)||(d=d.add(Wt),f.push(Wt))})}))}).next(()=>f)}return we.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,r,i,l,d,f){const m=(null!=e?e.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),b=m/(null!=e?e.length:1),T=[];for(let A=0;A<m;++A){const M=e?this.He(e[A/b]):Jv,O=r?this.Je(t,M,r[A%b],i):this.Ye(t),G=l?this.Xe(t,M,l[A%b],d):this.Ye(t+1);T.push(...this.createRange(O,G,f.map(ie=>this.Je(t,M,ie,!0))))}return T}Je(t,e,r,i){const l=new ep(t,Ke.empty(),e,r);return i?l:l.ke()}Xe(t,e,r,i){const l=new ep(t,Ke.empty(),e,r);return i?l.ke():l}Ye(t){return new ep(t,Ke.empty(),Jv,Jv)}getFieldIndex(t,e){const r=new x$(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(l=>{const d=l.filter(f=>r.$e(f));return d.sort((f,m)=>m.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(t,e){const r=new MC;for(const i of ou(t)){const l=e.data.field(i.fieldPath);if(null==l)return null;const d=r.Ne(i.kind);Um.fe.Zt(l,d)}return r.Se()}He(t){const e=new MC;return Um.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new MC;return Um.fe.Zt(qf(this.databaseId,e),r.Ne(function(i){const l=ou(i);return 0===l.length?0:l[l.length-1].kind}(t))),r.Se()}We(t,e,r){if(null===r)return[];let i=[];i.push(new MC);let l=0;for(const d of ou(t)){const f=r[l++];for(const m of i)if(this.en(e,d.fieldPath)&&jd(f))i=this.nn(i,d,f);else{const b=m.Ne(d.kind);Um.fe.Zt(f,b)}}return this.sn(i)}je(t,e,r){return null==r?null:this.We(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],l=[];for(const d of r.arrayValue.values||[])for(const f of i){const m=new MC;m.seed(f.Se()),Um.fe.Zt(d,m.Ne(e.kind)),l.push(m)}return l}en(t,e){return!!t.filters.find(r=>r instanceof Zr&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=jA(t),i=GA(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(l=>{const d=[];return we.forEach(l,f=>i.get([f.indexId,this.uid]).next(m=>{d.push(function(b,T){const A=T?new Gd(T.sequenceNumber,new fl(Bm(T.readTime),new Ke(vc(T.documentKey)),T.largestBatchId)):Gd.empty(),M=b.fields.map(([O,G])=>new Wf(wi.fromServerFormat(O),G));return new Nm(b.indexId,b.collectionGroup,M,A)}(f,m))})).next(()=>d)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:Jt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=jA(t),l=GA(t);return this.rn(t).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(f=>we.forEach(f,m=>{return l.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Vm((M=r).readTime),documentKey:lo(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(t,e){const r=new Map;return we.forEach(e,(i,l)=>{const d=r.get(i.collectionGroup);return(d?we.resolve(d):this.getFieldIndexes(t,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),we.forEach(f,m=>this.on(t,i,m).next(b=>{const T=this.un(l,m);return b.isEqual(T)?we.resolve():this.an(t,l,m,b,T)}))))})}cn(t,e,r,i){return RC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return RC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=RC(t);let l=new k($m);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(d,f)=>{l=l.add(new ep(r.indexId,e,f.arrayValue,f.directionalValue))}).next(()=>l)}un(t,e){let r=new k($m);const i=this.Ze(e,t);if(null==i)return r;const l=Rv(e);if(null!=l){const d=t.data.field(l.fieldPath);if(jd(d))for(const f of d.arrayValue.values||[])r=r.add(new ep(e.indexId,t.key,this.He(f),i))}else r=r.add(new ep(e.indexId,t.key,Jv,i));return r}an(t,e,r,i,l){He("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const d=[];return function(f,m,b,T,A){const M=f.getIterator(),O=m.getIterator();let G=K(M),ie=K(O);for(;G||ie;){let _e=!1,$e=!1;if(G&&ie){const qe=b(G,ie);qe<0?$e=!0:qe>0&&(_e=!0)}else null!=G?$e=!0:_e=!0;_e?(T(ie),ie=K(O)):$e?(A(G),G=K(M)):(G=K(M),ie=K(O))}}(i,l,$m,f=>{d.push(this.cn(t,e,r,f))},f=>{d.push(this.hn(t,e,r,f))}),we.waitFor(d)}rn(t){let e=1;return GA(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((d,f)=>$m(d,f)).filter((d,f,m)=>!f||0!==$m(d,m[f-1]));const i=[];i.push(t);for(const d of r){const f=$m(d,t),m=$m(d,e);if(0===f)i[0]=t.ke();else if(f>0&&m<0)i.push(d),i.push(d.ke());else if(m>0)break}i.push(e);const l=[];for(let d=0;d<i.length;d+=2)l.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Jv,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Jv,[]]));return l}}function OL(n){return ns(n,"collectionParents")}function RC(n){return ns(n,"indexEntries")}function jA(n){return ns(n,"indexConfiguration")}function GA(n){return ns(n,"indexState")}const FL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qo{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new qo(t,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function LL(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],d=IDBKeyRange.only(e.batchId);let f=0;const m=r.Wt({range:d},(T,A,M)=>(f++,M.delete()));l.push(m.next(()=>{Lt(1===f)}));const b=[];for(const T of e.mutations){const A=bL(t,T.key.path,e.batchId);l.push(i.delete(A)),b.push(T.key)}return we.waitFor(l).next(()=>b)}function qA(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ht();t=n.noDocument}return JSON.stringify(t).length}qo.DEFAULT_COLLECTION_PERCENTILE=10,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qo.DEFAULT=new qo(41943040,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qo.DISABLED=new qo(-1,0,0);class rk{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){Lt(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new rk(l,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tp(t).Wt({index:"userMutationsIndex",range:r},(i,l,d)=>{e=!1,d.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const l=Qv(t),d=tp(t);return d.add({}).next(f=>{Lt("number"==typeof f);const m=new KR(f,e,r,i),b=function(M,O,G){const ie=G.baseMutations.map($e=>AC(M.Jt,$e)),_e=G.mutations.map($e=>AC(M.Jt,$e));return{userId:O,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:ie,mutations:_e}}(this.M,this.userId,m),T=[];let A=new k((M,O)=>Jt(M.canonicalString(),O.canonicalString()));for(const M of i){const O=bL(this.userId,M.key.path,f);A=A.add(M.key.path.popLast()),T.push(d.put(b)),T.push(l.put(O,s$))}return A.forEach(M=>{T.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.ln[f]=m.keys()}),we.waitFor(T).next(()=>m)})}lookupMutationBatch(t,e){return tp(t).get(e).next(r=>r?(Lt(r.userId===this.userId),Kv(this.M,r)):null)}fn(t,e){return this.ln[e]?we.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return tp(t).Wt({index:"userMutationsIndex",range:i},(d,f,m)=>{f.userId===this.userId&&(Lt(f.batchId>=r),l=Kv(this.M,f)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return tp(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tp(t).qt("userMutationsIndex",e).next(r=>r.map(i=>Kv(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=UA(this.userId,e.path),i=IDBKeyRange.lowerBound(r),l=[];return Qv(t).Wt({range:i},(d,f,m)=>{const[b,T,A]=d,M=vc(T);if(b===this.userId&&e.path.isEqual(M))return tp(t).get(A).next(O=>{if(!O)throw ht();Lt(O.userId===this.userId),l.push(Kv(this.M,O))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new k(Jt);const i=[];return e.forEach(l=>{const d=UA(this.userId,l.path),f=IDBKeyRange.lowerBound(d),m=Qv(t).Wt({range:f},(b,T,A)=>{const[M,O,G]=b,ie=vc(O);M===this.userId&&l.path.isEqual(ie)?r=r.add(G):A.done()});i.push(m)}),we.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,l=UA(this.userId,r),d=IDBKeyRange.lowerBound(l);let f=new k(Jt);return Qv(t).Wt({range:d},(m,b,T)=>{const[A,M,O]=m,G=vc(M);A===this.userId&&r.isPrefixOf(G)?G.length===i&&(f=f.add(O)):T.done()}).next(()=>this.dn(t,f))}dn(t,e){const r=[],i=[];return e.forEach(l=>{i.push(tp(t).get(l).next(d=>{if(null===d)throw ht();Lt(d.userId===this.userId),r.push(Kv(this.M,d))}))}),we.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return LL(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),we.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return we.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qv(t).Wt({range:r},(l,d,f)=>{if(l[0]===this.userId){const m=vc(l[1]);i.push(m)}else f.done()}).next(()=>{Lt(0===i.length)})})}containsKey(t,e){return VL(t,this.userId,e)}wn(t){return BL(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function VL(n,t,e){const r=UA(t,e.path),i=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return Qv(n).Wt({range:l,jt:!0},(f,m,b)=>{const[T,A,M]=f;T===t&&A===i&&(d=!0),b.done()}).next(()=>d)}function tp(n){return ns(n,"mutations")}function Qv(n){return ns(n,"documentMutations")}function BL(n){return ns(n,"mutationQueues")}class Hm{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Hm(0)}static yn(){return new Hm(-1)}}class k${constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new Hm(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>Rt.fromTimestamp(new qr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Xv(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const l=[];return Xv(t).Wt((d,f)=>{const m=NC(f);m.sequenceNumber<=e&&null===r.get(m.targetId)&&(i++,l.push(this.removeTargetData(t,m)))}).next(()=>we.waitFor(l)).next(()=>i)}forEachTarget(t,e){return Xv(t).Wt((r,i)=>{const l=NC(i);e(l)})}pn(t){return UL(t).get("targetGlobalKey").next(e=>(Lt(null!==e),e))}In(t,e){return UL(t).put("targetGlobalKey",e)}Tn(t,e){return Xv(t).put(NL(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=mc(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Xv(t).Wt({range:i,index:"queryTargetsIndex"},(d,f,m)=>{const b=NC(f);Mm(e,b.target)&&(l=b,m.done())}).next(()=>l)}addMatchingKeys(t,e,r){const i=[],l=np(t);return e.forEach(d=>{const f=lo(d.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(t,r,d))}),we.waitFor(i)}removeMatchingKeys(t,e,r){const i=np(t);return we.forEach(e,l=>{const d=lo(l.path);return we.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=np(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=np(t);let l=ct();return i.Wt({range:r,jt:!0},(d,f,m)=>{const b=vc(d[1]),T=new Ke(b);l=l.add(T)}).next(()=>l)}containsKey(t,e){const r=lo(e.path),i=IDBKeyRange.bound([r],[Tm(r)],!1,!0);let l=0;return np(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],m,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Et(t,e){return Xv(t).get(e).next(r=>r?NC(r):null)}}function Xv(n){return ns(n,"targets")}function UL(n){return ns(n,"targetGlobal")}function np(n){return ns(n,"targetDocuments")}function jm(n){return ik.apply(this,arguments)}function ik(){return(ik=(0,be.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==EL)throw n;He("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function $L([n,t],[e,r]){const i=Jt(n,e);return 0===i?Jt(t,r):i}class P${constructor(t){this.An=t,this.buffer=new k($L),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();$L(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class O${constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;He("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Fm(i)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield jm(i)}yield e.Sn(t)}))}}class F${constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return we.resolve(Fn.A);const r=new P$(e);return this.Dn.forEachTarget(t,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(FL)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FL):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,l,d,f,m,b;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,d=Date.now(),this.nthSequenceNumber(t,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(t,r,e))).next(A=>(l=A,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(A=>(b=Date.now(),uA()<=Ja.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${l} targets in `+(m-f)+`ms\n\tRemoved ${A} documents in `+(b-m)+`ms\nTotal Duration: ${b-T}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:A})))}}class L${constructor(t,e){this.db=t,this.garbageCollector=new F$(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return WA(t,r)}removeReference(t,e,r){return WA(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return WA(t,e)}On(t,e){return function(r,i){let l=!1;return BL(r).zt(d=>VL(r,d,i).next(f=>(f&&(l=!0),we.resolve(!f)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Mn(t,(d,f)=>{if(f<=e){const m=this.On(t,d).next(b=>{if(!b)return l++,r.getEntry(t,d).next(()=>(r.removeEntry(d,Rt.min()),np(t).delete([0,lo(d.path)])))});i.push(m)}}).next(()=>we.waitFor(i)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return WA(t,e)}Mn(t,e){const r=np(t);let i,l=Fn.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:m,sequenceNumber:b})=>{0===d?(l!==Fn.A&&e(new Ke(vc(i)),l),l=b,i=m):l=Fn.A}).next(()=>{l!==Fn.A&&e(new Ke(vc(i)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function WA(n,t){return np(n).put((r=n.currentSequenceNumber,{targetId:0,path:lo(t.path),sequenceNumber:r}));var r}class HL{constructor(){this.changes=new v(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ir.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?we.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class V${constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Gm(t).put(r)}removeEntry(t,e,r){return Gm(t).delete(function(i,l){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],HA(l),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=ir.newInvalidDocument(e);return Gm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(kC(e))},(i,l)=>{r=this.$n(e,l)}).next(()=>r)}Bn(t,e){let r={size:0,document:ir.newInvalidDocument(e)};return Gm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(kC(e))},(i,l)=>{r={document:this.$n(e,l),size:qA(l)}}).next(()=>r)}getEntries(t,e){let r=he();return this.Ln(t,e,(i,l)=>{const d=this.$n(i,l);r=r.insert(i,d)}).next(()=>r)}Un(t,e){let r=he(),i=new C(Ke.comparator);return this.Ln(t,e,(l,d)=>{const f=this.$n(l,d);r=r.insert(l,f),i=i.insert(l,qA(d))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return we.resolve();let i=new k(qL);e.forEach(m=>i=i.add(m));const l=IDBKeyRange.bound(kC(i.first()),kC(i.last())),d=i.getIterator();let f=d.getNext();return Gm(t).Wt({index:"documentKeyIndex",range:l},(m,b,T)=>{const A=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&qL(f,A)<0;)r(f,null),f=d.getNext();f&&f.isEqual(A)&&(r(f,b),f=d.hasNext()?d.getNext():null),f?T.Ut(kC(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),HA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gm(t).qt(IDBKeyRange.bound(i,l,!0)).next(d=>{let f=he();for(const m of d){const b=this.$n(Ke.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(t,e,r,i){let l=he();const d=GL(e,r),f=GL(e,fl.max());return Gm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(m,b,T)=>{const A=this.$n(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);l=l.insert(A.key,A),l.size===i&&T.done()}).next(()=>l)}newChangeBuffer(t){return new B$(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return jL(t).get("remoteDocumentGlobalKey").next(e=>(Lt(!!e),e))}Fn(t,e){return jL(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=hL(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=Ke.fromSegments(t.noDocument.path),i=Bm(t.noDocument.readTime);e=ir.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ht();{const r=Ke.fromSegments(t.unknownDocument.path),i=Bm(t.unknownDocument.version);e=ir.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new qr(r[0],r[1]);return Rt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return ir.newInvalidDocument(t)}}class B$ extends HL{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new v(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new k((l,d)=>Jt(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const f=this.Gn.get(l);if(e.push(this.Kn.removeEntry(t,l,f.readTime)),d.isValidDocument()){const m=SL(this.Kn.M,d);i=i.add(l.path.popLast()),r+=qA(m)-f.size,e.push(this.Kn.addEntry(t,l,m))}else if(r-=f.size,this.trackRemovals){const m=SL(this.Kn.M,d.convertToNoDocument(Rt.min()));e.push(this.Kn.addEntry(t,l,m))}}),i.forEach(l=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.Kn.updateMetadata(t,r)),we.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function jL(n){return ns(n,"remoteDocumentGlobal")}function Gm(n){return ns(n,"remoteDocumentsV14")}function kC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function GL(n,t){const e=t.documentKey.path.toArray();return[n,HA(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function qL(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let l=0;l<e.length-2&&l<r.length-2;++l)if(i=Jt(e[l],r[l]),i)return i;return i=Jt(e.length,r.length),i||(i=Jt(e[e.length-2],r[r.length-2]),i||Jt(e[e.length-1],r[r.length-1]))}class U${constructor(t){this.M=t}kt(t,e,r,i){const l=new $A("createOrUpgrade",e);var f;r<1&&i>=1&&(t.createObjectStore("owner"),(f=t).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vL,{unique:!0}),f.createObjectStore("documentMutations"),WL(t),function(f){f.createObjectStore("remoteDocuments")}(t));let d=we.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(t),WL(t)),d=d.next(()=>function(f){const m=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(l))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,m){return m.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vL,{unique:!0});const T=m.store("mutations"),A=b.map(M=>T.put(M));return we.waitFor(A)})}(t,l))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(l))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(t),this.jn(l)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(l))),r<8&&i>=8&&(d=d.next(()=>this.zn(t,l))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(l))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:_$});m.createIndex("collectionPathOverlayIndex",y$,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",v$,{unique:!1})}(t)})),r<13&&i>=13&&(d=d.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:o$});m.createIndex("documentKeyIndex",a$),m.createIndex("collectionGroupIndex",l$)}(t)).next(()=>this.Jn(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:f$}).createIndex("sequenceNumberIndex",p$,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:g$}).createIndex("documentKeyIndex",m$,{unique:!1})}(t)})),d}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=qA(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>we.forEach(i,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>we.forEach(f,m=>{Lt(m.userId===l.userId);const b=Kv(this.M,m);return LL(t,l.userId,b).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Wt((d,f)=>{const m=new En(d),b=[0,lo(m)];l.push(e.get(b).next(T=>T?we.resolve():e.put({targetId:0,path:lo(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>we.waitFor(l))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:h$});const r=e.store("collectionParents"),i=new nk,l=d=>{if(i.add(d)){const f=d.lastSegment(),m=d.popLast();return r.put({collectionId:f,parent:lo(m)})}};return e.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const m=new En(d);return l(m.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([d,f,m],b)=>{const T=vc(f);return l(T.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const l=NC(i),d=NL(this.M,l);return e.put(d)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((l,d)=>{const f=e.store("remoteDocumentsV14"),m=(b=d,b.document?new Ke(En.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):ht()).path.toArray();var b;const T={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(T))}).next(()=>we.waitFor(i))}}function WL(n){n.createObjectStore("targetDocuments",{keyPath:c$}).createIndex("documentTargetsIndex",d$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u$,{unique:!0}),n.createObjectStore("targetGlobal")}const sk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ok{constructor(t,e,r,i,l,d,f,m,b,T,A=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=l,this.window=d,this.document=f,this.Xn=b,this.Zn=T,this.ts=A,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!ok.vt())throw new Pe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new L$(this,i),this.hs=e+"main",this.M=new AL(m),this.ls=new hu(this.hs,this.ts,new U$(this.M)),this.fs=new k$(this.referenceDelegate,this.M),this.ds=new V$(this.M),this._s=new D$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,sk);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Fn(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,be.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,be.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,be.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>ZA(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(Fm(t))return He("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return PC(t).get("owner").next(e=>we.resolve(this.bs(e)))}Vs(t){return ZA(t).delete(this.clientId)}vs(){var t=this;return(0,be.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ns(r,"clientMetadata");return i.qt().next(l=>{const d=t.Ds(l,18e5),f=l.filter(m=>-1===d.indexOf(m));return we.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?we.resolve(!0):PC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,sk);return!1}}return!(!this.networkEnabled||!this.inForeground)||ZA(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&He("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,be.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new IL(e,Fn.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>ZA(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return rk.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new R$(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return tk.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){He("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",l=14===(d=this.ts)?w$:13===d?CL:12===d?b$:11===d?wL:void ht();var d;let f;return this.ls.runTransaction(t,i,l,m=>(f=new IL(m,this.es?this.es.next():Fn.A),"readwrite-primary"===e?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw Or(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(me.FAILED_PRECONDITION,EL);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}$s(t){return PC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Pe(me.FAILED_PRECONDITION,sk)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return PC(t).put("owner",e)}static vt(){return hu.vt()}Rs(t){const e=PC(t);return e.get("owner").next(r=>this.bs(r)?(He("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):we.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(Or(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return He("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Or("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function PC(n){return ns(n,"owner")}function ZA(n){return ns(n,"clientMetadata")}function ak(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class $${constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const l of e)l.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return Ke.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):Rm(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new Ke(e)).next(r=>{let i=Le();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let l=Le();return this.indexManager.getCollectionParents(t,i).next(d=>we.forEach(d,f=>{const m=(b=e,T=f.child(i),new au(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.zs(t,m,r).next(b=>{b.forEach((T,A)=>{l=l.insert(T,A)})})}).next(()=>l))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(l=>(i=l,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(l=>{for(const d of l)for(const f of d.mutations){const m=f.key;let b=i.get(m);null==b&&(b=ir.newInvalidDocument(m),i=i.insert(m,b)),BA(f,b,d.localWriteTime),b.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((l,d)=>{ba(e,d)||(i=i.remove(l))}),i))}}class lk{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=ct(),i=ct();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new lk(t,e.fromCache,r,i)}}class ZL{Xs(t){this.Zs=t}Qs(t,e,r,i){return 0===(l=e).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Rt.min())?this.ti(t,e):this.Zs.Ks(t,i).next(l=>{const d=this.ei(e,l);return(Yf(e)||Bv(e))&&this.ni(e.limitType,d,i,r)?this.ti(t,e):(uA()<=Ja.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),vC(e)),this.Zs.Qs(t,e,xm(r,-1)).next(f=>(d.forEach(m=>{f=f.insert(m.key,m)}),f)))});var l}ei(t,e){let r=new k(qd(t));return e.forEach((i,l)=>{ba(t,l)&&(r=r.add(l))}),r}ni(t,e,r,i){if(r.size!==e.size)return!0;const l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ti(t,e){return uA()<=Ja.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",vC(e)),this.Zs.Qs(t,e,fl.min())}}class H${constructor(t,e,r,i){this.persistence=t,this.si=e,this.M=i,this.ii=new C(Jt),this.ri=new v(l=>mc(l),Mm),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new $$(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function zL(n,t,e,r){return new H$(n,t,e,r)}function YL(n,t){return uk.apply(this,arguments)}function uk(){return(uk=(0,be.Z)(function*(n,t){const e=Xe(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(l=>(i=l,e.ai(t),e.Bs.getAllMutationBatches(r))).next(l=>{const d=[],f=[];let m=ct();for(const b of i){d.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}for(const b of l){f.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}return e.ci.Ks(r,m).next(b=>({hi:b,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function j$(n,t){const e=Xe(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),l=e.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,m,b){const T=m.batch,A=T.keys();let M=we.resolve();return A.forEach(O=>{M=M.next(()=>b.getEntry(f,O)).next(G=>{const ie=m.docVersions.get(O);Lt(null!==ie),G.version.compareTo(ie)<0&&(T.applyToRemoteDocument(G,m),G.isValidDocument()&&(G.setReadTime(m.commitVersion),b.addEntry(G)))})}),M.next(()=>d.Bs.removeMutationBatch(f,T))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.ci.Ks(r,i))})}function KL(n){const t=Xe(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function G$(n,t){const e=Xe(n),r=t.snapshotVersion;let i=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=e.ui.newChangeBuffer({trackRemovals:!0});i=e.ii;const f=[];t.targetChanges.forEach((b,T)=>{const A=i.get(T);if(!A)return;f.push(e.fs.removeMatchingKeys(l,b.removedDocuments,T).next(()=>e.fs.addMatchingKeys(l,b.addedDocuments,T)));let M=A.withSequenceNumber(l.currentSequenceNumber);var O,G,ie;t.targetMismatches.has(T)?M=M.withResumeToken(di.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):b.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(b.resumeToken,r)),i=i.insert(T,M),G=M,ie=b,(0===(O=A).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0)&&f.push(e.fs.updateTargetData(l,M))});let m=he();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,b))}),f.push(JL(l,d,t.documentUpdates).next(b=>{m=b})),!r.isEqual(Rt.min())){const b=e.fs.getLastRemoteSnapshotVersion(l).next(T=>e.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(b)}return we.waitFor(f).next(()=>d.apply(l)).next(()=>e.ci.Gs(l,m)).next(()=>m)}).then(l=>(e.ii=i,l))}function JL(n,t,e){let r=ct();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let l=he();return e.forEach((d,f)=>{const m=i.get(d);f.isNoDocument()&&f.version.isEqual(Rt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):He("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),l})}function q$(n,t){const e=Xe(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function e0(n,t){const e=Xe(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(l=>l?(i=l,we.resolve(i)):e.fs.allocateTargetId(r).next(d=>(i=new Xf(t,d,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ii=e.ii.insert(r.targetId,r),e.ri.set(t,r.targetId)),r})}function t0(n,t,e){return ck.apply(this,arguments)}function ck(){return(ck=(0,be.Z)(function*(n,t,e){const r=Xe(n),i=r.ii.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Fm(d))throw d;He("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function zA(n,t,e){const r=Xe(n);let i=Rt.min(),l=ct();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,m,b){const T=Xe(f),A=T.ri.get(b);return void 0!==A?we.resolve(T.ii.get(A)):T.fs.getTargetData(m,b)}(r,d,ao(t)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(m=>{l=m})}).next(()=>r.si.Qs(d,t,e?i:Rt.min(),e?l:ct())).next(f=>(e2(r,Jf(t),f),{documents:f,li:l})))}function QL(n,t){const e=Xe(n),r=Xe(e.fs),i=e.ii.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,t).next(d=>d?d.target:null))}function XL(n,t){const e=Xe(n),r=e.oi.get(t)||Rt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.ui.getAllFromCollectionGroup(i,t,xm(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(e2(e,t,i),i))}function e2(n,t,e){let r=Rt.min();e.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(t,r)}function dk(){return(dk=(0,be.Z)(function*(n,t,e,r){const i=Xe(n);let l=ct(),d=he();for(const b of e){const T=t.fi(b.metadata.name);b.document&&(l=l.add(T));const A=t.di(b);A.setReadTime(t._i(b.metadata.readTime)),d=d.insert(T,A)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),m=yield e0(i,(b=r,ao(pl(En.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>JL(b,f,d).next(T=>(f.apply(b),T)).next(T=>i.fs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>i.fs.addMatchingKeys(b,l,m.targetId)).next(()=>i.ci.Gs(b,T)).next(()=>T)))})).apply(this,arguments)}function Z$(n,t){return hk.apply(this,arguments)}function hk(){return(hk=(0,be.Z)(function*(n,t,e=ct()){const r=yield e0(n,ao(XR(t.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const d=ts(t.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(l,t);const f=r.withResumeToken(di.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(l,f).next(()=>i.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.fs.addMatchingKeys(l,e,r.targetId)).next(()=>i._s.saveNamedQuery(l,t))})})).apply(this,arguments)}class z${constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return we.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var r;return this.wi.set(e.id,{id:(r=e).id,version:r.version,createTime:ts(r.createTime)}),we.resolve()}getNamedQuery(t,e){return we.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(r=e).name,query:XR(r.bundledQuery),readTime:ts(r.readTime)}),we.resolve();var r}}class Y${constructor(){this.overlays=new C(Ke.comparator),this.gi=new Map}getOverlay(t,e){return we.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,l)=>{this.Xt(t,e,l)}),we.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),we.resolve()}getOverlaysForCollection(t,e,r){const i=De(),l=e.length+1,d=new Ke(e.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!e.isPrefixOf(b.path))break;b.path.length===l&&m.largestBatchId>r&&i.set(m.getKey(),m)}return we.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let l=new C((b,T)=>b-T);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===e&&b.largestBatchId>r){let T=l.get(b.largestBatchId);null===T&&(T=De(),l=l.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const f=De(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,T)=>f.set(b,T)),!(f.size()>=i)););return we.resolve(f)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new QR(e,r));let l=this.gi.get(e);void 0===l&&(l=ct(),this.gi.set(e,l)),this.gi.set(e,l.add(r.key))}}class fk{constructor(){this.yi=new k(rs.pi),this.Ii=new k(rs.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const r=new rs(t,e);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Ai(new rs(t,e))}Ri(t,e){t.forEach(r=>this.removeReference(r,e))}Pi(t){const e=new Ke(new En([])),r=new rs(e,t),i=new rs(e,t+1),l=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new Ke(new En([])),r=new rs(e,t),i=new rs(e,t+1);let l=ct();return this.Ii.forEachInRange([r,i],d=>{l=l.add(d.key)}),l}containsKey(t){const e=new rs(t,0),r=this.yi.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class rs{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return Ke.comparator(t.key,e.key)||Jt(t.vi,e.vi)}static Ti(t,e){return Jt(t.vi,e.vi)||Ke.comparator(t.key,e.key)}}class K${constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new k(rs.pi)}checkEmpty(t){return we.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const l=this.Si;this.Si++;const d=new KR(l,e,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new rs(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return we.resolve(d)}lookupMutationBatch(t,e){return we.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.xi(e+1),l=i<0?0:i;return we.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return we.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new rs(e,0),i=new rs(e,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);l.push(f)}),we.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new k(Jt);return e.forEach(i=>{const l=new rs(i,0),d=new rs(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],f=>{r=r.add(f.vi)})}),we.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let l=r;Ke.isDocumentKey(l)||(l=l.child(""));const d=new rs(new Ke(l),0);let f=new k(Jt);return this.Di.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(m.vi)),!0)},d),we.resolve(this.Ni(f))}Ni(t){const e=[];return t.forEach(r=>{const i=this.Ci(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Lt(0===this.ki(e.batchId,"removed")),this.Bs.shift();let r=this.Di;return we.forEach(e.mutations,i=>{const l=new rs(i.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,e){const r=new rs(e,0),i=this.Di.firstAfterOrEqual(r);return we.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return we.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class J${constructor(t){this.Mi=t,this.docs=new C(Ke.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),l=i?i.size:0,d=this.Mi(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return we.resolve(r?r.document.mutableCopy():ir.newInvalidDocument(e))}getEntries(t,e){let r=he();return e.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():ir.newInvalidDocument(i))}),we.resolve(r)}getAllFromCollection(t,e,r){let i=he();const l=new Ke(e.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!e.isPrefixOf(f.path))break;f.path.length>e.length+1||TA(kv(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return we.resolve(i)}getAllFromCollectionGroup(t,e,r,i){ht()}Oi(t,e){return we.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new Q$(this)}getSize(t){return we.resolve(this.size)}}class Q$ extends HL{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),we.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class X${constructor(t){this.persistence=t,this.Fi=new v(e=>mc(e),Mm),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new fk,this.targetCount=0,this.Li=Hm.gn()}forEachTarget(t,e){return this.Fi.forEach((r,i)=>e(i)),we.resolve()}getLastRemoteSnapshotVersion(t){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return we.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$i&&(this.$i=e),we.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new Hm(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,we.resolve()}updateTargetData(t,e){return this.Tn(e),we.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,we.resolve()}removeTargets(t,e,r){let i=0;const l=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=e&&null===r.get(f.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),i++)}),we.waitFor(l).next(()=>i)}getTargetCount(t){return we.resolve(this.targetCount)}getTargetData(t,e){const r=this.Fi.get(e)||null;return we.resolve(r)}addMatchingKeys(t,e,r){return this.Bi.Ei(e,r),we.resolve()}removeMatchingKeys(t,e,r){this.Bi.Ri(e,r);const i=this.persistence.referenceDelegate,l=[];return i&&e.forEach(d=>{l.push(i.markPotentiallyOrphaned(t,d))}),we.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),we.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Bi.Vi(e);return we.resolve(r)}containsKey(t,e){return we.resolve(this.Bi.containsKey(e))}}class e6{constructor(t,e){this.Ui={},this.overlays={},this.es=new Fn(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new X$(this),this.indexManager=new M$,this.ds=new J$(r=>this.referenceDelegate.qi(r)),this.M=new AL(e),this._s=new z$(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Y$,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Ui[t.toKey()];return r||(r=new K$(e,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){He("MemoryPersistence","Starting transaction:",t);const i=new t6(this.es.next());return this.referenceDelegate.Ki(),r(i).next(l=>this.referenceDelegate.Gi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Qi(t,e){return we.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,e)))}}class t6 extends TL{constructor(t){super(),this.currentSequenceNumber=t}}class pk{constructor(t){this.persistence=t,this.ji=new fk,this.Wi=null}static zi(t){return new pk(t)}get Hi(){if(this.Wi)return this.Wi;throw ht()}addReference(t,e,r){return this.ji.addReference(r,e),this.Hi.delete(r.toString()),we.resolve()}removeReference(t,e,r){return this.ji.removeReference(r,e),this.Hi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),we.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.Hi,r=>{const i=Ke.fromPath(r);return this.Ji(t,i).next(l=>{l||e.removeEntry(i,Rt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(r=>{r?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return we.or([()=>we.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function t2(n,t){return`firestore_clients_${n}_${t}`}function n2(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function gk(n,t){return`firestore_targets_${n}_${t}`}class YA{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Yi(t,e,r){const i=JSON.parse(r);let l,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(l=new Pe(i.error.code,i.error.message))),d?new YA(t,e,i.state,l):(Or("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class OC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Yi(t,e){const r=JSON.parse(e);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Pe(r.error.code,r.error.message))),l?new OC(t,r.state,i):(Or("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class KA{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=ws();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=mA(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return i?new KA(t,l):(Or("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class mk{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new mk(e.clientId,e.onlineState):(Or("SharedClientState",`Failed to parse online state: ${t}`),null)}}class _k{constructor(){this.activeTargetIds=ws()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class yk{constructor(t,e,r,i,l){this.window=t,this.Yn=e,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new C(Jt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=t2(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new _k),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,be.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.er)continue;const l=t.getItem(t2(t.persistenceKey,i));if(l){const d=KA.Yi(i,l);d&&(t.ir=t.ir.insert(d.clientId,d))}}t.wr();const r=t.storage.getItem(t.dr);if(r){const i=t.mr(r);i&&t.gr(i)}for(const i of t.rr)t.sr(i);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,r){this.pr(t,e,r),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(gk(this.persistenceKey,t));if(r){const i=OC.Yi(t,r);i&&(e=i.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(gk(this.persistenceKey,t))}updateQueryState(t,e,r){this.Er(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ir(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return He("SharedClientState","READ",t,e),e}setItem(t,e){He("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){He("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,be.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Pr(r.key);return e.br(i,null)}{const i=e.Vr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Sr(i)}}else if(e.lr.test(r.key)){if(null!==r.newValue){const i=e.Dr(r.key,r.newValue);if(i)return e.Cr(i)}}else if(r.key===e.dr){if(null!==r.newValue){const i=e.mr(r.newValue);if(i)return e.gr(i)}}else if(r.key===e.ar){const i=function(l){let d=Fn.A;if(null!=l)try{const f=JSON.parse(l);Lt("number"==typeof f),d=f}catch(f){Or("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==Fn.A&&e.sequenceNumberHandler(i)}else if(r.key===e._r){const i=e.Nr(r.newValue);yield Promise.all(i.map(l=>e.syncEngine.kr(l)))}}else e.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,r){const i=new YA(this.currentUser,t,e,r),l=n2(this.persistenceKey,this.currentUser,t);this.setItem(l,i.Xi())}Ir(t){const e=n2(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,r){const i=gk(this.persistenceKey,t),l=new OC(t,e,r);this.setItem(i,l.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const r=this.Pr(t);return KA.Yi(r,e)}vr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return YA.Yi(new Pi(void 0!==r[2]?r[2]:null),i,e)}Dr(t,e){const r=this.lr.exec(t),i=Number(r[1]);return OC.Yi(i,e)}mr(t){return mk.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,be.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);He("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const r=e?this.ir.insert(t,e):this.ir.remove(t),i=this.yr(this.ir),l=this.yr(r),d=[],f=[];return l.forEach(m=>{i.has(m)||d.push(m)}),i.forEach(m=>{l.has(m)||f.push(m)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=ws();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class r2{constructor(){this.$r=new _k,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,r){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new _k,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class n6{Lr(t){}shutdown(){}}class i2{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const r6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class i6{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class s6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,r,i,l){const d=this.uo(t,e);He("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,l),this.co(t,d,f,r).then(m=>(He("RestConnection","Received: ",m),m),m=>{throw Fr("RestConnection",`${t} failed with error: `,m,"url: ",d,"request:",r),m})}ho(t,e,r,i,l){return this.oo(t,e,r,i,l)}ao(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+Hf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,l)=>t[l]=i),r&&r.headers.forEach((i,l)=>t[l]=i)}uo(t,e){return`${this.io}/v1/${e}:${r6[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((l,d)=>{const f=new CR;f.listenOnce(eL.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case dC.NO_ERROR:const b=f.getResponseJson();He("Connection","XHR received:",JSON.stringify(b)),l(b);break;case dC.TIMEOUT:He("Connection",'RPC "'+t+'" timed out'),d(new Pe(me.DEADLINE_EXCEEDED,"Request time out"));break;case dC.HTTP_ERROR:const T=f.getStatus();if(He("Connection",'RPC "'+t+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const M=function(O){const G=O.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(G)>=0?G:me.UNKNOWN}(A.status);d(new Pe(M,A.message))}else d(new Pe(me.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Pe(me.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{He("Connection",'RPC "'+t+'" completed.')}});const m=JSON.stringify(i);f.send(e,"POST",m,r,15)})}lo(t,e,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=oA(),d=bR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new aA({})),this.ao(f.initMessageHeaders,e,r),(0,L.uI)()||(0,L.b$)()||(0,L.d)()||(0,L.w1)()||(0,L.Mn)()||(0,L.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");He("Connection","Creating WebChannel: "+m,f);const b=l.createWebChannel(m,f);let T=!1,A=!1;const M=new i6({Wr:G=>{A?He("Connection","Not sending because WebChannel is closed:",G):(T||(He("Connection","Opening WebChannel transport."),b.open(),T=!0),He("Connection","WebChannel sending:",G),b.send(G))},zr:()=>b.close()}),O=(G,ie,_e)=>{G.listen(ie,$e=>{try{_e($e)}catch(qe){setTimeout(()=>{throw qe},0)}})};return O(b,Cm.EventType.OPEN,()=>{A||He("Connection","WebChannel transport opened.")}),O(b,Cm.EventType.CLOSE,()=>{A||(A=!0,He("Connection","WebChannel transport closed"),M.no())}),O(b,Cm.EventType.ERROR,G=>{A||(A=!0,Fr("Connection","WebChannel transport errored:",G),M.no(new Pe(me.UNAVAILABLE,"The operation could not be completed")))}),O(b,Cm.EventType.MESSAGE,G=>{var ie;if(!A){const _e=G.data[0];Lt(!!_e);const $e=_e,qe=$e.error||(null===(ie=$e[0])||void 0===ie?void 0:ie.error);if(qe){He("Connection","WebChannel received error:",qe);const it=qe.status;let st=function(Wt){const Yr=c[Wt];if(void 0!==Yr)return _(Yr)}(it),Nt=qe.message;void 0===st&&(st=me.INTERNAL,Nt="Unknown error status: "+it+" with message "+qe.message),A=!0,M.no(new Pe(st,Nt)),b.close()}else He("Connection","WebChannel received:",_e),M.so(_e)}}),O(d,tL.STAT_EVENT,G=>{G.stat===wR.PROXY?He("Connection","Detected buffering proxy"):G.stat===wR.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.eo()},0),M}}function s2(){return"undefined"!=typeof window?window:null}function JA(){return"undefined"!=typeof document?document:null}function FC(n){return new Z3(n,!0)}class vk{constructor(t,e,r=1e3,i=1.5,l=6e4){this.Yn=t,this.timerId=e,this.fo=r,this._o=i,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,e-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class o2{constructor(t,e,r,i,l,d,f,m){this.Yn=t,this.Ro=r,this.Po=i,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new vk(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,be.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,be.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var r=this;return(0,be.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==t?r.Do.reset():e&&e.code===me.RESOURCE_EXHAUSTED?(Or(e.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):e&&e.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===e&&this.qo(r,i)},r=>{t(()=>{const i=new Pe(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,e){const r=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var t=this;this.state=5,this.Do.To((0,be.Z)(function*(){t.state=0,t.start()}))}Ko(t){return He("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o6 extends o2{constructor(t,e,r,i,l,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,d),this.M=l}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(m=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ht(),i=t.targetChange.targetIds||[],l=function(m,b){return m.N?(Lt(void 0===b||"string"==typeof b),di.fromBase64String(b||"")):(Lt(void 0===b||b instanceof Uint8Array),di.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),d=t.targetChange.cause,f=d&&function(m){const b=void 0===m.code?me.UNKNOWN:_(m.code);return new Pe(b,m.message||"")}(d);e=new Gv(r,i,l,f||null)}else if("documentChange"in t){const r=t.documentChange,i=yc(n,r.document.name),l=ts(r.document.updateTime),d=new Oi({mapValue:{fields:r.document.fields}}),f=ir.newFoundDocument(i,l,d);e=new du(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const r=t.documentDelete,i=yc(n,r.document),l=r.readTime?ts(r.readTime):Rt.min(),d=ir.newNoDocument(i,l);e=new du([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){const r=t.documentRemove,i=yc(n,r.document);e=new du([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return ht();{const r=t.filter,l=new u(r.count||0);e=new Yd(r.targetId,l)}}var m;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return Rt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Rt.min():l.readTime?ts(l.readTime):Rt.min()}(t);return this.listener.Qo(e,r)}jo(t){const e={};e.database=IC(this.M),e.addTarget=function(i,l){let d;const f=l.target;return d=Pv(f)?{documents:fL(i,f)}:{query:pL(i,f)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=aL(i,l.resumeToken):l.snapshotVersion.compareTo(Rt.min())>0&&(d.readTime=TC(i,l.snapshotVersion.toTimestamp())),d}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Fo(e)}Wo(t){const e={};e.database=IC(this.M),e.removeTarget=t,this.Fo(e)}}class a6 extends o2{constructor(t,e,r,i,l,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(Lt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(n,t){return n&&n.length>0?(Lt(void 0!==t),n.map(e=>function(r,i){let l=ts(r.updateTime?r.updateTime:i);return l.isEqual(Rt.min())&&(l=ts(i)),new sL(l,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ts(t.commitTime);return this.listener.Yo(r,e)}return Lt(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=IC(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>AC(this.M,r))};this.Fo(e)}}class l6 extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.oo(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(me.UNKNOWN,i.toString())})}ho(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ho(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(me.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class u6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Or(e),this.iu=!1):He("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class c6{constructor(t,e,r,i,l){var d=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(f=>{r.enqueueAndForget((0,be.Z)(function*(){var m;rp(d)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,be.Z)(function*(b){const T=Xe(b);T.fu.add(4),yield n0(T),T.wu.set("Unknown"),T.fu.delete(4),yield LC(T)}),function(b){return m.apply(this,arguments)})(d))}))}),this.wu=new u6(r,i)}}function LC(n){return bk.apply(this,arguments)}function bk(){return(bk=(0,be.Z)(function*(n){if(rp(n))for(const t of n.du)yield t(!0)})).apply(this,arguments)}function n0(n){return wk.apply(this,arguments)}function wk(){return(wk=(0,be.Z)(function*(n){for(const t of n.du)yield t(!1)})).apply(this,arguments)}function QA(n,t){const e=Xe(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),Tk(e)?Ek(e):s0(e).xo()&&Ck(e,t))}function VC(n,t){const e=Xe(n),r=s0(e);e.lu.delete(t),r.xo()&&a2(e,t),0===e.lu.size&&(r.xo()?r.Mo():rp(e)&&e.wu.set("Unknown"))}function Ck(n,t){n.mu.Z(t.targetId),s0(n).jo(t)}function a2(n,t){n.mu.Z(t),s0(n).Wo(t)}function Ek(n){n.mu=new EC({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),s0(n).start(),n.wu.ru()}function Tk(n){return rp(n)&&!s0(n).Co()&&n.lu.size>0}function rp(n){return 0===Xe(n).fu.size}function l2(n){n.mu=void 0}function d6(n){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,be.Z)(function*(n){n.lu.forEach((t,e)=>{Ck(n,t)})})).apply(this,arguments)}function h6(n,t){return Ik.apply(this,arguments)}function Ik(){return(Ik=(0,be.Z)(function*(n,t){l2(n),Tk(n)?(n.wu.au(t),Ek(n)):n.wu.set("Unknown")})).apply(this,arguments)}function f6(n,t,e){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,be.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof Gv&&2===t.state&&t.cause)try{yield(r=(0,be.Z)(function*(i,l){const d=l.cause;for(const f of l.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,t)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield XA(n,r)}else if(t instanceof du?n.mu.ut(t):t instanceof Yd?n.mu._t(t):n.mu.ht(t),!e.isEqual(Rt.min()))try{const r=yield KL(n.localStore);e.compareTo(r)>=0&&(yield function(i,l){const d=i.mu.yt(l);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(m);b&&i.lu.set(m,b.withResumeToken(f.resumeToken,l))}}),d.targetMismatches.forEach(f=>{const m=i.lu.get(f);if(!m)return;i.lu.set(f,m.withResumeToken(di.EMPTY_BYTE_STRING,m.snapshotVersion)),a2(i,f);const b=new Xf(m.target,f,1,m.sequenceNumber);Ck(i,b)}),i.remoteSyncer.applyRemoteEvent(d)}(n,e))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield XA(n,r)}var r})).apply(this,arguments)}function XA(n,t,e){return Sk.apply(this,arguments)}function Sk(){return(Sk=(0,be.Z)(function*(n,t,e){if(!Fm(t))throw t;n.fu.add(1),yield n0(n),n.wu.set("Offline"),e||(e=()=>KL(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield LC(n)}))})).apply(this,arguments)}function u2(n,t){return t().catch(e=>XA(n,e,t))}function r0(n){return Nk.apply(this,arguments)}function Nk(){return(Nk=(0,be.Z)(function*(n){const t=Xe(n),e=ip(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;p6(t);)try{const i=yield q$(t.localStore,r);if(null===i){0===t.hu.length&&e.Mo();break}r=i.batchId,g6(t,i)}catch(i){yield XA(t,i)}c2(t)&&d2(t)})).apply(this,arguments)}function p6(n){return rp(n)&&n.hu.length<10}function g6(n,t){n.hu.push(t);const e=ip(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function c2(n){return rp(n)&&!ip(n).Co()&&n.hu.length>0}function d2(n){ip(n).start()}function m6(n){return xk.apply(this,arguments)}function xk(){return(xk=(0,be.Z)(function*(n){ip(n).Zo()})).apply(this,arguments)}function _6(n){return Mk.apply(this,arguments)}function Mk(){return(Mk=(0,be.Z)(function*(n){const t=ip(n);for(const e of n.hu)t.Jo(e.mutations)})).apply(this,arguments)}function y6(n,t,e){return Rk.apply(this,arguments)}function Rk(){return(Rk=(0,be.Z)(function*(n,t,e){const r=n.hu.shift(),i=JR.from(r,t,e);yield u2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield r0(n)})).apply(this,arguments)}function v6(n,t){return kk.apply(this,arguments)}function kk(){return(kk=(0,be.Z)(function*(n,t){var e;t&&ip(n).Ho&&(yield(e=(0,be.Z)(function*(r,i){if(p(l=i.code)&&l!==me.ABORTED){const d=r.hu.shift();ip(r).ko(),yield u2(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield r0(r)}var l}),function(r,i){return e.apply(this,arguments)})(n,t)),c2(n)&&d2(n)})).apply(this,arguments)}function h2(n,t){return Pk.apply(this,arguments)}function Pk(){return(Pk=(0,be.Z)(function*(n,t){const e=Xe(n);e.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=rp(e);e.fu.add(3),yield n0(e),r&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield LC(e)})).apply(this,arguments)}function Ok(n,t){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,be.Z)(function*(n,t){const e=Xe(n);t?(e.fu.delete(2),yield LC(e)):t||(e.fu.add(2),yield n0(e),e.wu.set("Unknown"))})).apply(this,arguments)}function s0(n){return n.gu||(n.gu=function(t,e,r){const i=Xe(t);return i.eu(),new o6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:d6.bind(null,n),Yr:h6.bind(null,n),Qo:f6.bind(null,n)}),n.du.push(function(){var t=(0,be.Z)(function*(e){e?(n.gu.ko(),Tk(n)?Ek(n):n.wu.set("Unknown")):(yield n.gu.stop(),l2(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function ip(n){return n.yu||(n.yu=function(t,e,r){const i=Xe(t);return i.eu(),new a6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:m6.bind(null,n),Yr:v6.bind(null,n),Xo:_6.bind(null,n),Yo:y6.bind(null,n)}),n.du.push(function(){var t=(0,be.Z)(function*(e){e?(n.yu.ko(),yield r0(n)):(yield n.yu.stop(),n.hu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class Lk{constructor(t,e,r,i,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(t,e,r,i,l){const d=Date.now()+r,f=new Lk(t,e,d,i,l);return f.start(r),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(me.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o0(n,t){if(Or("AsyncQueue",`${t}: ${n}`),Fm(n))return new Pe(me.UNAVAILABLE,`${t}: ${n}`);throw n}class a0{constructor(t){this.comparator=t?(e,r)=>t(e,r)||Ke.comparator(e.key,r.key):(e,r)=>Ke.comparator(e.key,r.key),this.keyedMap=Le(),this.sortedSet=new C(this.comparator)}static emptySet(t){return new a0(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof a0)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new a0;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class f2{constructor(){this.pu=new C(Ke.comparator)}track(t){const e=t.doc.key,r=this.pu.get(e);r?0!==t.type&&3===r.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==r.type?this.pu=this.pu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.pu=this.pu.remove(e):1===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):ht():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,r)=>{t.push(r)}),t}}class l0{constructor(t,e,r,i,l,d,f,m){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(t,e,r,i){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new l0(t,e,a0.emptySet(e),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&km(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class b6{constructor(){this.Tu=void 0,this.listeners=[]}}class w6{constructor(){this.queries=new v(t=>RA(t),km),this.onlineState="Unknown",this.Eu=new Set}}function Vk(n,t){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,be.Z)(function*(n,t){const e=Xe(n),r=t.query;let i=!1,l=e.queries.get(r);if(l||(i=!0,l=new b6),i)try{l.Tu=yield e.onListen(r)}catch(d){const f=o0(d,`Initialization of query '${vC(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,l),l.listeners.push(t),t.Au(e.onlineState),l.Tu&&t.Ru(l.Tu)&&Hk(e)})).apply(this,arguments)}function Uk(n,t){return $k.apply(this,arguments)}function $k(){return($k=(0,be.Z)(function*(n,t){const e=Xe(n),r=t.query;let i=!1;const l=e.queries.get(r);if(l){const d=l.listeners.indexOf(t);d>=0&&(l.listeners.splice(d,1),i=0===l.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function C6(n,t){const e=Xe(n);let r=!1;for(const i of t){const d=e.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&Hk(e)}function E6(n,t,e){const r=Xe(n),i=r.queries.get(t);if(i)for(const l of i.listeners)l.onError(e);r.queries.delete(t)}function Hk(n){n.Eu.forEach(t=>{t.next()})}class jk{constructor(t,e,r){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new l0(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=l0.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class T6{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class p2{constructor(t){this.M=t}fi(t){return yc(this.M,t)}di(t){return t.metadata.exists?hL(this.M,t.document,!1):ir.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return ts(t)}}class D6{constructor(t,e,r){this.Nu=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=g2(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=En.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,r=new p2(this.M);for(const i of t)if(i.metadata.queries){const l=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(e.get(d)||ct()).add(l);e.set(d,f)}}return e}complete(){var t=this;return(0,be.Z)(function*(){const e=yield function(n,t,e,r){return dk.apply(this,arguments)}(t.localStore,new p2(t.M),t.documents,t.Nu.id),r=t.Mu(t.documents);for(const i of t.queries)yield Z$(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function g2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class m2{constructor(t){this.key=t}}class _2{constructor(t){this.key=t}}class y2{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=ct(),this.mutatedKeys=ct(),this.Uu=qd(t),this.qu=new a0(this.Uu)}get Ku(){return this.$u}Gu(t,e){const r=e?e.Qu:new f2,i=e?e.qu:this.qu;let l=e?e.mutatedKeys:this.mutatedKeys,d=i,f=!1;const m=Yf(this.query)&&i.size===this.query.limit?i.last():null,b=Bv(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((T,A)=>{const M=i.get(T),O=ba(this.query,A)?A:null,G=!!M&&this.mutatedKeys.has(M.key),ie=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let _e=!1;M&&O?M.data.isEqual(O.data)?G!==ie&&(r.track({type:3,doc:O}),_e=!0):this.ju(M,O)||(r.track({type:2,doc:O}),_e=!0,(m&&this.Uu(O,m)>0||b&&this.Uu(O,b)<0)&&(f=!0)):!M&&O?(r.track({type:0,doc:O}),_e=!0):M&&!O&&(r.track({type:1,doc:M}),_e=!0,(m||b)&&(f=!0)),_e&&(O?(d=d.add(O),l=ie?l.add(T):l.delete(T)):(d=d.delete(T),l=l.delete(T)))}),Yf(this.query)||Bv(this.query))for(;d.size>this.query.limit;){const T=Yf(this.query)?d.last():d.first();d=d.delete(T.key),l=l.delete(T.key),r.track({type:1,doc:T})}return{qu:d,Qu:r,ni:f,mutatedKeys:l}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const l=t.Qu.Iu();l.sort((b,T)=>function(A,M){const O=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return O(A)-O(M)}(b.type,T.type)||this.Uu(b.doc,T.doc)),this.Wu(r);const d=e?this.zu():[],f=0===this.Lu.size&&this.current?1:0,m=f!==this.Bu;return this.Bu=f,0!==l.length||m?{snapshot:new l0(this.query,t.qu,i,l,t.mutatedKeys,0===f,m,!1),Hu:d}:{Hu:d}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new f2,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=ct(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const e=[];return t.forEach(r=>{this.Lu.has(r)||e.push(new _2(r))}),this.Lu.forEach(r=>{t.has(r)||e.push(new m2(r))}),e}Yu(t){this.$u=t.li,this.Lu=ct();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return l0.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class I6{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class A6{constructor(t){this.key=t,this.Zu=!1}}class S6{constructor(t,e,r,i,l,d){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new v(f=>RA(f),km),this.na=new Map,this.sa=new Set,this.ia=new C(Ke.comparator),this.ra=new Map,this.oa=new fk,this.ua={},this.aa=new Map,this.ca=Hm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function N6(n,t){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,be.Z)(function*(n,t){const e=fP(n);let r,i;const l=e.ea.get(t);if(l)r=l.targetId,e.sharedClientState.addLocalQueryTarget(r),i=l.view.Xu();else{const d=yield e0(e.localStore,ao(t));e.isPrimaryClient&&QA(e.remoteStore,d);const f=e.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield qk(e,t,r,"current"===f)}return i})).apply(this,arguments)}function qk(n,t,e,r){return Wk.apply(this,arguments)}function Wk(){return(Wk=(0,be.Z)(function*(n,t,e,r){n.la=(T,A,M)=>{return(O=(0,be.Z)(function*(G,ie,_e,$e){let qe=ie.view.Gu(_e);qe.ni&&(qe=yield zA(G.localStore,ie.query,!1).then(({documents:Nt})=>ie.view.Gu(Nt,qe)));const it=$e&&$e.targetChanges.get(ie.targetId),st=ie.view.applyChanges(qe,G.isPrimaryClient,it);return nP(G,ie.targetId,st.Hu),st.snapshot}),function(G,ie,_e,$e){return O.apply(this,arguments)})(n,T,A,M);var O};const i=yield zA(n.localStore,t,!0),l=new y2(t,i.li),d=l.Gu(i.documents),f=gl.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),m=l.applyChanges(d,n.isPrimaryClient,f);nP(n,e,m.Hu);const b=new I6(t,e,l);return n.ea.set(t,b),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),m.snapshot})).apply(this,arguments)}function x6(n,t){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,be.Z)(function*(n,t){const e=Xe(n),r=e.ea.get(t),i=e.na.get(r.targetId);if(i.length>1)return e.na.set(r.targetId,i.filter(l=>!km(l,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield t0(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),VC(e.remoteStore,r.targetId),u0(e,r.targetId)}).catch(jm))):(u0(e,r.targetId),yield t0(e.localStore,r.targetId,!0))})).apply(this,arguments)}function zk(){return(zk=(0,be.Z)(function*(n,t,e){const r=pP(n);try{const i=yield function(l,d){const f=Xe(l),m=qr.now(),b=d.reduce((A,M)=>A.add(M.key),ct());let T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>f.ci.Ks(A,b).next(M=>{T=M;const O=[];for(const G of d){const ie=oL(G,T.get(G.key));null!=ie&&O.push(new Qf(G.key,ie,EA(ie.value.mapValue),fi.exists(!0)))}return f.Bs.addMutationBatch(A,m,O,d)})).then(A=>(A.applyToLocalDocumentSet(T),{batchId:A.batchId,changes:T}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,f){let m=l.ua[l.currentUser.toKey()];m||(m=new C(Jt)),m=m.insert(d,f),l.ua[l.currentUser.toKey()]=m}(r,i.batchId,e),yield Kd(r,i.changes),yield r0(r.remoteStore)}catch(i){const l=o0(i,"Failed to persist write");e.reject(l)}})).apply(this,arguments)}function v2(n,t){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,be.Z)(function*(n,t){const e=Xe(n);try{const r=yield G$(e.localStore,t);t.targetChanges.forEach((i,l)=>{const d=e.ra.get(l);d&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?Lt(d.Zu):i.removedDocuments.size>0&&(Lt(d.Zu),d.Zu=!1))}),yield Kd(e,r,t)}catch(r){yield jm(r)}})).apply(this,arguments)}function b2(n,t,e){const r=Xe(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ea.forEach((l,d)=>{const f=d.view.Au(t);f.snapshot&&i.push(f.snapshot)}),function(l,d){const f=Xe(l);f.onlineState=d;let m=!1;f.queries.forEach((b,T)=>{for(const A of T.listeners)A.Au(d)&&(m=!0)}),m&&Hk(f)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function R6(n,t,e){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,be.Z)(function*(n,t,e){const r=Xe(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ra.get(t),l=i&&i.key;if(l){let d=new C(Ke.comparator);d=d.insert(l,ir.newNoDocument(l,Rt.min()));const f=ct().add(l),m=new cu(Rt.min(),new Map,new k(Jt),d,f);yield v2(r,m),r.ia=r.ia.remove(l),r.ra.delete(t),rP(r)}else yield t0(r.localStore,t,!1).then(()=>u0(r,t,e)).catch(jm)})).apply(this,arguments)}function k6(n,t){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,be.Z)(function*(n,t){const e=Xe(n),r=t.batch.batchId;try{const i=yield j$(e.localStore,t);tP(e,r,null),eP(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield Kd(e,i)}catch(i){yield jm(i)}})).apply(this,arguments)}function P6(n,t,e){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,be.Z)(function*(n,t,e){const r=Xe(n);try{const i=yield function(l,d){const f=Xe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return f.Bs.lookupMutationBatch(m,d).next(T=>(Lt(null!==T),b=T.keys(),f.Bs.removeMutationBatch(m,T))).next(()=>f.Bs.performConsistencyCheck(m)).next(()=>f.ci.Ks(m,b))})}(r.localStore,t);tP(r,t,e),eP(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield Kd(r,i)}catch(i){yield jm(i)}})).apply(this,arguments)}function Xk(){return(Xk=(0,be.Z)(function*(n,t){const e=Xe(n);rp(e.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=Xe(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===r)return void t.resolve();const i=e.aa.get(r)||[];i.push(t),e.aa.set(r,i)}catch(r){const i=o0(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})).apply(this,arguments)}function eP(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function tP(n,t,e){const r=Xe(n);let i=r.ua[r.currentUser.toKey()];if(i){const l=i.get(t);l&&(e?l.reject(e):l.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function u0(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),e&&n.ta.fa(r,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||w2(n,r)})}function w2(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(VC(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),rP(n))}function nP(n,t,e){for(const r of e)r instanceof m2?(n.oa.addReference(r.key,t),F6(n,r)):r instanceof _2?(He("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||w2(n,r.key)):ht()}function F6(n,t){const e=t.key,r=e.path.canonicalString();n.ia.get(e)||n.sa.has(r)||(He("SyncEngine","New document in limbo: "+e),n.sa.add(r),rP(n))}function rP(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new Ke(En.fromString(t)),r=n.ca.next();n.ra.set(r,new A6(e)),n.ia=n.ia.insert(e,r),QA(n.remoteStore,new Xf(ao(pl(e.path)),r,2,Fn.A))}}function Kd(n,t,e){return iP.apply(this,arguments)}function iP(){return(iP=(0,be.Z)(function*(n,t,e){const r=Xe(n),i=[],l=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,m)=>{d.push(r.la(m,t,e).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b.fromCache?"not-current":"current"),i.push(b);const T=lk.Ys(m.targetId,b);l.push(T)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,be.Z)(function*(m,b){const T=Xe(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>we.forEach(b,M=>we.forEach(M.Hs,O=>T.persistence.referenceDelegate.addReference(A,M.targetId,O)).next(()=>we.forEach(M.Js,O=>T.persistence.referenceDelegate.removeReference(A,M.targetId,O)))))}catch(A){if(!Fm(A))throw A;He("LocalStore","Failed to update sequence numbers: "+A)}for(const A of b){const M=A.targetId;if(!A.fromCache){const O=T.ii.get(M),ie=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);T.ii=T.ii.insert(M,ie)}}}),function(m,b){return f.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function L6(n,t){return sP.apply(this,arguments)}function sP(){return(sP=(0,be.Z)(function*(n,t){const e=Xe(n);if(!e.currentUser.isEqual(t)){He("SyncEngine","User change. New user:",t.toKey());const r=yield YL(e.localStore,t);e.currentUser=t,(i=e).aa.forEach(d=>{d.forEach(f=>{f.reject(new Pe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield Kd(e,r.hi)}var i})).apply(this,arguments)}function V6(n,t){const e=Xe(n),r=e.ra.get(t);if(r&&r.Zu)return ct().add(r.key);{let i=ct();const l=e.na.get(t);if(!l)return i;for(const d of l){const f=e.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function B6(n,t){return oP.apply(this,arguments)}function oP(){return(oP=(0,be.Z)(function*(n,t){const e=Xe(n),r=yield zA(e.localStore,t.query,!0),i=t.view.Yu(r);return e.isPrimaryClient&&nP(e,t.targetId,i.Hu),i})).apply(this,arguments)}function U6(n,t){return aP.apply(this,arguments)}function aP(){return(aP=(0,be.Z)(function*(n,t){const e=Xe(n);return XL(e.localStore,t).then(r=>Kd(e,r))})).apply(this,arguments)}function $6(n,t,e,r){return lP.apply(this,arguments)}function lP(){return(lP=(0,be.Z)(function*(n,t,e,r){const i=Xe(n),l=yield function(d,f){const m=Xe(d),b=Xe(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.fn(T,f).next(A=>A?m.ci.Ks(T,A):we.resolve(null)))}(i.localStore,t);var f;null!==l?("pending"===e?yield r0(i.remoteStore):"acknowledged"===e||"rejected"===e?(tP(i,t,r||null),eP(i,t),f=t,Xe(Xe(i.localStore).Bs)._n(f)):ht(),yield Kd(i,l)):He("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function uP(){return(uP=(0,be.Z)(function*(n,t){const e=Xe(n);if(fP(e),pP(e),!0===t&&!0!==e.ha){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield C2(e,r.toArray());e.ha=!0,yield Ok(e.remoteStore,!0);for(const l of i)QA(e.remoteStore,l)}else if(!1===t&&!1!==e.ha){const r=[];let i=Promise.resolve();e.na.forEach((l,d)=>{e.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(u0(e,d),t0(e.localStore,d,!0))),VC(e.remoteStore,d)}),yield i,yield C2(e,r),function(l){const d=Xe(l);d.ra.forEach((f,m)=>{VC(d.remoteStore,m)}),d.oa.bi(),d.ra=new Map,d.ia=new C(Ke.comparator)}(e),e.ha=!1,yield Ok(e.remoteStore,!1)}})).apply(this,arguments)}function C2(n,t,e){return cP.apply(this,arguments)}function cP(){return(cP=(0,be.Z)(function*(n,t,e){const r=Xe(n),i=[],l=[];for(const d of t){let f;const m=r.na.get(d);if(m&&0!==m.length){f=yield e0(r.localStore,ao(m[0]));for(const b of m){const T=r.ea.get(b),A=yield B6(r,T);A.snapshot&&l.push(A.snapshot)}}else{const b=yield QL(r.localStore,d);f=yield e0(r.localStore,b),yield qk(r,E2(b),d,!1)}i.push(f)}return r.ta.Qo(l),i})).apply(this,arguments)}function E2(n){return lu(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function j6(n){const t=Xe(n);return Xe(Xe(t.localStore).persistence).Fs()}function G6(n,t,e,r){return dP.apply(this,arguments)}function dP(){return(dP=(0,be.Z)(function*(n,t,e,r){const i=Xe(n);if(i.ha)return void He("SyncEngine","Ignoring unexpected query state notification.");const l=i.na.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const d=yield XL(i.localStore,Jf(l[0])),f=cu.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield Kd(i,d,f);break}case"rejected":yield t0(i.localStore,t,!0),u0(i,t,r);break;default:ht()}})).apply(this,arguments)}function q6(n,t,e){return hP.apply(this,arguments)}function hP(){return(hP=(0,be.Z)(function*(n,t,e){const r=fP(n);if(r.ha){for(const i of t){if(r.na.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const l=yield QL(r.localStore,i),d=yield e0(r.localStore,l);yield qk(r,E2(l),d.targetId,!1),QA(r.remoteStore,d)}for(const i of e)r.na.has(i)&&(yield t0(r.localStore,i,!1).then(()=>{VC(r.remoteStore,i),u0(r,i)}).catch(jm))}})).apply(this,arguments)}function fP(n){const t=Xe(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=v2.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=V6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=R6.bind(null,t),t.ta.Qo=C6.bind(null,t.eventManager),t.ta.fa=E6.bind(null,t.eventManager),t}function pP(n){const t=Xe(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=k6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=P6.bind(null,t),t}class T2{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,be.Z)(function*(){e.M=FC(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return zL(this.persistence,new ZL,t.initialUser,this.M)}wa(t){return new e6(pk.zi,this.M)}_a(t){return new r2}terminate(){var t=this;return(0,be.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class D2 extends T2{constructor(t,e,r){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield e().call(r,t),yield r.ya.initialize(r,t),yield pP(r.ya.syncEngine),yield r0(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(t){return zL(this.persistence,new ZL,t.initialUser,this.M)}ma(t){return new O$(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=ak(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qo.withCacheSize(this.cacheSizeBytes):qo.DEFAULT;return new ok(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,s2(),JA(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new r2}}class Z6 extends D2{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield e().call(r,t);const i=r.ya.syncEngine;r.sharedClientState instanceof yk&&(r.sharedClientState.syncEngine={Mr:$6.bind(null,i),Or:G6.bind(null,i),Fr:q6.bind(null,i),Fs:j6.bind(null,i),kr:U6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,be.Z)(function*(d){yield function(n,t){return uP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(t){const e=s2();if(!yk.vt(e))throw new Pe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ak(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new yk(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class gP{initialize(t,e){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>b2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=L6.bind(null,r.syncEngine),yield Ok(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new w6}createDatastore(t){const e=FC(t.databaseInfo.databaseId),r=new s6(t.databaseInfo);return new l6(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,l=f=>b2(this.syncEngine,f,0),d=i2.vt()?new i2:new n6,new c6(e,r,i,l,d);var e,r,i,l,d}createSyncEngine(t,e){return function(r,i,l,d,f,m,b){const T=new S6(r,i,l,d,f,m);return b&&(T.ha=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,be.Z)(function*(e){const r=Xe(e);He("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield n0(r),r._u.shutdown(),r.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function I2(n,t=10240){let e=0;return{read:()=>(0,be.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class eS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class z6{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new ci,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,be.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,be.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,be.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const r=t.Ea.decode(e),i=Number(r);isNaN(i)&&t.Pa(`length string (${r}) is not valid number`);const l=yield t.ba(i);return new T6(JSON.parse(l),e.length+i)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,be.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ba(t){var e=this;return(0,be.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const r=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,be.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class Y6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Pe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(l,d){const f=Xe(l),m=IC(f.M)+"/documents",b={documents:d.map(O=>DC(f.M,O))},T=yield f.ho("BatchGetDocuments",m,b),A=new Map;T.forEach(O=>{const G=function(n,t){return"found"in t?function(e,r){Lt(!!r.found);const i=yc(e,r.found.name),l=ts(r.found.updateTime),d=new Oi({mapValue:{fields:r.found.fields}});return ir.newFoundDocument(i,l,d)}(n,t):"missing"in t?function(e,r){Lt(!!r.missing),Lt(!!r.readTime);const i=yc(e,r.missing),l=ts(r.readTime);return ir.newNoDocument(i,l)}(n,t):ht()}(f.M,O);A.set(G.key.toString(),G)});const M=[];return d.forEach(O=>{const G=A.get(O.toString());Lt(!!G),M.push(G)}),M}),function(l,d){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new s(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const l=Ke.fromPath(i);t.mutations.push(new o(l,t.precondition(l)))}),yield(r=(0,be.Z)(function*(i,l){const d=Xe(i),f=IC(d.M)+"/documents",m={writes:l.map(b=>AC(d.M,b))};yield d.oo("Commit",f,m)}),function(i,l){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ht();e=Rt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Pe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?fi.updateTime(e):fi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Rt.min()))throw new Pe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fi.updateTime(e)}return fi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class K6{constructor(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new vk(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,be.Z)(function*(){const e=new Y6(t.datastore),r=t.Ca(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(l=>{t.xa(l)}))}).catch(i=>{t.xa(i)})}))}Ca(t){try{const e=this.updateFunction(t);return!$d(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!p(e)}return!1}}class J6{constructor(t,e,r,i){var l=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Pi.UNAUTHENTICATED,this.clientId=fA.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,be.Z)(function*(f){He("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(He("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var t=this;return(0,be.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=o0(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function A2(n,t){return mP.apply(this,arguments)}function mP(){return(mP=(0,be.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(l){r.isEqual(l)||(yield YL(t.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function S2(n,t){return _P.apply(this,arguments)}function _P(){return(_P=(0,be.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield yP(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>h2(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>h2(t.remoteStore,l)),n.onlineComponents=t})).apply(this,arguments)}function yP(n){return vP.apply(this,arguments)}function vP(){return(vP=(0,be.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield A2(n,new T2)),n.offlineComponents})).apply(this,arguments)}function tS(n){return bP.apply(this,arguments)}function bP(){return(bP=(0,be.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield S2(n,new gP)),n.onlineComponents})).apply(this,arguments)}function N2(n){return yP(n).then(t=>t.persistence)}function wP(n){return yP(n).then(t=>t.localStore)}function x2(n){return tS(n).then(t=>t.remoteStore)}function CP(n){return tS(n).then(t=>t.syncEngine)}function c0(n){return EP.apply(this,arguments)}function EP(){return(EP=(0,be.Z)(function*(n){const t=yield tS(n),e=t.eventManager;return e.onListen=N6.bind(null,t.syncEngine),e.onUnlisten=x6.bind(null,t.syncEngine),e})).apply(this,arguments)}function M2(n,t,e={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,l,d,f,m){const b=new eS({next:A=>{l.enqueueAndForget(()=>Uk(i,T));const M=A.docs.has(d);!M&&A.fromCache?m.reject(new Pe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&A.fromCache&&f&&"server"===f.source?m.reject(new Pe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new jk(pl(d.path),b,{includeMetadataChanges:!0,Cu:!0});return Vk(i,T)}(yield c0(n),n.asyncQueue,t,e,r)})),r.promise}function R2(n,t,e={}){const r=new ci;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,l,d,f,m){const b=new eS({next:A=>{l.enqueueAndForget(()=>Uk(i,T)),A.fromCache&&"server"===f.source?m.reject(new Pe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new jk(d,b,{includeMetadataChanges:!0,Cu:!0});return Vk(i,T)}(yield c0(n),n.asyncQueue,t,e,r)})),r.promise}const k2=new Map;function TP(n,t,e){if(!e)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function P2(n,t,e,r){if(!0===t&&!0===r)throw new Pe(me.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function O2(n){if(!Ke.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F2(n){if(Ke.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ht()}function Dn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Pe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=nS(n);throw new Pe(me.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function L2(n,t){if(t<=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class V2{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Pe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,P2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class BC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V2({}),this._settingsFrozen=!1,t instanceof hi?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hi(i.options.projectId)}(t))}get app(){if(!this._app)throw new Pe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V2(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new dA;switch(e.type){case"gapi":const r=e.client;return Lt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Nv(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Pe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=k2.get(t);e&&(He("ComponentProvider","Removing Datastore"),k2.delete(t),e.terminate())}(this),Promise.resolve()}}class Ir{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ir(this.firestore,t,this._key)}}class Bs{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Bs(this.firestore,t,this._query)}}class bc extends Bs{constructor(t,e,r){super(t,e,pl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ir(this.firestore,null,new Ke(t))}withConverter(t){return new bc(this.firestore,t,this._path)}}function B2(n,t,...e){if(n=(0,L.m9)(n),TP("collection","path",t),n instanceof BC){const r=En.fromString(t,...e);return F2(r),new bc(n,null,r)}{if(!(n instanceof Ir||n instanceof bc))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(t,...e));return F2(r),new bc(n.firestore,null,r)}}function rS(n,t,...e){if(n=(0,L.m9)(n),1===arguments.length&&(t=fA.R()),TP("doc","path",t),n instanceof BC){const r=En.fromString(t,...e);return O2(r),new Ir(n,null,new Ke(r))}{if(!(n instanceof Ir||n instanceof bc))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(t,...e));return O2(r),new Ir(n.firestore,n instanceof bc?n.converter:null,new Ke(r))}}function U2(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),(n instanceof Ir||n instanceof bc)&&(t instanceof Ir||t instanceof bc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function $2(n,t){return n=(0,L.m9)(n),t=(0,L.m9)(t),n instanceof Bs&&t instanceof Bs&&n.firestore===t.firestore&&km(n._query,t._query)&&n.converter===t.converter}class lH{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new vk(this,"async_queue_retry"),this.qa=()=>{const e=JA();e&&He("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=JA();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=JA();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new ci;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,be.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!Fm(e))throw e;He("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{throw this.$a=r,this.Ba=!1,Or("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=e,e}enqueueAfterDelay(t,e,r){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const i=Lk.createAndSchedule(this,t,e,r,l=>this.ja(l));return this.Fa.push(i),i}Ka(){this.$a&&ht()}verifyOperationInProgress(){}Wa(){var t=this;return(0,be.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function DP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class uH{constructor(){this._progressObserver={},this._taskCompletionResolver=new ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Lr extends BC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new lH,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||H2(this),this._firestoreClient.terminate()}}function Ci(n){return n._firestoreClient||H2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function H2(n){var t;const e=n._freezeSettings(),r=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new xR(n._databaseId,l,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new J6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function j2(n,t,e){const r=new ci;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield A2(n,e),yield S2(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function G2(n){if(n._initialized||n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Pe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class wc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wc(di.fromBase64String(t))}catch(e){throw new Pe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new wc(di.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class qm{constructor(t){this._methodName=t}}class iS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Pe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Pe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Jt(this._lat,t._lat)||Jt(this._long,t._long)}}const vH=/^__.*__$/;class bH{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new Qf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Om(t,this.data,e,this.fieldTransforms)}}class q2{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Qf(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function W2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class sS{constructor(t,e,r,i,l,d){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new sS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return lS(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(W2(this.Xa)&&vH.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class wH{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||FC(t)}ac(t,e,r,i=!1){return new sS({Xa:t,methodName:e,uc:r,path:wi.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Wm(n){const t=n._freezeSettings(),e=FC(n._databaseId);return new wH(n._databaseId,!!t.ignoreUndefinedProperties,e)}function oS(n,t,e,r,i,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,t,e,i);NP("Data must be an object, but it was:",d,r);const f=Y2(r,d);let m,b;if(l.merge)m=new Im(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const T=[];for(const A of l.mergeFields){const M=xP(t,A,e);if(!d.contains(M))throw new Pe(me.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);J2(T,M)||T.push(M)}m=new Im(T),b=d.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,b=d.fieldTransforms;return new bH(new Oi(f),m,b)}class UC extends qm{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof UC}}function Z2(n,t,e){return new sS({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class IP extends qm{_toFieldTransform(t){return new Pm(t.path,new Zd)}isEqual(t){return t instanceof IP}}class CH extends qm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=Z2(this,t,!0),r=this.cc.map(l=>Zm(l,e)),i=new uu(r);return new Pm(t.path,i)}isEqual(t){return this===t}}class EH extends qm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=Z2(this,t,!0),r=this.cc.map(l=>Zm(l,e)),i=new zd(r);return new Pm(t.path,i)}isEqual(t){return this===t}}class TH extends qm{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new Go(t.M,PA(t.M,this.hc));return new Pm(t.path,e)}isEqual(t){return this===t}}function AP(n,t,e,r){const i=n.ac(1,t,e);NP("Data must be an object, but it was:",i,r);const l=[],d=Oi.empty();jf(r,(m,b)=>{const T=aS(t,m,e);b=(0,L.m9)(b);const A=i.sc(T);if(b instanceof UC)l.push(T);else{const M=Zm(b,A);null!=M&&(l.push(T),d.set(T,M))}});const f=new Im(l);return new q2(d,f,i.fieldTransforms)}function SP(n,t,e,r,i,l){const d=n.ac(1,t,e),f=[xP(t,r,e)],m=[i];if(l.length%2!=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<l.length;M+=2)f.push(xP(t,l[M])),m.push(l[M+1]);const b=[],T=Oi.empty();for(let M=f.length-1;M>=0;--M)if(!J2(b,f[M])){const O=f[M];let G=m[M];G=(0,L.m9)(G);const ie=d.sc(O);if(G instanceof UC)b.push(O);else{const _e=Zm(G,ie);null!=_e&&(b.push(O),T.set(O,_e))}}const A=new Im(b);return new q2(T,A,d.fieldTransforms)}function z2(n,t,e,r=!1){return Zm(e,n.ac(r?4:3,t))}function Zm(n,t){if(K2(n=(0,L.m9)(n)))return NP("Unsupported field value:",t,n),Y2(n,t);if(n instanceof qm)return function(e,r){if(!W2(r.Xa))throw r.rc(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,r){const i=[];let l=0;for(const d of e){let f=Zm(d,r.ic(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,L.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return PA(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=qr.fromDate(e);return{timestampValue:TC(r.M,i)}}if(e instanceof qr){const i=new qr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:TC(r.M,i)}}if(e instanceof iS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wc)return{bytesValue:aL(r.M,e._byteString)};if(e instanceof Ir){const i=r.databaseId,l=e.firestore._databaseId;if(!l.isEqual(i))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:WR(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.rc(`Unsupported field value: ${nS(e)}`)}(n,t)}function Y2(n,t){const e={};return pA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jf(n,(r,i)=>{const l=Zm(i,t.tc(r));null!=l&&(e[r]=l)}),{mapValue:{fields:e}}}function K2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qr||n instanceof iS||n instanceof wc||n instanceof Ir||n instanceof qm)}function NP(n,t,e){if(!K2(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=nS(e);throw t.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function xP(n,t,e){if((t=(0,L.m9)(t))instanceof Jd)return t._internalPath;if("string"==typeof t)return aS(n,t);throw lS("Field path arguments must be of type string or ",n,!1,void 0,e)}const DH=new RegExp("[~\\*/\\[\\]]");function aS(n,t,e){if(t.search(DH)>=0)throw lS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Jd(...t.split("."))._internalPath}catch(r){throw lS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function lS(n,t,e,r,i){const l=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${r}`),d&&(m+=` in document ${i}`),m+=")"),new Pe(me.INVALID_ARGUMENT,f+n+m)}function J2(n,t){return n.some(e=>e.isEqual(t))}class $C{constructor(t,e,r,i,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new IH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(uS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class IH extends $C{data(){return super.data()}}function uS(n,t){return"string"==typeof t?aS(n,t):t instanceof Jd?t._internalPath:t._delegate._internalPath}class zm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qd extends $C{constructor(t,e,r,i,l,d){super(t,e,r,i,d),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new HC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(uS("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class HC extends Qd{data(t={}){return super.data(t)}}class sp{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new zm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new HC(this._firestore,this._userDataWriter,r.key,r,new zm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Pe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new HC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new zm(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new HC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new zm(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==d.type&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:AH(d.type),doc:f,oldIndex:m,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function AH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function Q2(n,t){return n instanceof Qd&&t instanceof Qd?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof sp&&t instanceof sp&&n._firestore===t._firestore&&$2(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function X2(n){if(Bv(n)&&0===n.explicitOrderBy.length)throw new Pe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jC{}function op(n,...t){for(const e of t)n=e._apply(n);return n}class SH extends jC{constructor(t,e,r){super(),this.lc=t,this.fc=e,this.dc=r,this.type="where"}_apply(t){const e=Wm(t.firestore),r=function(i,l,d,f,m,b,T){let A;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){sV(T,b);const O=[];for(const G of T)O.push(iV(f,i,G));A={arrayValue:{values:O}}}else A=iV(f,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||sV(T,b),A=z2(d,"where",T,"in"===b||"not-in"===b);const M=Zr.create(m,b,A);return function(O,G){if(G.S()){const _e=_C(O);if(null!==_e&&!_e.isEqual(G.field))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_e.toString()}' and '${G.field.toString()}'`);const $e=mC(O);null!==$e&&oV(0,G.field,$e)}const ie=function(_e,$e){for(const qe of _e.filters)if($e.indexOf(qe.op)>=0)return qe.op;return null}(O,function(_e){switch(_e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==ie)throw new Pe(me.INVALID_ARGUMENT,ie===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${ie.toString()}' filters.`)}(i,M),M}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new Bs(t.firestore,t.converter,function(i,l){const d=i.filters.concat([l]);return new au(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class xH extends jC{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(r,i,l){if(null!==r.startAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new zf(i,l);return function(f,m){if(null===mC(f)){const b=_C(f);null!==b&&oV(0,b,m.field)}}(r,d),d}(t._query,this.lc,this._c);return new Bs(t.firestore,t.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new au(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class eV extends jC{constructor(t,e,r){super(),this.type=t,this.wc=e,this.mc=r}_apply(t){return new Bs(t.firestore,t.converter,yC(t._query,this.wc,this.mc))}}class tV extends jC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=rV(t,this.type,this.gc,this.yc);return new Bs(t.firestore,t.converter,(i=e,new au((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class nV extends jC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=rV(t,this.type,this.gc,this.yc);return new Bs(t.firestore,t.converter,(i=e,new au((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function rV(n,t,e,r){if(e[0]=(0,L.m9)(e[0]),e[0]instanceof $C)return function(i,l,d,f,m){if(!f)throw new Pe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const T of Kf(i))if(T.field.isKeyField())b.push(qf(l,f.key));else{const A=f.data.field(T.field);if(gC(A))throw new Pe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const M=T.field.canonicalString();throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}b.push(A)}return new _c(b,m)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=Wm(n.firestore);return function(l,d,f,m,b,T){const A=l.explicitOrderBy;if(b.length>A.length)throw new Pe(me.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let O=0;O<b.length;O++){const G=b[O];if(A[O].field.isKeyField()){if("string"!=typeof G)throw new Pe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof G}`);if(!Rm(l)&&-1!==G.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${G}' contains a slash.`);const ie=l.path.child(En.fromString(G));if(!Ke.isDocumentKey(ie))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ie}' is not because it contains an odd number of segments.`);const _e=new Ke(ie);M.push(qf(d,_e))}else{const ie=z2(f,m,G);M.push(ie)}}return new _c(M,T)}(n._query,n.firestore._databaseId,i,t,e,r)}}function iV(n,t,e){if("string"==typeof(e=(0,L.m9)(e))){if(""===e)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rm(t)&&-1!==e.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(En.fromString(e));if(!Ke.isDocumentKey(r))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qf(n,new Ke(r))}if(e instanceof Ir)return qf(n,e._key);throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nS(e)}.`)}function sV(n,t){if(!Array.isArray(n)||0===n.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function oV(n,t,e){if(!e.isEqual(t))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class MP{convertValue(t,e="none"){switch(Hd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ud(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ht()}}convertObject(t,e){const r={};return jf(t.fields,(i,l)=>{r[i]=this.convertValue(l,e)}),r}convertGeoPoint(t){return new iS(Wr(t.latitude),Wr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=gA(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Am(t));default:return null}}convertTimestamp(t){const e=Bd(t);return new qr(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=En.fromString(t);Lt(_L(r));const i=new hi(r.get(1),r.get(3)),l=new Ke(r.popFirst(5));return i.isEqual(e)||Or(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function cS(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class VH extends MP{constructor(t){super(),this.firestore=t}convertBytes(t){return new wc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ir(this.firestore,null,e)}}class aV{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Wm(t)}set(t,e,r){this._verifyNotCommitted();const i=ap(t,this._firestore),l=cS(i.converter,e,r),d=oS(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,fi.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const l=ap(t,this._firestore);let d;return d="string"==typeof(e=(0,L.m9)(e))||e instanceof Jd?SP(this._dataReader,"WriteBatch.update",l._key,e,r,i):AP(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(d.toMutation(l._key,fi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ap(t,this._firestore);return this._mutations=this._mutations.concat(new s(e._key,fi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ap(n,t){if((n=(0,L.m9)(n)).firestore!==t)throw new Pe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ym extends MP{constructor(t){super(),this.firestore=t}convertBytes(t){return new wc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ir(this.firestore,null,e)}}function lV(n,t,e){n=Dn(n,Ir);const r=Dn(n.firestore,Lr),i=cS(n.converter,t,e);return d0(r,[oS(Wm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,fi.none())])}function uV(n,t,e,...r){n=Dn(n,Ir);const i=Dn(n.firestore,Lr),l=Wm(i);let d;return d="string"==typeof(t=(0,L.m9)(t))||t instanceof Jd?SP(l,"updateDoc",n._key,t,e,r):AP(l,"updateDoc",n._key,t),d0(i,[d.toMutation(n._key,fi.exists(!0))])}function cV(n,...t){var e,r,i;n=(0,L.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof t[d]||DP(t[d])||(l=t[d],d++);const f={includeMetadataChanges:l.includeMetadataChanges};if(DP(t[d])){const A=t[d];t[d]=null===(e=A.next)||void 0===e?void 0:e.bind(A),t[d+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),t[d+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,b,T;if(n instanceof Ir)b=Dn(n.firestore,Lr),T=pl(n._key.path),m={next:A=>{t[d]&&t[d](RP(b,n,A))},error:t[d+1],complete:t[d+2]};else{const A=Dn(n,Bs);b=Dn(A.firestore,Lr),T=A._query;const M=new Ym(b);m={next:O=>{t[d]&&t[d](new sp(b,M,A,O))},error:t[d+1],complete:t[d+2]},X2(n._query)}return function(A,M,O,G){const ie=new eS(G),_e=new jk(M,ie,O);return A.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Vk(yield c0(A),_e)})),()=>{ie.Ia(),A.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Uk(yield c0(A),_e)}))}}(Ci(b),T,f,m)}function d0(n,t){return function(e,r){const i=new ci;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,t,e){return zk.apply(this,arguments)}(yield CP(e),r,i)})),i.promise}(Ci(n),t)}function RP(n,t,e){const r=e.docs.get(t._key),i=new Ym(n);return new Qd(n,i,t._key,r,new zm(e.hasPendingWrites,e.fromCache),t.converter)}class zH extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Wm(t)}get(t){const e=ap(t,this._firestore),r=new VH(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return ht();const l=i[0];if(l.isFoundDocument())return new $C(this._firestore,r,l.key,l,e.converter);if(l.isNoDocument())return new $C(this._firestore,r,e._key,null,e.converter);throw ht()})}set(t,e,r){const i=ap(t,this._firestore),l=cS(i.converter,e,r),d=oS(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(t,e,r,...i){const l=ap(t,this._firestore);let d;return d="string"==typeof(e=(0,L.m9)(e))||e instanceof Jd?SP(this._dataReader,"Transaction.update",l._key,e,r,i):AP(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,d),this}delete(t){const e=ap(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=ap(t,this._firestore),r=new Ym(this._firestore);return super.get(t).then(i=>new Qd(this._firestore,r,e._key,i._document,new zm(!1,!1),e.converter))}}function kP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function hV(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function fV(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Hf=Os.SDK_VERSION,(0,Os._registerComponent)(new Ro.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),l=new Lr(i,new fC(e.getProvider("auth-internal")),new pC(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC")),(0,Os.registerVersion)(lA,"3.4.8",n),(0,Os.registerVersion)(lA,"3.4.8","esm2017")}();class GC{constructor(t){this._delegate=t}static fromBase64String(t){return fV(),new GC(wc.fromBase64String(t))}static fromUint8Array(t){return hV(),new GC(wc.fromUint8Array(t))}toBase64(){return fV(),this._delegate.toBase64()}toUint8Array(){return hV(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PP(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class ij{enableIndexedDbPersistence(t,e){return function(n,t){G2(n=Dn(n,Lr));const e=Ci(n),r=n._freezeSettings(),i=new gP;return j2(e,i,new D2(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){G2(n=Dn(n,Lr));const t=Ci(n),e=n._freezeSettings(),r=new gP;return j2(t,r,new Z6(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(e=(0,be.Z)(function*(r){if(!hu.vt())return Promise.resolve();const i=r+"main";yield hu.delete(i)}),function(r){return e.apply(this,arguments)})(ak(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class pV{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof hi||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Fr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const l=(n=Dn(n,BC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&Fr("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Pi.MOCK_USER;else{d=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Pe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Pi(m)}n._authCredentials=new hC(new gc(d,f))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const t=yield N2(n),e=yield x2(n);return t.setNetworkEnabled(!0),function(r){const i=Xe(r);return i.fu.delete(0),LC(i)}(e)}))}(Ci(n=Dn(n,Lr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const t=yield N2(n),e=yield x2(n);return t.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const l=Xe(i);l.fu.add(0),yield n0(l),l.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(Ci(n=Dn(n,Lr)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,P2("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new ci;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(n,t){return Xk.apply(this,arguments)}(yield CP(t),e)})),e.promise}(Ci(n=Dn(n,Lr)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new eS(t);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield c0(n),i=e,Xe(r).Eu.add(i),void i.next();var r,i})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield c0(n),i=e,void Xe(r).Eu.delete(i);var r,i}))}}(Ci(n=Dn(n,Lr)),DP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new h0(this,B2(this._delegate,t))}catch(e){throw uo(e,"collection()","Firestore.collection()")}}doc(t){try{return new ml(this,rS(this._delegate,t))}catch(e){throw uo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new co(this,function(n,t){if(n=Dn(n,BC),TP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bs(n,null,(e=t,new au(En.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw uo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new ci;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const r=yield(i=n,tS(i).then(l=>l.datastore));var i;new K6(n.asyncQueue,r,t,e).run()})),e.promise}(Ci(n=Dn(n,Lr)),e=>t(new zH(n,e)))}(this._delegate,e=>t(new gV(this,e)))}batch(){return Ci(this._delegate),new mV(new aV(this._delegate,t=>d0(this._delegate,t)))}loadBundle(t){return function(n,t){const e=Ci(n=Dn(n,Lr)),r=new uH;return function(n,t,e,r){const i=function(l,d){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,m=function(m,b){if(m instanceof Uint8Array)return I2(m,b);if(m instanceof ArrayBuffer)return I2(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new z6(m,d);var m}(e,FC(t));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function(n,t,e){const r=Xe(n);var i;(i=(0,be.Z)(function*(l,d,f){try{const m=yield d.getMetadata();if(yield function(M,O){const G=Xe(M),ie=ts(O.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",_e=>G._s.getBundleMetadata(_e,O.id)).then(_e=>!!_e&&_e.createTime.compareTo(ie)>=0)}(l.localStore,m))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(M=m).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);f._updateProgress(g2(m));const b=new D6(m,l.localStore,d.M);let T=yield d.da();for(;T;){const M=yield b.ku(T);M&&f._updateProgress(M),T=yield d.da()}const A=yield b.complete();return yield Kd(l,A.Fu,void 0),yield function(M,O){const G=Xe(M);return G.persistence.runTransaction("Save bundle","readwrite",ie=>G._s.saveBundleMetadata(ie,O))}(l.localStore,m),f._completeWith(A.progress),Promise.resolve(A.Ou)}catch(m){return Fr("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var M}),function(l,d,f){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield CP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(e,r){const i=Xe(e);return i.persistence.runTransaction("Get named query","readonly",l=>i._s.getNamedQuery(l,r))}(yield wP(n),t)}))}(Ci(n=Dn(n,Lr)),t).then(e=>e?new Bs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new co(this,e):null)}}class dS extends MP{constructor(t){super(),this.firestore=t}convertBytes(t){return new GC(new wc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return ml.forKey(e,this.firestore,null)}}class gV{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new dS(t)}get(t){const e=Jm(t);return this._delegate.get(e).then(r=>new qC(this._firestore,new Qd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Jm(t);return r?(kP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Jm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Jm(t);return this._delegate.delete(e),this}}class mV{constructor(t){this._delegate=t}set(t,e,r){const i=Jm(t);return r?(kP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Jm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Jm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Km{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new HC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new WC(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Km.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let l=i.get(e);return l||(l=new Km(t,new dS(t),e),i.set(e,l)),l}}Km.INSTANCES=new WeakMap;class ml{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dS(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ml(e,new Ir(e._delegate,r,new Ke(t)))}static forKey(t,e,r){return new ml(e,new Ir(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new h0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new h0(this.firestore,B2(this._delegate,t))}catch(e){throw uo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,L.m9)(t))instanceof Ir&&U2(this._delegate,t)}set(t,e){e=kP("DocumentReference.set",e);try{return e?lV(this._delegate,t,e):lV(this._delegate,t)}catch(r){throw uo(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?uV(this._delegate,t):uV(this._delegate,t,e,...r)}catch(i){throw uo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return d0(Dn(n.firestore,Lr),[new s(n._key,fi.none())])}(this._delegate)}onSnapshot(...t){const e=_V(t),r=yV(t,i=>new qC(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cV(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Dn(n,Ir);const t=Dn(n.firestore,Lr),e=Ci(t),r=new Ym(t);return function(n,t){const e=new ci;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,l,d){try{const f=yield function(m,b){const T=Xe(m);return T.persistence.runTransaction("read document","readonly",A=>T.ci.Ls(A,b))}(i,l);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Pe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=o0(f,`Failed to get document '${l} from cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield wP(n),t,e);var r})),e.promise}(e,n._key).then(i=>new Qd(t,r,n._key,i,new zm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Dn(n,Ir);const t=Dn(n.firestore,Lr);return M2(Ci(t),n._key,{source:"server"}).then(e=>RP(t,n,e))}(this._delegate):function(n){n=Dn(n,Ir);const t=Dn(n.firestore,Lr);return M2(Ci(t),n._key).then(e=>RP(t,n,e))}(this._delegate),e.then(r=>new qC(this.firestore,new Qd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new ml(this.firestore,this._delegate.withConverter(t?Km.getInstance(this.firestore,t):null))}}function uo(n,t,e){return n.message=n.message.replace(t,e),n}function _V(n){for(const t of n)if("object"==typeof t&&!PP(t))return t;return{}}function yV(n,t){var e,r;let i;return i=PP(n[0])?n[0]:PP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(t(l))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new ml(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Q2(this._delegate,t._delegate)}}class WC extends qC{data(t){const e=this._delegate.data(t);return function(n,t){n||ht()}(void 0!==e),e}}class co{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dS(t)}where(t,e,r){try{return new co(this.firestore,op(this._delegate,function(n,t,e){const r=t,i=uS("where",n);return new SH(i,r,e)}(t,e,r)))}catch(i){throw uo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new co(this.firestore,op(this._delegate,function(n,t="asc"){const e=t,r=uS("orderBy",n);return new xH(r,e)}(t,e)))}catch(r){throw uo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new co(this.firestore,op(this._delegate,function(n){return L2("limit",n),new eV("limit",n,"F")}(t)))}catch(e){throw uo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new co(this.firestore,op(this._delegate,function(n){return L2("limitToLast",n),new eV("limitToLast",n,"L")}(t)))}catch(e){throw uo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new co(this.firestore,op(this._delegate,function(...n){return new tV("startAt",n,!0)}(...t)))}catch(e){throw uo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new co(this.firestore,op(this._delegate,function(...n){return new tV("startAfter",n,!1)}(...t)))}catch(e){throw uo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new co(this.firestore,op(this._delegate,function(...n){return new nV("endBefore",n,!1)}(...t)))}catch(e){throw uo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new co(this.firestore,op(this._delegate,function(...n){return new nV("endAt",n,!0)}(...t)))}catch(e){throw uo(e,"endAt()","Query.endAt()")}}isEqual(t){return $2(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Dn(n,Bs);const t=Dn(n.firestore,Lr),e=Ci(t),r=new Ym(t);return function(n,t){const e=new ci;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,l,d){try{const f=yield zA(i,l,!0),m=new y2(l,f.li),b=m.Gu(f.documents),T=m.applyChanges(b,!1);d.resolve(T.snapshot)}catch(f){const m=o0(f,`Failed to execute query '${l} against cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield wP(n),t,e);var r})),e.promise}(e,n._query).then(i=>new sp(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Dn(n,Bs);const t=Dn(n.firestore,Lr),e=Ci(t),r=new Ym(t);return R2(e,n._query,{source:"server"}).then(i=>new sp(t,r,n,i))}(this._delegate):function(n){n=Dn(n,Bs);const t=Dn(n.firestore,Lr),e=Ci(t),r=new Ym(t);return X2(n._query),R2(e,n._query).then(i=>new sp(t,r,n,i))}(this._delegate),e.then(r=>new OP(this.firestore,new sp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=_V(t),r=yV(t,i=>new OP(this.firestore,new sp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cV(this._delegate,e,r)}withConverter(t){return new co(this.firestore,this._delegate.withConverter(t?Km.getInstance(this.firestore,t):null))}}class oj{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new WC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class OP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new co(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new WC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new oj(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new WC(this._firestore,r))})}isEqual(t){return Q2(this._delegate,t._delegate)}}class h0 extends co{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ml(this.firestore,t):null}doc(t){try{return new ml(this.firestore,void 0===t?rS(this._delegate):rS(this._delegate,t))}catch(e){throw uo(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=Dn(n.firestore,Lr),r=rS(n),i=cS(n.converter,t);return d0(e,[oS(Wm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,fi.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new ml(this.firestore,e))}isEqual(t){return U2(this._delegate,t._delegate)}withConverter(t){return new h0(this.firestore,this._delegate.withConverter(t?Km.getInstance(this.firestore,t):null))}}function Jm(n){return Dn(n,Ir)}class FP{constructor(...t){this._delegate=new Jd(...t)}static documentId(){return new FP(wi.keyField().canonicalString())}isEqual(t){return(t=(0,L.m9)(t))instanceof Jd&&this._delegate._internalPath.isEqual(t._internalPath)}}class Qm{constructor(t){this._delegate=t}static serverTimestamp(){const t=new IP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Qm(t)}static delete(){const t=new UC("deleteField");return t._methodName="FieldValue.delete",new Qm(t)}static arrayUnion(...t){const e=function(...n){return new CH("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Qm(e)}static arrayRemove(...t){const e=function(...n){return new EH("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Qm(e)}static increment(t){const e=function(n){return new TH("increment",n)}(t);return e._methodName="FieldValue.increment",new Qm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const aj={Firestore:pV,GeoPoint:iS,Timestamp:qr,Blob:GC,Transaction:gV,WriteBatch:mV,DocumentReference:ml,DocumentSnapshot:qC,Query:co,QueryDocumentSnapshot:WC,QuerySnapshot:OP,CollectionReference:h0,FieldPath:FP,FieldValue:Qm,setLogLevel:function(n){!function(n){ru.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vV(n,t){return function(n,t=Yu.z){return new qn.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function LP(n,t){return vV(n,t).pipe((0,ut.U)(e=>({payload:e,type:"query"})))}function hS(n,t){return LP(n,t).pipe(ta(void 0),tm(),(0,ut.U)(([e,r])=>{const i=r.payload.docChanges(),l=i.map(d=>({type:d.type,payload:d}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const m=i.find(T=>T.doc.ref.isEqual(d.ref)),b=null==e?void 0:e.payload.docs.find(T=>T.ref.isEqual(d.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(d.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),l}))}function bV(n,t,e){return hS(n,e).pipe(Ua((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return VP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return VP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return VP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),t),[]),Ks(),(0,ut.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function VP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function wV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new Ro.wA("firestore-compat",e=>((t,e)=>new pV(t,e,new ij))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},aj)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(rb.Z);class CV{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=hS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ut.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(ta(void 0),tm(),Wn(([r,i])=>i.length>0||!r),(0,ut.U)(([r,i])=>i),wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ua((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=wV(t);return bV(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return LP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),wn.iC)}get(t){return(0,en.D)(this.query.get(t)).pipe(wn.iC)}add(t){return this.ref.add(t)}doc(t){return new EV(this.ref.doc(t),this.afs)}}class EV{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:l}=IV(r,e);return new CV(i,l,this.afs)}snapshotChanges(){return function(n,t){return vV(n,t).pipe(ta(void 0),tm(),(0,ut.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ut.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,en.D)(this.ref.get(t)).pipe(wn.iC)}}class pj{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?hS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Wn(e=>e.length>0),wn.iC):hS(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ua((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=wV(t);return bV(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return LP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),wn.iC)}get(t){return(0,en.D)(this.query.get(t)).pipe(wn.iC)}}const TV=new a.OlP("angularfire2.enableFirestorePersistence"),DV=new a.OlP("angularfire2.firestore.persistenceSettings"),gj=new a.OlP("angularfire2.firestore.settings"),mj=new a.OlP("angularfire2.firestore.use-emulator");function IV(n,t=(e=>e)){return{query:t(n),ref:n}}let AV=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A,M,O,G,ie,_e,$e,qe){this.schedulers=m;const it=(0,jr.on)(e,f,r),st=T;A&&d1(it,f,M,G,ie,_e,O,$e),[this.firestore,this.persistenceEnabled$]=(0,jr.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const Nt=f.runOutsideAngular(()=>it.firestore());if(l&&Nt.settings(l),st&&Nt.useEmulator(...st),i&&!uh(d)){const Wt=()=>{try{return(0,en.D)(Nt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Yr){return"undefined"!=typeof console&&console.warn(Yr),(0,dt.of)(!1)}};return[Nt,f.runOutsideAngular(Wt)]}return[Nt,(0,dt.of)(!1)]},[l,st,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:d}=IV(i,r),f=this.schedulers.ngZone.run(()=>l);return new CV(f,d,this)}collectionGroup(e,r){const i=r||(d=>d),l=this.firestore.collectionGroup(e);return new pj(i(l),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new EV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(jr.Dh),a.LFG(jr.xv,8),a.LFG(TV,8),a.LFG(gj,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(wn.HU),a.LFG(DV,8),a.LFG(mj,8),a.LFG(Xg,8),a.LFG(Qy,8),a.LFG(Qg,8),a.LFG(l1,8),a.LFG(iI,8),a.LFG(u1,8),a.LFG(c1,8),a.LFG(Jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_j=(()=>{class n{constructor(){a1.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:TV,useValue:!0},{provide:DV,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[AV]}),n})(),yj=(()=>{class n{constructor(e,r,i,l){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=l,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,r){return this.afAuth.signInWithEmailAndPassword(e,r)}SignUp(e,r){return this.afAuth.createUserWithEmailAndPassword(e,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=e),null!==e}GoogleAuth(){return this.AuthLogin(new hI.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(AV),a.LFG(Xg),a.LFG(fs),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var vj=B(9105);function Cs(n,t,e,r){return(0,vj.m)(e)&&(r=e,e=void 0),r?Cs(n,t,e).pipe((0,ut.U)(i=>(0,Ns.k)(i)?r(...i):r(i))):new qn.y(i=>{SV(n,t,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,e)})}function SV(n,t,e,r,i){let l;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(t,e,i),l=()=>d.removeEventListener(t,e,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(t,e),l=()=>d.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(t,e),l=()=>d.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)SV(n[d],t,e,r,i)}r.add(l)}function Ej(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class Tj{call(t,e){return e.subscribe(new Dj(t))}}class Dj extends yh{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const l=Jn(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(l),this.add(l)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let l=this.subscriptions[i];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(e)}}var Ij=B(8640);new qn.y(Ij.Z);var fS=B(377);function pS(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,Ru.n)(n,void 0).lift(new Aj(t))}class Aj{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Sj(t,this.resultSelector))}}class Sj extends ar.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,Ns.k)(t)?e.push(new xj(t)):e.push("function"==typeof t[fS.hZ]?new Nj(t[fS.hZ]()):new Mj(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let d=0;d<e;d++){let f=t[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const l=[];for(let d=0;d<e;d++){let f=t[d],m=f.next();if(f.hasCompleted()&&(i=!0),m.done)return void r.complete();l.push(m.value)}this.resultSelector?this._tryresultSelector(l):r.next(l),i&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class Nj{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class xj{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[fS.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Mj extends Gi.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[fS.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Gi.ft)(this.observable,new Gi.IY(this))}}function Xr(n){return t=>t.lift(new kj(n))}class kj{constructor(t){this.notifier=t}call(t,e){const r=new Pj(t),i=(0,Gi.ft)(this.notifier,new Gi.IY(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class Pj extends Gi.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}B(1593);var $j=B(1555);function gS(n,t){return new qn.y(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let l=0,d=0;for(let f=0;f<r;f++){const m=(0,en.D)(n[f]);let b=!1;e.add(m.subscribe({next:T=>{b||(b=!0,d++),i[f]=T},error:T=>e.error(T),complete:()=>{l++,(l===r||!b)&&(d===r&&e.next(t?t.reduce((T,A,M)=>(T[A]=i[M],T),{}):i),e.complete())}}))}})}let PV=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),Xm=(()=>{class n extends PV{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const Es=new a.OlP("NgValueAccessor"),jj={provide:Es,useExisting:(0,a.Gpc)(()=>UP),multi:!0};let UP=(()=>{class n extends Xm{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[a._Bn([jj]),a.qOj]}),n})();const Gj={provide:Es,useExisting:(0,a.Gpc)(()=>mS),multi:!0},Wj=new a.OlP("CompositionEventMode");let mS=(()=>{class n extends PV{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(Wj,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&a.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[a._Bn([Gj]),a.qOj]}),n})();const Ts=new a.OlP("NgValidators"),up=new a.OlP("NgAsyncValidators");function GV(n){return null!=n}function qV(n){const t=(0,a.QGY)(n)?(0,en.D)(n):n;return(0,a.CqO)(t),t}function WV(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function ZV(n,t){return t.map(e=>e(n))}function zV(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function $P(n){return null!=n?function(n){if(!n)return null;const t=n.filter(GV);return 0==t.length?null:function(e){return WV(ZV(e,t))}}(zV(n)):null}function HP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(GV);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,Ns.k)(t))return gS(t,null);if((0,$j.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return gS(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return gS(n=1===n.length&&(0,Ns.k)(n[0])?n[0]:n,null).pipe((0,ut.U)(e=>t(...e)))}return gS(n,null)}(ZV(e,t).map(qV)).pipe((0,ut.U)(WV))}}(zV(n)):null}function JV(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function jP(n){return n?Array.isArray(n)?n:[n]:[]}function _S(n,t){return Array.isArray(n)?n.includes(t):n===t}function eB(n,t){const e=jP(t);return jP(n).forEach(i=>{_S(e,i)||e.push(i)}),e}function tB(n,t){return jP(t).filter(e=>!_S(n,e))}let nB=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$P(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n}),n})(),ho=(()=>{class n extends nB{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();class dp extends nB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let iB=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(dp,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[a.qOj]}),n})();function ZC(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(JV(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(JV(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();wS(t._rawValidators,i),wS(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&sB(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&sB(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function wS(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function sB(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ES(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const zC="VALID",TS="INVALID",f0="PENDING",YC="DISABLED";function YP(n){return(JP(n)?n.validators:n)||null}function lB(n){return Array.isArray(n)?$P(n):n||null}function KP(n,t){return(JP(t)?t.asyncValidators:n)||null}function uB(n){return Array.isArray(n)?HP(n):n||null}function JP(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class QP{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=lB(this._rawValidators),this._composedAsyncValidatorFn=uB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===zC}get invalid(){return this.status===TS}get pending(){return this.status==f0}get disabled(){return this.status===YC}get enabled(){return this.status!==YC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=lB(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=uB(t)}addValidators(t){this.setValidators(eB(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(eB(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(tB(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(tB(t,this._rawAsyncValidators))}hasValidator(t){return _S(this._rawValidators,t)}hasAsyncValidator(t){return _S(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=f0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=YC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zC||this.status===f0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?YC:zC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=f0,this._hasOwnPendingAsyncValidator=!0;const e=qV(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof XP?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof aG&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?YC:this.errors?TS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(f0)?f0:this._anyControlsHaveStatus(TS)?TS:zC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){JP(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class DS extends QP{constructor(t=null,e,r){super(YP(e),KP(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ES(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ES(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class XP extends QP{constructor(t,e,r){super(YP(e),KP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof DS?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,l)=>{r=e(r,i,l)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class aG extends QP{constructor(t,e,r){super(YP(e),KP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof DS?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const cG={provide:dp,useExisting:(0,a.Gpc)(()=>tO)},hB=(()=>Promise.resolve(null))();let tO=(()=>{class n extends dp{constructor(e,r,i,l){super(),this.control=new DS,this._registered=!1,this.update=new a.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(l=>{l.constructor===mS?e=l:function(n){return Object.getPrototypeOf(n.constructor)===Xm}(l)?r=l:i=l}),i||r||e||null}(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ZC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){hB.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;hB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(ho,9),a.Y36(Ts,10),a.Y36(up,10),a.Y36(Es,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([cG]),a.qOj,a.TTD]}),n})(),pB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const wG={provide:Es,useExisting:(0,a.Gpc)(()=>IS),multi:!0};function bB(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let IS=(()=>{class n extends Xm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const i=bB(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([wG]),a.qOj]}),n})(),oO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(bB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(IS,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const EG={provide:Es,useExisting:(0,a.Gpc)(()=>aO),multi:!0};function wB(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let aO=(()=>{class n extends Xm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(l=>this._getOptionId(l));r=(l,d)=>{l._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let d=0;d<l.length;d++){const f=l.item(d),m=this._getOptionValue(f.value);i.push(m)}}else{const l=r.options;for(let d=0;d<l.length;d++){const f=l.item(d);if(f.selected){const m=this._getOptionValue(f.value);i.push(m)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([EG]),a.qOj]}),n})(),lO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(wB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(wB(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(aO,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const AG={provide:Ts,useExisting:(0,a.Gpc)(()=>AS),multi:!0};let AS=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&a.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[a._Bn([AG])]}),n})(),MB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[pB]]}),n})(),RB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[MB]}),n})();const p0=["*"],b4=["dialog"];function hp(n){return null!=n}function m0(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const OB={animation:!0,transitionTimerDelayMs:5};let is=(()=>{class n{constructor(){this.animation=OB.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const R8=()=>{},{transitionTimerDelayMs:k8}=OB,QC=new Map,Fi=(n,t,e,r)=>{let i=r.context||{};const l=QC.get(t);if(l)switch(r.runningTransition){case"continue":return li.E;case"stop":n.run(()=>l.transition$.complete()),i=Object.assign(l.context,i),QC.delete(t)}const d=e(t,r.animation,i)||R8;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>d()),(0,dt.of)(void 0).pipe(function(n){return t=>new qn.y(e=>t.subscribe(d=>n.run(()=>e.next(d)),d=>n.run(()=>e.error(d)),()=>n.run(()=>e.complete())))}(n));const f=new Tn.xQ,m=new Tn.xQ,b=f.pipe(function(...n){return t=>qs(t,(0,dt.of)(...n))}(!0));QC.set(t,{transition$:f,complete:()=>{m.next(),m.complete()},context:i});const T=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const A=Cs(t,"transitionend").pipe(Xr(b),Wn(({target:O})=>O===t));(function(...n){if(1===n.length){if(!(0,Ns.k)(n[0]))return n[0];n=n[0]}return(0,Ru.n)(n,void 0).lift(new Tj)})(function(n=0,t,e){let r=-1;return(0,$_.k)(t)?r=Number(t)<1?1:Number(t):(0,Xo.K)(t)&&(e=t),(0,Xo.K)(e)||(e=Yu.P),new qn.y(i=>{const l=(0,$_.k)(n)?n:+n-e.now();return e.schedule(Ej,l,{index:0,period:r,subscriber:i})})}(T+k8).pipe(Xr(b)),A,m).pipe(Xr(b)).subscribe(()=>{QC.delete(t),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var pn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(pn||(pn={})),pn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const QB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function XB(n){const t=Array.from(n.querySelectorAll(QB)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const l=this.offsetParent(t);r=this.offset(t,!1),l!==document.documentElement&&(i=this.offset(l,!1)),i.top+=l.clientTop,i.left+=l.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let l={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(l.height=Math.round(l.height),l.width=Math.round(l.width),l.top=Math.round(l.top),l.bottom=Math.round(l.bottom),l.left=Math.round(l.left),l.right=Math.round(l.right)),l}positionElements(t,e,r,i){const[l="top",d="center"]=r.split("-"),f=i?this.offset(t,!1):this.position(t,!1),m=this.getAllStyles(e),b=parseFloat(m.marginTop),T=parseFloat(m.marginBottom),A=parseFloat(m.marginLeft),M=parseFloat(m.marginRight);let O=0,G=0;switch(l){case"top":O=f.top-(e.offsetHeight+b+T);break;case"bottom":O=f.top+f.height;break;case"left":G=f.left-(e.offsetWidth+A+M);break;case"right":G=f.left+f.width}switch(d){case"top":O=f.top;break;case"bottom":O=f.top+f.height-e.offsetHeight;break;case"left":G=f.left;break;case"right":G=f.left+f.width-e.offsetWidth;break;case"center":"top"===l||"bottom"===l?G=f.left+f.width/2-e.offsetWidth/2:O=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(G)}px, ${Math.round(O)}px)`;const ie=e.getBoundingClientRect(),_e=document.documentElement,$e=window.innerHeight||_e.clientHeight,qe=window.innerWidth||_e.clientWidth;return ie.left>=0&&ie.top>=0&&ie.right<=qe&&ie.bottom<=$e}},new Date(1882,10,12),new Date(2174,10,25);let wO=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(is))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(is))},token:n,providedIn:"root"}),n})();class i_{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const x5=()=>{};let pU=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):x5}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,l=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${l+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(de))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(de))},token:n,providedIn:"root"}),n})(),M5=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{Fi(this._zone,this._el.nativeElement,(e,r)=>{r&&m0(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Fi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(a.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),a.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class gU{close(t){}dismiss(t){}}class R5{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Tn.xQ,this._dismissed=new Tn.xQ,this._hidden=new Tn.xQ,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,d)=>{this._resolve=l,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Xr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Xr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,dt.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),pS(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var iE=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(iE||(iE={})),iE))();let k5=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new Tn.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Tn.xQ,this.hidden=new Tn.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=pS(Fi(this._zone,e,()=>e.classList.remove("show"),r),Fi(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};pS(Fi(this._zone,this._elRef.nativeElement,(l,d)=>{d&&m0(l),l.classList.add("show")},e),Fi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Cs(e,"keydown").pipe(Xr(this._closed$),Wn(i=>i.which===pn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(iE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Cs(this._dialogEl.nativeElement,"mousedown").pipe(Xr(this._closed$),(0,ur.b)(()=>r=!1),tr(()=>Cs(e,"mouseup").pipe(Xr(this._closed$),_i(1))),Wn(({target:i})=>e===i)).subscribe(()=>{r=!0}),Cs(e,"click").pipe(Xr(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(iE.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=XB(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Fi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(de),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&a.Gf(b4,7),2&e){let i;a.iGM(i=a.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(a.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),a.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),a.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:p0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(a.F$t(),a.TgZ(0,"div",0,1),a.TgZ(2,"div",2),a.Hsn(3),a.qZA(),a.qZA()),2&e&&a.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),mU=(()=>{class n{constructor(e,r,i,l,d,f){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=l,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new Tn.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=Cs(t,"focusin").pipe(Xr(e),(0,ut.U)(l=>l.target));Cs(t,"keydown").pipe(Xr(e),Wn(l=>l.which===pn.Tab),Lh(i)).subscribe(([l,d])=>{const[f,m]=XB(t);(d===f||d===t)&&l.shiftKey&&(m.focus(),l.preventDefault()),d===m&&!l.shiftKey&&(f.focus(),l.preventDefault())}),r&&Cs(t,"click").pipe(Xr(e),Lh(i),(0,ut.U)(l=>l[1])).subscribe(l=>l.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}open(e,r,i,l){const d=l.container instanceof HTMLElement?l.container:hp(l.container)?this._document.querySelector(l.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),m=this._scrollBar.compensate(),b=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);const T=new gU,A=this._getContentRef(e,l.injector||r,i,T,l);let M=!1!==l.backdrop?this._attachBackdrop(e,d):void 0,O=this._attachWindowComponent(e,d,A),G=new R5(O,A,M,l.beforeDismiss);return this._registerModalRef(G),this._registerWindowCmpt(O),G.result.then(m,m),G.result.then(b,b),T.close=ie=>{G.close(ie)},T.dismiss=ie=>{G.dismiss(ie)},this._applyWindowOptions(O.instance,l),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),M&&M.instance&&(this._applyBackdropOptions(M.instance,l),M.changeDetectorRef.detectChanges()),O.changeDetectorRef.detectChanges(),G}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let l=e.resolveComponentFactory(M5).create(this._injector);return this._applicationRef.attachView(l.hostView),r.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,r,i){let d=e.resolveComponentFactory(k5).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{hp(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{hp(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,l,d){return i?i instanceof a.Rgc?this._createFromTemplateRef(i,l):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,l,d):new i_([])}_createFromTemplateRef(e,r){const l=e.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(l),new i_([l.rootNodes],l)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new i_([[r]])}_createFromComponent(e,r,i,l,d){const f=e.resolveComponentFactory(i),m=a.zs3.create({providers:[{provide:gU,useValue:l}],parent:r}),b=f.create(m),T=b.location.nativeElement;return d.scrollable&&T.classList.add("component-host-scrollable"),this._applicationRef.attachView(b.hostView),new i_([[T]],b.hostView,b)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(de),a.LFG(pU),a.LFG(a.FYo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.z2F),a.LFG(a.gxx),a.LFG(de),a.LFG(pU),a.LFG(a.FYo),a.LFG(a.R0b))},token:n,providedIn:"root"}),n})(),_U=(()=>{class n{constructor(e,r,i,l){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=l}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(mU),a.LFG(wO))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a._Vd),a.LFG(a.gxx),a.LFG(mU),a.LFG(wO))},token:n,providedIn:"root"}),n})();new a.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});class qU{}class WU{}class Xd{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),l=i.toLowerCase(),d=e.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Xd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Xd;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Xd?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const l=t.value;if(l){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===l.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class _q{encodeKey(t){return ZU(t)}encodeValue(t){return ZU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const vq=/%(\d[a-f0-9])/gi,bq={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ZU(n){return encodeURIComponent(n).replace(vq,(t,e)=>{var r;return null!==(r=bq[e])&&void 0!==r?r:t})}function zU(n){return`${n}`}class pp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new _q,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[d,f]=-1==l?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,l)),t.decodeValue(i.slice(l+1))],m=e.get(d)||[];m.push(f),e.set(d,m)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(l=>{e.push({param:r,value:l,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new pp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(zU(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(zU(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class wq{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function YU(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function KU(n){return"undefined"!=typeof Blob&&n instanceof Blob}function JU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class sE{constructor(t,e,r,i){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new Xd),this.context||(this.context=new wq),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new pp,this.urlWithParams=e}serializeBody(){return null===this.body?null:YU(this.body)||KU(this.body)||JU(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof pp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||JU(this.body)?null:KU(this.body)?this.body.type||null:YU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof pp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,l=t.responseType||this.responseType,d=void 0!==t.body?t.body:this.body,f=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,m=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let b=t.headers||this.headers,T=t.params||this.params;const A=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(b=Object.keys(t.setHeaders).reduce((M,O)=>M.set(O,t.setHeaders[O]),b)),t.setParams&&(T=Object.keys(t.setParams).reduce((M,O)=>M.set(O,t.setParams[O]),T)),new sE(r,i,d,{params:T,headers:b,context:A,reportProgress:m,responseType:l,withCredentials:f})}}var Ei=(()=>((Ei=Ei||{})[Ei.Sent=0]="Sent",Ei[Ei.UploadProgress=1]="UploadProgress",Ei[Ei.ResponseHeader=2]="ResponseHeader",Ei[Ei.DownloadProgress=3]="DownloadProgress",Ei[Ei.Response=4]="Response",Ei[Ei.User=5]="User",Ei))();class IO{constructor(t,e=200,r="OK"){this.headers=t.headers||new Xd,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class AO extends IO{constructor(t={}){super(t),this.type=Ei.ResponseHeader}clone(t={}){return new AO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class US extends IO{constructor(t={}){super(t),this.type=Ei.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new US({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class QU extends IO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function SO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let XU=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let l;if(e instanceof sE)l=e;else{let m,b;m=i.headers instanceof Xd?i.headers:new Xd(i.headers),i.params&&(b=i.params instanceof pp?i.params:new pp({fromObject:i.params})),l=new sE(e,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=(0,dt.of)(l).pipe(Ou(m=>this.handler.handle(m)));if(e instanceof sE||"events"===i.observe)return d;const f=d.pipe(Wn(m=>m instanceof US));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe((0,ut.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,ut.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,ut.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));case"json":default:return f.pipe((0,ut.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new pp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,SO(i,r))}post(e,r,i={}){return this.request("POST",e,SO(i,r))}put(e,r,i={}){return this.request("PUT",e,SO(i,r))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(qU))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class e3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const t3=new a.OlP("HTTP_INTERCEPTORS");let Tq=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Dq=/^\)\]\}',?\n/;let n3=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new qn.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((O,G)=>i.setRequestHeader(O,G.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const O=e.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(e.responseType){const O=e.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const l=e.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const O=1223===i.status?204:i.status,G=i.statusText||"OK",ie=new Xd(i.getAllResponseHeaders()),_e=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return d=new AO({headers:ie,status:O,statusText:G,url:_e}),d},m=()=>{let{headers:O,status:G,statusText:ie,url:_e}=f(),$e=null;204!==G&&($e=void 0===i.response?i.responseText:i.response),0===G&&(G=$e?200:0);let qe=G>=200&&G<300;if("json"===e.responseType&&"string"==typeof $e){const it=$e;$e=$e.replace(Dq,"");try{$e=""!==$e?JSON.parse($e):null}catch(st){$e=it,qe&&(qe=!1,$e={error:st,text:$e})}}qe?(r.next(new US({body:$e,headers:O,status:G,statusText:ie,url:_e||void 0})),r.complete()):r.error(new QU({error:$e,headers:O,status:G,statusText:ie,url:_e||void 0}))},b=O=>{const{url:G}=f(),ie=new QU({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:G||void 0});r.error(ie)};let T=!1;const A=O=>{T||(r.next(f()),T=!0);let G={type:Ei.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(G.total=O.total),"text"===e.responseType&&!!i.responseText&&(G.partialText=i.responseText),r.next(G)},M=O=>{let G={type:Ei.UploadProgress,loaded:O.loaded};O.lengthComputable&&(G.total=O.total),r.next(G)};return i.addEventListener("load",m),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),e.reportProgress&&(i.addEventListener("progress",A),null!==l&&i.upload&&i.upload.addEventListener("progress",M)),i.send(l),r.next({type:Ei.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",m),i.removeEventListener("timeout",b),e.reportProgress&&(i.removeEventListener("progress",A),null!==l&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Rc))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const NO=new a.OlP("XSRF_COOKIE_NAME"),xO=new a.OlP("XSRF_HEADER_NAME");class r3{}let Aq=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ur(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(de),a.LFG(a.Lbi),a.LFG(NO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),MO=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(r3),a.LFG(xO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Sq=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(t3,[]);this.chain=r.reduceRight((i,l)=>new e3(i,l),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(WU),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Nq=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:MO,useClass:Tq}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:NO,useValue:e.cookieName}:[],e.headerName?{provide:xO,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[MO,{provide:t3,useExisting:MO,multi:!0},{provide:r3,useClass:Aq},{provide:NO,useValue:"XSRF-TOKEN"},{provide:xO,useValue:"X-XSRF-TOKEN"}]}),n})(),xq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[XU,{provide:qU,useClass:Sq},n3,{provide:WU,useExisting:n3}],imports:[[Nq.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const Mq=["modalLogin"],Rq=["modalConfiguracaoRobo"],kq=["modalBinanceApiKey"],Pq=["modalAlertaEntrada"];function Oq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",13),a.TgZ(1,"button",14),a.NdJ("click",function(){return a.CHM(e),a.oxw().novoSinal()}),a._uU(2,"Novo sinal"),a.qZA(),a.qZA()}}function Fq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().openModalConfiguracaoRobo()}),a._UZ(2,"i",16),a.qZA(),a.TgZ(3,"button",17),a.NdJ("click",function(){return a.CHM(e),a.oxw().AuthService.SignOut()}),a._UZ(4,"i",18),a.qZA(),a.qZA()}}function Lq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",30),a.TgZ(1,"div",31),a.TgZ(2,"input",32),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.valor=i}),a.qZA(),a.qZA(),a.TgZ(3,"div",31),a.TgZ(4,"input",33),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.descricao=i}),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(2),a.Q6J("ngModel",e.valor),a.xp6(2),a.Q6J("ngModel",e.descricao)}}function Vq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",19),a.TgZ(1,"div",20),a.TgZ(2,"label",21),a._uU(3,"Data"),a.qZA(),a.TgZ(4,"input",22),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.data=i}),a.qZA(),a.qZA(),a.TgZ(5,"div",20),a.TgZ(6,"label",21),a._uU(7,"Moeda"),a.qZA(),a.TgZ(8,"input",23),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.moeda=i}),a.qZA(),a.qZA(),a.TgZ(9,"div",20),a.TgZ(10,"label",21),a._uU(11,"Tipo"),a.qZA(),a.TgZ(12,"select",24),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.tipo=i}),a.TgZ(13,"option",25),a._uU(14,"LONG"),a.qZA(),a.TgZ(15,"option",26),a._uU(16,"SHORT"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",20),a.TgZ(18,"label",21),a._uU(19,"Entradas"),a.qZA(),a.YNc(20,Lq,5,2,"div",27),a.qZA(),a.TgZ(21,"div",20),a.TgZ(22,"button",28),a.NdJ("click",function(){return a.CHM(e),a.oxw().salvarEntrada()}),a._uU(23,"Salvar"),a.qZA(),a.TgZ(24,"button",29),a.NdJ("click",function(){return a.CHM(e),a.oxw().showFormNovoSinal=!1}),a._uU(25,"Cancelar"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngModel",e.sinalModel.data),a.xp6(4),a.Q6J("ngModel",e.sinalModel.moeda),a.xp6(4),a.Q6J("ngModel",e.sinalModel.tipo),a.xp6(8),a.Q6J("ngForOf",e.sinalModel.entradas)}}function Bq(n,t){1&n&&a._UZ(0,"i",52)}function Uq(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function $q(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",53),a.TgZ(1,"span",54),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function Hq(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function jq(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,Hq,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function Gq(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function qq(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.qZA(),a.YNc(4,Gq,2,1,"ng-container",3),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.Oqu(null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function Wq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,jq,5,2,"div",55),a.TgZ(2,"div"),a.TgZ(3,"i",56),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,qq,5,2,"div",55),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function Zq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",38),a.TgZ(1,"div",39),a.TgZ(2,"span",40),a.TgZ(3,"i",41),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"h5",42),a.YNc(5,Bq,1,0,"i",43),a.TgZ(6,"i",44),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"h5"),a.YNc(10,Uq,2,1,"span",3),a.qZA(),a.TgZ(11,"h6",45),a._uU(12),a.ALo(13,"date"),a.qZA(),a.YNc(14,$q,4,1,"div",46),a.TgZ(15,"div"),a.TgZ(16,"ul",47),a.YNc(17,Wq,8,5,"li",48),a.qZA(),a.qZA(),a.TgZ(18,"div"),a.TgZ(19,"span",40),a.TgZ(20,"button",49),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(21,"i",50),a.qZA(),a.TgZ(22,"button",17),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(23,"i",51),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(2),a.Q6J("ngIf",r.sinaisCompradosMap[e.id]),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),a.xp6(2),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(13,11,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function zq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"h3",34),a._uU(2),a.TgZ(3,"button",35),a.NdJ("click",function(){return a.CHM(e),a.MAs(5).classList.toggle("hidden")}),a.qZA(),a.qZA(),a.TgZ(4,"div",30,36),a.YNc(6,Zq,24,14,"div",37),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(2),a.hij("Favoritados (",e.sinaisPinnedList.length,") "),a.xp6(4),a.Q6J("ngForOf",e.sinaisPinnedList)}}function Yq(n,t){1&n&&a._UZ(0,"i",52)}function Kq(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function Jq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",53),a.TgZ(1,"span",54),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function Qq(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function Xq(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,Qq,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij(" ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function eW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function tW(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,eW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function nW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,Xq,5,2,"div",55),a.TgZ(2,"div"),a.TgZ(3,"i",56),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,tW,5,2,"div",55),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function rW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",61),a.TgZ(1,"div",39),a.TgZ(2,"span",40),a.TgZ(3,"i",41),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"h5",42),a.YNc(5,Yq,1,0,"i",43),a.TgZ(6,"i",44),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"h5"),a.YNc(10,Kq,2,1,"span",3),a.qZA(),a.TgZ(11,"h6",45),a._uU(12),a.ALo(13,"date"),a.qZA(),a.YNc(14,Jq,4,1,"div",46),a.TgZ(15,"div"),a.TgZ(16,"ul",47),a.YNc(17,nW,8,5,"li",48),a.qZA(),a.qZA(),a.TgZ(18,"div"),a.TgZ(19,"span",40),a.TgZ(20,"button",49),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(21,"i",50),a.qZA(),a.TgZ(22,"button",17),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(23,"i",51),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short")("id",e.id),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(2),a.Q6J("ngIf",r.sinaisCompradosMap[e.id]),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),a.xp6(2),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(13,12,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function iW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"h3",34),a._uU(2),a.TgZ(3,"button",35),a.NdJ("click",function(){return a.CHM(e),a.MAs(5).classList.toggle("hidden")}),a.qZA(),a.qZA(),a.TgZ(4,"div",30,59),a.YNc(6,rW,24,15,"div",60),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(2),a.hij("Sinais na entrada (",e.watchersEntradaList.length,") "),a.xp6(4),a.Q6J("ngForOf",e.watchersEntradaList)}}function sW(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function oW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",53),a.TgZ(1,"span",54),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function aW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function lW(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,aW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function uW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function cW(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,uW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function dW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,lW,5,2,"div",55),a.TgZ(2,"div"),a.TgZ(3,"i",56),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,cW,5,2,"div",55),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function hW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",38),a.TgZ(1,"div",39),a.TgZ(2,"span",40),a.TgZ(3,"i",41),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"i",44),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(5,"h5",42),a.TgZ(6,"strong"),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"h5"),a.YNc(9,sW,2,1,"span",3),a.qZA(),a.TgZ(10,"h6",45),a._uU(11),a.ALo(12,"date"),a.qZA(),a.YNc(13,oW,4,1,"div",46),a.TgZ(14,"div"),a.TgZ(15,"ul",47),a.YNc(16,dW,8,5,"li",48),a.qZA(),a.qZA(),a.TgZ(17,"div"),a.TgZ(18,"span",40),a.TgZ(19,"button",49),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(20,"i",50),a.qZA(),a.TgZ(21,"button",17),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(22,"i",51),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),a.xp6(3),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(12,10,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function fW(n,t){if(1&n&&(a.TgZ(0,"div",62),a.TgZ(1,"h3",34),a._uU(2,"Lista de Sinais"),a.qZA(),a.TgZ(3,"div",30),a.YNc(4,hW,23,13,"div",37),a.qZA(),a.qZA()),2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.sinaisList)}}function pW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",64),a._uU(2,"Sign In"),a.qZA(),a.qZA(),a.TgZ(3,"div",65),a.TgZ(4,"div",5),a.TgZ(5,"div",5),a.TgZ(6,"div",5,66),a.TgZ(8,"div",67),a._UZ(9,"input",68,69),a.qZA(),a.TgZ(11,"div",67),a.TgZ(12,"label"),a._uU(13,"Password"),a.qZA(),a.TgZ(14,"div",70),a.TgZ(15,"input",71,72),a.NdJ("keydown",function(i){const d=a.CHM(e).$implicit,f=a.MAs(10),m=a.MAs(16);return a.oxw().submitSeach(i,f.value,m.value,d)}),a.qZA(),a.TgZ(17,"div",73),a.TgZ(18,"span",74),a.NdJ("click",function(){a.CHM(e);const i=a.oxw();return i.showPassword=!i.showPassword}),a._UZ(19,"i",75),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"div",67),a.TgZ(21,"button",76),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.MAs(10),f=a.MAs(16);return a.oxw().sigin(d.value,f.value,l)}),a._uU(22,"Login"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(15),a.Q6J("type",e.showPassword?"text":"password"),a.xp6(4),a.Q6J("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function gW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",77),a._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),a.qZA(),a.TgZ(3,"button",78),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",79),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",65),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,66),a.TgZ(11,"div",67),a.TgZ(12,"label"),a._uU(13,"Valor entrada em USDT"),a.qZA(),a.TgZ(14,"input",80),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.valorEntradaUsdt=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",67),a.TgZ(16,"label"),a._uU(17,"M\xe1ximo de rob\xf4s ativos"),a.qZA(),a.TgZ(18,"input",81),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.maximoRobosAtivos=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",82),a.TgZ(20,"input",83),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.ativo=i}),a.qZA(),a.TgZ(21,"label",84),a._uU(22," Ativo "),a.qZA(),a.qZA(),a.TgZ(23,"div",67),a.TgZ(24,"button",76),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().salvarConfiguracacaoRobo(l)}),a._uU(25," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),a.xp6(4),a.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),a.xp6(2),a.Q6J("ngModel",e.configuracaoRobo.ativo)}}function mW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",77),a._uU(2,"Salvar Binace API KEY"),a.qZA(),a.TgZ(3,"button",78),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",79),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",65),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,66),a.TgZ(11,"div",67),a.TgZ(12,"label"),a._uU(13,"API KEY"),a.qZA(),a.TgZ(14,"input",85),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiKey=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",67),a.TgZ(16,"label"),a._uU(17,"API SECRET"),a.qZA(),a.TgZ(18,"input",85),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiSecret=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",67),a.TgZ(20,"button",76),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(21," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.binanceModel.apiKey),a.xp6(4),a.Q6J("ngModel",e.binanceModel.apiSecret)}}function _W(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"strong"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"td"),a.TgZ(5,"span",89),a.TgZ(6,"strong"),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"td"),a.TgZ(9,"button",90),a._uU(10," Comprar "),a.qZA(),a.TgZ(11,"button",91),a.NdJ("click",function(){const l=a.CHM(e).index;return a.oxw(2).removerAlerta(l)}),a._uU(12," excluir "),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(3),a.Oqu(e.sinal.moeda),a.xp6(2),a.Q6J("ngClass","LONG"===e.sinal.tipo?"text-success":"text-danger"),a.xp6(2),a.Oqu(e.sinal.tipo)}}function yW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",86),a._uU(2,"Alerta de entrada"),a.qZA(),a.TgZ(3,"button",78),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",79),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",65),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,66),a.TgZ(11,"table",87),a.YNc(12,_W,13,3,"tr",88),a.qZA(),a.TgZ(13,"div",67),a.TgZ(14,"button",76),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(15," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(12),a.Q6J("ngForOf",e.alertaEntradasList)}}Yp.extend($t);let vW=(()=>{class n{constructor(e,r,i,l,d){this.db=e,this.AuthService=r,this.modalService=i,this.config=l,this.http=d,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.sinaisList=[],this.sinaisMap={},this.coinCandleWatcherMap={},this.sinaisPinnedList=[],this.sinaisIDPinnedList=[],this.watchersEntradaList=[],this.sinaisBloqueadosList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.canSendNotification=!1,this._1second=1e3,this._5seconds=5*this._1second,this.sinaisCompradosMap={},this.editandoSinalIdx=-1,this.configuracaoRobo={id:null,valorEntradaUsdt:10,maximoRobosAtivos:10,ativo:!1,sinaisBloqueadosList:[]},this.binanceModel={apiKey:"",apiSecret:""},this.modalAberto=!1,this.alertaEntradasList=[],this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){"denied"===Notification.permission?Notification.requestPermission().then(e=>{this.canSendNotification="granted"===e}):"granted"===Notification.permission&&(this.canSendNotification=!0),setTimeout(()=>{this.AuthService.isLoggedIn?(this.startPriceWatcher(),this.loadSinaisList(),this.loadConfiguracaoRobo(),this.checkBinaceApiKey()):this.openModalLogin()},1e3)}startPriceWatcher(){const e=function(n=0,t=Yu.P){return(!(0,$_.k)(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=Yu.P),new qn.y(e=>(e.add(t.schedule(ca,n,{subscriber:e,counter:0,period:n})),e))}(this._5seconds);this.populatePriceCoinMap(),e.subscribe(r=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let i=[];r.forEach(d=>{this.PriceCoinMap[d.symbol]={price:d.price},i.push(d.symbol)});let l=this;i.sort(),i.forEach(d=>{l.PriceCoinList.push({symbol:d,price:this.PriceCoinMap[d].price})}),this.updatePricePositionOnSinais()})}updatePricePositionOnSinais(){this.sinaisList&&this.sinaisList.length>0&&(this.sinaisList.forEach((e,r)=>{let i=0;try{i=parseFloat(this.PriceCoinMap[e.moeda].price)}catch(l){}if(i){e.priceCoin=i;let l=-1,d=0;"LONG"===e.tipo?(d=(e.entradas[e.entradas.length-1].valor-e.entradas[0].valor)/100,e.priceCoinPercentage=i>e.entradas[0].valor?((i-e.entradas[0].valor)/d).toFixed(2):0):(d=(e.entradas[0].valor-e.entradas[e.entradas.length-1].valor)/100,e.priceCoinPercentage=i<e.entradas[0].valor?(100-(i-e.entradas[e.entradas.length-1].valor)/d).toFixed(2):0);for(let f=0;f<e.entradas.length;f++){let b=parseFloat(e.entradas[f].valor);if("LONG"===e.tipo){if(0==f||f===e.entradas.length-1){if(i<=b){l=f;break}if(f===e.entradas.length-1&&i>b){l=1e3;break}continue}if(i>=parseFloat(e.entradas[f-1].valor)&&i<=b){l=f;break}}else if("SHORT"===e.tipo){if(0==f||f===e.entradas.length-1){if(i>=b){l=f;break}if(f===e.entradas.length-1&&i<b){l=1e3;break}continue}if(i<=parseFloat(e.entradas[f-1].valor)&&i>=b){l=f;break}}}this.sinaisList[r].indexPricePosition=l;try{-1===this.sinaisBloqueadosList.indexOf(e.id)&&this.coinCandleWatcherMap[e.id].loadCandleList(e)}catch(f){}}}),this.sortWatcherList(),this.sortWatcherEntradaList())}sortWatcherEntradaList(){this.watchersEntradaList=[],this.sinaisList.forEach(r=>{r.indexPricePosition>=1&&this.watchersEntradaList.push(r)}),this.watchersEntradaList.sort((r,i)=>{let l=0;return l=r.indexPricePosition>0?r.indexPricePosition-i.indexPricePosition:-1,l||r.priceCoinPercentage-i.priceCoinPercentage})}castPrice(e){return parseFloat(e)}novoSinal(){let e=Yp().format("YYYY-MM-DD");this.editandoSinalIdx=-1,this.sinalModel={data:e,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let l=Object.assign({},this.entradaModel);l.descricao=r[i],this.sinalModel.entradas.push(l)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadSinaisComprados(){this.sinaisCompradosObservable=this.db.object("/sinais-comprados/"+this.AuthService.userData.uid).valueChanges(),this.sinaisCompradosObservable.subscribe(r=>{if(r){try{for(let l in r)if(!this.sinaisCompradosMap[l]){let d=this.sinaisMap[l];new Notification("Binace watcher",{body:`Sinal comprado ${d.moeda}::${d.tipo}`,icon:"/assets/bot.png"})}}catch(l){}this.sinaisCompradosMap=r}else this.sinaisCompradosMap={}})}loadSinaisList(){this.sinaisFirebaseObservable=this.db.list("/sinais").valueChanges(),this.sinaisFirebaseObservable.subscribe(e=>{this.sinaisList=e,this.sinaisList&&this.sinaisList.length>0&&this.sinaisList.forEach(r=>{if(this.sinaisMap[r.id]=r,this.coinCandleWatcherMap[r.id]=new VE(this.http,this),r.entradas&&r.entradas.length>0){let i=parseFloat(r.entradas[0].valor),l=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?i+(l-i)/4:i-(i-l)/4,r.sugestao){let d=r.entradas[r.entradas.length-1].valor,f=d.indexOf(".")-1,m=d.substr(f).length;r.sugestao=r.sugestao.toFixed(m)}}}),this.loadSinaisFavoritos(),this.updatePricePositionOnSinais()})}sortWatcherList(){this.sinaisList.sort((e,r)=>{let i=Yp(e.data).toDate().getTime(),l=Yp(r.data).toDate().getTime(),d=-10;i==l?d=0:i>l?d=-1:i<l&&(d=1);let f=e.moeda.localeCompare(r.moeda);return d||f})}salvarEntrada(){let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase().trim(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!this.PriceCoinMap[e.moeda])return void alert("Moeda inv\xe1lida");if(!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}updateEntrada(e){this.db.object("/sinais/"+e.id).set(e).then(()=>{})}editarSinal(e,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(e,r){var i=this;return(0,be.Z)(function*(){if(window.confirm("Realmente deseja excluir o sinal?")){try{i.coinCandleWatcherMap[e.id].stop(),delete i.coinCandleWatcherMap[e.id]}catch(l){}yield i.db.object("/sinais/"+e.id).remove()}})()}playAlert(){}toggleAlcancado(e,r){r.alcancado=!r.alcancado||!r.alcancado,this.updateEntrada(e)}togglePinWatcher(e){var r=this;return(0,be.Z)(function*(){let i=r.sinaisIDPinnedList.indexOf(e.id);if(i>-1){r.sinaisIDPinnedList.splice(i,1);for(let d=0;d<r.sinaisPinnedList.length;d++)if(r.sinaisPinnedList[d].id===e.id){r.sinaisPinnedList.splice(d,1);break}}else r.sinaisIDPinnedList.push(e.id),r.sinaisPinnedList.push(e);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.sinaisIDPinnedList).then(()=>{}).catch(d=>{console.error(d)})})()}loadSinaisFavoritos(){this.sinaisPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.sinaisIDPinnedList=r,this.sinaisIDPinnedList.forEach(i=>{this.sinaisList.forEach(l=>{l.id===i&&this.sinaisPinnedList.push(l)})}))})}toggleSinalBloqueado(e){var r=this;return(0,be.Z)(function*(){r.configuracaoRobo.sinaisBloqueadosList||(r.configuracaoRobo.sinaisBloqueadosList=[]);let i=r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id);i>-1?r.configuracaoRobo.sinaisBloqueadosList.splice(i,1):r.configuracaoRobo.sinaisBloqueadosList.push(e.id),yield r.salvarConfiguracacaoRobo()})()}copyEntry(e){this.canCopyClipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Entrada ${e} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(e=>{},e=>{})}sigin(e,r,i){this.AuthService.SignIn(e.trim(),r).then(()=>{this.startPriceWatcher(),this.loadSinaisList(),this.checkBinaceApiKey(),i&&i.close()}).catch(l=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(e,r,i,l){13==e.keyCode&&this.sigin(r,i,l)}signOut(){this.AuthService.SignOut()}submitForm(e,r){13==r.keyCode&&e.submit()}loadConfiguracaoRobo(){var e;this.sinaisPinnedList=[],this.configuracaoRoboObservable=this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).valueChanges(),null===(e=this.configuracaoRoboObservable)||void 0===e||e.subscribe(r=>{r&&(this.configuracaoRobo=r,this.configuracaoRobo.sinaisBloqueadosList?this.sinaisBloqueadosList=this.configuracaoRobo.sinaisBloqueadosList:(this.configuracaoRobo.sinaisBloqueadosList=[],this.configuracaoRobo.sinaisBloqueadosList=[]))})}openModalConfiguracaoRobo(){this.modalService.open(this.modalConfiguracaoRobo,{centered:!0}).result.then(e=>{},e=>{})}salvarConfiguracacaoRobo(e){var r=this;return(0,be.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}checkBinaceApiKey(){let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret");!e&&!r&&this.openModalBinanceApiKey()}openModalBinanceApiKey(){this.modalService.open(this.modalBinanceApiKey,{centered:!0}).result.then(e=>{e&&this.binanceModel.apiKey&&this.binanceModel.apiSecret&&(window.localStorage.setItem("apiKey",this.binanceModel.apiKey.trim()),window.localStorage.setItem("apiSecret",this.binanceModel.apiSecret.trim()),window.toastr.success("Chaves salvas!","Sucesso!"))},e=>{})}removerAlerta(e){this.alertaEntradasList.splice(e,1)}acionarAlerta(e){0===this.alertaEntradasList.filter(i=>i.id==e.id).length&&this.alertaEntradasList.splice(0,0,e),this.modalAberto||this.openModalAlertaEntrada()}openModalAlertaEntrada(){this.config.backdrop="static",this.config.keyboard=!1,this.modalAberto=!0,this.modalService.open(this.modalAlertaEntrada,{centered:!0}).result.then(e=>{this.modalAberto=!1},e=>{})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(LM),a.Y36(yj),a.Y36(_U),a.Y36(wO),a.Y36(XU))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(1&e&&(a.Gf(Mq,5),a.Gf(Rq,5),a.Gf(kq,5),a.Gf(Pq,5)),2&e){let i;a.iGM(i=a.CRH())&&(r.modalLogin=i.first),a.iGM(i=a.CRH())&&(r.modalConfiguracaoRobo=i.first),a.iGM(i=a.CRH())&&(r.modalBinanceApiKey=i.first),a.iGM(i=a.CRH())&&(r.modalAlertaEntrada=i.first)}},decls:19,vars:6,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,""],["class","col-md-8 col-lg-6",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["modalLogin",""],["modalConfiguracaoRobo",""],["modalBinanceApiKey",""],["modalAlertaEntrada",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-white",3,"click"],[1,"fa","fa-cogs","fa-2x"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-8","col-lg-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-white"],[1,"btn","bt-sm","btn-outline-secondary","fa","fa-chevron-up",3,"click"],["divPinnedList",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"float-right"],[1,"fa","clickable",3,"ngClass","click"],[1,"card-title"],["class","mr-2 fa fa-android text-success",4,"ngIf"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass","click"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],[1,"mr-2","fa","fa-android","text-success"],[1,"alert","alert-primary"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["divWatchersEntrada",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass","id",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass","id"],[1,"container","mt-4"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],[1,"fa",3,"ngClass"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"],["type","text","placeholder","","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","",1,"modal-title"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn","btn-button","btn-sm","btn-success"],[1,"btn","btn-button","btn-sm","btn-danger",3,"click"]],template:function(e,r){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.YNc(2,Oq,3,0,"div",2),a.YNc(3,Fq,5,0,"div",3),a.qZA(),a.qZA(),a.TgZ(4,"main",4),a.TgZ(5,"section",5),a.TgZ(6,"div",1),a.YNc(7,Vq,26,4,"div",6),a.qZA(),a.YNc(8,zq,7,2,"div",7),a.YNc(9,iW,7,2,"div",7),a.YNc(10,fW,5,1,"div",8),a.qZA(),a.YNc(11,pW,23,2,"ng-template",null,9,a.W1O),a.YNc(13,gW,26,3,"ng-template",null,10,a.W1O),a.YNc(15,mW,22,2,"ng-template",null,11,a.W1O),a.YNc(17,yW,16,1,"ng-template",null,12,a.W1O),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(1),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(4),a.Q6J("ngIf",r.showFormNovoSinal),a.xp6(1),a.Q6J("ngIf",r.sinaisPinnedList&&r.sinaisPinnedList.length>0),a.xp6(1),a.Q6J("ngIf",r.watchersEntradaList&&r.watchersEntradaList.length>0),a.xp6(1),a.Q6J("ngIf",r.sinaisList&&r.sinaisList.length>0))},directives:[Ar,mS,iB,tO,IS,oO,lO,zt,go,AS,UP],pipes:[mu],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.shake-element[_ngcontent-%COMP%]{animation:shake .5s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();class wW{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new CW(t,this.dueTime,this.scheduler))}}class CW extends ar.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(EW,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function EW(n){n.debouncedNext()}const i3="firebasestorage.googleapis.com",s3="storageBucket";class ti extends L.ZR{constructor(t,e){super(RO(t),`Firebase Storage: ${e} (${RO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ti.prototype)}_codeEquals(t){return RO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function RO(n){return"storage/"+n}function kO(){return new ti("unknown","An unknown error occurred, please check the error payload for server response.")}function o3(){return new ti("canceled","User canceled the upload/download.")}function a3(){return new ti("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function b0(n){return new ti("invalid-argument",n)}function l3(){return new ti("app-deleted","The Firebase app was deleted.")}function u3(n){return new ti("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oE(n,t){return new ti("invalid-format","String does not match format '"+n+"': "+t)}function aE(n){throw new ti("internal-error","Internal error: "+n)}class Us{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Us.makeFromUrl(t,e)}catch(i){return new Us(t,"")}if(""===r.path)return r;throw function(n){return new ti("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(st){st.path_=decodeURIComponent(st.path)}const A=e.replace(/[.]/g,"\\."),it=[{regex:f,indices:{bucket:1,path:3},postModify:function(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${e===i3?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let st=0;st<it.length;st++){const Nt=it[st],Wt=Nt.regex.exec(t);if(Wt){let ni=Wt[Nt.indices.path];ni||(ni=""),r=new Us(Wt[Nt.indices.bucket],ni),Nt.postModify(r);break}}if(null==r)throw function(n){return new ti("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class LW{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function $S(n){return"string"==typeof n||n instanceof String}function c3(n){return PO()&&n instanceof Blob}function PO(){return"undefined"!=typeof Blob}function OO(n,t,e,r){if(r<t)throw b0(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw b0(`Invalid value for '${n}'. Expected ${e} or less.`)}function eh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function d3(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var gp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(gp||(gp={})),gp))();class jW{constructor(t,e,r,i,l,d,f,m,b,T,A){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=T,this.connectionFactory_=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,O)=>{this.resolve_=M,this.reject_=O,this.start_()})}start_(){const e=(r,i)=>{const l=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(m)?l():l(m)}catch(m){d(m)}else if(null!==f){const m=kO();m.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,m):m)}else d(i.canceled?this.appDelete_?l3():o3():new ti("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new HS(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,i=null,l=null,d=!1,f=0;function m(){return 2===f}let b=!1;function T(..._e){b||(b=!0,t.apply(null,_e))}function A(_e){i=setTimeout(()=>{i=null,n(O,m())},_e)}function M(){l&&clearTimeout(l)}function O(_e,...$e){if(b)return void M();if(_e)return M(),void T.call(null,_e,...$e);if(m()||d)return M(),void T.call(null,_e,...$e);let it;r<64&&(r*=2),1===f?(f=2,it=0):it=1e3*(r+Math.random()),A(it)}let G=!1;function ie(_e){G||(G=!0,M(),!b&&(null!==i?(_e||(f=2),clearTimeout(i),A(0)):_e||(f=1)))}return A(0),l=setTimeout(()=>{d=!0,ie(!0)},e),ie}((r,i)=>{if(i)return void r(!1,new HS(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const f=l.getErrorCode()===gp.NO_ERROR,m=l.getStatus();if(!f||this.isRetryStatusCode_(m)){const T=l.getErrorCode()===gp.ABORT;return void r(!1,new HS(!1,null,T))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new HS(b,l))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),l=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||l}}class HS{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function KW(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(PO())return new Blob(n);throw new ti("unsupported-environment","This browser doesn't seem to support creating Blobs")}const wa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class FO{constructor(t,e){this.data=t,this.contentType=e||null}}function LO(n,t){switch(n){case wa.RAW:return new FO(h3(t));case wa.BASE64:case wa.BASE64URL:return new FO(f3(n,t));case wa.DATA_URL:return new FO(function(n){const t=new p3(n);return t.base64?f3(wa.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw oE(wa.DATA_URL,"Malformed data URL.")}return h3(t)}(t.rest)}(t),function(n){return new p3(n).contentType}(t))}throw kO()}function h3(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function f3(n,t){switch(n){case wa.BASE64:{const i=-1!==t.indexOf("-"),l=-1!==t.indexOf("_");if(i||l)throw oE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wa.BASE64URL:{const i=-1!==t.indexOf("+"),l=-1!==t.indexOf("/");if(i||l)throw oE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(i){throw oE(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class p3{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw oE(wa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class Cc{constructor(t,e){let r=0,i="";c3(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(c3(this.data_)){const i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new Cc(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new Cc(r,!0)}}static getBlob(...t){if(PO()){const e=t.map(r=>r instanceof Cc?r.data_:r);return new Cc(KW.apply(null,e))}{const e=t.map(d=>$S(d)?LO(wa.RAW,d).data:d.data_);let r=0;e.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let l=0;return e.forEach(d=>{for(let f=0;f<d.length;f++)i[l++]=d[f]}),new Cc(i,!0)}}uploadData(){return this.data_}}function VO(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function g3(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function sZ(n,t){return t}class fo{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||sZ}}let jS=null;function lE(){if(jS)return jS;const n=[];n.push(new fo("bucket")),n.push(new fo("generation")),n.push(new fo("metageneration")),n.push(new fo("name","fullPath",!0));const e=new fo("name");e.xform=function(l,d){return function(n){return!$S(n)||n.length<2?n:g3(n)}(d)},n.push(e);const i=new fo("size");return i.xform=function(l,d){return void 0!==d?Number(d):d},n.push(i),n.push(new fo("timeCreated")),n.push(new fo("updated")),n.push(new fo("md5Hash",null,!0)),n.push(new fo("cacheControl",null,!0)),n.push(new fo("contentDisposition",null,!0)),n.push(new fo("contentEncoding",null,!0)),n.push(new fo("contentLanguage",null,!0)),n.push(new fo("contentType",null,!0)),n.push(new fo("metadata","customMetadata",!0)),jS=n,jS}function m3(n,t,e){const r=VO(t);return null===r?null:function(n,t,e){const r={type:"file"},i=e.length;for(let l=0;l<i;l++){const d=e[l];r[d.local]=d.xform(r,t[d.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const l=new Us(n.bucket,n.fullPath);return t._makeStorageReference(l)}})}(r,n),r}(n,r,e)}function BO(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const l=t[i];l.writable&&(e[l.server]=n[l.local])}return JSON.stringify(e)}const _3="prefixes";class Ec{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Tc(n){if(!n)throw kO()}function GS(n,t){return function(r,i){const l=m3(n,i,t);return Tc(null!==l),l}}function w0(n){return function(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new ti("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ti("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new ti("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new ti("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function uE(n){const t=w0(n);return function(r,i){let l=t(r,i);return 404===r.getStatus()&&(l=function(n){return new ti("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function v3(n,t,e){const i=eh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Ec(i,"GET",GS(n,e),d);return f.errorHandler=uE(t),f}function pZ(n,t,e,r,i){const l={};l.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(l.delimiter=e),r&&(l.pageToken=r),i&&(l.maxResults=i);const f=eh(t.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,T=new Ec(f,"GET",function(n,t){return function(r,i){const l=function(n,t,e){const r=VO(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[_3])for(const i of e[_3]){const l=i.replace(/\/$/,""),d=n._makeStorageReference(new Us(t,l));r.prefixes.push(d)}if(e.items)for(const i of e.items){const l=n._makeStorageReference(new Us(t,i.name));r.items.push(l)}return r}(n,t,r)}(n,t,i);return Tc(null!==l),l}}(n,t.bucket),b);return T.urlParams=l,T.errorHandler=w0(t),T}function w3(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class qS{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function UO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Tc(!1)}return Tc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const CZ={STATE_CHANGED:"state_changed"},po={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $O(n){switch(n){case"running":case"pausing":case"canceling":return po.RUNNING;case"paused":return po.PAUSED;case"success":return po.SUCCESS;case"canceled":return po.CANCELED;case"error":default:return po.ERROR}}class EZ{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function C0(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class DZ extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw aE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw aE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw aE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw aE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw aE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function pu(){return new DZ}class D3{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=lE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d=w3(t,r,i),f={name:d.fullPath},m=eh(l,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},A=BO(d,e),G=new Ec(m,"POST",function(ie){let _e;UO(ie);try{_e=ie.getResponseHeader("X-Goog-Upload-URL")}catch($e){Tc(!1)}return Tc($S(_e)),_e},n.maxUploadRetryTime);return G.urlParams=f,G.headers=T,G.body=A,G.errorHandler=w0(t),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,pu,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function(n,t,e,r){const m=new Ec(e,"POST",function(b){const T=UO(b,["active","final"]);let A=null;try{A=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){Tc(!1)}A||Tc(!1);const M=Number(A);return Tc(!isNaN(M)),new qS(M,r.size(),"final"===T)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=w0(t),m}(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(i,pu,e,r);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new qS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let d;try{d=function(n,t,e,r,i,l,d,f){const m=new qS(0,0);if(d?(m.current=d.current,m.total=d.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw new ti("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=m.total-m.current;let T=b;i>0&&(T=Math.min(T,i));const A=m.current,G={"X-Goog-Upload-Command":T===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},ie=r.slice(A,A+T);if(null===ie)throw a3();const it=new Ec(e,"POST",function(st,Nt){const Wt=UO(st,["active","final"]),Yr=m.current+T,ni=r.size();let GO;return GO="final"===Wt?GS(t,l)(st,Nt):null,new qS(Yr,ni,"final"===Wt,GO)},t.maxUploadRetryTime);return it.headers=G,it.body=ie.uploadData(),it.progressCallback=f||null,it.errorHandler=w0(n),it}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(d,pu,i,l);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=v3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,pu,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},m=function(){let it="";for(let st=0;st<2;st++)it+=Math.random().toString().slice(2);return it}();d["Content-Type"]="multipart/related; boundary="+m;const b=w3(t,r,i),T=BO(b,e),O=Cc.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===O)throw a3();const G={name:b.fullPath},ie=eh(l,n.host,n._protocol),$e=n.maxUploadRetryTime,qe=new Ec(ie,"POST",GS(n,e),$e);return qe.urlParams=G,qe.headers=d,qe.body=O.uploadData(),qe.errorHandler=w0(t),qe}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,pu,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=o3(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=$O(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const l=new EZ(e||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch($O(this._state)){case po.SUCCESS:C0(this._resolve.bind(null,this.snapshot))();break;case po.CANCELED:case po.ERROR:C0(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch($O(this._state)){case po.RUNNING:case po.PAUSED:t.next&&C0(t.next.bind(t,this.snapshot))();break;case po.SUCCESS:t.complete&&C0(t.complete.bind(t))();break;case po.CANCELED:case po.ERROR:t.error&&C0(t.error.bind(t,this._error))();break;default:t.error&&C0(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class s_{constructor(t,e){this._service=t,this._location=e instanceof Us?e:Us.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new s_(t,e)}get root(){const t=new Us(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return g3(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Us(this._location.bucket,t);return new s_(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw u3(t)}}function A3(n,t,e){return HO.apply(this,arguments)}function HO(){return(HO=(0,be.Z)(function*(n,t,e){const i=yield S3(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield A3(n,t,i.nextPageToken))})).apply(this,arguments)}function S3(n,t){null!=t&&"number"==typeof t.maxResults&&OO("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=pZ(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,pu)}function LZ(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const i=eh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Ec(i,"GET",function(n,t){return function(r,i){const l=m3(n,i,t);return Tc(null!==l),function(n,t,e,r){const i=VO(t);if(null===i||!$S(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const d=encodeURIComponent;return l.split(",").map(b=>{const A=n.fullPath;return eh("/b/"+d(n.bucket)+"/o/"+d(A),e,r)+d3({alt:"media",token:b})})[0]}(l,i,n.host,n._protocol)}}(n,e),d);return f.errorHandler=uE(t),f}(n.storage,n._location,lE());return n.storage.makeRequestWithTokens(t,pu).then(e=>{if(null===e)throw new ti("no-download-url","The given file does not have any download URLs.");return e})}function N3(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new Us(n._location.bucket,e);return new s_(n.storage,r)}function x3(n,t){if(n instanceof jO){const e=n;if(null==e._bucket)throw new ti("no-default-bucket","No default bucket found. Did you set the '"+s3+"' property when initializing the app?");const r=new s_(e,e._bucket);return null!=t?x3(r,t):r}return void 0!==t?N3(n,t):n}function $Z(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof jO)return function(n,t){return new s_(n,t)}(n,t);throw b0("To use ref(service, url), the first argument must be a Storage instance.")}return x3(n,t)}function M3(n,t){const e=null==t?void 0:t[s3];return null==e?null:Us.makeFromBucketSpec(e,n)}class jO{constructor(t,e,r,i,l){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=i3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Us.makeFromBucketSpec(i,this._host):M3(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Us.makeFromBucketSpec(this._url,t):M3(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){OO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){OO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,be.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,be.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new s_(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new LW(l3());{const l=function(n,t,e,r,i,l){const d=d3(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(m,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(m,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(m,l),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(m,r),new jW(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var r=this;return(0,be.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,l).getPromise()})()}}const R3="@firebase/storage";function O3(n,t){return $Z(n=(0,L.m9)(n),t)}(0,Os._registerComponent)(new Ro.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new jO(e,r,i,t,Os.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Os.registerVersion)(R3,"0.9.5",""),(0,Os.registerVersion)(R3,"0.9.5","esm2017");class WS{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class F3{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new WS(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new WS(r,this,this._ref))},e)}on(t,e,r,i){let l;return e&&(l="function"==typeof e?d=>e(new WS(d,this,this._ref)):{next:e.next?d=>e.next(new WS(d,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,r||void 0,i||void 0)}}class L3{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new th(t,this._service))}get items(){return this._delegate.items.map(t=>new th(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class th{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return N3(n,t)}(this._delegate,t);return new th(e,this.storage)}get root(){return new th(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new th(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new F3(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new D3(n,new Cc(t),e)}(n=(0,L.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=wa.RAW,r){this._throwIfRoot("putString");const i=LO(e,t),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new F3(new D3(this._delegate,new Cc(i.data,!0),l),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return A3(n,t).then(()=>t)}(n=(0,L.m9)(n))}(this._delegate).then(t=>new L3(t,this.storage))}list(t){return function(n,t){return S3(n=(0,L.m9)(n),t)}(this._delegate,t||void 0).then(e=>new L3(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=v3(n.storage,n._location,lE());return n.storage.makeRequestWithTokens(t,pu)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const l=eh(t.fullServerUrl(),n.host,n._protocol),f=BO(e,r),b=n.maxOperationRetryTime,T=new Ec(l,"PATCH",GS(n,r),b);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=uE(t),T}(n.storage,n._location,t,lE());return n.storage.makeRequestWithTokens(e,pu)}(n=(0,L.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return LZ(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=eh(t.fullServerUrl(),n.host,n._protocol),f=new Ec(r,"DELETE",function(m,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=uE(t),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,pu)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw u3(t)}}class V3{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(B3(t))throw b0("ref() expected a child path but got a URL, use refFromURL instead.");return new th(O3(this._delegate,t),this)}refFromURL(t){if(!B3(t))throw b0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Us.makeFromUrl(t,this._delegate.host)}catch(e){throw b0("refFromUrl() expected a valid full URL but got an invalid one.")}return new th(O3(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function B3(n){return/^[A-Za-z]+:\/\//.test(n)}function r7(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new V3(e,r)}function U3(n){const t=function(n){return new qn.y(t=>{const e=d=>t.next(d);e(n.snapshot);const l=n.on("state_changed",e);return n.then(d=>{e(d),t.complete()},d=>{e(n.snapshot),(d=>{t.error(d)})(d)}),function(){l()}}).pipe(function(n,t=Yu.P){return e=>e.lift(new wW(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ut.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function ZS(n){return{getDownloadURL:()=>(0,dt.of)(void 0).pipe(wn.fc,tr(()=>n.getDownloadURL()),wn.iC),getMetadata:()=>(0,dt.of)(void 0).pipe(wn.fc,tr(()=>n.getMetadata()),wn.iC),delete:()=>(0,en.D)(n.delete()),child:t=>ZS(n.child(t)),updateMetadata:t=>(0,en.D)(n.updateMetadata(t)),put:(t,e)=>U3(n.put(t,e)),putString:(t,e,r)=>U3(n.putString(t,e,r)),list:t=>(0,en.D)(n.list(t)),listAll:()=>(0,en.D)(n.listAll())}}!function(n){const t={TaskState:po,TaskEvent:CZ,StringFormat:wa,Storage:V3,Reference:th};n.INTERNAL.registerComponent(new Ro.wA("storage-compat",r7,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(rb.Z);const o7=new a.OlP("angularfire2.storageBucket"),a7=new a.OlP("angularfire2.storage.maxUploadRetryTime"),l7=new a.OlP("angularfire2.storage.maxOperationRetryTime"),u7=new a.OlP("angularfire2.storage.use-emulator");let c7=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A){const M=(0,jr.on)(e,d,r);this.storage=(0,jr.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const O=d.runOutsideAngular(()=>M.storage(i||void 0)),G=T;return G&&O.useEmulator(...G),m&&O.setMaxUploadRetryTime(m),b&&O.setMaxOperationRetryTime(b),O},[m,b])}ref(e){return ZS(this.storage.ref(e))}refFromURL(e){return ZS(this.storage.refFromURL(e))}upload(e,r,i){return ZS(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(jr.Dh),a.LFG(jr.xv,8),a.LFG(o7,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(wn.HU),a.LFG(a7,8),a.LFG(l7,8),a.LFG(u7,8),a.LFG(Jg,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),h7=(()=>{class n{constructor(){a1.Z.registerVersion("angularfire",wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[c7],imports:[d7]}),n})();const f7={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let p7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[vW]}),n.\u0275inj=a.cJS({providers:[],imports:[[Ep,CN,RB,xq,jr.hO.initializeApp(f7),_j,AM,h7]]}),n})();(0,a.G48)(),Fa().bootstrapModule(p7).catch(n=>console.error(n))},3394:(ot,Te,B)=>{"use strict";B.d(Te,{Z:()=>Ae});var a=B(3854),q=B(3910),F=B(8026),se=B(5422);class ae{constructor(Ve,ce){this._delegate=Ve,this.firebase=ce,(0,F._addComponent)(Ve,new q.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ve,ce=F._DEFAULT_ENTRY_NAME){var pe;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(Ve);return!ke.isInitialized()&&"EXPLICIT"===(null===(pe=ke.getComponent())||void 0===pe?void 0:pe.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:ce})}_removeServiceInstance(Ve,ce=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(ce)}_addComponent(Ve){(0,F._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,F._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function Q(){const Ce=function(Ce){const Ve={},ce={__esModule:!0,initializeApp:function(ft,Qe={}){const xe=F.initializeApp(ft,Qe);if((0,a.r3)(Ve,xe.name))return Ve[xe.name];const Ie=new Ce(xe,ce);return Ve[xe.name]=Ie,Ie},app:ke,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(ft){const Qe=ft.name,xe=Qe.replace("-compat","");if(F._registerComponent(ft)&&"PUBLIC"===ft.type){const Ie=(je=ke())=>{if("function"!=typeof je[xe])throw de.create("invalid-app-argument",{appName:Qe});return je[xe]()};void 0!==ft.serviceProps&&(0,a.ZB)(Ie,ft.serviceProps),ce[xe]=Ie,Ce.prototype[xe]=function(...je){return this._getService.bind(this,Qe).apply(this,ft.multipleInstances?je:[])}}return"PUBLIC"===ft.type?ce[xe]:null},removeApp:function(ft){delete Ve[ft]},useAsService:function(ft,Qe){return"serverAuth"===Qe?null:Qe},modularAPIs:F}};function ke(ft){if(!(0,a.r3)(Ve,ft=ft||F._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:ft});return Ve[ft]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function(){return Object.keys(Ve).map(ft=>Ve[ft])}}),ke.App=Ce,ce}(ae);return Ce.INTERNAL=Object.assign(Object.assign({},Ce.INTERNAL),{createFirebaseNamespace:Q,extendNamespace:function(ce){(0,a.ZB)(Ce,ce)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),Ce}(),Y=new se.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ce=self.firebase.SDK_VERSION;Ce&&Ce.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=U;(0,F.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(ot,Te,B)=>{"use strict";B.r(Te),B.d(Te,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Vi,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>wr,_addOrOverwriteComponent:()=>gi,_apps:()=>Gt,_clearComponents:()=>cn,_components:()=>yt,_getProvider:()=>wt,_registerComponent:()=>zn,_removeServiceInstance:()=>Xn,deleteApp:()=>hr,getApp:()=>dr,getApps:()=>Fe,initializeApp:()=>ri,onLog:()=>vn,registerVersion:()=>at,setLogLevel:()=>Yn});var a=B(8239),q=B(3910),F=B(5422),se=B(3854);class ae{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function(We){const Ne=We.getComponent();return"VERSION"===(null==Ne?void 0:Ne.type)}(lt)){const Et=lt.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(lt=>lt).join(" ")}}const de="@firebase/app",X="0.7.21",Q=new F.Yd("@firebase/app"),Qt="[DEFAULT]",xn={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gt=new Map,yt=new Map;function wr(We,Ne){try{We.container.addComponent(Ne)}catch(lt){Q.debug(`Component ${Ne.name} failed to register with FirebaseApp ${We.name}`,lt)}}function gi(We,Ne){We.container.addOrOverwriteComponent(Ne)}function zn(We){const Ne=We.name;if(yt.has(Ne))return Q.debug(`There were multiple attempts to register component ${Ne}.`),!1;yt.set(Ne,We);for(const lt of Gt.values())wr(lt,We);return!0}function wt(We,Ne){const lt=We.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),We.container.getProvider(Ne)}function Xn(We,Ne,lt=Qt){wt(We,Ne).clearInstance(lt)}function cn(){yt.clear()}const dn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ln{constructor(Ne,lt,Et){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}const Vi="9.6.11";function ri(We,Ne={}){"object"!=typeof Ne&&(Ne={name:Ne});const lt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},Ne),Et=lt.name;if("string"!=typeof Et||!Et)throw dn.create("bad-app-name",{appName:String(Et)});const Pt=Gt.get(Et);if(Pt){if((0,se.vZ)(We,Pt.options)&&(0,se.vZ)(lt,Pt.config))return Pt;throw dn.create("duplicate-app",{appName:Et})}const Xt=new q.H0(Et);for(const z of yt.values())Xt.addComponent(z);const J=new Ln(We,lt,Xt);return Gt.set(Et,J),J}function dr(We=Qt){const Ne=Gt.get(We);if(!Ne)throw dn.create("no-app",{appName:We});return Ne}function Fe(){return Array.from(Gt.values())}function hr(We){return sr.apply(this,arguments)}function sr(){return(sr=(0,a.Z)(function*(We){const Ne=We.name;Gt.has(Ne)&&(Gt.delete(Ne),yield Promise.all(We.container.getProviders().map(lt=>lt.delete())),We.isDeleted=!0)})).apply(this,arguments)}function at(We,Ne,lt){var Et;let Pt=null!==(Et=xn[We])&&void 0!==Et?Et:We;lt&&(Pt+=`-${lt}`);const Xt=Pt.match(/\s|\//),J=Ne.match(/\s|\//);if(Xt||J){const z=[`Unable to register library "${Pt}" with version "${Ne}":`];return Xt&&z.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),Xt&&J&&z.push("and"),J&&z.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void Q.warn(z.join(" "))}zn(new q.wA(`${Pt}-version`,()=>({library:Pt,version:Ne}),"VERSION"))}function vn(We,Ne){if(null!==We&&"function"!=typeof We)throw dn.create("invalid-log-argument");(0,F.Am)(We,Ne)}function Yn(We){(0,F.Ub)(We)}const Br="firebase-heartbeat-store";let fr=null;function Vn(){return fr||(fr=(0,se.X3)("firebase-heartbeat-database",1,(We,Ne)=>{switch(Ne){case 0:We.createObjectStore(Br)}}).catch(We=>{throw dn.create("storage-open",{originalErrorMessage:We.message})})),fr}function _n(){return(_n=(0,a.Z)(function*(We){try{return(yield Vn()).transaction(Br).objectStore(Br).get(Bi(We))}catch(Ne){throw dn.create("storage-get",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function Ze(We,Ne){return gt.apply(this,arguments)}function gt(){return(gt=(0,a.Z)(function*(We,Ne){try{const Et=(yield Vn()).transaction(Br,"readwrite");return yield Et.objectStore(Br).put(Ne,Bi(We)),Et.complete}catch(lt){throw dn.create("storage-set",{originalErrorMessage:lt.message})}})).apply(this,arguments)}function Bi(We){return`${We.name}!${We.options.appId}`}class It{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new sn(lt),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var Ne=this;return(0,a.Z)(function*(){const Et=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=Cr();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!Ne._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Pt))return Ne._heartbeatsCache.heartbeats.push({date:Pt,agent:Et}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Xt=>{const J=new Date(Xt.date).valueOf();return Date.now()-J<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,a.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const lt=Cr(),{heartbeatsToSend:Et,unsentEntries:Pt}=function(We,Ne=1024){const lt=[];let Et=We.slice();for(const Pt of We){const Xt=lt.find(J=>J.agent===Pt.agent);if(Xt){if(Xt.dates.push(Pt.date),bt(lt)>Ne){Xt.dates.pop();break}}else if(lt.push({agent:Pt.agent,dates:[Pt.date]}),bt(lt)>Ne){lt.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:lt,unsentEntries:Et}}(Ne._heartbeatsCache.heartbeats),Xt=(0,se.L)(JSON.stringify({version:2,heartbeats:Et}));return Ne._heartbeatsCache.lastSentHeartbeatDate=lt,Pt.length>0?(Ne._heartbeatsCache.heartbeats=Pt,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Xt})()}}function Cr(){return(new Date).toISOString().substring(0,10)}class sn{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,a.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function(We){return _n.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var lt=this;return(0,a.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const Xt=yield lt.read();return Ze(lt.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Xt.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var lt=this;return(0,a.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const Xt=yield lt.read();return Ze(lt.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...Ne.heartbeats]})}})()}}function bt(We){return(0,se.L)(JSON.stringify({version:2,heartbeats:We})).length}zn(new q.wA("platform-logger",Ne=>new ae(Ne),"PRIVATE")),zn(new q.wA("heartbeat",Ne=>new It(Ne),"PRIVATE")),at(de,X,""),at(de,X,"esm2017"),at("fire-js","")},3910:(ot,Te,B)=>{"use strict";B.d(Te,{wA:()=>F,H0:()=>X,zt:()=>ae});var a=B(8239),q=B(3854);class F{constructor(U,Y,j){this.name=U,this.instanceFactory=Y,this.type=j,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const se="[DEFAULT]";class ae{constructor(U,Y){this.name=U,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const Y=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(Y)){const j=new q.BH;if(this.instancesDeferred.set(Y,j),this.isInitialized(Y)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:Y});le&&j.resolve(le)}catch(le){}}return this.instancesDeferred.get(Y).promise}getImmediate(U){var Y;const j=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),le=null!==(Y=null==U?void 0:U.optional)&&void 0!==Y&&Y;if(!this.isInitialized(j)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:j})}catch(Re){if(le)return null;throw Re}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:se})}catch(Y){}for(const[Y,j]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(Y);try{const Re=this.getOrInitializeService({instanceIdentifier:le});j.resolve(Re)}catch(Re){}}}}clearInstance(U=se){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,a.Z)(function*(){const Y=Array.from(U.instances.values());yield Promise.all([...Y.filter(j=>"INTERNAL"in j).map(j=>j.INTERNAL.delete()),...Y.filter(j=>"_delete"in j).map(j=>j._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=se){return this.instances.has(U)}getOptions(U=se){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:Y={}}=U,j=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(j))throw Error(`${this.name}(${j}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:j,options:Y});for(const[Re,Ae]of this.instancesDeferred.entries())j===this.normalizeInstanceIdentifier(Re)&&Ae.resolve(le);return le}onInit(U,Y){var j;const le=this.normalizeInstanceIdentifier(Y),Re=null!==(j=this.onInitCallbacks.get(le))&&void 0!==j?j:new Set;Re.add(U),this.onInitCallbacks.set(le,Re);const Ae=this.instances.get(le);return Ae&&U(Ae,le),()=>{Re.delete(U)}}invokeOnInitCallbacks(U,Y){const j=this.onInitCallbacks.get(Y);if(j)for(const le of j)try{le(U,Y)}catch(Re){}}getOrInitializeService({instanceIdentifier:U,options:Y={}}){let j=this.instances.get(U);if(!j&&this.component&&(j=this.component.instanceFactory(this.container,{instanceIdentifier:(Q=U,Q===se?void 0:Q),options:Y}),this.instances.set(U,j),this.instancesOptions.set(U,Y),this.invokeOnInitCallbacks(j,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,j)}catch(le){}var Q;return j||null}normalizeInstanceIdentifier(U=se){return this.component?this.component.multipleInstances?U:se:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class X{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const Y=this.getProvider(U.name);if(Y.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);Y.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const Y=new ae(U,this);return this.providers.set(U,Y),Y}getProviders(){return Array.from(this.providers.values())}}},5422:(ot,Te,B)=>{"use strict";B.d(Te,{in:()=>q,Yd:()=>de,Ub:()=>X,Am:()=>Q});const a=[];var q=(()=>{return(U=q||(q={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",q;var U})();const F={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},se=q.INFO,ae={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},ee=(U,Y,...j)=>{if(Y<U.logLevel)return;const le=(new Date).toISOString(),Re=ae[Y];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Re](`[${le}]  ${U.name}:`,...j)};class de{constructor(Y){this.name=Y,this._logLevel=se,this._logHandler=ee,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in q))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?F[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...Y),this._logHandler(this,q.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...Y),this._logHandler(this,q.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,q.INFO,...Y),this._logHandler(this,q.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,q.WARN,...Y),this._logHandler(this,q.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...Y),this._logHandler(this,q.ERROR,...Y)}}function X(U){a.forEach(Y=>{Y.setLogLevel(U)})}function Q(U,Y){for(const j of a){let le=null;Y&&Y.level&&(le=F[Y.level]),j.userLogHandler=null===U?null:(Re,Ae,...Ce)=>{const Ve=Ce.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(pe){return null}}).filter(ce=>ce).join(" ");Ae>=(null!=le?le:Re.logLevel)&&U({level:q[Ae].toLowerCase(),message:Ve,args:Ce,type:Re.name})}}}},8239:(ot,Te,B)=>{"use strict";function a(F,se,ae,ee,de,X,Q){try{var U=F[X](Q),Y=U.value}catch(j){return void ae(j)}U.done?se(Y):Promise.resolve(Y).then(ee,de)}function q(F){return function(){var se=this,ae=arguments;return new Promise(function(ee,de){var X=F.apply(se,ae);function Q(Y){a(X,ee,de,Q,U,"next",Y)}function U(Y){a(X,ee,de,Q,U,"throw",Y)}Q(void 0)})}}B.d(Te,{Z:()=>q})}},ot=>{ot(ot.s=1437)}]);