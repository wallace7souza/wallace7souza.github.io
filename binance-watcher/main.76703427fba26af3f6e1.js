(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:st=>{function Ee(B){return Promise.resolve().then(()=>{var l=new Error("Cannot find module '"+B+"'");throw l.code="MODULE_NOT_FOUND",l})}Ee.keys=()=>[],Ee.resolve=Ee,Ee.id=8255,st.exports=Ee},7716:(st,Ee,B)=>{"use strict";B.d(Ee,{deG:()=>Ih,tb:()=>$f,AFp:()=>GI,ip1:()=>Hd,CZH:()=>il,hGG:()=>uc,z2F:()=>sl,sBO:()=>JT,Sil:()=>ql,_Vd:()=>Vr,EJc:()=>G1,SBq:()=>nl,qLn:()=>Hh,vpe:()=>rl,gxx:()=>bd,tBr:()=>qa,XFs:()=>ot,OlP:()=>Hn,zs3:()=>br,ZZ4:()=>xg,aQg:()=>Wr,soG:()=>rm,YKP:()=>eI,v3s:()=>pR,h0i:()=>Rd,PXZ:()=>oS,R0b:()=>io,FiY:()=>Wa,Lbi:()=>ZI,g9A:()=>WI,Qsj:()=>Jx,FYo:()=>Ag,JOm:()=>Qa,Tiy:()=>YT,q3G:()=>un,tp0:()=>Gr,EAV:()=>lc,Rgc:()=>rc,dDg:()=>z1,DyG:()=>zs,q4F:()=>Ng,GfV:()=>KT,s_b:()=>kd,ifc:()=>qe,eFA:()=>eC,G48:()=>K1,Gpc:()=>z,X6Q:()=>ov,_c5:()=>mm,VLi:()=>cm,c2e:()=>j1,zSh:()=>mn,wAp:()=>At,vHH:()=>Se,EiD:()=>_t,mCW:()=>Ya,qzn:()=>Iu,JVY:()=>h_,pB0:()=>od,eBb:()=>Vp,L6k:()=>Lp,LAX:()=>sa,cg1:()=>iw,Tjo:()=>jf,kL8:()=>_T,yhl:()=>kh,dqk:()=>It,sIi:()=>lg,CqO:()=>ry,QGY:()=>Lb,F4k:()=>HD,RDi:()=>Ai,AaK:()=>ee,z3N:()=>ia,qOj:()=>bb,TTD:()=>zn,_Bn:()=>UT,xp6:()=>ku,uIk:()=>Db,Tol:()=>ly,DjV:()=>uT,ekj:()=>oy,Suo:()=>Hy,Xpm:()=>Z,lG2:()=>ht,Yz7:()=>wt,cJS:()=>cn,oAB:()=>W,Yjl:()=>Ct,Y36:()=>pg,_UZ:()=>Pb,BQk:()=>Fb,ynx:()=>Ob,qZA:()=>kb,TgZ:()=>ny,EpF:()=>$D,n5z:()=>Ua,Ikx:()=>yy,SDv:()=>LT,QtT:()=>VT,pQV:()=>Dw,LFG:()=>Jn,$8M:()=>yu,NdJ:()=>Vb,CRH:()=>b1,oxw:()=>$b,ALo:()=>s1,lcZ:()=>o1,xi3:()=>jg,Hsn:()=>WD,F$t:()=>qD,Q6J:()=>ty,s9C:()=>gg,MGl:()=>mg,VKq:()=>Xi,WLB:()=>Vy,kEZ:()=>es,iGM:()=>y1,MAs:()=>df,CHM:()=>Ma,LSH:()=>ud,kYT:()=>pe,Udp:()=>sy,YNc:()=>AD,W1O:()=>wi,_uU:()=>hy,Oqu:()=>fy,hij:()=>py,AsE:()=>vf,Gf:()=>v1});var l=B(9765),G=B(5319),O=B(7574),ie=B(6682),oe=B(8819);function te(s){for(let o in s)if(s[o]===te)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ee(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ee).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function J(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const U=te({__forward_ref__:te});function z(s){return s.__forward_ref__=z,s.toString=function(){return ee(this())},s}function j(s){return ae(s)?s():s}function ae(s){return"function"==typeof s&&s.hasOwnProperty(U)&&s.__forward_ref__===z}class Se extends Error{constructor(o,u){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function ce(s){return"string"==typeof s?s:null==s?"":String(s)}function fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ce(s)}function nt(s,o){const u=o?` in ${o}`:"";throw new Se("201",`No provider for ${fe(s)} found${u}`)}function yt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}function wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function cn(s){return{providers:s.providers||[],imports:s.imports||[]}}function rn(s){return dn(s,hr)||dn(s,fr)}function dn(s,o){return s.hasOwnProperty(o)?s[o]:null}function si(s){return s&&(s.hasOwnProperty(Le)||s.hasOwnProperty(ir))?s[Le]:null}const hr=te({\u0275prov:te}),Le=te({\u0275inj:te}),fr=te({ngInjectableDef:te}),ir=te({ngInjectorDef:te});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let vn;function Gn(s){const o=vn;return vn=s,o}function oi(s,o,u){const c=rn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ot.Optional?null:void 0!==o?o:void nt(ee(s),"Injector")}function pr(s){return{toString:s}.toString()}var Vn=(()=>((Vn=Vn||{})[Vn.OnPush=0]="OnPush",Vn[Vn.Default=1]="Default",Vn))(),qe=(()=>((qe=qe||{})[qe.Emulated=0]="Emulated",qe[qe.None=2]="None",qe[qe.ShadowDom=3]="ShadowDom",qe))();const gt="undefined"!=typeof globalThis&&globalThis,Gi="undefined"!=typeof window&&window,as="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,It=gt||"undefined"!=typeof global&&global||Gi||as,sn={},bt=[],Gt=te({\u0275cmp:te}),Ge=te({\u0275dir:te}),Ne=te({\u0275pipe:te}),lt=te({\u0275mod:te}),Et=te({\u0275loc:te}),Rt=te({\u0275fac:te}),Jt=te({__NG_ELEMENT_ID__:te});let Q=0;function Z(s){return pr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Vn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||bt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||qe.Emulated,id:"c",styles:s.styles||bt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,m=s.pipes;return c.id+=Q++,c.inputs=Ue(s.inputs,u),c.outputs=Ue(s.outputs),p&&p.forEach(v=>v(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(_e):null,c.pipeDefs=m?()=>("function"==typeof m?m():m).map($):null,c})}function _e(s){return Ze(s)||function(s){return s[Ge]||null}(s)}function $(s){return function(s){return s[Ne]||null}(s)}const H={};function W(s){return pr(()=>{const o={type:s.type,bootstrap:s.bootstrap||bt,declarations:s.declarations||bt,imports:s.imports||bt,exports:s.exports||bt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(H[s.id]=s.type),o})}function pe(s,o){return pr(()=>{const u=Tn(s,!0);u.declarations=o.declarations||bt,u.imports=o.imports||bt,u.exports=o.exports||bt})}function Ue(s,o){if(null==s)return sn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const ht=Z;function Ct(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ze(s){return s[Gt]||null}function Tn(s,o){const u=s[lt]||null;if(!u&&!0===o)throw new Error(`Type ${ee(s)} does not have '\u0275mod' property.`);return u}function Mn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Wi(s){return Array.isArray(s)&&!0===s[1]}function Tc(s){return 0!=(8&s.flags)}function cl(s){return 2==(2&s.flags)}function _i(s){return 1==(1&s.flags)}function us(s){return null!==s.template}function cs(s){return 0!=(512&s[2])}function js(s,o){return s.hasOwnProperty(Rt)?s[Rt]:null}class fl{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function zn(){return iu}function iu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Rr),Sa}function Sa(){const s=Aa(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===sn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Rr(s,o,u,c){const h=Aa(s)||function(s,o){return s[ph]=o}(s,{previous:sn,current:null}),p=h.current||(h.current={}),m=h.previous,v=this.declaredInputs[u],C=m[v];p[v]=new fl(C&&C.currentValue,o,m===sn),s[c]=o}zn.ngInherit=!0;const ph="__ngSimpleChanges__";function Aa(s){return s[ph]||null}let Na;function Ai(s){Na=s}function su(){return void 0!==Na?Na:"undefined"!=typeof document?document:void 0}function Rn(s){return!!s.listen}const Ss={createRenderer:(s,o)=>su()};function In(s){for(;Array.isArray(s);)s=s[0];return s}function ou(s,o){return In(o[s])}function Sn(s,o){return In(o[s.index])}function As(s,o){return s.data[o]}function xa(s,o){return s[o]}function kr(s,o){const u=o[s];return Mn(u)?u:u[0]}function yh(s){return 4==(4&s[2])}function gl(s){return 128==(128&s[2])}function mr(s,o){return null==o?null:s[o]}function ml(s){s[18]=0}function au(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const St={lFrame:$c(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Oc(){return St.bindingsEnabled}function Me(){return St.lFrame.lView}function Yt(){return St.lFrame.tView}function Ma(s){return St.lFrame.contextLView=s,s[8]}function Un(){let s=yl();for(;null!==s&&64===s.type;)s=s.parent;return s}function yl(){return St.lFrame.currentTNode}function Gs(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ui(s,o){const u=St.lFrame;u.currentTNode=s,u.isParent=o}function Ra(){return St.lFrame.isParent}function vl(){St.lFrame.isParent=!1}function bo(){return St.isInCheckNoChangesMode}function cu(s){St.isInCheckNoChangesMode=s}function sr(){const s=St.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ni(){return St.lFrame.bindingIndex}function xi(){return St.lFrame.bindingIndex++}function Mi(s){const o=St.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Vc(s){St.lFrame.inI18n=s}function ka(s,o){const u=St.lFrame;u.bindingIndex=u.bindingRootIndex=s,Yo(o)}function Yo(s){St.lFrame.currentDirectiveIndex=s}function du(){return St.lFrame.currentQueryIndex}function wo(s){St.lFrame.currentQueryIndex=s}function wl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Uc(s,o,u){if(u&ot.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&ot.Host||(h=wl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=St.lFrame=bh();return c.currentTNode=o,c.lView=s,!0}function Pa(s){const o=bh(),u=s[1];St.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function bh(){const s=St.lFrame,o=null===s?null:s.child;return null===o?$c(s):o}function $c(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Hc(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const jc=Hc;function Ko(){const s=Hc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function jr(){return St.lFrame.selectedIndex}function Oa(s){St.lFrame.selectedIndex=s}function $n(){const s=St.lFrame;return As(s.tView,s.selectedIndex)}function fu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:D,ngOnDestroy:N}=p;m&&(s.contentHooks||(s.contentHooks=[])).push(-u,m),v&&((s.contentHooks||(s.contentHooks=[])).push(u,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),D&&((s.viewHooks||(s.viewHooks=[])).push(u,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,D)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function qs(s,o,u){wh(s,o,3,u)}function _r(s,o,u,c){(3&s[2])===u&&wh(s,o,u,c)}function Fa(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function wh(s,o,u,c){const p=null!=c?c:-1,m=o.length-1;let v=0;for(let C=void 0!==c?65535&s[18]:0;C<m;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(Cp(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Cp(s,o,u,c){const h=u[c]<0,p=u[c+1],v=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Co{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Ch(s,o,u){const c=Rn(s);let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const m=u[h++],v=u[h++],C=u[h++];c?s.setAttribute(o,v,C,m):o.setAttributeNS(m,v,C)}else{const m=p,v=u[++h];Ns(m)?c&&s.setProperty(o,m,v):c?s.setAttribute(o,m,v):o.setAttribute(m,v),h++}}return h}function Dp(s){return 3===s||4===s||6===s}function Ns(s){return 64===s.charCodeAt(0)}function Zc(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Tp(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Tp(s,o,u,c,h){let p=0,m=s.length;if(-1===o)m=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){m=-1;break}if(v>o){m=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==m&&(s.splice(m,0,o),p=m+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function El(s){return-1!==s}function Va(s){return 32767&s}function zi(s,o){let u=function(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Ba=!0;function gu(s){const o=Ba;return Ba=s,o}let mu=0;function Qo(s,o){const u=Xt(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Dl(c.data,s),Dl(o,null),Dl(c.blueprint,null));const h=ct(s,o),p=s.injectorIndex;if(El(h)){const m=Va(h),v=zi(h,o),C=v[1].data;for(let D=0;D<8;D++)o[p+D]=v[m+D]|C[m+D]}return o[p+8]=h,p}function Dl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Xt(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ct(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const p=h[1],m=p.type;if(c=2===m?p.declTNode:1===m?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function En(s,o,u){!function(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Jt)&&(c=u[Jt]),null==c&&(c=u[Jt]=mu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function yr(s,o,u){if(u&ot.Optional)return s;nt(o,"NodeInjector")}function Jo(s,o,u,c){if(u&ot.Optional&&void 0===c&&(c=null),0==(u&(ot.Self|ot.Host))){const h=s[9],p=Gn(void 0);try{return h?h.get(o,c,u&ot.Optional):oi(o,c,u&ot.Optional)}finally{Gn(p)}}return yr(c,o,u)}function xs(s,o,u,c=ot.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Jt)?s[Jt]:void 0;return"number"==typeof o?o>=0?255&o:Th:o}(u);if("function"==typeof p){if(!Uc(o,s,c))return c&ot.Host?yr(h,u,c):Jo(o,u,c,h);try{const m=p(c);if(null!=m||c&ot.Optional)return m;nt(u)}finally{jc()}}else if("number"==typeof p){let m=null,v=Xt(s,o),C=-1,D=c&ot.Host?o[16][6]:null;for((-1===v||c&ot.SkipSelf)&&(C=-1===v?ct(s,o):o[v+8],-1!==C&&Xo(c,!1)?(m=o[1],v=Va(C),o=zi(C,o)):v=-1);-1!==v;){const N=o[1];if(_u(p,v,N.data)){const P=Sp(v,o,u,m,c,D);if(P!==or)return P}C=o[v+8],-1!==C&&Xo(c,o[1].data[v+8]===D)&&_u(p,v,o)?(m=N,v=Va(C),o=zi(C,o)):v=-1}}}return Jo(o,u,c,h)}const or={};function Th(){return new To(Un(),Me())}function Sp(s,o,u,c,h,p){const m=o[1],v=m.data[s+8],N=Do(v,m,u,null==c?cl(v)&&Ba:c!=m&&0!=(3&v.type),h&ot.Host&&p===v);return null!==N?Yn(o,m,N,v):or}function Do(s,o,u,c,h){const p=s.providerIndexes,m=o.data,v=1048575&p,C=s.directiveStart,N=p>>20,L=h?v+N:s.directiveEnd;for(let K=c?v:v+N;K<L;K++){const X=m[K];if(K<C&&u===X||K>=C&&X.type===u)return K}if(h){const K=m[C];if(K&&us(K)&&K.type===u)return C}return null}function Yn(s,o,u,c){let h=s[u];const p=o.data;if(function(s){return s instanceof Co}(h)){const m=h;m.resolving&&function(s,o){throw new Se("200",`Circular dependency in DI detected for ${s}`)}(fe(p[u]));const v=gu(m.canSeeViewProviders);m.resolving=!0;const C=m.injectImpl?Gn(m.injectImpl):null;Uc(s,c,ot.Default);try{h=s[u]=m.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const m=iu(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&Gn(C),gu(v),m.resolving=!1,jc()}}return h}function _u(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Xo(s,o){return!(s&ot.Self||s&ot.Host&&o)}class To{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return xs(this._tNode,this._lView,o,c,u)}}function Ua(s){return pr(()=>{const o=s.prototype.constructor,u=o[Rt]||zc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[Rt]||zc(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function zc(s){return ae(s)?()=>{const o=zc(j(s));return o&&o()}:js(s)}function yu(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(Dp(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(Un(),s)}const hs="__parameters__";function Ri(s,o,u){return pr(()=>{const c=function(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const m=new h(...p);return v.annotation=m,v;function v(C,D,N){const P=C.hasOwnProperty(hs)?C[hs]:Object.defineProperty(C,hs,{value:[]})[hs];for(;P.length<=N;)P.push(null);return(P[N]=P[N]||[]).push(m),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Hn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ih=new Hn("AnalyzeForEntryComponents"),zs=Function;function vi(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),vi(c,o)):o!==s&&o.push(c)}return o}function Rs(s,o){s.forEach(u=>Array.isArray(u)?Rs(u,o):o(u))}function ks(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function No(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function xo(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function vr(s,o,u){let c=ja(s,o);return c>=0?s[1|c]=u:(c=~c,function(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function lr(s,o){const u=ja(s,o);if(u>=0)return s[1|u]}function ja(s,o){return function(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),m=s[p<<u];if(o===m)return p<<u;m>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const tn={},Pt="__NG_DI_FLAG__",Ir="ngTempTokenPath",Il=/\n/gm,Ks="__source",Ps=te({provide:String,useValue:te});let ta;function Lt(s){const o=ta;return ta=s,o}function Rp(s,o=ot.Default){if(void 0===ta)throw new Error("inject() must be called from an injection context");return null===ta?oi(s,void 0,o):ta.get(s,o&ot.Optional?null:void 0,o)}function Jn(s,o=ot.Default){return(vn||Rp)(j(s),o)}function Sl(s){const o=[];for(let u=0;u<s.length;u++){const c=j(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,p=ot.Default;for(let m=0;m<c.length;m++){const v=c[m],C=kp(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(Jn(h,p))}else o.push(Jn(c))}return o}function Al(s,o){return s[Pt]=o,s.prototype[Pt]=o,s}function kp(s){return s[Pt]}function fs(s,o,u,c){const h=s[Ir];throw o[Ks]&&h.unshift(o[Ks]),s.message=function(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=ee(o);if(Array.isArray(o))h=o.map(ee).join(" -> ");else if("object"==typeof o){let p=[];for(let m in o)if(o.hasOwnProperty(m)){let v=o[m];p.push(m+":"+("string"==typeof v?JSON.stringify(v):ee(v)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Il,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Ir]=null,s}const qa=Al(Ri("Inject",s=>({token:s})),-1),Wa=Al(Ri("Optional"),8),Gr=Al(Ri("SkipSelf"),4);let Eu;function ra(s){var o;return(null===(o=function(){if(void 0===Eu&&(Eu=null,It.trustedTypes))try{Eu=It.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Eu}())||void 0===o?void 0:o.createHTML(s))||s}class xl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class h0 extends xl{getTypeName(){return"HTML"}}class f0 extends xl{getTypeName(){return"Style"}}class Rh extends xl{getTypeName(){return"Script"}}class p0 extends xl{getTypeName(){return"URL"}}class g0 extends xl{getTypeName(){return"ResourceURL"}}function ia(s){return s instanceof xl?s.changingThisBreaksApplicationSecurity:s}function Iu(s,o){const u=kh(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function kh(s){return s instanceof xl&&s.getTypeName()||null}function h_(s){return new h0(s)}function Lp(s){return new f0(s)}function Vp(s){return new Rh(s)}function sa(s){return new p0(s)}function od(s){return new g0(s)}function Ph(s){const o=new m0(s);return function(){try{return!!(new window.DOMParser).parseFromString(ra(""),"text/html")}catch(s){return!1}}()?new f_(o):o}class f_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(ra(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class m0{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=ra(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=ra(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const m=u.item(h).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&o.removeAttribute(m)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const p_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Oh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ya(s){return(s=String(s)).match(p_)||s.match(Oh)?s:"unsafe:"+s}function Fh(s){return(s=String(s)).split(",").map(o=>Ya(o.trim())).join(", ")}function Os(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function Ml(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const Au=Os("area,br,col,hr,img,wbr"),m_=Os("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Nu=Os("rp,rt"),Bp=Ml(Au,Ml(m_,Os("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ml(Nu,Os("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ml(Nu,m_)),ad=Os("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),b=Os("srcset"),E=Ml(ad,b,Os("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Os("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),x=Os("script,style,template");class R{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Bp.hasOwnProperty(u))return this.sanitizedSomething=!0,!x.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),m=p.name,v=m.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;ad[v]&&(C=Ya(C)),b[v]&&(C=Fh(C)),this.buf.push(" ",m,'="',et(C),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Bp.hasOwnProperty(u)&&!Au.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(et(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const re=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ce=/([^\#-~ |!])/g;function et(s){return s.replace(/&/g,"&amp;").replace(re,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ce,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Be;function _t(s,o){let u=null;try{Be=Be||Ph(s);let c=o?String(o):"";u=Be.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=u.innerHTML,u=Be.getInertBodyElement(c)}while(c!==p);return ra((new R).sanitizeChildren(yn(u)||u))}finally{if(u){const c=yn(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function yn(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var un=(()=>((un=un||{})[un.NONE=0]="NONE",un[un.HTML=1]="HTML",un[un.STYLE=2]="STYLE",un[un.SCRIPT=3]="SCRIPT",un[un.URL=4]="URL",un[un.RESOURCE_URL=5]="RESOURCE_URL",un))();function ud(s){const o=function(){const s=Me();return s&&s[12]}();return o?o.sanitize(un.URL,s)||"":Iu(s,"URL")?ia(s):Ya(ce(s))}const Bh="__ngContext__";function Pi(s,o){s[Bh]=o}function y0(s){const o=function(s){return s[Bh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function cd(s){return s.ngOriginalError}function qA(s,...o){s.error(...o)}class Hh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=this._findContext(o),h=(s=o)&&s.ngErrorLogger||qA;var s;h(this._console,"ERROR",o),u&&h(this._console,"ORIGINAL ERROR",u),c&&h(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(cd(o)):null}_findOriginalError(o){let u=o&&cd(o);for(;u&&cd(u);)u=cd(u);return u||null}}const zA=/^>|^->|<!--|-->|--!>|<!-$/g,E0=/(<|>)/;const bE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(It))();function Ka(s){return s instanceof Function?s():s}var Qa=(()=>((Qa=Qa||{})[Qa.Important=1]="Important",Qa[Qa.DashCase=2]="DashCase",Qa))();let D0;function C_(s,o){return D0(s,o)}function Zp(s){const o=s[3];return Wi(o)?o[3]:o}function E_(s){return T0(s[13])}function TE(s){return T0(s[4])}function T0(s){for(;null!==s&&!Wi(s);)s=s[4];return s}function dd(s,o,u,c,h){if(null!=c){let p,m=!1;Wi(c)?p=c:Mn(c)&&(m=!0,c=c[0]);const v=In(c);0===s&&null!==u?null==h?xE(o,u,v):Mu(o,u,v,h||null,!0):1===s&&null!==u?Mu(o,u,v,h||null,!0):2===s?M0(o,v,m):3===s&&o.destroyNode(v),null!=p&&function(s,o,u,c,h){const p=u[7];p!==In(u)&&dd(o,s,c,p,h);for(let v=10;v<u.length;v++){const C=u[v];fd(C[1],C,s,o,c,p)}}(o,s,p,u,h)}}function D_(s,o){return Rn(s)?s.createText(o):s.createTextNode(o)}function IE(s,o,u){Rn(s)?s.setValue(o,u):o.textContent=u}function tN(s,o){return s.createComment(function(s){return s.replace(zA,o=>o.replace(E0,"\u200b$1\u200b"))}(o))}function I0(s,o,u){return Rn(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function T_(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,au(h,-1)),u.splice(c,1)}function I_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&T_(h,c),o>0&&(s[u-1][4]=c[4]);const p=No(s,10+o);!function(s,o){fd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const m=p[19];null!==m&&m.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function SE(s,o){if(!(256&o[2])){const u=o[11];Rn(u)&&u.destroyNode&&fd(s,o,u,3,null,null),function(s){let o=s[13];if(!o)return xu(s[1],s);for(;o;){let u=null;if(Mn(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Mn(o)&&xu(o[1],o),o=o[3];null===o&&(o=s),Mn(o)&&xu(o[1],o),u=o&&o[4]}o=u}}(o)}}function xu(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Co)){const p=u[c+1];if(Array.isArray(p))for(let m=0;m<p.length;m+=2){const v=h[p[m]],C=p[m+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const m=u[p+1],v="function"==typeof m?m(o):In(o[m]),C=c[h=u[p+2]],D=u[p+3];"boolean"==typeof D?v.removeEventListener(u[p],C,D):D>=0?c[h=D]():c[h=-D].unsubscribe(),p+=2}else{const m=c[h=u[p+1]];u[p].call(m)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Rn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Wi(o[3])){u!==o[3]&&T_(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function AE(s,o,u){return NE(s,o.parent,u)}function NE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===qe.None||h===qe.Emulated)return null}return Sn(c,u)}function Mu(s,o,u,c,h){Rn(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function xE(s,o,u){Rn(s)?s.appendChild(o,u):o.appendChild(u)}function ME(s,o,u,c,h){null!==c?Mu(s,o,u,c,h):xE(s,o,u)}function S_(s,o){return Rn(s)?s.parentNode(o):o.parentNode}function N_(s,o,u){return hd(s,o,u)}function x_(s,o,u){return 40&s.type?Sn(s,u):null}let A0,hd=x_;function RE(s,o){hd=s,A0=o}function zp(s,o,u,c){const h=AE(s,c,o),p=o[11],v=N_(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)ME(p,h,u[C],v,!1);else ME(p,h,u,v,!1);void 0!==A0&&A0(p,c,o,u,h)}function M_(s,o){if(null!==o){const u=o.type;if(3&u)return Sn(o,s);if(4&u)return x0(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return M_(s,c);{const h=s[o.index];return Wi(h)?x0(-1,h):In(h)}}if(32&u)return C_(o,s)()||In(s[o.index]);{const c=N0(s,o);return null!==c?Array.isArray(c)?c[0]:M_(Zp(s[16]),c):M_(s,o.next)}}return null}function N0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function x0(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return M_(c,h)}return o[7]}function M0(s,o,u){const c=S_(s,o);c&&function(s,o,u,c){Rn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}function R_(s,o,u,c,h,p,m){for(;null!=u;){const v=c[u.index],C=u.type;if(m&&0===o&&(v&&Pi(In(v),c),u.flags|=4),64!=(64&u.flags))if(8&C)R_(s,o,u.child,c,h,p,!1),dd(o,s,h,v,p);else if(32&C){const D=C_(u,c);let N;for(;N=D();)dd(o,s,h,N,p);dd(o,s,h,v,p)}else 16&C?Ru(s,o,c,u,h,p):dd(o,s,h,v,p);u=m?u.projectionNext:u.next}}function fd(s,o,u,c,h,p){R_(u,c,s.firstChild,o,h,p,!1)}function Ru(s,o,u,c,h,p){const m=u[16],C=m[6].projection[c.projection];if(Array.isArray(C))for(let D=0;D<C.length;D++)dd(o,s,h,C[D],p);else R_(s,o,C,m[3],h,p,!0)}function PE(s,o,u){Rn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function R0(s,o,u){Rn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function k0(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const OE="ng-template";function cN(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==k0(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function P0(s){return 4===s.type&&s.value!==OE}function dN(s,o,u){return o===(4!==s.type||u?s.value:OE)}function hN(s,o,u){let c=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(Dp(s[o]))return o;return s.length}(h);let m=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!m)if(4&c){if(c=2|1&c,""!==C&&!dN(s,C,u)||""===C&&1===o.length){if(la(c))return!1;m=!0}}else{const D=8&c?C:o[++v];if(8&c&&null!==s.attrs){if(!cN(s.attrs,D,u)){if(la(c))return!1;m=!0}continue}const P=O0(8&c?"class":C,h,P0(s),u);if(-1===P){if(la(c))return!1;m=!0;continue}if(""!==D){let L;L=P>p?"":h[P+1].toLowerCase();const K=8&c?L:null;if(K&&-1!==k0(K,D,0)||2&c&&D!==L){if(la(c))return!1;m=!0}}}}else{if(!m&&!la(c)&&!la(C))return!1;if(m&&la(C))continue;m=!1,c=C|1&c}}return la(c)||m}function la(s){return 0==(1&s)}function O0(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const m=o[h];if(m===s)return h;if(3===m||6===m)p=!0;else{if(1===m||2===m){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===m)break;if(0===m){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function FE(s,o,u=!1){for(let c=0;c<o.length;c++)if(hN(s,o[c],u))return!0;return!1}function LO(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function VE(s,o){return s?":not("+o.trim()+")":o}function gN(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let m=s[u];if("string"==typeof m)if(2&c){const v=s[++u];h+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+m:4&c&&(h+=" "+m);else""!==h&&!la(m)&&(o+=VE(p,h),h=""),c=m,p=p||!la(c);u++}return""!==h&&(o+=VE(p,h)),o}const $t={};function ku(s){P_(Yt(),Me(),jr()+s,bo())}function P_(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&qs(o,p,u)}else{const p=s.preOrderHooks;null!==p&&_r(o,p,0,u)}Oa(u)}function O_(s,o){return s<<17|o<<2}function ua(s){return s>>17&32767}function pd(s){return 2|s}function Pl(s){return(131068&s)>>2}function F0(s,o){return-131069&s|o<<2}function L0(s){return 1|s}function H0(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const m=s.data[p];wo(h),m.contentQueries(2,o[p],p)}}}function Qp(s,o,u,c,h,p,m,v,C,D){const N=o.blueprint.slice();return N[0]=h,N[2]=140|c,ml(N),N[3]=N[15]=s,N[8]=u,N[10]=m||s&&s[10],N[11]=v||s&&s[11],N[12]=C||s&&s[12]||null,N[9]=D||s&&s[9]||null,N[6]=p,N[16]=2==o.type?s[16]:N,N}function zh(s,o,u,c,h){let p=s.data[o];if(null===p)p=j0(s,o,u,c,h),St.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const m=Gs();p.injectorIndex=null===m?-1:m.injectorIndex}return ui(p,!0),p}function j0(s,o,u,c,h){const p=yl(),m=Ra(),C=s.data[o]=function(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(m?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function Yh(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Kh(s,o,u){Pa(o);try{const c=s.viewQuery;null!==c&&sb(1,c,u);const h=s.template;null!==h&&yd(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&H0(s,o),s.staticViewQueries&&sb(2,s.viewQuery,u);const p=s.components;null!==p&&function(s,o){for(let u=0;u<o.length;u++)MN(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ko()}}function Pu(s,o,u,c){const h=o[2];if(256==(256&h))return;Pa(o);const p=bo();try{ml(o),function(s){St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&yd(s,o,u,2,c);const m=3==(3&h);if(!p)if(m){const D=s.preOrderCheckHooks;null!==D&&qs(o,D,null)}else{const D=s.preOrderHooks;null!==D&&_r(o,D,0,null),Fa(o,0)}if(function(s){for(let o=E_(s);null!==o;o=TE(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(1024&h[2])&&au(p,1),h[2]|=1024}}}(o),function(s){for(let o=E_(s);null!==o;o=TE(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];gl(c)&&Pu(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&H0(s,o),!p)if(m){const D=s.contentCheckHooks;null!==D&&qs(o,D)}else{const D=s.contentHooks;null!==D&&_r(o,D,1),Fa(o,1)}!function(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Oa(~h);else{const p=h,m=u[++c],v=u[++c];ka(m,p),v(2,o[p])}}}finally{Oa(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let u=0;u<o.length;u++)eb(s,o[u])}(o,v);const C=s.viewQuery;if(null!==C&&sb(2,C,c),!p)if(m){const D=s.viewCheckHooks;null!==D&&qs(o,D)}else{const D=s.viewHooks;null!==D&&_r(o,D,2),Fa(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,au(o[3],-1))}finally{Ko()}}function V_(s,o,u,c){const h=o[10],p=!bo(),m=yh(o);try{p&&!m&&h.begin&&h.begin(),m&&Kh(s,o,c),Pu(s,o,u,c)}finally{p&&!m&&h.end&&h.end()}}function yd(s,o,u,c,h){const p=jr(),m=2&c;try{Oa(-1),m&&o.length>20&&P_(s,o,20,bo()),u(c,h)}finally{Oa(p)}}function ZE(s,o,u){if(Tc(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const m=s.data[p];m.contentQueries&&m.contentQueries(1,u[p],p)}}}function vd(s,o,u){!Oc()||(function(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||Qo(u,o),Pi(c,o);const m=u.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],D=us(C);D&&NN(o,u,C);const N=Yn(o,s,v,u);Pi(N,o),null!==m&&oD(0,v-h,N,C,0,m),D&&(kr(u.index,o)[8]=N)}}(s,o,u,Sn(u,o)),128==(128&u.flags)&&function(s,o,u){const c=u.directiveStart,h=u.directiveEnd,m=u.index,v=St.lFrame.currentDirectiveIndex;try{Oa(m);for(let C=c;C<h;C++){const D=s.data[C],N=o[C];Yo(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&tD(D,N)}}finally{Oa(-1),Yo(v)}}(s,o,u))}function G0(s,o,u=Sn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const m=c[p+1],v=-1===m?u(o,s):s[m];s[h++]=v}}}function zE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ou(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ou(s,o,u,c,h,p,m,v,C,D){const N=20+c,P=N+h,L=function(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:$t);return u}(N,P),K="function"==typeof D?D():D;return L[1]={type:s,blueprint:L,template:u,queries:null,viewQuery:v,declTNode:o,data:L.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function Z0(s,o,u,c){const h=ob(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&ab(s).push(c,h.length-1))}function z0(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Fs(s,o,u,c,h,p,m,v){const C=Sn(o,u);let N,D=o.inputs;!v&&null!=D&&(N=D[c])?(dD(s,u,N,c,h),cl(o)&&function(s,o){const u=kr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=m?m(h,o.value||"",c):h,Rn(p)?p.setProperty(C,c,h):Ns(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function Jp(s,o,u,c){let h=!1;if(Oc()){const p=function(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const m=c[p];FE(u,m.selectors,!1)&&(h||(h=[]),En(Qo(u,o),s,m.type),us(m)?(J0(s,u),h.unshift(m)):h.push(m))}return h}(s,o,u),m=null===c?null:{"":-1};if(null!==p){h=!0,iD(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const P=p[N];P.providersResolver&&P.providersResolver(P)}let v=!1,C=!1,D=Yh(s,o,p.length,null);for(let N=0;N<p.length;N++){const P=p[N];u.mergedAttrs=Zc(u.mergedAttrs,P.hostAttrs),sD(s,u,o,D,P),rD(D,P,m),null!==P.contentQueries&&(u.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=128);const L=P.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),D++}!function(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,m=[];let v=null,C=null;for(let D=o.directiveStart;D<c;D++){const N=h[D],P=N.inputs,L=null===p||P0(o)?null:aD(P,p);m.push(L),v=z0(P,D,v),C=z0(N.outputs,D,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=m,o.inputs=v,o.outputs=C}(s,u)}m&&function(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new Se("301",`Export of name '${o[h+1]}' not found!`);c.push(o[h],p)}}}(u,c,m)}return u.mergedAttrs=Zc(u.mergedAttrs,u.attrs),h}function XE(s,o,u,c,h,p){const m=p.hostBindings;if(m){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=C&&v.push(C),v.push(c,h,m)}}function tD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function J0(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function rD(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;us(o)&&(u[""]=s)}}function iD(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function sD(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=js(h.type)),m=new Co(p,us(h),null);s.blueprint[c]=m,u[c]=m,XE(s,o,0,c,Yh(s,u,h.hostVars,$t),h)}function NN(s,o,u){const c=Sn(o,s),h=zE(u),p=s[10],m=Fu(s,Qp(s,h,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=m}function X0(s,o,u,c,h,p,m){if(null==p)Rn(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const v=null==m?ce(p):m(p,c||"",h);Rn(s)?s.setAttribute(o,h,v,u):u?o.setAttributeNS(u,h,v):o.setAttribute(h,v)}}function oD(s,o,u,c,h,p){const m=p[o];if(null!==m){const v=c.setInput;for(let C=0;C<m.length;){const D=m[C++],N=m[C++],P=m[C++];null!==v?c.setInput(u,P,D,N):u[N]=P}}}function aD(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function lD(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function eb(s,o){const u=kr(o,s);if(gl(u)){const c=u[1];80&u[2]?Pu(c,u,c.template,u[8]):u[5]>0&&tb(u)}}function tb(s){for(let c=E_(s);null!==c;c=TE(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const m=p[1];Pu(m,p,m.template,p[8])}else p[5]>0&&tb(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=kr(u[c],s);gl(h)&&h[5]>0&&tb(h)}}function MN(s,o){const u=kr(o,s),c=u[1];(function(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Kh(c,u,u[8])}function Fu(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function eg(s){for(;s;){s[2]|=64;const o=Zp(s);if(cs(s)&&!o)return s;s=o}return null}function rb(s,o,u){const c=o[10];c.begin&&c.begin();try{Pu(s,o,s.template,u)}catch(h){throw ub(o,h),h}finally{c.end&&c.end()}}function uD(s){!function(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=y0(u),h=c[1];V_(h,c,h.template,u)}}(s[8])}function sb(s,o,u){wo(0),o(s,u)}const PN=(()=>Promise.resolve(null))();function ob(s){return s[7]||(s[7]=[])}function ab(s){return s.cleanup||(s.cleanup=[])}function ub(s,o){const u=s[9],c=u?u.get(Hh,null):null;c&&c.handleError(o)}function dD(s,o,u,c,h){for(let p=0;p<u.length;){const m=u[p++],v=u[p++],C=o[m],D=s.data[m];null!==D.setInput?D.setInput(C,h,c,v):C[v]=h}}function Xa(s,o,u){const c=ou(o,s);IE(s[11],c,u)}function tg(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?p=v:1==p?h=J(h,v):2==p&&(c=J(c,v+": "+o[++m]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const bd=new Hn("INJECTOR",-1);class Pn{get(o,u=tn){if(u===tn){const c=new Error(`NullInjectorError: No provider for ${ee(o)}!`);throw c.name="NullInjectorError",c}return u}}const mn=new Hn("Set Injector scope."),Wt={},Lu={};let jn;function $_(){return void 0===jn&&(jn=new Pn),jn}function Jh(s,o=null,u=null,c){return new fD(s,u,o||$_(),c)}class fD{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&Rs(u,v=>this.processProvider(v,o,u)),Rs([o],v=>this.processInjectorType(v,[],p)),this.records.set(bd,Vu(void 0,this));const m=this.records.get(mn);this.scope=null!=m?m.value:null,this.source=h||("object"==typeof o?null:ee(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=tn,c=ot.Default){this.assertNotDestroyed();const h=Lt(this),p=Gn(void 0);try{if(!(c&ot.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof Hn)&&rn(o);v=C&&this.injectableDefInScope(C)?Vu(rr(o),Wt):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(c&ot.Self?$_():this.parent).get(o,u=c&ot.Optional&&u===tn?null:u)}catch(m){if("NullInjectorError"===m.name){if((m[Ir]=m[Ir]||[]).unshift(ee(o)),h)throw m;return fs(m,o,"R3InjectorError",this.source)}throw m}finally{Gn(p),Lt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(ee(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,c){if(!(o=j(o)))return!1;let h=si(o);const p=null==h&&o.ngModule||void 0,m=void 0===p?o:p,v=-1!==c.indexOf(m);if(void 0!==p&&(h=si(p)),null==h)return!1;if(null!=h.imports&&!v){let N;c.push(m);try{Rs(h.imports,P=>{this.processInjectorType(P,u,c)&&(void 0===N&&(N=[]),N.push(P))})}finally{}if(void 0!==N)for(let P=0;P<N.length;P++){const{ngModule:L,providers:K}=N[P];Rs(K,X=>this.processProvider(X,L,K||bt))}}this.injectorDefTypes.add(m);const C=js(m)||(()=>new m);this.records.set(m,Vu(C,Wt));const D=h.providers;if(null!=D&&!v){const N=o;Rs(D,P=>this.processProvider(P,N,D))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let h=Xh(o=j(o))?o:j(o&&o.provide);const p=Js(s=o)?Vu(void 0,s.useValue):Vu(pD(s),Wt);var s;if(Xh(o)||!0!==o.multi)this.records.get(h);else{let m=this.records.get(h);m||(m=Vu(void 0,Wt,!0),m.factory=()=>Sl(m.multi),this.records.set(h,m)),h=o,m.multi.push(o)}this.records.set(h,p)}hydrate(o,u){return u.value===Wt&&(u.value=Lu,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(s=u.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const u=j(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function rr(s){const o=rn(s),u=null!==o?o.factory:js(s);if(null!==u)return u;if(s instanceof Hn)throw new Error(`Token ${ee(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=xo(o,"?");throw new Error(`Can't resolve all parameters for ${ee(s)}: (${c.join(", ")}).`)}const u=function(s){const o=s&&(s[hr]||s[fr]);if(o){const u=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function pD(s,o,u){let c;if(Xh(s)){const h=j(s);return js(h)||rr(h)}if(Js(s))c=()=>j(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Sl(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>Jn(j(s.useExisting));else{const h=j(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return js(h)||rr(h);c=()=>new h(...Sl(s.deps))}return c}function Vu(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Js(s){return null!==s&&"object"==typeof s&&Ps in s}function Xh(s){return"function"==typeof s}const db=function(s,o,u){return function(s,o=null,u=null,c){const h=Jh(s,o,u,c);return h._resolveInjectorDefTypes(),h}({name:u},o,s,u)};let br=(()=>{class s{static create(u,c){return Array.isArray(u)?db(u,c,""):db(u.providers,u.parent,u.name||"")}}return s.THROW_IF_NOT_FOUND=tn,s.NULL=new Pn,s.\u0275prov=wt({token:s,providedIn:"any",factory:()=>Jn(bd)}),s.__NG_ELEMENT_ID__=-1,s})();function yb(s,o){fu(y0(s)[1],Un())}function bb(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(us(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(u){c.push(h);const m=s;m.inputs=G_(s.inputs),m.declaredInputs=G_(s.declaredInputs),m.outputs=G_(s.outputs);const v=h.hostBindings;v&&sg(s,v);const C=h.viewQuery,D=h.contentQueries;if(C&&ID(s,C),D&&nf(s,D),de(s.inputs,h.inputs),de(s.declaredInputs,h.declaredInputs),de(s.outputs,h.outputs),us(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let m=0;m<p.length;m++){const v=p[m];v&&v.ngInherit&&v(s),v===bb&&(u=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Zc(h.hostAttrs,u=Zc(u,h.hostAttrs))}}(c)}function G_(s){return s===sn?{}:s===bt?[]:s}function ID(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function nf(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function sg(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Uu=null;function rf(){if(!Uu){const s=It.Symbol;if(s&&s.iterator)Uu=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Uu=c)}}}return Uu}class ga{constructor(o){this.wrapped=o}static wrap(o){return new ga(o)}static unwrap(o){return ga.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof ga}}function lg(s){return!!Eb(s)&&(Array.isArray(s)||!(s instanceof Map)&&rf()in s)}function Eb(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ro(s,o,u){return s[o]=u}function di(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function $u(s,o,u,c){const h=di(s,o,u);return di(s,o+1,c)||h}function Db(s,o,u,c){const h=Me();return di(h,xi(),o)&&(Yt(),function(s,o,u,c,h,p){const m=Sn(s,o);X0(o[11],m,p,s.value,u,c,h)}($n(),h,s,o,u,c)),Db}function ma(s,o,u,c){return di(s,xi(),u)?o+ce(u)+c:$t}function sf(s,o,u,c,h,p,m,v,C,D){const P=function(s,o,u,c,h,p){const m=$u(s,o,u,c);return $u(s,o+2,h,p)||m}(s,Ni(),u,h,m,C);return Mi(4),P?o+ce(u)+c+ce(h)+p+ce(m)+v+ce(C)+D:$t}function AD(s,o,u,c,h,p,m,v){const C=Me(),D=Yt(),N=s+20,P=D.firstCreatePass?function(s,o,u,c,h,p,m,v,C){const D=o.consts,N=zh(o,s,4,m||null,mr(D,v));Jp(o,u,N,mr(D,C)),fu(o,N);const P=N.tViews=Ou(2,N,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,N),P.queries=o.queries.embeddedTView(N)),N}(N,D,C,o,u,c,h,p,m):D.data[N];ui(P,!1);const L=C[11].createComment("");zp(D,C,L,P),Pi(L,C),Fu(C,C[N]=lD(L,C,L,P)),_i(P)&&vd(D,C,P),null!=m&&G0(C,P,v)}function df(s){return xa(St.lFrame.contextLView,20+s)}function pg(s,o=ot.Default){const u=Me();return null===u?Jn(s,o):xs(Un(),u,j(s),o)}function ty(s,o,u){const c=Me();return di(c,xi(),o)&&Fs(Yt(),$n(),c,s,o,c[11],u,!1),ty}function ff(s,o,u,c,h){const m=h?"class":"style";dD(s,u,o.inputs[m],m,c)}function ny(s,o,u,c){const h=Me(),p=Yt(),m=20+s,v=h[11],C=h[m]=I0(v,o,St.lFrame.currentNamespace),D=p.firstCreatePass?function(s,o,u,c,h,p,m){const v=o.consts,D=zh(o,s,2,h,mr(v,p));return Jp(o,u,D,mr(v,m)),null!==D.attrs&&tg(D,D.attrs,!1),null!==D.mergedAttrs&&tg(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(m,p,h,0,o,u,c):p.data[m];ui(D,!0);const N=D.mergedAttrs;null!==N&&Ch(v,C,N);const P=D.classes;null!==P&&R0(v,C,P);const L=D.styles;null!==L&&PE(v,C,L),64!=(64&D.flags)&&zp(p,h,C,D),0===St.lFrame.elementDepthCount&&Pi(C,h),St.lFrame.elementDepthCount++,_i(D)&&(vd(p,h,D),ZE(p,D,h)),null!==c&&G0(h,D)}function kb(){let s=Un();Ra()?vl():(s=s.parent,ui(s,!1));const o=s;St.lFrame.elementDepthCount--;const u=Yt();u.firstCreatePass&&(fu(u,s),Tc(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&ff(u,o,Me(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&ff(u,o,Me(),o.stylesWithoutHost,!1)}function Pb(s,o,u,c){ny(s,o,u,c),kb()}function Ob(s,o,u){const c=Me(),h=Yt(),p=s+20,m=h.firstCreatePass?function(s,o,u,c,h){const p=o.consts,m=mr(p,c),v=zh(o,s,8,"ng-container",m);return null!==m&&tg(v,m,!0),Jp(o,u,v,mr(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,c,o,u):h.data[p];ui(m,!0);const v=c[p]=c[11].createComment("");zp(h,c,v,m),Pi(v,c),_i(m)&&(vd(h,c,m),ZE(h,m,c)),null!=u&&G0(c,m)}function Fb(){let s=Un();const o=Yt();Ra()?vl():(s=s.parent,ui(s,!1)),o.firstCreatePass&&(fu(o,s),Tc(s)&&o.queries.elementEnd(s))}function $D(){return Me()}function Lb(s){return!!s&&"function"==typeof s.then}function HD(s){return!!s&&"function"==typeof s.subscribe}const ry=HD;function Vb(s,o,u,c){const h=Me(),p=Yt(),m=Un();return function(s,o,u,c,h,p,m,v){const C=_i(c),N=s.firstCreatePass&&ab(s),P=o[8],L=ob(o);let K=!0;if(3&c.type||v){const le=Sn(c,o),Fe=v?v(le):le,Ie=L.length,vt=v?Qe=>v(In(Qe[c.index])):c.index;if(Rn(u)){let Qe=null;if(!v&&C&&(Qe=function(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const m=h[p];if(m===u&&h[p+1]===c){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof m&&(p+=2)}return null}(s,o,h,c.index)),null!==Qe)(Qe.__ngLastListenerFn__||Qe).__ngNextListenerFn__=p,Qe.__ngLastListenerFn__=p,K=!1;else{p=pf(c,o,P,p,!1);const fn=u.listen(Fe,h,p);L.push(p,fn),N&&N.push(h,vt,Ie,Ie+1)}}else p=pf(c,o,P,p,!0),Fe.addEventListener(h,p,m),L.push(p),N&&N.push(h,vt,Ie,m)}else p=pf(c,o,P,p,!1);const X=c.outputs;let ge;if(K&&null!==X&&(ge=X[h])){const le=ge.length;if(le)for(let Fe=0;Fe<le;Fe+=2){const Br=o[ge[Fe]][ge[Fe+1]].subscribe(p),ns=L.length;L.push(p,Br),N&&N.push(h,c.index,ns,-(ns+1))}}}(p,h,h[11],m,s,o,!!u,c),Vb}function Ub(s,o,u,c){try{return!1!==u(c)}catch(h){return ub(s,h),!1}}function pf(s,o,u,c,h){return function p(m){if(m===Function)return c;const v=2&s.flags?kr(s.index,o):o;0==(32&o[2])&&eg(v);let C=Ub(o,0,c,m),D=p.__ngNextListenerFn__;for(;D;)C=Ub(o,0,D,m)&&C,D=D.__ngNextListenerFn__;return h&&!1===C&&(m.preventDefault(),m.returnValue=!1),C}}function $b(s=1){return function(s){return(St.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,St.lFrame.contextLView))[8]}(s)}function lx(s,o){let u=null;const c=function(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?FE(s,p,!0):LO(c,p))return h}else u=h}return u}function qD(s){const o=Me()[16][6];if(!o.projection){const c=o.projection=xo(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const m=s?lx(p,s):0;null!==m&&(h[m]?h[m].projectionNext=p:c[m]=p,h[m]=p),p=p.next}}}function WD(s,o=0,u){const c=Me(),h=Yt(),p=zh(h,20+s,16,null,u||null);null===p.projection&&(p.projection=o),vl(),64!=(64&p.flags)&&function(s,o,u){Ru(o[11],0,o,u,AE(s,u,o),N_(u.parent||o[6],u,o))}(h,c,p)}function gg(s,o,u){return mg(s,"",o,"",u),gg}function mg(s,o,u,c,h){const p=Me(),m=ma(p,o,u,c);return m!==$t&&Fs(Yt(),$n(),p,s,m,p[11],h,!1),mg}function YD(s,o,u,c,h){const p=s[u+1],m=null===o;let v=c?ua(p):Pl(p),C=!1;for(;0!==v&&(!1===C||m);){const N=s[v+1];KD(s[v],o)&&(C=!0,s[v+1]=c?L0(N):pd(N)),v=c?ua(N):Pl(N)}C&&(s[u+1]=c?pd(p):L0(p))}function KD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ja(s,o)>=0}const qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function QD(s){return s.substring(qr.key,qr.keyEnd)}function JD(s,o){const u=qr.textEnd;return u===o?-1:(o=qr.keyEnd=function(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,qr.key=o,u),gf(s,o,u))}function gf(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function sy(s,o,u){return to(s,o,u,!1),sy}function oy(s,o){return to(s,o,null,!0),oy}function ly(s){ya(vr,ko,s,!0)}function ko(s,o){for(let u=function(s){return function(s){qr.key=0,qr.keyEnd=0,qr.value=0,qr.valueEnd=0,qr.textEnd=s.length}(s),JD(s,gf(s,0,qr.textEnd))}(o);u>=0;u=JD(o,u))vr(s,QD(o),!0)}function to(s,o,u,c){const h=Me(),p=Yt(),m=Mi(2);p.firstUpdatePass&&tT(p,s,m,c),o!==$t&&di(h,m,o)&&uy(p,p.data[jr()],h,h[11],s,h[m+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ee(ia(s)))),s}(o,u),c,m)}function ya(s,o,u,c){const h=Yt(),p=Mi(2);h.firstUpdatePass&&tT(h,null,p,c);const m=Me();if(u!==$t&&di(m,p,u)){const v=h.data[jr()];if(Ku(v,c)&&!mf(h,p)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(u=J(C,u||"")),ff(h,v,m,u,c)}else!function(s,o,u,c,h,p,m,v){h===$t&&(h=bt);let C=0,D=0,N=0<h.length?h[0]:null,P=0<p.length?p[0]:null;for(;null!==N||null!==P;){const L=C<h.length?h[C+1]:void 0,K=D<p.length?p[D+1]:void 0;let ge,X=null;N===P?(C+=2,D+=2,L!==K&&(X=P,ge=K)):null===P||null!==N&&N<P?(C+=2,X=N):(D+=2,X=P,ge=K),null!==X&&uy(s,o,u,c,X,ge,m,v),N=C<h.length?h[C]:null,P=D<p.length?p[D]:null}}(h,v,m,m[11],m[p+1],m[p+1]=function(s,o,u){if(null==u||""===u)return bt;const c=[],h=ia(u);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,p)}}function mf(s,o){return o>=s.expandoStartIndex}function tT(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[jr()],m=mf(s,u);Ku(p,c)&&null===o&&!m&&(o=!1),o=function(s,o,u,c){const h=function(s){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=_f(u=zb(null,s,o,u,c),o.attrs,c),p=null);else{const m=o.directiveStylingLast;if(-1===m||s[m]!==h)if(u=zb(h,s,o,u,c),null===p){let C=function(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Pl(c))return s[ua(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=zb(null,s,o,C[1],c),C=_f(C,o.attrs,c),function(s,o,u,c){s[ua(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=_f(c,s[p].hostAttrs,u);return _f(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function(s,o,u,c,h,p){let m=p?o.classBindings:o.styleBindings,v=ua(m),C=Pl(m);s[c]=u;let N,D=!1;if(Array.isArray(u)){const P=u;N=P[1],(null===N||ja(P,N)>0)&&(D=!0)}else N=u;if(h)if(0!==C){const L=ua(s[v+1]);s[c+1]=O_(L,v),0!==L&&(s[L+1]=F0(s[L+1],c)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],c)}else s[c+1]=O_(v,0),0!==v&&(s[v+1]=F0(s[v+1],c)),v=c;else s[c+1]=O_(C,0),0===v?v=c:s[C+1]=F0(s[C+1],c),C=c;D&&(s[c+1]=pd(s[c+1])),YD(s,N,c,!0),YD(s,N,c,!1),function(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&ja(p,o)>=0&&(u[c+1]=L0(u[c+1]))}(o,N,s,c,p),m=O_(v,C),p?o.classBindings=m:o.styleBindings=m}(h,p,o,u,m,c)}}function zb(s,o,u,c,h){let p=null;const m=u.directiveEnd;let v=u.directiveStylingLast;for(-1===v?v=u.directiveStart:v++;v<m&&(p=o[v],c=_f(c,p.hostAttrs,h),p!==s);)v++;return null!==s&&(u.directiveStylingLast=v),c}function _f(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const m=o[p];"number"==typeof m?h=m:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vr(s,m,!!u||o[++p]))}return void 0===s?null:s}function uy(s,o,u,c,h,p,m,v){if(!(3&o.type))return;const C=s.data,D=C[v+1];yf(function(s){return 1==(1&s)}(D)?cy(C,o,u,h,Pl(D),m):void 0)||(yf(p)||function(s){return 2==(2&s)}(D)&&(p=cy(C,null,u,h,v,m)),function(s,o,u,c,h){const p=Rn(s);if(o)h?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let m=-1===c.indexOf("-")?void 0:Qa.DashCase;if(null==h)p?s.removeStyle(u,c,m):u.style.removeProperty(c);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),m|=Qa.Important),p?s.setStyle(u,c,h,m):u.style.setProperty(c,h,v?"important":"")}}}(c,m,ou(jr(),u),h,p))}function cy(s,o,u,c,h,p){const m=null===o;let v;for(;h>0;){const C=s[h],D=Array.isArray(C),N=D?C[1]:C,P=null===N;let L=u[h+1];L===$t&&(L=P?bt:void 0);let K=P?lr(L,c):N===c?L:void 0;if(D&&!yf(K)&&(K=lr(C,c)),yf(K)&&(v=K,m))return v;const X=s[h+1];h=m?ua(X):Pl(X)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=lr(C,c))}return v}function yf(s){return void 0!==s}function Ku(s,o){return 0!=(s.flags&(o?16:32))}function hy(s,o=""){const u=Me(),c=Yt(),h=s+20,p=c.firstCreatePass?zh(c,h,1,o,null):c.data[h],m=u[h]=D_(u[11],o);zp(c,u,m,p),ui(p,!1)}function fy(s){return py("",s,""),fy}function py(s,o,u){const c=Me(),h=ma(c,s,o,u);return h!==$t&&Xa(c,jr(),h),py}function vf(s,o,u,c,h){const p=Me(),m=function(s,o,u,c,h,p){const v=$u(s,Ni(),u,h);return Mi(2),v?o+ce(u)+c+ce(h)+p:$t}(p,s,o,u,c,h);return m!==$t&&Xa(p,jr(),m),vf}function uT(s,o,u,c,h,p,m,v,C){ya(vr,ko,sf(Me(),s,o,u,c,h,p,m,v,C),!0)}function yy(s,o,u){const c=Me();return di(c,xi(),o)&&Fs(Yt(),$n(),c,s,o,c[11],u,!0),yy}const Nd=void 0;var vy=["en",[["a","p"],["AM","PM"],Nd],[["AM","PM"],Nd,Nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nd,"{1} 'at' {0}",Nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Cf={};function iw(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=sw(o);if(u)return u;const c=o.split("-")[0];if(u=sw(c),u)return u;if("en"===c)return vy;throw new Error(`Missing locale data for the locale "${s}".`)}function _T(s){return iw(s)[At.PluralCase]}function sw(s){return s in Cf||(Cf[s]=It.ng&&It.ng.common&&It.ng.common.locales&&It.ng.common.locales[s]),Cf[s]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const ow=["zero","one","two","few","many"],by="en-US",va={marker:"element"},wy={marker:"ICU"};var wr=(()=>((wr=wr||{})[wr.SHIFT=2]="SHIFT",wr[wr.APPEND_EAGERLY=1]="APPEND_EAGERLY",wr[wr.COMMENT=2]="COMMENT",wr))();let vT=by;function Qu(s){(function(s,o){null==s&&yt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(vT=s.toLowerCase().replace(/_/g,"-"))}function lw(s,o,u){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?x_(s,0,u):In(u[h])}function uw(s,o,u,c,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let m=c,v=null;if(3&o.type||(v=m,m=h),null!==m&&0==(2&o.flags))for(let C=1;C<p.length;C++)Mu(s,m,u[p[C]],v,!1)}}function cw(s,o){if(s.push(o),s.length>1)for(let u=s.length-2;u>=0;u--){const c=s[u];Dg(c)||dw(c,o)&&null===hw(c)&&Ex(c,o.index)}}function Dg(s){return!(64&s.type)}function dw(s,o){return Dg(o)||s.index>o.index}function hw(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function Ex(s,o){const u=s.insertBeforeIndex;Array.isArray(u)?u[0]=o:(RE(lw,uw),s.insertBeforeIndex=o)}function Tg(s,o){const u=s.data[o];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function bT(s,o,u){const c=j0(s,u,64,null,null);return cw(o,c),c}function Ig(s,o){const u=o[s.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function pw(s){return s>>>17}function gw(s){return(131070&s)>>>1}let Oo=0,Ju=0;function mw(s,o,u,c){const h=u[11];let m,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const D=o[++v];null===u[D]&&(u[D]=D_(h,C))}else if("number"==typeof C)switch(1&C){case 0:const D=pw(C);let N,P;if(null===p&&(p=D,m=S_(h,c)),D===p?(N=c,P=m):(N=null,P=In(u[D])),null!==P){const ge=gw(C);Mu(h,P,u[ge],N,!1);const Fe=Tg(s,ge);if(null!==Fe&&"object"==typeof Fe){const Ie=Ig(Fe,u);null!==Ie&&mw(s,Fe.create[Ie],u,u[Fe.anchorIdx])}}break;case 1:const K=o[++v],X=o[++v];X0(h,ou(C>>>1,u),null,null,K,X,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case wy:const D=o[++v],N=o[++v];null===u[N]&&Pi(u[N]=tN(h,D),u);break;case va:const P=o[++v],L=o[++v];null===u[L]&&Pi(u[L]=I0(h,P,null),u)}}}function Xu(s,o,u,c,h){for(let p=0;p<u.length;p++){const m=u[p],v=u[++p];if(m&h){let C="";for(let D=p+1;D<=p+v;D++){const N=u[D];if("string"==typeof N)C+=N;else if("number"==typeof N)if(N<0)C+=ce(o[c-N]);else{const P=N>>>2;switch(3&N){case 1:const L=u[++D],K=u[++D],X=s.data[P];"string"==typeof X?X0(o[11],o[P],null,X,L,C,K):Fs(s,X,o,L,C,o[11],K,!1);break;case 0:const ge=o[P];null!==ge&&IE(o[11],ge,C);break;case 2:Ix(s,Tg(s,P),o,C);break;case 3:Tx(s,Tg(s,P),c,o)}}}}else{const C=u[p+1];if(C>0&&3==(3&C)){const N=Tg(s,C>>>2);o[N.currentCaseLViewIndex]<0&&Tx(s,N,c,o)}}p+=v}}function Tx(s,o,u,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let p=Oo;h<0&&(h=c[o.currentCaseLViewIndex]=~h,p=-1),Xu(s,c,o.update[h],u,p)}}function Ix(s,o,u,c){const h=function(s,o){let u=s.cases.indexOf(o);if(-1===u)switch(s.type){case 1:{const c=function(s,o){const u=_T(o)(parseInt(s,10)),c=ow[u];return void 0!==c?c:"other"}(o,vT);u=s.cases.indexOf(c),-1===u&&"other"!==c&&(u=s.cases.indexOf("other"));break}case 0:u=s.cases.indexOf("other")}return-1===u?null:u}(o,c);if(Ig(o,u)!==h&&(CT(s,o,u),u[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const m=u[o.anchorIdx];m&&mw(s,o.create[h],u,m)}}function CT(s,o,u){let c=Ig(o,u);if(null!==c){const h=o.remove[c];for(let p=0;p<h.length;p++){const m=h[p];if(m>0){const v=ou(m,u);null!==v&&M0(u[11],v)}else CT(s,Tg(s,~m),u)}}}function Sx(){const s=[];let u,c,o=-1;function p(v,C){o=0;const D=Ig(v,C);c=null!==D?v.remove[D]:bt}function m(){if(o<c.length){const v=c[o++];return v>0?u[v]:(s.push(o,c),p(u[1].data[~v],u),m())}return 0===s.length?null:(c=s.pop(),o=s.pop(),m())}return function(v,C){for(u=C;s.length;)s.pop();return p(v.value,C),m}}const ec=/\ufffd(\d+):?\d*\ufffd/gi,ET=/\ufffd(\d+)\ufffd/,bw=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,DT=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,TT=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ba=/\uE500/g;function ST(s,o,u,c,h,p,m){const v=Yh(s,c,1,null);let C=v<<wr.SHIFT,D=Gs();o===D&&(D=null),null===D&&(C|=wr.APPEND_EAGERLY),m&&(C|=wr.COMMENT,function(s){void 0===D0&&(D0=s())}(Sx)),h.push(C,null===p?"":p);const N=j0(s,v,m?32:1,null===p?"":p,null);cw(u,N);const P=N.index;return ui(N,!1),null!==D&&o!==D&&function(s,o){let u=s.insertBeforeIndex;null===u?(RE(lw,uw),u=s.insertBeforeIndex=[null,o]):(function(s,o,u){s!=o&&yt(u,s,o,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(o))}(D,P),N}function Nx(s,o,u,c,h,p,m){const v=m.match(ec),C=ST(s,o,u,p,c,v?null:m,!1);v&&Tf(h,m,C.index,null,0,null)}function Tf(s,o,u,c,h,p){const m=s.length,v=m+1;s.push(null,null);const C=m+2,D=o.split(ec);let N=0;for(let P=0;P<D.length;P++){const L=D[P];if(1&P){const K=h+parseInt(L,10);s.push(-1-K),N|=NT(K)}else""!==L&&s.push(L)}return s.push(u<<2|(c?1:0)),c&&s.push(c,p),s[m]=N,s[v]=s.length-C,N}function NT(s){return 1<<Math.min(s,31)}function xT(s){let o,p,u="",c=0,h=!1;for(;null!==(o=DT.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,h=!1):(u+=s.substring(c,o.index+o[0].length),p=o[1],h=!0);return u+=s.substr(c),u}function MT(s,o,u,c,h,p){let m=0;const v={type:h.type,currentCaseLViewIndex:Yh(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,u){s.push(NT(o.mainBinding),2,-1-o.mainBinding,u<<2|2)})(u,h,p),function(s,o,u){const c=s.data[o];null===c?s.data[o]=u:c.value=u}(s,p,v);const C=h.values;for(let D=0;D<C.length;D++){const N=C[D],P=[];for(let L=0;L<N.length;L++){const K=N[L];if("string"!=typeof K){const X=P.push(K)-1;N[L]=`\x3c!--\ufffd${X}\ufffd--\x3e`}}m=Px(s,v,o,u,c,h.cases[D],N.join(""),P)|m}m&&function(s,o,u){s.push(o,1,u<<2|3)}(u,m,p)}function kx(s){const o=[],u=[];let c=1,h=0;const p=ww(s=s.replace(bw,function(m,v,C){return c="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let m=0;m<p.length;){let v=p[m++].trim();1===c&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=ww(p[m++]);o.length>u.length&&u.push(C)}return{type:c,mainBinding:h,cases:o,values:u}}function ww(s){if(!s)return[];let o=0;const u=[],c=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(u.pop(),0==u.length){const C=s.substring(o,v);bw.test(C)?c.push(kx(C)):c.push(C),o=v+1}}else{if(0==u.length){const C=s.substring(o,v);c.push(C),o=v+1}u.push("{")}}const m=s.substring(o);return c.push(m),c}function Px(s,o,u,c,h,p,m,v){const C=[],D=[],N=[];o.cases.push(p),o.create.push(C),o.remove.push(D),o.update.push(N);const L=Ph(su()).getInertBodyElement(m),K=yn(L)||L;return K?RT(s,o,u,c,C,D,N,K,h,v,0):0}function RT(s,o,u,c,h,p,m,v,C,D,N){let P=0,L=v.firstChild;for(;L;){const K=Yh(s,u,1,null);switch(L.nodeType){case Node.ELEMENT_NODE:const X=L,ge=X.tagName.toLowerCase();if(Bp.hasOwnProperty(ge)){Cw(h,va,ge,C,K),s.data[K]=ge;const vt=X.attributes;for(let Qe=0;Qe<vt.length;Qe++){const fn=vt.item(Qe),Br=fn.name.toLowerCase();fn.value.match(ec)?E.hasOwnProperty(Br)&&Tf(m,fn.value,K,fn.name,0,ad[Br]?Ya:b[Br]?Fh:null):Vx(h,K,fn)}P=RT(s,o,u,c,h,p,m,L,K,D,N+1)|P,kT(p,K,N)}break;case Node.TEXT_NODE:const le=L.textContent||"",Fe=le.match(ec);Cw(h,null,Fe?"":le,C,K),kT(p,K,N),Fe&&(P=Tf(m,le,K,null,0,null)|P);break;case Node.COMMENT_NODE:const Ie=ET.exec(L.textContent||"");if(Ie){const Qe=D[parseInt(Ie[1],10)];Cw(h,wy,"",C,K),MT(s,u,c,C,Qe,K),Ox(p,K,N)}}L=L.nextSibling}return P}function kT(s,o,u){0===u&&s.push(o)}function Ox(s,o,u){0===u&&(s.push(~o),s.push(o))}function Cw(s,o,u,c,h){null!==o&&s.push(o),s.push(u,h,function(s,o,u){return 0|o<<17|u<<1}(0,c,h))}function Vx(s,o,u){s.push(o<<1|1,u.name,u.value)}function FT(s,o,u=-1){const c=Yt(),h=Me(),p=20+s,m=mr(c.consts,o),v=Gs();c.firstCreatePass&&function(s,o,u,c,h,p){const m=Gs(),v=[],C=[],D=[[]],N=function(s){return s.replace(ba," ")}(h=function(s,o){if(function(s){return-1===s}(o))return xT(s);{const u=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return xT(s.substring(u,c))}}(h,p)).split(TT);for(let P=0;P<N.length;P++){let L=N[P];if(0==(1&P)){const K=ww(L);for(let X=0;X<K.length;X++){let ge=K[X];if(0==(1&X)){const le=ge;""!==le&&Nx(s,m,D[0],v,C,u,le)}else{const le=ge;if("object"!=typeof le)throw new Error(`Unable to parse ICU expression in "${h}" message.`);MT(s,u,C,o,le,ST(s,m,D[0],u,v,"",!0).index)}}}else{const K=47===L.charCodeAt(0),ge=(L.charCodeAt(K?1:0),20+Number.parseInt(L.substring(K?2:1)));if(K)D.shift(),ui(Gs(),!1);else{const le=bT(s,D[0],ge);D.unshift([]),ui(le,!0)}}}s.data[c]={create:v,update:C}}(c,null===v?0:v.index,h,p,m,u);const C=c.data[p],N=NE(c,v===h[6]?null:v,h);(function(s,o,u,c){const h=s[11];for(let p=0;p<o.length;p++){const m=o[p++],v=o[p],C=(m&wr.COMMENT)===wr.COMMENT,D=(m&wr.APPEND_EAGERLY)===wr.APPEND_EAGERLY,N=m>>>wr.SHIFT;let P=s[N];null===P&&(P=s[N]=C?h.createComment(v):D_(h,v)),D&&null!==u&&Mu(h,u,P,c,!1)}})(h,C.create,N,v&&8&v.type?h[v.index]:null),Vc(!0)}function LT(s,o,u){FT(s,o,u),Vc(!1)}function Dw(s){return function(s){s&&(Oo|=1<<Math.min(Ju,31)),Ju++}(di(Me(),xi(),s)),Dw}function VT(s){!function(s,o,u){if(Ju>0){const c=s.data[u];Xu(s,o,Array.isArray(c)?c:c.update,Ni()-Ju-1,Oo)}Oo=0,Ju=0}(Yt(),Me(),s+20)}function Tw(s,o,u,c,h){if(s=j(s),Array.isArray(s))for(let p=0;p<s.length;p++)Tw(s[p],o,u,c,h);else{const p=Yt(),m=Me();let v=Xh(s)?s:j(s.provide),C=pD(s);const D=Un(),N=1048575&D.providerIndexes,P=D.directiveStart,L=D.providerIndexes>>20;if(Xh(s)||!s.multi){const K=new Co(C,h,pg),X=Sw(v,o,h?N:N+L,P);-1===X?(En(Qo(D,m),p,v),Iw(p,s,o.length),o.push(v),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(K),m.push(K)):(u[X]=K,m[X]=K)}else{const K=Sw(v,o,N+L,P),X=Sw(v,o,N,N+L),ge=K>=0&&u[K],le=X>=0&&u[X];if(h&&!le||!h&&!ge){En(Qo(D,m),p,v);const Fe=function(s,o,u,c,h){const p=new Co(s,u,pg);return p.multi=[],p.index=o,p.componentProviders=0,BT(p,h,c&&!u),p}(h?oF:sF,u.length,h,c,C);!h&&le&&(u[X].providerFactory=Fe),Iw(p,s,o.length,0),o.push(v),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(Fe),m.push(Fe)}else Iw(p,s,K>-1?K:X,BT(u[h?X:K],C,!h&&c));!h&&c&&le&&u[X].componentProviders++}}}function Iw(s,o,u,c){const h=Xh(o);if(h||function(s){return!!s.useClass}(o)){const m=(o.useClass||o).prototype.ngOnDestroy;if(m){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(u);-1===C?v.push(u,[c,m]):v[C+1].push(c,m)}else v.push(u,m)}}}function BT(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Sw(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function sF(s,o,u,c){return Aw(this.multi,[])}function oF(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const m=this.providerFactory.componentProviders,v=Yn(u,u[1],this.providerFactory.index,c);p=v.slice(0,m),Aw(h,p);for(let C=m;C<v.length;C++)p.push(v[C])}else p=[],Aw(h,p);return p}function Aw(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function UT(s,o=[]){return u=>{u.providersResolver=(c,h)=>function(s,o,u){const c=Yt();if(c.firstCreatePass){const h=us(s);Tw(u,c.data,c.blueprint,h,!0),Tw(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class HT{}const GT="ngComponent";class tc{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${ee(s)}. Did you add it to @NgModule.entryComponents?`);return o[GT]=s,o}(o)}}let Vr=(()=>{class s{}return s.NULL=new tc,s})();function Ey(...s){}function If(s,o){return new nl(Sn(s,o))}const Qx=function(){return If(Un(),Me())};let nl=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=Qx,s})();function qT(s){return s instanceof nl?s.nativeElement:s}class Ag{}let Jx=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>zT(),s})();const zT=function(){const s=Me(),u=kr(Un().index,s);return function(s){return s[11]}(Mn(u)?u:s)};let YT=(()=>{class s{}return s.\u0275prov=wt({token:s,providedIn:"root",factory:()=>null}),s})();class KT{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Ng=new KT("12.2.16");class eM{constructor(){}supports(o){return lg(o)}create(o){return new tM(o)}}const uF=(s,o)=>o;class tM{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||uF}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const m=!c||u&&u.currentIndex<rM(c,h,p)?u:c,v=rM(m,h,p),C=m.currentIndex;if(m===c)h--,c=c._nextRemoved;else if(u=u._next,null==m.previousIndex)h++;else{p||(p=[]);const D=v-h,N=C-h;if(D!=N){for(let L=0;L<D;L++){const K=L<p.length?p[L]:p[L]=0,X=K+L;N<=X&&X<D&&(p[L]=K+1)}p[m.previousIndex]=N-D}}v!==C&&o(m,v,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!lg(o))throw new Error(`Error trying to diff '${ee(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,m,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],m=this._trackByFn(v,p),null!==u&&Object.is(u.trackById,m)?(c&&(u=this._verifyReinsertion(u,p,m,v)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,m,v),c=!0),u=u._next}else h=0,function(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[rf()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,v=>{m=this._trackByFn(h,v),null!==u&&Object.is(u.trackById,m)?(c&&(u=this._verifyReinsertion(u,v,m,h)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,m,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new dF(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new nM),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nM),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class dF{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hF{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class nM{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new hF,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rM(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class iM{constructor(){}supports(o){return o instanceof Map||Eb(o)}create(){return new fF}}class fF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Eb(o)))throw new Error(`Error trying to diff '${ee(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,m=h._next;return p&&(p._next=m),m&&(m._prev=p),h._next=null,h._prev=null,h}const c=new pF(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class pF{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sM(){return new xg([new eM])}let xg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||sM()),deps:[[s,new Gr,new Wa]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:sM}),s})();function QT(){return new Wr([new iM])}let Wr=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||QT()),deps:[[s,new Gr,new Wa]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:QT}),s})();function Vs(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(In(p)),Wi(p))for(let v=10;v<p.length;v++){const C=p[v],D=C[1].firstChild;null!==D&&Vs(C[1],C,D,c)}const m=u.type;if(8&m)Vs(s,o,u.child,c);else if(32&m){const v=C_(u,o);let C;for(;C=v();)c.push(C)}else if(16&m){const v=N0(o,u);if(Array.isArray(v))c.push(...v);else{const C=Zp(o[16]);Vs(C[1],C,v,c,!0)}}u=h?u.projectionNext:u.next}return c}class nc{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Vs(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Wi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(I_(o,c),No(u,c))}this._attachedToViewContainer=!1}SE(this._lView[1],this._lView)}onDestroy(o){Z0(this._lView[1],this._lView,null,o)}markForCheck(){eg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rb(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,u){cu(!0);try{rb(s,o,u)}finally{cu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,fd(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class Nw extends nc{constructor(o){super(o),this._view=o}detectChanges(){uD(this._view)}checkNoChanges(){!function(s){cu(!0);try{uD(s)}finally{cu(!1)}}(this._view)}get context(){return null}}const lM=function(s){return function(s,o,u){if(cl(s)&&!u){const c=kr(s.index,o);return new nc(c,c)}return 47&s.type?new nc(o[16],o):null}(Un(),Me(),16==(16&s))};let JT=(()=>{class s{}return s.__NG_ELEMENT_ID__=lM,s})();const dM=[new iM],bs=new xg([new eM]),Iy=new Wr(dM),xw=function(){return Sy(Un(),Me())};let rc=(()=>{class s{}return s.__NG_ELEMENT_ID__=xw,s})();const Mw=rc,Rw=class extends Mw{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Qp(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),Kh(u,c,o),new nc(c)}};function Sy(s,o){return 4&s.type?new Rw(o,s,If(s,o)):null}class Rd{}class eI{}const tI=function(){return Pw(Un(),Me())};let kd=(()=>{class s{}return s.__NG_ELEMENT_ID__=tI,s})();const gM=kd,rI=class extends gM{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return If(this._hostTNode,this._hostLView)}get injector(){return new To(this._hostTNode,this._hostLView)}get parentInjector(){const o=ct(this._hostTNode,this._hostLView);if(El(o)){const u=zi(o,this._hostLView),c=Va(o);return new To(u[1].data[c+8],u)}return new To(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=iI(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,p){const m=c||this.parentInjector;if(!p&&null==o.ngModule&&m){const C=m.get(Rd,null);C&&(p=C)}const v=o.create(m,h,void 0,p);return this.insert(v.hostView,u),v}insert(o,u){const c=o._lView,h=c[1];if(Wi(c[3])){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const P=c[3],L=new rI(P,P[6],P[3]);L.detach(L.indexOf(o))}}const p=this._adjustIndex(u),m=this._lContainer;!function(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],ks(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const m=o[17];null!==m&&u!==m&&function(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(m,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,c,m,p);const v=x0(p,m),C=c[11],D=S_(C,m[7]);return null!==D&&function(s,o,u,c,h,p){c[0]=h,c[6]=o,fd(s,c,u,1,h,p)}(h,m[6],C,c,D,v),o.attachToViewContainerRef(),ks(kw(m),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=iI(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=I_(this._lContainer,u);c&&(No(kw(this._lContainer),u),SE(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=I_(this._lContainer,u);return c&&null!=No(kw(this._lContainer),u)?new nc(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function iI(s){return s[8]}function kw(s){return s[8]||(s[8]=[])}function Pw(s,o){let u;const c=o[s.index];if(Wi(c))u=c;else{let h;if(8&s.type)h=In(c);else{const p=o[11];h=p.createComment("");const m=Sn(s,o);Mu(p,S_(p,m),h,function(s,o){return Rn(s)?s.nextSibling(o):o.nextSibling}(p,m),!1)}o[s.index]=u=lD(c,o,h,s),Fu(o,u)}return new rI(u,s,o)}const xf={};class Mf extends Vr{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Ze(o);return new DI(u,this.ngModule)}}function EI(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const BM=new Hn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>bE});class DI extends HT{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=o.selectors.map(gN).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return EI(this.componentDef.inputs)}get outputs(){return EI(this.componentDef.outputs)}create(o,u,c,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(u,c,h)=>{const p=s.get(u,xf,h);return p!==xf||c===xf?p:o.get(u,c,h)}}}(o,h.injector):o,m=p.get(Ag,Ss),v=p.get(YT,null),C=m.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",N=c?function(s,o,u){if(Rn(s))return s.selectRootElement(o,u===qe.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):I0(m.createRenderer(null,this.componentDef),D,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(D)),P=this.componentDef.onPush?576:528,L=function(s,o){return{components:[],scheduler:s||bE,clean:PN,playerHandler:o||null,flags:0}}(),K=Ou(0,null,null,1,0,null,null,null,null,null),X=Qp(null,K,L,P,null,null,m,C,v,p);let ge,le;Pa(X);try{const Fe=function(s,o,u,c,h,p){const m=u[1];u[20]=s;const C=zh(m,20,2,"#host",null),D=C.mergedAttrs=o.hostAttrs;null!==D&&(tg(C,D,!0),null!==s&&(Ch(h,s,D),null!==C.classes&&R0(h,s,C.classes),null!==C.styles&&PE(h,s,C.styles)));const N=c.createRenderer(s,o),P=Qp(u,zE(o),null,o.onPush?64:16,u[20],C,c,N,p||null,null);return m.firstCreatePass&&(En(Qo(C,u),m,o.type),J0(m,C),iD(C,u.length,1)),Fu(u,P),u[20]=P}(N,this.componentDef,X,m,C);if(N)if(c)Ch(C,N,["ng-version",Ng.full]);else{const{attrs:Ie,classes:vt}=function(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!la(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ie&&Ch(C,N,Ie),vt&&vt.length>0&&R0(C,N,vt.join(" "))}if(le=As(K,20),void 0!==u){const Ie=le.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const Qe=u[vt];Ie.push(null!=Qe?Array.from(Qe):null)}}ge=function(s,o,u,c,h){const p=u[1],m=function(s,o,u){const c=Un();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),sD(s,c,o,Yh(s,o,1,null),u));const h=Yn(o,s,c.directiveStart,c);Pi(h,o);const p=Sn(c,o);return p&&Pi(p,o),h}(p,u,o);if(c.components.push(m),s[8]=m,h&&h.forEach(C=>C(m,o)),o.contentQueries){const C=Un();o.contentQueries(1,m,C.directiveStart)}const v=Un();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Oa(v.index),XE(u[1],v,0,v.directiveStart,v.directiveEnd,o),tD(o,m)),m}(Fe,this.componentDef,X,L,[yb]),Kh(K,X,null)}finally{Ko()}return new Li(this.componentType,ge,If(le,X),X,le)}}class Li extends class{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new Nw(h),this.componentType=o}get injector(){return new To(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const Rf=new Map;class n1 extends Rd{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Mf(this);const c=Tn(o),h=o[Et]||null;h&&Qu(h),this._bootstrapComponents=Ka(c.bootstrap),this._r3Injector=Jh(o,u,[{provide:Rd,useValue:this},{provide:Vr,useValue:this.componentFactoryResolver}],ee(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=br.THROW_IF_NOT_FOUND,c=ot.Default){return o===br||o===Rd||o===bd?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class kf extends eI{constructor(o){super(),this.moduleType=o,null!==Tn(o)&&function(s){const o=new Set;!function u(c){const h=Tn(c,!0),p=h.id;null!==p&&(function(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ee(o)} vs ${ee(o.name)}`)}(p,Rf.get(p),c),Rf.set(p,c));const m=Ka(h.imports);for(const v of m)o.has(v)||(o.add(v),u(v))}(s)}(o)}create(o){return new n1(this.moduleType,o)}}function Xi(s,o,u,c){return RI(Me(),sr(),s,o,u,c)}function Vy(s,o,u,c,h){return kI(Me(),sr(),s,o,u,c,h)}function es(s,o,u,c,h,p){return function(s,o,u,c,h,p,m,v){const C=o+u;return function(s,o,u,c,h){const p=$u(s,o,u,c);return di(s,o+2,h)||p}(s,C,h,p,m)?Ro(s,C+3,v?c.call(v,h,p,m):c(h,p,m)):Ld(s,C+3)}(Me(),sr(),s,o,u,c,h,p)}function Ld(s,o){const u=s[o];return u===$t?void 0:u}function RI(s,o,u,c,h,p){const m=o+u;return di(s,m,h)?Ro(s,m+1,p?c.call(p,h):c(h)):Ld(s,m+1)}function kI(s,o,u,c,h,p,m){const v=o+u;return $u(s,v,h,p)?Ro(s,v+2,m?c.call(m,h,p):c(h,p)):Ld(s,v+2)}function s1(s,o){const u=Yt();let c;const h=s+20;u.firstCreatePass?(c=function(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}throw new Se("302",`The pipe '${s}' could not be found!`)}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=js(c.type)),m=Gn(pg);try{const v=gu(!1),C=p();return gu(v),function(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Me(),h,C),C}finally{Gn(m)}}function o1(s,o,u){const c=s+20,h=Me(),p=xa(h,c);return qg(h,Gg(h,c)?RI(h,sr(),o,p.transform,u,p):p.transform(u))}function jg(s,o,u,c){const h=s+20,p=Me(),m=xa(p,h);return qg(p,Gg(p,h)?kI(p,sr(),o,m.transform,u,c,m):m.transform(u,c))}function Gg(s,o){return s[1].data[o].pure}function qg(s,o){return ga.isWrapped(o)&&(o=ga.unwrap(o),s[Ni()]=$t),o}function Uy(s){return o=>{setTimeout(s,void 0,o)}}const rl=class extends l.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,p,m;let v=o,C=u||(()=>null),D=c;if(o&&"object"==typeof o){const P=o;v=null===(h=P.next)||void 0===h?void 0:h.bind(P),C=null===(p=P.error)||void 0===p?void 0:p.bind(P),D=null===(m=P.complete)||void 0===m?void 0:m.bind(P)}this.__isAsync&&(C=Uy(C),v&&(v=Uy(v)),D&&(D=Uy(D)));const N=super.subscribe({next:v,error:C,complete:D});return o instanceof G.w&&o.add(N),N}};function HM(){return this._results[rf()]()}class hi{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=rf(),c=hi.prototype;c[u]||(c[u]=HM)}get changes(){return this._changes||(this._changes=new rl)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=vi(o);(this._changesDetected=!function(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class d1{constructor(o){this.queryList=o,this.matches=null}clone(){return new d1(this.queryList)}setDirty(){this.queryList.setDirty()}}class h1{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const m=u.getByIndex(p);h.push(this.queries[m.indexInDeclarationView].clone())}return new h1(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==fi(o,u).matches&&this.queries[u].setDirty()}}class Zg{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Pf{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new Pf(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class zg{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new zg(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,f1(u,p)),this.matchTNodeWithReadOption(o,u,Do(u,o,p,!1,!1))}else c===rc?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Do(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===nl||h===kd||h===rc&&4&u.type)this.addMatch(u.index,-2);else{const p=Do(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function f1(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function g1(s,o,u,c){return-1===u?function(s,o){return 11&s.type?If(s,o):4&s.type?Sy(s,o):null}(o,s):-2===u?function(s,o,u){return u===nl?If(o,s):u===rc?Sy(o,s):u===kd?Pw(o,s):void 0}(s,o,c):Yn(s,s[1],u,o)}function m1(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,m=u.matches,v=[];for(let C=0;C<m.length;C+=2){const D=m[C];v.push(D<0?null:g1(o,p[D],m[C+1],u.metadata.read))}h.matches=v}return h.matches}function _1(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const m=m1(s,o,h,u);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)c.push(m[v/2]);else{const D=p[v+1],N=o[-C];for(let P=10;P<N.length;P++){const L=N[P];L[17]===L[3]&&_1(L[1],L,D,c)}if(null!==N[9]){const P=N[9];for(let L=0;L<P.length;L++){const K=P[L];_1(K[1],K,D,c)}}}}}return c}function y1(s){const o=Me(),u=Yt(),c=du();wo(c+1);const h=fi(u,c);if(s.dirty&&yh(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?_1(u,o,c,[]):m1(u,o,h,c);s.reset(p,qT),s.notifyOnChanges()}return!0}return!1}function v1(s,o,u){const c=Yt();c.firstCreatePass&&(Gy(c,new Zg(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),jy(c,Me(),o)}function Hy(s,o,u,c){const h=Yt();if(h.firstCreatePass){const p=Un();Gy(h,new Zg(o,u,c),p.index),function(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}jy(h,Me(),u)}function b1(){return s=Me(),o=du(),s[19].queries[o].queryList;var s,o}function jy(s,o,u){const c=new hi(4==(4&u));Z0(s,o,c,c.destroy),null===o[19]&&(o[19]=new h1),o[19].queries.push(new d1(c))}function Gy(s,o,u){null===s.queries&&(s.queries=new Pf),s.queries.track(new zg(o,u))}function fi(s,o){return s.queries.getByIndex(o)}function wi(s,o){return Sy(s,o)}const Hd=new Hn("Application Initializer");let il=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Ey,this.reject=Ey,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Lb(p))u.push(p);else if(ry(p)){const m=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});u.push(m)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Jn(Hd,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const GI=new Hn("AppId"),iR={provide:GI,useFactory:function(){return`${H1()}${H1()}${H1()}`},deps:[]};function H1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WI=new Hn("Platform Initializer"),ZI=new Hn("Platform ID"),$f=new Hn("appBootstrapListener");let j1=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const rm=new Hn("LocaleId"),G1=new Hn("DefaultCurrencyCode");class YI{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}const tv=function(s){return new kf(s)},JI=tv,sR=function(s){return Promise.resolve(tv(s))},om=function(s){const o=tv(s),c=Ka(Tn(s).declarations).reduce((h,p)=>{const m=Ze(p);return m&&h.push(new DI(m)),h},[]);return new YI(o,c)},am=om,tS=function(s){return Promise.resolve(om(s))};let ql=(()=>{class s{constructor(){this.compileModuleSync=JI,this.compileModuleAsync=sR,this.compileModuleAndAllComponentsSync=am,this.compileModuleAndAllComponentsAsync=tS}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const Jr=(()=>Promise.resolve(0))();function nv(s){"undefined"==typeof Zone?Jr.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class io{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rl(!1),this.onMicrotaskEmpty=new rl(!1),this.onStable=new rl(!1),this.onError=new rl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=It.requestAnimationFrame,o=It.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(It,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,rv(s),s.isCheckStableRunning=!0,W1(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),rv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,m,v)=>{try{return um(s),u.invokeTask(h,p,m,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Z1(s)}},onInvoke:(u,c,h,p,m,v,C)=>{try{return um(s),u.invoke(h,p,m,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Z1(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,rv(s),W1(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!io.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(io.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,m=p.scheduleEventTask("NgZoneEvent: "+h,o,lR,Ey,Ey);try{return p.runTask(m,u,c)}finally{p.cancelTask(m)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const lR={};function W1(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function rv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function um(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Z1(s){s._nesting--,W1(s)}class Wl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rl,this.onMicrotaskEmpty=new rl,this.onStable=new rl,this.onError=new rl}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let z1=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{io.assertNotInAngularZone(),nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nv(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(Jn(io))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})(),iS=(()=>{class s{constructor(){this._applications=new Map,iv.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return iv.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();class Y1{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function cm(s){iv=s}let iv=new Y1,sv=!0,dm=!1;function ov(){return dm=!0,sv}function K1(){if(dm)throw new Error("Cannot enable prod mode after platform setup.");sv=!1}let Bs;const X1=new Hn("AllowMultipleToken");class oS{constructor(o,u){this.name=o,this.token=u}}function eC(s,o,u=[]){const c=`Platform: ${o}`,h=new Hn(c);return(p=[])=>{let m=tC();if(!m||m.injector.get(X1,!1))if(s)s(u.concat(p).concat({provide:h,useValue:!0}));else{const v=u.concat(p).concat({provide:h,useValue:!0},{provide:mn,useValue:"platform"});!function(s){if(Bs&&!Bs.destroyed&&!Bs.injector.get(X1,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Bs=s.get(fm);const o=s.get(WI,null);o&&o.forEach(u=>u())}(br.create({providers:v,name:c}))}return function(s){const o=tC();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function tC(){return Bs&&!Bs.destroyed?Bs:null}let fm=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const v=function(s,o){let u;return u="noop"===s?new Wl:("zone.js"===s?void 0:s)||new io({enableLongStackTrace:ov(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:io,useValue:v}];return v.run(()=>{const D=br.create({providers:C,parent:this.injector,name:u.moduleType.name}),N=u.create(D),P=N.injector.get(Hh,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const L=v.onError.subscribe({next:K=>{P.handleError(K)}});N.onDestroy(()=>{rC(this._modules,N),L.unsubscribe()})}),function(s,o,u){try{const c=u();return Lb(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(P,v,()=>{const L=N.injector.get(il);return L.runInitializers(),L.donePromise.then(()=>(Qu(N.injector.get(rm,by)||by),this._moduleDoBootstrap(N),N))})})}bootstrapModule(u,c=[]){const h=nC({},c);return function(s,o,u){const c=new kf(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(sl);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${ee(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Jn(br))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function nC(s,o){return Array.isArray(o)?o.reduce(nC,s):Object.assign(Object.assign({},s),o)}let sl=(()=>{class s{constructor(u,c,h,p,m){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new O.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),C=new O.y(D=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{io.assertNotInAngularZone(),nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{N.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ie.T)(v,C.pipe((0,oe.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=u instanceof HT?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Rd),v=h.create(br.NULL,[],c||h.selector,p),C=v.location.nativeElement,D=v.injector.get(z1,null),N=D&&v.injector.get(iS);return D&&N&&N.registerApplication(C,D),v.onDestroy(()=>{this.detachView(v.hostView),rC(this.components,v),N&&N.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;rC(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get($f,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Jn(io),Jn(br),Jn(Hh),Jn(Vr),Jn(il))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function rC(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}class pR{}class Bi{}const Hf={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let lc=(()=>{class s{constructor(u,c){this._compiler=u,this._config=c||Hf}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,h]=u.split("#");return void 0===h&&(h="default"),B(8255)(c).then(p=>p[h]).then(p=>lv(p,c,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(u){let[c,h]=u.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),B(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(m=>m[h+p]).then(m=>lv(m,c,h))}}return s.\u0275fac=function(u){return new(u||s)(Jn(ql),Jn(Bi,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function lv(s,o,u){if(!s)throw new Error(`Cannot find '${u}' in '${o}'`);return s}const jf=function(s){return null},mm=eC(null,"core",[{provide:ZI,useValue:"unknown"},{provide:fm,deps:[br]},{provide:iS,deps:[]},{provide:j1,deps:[]}]),pi=[{provide:sl,useClass:sl,deps:[io,br,Hh,Vr,il]},{provide:BM,deps:[io],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:il,useClass:il,deps:[[new Wa,Hd]]},{provide:ql,useClass:ql,deps:[]},iR,{provide:xg,useFactory:function(){return bs},deps:[]},{provide:Wr,useFactory:function(){return Iy},deps:[]},{provide:rm,useFactory:function(s){return Qu(s=s||"undefined"!=typeof $localize&&$localize.locale||by),s},deps:[[new qa(rm),new Wa,new Gr]]},{provide:G1,useValue:"USD"}];let uc=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Jn(sl))},s.\u0275mod=W({type:s}),s.\u0275inj=cn({providers:pi}),s})()},8939:(st,Ee,B)=>{"use strict";B.d(Ee,{hO:()=>ae,xv:()=>J,Dh:()=>ee,GT:()=>te,cc:()=>Re,on:()=>U,pX:()=>oe});var l=B(7716),G=B(7841),O=B(8971);st=B.hmd(st);const ie=["ngOnDestroy"],oe=(ce,fe,ke,Ye={})=>new Proxy(ce,{get:(mt,nt)=>ke.runOutsideAngular(()=>{var Tt;if(ce[nt])return(null===(Tt=null==Ye?void 0:Ye.spy)||void 0===Tt?void 0:Tt.get)&&Ye.spy.get(nt,ce[nt]),ce[nt];if(ie.indexOf(nt)>-1)return()=>{};const dt=fe.toPromise().then(Ke=>{const xe=Ke&&Ke[nt];return"function"==typeof xe?xe.bind(Ke):xe&&xe.then?xe.then(Te=>ke.run(()=>Te)):ke.run(()=>xe)});return new Proxy(()=>{},{get:(Ke,xe)=>dt[xe],apply:(Ke,xe,Te)=>dt.then($e=>{var ye;const je=$e&&$e(...Te);return(null===(ye=null==Ye?void 0:Ye.spy)||void 0===ye?void 0:ye.apply)&&Ye.spy.apply(nt,Te,je),je})})})}),te=(ce,fe)=>{fe.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach(Ye=>{Object.defineProperty(ce.prototype,Ye,Object.getOwnPropertyDescriptor(ke.prototype||ke,Ye))})})};class de{constructor(fe){return fe}}const ee=new l.OlP("angularfire2.app.options"),J=new l.OlP("angularfire2.app.name");function U(ce,fe,ke){const mt="object"==typeof ke&&ke||{};mt.name=mt.name||"string"==typeof ke&&ke||"[DEFAULT]";const Tt=G.Z.apps.filter(dt=>dt&&dt.name===mt.name)[0]||fe.runOutsideAngular(()=>G.Z.initializeApp(ce,mt));try{JSON.stringify(ce)!==JSON.stringify(Tt.options)&&z("error",`${Tt.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(dt){}return new de(Tt)}const z=(ce,...fe)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[ce](...fe)},j={provide:de,useFactory:U,deps:[ee,l.R0b,[new l.FiY,J]]};let ae=(()=>{class ce{constructor(ke){G.Z.registerVersion("angularfire",O.q4.full,"core"),G.Z.registerVersion("angularfire",O.q4.full,"app-compat"),G.Z.registerVersion("angular",l.q4F.full,ke.toString())}static initializeApp(ke,Ye){return{ngModule:ce,providers:[{provide:ee,useValue:ke},{provide:J,useValue:Ye}]}}}return ce.\u0275fac=function(ke){return new(ke||ce)(l.LFG(l.Lbi))},ce.\u0275mod=l.oAB({type:ce}),ce.\u0275inj=l.cJS({providers:[j]}),ce})();function Re(ce,fe,ke,Ye,mt){const[,nt,Tt]=globalThis.\u0275AngularfireInstanceCache.find(dt=>dt[0]===ce)||[];if(nt)return function(ce,fe){try{return ce.toString()===fe.toString()}catch(ke){return ce===fe}}(mt,Tt)||(Ve("error",`${fe} was already initialized on the ${ke} Firebase App with different settings.${we?" You may need to reload as Firebase is not HMR aware.":""}`),Ve("warn",{is:mt,was:Tt})),nt;{const dt=Ye();return globalThis.\u0275AngularfireInstanceCache.push([ce,dt,mt]),dt}}const we=!!st.hot,Ve=(ce,...fe)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[ce](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(st,Ee,B)=>{"use strict";B.d(Ee,{q4:()=>s_,iC:()=>vr,fc:()=>Mp,HU:()=>Ah,vb:()=>Rs,JM:()=>vi});var l=B(7716),G=B(2329),O=B(8239),ie=B(8026),oe=B(3854),te=B(3910),de=B(5422);const ee="@firebase/installations",J="0.5.8",z=`w:${J}`,j="FIS_v2",ce=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fe(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function ke({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ye(I){return{token:I.token,requestStatus:2,expiresIn:Te(I.expiresIn),creationTime:Date.now()}}function mt(I,A){return nt.apply(this,arguments)}function nt(){return(nt=(0,O.Z)(function*(I,A){const q=(yield A.json()).error;return ce.create("request-failed",{requestName:I,serverCode:q.code,serverMessage:q.message,serverStatus:q.status})})).apply(this,arguments)}function Tt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function dt(I,{refreshToken:A}){const k=Tt(I);return k.append("Authorization",function(I){return`${j} ${I}`}(A)),k}function Ke(I){return xe.apply(this,arguments)}function xe(){return(xe=(0,O.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function Te(I){return Number(I.replace("s","000"))}function ye(I,A){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:k}){const q=ke(I),se=Tt(I),he=A.getImmediate({optional:!0});if(he){const kt=yield he.getHeartbeatsHeader();kt&&se.append("x-firebase-client",kt)}const Xe={method:"POST",headers:se,body:JSON.stringify({fid:k,authVersion:j,appId:I.appId,sdkVersion:z})},Dt=yield Ke(()=>fetch(q,Xe));if(Dt.ok){const kt=yield Dt.json();return{fid:kt.fid||k,registrationStatus:2,refreshToken:kt.refreshToken,authToken:Ye(kt.authToken)}}throw yield mt("Create Installation",Dt)})).apply(this,arguments)}function Ae(I){return new Promise(A=>{setTimeout(A,I)})}const gn=/^[cdef][\w-]{21}$/;function An(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const k=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return gn.test(k)?k:""}catch(I){return""}}function yt(I){return`${I.appName}!${I.appId}`}const Dr=new Map;function mi(I,A){const k=yt(I);er(k,A),function(I,A){const k=(!rn&&"BroadcastChannel"in self&&(rn=new BroadcastChannel("[Firebase] FID Change"),rn.onmessage=I=>{er(I.data.key,I.data.fid)}),rn);k&&k.postMessage({key:I,fid:A}),0===Dr.size&&rn&&(rn.close(),rn=null)}(k,A)}function er(I,A){const k=Dr.get(I);if(k)for(const q of k)q(A)}let rn=null;const hr="firebase-installations-store";let Le=null;function fr(){return Le||(Le=(0,oe.X3)("firebase-installations-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(hr)}})),Le}function ir(I,A){return ot.apply(this,arguments)}function ot(){return(ot=(0,O.Z)(function*(I,A){const k=yt(I),se=(yield fr()).transaction(hr,"readwrite"),he=se.objectStore(hr),Oe=yield he.get(k);return yield he.put(A,k),yield se.complete,(!Oe||Oe.fid!==A.fid)&&mi(I,A.fid),A})).apply(this,arguments)}function vn(I){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(I){const A=yt(I),q=(yield fr()).transaction(hr,"readwrite");yield q.objectStore(hr).delete(A),yield q.complete})).apply(this,arguments)}function Gn(I,A){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(I,A){const k=yt(I),se=(yield fr()).transaction(hr,"readwrite"),he=se.objectStore(hr),Oe=yield he.get(k),Xe=A(Oe);return void 0===Xe?yield he.delete(k):yield he.put(Xe,k),yield se.complete,Xe&&(!Oe||Oe.fid!==Xe.fid)&&mi(I,Xe.fid),Xe})).apply(this,arguments)}function Hr(I){return pr.apply(this,arguments)}function pr(){return(pr=(0,O.Z)(function*(I){let A;const k=yield Gn(I.appConfig,q=>{const se=Vn(q),he=Ea(I,se);return A=he.registrationPromise,he.installationEntry});return""===k.fid?{installationEntry:yield A}:{installationEntry:k,registrationPromise:A}})).apply(this,arguments)}function Vn(I){return hn(I||{fid:An(),registrationStatus:0})}function Ea(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(ce.create("app-offline"))};const k={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:k,registrationPromise:function(I,A){return qe.apply(this,arguments)}(I,k)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:gt(I)}:{installationEntry:A}}function qe(){return(qe=(0,O.Z)(function*(I,A){try{const k=yield ye(I,A);return ir(I.appConfig,k)}catch(k){throw fe(k)&&409===k.customData.serverCode?yield vn(I.appConfig):yield ir(I.appConfig,{fid:A.fid,registrationStatus:0}),k}})).apply(this,arguments)}function gt(I){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,O.Z)(function*(I){let A=yield as(I.appConfig);for(;1===A.registrationStatus;)yield Ae(100),A=yield as(I.appConfig);if(0===A.registrationStatus){const{installationEntry:k,registrationPromise:q}=yield Hr(I);return q||k}return A})).apply(this,arguments)}function as(I){return Gn(I,A=>{if(!A)throw ce.create("installation-not-found");return hn(A)})}function hn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Tr(I,A){return tr.apply(this,arguments)}function tr(){return(tr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:A},k){const q=sn(I,k),se=dt(I,k),he=A.getImmediate({optional:!0});if(he){const kt=yield he.getHeartbeatsHeader();kt&&se.append("x-firebase-client",kt)}const Xe={method:"POST",headers:se,body:JSON.stringify({installation:{sdkVersion:z,appId:I.appId}})},Dt=yield Ke(()=>fetch(q,Xe));if(Dt.ok)return Ye(yield Dt.json());throw yield mt("Generate Auth Token",Dt)})).apply(this,arguments)}function sn(I,{fid:A}){return`${ke(I)}/${A}/authTokens:generate`}function bt(I){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,O.Z)(function*(I,A=!1){let k;const q=yield Gn(I.appConfig,he=>{if(!Jt(he))throw ce.create("not-registered");const Oe=he.authToken;if(!A&&Q(Oe))return he;if(1===Oe.requestStatus)return k=Ge(I,A),he;{if(!navigator.onLine)throw ce.create("app-offline");const Xe=ne(he);return k=Et(I,Xe),Xe}});return k?yield k:q.authToken})).apply(this,arguments)}function Ge(I,A){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*(I,A){let k=yield lt(I.appConfig);for(;1===k.authToken.requestStatus;)yield Ae(100),k=yield lt(I.appConfig);const q=k.authToken;return 0===q.requestStatus?bt(I,A):q})).apply(this,arguments)}function lt(I){return Gn(I,A=>{if(!Jt(A))throw ce.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Et(I,A){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(I,A){try{const k=yield Tr(I,A),q=Object.assign(Object.assign({},A),{authToken:k});return yield ir(I.appConfig,q),k}catch(k){if(!fe(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const q=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ir(I.appConfig,q)}else yield vn(I.appConfig);throw k}})).apply(this,arguments)}function Jt(I){return void 0!==I&&2===I.registrationStatus}function Q(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function ne(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function H(){return(H=(0,O.Z)(function*(I){const A=I,{installationEntry:k,registrationPromise:q}=yield Hr(A);return q?q.catch(console.error):bt(A).catch(console.error),k.fid})).apply(this,arguments)}function pe(){return(pe=(0,O.Z)(function*(I,A=!1){const k=I;return yield Ue(k),(yield bt(k,A)).token})).apply(this,arguments)}function Ue(I){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(I){const{registrationPromise:A}=yield Hr(I);A&&(yield A)})).apply(this,arguments)}function Bt(I){return ce.create("missing-app-config-values",{valueName:I})}const xn="installations";(0,ie._registerComponent)(new te.wA(xn,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Bt("App Configuration");if(!I.name)throw Bt("App Name");const A=["projectId","apiKey","appId"];for(const k of A)if(!I.options[k])throw Bt(k);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ie._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ie._registerComponent)(new te.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),k=(0,ie._getProvider)(A,xn).getImmediate();return{getId:()=>function(I){return H.apply(this,arguments)}(k),getToken:se=>function(I){return pe.apply(this,arguments)}(k,se)}},"PRIVATE")),(0,ie.registerVersion)(ee,J),(0,ie.registerVersion)(ee,J,"esm2017");const bn="@firebase/remote-config",Bn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class cl{constructor(A,k,q,se){this.client=A,this.storage=k,this.storageCache=q,this.logger=se}isCachedDataFresh(A,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const q=Date.now()-k,se=q<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${q}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${se}.`),se}fetch(A){var k=this;return(0,O.Z)(function*(){const[q,se]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(se&&k.isCachedDataFresh(A.cacheMaxAgeMillis,q))return se;A.eTag=se&&se.eTag;const he=yield k.client.fetch(A),Oe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===he.status&&Oe.push(k.storage.setLastSuccessfulFetchResponse(he)),yield Promise.all(Oe),he})()}}function _i(I=navigator){return I.languages&&I.languages[0]||I.language}class us{constructor(A,k,q,se,he,Oe){this.firebaseInstallations=A,this.sdkVersion=k,this.namespace=q,this.projectId=se,this.apiKey=he,this.appId=Oe}fetch(A){var k=this;return(0,O.Z)(function*(){const[q,se]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Xe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},Dt={sdk_version:k.sdkVersion,app_instance_id:q,app_instance_id_token:se,app_id:k.appId,language_code:_i()},kt={method:"POST",headers:Xe,body:JSON.stringify(Dt)},tn=fetch(Oe,kt),Pt=new Promise((Ga,Ps)=>{A.signal.addEventListener(()=>{const ta=new Error("The operation was aborted.");ta.name="AbortError",Ps(ta)})});let Ir;try{yield Promise.race([tn,Pt]),Ir=yield tn}catch(Ga){let Ps="fetch-client-network";throw"AbortError"===Ga.name&&(Ps="fetch-timeout"),Bn.create(Ps,{originalErrorMessage:Ga.message})}let Sr=Ir.status;const Il=Ir.headers.get("ETag")||void 0;let Xc,Ks;if(200===Ir.status){let Ga;try{Ga=yield Ir.json()}catch(Ps){throw Bn.create("fetch-client-parse",{originalErrorMessage:Ps.message})}Xc=Ga.entries,Ks=Ga.state}if("INSTANCE_STATE_UNSPECIFIED"===Ks?Sr=500:"NO_CHANGE"===Ks?Sr=304:("NO_TEMPLATE"===Ks||"EMPTY_CONFIG"===Ks)&&(Xc={}),304!==Sr&&200!==Sr)throw Bn.create("fetch-status",{httpStatus:Sr});return{status:Sr,eTag:Il,config:Xc}})()}}class lh{constructor(A,k){this.client=A,this.storage=k}fetch(A){var k=this;return(0,O.Z)(function*(){const q=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(A,q)})()}attemptFetch(A,{throttleEndTimeMillis:k,backoffCount:q}){var se=this;return(0,O.Z)(function*(){yield function(I,A){return new Promise((k,q)=>{const se=Math.max(A-Date.now(),0),he=setTimeout(k,se);I.addEventListener(()=>{clearTimeout(he),q(Bn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,k);try{const he=yield se.client.fetch(A);return yield se.storage.deleteThrottleMetadata(),he}catch(he){if(!function(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(he))throw he;const Oe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(q),backoffCount:q+1};return yield se.storage.setThrottleMetadata(Oe),se.attemptFetch(A,Oe)}})()}}class uh{constructor(A,k,q,se,he){this.app=A,this._client=k,this._storageCache=q,this._storage=se,this._logger=he,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sc(I,A){const k=I.target.error||void 0;return Bn.create(A,{originalErrorMessage:k&&k.message})}const _o="app_namespace_store";class dh{constructor(A,k,q,se=function(){return new Promise((I,A)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=q=>{A(Sc(q,"storage-open"))},k.onsuccess=q=>{I(q.target.result)},k.onupgradeneeded=q=>{const se=q.target.result;switch(q.oldVersion){case 0:se.createObjectStore(_o,{keyPath:"compositeKey"})}}}catch(k){A(Bn.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=A,this.appName=k,this.namespace=q,this.openDbPromise=se}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var k=this;return(0,O.Z)(function*(){const q=yield k.openDbPromise;return new Promise((se,he)=>{const Xe=q.transaction([_o],"readonly").objectStore(_o),Dt=k.createCompositeKey(A);try{const kt=Xe.get(Dt);kt.onerror=tn=>{he(Sc(tn,"storage-get"))},kt.onsuccess=tn=>{const Pt=tn.target.result;se(Pt?Pt.value:void 0)}}catch(kt){he(Bn.create("storage-get",{originalErrorMessage:kt&&kt.message}))}})})()}set(A,k){var q=this;return(0,O.Z)(function*(){const se=yield q.openDbPromise;return new Promise((he,Oe)=>{const Dt=se.transaction([_o],"readwrite").objectStore(_o),kt=q.createCompositeKey(A);try{const tn=Dt.put({compositeKey:kt,value:k});tn.onerror=Pt=>{Oe(Sc(Pt,"storage-set"))},tn.onsuccess=()=>{he()}}catch(tn){Oe(Bn.create("storage-set",{originalErrorMessage:tn&&tn.message}))}})})()}delete(A){var k=this;return(0,O.Z)(function*(){const q=yield k.openDbPromise;return new Promise((se,he)=>{const Xe=q.transaction([_o],"readwrite").objectStore(_o),Dt=k.createCompositeKey(A);try{const kt=Xe.delete(Dt);kt.onerror=tn=>{he(Sc(tn,"storage-delete"))},kt.onsuccess=()=>{se()}}catch(kt){he(Bn.create("storage-delete",{originalErrorMessage:kt&&kt.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class e_{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,O.Z)(function*(){const k=A.storage.getLastFetchStatus(),q=A.storage.getLastSuccessfulFetchTimestampMillis(),se=A.storage.getActiveConfig(),he=yield k;he&&(A.lastFetchStatus=he);const Oe=yield q;Oe&&(A.lastSuccessfulFetchTimestampMillis=Oe);const Xe=yield se;Xe&&(A.activeConfig=Xe)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function t_(){return hl.apply(this,arguments)}function hl(){return(hl=(0,O.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ie._registerComponent)(new te.wA("remote-config",function(A,{instanceIdentifier:k}){const q=A.getProvider("app").getImmediate(),se=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,oe.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:he,apiKey:Oe,appId:Xe}=q.options;if(!he)throw Bn.create("registration-project-id");if(!Oe)throw Bn.create("registration-api-key");if(!Xe)throw Bn.create("registration-app-id");const Dt=new dh(Xe,q.name,k=k||"firebase"),kt=new e_(Dt),tn=new de.Yd(bn);tn.logLevel=de.in.ERROR;const Pt=new us(se,ie.SDK_VERSION,k,he,Oe,Xe),Ir=new lh(Pt,Dt),Sr=new cl(Ir,Dt,kt,tn),Il=new uh(q,Sr,kt,Dt,tn);return function(I){const A=(0,oe.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Il),Il},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(bn,"0.3.7"),(0,ie.registerVersion)(bn,"0.3.7","esm2017");const fh="/firebase-messaging-sw.js",Ia="/firebase-cloud-messaging-push-scope",_p="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ac="google.c.a.c_id",js="google.c.a.c_l",fl="google.c.a.ts",zn="google.c.a.e";var Sa=(()=>{return(I=Sa||(Sa={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Sa;var I})();function Rr(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ph(I){const k=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),q=atob(k),se=new Uint8Array(q.length);for(let he=0;he<q.length;++he)se[he]=q.charCodeAt(he);return se}const Aa="fcm_token_details_db",pl="fcm_token_object_Store";function n_(I){return li.apply(this,arguments)}function li(){return(li=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(he=>he.name).includes(Aa))return null;let A=null;return(yield(0,oe.X3)(Aa,5,function(){var q=(0,O.Z)(function*(se,he,Oe,Xe){var Dt;if(he<2||!se.objectStoreNames.contains(pl))return;const kt=Xe.objectStore(pl),tn=yield kt.index("fcmSenderId").get(I);if(yield kt.clear(),tn)if(2===he){const Pt=tn;if(!Pt.auth||!Pt.p256dh||!Pt.endpoint)return;A={token:Pt.fcmToken,createTime:null!==(Dt=Pt.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:Pt.auth,p256dh:Pt.p256dh,endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:"string"==typeof Pt.vapidKey?Pt.vapidKey:Rr(Pt.vapidKey)}}}else if(3===he){const Pt=tn;A={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Rr(Pt.auth),p256dh:Rr(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Rr(Pt.vapidKey)}}}else if(4===he){const Pt=tn;A={token:Pt.fcmToken,createTime:Pt.createTime,subscriptionOptions:{auth:Rr(Pt.auth),p256dh:Rr(Pt.p256dh),endpoint:Pt.endpoint,swScope:Pt.swScope,vapidKey:Rr(Pt.vapidKey)}}}});return function(se,he,Oe,Xe){return q.apply(this,arguments)}}())).close(),yield(0,oe.Lj)(Aa),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),Nc(A)?A:null})).apply(this,arguments)}function Nc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Ai="firebase-messaging-store";let su=null;function _h(){return su||(su=(0,oe.X3)("firebase-messaging-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(Ai)}})),su}function Rn(I){return xc.apply(this,arguments)}function xc(){return(xc=(0,O.Z)(function*(I){const A=Mc(I),q=yield(yield _h()).transaction(Ai).objectStore(Ai).get(A);if(q)return q;{const se=yield n_(I.appConfig.senderId);if(se)return yield Ss(I,se),se}})).apply(this,arguments)}function Ss(I,A){return ds.apply(this,arguments)}function ds(){return(ds=(0,O.Z)(function*(I,A){const k=Mc(I),se=(yield _h()).transaction(Ai,"readwrite");return yield se.objectStore(Ai).put(A,k),yield se.complete,A})).apply(this,arguments)}function In(I){return zo.apply(this,arguments)}function zo(){return(zo=(0,O.Z)(function*(I){const A=Mc(I),q=(yield _h()).transaction(Ai,"readwrite");yield q.objectStore(Ai).delete(A),yield q.complete})).apply(this,arguments)}function Mc({appConfig:I}){return I.appId}const Sn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Rc(I,A){return As.apply(this,arguments)}function As(){return(As=(0,O.Z)(function*(I,A){const k=yield mr(I),q=au(A),se={method:"POST",headers:k,body:JSON.stringify(q)};let he;try{he=yield(yield fetch(yo(I.appConfig),se)).json()}catch(Oe){throw Sn.create("token-subscribe-failed",{errorInfo:Oe})}if(he.error)throw Sn.create("token-subscribe-failed",{errorInfo:he.error.message});if(!he.token)throw Sn.create("token-subscribe-no-token");return he.token})).apply(this,arguments)}function xa(I,A){return kr.apply(this,arguments)}function kr(){return(kr=(0,O.Z)(function*(I,A){const k=yield mr(I),q=au(A.subscriptionOptions),se={method:"PATCH",headers:k,body:JSON.stringify(q)};let he;try{he=yield(yield fetch(`${yo(I.appConfig)}/${A.token}`,se)).json()}catch(Oe){throw Sn.create("token-update-failed",{errorInfo:Oe})}if(he.error)throw Sn.create("token-update-failed",{errorInfo:he.error.message});if(!he.token)throw Sn.create("token-update-no-token");return he.token})).apply(this,arguments)}function yh(I,A){return gl.apply(this,arguments)}function gl(){return(gl=(0,O.Z)(function*(I,A){const q={method:"DELETE",headers:yield mr(I)};try{const he=yield(yield fetch(`${yo(I.appConfig)}/${A}`,q)).json();if(he.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:he.error.message})}catch(se){throw Sn.create("token-unsubscribe-failed",{errorInfo:se})}})).apply(this,arguments)}function yo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function mr(I){return ml.apply(this,arguments)}function ml(){return(ml=(0,O.Z)(function*({appConfig:I,installations:A}){const k=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function au({p256dh:I,auth:A,endpoint:k,vapidKey:q}){const se={web:{endpoint:k,auth:A,p256dh:I}};return q!==_p&&(se.web.applicationPubKey=q),se}const St=6048e5;function lu(I){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(I){const A=yield Yt(I.swRegistration,I.vapidKey),k={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:Rr(A.getKey("auth")),p256dh:Rr(A.getKey("p256dh"))},q=yield Rn(I.firebaseDependencies);if(q){if(Un(q.subscriptionOptions,k))return Date.now()>=q.createTime+St?Oc(I,{token:q.token,createTime:Date.now(),subscriptionOptions:k}):q.token;try{yield yh(I.firebaseDependencies,q.token)}catch(se){console.warn(se)}return vo(I.firebaseDependencies,k)}return vo(I.firebaseDependencies,k)})).apply(this,arguments)}function kc(I){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,O.Z)(function*(I){const A=yield Rn(I.firebaseDependencies);A&&(yield yh(I.firebaseDependencies,A.token),yield In(I.firebaseDependencies));const k=yield I.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Oc(I,A){return _l.apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(I,A){try{const k=yield xa(I.firebaseDependencies,A),q=Object.assign(Object.assign({},A),{token:k,createTime:Date.now()});return yield Ss(I.firebaseDependencies,q),k}catch(k){throw yield kc(I),k}})).apply(this,arguments)}function vo(I,A){return Me.apply(this,arguments)}function Me(){return(Me=(0,O.Z)(function*(I,A){const q={token:yield Rc(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Ss(I,q),q.token})).apply(this,arguments)}function Yt(I,A){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,O.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ph(A)})})).apply(this,arguments)}function Un(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function yl(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const k=A.notification.title;k&&(I.notification.title=k);const q=A.notification.body;q&&(I.notification.body=q);const se=A.notification.image;se&&(I.notification.image=se)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const k=A.fcmOptions.link;k&&(I.fcmOptions.link=k);const q=A.fcmOptions.analytics_label;q&&(I.fcmOptions.analyticsLabel=q)}(A,I),A}function vl(I){return"object"==typeof I&&!!I&&Ac in I}function Fc(I,A){const k=[];for(let q=0;q<I.length;q++)k.push(I.charAt(q)),q<A.length&&k.push(A.charAt(q));return k.join("")}function bo(I){return Sn.create("missing-app-config-values",{valueName:I})}Fc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Fc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class cu{constructor(A,k,q){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const se=function(I){if(!I||!I.options)throw bo("App Configuration Object");if(!I.name)throw bo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:k}=I;for(const q of A)if(!k[q])throw bo(q);return{appName:I.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:se,installations:k,analyticsProvider:q}}_delete(){return Promise.resolve()}}function sr(I){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(fh,{scope:Ia}),I.swRegistration.update().catch(()=>{})}catch(A){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function Lc(I,A){return xi.apply(this,arguments)}function xi(){return(xi=(0,O.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield sr(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function Mi(I,A){return bl.apply(this,arguments)}function bl(){return(bl=(0,O.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=_p)})).apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(I,A){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield Mi(I,null==A?void 0:A.vapidKey),yield Lc(I,null==A?void 0:A.serviceWorkerRegistration),lu(I)})).apply(this,arguments)}function yp(I,A,k){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,O.Z)(function*(I,A,k){const q=Bc(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(q,{message_id:k[Ac],message_name:k[js],message_time:k[fl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Bc(I){switch(I){case Sa.NOTIFICATION_CLICKED:return"notification_open";case Sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wo(){return(wo=(0,O.Z)(function*(I,A){const k=A.data;if(!k.isFirebaseMessaging)return;I.onMessageHandler&&k.messageType===Sa.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(yl(k)):I.onMessageHandler.next(yl(k)));const q=k.data;vl(q)&&"1"===q[zn]&&(yield yp(I,k.messageType,q))})).apply(this,arguments)}const wl="@firebase/messaging";function Hc(){return jc.apply(this,arguments)}function jc(){return(jc=(0,O.Z)(function*(){try{yield(0,oe.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ie._registerComponent)(new te.wA("messaging",I=>{const A=new cu(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function(I,A){return wo.apply(this,arguments)}(A,k)),A},"PUBLIC")),(0,ie._registerComponent)(new te.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:q=>function(I,A){return ka.apply(this,arguments)}(A,q)}},"PRIVATE")),(0,ie.registerVersion)(wl,"0.9.12"),(0,ie.registerVersion)(wl,"0.9.12","esm2017");const hu="analytics",qc="firebase_id",fu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qs="https://www.googletagmanager.com/gtag/js",_r=new de.Yd("@firebase/analytics");function Fa(I){return Promise.all(I.map(A=>A.catch(k=>k)))}function wh(I,A){const k=document.createElement("script");k.src=`${qs}?l=${I}&id=${A}`,k.async=!0,document.head.appendChild(k)}function Ws(I,A,k,q,se,he){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(I,A,k,q,se,he){const Oe=q[se];try{if(Oe)yield A[Oe];else{const Dt=(yield Fa(k)).find(kt=>kt.measurementId===se);Dt&&(yield A[Dt.appId])}}catch(Xe){_r.error(Xe)}I("config",se,he)})).apply(this,arguments)}function r_(I,A,k,q,se){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,O.Z)(function*(I,A,k,q,se){try{let he=[];if(se&&se.send_to){let Oe=se.send_to;Array.isArray(Oe)||(Oe=[Oe]);const Xe=yield Fa(k);for(const Dt of Oe){const kt=Xe.find(Pt=>Pt.measurementId===Dt),tn=kt&&A[kt.appId];if(!tn){he=[];break}he.push(tn)}}0===he.length&&(he=Object.values(A)),yield Promise.all(he),I("event",q,se||{})}catch(he){_r.error(he)}})).apply(this,arguments)}function Ep(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(qs))return A;return null}const Zi=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ns=new class{constructor(A={},k=1e3){this.throttleMetadata=A,this.intervalMillis=k}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,k){this.throttleMetadata[A]=k}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Zc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Tp(I){return El.apply(this,arguments)}function El(){return(El=(0,O.Z)(function*(I){var A;const{appId:k,apiKey:q}=I,se={method:"GET",headers:Zc(q)},he=fu.replace("{app-id}",k),Oe=yield fetch(he,se);if(200!==Oe.status&&304!==Oe.status){let Xe="";try{const Dt=yield Oe.json();(null===(A=Dt.error)||void 0===A?void 0:A.message)&&(Xe=Dt.error.message)}catch(Dt){}throw Zi.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:Xe})}return Oe.json()})).apply(this,arguments)}function Va(I){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(I,A=Ns,k){const{appId:q,apiKey:se,measurementId:he}=I.options;if(!q)throw Zi.create("no-app-id");if(!se){if(he)return{measurementId:he,appId:q};throw Zi.create("no-api-key")}const Oe=A.getThrottleMetadata(q)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Xe=new Eh;return setTimeout((0,O.Z)(function*(){Xe.abort()}),void 0!==k?k:6e4),zi({appId:q,apiKey:se,measurementId:he},Oe,Xe,A)})).apply(this,arguments)}function zi(I,A,k){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,O.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:k},q,se=Ns){const{appId:he,measurementId:Oe}=I;try{yield gu(q,A)}catch(Xe){if(Oe)return _r.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${Xe.message}]`),{appId:he,measurementId:Oe};throw Xe}try{const Xe=yield Tp(I);return se.deleteThrottleMetadata(he),Xe}catch(Xe){if(!o0(Xe)){if(se.deleteThrottleMetadata(he),Oe)return _r.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${Xe.message}]`),{appId:he,measurementId:Oe};throw Xe}const Dt=503===Number(Xe.customData.httpStatus)?(0,oe.$s)(k,se.intervalMillis,30):(0,oe.$s)(k,se.intervalMillis),kt={throttleEndTimeMillis:Date.now()+Dt,backoffCount:k+1};return se.setThrottleMetadata(he,kt),_r.debug(`Calling attemptFetch again in ${Dt} millis`),zi(I,kt,q,se)}})).apply(this,arguments)}function gu(I,A){return new Promise((k,q)=>{const se=Math.max(A-Date.now(),0),he=setTimeout(k,se);I.addEventListener(()=>{clearTimeout(he),q(Zi.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function o0(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Eh{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Ip(){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(){if(!(0,oe.hl)())return _r.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(I){return _r.warn(Zi.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Qo(){return(Qo=(0,O.Z)(function*(I,A,k,q,se,he,Oe){var Xe;const Dt=Va(I);Dt.then(Sr=>{k[Sr.measurementId]=Sr.appId,I.options.measurementId&&Sr.measurementId!==I.options.measurementId&&_r.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sr=>_r.error(Sr)),A.push(Dt);const kt=Ip().then(Sr=>{if(Sr)return q.getId()}),[tn,Pt]=yield Promise.all([Dt,kt]);Ep()||wh(he,tn.measurementId),se("js",new Date);const Ir=null!==(Xe=null==Oe?void 0:Oe.config)&&void 0!==Xe?Xe:{};return Ir.origin="firebase",Ir.update=!0,null!=Pt&&(Ir[qc]=Pt),se("config",tn.measurementId,Ir),tn.measurementId})).apply(this,arguments)}class Dl{constructor(A){this.app=A}_delete(){return delete Xt[this.app.options.appId],Promise.resolve()}}let Xt={},ct=[];const En={};let Jo,xs,Tl="dataLayer",or=!1;function Do(I,A,k){!function(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((q,se)=>`(${se+1}) ${q}`).join(" "),k=Zi.create("invalid-analytics-context",{errorInfo:A});_r.warn(k.message)}}();const q=I.options.appId;if(!q)throw Zi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Zi.create("no-api-key");_r.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xt[q])throw Zi.create("already-exists",{id:q});if(!or){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(Tl);const{wrappedGtag:he,gtagCore:Oe}=function(I,A,k,q,se){let he=function(...Oe){window[q].push(arguments)};return window[se]&&"function"==typeof window[se]&&(he=window[se]),window[se]=function(I,A,k,q){function he(){return(he=(0,O.Z)(function*(Oe,Xe,Dt){try{"event"===Oe?yield r_(I,A,k,Xe,Dt):"config"===Oe?yield Ws(I,A,k,q,Xe,Dt):I("set",Xe)}catch(kt){_r.error(kt)}})).apply(this,arguments)}return function(Oe,Xe,Dt){return he.apply(this,arguments)}}(he,I,A,k),{gtagCore:he,wrappedGtag:window[se]}}(Xt,ct,En,Tl,"gtag");xs=he,Jo=Oe,or=!0}return Xt[q]=function(I,A,k,q,se,he,Oe){return Qo.apply(this,arguments)}(I,ct,En,A,Jo,Tl,k),new Dl(I)}function Kn(){return(Kn=(0,O.Z)(function*(I,A,k,q,se){if(se&&se.global)I("event",k,q);else{const he=yield A;I("event",k,Object.assign(Object.assign({},q),{send_to:he}))}})).apply(this,arguments)}function ci(){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,O.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}const Hn="@firebase/analytics";(0,ie._registerComponent)(new te.wA(hu,(A,{options:k})=>Do(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ie._registerComponent)(new te.wA("analytics-internal",function(A){try{const k=A.getProvider(hu).getImmediate();return{logEvent:(q,se,he)=>function(I,A,k,q){I=(0,oe.m9)(I),function(I,A,k,q,se){return Kn.apply(this,arguments)}(xs,Xt[I.app.options.appId],A,k,q).catch(se=>_r.error(se))}(k,q,se,he)}}catch(k){throw Zi.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ie.registerVersion)(Hn,"0.7.8"),(0,ie.registerVersion)(Hn,"0.7.8","esm2017");var yi=B(7771),l0=B(3637),Np=B(8307),ea=B(9746),$a=B(2639);const s_=new l.GfV("7.3.0"),vu="__angularfire_symbol__analyticsIsSupportedValue",Qn="__angularfire_symbol__analyticsIsSupported",Kc="__angularfire_symbol__remoteConfigIsSupportedValue",So="__angularfire_symbol__remoteConfigIsSupported",Ao="__angularfire_symbol__messagingIsSupportedValue",ar="__angularfire_symbol__messagingIsSupported";function vi(I,A,k){if(A){if(1===A.length)return A[0];const he=A.filter(Oe=>Oe.app===k);if(1===he.length)return he[0]}return k.container.getProvider(I).getImmediate({optional:!0})}globalThis[Qn]||(globalThis[Qn]=ci().then(I=>globalThis[vu]=I).catch(()=>globalThis[vu]=!1)),globalThis[ar]||(globalThis[ar]=Hc().then(I=>globalThis[Ao]=I).catch(()=>globalThis[Ao]=!1)),globalThis[So]||(globalThis[So]=t_().then(I=>globalThis[Kc]=I).catch(()=>globalThis[Kc]=!1));const Rs=(I,A)=>{const k=A?[A]:(0,G.C6)(),q=[];return k.forEach(se=>{se.container.getProvider(I).instances.forEach(Oe=>{q.includes(Oe)||q.push(Oe)})}),q};function ks(){}class No{constructor(A,k=yi.N){this.zone=A,this.delegate=k}now(){return this.delegate.now()}schedule(A,k,q){const se=this.zone;return this.delegate.schedule(function(Oe){se.runGuarded(()=>{A.apply(this,[Oe])})},k,q)}}class xo{constructor(A){this.zone=A,this.task=null}call(A,k){const q=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ks,{},ks,ks)),k.pipe((0,Np.b)({next:q,complete:q,error:q})).subscribe(A).add(q)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ah=(()=>{class I{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new No(Zone.current)),this.insideAngular=k.run(()=>new No(Zone.current,l0.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(k){return new(k||I)(l.LFG(l.R0b))},I.\u0275prov=l.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ys(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Mp(I){return I.pipe((0,ea.QV)(Ys().outsideAngular))}function vr(I){return Ys(),function(I){return function(k){return(k=k.lift(new xo(I.ngZone))).pipe((0,$a.R)(I.outsideAngular),(0,ea.QV)(I.insideAngular))}}(Ys())(I)}},982:(st,Ee,B)=>{"use strict";B.d(Ee,{$:()=>Vc,A:()=>jt,E:()=>Tc,G:()=>dl,I:()=>Rr,K:()=>Nt,L:()=>Ss,M:()=>Mc,N:()=>ou,P:()=>Oe,Q:()=>Sn,R:()=>Ha,T:()=>zo,U:()=>kr,V:()=>yh,W:()=>au,X:()=>ui,Y:()=>vl,Z:()=>vh,_:()=>Ni,a:()=>or,a0:()=>yp,a1:()=>Bc,a2:()=>wo,a3:()=>Uc,a4:()=>bh,a5:()=>Hc,a6:()=>jc,a7:()=>Gc,a8:()=>vp,a9:()=>r0,aA:()=>Za,aB:()=>Pp,aC:()=>Mn,aG:()=>Do,aJ:()=>As,aa:()=>hu,ab:()=>wp,ae:()=>_r,af:()=>wh,ag:()=>Cp,aj:()=>Pc,ak:()=>s0,am:()=>gu,an:()=>Qo,ao:()=>Mr,ap:()=>ir,aq:()=>Zo,ar:()=>ai,as:()=>dn,at:()=>g_,au:()=>Eu,av:()=>Ln,aw:()=>Le,ax:()=>vn,ay:()=>ls,az:()=>d0,b:()=>Jo,c:()=>Xc,d:()=>ta,e:()=>Ga,f:()=>Wa,g:()=>ed,h:()=>u0,i:()=>Np,j:()=>c0,k:()=>Os,l:()=>ja,m:()=>m_,o:()=>gn,r:()=>I,s:()=>vr,u:()=>se,z:()=>mi});var l=B(8239),G=B(3854),O=B(8026);function de(b,g){var y={};for(var E in b)Object.prototype.hasOwnProperty.call(b,E)&&g.indexOf(E)<0&&(y[E]=b[E]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(E=Object.getOwnPropertySymbols(b);x<E.length;x++)g.indexOf(E[x])<0&&Object.prototype.propertyIsEnumerable.call(b,E[x])&&(y[E[x]]=b[E[x]])}return y}var je=B(5422),Ae=B(3910);const gn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},jt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const mi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Wn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cn=new je.Yd("@firebase/auth");function rn(b,...g){cn.logLevel<=je.in.ERROR&&cn.error(`Auth (${O.SDK_VERSION}): ${b}`,...g)}function dn(b,...g){throw hr(b,...g)}function Ln(b,...g){return hr(b,...g)}function ji(b,g,y){const E=Object.assign(Object.assign({},Wn()),{[g]:y});return new G.LL("auth","Firebase",E).create(g,{appName:b.name})}function si(b,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&dn(b,"argument-error"),ji(b,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hr(b,...g){if("string"!=typeof b){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(y,...E)}return wt.create(b,...g)}function Le(b,g,...y){if(!b)throw hr(g,...y)}function fr(b){const g="INTERNAL ASSERTION FAILED: "+b;throw rn(g),new Error(g)}function ir(b,g){b||fr(g)}const ot=new Map;function vn(b){ir(b instanceof Function,"Expected a class definition");let g=ot.get(b);return g?(ir(g instanceof b,"Instance stored in cache mismatched with class"),g):(g=new b,ot.set(b,g),g)}function oi(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Hr(){return"http:"===pr()||"https:"===pr()}function pr(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class _n{constructor(g,y){this.shortDelay=g,this.longDelay=y,ir(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Hr()||(0,G.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function qe(b,g){ir(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class gt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},as=new _n(3e4,6e4);function hn(b,g){return b.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:b.tenantId}):g}function It(b,g,y,E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,l.Z)(function*(b,g,y,E,x={}){return tr(b,x,(0,l.Z)(function*(){let R={},re={};E&&("GET"===g?re=E:R={body:JSON.stringify(E)});const Ce=(0,G.xO)(Object.assign({key:b.config.apiKey},re)).slice(1),et=yield b._getAdditionalHeaders();return et["Content-Type"]="application/json",b.languageCode&&(et["X-Firebase-Locale"]=b.languageCode),gt.fetch()(Ge(b,b.config.apiHost,y,Ce),Object.assign({method:g,headers:et,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function tr(b,g,y){return sn.apply(this,arguments)}function sn(){return(sn=(0,l.Z)(function*(b,g,y){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},Gi),g);try{const x=new Ne(b),R=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const re=yield R.json();if("needConfirmation"in re)throw lt(b,"account-exists-with-different-credential",re);if(R.ok&&!("errorMessage"in re))return re;{const Ce=R.ok?re.errorMessage:re.error.message,[et,Be]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===et)throw lt(b,"credential-already-in-use",re);if("EMAIL_EXISTS"===et)throw lt(b,"email-already-in-use",re);const _t=E[et]||et.toLowerCase().replace(/[_\s]+/g,"-");if(Be)throw ji(b,_t,Be);dn(b,_t)}}catch(x){if(x instanceof G.ZR)throw x;dn(b,"network-request-failed")}})).apply(this,arguments)}function bt(b,g,y,E){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,l.Z)(function*(b,g,y,E,x={}){const R=yield It(b,g,y,E,x);return"mfaPendingCredential"in R&&dn(b,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ge(b,g,y,E){const x=`${g}${y}?${E}`;return b.config.emulator?qe(b.config,x):`${b.config.apiScheme}://${x}`}class Ne{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Ln(this.auth,"network-request-failed")),as.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lt(b,g,y){const E={appName:b.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const x=Ln(b,g,E);return x.customData._tokenResponse=y,x}function Rt(){return(Rt=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Jt(b,g){return Q.apply(this,arguments)}function Q(){return(Q=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Z(b,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function _e(b){if(b)try{const g=new Date(Number(b));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function W(){return(W=(0,l.Z)(function*(b,g=!1){const y=(0,G.m9)(b),E=yield y.getIdToken(g),x=Ue(E);Le(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const R="object"==typeof x.firebase?x.firebase:void 0,re=null==R?void 0:R.sign_in_provider;return{claims:x,token:E,authTime:_e(pe(x.auth_time)),issuedAtTime:_e(pe(x.iat)),expirationTime:_e(pe(x.exp)),signInProvider:re||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function pe(b){return 1e3*Number(b)}function Ue(b){const[g,y,E]=b.split(".");if(void 0===g||void 0===y||void 0===E)return rn("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,G.tV)(y);return x?JSON.parse(x):(rn("Failed to decode base64 JWT payload"),null)}catch(x){return rn("Caught error parsing JWT payload as JSON",x),null}}function Ct(b,g){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,l.Z)(function*(b,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof G.ZR&&Zt(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function Zt({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Nn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,l.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class Tn{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=_e(this.lastLoginAt),this.creationTime=_e(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function on(b){return qn.apply(this,arguments)}function qn(){return(qn=(0,l.Z)(function*(b){var g;const y=b.auth,E=yield b.getIdToken(),x=yield Ct(b,Z(y,{idToken:E}));Le(null==x?void 0:x.users.length,y,"internal-error");const R=x.users[0];b._notifyReloadListener(R);const re=(null===(g=R.providerUserInfo)||void 0===g?void 0:g.length)?Ii(R.providerUserInfo):[],Ce=xn(b.providerData,re),_t=!!b.isAnonymous&&!(b.email&&R.passwordHash||(null==Ce?void 0:Ce.length)),yn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Ce,metadata:new Tn(R.createdAt,R.lastLoginAt),isAnonymous:_t};Object.assign(b,yn)})).apply(this,arguments)}function Bt(){return(Bt=(0,l.Z)(function*(b){const g=(0,G.m9)(b);yield on(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function xn(b,g){return[...b.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function Ii(b){return b.map(g=>{var{providerId:y}=g,E=de(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function gr(){return(gr=(0,l.Z)(function*(b,g){const y=yield tr(b,{},(0,l.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:R}=b.config,re=Ge(b,x,"/v1/token",`key=${R}`),Ce=yield b._getAdditionalHeaders();return Ce["Content-Type"]="application/x-www-form-urlencoded",gt.fetch()(re,{method:"POST",headers:Ce,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Le(g.idToken,"internal-error"),Le(void 0!==g.idToken,"internal-error"),Le(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(b){const g=Ue(b);return Le(g,"internal-error"),Le(void 0!==g.exp,"internal-error"),Le(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,l.Z)(function*(){return Le(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,l.Z)(function*(){const{accessToken:x,refreshToken:R,expiresIn:re}=yield function(b,g){return gr.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(x,R,Number(re))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:x,expirationTime:R}=y,re=new Si;return E&&(Le("string"==typeof E,"internal-error",{appName:g}),re.refreshToken=E),x&&(Le("string"==typeof x,"internal-error",{appName:g}),re.accessToken=x),R&&(Le("number"==typeof R,"internal-error",{appName:g}),re.expirationTime=R),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Si,this.toJSON())}_performRefresh(){return fr("not implemented")}}function bn(b,g){Le("string"==typeof b||void 0===b,"internal-error",{appName:g})}class qi{constructor(g){var{uid:y,auth:E,stsTokenManager:x}=g,R=de(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Tn(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,l.Z)(function*(){const E=yield Ct(y,y.stsTokenManager.getToken(y.auth,g));return Le(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function(b){return W.apply(this,arguments)}(this,g)}reload(){return function(b){return Bt.apply(this,arguments)}(this)}_assign(g){this!==g&&(Le(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,l.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield on(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,l.Z)(function*(){const y=yield g.getIdToken();return yield Ct(g,function(b,g){return Rt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,x,R,re,Ce,et,Be,_t;const yn=null!==(E=y.displayName)&&void 0!==E?E:void 0,kn=null!==(x=y.email)&&void 0!==x?x:void 0,un=null!==(R=y.phoneNumber)&&void 0!==R?R:void 0,oa=null!==(re=y.photoURL)&&void 0!==re?re:void 0,ld=null!==(Ce=y.tenantId)&&void 0!==Ce?Ce:void 0,ud=null!==(et=y._redirectEventId)&&void 0!==et?et:void 0,Up=null!==(Be=y.createdAt)&&void 0!==Be?Be:void 0,$p=null!==(_t=y.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:Hp,emailVerified:Lh,isAnonymous:aa,providerData:jp,stsTokenManager:Rl}=y;Le(Hp&&Rl,g,"internal-error");const fE=Si.fromJSON(this.name,Rl);Le("string"==typeof Hp,g,"internal-error"),bn(yn,g.name),bn(kn,g.name),Le("boolean"==typeof Lh,g,"internal-error"),Le("boolean"==typeof aa,g,"internal-error"),bn(un,g.name),bn(oa,g.name),bn(ld,g.name),bn(ud,g.name),bn(Up,g.name),bn($p,g.name);const kl=new qi({uid:Hp,auth:g,email:kn,emailVerified:Lh,displayName:yn,isAnonymous:aa,photoURL:oa,phoneNumber:un,tenantId:ld,stsTokenManager:fE,createdAt:Up,lastLoginAt:$p});return jp&&Array.isArray(jp)&&(kl.providerData=jp.map(ki=>Object.assign({},ki))),ud&&(kl._redirectEventId=ud),kl}static _fromIdTokenResponse(g,y,E=!1){return(0,l.Z)(function*(){const x=new Si;x.updateFromServerResponse(y);const R=new qi({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield on(R),R})()}}const Nt=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(y,E){var x=this;return(0,l.Z)(function*(){x.storage[y]=E})()}_get(y){var E=this;return(0,l.Z)(function*(){const x=E.storage[y];return void 0===x?null:x})()}_remove(y){var E=this;return(0,l.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return b.type="NONE",b})();function ls(b,g,y){return`firebase:${b}:${g}:${y}`}class Bn{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:x,name:R}=this.auth;this.fullUserKey=ls(this.userKey,x.apiKey,R),this.fullPersistenceKey=ls("persistence",x.apiKey,R),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?qi._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,l.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,l.Z)(function*(){if(!y.length)return new Bn(vn(Nt),g,E);const x=(yield Promise.all(y.map(function(){var Be=(0,l.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Be.apply(this,arguments)}}()))).filter(Be=>Be);let R=x[0]||vn(Nt);const re=ls(E,g.config.apiKey,g.name);let Ce=null;for(const Be of y)try{const _t=yield Be._get(re);if(_t){const yn=qi._fromJSON(g,_t);Be!==R&&(Ce=yn),R=Be;break}}catch(_t){}const et=x.filter(Be=>Be._shouldAllowMigration);return R._shouldAllowMigration&&et.length?(R=et[0],Ce&&(yield R._set(re,Ce.toJSON())),yield Promise.all(y.map(function(){var Be=(0,l.Z)(function*(_t){if(_t!==R)try{yield _t._remove(re)}catch(yn){}});return function(_t){return Be.apply(this,arguments)}}())),new Bn(R,g,E)):new Bn(R,g,E)})()}}function eu(b){const g=b.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Wo(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Da(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(zt(g))return"Blackberry";if(Ec(g))return"Webos";if(Kr(g))return"Safari";if((g.includes("chrome/")||po(g))&&!g.includes("edge/"))return"Chrome";if(ai(g))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Da(b=(0,G.z$)()){return/firefox\//i.test(b)}function Kr(b=(0,G.z$)()){const g=b.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function po(b=(0,G.z$)()){return/crios\//i.test(b)}function Wo(b=(0,G.z$)()){return/iemobile/i.test(b)}function ai(b=(0,G.z$)()){return/android/i.test(b)}function zt(b=(0,G.z$)()){return/blackberry/i.test(b)}function Ec(b=(0,G.z$)()){return/webos/i.test(b)}function Zo(b=(0,G.z$)()){return/iphone|ipad|ipod/i.test(b)}function Mr(b=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Ta(b=(0,G.z$)()){return Zo(b)||ai(b)||Ec(b)||zt(b)||/windows phone/i.test(b)||Wo(b)}function Qr(b,g=[]){let y;switch(b){case"Browser":y=eu((0,G.z$)());break;case"Worker":y=`${eu((0,G.z$)())}-${b}`;break;default:y=b}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${O.SDK_VERSION}/${E}`}class Jm{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wi(this),this.idTokenSubscription=new Wi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=vn(y)),this._initializationPromise=this.queue((0,l.Z)(function*(){var x,R;if(!E._deleted&&(E.persistenceManager=yield Bn.create(E,g),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(re){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,l.Z)(function*(){var E;let x=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const R=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,re=null==x?void 0:x._redirectEventId,Ce=yield y.tryRedirectSignIn(g);(!R||R===re)&&(null==Ce?void 0:Ce.user)&&(x=Ce.user)}return x?x._redirectEventId?(Le(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===x._redirectEventId?y.directlySetCurrentUser(x):y.reloadAndSetCurrentUserOrClear(x)):y.reloadAndSetCurrentUserOrClear(x):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,l.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(x){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,l.Z)(function*(){try{yield on(g)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,l.Z)(function*(){const E=g?(0,G.m9)(g):null;return E&&Le(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,l.Z)(function*(){if(!y._deleted)return g&&Le(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,l.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,l.Z)(function*(){yield y.assertedPersistence.setPersistence(vn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,l.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,l.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&vn(g)||y._popupRedirectResolver;Le(E,y,"argument-error"),y.redirectPersistenceManager=yield Bn.create(y,[vn(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,l.Z)(function*(){var E,x;return y._isInitialized&&(yield y.queue((0,l.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,l.Z)(function*(){if(g===y.currentUser)return y.queue((0,l.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,x){if(this._deleted)return()=>{};const R="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Le(re,this,"internal-error"),re.then(()=>R(this.currentUser)),"function"==typeof y?g.addObserver(y,E,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,l.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Qr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Mn(b){return(0,G.m9)(b)}class Wi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(y=>this.observer=y)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Tc(b,g,y){const E=Mn(b);Le(E._canInitEmulator,E,"emulator-config-failed"),Le(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!(null==y?void 0:y.disableWarnings),R=cl(g),{host:re,port:Ce}=function(b){const g=cl(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const R=x[1];return{host:R,port:us(E.substr(R.length+1))}}{const[R,re]=E.split(":");return{host:R,port:us(re)}}}(g);E.config.emulator={url:`${R}//${re}${null===Ce?"":`:${Ce}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:re,port:Ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function b(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function cl(b){const g=b.indexOf(":");return g<0?"":b.substr(0,g+1)}function us(b){if(!b)return null;const g=Number(b);return isNaN(g)?null:g}class dl{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return fr("not implemented")}_getIdTokenResponse(g){return fr("not implemented")}_linkToIdToken(g,y){return fr("not implemented")}_getReauthenticationResolver(g){return fr("not implemented")}}function lh(b,g){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:resetPassword",hn(b,g))})).apply(this,arguments)}function mp(b,g){return uh.apply(this,arguments)}function uh(){return(uh=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Sc(b,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",hn(b,g))})).apply(this,arguments)}function ch(){return(ch=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithPassword",hn(b,g))})).apply(this,arguments)}function tu(b,g){return dh.apply(this,arguments)}function dh(){return(dh=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:sendOobCode",hn(b,g))})).apply(this,arguments)}function e_(b,g){return hh.apply(this,arguments)}function hh(){return(hh=(0,l.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function n0(b,g){return nu.apply(this,arguments)}function nu(){return(nu=(0,l.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function t_(b,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,l.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function fh(b,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,l.Z)(function*(b,g){return tu(b,g)})).apply(this,arguments)}function ru(){return(ru=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithEmailLink",hn(b,g))})).apply(this,arguments)}function js(){return(js=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithEmailLink",hn(b,g))})).apply(this,arguments)}class fl extends dl{constructor(g,y,E,x=null){super("password",E),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new fl(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new fl(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,l.Z)(function*(){switch(y.signInMethod){case"password":return function(b,g){return ch.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(b,g){return ru.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:dn(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,l.Z)(function*(){switch(E.signInMethod){case"password":return mp(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(b,g){return js.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:dn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function zn(b,g){return iu.apply(this,arguments)}function iu(){return(iu=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithIdp",hn(b,g))})).apply(this,arguments)}class Rr extends dl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Rr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):dn("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=y,R=de(y,["providerId","signInMethod"]);if(!E||!x)return null;const re=new Rr(E,x);return re.idToken=R.idToken||void 0,re.accessToken=R.accessToken||void 0,re.secret=R.secret,re.nonce=R.nonce,re.pendingToken=R.pendingToken||null,re}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,zn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,zn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,G.xO)(y)}return g}}function ph(b,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:sendVerificationCode",hn(b,g))})).apply(this,arguments)}function pl(){return(pl=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithPhoneNumber",hn(b,g))})).apply(this,arguments)}function li(){return(li=(0,l.Z)(function*(b,g){const y=yield bt(b,"POST","/v1/accounts:signInWithPhoneNumber",hn(b,g));if(y.temporaryProof)throw lt(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Nc={USER_NOT_FOUND:"user-not-found"};function Na(){return(Na=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithPhoneNumber",hn(b,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Nc)})).apply(this,arguments)}class Ai extends dl{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Ai({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Ai({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(b,g){return pl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(b,g){return li.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(b,g){return Na.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}=g;return E||y||x||R?new Ai({verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}):null}}class Rn{constructor(g){var y,E,x,R,re,Ce;const et=(0,G.zd)((0,G.pd)(g)),Be=null!==(y=et.apiKey)&&void 0!==y?y:null,_t=null!==(E=et.oobCode)&&void 0!==E?E:null,yn=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=et.mode)&&void 0!==x?x:null);Le(Be&&_t&&yn,"argument-error"),this.apiKey=Be,this.operation=yn,this.code=_t,this.continueUrl=null!==(R=et.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(re=et.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Ce=et.tenantId)&&void 0!==Ce?Ce:null}static parseLink(g){const y=function(b){const g=(0,G.zd)((0,G.pd)(b)).link,y=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(b)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||y||g||b}(g);try{return new Rn(y)}catch(E){return null}}}let Ss=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,E){return fl._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const x=Rn.parseLink(E);return Le(x,"argument-error"),fl._fromEmailAndCode(y,x.code,x.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class ds{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class In extends ds{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class zo extends In{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Le("providerId"in y&&"signInMethod"in y,"argument-error"),Rr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Le(g.idToken||g.accessToken,"argument-error"),Rr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return zo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return zo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:R,nonce:re,providerId:Ce}=g;if(!E&&!x&&!y&&!R||!Ce)return null;try{return new zo(Ce)._credential({idToken:y,accessToken:E,nonce:re,pendingToken:R})}catch(et){return null}}}let Mc=(()=>{class b extends In{constructor(){super("facebook.com")}static credential(y){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(E){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),ou=(()=>{class b extends In{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:x}=y;if(!E&&!x)return null;try{return b.credential(E,x)}catch(R){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Sn=(()=>{class b extends In{constructor(){super("github.com")}static credential(y){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch(E){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class As extends dl{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,zn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,zn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:R}=y;return E&&x&&R&&E===x?new As(E,R):null}static _create(g,y){return new As(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kr extends ds{constructor(g){Le(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return kr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return kr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=As.fromJSON(g);return Le(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return As._create(E,y)}catch(x){return null}}}let yh=(()=>{class b extends In{constructor(){super("twitter.com")}static credential(y,E){return Rr._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=y;if(!E||!x)return null;try{return b.credential(E,x)}catch(R){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function gl(b,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signUp",hn(b,g))})).apply(this,arguments)}class mr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,x=!1){return(0,l.Z)(function*(){const R=yield qi._fromIdTokenResponse(g,E,x),re=ml(E);return new mr({user:R,providerId:re,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=ml(E);return new mr({user:g,providerId:x,_tokenResponse:E,operationType:y})})()}}function ml(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function au(b){return St.apply(this,arguments)}function St(){return(St=(0,l.Z)(function*(b){var g;const y=Mn(b);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new mr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield gl(y,{returnSecureToken:!0}),x=yield mr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class lu extends G.ZR{constructor(g,y,E,x){var R;super(y.code,y.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,lu.prototype),this.customData={appName:g.name,tenantId:null!==(R=g.tenantId)&&void 0!==R?R:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,x){return new lu(g,y,E,x)}}function uu(b,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?lu._fromErrorAndOperation(b,R,g,E):R})}function kc(b){return new Set(b.map(({providerId:g})=>g).filter(g=>!!g))}function Pc(b,g){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,l.Z)(function*(b,g){const y=(0,G.m9)(b);yield Me(!0,y,g);const{providerUserInfo:E}=yield Jt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=kc(E||[]);return y.providerData=y.providerData.filter(R=>x.has(R.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function _l(b,g){return vo.apply(this,arguments)}function vo(){return(vo=(0,l.Z)(function*(b,g,y=!1){const E=yield Ct(b,g._linkToIdToken(b.auth,yield b.getIdToken()),y);return mr._forOperation(b,"link",E)})).apply(this,arguments)}function Me(b,g,y){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,l.Z)(function*(b,g,y){yield on(g);const x=!1===b?"provider-already-linked":"no-such-provider";Le(kc(g.providerData).has(y)===b,g.auth,x)})).apply(this,arguments)}function Ma(b,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,l.Z)(function*(b,g,y=!1){const{auth:E}=b,x="reauthenticate";try{const R=yield Ct(b,uu(E,x,g,b),y);Le(R.idToken,E,"internal-error");const re=Ue(R.idToken);Le(re,E,"internal-error");const{sub:Ce}=re;return Le(b.uid===Ce,E,"user-mismatch"),mr._forOperation(b,x,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&dn(E,"user-mismatch"),R}})).apply(this,arguments)}function yl(b,g){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,l.Z)(function*(b,g,y=!1){const E="signIn",x=yield uu(b,E,g),R=yield mr._fromIdTokenResponse(b,E,x);return y||(yield b._updateCurrentUser(R.user)),R})).apply(this,arguments)}function ui(b,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,l.Z)(function*(b,g){return yl(Mn(b),g)})).apply(this,arguments)}function vl(b,g){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,l.Z)(function*(b,g){const y=(0,G.m9)(b);return yield Me(!1,y,g.providerId),_l(y,g)})).apply(this,arguments)}function vh(b,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,l.Z)(function*(b,g){return Ma((0,G.m9)(b),g)})).apply(this,arguments)}function cu(b,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,l.Z)(function*(b,g){return bt(b,"POST","/v1/accounts:signInWithCustomToken",hn(b,g))})).apply(this,arguments)}function Ni(b,g){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,l.Z)(function*(b,g){const y=Mn(b),E=yield cu(y,{token:g,returnSecureToken:!0}),x=yield mr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class xi{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Mi._fromServerResponse(g,y):dn(g,"internal-error")}}class Mi extends xi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Mi(y)}}function bl(b,g,y){var E;Le((null===(E=y.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),Le(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Le(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Le(y.android.packageName.length>0,b,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Vc(b,g,y){return ka.apply(this,arguments)}function ka(){return(ka=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b),x={requestType:"PASSWORD_RESET",email:g};y&&bl(E,x,y),yield n0(E,x)})).apply(this,arguments)}function yp(b,g,y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,l.Z)(function*(b,g,y){yield lh((0,G.m9)(b),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Bc(b,g){return du.apply(this,arguments)}function du(){return(du=(0,l.Z)(function*(b,g){yield Sc((0,G.m9)(b),{oobCode:g})})).apply(this,arguments)}function wo(b,g){return wl.apply(this,arguments)}function wl(){return(wl=(0,l.Z)(function*(b,g){const y=(0,G.m9)(b),E=yield lh(y,{oobCode:g}),x=E.requestType;switch(Le(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(E.mfaInfo,y,"internal-error");default:Le(E.email,y,"internal-error")}let R=null;return E.mfaInfo&&(R=xi._fromServerResponse(Mn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:x}})).apply(this,arguments)}function Uc(b,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,l.Z)(function*(b,g){const{data:y}=yield wo((0,G.m9)(b),g);return y.email})).apply(this,arguments)}function bh(b,g,y){return $c.apply(this,arguments)}function $c(){return($c=(0,l.Z)(function*(b,g,y){const E=Mn(b),x=yield gl(E,{returnSecureToken:!0,email:g,password:y}),R=yield mr._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function Hc(b,g,y){return ui((0,G.m9)(b),Ss.credential(g,y))}function jc(b,g,y){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b),x={requestType:"EMAIL_SIGNIN",email:g};Le(y.handleCodeInApp,E,"argument-error"),y&&bl(E,x,y),yield t_(E,x)})).apply(this,arguments)}function Gc(b,g){const y=Rn.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function vp(b,g,y){return jr.apply(this,arguments)}function jr(){return(jr=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b),x=Ss.credentialWithLink(g,y||oi());return Le(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ui(E,x)})).apply(this,arguments)}function Oa(b,g){return $n.apply(this,arguments)}function $n(){return($n=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:createAuthUri",hn(b,g))})).apply(this,arguments)}function r0(b,g){return bp.apply(this,arguments)}function bp(){return(bp=(0,l.Z)(function*(b,g){const E={identifier:g,continueUri:Hr()?oi():"http://localhost"},{signinMethods:x}=yield Oa((0,G.m9)(b),E);return x||[]})).apply(this,arguments)}function hu(b,g){return qc.apply(this,arguments)}function qc(){return(qc=(0,l.Z)(function*(b,g){const y=(0,G.m9)(b),x={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};g&&bl(y.auth,x,g);const{email:R}=yield e_(y.auth,x);R!==b.email&&(yield b.reload())})).apply(this,arguments)}function wp(b,g,y){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:g};y&&bl(E.auth,R,y);const{email:re}=yield fh(E.auth,R);re!==b.email&&(yield b.reload())})).apply(this,arguments)}function fu(b,g){return qs.apply(this,arguments)}function qs(){return(qs=(0,l.Z)(function*(b,g){return It(b,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function _r(b,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,l.Z)(function*(b,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,G.m9)(b),R={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},re=yield Ct(E,fu(E.auth,R));E.displayName=re.displayName||null,E.photoURL=re.photoUrl||null;const Ce=E.providerData.find(({providerId:et})=>"password"===et);Ce&&(Ce.displayName=E.displayName,Ce.photoURL=E.photoURL),yield E._updateTokensIfNecessary(re)})).apply(this,arguments)}function wh(b,g){return Ws((0,G.m9)(b),g,null)}function Cp(b,g){return Ws((0,G.m9)(b),null,g)}function Ws(b,g,y){return Co.apply(this,arguments)}function Co(){return(Co=(0,l.Z)(function*(b,g,y){const{auth:E}=b,R={idToken:yield b.getIdToken(),returnSecureToken:!0};g&&(R.email=g),y&&(R.password=y);const re=yield Ct(b,mp(E,R));yield b._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class Eo{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class La extends Eo{constructor(g,y,E,x){super(g,y,E),this.username=x}}class Wc extends Eo{constructor(g,y){super(g,"facebook.com",y)}}class Ep extends La{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class i_ extends Eo{constructor(g,y){super(g,"google.com",y)}}class Zi extends La{constructor(g,y,E){super(g,"twitter.com",y,E)}}function s0(b){const{user:g,_tokenResponse:y}=b;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(b){var g,y;if(!b)return null;const{providerId:E}=b,x=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},R=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&(null==b?void 0:b.idToken)){const re=null===(y=null===(g=Ue(b.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new Eo(R,"anonymous"!==re&&"custom"!==re?re:null)}if(!E)return null;switch(E){case"facebook.com":return new Wc(R,x);case"github.com":return new Ep(R,x);case"google.com":return new i_(R,x);case"twitter.com":return new Zi(R,x,b.screenName||null);case"custom":case"anonymous":return new Eo(R,null);default:return new Eo(R,E,x)}}(y)}class zi{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new zi("enroll",g)}static _fromMfaPendingCredential(g){return new zi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return zi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return zi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ba{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Mn(g),x=y.customData._serverResponse,R=(x.mfaInfo||[]).map(Ce=>xi._fromServerResponse(E,Ce));Le(x.mfaPendingCredential,E,"internal-error");const re=zi._fromMfaPendingCredential(x.mfaPendingCredential);return new Ba(re,R,function(){var Ce=(0,l.Z)(function*(et){const Be=yield et._process(E,re);delete x.mfaInfo,delete x.mfaPendingCredential;const _t=Object.assign(Object.assign({},x),{idToken:Be.idToken,refreshToken:Be.refreshToken});switch(y.operationType){case"signIn":const yn=yield mr._fromIdTokenResponse(E,y.operationType,_t);return yield E._updateCurrentUser(yn.user),yn;case"reauthenticate":return Le(y.user,E,"internal-error"),mr._forOperation(y.user,y.operationType,_t);default:dn(E,"internal-error")}});return function(et){return Ce.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,l.Z)(function*(){return y.signInResolver(g)})()}}function gu(b,g){var y;const E=(0,G.m9)(b),x=g;return Le(g.customData.operationType,E,"argument-error"),Le(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Ba._fromError(E,x)}function o0(b,g){return It(b,"POST","/v2/accounts/mfaEnrollment:start",hn(b,g))}class mu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>xi._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new mu(g)}getSession(){var g=this;return(0,l.Z)(function*(){return zi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,l.Z)(function*(){const x=g,R=yield E.getSession(),re=yield Ct(E.user,x._process(E.user.auth,R,y));return yield E.user._updateTokensIfNecessary(re),E.user.reload()})()}unenroll(g){var y=this;return(0,l.Z)(function*(){const E="string"==typeof g?g:g.uid,x=yield y.user.getIdToken(),R=yield Ct(y.user,function(b,g){return It(b,"POST","/v2/accounts/mfaEnrollment:withdraw",hn(b,g))}(y.user.auth,{idToken:x,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:re})=>re!==E),yield y.user._updateTokensIfNecessary(R);try{yield y.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const Dh=new WeakMap;function Qo(b){const g=(0,G.m9)(b);return Dh.has(g)||Dh.set(g,mu._fromUser(g)),Dh.get(g)}const Dl="__sak";class Xt{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jo=(()=>{class b extends Xt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,G.z$)();return Kr(b)||Zo(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Ta(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),R=this.localCache[E];x!==R&&y(E,R,x)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Ce,et,Be)=>{this.notifyListeners(Ce,Be)});const x=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(x);if(y.newValue!==Ce)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!E)return}const R=()=>{const Ce=this.storage.getItem(x);!E&&this.localCache[x]===Ce||this.notifyListeners(x,Ce)},re=this.storage.getItem(x);(0,G.w1)()&&10===document.documentMode&&re!==y.newValue&&y.newValue!==y.oldValue?setTimeout(R,10):R()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var x=()=>super._set,R=this;return(0,l.Z)(function*(){yield x().call(R,y,E),R.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,x=this;return(0,l.Z)(function*(){const R=yield E().call(x,y);return x.localCache[y]=JSON.stringify(R),R})()}_remove(y){var E=()=>super._remove,x=this;return(0,l.Z)(function*(){yield E().call(x,y),delete x.localCache[y]})()}}return b.type="LOCAL",b})(),or=(()=>{class b extends Xt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return b.type="SESSION",b})();let Sp=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(R=>R.isListeningto(y));if(E)return E;const x=new b(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,l.Z)(function*(){const x=y,{eventId:R,eventType:re,data:Ce}=x.data,et=E.handlersMap[re];if(!(null==et?void 0:et.size))return;x.ports[0].postMessage({status:"ack",eventId:R,eventType:re});const Be=Array.from(et).map(function(){var yn=(0,l.Z)(function*(kn){return kn(x.origin,Ce)});return function(kn){return yn.apply(this,arguments)}}()),_t=yield function(b){return Promise.all(b.map(function(){var g=(0,l.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(Be);x.ports[0].postMessage({status:"done",eventId:R,eventType:re,response:_t})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Do(b="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return b+y}class Yn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var x=this;return(0,l.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let re,Ce;return new Promise((et,Be)=>{const _t=Do("",20);R.port1.start();const yn=setTimeout(()=>{Be(new Error("unsupported_event"))},E);Ce={messageChannel:R,onMessage(kn){const un=kn;if(un.data.eventId===_t)switch(un.data.status){case"ack":clearTimeout(yn),re=setTimeout(()=>{Be(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),et(un.data.response);break;default:clearTimeout(yn),clearTimeout(re),Be(new Error("invalid_response"))}}},x.handlers.add(Ce),R.port1.addEventListener("message",Ce.onMessage),x.target.postMessage({eventType:g,eventId:_t,data:y},[R.port2])}).finally(()=>{Ce&&x.removeMessageHandler(Ce)})})()}}function Kn(){return window}function Xo(){return void 0!==Kn().WorkerGlobalScope&&"function"==typeof Kn().importScripts}function Ua(){return(Ua=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Ms="firebaseLocalStorageDb",Io="firebaseLocalStorage",Zs="fbase_key";class ci{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Ri(b,g){return b.transaction([Io],g?"readwrite":"readonly").objectStore(Io)}function pt(){const b=indexedDB.open(Ms,1);return new Promise((g,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(Io,{keyPath:Zs})}catch(x){y(x)}}),b.addEventListener("success",(0,l.Z)(function*(){const E=b.result;E.objectStoreNames.contains(Io)?g(E):(E.close(),yield function(){const b=indexedDB.deleteDatabase(Ms);return new ci(b).toPromise()}(),g(yield pt()))}))})}function Yi(b,g,y){return nr.apply(this,arguments)}function nr(){return(nr=(0,l.Z)(function*(b,g,y){const E=Ri(b,!0).put({[Zs]:g,value:y});return new ci(E).toPromise()})).apply(this,arguments)}function Hn(){return(Hn=(0,l.Z)(function*(b,g){const y=Ri(b,!1).get(g),E=yield new ci(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Ih(b,g){const y=Ri(b,!0).delete(g);return new ci(y).toPromise()}const Np=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,l.Z)(function*(){return y.db||(y.db=yield pt()),y.db})()}_withRetries(y){var E=this;return(0,l.Z)(function*(){let x=0;for(;;)try{const R=yield E._openDb();return yield y(R)}catch(R){if(x++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,l.Z)(function*(){return Xo()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,l.Z)(function*(){y.receiver=Sp._getInstance(Xo()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,l.Z)(function*(x,R){return{keyProcessed:(yield y._poll()).includes(R.key)}});return function(x,R){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,l.Z)(function*(x,R){return["keyChanged"]});return function(x,R){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,l.Z)(function*(){var E,x;if(y.activeServiceWorker=yield function(){return Ua.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Yn(y.activeServiceWorker);const R=yield y.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=R[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,l.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const y=yield pt();return yield Yi(y,Dl,"1"),yield Ih(y,Dl),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,l.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var x=this;return(0,l.Z)(function*(){return x._withPendingWrite((0,l.Z)(function*(){return yield x._withRetries(R=>Yi(R,y,E)),x.localCache[y]=E,x.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,l.Z)(function*(){const x=yield E._withRetries(R=>function(b,g){return Hn.apply(this,arguments)}(R,y));return E.localCache[y]=x,x})()}_remove(y){var E=this;return(0,l.Z)(function*(){return E._withPendingWrite((0,l.Z)(function*(){return yield E._withRetries(x=>Ih(x,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,l.Z)(function*(){const E=yield y._withRetries(re=>{const Ce=Ri(re,!1).getAll();return new ci(Ce).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const x=[],R=new Set;for(const{fbase_key:re,value:Ce}of E)R.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(Ce)&&(y.notifyListeners(re,Ce),x.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!R.has(re)&&(y.notifyListeners(re,null),x.push(re));return x})()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function ea(b,g){return It(b,"POST","/v2/accounts/mfaSignIn:start",hn(b,g))}function vu(){return(vu=(0,l.Z)(function*(b){return(yield It(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Kc(b){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=g,E.onerror=x=>{const R=Ln("internal-error");R.customData=x,y(R)},E.type="text/javascript",E.charset="UTF-8",function(){var b,g;return null!==(g=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==g?g:document}().appendChild(E)})}function So(b){return`__${b}${Math.floor(1e6*Math.random())}`}const zs=1e12;class Pr{constructor(g){this.auth=g,this.counter=zs,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Qc(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||zs;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||zs))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,l.Z)(function*(){var E;return null===(E=y._widgets.get(g||zs))||void 0===E||E.execute(),""})()}}class Qc{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;Le(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vi=So("rcb"),Rs=new _n(3e4,6e4);class No{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Kn().grecaptcha}load(g,y=""){return Le((b=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Kn().grecaptcha):new Promise((E,x)=>{const R=Kn().setTimeout(()=>{x(Ln(g,"network-request-failed"))},Rs.get());Kn()[vi]=()=>{Kn().clearTimeout(R),delete Kn()[vi];const Ce=Kn().grecaptcha;if(!Ce)return void x(Ln(g,"internal-error"));const et=Ce.render;Ce.render=(Be,_t)=>{const yn=et(Be,_t);return this.counter++,yn},this.hostLanguage=y,E(Ce)},Kc(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:vi,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(R),x(Ln(g,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Kn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ah{load(g){return(0,l.Z)(function*(){return new Pr(g)})()}clearedOneInstance(){}}const Ys="recaptcha",xp={theme:"light",type:"image"};class Ha{constructor(g,y=Object.assign({},xp),E){this.parameters=y,this.type=Ys,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Mn(E),this.isInvisible="invisible"===this.parameters.size,Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;Le(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ah:new No,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(R=>{const re=Ce=>{!Ce||(g.tokenChangeListeners.delete(re),R(Ce))};g.tokenChangeListeners.add(re),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Le(!this.parameters.sitekey,this.auth,"argument-error"),Le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Kn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){Le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){Le(Hr()&&!Xo(),g.auth,"internal-error"),yield function(){let b=null;return new Promise(g=>{"complete"!==document.readyState?(b=()=>g(),window.addEventListener("load",b)):g()}).catch(g=>{throw b&&window.removeEventListener("load",b),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(b){return vu.apply(this,arguments)}(g.auth);Le(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jc{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Ai._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function vr(b,g,y){return lr.apply(this,arguments)}function lr(){return(lr=(0,l.Z)(function*(b,g,y){const E=Mn(b),x=yield k(E,g,(0,G.m9)(y));return new Jc(x,R=>ui(E,R))})).apply(this,arguments)}function ja(b,g,y){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b);yield Me(!1,E,"phone");const x=yield k(E.auth,g,(0,G.m9)(y));return new Jc(x,R=>vl(E,R))})).apply(this,arguments)}function I(b,g,y){return A.apply(this,arguments)}function A(){return(A=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b),x=yield k(E.auth,g,(0,G.m9)(y));return new Jc(x,R=>vh(E,R))})).apply(this,arguments)}function k(b,g,y){return q.apply(this,arguments)}function q(){return(q=(0,l.Z)(function*(b,g,y){var E;const x=yield y.verify();try{let R;if(Le("string"==typeof x,b,"argument-error"),Le(y.type===Ys,b,"argument-error"),R="string"==typeof g?{phoneNumber:g}:g,"session"in R){const re=R.session;if("phoneNumber"in R)return Le("enroll"===re.type,b,"internal-error"),(yield o0(b,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Le("signin"===re.type,b,"internal-error");const Ce=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return Le(Ce,b,"missing-multi-factor-info"),(yield ea(b,{mfaPendingCredential:re.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield ph(b,{phoneNumber:R.phoneNumber,recaptchaToken:x});return re}}finally{y._reset()}})).apply(this,arguments)}function se(b,g){return he.apply(this,arguments)}function he(){return(he=(0,l.Z)(function*(b,g){yield _l((0,G.m9)(b),g)})).apply(this,arguments)}let Oe=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Mn(y)}verifyPhoneNumber(y,E){return k(this.auth,y,(0,G.m9)(E))}static credential(y,E){return Ai._fromVerification(y,E)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:x}=y;return E&&x?Ai._fromTokenResponse(E,x):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Xe(b,g){return g?vn(g):(Le(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Dt extends dl{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return zn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return zn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return zn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function kt(b){return yl(b.auth,new Dt(b),b.bypassAuthState)}function tn(b){const{auth:g,user:y}=b;return Le(y,g,"internal-error"),Ma(y,new Dt(b),b.bypassAuthState)}function Pt(b){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,l.Z)(function*(b){const{auth:g,user:y}=b;return Le(y,g,"internal-error"),_l(y,new Dt(b),b.bypassAuthState)})).apply(this,arguments)}class Sr{constructor(g,y,E,x,R=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,l.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(R){g.reject(R)}});return function(E,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,l.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:R,tenantId:re,error:Ce,type:et}=g;if(Ce)return void y.reject(Ce);const Be={auth:y.auth,requestUri:E,sessionId:x,tenantId:re||void 0,postBody:R||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(et)(Be))}catch(_t){y.reject(_t)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return kt;case"linkViaPopup":case"linkViaRedirect":return Pt;case"reauthViaPopup":case"reauthViaRedirect":return tn;default:dn(this.auth,"internal-error")}}resolve(g){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Il=new _n(2e3,1e4);function Xc(b,g,y){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,l.Z)(function*(b,g,y){const E=Mn(b);si(b,g,ds);const x=Xe(E,y);return new Rp(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Ga(b,g,y){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);return new Rp(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function ta(b,g,y){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);return new Rp(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let Rp=(()=>{class b extends Sr{constructor(y,E,x,R,re){super(y,E,R,re),this.provider=x,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,l.Z)(function*(){const E=yield y.execute();return Le(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,l.Z)(function*(){ir(1===y.filter.length,"Popup operations only handle one event");const E=Do();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Ln(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ln(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Il.get())};y()}}return b.currentPopupAction=null,b})();const bu=new Map;class o_ extends Sr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,l.Z)(function*(){let E=bu.get(y.auth._key());if(!E){try{const R=(yield function(b,g){return Al.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(R)}catch(x){E=()=>Promise.reject(x)}bu.set(y.auth._key(),E)}return y.bypassAuthState||bu.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function Al(){return(Al=(0,l.Z)(function*(b,g){const y=qa(g),E=a_(b);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(y));return yield E._remove(y),x})).apply(this,arguments)}function kp(b,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,l.Z)(function*(b,g){return a_(b)._set(qa(g),"true")})).apply(this,arguments)}function Pp(){bu.clear()}function a_(b){return vn(b._redirectPersistence)}function qa(b){return ls("pendingRedirect",b.config.apiKey,b.name)}function Wa(b,g,y){return function(b,g,y){return Gr.apply(this,arguments)}(b,g,y)}function Gr(){return(Gr=(0,l.Z)(function*(b,g,y){const E=Mn(b);si(b,g,ds);const x=Xe(E,y);return yield kp(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function u0(b,g,y){return function(b,g,y){return wu.apply(this,arguments)}(b,g,y)}function wu(){return(wu=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);yield kp(x,E.auth);const R=yield Nl(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",R)})).apply(this,arguments)}function ed(b,g,y){return function(b,g,y){return xh.apply(this,arguments)}(b,g,y)}function xh(){return(xh=(0,l.Z)(function*(b,g,y){const E=(0,G.m9)(b);si(E.auth,g,ds);const x=Xe(E.auth,y);yield Me(!1,E,g.providerId),yield kp(x,E.auth);const R=yield Nl(E);return x._openRedirect(E.auth,g,"linkViaRedirect",R)})).apply(this,arguments)}function c0(b,g){return na.apply(this,arguments)}function na(){return(na=(0,l.Z)(function*(b,g){return yield Mn(b)._initializationPromise,Za(b,g,!1)})).apply(this,arguments)}function Za(b,g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,l.Z)(function*(b,g,y=!1){const E=Mn(b),x=Xe(E,g),re=yield new o_(E,x,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield E._persistUserIfCurrent(re.user),yield E._setRedirectUser(null,g)),re})).apply(this,arguments)}function Nl(b){return en.apply(this,arguments)}function en(){return(en=(0,l.Z)(function*(b){const g=Do(`${b.uid}:::`);return b._redirectEventId=g,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),g})).apply(this,arguments)}class d0{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c_(b);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!c_(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Ln(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(za(g))}saveEventToCache(g){this.cachedEventUids.add(za(g)),this.lastProcessedEventTime=Date.now()}}function za(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(g=>g).join("-")}function c_({type:b,error:g}){return"unknown"===b&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Eu(b){return nd.apply(this,arguments)}function nd(){return(nd=(0,l.Z)(function*(b,g={}){return It(b,"GET","/v1/projects",g)})).apply(this,arguments)}const ra=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rd=/^https?/;function id(){return(id=(0,l.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:g}=yield Eu(b);for(const y of g)try{if(Mh(y))return}catch(E){}dn(b,"unauthorized-domain")})).apply(this,arguments)}function Mh(b){const g=oi(),{protocol:y,hostname:E}=new URL(g);if(b.startsWith("chrome-extension://")){const re=new URL(b);return""===re.hostname&&""===E?"chrome-extension:"===y&&b.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===E}if(!rd.test(y))return!1;if(ra.test(b))return E===b;const x=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const sd=new _n(3e4,6e4);function Du(){const b=Kn().___jsl;if(null==b?void 0:b.H)for(const g of Object.keys(b.H))if(b.H[g].r=b.H[g].r||[],b.H[g].L=b.H[g].L||[],b.H[g].r=[...b.H[g].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let Tu=null;function xl(b){return Tu=Tu||function(b){return new Promise((g,y)=>{var E,x,R;function re(){Du(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Du(),y(Ln(b,"network-request-failed"))},timeout:sd.get()})}if(null===(x=null===(E=Kn().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(R=Kn().gapi)||void 0===R?void 0:R.load)){const Ce=So("iframefcb");return Kn()[Ce]=()=>{gapi.load?re():y(Ln(b,"network-request-failed"))},Kc(`https://apis.google.com/js/api.js?onload=${Ce}`).catch(et=>y(et))}re()}}).catch(g=>{throw Tu=null,g})}(b),Tu}const h0=new _n(5e3,15e3),p0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},g0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ia(b){const g=b.config;Le(g.authDomain,b,"auth-domain-config-required");const y=g.emulator?qe(g,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:b.name,v:O.SDK_VERSION},x=g0.get(b.config.apiHost);x&&(E.eid=x);const R=b._getFrameworks();return R.length&&(E.fw=R.join(",")),`${y}?${(0,G.xO)(E).slice(1)}`}function kh(){return(kh=(0,l.Z)(function*(b){const g=yield xl(b),y=Kn().gapi;return Le(y,b,"internal-error"),g.open({where:document.body,url:ia(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p0,dontclear:!0},E=>new Promise(function(){var x=(0,l.Z)(function*(R,re){yield E.restyle({setHideOnLeave:!1});const Ce=Ln(b,"network-request-failed"),et=Kn().setTimeout(()=>{re(Ce)},h0.get());function Be(){Kn().clearTimeout(et),R(E)}E.ping(Be).then(Be,()=>{re(Ce)})});return function(R,re){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const h_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ph{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function g_(b,g,y,E,x,R){Le(b.config.authDomain,b,"auth-domain-config-required"),Le(b.config.apiKey,b,"invalid-api-key");const re={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:E,v:O.SDK_VERSION,eventId:x};if(g instanceof ds){g.setDefaultLanguage(b.languageCode),re.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[et,Be]of Object.entries(R||{}))re[et]=Be}if(g instanceof In){const et=g.getScopes().filter(Be=>""!==Be);et.length>0&&(re.scopes=et.join(","))}b.tenantId&&(re.tid=b.tenantId);const Ce=re;for(const et of Object.keys(Ce))void 0===Ce[et]&&delete Ce[et];return`${function({config:b}){return b.emulator?qe(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,G.xO)(Ce).slice(1)}`}const Ya="webStorageSupport",Os=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=or,this._completeRedirectFn=Za}_openPopup(g,y,E,x){var R=this;return(0,l.Z)(function*(){var re;ir(null===(re=R.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Ce=g_(g,y,E,oi(),x);return function(b,g,y,E=500,x=600){const R=Math.max((window.screen.availHeight-x)/2,0).toString(),re=Math.max((window.screen.availWidth-E)/2,0).toString();let Ce="";const et=Object.assign(Object.assign({},h_),{width:E.toString(),height:x.toString(),top:R,left:re}),Be=(0,G.z$)().toLowerCase();y&&(Ce=po(Be)?"_blank":y),Da(Be)&&(g=g||"http://localhost",et.scrollbars="yes");const _t=Object.entries(et).reduce((kn,[un,oa])=>`${kn}${un}=${oa},`,"");if(function(b=(0,G.z$)()){var g;return Zo(b)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Be)&&"_self"!==Ce)return function(b,g){const y=document.createElement("a");y.href=b,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",Ce),new Ph(null);const yn=window.open(g||"",Ce,_t);Le(yn,b,"popup-blocked");try{yn.focus()}catch(kn){}return new Ph(yn)}(g,Ce,Do())})()}_openRedirect(g,y,E,x){var R=this;return(0,l.Z)(function*(){return yield R._originValidation(g),b=g_(g,y,E,oi(),x),Kn().location.href=b,new Promise(()=>{});var b})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:R}=this.eventManagers[y];return x?Promise.resolve(x):(ir(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,l.Z)(function*(){const E=yield function(b){return kh.apply(this,arguments)}(g),x=new d0(g);return E.register("authEvent",R=>(Le(null==R?void 0:R.authEvent,g,"invalid-auth-event"),{status:x.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Ya,{type:Ya},x=>{var R;const re=null===(R=null==x?void 0:x[0])||void 0===R?void 0:R[Ya];void 0!==re&&y(!!re),dn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(b){return id.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ta()||Kr()||Zo()}};class Au extends class{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return fr("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Au(g)}_finalizeEnroll(g,y,E){return function(b,g){return It(b,"POST","/v2/accounts/mfaEnrollment:finalize",hn(b,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(b,g){return It(b,"POST","/v2/accounts/mfaSignIn:finalize",hn(b,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let m_=(()=>{class b{constructor(){}static assertion(y){return Au._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var b,Nu="@firebase/auth",__="0.19.12";class dE{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,l.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}b="Browser",(0,O._registerComponent)(new Ae.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:R,authDomain:re}=E.options;return((Ce,et)=>{Le(R&&!R.includes(":"),"invalid-api-key",{appName:Ce.name}),Le(!(null==re?void 0:re.includes(":")),"argument-error",{appName:Ce.name});const Be={apiKey:R,authDomain:re,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qr(b)},_t=new Jm(Ce,et,Be);return function(b,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(vn);(null==g?void 0:g.errorMap)&&b._updateErrorMap(g.errorMap),b._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(_t,y),_t})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Ae.wA("auth-internal",g=>{const y=Mn(g.getProvider("auth").getImmediate());return new dE(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Nu,__,void 0),(0,O.registerVersion)(Nu,__,"esm2017")},3854:(st,Ee,B)=>{"use strict";B.d(Ee,{BH:()=>Re,LL:()=>Mt,ZR:()=>Ae,gQ:()=>fr,zI:()=>$e,hu:()=>O,g5:()=>ie,US:()=>de,tV:()=>U,h$:()=>ee,L:()=>J,$s:()=>It,r3:()=>er,Sg:()=>Se,ne:()=>ir,p$:()=>z,vZ:()=>Ln,ZB:()=>j,Lj:()=>Rt,gK:()=>Hr,pd:()=>Le,m9:()=>sn,z$:()=>we,GJ:()=>wt,jU:()=>fe,ru:()=>ke,d:()=>mt,xb:()=>rn,w1:()=>nt,hl:()=>xe,uI:()=>Ve,UG:()=>ce,Yr:()=>dt,b$:()=>Ye,G6:()=>Ke,Mn:()=>Tt,w9:()=>Wn,cI:()=>An,UI:()=>dn,X3:()=>Et,xO:()=>si,zd:()=>hr,DV:()=>cn,ug:()=>qe,dS:()=>_n,Pz:()=>jt,Dv:()=>oi,Wj:()=>Vn,lb:()=>Ea,eu:()=>Te});var l=B(8239);const O=function(Q,Z){if(!Q)throw ie(Z)},ie=function(Q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Q)},oe=function(Q){const Z=[];let ne=0;for(let _e=0;_e<Q.length;_e++){let $=Q.charCodeAt(_e);$<128?Z[ne++]=$:$<2048?(Z[ne++]=$>>6|192,Z[ne++]=63&$|128):55296==(64512&$)&&_e+1<Q.length&&56320==(64512&Q.charCodeAt(_e+1))?($=65536+((1023&$)<<10)+(1023&Q.charCodeAt(++_e)),Z[ne++]=$>>18|240,Z[ne++]=$>>12&63|128,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128):(Z[ne++]=$>>12|224,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128)}return Z},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Q,Z){if(!Array.isArray(Q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let $=0;$<Q.length;$+=3){const H=Q[$],W=$+1<Q.length,pe=W?Q[$+1]:0,Ue=$+2<Q.length,ht=Ue?Q[$+2]:0;let Zt=(15&pe)<<2|ht>>6,Nn=63&ht;Ue||(Nn=64,W||(Zt=64)),_e.push(ne[H>>2],ne[(3&H)<<4|pe>>4],ne[Zt],ne[Nn])}return _e.join("")},encodeString(Q,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(Q):this.encodeByteArray(oe(Q),Z)},decodeString(Q,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(Q):function(Q){const Z=[];let ne=0,_e=0;for(;ne<Q.length;){const $=Q[ne++];if($<128)Z[_e++]=String.fromCharCode($);else if($>191&&$<224){const H=Q[ne++];Z[_e++]=String.fromCharCode((31&$)<<6|63&H)}else if($>239&&$<365){const Ue=((7&$)<<18|(63&Q[ne++])<<12|(63&Q[ne++])<<6|63&Q[ne++])-65536;Z[_e++]=String.fromCharCode(55296+(Ue>>10)),Z[_e++]=String.fromCharCode(56320+(1023&Ue))}else{const H=Q[ne++],W=Q[ne++];Z[_e++]=String.fromCharCode((15&$)<<12|(63&H)<<6|63&W)}}return Z.join("")}(this.decodeStringToByteArray(Q,Z))},decodeStringToByteArray(Q,Z){this.init_();const ne=Z?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let $=0;$<Q.length;){const H=ne[Q.charAt($++)],pe=$<Q.length?ne[Q.charAt($)]:0;++$;const ht=$<Q.length?ne[Q.charAt($)]:64;++$;const Ze=$<Q.length?ne[Q.charAt($)]:64;if(++$,null==H||null==pe||null==ht||null==Ze)throw Error();_e.push(H<<2|pe>>4),64!==ht&&(_e.push(pe<<4&240|ht>>2),64!==Ze&&_e.push(ht<<6&192|Ze))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Q=0;Q<this.ENCODED_VALS.length;Q++)this.byteToCharMap_[Q]=this.ENCODED_VALS.charAt(Q),this.charToByteMap_[this.byteToCharMap_[Q]]=Q,this.byteToCharMapWebSafe_[Q]=this.ENCODED_VALS_WEBSAFE.charAt(Q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Q]]=Q,Q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Q)]=Q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Q)]=Q)}}},ee=function(Q){const Z=oe(Q);return de.encodeByteArray(Z,!0)},J=function(Q){return ee(Q).replace(/\./g,"")},U=function(Q){try{return de.decodeString(Q,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function z(Q){return j(void 0,Q)}function j(Q,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===Q&&(Q={});break;case Array:Q=[];break;default:return Z}for(const ne in Z)!Z.hasOwnProperty(ne)||!ae(ne)||(Q[ne]=j(Q[ne],Z[ne]));return Q}function ae(Q){return"__proto__"!==Q}class Re{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,ne)=>{this.resolve=Z,this.reject=ne})}wrapCallback(Z){return(ne,_e)=>{ne?this.reject(ne):this.resolve(_e),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(ne):Z(ne,_e))}}}function Se(Q,Z){if(Q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=Z||"demo-project",$=Q.iat||0,H=Q.sub||Q.user_id;if(!H)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:$,exp:$+3600,auth_time:$,sub:H,user_id:H,firebase:{sign_in_provider:"custom",identities:{}}},Q);return[J(JSON.stringify({alg:"none",type:"JWT"})),J(JSON.stringify(W)),""].join(".")}function we(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Q){return!1}}function fe(){return"object"==typeof self&&self.self===self}function ke(){const Q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Q&&void 0!==Q.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mt(){return we().indexOf("Electron/")>=0}function nt(){const Q=we();return Q.indexOf("MSIE ")>=0||Q.indexOf("Trident/")>=0}function Tt(){return we().indexOf("MSAppHost/")>=0}function dt(){return!1}function Ke(){return!ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xe(){return"object"==typeof indexedDB}function Te(){return new Promise((Q,Z)=>{try{let ne=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(_e);$.onsuccess=()=>{$.result.close(),ne||self.indexedDB.deleteDatabase(_e),Q(!0)},$.onupgradeneeded=()=>{ne=!1},$.onerror=()=>{var H;Z((null===(H=$.error)||void 0===H?void 0:H.message)||"")}}catch(ne){Z(ne)}})}function $e(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ae extends Error{constructor(Z,ne,_e){super(ne),this.code=Z,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(Z,ne,_e){this.service=Z,this.serviceName=ne,this.errors=_e}create(Z,...ne){const _e=ne[0]||{},$=`${this.service}/${Z}`,H=this.errors[Z],W=H?function(Q,Z){return Q.replace(Qt,(ne,_e)=>{const $=Z[_e];return null!=$?String($):`<${_e}?>`})}(H,_e):"Error";return new Ae($,`${this.serviceName}: ${W} (${$}).`,_e)}}const Qt=/\{\$([^}]+)}/g;function An(Q){return JSON.parse(Q)}function jt(Q){return JSON.stringify(Q)}const yt=function(Q){let Z={},ne={},_e={},$="";try{const H=Q.split(".");Z=An(U(H[0])||""),ne=An(U(H[1])||""),$=H[2],_e=ne.d||{},delete ne.d}catch(H){}return{header:Z,claims:ne,data:_e,signature:$}},Wn=function(Q){const ne=yt(Q).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},wt=function(Q){const Z=yt(Q).claims;return"object"==typeof Z&&!0===Z.admin};function er(Q,Z){return Object.prototype.hasOwnProperty.call(Q,Z)}function cn(Q,Z){if(Object.prototype.hasOwnProperty.call(Q,Z))return Q[Z]}function rn(Q){for(const Z in Q)if(Object.prototype.hasOwnProperty.call(Q,Z))return!1;return!0}function dn(Q,Z,ne){const _e={};for(const $ in Q)Object.prototype.hasOwnProperty.call(Q,$)&&(_e[$]=Z.call(ne,Q[$],$,Q));return _e}function Ln(Q,Z){if(Q===Z)return!0;const ne=Object.keys(Q),_e=Object.keys(Z);for(const $ of ne){if(!_e.includes($))return!1;const H=Q[$],W=Z[$];if(ji(H)&&ji(W)){if(!Ln(H,W))return!1}else if(H!==W)return!1}for(const $ of _e)if(!ne.includes($))return!1;return!0}function ji(Q){return null!==Q&&"object"==typeof Q}function si(Q){const Z=[];for(const[ne,_e]of Object.entries(Q))Array.isArray(_e)?_e.forEach($=>{Z.push(encodeURIComponent(ne)+"="+encodeURIComponent($))}):Z.push(encodeURIComponent(ne)+"="+encodeURIComponent(_e));return Z.length?"&"+Z.join("&"):""}function hr(Q){const Z={};return Q.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[$,H]=_e.split("=");Z[decodeURIComponent($)]=decodeURIComponent(H)}}),Z}function Le(Q){const Z=Q.indexOf("?");if(!Z)return"";const ne=Q.indexOf("#",Z);return Q.substring(Z,ne>0?ne:void 0)}class fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,ne){ne||(ne=0);const _e=this.W_;if("string"==typeof Z)for(let Ze=0;Ze<16;Ze++)_e[Ze]=Z.charCodeAt(ne)<<24|Z.charCodeAt(ne+1)<<16|Z.charCodeAt(ne+2)<<8|Z.charCodeAt(ne+3),ne+=4;else for(let Ze=0;Ze<16;Ze++)_e[Ze]=Z[ne]<<24|Z[ne+1]<<16|Z[ne+2]<<8|Z[ne+3],ne+=4;for(let Ze=16;Ze<80;Ze++){const Zt=_e[Ze-3]^_e[Ze-8]^_e[Ze-14]^_e[Ze-16];_e[Ze]=4294967295&(Zt<<1|Zt>>>31)}let ht,Ct,$=this.chain_[0],H=this.chain_[1],W=this.chain_[2],pe=this.chain_[3],Ue=this.chain_[4];for(let Ze=0;Ze<80;Ze++){Ze<40?Ze<20?(ht=pe^H&(W^pe),Ct=1518500249):(ht=H^W^pe,Ct=1859775393):Ze<60?(ht=H&W|pe&(H|W),Ct=2400959708):(ht=H^W^pe,Ct=3395469782);const Zt=($<<5|$>>>27)+ht+Ue+Ct+_e[Ze]&4294967295;Ue=pe,pe=W,W=4294967295&(H<<30|H>>>2),H=$,$=Zt}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+H&4294967295,this.chain_[2]=this.chain_[2]+W&4294967295,this.chain_[3]=this.chain_[3]+pe&4294967295,this.chain_[4]=this.chain_[4]+Ue&4294967295}update(Z,ne){if(null==Z)return;void 0===ne&&(ne=Z.length);const _e=ne-this.blockSize;let $=0;const H=this.buf_;let W=this.inbuf_;for(;$<ne;){if(0===W)for(;$<=_e;)this.compress_(Z,$),$+=this.blockSize;if("string"==typeof Z){for(;$<ne;)if(H[W]=Z.charCodeAt($),++W,++$,W===this.blockSize){this.compress_(H),W=0;break}}else for(;$<ne;)if(H[W]=Z[$],++W,++$,W===this.blockSize){this.compress_(H),W=0;break}}this.inbuf_=W,this.total_+=ne}digest(){const Z=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&ne,ne/=256;this.compress_(this.buf_);let _e=0;for(let $=0;$<5;$++)for(let H=24;H>=0;H-=8)Z[_e]=this.chain_[$]>>H&255,++_e;return Z}}function ir(Q,Z){const ne=new ot(Q,Z);return ne.subscribe.bind(ne)}class ot{constructor(Z,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{Z(this)}).catch(_e=>{this.error(_e)})}next(Z){this.forEachObserver(ne=>{ne.next(Z)})}error(Z){this.forEachObserver(ne=>{ne.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,ne,_e){let $;if(void 0===Z&&void 0===ne&&void 0===_e)throw new Error("Missing Observer.");$=function(Q,Z){if("object"!=typeof Q||null===Q)return!1;for(const ne of["next","error","complete"])if(ne in Q&&"function"==typeof Q[ne])return!0;return!1}(Z)?Z:{next:Z,error:ne,complete:_e},void 0===$.next&&($.next=Gn),void 0===$.error&&($.error=Gn),void 0===$.complete&&($.complete=Gn);const H=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(W){}}),this.observers.push($),H}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,Z)}sendOne(Z,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{ne(this.observers[Z])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gn(){}const oi=function(Q,Z,ne,_e){let $;if(_e<Z?$="at least "+Z:_e>ne&&($=0===ne?"none":"no more than "+ne),$)throw new Error(Q+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+$+".")};function Hr(Q,Z){return`${Q} failed: ${Z} argument `}function Vn(Q,Z,ne,_e){if((!_e||ne)&&"function"!=typeof ne)throw new Error(Hr(Q,Z)+"must be a valid function.")}function Ea(Q,Z,ne,_e){if((!_e||ne)&&("object"!=typeof ne||null===ne))throw new Error(Hr(Q,Z)+"must be a valid context object.")}const _n=function(Q){const Z=[];let ne=0;for(let _e=0;_e<Q.length;_e++){let $=Q.charCodeAt(_e);if($>=55296&&$<=56319){const H=$-55296;_e++,O(_e<Q.length,"Surrogate pair missing trail surrogate."),$=65536+(H<<10)+(Q.charCodeAt(_e)-56320)}$<128?Z[ne++]=$:$<2048?(Z[ne++]=$>>6|192,Z[ne++]=63&$|128):$<65536?(Z[ne++]=$>>12|224,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128):(Z[ne++]=$>>18|240,Z[ne++]=$>>12&63|128,Z[ne++]=$>>6&63|128,Z[ne++]=63&$|128)}return Z},qe=function(Q){let Z=0;for(let ne=0;ne<Q.length;ne++){const _e=Q.charCodeAt(ne);_e<128?Z++:_e<2048?Z+=2:_e>=55296&&_e<=56319?(Z+=4,ne++):Z+=3}return Z};function It(Q,Z=1e3,ne=2){const _e=Z*Math.pow(ne,Q),$=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+$)}function sn(Q){return Q&&Q._delegate?Q._delegate:Q}function bt(Q,Z){return new Promise((ne,_e)=>{Q.onsuccess=$=>{ne($.target.result)},Q.onerror=$=>{var H;_e(`${Z}: ${null===(H=$.target.error)||void 0===H?void 0:H.message}`)}})}class Gt{constructor(Z){this._db=Z,this.objectStoreNames=this._db.objectStoreNames}transaction(Z,ne="readonly"){return new Ge(this._db.transaction.call(this._db,Z,ne))}createObjectStore(Z,ne){return new Ne(this._db.createObjectStore(Z,ne))}close(){this._db.close()}}class Ge{constructor(Z){this._transaction=Z,this.complete=new Promise((ne,_e)=>{this._transaction.oncomplete=function(){ne()},this._transaction.onerror=()=>{_e(this._transaction.error)},this._transaction.onabort=()=>{_e(this._transaction.error)}})}objectStore(Z){return new Ne(this._transaction.objectStore(Z))}}class Ne{constructor(Z){this._store=Z}index(Z){return new lt(this._store.index(Z))}createIndex(Z,ne,_e){return new lt(this._store.createIndex(Z,ne,_e))}get(Z){return bt(this._store.get(Z),"Error reading from IndexedDB")}put(Z,ne){return bt(this._store.put(Z,ne),"Error writing to IndexedDB")}delete(Z){return bt(this._store.delete(Z),"Error deleting from IndexedDB")}clear(){return bt(this._store.clear(),"Error clearing IndexedDB object store")}}class lt{constructor(Z){this._index=Z}get(Z){return bt(this._index.get(Z),"Error reading from IndexedDB")}}function Et(Q,Z,ne){return new Promise((_e,$)=>{try{const H=indexedDB.open(Q,Z);H.onsuccess=W=>{_e(new Gt(W.target.result))},H.onerror=W=>{var pe;$(`Error opening indexedDB: ${null===(pe=W.target.error)||void 0===pe?void 0:pe.message}`)},H.onupgradeneeded=W=>{ne(new Gt(H.result),W.oldVersion,W.newVersion,new Ge(H.transaction))}}catch(H){$(`Error opening indexedDB: ${H.message}`)}})}function Rt(Q){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,l.Z)(function*(Q){return new Promise((Z,ne)=>{try{const _e=indexedDB.deleteDatabase(Q);_e.onsuccess=()=>{Z()},_e.onerror=$=>{var H;ne(`Error deleting indexedDB database "${Q}": ${null===(H=$.target.error)||void 0===H?void 0:H.message}`)}}catch(_e){ne(`Error deleting indexedDB database "${Q}": ${_e.message}`)}})})).apply(this,arguments)}},8873:function(st){st.exports=function(){"use strict";var B=6e4,l=36e5,G="millisecond",O="second",ie="minute",oe="hour",te="day",de="week",ee="month",J="quarter",U="year",z="date",j="Invalid Date",ae=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Re=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Se={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},we=function(Ke,xe,Te){var $e=String(Ke);return!$e||$e.length>=xe?Ke:""+Array(xe+1-$e.length).join(Te)+Ke},Ve={s:we,z:function(Ke){var xe=-Ke.utcOffset(),Te=Math.abs(xe),$e=Math.floor(Te/60),ye=Te%60;return(xe<=0?"+":"-")+we($e,2,"0")+":"+we(ye,2,"0")},m:function Ke(xe,Te){if(xe.date()<Te.date())return-Ke(Te,xe);var $e=12*(Te.year()-xe.year())+(Te.month()-xe.month()),ye=xe.clone().add($e,ee),je=Te-ye<0,Ae=xe.clone().add($e+(je?-1:1),ee);return+(-($e+(Te-ye)/(je?ye-Ae:Ae-ye))||0)},a:function(Ke){return Ke<0?Math.ceil(Ke)||0:Math.floor(Ke)},p:function(Ke){return{M:ee,y:U,w:de,d:te,D:z,h:oe,m:ie,s:O,ms:G,Q:J}[Ke]||String(Ke||"").toLowerCase().replace(/s$/,"")},u:function(Ke){return void 0===Ke}},ce="en",fe={};fe[ce]=Se;var ke=function(Ke){return Ke instanceof Tt},Ye=function Ke(xe,Te,$e){var ye;if(!xe)return ce;if("string"==typeof xe){var je=xe.toLowerCase();fe[je]&&(ye=je),Te&&(fe[je]=Te,ye=je);var Ae=xe.split("-");if(!ye&&Ae.length>1)return Ke(Ae[0])}else{var Mt=xe.name;fe[Mt]=xe,ye=Mt}return!$e&&ye&&(ce=ye),ye||!$e&&ce},mt=function(Ke,xe){if(ke(Ke))return Ke.clone();var Te="object"==typeof xe?xe:{};return Te.date=Ke,Te.args=arguments,new Tt(Te)},nt=Ve;nt.l=Ye,nt.i=ke,nt.w=function(Ke,xe){return mt(Ke,{locale:xe.$L,utc:xe.$u,x:xe.$x,$offset:xe.$offset})};var Tt=function(){function Ke(Te){this.$L=Ye(Te.locale,null,!0),this.parse(Te)}var xe=Ke.prototype;return xe.parse=function(Te){this.$d=function($e){var ye=$e.date,je=$e.utc;if(null===ye)return new Date(NaN);if(nt.u(ye))return new Date;if(ye instanceof Date)return new Date(ye);if("string"==typeof ye&&!/Z$/i.test(ye)){var Ae=ye.match(ae);if(Ae){var Mt=Ae[2]-1||0,gn=(Ae[7]||"0").substring(0,3);return je?new Date(Date.UTC(Ae[1],Mt,Ae[3]||1,Ae[4]||0,Ae[5]||0,Ae[6]||0,gn)):new Date(Ae[1],Mt,Ae[3]||1,Ae[4]||0,Ae[5]||0,Ae[6]||0,gn)}}return new Date(ye)}(Te),this.$x=Te.x||{},this.init()},xe.init=function(){var Te=this.$d;this.$y=Te.getFullYear(),this.$M=Te.getMonth(),this.$D=Te.getDate(),this.$W=Te.getDay(),this.$H=Te.getHours(),this.$m=Te.getMinutes(),this.$s=Te.getSeconds(),this.$ms=Te.getMilliseconds()},xe.$utils=function(){return nt},xe.isValid=function(){return this.$d.toString()!==j},xe.isSame=function(Te,$e){var ye=mt(Te);return this.startOf($e)<=ye&&ye<=this.endOf($e)},xe.isAfter=function(Te,$e){return mt(Te)<this.startOf($e)},xe.isBefore=function(Te,$e){return this.endOf($e)<mt(Te)},xe.$g=function(Te,$e,ye){return nt.u(Te)?this[$e]:this.set(ye,Te)},xe.unix=function(){return Math.floor(this.valueOf()/1e3)},xe.valueOf=function(){return this.$d.getTime()},xe.startOf=function(Te,$e){var ye=this,je=!!nt.u($e)||$e,Ae=nt.p(Te),Mt=function(Wn,wt){var er=nt.w(ye.$u?Date.UTC(ye.$y,wt,Wn):new Date(ye.$y,wt,Wn),ye);return je?er:er.endOf(te)},gn=function(Wn,wt){return nt.w(ye.toDate()[Wn].apply(ye.toDate("s"),(je?[0,0,0,0]:[23,59,59,999]).slice(wt)),ye)},Qt=this.$W,An=this.$M,jt=this.$D,yt="set"+(this.$u?"UTC":"");switch(Ae){case U:return je?Mt(1,0):Mt(31,11);case ee:return je?Mt(1,An):Mt(0,An+1);case de:var Dr=this.$locale().weekStart||0,mi=(Qt<Dr?Qt+7:Qt)-Dr;return Mt(je?jt-mi:jt+(6-mi),An);case te:case z:return gn(yt+"Hours",0);case oe:return gn(yt+"Minutes",1);case ie:return gn(yt+"Seconds",2);case O:return gn(yt+"Milliseconds",3);default:return this.clone()}},xe.endOf=function(Te){return this.startOf(Te,!1)},xe.$set=function(Te,$e){var ye,je=nt.p(Te),Ae="set"+(this.$u?"UTC":""),Mt=(ye={},ye[te]=Ae+"Date",ye[z]=Ae+"Date",ye[ee]=Ae+"Month",ye[U]=Ae+"FullYear",ye[oe]=Ae+"Hours",ye[ie]=Ae+"Minutes",ye[O]=Ae+"Seconds",ye[G]=Ae+"Milliseconds",ye)[je],gn=je===te?this.$D+($e-this.$W):$e;if(je===ee||je===U){var Qt=this.clone().set(z,1);Qt.$d[Mt](gn),Qt.init(),this.$d=Qt.set(z,Math.min(this.$D,Qt.daysInMonth())).$d}else Mt&&this.$d[Mt](gn);return this.init(),this},xe.set=function(Te,$e){return this.clone().$set(Te,$e)},xe.get=function(Te){return this[nt.p(Te)]()},xe.add=function(Te,$e){var ye,je=this;Te=Number(Te);var Ae=nt.p($e),Mt=function(An){var jt=mt(je);return nt.w(jt.date(jt.date()+Math.round(An*Te)),je)};if(Ae===ee)return this.set(ee,this.$M+Te);if(Ae===U)return this.set(U,this.$y+Te);if(Ae===te)return Mt(1);if(Ae===de)return Mt(7);var gn=(ye={},ye[ie]=B,ye[oe]=l,ye[O]=1e3,ye)[Ae]||1,Qt=this.$d.getTime()+Te*gn;return nt.w(Qt,this)},xe.subtract=function(Te,$e){return this.add(-1*Te,$e)},xe.format=function(Te){var $e=this,ye=this.$locale();if(!this.isValid())return ye.invalidDate||j;var je=Te||"YYYY-MM-DDTHH:mm:ssZ",Ae=nt.z(this),Mt=this.$H,gn=this.$m,Qt=this.$M,An=ye.weekdays,jt=ye.months,yt=function(wt,er,cn,rn){return wt&&(wt[er]||wt($e,je))||cn[er].slice(0,rn)},Dr=function(wt){return nt.s(Mt%12||12,wt,"0")},mi=ye.meridiem||function(wt,er,cn){var rn=wt<12?"AM":"PM";return cn?rn.toLowerCase():rn},Wn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Qt+1,MM:nt.s(Qt+1,2,"0"),MMM:yt(ye.monthsShort,Qt,jt,3),MMMM:yt(jt,Qt),D:this.$D,DD:nt.s(this.$D,2,"0"),d:String(this.$W),dd:yt(ye.weekdaysMin,this.$W,An,2),ddd:yt(ye.weekdaysShort,this.$W,An,3),dddd:An[this.$W],H:String(Mt),HH:nt.s(Mt,2,"0"),h:Dr(1),hh:Dr(2),a:mi(Mt,gn,!0),A:mi(Mt,gn,!1),m:String(gn),mm:nt.s(gn,2,"0"),s:String(this.$s),ss:nt.s(this.$s,2,"0"),SSS:nt.s(this.$ms,3,"0"),Z:Ae};return je.replace(Re,function(wt,er){return er||Wn[wt]||Ae.replace(":","")})},xe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},xe.diff=function(Te,$e,ye){var je,Ae=nt.p($e),Mt=mt(Te),gn=(Mt.utcOffset()-this.utcOffset())*B,Qt=this-Mt,An=nt.m(this,Mt);return An=(je={},je[U]=An/12,je[ee]=An,je[J]=An/3,je[de]=(Qt-gn)/6048e5,je[te]=(Qt-gn)/864e5,je[oe]=Qt/l,je[ie]=Qt/B,je[O]=Qt/1e3,je)[Ae]||Qt,ye?An:nt.a(An)},xe.daysInMonth=function(){return this.endOf(ee).$D},xe.$locale=function(){return fe[this.$L]},xe.locale=function(Te,$e){if(!Te)return this.$L;var ye=this.clone(),je=Ye(Te,$e,!0);return je&&(ye.$L=je),ye},xe.clone=function(){return nt.w(this.$d,this)},xe.toDate=function(){return new Date(this.valueOf())},xe.toJSON=function(){return this.isValid()?this.toISOString():null},xe.toISOString=function(){return this.$d.toISOString()},xe.toString=function(){return this.$d.toUTCString()},Ke}(),dt=Tt.prototype;return mt.prototype=dt,[["$ms",G],["$s",O],["$m",ie],["$H",oe],["$W",te],["$M",ee],["$y",U],["$D",z]].forEach(function(Ke){dt[Ke[1]]=function(xe){return this.$g(xe,Ke[0],Ke[1])}}),mt.extend=function(Ke,xe){return Ke.$i||(Ke(xe,Tt,mt),Ke.$i=!0),mt},mt.locale=Ye,mt.isDayjs=ke,mt.unix=function(Ke){return mt(1e3*Ke)},mt.en=fe[ce],mt.Ls=fe,mt.p={},mt}()},4292:function(st){st.exports=function(){"use strict";var Ee={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},B=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,l=/\d\d/,G=/\d\d?/,O=/\d*[^\s\d-_:/()]+/,ie={},oe=function(j){return(j=+j)+(j>68?1900:2e3)},te=function(j){return function(ae){this[j]=+ae}},de=[/[+-]\d\d:?(\d\d)?|Z/,function(j){(this.zone||(this.zone={})).offset=function(ae){if(!ae||"Z"===ae)return 0;var Re=ae.match(/([+-]|\d\d)/g),Se=60*Re[1]+(+Re[2]||0);return 0===Se?0:"+"===Re[0]?-Se:Se}(j)}],ee=function(j){var ae=ie[j];return ae&&(ae.indexOf?ae:ae.s.concat(ae.f))},J=function(j,ae){var Re,Se=ie.meridiem;if(Se){for(var we=1;we<=24;we+=1)if(j.indexOf(Se(we,0,ae))>-1){Re=we>12;break}}else Re=j===(ae?"pm":"PM");return Re},U={A:[O,function(j){this.afternoon=J(j,!1)}],a:[O,function(j){this.afternoon=J(j,!0)}],S:[/\d/,function(j){this.milliseconds=100*+j}],SS:[l,function(j){this.milliseconds=10*+j}],SSS:[/\d{3}/,function(j){this.milliseconds=+j}],s:[G,te("seconds")],ss:[G,te("seconds")],m:[G,te("minutes")],mm:[G,te("minutes")],H:[G,te("hours")],h:[G,te("hours")],HH:[G,te("hours")],hh:[G,te("hours")],D:[G,te("day")],DD:[l,te("day")],Do:[O,function(j){var ae=ie.ordinal,Re=j.match(/\d+/);if(this.day=Re[0],ae)for(var Se=1;Se<=31;Se+=1)ae(Se).replace(/\[|\]/g,"")===j&&(this.day=Se)}],M:[G,te("month")],MM:[l,te("month")],MMM:[O,function(j){var ae=ee("months"),Re=(ee("monthsShort")||ae.map(function(Se){return Se.slice(0,3)})).indexOf(j)+1;if(Re<1)throw new Error;this.month=Re%12||Re}],MMMM:[O,function(j){var ae=ee("months").indexOf(j)+1;if(ae<1)throw new Error;this.month=ae%12||ae}],Y:[/[+-]?\d+/,te("year")],YY:[l,function(j){this.year=oe(j)}],YYYY:[/\d{4}/,te("year")],Z:de,ZZ:de};return function(j,ae,Re){Re.p.customParseFormat=!0,j&&j.parseTwoDigitYear&&(oe=j.parseTwoDigitYear);var Se=ae.prototype,we=Se.parse;Se.parse=function(Ve){var ce=Ve.date,fe=Ve.utc,ke=Ve.args;this.$u=fe;var Ye=ke[1];if("string"==typeof Ye){var mt=!0===ke[2],nt=!0===ke[3],Tt=mt||nt,dt=ke[2];nt&&(dt=ke[2]),ie=this.$locale(),!mt&&dt&&(ie=Re.Ls[dt]),this.$d=function($e,ye,je){try{if(["x","X"].indexOf(ye)>-1)return new Date(("X"===ye?1e3:1)*$e);var Ae=function(j){var Re;Re=ie&&ie.formats;for(var Se=(j=j.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(mt,nt,Tt){var dt=Tt&&Tt.toUpperCase();return nt||Re[Tt]||Ee[Tt]||Re[dt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ke,xe,Te){return xe||Te.slice(1)})})).match(B),we=Se.length,Ve=0;Ve<we;Ve+=1){var ce=Se[Ve],fe=U[ce],Ye=fe&&fe[1];Se[Ve]=Ye?{regex:fe&&fe[0],parser:Ye}:ce.replace(/^\[|\]$/g,"")}return function(mt){for(var nt={},Tt=0,dt=0;Tt<we;Tt+=1){var Ke=Se[Tt];if("string"==typeof Ke)dt+=Ke.length;else{var xe=Ke.regex,Te=Ke.parser,$e=mt.slice(dt),ye=xe.exec($e)[0];Te.call(nt,ye),mt=mt.replace(ye,"")}}return function(je){var Ae=je.afternoon;if(void 0!==Ae){var Mt=je.hours;Ae?Mt<12&&(je.hours+=12):12===Mt&&(je.hours=0),delete je.afternoon}}(nt),nt}}(ye)($e),Mt=Ae.year,gn=Ae.month,Qt=Ae.day,An=Ae.hours,jt=Ae.minutes,yt=Ae.seconds,Dr=Ae.milliseconds,mi=Ae.zone,Wn=new Date,wt=Qt||(Mt||gn?1:Wn.getDate()),er=Mt||Wn.getFullYear(),cn=0;Mt&&!gn||(cn=gn>0?gn-1:Wn.getMonth());var rn=An||0,dn=jt||0,Ln=yt||0,ji=Dr||0;return mi?new Date(Date.UTC(er,cn,wt,rn,dn,Ln,ji+60*mi.offset*1e3)):je?new Date(Date.UTC(er,cn,wt,rn,dn,Ln,ji)):new Date(er,cn,wt,rn,dn,Ln,ji)}catch(si){return new Date("")}}(ce,Ye,fe),this.init(),dt&&!0!==dt&&(this.$L=this.locale(dt).$L),Tt&&ce!=this.format(Ye)&&(this.$d=new Date("")),ie={}}else if(Ye instanceof Array)for(var Ke=Ye.length,xe=1;xe<=Ke;xe+=1){ke[1]=Ye[xe-1];var Te=Re.apply(this,ke);if(Te.isValid()){this.$d=Te.$d,this.$L=Te.$L,this.init();break}xe===Ke&&(this.$d=new Date(""))}else we.call(this,Ve)}}}()},2329:(st,Ee,B)=>{"use strict";B.d(Ee,{Mq:()=>l.getApp,C6:()=>l.getApps});var l=B(8026);(0,l.registerVersion)("firebase","9.6.11","app")},7841:(st,Ee,B)=>{"use strict";B.d(Ee,{Z:()=>l.Z});var l=B(3394);l.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(st,Ee,B)=>{"use strict";B.r(Ee);var l=B(8239),G=B(3394),O=B(982),ie=B(3854),de=(B(8026),B(5422),B(3910));function ee(){return window}function z(){return(z=(0,l.Z)(function*($,H,W){var pe;const{BuildInfo:Ue}=ee();(0,O.ap)(H.sessionId,"AuthEvent did not contain a session ID");const ht=yield ce(H.sessionId),Ct={};return(0,O.aq)()?Ct.ibi=Ue.packageName:(0,O.ar)()?Ct.apn=Ue.packageName:(0,O.as)($,"operation-not-supported-in-this-environment"),Ue.displayName&&(Ct.appDisplayName=Ue.displayName),Ct.sessionId=ht,(0,O.at)($,W,H.type,void 0,null!==(pe=H.eventId)&&void 0!==pe?pe:void 0,Ct)})).apply(this,arguments)}function ae(){return(ae=(0,l.Z)(function*($){const{BuildInfo:H}=ee(),W={};(0,O.aq)()?W.iosBundleId=H.packageName:(0,O.ar)()?W.androidPackageName=H.packageName:(0,O.as)($,"operation-not-supported-in-this-environment"),yield(0,O.au)($,W)})).apply(this,arguments)}function we(){return(we=(0,l.Z)(function*($,H,W){const{cordova:pe}=ee();let Ue=()=>{};try{yield new Promise((ht,Ct)=>{let Ze=null;function Zt(){var on;ht();const qn=null===(on=pe.plugins.browsertab)||void 0===on?void 0:on.close;"function"==typeof qn&&qn(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Nn(){Ze||(Ze=window.setTimeout(()=>{Ct((0,O.av)($,"redirect-cancelled-by-user"))},2e3))}function Tn(){"visible"===(null==document?void 0:document.visibilityState)&&Nn()}H.addPassiveListener(Zt),document.addEventListener("resume",Nn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",Tn,!1),Ue=()=>{H.removePassiveListener(Zt),document.removeEventListener("resume",Nn,!1),document.removeEventListener("visibilitychange",Tn,!1),Ze&&window.clearTimeout(Ze)}})}finally{Ue()}})).apply(this,arguments)}function ce($){return fe.apply(this,arguments)}function fe(){return(fe=(0,l.Z)(function*($){const H=ke($),W=yield crypto.subtle.digest("SHA-256",H);return Array.from(new Uint8Array(W)).map(Ue=>Ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ke($){if((0,O.ap)(/[0-9a-zA-Z]+/.test($),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode($);const H=new ArrayBuffer($.length),W=new Uint8Array(H);for(let pe=0;pe<$.length;pe++)W[pe]=$.charCodeAt(pe);return W}class mt extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(H=>{this.resolveInialized=H})}addPassiveListener(H){this.passiveListeners.add(H)}removePassiveListener(H){this.passiveListeners.delete(H)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(H){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(H)),super.onEvent(H)}initialized(){var H=this;return(0,l.Z)(function*(){yield H.initPromise})()}}function dt($){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,l.Z)(function*($){const H=yield $e()._get(ye($));return H&&(yield $e()._remove(ye($))),H})).apply(this,arguments)}function Te(){const $=[],H="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const pe=Math.floor(Math.random()*H.length);$.push(H.charAt(pe))}return $.join("")}function $e(){return(0,O.ax)(O.b)}function ye($){return(0,O.ay)("authEvent",$.config.apiKey,$.name)}function Mt($){if(!(null==$?void 0:$.includes("?")))return{};const[H,...W]=$.split("?");return(0,ie.zd)(W.join("?"))}function jt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function wt(){var $;return(null===($=null==self?void 0:self.location)||void 0===$?void 0:$.protocol)||null}function cn($=(0,ie.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()||!$.toLowerCase().match(/iphone|ipad|ipod|android/))}function si(){try{const $=self.localStorage,H=O.aG();if($)return $.setItem(H,"1"),$.removeItem(H),!function($=(0,ie.z$)()){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)||function($=(0,ie.z$)()){return/Edge\/\d+/.test($)}($)}()||(0,ie.hl)()}catch($){return hr()&&(0,ie.hl)()}return!1}function hr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Le(){return("http:"===wt()||"https:"===wt()||(0,ie.ru)()||cn())&&!((0,ie.b$)()||(0,ie.UG)())&&si()&&!hr()}function fr(){return cn()&&"undefined"!=typeof document}function ot(){return(ot=(0,l.Z)(function*(){return!!fr()&&new Promise($=>{const H=setTimeout(()=>{$(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(H),$(!0)})})})).apply(this,arguments)}const Zn={LOCAL:"local",NONE:"none",SESSION:"session"},Gn=O.aw,oi="persistence";function pr($){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,l.Z)(function*($){yield $._initializationPromise;const H=_n(),W=O.ay(oi,$.config.apiKey,$.name);H&&H.setItem(W,$._getPersistence())})).apply(this,arguments)}function _n(){var $;try{return(null===($="undefined"!=typeof window?window:null)||void 0===$?void 0:$.sessionStorage)||null}catch(H){return null}}const qe=O.aw;class gt{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(H){var W=this;return(0,l.Z)(function*(){const pe=H._key();let Ue=W.eventManagers.get(pe);return Ue||(Ue=new mt(H),W.eventManagers.set(pe,Ue),W.attachCallbackListeners(H,Ue)),Ue})()}_openPopup(H){(0,O.as)(H,"operation-not-supported-in-this-environment")}_openRedirect(H,W,pe,Ue){var ht=this;return(0,l.Z)(function*(){!function($){var H,W,pe,Ue,ht,Ct,Ze,Zt,Nn,Tn;const on=ee();(0,O.aw)("function"==typeof(null===(H=null==on?void 0:on.universalLinks)||void 0===H?void 0:H.subscribe),$,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(W=null==on?void 0:on.BuildInfo)||void 0===W?void 0:W.packageName),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(ht=null===(Ue=null===(pe=null==on?void 0:on.cordova)||void 0===pe?void 0:pe.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===ht?void 0:ht.openUrl),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Zt=null===(Ze=null===(Ct=null==on?void 0:on.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===Ze?void 0:Ze.browsertab)||void 0===Zt?void 0:Zt.isAvailable),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Tn=null===(Nn=null==on?void 0:on.cordova)||void 0===Nn?void 0:Nn.InAppBrowser)||void 0===Tn?void 0:Tn.open),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(H);const Ct=yield ht._initialize(H);yield Ct.initialized(),Ct.resetRedirect(),(0,O.aB)(),yield ht._originValidation(H);const Ze=function($,H,W=null){return{type:H,eventId:W,urlResponse:null,sessionId:Te(),postBody:null,tenantId:$.tenantId,error:(0,O.av)($,"no-auth-event")}}(H,pe,Ue);yield function($,H){return $e()._set(ye($),H)}(H,Ze);const Zt=yield function($,H,W){return z.apply(this,arguments)}(H,Ze,W),Nn=yield function($){const{cordova:H}=ee();return new Promise(W=>{H.plugins.browsertab.isAvailable(pe=>{let Ue=null;pe?H.plugins.browsertab.openUrl($):Ue=H.InAppBrowser.open($,(0,O.ao)()?"_blank":"_system","location=yes"),W(Ue)})})}(Zt);return function($,H,W){return we.apply(this,arguments)}(H,Ct,Nn)})()}_isIframeWebStorageSupported(H,W){throw new Error("Method not implemented.")}_originValidation(H){const W=H._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function($){return ae.apply(this,arguments)}(H)),this.originValidationPromises[W]}attachCallbackListeners(H,W){const{universalLinks:pe,handleOpenURL:Ue,BuildInfo:ht}=ee(),Ct=setTimeout((0,l.Z)(function*(){yield dt(H),W.onEvent(jt())}),500),Ze=function(){var Tn=(0,l.Z)(function*(on){clearTimeout(Ct);const qn=yield dt(H);let We=null;qn&&(null==on?void 0:on.url)&&(We=function($,H){var W,pe;const Ue=function($){const H=Mt($),W=H.link?decodeURIComponent(H.link):void 0,pe=Mt(W).link,Ue=H.deep_link_id?decodeURIComponent(H.deep_link_id):void 0;return Mt(Ue).link||Ue||pe||W||$}(H);if(Ue.includes("/__/auth/callback")){const ht=Mt(Ue),Ct=ht.firebaseError?function($){try{return JSON.parse($)}catch(H){return null}}(decodeURIComponent(ht.firebaseError)):null,Ze=null===(pe=null===(W=null==Ct?void 0:Ct.code)||void 0===W?void 0:W.split("auth/"))||void 0===pe?void 0:pe[1],Zt=Ze?(0,O.av)(Ze):null;return Zt?{type:$.type,eventId:$.eventId,tenantId:$.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:$.type,eventId:$.eventId,tenantId:$.tenantId,sessionId:$.sessionId,urlResponse:Ue,postBody:null}}return null}(qn,on.url)),W.onEvent(We||jt())});return function(qn){return Tn.apply(this,arguments)}}();void 0!==pe&&"function"==typeof pe.subscribe&&pe.subscribe(null,Ze);const Zt=Ue,Nn=`${ht.packageName.toLowerCase()}://`;ee().handleOpenURL=function(){var Tn=(0,l.Z)(function*(on){if(on.toLowerCase().startsWith(Nn)&&Ze({url:on}),"function"==typeof Zt)try{Zt(on)}catch(qn){console.error(qn)}});return function(on){return Tn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(H){var W=this;return(0,l.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(H)})()}_openPopup(H,W,pe,Ue){var ht=this;return(0,l.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openPopup(H,W,pe,Ue)})()}_openRedirect(H,W,pe,Ue){var ht=this;return(0,l.Z)(function*(){return yield ht.selectUnderlyingResolver(),ht.assertedUnderlyingResolver._openRedirect(H,W,pe,Ue)})()}_isIframeWebStorageSupported(H,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(H,W)}_originValidation(H){return this.assertedUnderlyingResolver._originValidation(H)}get _shouldInitProactively(){return fr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var H=this;return(0,l.Z)(function*(){if(H.underlyingResolver)return;const W=yield function(){return ot.apply(this,arguments)}();H.underlyingResolver=W?H.cordovaResolver:H.browserResolver})()}}function Gi($){return $.unwrap()}function hn($){return Tr($)}function Tr($){const{_tokenResponse:H}=$ instanceof ie.ZR?$.customData:$;if(!H)return null;if(!($ instanceof ie.ZR)&&"temporaryProof"in H&&"phoneNumber"in H)return O.P.credentialFromResult($);const W=H.providerId;if(!W||W===O.o.PASSWORD)return null;let pe;switch(W){case O.o.GOOGLE:pe=O.N;break;case O.o.FACEBOOK:pe=O.M;break;case O.o.GITHUB:pe=O.Q;break;case O.o.TWITTER:pe=O.V;break;default:const{oauthIdToken:Ue,oauthAccessToken:ht,oauthTokenSecret:Ct,pendingToken:Ze,nonce:Zt}=H;return ht||Ct||Ue||Ze?Ze?W.startsWith("saml.")?O.aJ._create(W,Ze):O.I._fromParams({providerId:W,signInMethod:W,pendingToken:Ze,idToken:Ue,accessToken:ht}):new O.T(W).credential({idToken:Ue,accessToken:ht,rawNonce:Zt}):null}return $ instanceof ie.ZR?pe.credentialFromError($):pe.credentialFromResult($)}function tr($,H){return H.catch(W=>{throw W instanceof ie.ZR&&function($,H){var W;const pe=null===(W=H.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===H.code)H.resolver=new Gt($,O.am($,H));else if(pe){const Ue=Tr(H),ht=H;Ue&&(ht.credential=Ue,ht.tenantId=pe.tenantId||void 0,ht.email=pe.email||void 0,ht.phoneNumber=pe.phoneNumber||void 0)}}($,W),W}).then(W=>{const Ue=W.user;return{operationType:W.operationType,credential:hn(W),additionalUserInfo:O.ak(W),user:Ge.getOrCreate(Ue)}})}function sn($,H){return bt.apply(this,arguments)}function bt(){return(bt=(0,l.Z)(function*($,H){const W=yield H;return{verificationId:W.verificationId,confirm:pe=>tr($,W.confirm(pe))}})).apply(this,arguments)}class Gt{constructor(H,W){this.resolver=W,this.auth=H.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(H){return tr(Gi(this.auth),this.resolver.resolveSignIn(H))}}class Ge{constructor(H){this._delegate=H,this.multiFactor=O.an(H)}static getOrCreate(H){return Ge.USER_MAP.has(H)||Ge.USER_MAP.set(H,new Ge(H)),Ge.USER_MAP.get(H)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(H){return this._delegate.getIdTokenResult(H)}getIdToken(H){return this._delegate.getIdToken(H)}linkAndRetrieveDataWithCredential(H){return this.linkWithCredential(H)}linkWithCredential(H){var W=this;return(0,l.Z)(function*(){return tr(W.auth,O.Y(W._delegate,H))})()}linkWithPhoneNumber(H,W){var pe=this;return(0,l.Z)(function*(){return sn(pe.auth,O.l(pe._delegate,H,W))})()}linkWithPopup(H){var W=this;return(0,l.Z)(function*(){return tr(W.auth,O.d(W._delegate,H,gt))})()}linkWithRedirect(H){var W=this;return(0,l.Z)(function*(){return yield pr(O.aC(W.auth)),O.g(W._delegate,H,gt)})()}reauthenticateAndRetrieveDataWithCredential(H){return this.reauthenticateWithCredential(H)}reauthenticateWithCredential(H){var W=this;return(0,l.Z)(function*(){return tr(W.auth,O.Z(W._delegate,H))})()}reauthenticateWithPhoneNumber(H,W){return sn(this.auth,O.r(this._delegate,H,W))}reauthenticateWithPopup(H){return tr(this.auth,O.e(this._delegate,H,gt))}reauthenticateWithRedirect(H){var W=this;return(0,l.Z)(function*(){return yield pr(O.aC(W.auth)),O.h(W._delegate,H,gt)})()}sendEmailVerification(H){return O.aa(this._delegate,H)}unlink(H){var W=this;return(0,l.Z)(function*(){return yield O.aj(W._delegate,H),W})()}updateEmail(H){return O.af(this._delegate,H)}updatePassword(H){return O.ag(this._delegate,H)}updatePhoneNumber(H){return O.u(this._delegate,H)}updateProfile(H){return O.ae(this._delegate,H)}verifyBeforeUpdateEmail(H,W){return O.ab(this._delegate,H,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ge.USER_MAP=new WeakMap;const Ne=O.aw;let lt=(()=>{class ${constructor(W,pe){if(this.app=W,pe.isInitialized())return this._delegate=pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ue}=W.options;Ne(Ue,"invalid-api-key",{appName:W.name}),Ne(Ue,"invalid-api-key",{appName:W.name});const ht="undefined"!=typeof window?gt:void 0;this._delegate=pe.initialize({options:{persistence:Rt(Ue,W.name),popupRedirectResolver:ht}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ge.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,pe){O.E(this._delegate,W,pe)}applyActionCode(W){return O.a1(this._delegate,W)}checkActionCode(W){return O.a2(this._delegate,W)}confirmPasswordReset(W,pe){return O.a0(this._delegate,W,pe)}createUserWithEmailAndPassword(W,pe){var Ue=this;return(0,l.Z)(function*(){return tr(Ue._delegate,O.a4(Ue._delegate,W,pe))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return O.a9(this._delegate,W)}isSignInWithEmailLink(W){return O.a7(this._delegate,W)}getRedirectResult(){var W=this;return(0,l.Z)(function*(){Ne(Le(),W._delegate,"operation-not-supported-in-this-environment");const pe=yield O.j(W._delegate,gt);return pe?tr(W._delegate,Promise.resolve(pe)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function($,H){(0,O.aC)($)._logFramework(H)}(this._delegate,W)}onAuthStateChanged(W,pe,Ue){const{next:ht,error:Ct,complete:Ze}=Et(W,pe,Ue);return this._delegate.onAuthStateChanged(ht,Ct,Ze)}onIdTokenChanged(W,pe,Ue){const{next:ht,error:Ct,complete:Ze}=Et(W,pe,Ue);return this._delegate.onIdTokenChanged(ht,Ct,Ze)}sendSignInLinkToEmail(W,pe){return O.a6(this._delegate,W,pe)}sendPasswordResetEmail(W,pe){return O.$(this._delegate,W,pe||void 0)}setPersistence(W){var pe=this;return(0,l.Z)(function*(){let Ue;switch(function($,H){Gn(Object.values(Zn).includes(H),$,"invalid-persistence-type"),(0,ie.b$)()?Gn(H!==Zn.SESSION,$,"unsupported-persistence-type"):(0,ie.UG)()?Gn(H===Zn.NONE,$,"unsupported-persistence-type"):hr()?Gn(H===Zn.NONE||H===Zn.LOCAL&&(0,ie.hl)(),$,"unsupported-persistence-type"):Gn(H===Zn.NONE||si(),$,"unsupported-persistence-type")}(pe._delegate,W),W){case Zn.SESSION:Ue=O.a;break;case Zn.LOCAL:Ue=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case Zn.NONE:Ue=O.K;break;default:return O.as("argument-error",{appName:pe._delegate.name})}return pe._delegate.setPersistence(Ue)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return tr(this._delegate,O.W(this._delegate))}signInWithCredential(W){return tr(this._delegate,O.X(this._delegate,W))}signInWithCustomToken(W){return tr(this._delegate,O._(this._delegate,W))}signInWithEmailAndPassword(W,pe){return tr(this._delegate,O.a5(this._delegate,W,pe))}signInWithEmailLink(W,pe){return tr(this._delegate,O.a8(this._delegate,W,pe))}signInWithPhoneNumber(W,pe){return sn(this._delegate,O.s(this._delegate,W,pe))}signInWithPopup(W){var pe=this;return(0,l.Z)(function*(){return Ne(Le(),pe._delegate,"operation-not-supported-in-this-environment"),tr(pe._delegate,O.c(pe._delegate,W,gt))})()}signInWithRedirect(W){var pe=this;return(0,l.Z)(function*(){return Ne(Le(),pe._delegate,"operation-not-supported-in-this-environment"),yield pr(pe._delegate),O.f(pe._delegate,W,gt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return O.a3(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return $.Persistence=Zn,$})();function Et($,H,W){let pe=$;"function"!=typeof $&&({next:pe,error:H,complete:W}=$);const Ue=pe;return{next:Ct=>Ue(Ct&&Ge.getOrCreate(Ct)),error:H,complete:W}}function Rt($,H){const W=function($,H){const W=_n();if(!W)return[];const pe=O.ay(oi,$,H);switch(W.getItem(pe)){case Zn.NONE:return[O.K];case Zn.LOCAL:return[O.i,O.a];case Zn.SESSION:return[O.a];default:return[]}}($,H);if("undefined"!=typeof self&&!W.includes(O.i)&&W.push(O.i),"undefined"!=typeof window)for(const pe of[O.b,O.a])W.includes(pe)||W.push(pe);return W.includes(O.K)||W.push(O.K),W}class Jt{constructor(){this.providerId="phone",this._delegate=new O.P(Gi(G.Z.auth()))}static credential(H,W){return O.P.credential(H,W)}verifyPhoneNumber(H,W){return this._delegate.verifyPhoneNumber(H,W)}unwrap(){return this._delegate}}Jt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Jt.PROVIDER_ID=O.P.PROVIDER_ID;const Q=O.aw;var $;($=G.Z).INTERNAL.registerComponent(new de.wA("auth-compat",H=>{const W=H.getProvider("app-compat").getImmediate(),pe=H.getProvider("auth");return new lt(W,pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:Jt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(H,W,pe=G.Z.app()){var Ue;Q(null===(Ue=pe.options)||void 0===Ue?void 0:Ue.apiKey,"invalid-api-key",{appName:pe.name}),this._delegate=new O.R(H,W,pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.V,Auth:lt,AuthCredential:O.G,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$.registerVersion("@firebase/auth-compat","0.2.12")},1593:(st,Ee,B)=>{"use strict";B.d(Ee,{P:()=>de});var l=B(9193),G=B(5917),O=B(7574);class de{constructor(J,U,z){this.kind=J,this.value=U,this.error=z,this.hasValue="N"===J}observe(J){switch(this.kind){case"N":return J.next&&J.next(this.value);case"E":return J.error&&J.error(this.error);case"C":return J.complete&&J.complete()}}do(J,U,z){switch(this.kind){case"N":return J&&J(this.value);case"E":return U&&U(this.error);case"C":return z&&z()}}accept(J,U,z){return J&&"function"==typeof J.next?this.observe(J):this.do(J,U,z)}toObservable(){switch(this.kind){case"N":return(0,G.of)(this.value);case"E":return ee=this.error,new O.y(U=>U.error(ee));case"C":return(0,l.c)()}var ee;throw new Error("unexpected notification kind value")}static createNext(J){return void 0!==J?new de("N",J):de.undefinedValueNotification}static createError(J){return new de("E",void 0,J)}static createComplete(){return de.completeNotification}}de.completeNotification=new de("C"),de.undefinedValueNotification=new de("N",void 0)},7574:(st,Ee,B)=>{"use strict";B.d(Ee,{y:()=>z});var l=B(7393),O=B(9181),ie=B(6490),te=B(6554),de=B(4487);var U=B(2494);let z=(()=>{class ae{constructor(Se){this._isScalar=!1,Se&&(this._subscribe=Se)}lift(Se){const we=new ae;return we.source=this,we.operator=Se,we}subscribe(Se,we,Ve){const{operator:ce}=this,fe=function(ae,Re,Se){if(ae){if(ae instanceof l.L)return ae;if(ae[O.b])return ae[O.b]()}return ae||Re||Se?new l.L(ae,Re,Se):new l.L(ie.c)}(Se,we,Ve);if(fe.add(ce?ce.call(fe,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),U.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(Se){try{return this._subscribe(Se)}catch(we){U.v.useDeprecatedSynchronousErrorHandling&&(Se.syncErrorThrown=!0,Se.syncErrorValue=we),function(ae){for(;ae;){const{closed:Re,destination:Se,isStopped:we}=ae;if(Re||we)return!1;ae=Se&&Se instanceof l.L?Se:null}return!0}(Se)?Se.error(we):console.warn(we)}}forEach(Se,we){return new(we=j(we))((Ve,ce)=>{let fe;fe=this.subscribe(ke=>{try{Se(ke)}catch(Ye){ce(Ye),fe&&fe.unsubscribe()}},ce,Ve)})}_subscribe(Se){const{source:we}=this;return we&&we.subscribe(Se)}[te.L](){return this}pipe(...Se){return 0===Se.length?this:function(ae){return 0===ae.length?de.y:1===ae.length?ae[0]:function(Se){return ae.reduce((we,Ve)=>Ve(we),Se)}}(Se)(this)}toPromise(Se){return new(Se=j(Se))((we,Ve)=>{let ce;this.subscribe(fe=>ce=fe,fe=>Ve(fe),()=>we(ce))})}}return ae.create=Re=>new ae(Re),ae})();function j(ae){if(ae||(ae=U.v.Promise||Promise),!ae)throw new Error("no Promise impl found");return ae}},6490:(st,Ee,B)=>{"use strict";B.d(Ee,{c:()=>O});var l=B(2494),G=B(4449);const O={closed:!0,next(ie){},error(ie){if(l.v.useDeprecatedSynchronousErrorHandling)throw ie;(0,G.z)(ie)},complete(){}}},9765:(st,Ee,B)=>{"use strict";B.d(Ee,{Yc:()=>de,xQ:()=>ee});var l=B(7574),G=B(7393),O=B(5319),ie=B(7971),oe=B(8858),te=B(9181);class de extends G.L{constructor(z){super(z),this.destination=z}}let ee=(()=>{class U extends l.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[te.b](){return new de(this)}lift(j){const ae=new J(this,this);return ae.operator=j,ae}next(j){if(this.closed)throw new ie.N;if(!this.isStopped){const{observers:ae}=this,Re=ae.length,Se=ae.slice();for(let we=0;we<Re;we++)Se[we].next(j)}}error(j){if(this.closed)throw new ie.N;this.hasError=!0,this.thrownError=j,this.isStopped=!0;const{observers:ae}=this,Re=ae.length,Se=ae.slice();for(let we=0;we<Re;we++)Se[we].error(j);this.observers.length=0}complete(){if(this.closed)throw new ie.N;this.isStopped=!0;const{observers:j}=this,ae=j.length,Re=j.slice();for(let Se=0;Se<ae;Se++)Re[Se].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(j){if(this.closed)throw new ie.N;return super._trySubscribe(j)}_subscribe(j){if(this.closed)throw new ie.N;return this.hasError?(j.error(this.thrownError),O.w.EMPTY):this.isStopped?(j.complete(),O.w.EMPTY):(this.observers.push(j),new oe.W(this,j))}asObservable(){const j=new l.y;return j.source=this,j}}return U.create=(z,j)=>new J(z,j),U})();class J extends ee{constructor(z,j){super(),this.destination=z,this.source=j}next(z){const{destination:j}=this;j&&j.next&&j.next(z)}error(z){const{destination:j}=this;j&&j.error&&this.destination.error(z)}complete(){const{destination:z}=this;z&&z.complete&&this.destination.complete()}_subscribe(z){const{source:j}=this;return j?this.source.subscribe(z):O.w.EMPTY}}},8858:(st,Ee,B)=>{"use strict";B.d(Ee,{W:()=>G});var l=B(5319);class G extends l.w{constructor(ie,oe){super(),this.subject=ie,this.subscriber=oe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ie=this.subject,oe=ie.observers;if(this.subject=null,!oe||0===oe.length||ie.isStopped||ie.closed)return;const te=oe.indexOf(this.subscriber);-1!==te&&oe.splice(te,1)}}},7393:(st,Ee,B)=>{"use strict";B.d(Ee,{L:()=>de});var l=B(9105),G=B(6490),O=B(5319),ie=B(9181),oe=B(2494),te=B(4449);class de extends O.w{constructor(U,z,j){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=G.c;break;case 1:if(!U){this.destination=G.c;break}if("object"==typeof U){U instanceof de?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new ee(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new ee(this,U,z,j)}}[ie.b](){return this}static create(U,z,j){const ae=new de(U,z,j);return ae.syncErrorThrowable=!1,ae}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class ee extends de{constructor(U,z,j,ae){super(),this._parentSubscriber=U;let Re,Se=this;(0,l.m)(z)?Re=z:z&&(Re=z.next,j=z.error,ae=z.complete,z!==G.c&&(Se=Object.create(z),(0,l.m)(Se.unsubscribe)&&this.add(Se.unsubscribe.bind(Se)),Se.unsubscribe=this.unsubscribe.bind(this))),this._context=Se,this._next=Re,this._error=j,this._complete=ae}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:z}=this;oe.v.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable?this.__tryOrSetError(z,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:z}=this,{useDeprecatedSynchronousErrorHandling:j}=oe.v;if(this._error)j&&z.syncErrorThrowable?(this.__tryOrSetError(z,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(z.syncErrorThrowable)j?(z.syncErrorValue=U,z.syncErrorThrown=!0):(0,te.z)(U),this.unsubscribe();else{if(this.unsubscribe(),j)throw U;(0,te.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const z=()=>this._complete.call(this._context);oe.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,z),this.unsubscribe()):(this.__tryOrUnsub(z),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,z){try{U.call(this._context,z)}catch(j){if(this.unsubscribe(),oe.v.useDeprecatedSynchronousErrorHandling)throw j;(0,te.z)(j)}}__tryOrSetError(U,z,j){if(!oe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{z.call(this._context,j)}catch(ae){return oe.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=ae,U.syncErrorThrown=!0,!0):((0,te.z)(ae),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(st,Ee,B)=>{"use strict";B.d(Ee,{w:()=>te});var l=B(9796),G=B(1555),O=B(9105);const oe=(()=>{function ee(J){return Error.call(this),this.message=J?`${J.length} errors occurred during unsubscription:\n${J.map((U,z)=>`${z+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=J,this}return ee.prototype=Object.create(Error.prototype),ee})();class te{constructor(J){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,J&&(this._ctorUnsubscribe=!0,this._unsubscribe=J)}unsubscribe(){let J;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:z,_unsubscribe:j,_subscriptions:ae}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof te)U.remove(this);else if(null!==U)for(let Re=0;Re<U.length;++Re)U[Re].remove(this);if((0,O.m)(j)){z&&(this._unsubscribe=void 0);try{j.call(this)}catch(Re){J=Re instanceof oe?de(Re.errors):[Re]}}if((0,l.k)(ae)){let Re=-1,Se=ae.length;for(;++Re<Se;){const we=ae[Re];if((0,G.K)(we))try{we.unsubscribe()}catch(Ve){J=J||[],Ve instanceof oe?J=J.concat(de(Ve.errors)):J.push(Ve)}}}if(J)throw new oe(J)}add(J){let U=J;if(!J)return te.EMPTY;switch(typeof J){case"function":U=new te(J);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof te)){const ae=U;U=new te,U._subscriptions=[ae]}break;default:throw new Error("unrecognized teardown "+J+" added to Subscription.")}let{_parentOrParents:z}=U;if(null===z)U._parentOrParents=this;else if(z instanceof te){if(z===this)return U;U._parentOrParents=[z,this]}else{if(-1!==z.indexOf(this))return U;z.push(this)}const j=this._subscriptions;return null===j?this._subscriptions=[U]:j.push(U),U}remove(J){const U=this._subscriptions;if(U){const z=U.indexOf(J);-1!==z&&U.splice(z,1)}}}var ee;function de(ee){return ee.reduce((J,U)=>J.concat(U instanceof oe?U.errors:U),[])}te.EMPTY=((ee=new te).closed=!0,ee)},2494:(st,Ee,B)=>{"use strict";B.d(Ee,{v:()=>G});let l=!1;const G={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ie=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ie.stack)}else l&&console.log("RxJS: Back to a better error behavior. Thank you. <3");l=O},get useDeprecatedSynchronousErrorHandling(){return l}}},5345:(st,Ee,B)=>{"use strict";B.d(Ee,{IY:()=>ie,Ds:()=>te,ft:()=>ee});var l=B(7393),G=B(7574),O=B(7444);class ie extends l.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class te extends l.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function ee(J,U){if(U.closed)return;if(J instanceof G.y)return J.subscribe(U);let z;try{z=(0,O.s)(J)(U)}catch(j){U.error(j)}return z}},2441:(st,Ee,B)=>{"use strict";B.d(Ee,{c:()=>oe,N:()=>te});var l=B(9765),G=B(7574),O=B(5319),ie=B(1307);class oe extends G.y{constructor(z,j){super(),this.source=z,this.subjectFactory=j,this._refCount=0,this._isComplete=!1}_subscribe(z){return this.getSubject().subscribe(z)}getSubject(){const z=this._subject;return(!z||z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let z=this._connection;return z||(this._isComplete=!1,z=this._connection=new O.w,z.add(this.source.subscribe(new de(this.getSubject(),this))),z.closed&&(this._connection=null,z=O.w.EMPTY)),z}refCount(){return(0,ie.x)()(this)}}const te=(()=>{const U=oe.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class de extends l.Yc{constructor(z,j){super(z),this.connectable=j}_error(z){this._unsubscribe(),super._error(z)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const z=this.connectable;if(z){this.connectable=null;const j=z._connection;z._refCount=0,z._subject=null,z._connection=null,j&&j.unsubscribe()}}}},9193:(st,Ee,B)=>{"use strict";B.d(Ee,{E:()=>G,c:()=>O});var l=B(7574);const G=new l.y(oe=>oe.complete());function O(oe){return oe?function(oe){return new l.y(te=>oe.schedule(()=>te.complete()))}(oe):G}},4402:(st,Ee,B)=>{"use strict";B.d(Ee,{D:()=>Se});var l=B(7574),G=B(7444),O=B(5319),ie=B(6554),de=B(4087),ee=B(377),z=B(4072),j=B(9489);function Se(we,Ve){return Ve?function(we,Ve){if(null!=we){if(function(we){return we&&"function"==typeof we[ie.L]}(we))return function(we,Ve){return new l.y(ce=>{const fe=new O.w;return fe.add(Ve.schedule(()=>{const ke=we[ie.L]();fe.add(ke.subscribe({next(Ye){fe.add(Ve.schedule(()=>ce.next(Ye)))},error(Ye){fe.add(Ve.schedule(()=>ce.error(Ye)))},complete(){fe.add(Ve.schedule(()=>ce.complete()))}}))})),fe})}(we,Ve);if((0,z.t)(we))return function(we,Ve){return new l.y(ce=>{const fe=new O.w;return fe.add(Ve.schedule(()=>we.then(ke=>{fe.add(Ve.schedule(()=>{ce.next(ke),fe.add(Ve.schedule(()=>ce.complete()))}))},ke=>{fe.add(Ve.schedule(()=>ce.error(ke)))}))),fe})}(we,Ve);if((0,j.z)(we))return(0,de.r)(we,Ve);if(function(we){return we&&"function"==typeof we[ee.hZ]}(we)||"string"==typeof we)return function(we,Ve){if(!we)throw new Error("Iterable cannot be null");return new l.y(ce=>{const fe=new O.w;let ke;return fe.add(()=>{ke&&"function"==typeof ke.return&&ke.return()}),fe.add(Ve.schedule(()=>{ke=we[ee.hZ](),fe.add(Ve.schedule(function(){if(ce.closed)return;let Ye,mt;try{const nt=ke.next();Ye=nt.value,mt=nt.done}catch(nt){return void ce.error(nt)}mt?ce.complete():(ce.next(Ye),this.schedule())}))})),fe})}(we,Ve)}throw new TypeError((null!==we&&typeof we||we)+" is not observable")}(we,Ve):we instanceof l.y?we:new l.y((0,G.s)(we))}},6693:(st,Ee,B)=>{"use strict";B.d(Ee,{n:()=>ie});var l=B(7574),G=B(5015),O=B(4087);function ie(oe,te){return te?(0,O.r)(oe,te):new l.y((0,G.V)(oe))}},6682:(st,Ee,B)=>{"use strict";B.d(Ee,{T:()=>oe});var l=B(7574),G=B(4869),O=B(3282),ie=B(6693);function oe(...te){let de=Number.POSITIVE_INFINITY,ee=null,J=te[te.length-1];return(0,G.K)(J)?(ee=te.pop(),te.length>1&&"number"==typeof te[te.length-1]&&(de=te.pop())):"number"==typeof J&&(de=te.pop()),null===ee&&1===te.length&&te[0]instanceof l.y?te[0]:(0,O.J)(de)((0,ie.n)(te,ee))}},5917:(st,Ee,B)=>{"use strict";B.d(Ee,{of:()=>ie});var l=B(4869),G=B(6693),O=B(4087);function ie(...oe){let te=oe[oe.length-1];return(0,l.K)(te)?(oe.pop(),(0,O.r)(oe,te)):(0,G.n)(oe)}},8002:(st,Ee,B)=>{"use strict";B.d(Ee,{U:()=>G});var l=B(7393);function G(oe,te){return function(ee){if("function"!=typeof oe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ee.lift(new O(oe,te))}}class O{constructor(te,de){this.project=te,this.thisArg=de}call(te,de){return de.subscribe(new ie(te,this.project,this.thisArg))}}class ie extends l.L{constructor(te,de,ee){super(te),this.project=de,this.count=0,this.thisArg=ee||this}_next(te){let de;try{de=this.project.call(this.thisArg,te,this.count++)}catch(ee){return void this.destination.error(ee)}this.destination.next(de)}}},3282:(st,Ee,B)=>{"use strict";B.d(Ee,{J:()=>O});var l=B(9773),G=B(4487);function O(ie=Number.POSITIVE_INFINITY){return(0,l.zg)(G.y,ie)}},9773:(st,Ee,B)=>{"use strict";B.d(Ee,{zg:()=>ie});var l=B(8002),G=B(4402),O=B(5345);function ie(ee,J,U=Number.POSITIVE_INFINITY){return"function"==typeof J?z=>z.pipe(ie((j,ae)=>(0,G.D)(ee(j,ae)).pipe((0,l.U)((Re,Se)=>J(j,Re,ae,Se))),U)):("number"==typeof J&&(U=J),z=>z.lift(new oe(ee,U)))}class oe{constructor(J,U=Number.POSITIVE_INFINITY){this.project=J,this.concurrent=U}call(J,U){return U.subscribe(new te(J,this.project,this.concurrent))}}class te extends O.Ds{constructor(J,U,z=Number.POSITIVE_INFINITY){super(J),this.project=U,this.concurrent=z,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(J){this.active<this.concurrent?this._tryNext(J):this.buffer.push(J)}_tryNext(J){let U;const z=this.index++;try{U=this.project(J,z)}catch(j){return void this.destination.error(j)}this.active++,this._innerSub(U)}_innerSub(J){const U=new O.IY(this),z=this.destination;z.add(U);const j=(0,O.ft)(J,U);j!==U&&z.add(j)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(J){this.destination.next(J)}notifyComplete(){const J=this.buffer;this.active--,J.length>0?this._next(J.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(st,Ee,B)=>{"use strict";B.d(Ee,{QV:()=>O,ht:()=>oe});var l=B(7393),G=B(1593);function O(de,ee=0){return function(U){return U.lift(new ie(de,ee))}}class ie{constructor(ee,J=0){this.scheduler=ee,this.delay=J}call(ee,J){return J.subscribe(new oe(ee,this.scheduler,this.delay))}}class oe extends l.L{constructor(ee,J,U=0){super(ee),this.scheduler=J,this.delay=U}static dispatch(ee){const{notification:J,destination:U}=ee;J.observe(U),this.unsubscribe()}scheduleMessage(ee){this.destination.add(this.scheduler.schedule(oe.dispatch,this.delay,new te(ee,this.destination)))}_next(ee){this.scheduleMessage(G.P.createNext(ee))}_error(ee){this.scheduleMessage(G.P.createError(ee)),this.unsubscribe()}_complete(){this.scheduleMessage(G.P.createComplete()),this.unsubscribe()}}class te{constructor(ee,J){this.notification=ee,this.destination=J}}},1307:(st,Ee,B)=>{"use strict";B.d(Ee,{x:()=>G});var l=B(7393);function G(){return function(te){return te.lift(new O(te))}}class O{constructor(te){this.connectable=te}call(te,de){const{connectable:ee}=this;ee._refCount++;const J=new ie(te,ee),U=de.subscribe(J);return J.closed||(J.connection=ee.connect()),U}}class ie extends l.L{constructor(te,de){super(te),this.connectable=de}_unsubscribe(){const{connectable:te}=this;if(!te)return void(this.connection=null);this.connectable=null;const de=te._refCount;if(de<=0)return void(this.connection=null);if(te._refCount=de-1,de>1)return void(this.connection=null);const{connection:ee}=this,J=te._connection;this.connection=null,J&&(!ee||J===ee)&&J.unsubscribe()}}},8819:(st,Ee,B)=>{"use strict";B.d(Ee,{B:()=>de});var l=B(2441);var ie=B(1307),oe=B(9765);function te(){return new oe.xQ}function de(){return ee=>(0,ie.x)()(function(ee,J){return function(z){let j;j="function"==typeof ee?ee:function(){return ee};const ae=Object.create(z,l.N);return ae.source=z,ae.subjectFactory=j,ae}}(te)(ee))}},2639:(st,Ee,B)=>{"use strict";B.d(Ee,{R:()=>we});var l=B(7574);let G=1;const O=Promise.resolve(),ie={};function oe(ce){return ce in ie&&(delete ie[ce],!0)}const te={setImmediate(ce){const fe=G++;return ie[fe]=!0,O.then(()=>oe(fe)&&ce()),fe},clearImmediate(ce){oe(ce)}};var ee=B(6465),U=B(6102);const ae=new class extends U.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:ke}=this;let Ye,mt=-1,nt=ke.length;fe=fe||ke.shift();do{if(Ye=fe.execute(fe.state,fe.delay))break}while(++mt<nt&&(fe=ke.shift()));if(this.active=!1,Ye){for(;++mt<nt&&(fe=ke.shift());)fe.unsubscribe();throw Ye}}}(class extends ee.o{constructor(fe,ke){super(fe,ke),this.scheduler=fe,this.work=ke}requestAsyncId(fe,ke,Ye=0){return null!==Ye&&Ye>0?super.requestAsyncId(fe,ke,Ye):(fe.actions.push(this),fe.scheduled||(fe.scheduled=te.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,ke,Ye=0){if(null!==Ye&&Ye>0||null===Ye&&this.delay>0)return super.recycleAsyncId(fe,ke,Ye);0===fe.actions.length&&(te.clearImmediate(ke),fe.scheduled=void 0)}});var Re=B(6561);class Se extends l.y{constructor(fe,ke=0,Ye=ae){super(),this.source=fe,this.delayTime=ke,this.scheduler=Ye,(!(0,Re.k)(ke)||ke<0)&&(this.delayTime=0),(!Ye||"function"!=typeof Ye.schedule)&&(this.scheduler=ae)}static create(fe,ke=0,Ye=ae){return new Se(fe,ke,Ye)}static dispatch(fe){const{source:ke,subscriber:Ye}=fe;return this.add(ke.subscribe(Ye))}_subscribe(fe){return this.scheduler.schedule(Se.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function we(ce,fe=0){return function(Ye){return Ye.lift(new Ve(ce,fe))}}class Ve{constructor(fe,ke){this.scheduler=fe,this.delay=ke}call(fe,ke){return new Se(ke,this.delay,this.scheduler).subscribe(fe)}}},8307:(st,Ee,B)=>{"use strict";B.d(Ee,{b:()=>ie});var l=B(7393),G=B(8640),O=B(9105);function ie(de,ee,J){return function(z){return z.lift(new oe(de,ee,J))}}class oe{constructor(ee,J,U){this.nextOrObserver=ee,this.error=J,this.complete=U}call(ee,J){return J.subscribe(new te(ee,this.nextOrObserver,this.error,this.complete))}}class te extends l.L{constructor(ee,J,U,z){super(ee),this._tapNext=G.Z,this._tapError=G.Z,this._tapComplete=G.Z,this._tapError=U||G.Z,this._tapComplete=z||G.Z,(0,O.m)(J)?(this._context=this,this._tapNext=J):J&&(this._context=J,this._tapNext=J.next||G.Z,this._tapError=J.error||G.Z,this._tapComplete=J.complete||G.Z)}_next(ee){try{this._tapNext.call(this._context,ee)}catch(J){return void this.destination.error(J)}this.destination.next(ee)}_error(ee){try{this._tapError.call(this._context,ee)}catch(J){return void this.destination.error(J)}this.destination.error(ee)}_complete(){try{this._tapComplete.call(this._context)}catch(ee){return void this.destination.error(ee)}return this.destination.complete()}}},4087:(st,Ee,B)=>{"use strict";B.d(Ee,{r:()=>O});var l=B(7574),G=B(5319);function O(ie,oe){return new l.y(te=>{const de=new G.w;let ee=0;return de.add(oe.schedule(function(){ee!==ie.length?(te.next(ie[ee++]),te.closed||de.add(this.schedule())):te.complete()})),de})}},6465:(st,Ee,B)=>{"use strict";B.d(Ee,{o:()=>O});var l=B(5319);class G extends l.w{constructor(oe,te){super()}schedule(oe,te=0){return this}}class O extends G{constructor(oe,te){super(oe,te),this.scheduler=oe,this.work=te,this.pending=!1}schedule(oe,te=0){if(this.closed)return this;this.state=oe;const de=this.id,ee=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId(ee,de,te)),this.pending=!0,this.delay=te,this.id=this.id||this.requestAsyncId(ee,this.id,te),this}requestAsyncId(oe,te,de=0){return setInterval(oe.flush.bind(oe,this),de)}recycleAsyncId(oe,te,de=0){if(null!==de&&this.delay===de&&!1===this.pending)return te;clearInterval(te)}execute(oe,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(oe,te);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,te){let ee,de=!1;try{this.work(oe)}catch(J){de=!0,ee=!!J&&J||new Error(J)}if(de)return this.unsubscribe(),ee}_unsubscribe(){const oe=this.id,te=this.scheduler,de=te.actions,ee=de.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ee&&de.splice(ee,1),null!=oe&&(this.id=this.recycleAsyncId(te,oe,null)),this.delay=null}}},6102:(st,Ee,B)=>{"use strict";B.d(Ee,{v:()=>G});let l=(()=>{class O{constructor(oe,te=O.now){this.SchedulerAction=oe,this.now=te}schedule(oe,te=0,de){return new this.SchedulerAction(this,oe).schedule(de,te)}}return O.now=()=>Date.now(),O})();class G extends l{constructor(ie,oe=l.now){super(ie,()=>G.delegate&&G.delegate!==this?G.delegate.now():oe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ie,oe=0,te){return G.delegate&&G.delegate!==this?G.delegate.schedule(ie,oe,te):super.schedule(ie,oe,te)}flush(ie){const{actions:oe}=this;if(this.active)return void oe.push(ie);let te;this.active=!0;do{if(te=ie.execute(ie.state,ie.delay))break}while(ie=oe.shift());if(this.active=!1,te){for(;ie=oe.shift();)ie.unsubscribe();throw te}}}},3637:(st,Ee,B)=>{"use strict";B.d(Ee,{z:()=>O,P:()=>ie});var l=B(6465);const O=new(B(6102).v)(l.o),ie=O},7771:(st,Ee,B)=>{"use strict";B.d(Ee,{c:()=>te,N:()=>oe});var l=B(6465),O=B(6102);const oe=new class extends O.v{}(class extends l.o{constructor(ee,J){super(ee,J),this.scheduler=ee,this.work=J}schedule(ee,J=0){return J>0?super.schedule(ee,J):(this.delay=J,this.state=ee,this.scheduler.flush(this),this)}execute(ee,J){return J>0||this.closed?super.execute(ee,J):this._execute(ee,J)}requestAsyncId(ee,J,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(ee,J,U):ee.flush(this)}}),te=oe},377:(st,Ee,B)=>{"use strict";B.d(Ee,{hZ:()=>G});const G="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(st,Ee,B)=>{"use strict";B.d(Ee,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(st,Ee,B)=>{"use strict";B.d(Ee,{b:()=>l});const l="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(st,Ee,B)=>{"use strict";B.d(Ee,{N:()=>G});const G=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(st,Ee,B)=>{"use strict";function l(G){setTimeout(()=>{throw G},0)}B.d(Ee,{z:()=>l})},4487:(st,Ee,B)=>{"use strict";function l(G){return G}B.d(Ee,{y:()=>l})},9796:(st,Ee,B)=>{"use strict";B.d(Ee,{k:()=>l});const l=Array.isArray||(G=>G&&"number"==typeof G.length)},9489:(st,Ee,B)=>{"use strict";B.d(Ee,{z:()=>l});const l=G=>G&&"number"==typeof G.length&&"function"!=typeof G},9105:(st,Ee,B)=>{"use strict";function l(G){return"function"==typeof G}B.d(Ee,{m:()=>l})},6561:(st,Ee,B)=>{"use strict";B.d(Ee,{k:()=>G});var l=B(9796);function G(O){return!(0,l.k)(O)&&O-parseFloat(O)+1>=0}},1555:(st,Ee,B)=>{"use strict";function l(G){return null!==G&&"object"==typeof G}B.d(Ee,{K:()=>l})},4072:(st,Ee,B)=>{"use strict";function l(G){return!!G&&"function"!=typeof G.subscribe&&"function"==typeof G.then}B.d(Ee,{t:()=>l})},4869:(st,Ee,B)=>{"use strict";function l(G){return G&&"function"==typeof G.schedule}B.d(Ee,{K:()=>l})},8640:(st,Ee,B)=>{"use strict";function l(){}B.d(Ee,{Z:()=>l})},7444:(st,Ee,B)=>{"use strict";B.d(Ee,{s:()=>z});var l=B(5015),G=B(4449),ie=B(377),te=B(6554),ee=B(9489),J=B(4072),U=B(1555);const z=j=>{if(j&&"function"==typeof j[te.L])return(j=>ae=>{const Re=j[te.L]();if("function"!=typeof Re.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Re.subscribe(ae)})(j);if((0,ee.z)(j))return(0,l.V)(j);if((0,J.t)(j))return(j=>ae=>(j.then(Re=>{ae.closed||(ae.next(Re),ae.complete())},Re=>ae.error(Re)).then(null,G.z),ae))(j);if(j&&"function"==typeof j[ie.hZ])return(j=>ae=>{const Re=j[ie.hZ]();for(;;){let Se;try{Se=Re.next()}catch(we){return ae.error(we),ae}if(Se.done){ae.complete();break}if(ae.next(Se.value),ae.closed)break}return"function"==typeof Re.return&&ae.add(()=>{Re.return&&Re.return()}),ae})(j);{const Re=`You provided ${(0,U.K)(j)?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Re)}}},5015:(st,Ee,B)=>{"use strict";B.d(Ee,{V:()=>l});const l=G=>O=>{for(let ie=0,oe=G.length;ie<oe&&!O.closed;ie++)O.next(G[ie]);O.complete()}},8340:(st,Ee,B)=>{"use strict";var l=B(7716);let G=null;function O(){return G}const de=new l.OlP("DocumentToken");let ee=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,l.Yz7)({factory:J,token:n,providedIn:"platform"}),n})();function J(){return(0,l.LFG)(z)}const U=new l.OlP("Location Initialized");let z=(()=>{class n extends ee{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(e){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){j()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){j()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(de))},n.\u0275prov=(0,l.Yz7)({factory:ae,token:n,providedIn:"platform"}),n})();function j(){return!!window.history.pushState}function ae(){return new z((0,l.LFG)(de))}function Re(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Se(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function we(n){return n&&"?"!==n[0]?"?"+n:n}let Ve=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,l.Yz7)({factory:ce,token:n,providedIn:"root"}),n})();function ce(n){const t=(0,l.LFG)(de).location;return new ke((0,l.LFG)(ee),t&&t.origin||"")}const fe=new l.OlP("appBaseHref");let ke=(()=>{class n extends Ve{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Re(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+we(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,a){const d=this.prepareExternalUrl(i+we(a));this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,a){const d=this.prepareExternalUrl(i+we(a));this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ee),l.LFG(fe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ye=(()=>{class n extends Ve{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Re(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,a){let d=this.prepareExternalUrl(i+we(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,a){let d=this.prepareExternalUrl(i+we(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ee),l.LFG(fe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),mt=(()=>{class n{constructor(e,r){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Se(dt(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+we(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,dt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+we(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+we(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ve),l.LFG(ee))},n.normalizeQueryParams=we,n.joinWithSlash=Re,n.stripTrailingSlash=Se,n.\u0275prov=(0,l.Yz7)({factory:nt,token:n,providedIn:"root"}),n})();function nt(){return new mt((0,l.LFG)(Ve),(0,l.LFG)(ee))}function dt(n){return n.replace(/\/index.html$/,"")}var Te=(()=>((Te=Te||{})[Te.Zero=0]="Zero",Te[Te.One=1]="One",Te[Te.Two=2]="Two",Te[Te.Few=3]="Few",Te[Te.Many=4]="Many",Te[Te.Other=5]="Other",Te))(),$e=(()=>(($e=$e||{})[$e.Format=0]="Format",$e[$e.Standalone=1]="Standalone",$e))(),ye=(()=>((ye=ye||{})[ye.Narrow=0]="Narrow",ye[ye.Abbreviated=1]="Abbreviated",ye[ye.Wide=2]="Wide",ye[ye.Short=3]="Short",ye))(),je=(()=>((je=je||{})[je.Short=0]="Short",je[je.Medium=1]="Medium",je[je.Long=2]="Long",je[je.Full=3]="Full",je))(),Ae=(()=>((Ae=Ae||{})[Ae.Decimal=0]="Decimal",Ae[Ae.Group=1]="Group",Ae[Ae.List=2]="List",Ae[Ae.PercentSign=3]="PercentSign",Ae[Ae.PlusSign=4]="PlusSign",Ae[Ae.MinusSign=5]="MinusSign",Ae[Ae.Exponential=6]="Exponential",Ae[Ae.SuperscriptingExponent=7]="SuperscriptingExponent",Ae[Ae.PerMille=8]="PerMille",Ae[Ae.Infinity=9]="Infinity",Ae[Ae.NaN=10]="NaN",Ae[Ae.TimeSeparator=11]="TimeSeparator",Ae[Ae.CurrencyDecimal=12]="CurrencyDecimal",Ae[Ae.CurrencyGroup=13]="CurrencyGroup",Ae))();function Wn(n,t){return vn((0,l.cg1)(n)[l.wAp.DateFormat],t)}function wt(n,t){return vn((0,l.cg1)(n)[l.wAp.TimeFormat],t)}function er(n,t){return vn((0,l.cg1)(n)[l.wAp.DateTimeFormat],t)}function cn(n,t){const e=(0,l.cg1)(n),r=e[l.wAp.NumberSymbols][t];if(void 0===r){if(t===Ae.CurrencyDecimal)return e[l.wAp.NumberSymbols][Ae.Decimal];if(t===Ae.CurrencyGroup)return e[l.wAp.NumberSymbols][Ae.Group]}return r}const hr=l.kL8;function Le(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function vn(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function Zn(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const pr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vn={},Ea=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var _n=(()=>((_n=_n||{})[_n.Short=0]="Short",_n[_n.ShortGMT=1]="ShortGMT",_n[_n.Long=2]="Long",_n[_n.Extended=3]="Extended",_n))(),qe=(()=>((qe=qe||{})[qe.FullYear=0]="FullYear",qe[qe.Month=1]="Month",qe[qe.Date=2]="Date",qe[qe.Hours=3]="Hours",qe[qe.Minutes=4]="Minutes",qe[qe.Seconds=5]="Seconds",qe[qe.FractionalSeconds=6]="FractionalSeconds",qe[qe.Day=7]="Day",qe))(),gt=(()=>((gt=gt||{})[gt.DayPeriods=0]="DayPeriods",gt[gt.Days=1]="Days",gt[gt.Months=2]="Months",gt[gt.Eras=3]="Eras",gt))();function Gi(n,t,e,r){let i=function(n){if(ht(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,d=1]=n.split("-").map(f=>+f);return as(i,a-1,d)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(pr))return function(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,a=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-e,f=Number(n[5]||0)-r,_=Number(n[6]||0),w=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(t,d,f,_,w),t}(r)}const t=new Date(n);if(!ht(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=hn(e,t)||t;let f,d=[];for(;t;){if(f=Ea.exec(t),!f){d.push(t);break}{d=d.concat(f.slice(1));const T=d.pop();if(!T)break;t=T}}let _=i.getTimezoneOffset();r&&(_=$(r,_),i=function(n,t,e){const i=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*($(t,i)-i))}(i,r));let w="";return d.forEach(T=>{const S=function(n){if(ne[n])return ne[n];let t;switch(n){case"G":case"GG":case"GGG":t=Gt(gt.Eras,ye.Abbreviated);break;case"GGGG":t=Gt(gt.Eras,ye.Wide);break;case"GGGGG":t=Gt(gt.Eras,ye.Narrow);break;case"y":t=sn(qe.FullYear,1,0,!1,!0);break;case"yy":t=sn(qe.FullYear,2,0,!0,!0);break;case"yyy":t=sn(qe.FullYear,3,0,!1,!0);break;case"yyyy":t=sn(qe.FullYear,4,0,!1,!0);break;case"Y":t=Z(1);break;case"YY":t=Z(2,!0);break;case"YYY":t=Z(3);break;case"YYYY":t=Z(4);break;case"M":case"L":t=sn(qe.Month,1,1);break;case"MM":case"LL":t=sn(qe.Month,2,1);break;case"MMM":t=Gt(gt.Months,ye.Abbreviated);break;case"MMMM":t=Gt(gt.Months,ye.Wide);break;case"MMMMM":t=Gt(gt.Months,ye.Narrow);break;case"LLL":t=Gt(gt.Months,ye.Abbreviated,$e.Standalone);break;case"LLLL":t=Gt(gt.Months,ye.Wide,$e.Standalone);break;case"LLLLL":t=Gt(gt.Months,ye.Narrow,$e.Standalone);break;case"w":t=Q(1);break;case"ww":t=Q(2);break;case"W":t=Q(1,!0);break;case"d":t=sn(qe.Date,1);break;case"dd":t=sn(qe.Date,2);break;case"c":case"cc":t=sn(qe.Day,1);break;case"ccc":t=Gt(gt.Days,ye.Abbreviated,$e.Standalone);break;case"cccc":t=Gt(gt.Days,ye.Wide,$e.Standalone);break;case"ccccc":t=Gt(gt.Days,ye.Narrow,$e.Standalone);break;case"cccccc":t=Gt(gt.Days,ye.Short,$e.Standalone);break;case"E":case"EE":case"EEE":t=Gt(gt.Days,ye.Abbreviated);break;case"EEEE":t=Gt(gt.Days,ye.Wide);break;case"EEEEE":t=Gt(gt.Days,ye.Narrow);break;case"EEEEEE":t=Gt(gt.Days,ye.Short);break;case"a":case"aa":case"aaa":t=Gt(gt.DayPeriods,ye.Abbreviated);break;case"aaaa":t=Gt(gt.DayPeriods,ye.Wide);break;case"aaaaa":t=Gt(gt.DayPeriods,ye.Narrow);break;case"b":case"bb":case"bbb":t=Gt(gt.DayPeriods,ye.Abbreviated,$e.Standalone,!0);break;case"bbbb":t=Gt(gt.DayPeriods,ye.Wide,$e.Standalone,!0);break;case"bbbbb":t=Gt(gt.DayPeriods,ye.Narrow,$e.Standalone,!0);break;case"B":case"BB":case"BBB":t=Gt(gt.DayPeriods,ye.Abbreviated,$e.Format,!0);break;case"BBBB":t=Gt(gt.DayPeriods,ye.Wide,$e.Format,!0);break;case"BBBBB":t=Gt(gt.DayPeriods,ye.Narrow,$e.Format,!0);break;case"h":t=sn(qe.Hours,1,-12);break;case"hh":t=sn(qe.Hours,2,-12);break;case"H":t=sn(qe.Hours,1);break;case"HH":t=sn(qe.Hours,2);break;case"m":t=sn(qe.Minutes,1);break;case"mm":t=sn(qe.Minutes,2);break;case"s":t=sn(qe.Seconds,1);break;case"ss":t=sn(qe.Seconds,2);break;case"S":t=sn(qe.FractionalSeconds,1);break;case"SS":t=sn(qe.FractionalSeconds,2);break;case"SSS":t=sn(qe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Ne(_n.Short);break;case"ZZZZZ":t=Ne(_n.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Ne(_n.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Ne(_n.Long);break;default:return null}return ne[n]=t,t}(T);w+=S?S(i,e,_):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),w}function as(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function hn(n,t){const e=function(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(Vn[e]=Vn[e]||{},Vn[e][t])return Vn[e][t];let r="";switch(t){case"shortDate":r=Wn(n,je.Short);break;case"mediumDate":r=Wn(n,je.Medium);break;case"longDate":r=Wn(n,je.Long);break;case"fullDate":r=Wn(n,je.Full);break;case"shortTime":r=wt(n,je.Short);break;case"mediumTime":r=wt(n,je.Medium);break;case"longTime":r=wt(n,je.Long);break;case"fullTime":r=wt(n,je.Full);break;case"short":const i=hn(n,"shortTime"),a=hn(n,"shortDate");r=It(er(n,je.Short),[i,a]);break;case"medium":const d=hn(n,"mediumTime"),f=hn(n,"mediumDate");r=It(er(n,je.Medium),[d,f]);break;case"long":const _=hn(n,"longTime"),w=hn(n,"longDate");r=It(er(n,je.Long),[_,w]);break;case"full":const T=hn(n,"fullTime"),S=hn(n,"fullDate");r=It(er(n,je.Full),[T,S])}return r&&(Vn[e][t]=r),r}function It(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function Tr(n,t,e="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=e));let d=String(n);for(;d.length<t;)d="0"+d;return r&&(d=d.substr(d.length-t)),a+d}function sn(n,t,e=0,r=!1,i=!1){return function(a,d){let f=function(n,t){switch(n){case qe.FullYear:return t.getFullYear();case qe.Month:return t.getMonth();case qe.Date:return t.getDate();case qe.Hours:return t.getHours();case qe.Minutes:return t.getMinutes();case qe.Seconds:return t.getSeconds();case qe.FractionalSeconds:return t.getMilliseconds();case qe.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((e>0||f>-e)&&(f+=e),n===qe.Hours)0===f&&-12===e&&(f=12);else if(n===qe.FractionalSeconds)return function(n,t){return Tr(n,3).substr(0,t)}(f,t);const _=cn(d,Ae.MinusSign);return Tr(f,t,_,r,i)}}function Gt(n,t,e=$e.Format,r=!1){return function(i,a){return function(n,t,e,r,i,a){switch(e){case gt.Months:return function(n,t,e){const r=(0,l.cg1)(n),a=vn([r[l.wAp.MonthsFormat],r[l.wAp.MonthsStandalone]],t);return vn(a,e)}(t,i,r)[n.getMonth()];case gt.Days:return function(n,t,e){const r=(0,l.cg1)(n),a=vn([r[l.wAp.DaysFormat],r[l.wAp.DaysStandalone]],t);return vn(a,e)}(t,i,r)[n.getDay()];case gt.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(a){const w=function(n){const t=(0,l.cg1)(n);return Le(t),(t[l.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Zn(r):[Zn(r[0]),Zn(r[1])])}(t),T=function(n,t,e){const r=(0,l.cg1)(n);Le(r);const a=vn([r[l.wAp.ExtraData][0],r[l.wAp.ExtraData][1]],t)||[];return vn(a,e)||[]}(t,i,r),S=w.findIndex(M=>{if(Array.isArray(M)){const[V,Y]=M,ue=d>=V.hours&&f>=V.minutes,De=d<Y.hours||d===Y.hours&&f<Y.minutes;if(V.hours<Y.hours){if(ue&&De)return!0}else if(ue||De)return!0}else if(M.hours===d&&M.minutes===f)return!0;return!1});if(-1!==S)return T[S]}return function(n,t,e){const r=(0,l.cg1)(n),a=vn([r[l.wAp.DayPeriodsFormat],r[l.wAp.DayPeriodsStandalone]],t);return vn(a,e)}(t,i,r)[d<12?0:1];case gt.Eras:return function(n,t){return vn((0,l.cg1)(n)[l.wAp.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,a,n,t,e,r)}}function Ne(n){return function(t,e,r){const i=-1*r,a=cn(e,Ae.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case _n.Short:return(i>=0?"+":"")+Tr(d,2,a)+Tr(Math.abs(i%60),2,a);case _n.ShortGMT:return"GMT"+(i>=0?"+":"")+Tr(d,1,a);case _n.Long:return"GMT"+(i>=0?"+":"")+Tr(d,2,a)+":"+Tr(Math.abs(i%60),2,a);case _n.Extended:return 0===r?"Z":(i>=0?"+":"")+Tr(d,2,a)+":"+Tr(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function Jt(n){return as(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Q(n,t=!1){return function(e,r){let i;if(t){const a=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();i=1+Math.floor((d+a)/7)}else{const a=Jt(e),d=function(n){const t=as(n,0,1).getDay();return as(n,0,1+(t<=4?4:11)-t)}(a.getFullYear()),f=a.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return Tr(i,n,cn(r,Ae.MinusSign))}}function Z(n,t=!1){return function(e,r){return Tr(Jt(e).getFullYear(),n,cn(r,Ae.MinusSign),t)}}const ne={};function $(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function ht(n){return n instanceof Date&&!isNaN(n.valueOf())}class ls{}let eu=(()=>{class n extends ls{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(hr(r||this.locale)(e)){case Te.Zero:return"zero";case Te.One:return"one";case Te.Two:return"two";case Te.Few:return"few";case Te.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),po=(()=>{class n{constructor(e,r,i,a){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ai{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zt=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,a,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new ai(null,this._ngForOf,-1,-1),null===d?void 0:d),_=new Ec(i,f);r.push(_)}else if(null==d)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const f=this._viewContainer.get(a);this._viewContainer.move(f,d);const _=new Ec(i,f);r.push(_)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=a,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Ec{constructor(t,e){this.record=t,this.view=e}}let Mr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Dc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){go("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){go("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Dc{constructor(){this.$implicit=null,this.ngIf=null}}function go(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}let tu=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",i,a){if(null==e||""===e||e!=e)return null;try{return Gi(e,r,a||this.locale,i)}catch(d){throw function(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,l.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.soG,16))},n.\u0275pipe=l.Yjl({name:"date",type:n,pure:!0}),n})(),zn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:ls,useClass:eu}]}),n})();function gh(n){return"server"===n}let Nc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new mh((0,l.LFG)(de),window)}),n})();class mh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const d=a.getElementById(t)||a.querySelector(`[name="${t}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Na(this.window.history)||Na(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Na(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class xc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new xc,G||(G=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null);return null==e?null:function(n){In=In||document.createElement("a"),In.setAttribute("href",n);const t=In.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,a]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(a)}return null}(document.cookie,t)}}let In,Ss=null;const Mc=new l.OlP("TRANSITION_ID"),Sn=[{provide:l.ip1,useFactory:function(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const r=O(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Mc,de,l.zs3],multi:!0}];class Rc{static init(){(0,l.VLi)(new Rc)}addToWindow(t){l.dqk.getAngularTestability=(r,i=!0)=>{const a=t.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let a=i.length,d=!1;const f=function(_){d=d||_,a--,0==a&&r(d)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?O().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let As=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const vo=new l.OlP("EventManagerPlugins");let Me=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const d=i[a];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Yt{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=O().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Ma=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Un=(()=>{class n extends Ma{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(a=>{const d=this._doc.createElement("style");d.textContent=a,i.push(r.appendChild(d))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(yl),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(yl))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function yl(n){O().remove(n)}const Gs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ui=/%COMP%/g;function sr(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?sr(n,i,e):(i=i.replace(ui,n),e.push(i))}return e}function Ni(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let xi=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Mi(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new yp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case l.ifc.ShadowDom:return new Yo(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=sr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Me),l.LFG(Un),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Mi{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gs[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const a=Gs[i];a?t.setAttributeNS(a,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Gs[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,r,i&l.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ni(r)):this.eventManager.addEventListener(t,e,Ni(r))}}class yp extends Mi{constructor(t,e,r,i){super(t),this.component=r;const a=sr(i+"-"+r.id,r.styles,[]);e.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(ui,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(ui,i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Yo extends Mi{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=sr(i.id,i.styles,[]);for(let d=0;d<a.length;d++){const f=document.createElement("style");f.textContent=a[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Bc=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ko=["alt","control","meta","shift"],vp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},hu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qc=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const a=n.parseEventName(r),d=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(e,a.domEventName,d))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let d="";if(Ko.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),d+=_+".")}),d+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&jr.hasOwnProperty(t)&&(t=jr[t]))}return vp[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ko.forEach(a=>{a!=i&&hu[a](e)&&(r+=a+".")}),r+=i,r}static eventCallback(e,r,i){return a=>{n.getEventFullKey(a)===e&&i.runGuarded(()=>r(a))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(de))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const La=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function(){xc.makeCurrent(),Rc.init()},multi:!0},{provide:de,useFactory:function(){return(0,l.RDi)(document),document},deps:[]}]),Wc=[[],{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function(){return new l.qLn},deps:[]},{provide:vo,useClass:Bc,multi:!0,deps:[de,l.R0b,l.Lbi]},{provide:vo,useClass:qc,multi:!0,deps:[de]},[],{provide:xi,useClass:xi,deps:[Me,Un,l.AFp]},{provide:l.FYo,useExisting:xi},{provide:Ma,useExisting:Un},{provide:Un,useClass:Un,deps:[de]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:Me,useClass:Me,deps:[vo,l.R0b]},{provide:class{},useClass:As,deps:[]},[]];let Ep=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:Mc,useExisting:l.AFp},Sn]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Wc,imports:[zn,l.hGG]}),n})();"undefined"!=typeof window&&window;var Xt=B(4402),ct=B(5917),En=B(9765),Tl=B(7971);class yr extends En.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Tl.N;return this._value}next(t){super.next(this._value=t)}}var Jo=B(4869),xs=B(9796),or=B(7393);class Th extends or.L{notifyNext(t,e,r,i,a){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Sp extends or.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Do=B(7444),Yn=B(7574);function Kn(n,t,e,r,i=new Sp(n,e,r)){if(!i.closed)return t instanceof Yn.y?t.subscribe(i):(0,Do.s)(t)(i)}var _u=B(6693);const Xo={};class Ua{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new zc(t,this.resultSelector))}}class zc extends Th{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Xo),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(Kn(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,d=this.toRespond?i[r]===Xo?--this.toRespond:this.toRespond:0;i[r]=e,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const Ms=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var hs=B(3282);function Zs(...n){return(0,hs.J)(1)((0,ct.of)(...n))}var ci=B(9193);function Ri(n){return new Yn.y(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?(0,Xt.D)(e):(0,ci.c)()).subscribe(t)})}var a0=B(2441),pt=B(8002),Yi=B(5345);function nr(n,t){return"function"==typeof t?e=>e.pipe(nr((r,i)=>(0,Xt.D)(n(r,i)).pipe((0,pt.U)((a,d)=>t(r,a,i,d))))):e=>e.lift(new Ap(n))}class Ap{constructor(t){this.project=t}call(t,e){return e.subscribe(new Hn(t,this.project))}}class Hn extends Yi.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new Yi.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,Yi.ft)(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Yc=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function yi(n){return t=>0===n?(0,ci.c)():t.lift(new l0(n))}class l0{constructor(t){if(this.total=t,this.total<0)throw new Yc}call(t,e){return e.subscribe(new Np(t,this.total))}}class Np extends or.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function ea(...n){const t=n[n.length-1];return(0,Jo.K)(t)?(n.pop(),e=>Zs(n,e,t)):e=>Zs(n,e)}function $a(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new s_(n,t,e))}}class s_{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new vu(t,this.accumulator,this.seed,this.hasSeed))}}class vu extends or.L{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Qn(n,t){return function(r){return r.lift(new Kc(n,t))}}class Kc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new So(t,this.predicate,this.thisArg))}}class So extends or.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Ao(n){return function(e){const r=new ar(n),i=e.lift(r);return r.caught=i}}class ar{constructor(t){this.selector=t}call(t,e){return e.subscribe(new zs(t,this.selector,this.caught))}}class zs extends Yi.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(a){return void super.error(a)}this._unsubscribeAndRecycle();const r=new Yi.IY(this);this.add(r);const i=(0,Yi.ft)(e,r);i!==r&&this.add(i)}}}var Pr=B(9773);function Qc(n,t){return(0,Pr.zg)(n,t,1)}function Sh(n){return function(e){return 0===n?(0,ci.c)():e.lift(new vi(n))}}class vi{constructor(t){if(this.total=t,this.total<0)throw new Yc}call(t,e){return e.subscribe(new Rs(t,this.total))}}class Rs extends or.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let a=0;a<r;a++){const d=e++%r;t.next(i[d])}}t.complete()}}function ks(n=Ah){return t=>t.lift(new No(n))}class No{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new xo(t,this.errorFactory))}}class xo extends or.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Ah(){return new Ms}function Ys(n=null){return t=>t.lift(new xp(n))}class xp{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ha(t,this.defaultValue))}}class Ha extends or.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Mp=B(4487);function vr(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Qn((i,a)=>n(i,a,r)):Mp.y,yi(1),e?Ys(t):ks(()=>new Ms))}var lr=B(8307),ja=B(1307),Nh=B(5319);class A{constructor(t){this.callback=t}call(t,e){return e.subscribe(new k(t,this.callback))}}class k extends or.L{constructor(t,e){super(t),this.add(new Nh.w(e))}}class q{constructor(t,e){this.id=t,this.url=e}}class se extends q{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class he extends q{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oe extends q{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xe extends q{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Dt extends q{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kt extends q{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tn extends q{constructor(t,e,r,i,a){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pt extends q{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ir extends q{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Il{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xc{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ks{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ga{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ps{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ta{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class Rp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jn(n){return new Rp(n)}const bu="ngNavigationCancelingError";function o_(n){const t=Error("NavigationCancelingError: "+n);return t[bu]=!0,t}function Al(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const d=r[a],f=n[a];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fs(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let a=0;a<e.length;a++)if(i=e[a],!Pp(n[i],t[i]))return!1;return!0}function Pp(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,a)=>r[a]===i)}return n===t}function a_(n){return Array.prototype.concat.apply([],n)}function qa(n){return n.length>0?n[n.length-1]:null}function Or(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Gr(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,Xt.D)(Promise.resolve(n)):(0,ct.of)(n)}const l_={exact:function xh(n,t,e){if(!za(n.segments,t.segments)||!Cu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!xh(n.children[r],t.children[r],e))return!1;return!0},subset:na},wu={exact:function(n,t){return fs(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Pp(n[e],t[e]))},ignored:()=>!0};function ed(n,t,e){return l_[e.paths](n.root,t.root,e.matrixParams)&&wu[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function na(n,t,e){return Za(n,t,t.segments,e)}function Za(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!za(i,e)||t.hasChildren()||!Cu(i,e,r))}if(n.segments.length===e.length){if(!za(n.segments,e)||!Cu(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!na(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),a=e.slice(n.segments.length);return!!(za(n.segments,i)&&Cu(n.segments,i,r)&&n.children[Lt])&&Za(n.children[Lt],t,a,r)}}function Cu(n,t,e){return t.every((r,i)=>wu[e](n[i].parameters,r.parameters))}class Nl{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return nd.serialize(this)}}class en{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Or(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ra(this)}}class td{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jn(this.parameters)),this._parameterMap}toString(){return Tu(this)}}function za(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class Op{}class Eu{parse(t){const e=new kh(t);return new Nl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${rd(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${id(e)}=${id(i)}`).join("&"):`${id(e)}=${id(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const nd=new Eu;function ra(n){return n.segments.map(t=>Tu(t)).join("/")}function rd(n,t){if(!n.hasChildren())return ra(n);if(t){const e=n.children[Lt]?rd(n.children[Lt],!1):"",r=[];return Or(n.children,(i,a)=>{a!==Lt&&r.push(`${a}:${rd(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Or(n.children,(r,i)=>{i===Lt&&(e=e.concat(t(r,i)))}),Or(n.children,(r,i)=>{i!==Lt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Lt?[rd(n.children[Lt],!1)]:[`${i}:${rd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Lt]?`${ra(n)}/${e[0]}`:`${ra(n)}/(${e.join("//")})`}}function d_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function id(n){return d_(n).replace(/%3B/gi,";")}function sd(n){return d_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Du(n){return decodeURIComponent(n)}function Fp(n){return Du(n.replace(/\+/g,"%20"))}function Tu(n){return`${sd(n.path)}${function(n){return Object.keys(n).map(t=>`;${sd(t)}=${sd(n[t])}`).join("")}(n.parameters)}`}const f0=/^[^\/()?;=#]+/;function Rh(n){const t=n.match(f0);return t?t[0]:""}const p0=/^[^=?&#]+/,ia=/^[^?&#]+/;class kh{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Lt]=new en(t,e)),r}parseSegment(){const t=Rh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new td(Du(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Rh(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Rh(this.remaining);i&&(r=i,this.capture(r))}t[Du(e)]=Du(r)}parseQueryParam(t){const e=function(n){const t=n.match(p0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const d=function(n){const t=n.match(ia);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Fp(e),a=Fp(r);if(t.hasOwnProperty(i)){let d=t[i];Array.isArray(d)||(d=[d],t[i]=d),d.push(a)}else t[i]=a}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=Lt);const d=this.parseChildren();e[a]=1===Object.keys(d).length?d[Lt]:new en([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class h_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Lp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Lp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Vp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Vp(t,this._root).map(e=>e.value)}}function Lp(n,t){if(n===t.value)return t;for(const e of t.children){const r=Lp(n,e);if(r)return r}return null}function Vp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Vp(n,e);if(r.length)return r.unshift(t),r}return[]}class sa{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function od(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ph extends h_{constructor(t,e){super(t),this.snapshot=e,Fh(this,t)}toString(){return this.snapshot.toString()}}function f_(n,t){const e=function(n,t){const d=new Oh([],{},{},"",{},Lt,t,null,n.root,-1,{});return new Ya("",new sa(d,[]))}(n,t),r=new yr([new td("",{})]),i=new yr({}),a=new yr({}),d=new yr({}),f=new yr(""),_=new Su(r,i,d,f,a,Lt,t,e.root);return _.snapshot=e.root,new Ph(new sa(_,[]),e)}class Su{constructor(t,e,r,i,a,d,f,_){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(t=>Jn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(t=>Jn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function p_(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],a=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Oh{constructor(t,e,r,i,a,d,f,_,w,T,S){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ya extends h_{constructor(t,e){super(e),this.url=t,Fh(this,e)}toString(){return Os(this._root)}}function Fh(n,t){t.value._routerState=n,t.children.forEach(e=>Fh(n,e))}function Os(n){const t=n.children.length>0?` { ${n.children.map(Os).join(", ")} } `:"";return`${n.value}${t}`}function Ml(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,fs(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),fs(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!fs(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),fs(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Au(n,t){return fs(n.params,t.params)&&function(n,t){return za(n,t)&&n.every((e,r)=>fs(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||Au(n.parent,t.parent))}function Nu(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nu(n,r,i);return Nu(n,r)})}(n,t,e);return new sa(r,i)}{if(n.shouldAttach(t.value)){const a=n.retrieve(t.value);if(null!==a){const d=a.route;return __(t,d),d}}const r=function(n){return new Su(new yr(n.url),new yr(n.params),new yr(n.queryParams),new yr(n.fragment),new yr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(a=>Nu(n,a));return new sa(r,i)}}function __(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)__(n.children[e],t.children[e])}function ad(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function b(n){return"object"==typeof n&&null!=n&&n.outlets}function g(n,t,e,r,i){let a={};return r&&Or(r,(d,f)=>{a[f]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),new Nl(e.root===n?t:y(e.root,n,t),a,i)}function y(n,t,e){const r={};return Or(n.children,(i,a)=>{r[a]=i===t?e:y(i,t,e)}),new en(n.segments,r)}class E{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ad(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(b);if(i&&i!==qa(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function Be(n,t,e){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return _t(n,t,e);const r=function(n,t,e){let r=0,i=t;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return a;const d=n.segments[i],f=e[r];if(b(f))break;const _=`${f}`,w=r<e.length-1?e[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!ld(_,w,d))return a;r+=2}else{if(!ld(_,{},d))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new en(n.segments.slice(0,r.pathIndex),{});return a.children[Lt]=new en(n.segments.slice(r.pathIndex),n.children),_t(a,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?kn(n,t,e):r.match?_t(n,0,i):kn(n,t,e)}function _t(n,t,e){if(0===e.length)return new en(n.segments,{});{const r=function(n){return b(n[0])?n[0].outlets:{[Lt]:n}}(e),i={};return Or(r,(a,d)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[d]=Be(n.children[d],t,a))}),Or(n.children,(a,d)=>{void 0===r[d]&&(i[d]=a)}),new en(n.segments,i)}}function kn(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const a=e[i];if(b(a)){const _=un(a.outlets);return new en(r,_)}if(0===i&&ad(e[0])){r.push(new td(n.segments[t].path,oa(e[0]))),i++;continue}const d=b(a)?a.outlets[Lt]:`${a}`,f=i<e.length-1?e[i+1]:null;d&&f&&ad(f)?(r.push(new td(d,oa(f))),i+=2):(r.push(new td(d,{})),i++)}return new en(r,{})}function un(n){const t={};return Or(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=kn(new en([],{}),0,e))}),t}function oa(n){const t={};return Or(n,(e,r)=>t[r]=`${e}`),t}function ld(n,t,e){return n==e.path&&fs(t,e.parameters)}class Up{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Ml(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=od(e);t.children.forEach(a=>{const d=a.value.outlet;this.deactivateRoutes(a,i[d],r),delete i[d]}),Or(i,(a,d)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(t,e,r){const i=t.value,a=e?e.value:null;if(i===a)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,r);else a&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,a=od(t);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=od(e);t.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Ps(a.value.snapshot))}),t.children.length&&this.forwardEvent(new Ks(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,a=e?e.value:null;if(Ml(i),i===a)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),$p(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=_,d.outlet&&d.outlet.activateWith(i,_),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}function $p(n){Ml(n.value),n.children.forEach($p)}class Lh{constructor(t,e){this.routes=t,this.module=e}}function aa(n){return"function"==typeof n}function Rl(n){return n instanceof Nl}const Vh=Symbol("INITIAL_VALUE");function Bh(){return nr(n=>function(...n){let t,e;return(0,Jo.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,xs.k)(n[0])&&(n=n[0]),(0,_u.n)(n,e).lift(new Ua(t))}(n.map(t=>t.pipe(yi(1),ea(Vh)))).pipe($a((t,e)=>{let r=!1;return e.reduce((i,a,d)=>i!==Vh?i:(a===Vh&&(r=!0),r||!1!==a&&d!==e.length-1&&!Rl(a)?i:a),t)},Vh),Qn(t=>t!==Vh),(0,pt.U)(t=>Rl(t)?t:!0===t),yi(1)))}let Pi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&l._UZ(0,"router-outlet")},directives:function(){return[zp]},encapsulation:2}),n})();function Uh(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];y0(r,$A(t,r))}}function y0(n,t){n.children&&Uh(n.children,t)}function $A(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function v0(n){const t=n.children&&n.children.map(v0),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Lt&&(e.component=Pi),e}function Qs(n){return n.outlet||Lt}function pE(n,t){const e=n.filter(r=>Qs(r)===t);return e.push(...n.filter(r=>Qs(r)!==t)),e}const b0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function y_(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},b0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(t.matcher||Al)(e,n,t);if(!a)return Object.assign({},b0);const d={};Or(a.posParams,(_,w)=>{d[w]=_.path});const f=a.consumed.length>0?Object.assign(Object.assign({},d),a.consumed[a.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Gp(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>$h(n,t,r)&&Qs(r)!==Lt)}(n,e,r)){const d=new en(t,function(n,t,e,r){const i={};i[Lt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const a of e)if(""===a.path&&Qs(a)!==Lt){const d=new en([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,i[Qs(a)]=d}return i}(n,t,r,new en(e,n.children)));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>$h(n,t,r))}(n,e,r)){const d=new en(n.segments,function(n,t,e,r,i,a){const d={};for(const f of r)if($h(n,e,f)&&!i[Qs(f)]){const _=new en([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:t.length,d[Qs(f)]=_}return Object.assign(Object.assign({},i),d)}(n,t,e,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const a=new en(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:e}}function $h(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function w0(n,t,e,r){return!!(Qs(n)===r||r!==Lt&&$h(t,e,n))&&("**"===n.path||y_(t,n,e).matched)}function mE(n,t,e){return 0===t.length&&!n.children[e]}class v_{constructor(t){this.segmentGroup=t||null}}class C0{constructor(t){this.urlTree=t}}function cd(n){return new Yn.y(t=>t.error(new v_(n)))}function _E(n){return new Yn.y(t=>t.error(new C0(n)))}function qA(n){return new Yn.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class ZA{constructor(t,e,r,i,a){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=t.get(l.h0i)}apply(){const t=Gp(this.urlTree.root,[],[],this.config).segmentGroup,e=new en(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Lt).pipe((0,pt.U)(a=>this.createUrlTree(E0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ao(a=>{if(a instanceof C0)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof v_?this.noMatchError(a):a}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Lt).pipe((0,pt.U)(i=>this.createUrlTree(E0(i),t.queryParams,t.fragment))).pipe(Ao(i=>{throw i instanceof v_?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new en([],{[Lt]:t}):t;return new Nl(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,pt.U)(a=>new en([],a))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Xt.D)(i).pipe(Qc(a=>{const d=r.children[a],f=pE(e,a);return this.expandSegmentGroup(t,f,d,a).pipe((0,pt.U)(_=>({segment:_,outlet:a})))}),$a((a,d)=>(a[d.outlet]=d.segment,a),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Qn((i,a)=>n(i,a,r)):Mp.y,Sh(1),e?Ys(t):ks(()=>new Ms))}())}expandSegment(t,e,r,i,a,d){return(0,Xt.D)(r).pipe(Qc(f=>this.expandSegmentAgainstRoute(t,e,r,f,i,a,d).pipe(Ao(w=>{if(w instanceof v_)return(0,ct.of)(null);throw w}))),vr(f=>!!f),Ao((f,_)=>{if(f instanceof Ms||"EmptyError"===f.name){if(mE(e,i,a))return(0,ct.of)(new en([],{}));throw new v_(e)}throw f}))}expandSegmentAgainstRoute(t,e,r,i,a,d,f){return w0(i,e,a,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,a,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d):cd(e):cd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_E(a):this.lineralizeSegments(r,a).pipe((0,Pr.zg)(d=>{const f=new en(d,{});return this.expandSegment(t,f,e,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d){const{matched:f,consumedSegments:_,lastChild:w,positionalParamSegments:T}=y_(e,i,a);if(!f)return cd(e);const S=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?_E(S):this.lineralizeSegments(i,S).pipe((0,Pr.zg)(M=>this.expandSegment(t,e,r,M.concat(a.slice(w)),d,!1)))}matchSegmentAgainstRoute(t,e,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ct.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,pt.U)(M=>(r._loadedConfig=M,new en(i,{})))):(0,ct.of)(new en(i,{}));const{matched:d,consumedSegments:f,lastChild:_}=y_(e,r,i);if(!d)return cd(e);const w=i.slice(_);return this.getChildConfig(t,r,i).pipe((0,Pr.zg)(S=>{const M=S.module,V=S.routes,{segmentGroup:Y,slicedSegments:ue}=Gp(e,f,w,V),De=new en(Y.segments,Y.children);if(0===ue.length&&De.hasChildren())return this.expandChildren(M,V,De).pipe((0,pt.U)(at=>new en(f,at)));if(0===V.length&&0===ue.length)return(0,ct.of)(new en(f,{}));const rt=Qs(r)===a;return this.expandSegment(M,De,V,ue,rt?Lt:a,!0).pipe((0,pt.U)(it=>new en(f.concat(it.segments),it.children)))}))}getChildConfig(t,e,r){return e.children?(0,ct.of)(new Lh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,ct.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Pr.zg)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,pt.U)(a=>(e._loadedConfig=a,a))):(n=e,new Yn.y(t=>t.error(o_(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ct.of)(new Lh([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;if(!i||0===i.length)return(0,ct.of)(!0);const a=i.map(d=>{const f=t.get(d);let _;if((n=f)&&aa(n.canLoad))_=f.canLoad(e,r);else{if(!aa(f))throw new Error("Invalid CanLoad guard");_=f(e,r)}var n;return Gr(_)});return(0,ct.of)(a).pipe(Bh(),(0,lr.b)(d=>{if(!Rl(d))return;const f=o_(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,pt.U)(d=>!0===d))}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ct.of)(r);if(i.numberOfChildren>1||!i.children[Lt])return qA(t.redirectTo);i=i.children[Lt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const a=this.createSegmentGroup(t,e.root,r,i);return new Nl(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Or(t,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=e[f]}else r[a]=i}),r}createSegmentGroup(t,e,r,i){const a=this.createSegments(t,e.segments,r,i);let d={};return Or(e.children,(f,_)=>{d[_]=this.createSegmentGroup(t,f,r,i)}),new en(a,d)}createSegments(t,e,r,i){return e.map(a=>a.path.startsWith(":")?this.findPosParam(t,a,i):this.findOrReturn(a,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function E0(n){const t={};for(const r of Object.keys(n.children)){const a=E0(n.children[r]);(a.segments.length>0||a.hasChildren())&&(t[r]=a)}return function(n){if(1===n.numberOfChildren&&n.children[Lt]){const t=n.children[Lt];return new en(n.segments.concat(t.segments),t.children)}return n}(new en(n.segments,t))}class qp{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class ps{constructor(t,e){this.component=t,this.route=e}}function yE(n,t,e){const r=n._root;return w_(r,t?t._root:null,e,[r.value])}function b_(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function w_(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=od(t);return n.children.forEach(d=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,d=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){const _=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!za(n.url,t.url);case"pathParamsOrQueryParamsChange":return!za(n.url,t.url)||!fs(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Au(n,t)||!fs(n.queryParams,t.queryParams);case"paramsChange":default:return!Au(n,t)}}(d,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new qp(r)):(a.data=d.data,a._resolvedData=d._resolvedData),w_(n,t,a.component?f?f.children:null:e,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new ps(f.outlet.component,d))}else d&&Wp(t,f,i),i.canActivateChecks.push(new qp(r)),w_(n,null,a.component?f?f.children:null:e,r,i)})(d,a[d.value.outlet],e,r.concat([d.value]),i),delete a[d.value.outlet]}),Or(a,(d,f)=>Wp(d,e.getContext(f),i)),i}function Wp(n,t,e){const r=od(n),i=n.value;Or(r,(a,d)=>{Wp(a,i.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new ps(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class D0{}function C_(n){return new Yn.y(t=>t.error(n))}class CE{constructor(t,e,r,i,a,d){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=d}recognize(){const t=Gp(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Lt);if(null===e)return null;const r=new Oh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new sa(r,e),a=new Ya(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(t){const e=t.value,r=p_(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const a of Object.keys(e.children)){const d=e.children[a],f=pE(t,a),_=this.processSegmentGroup(f,d,a);if(null===_)return null;r.push(..._)}const i=E_(r);return i.sort((t,e)=>t.value.outlet===Lt?-1:e.value.outlet===Lt?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const a of t){const d=this.processSegmentAgainstRoute(a,e,r,i);if(null!==d)return d}return mE(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!w0(t,e,r,i))return null;let a,d=[],f=[];if("**"===t.path){const V=r.length>0?qa(r).parameters:{};a=new Oh(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dd(t),Qs(t),t.component,t,T0(e),eN(e)+r.length,D_(t))}else{const V=y_(e,t,r);if(!V.matched)return null;d=V.consumedSegments,f=r.slice(V.lastChild),a=new Oh(d,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,dd(t),Qs(t),t.component,t,T0(e),eN(e)+d.length,D_(t))}const _=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:w,slicedSegments:T}=Gp(e,d,f,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);var n;if(0===T.length&&w.hasChildren()){const V=this.processChildren(_,w);return null===V?null:[new sa(a,V)]}if(0===_.length&&0===T.length)return[new sa(a,[])];const S=Qs(t)===i,M=this.processSegment(_,w,T,S?Lt:i);return null===M?null:[new sa(a,M)]}}function DE(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function E_(n){const t=[],e=new Set;for(const r of n){if(!DE(r)){t.push(r);continue}const i=t.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=E_(r.children);t.push(new sa(r.value,i))}return t.filter(r=>!e.has(r))}function T0(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function eN(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function dd(n){return n.data||{}}function D_(n){return n.resolve||{}}function S0(n){return nr(t=>{const e=n(t);return e?(0,Xt.D)(e).pipe((0,pt.U)(()=>t)):(0,ct.of)(t)})}class oN extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const T_=new l.OlP("ROUTES");class I_{constructor(t,e,r,i){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,pt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=a.create(t);return new Lh(a_(d.injector.get(T_,void 0,l.XFs.Self|l.XFs.Optional)).map(v0),d)}),Ao(a=>{throw e._loader$=void 0,a}));return e._loader$=new a0.c(i,()=>new En.xQ).pipe((0,ja.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Xt.D)(this.loader.load(t)):Gr(t()).pipe((0,Pr.zg)(e=>e instanceof l.YKP?(0,ct.of)(e):(0,Xt.D)(this.compiler.compileModuleAsync(e))))}}class SE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xu,this.attachRef=null}}class xu{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new SE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class lN{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function AE(n){throw n}function NE(n,t,e){return t.parse("/")}function Mu(n,t){return(0,ct.of)(null)}const xE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ME={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gs=(()=>{class n{constructor(e,r,i,a,d,f,_,w){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new En.xQ,this.errorHandler=AE,this.malformedUriErrorHandler=NE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Mu,afterPreactivation:Mu},this.urlHandlingStrategy=new lN,this.routeReuseStrategy=new oN,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(l.h0i),this.console=d.get(l.c2e);const M=d.get(l.R0b);this.isNgZoneEnabled=M instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=new Nl(new en([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new I_(f,_,V=>this.triggerEvent(new Sr(V)),V=>this.triggerEvent(new Il(V))),this.routerState=f_(this.currentUrlTree,this.rootComponentType),this.transitions=new yr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(Qn(i=>0!==i.id),(0,pt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),nr(i=>{let a=!1,d=!1;return(0,ct.of)(i).pipe((0,lr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),nr(f=>{const _=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return A_(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,ct.of)(f).pipe(nr(S=>{const M=this.transitions.getValue();return r.next(new se(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),M!==this.transitions.getValue()?ci.E:Promise.resolve(S)}),function(n,t,e,r){return nr(i=>function(n,t,e,r,i){return new ZA(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,pt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function(n,t,e,r,i){return(0,Pr.zg)(a=>function(n,t,e,r,i="emptyOnly",a="legacy"){try{const d=new CE(n,t,e,r,i,a).recognize();return null===d?C_(new D0):(0,ct.of)(d)}catch(d){return C_(d)}}(n,t,a.urlAfterRedirects,e(a.urlAfterRedirects),r,i).pipe((0,pt.U)(d=>Object.assign(Object.assign({},a),{targetSnapshot:d}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lr.b)(S=>{"eager"===this.urlUpdateStrategy&&(S.extras.skipLocationChange||this.setBrowserUrl(S.urlAfterRedirects,S),this.browserUrlTree=S.urlAfterRedirects);const M=new Dt(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(M)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:V,source:Y,restoredState:ue,extras:De}=f,rt=new se(M,this.serializeUrl(V),Y,ue);r.next(rt);const Je=f_(V,this.rootComponentType).snapshot;return(0,ct.of)(Object.assign(Object.assign({},f),{targetSnapshot:Je,urlAfterRedirects:V,extras:Object.assign(Object.assign({},De),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),ci.E}),S0(f=>{const{targetSnapshot:_,id:w,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:M,replaceUrl:V}}=f;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!M,replaceUrl:!!V})}),(0,lr.b)(f=>{const _=new kt(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,pt.U)(f=>Object.assign(Object.assign({},f),{guards:yE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,Pr.zg)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:d}}=e;return 0===d.length&&0===a.length?(0,ct.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,Xt.D)(n).pipe((0,Pr.zg)(i=>function(n,t,e,r,i){const a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,ct.of)(!0);const d=a.map(f=>{const _=b_(f,t,i);let w;if(function(n){return n&&aa(n.canDeactivate)}(_))w=Gr(_.canDeactivate(n,t,e,r));else{if(!aa(_))throw new Error("Invalid CanDeactivate guard");w=Gr(_(n,t,e,r))}return w.pipe(vr())});return(0,ct.of)(d).pipe(Bh())}(i.component,i.route,e,t,r)),vr(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Pr.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,r){return(0,Xt.D)(t).pipe(Qc(i=>Zs(function(n,t){return null!==n&&t&&t(new Xc(n)),(0,ct.of)(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new Ga(n)),(0,ct.of)(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(d=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(d)).filter(d=>null!==d).map(d=>Ri(()=>{const f=d.guards.map(_=>{const w=b_(_,d.node,e);let T;if(function(n){return n&&aa(n.canActivateChild)}(w))T=Gr(w.canActivateChild(r,n));else{if(!aa(w))throw new Error("Invalid CanActivateChild guard");T=Gr(w(r,n))}return T.pipe(vr())});return(0,ct.of)(f).pipe(Bh())}));return(0,ct.of)(a).pipe(Bh())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ct.of)(!0);const i=r.map(a=>Ri(()=>{const d=b_(a,t,e);let f;if(function(n){return n&&aa(n.canActivate)}(d))f=Gr(d.canActivate(t,n));else{if(!aa(d))throw new Error("Invalid CanActivate guard");f=Gr(d(t,n))}return f.pipe(vr())}));return(0,ct.of)(i).pipe(Bh())}(n,i.route,e))),vr(i=>!0!==i,!0))}(r,a,n,t):(0,ct.of)(f)),(0,pt.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,lr.b)(f=>{if(Rl(f.guardsResult)){const w=o_(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw w.url=f.guardsResult,w}const _=new tn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Qn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),S0(f=>{if(f.guards.canActivateChecks.length)return(0,ct.of)(f).pipe((0,lr.b)(_=>{const w=new Pt(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),nr(_=>{let w=!1;return(0,ct.of)(_).pipe(function(n,t){return(0,Pr.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,ct.of)(e);let a=0;return(0,Xt.D)(i).pipe(Qc(d=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return(0,ct.of)({});const a={};return(0,Xt.D)(i).pipe((0,Pr.zg)(d=>function(n,t,e,r){const i=b_(n,t,r);return Gr(i.resolve?i.resolve(t,e):i(t,e))}(n[d],t,e,r).pipe((0,lr.b)(f=>{a[d]=f}))),Sh(1),(0,Pr.zg)(()=>Object.keys(a).length===i.length?(0,ct.of)(a):ci.E))}(n._resolve,n,t,r).pipe((0,pt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),p_(n,e).resolve),null)))}(d.route,r,n,t)),(0,lr.b)(()=>a++),Sh(1),(0,Pr.zg)(d=>a===i.length?(0,ct.of)(e):ci.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,lr.b)(_=>{const w=new Ir(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),S0(f=>{const{targetSnapshot:_,id:w,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:M,replaceUrl:V}}=f;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!M,replaceUrl:!!V})}),(0,pt.U)(f=>{const _=function(n,t,e){const r=Nu(n,t._root,e?e._root:void 0);return new Ph(r,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,lr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,pt.U)(r=>(new Up(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,lr.b)({next(){a=!0},complete(){a=!0}}),function(n){return t=>t.lift(new A(n))}(()=>{var f;if(!a&&!d){const _=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,_)):this.cancelNavigationTransition(i,_)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Ao(f=>{if(d=!0,function(n){return n&&n[bu]}(f)){const _=Rl(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Oe(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(w),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||A_(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new Xe(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return ci.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:a,urlTree:d}=r,f={replaceUrl:!0};if(a){const _=Object.assign({},a);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(f.state=_)}this.scheduleNavigation(d,i,a,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const i=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!i||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Uh(e),this.config=e.map(v0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:a,fragment:d,queryParamsHandling:f,preserveFragment:_}=r,w=i||this.routerState.root,T=_?this.currentUrlTree.fragment:d;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function(n,t,e,r,i){if(0===e.length)return g(t.root,t.root,t,r,i);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new E(!0,0,n);let t=0,e=!1;const r=n.reduce((i,a,d)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Or(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===d?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?e=!0:".."===f?t++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new E(e,t,r)}(e);if(a.toRoot())return g(t.root,new en([],{}),t,r,i);const d=function(n,t,e){if(n.isAbsolute)return new R(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new R(a,a===t.root,0)}const r=ad(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,a=e;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new R(r,!1,i-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,t,n),f=d.processChildren?_t(d.segmentGroup,d.index,a.commands):Be(d.segmentGroup,d.index,a.commands);return g(d.segmentGroup,f,t,r,i)}(w,this.currentUrlTree,e,S,null!=T?T:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Rl(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},xE):!1===r?Object.assign({},ME):r,Rl(e))return ed(this.currentUrlTree,e,i);const a=this.parseUrl(e);return ed(this.currentUrlTree,a,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const a=e[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new he(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,a,d){var f,_;if(this.disposed)return Promise.resolve(!1);const w=this.getTransition(),T=A_(r)&&w&&!A_(w.source),V=(this.lastSuccessfulId===w.id||this.currentNavigation?w.rawUrl:w.urlAfterRedirects).toString()===e.toString();if(T&&V)return Promise.resolve(!0);let Y,ue,De;d?(Y=d.resolve,ue=d.reject,De=d.promise):De=new Promise((it,at)=>{Y=it,ue=at});const rt=++this.navigationId;let Je;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Je=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):Je=0,this.setTransition({id:rt,targetPageId:Je,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:Y,reject:ue,promise:De,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),De.catch(it=>Promise.reject(it))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(e,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Oe(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.DyG),l.LFG(Op),l.LFG(xu),l.LFG(mt),l.LFG(l.zs3),l.LFG(l.v3s),l.LFG(l.Sil),l.LFG(void 0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function A_(n){return"imperative"!==n}let zp=(()=>{class n{constructor(e,r,i,a,d){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.name=a||Lt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new M_(e,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(xu),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class M_{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Su?this.route:t===xu?this.childContexts:this.parent.get(t,e)}}class N0{}class M0{preload(t,e){return(0,ct.of)(null)}}let R_=(()=>{class n{constructor(e,r,i,a,d){this.router=e,this.injector=a,this.preloadingStrategy=d,this.loader=new I_(r,i,w=>e.triggerEvent(new Sr(w)),w=>e.triggerEvent(new Il(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Qn(e=>e instanceof he),Qc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(l.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const d=a._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(e,a)):a.children&&i.push(this.processRoutes(e,a.children));return(0,Xt.D)(i).pipe((0,hs.J)(),(0,pt.U)(a=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ct.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Pr.zg)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(gs),l.LFG(l.v3s),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(N0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),fd=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof se?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof he&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ta&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new ta(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(gs),l.LFG(Nc),l.LFG(void 0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ru=new l.OlP("ROUTER_CONFIGURATION"),kE=new l.OlP("ROUTER_FORROOT_GUARD"),PE=[mt,{provide:Op,useClass:Eu},{provide:gs,useFactory:function(n,t,e,r,i,a,d,f={},_,w){const T=new gs(null,n,t,e,r,i,a,a_(d));return _&&(T.urlHandlingStrategy=_),w&&(T.routeReuseStrategy=w),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,T),f.enableTracing&&T.events.subscribe(S=>{var M,V;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(V=console.groupEnd)||void 0===V||V.call(console)}),T},deps:[Op,xu,mt,l.zs3,l.v3s,l.Sil,T_,Ru,[class{},new l.FiY],[class{},new l.FiY]]},xu,{provide:Su,useFactory:function(n){return n.routerState.root},deps:[gs]},{provide:l.v3s,useClass:l.EAV},R_,M0,class{preload(t,e){return e().pipe(Ao(()=>(0,ct.of)(null)))}},{provide:Ru,useValue:{enableTracing:!1}}];function R0(){return new l.PXZ("Router",gs)}let k0=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[PE,P0(e),{provide:kE,useFactory:cN,deps:[[gs,new l.FiY,new l.tp0]]},{provide:Ru,useValue:r||{}},{provide:Ve,useFactory:OE,deps:[ee,[new l.tBr(fe),new l.FiY],Ru]},{provide:fd,useFactory:FO,deps:[gs,Nc,Ru]},{provide:N0,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:M0},{provide:l.PXZ,multi:!0,useFactory:R0},[O0,{provide:l.ip1,multi:!0,useFactory:FE,deps:[O0]},{provide:LE,useFactory:fN,deps:[O0]},{provide:l.tb,multi:!0,useExisting:LE}]]}}static forChild(e){return{ngModule:n,providers:[P0(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(kE,8),l.LFG(gs,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function FO(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new fd(n,t,e)}function OE(n,t,e={}){return e.useHash?new Ye(n,t):new ke(n,t)}function cN(n){return"guarded"}function P0(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:T_,multi:!0,useValue:n}]}let O0=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new En.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(gs),d=this.injector.get(Ru);return"disabled"===d.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?(0,ct.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(Ru),i=this.injector.get(R_),a=this.injector.get(fd),d=this.injector.get(gs),f=this.injector.get(l.z2F);e===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),a.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function FE(n){return n.appInitializer.bind(n)}function fN(n){return n.bootstrapListener.bind(n)}const LE=new l.OlP("Router Initializer"),VE=[];let gN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[k0.forRoot(VE)],k0]}),n})();var ve=B(8239),k_=B(8873),$t=B(4292),ku=B(3637),P_=B(6561);function ua(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}var Gh=B(6682),BE=B(8819);function pd(n,t){return e=>e.lift(new Pl(n,t))}class Pl{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new F0(t,this.compare,this.keySelector))}}class F0 extends or.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function Yp(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new L0(n,e))}}class L0{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new VO(t,this.observables,this.project))}}class VO extends Th{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let a=0;a<i;a++)this.toRespond.push(a);for(let a=0;a<i;a++)this.add(Kn(this,e[a],void 0,a))}notifyNext(t,e,r){this.values[r]=e;const i=this.toRespond;if(i.length>0){const a=i.indexOf(r);-1!==a&&i.splice(a,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class BO{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Ol(t,this.predicate))}}class Ol extends or.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var wn=B(8971),Fr=B(8939),HE=(B(4828),B(3394)),ca=B(3910),Ki=B(8026),F=B(3854),da=B(5422);const mN="@firebase/database";let F_="";function jE(n){F_=n}class B0{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,F.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,F.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class UO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,F.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const _N=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new B0(t)}}catch(t){}return new UO},qh=_N("localStorage"),GE=_N("sessionStorage"),Kp=new da.Yd("@firebase/database"),yN=function(){let n=1;return function(){return n++}}(),vN=function(n){const t=(0,F.dS)(n),e=new F.gQ;e.update(t);const r=e.digest();return F.US.encodeByteArray(r)},L_=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=L_.apply(null,r):t+="object"==typeof r?(0,F.Pz)(r):r,t+=" "}return t};let Wh=null,bN=!0;const wN=function(n,t){(0,F.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Kp.logLevel=da.in.VERBOSE,Wh=Kp.log.bind(Kp),t&&GE.set("logging_enabled",!0)):"function"==typeof n?Wh=n:(Wh=null,GE.remove("logging_enabled"))},ur=function(...n){if(!0===bN&&(bN=!1,null===Wh&&!0===GE.get("logging_enabled")&&wN(!0)),Wh){const t=L_.apply(null,n);Wh(t)}},gd=function(n){return function(...t){ur(n,...t)}},U0=function(...n){const t="FIREBASE INTERNAL ERROR: "+L_(...n);Kp.error(t)},ha=function(...n){const t=`FIREBASE FATAL ERROR: ${L_(...n)}`;throw Kp.error(t),new Error(t)},Oi=function(...n){const t="FIREBASE WARNING: "+L_(...n);Kp.warn(t)},Zh=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Qi="[MIN_NAME]",fa="[MAX_NAME]",md=function(n,t){if(n===t)return 0;if(n===Qi||t===fa)return-1;if(t===Qi||n===fa)return 1;{const e=V_(n),r=V_(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},$O=function(n,t){return n===t?0:n<t?-1:1},_d=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(t))},$0=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,F.Pz)(t[r]),e+=":",e+=$0(n[t[r]]);return e+="}",e},H0=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function bi(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const WE=function(n){(0,F.hu)(!Zh(n),"Invalid JSON number");const r=1023;let i,a,d,f,_;0===n?(a=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,d=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(d%2?1:0),d=Math.floor(d/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const T=w.join("");let S="";for(_=0;_<64;_+=8){let M=parseInt(T.substr(_,8),2).toString(16);1===M.length&&(M="0"+M),S+=M}return S.toLowerCase()},Yh=new RegExp("^-?(0*)\\d{1,10}$"),Kh=-2147483648,Pu=2147483647,V_=function(n){if(Yh.test(n)){const t=Number(n);if(t>=Kh&&t<=Pu)return t}return null},yd=function(n){try{n()}catch(t){setTimeout(()=>{throw Oi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},vd=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class G0{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Oi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zE{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(ur("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oi(t)}}let Ou=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const YE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fs="websocket",KE="long_polling";class K0{constructor(t,e,r,i,a=!1,d="",f=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qh.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&qh.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function TN(n,t,e){let r;if((0,F.hu)("string"==typeof t,"typeof type must == string"),(0,F.hu)("object"==typeof e,"typeof params must == object"),t===Fs)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==KE)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return bi(e,(a,d)=>{i.push(a+"="+d)}),r+i.join("&")}class QE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,F.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,F.p$)(this.counters_)}}const JE={},Q0={};function Jp(n){const t=n.toString();return JE[t]||(JE[t]=new QE),JE[t]}class IN{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&yd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Qh{constructor(t,e,r,i,a,d,f){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=gd(t),this.stats_=Jp(e),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),TN(e,KE,_))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new IN(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new eb((...a)=>{const[d,f,_,w,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=_;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[d,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&YE.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qh.forceAllow_=!0}static forceDisallow(){Qh.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Qh.forceAllow_&&(Qh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,F.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,F.h$)(e),i=H0(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,F.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class eb{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=yN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=eb.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){ur("frame writing exception"),f.stack&&ur(f.stack),ur(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||ur("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,F.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{ur("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Xp=null;"undefined"!=typeof MozWebSocket?Xp=MozWebSocket:"undefined"!=typeof WebSocket&&(Xp=WebSocket);let Fu=(()=>{class n{constructor(e,r,i,a,d,f,_){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=gd(this.connId),this.stats_=Jp(r),this.connURL=n.connectionURL_(r,f,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,a){const d={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&YE.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),TN(e,Fs,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qh.set("previous_websocket_failure",!0);try{if((0,F.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${F_}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(a.proxy={origin:f}),this.mySock=new Xp(this.connURL,[],a)}else this.mySock=new Xp(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==Xp&&!n.forceDisallow_}static previouslyFailed(){return qh.isInMemoryStorage||!0===qh.get("previous_websocket_failure")}markConnectionHealthy(){qh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,F.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,F.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=H0(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class eg{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Qh,Fu]}initTransports_(t){const e=Fu&&Fu.isAvailable();let r=e&&!Fu.previouslyFailed();if(t.webSocketOnly&&(e||Oi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Fu];else{const i=this.transports_=[];for(const a of eg.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Xa{constructor(t,e,r,i,a,d,f,_,w,T){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=gd("c:"+this.id+":"),this.transportManager_=new eg(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=vd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=_d("t",t),r=_d("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=_d("t",t),r=_d("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=_d("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?U0("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):U0("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&Oi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),vd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class tg{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class hD{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,F.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let a=0;a<i.length;a++)if(i[a].callback===e&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(t){(0,F.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class U_ extends hD{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new U_}getInitialEvent(t){return(0,F.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function mn(){return new Pn("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Lu(n){return n.pieces_.length-n.pieceNum_}function jn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Pn(n.pieces_,t)}function $_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Jh(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function fD(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Pn(t,0)}function rr(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Pn)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Pn(e,0)}function an(n){return n.pieceNum_>=n.pieces_.length}function ms(n,t){const e=Wt(n),r=Wt(t);if(null===e)return t;if(e===r)return ms(jn(n),jn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function pD(n,t){const e=Jh(n,0),r=Jh(t,0);for(let i=0;i<e.length&&i<r.length;i++){const a=md(e[i],r[i]);if(0!==a)return a}return e.length===r.length?0:e.length<r.length?-1:1}function Vu(n,t){if(Lu(n)!==Lu(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function Js(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(Lu(n)>Lu(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class LN{constructor(t,e){this.errorPrefix_=e,this.parts_=Jh(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);gD(this)}}function gD(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+wd(n))}function wd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class cb extends hD{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new cb}getInitialEvent(t){return(0,F.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const ng=1e3;let H_,Fl=(()=>{class n extends tg{constructor(e,r,i,a,d,f,_,w){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=gd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ng,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");cb.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&U_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const a=++this.requestNumber_,d={r:a,a:e,b:r};this.log_((0,F.Pz)(d)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const r=new F.BH,i={p:e._path.toString(),q:e._queryObject},a={action:"g",request:i,onComplete:f=>{const _=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||a!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(e,r,i,a){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:e,tag:i};this.listens.get(f).set(d,_),this.connected_&&this.sendListen_(_)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const d={p:i};e.tag&&(d.q=r._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest("q",d,_=>{const w=_.d,T=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(i,a),e.onComplete&&e.onComplete(T,w))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,F.r3)(e,"w")){const i=(0,F.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Oi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,F.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,F.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const d=a.s,f=a.d||"error";this.authToken_===e&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,F.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,r)}sendUnlisten_(e,r,i,a){this.log_("Unlisten on "+e+" for "+r);const d={p:e};a&&(d.q=i,d.t=a),this.sendRequest("n",d)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,a){const d={p:r,d:i};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(e,r,i,a){this.putInternal("p",e,r,i,a)}merge(e,r,i,a){this.putInternal("m",e,r,i,a)}putInternal(e,r,i,a,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(d.s,d.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,F.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):U0("Unrecognized action received from server: "+(0,F.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ng,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ng,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ng),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,ve.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),a=e.onRealtimeDisconnect_.bind(e),d=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let _=!1,w=null;const T=function(){w?w.close():(_=!0,a())};e.realtime_={close:T,sendRequest:function(V){(0,F.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(V)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[V,Y]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);_?ur("getToken() completed but was canceled"):(ur("getToken() completed. Creating connection."),e.authToken_=V&&V.accessToken,e.appCheckToken_=Y&&Y.token,w=new Xa(d,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,a,ue=>{Oi(ue+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch(V){e.log_("Failed to get token: "+V),_||(e.repoInfo_.nodeAdmin&&Oi(V),T())}}})()}interrupt(e){ur("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ur("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ng,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(d=>$0(d)).join("$"):"default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,r){const i=new Pn(e).toString();let a;if(this.listens.has(i)){const d=this.listens.get(i);a=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,r){ur("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){ur("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+F_.replace(/\./g,"-")]=1,(0,F.uI)()?e["framework.cordova"]=1:(0,F.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=U_.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new nn(t,e)}}class fb{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new nn(Qi,t),i=new nn(Qi,e);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class mD extends fb{static get __EMPTY_NODE(){return H_}static set __EMPTY_NODE(t){H_=t}compare(t,e){return md(t.name,e.name)}isDefinedOn(t){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return nn.MIN}maxPost(){return new nn(fa,H_)}makePost(t,e){return(0,F.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new nn(t,H_)}toString(){return".key"}}const pa=new mD;class rg{constructor(t,e,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=e?r(t.key,e):1,i&&(d*=-1),d<0)t=this.isReverse_?t.left:t.right;else{if(0===d){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let ig,Mo=(()=>{class n{constructor(e,r,i,a,d){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:Ls.EMPTY_NODE,this.right=null!=d?d:Ls.EMPTY_NODE}copy(e,r,i,a,d){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let a=this;const d=i(e,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(e,r,i),null):0===d?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ls.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,a;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return Ls.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ls{constructor(t,e=Ls.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ls(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Mo.BLACK,null,null))}remove(t){return new Ls(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Mo.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new rg(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new rg(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new rg(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new rg(this.root_,null,this.comparator_,!0,t)}}function UN(n,t){return md(n.name,t.name)}function Cd(n,t){return md(n,t)}Ls.EMPTY_NODE=new class{copy(t,e,r,i,a){return this}insert(t,e,r){return new Mo(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pb=function(n){return"number"==typeof n?"number:"+WE(n):"string:"+n},gb=function(n){if(n.isLeafNode()){const t=n.val();(0,F.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,F.r3)(t,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===ig||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===ig||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mb,vD,bD,ef=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gb(this.priorityNode_)}static set __childrenNodeConstructor(e){mb=e}static get __childrenNodeConstructor(){return mb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return an(e)?this:".priority"===Wt(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=Wt(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,F.hu)(".priority"!==i||1===Lu(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(jn(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+pb(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?WE(this.value_):this.value_,this.lazyHash_=vN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,F.hu)(a>=0,"Unknown leaf type: "+r),(0,F.hu)(d>=0,"Unknown leaf type: "+i),a===d?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class extends fb{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),a=r.compareTo(i);return 0===a?md(t.name,e.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(fa,new ef("[PRIORITY-POST]",bD))}makePost(t,e){const r=vD(t);return new nn(e,new ef("[PRIORITY-POST]",r))}toString(){return".priority"}},HN=Math.log(2);class jN{constructor(t){this.count=parseInt(Math.log(t+1)/HN,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const _b=function(n,t,e,r){n.sort(t);const i=function(_,w){const T=w-_;let S,M;if(0===T)return null;if(1===T)return S=n[_],M=e?e(S):S,new Mo(M,S.node,Mo.BLACK,null,null);{const V=parseInt(T/2,10)+_,Y=i(_,V),ue=i(V+1,w);return S=n[V],M=e?e(S):S,new Mo(M,S.node,Mo.BLACK,Y,ue)}},f=function(_){let w=null,T=null,S=n.length;const M=function(Y,ue){const De=S-Y,rt=S;S-=Y;const Je=i(De+1,rt),it=n[De],at=e?e(it):it;V(new Mo(at,it.node,ue,null,Je))},V=function(Y){w?(w.left=Y,w=Y):(T=Y,w=Y)};for(let Y=0;Y<_.count;++Y){const ue=_.nextBitIsOne(),De=Math.pow(2,_.count-(Y+1));ue?M(De,Mo.BLACK):(M(De,Mo.BLACK),M(De,Mo.RED))}return T}(new jN(n.length));return new Ls(r||t,f)};let CD;const Bu={};class Ll{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,F.hu)(Bu&&Xn,"ChildrenNode.ts has not been loaded"),CD=CD||new Ll({".priority":Bu},{".priority":Xn}),CD}get(t){const e=(0,F.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ls?e:null}hasIndex(t){return(0,F.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,F.hu)(t!==pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=e.getIterator(nn.Wrap);let f,d=a.getNext();for(;d;)i=i||t.isDefinedOn(d.node),r.push(d),d=a.getNext();f=i?_b(r,t.getCompare()):Bu;const _=t.toString(),w=Object.assign({},this.indexSet_);w[_]=t;const T=Object.assign({},this.indexes_);return T[_]=f,new Ll(T,w)}addToIndexes(t,e){const r=(0,F.UI)(this.indexes_,(i,a)=>{const d=(0,F.DV)(this.indexSet_,a);if((0,F.hu)(d,"Missing index implementation for "+a),i===Bu){if(d.isDefinedOn(t.node)){const f=[],_=e.getIterator(nn.Wrap);let w=_.getNext();for(;w;)w.name!==t.name&&f.push(w),w=_.getNext();return f.push(t),_b(f,d.getCompare())}return Bu}{const f=e.get(t.name);let _=i;return f&&(_=_.remove(new nn(t.name,f))),_.insert(t,t.node)}});return new Ll(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,F.UI)(this.indexes_,i=>{if(i===Bu)return i;{const a=e.get(t.name);return a?i.remove(new nn(t.name,a)):i}});return new Ll(r,this.indexSet_)}}let tf,qt=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gb(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tf||(tf=new n(new Ls(Cd),null,Ll.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tf}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?tf:r}}getChild(e){const r=Wt(e);return null===r?this:this.getImmediateChild(r).getChild(jn(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new nn(e,r);let a,d;r.isEmpty()?(a=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?tf:this.priorityNode_;return new n(a,f,d)}}updateChild(e,r){const i=Wt(e);if(null===i)return r;{(0,F.hu)(".priority"!==Wt(e)||1===Lu(e),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(jn(e),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,a=0,d=!0;if(this.forEachChild(Xn,(f,_)=>{r[f]=_.val(e),i++,d&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):d=!1}),!e&&d&&a<2*i){const f=[];for(const _ in r)f[_]=r[_];return f}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+pb(this.getPriority().val())+":"),this.forEachChild(Xn,(r,i)=>{const a=i.hash();""!==a&&(e+=":"+r+":"+a)}),this.lazyHash_=""===e?"":vN(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const a=this.resolveIndex_(i);if(a){const d=a.getPredecessorKey(new nn(e,r));return d?d.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new nn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new nn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,nn.Wrap);let d=a.peek();for(;null!=d&&r.compare(d,e)<0;)a.getNext(),d=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,nn.Wrap);let d=a.peek();for(;null!=d&&r.compare(d,e)>0;)a.getNext(),d=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===_s?-1:0}withIndex(e){if(e===pa||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===pa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Xn),a=r.getIterator(Xn);let d=i.getNext(),f=a.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=a.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(e){return e===pa?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const _s=new class extends qt{constructor(){super(new Ls(Cd),qt.EMPTY_NODE,Ll.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return qt.EMPTY_NODE}isEmpty(){return!1}};function Lr(n,t=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,F.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ef(n,Lr(t));if(n instanceof Array){let e=qt.EMPTY_NODE;return bi(n,(r,i)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const a=Lr(i);(a.isLeafNode()||!a.isEmpty())&&(e=e.updateImmediateChild(r,a))}}),e.updatePriority(Lr(t))}{const e=[];let r=!1;if(bi(n,(d,f)=>{if("."!==d.substring(0,1)){const _=Lr(f);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),e.push(new nn(d,_)))}}),0===e.length)return qt.EMPTY_NODE;const a=_b(e,UN,d=>d.name,Cd);if(r){const d=_b(e,Xn.getCompare());return new qt(a,Lr(t),new Ll({".priority":d},{".priority":Xn}))}return new qt(a,Lr(t),Ll.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(Qi,qt.EMPTY_NODE)},MAX:{value:new nn(fa,_s)}}),mD.__EMPTY_NODE=qt.EMPTY_NODE,ef.__childrenNodeConstructor=qt,ig=_s,bD=_s,function(n){vD=n}(Lr);class ED extends fb{constructor(t){super(),this.indexPath_=t,(0,F.hu)(!an(t)&&".priority"!==Wt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),a=r.compareTo(i);return 0===a?md(t.name,e.name):a}makePost(t,e){const r=Lr(t),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(e,i)}maxPost(){const t=qt.EMPTY_NODE.updateChild(this.indexPath_,_s);return new nn(fa,t)}toString(){return Jh(this.indexPath_,0).join("/")}}const j_=new class extends fb{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?md(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(t,e){const r=Lr(t);return new nn(e,r)}toString(){return".value"}},Ed="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bb=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Ed.charAt(e%64),e=Math.floor(e/64);(0,F.hu)(0===e,"Cannot push at time == 0");let d=a.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=Ed.charAt(t[i]);return(0,F.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),TD=function(n){if(n===""+Pu)return"-";const t=V_(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let d=0;d<e.length;d++)e[d]=n.charAt(d);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return fa;const a=Ed.charAt(Ed.indexOf(e[r])+1);return e[r]=a,e.slice(0,r+1).join("")},G_=function(n){if(n===""+Kh)return Qi;const t=V_(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+Pu:(delete e[e.length-1],e.join("")):(e[e.length-1]=Ed.charAt(Ed.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function ID(n){return{type:"value",snapshotNode:n}}function nf(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function sg(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function og(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class wb{constructor(t){this.index_=t}updateChild(t,e,r,i,a,d){(0,F.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?t.hasChild(e)?d.trackChildChange(sg(e,f)):(0,F.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(nf(e,r)):d.trackChildChange(og(e,r,f))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(Xn,(i,a)=>{e.hasChild(i)||r.trackChildChange(sg(i,a))}),e.isLeafNode()||e.forEachChild(Xn,(i,a)=>{if(t.hasChild(i)){const d=t.getImmediateChild(i);d.equals(a)||r.trackChildChange(og(i,a,d))}else r.trackChildChange(nf(i,a))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?qt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Uu{constructor(t){this.indexedFilter_=new wb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Uu.getStartPost_(t),this.endPost_=Uu.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,a,d){return this.matches(new nn(e,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,a,d)}updateFullNode(t,e,r){e.isLeafNode()&&(e=qt.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const a=this;return e.forEachChild(Xn,(d,f)=>{a.matches(new nn(d,f))||(i=i.updateImmediateChild(d,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class rf{constructor(t){this.rangedFilter_=new Uu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,a,d){return this.rangedFilter_.matches(new nn(e,r))||(r=qt.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,a,d):this.fullLimitUpdateChild_(t,e,r,a,d)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let a;i=qt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;a.hasNext()&&d<this.limit_;){const f=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let a,d,f,_;if(i=e.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(M,V)=>S(V,M)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let w=0,T=!1;for(;_.hasNext();){const S=_.getNext();!T&&f(a,S)<=0&&(T=!0),T&&w<this.limit_&&f(S,d)<=0?w++:i=i.updateImmediateChild(S.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,a){let d;if(this.reverse_){const S=this.index_.getCompare();d=(M,V)=>S(V,M)}else d=this.index_.getCompare();const f=t;(0,F.hu)(f.numChildren()===this.limit_,"");const _=new nn(e,r),w=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(f.hasChild(e)){const S=f.getImmediateChild(e);let M=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=M&&(M.name===e||f.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const V=null==M?1:d(M,_);if(T&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(og(e,r,S)),f.updateImmediateChild(e,r);{null!=a&&a.trackChildChange(sg(e,S));const ue=f.updateImmediateChild(e,qt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=a&&a.trackChildChange(nf(M.name,M.node)),ue.updateImmediateChild(M.name,M.node)):ue}}return r.isEmpty()?t:T&&d(w,_)>=0?(null!=a&&(a.trackChildChange(sg(w.name,w.node)),a.trackChildChange(nf(e,r))),f.updateImmediateChild(e,r).updateImmediateChild(w.name,qt.EMPTY_NODE)):t}}class ag{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qi}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const t=new ag;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Cb(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ro(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function di(n,t){const e=n.copy();return e.index_=t,e}function $u(n){const t={};if(n.isDefault())return t;let e;return n.index_===Xn?e="$priority":n.index_===j_?e="$value":n.index_===pa?e="$key":((0,F.hu)(n.index_ instanceof ED,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,F.Pz)(e),n.startSet_&&(t.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function cg(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Xn&&(t.i=n.index_.toString()),t}class ys extends tg{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=gd("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,F.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const d=ys.getListenId_(t,r),f={};this.listens_[d]=f;const _=$u(t._queryParams);this.restRequest_(a+".json",_,(w,T)=>{let S=T;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,F.DV)(this.listens_,d)===f){let M;M=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(M,null)}})}unlisten(t,e){const r=ys.getListenId_(t,e);delete this.listens_[r]}get(t){const e=$u(t._queryParams),r=t._path.toString(),i=new F.BH;return this.restRequest_(r+".json",e,(a,d)=>{let f=d;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(e.auth=i.accessToken),a&&a.token&&(e.ac=a.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,F.xO)(e);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let _=null;if(f.status>=200&&f.status<300){try{_=(0,F.cI)(f.responseText)}catch(w){Oi("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,_)}else 401!==f.status&&404!==f.status&&Oi("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class Db{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Vl(){return{value:null,children:new Map}}function ma(n,t,e){if(an(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=Wt(t);n.children.has(r)||n.children.set(r,Vl()),ma(n.children.get(r),t=jn(t),e)}}function Hu(n,t){if(an(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Xn,(r,i)=>{ma(n,new Pn(r),i)}),Hu(n,t)}}if(n.children.size>0){const e=Wt(t);return t=jn(t),n.children.has(e)&&Hu(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function ju(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{ju(i,new Pn(t.toString()+"/"+r),e)})}class af{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&bi(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class SD{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new af(t);const r=1e4+2e4*Math.random();vd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;bi(t,(i,a)=>{a>0&&(0,F.r3)(this.statsToReport_,i)&&(e[i]=a,r=!0)}),r&&this.server_.reportStats(e),vd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xs=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Xs||(Xs={})),Xs))();function Z_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class dg{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Xs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(an(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Pn(t));return new dg(mn(),e,this.revert)}}return(0,F.hu)(Wt(this.path)===t,"operationForChild called for unrelated child."),new dg(jn(this.path),this.affectedTree,this.revert)}}class cf{constructor(t,e){this.source=t,this.path=e,this.type=Xs.LISTEN_COMPLETE}operationForChild(t){return an(this.path)?new cf(this.source,mn()):new cf(this.source,jn(this.path))}}class Gu{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Xs.OVERWRITE}operationForChild(t){return an(this.path)?new Gu(this.source,mn(),this.snap.getImmediateChild(t)):new Gu(this.source,jn(this.path),this.snap)}}class Td{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Xs.MERGE}operationForChild(t){if(an(this.path)){const e=this.children.subtree(new Pn(t));return e.isEmpty()?null:e.value?new Gu(this.source,mn(),e.value):new Td(this.source,mn(),e)}return(0,F.hu)(Wt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Td(this.source,jn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class qu{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(an(t))return this.isFullyInitialized()&&!this.filtered_;const e=Wt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class AD{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function df(n,t,e,r,i,a){const d=r.filter(f=>f.type===e);d.sort((f,_)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new nn(t.childName,t.snapshotNode),i=new nn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,f,_)),d.forEach(f=>{const _=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,a);i.forEach(w=>{w.respondsTo(f.type)&&t.push(w.createEvent(_,n.query_))})})}function Tb(n,t){return{eventCache:n,serverCache:t}}function hg(n,t,e,r){return Tb(new qu(t,e,r),n.serverCache)}function Ib(n,t,e,r){return Tb(n.eventCache,new qu(t,e,r))}function z_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Sb;class cr{constructor(t,e=(()=>(Sb||(Sb=new Ls($O)),Sb))()){this.value=t,this.children=e}static fromObject(t){let e=new cr(null);return bi(t,(r,i)=>{e=e.set(new Pn(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:mn(),value:this.value};if(an(t))return null;{const r=Wt(t),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(jn(t),e);return null!=a?{path:rr(new Pn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(an(t))return this;{const e=Wt(t),r=this.children.get(e);return null!==r?r.subtree(jn(t)):new cr(null)}}set(t,e){if(an(t))return new cr(e,this.children);{const r=Wt(t),a=(this.children.get(r)||new cr(null)).set(jn(t),e),d=this.children.insert(r,a);return new cr(this.value,d)}}remove(t){if(an(t))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const e=Wt(t),r=this.children.get(e);if(r){const i=r.remove(jn(t));let a;return a=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&a.isEmpty()?new cr(null):new cr(this.value,a)}return this}}get(t){if(an(t))return this.value;{const e=Wt(t),r=this.children.get(e);return r?r.get(jn(t)):null}}setTree(t,e){if(an(t))return e;{const r=Wt(t),a=(this.children.get(r)||new cr(null)).setTree(jn(t),e);let d;return d=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new cr(this.value,d)}}fold(t){return this.fold_(mn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(rr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,mn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(an(t))return null;{const a=Wt(t),d=this.children.get(a);return d?d.findOnPath_(jn(t),rr(e,a),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,mn(),e)}foreachOnPath_(t,e,r){if(an(t))return this;{this.value&&r(e,this.value);const i=Wt(t),a=this.children.get(i);return a?a.foreachOnPath_(jn(t),rr(e,i),r):new cr(null)}}foreach(t){this.foreach_(mn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(rr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class _a{constructor(t){this.writeTree_=t}static empty(){return new _a(new cr(null))}}function hf(n,t,e){if(an(t))return new _a(new cr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let a=r.value;const d=ms(i,t);return a=a.updateChild(d,e),new _a(n.writeTree_.set(i,a))}{const i=new cr(e),a=n.writeTree_.setTree(t,i);return new _a(a)}}}function xD(n,t,e){let r=n;return bi(e,(i,a)=>{r=hf(r,rr(t,i),a)}),r}function KN(n,t){if(an(t))return _a.empty();{const e=n.writeTree_.setTree(t,new cr(null));return new _a(e)}}function MD(n,t){return null!=Id(n,t)}function Id(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(ms(e.path,t)):null}function QN(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Xn,(r,i)=>{t.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new nn(r,i.value))}),t}function Zu(n,t){if(an(t))return n;{const e=Id(n,t);return new _a(null!=e?new cr(e):n.writeTree_.subtree(t))}}function Ab(n){return n.writeTree_.isEmpty()}function zu(n,t){return Y_(mn(),n.writeTree_,t)}function Y_(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,a)=>{".priority"===i?((0,F.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):e=Y_(rr(n,i),a,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(rr(n,".priority"),r)),e}}function K_(n,t){return xb(t,n)}function RD(n,t){if(n.snap)return Js(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Js(rr(n.path,e),t))return!0;return!1}function XN(n){return n.visible}function Sd(n,t,e){let r=_a.empty();for(let i=0;i<n.length;++i){const a=n[i];if(t(a)){const d=a.path;let f;if(a.snap)Js(e,d)?(f=ms(e,d),r=hf(r,f,a.snap)):Js(d,e)&&(f=ms(d,e),r=hf(r,mn(),a.snap.getChild(f)));else{if(!a.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Js(e,d))f=ms(e,d),r=xD(r,f,a.children);else if(Js(d,e))if(f=ms(d,e),an(f))r=xD(r,mn(),a.children);else{const _=(0,F.DV)(a.children,Wt(f));if(_){const w=_.getChild(jn(f));r=hf(r,mn(),w)}}}}}return r}function kD(n,t,e,r,i){if(r||i){const a=Zu(n.visibleWrites,t);return!i&&Ab(a)?e:i||null!=e||MD(a,mn())?zu(Sd(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Js(w.path,t)||Js(t,w.path))},t),e||qt.EMPTY_NODE):null}{const a=Id(n.visibleWrites,t);if(null!=a)return a;{const d=Zu(n.visibleWrites,t);return Ab(d)?e:null!=e||MD(d,mn())?zu(d,e||qt.EMPTY_NODE):null}}}function J_(n,t,e,r){return kD(n.writeTree,n.treePath,t,e,r)}function Nb(n,t){return function(n,t,e){let r=qt.EMPTY_NODE;const i=Id(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Xn,(a,d)=>{r=r.updateImmediateChild(a,d)}),r;if(e){const a=Zu(n.visibleWrites,t);return e.forEachChild(Xn,(d,f)=>{const _=zu(Zu(a,new Pn(d)),f);r=r.updateImmediateChild(d,_)}),QN(a).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return QN(Zu(n.visibleWrites,t)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,t)}function LD(n,t,e,r){return function(n,t,e,r,i){(0,F.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=rr(t,e);if(MD(n.visibleWrites,a))return null;{const d=Zu(n.visibleWrites,a);return Ab(d)?i.getChild(e):zu(d,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function X_(n,t){return function(n,t){return Id(n.visibleWrites,t)}(n.writeTree,rr(n.treePath,t))}function ey(n,t,e){return function(n,t,e,r){const i=rr(t,e),a=Id(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(e)?zu(Zu(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function VD(n,t){return xb(rr(n.treePath,t),n.writeTree)}function xb(n,t){return{treePath:n,writeTree:t}}class BD{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,F.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===e&&"child_removed"===a)this.changeMap.set(r,og(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===a)this.changeMap.set(r,sg(r,i.oldSnap));else if("child_changed"===e&&"child_added"===a)this.changeMap.set(r,nf(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==a)throw(0,F.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,og(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const rx=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class fg{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new qu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ey(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wu(this.viewCache_),a=function(n,t,e,r,i,a){return function(n,t,e,r,i,a,d){let f;const _=Zu(n.visibleWrites,t),w=Id(_,mn());if(null!=w)f=w;else{if(null==e)return[];f=zu(_,e)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const T=[],S=d.getCompare(),M=a?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let V=M.getNext();for(;V&&T.length<i;)0!==S(V,r)&&T.push(V),V=M.getNext();return T}}(n.writeTree,n.treePath,t,e,r,i,a)}(this.writes_,i,e,1,r,t);return 0===a.length?null:a[0]}}function ty(n,t,e,r,i,a){const d=t.eventCache;if(null!=X_(r,e))return t;{let f,_;if(an(e))if((0,F.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const w=Wu(t),S=Nb(r,w instanceof qt?w:qt.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),S,a)}else{const w=J_(r,Wu(t));f=n.filter.updateFullNode(t.eventCache.getNode(),w,a)}else{const w=Wt(e);if(".priority"===w){(0,F.hu)(1===Lu(e),"Can't have a priority with additional path components");const T=d.getNode();_=t.serverCache.getNode();const S=LD(r,e,T,_);f=null!=S?n.filter.updatePriority(T,S):d.getNode()}else{const T=jn(e);let S;if(d.isCompleteForChild(w)){_=t.serverCache.getNode();const M=LD(r,e,d.getNode(),_);S=null!=M?d.getNode().getImmediateChild(w).updateChild(T,M):d.getNode().getImmediateChild(w)}else S=ey(r,w,t.serverCache);f=null!=S?n.filter.updateChild(d.getNode(),w,S,T,i,a):d.getNode()}}return hg(t,f,d.isFullyInitialized()||an(e),n.filter.filtersNodes())}}function ff(n,t,e,r,i,a,d,f){const _=t.serverCache;let w;const T=d?n.filter:n.filter.getIndexedFilter();if(an(e))w=T.updateFullNode(_.getNode(),r,null);else if(T.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(e,r);w=T.updateFullNode(_.getNode(),V,null)}else{const V=Wt(e);if(!_.isCompleteForPath(e)&&Lu(e)>1)return t;const Y=jn(e),De=_.getNode().getImmediateChild(V).updateChild(Y,r);w=".priority"===V?T.updatePriority(_.getNode(),De):T.updateChild(_.getNode(),V,De,Y,rx,null)}const S=Ib(t,w,_.isFullyInitialized()||an(e),T.filtersNodes());return ty(n,S,e,i,new fg(i,S,a),f)}function Rb(n,t,e,r,i,a,d){const f=t.eventCache;let _,w;const T=new fg(i,t,a);if(an(e))w=n.filter.updateFullNode(t.eventCache.getNode(),r,d),_=hg(t,w,!0,n.filter.filtersNodes());else{const S=Wt(e);if(".priority"===S)w=n.filter.updatePriority(t.eventCache.getNode(),r),_=hg(t,w,f.isFullyInitialized(),f.isFiltered());else{const M=jn(e),V=f.getNode().getImmediateChild(S);let Y;if(an(M))Y=r;else{const ue=T.getCompleteChild(S);Y=null!=ue?".priority"===$_(M)&&ue.getChild(fD(M)).isEmpty()?ue:ue.updateChild(M,r):qt.EMPTY_NODE}_=V.equals(Y)?t:hg(t,n.filter.updateChild(f.getNode(),S,Y,M,T,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return _}function ny(n,t){return n.eventCache.isCompleteForChild(t)}function Pb(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function UD(n,t,e,r,i,a,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let w,_=t;w=an(e)?r:new cr(null).setTree(e,r);const T=t.serverCache.getNode();return w.children.inorderTraversal((S,M)=>{if(T.hasChild(S)){const Y=Pb(0,t.serverCache.getNode().getImmediateChild(S),M);_=ff(n,_,new Pn(S),Y,i,a,d,f)}}),w.children.inorderTraversal((S,M)=>{const V=!t.serverCache.isCompleteForChild(S)&&void 0===M.value;if(!T.hasChild(S)&&!V){const ue=Pb(0,t.serverCache.getNode().getImmediateChild(S),M);_=ff(n,_,new Pn(S),ue,i,a,d,f)}}),_}class ax{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new wb(r.getIndex()),a=function(n){return n.loadsAllData()?new wb(n.getIndex()):n.hasLimit()?new rf(n):new Uu(n)}(r);this.processor_=function(n){return{filter:n}}(a);const d=e.serverCache,f=e.eventCache,_=i.updateFullNode(qt.EMPTY_NODE,d.getNode(),null),w=a.updateFullNode(qt.EMPTY_NODE,f.getNode(),null),T=new qu(_,d.isFullyInitialized(),i.filtersNodes()),S=new qu(w,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Tb(S,T),this.eventGenerator_=new AD(this.query_)}get query(){return this.query_}}function HD(n,t){const e=Wu(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!an(t)&&!e.getImmediateChild(Wt(t)).isEmpty())?e.getChild(t):null}function ry(n){return 0===n.eventRegistrations_.length}function Bb(n,t,e){const r=[];if(e){(0,F.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const d=a.createCancelEvent(e,i);d&&r.push(d)})}if(t){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const d=n.eventRegistrations_[a];if(d.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function jD(n,t,e,r){t.type===Xs.MERGE&&null!==t.source.queryId&&((0,F.hu)(Wu(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(z_(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function(n,t,e,r,i){const a=new BD;let d,f;if(e.type===Xs.OVERWRITE){const w=e;w.source.fromUser?d=Rb(n,t,w.path,w.snap,r,i,a):((0,F.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||t.serverCache.isFiltered()&&!an(w.path),d=ff(n,t,w.path,w.snap,r,i,f,a))}else if(e.type===Xs.MERGE){const w=e;w.source.fromUser?d=function(n,t,e,r,i,a,d){let f=t;return r.foreach((_,w)=>{const T=rr(e,_);ny(t,Wt(T))&&(f=Rb(n,f,T,w,i,a,d))}),r.foreach((_,w)=>{const T=rr(e,_);ny(t,Wt(T))||(f=Rb(n,f,T,w,i,a,d))}),f}(n,t,w.path,w.children,r,i,a):((0,F.hu)(w.source.fromServer,"Unknown source."),f=w.source.tagged||t.serverCache.isFiltered(),d=UD(n,t,w.path,w.children,r,i,f,a))}else if(e.type===Xs.ACK_USER_WRITE){const w=e;d=w.revert?function(n,t,e,r,i,a){let d;if(null!=X_(r,e))return t;{const f=new fg(r,t,i),_=t.eventCache.getNode();let w;if(an(e)||".priority"===Wt(e)){let T;if(t.serverCache.isFullyInitialized())T=J_(r,Wu(t));else{const S=t.serverCache.getNode();(0,F.hu)(S instanceof qt,"serverChildren would be complete if leaf node"),T=Nb(r,S)}T=T,w=n.filter.updateFullNode(_,T,a)}else{const T=Wt(e);let S=ey(r,T,t.serverCache);null==S&&t.serverCache.isCompleteForChild(T)&&(S=_.getImmediateChild(T)),w=null!=S?n.filter.updateChild(_,T,S,jn(e),f,a):t.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,qt.EMPTY_NODE,jn(e),f,a):_,w.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=J_(r,Wu(t)),d.isLeafNode()&&(w=n.filter.updateFullNode(w,d,a)))}return d=t.serverCache.isFullyInitialized()||null!=X_(r,mn()),hg(t,w,d,n.filter.filtersNodes())}}(n,t,w.path,r,i,a):function(n,t,e,r,i,a,d){if(null!=X_(i,e))return t;const f=t.serverCache.isFiltered(),_=t.serverCache;if(null!=r.value){if(an(e)&&_.isFullyInitialized()||_.isCompleteForPath(e))return ff(n,t,e,_.getNode().getChild(e),i,a,f,d);if(an(e)){let w=new cr(null);return _.getNode().forEachChild(pa,(T,S)=>{w=w.set(new Pn(T),S)}),UD(n,t,e,w,i,a,f,d)}return t}{let w=new cr(null);return r.foreach((T,S)=>{const M=rr(e,T);_.isCompleteForPath(M)&&(w=w.set(T,_.getNode().getChild(M)))}),UD(n,t,e,w,i,a,f,d)}}(n,t,w.path,w.affectedTree,r,i,a)}else{if(e.type!==Xs.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+e.type);d=function(n,t,e,r,i){const a=t.serverCache;return ty(n,Ib(t,a.getNode(),a.isFullyInitialized()||an(e),a.isFiltered()),e,r,rx,i)}(n,t,e.path,r,a)}const _=a.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=z_(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&e.push(ID(z_(t)))}}(t,d,_),{viewCache:d,changes:_}}(n.processor_,i,t,e,r);return function(n,t){(0,F.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,F.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Ub(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Ub(n,t,e,r){return function(n,t,e,r){const i=[],a=[];return t.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&a.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(d.childName,d.snapshotNode))}),df(n,i,"child_removed",t,r,e),df(n,i,"child_added",t,r,e),df(n,i,"child_moved",a,r,e),df(n,i,"child_changed",t,r,e),df(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let pf,qb;class $b{constructor(){this.views=new Map}}function gg(n,t,e,r){const i=t.source.queryId;if(null!==i){const a=n.views.get(i);return(0,F.hu)(null!=a,"SyncTree gave us an op for an invalid query."),jD(a,t,e,r)}{let a=[];for(const d of n.views.values())a=a.concat(jD(d,t,e,r));return a}}function mg(n,t,e,r,i){const d=n.views.get(t._queryIdentifier);if(!d){let f=J_(e,i?r:null),_=!1;f?_=!0:r instanceof qt?(f=Nb(e,r),_=!1):(f=qt.EMPTY_NODE,_=!1);const w=Tb(new qu(f,_,!1),new qu(r,i,!1));return new ax(t,w)}return d}function Hb(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Bl(n,t){let e=null;for(const r of n.views.values())e=e||HD(r,t);return e}function jb(n,t){return t._queryParams.loadsAllData()?_g(n):n.views.get(t._queryIdentifier)}function Gb(n,t){return null!=jb(n,t)}function Ul(n){return null!=_g(n)}function _g(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let YD=1;class KD{constructor(t){this.listenProvider_=t,this.syncPointTree_=new cr(null),this.pendingWriteTree_={visibleWrites:_a.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qr(n,t,e,r,i){return function(n,t,e,r,i){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=hf(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?Ad(n,new Gu({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Yu(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,F.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,a=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=e&&RD(f,r.path)?i=!1:Js(r.path,f.path)&&(a=!0)),d--}return!!i&&(a?(function(n){n.visibleWrites=Sd(n.allWrites,XN,mn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=KN(n.visibleWrites,r.path):bi(r.children,_=>{n.visibleWrites=KN(n.visibleWrites,rr(r.path,_))}),!0))}(n.pendingWriteTree_,t)){let a=new cr(null);return null!=r.snap?a=a.set(mn(),!0):bi(r.children,d=>{a=a.set(new Pn(d),!0)}),Ad(n,new dg(r.path,a,e))}return[]}function yg(n,t,e){return Ad(n,new Gu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function iy(n,t,e,r){const i=t._path,a=n.syncPointTree_.get(i);let d=[];if(a&&("default"===t._queryIdentifier||Gb(a,t))){const f=function(n,t,e,r){const i=t._queryIdentifier,a=[];let d=[];const f=Ul(n);if("default"===i)for(const[_,w]of n.views.entries())d=d.concat(Bb(w,e,r)),ry(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(d=d.concat(Bb(_,e,r)),ry(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return f&&!Ul(n)&&a.push(new((0,F.hu)(pf,"Reference.ts has not been loaded"),pf)(t._repo,t._path)),{removed:a,events:d}}(a,t,e,r);(function(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=f.removed;d=f.events;const w=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(S,M)=>Ul(M));if(w&&!T){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const M=function(n){return n.fold((t,e,r)=>{if(e&&Ul(e))return[_g(e)];{let i=[];return e&&(i=Hb(e)),bi(r,(a,d)=>{i=i.concat(d)}),i}})}(S);for(let V=0;V<M.length;++V){const Y=M[V],ue=Y.query,De=oy(n,Y);n.listenProvider_.startListening(mf(ue),eo(n,ue),De.hashFn,De.onComplete)}}}if(!T&&_.length>0&&!r)if(w){const S=null;n.listenProvider_.stopListening(mf(t),S)}else _.forEach(S=>{const M=n.queryToTagMap.get(ay(S));n.listenProvider_.stopListening(mf(S),M)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=ay(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return d}function eT(n,t,e){const r=t._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,M)=>{const V=ms(S,r);i=i||Bl(M,V),a=a||Ul(M)});let f,d=n.syncPointTree_.get(r);d?(a=a||Ul(d),i=i||Bl(d,mn())):(d=new $b,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=qt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,V)=>{const Y=Bl(V,mn());Y&&(i=i.updateImmediateChild(M,Y))}));const _=Gb(d,t);if(!_&&!t._queryParams.loadsAllData()){const S=ay(t);(0,F.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const M=YD++;n.queryToTagMap.set(S,M),n.tagToQueryMap.set(M,S)}let T=function(n,t,e,r,i,a){const d=mg(n,t,r,i,a);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,d),function(n,t){n.eventRegistrations_.push(t)}(d,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Xn,(a,d)=>{r.push(nf(a,d))}),e.isFullyInitialized()&&r.push(ID(e.getNode())),Ub(n,r,e.getNode(),t)}(d,e)}(d,t,e,K_(n.pendingWriteTree_,r),i,f);if(!_&&!a){const S=jb(d,t);T=T.concat(function(n,t,e){const r=t._path,i=eo(n,t),a=oy(n,e),d=n.listenProvider_.startListening(mf(t),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,F.hu)(!Ul(f.value),"If we're adding a query, it shouldn't be shadowed");else{const _=f.fold((w,T,S)=>{if(!an(w)&&T&&Ul(T))return[_g(T).query];{let M=[];return T&&(M=M.concat(Hb(T).map(V=>V.query))),bi(S,(V,Y)=>{M=M.concat(Y)}),M}});for(let w=0;w<_.length;++w){const T=_[w];n.listenProvider_.stopListening(mf(T),eo(n,T))}}return d}(n,t,S))}return T}function vg(n,t,e){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(t,(d,f)=>{const w=Bl(f,ms(d,t));if(w)return w});return kD(i,t,a,e,!0)}function Ad(n,t){return px(t,n.syncPointTree_,null,K_(n.pendingWriteTree_,mn()))}function px(n,t,e,r){if(an(n.path))return sy(n,t,e,r);{const i=t.get(mn());null==e&&null!=i&&(e=Bl(i,mn()));let a=[];const d=Wt(n.path),f=n.operationForChild(d),_=t.children.get(d);if(_&&f){const w=e?e.getImmediateChild(d):null,T=VD(r,d);a=a.concat(px(f,_,w,T))}return i&&(a=a.concat(gg(i,n,r,e))),a}}function sy(n,t,e,r){const i=t.get(mn());null==e&&null!=i&&(e=Bl(i,mn()));let a=[];return t.children.inorderTraversal((d,f)=>{const _=e?e.getImmediateChild(d):null,w=VD(r,d),T=n.operationForChild(d);T&&(a=a.concat(sy(T,f,_,w)))}),i&&(a=a.concat(gg(i,n,r,e))),a}function oy(n,t){const e=t.query,r=eo(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=ly(n,e);if(r){const i=ko(r),a=i.path,d=i.queryId,f=ms(a,t);return to(n,a,new cf(Z_(d),f))}return[]}(n,e._path,r):function(n,t){return Ad(n,new cf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const a=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return iy(n,e,null,a)}}}}function eo(n,t){const e=ay(t);return n.queryToTagMap.get(e)}function ay(n){return n._path.toString()+"$"+n._queryIdentifier}function ly(n,t){return n.tagToQueryMap.get(t)}function ko(n){const t=n.indexOf("$");return(0,F.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Pn(n.substr(0,t))}}function to(n,t,e){const r=n.syncPointTree_.get(t);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),gg(r,e,K_(n.pendingWriteTree_,t),null)}function mf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(qb,"Reference.ts has not been loaded"),qb)(n._repo,n._path):n}class Wb{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Wb(e)}node(){return this.node_}}class Zb{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=rr(this.path_,t);return new Zb(this.syncTree_,e)}node(){return vg(this.syncTree_,this.path_)}}const _f=function(n,t,e){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?_x(n[".sv"],t,e):"object"==typeof n[".sv"]?nT(n[".sv"],t):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},_x=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+n)}},nT=function(n,t,e){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,F.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},rT=function(n,t,e,r){return cy(t,new Zb(e,n),r)},uy=function(n,t,e){return cy(n,new Wb(t),e)};function cy(n,t,e){const r=n.getPriority().val(),i=_f(r,t.getImmediateChild(".priority"),e);let a;if(n.isLeafNode()){const d=n,f=_f(d.getValue(),t,e);return f!==d.getValue()||i!==d.getPriority().val()?new ef(f,Lr(i)):n}{const d=n;return a=d,i!==d.getPriority().val()&&(a=a.updatePriority(new ef(i))),d.forEachChild(Xn,(f,_)=>{const w=cy(_,t.getImmediateChild(f),e);w!==_&&(a=a.updateImmediateChild(f,w))}),a}}class yf{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function dy(n,t){let e=t instanceof Pn?t:new Pn(t),r=n,i=Wt(e);for(;null!==i;){const a=(0,F.DV)(r.node.children,i)||{children:{},childCount:0};r=new yf(i,r,a),e=jn(e),i=Wt(e)}return r}function Ku(n){return n.node.value}function hy(n,t){n.node.value=t,gy(n)}function fy(n){return n.node.childCount>0}function vf(n,t){bi(n.node.children,(e,r)=>{t(new yf(e,n,r))})}function Yb(n,t,e,r){e&&!r&&t(n),vf(n,i=>{Yb(i,t,!0,r)}),e&&r&&t(n)}function bf(n){return new Pn(null===n.parent?n.name:bf(n.parent)+"/"+n.name)}function gy(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===Ku(n)&&!fy(n)}(e),i=(0,F.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,gy(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,gy(n))}(n.parent,n.name,n)}const oT=/[\[\].#$\/\u0000-\u001F\u007F]/,aT=/[\[\].#$\u0000-\u001F\u007F]/,Kb=10485760,my=function(n){return"string"==typeof n&&0!==n.length&&!oT.test(n)},lT=function(n){return"string"==typeof n&&0!==n.length&&!aT.test(n)},bg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Zh(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},tl=function(n,t,e,r){r&&void 0===t||wg((0,F.gK)(n,"value"),t,e)},wg=function(n,t,e){const r=e instanceof Pn?new LN(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+wd(r));if("function"==typeof t)throw new Error(n+"contains a function "+wd(r)+" with contents = "+t.toString());if(Zh(t))throw new Error(n+"contains "+t.toString()+" "+wd(r));if("string"==typeof t&&t.length>Kb/3&&(0,F.ug)(t)>Kb)throw new Error(n+"contains a string greater than "+Kb+" utf8 bytes "+wd(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,a=!1;if(bi(t,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(a=!0,!my(d)))throw new Error(n+" contains an invalid key ("+d+") "+wd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,F.ug)(t),gD(n)})(r,d),wg(n,f,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,F.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+wd(r)+" in addition to actual children.")}},cT=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,F.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const a=[];bi(t,(d,f)=>{const _=new Pn(d);if(wg(i,f,rr(e,_)),".priority"===$_(_)&&!bg(f))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const a=Jh(r);for(let d=0;d<a.length;d++)if((".priority"!==a[d]||d!==a.length-1)&&!my(a[d]))throw new Error(n+"contains an invalid key ("+a[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(pD);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&Js(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Qb=function(n,t,e){if(!e||void 0!==t){if(Zh(t))throw new Error((0,F.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!bg(t))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cg=function(n,t,e,r){if(!(r&&void 0===e||my(e)))throw new Error((0,F.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Eg=function(n,t,e,r){if(!(r&&void 0===e||lT(e)))throw new Error((0,F.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Po=function(n,t){if(".info"===Wt(t))throw new Error(n+" failed = Can't modify data under /.info/")},dT=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!my(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),lT(n)}(e))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bx{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _y(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],a=i.getPath();null!==e&&!Vu(a,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:a}),e.events.push(i)}e&&n.eventLists_.push(e)}function Jb(n,t,e){_y(n,e),Xb(n,r=>Vu(r,t))}function no(n,t,e){_y(n,e),Xb(n,r=>Js(r,t)||Js(t,r))}function Xb(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(hT(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function hT(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();Wh&&ur("event: "+e.toString()),yd(r)}}}const ew="repo_interrupt";class pT{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vl(),this.transactionQueueTree_=new yf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tw(n){const e=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function wf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:tw(n)})}function yy(n,t,e,r,i){n.dataUpdateCount++;const a=new Pn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let d=[];if(i)if(r){const _=(0,F.UI)(e,w=>Lr(w));d=function(n,t,e,r){const i=ly(n,r);if(i){const a=ko(i),d=a.path,f=a.queryId,_=ms(d,t),w=cr.fromObject(e);return to(n,d,new Td(Z_(f),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Lr(e);d=function(n,t,e,r){const i=ly(n,r);if(null!=i){const a=ko(i),d=a.path,f=a.queryId,_=ms(d,t);return to(n,d,new Gu(Z_(f),_,e))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,F.UI)(e,w=>Lr(w));d=function(n,t,e){const r=cr.fromObject(e);return Ad(n,new Td({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,a,_)}else{const _=Lr(e);d=yg(n.serverSyncTree_,a,_)}let f=a;d.length>0&&(f=Qu(n,a)),no(n.eventQueue_,f,d)}function nw(n,t){rw(n,"connected",t),!1===t&&function(n){Ef(n,"onDisconnectEvents");const t=wf(n),e=Vl();ju(n.onDisconnect_,mn(),(i,a)=>{const d=rT(i,a,n.serverSyncTree_,t);ma(e,i,d)});let r=[];ju(e,mn(),(i,a)=>{r=r.concat(yg(n.serverSyncTree_,i,a));const d=dw(n,i);Qu(n,d)}),n.onDisconnect_=Vl(),no(n.eventQueue_,mn(),r)}(n)}function rw(n,t,e){const r=new Pn("/.info/"+t),i=Lr(e);n.infoData_.updateSnapshot(r,i);const a=yg(n.infoSyncTree_,r,i);no(n.eventQueue_,r,a)}function vy(n){return n.nextWriteId_++}function mT(n,t,e,r,i){Ef(n,"set",{path:t.toString(),value:e,priority:r});const a=wf(n),d=Lr(e,r),f=vg(n.serverSyncTree_,t),_=uy(d,f,a),w=vy(n),T=qr(n.serverSyncTree_,t,_,w,!0);_y(n.eventQueue_,T),n.server_.put(t.toString(),d.val(!0),(M,V)=>{const Y="ok"===M;Y||Oi("set at "+t+" failed: "+M);const ue=Yu(n.serverSyncTree_,w,!Y);no(n.eventQueue_,t,ue),va(0,i,M,V)});const S=dw(n,t);Qu(n,S),no(n.eventQueue_,S,[])}function _T(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&Hu(n.onDisconnect_,t),va(0,e,r,i)})}function sw(n,t,e,r){const i=Lr(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(a,d)=>{"ok"===a&&ma(n.onDisconnect_,t,i),va(0,r,a,d)})}function ow(n,t,e){let r;r=".info"===Wt(t._path)?iy(n.infoSyncTree_,t,e):iy(n.serverSyncTree_,t,e),Jb(n.eventQueue_,t._path,r)}function yT(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ew)}function Ef(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),ur(e,...t)}function va(n,t,e,r){t&&yd(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let a=i;r&&(a+=": "+r);const d=new Error(a);d.code=i,t(d)}})}function wr(n,t,e){return vg(n.serverSyncTree_,t,e)||qt.EMPTY_NODE}function aw(n,t=n.transactionQueueTree_){if(t||Dg(n,t),Ku(t)){const e=uw(n,t);(0,F.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(w=>w.currentWriteId),i=wr(n,t,r);let a=i;const d=i.hash();for(let w=0;w<e.length;w++){const T=e[w];(0,F.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=ms(t,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const f=a.val(!0),_=t;n.server_.put(_.toString(),f,w=>{Ef(n,"transaction put response",{path:_.toString(),status:w});let T=[];if("ok"===w){const S=[];for(let M=0;M<e.length;M++)e[M].status=2,T=T.concat(Yu(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&S.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();Dg(n,dy(n.transactionQueueTree_,t)),aw(n,n.transactionQueueTree_),no(n.eventQueue_,t,T);for(let M=0;M<S.length;M++)yd(S[M])}else{if("datastale"===w)for(let S=0;S<e.length;S++)e[S].status=3===e[S].status?4:0;else{Oi("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<e.length;S++)e[S].status=4,e[S].abortReason=w}Qu(n,t)}},d)}(n,bf(t),e)}else fy(t)&&vf(t,e=>{aw(n,e)})}function Qu(n,t){const e=lw(n,t),r=bf(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const d=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const _=t[f],w=ms(e,_.path);let S,T=!1;if((0,F.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,S=_.abortReason,i=i.concat(Yu(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,S="maxretry",i=i.concat(Yu(n.serverSyncTree_,_.currentWriteId,!0));else{const M=wr(n,_.path,d);_.currentInputSnapshot=M;const V=t[f].update(M.val());if(void 0!==V){wg("transaction failed: Data returned ",V,_.path);let Y=Lr(V);"object"==typeof V&&null!=V&&(0,F.r3)(V,".priority")||(Y=Y.updatePriority(M.getPriority()));const De=_.currentWriteId,rt=wf(n),Je=uy(Y,M,rt);_.currentOutputSnapshotRaw=Y,_.currentOutputSnapshotResolved=Je,_.currentWriteId=vy(n),d.splice(d.indexOf(De),1),i=i.concat(qr(n.serverSyncTree_,_.path,Je,_.currentWriteId,_.applyLocally)),i=i.concat(Yu(n.serverSyncTree_,De,!0))}else T=!0,S="nodata",i=i.concat(Yu(n.serverSyncTree_,_.currentWriteId,!0))}no(n.eventQueue_,e,i),i=[],T&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&r.push("nodata"===S?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(S),!1,null)))}Dg(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)yd(r[f]);aw(n,n.transactionQueueTree_)}(n,uw(n,e),r),r}function lw(n,t){let e,r=n.transactionQueueTree_;for(e=Wt(t);null!==e&&void 0===Ku(r);)r=dy(r,e),e=Wt(t=jn(t));return r}function uw(n,t){const e=[];return cw(n,t,e),e.sort((r,i)=>r.order-i.order),e}function cw(n,t,e){const r=Ku(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);vf(t,i=>{cw(n,i,e)})}function Dg(n,t){const e=Ku(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,hy(t,e.length>0?e:void 0)}vf(t,r=>{Dg(n,r)})}function dw(n,t){const e=bf(lw(n,t)),r=dy(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{hw(n,i)}),hw(n,r),Yb(r,i=>{hw(n,i)}),e}function hw(n,t){const e=Ku(t);if(e){const r=[];let i=[],a=-1;for(let d=0;d<e.length;d++)3===e[d].status||(1===e[d].status?((0,F.hu)(a===d-1,"All SENT items should be at beginning of queue."),a=d,e[d].status=3,e[d].abortReason="set"):((0,F.hu)(0===e[d].status,"Unexpected transaction status in abort"),e[d].unwatcher(),i=i.concat(Yu(n.serverSyncTree_,e[d].currentWriteId,!0)),e[d].onComplete&&r.push(e[d].onComplete.bind(null,new Error("set"),!1,null))));-1===a?hy(t,void 0):e.length=a+1,no(n.eventQueue_,bf(t),i);for(let d=0;d<r.length;d++)yd(r[d])}}const fw=function(n,t){const e=Dx(n),r=e.namespace;return"firebase.com"===e.domain&&ha(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&ha("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K0(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Pn(e.pathString)}},Dx=function(n){let t="",e="",r="",i="",a="",d=!0,f="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(f=n.substring(0,w-1),n=n.substring(w+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),t=n.substring(0,Math.min(T,S)),T<S&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(n.substring(T,S)));const M=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,S)));w=t.indexOf(":"),w>=0?(d="https"===f||"wss"===f,_=parseInt(t.substring(w+1),10)):w=t.length;const V=t.slice(0,w);if("localhost"===V.toLowerCase())e="localhost";else if(V.split(".").length<=2)e=V;else{const Y=t.indexOf(".");r=t.substring(0,Y).toLowerCase(),e=t.substring(Y+1),a=r}"ns"in M&&(a=M.ns)}return{host:t,port:_,domain:e,subdomain:r,secure:d,scheme:f,pathString:i,namespace:a}};class bT{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class Ig{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pw{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class gw{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new F.BH;return _T(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Po("OnDisconnect.remove",this._path);const t=new F.BH;return sw(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Po("OnDisconnect.set",this._path),tl("OnDisconnect.set",t,this._path,!1);const e=new F.BH;return sw(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Po("OnDisconnect.setWithPriority",this._path),tl("OnDisconnect.setWithPriority",t,this._path,!1),Qb("OnDisconnect.setWithPriority",e,!1);const r=new F.BH;return function(n,t,e,r,i){const a=Lr(e,r);n.server_.onDisconnectPut(t.toString(),a.val(!0),(d,f)=>{"ok"===d&&ma(n.onDisconnect_,t,a),va(0,i,d,f)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){Po("OnDisconnect.update",this._path),cT("OnDisconnect.update",t,this._path,!1);const e=new F.BH;return function(n,t,e,r){if((0,F.xb)(e))return ur("onDisconnect().update() called with empty data.  Don't do anything."),void va(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,a)=>{"ok"===i&&bi(e,(d,f)=>{const _=Lr(f);ma(n.onDisconnect_,rr(t,d),_)}),va(0,r,i,a)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class vs{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return an(this._path)?null:$_(this._path)}get ref(){return new Fo(this._repo,this._path)}get _queryIdentifier(){const t=cg(this._queryParams),e=$0(t);return"{}"===e?"default":e}get _queryObject(){return cg(this._queryParams)}isEqual(t){if(!((t=(0,F.m9)(t))instanceof vs))return!1;const e=this._repo===t._repo,r=Vu(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function Cy(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Oo(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===pa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Qi)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==fa)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===Xn){if(null!=t&&!bg(t)||null!=e&&!bg(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof ED||n.getIndex()===j_,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ju(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fo extends vs{constructor(t,e){super(t,e,new ag,!1)}get parent(){const t=fD(this._path);return null===t?null:new Fo(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class xd{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Pn(t),r=Xu(this.ref,t);return new xd(this._node.getChild(e),r,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new xd(i,Xu(this.ref,r),Xn)))}hasChild(t){const e=new Pn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wT(n,t){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==t?Xu(n._root,t):n._root}function mw(n,t){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const e=fw(t,n._repo.repoInfo_.nodeAdmin);dT("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ha("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),wT(n,e.path.toString())}function Xu(n,t){return null===Wt((n=(0,F.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Eg("child","path",e,!1)):Eg("child","path",t,!1),new Fo(n._repo,rr(n._path,t));var e}function _w(n,t){n=(0,F.m9)(n),Po("set",n._path),tl("set",t,n._path,!1);const e=new F.BH;return mT(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function rF(n,t){cT("update",t,n._path,!1);const e=new F.BH;return function(n,t,e,r){Ef(n,"update",{path:t.toString(),value:e});let i=!0;const a=wf(n),d={};if(bi(e,(f,_)=>{i=!1,d[f]=rT(rr(t,f),Lr(_),n.serverSyncTree_,a)}),i)ur("update() called with empty data.  Don't do anything."),va(0,r,"ok",void 0);else{const f=vy(n),_=function(n,t,e,r){!function(n,t,e,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=xD(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=cr.fromObject(e);return Ad(n,new Td({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,d,f);_y(n.eventQueue_,_),n.server_.merge(t.toString(),e,(w,T)=>{const S="ok"===w;S||Oi("update at "+t+" failed: "+w);const M=Yu(n.serverSyncTree_,f,!S),V=M.length>0?Qu(n,t):t;no(n.eventQueue_,V,M),va(0,r,w,T)}),bi(e,w=>{const T=dw(n,rr(t,w));Qu(n,T)}),no(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function iF(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(w,T)=>{const S=ms(w,e);r=r||Bl(T,S)});let i=n.syncPointTree_.get(e);i?r=r||Bl(i,mn()):(i=new $b,n.syncPointTree_=n.syncPointTree_.set(e,i));const a=null!=r,d=a?new qu(r,!0,!1):null;return function(n){return z_(n.viewCache_)}(mg(i,t,K_(n.pendingWriteTree_,t._path),a?d.getNode():qt.EMPTY_NODE,a))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Lr(r).withIndex(t._queryParams.getIndex()),a=yg(n.serverSyncTree_,t._path,i);return Jb(n.eventQueue_,t._path,a),Promise.resolve(i)},r=>(Ef(n,"get for query "+(0,F.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(t=>new xd(t,new Fo(n._repo,n._path),n._queryParams.getIndex()))}class yw{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new bT("value",this,new xd(t.snapshotNode,new Fo(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ig(this,t,e):null}matches(t){return t instanceof yw&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Sg{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ig(this,t,e):null}createEvent(t,e){(0,F.hu)(null!=t.childName,"Child events should have a childName.");const r=Xu(new Fo(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new bT(t.type,this,new xd(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Sg&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ec(n,t,e,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=e,w=(T,S)=>{ow(n._repo,n,f),_(T,S)};w.userCallback=e.userCallback,w.context=e.context,e=w}const d=new pw(e,a||void 0),f="value"===t?new yw(d):new Sg(t,d);return function(n,t,e){let r;r=".info"===Wt(t._path)?eT(n.infoSyncTree_,t,e):eT(n.serverSyncTree_,t,e),Jb(n.eventQueue_,t._path,r)}(n._repo,n,f),()=>ow(n._repo,n,f)}function vw(n,t,e,r){return ec(n,"value",t,e,r)}function ET(n,t,e,r){return ec(n,"child_added",t,e,r)}function bw(n,t,e,r){return ec(n,"child_changed",t,e,r)}function Df(n,t,e,r){return ec(n,"child_moved",t,e,r)}function DT(n,t,e,r){return ec(n,"child_removed",t,e,r)}function TT(n,t,e){let r=null;const i=e?new pw(e):null;"value"===t?r=new yw(i):t&&(r=new Sg(t,i)),ow(n._repo,n,r)}class ba{}class IT extends ba{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tl("endAt",this._value,t._path,!0);const e=Ro(t._queryParams,this._value,this._key);if(Ju(e),Oo(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(t._repo,t._path,e,t._orderByCalled)}}class ST extends ba{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tl("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===pa?("string"==typeof t&&(t=G_(t)),i=Ro(n,t,e)):(r=null==e?Qi:G_(e),i=Ro(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Ju(e),Oo(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(t._repo,t._path,e,t._orderByCalled)}}class AT extends ba{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tl("startAt",this._value,t._path,!0);const e=Cb(t._queryParams,this._value,this._key);if(Ju(e),Oo(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vs(t._repo,t._path,e,t._orderByCalled)}}class xx extends ba{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){tl("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===pa)"string"==typeof t&&(t=TD(t)),r=Cb(n,t,e);else{let i;i=null==e?fa:TD(e),r=Cb(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Ju(e),Oo(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vs(t._repo,t._path,e,t._orderByCalled)}}class Mx extends ba{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Rx extends ba{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class kx extends ba{constructor(t){super(),this._path=t}_apply(t){Cy(t,"orderByChild");const e=new Pn(this._path);if(an(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ED(e),i=di(t._queryParams,r);return Oo(i),new vs(t._repo,t._path,i,!0)}}class Px extends ba{_apply(t){Cy(t,"orderByKey");const e=di(t._queryParams,pa);return Oo(e),new vs(t._repo,t._path,e,!0)}}class kT extends ba{_apply(t){Cy(t,"orderByPriority");const e=di(t._queryParams,Xn);return Oo(e),new vs(t._repo,t._path,e,!0)}}class Fx extends ba{_apply(t){Cy(t,"orderByValue");const e=di(t._queryParams,j_);return Oo(e),new vs(t._repo,t._path,e,!0)}}class Cw extends ba{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(tl("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IT(this._value,this._key)._apply(new AT(this._value,this._key)._apply(t))}}function Lo(n,...t){let e=(0,F.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,F.hu)(!pf,"__referenceConstructor has already been defined"),pf=n})(Fo),function(n){(0,F.hu)(!qb,"__referenceConstructor has already been defined"),qb=n}(Fo);const Ew={};function OT(n,t,e,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||ha("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ur("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,d=fw(a,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${f.namespace}`,d=fw(a,i),f=d.repoInfo):_=!d.repoInfo.secure;const T=i&&_?new Ou(Ou.OWNER):new zE(n.name,n.options,t);dT("Invalid Firebase Database URL",d),an(d.path)||ha("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function(n,t,e,r){let i=Ew[t.name];i||(i={},Ew[t.name]=i);let a=i[n.toURLString()];return a&&ha("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new pT(n,false,e,r),i[n.toURLString()]=a,a}(f,n,T,new G0(n.name,e));return new FT(S,n)}class FT{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=Jp(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ys(n.repoInfo_,(r,i,a,d)=>{yy(n,r,i,a,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>nw(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Fl(n.repoInfo_,t,(r,i,a,d)=>{yy(n,r,i,a,d)},r=>{nw(n,r)},r=>{!function(n,t){bi(t,(e,r)=>{rw(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return Q0[e]||(Q0[e]=t()),Q0[e]}(n.repoInfo_,()=>new SD(n.stats_,n.server_)),n.infoData_=new Db,n.infoSyncTree_=new KD({startListening:(r,i,a,d)=>{let f=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(f=yg(n.infoSyncTree_,r._path,_),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),rw(n,"connected",!1),n.serverSyncTree_=new KD({startListening:(r,i,a,d)=>(n.server_.listen(r,a,i,(f,_)=>{const w=d(f,_);no(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fo(this._repo,mn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=Ew[t];(!e||e[n.key]!==n)&&ha(`Database ${t}(${n.repoInfo_}) has already been deleted.`),yT(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ha("Cannot call "+t+" on a deleted database.")}}function VT(n,t){wN(n,t)}class BT{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fl.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Fl.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},jE(Ki.SDK_VERSION),(0,Ki._registerComponent)(new ca.wA("database",(t,{instanceIdentifier:e})=>OT(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(mN,"0.12.8",void 0),(0,Ki.registerVersion)(mN,"0.12.8","esm2017");const UT=new da.Yd("@firebase/database-compat"),$T=function(n){UT.warn("FIREBASE WARNING: "+n)};class GT{constructor(t){this._delegate=t}cancel(t){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),a=>r(a)),i}update(t,e){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let a=0;a<t.length;++a)i[""+a]=t[a];t=i,$T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class aF{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class tc{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Eg("DataSnapshot.child","path",t,!1),new tc(this._database,this._delegate.child(t))}hasChild(t){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Eg("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new tc(this._database,e)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new Vo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Vr{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var a;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",e,!1);const d=Vr.getCancelAndContextArgs_("Query.on",r,i),f=(w,T)=>{e.call(d.context,new tc(this.database,w),T)};f.userCallback=e,f.context=d.context;const _=null===(a=d.cancel)||void 0===a?void 0:a.bind(d.context);switch(t){case"value":return vw(this._delegate,f,_),e;case"child_added":return ET(this._delegate,f,_),e;case"child_removed":return DT(this._delegate,f,_),e;case"child_changed":return bw(this._delegate,f,_),e;case"child_moved":return Df(this._delegate,f,_),e;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,F.Wj)("Query.off","callback",e,!0),(0,F.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,TT(this._delegate,t,i)}else TT(this._delegate,t)}get(){return iF(this._delegate).then(t=>new tc(this.database,t))}once(t,e,r,i){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",e,!0);const a=Vr.getCancelAndContextArgs_("Query.once",r,i),d=new F.BH,f=(w,T)=>{const S=new tc(this.database,w);e&&e.call(a.context,S,T),d.resolve(S)};f.userCallback=e,f.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),d.reject(w)};switch(t){case"value":vw(this._delegate,f,_,{onlyOnce:!0});break;case"child_added":ET(this._delegate,f,_,{onlyOnce:!0});break;case"child_removed":DT(this._delegate,f,_,{onlyOnce:!0});break;case"child_changed":bw(this._delegate,f,_,{onlyOnce:!0});break;case"child_moved":Df(this._delegate,f,_,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(t){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new Vr(this.database,Lo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Mx(n)}(t)))}limitToLast(t){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new Vr(this.database,Lo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Rx(n)}(t)))}orderByChild(t){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new Vr(this.database,Lo(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Eg("orderByChild","path",n,!1),new kx(n)}(t)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new Vr(this.database,Lo(this._delegate,new Px))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new Vr(this.database,Lo(this._delegate,new kT))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new Vr(this.database,Lo(this._delegate,new Fx))}startAt(t=null,e){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n=null,t){return Cg("startAt","key",t,!0),new AT(n,t)}(t,e)))}startAfter(t=null,e){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,t){return Cg("startAfter","key",t,!0),new xx(n,t)}(t,e)))}endAt(t=null,e){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,t){return Cg("endAt","key",t,!0),new IT(n,t)}(t,e)))}endBefore(t=null,e){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,t){return Cg("endBefore","key",t,!0),new ST(n,t)}(t,e)))}equalTo(t,e){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new Vr(this.database,Lo(this._delegate,function(n,t){return Cg("equalTo","key",t,!0),new Cw(n,t)}(t,e)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Vr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,F.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,F.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,F.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Vo(this.database,new Fo(this._delegate._repo,this._delegate._path))}}class Vo extends Vr{constructor(t,e){super(t,new vs(e._repo,e._path,new ag,!1)),this.database=t,this._delegate=e}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Vo(this.database,Xu(this._delegate,t))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Vo(this.database,t):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new Vo(this.database,this._delegate.root)}set(t,e){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",e,!0);const r=_w(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let a=0;a<t.length;++a)i[""+a]=t[a];t=i,$T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Po("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",e,!0);const r=rF(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(Po("setWithPriority",n._path),tl("setWithPriority",t,n._path,!1),Qb("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return mT(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),a=>r(a)),i}remove(t){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return Po("remove",n._path),_w(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,F.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,F.m9)(n),Po("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,a=new F.BH,f=vw(n,()=>{});return function(n,t,e,r,i,a){Ef(n,"transaction on "+t);const d={path:t,update:e,onComplete:r,status:null,order:yN(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=wr(n,t,void 0);d.currentInputSnapshot=f;const _=d.update(f.val());if(void 0===_)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{wg("transaction failed: Data returned ",_,d.path),d.status=0;const w=dy(n.transactionQueueTree_,t),T=Ku(w)||[];let S;T.push(d),hy(w,T),"object"==typeof _&&null!==_&&(0,F.r3)(_,".priority")?(S=(0,F.DV)(_,".priority"),(0,F.hu)(bg(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(vg(n.serverSyncTree_,t)||qt.EMPTY_NODE).getPriority().val();const M=wf(n),V=Lr(_,S),Y=uy(V,f,M);d.currentOutputSnapshotRaw=V,d.currentOutputSnapshotResolved=Y,d.currentWriteId=vy(n);const ue=qr(n.serverSyncTree_,t,Y,d.currentWriteId,d.applyLocally);no(n.eventQueue_,t,ue),aw(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(_,w,T)=>{let S=null;_?a.reject(_):(S=new xd(T,new Fo(n._repo,n._path),Xn),a.resolve(new BT(w,S)))},f,i),a.promise}(this._delegate,t,{applyLocally:r}).then(a=>new aF(a.committed,new tc(this.database,a.snapshot)));return e&&i.then(a=>e(null,a.committed,a.snapshot),a=>e(a,!1,null)),i}setPriority(t,e){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,F.m9)(n),Po("setPriority",n._path),Qb("setPriority",t,!1);const e=new F.BH;return mT(n._repo,rr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,F.m9)(n),Po("push",n._path),tl("push",t,n._path,!0);const e=tw(n._repo),r=bb(e),i=Xu(n,r),a=Xu(n,r);let d;return d=null!=t?_w(a,t).then(()=>a):Promise.resolve(a),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,t),i=r.then(d=>new Vo(this.database,d));e&&i.then(()=>e(null),d=>e(d));const a=new Vo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Po("Reference.onDisconnect",this._delegate._path),new GT(new gw(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Md{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ha("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ha('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Ou(Ou.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);a=new Ou(d)}!function(n,t,e,r){n.repoInfo_=new K0(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,a)}(this._delegate,t,e,r)}ref(t){if((0,F.Dv)("database.ref",0,1,arguments.length),t instanceof Vo){const e=mw(this._delegate,t.toString());return new Vo(this,e)}{const e=wT(this._delegate,t);return new Vo(this,e)}}refFromURL(t){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=mw(this._delegate,t);return new Vo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),yT(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(ew)}(n._repo)}(this._delegate)}}Md.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var Yx=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){jE(e);const d=new ca.zt("auth-internal",new ca.H0("database-standalone"));return d.setComponent(new ca.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Md(OT(n,d,void 0,t,a),n),namespace:i}}});const If=Md.ServerValue;!function(n){n.INTERNAL.registerComponent(new ca.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new Md(i,r)},"PUBLIC").setServiceProps({Reference:Vo,Query:Vr,Database:Md,DataSnapshot:tc,enableLogging:VT,INTERNAL:Yx,ServerValue:If}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(HE.Z);var Dy=B(9746),Qx=B(7771),nl=B(8858);class qT extends En.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new lF(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;let d;if(this.closed)throw new Tl.N;if(this.isStopped||this.hasError?d=Nh.w.EMPTY:(this.observers.push(t),d=new nl.W(this,t)),i&&t.add(t=new Dy.ht(t,i)),e)for(let f=0;f<a&&!t.closed;f++)t.next(r[f]);else for(let f=0;f<a&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||Qx.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,a=i.length;let d=0;for(;d<a&&!(t-i[d].time<r);)d++;return a>e&&(d=Math.max(d,a-e)),d>0&&i.splice(0,d),i}}class lF{constructor(t,e){this.time=t,this.value=e}}function Ag(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let i,d,a=0,f=!1,_=!1;return function(T){let S;a++,!i||f?(f=!1,i=new qT(n,t,r),S=i.subscribe(this),d=T.subscribe({next(M){i.next(M)},error(M){f=!0,i.error(M)},complete(){_=!0,d=void 0,i.complete()}}),_&&(d=void 0)):S=i.subscribe(this),this.add(()=>{a--,S.unsubscribe(),S=void 0,d&&!_&&e&&0===a&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function WT(n,t){return t?nr(()=>n,t):nr(()=>n)}var ZT=B(2639);B(2329);const xg=new Map,oM={activated:!1,tokenObservers:[]},QT={initialized:!1,enabled:!1};function Wr(n){return xg.get(n)||oM}function Vs(n,t){xg.set(n,t)}function nc(){return QT}class cM{constructor(t,e,r,i,a){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ve.Z)(function*(){e.stop();try{e.pending=new F.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new F.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const bs=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function XT(n){if(!Wr(n).activated)throw bs.create("use-before-activation",{appName:n.name})}function Mw(n,t){return Rw.apply(this,arguments)}function Rw(){return(Rw=(0,ve.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(t),headers:r};let d,f;try{d=yield fetch(n,a)}catch(S){throw bs.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==d.status)throw bs.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(S){throw bs.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw bs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),T=Date.now();return{token:f.attestationToken,expireTimeMillis:T+w,issuedAtTimeMillis:T}})).apply(this,arguments)}function Rd(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Ay="firebase-app-check-store";let kd=null;function nI(){return kd||(kd=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(bs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ay,{keyPath:"compositeKey"})}}}catch(e){t(bs.create("storage-open",{originalErrorMessage:e.message}))}}),kd)}function Ny(){return(Ny=(0,ve.Z)(function*(n,t){const r=(yield nI()).transaction(Ay,"readwrite"),a=r.objectStore(Ay).put({compositeKey:n,value:t});return new Promise((d,f)=>{a.onsuccess=_=>{d()},r.onerror=_=>{var w;f(bs.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Mg=new da.Yd("@firebase/app-check");function Rg(n,t){return(0,F.hl)()?function(n,t){return function(n,t){return Ny.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Mg.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function On(){return nc().enabled}function $l(){return ic.apply(this,arguments)}function ic(){return(ic=(0,ve.Z)(function*(){const n=nc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const yF={error:"UNKNOWN_ERROR"};function Ht(n){return F.US.encodeString(JSON.stringify(n),!1)}function ws(n){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,ve.Z)(function*(n,t=!1){const e=n.app;XT(e);const r=Wr(e);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&xy(_)&&(i=_)}if(!t&&i&&xy(i))return{token:i.token};let f,d=!1;if(On()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Mw(Rd(e,yield $l()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0);const _=yield r.exchangeTokenPromise;return yield Rg(e,_),Vs(e,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),d=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Mg.warn(_.message):Mg.error(_),a=_}return i?(f={token:i.token},Vs(e,Object.assign(Object.assign({},r),{token:i})),yield Rg(e,i)):f=_M(a),d&&mM(e,f),f})).apply(this,arguments)}function aI(n,t){const e=Wr(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Vs(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function Lw(n){const{app:t}=n,e=Wr(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new cM((0,ve.Z)(function*(){let r;if(r=Wr(t).token?yield ws(n,!0):yield ws(n),r.error)throw r.error}),()=>!0,()=>{const e=Wr(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Vs(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function mM(n,t){const e=Wr(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function xy(n){return n.expireTimeMillis-Date.now()>0}function _M(n){return{token:Ht(yF),error:n}}class Bo{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Wr(this.app);for(const e of t)aI(this.app,e.next);return Promise.resolve()}}const bM="app-check-internal";(0,Ki._registerComponent)(new ca.wA("app-check",n=>function(n,t){return new Bo(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(bM).initialize()})),(0,Ki._registerComponent)(new ca.wA(bM,n=>function(n){return{getToken:t=>ws(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,a=Wr(i),d={next:e,error:r,type:t};if(Vs(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,d]})),a.token&&xy(a.token)){const f=a.token;Promise.resolve().then(()=>{e({token:f.token}),Lw(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Lw(n))}(n,"INTERNAL",t),removeTokenListener:t=>aI(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ki.registerVersion)("@firebase/app-check","0.5.6");class Bg{constructor(){return(0,wn.vb)("app-check")}}"undefined"!=typeof window&&window;var Ug=B(7841);const qw=new l.OlP("angularfire2.auth.use-emulator"),ky=new l.OlP("angularfire2.auth.settings"),$g=new l.OlP("angularfire2.auth.tenant-id"),Ww=new l.OlP("angularfire2.auth.langugage-code"),mI=new l.OlP("angularfire2.auth.use-device-language"),Zw=new l.OlP("angularfire.auth.persistence"),zw=(n,t,e,r,i,a,d,f)=>(0,Fr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=t.runOutsideAngular(()=>n.auth());if(e&&_.useEmulator(...e),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),d)for(const[w,T]of Object.entries(d))_.settings[w]=T;return f&&_.setPersistence(f),_},[e,r,i,a,d,f]);let Hg=(()=>{class n{constructor(e,r,i,a,d,f,_,w,T,S,M,V){const Y=new En.xQ,ue=(0,ct.of)(void 0).pipe((0,Dy.QV)(d.outsideAngular),nr(()=>a.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4828)))),(0,pt.U)(()=>(0,Fr.on)(e,a,r)),(0,pt.U)(De=>zw(De,a,f,w,T,S,_,M)),Ag({bufferSize:1,refCount:!1}));if(gh(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ct.of)(null);else{ue.pipe(vr()).subscribe();const rt=ue.pipe(nr(at=>at.getRedirectResult().then(Ft=>Ft,()=>null)),wn.iC,Ag({bufferSize:1,refCount:!1})),Je=ue.pipe(nr(at=>new Yn.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>at.onAuthStateChanged(ln=>Ft.next(ln),ln=>Ft.error(ln),()=>Ft.complete()))})))),it=ue.pipe(nr(at=>new Yn.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>at.onIdTokenChanged(ln=>Ft.next(ln),ln=>Ft.error(ln),()=>Ft.complete()))}))));this.authState=rt.pipe(WT(Je),(0,ZT.R)(d.outsideAngular),(0,Dy.QV)(d.insideAngular)),this.user=rt.pipe(WT(it),(0,ZT.R)(d.outsideAngular),(0,Dy.QV)(d.insideAngular)),this.idToken=this.user.pipe(nr(at=>at?(0,Xt.D)(at.getIdToken()):(0,ct.of)(null))),this.idTokenResult=this.user.pipe(nr(at=>at?(0,Xt.D)(at.getIdTokenResult()):(0,ct.of)(null))),this.credential=(0,Gh.T)(rt,Y,this.authState.pipe(Qn(at=>!at))).pipe((0,pt.U)(at=>(null==at?void 0:at.user)?at:null),(0,ZT.R)(d.outsideAngular),(0,Dy.QV)(d.insideAngular))}return(0,Fr.pX)(this,ue,a,{spy:{apply:(De,rt,Je)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&Je.then(it=>Y.next(it))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(qw,8),l.LFG(ky,8),l.LFG($g,8),l.LFG(Ww,8),l.LFG(mI,8),l.LFG(Zw,8),l.LFG(Bg,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),TM=(()=>{class n{constructor(){Ug.Z.registerVersion("angularfire",wn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Hg]}),n})();function Nf(n){return null==n}function _I(n){return"function"==typeof n.set}function yI(n,t){return _I(t)?t:n.ref(t)}function Yw(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(_I(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function jl(n,t,e="on",r=ku.z){return new Yn.y(i=>{let a=null;return a=n[e](t,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===e&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===e?{unsubscribe(){null!=a&&n.off(t,a)}}:{unsubscribe(){}}}).pipe((0,pt.U)(i=>{const{snapshot:a,prevKey:d}=i;let f=null;return a.exists()&&(f=a.key),{type:t,payload:a,prevKey:d,key:f}}),(0,BE.B)())}function Kw(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function NM(n,t){const{payload:e,prevKey:r,key:i}=t,a=Kw(n,i),d=function(n,t){if(Nf(t))return 0;{const e=Kw(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:f,key:_.key};return f=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(_=>_.payload.key!==e.key)).splice(d,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(d,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===i?t:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function vI(n){return(Nf(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function bI(n,t,e){return function(n,t,e){return jl(n,"value","once",e).pipe(nr(r=>{const i=[(0,ct.of)(r)];return t.forEach(a=>i.push(jl(n,a,"on",e))),(0,Gh.T)(...i).pipe($a(NM,[]))}),pd())}(n,t=vI(t),e)}function wI(n,t,e){const r=(t=vI(t)).map(i=>jl(n,i,"on",e));return(0,Gh.T)(...r)}function RM(n,t){return function(r,i){return Yw(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function MF(n){return function(e){return e?Yw(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function Py(n,t){return function(){return jl(n,"value","on",t)}}const PM=new l.OlP("angularfire2.realtimeDatabaseURL"),OM=new l.OlP("angularfire2.database.use-emulator");let FM=(()=>{class n{constructor(e,r,i,a,d,f,_,w,T,S,M,V,Y,ue,De){this.schedulers=f;const rt=_,Je=(0,Fr.on)(e,d,r);w&&zw(Je,d,T,M,V,Y,S,ue),this.database=(0,Fr.cc)(`${Je.name}.database.${i}`,"AngularFireDatabase",Je.name,()=>{const it=d.runOutsideAngular(()=>Je.database(i||void 0));return rt&&it.useEmulator(...rt),it},[rt])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>yI(this.database,e));let a=i;return r&&(a=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:RM(r,"update"),set:RM(r,"set"),push:i=>r.push(i),remove:MF(r),snapshotChanges:i=>bI(n,i,e).pipe(wn.iC),stateChanges:i=>wI(n,i,e).pipe(wn.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return jl(n,"value","on",t).pipe((0,pt.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(Yp(t),(0,pt.U)(([i,a])=>{const d=i.lastKeyToLoad,f=a.map(_=>_.key);return{actions:a,lastKeyToLoad:d,loadedKeys:f}}),function(n){return t=>t.lift(new BO(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,pt.U)(i=>i.actions))}(n,wI(n,t).pipe($a((i,a)=>[...i,a],[])),e)}(n,i,e).pipe(wn.iC),valueChanges:(i,a)=>bI(n,i,e).pipe((0,pt.U)(f=>f.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),wn.iC)}}(a,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>Py(n,t.schedulers.outsideAngular)().pipe(wn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>Py(n,t.schedulers.outsideAngular)().pipe(wn.iC,(0,pt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>yI(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(PM,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(OM,8),l.LFG(Hg,8),l.LFG(qw,8),l.LFG(ky,8),l.LFG($g,8),l.LFG(Ww,8),l.LFG(mI,8),l.LFG(Zw,8),l.LFG(Bg,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var LM=B(982);function Oy(){return n=>n.lift(new Qw)}class Qw{call(t,e){return e.subscribe(new VM(t))}}class VM extends or.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var ut,xf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Cr={},ro=ro||{},Vt=xf||self;function Fy(){}function Ly(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Mf(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var Jw="closure_uid_"+(1e9*Math.random()>>>0),BM=0;function UM(n,t,e){return n.call.apply(n.bind,arguments)}function DI(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function Fi(n,t,e){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?UM:DI).apply(null,arguments)}function Xw(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Li(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return t.prototype[i].apply(r,d)}}function oc(){this.s=this.s,this.o=this.o}var PF={};oc.prototype.s=!1,oc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Jw)&&n[Jw]||(n[Jw]=++BM)}(this);delete PF[n]}},oc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const e1=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},TI=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&t.call(e,i[a],a,n)};function t1(n){return Array.prototype.concat.apply([],arguments)}function n1(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function kf(n){return/^[\s\xa0]*$/.test(n)}var es,II=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xi(n,t){return-1!=n.indexOf(t)}function Vy(n,t){return n<t?-1:n>t?1:0}e:{var SI=Vt.navigator;if(SI){var AI=SI.userAgent;if(AI){es=AI;break e}}es=""}function r1(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function NI(n){const t={};for(const e in n)t[e]=n[e];return t}var xI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function MI(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let a=0;a<xI.length;a++)e=xI[a],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function Ld(n){return Ld[" "](n),n}Ld[" "]=Fy;var jg,kI=Xi(es,"Opera"),Vd=Xi(es,"Trident")||Xi(es,"MSIE"),i1=Xi(es,"Edge"),By=i1||Vd,s1=Xi(es,"Gecko")&&!(Xi(es.toLowerCase(),"webkit")&&!Xi(es,"Edge"))&&!(Xi(es,"Trident")||Xi(es,"MSIE"))&&!Xi(es,"Edge"),$M=Xi(es.toLowerCase(),"webkit")&&!Xi(es,"Edge");function o1(){var n=Vt.document;return n?n.documentMode:void 0}e:{var a1="",l1=function(){var n=es;return s1?/rv:([^\);]+)(\)|;)/.exec(n):i1?/Edge\/([\d\.]+)/.exec(n):Vd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$M?/WebKit\/(\S+)/.exec(n):kI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(l1&&(a1=l1?l1[1]:""),Vd){var u1=o1();if(null!=u1&&u1>parseFloat(a1)){jg=String(u1);break e}}jg=a1}var Gg={};function qg(){return t=Gg,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=II(String(jg)).split("."),e=II("9").split("."),r=Math.max(t.length,e.length);for(let d=0;0==n&&d<r;d++){var i=t[d]||"",a=e[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Vy(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Vy(0==i[2].length,0==a[2].length)||Vy(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n}();var t}var rl=Vt.document&&Vd&&(o1()||parseInt(jg,10))||void 0,HM=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Fy,t),Vt.removeEventListener("test",Fy,t)}catch(e){}return n}();function hi(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Wg(n,t){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(s1){e:{try{Ld(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jM[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wg.Z.h.call(this)}}hi.prototype.h=function(){this.defaultPrevented=!0},Li(Wg,hi);var jM={2:"touch",3:"pen",4:"mouse"};Wg.prototype.h=function(){Wg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var $y="closure_listenable_"+(1e6*Math.random()|0),d1=0;function h1(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++d1,this.ca=this.fa=!1}function Zg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Pf(n){this.src=n,this.g={},this.h=0}function zg(n,t){var e=t.type;if(e in n.g){var a,r=n.g[e],i=e1(r,t);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Zg(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function f1(n,t,e,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==t&&a.capture==!!e&&a.ia==r)return i}return-1}Pf.prototype.add=function(n,t,e,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var d=f1(n,t,r,i);return-1<d?(t=n[d],e||(t.fa=!1)):((t=new h1(t,this.src,a,!!r,i)).fa=e,n.push(t)),t};var p1="closure_lm_"+(1e6*Math.random()|0),g1={};function PI(n,t,e,r,i){if(r&&r.once)return y1(n,t,e,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)PI(n,t[a],e,r,i);return null}return e=w1(e),n&&n[$y]?n.N(t,e,Mf(r)?!!r.capture:!!r,i):m1(n,t,e,!1,r,i)}function m1(n,t,e,r,i,a){if(!t)throw Error("Invalid event type");var d=Mf(i)?!!i.capture:!!i,f=jy(n);if(f||(n[p1]=f=new Pf(n)),(e=f.add(t,e,r,d,a)).proxy)return e;if(r=function(){var t=GM;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)HM||(i=d),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(b1(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function y1(n,t,e,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)y1(n,t[a],e,r,i);return null}return e=w1(e),n&&n[$y]?n.O(t,e,Mf(r)?!!r.capture:!!r,i):m1(n,t,e,!0,r,i)}function v1(n,t,e,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)v1(n,t[a],e,r,i);else r=Mf(r)?!!r.capture:!!r,e=w1(e),n&&n[$y]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=f1(a=n.g[t],e,r,i))&&(Zg(a[e]),Array.prototype.splice.call(a,e,1),0==a.length&&(delete n.g[t],n.h--))):n&&(n=jy(n))&&(t=n.g[t.toString()],n=-1,t&&(n=f1(t,e,r,i)),(e=-1<n?t[n]:null)&&Hy(e))}function Hy(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[$y])zg(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(b1(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=jy(t))?(zg(e,n),0==e.h&&(e.src=null,t[p1]=null)):Zg(n)}}}function b1(n){return n in g1?g1[n]:g1[n]="on"+n}function GM(n,t){if(n.ca)n=!0;else{t=new Wg(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&Hy(n),n=e.call(r,t)}return n}function jy(n){return(n=n[p1])instanceof Pf?n:null}var Gy="__closure_events_fn_"+(1e9*Math.random()>>>0);function w1(n){return"function"==typeof n?n:(n[Gy]||(n[Gy]=function(t){return n.handleEvent(t)}),n[Gy])}function fi(){oc.call(this),this.i=new Pf(this),this.P=this,this.I=null}function wi(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new hi(t,n);else if(t instanceof hi)t.target=t.target||n;else{var i=t;MI(t=new hi(r,n),i)}if(i=!0,e)for(var a=e.length-1;0<=a;a--){var d=t.g=e[a];i=C1(d,r,!0,t)&&i}if(i=C1(d=t.g=n,r,!0,t)&&i,i=C1(d,r,!1,t)&&i,e)for(a=0;a<e.length;a++)i=C1(d=t.g=e[a],r,!1,t)&&i}function C1(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var d=t[a];if(d&&!d.ca&&d.capture==e){var f=d.listener,_=d.ia||d.src;d.fa&&zg(n.i,d),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Li(fi,oc),fi.prototype[$y]=!0,fi.prototype.removeEventListener=function(n,t,e,r){v1(this,n,t,e,r)},fi.prototype.M=function(){if(fi.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)Zg(e[r]);delete n.g[t],n.h--}}this.I=null},fi.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},fi.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var Vi=Vt.JSON.stringify;function Of(){var n=FI;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var Kg,OI=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new FF,n=>n.reset());class FF{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Yg(n){Vt.setTimeout(()=>{throw n},0)}function E1(n,t){Kg||function(){var n=Vt.Promise.resolve(void 0);Kg=function(){n.then(ZM)}}(),qy||(Kg(),qy=!0),FI.add(n,t)}var qy=!1,FI=new class{constructor(){this.h=this.g=null}add(t,e){const r=OI.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function ZM(){for(var n;n=Of();){try{n.h.call(n.g)}catch(e){Yg(e)}var t=OI;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}qy=!1}function Ff(n,t){fi.call(this),this.h=n||1,this.g=t||Vt,this.j=Fi(this.kb,this),this.l=Date.now()}function Wy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Zy(n,t,e){if("function"==typeof n)e&&(n=Fi(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fi(n.handleEvent,n)}return 2147483647<Number(t)?-1:Vt.setTimeout(n,t||0)}function Qg(n){n.g=Zy(()=>{n.g=null,n.i&&(n.i=!1,Qg(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Li(Ff,fi),(ut=Ff.prototype).da=!1,ut.S=null,ut.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),wi(this,"tick"),this.da&&(Wy(this),this.start()))}},ut.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ut.M=function(){Ff.Z.M.call(this),Wy(this),delete this.g};class D1 extends oc{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Qg(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zy(n){oc.call(this),this.h=n,this.g={}}Li(zy,oc);var T1=[];function LI(n,t,e,r){Array.isArray(e)||(e&&(T1[0]=e.toString()),e=T1);for(var i=0;i<e.length;i++){var a=PI(t,e[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function I1(n){r1(n.g,function(t,e){this.g.hasOwnProperty(e)&&Hy(t)},n),n.g={}}function Bd(){this.g=!0}function ac(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var d=1;d<i.length;d++)i[d]=""}}}return Vi(e)}catch(f){return t}}(n,e)+(r?" "+r:"")})}zy.prototype.M=function(){zy.Z.M.call(this),I1(this)},zy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bd.prototype.Aa=function(){this.g=!1},Bd.prototype.info=function(){};var Ud={},A1=null;function Jg(){return A1=A1||new fi}function N1(n){hi.call(this,Ud.Ma,n)}function Xg(n){const t=Jg();wi(t,new N1(t,n))}function x1(n,t){hi.call(this,Ud.STAT_EVENT,n),this.stat=t}function ts(n){const t=Jg();wi(t,new x1(t,n))}function BI(n,t){hi.call(this,Ud.Na,n),this.size=t}function em(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},t)}Ud.Ma="serverreachability",Li(N1,hi),Ud.STAT_EVENT="statevent",Li(x1,hi),Ud.Na="timingevent",Li(BI,hi);var tm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},UI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yy(){}function R1(){}Yy.prototype.h=null;var O1,Lf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function k1(){hi.call(this,"d")}function P1(){hi.call(this,"c")}function nm(){}function Ky(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new zy(this),this.P=LF,this.W=new Ff(n=By?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new KM}function KM(){this.i=null,this.g="",this.h=!1}Li(k1,hi),Li(P1,hi),Li(nm,Yy),nm.prototype.g=function(){return new XMLHttpRequest},nm.prototype.i=function(){return{}},O1=new nm;var LF=45e3,$I={},F1={};function HI(n,t,e){n.K=1,n.v=ev(Gl(t)),n.s=e,n.U=!0,QM(n,null)}function QM(n,t){n.F=Date.now(),Qy(n),n.A=Gl(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),G1(e.h,"t",r),n.C=0,e=n.l.H,n.h=new KM,n.g=fR(n.l,e?t:null,!n.s),0<n.O&&(n.L=new D1(Fi(n.Ia,n,n.g),n.O)),LI(n.V,n.g,"readystatechange",n.gb),t=n.H?NI(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Xg(1),function(n,t,e,r,i,a){n.info(function(){if(n.g)if(a)for(var d="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var T=w[0];w=w[1];var S=T.split("_");d=2<=S.length&&"type"==S[1]?d+(T+"=")+w+"&":d+(T+"=redacted&")}}else d=null;else d=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function JM(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function XM(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=VF(n,e),i==F1){4==t&&(n.o=4,ts(14),r=!1),ac(n.j,n.m,null,"[Incomplete Response]");break}if(i==$I){n.o=4,ts(15),ac(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}ac(n.j,n.m,i,null),jI(n,i)}JM(n)&&i!=F1&&i!=$I&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ts(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),J1(t),t.L=!0,ts(11))):(ac(n.j,n.m,e,"[Invalid Chunked Response]"),Vf(n),Jy(n))}function VF(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?F1:(e=Number(t.substring(e,r)),isNaN(e)?$I:(r+=1)+e>t.length?F1:(t=t.substr(r,e),n.C=r+e,t))}function Qy(n){n.Y=Date.now()+n.P,eR(n,n.P)}function eR(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=em(Fi(n.eb,n),t)}function L1(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function Jy(n){0==n.l.G||n.I||X1(n.l,n)}function Vf(n){L1(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Wy(n.W),I1(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function jI(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||KI(e.i,n)))if(e.I=n.N,!n.J&&KI(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=em(Fi(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;av(e),dm(e)}Q1(e),ts(18)}if(1>=YI(e.i)&&e.ka){try{e.ka()}catch(w){}e.ka=void 0}}else Gd(e,11)}else if((n.J||e.g==n)&&av(e),!kf(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let w=i[t];if(e.U=w[0],w=w[1],2==e.G)if("c"==w[0]){e.J=w[1],e.la=w[2];const T=w[3];null!=T&&(e.ma=T,e.h.info("VER="+e.ma));const S=w[4];null!=S&&(e.za=S,e.h.info("SVER="+e.za));const M=w[5];null!=M&&"number"==typeof M&&0<M&&(e.K=r=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const V=n.g;if(V){const Y=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var a=r.i;!a.g&&(Xi(Y,"spdy")||Xi(Y,"quic")||Xi(Y,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(QI(a,a.h),a.h=null))}if(r.D){const ue=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,Nr(r.F,r.D,ue))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var d=n;if((r=e).oa=aS(r,r.H?r.la:null,r.W),d.J){tv(r.i,d);var f=d,_=r.K;_&&f.setTimeout(_),f.B&&(L1(f),Qy(f)),r.g=d}else sS(r);0<e.l.length&&Bs(e)}else"stop"!=w[0]&&"close"!=w[0]||Gd(e,7);else 3==e.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Gd(e,7):sv(e):"noop"!=w[0]&&e.j&&e.j.wa(w),e.A=0)}Xg(4)}catch(w){}}function V1(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(Ly(n)||"string"==typeof n)TI(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(Ly(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ly(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],e&&e[a],n)}}function Bf(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Bf)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function B1(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];Uf(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)Uf(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function Uf(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(ut=Ky.prototype).setTimeout=function(n){this.P=n},ut.gb=function(n){n=n.target;const t=this.L;t&&3==Wl(n)?t.l():this.Ia(n)},ut.Ia=function(n){try{if(n==this.g)e:{const T=Wl(this.g);var t=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||By||this.g&&(this.h.h||this.g.ga()||z1(this.g)))){this.I||4!=T||7==t||Xg(8==t||0>=S?3:2),L1(this);var e=this.g.ba();this.N=e;t:if(JM(this)){var r=z1(this.g);n="";var i=r.length,a=4==Wl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vf(this),Jy(this);var d="";break t}this.h.i=new Vt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:a&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,a,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+a+" "+d})}(this.j,this.u,this.A,this.m,this.X,T,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kf(f)){var w=f;break t}}w=null}if(!(e=w)){this.i=!1,this.o=3,ts(12),Vf(this),Jy(this);break e}ac(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,jI(this,e)}this.U?(XM(this,T,d),By&&this.i&&3==T&&(LI(this.V,this.W,"tick",this.fb),this.W.start())):(ac(this.j,this.m,d,null),jI(this,d)),4==T&&Vf(this),this.i&&!this.I&&(4==T?X1(this.l,this):(this.i=!1,Qy(this)))}else 400==e&&0<d.indexOf("Unknown SID")?(this.o=3,ts(12)):(this.o=0,ts(13)),Vf(this),Jy(this)}}}catch(T){}},ut.fb=function(){if(this.g){var n=Wl(this.g),t=this.g.ga();this.C<t.length&&(L1(this),XM(this,n,t),this.i&&4!=n&&Qy(this))}},ut.cancel=function(){this.I=!0,Vf(this)},ut.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Xg(3),ts(17)),Vf(this),this.o=2,Jy(this)):eR(this,this.Y-n)},(ut=Bf.prototype).R=function(){B1(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},ut.T=function(){return B1(this),this.g.concat()},ut.get=function(n,t){return Uf(this.h,n)?this.h[n]:t},ut.set=function(n,t){Uf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},ut.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],a=this.get(i);n.call(t,a,i,this)}};var tR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $d(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $d){this.g=void 0!==t?t:n.g,Xy(this,n.j),this.s=n.s,U1(this,n.i),$1(this,n.m),this.l=n.l,t=n.h;var e=new $f;e.i=t.i,t.g&&(e.g=new Bf(t.g),e.h=t.h),nR(this,e),this.o=n.o}else n&&(e=String(n).match(tR))?(this.g=!!t,Xy(this,e[1]||"",!0),this.s=Hd(e[2]||""),U1(this,e[3]||"",!0),$1(this,e[4]),this.l=Hd(e[5]||"",!0),nR(this,e[6]||"",!0),this.o=Hd(e[7]||"")):(this.g=!!t,this.h=new $f(null,this.g))}function Gl(n){return new $d(n)}function Xy(n,t,e){n.j=e?Hd(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function U1(n,t,e){n.i=e?Hd(t,!0):t}function $1(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function nR(n,t,e){t instanceof $f?(n.h=t,function(n,t){t&&!n.j&&(jd(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(j1(this,r),G1(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=il(t,WI)),n.h=new $f(t,n.g))}function Nr(n,t,e){n.h.set(t,e)}function ev(n){return Nr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Hd(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function il(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,GI),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function GI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$d.prototype.toString=function(){var n=[],t=this.j;t&&n.push(il(t,qI,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(il(t,qI,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(il(e,"/"==e.charAt(0)?H1:iR,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",il(e,ZI)),n.join("")};var qI=/[#\/\?@]/g,iR=/[#\?:]/g,H1=/[#\?]/g,WI=/[#\?@]/g,ZI=/#/g;function $f(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function jd(n){n.g||(n.g=new Bf,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var a=n[e].substring(0,r);i=n[e].substring(r+1)}else a=n[e];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function j1(n,t){jd(n),t=im(n,t),Uf(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Uf((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&B1(n)))}function rm(n,t){return jd(n),t=im(n,t),Uf(n.g.h,t)}function G1(n,t,e){j1(n,t),0<e.length&&(n.i=null,n.g.set(im(n,t),n1(e)),n.h+=e.length)}function im(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function zI(n){this.l=n||GF,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ea&&Vt.g.Ea()&&Vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ut=$f.prototype).add=function(n,t){jd(this),this.i=null,n=im(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},ut.forEach=function(n,t){jd(this),this.g.forEach(function(e,r){TI(e,function(i){n.call(t,i,r,this)},this)},this)},ut.T=function(){jd(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],a=0;a<i.length;a++)e.push(t[r]);return e},ut.R=function(n){jd(this);var t=[];if("string"==typeof n)rm(this,n)&&(t=t1(t,this.g.get(im(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=t1(t,n[e])}return t},ut.set=function(n,t){return jd(this),this.i=null,rm(this,n=im(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},ut.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var d=i;""!==r[a]&&(d+="="+encodeURIComponent(String(r[a]))),n.push(d)}}return this.i=n.join("&")};var GF=10;function sm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YI(n){return n.h?1:n.g?n.g.size:0}function KI(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function QI(n,t){n.g?n.g.add(t):n.h=t}function tv(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function JI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return n1(n.i)}function XI(){}function qF(){this.g=new XI}function sR(n,t,e){const r=e||"";try{V1(n,function(i,a){let d=i;Mf(i)&&(d=Vi(i)),t.push(r+a+"="+encodeURIComponent(d))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function om(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function am(n){this.l=n.$b||null,this.j=n.ib||!1}function q1(n,t){fi.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=eS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zI.prototype.cancel=function(){if(this.i=JI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},XI.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},XI.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Li(am,Yy),am.prototype.g=function(){return new q1(this.l,this.j)},am.prototype.i=function(n){return function(){return n}}({}),Li(q1,fi);var eS=0;function tS(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ql(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lm(n)}function lm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ut=q1.prototype).open=function(n,t){if(this.readyState!=eS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,lm(this)},ut.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Vt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ql(this)),this.readyState=eS},ut.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lm(this)),this.g&&(this.readyState=3,lm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tS(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ut.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?ql(this):lm(this),3==this.readyState&&tS(this)}},ut.Ua=function(n){this.g&&(this.response=this.responseText=n,ql(this))},ut.Ta=function(n){this.g&&(this.response=n,ql(this))},ut.ha=function(){this.g&&ql(this)},ut.setRequestHeader=function(n,t){this.v.append(n,t)},ut.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ut.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(q1.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oR=Vt.JSON.parse;function Jr(n){fi.call(this),this.headers=new Bf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nv,this.K=this.L=!1}Li(Jr,fi);var nv="",aR=/^https?$/i,io=["POST","PUT"];function W1(n){return"content-type"==n.toLowerCase()}function nS(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,rS(n),um(n)}function rS(n){n.D||(n.D=!0,wi(n,"complete"),wi(n,"error"))}function rv(n){if(n.h&&void 0!==ro&&(!n.C[1]||4!=Wl(n)||2!=n.ba()))if(n.v&&4==Wl(n))Zy(n.Fa,0,n);else if(wi(n,"readystatechange"),4==Wl(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===f){var i=String(n.H).match(tR)[1]||null;if(!i&&Vt.self&&Vt.self.location){var a=Vt.self.location.protocol;i=a.substr(0,a.length-1)}r=!aR.test(i?i.toLowerCase():"")}e=r}if(e)wi(n,"complete"),wi(n,"success");else{n.m=6;try{var d=2<Wl(n)?n.g.statusText:""}catch(_){d=""}n.j=d+" ["+n.ba()+"]",rS(n)}}finally{um(n)}}}function um(n,t){if(n.g){Z1(n);const e=n.g,r=n.C[0]?Fy:null;n.g=null,n.C=null,t||wi(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function Z1(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Wl(n){return n.g?n.g.readyState:0}function z1(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Y1(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return r1(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Nr(n,t,e))}function cm(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function iv(n){this.za=0,this.l=[],this.h=new Bd,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=cm("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=cm("baseRetryDelayMs",5e3,n),this.$a=cm("retryDelaySeedMs",1e4,n),this.Ya=cm("forwardChannelMaxRetries",2,n),this.ra=cm("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new zI(n&&n.concurrentRequestLimit),this.Ca=new qF,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sv(n){if(ov(n),3==n.G){var t=n.V++,e=Gl(n.F);Nr(e,"SID",n.J),Nr(e,"RID",t),Nr(e,"TYPE","terminate"),hm(n,e),(t=new Ky(n,n.h,t,void 0)).K=2,t.v=ev(Gl(e)),e=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(e=Vt.navigator.sendBeacon(t.v.toString(),"")),!e&&Vt.Image&&((new Image).src=t.v,e=!0),e||(t.g=fR(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Qy(t)}eC(n)}function dm(n){n.g&&(J1(n),n.g.cancel(),n.g=null)}function ov(n){dm(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),av(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function K1(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&Bs(n)}function Bs(n){sm(n.i)||n.m||(n.m=!0,E1(n.Ha,n),n.C=0)}function cR(n,t){var e;e=t?t.m:n.V++;const r=Gl(n.F);Nr(r,"SID",n.J),Nr(r,"RID",e),Nr(r,"AID",n.U),hm(n,r),n.o&&n.s&&Y1(r,n.o,n.s),e=new Ky(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=dR(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),QI(n.i,e),HI(e,r,t)}function hm(n,t){n.j&&V1({},function(e,r){Nr(t,r,e)})}function dR(n,t,e){e=Math.min(n.l.length,e);var r=n.j?Fi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const d=["count="+e];-1==a?0<e?(a=i[0].h,d.push("ofs="+a)):a=0:d.push("ofs="+a);let f=!0;for(let _=0;_<e;_++){let w=i[_].h;const T=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),f=!1;else try{sR(T,d,"req"+w+"_")}catch(S){r&&r(T)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function sS(n){n.g||n.u||(n.Y=1,E1(n.Ga,n),n.A=0)}function Q1(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=em(Fi(n.Ga,n),oS(n,n.A)),n.A++,0))}function J1(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function hR(n){n.g=new Ky(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Gl(n.oa);Nr(t,"RID","rpc"),Nr(t,"SID",n.J),Nr(t,"CI",n.N?"0":"1"),Nr(t,"AID",n.U),hm(n,t),Nr(t,"TYPE","xmlhttp"),n.o&&n.s&&Y1(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=ev(Gl(t)),e.s=null,e.U=!0,QM(e,n)}function av(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function X1(n,t){var e=null;if(n.g==t){av(n),J1(n),n.g=null;var r=2}else{if(!KI(n.i,t))return;e=t.D,tv(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;wi(r=Jg(),new BI(r,e,t,i)),Bs(n)}else sS(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(YI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=em(Fi(n.Ha,n,t),oS(n,n.C)),n.C++,0)))}(n,t)||2==r&&Q1(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:Gd(n,5);break;case 4:Gd(n,10);break;case 3:Gd(n,6);break;default:Gd(n,2)}}function oS(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Gd(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=Fi(n.jb,n);e||(e=new $d("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Xy(e,"https"),ev(e)),function(n,t){const e=new Bd;if(Vt.Image){const r=new Image;r.onload=Xw(om,e,r,"TestLoadImage: loaded",!0,t),r.onerror=Xw(om,e,r,"TestLoadImage: error",!1,t),r.onabort=Xw(om,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=Xw(om,e,r,"TestLoadImage: timeout",!1,t),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else ts(2);n.G=0,n.j&&n.j.va(t),eC(n),ov(n)}function eC(n){n.G=0,n.I=-1,n.j&&((0!=JI(n.i).length||0!=n.l.length)&&(n.i.i.length=0,n1(n.l),n.l.length=0),n.j.ua())}function aS(n,t,e){let r=function(n){return n instanceof $d?Gl(n):new $d(n,void 0)}(e);if(""!=r.i)t&&U1(r,t+"."+r.i),$1(r,r.m);else{const i=Vt.location;r=function(n,t,e,r){var i=new $d(null,void 0);return n&&Xy(i,n),t&&U1(i,t),e&&$1(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&r1(n.aa,function(i,a){Nr(r,a,i)}),e=n.sa,(t=n.D)&&e&&Nr(r,t,e),Nr(r,"VER",n.ma),hm(n,r),r}function fR(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Jr(e&&n.Ba&&!n.qa?new am({ib:!0}):n.qa)).L=n.H,t}function tC(){}function fm(){if(Vd&&!(10<=Number(rl)))throw Error("Environmental error: no available transport.")}function so(n,t){fi.call(this),this.g=new iv(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!kf(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kf(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new sl(this)}function lS(n){k1.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function nC(){P1.call(this),this.status=1}function sl(n){this.g=n}(ut=Jr.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():O1.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:O1),this.g.onreadystatechange=Fi(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(a){return void nS(this,a)}n=e||"";const i=new Bf(this.headers);r&&V1(r,function(a,d){i.set(d,a)}),r=function(n){e:{var t=W1;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=Vt.FormData&&n instanceof Vt.FormData,!(0<=e1(io,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,d){this.g.setRequestHeader(d,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Z1(this),0<this.B&&((this.K=function(n){return Vd&&qg()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.pa,this)):this.A=Zy(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){nS(this,a)}},ut.pa=function(){void 0!==ro&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wi(this,"timeout"),this.abort(8))},ut.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,wi(this,"complete"),wi(this,"abort"),um(this))},ut.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),um(this,!0)),Jr.Z.M.call(this)},ut.Fa=function(){this.s||(this.F||this.v||this.l?rv(this):this.cb())},ut.cb=function(){rv(this)},ut.ba=function(){try{return 2<Wl(this)?this.g.status:-1}catch(n){return-1}},ut.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ut.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),oR(t)}},ut.Da=function(){return this.m},ut.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ut=iv.prototype).ma=8,ut.G=1,ut.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},ut.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Ky(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=NI(a),MI(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=dR(this,i,t),Nr(e=Gl(this.F),"RID",n),Nr(e,"CVER",22),this.D&&Nr(e,"X-HTTP-Session-Id",this.D),hm(this,e),this.o&&a&&Y1(e,this.o,a),QI(this.i,i),this.Ra&&Nr(e,"TYPE","init"),this.ja?(Nr(e,"$req",t),Nr(e,"SID","null"),i.$=!0,HI(i,e,null)):HI(i,e,t),this.G=2}}else 3==this.G&&(n?cR(this,n):0==this.l.length||sm(this.i)||cR(this))},ut.Ga=function(){if(this.u=null,hR(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=em(Fi(this.bb,this),n)}},ut.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ts(10),dm(this),hR(this))},ut.ab=function(){null!=this.v&&(this.v=null,dm(this),Q1(this),ts(19))},ut.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ts(2)):(this.h.info("Failed to ping google.com"),ts(1))},(ut=tC.prototype).xa=function(){},ut.wa=function(){},ut.va=function(){},ut.ua=function(){},ut.Oa=function(){},fm.prototype.g=function(n,t){return new so(n,t)},Li(so,fi),so.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),E1(Fi(n.hb,n,t))),ts(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=aS(n,null,n.W),Bs(n)},so.prototype.close=function(){sv(this.g)},so.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,K1(this.g,t)}else this.v?((t={}).__data__=Vi(n),K1(this.g,t)):K1(this.g,n)},so.prototype.M=function(){this.g.j=null,delete this.j,sv(this.g),delete this.g,so.Z.M.call(this)},Li(lS,k1),Li(nC,P1),Li(sl,tC),sl.prototype.xa=function(){wi(this.g,"a")},sl.prototype.wa=function(n){wi(this.g,new lS(n))},sl.prototype.va=function(n){wi(this.g,new nC(n))},sl.prototype.ua=function(){wi(this.g,"b")},fm.prototype.createWebChannel=fm.prototype.g,so.prototype.send=so.prototype.u,so.prototype.open=so.prototype.m,so.prototype.close=so.prototype.close,tm.NO_ERROR=0,tm.TIMEOUT=8,tm.HTTP_ERROR=6,UI.COMPLETE="complete",R1.EventType=Lf,Lf.OPEN="a",Lf.CLOSE="b",Lf.ERROR="c",Lf.MESSAGE="d",fi.prototype.listen=fi.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var rC=Cr.createWebChannelTransport=function(){return new fm},uS=Cr.getStatEventTarget=function(){return Jg()},iC=Cr.ErrorCode=tm,pR=Cr.EventType=UI,ZF=Cr.Event=Ud,gR=Cr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zF=Cr.FetchXmlHttpFactory=am,pm=Cr.WebChannel=R1,cS=Cr.XhrIo=Jr;const dS="@firebase/firestore";class Bi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let Hf="9.6.11";const lc=new da.Yd("@firebase/firestore");function lv(){return lc.logLevel}function He(n,...t){if(lc.logLevel<=da.in.DEBUG){const e=t.map(ei);lc.debug(`Firestore (${Hf}): ${n}`,...e)}}function Xr(n,...t){if(lc.logLevel<=da.in.ERROR){const e=t.map(ei);lc.error(`Firestore (${Hf}): ${n}`,...e)}}function qd(n,...t){if(lc.logLevel<=da.in.WARN){const e=t.map(ei);lc.warn(`Firestore (${Hf}): ${n}`,...e)}}function ei(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function ft(n="Unexpected state"){const t=`FIRESTORE (${Hf}) INTERNAL ASSERTION FAILED: `+n;throw Xr(t),new Error(t)}function Ot(n,t){n||ft()}function tt(n,t){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends F.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ci{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class sC{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Wd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Bi.UNAUTHENTICATED))}shutdown(){}}class fS{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class oC{constructor(t){this.t=t,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,e(w)):Promise.resolve();let d=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ci,t.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=d;t.enqueueRetryable((0,ve.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ci)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ot("string"==typeof r.accessToken),new sC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ot(null===t||"string"==typeof t),new Bi(t)}}class aC{constructor(t,e,r){this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class mR{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new aC(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gm{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _R{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=a=>{null!=a.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const d=a.token!==this.p;return this.p=a.token,He("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>r(a))};const i=a=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ot("string"==typeof e.token),this.p=e.token,new gm(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Us{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function Ei(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Us.A=-1;class yR{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Ei(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<e&&(r+=t.charAt(i[a]%t.length))}return r}}function Kt(n,t){return n<t?-1:n>t?1:0}function jf(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function vR(n){return n+"\0"}class Er{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Pe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Pe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Er.fromMillis(Date.now())}static fromDate(t){return Er.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Er(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new xt(t)}static min(){return new xt(new Er(0,0))}static max(){return new xt(new Er(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function bR(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Gf(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function wR(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class mm{constructor(t,e,r){void 0===e?e=0:e>t.length&&ft(),void 0===r?r=t.length-e:r>t.length-e&&ft(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===mm.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof mm?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const a=t.get(i),d=e.get(i);if(a<d)return-1;if(a>d)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Cn extends mm{construct(t,e,r){return new Cn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Cn(e)}static emptyPath(){return new Cn([])}}const CR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends mm{construct(t,e,r){return new Di(t,e,r)}static isValidIdentifier(t){return CR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Di(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let d=!1;for(;i<t.length;){const f=t[i];if("\\"===f){if(i+1===t.length)throw new Pe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const _=t[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Pe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=_,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(a(),i++)}if(a(),d)throw new Pe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Di(e)}static emptyPath(){return new Di([])}}class qf{constructor(t){this.fields=t,t.sort(Di.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return jf(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class pi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new pi(e)}static fromUint8Array(t){const e=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(t);return new pi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const ER=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uc(n){if(Ot(!!n),"string"==typeof n){let t=0;const e=ER.exec(n);if(Ot(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Zr(n.seconds),nanos:Zr(n.nanos)}}function Zr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wf(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function lC(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function gS(n){const t=n.mapValue.fields.__previous_value__;return lC(t)?gS(t):t}function _m(n){const t=uc(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(t.seconds,t.nanos)}class DR{constructor(t,e,r,i,a,d,f,_){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class Zl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Zl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Zl&&t.projectId===this.projectId&&t.database===this.database}}function Ui(n){return null==n}function ym(n){return 0===n&&1/n==-1/0}function mS(n){return"number"==typeof n&&Number.isInteger(n)&&!ym(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(t){this.path=t}static fromPath(t){return new ze(Cn.fromString(t))}static fromName(t){return new ze(Cn.fromString(t).popFirst(5))}static empty(){return new ze(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Cn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Cn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ze(new Cn(t.slice()))}}const _S={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},TR={nullValue:"NULL_VALUE"};function Zd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lC(n)?4:IR(n)?9:10:ft()}function ol(n,t){if(n===t)return!0;const e=Zd(n);if(e!==Zd(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return _m(n).isEqual(_m(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=uc(r.timestampValue),d=uc(i.timestampValue);return a.seconds===d.seconds&&a.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,Wf(n.bytesValue).isEqual(Wf(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Zr(r.geoPointValue.latitude)===Zr(i.geoPointValue.latitude)&&Zr(r.geoPointValue.longitude)===Zr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Zr(r.integerValue)===Zr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Zr(r.doubleValue),d=Zr(i.doubleValue);return a===d?ym(a)===ym(d):isNaN(a)&&isNaN(d)}return!1}(n,t);case 9:return jf(n.arrayValue.values||[],t.arrayValue.values||[],ol);case 10:return function(r,i){const a=r.mapValue.fields||{},d=i.mapValue.fields||{};if(bR(a)!==bR(d))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===d[f]||!ol(a[f],d[f])))return!1;return!0}(n,t);default:return ft()}var i}function vm(n,t){return void 0!==(n.values||[]).find(e=>ol(e,t))}function Uo(n,t){if(n===t)return 0;const e=Zd(n),r=Zd(t);if(e!==r)return Kt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return function(i,a){const d=Zr(i.integerValue||i.doubleValue),f=Zr(a.integerValue||a.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,t);case 3:return uC(n.timestampValue,t.timestampValue);case 4:return uC(_m(n),_m(t));case 5:return Kt(n.stringValue,t.stringValue);case 6:return function(i,a){const d=Wf(i),f=Wf(a);return d.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(i,a){const d=i.split("/"),f=a.split("/");for(let _=0;_<d.length&&_<f.length;_++){const w=Kt(d[_],f[_]);if(0!==w)return w}return Kt(d.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,a){const d=Kt(Zr(i.latitude),Zr(a.latitude));return 0!==d?d:Kt(Zr(i.longitude),Zr(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,a){const d=i.values||[],f=a.values||[];for(let _=0;_<d.length&&_<f.length;++_){const w=Uo(d[_],f[_]);if(w)return w}return Kt(d.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,a){const d=i.fields||{},f=Object.keys(d),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let T=0;T<f.length&&T<w.length;++T){const S=Kt(f[T],w[T]);if(0!==S)return S;const M=Uo(d[f[T]],_[w[T]]);if(0!==M)return M}return Kt(f.length,w.length)}(n.mapValue,t.mapValue);default:throw ft()}}function uC(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Kt(n,t);const e=uc(n),r=uc(t),i=Kt(e.seconds,r.seconds);return 0!==i?i:Kt(e.nanos,r.nanos)}function bm(n){return cC(n)}function cC(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=uc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wf(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const d of r.values||[])a?a=!1:i+=",",i+=cC(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",d=!0;for(const f of i)d?d=!1:a+=",",a+=`${f}:${cC(r.fields[f])}`;return a+"}"}(n.mapValue):ft();var t}function Zf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function yS(n){return!!n&&"integerValue"in n}function uv(n){return!!n&&"arrayValue"in n}function cv(n){return!!n&&"nullValue"in n}function vS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dv(n){return!!n&&"mapValue"in n}function wm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Gf(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=wm(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=wm(n.arrayValue.values[e]);return t}return Object.assign({},n)}function IR(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function SR(n){return"nullValue"in n?TR:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zf(Zl.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function AR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zf(Zl.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_S:ft()}function bS(n,t){return void 0===n?t:void 0===t||Uo(n,t)>0?n:t}function $o(n,t){return void 0===n?t:void 0===t||Uo(n,t)<0?n:t}class Cs{constructor(t){this.value=t}static empty(){return new Cs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!dv(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=wm(e)}setAll(t){let e=Di.emptyPath(),r={},i=[];t.forEach((d,f)=>{if(!e.isImmediateParentOf(f)){const _=this.getFieldsMap(e);this.applyChanges(_,r,i),r={},i=[],e=f.popLast()}d?r[f.lastSegment()]=wm(d):i.push(f.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,r,i)}delete(t){const e=this.field(t.popLast());dv(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ol(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];dv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Gf(e,(i,a)=>t[i]=a);for(const i of r)delete t[i]}clone(){return new Cs(wm(this.value))}}function dC(n){const t=[];return Gf(n.fields,(e,r)=>{const i=new Di([e]);if(dv(r)){const a=dC(r.mapValue).fields;if(0===a.length)t.push(i);else for(const d of a)t.push(i.child(d))}else t.push(i)}),new qf(t)}class dr{constructor(t,e,r,i,a,d){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=a,this.documentState=d}static newInvalidDocument(t){return new dr(t,0,xt.min(),xt.min(),Cs.empty(),0)}static newFoundDocument(t,e,r){return new dr(t,1,e,xt.min(),r,0)}static newNoDocument(t,e){return new dr(t,2,e,xt.min(),Cs.empty(),0)}static newUnknownDocument(t,e){return new dr(t,3,e,xt.min(),Cs.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof dr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Cm{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function hv(n){return n.fields.find(t=>2===t.kind)}function cc(n){return n.fields.filter(t=>2!==t.kind)}Cm.UNKNOWN_ID=-1;class zf{constructor(t,e){this.fieldPath=t,this.kind=e}}class zd{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new zd(0,Ho.min())}}function fv(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(1e9===r?new Er(e+1,0):new Er(e,r));return new Ho(i,ze.empty(),t)}function pv(n){return new Ho(n.readTime,n.key,-1)}class Ho{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Ho(xt.min(),ze.empty(),-1)}static max(){return new Ho(xt.max(),ze.empty(),-1)}}function wS(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=ze.comparator(n.documentKey,t.documentKey),0!==e?e:Kt(n.largestBatchId,t.largestBatchId))}class CS{constructor(t,e=null,r=[],i=[],a=null,d=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=d,this.endAt=f,this.P=null}}function ES(n,t=null,e=[],r=[],i=null,a=null,d=null){return new CS(n,t,e,r,i,a,d)}function Yd(n){const t=tt(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+bm(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ui(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>bm(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>bm(r)).join(",")),t.P=e}return t.P}function Em(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!xR(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!ol(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!AS(n.startAt,t.startAt)&&AS(n.endAt,t.endAt)}function gv(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mv(n,t){return n.filters.filter(e=>e instanceof Fn&&e.field.isEqual(t))}function _v(n,t,e){let r,i=!0;for(const a of mv(n,t)){let d,f=!0;switch(a.op){case"<":case"<=":d=SR(a.value);break;case"==":case"in":case">=":d=a.value;break;case">":d=a.value,f=!1;break;case"!=":case"not-in":d=TR}bS(r,d)===d&&(r=d,i=f)}if(null!==e)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const d=e.position[a];bS(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}function TS(n,t,e){let r,i=!0;for(const a of mv(n,t)){let d,f=!0;switch(a.op){case">=":case">":d=AR(a.value),f=!1;break;case"==":case"in":case"<=":d=a.value;break;case"<":d=a.value,f=!1;break;case"!=":case"not-in":d=_S}$o(r,d)===d&&(r=d,i=f)}if(null!==e)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const d=e.position[a];$o(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}class Fn extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new Dm(t,e,r):"array-contains"===e?new hC(t,r):"in"===e?new SS(t,r):"not-in"===e?new vv(t,r):"array-contains-any"===e?new NR(t,r):new Fn(t,e,r)}static V(t,e,r){return"in"===e?new yv(t,r):new IS(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Uo(e,this.value)):null!==e&&Zd(this.value)===Zd(e)&&this.v(Uo(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ft()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Dm extends Fn{constructor(t,e,r){super(t,e,r),this.key=ze.fromName(r.referenceValue)}matches(t){const e=ze.comparator(t.key,this.key);return this.v(e)}}class yv extends Fn{constructor(t,e){super(t,"in",e),this.keys=Tm(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class IS extends Fn{constructor(t,e){super(t,"not-in",e),this.keys=Tm(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Tm(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>ze.fromName(r.referenceValue))}class hC extends Fn{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return uv(e)&&vm(e.arrayValue,this.value)}}class SS extends Fn{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&vm(this.value.arrayValue,e)}}class vv extends Fn{constructor(t,e){super(t,"not-in",e)}matches(t){if(vm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!vm(this.value.arrayValue,e)}}class NR extends Fn{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!uv(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>vm(this.value.arrayValue,r))}}class dc{constructor(t,e){this.position=t,this.inclusive=e}}class Yf{constructor(t,e="asc"){this.field=t,this.dir=e}}function xR(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function fC(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const a=t[i],d=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(d.referenceValue),e.key):Uo(d,e.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function AS(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!ol(n.position[e],t.position[e]))return!1;return!0}class zl{constructor(t,e=null,r=[],i=[],a=null,d="F",f=null,_=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=d,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function NS(n,t,e,r,i,a,d,f){return new zl(n,t,e,r,i,a,d,f)}function oo(n){return new zl(n)}function hc(n){return!Ui(n.limit)&&"F"===n.limitType}function Kf(n){return!Ui(n.limit)&&"L"===n.limitType}function pC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gC(n){for(const t of n.filters)if(t.S())return t.field;return null}function mC(n){return null!==n.collectionGroup}function fc(n){const t=tt(n);if(null===t.D){t.D=[];const e=gC(t),r=pC(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new Yf(e)),t.D.push(new Yf(Di.keyField(),"asc"));else{let i=!1;for(const a of t.explicitOrderBy)t.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Yf(Di.keyField(),a))}}}return t.D}function jo(n){const t=tt(n);if(!t.C)if("F"===t.limitType)t.C=ES(t.path,t.collectionGroup,fc(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const a of fc(t))e.push(new Yf(a.field,"desc"===a.dir?"asc":"desc"));const r=t.endAt?new dc(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new dc(t.startAt.position,!t.startAt.inclusive):null;t.C=ES(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function _C(n,t,e){return new zl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Qf(n,t){return Em(jo(n),jo(t))&&n.limitType===t.limitType}function xS(n){return`${Yd(jo(n))}|lt:${n.limitType}`}function yC(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${bm(r.value)}`;var r}).join(", ")}]`),Ui(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>bm(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>bm(e)).join(",")),`Target(${t})`}(jo(n))}; limitType=${n.limitType})`}function vC(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):ze.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,a,d){const f=fC(i,a,d);return i.inclusive?f<=0:f<0}(e.startAt,fc(e),r)||e.endAt&&!function(i,a,d){const f=fC(i,a,d);return i.inclusive?f>=0:f>0}(e.endAt,fc(e),r)));var e,r}function al(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jf(n){return(t,e)=>{let r=!1;for(const i of fc(n)){const a=Xf(i,t,e);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Xf(n,t,e){const r=n.field.isKeyField()?ze.comparator(t.key,e.key):function(i,a,d){const f=a.data.field(i),_=d.data.field(i);return null!==f&&null!==_?Uo(f,_):ft()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function Im(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ym(t)?"-0":t}}function Kd(n){return{integerValue:""+n}}function MS(n,t){return mS(t)?Kd(t):Im(n,t)}class bv{constructor(){this._=void 0}}function MR(n,t,e){return n instanceof Qd?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(e,t):n instanceof pc?wv(n,t):n instanceof Jd?kS(n,t):function(r,i){const a=bC(r,i),d=gc(a)+gc(r.k);return yS(a)&&yS(r.k)?Kd(d):Im(r.M,d)}(n,t)}function RS(n,t,e){return n instanceof pc?wv(n,t):n instanceof Jd?kS(n,t):e}function bC(n,t){return n instanceof Xd?yS(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class Qd extends bv{}class pc extends bv{constructor(t){super(),this.elements=t}}function wv(n,t){const e=Cv(t);for(const r of n.elements)e.some(i=>ol(i,r))||e.push(r);return{arrayValue:{values:e}}}class Jd extends bv{constructor(t){super(),this.elements=t}}function kS(n,t){let e=Cv(t);for(const r of n.elements)e=e.filter(i=>!ol(i,r));return{arrayValue:{values:e}}}class Xd extends bv{constructor(t,e){super(),this.M=t,this.k=e}}function gc(n){return Zr(n.integerValue||n.doubleValue)}function Cv(n){return uv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Sm{constructor(t,e){this.field=t,this.transform=e}}class QF{constructor(t,e){this.version=t,this.transformResults=e}}class gi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new gi}static exists(t){return new gi(void 0,t)}static updateTime(t){return new gi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wC(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class CC{}function kR(n,t,e){n instanceof Ev?function(r,i,a){const d=r.value.clone(),f=LR(r.fieldTransforms,i,a.transformResults);d.setAll(f),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,t,e):n instanceof eh?function(r,i,a){if(!wC(r.precondition,i))return void i.convertToUnknownDocument(a.version);const d=LR(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(FR(r)),f.setAll(d),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function EC(n,t,e){var i;n instanceof Ev?function(r,i,a){if(!wC(r.precondition,i))return;const d=r.value.clone(),f=VR(r.fieldTransforms,a,i);d.setAll(f),i.convertToFoundDocument(OR(i),d).setHasLocalMutations()}(n,t,e):n instanceof eh?function(r,i,a){if(!wC(r.precondition,i))return;const d=VR(r.fieldTransforms,a,i),f=i.data;f.setAll(FR(r)),f.setAll(d),i.convertToFoundDocument(OR(i),f).setHasLocalMutations()}(n,t,e):wC(n.precondition,i=t)&&i.convertToNoDocument(xt.min())}function JF(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),a=bC(r.transform,i||null);null!=a&&(null==e&&(e=Cs.empty()),e.set(r.field,a))}return e||null}function PR(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&jf(e,r,(i,a)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof pc&&r instanceof pc||e instanceof Jd&&r instanceof Jd?jf(e.elements,r.elements,ol):e instanceof Xd&&r instanceof Xd?ol(e.k,r.k):e instanceof Qd&&r instanceof Qd);var e,r}(i,a))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function OR(n){return n.isFoundDocument()?n.version:xt.min()}class Ev extends CC{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class eh extends CC{constructor(t,e,r,i,a=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function FR(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function LR(n,t,e){const r=new Map;Ot(n.length===e.length);for(let i=0;i<e.length;i++){const a=n[i],d=a.transform,f=t.data.field(a.field);r.set(a.field,RS(d,f,e[i]))}return r}function VR(n,t,e){const r=new Map;for(const i of n){const a=i.transform,d=e.data.field(i.field);r.set(i.field,MR(a,d,t))}return r}class Dv extends CC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class s extends CC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class o{constructor(t){this.count=t}}var u,c;function h(n){switch(n){default:return ft();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function p(n){if(void 0===n)return Xr("GRPC error has no .code"),me.UNKNOWN;switch(n){case u.OK:return me.OK;case u.CANCELLED:return me.CANCELLED;case u.UNKNOWN:return me.UNKNOWN;case u.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case u.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case u.INTERNAL:return me.INTERNAL;case u.UNAVAILABLE:return me.UNAVAILABLE;case u.UNAUTHENTICATED:return me.UNAUTHENTICATED;case u.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case u.NOT_FOUND:return me.NOT_FOUND;case u.ALREADY_EXISTS:return me.ALREADY_EXISTS;case u.PERMISSION_DENIED:return me.PERMISSION_DENIED;case u.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case u.ABORTED:return me.ABORTED;case u.OUT_OF_RANGE:return me.OUT_OF_RANGE;case u.UNIMPLEMENTED:return me.UNIMPLEMENTED;case u.DATA_LOSS:return me.DATA_LOSS;default:return ft()}}(c=u||(u={}))[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS";class m{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,t))return a}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return void(i[a]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Gf(this.inner,(e,r)=>{for(const[i,a]of r)t(i,a)})}isEmpty(){return wR(this.inner)}size(){return this.innerSize}}class v{constructor(t,e){this.comparator=t,this.root=e||D.EMPTY}insert(t,e){return new v(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,D.BLACK,null,null))}remove(t){return new v(this.comparator,this.root.remove(t,this.comparator).copy(null,null,D.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new C(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new C(this.root,t,this.comparator,!1)}getReverseIterator(){return new C(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new C(this.root,t,this.comparator,!0)}}class C{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?r(t.key,e):1,e&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class D{constructor(t,e,r,i,a){this.key=t,this.value=e,this.color=null!=r?r:D.RED,this.left=null!=i?i:D.EMPTY,this.right=null!=a?a:D.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,a){return new D(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const a=r(t,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===a?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return D.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return D.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,D.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,D.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const t=this.left.check();if(t!==this.right.check())throw ft();return t+(this.isRed()?0:1)}}D.EMPTY=null,D.RED=!0,D.BLACK=!1,D.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,t,e,r,i){return this}insert(n,t,e){return new D(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class N{constructor(t){this.comparator=t,this.data=new v(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new P(this.data.getIterator())}getIteratorFrom(t){return new P(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof N)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new N(this.comparator);return e.data=t,e}}class P{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function L(n){return n.hasNext()?n.getNext():void 0}const K=new v(ze.comparator);function X(){return K}const ge=new v(ze.comparator);function le(){return ge}function Fe(){return new m(n=>n.toString(),(n,t)=>n.isEqual(t))}const Ie=new v(ze.comparator),vt=new N(ze.comparator);function Qe(...n){let t=vt;for(const e of n)t=t.add(e);return t}const fn=new N(Kt);function Br(){return fn}class ns{constructor(t,e,r,i,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,Yl.createSynthesizedTargetChangeForCurrentChange(t,e)),new ns(xt.min(),r,Br(),X(),Qe())}}class Yl{constructor(t,e,r,i,a){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Yl(pi.EMPTY_BYTE_STRING,e,Qe(),Qe(),Qe())}}class Kl{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class th{constructor(t,e){this.targetId=t,this.$=e}}class nh{constructor(t,e,r=pi.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class Tv{constructor(){this.B=0,this.L=Sv(),this.U=pi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Qe(),e=Qe(),r=Qe();return this.L.forEach((i,a)=>{switch(a){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new Yl(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=Sv()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class DC{constructor(t){this.nt=t,this.st=new Map,this.it=X(),this.rt=Iv(),this.ot=new N(Kt)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:ft()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const a=i.target;if(gv(a))if(0===r){const d=new ze(a.path);this.ct(e,d,dr.newNoDocument(d,xt.min()))}else Ot(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((a,d)=>{const f=this.wt(d);if(f){if(a.current&&gv(f.target)){const _=new ze(f.target.path);null!==this.it.get(_)||this.It(d,_)||this.ct(d,_,dr.newNoDocument(_,t))}a.j&&(e.set(d,a.H()),a.J())}});let r=Qe();this.rt.forEach((a,d)=>{let f=!0;d.forEachWhile(_=>{const w=this.wt(_);return!w||2===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.it.forEach((a,d)=>d.setReadTime(t));const i=new ns(t,e,this.ot,this.it,r);return this.it=X(),this.rt=Iv(),this.ot=new N(Kt),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new Tv,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new N(Kt),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||He("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new Tv),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function Iv(){return new v(ze.comparator)}function Sv(){return new v(ze.comparator)}const TC={asc:"ASCENDING",desc:"DESCENDING"},w3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class C3{constructor(t,e){this.databaseId=t,this.N=e}}function IC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function XF(n,t){return n.N?t.toBase64():t.toUint8Array()}function E3(n,t){return IC(n,t.toTimestamp())}function rs(n){return Ot(!!n),xt.fromTimestamp(function(t){const e=uc(t);return new Er(e.seconds,e.nanos)}(n))}function BR(n,t){return(e=n,new Cn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function eL(n){const t=Cn.fromString(n);return Ot(uL(t)),t}function SC(n,t){return BR(n.databaseId,t.path)}function mc(n,t){const e=eL(t);if(e.get(1)!==n.databaseId.projectId)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Pe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new ze(nL(e))}function UR(n,t){return BR(n.databaseId,t)}function tL(n){const t=eL(n);return 4===t.length?Cn.emptyPath():nL(t)}function AC(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nL(n){return Ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rL(n,t,e){return{name:SC(n,t),fields:e.value.mapValue.fields}}function iL(n,t,e){const r=mc(n,t.name),i=rs(t.updateTime),a=new Cs({mapValue:{fields:t.fields}}),d=dr.newFoundDocument(r,i,a);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function NC(n,t){let e;if(t instanceof Ev)e={update:rL(n,t.key,t.value)};else if(t instanceof Dv)e={delete:SC(n,t.key)};else if(t instanceof eh)e={update:rL(n,t.key,t.data),updateMask:R3(t.fieldMask)};else{if(!(t instanceof s))return ft();e={verify:SC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const d=a.transform;if(d instanceof Qd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof pc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Jd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Xd)return{fieldPath:a.field.canonicalString(),increment:d.k};throw ft()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:E3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),e;var i}function $R(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?gi.updateTime(rs(i.updateTime)):void 0!==i.exists?gi.exists(i.exists):gi.none():gi.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,d){let f=null;"setToServerValue"in d?(Ot("REQUEST_TIME"===d.setToServerValue),f=new Qd):"appendMissingElements"in d?f=new pc(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new Jd(d.removeAllFromArray.values||[]):"increment"in d?f=new Xd(a,d.increment):ft();const _=Di.fromServerFormat(d.fieldPath);return new Sm(_,f)}(n,i)):[];var i;if(t.update){const i=mc(n,t.update.name),a=new Cs({mapValue:{fields:t.update.fields}});if(t.updateMask){const d=new qf((t.updateMask.fieldPaths||[]).map(w=>Di.fromServerFormat(w)));return new eh(i,a,d,e,r)}return new Ev(i,a,e,r)}if(t.delete){const i=mc(n,t.delete);return new Dv(i,e)}if(t.verify){const i=mc(n,t.verify);return new s(i,e)}return ft()}function sL(n,t){return{documents:[UR(n,t.path)]}}function oL(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=UR(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=UR(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(T=>function(S){if("=="===S.op){if(vS(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NAN"}};if(cv(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(vS(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NOT_NAN"}};if(cv(S.value))return{unaryFilter:{field:Av(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Av(S.field),op:N3(S.op),value:S.value}}}(T));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(t.filters);i&&(e.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Av((T=w).field),direction:A3(T.dir)};var T})}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const d=(w=t.limit,n.N||Ui(w)?w:{value:w});var w,f,_;return null!==d&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt={before:(f=t.startAt).inclusive,values:f.position}),t.endAt&&(e.structuredQuery.endAt={before:!(_=t.endAt).inclusive,values:_.position}),e}function aL(n){let t=tL(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Ot(1===r);const T=e.from[0];T.allDescendants?i=T.collectionId:t=t.child(T.collectionId)}let a=[];e.where&&(a=lL(e.where));let d=[];e.orderBy&&(d=e.orderBy.map(T=>{return new Yf(Nv((S=T).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;e.limit&&(f=function(T){let S;return S="object"==typeof T?T.value:T,Ui(S)?null:S}(e.limit));let _=null;var T;e.startAt&&(_=new dc((T=e.startAt).values||[],!!T.before));let w=null;return e.endAt&&(w=function(T){return new dc(T.values||[],!T.before)}(e.endAt)),NS(t,i,d,a,f,"F",_,w)}function lL(n){return n?void 0!==n.unaryFilter?[M3(n)]:void 0!==n.fieldFilter?[x3(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>lL(t)).reduce((t,e)=>t.concat(e)):ft():[]}function A3(n){return TC[n]}function N3(n){return w3[n]}function Av(n){return{fieldPath:n.canonicalString()}}function Nv(n){return Di.fromServerFormat(n.fieldPath)}function x3(n){return Fn.create(Nv(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function M3(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Nv(n.unaryFilter.field);return Fn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Nv(n.unaryFilter.field);return Fn.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nv(n.unaryFilter.field);return Fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nv(n.unaryFilter.field);return Fn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function R3(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function uL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ao(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=cL(t)),t=k3(n.get(e),t);return cL(t)}function k3(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=a}}return e}function cL(n){return n+"\x01\x01"}function _c(n){const t=n.length;if(Ot(t>=2),2===t)return Ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const e=t-2,r=[];let i="";for(let a=0;a<t;){const d=n.indexOf("\x01",a);switch((d<0||d>e)&&ft(),n.charAt(d+1)){case"\x01":const f=n.substring(a,d);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,d),i+="\0";break;case"\x11":i+=n.substring(a,d+1);break;default:ft()}a=d+2}return new Cn(r)}const dL=["userId","batchId"];function PS(n,t){return[n,ao(t)]}function hL(n,t,e){return[n,ao(t),e]}const P3={},O3=["prefixPath","collectionGroup","readTime","documentId"],F3=["prefixPath","collectionGroup","documentId"],L3=["collectionGroup","readTime","prefixPath","documentId"],V3=["canonicalId","targetId"],B3=["targetId","path"],U3=["path","targetId"],$3=["collectionId","parent"],H3=["indexId","uid"],j3=["uid","sequenceNumber"],G3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],q3=["indexId","uid","orderedDocumentKey"],W3=["userId","collectionPath","documentId"],Z3=["userId","collectionPath","largestBatchId"],z3=["userId","collectionGroup","largestBatchId"],fL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Y3=[...fL,"documentOverlays"],pL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],K3=[...pL,"indexConfiguration","indexState","indexEntries"],gL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class be{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new be((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(e,a).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof be?e:be.resolve(e)}catch(e){return be.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):be.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):be.reject(e)}static resolve(t){return new be((e,r)=>{e(t)})}static reject(t){return new be((e,r)=>{r(t)})}static waitFor(t){return new be((e,r)=>{let i=0,a=0,d=!1;t.forEach(f=>{++i,f.next(()=>{++a,d&&a===i&&e()},_=>r(_))}),d=!0,a===i&&e()})}static or(t){let e=be.resolve(!1);for(const r of t)e=e.next(i=>i?be.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,a)=>{r.push(e.call(this,i,a))}),this.waitFor(r)}}class OS{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Ci,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new xC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=HR(r.target.error);this.At.reject(new xC(t,i))}}static open(t,e,r,i){try{return new OS(e,t.transaction(i,r))}catch(a){throw new xC(e,a)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(He("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new J3(e)}}class Ql{constructor(t,e,r){this.name=t,this.version=e,this.bt=r,12.2===Ql.Vt((0,F.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return He("SimpleDb","Removing database:",t),Nm(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,F.hl)())return!1;if(Ql.St())return!0;const t=(0,F.z$)(),e=Ql.Vt(t),r=0<e&&e<10,i=Ql.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,ve.Z)(function*(){return e.db||(He("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const a=indexedDB.open(e.name,e.version);a.onsuccess=d=>{r(d.target.result)},a.onblocked=()=>{i(new xC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Pe(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Pe(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new xC(t,f))},a.onupgradeneeded=d=>{He("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',d.oldVersion),e.bt.kt(d.target.result,a.transaction,d.oldVersion,e.version).next(()=>{He("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var a=this;return(0,ve.Z)(function*(){const d="readonly"===e;let f=0;for(;;){++f;try{a.db=yield a.Nt(t);const _=OS.open(a.db,t,d?"readonly":"readwrite",r),w=i(_).next(T=>(_.Pt(),T)).catch(T=>(_.abort(T),be.reject(T))).toPromise();return w.catch(()=>{}),yield _.Rt,w}catch(_){const w="FirebaseError"!==_.name&&f<3;if(He("SimpleDb","Transaction failed with error:",_.message,"Retrying:",w),a.close(),!w)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Q3{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Nm(this.Ft.delete())}}class xC extends Pe{constructor(t,e){super(me.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Am(n){return"IndexedDbTransactionError"===n.name}class J3{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(He("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Nm(r)}add(t){return He("SimpleDb","ADD",this.store.name,t,t),Nm(this.store.add(t))}get(t){return Nm(this.store.get(t)).next(e=>(void 0===e&&(e=null),He("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return He("SimpleDb","DELETE",this.store.name,t),Nm(this.store.delete(t))}count(){return He("SimpleDb","COUNT",this.store.name),Nm(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(d,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new be((a,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new be((i,a)=>{r.onerror=d=>{a(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(t,e){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,d,f)=>f.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new be((r,i)=>{e.onerror=a=>{const d=HR(a.target.error);i(d)},e.onsuccess=a=>{const d=a.target.result;d?t(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(t,e){const r=[];return new be((i,a)=>{t.onerror=d=>{a(d.target.error)},t.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const _=new Q3(f),w=e(f.primaryKey,f.value,_);if(w instanceof be){const T=w.catch(S=>(_.done(),be.reject(S)));r.push(T)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>be.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Nm(n){return new be((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=HR(r.target.error);e(i)}})}let _L=!1;function HR(n){const t=Ql.Vt((0,F.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _L||(_L=!0,setTimeout(()=>{throw r},0)),r}}return n}class yL extends mL{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function is(n,t){const e=tt(n);return Ql.xt(e.Ht,t)}class jR{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(t.key)&&kR(a,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&EC(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&EC(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Qe())}isEqual(t){return this.batchId===t.batchId&&jf(this.mutations,t.mutations,(e,r)=>PR(e,r))&&jf(this.baseMutations,t.baseMutations,(e,r)=>PR(e,r))}}class GR{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Ot(t.mutations.length===r.length);let i=Ie;const a=t.mutations;for(let d=0;d<a.length;d++)i=i.insert(a[d].key,r[d].version);return new GR(t,e,r,i)}}class qR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ep{constructor(t,e,r,i,a=xt.min(),d=xt.min(),f=pi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(t){return new ep(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class vL{constructor(t){this.Jt=t}}function bL(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:FS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:SC(i=n.Jt,(a=t).key),fields:a.data.value.mapValue.fields,updateTime:IC(i,a.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:xm(t.version)};else{if(!t.isUnknownDocument())return ft();r.unknownDocument={path:e.path.toArray(),version:xm(t.version)}}var i,a;return r}function FS(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function xm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Mm(n){const t=new Er(n.seconds,n.nanoseconds);return xt.fromTimestamp(t)}function xv(n,t){const e=(t.baseMutations||[]).map(a=>$R(n.Jt,a));for(let a=0;a<t.mutations.length-1;++a){const d=t.mutations[a];a+1<t.mutations.length&&void 0!==t.mutations[a+1].transform&&(d.updateTransforms=t.mutations[a+1].transform.fieldTransforms,t.mutations.splice(a+1,1),++a)}const r=t.mutations.map(a=>$R(n.Jt,a)),i=Er.fromMillis(t.localWriteTimeMs);return new jR(t.batchId,i,e,r)}function MC(n){const t=Mm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Mm(n.lastLimboFreeSnapshotVersion):xt.min();let r;var i;return void 0!==n.query.documents?(Ot(1===(i=n.query).documents.length),r=jo(oo(tL(i.documents[0])))):r=jo(aL(n.query)),new ep(r,n.targetId,0,n.lastListenSequenceNumber,t,e,pi.fromBase64String(n.resumeToken))}function wL(n,t){const e=xm(t.snapshotVersion),r=xm(t.lastLimboFreeSnapshotVersion);let i;i=gv(t.target)?sL(n.Jt,t.target):oL(n.Jt,t.target);const a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Yd(t.target),readTime:e,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function WR(n){const t=aL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?_C(t,t.limit,"L"):t}function ZR(n,t){return new qR(t.largestBatchId,$R(n.Jt,t.overlayMutation))}function CL(n,t){const e=t.path.lastSegment();return[n,ao(t.path.popLast()),e]}class e${getBundleMetadata(t,e){return EL(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Mm(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return EL(t).put({bundleId:(r=e).id,createTime:xm(rs(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return DL(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:WR(i.bundledQuery),readTime:Mm(i.readTime)};var i})}saveNamedQuery(t,e){return DL(t).put({name:(r=e).name,readTime:xm(rs(r.readTime)),bundledQuery:r.bundledQuery});var r}}function EL(n){return is(n,"bundles")}function DL(n){return is(n,"namedQueries")}class zR{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new zR(t,e.uid||"")}getOverlay(t,e){return RC(t).get(CL(this.userId,e)).next(r=>r?ZR(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((a,d)=>{const f=new qR(e,d);i.push(this.Xt(t,f))}),be.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(d=>i.add(ao(d.getCollectionPath())));const a=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);a.push(RC(t).Qt("collectionPathOverlayIndex",f))}),be.waitFor(a)}getOverlaysForCollection(t,e,r){const i=Fe(),a=ao(e),d=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return RC(t).qt("collectionPathOverlayIndex",d).next(f=>{for(const _ of f){const w=ZR(this.M,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const a=Fe();let d;const f=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return RC(t).Wt({index:"collectionGroupOverlayIndex",range:f},(_,w,T)=>{const S=ZR(this.M,w);a.size()<i||S.largestBatchId===d?(a.set(S.getKey(),S),d=S.largestBatchId):T.done()}).next(()=>a)}Xt(t,e){return RC(t).put(function(r,i,a){const[d,f,_]=CL(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:NC(r.Jt,a.mutation)}}(this.M,this.userId,e))}}function RC(n){return is(n,"documentOverlays")}class Rm{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Zr(t.integerValue));else if("doubleValue"in t){const r=Zr(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),ym(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(Wf(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?IR(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):ft()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),ze.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function t$(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function TL(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const a=t$(255&e[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(t/8)}Rm.fe=new Rm;class n${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=TL(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=TL(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class r${constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class i${constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class kC{constructor(){this.De=new n$,this.Ce=new r$(this.De),this.xe=new i$(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class tp{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new tp(this.indexId,this.documentKey,this.arrayValue,r)}}function km(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=IL(n.arrayValue,t.arrayValue),0!==e?e:(e=IL(n.directionalValue,t.directionalValue),0!==e?e:ze.comparator(n.documentKey,t.documentKey)))}function IL(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class s${constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=hv(t);if(void 0!==e&&!this.Be(e))return!1;const r=cc(t);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[a++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],d))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class o${constructor(){this.qe=new YR}addToCollectionParentIndex(t,e){return this.qe.add(e),be.resolve()}getCollectionParents(t,e){return be.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return be.resolve()}deleteFieldIndex(t,e){return be.resolve()}getDocumentsMatchingTarget(t,e){return be.resolve(null)}getFieldIndex(t,e){return be.resolve(null)}getFieldIndexes(t,e){return be.resolve([])}getNextCollectionGroupToUpdate(t){return be.resolve(null)}updateCollectionGroup(t,e,r){return be.resolve()}updateIndexEntries(t,e){return be.resolve()}}class YR{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new N(Cn.comparator),a=!i.has(r);return this.index[e]=i.add(r),a}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new N(Cn.comparator)).toArray()}}const Mv=new Uint8Array(0);class a${constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new YR,this.Ge=new m(r=>Yd(r),(r,i)=>Em(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const a={collectionId:r,parent:ao(i)};return SL(t).put(a)}return be.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[vR(e),""],!1,!0);return SL(t).qt(i).next(a=>{for(const d of a){if(d.collectionId!==e)break;r.push(_c(d.parent))}return r})}addFieldIndex(t,e){const r=LS(t),i={indexId:(a=e).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=LS(t),i=VS(t),a=PC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=PC(t);let i=!0;const a=new Map;return be.forEach(this.Qe(e),d=>this.getFieldIndex(t,d).next(f=>{i&&(i=!!f),a.set(d,f)})).next(()=>{if(i){let d=Qe();const f=[];return be.forEach(a,(_,w)=>{var T;He("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${Yd(e)}`);const S=function(it,at){const Ft=hv(at);if(void 0===Ft)return null;for(const ln of mv(it,Ft.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(w,_),M=function(it,at){const Ft=new Map;for(const ln of cc(at))for(const Yr of mv(it,ln.fieldPath))switch(Yr.op){case"==":case"in":Ft.set(ln.fieldPath.canonicalString(),Yr.value);break;case"not-in":case"!=":return Ft.set(ln.fieldPath.canonicalString(),Yr.value),Array.from(Ft.values())}return null}(w,_),V=function(it,at){const Ft=[];let ln=!0;for(const Yr of cc(at)){const ii=0===Yr.kind?_v(it,Yr.fieldPath,it.startAt):TS(it,Yr.fieldPath,it.startAt);if(!ii.value)return null;Ft.push(ii.value),ln&&(ln=ii.inclusive)}return new dc(Ft,ln)}(w,_),Y=function(it,at){const Ft=[];let ln=!0;for(const Yr of cc(at)){const ii=0===Yr.kind?TS(it,Yr.fieldPath,it.endAt):_v(it,Yr.fieldPath,it.endAt);if(!ii.value)return null;Ft.push(ii.value),ln&&(ln=ii.inclusive)}return new dc(Ft,ln)}(w,_),ue=this.je(_,w,V),De=this.je(_,w,Y),rt=this.We(_,w,M),Je=this.ze(_.indexId,S,ue,!!V&&V.inclusive,De,!!Y&&Y.inclusive,rt);return be.forEach(Je,it=>r.Gt(it,e.limit).next(at=>{at.forEach(Ft=>{const ln=ze.fromSegments(Ft.documentKey);d.has(ln)||(d=d.add(ln),f.push(ln))})}))}).next(()=>f)}return be.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,r,i,a,d,f){const _=(null!=e?e.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),w=_/(null!=e?e.length:1),T=[];for(let S=0;S<_;++S){const M=e?this.He(e[S/w]):Mv,V=r?this.Je(t,M,r[S%w],i):this.Ye(t),Y=a?this.Xe(t,M,a[S%w],d):this.Ye(t+1);T.push(...this.createRange(V,Y,f.map(ue=>this.Je(t,M,ue,!0))))}return T}Je(t,e,r,i){const a=new tp(t,ze.empty(),e,r);return i?a:a.ke()}Xe(t,e,r,i){const a=new tp(t,ze.empty(),e,r);return i?a.ke():a}Ye(t){return new tp(t,ze.empty(),Mv,Mv)}getFieldIndex(t,e){const r=new s$(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(a=>{const d=a.filter(f=>r.$e(f));return d.sort((f,_)=>_.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(t,e){const r=new kC;for(const i of cc(t)){const a=e.data.field(i.fieldPath);if(null==a)return null;const d=r.Ne(i.kind);Rm.fe.Zt(a,d)}return r.Se()}He(t){const e=new kC;return Rm.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new kC;return Rm.fe.Zt(Zf(this.databaseId,e),r.Ne(function(i){const a=cc(i);return 0===a.length?0:a[a.length-1].kind}(t))),r.Se()}We(t,e,r){if(null===r)return[];let i=[];i.push(new kC);let a=0;for(const d of cc(t)){const f=r[a++];for(const _ of i)if(this.en(e,d.fieldPath)&&uv(f))i=this.nn(i,d,f);else{const w=_.Ne(d.kind);Rm.fe.Zt(f,w)}}return this.sn(i)}je(t,e,r){return null==r?null:this.We(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],a=[];for(const d of r.arrayValue.values||[])for(const f of i){const _=new kC;_.seed(f.Se()),Rm.fe.Zt(d,_.Ne(e.kind)),a.push(_)}return a}en(t,e){return!!t.filters.find(r=>r instanceof Fn&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=LS(t),i=VS(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(a=>{const d=[];return be.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{d.push(function(w,T){const S=T?new zd(T.sequenceNumber,new Ho(Mm(T.readTime),new ze(_c(T.documentKey)),T.largestBatchId)):zd.empty(),M=w.fields.map(([V,Y])=>new zf(Di.fromServerFormat(V),Y));return new Cm(w.indexId,w.collectionGroup,M,S)}(f,_))})).next(()=>d)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Kt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=LS(t),a=VS(t);return this.rn(t).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(f=>be.forEach(f,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:xm((M=r).readTime),documentKey:ao(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(t,e){const r=new Map;return be.forEach(e,(i,a)=>{const d=r.get(i.collectionGroup);return(d?be.resolve(d):this.getFieldIndexes(t,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),be.forEach(f,_=>this.on(t,i,_).next(w=>{const T=this.un(a,_);return w.isEqual(T)?be.resolve():this.an(t,a,_,w,T)}))))})}cn(t,e,r,i){return PC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return PC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=PC(t);let a=new N(km);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(d,f)=>{a=a.add(new tp(r.indexId,e,f.arrayValue,f.directionalValue))}).next(()=>a)}un(t,e){let r=new N(km);const i=this.Ze(e,t);if(null==i)return r;const a=hv(e);if(null!=a){const d=t.data.field(a.fieldPath);if(uv(d))for(const f of d.arrayValue.values||[])r=r.add(new tp(e.indexId,t.key,this.He(f),i))}else r=r.add(new tp(e.indexId,t.key,Mv,i));return r}an(t,e,r,i,a){He("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const d=[];return function(f,_,w,T,S){const M=f.getIterator(),V=_.getIterator();let Y=L(M),ue=L(V);for(;Y||ue;){let De=!1,rt=!1;if(Y&&ue){const Je=w(Y,ue);Je<0?rt=!0:Je>0&&(De=!0)}else null!=Y?rt=!0:De=!0;De?(T(ue),ue=L(V)):rt?(S(Y),Y=L(M)):(Y=L(M),ue=L(V))}}(i,a,km,f=>{d.push(this.cn(t,e,r,f))},f=>{d.push(this.hn(t,e,r,f))}),be.waitFor(d)}rn(t){let e=1;return VS(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((d,f)=>km(d,f)).filter((d,f,_)=>!f||0!==km(d,_[f-1]));const i=[];i.push(t);for(const d of r){const f=km(d,t),_=km(d,e);if(0===f)i[0]=t.ke();else if(f>0&&_<0)i.push(d),i.push(d.ke());else if(_>0)break}i.push(e);const a=[];for(let d=0;d<i.length;d+=2)a.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Mv,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Mv,[]]));return a}}function SL(n){return is(n,"collectionParents")}function PC(n){return is(n,"indexEntries")}function LS(n){return is(n,"indexConfiguration")}function VS(n){return is(n,"indexState")}const AL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Go{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new Go(t,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function NL(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],d=IDBKeyRange.only(e.batchId);let f=0;const _=r.Wt({range:d},(T,S,M)=>(f++,M.delete()));a.push(_.next(()=>{Ot(1===f)}));const w=[];for(const T of e.mutations){const S=hL(t,T.key.path,e.batchId);a.push(i.delete(S)),w.push(T.key)}return be.waitFor(a).next(()=>w)}function BS(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ft();t=n.noDocument}return JSON.stringify(t).length}Go.DEFAULT_COLLECTION_PERCENTILE=10,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Go.DEFAULT=new Go(41943040,Go.DEFAULT_COLLECTION_PERCENTILE,Go.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Go.DISABLED=new Go(-1,0,0);class KR{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){Ot(""!==t.uid);const a=t.isAuthenticated()?t.uid:"";return new KR(a,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return np(t).Wt({index:"userMutationsIndex",range:r},(i,a,d)=>{e=!1,d.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const a=Rv(t),d=np(t);return d.add({}).next(f=>{Ot("number"==typeof f);const _=new jR(f,e,r,i),w=function(M,V,Y){const ue=Y.baseMutations.map(rt=>NC(M.Jt,rt)),De=Y.mutations.map(rt=>NC(M.Jt,rt));return{userId:V,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:ue,mutations:De}}(this.M,this.userId,_),T=[];let S=new N((M,V)=>Kt(M.canonicalString(),V.canonicalString()));for(const M of i){const V=hL(this.userId,M.key.path,f);S=S.add(M.key.path.popLast()),T.push(d.put(w)),T.push(a.put(V,P3))}return S.forEach(M=>{T.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),be.waitFor(T).next(()=>_)})}lookupMutationBatch(t,e){return np(t).get(e).next(r=>r?(Ot(r.userId===this.userId),xv(this.M,r)):null)}fn(t,e){return this.ln[e]?be.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return np(t).Wt({index:"userMutationsIndex",range:i},(d,f,_)=>{f.userId===this.userId&&(Ot(f.batchId>=r),a=xv(this.M,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return np(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,a,d)=>{r=a.batchId,d.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return np(t).qt("userMutationsIndex",e).next(r=>r.map(i=>xv(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=PS(this.userId,e.path),i=IDBKeyRange.lowerBound(r),a=[];return Rv(t).Wt({range:i},(d,f,_)=>{const[w,T,S]=d,M=_c(T);if(w===this.userId&&e.path.isEqual(M))return np(t).get(S).next(V=>{if(!V)throw ft();Ot(V.userId===this.userId),a.push(xv(this.M,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new N(Kt);const i=[];return e.forEach(a=>{const d=PS(this.userId,a.path),f=IDBKeyRange.lowerBound(d),_=Rv(t).Wt({range:f},(w,T,S)=>{const[M,V,Y]=w,ue=_c(V);M===this.userId&&a.path.isEqual(ue)?r=r.add(Y):S.done()});i.push(_)}),be.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,a=PS(this.userId,r),d=IDBKeyRange.lowerBound(a);let f=new N(Kt);return Rv(t).Wt({range:d},(_,w,T)=>{const[S,M,V]=_,Y=_c(M);S===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(f=f.add(V)):T.done()}).next(()=>this.dn(t,f))}dn(t,e){const r=[],i=[];return e.forEach(a=>{i.push(np(t).get(a).next(d=>{if(null===d)throw ft();Ot(d.userId===this.userId),r.push(xv(this.M,d))}))}),be.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return NL(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),be.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return be.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Rv(t).Wt({range:r},(a,d,f)=>{if(a[0]===this.userId){const _=_c(a[1]);i.push(_)}else f.done()}).next(()=>{Ot(0===i.length)})})}containsKey(t,e){return xL(t,this.userId,e)}wn(t){return ML(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xL(n,t,e){const r=PS(t,e.path),i=r[1],a=IDBKeyRange.lowerBound(r);let d=!1;return Rv(n).Wt({range:a,jt:!0},(f,_,w)=>{const[T,S,M]=f;T===t&&S===i&&(d=!0),w.done()}).next(()=>d)}function np(n){return is(n,"mutations")}function Rv(n){return is(n,"documentMutations")}function ML(n){return is(n,"mutationQueues")}class Pm{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Pm(0)}static yn(){return new Pm(-1)}}class l${constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new Pm(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>xt.fromTimestamp(new Er(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>kv(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(Ot(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const a=[];return kv(t).Wt((d,f)=>{const _=MC(f);_.sequenceNumber<=e&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(t,_)))}).next(()=>be.waitFor(a)).next(()=>i)}forEachTarget(t,e){return kv(t).Wt((r,i)=>{const a=MC(i);e(a)})}pn(t){return RL(t).get("targetGlobalKey").next(e=>(Ot(null!==e),e))}In(t,e){return RL(t).put("targetGlobalKey",e)}Tn(t,e){return kv(t).put(wL(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Yd(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return kv(t).Wt({range:i,index:"queryTargetsIndex"},(d,f,_)=>{const w=MC(f);Em(e,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(t,e,r){const i=[],a=rp(t);return e.forEach(d=>{const f=ao(d.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(t,r,d))}),be.waitFor(i)}removeMatchingKeys(t,e,r){const i=rp(t);return be.forEach(e,a=>{const d=ao(a.path);return be.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(t,r,a)])})}removeMatchingKeysForTargetId(t,e){const r=rp(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=rp(t);let a=Qe();return i.Wt({range:r,jt:!0},(d,f,_)=>{const w=_c(d[1]),T=new ze(w);a=a.add(T)}).next(()=>a)}containsKey(t,e){const r=ao(e.path),i=IDBKeyRange.bound([r],[vR(r)],!1,!0);let a=0;return rp(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],_,w)=>{0!==d&&(a++,w.done())}).next(()=>a>0)}Et(t,e){return kv(t).get(e).next(r=>r?MC(r):null)}}function kv(n){return is(n,"targets")}function RL(n){return is(n,"targetGlobal")}function rp(n){return is(n,"targetDocuments")}function Om(n){return QR.apply(this,arguments)}function QR(){return(QR=(0,ve.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==gL)throw n;He("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function kL([n,t],[e,r]){const i=Kt(n,e);return 0===i?Kt(t,r):i}class u${constructor(t){this.An=t,this.buffer=new N(kL),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();kL(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class c${constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;He("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Am(i)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Om(i)}yield e.Sn(t)}))}}class d${constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return be.resolve(Us.A);const r=new u$(e);return this.Dn.forEachTarget(t,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(AL)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),AL):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,a,d,f,_,w;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,d=Date.now(),this.nthSequenceNumber(t,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(t,r,e))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(t,r))).next(S=>(w=Date.now(),lv()<=da.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-T}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class h${constructor(t,e){this.db=t,this.garbageCollector=new d$(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return US(t,r)}removeReference(t,e,r){return US(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return US(t,e)}On(t,e){return function(r,i){let a=!1;return ML(r).zt(d=>xL(r,d,i).next(f=>(f&&(a=!0),be.resolve(!f)))).next(()=>a)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(t,(d,f)=>{if(f<=e){const _=this.On(t,d).next(w=>{if(!w)return a++,r.getEntry(t,d).next(()=>(r.removeEntry(d,xt.min()),rp(t).delete([0,ao(d.path)])))});i.push(_)}}).next(()=>be.waitFor(i)).next(()=>r.apply(t)).next(()=>a)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return US(t,e)}Mn(t,e){const r=rp(t);let i,a=Us.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:_,sequenceNumber:w})=>{0===d?(a!==Us.A&&e(new ze(_c(i)),a),a=w,i=_):a=Us.A}).next(()=>{a!==Us.A&&e(new ze(_c(i)),a)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function US(n,t){return rp(n).put((r=n.currentSequenceNumber,{targetId:0,path:ao(t.path),sequenceNumber:r}));var r}class PL{constructor(){this.changes=new m(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,dr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?be.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class f${constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Fm(t).put(r)}removeEntry(t,e,r){return Fm(t).delete(function(i,a){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],FS(a),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=dr.newInvalidDocument(e);return Fm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(OC(e))},(i,a)=>{r=this.$n(e,a)}).next(()=>r)}Bn(t,e){let r={size:0,document:dr.newInvalidDocument(e)};return Fm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(OC(e))},(i,a)=>{r={document:this.$n(e,a),size:BS(a)}}).next(()=>r)}getEntries(t,e){let r=X();return this.Ln(t,e,(i,a)=>{const d=this.$n(i,a);r=r.insert(i,d)}).next(()=>r)}Un(t,e){let r=X(),i=new v(ze.comparator);return this.Ln(t,e,(a,d)=>{const f=this.$n(a,d);r=r.insert(a,f),i=i.insert(a,BS(d))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return be.resolve();let i=new N(LL);e.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(OC(i.first()),OC(i.last())),d=i.getIterator();let f=d.getNext();return Fm(t).Wt({index:"documentKeyIndex",range:a},(_,w,T)=>{const S=ze.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&LL(f,S)<0;)r(f,null),f=d.getNext();f&&f.isEqual(S)&&(r(f,w),f=d.hasNext()?d.getNext():null),f?T.Ut(OC(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),FS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fm(t).qt(IDBKeyRange.bound(i,a,!0)).next(d=>{let f=X();for(const _ of d){const w=this.$n(ze.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(w.key,w)}return f})}getAllFromCollectionGroup(t,e,r,i){let a=X();const d=FL(e,r),f=FL(e,Ho.max());return Fm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(_,w,T)=>{const S=this.$n(ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(t){return new p$(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return OL(t).get("remoteDocumentGlobalKey").next(e=>(Ot(!!e),e))}Fn(t,e){return OL(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=iL(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=ze.fromSegments(t.noDocument.path),i=Mm(t.noDocument.readTime);e=dr.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ft();{const r=ze.fromSegments(t.unknownDocument.path),i=Mm(t.unknownDocument.version);e=dr.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new Er(r[0],r[1]);return xt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return dr.newInvalidDocument(t)}}class p$ extends PL{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new m(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new N((a,d)=>Kt(a.canonicalString(),d.canonicalString()));return this.changes.forEach((a,d)=>{const f=this.Gn.get(a);if(e.push(this.Kn.removeEntry(t,a,f.readTime)),d.isValidDocument()){const _=bL(this.Kn.M,d);i=i.add(a.path.popLast()),r+=BS(_)-f.size,e.push(this.Kn.addEntry(t,a,_))}else if(r-=f.size,this.trackRemovals){const _=bL(this.Kn.M,d.convertToNoDocument(xt.min()));e.push(this.Kn.addEntry(t,a,_))}}),i.forEach(a=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,a))}),e.push(this.Kn.updateMetadata(t,r)),be.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((a,d)=>{this.Gn.set(a,{size:d,readTime:r.get(a).readTime})}),r))}}function OL(n){return is(n,"remoteDocumentGlobal")}function Fm(n){return is(n,"remoteDocumentsV14")}function OC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function FL(n,t){const e=t.documentKey.path.toArray();return[n,FS(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function LL(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let a=0;a<e.length-2&&a<r.length-2;++a)if(i=Kt(e[a],r[a]),i)return i;return i=Kt(e.length,r.length),i||(i=Kt(e[e.length-2],r[r.length-2]),i||Kt(e[e.length-1],r[r.length-1]))}class g${constructor(t){this.M=t}kt(t,e,r,i){const a=new OS("createOrUpgrade",e);var f;r<1&&i>=1&&(t.createObjectStore("owner"),(f=t).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dL,{unique:!0}),f.createObjectStore("documentMutations"),VL(t),function(f){f.createObjectStore("remoteDocuments")}(t));let d=be.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(t),VL(t)),d=d.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,_){return _.store("mutations").qt().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dL,{unique:!0});const T=_.store("mutations"),S=w.map(M=>T.put(M));return be.waitFor(S)})}(t,a))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(a))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(t),this.jn(a)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(a))),r<8&&i>=8&&(d=d.next(()=>this.zn(t,a))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(a))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:W3});_.createIndex("collectionPathOverlayIndex",Z3,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",z3,{unique:!1})}(t)})),r<13&&i>=13&&(d=d.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:O3});_.createIndex("documentKeyIndex",F3),_.createIndex("collectionGroupIndex",L3)}(t)).next(()=>this.Jn(t,a)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:H3}).createIndex("sequenceNumberIndex",j3,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:G3}).createIndex("documentKeyIndex",q3,{unique:!1})}(t)})),d}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=BS(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>be.forEach(i,a=>{const d=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>be.forEach(f,_=>{Ot(_.userId===a.userId);const w=xv(this.M,_);return NL(t,a.userId,w).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((d,f)=>{const _=new Cn(d),w=[0,ao(_)];a.push(e.get(w).next(T=>T?be.resolve():e.put({targetId:0,path:ao(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>be.waitFor(a))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:$3});const r=e.store("collectionParents"),i=new YR,a=d=>{if(i.add(d)){const f=d.lastSegment(),_=d.popLast();return r.put({collectionId:f,parent:ao(_)})}};return e.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const _=new Cn(d);return a(_.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([d,f,_],w)=>{const T=_c(f);return a(T.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const a=MC(i),d=wL(this.M,a);return e.put(d)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((a,d)=>{const f=e.store("remoteDocumentsV14"),_=(w=d,w.document?new ze(Cn.fromString(w.document.name).popFirst(5)):w.noDocument?ze.fromSegments(w.noDocument.path):w.unknownDocument?ze.fromSegments(w.unknownDocument.path):ft()).path.toArray();var w;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(T))}).next(()=>be.waitFor(i))}}function VL(n){n.createObjectStore("targetDocuments",{keyPath:B3}).createIndex("documentTargetsIndex",U3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",V3,{unique:!0}),n.createObjectStore("targetGlobal")}const JR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class XR{constructor(t,e,r,i,a,d,f,_,w,T,S=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=a,this.window=d,this.document=f,this.Xn=w,this.Zn=T,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!XR.vt())throw new Pe(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h$(this,i),this.hs=e+"main",this.M=new vL(_),this.ls=new Ql(this.hs,this.ts,new g$(this.M)),this.fs=new l$(this.referenceDelegate,this.M),this.ds=new f$(this.M),this._s=new e$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,JR);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Us(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,ve.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,ve.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,ve.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>$S(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(Am(t))return He("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return FC(t).get("owner").next(e=>be.resolve(this.bs(e)))}Vs(t){return $S(t).delete(this.clientId)}vs(){var t=this;return(0,ve.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=is(r,"clientMetadata");return i.qt().next(a=>{const d=t.Ds(a,18e5),f=a.filter(_=>-1===d.indexOf(_));return be.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?be.resolve(!0):FC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Pe(me.FAILED_PRECONDITION,JR);return!1}}return!(!this.networkEnabled||!this.inForeground)||$S(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&He("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ve.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new yL(e,Us.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>$S(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return KR.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new a$(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return zR.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){He("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",a=14===(d=this.ts)?K3:13===d?pL:12===d?Y3:11===d?fL:void ft();var d;let f;return this.ls.runTransaction(t,i,a,_=>(f=new yL(_,this.es?this.es.next():Us.A),"readwrite-primary"===e?this.Es(f).next(w=>!!w||this.As(f)).next(w=>{if(!w)throw Xr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(me.FAILED_PRECONDITION,gL);return r(f)}).next(w=>this.Ps(f).next(()=>w)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(t){return FC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Pe(me.FAILED_PRECONDITION,JR)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return FC(t).put("owner",e)}static vt(){return Ql.vt()}Rs(t){const e=FC(t);return e.get("owner").next(r=>this.bs(r)?(He("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):be.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(Xr(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,F.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return He("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Xr("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function FC(n){return is(n,"owner")}function $S(n){return is(n,"clientMetadata")}function ek(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class m${constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const a of e)a.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return ze.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):mC(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new ze(e)).next(r=>{let i=le();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let a=le();return this.indexManager.getCollectionParents(t,i).next(d=>be.forEach(d,f=>{const _=(w=e,T=f.child(i),new zl(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.zs(t,_,r).next(w=>{w.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(a=>{for(const d of a)for(const f of d.mutations){const _=f.key;let w=i.get(_);null==w&&(w=dr.newInvalidDocument(_),i=i.insert(_,w)),EC(f,w,d.localWriteTime),w.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,d)=>{vC(e,d)||(i=i.remove(a))}),i))}}class tk{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=Qe(),i=Qe();for(const a of e.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new tk(t,e.fromCache,r,i)}}class BL{Xs(t){this.Zs=t}Qs(t,e,r,i){return 0===(a=e).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.ti(t,e):this.Zs.Ks(t,i).next(a=>{const d=this.ei(e,a);return(hc(e)||Kf(e))&&this.ni(e.limitType,d,i,r)?this.ti(t,e):(lv()<=da.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yC(e)),this.Zs.Qs(t,e,fv(r,-1)).next(f=>(d.forEach(_=>{f=f.insert(_.key,_)}),f)))});var a}ei(t,e){let r=new N(Jf(t));return e.forEach((i,a)=>{vC(t,a)&&(r=r.add(a))}),r}ni(t,e,r,i){if(r.size!==e.size)return!0;const a="F"===t?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ti(t,e){return lv()<=da.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",yC(e)),this.Zs.Qs(t,e,Ho.min())}}class _${constructor(t,e,r,i){this.persistence=t,this.si=e,this.M=i,this.ii=new v(Kt),this.ri=new m(a=>Yd(a),Em),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new m$(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function UL(n,t,e,r){return new _$(n,t,e,r)}function $L(n,t){return nk.apply(this,arguments)}function nk(){return(nk=(0,ve.Z)(function*(n,t){const e=tt(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(a=>(i=a,e.ai(t),e.Bs.getAllMutationBatches(r))).next(a=>{const d=[],f=[];let _=Qe();for(const w of i){d.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}for(const w of a){f.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}return e.ci.Ks(r,_).next(w=>({hi:w,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function y$(n,t){const e=tt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),a=e.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,_,w){const T=_.batch,S=T.keys();let M=be.resolve();return S.forEach(V=>{M=M.next(()=>w.getEntry(f,V)).next(Y=>{const ue=_.docVersions.get(V);Ot(null!==ue),Y.version.compareTo(ue)<0&&(T.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),w.addEntry(Y)))})}),M.next(()=>d.Bs.removeMutationBatch(f,T))}(e,r,t,a).next(()=>a.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.ci.Ks(r,i))})}function HL(n){const t=tt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function v$(n,t){const e=tt(n),r=t.snapshotVersion;let i=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=e.ui.newChangeBuffer({trackRemovals:!0});i=e.ii;const f=[];t.targetChanges.forEach((w,T)=>{const S=i.get(T);if(!S)return;f.push(e.fs.removeMatchingKeys(a,w.removedDocuments,T).next(()=>e.fs.addMatchingKeys(a,w.addedDocuments,T)));let M=S.withSequenceNumber(a.currentSequenceNumber);var V,Y,ue;t.targetMismatches.has(T)?M=M.withResumeToken(pi.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):w.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(w.resumeToken,r)),i=i.insert(T,M),Y=M,ue=w,(0===(V=S).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&f.push(e.fs.updateTargetData(a,M))});let _=X();if(t.documentUpdates.forEach(w=>{t.resolvedLimboDocuments.has(w)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(a,w))}),f.push(jL(a,d,t.documentUpdates).next(w=>{_=w})),!r.isEqual(xt.min())){const w=e.fs.getLastRemoteSnapshotVersion(a).next(T=>e.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(w)}return be.waitFor(f).next(()=>d.apply(a)).next(()=>e.ci.Gs(a,_)).next(()=>_)}).then(a=>(e.ii=i,a))}function jL(n,t,e){let r=Qe();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let a=X();return e.forEach((d,f)=>{const _=i.get(d);f.isNoDocument()&&f.version.isEqual(xt.min())?(t.removeEntry(d,f.readTime),a=a.insert(d,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(t.addEntry(f),a=a.insert(d,f)):He("LocalStore","Ignoring outdated watch update for ",d,". Current version:",_.version," Watch version:",f.version)}),a})}function b$(n,t){const e=tt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function Pv(n,t){const e=tt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(a=>a?(i=a,be.resolve(i)):e.fs.allocateTargetId(r).next(d=>(i=new ep(t,d,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ii=e.ii.insert(r.targetId,r),e.ri.set(t,r.targetId)),r})}function Ov(n,t,e){return rk.apply(this,arguments)}function rk(){return(rk=(0,ve.Z)(function*(n,t,e){const r=tt(n),i=r.ii.get(t),a=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",a,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Am(d))throw d;He("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function HS(n,t,e){const r=tt(n);let i=xt.min(),a=Qe();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,_,w){const T=tt(f),S=T.ri.get(w);return void 0!==S?be.resolve(T.ii.get(S)):T.fs.getTargetData(_,w)}(r,d,jo(t)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(_=>{a=_})}).next(()=>r.si.Qs(d,t,e?i:xt.min(),e?a:Qe())).next(f=>(WL(r,al(t),f),{documents:f,li:a})))}function GL(n,t){const e=tt(n),r=tt(e.fs),i=e.ii.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,t).next(d=>d?d.target:null))}function qL(n,t){const e=tt(n),r=e.oi.get(t)||xt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.ui.getAllFromCollectionGroup(i,t,fv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(WL(e,t,i),i))}function WL(n,t,e){let r=xt.min();e.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.oi.set(t,r)}function ik(){return(ik=(0,ve.Z)(function*(n,t,e,r){const i=tt(n);let a=Qe(),d=X();for(const w of e){const T=t.fi(w.metadata.name);w.document&&(a=a.add(T));const S=t.di(w);S.setReadTime(t._i(w.metadata.readTime)),d=d.insert(T,S)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),_=yield Pv(i,(w=r,jo(oo(Cn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>jL(w,f,d).next(T=>(f.apply(w),T)).next(T=>i.fs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.fs.addMatchingKeys(w,a,_.targetId)).next(()=>i.ci.Gs(w,T)).next(()=>T)))})).apply(this,arguments)}function C$(n,t){return sk.apply(this,arguments)}function sk(){return(sk=(0,ve.Z)(function*(n,t,e=Qe()){const r=yield Pv(n,jo(WR(t.bundledQuery))),i=tt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const d=rs(t.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(a,t);const f=r.withResumeToken(pi.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(a,f).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,e,r.targetId)).next(()=>i._s.saveNamedQuery(a,t))})})).apply(this,arguments)}class E${constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return be.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var r;return this.wi.set(e.id,{id:(r=e).id,version:r.version,createTime:rs(r.createTime)}),be.resolve()}getNamedQuery(t,e){return be.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(r=e).name,query:WR(r.bundledQuery),readTime:rs(r.readTime)}),be.resolve();var r}}class D${constructor(){this.overlays=new v(ze.comparator),this.gi=new Map}getOverlay(t,e){return be.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,a)=>{this.Xt(t,e,a)}),be.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(r)),be.resolve()}getOverlaysForCollection(t,e,r){const i=Fe(),a=e.length+1,d=new ze(e.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!e.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return be.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let a=new v((w,T)=>w-T);const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===e&&w.largestBatchId>r){let T=a.get(w.largestBatchId);null===T&&(T=Fe(),a=a.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const f=Fe(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,T)=>f.set(w,T)),!(f.size()>=i)););return be.resolve(f)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new qR(e,r));let a=this.gi.get(e);void 0===a&&(a=Qe(),this.gi.set(e,a)),this.gi.set(e,a.add(r.key))}}class ok{constructor(){this.yi=new N(ss.pi),this.Ii=new N(ss.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const r=new ss(t,e);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Ai(new ss(t,e))}Ri(t,e){t.forEach(r=>this.removeReference(r,e))}Pi(t){const e=new ze(new Cn([])),r=new ss(e,t),i=new ss(e,t+1),a=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),a.push(d.key)}),a}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new ze(new Cn([])),r=new ss(e,t),i=new ss(e,t+1);let a=Qe();return this.Ii.forEachInRange([r,i],d=>{a=a.add(d.key)}),a}containsKey(t){const e=new ss(t,0),r=this.yi.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class ss{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return ze.comparator(t.key,e.key)||Kt(t.vi,e.vi)}static Ti(t,e){return Kt(t.vi,e.vi)||ze.comparator(t.key,e.key)}}class T${constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new N(ss.pi)}checkEmpty(t){return be.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const a=this.Si;this.Si++;const d=new jR(a,e,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new ss(f.key,a)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return be.resolve(d)}lookupMutationBatch(t,e){return be.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.xi(e+1),a=i<0?0:i;return be.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return be.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new ss(e,0),i=new ss(e,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);a.push(f)}),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new N(Kt);return e.forEach(i=>{const a=new ss(i,0),d=new ss(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,d],f=>{r=r.add(f.vi)})}),be.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const d=new ss(new ze(a),0);let f=new N(Kt);return this.Di.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.vi)),!0)},d),be.resolve(this.Ni(f))}Ni(t){const e=[];return t.forEach(r=>{const i=this.Ci(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Ot(0===this.ki(e.batchId,"removed")),this.Bs.shift();let r=this.Di;return be.forEach(e.mutations,i=>{const a=new ss(i.key,e.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,e){const r=new ss(e,0),i=this.Di.firstAfterOrEqual(r);return be.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return be.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class I${constructor(t){this.Mi=t,this.docs=new v(ze.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),a=i?i.size:0,d=this.Mi(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:d}),this.size+=d-a,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return be.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(e))}getEntries(t,e){let r=X();return e.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dr.newInvalidDocument(i))}),be.resolve(r)}getAllFromCollection(t,e,r){let i=X();const a=new ze(e.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:f,value:{document:_}}=d.getNext();if(!e.isPrefixOf(f.path))break;f.path.length>e.length+1||wS(pv(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return be.resolve(i)}getAllFromCollectionGroup(t,e,r,i){ft()}Oi(t,e){return be.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new S$(this)}getSize(t){return be.resolve(this.size)}}class S$ extends PL{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),be.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class A${constructor(t){this.persistence=t,this.Fi=new m(e=>Yd(e),Em),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new ok,this.targetCount=0,this.Li=Pm.gn()}forEachTarget(t,e){return this.Fi.forEach((r,i)=>e(i)),be.resolve()}getLastRemoteSnapshotVersion(t){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return be.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$i&&(this.$i=e),be.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new Pm(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,be.resolve()}updateTargetData(t,e){return this.Tn(e),be.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,be.resolve()}removeTargets(t,e,r){let i=0;const a=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=e&&null===r.get(f.targetId)&&(this.Fi.delete(d),a.push(this.removeMatchingKeysForTargetId(t,f.targetId)),i++)}),be.waitFor(a).next(()=>i)}getTargetCount(t){return be.resolve(this.targetCount)}getTargetData(t,e){const r=this.Fi.get(e)||null;return be.resolve(r)}addMatchingKeys(t,e,r){return this.Bi.Ei(e,r),be.resolve()}removeMatchingKeys(t,e,r){this.Bi.Ri(e,r);const i=this.persistence.referenceDelegate,a=[];return i&&e.forEach(d=>{a.push(i.markPotentiallyOrphaned(t,d))}),be.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),be.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Bi.Vi(e);return be.resolve(r)}containsKey(t,e){return be.resolve(this.Bi.containsKey(e))}}class N${constructor(t,e){this.Ui={},this.overlays={},this.es=new Us(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new A$(this),this.indexManager=new o$,this.ds=new I$(r=>this.referenceDelegate.qi(r)),this.M=new vL(e),this._s=new E$(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new D$,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Ui[t.toKey()];return r||(r=new T$(e,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){He("MemoryPersistence","Starting transaction:",t);const i=new x$(this.es.next());return this.referenceDelegate.Ki(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Qi(t,e){return be.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,e)))}}class x$ extends mL{constructor(t){super(),this.currentSequenceNumber=t}}class ak{constructor(t){this.persistence=t,this.ji=new ok,this.Wi=null}static zi(t){return new ak(t)}get Hi(){if(this.Wi)return this.Wi;throw ft()}addReference(t,e,r){return this.ji.addReference(r,e),this.Hi.delete(r.toString()),be.resolve()}removeReference(t,e,r){return this.ji.removeReference(r,e),this.Hi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),be.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(a=>this.Hi.add(a.toString()))}).next(()=>r.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Hi,r=>{const i=ze.fromPath(r);return this.Ji(t,i).next(a=>{a||e.removeEntry(i,xt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(r=>{r?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return be.or([()=>be.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function ZL(n,t){return`firestore_clients_${n}_${t}`}function zL(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function lk(n,t){return`firestore_targets_${n}_${t}`}class jS{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Yi(t,e,r){const i=JSON.parse(r);let a,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(a=new Pe(i.error.code,i.error.message))),d?new jS(t,e,i.state,a):(Xr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class LC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Yi(t,e){const r=JSON.parse(e);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Pe(r.error.code,r.error.message))),a?new LC(t,r.state,i):(Xr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class GS{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Br();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=mS(r.activeTargetIds[d]),a=a.add(r.activeTargetIds[d]);return i?new GS(t,a):(Xr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class uk{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new uk(e.clientId,e.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class ck{constructor(){this.activeTargetIds=Br()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dk{constructor(t,e,r,i,a){this.window=t,this.Yn=e,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new v(Kt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=ZL(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new ck),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ve.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.er)continue;const a=t.getItem(ZL(t.persistenceKey,i));if(a){const d=GS.Yi(i,a);d&&(t.ir=t.ir.insert(d.clientId,d))}}t.wr();const r=t.storage.getItem(t.dr);if(r){const i=t.mr(r);i&&t.gr(i)}for(const i of t.rr)t.sr(i);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,r){this.pr(t,e,r),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(lk(this.persistenceKey,t));if(r){const i=LC.Yi(t,r);i&&(e=i.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(lk(this.persistenceKey,t))}updateQueryState(t,e,r){this.Er(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ir(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return He("SharedClientState","READ",t,e),e}setItem(t,e){He("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){He("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ve.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Pr(r.key);return e.br(i,null)}{const i=e.Vr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Sr(i)}}else if(e.lr.test(r.key)){if(null!==r.newValue){const i=e.Dr(r.key,r.newValue);if(i)return e.Cr(i)}}else if(r.key===e.dr){if(null!==r.newValue){const i=e.mr(r.newValue);if(i)return e.gr(i)}}else if(r.key===e.ar){const i=function(a){let d=Us.A;if(null!=a)try{const f=JSON.parse(a);Ot("number"==typeof f),d=f}catch(f){Xr("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==Us.A&&e.sequenceNumberHandler(i)}else if(r.key===e._r){const i=e.Nr(r.newValue);yield Promise.all(i.map(a=>e.syncEngine.kr(a)))}}else e.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,r){const i=new jS(this.currentUser,t,e,r),a=zL(this.persistenceKey,this.currentUser,t);this.setItem(a,i.Xi())}Ir(t){const e=zL(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,r){const i=lk(this.persistenceKey,t),a=new LC(t,e,r);this.setItem(i,a.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const r=this.Pr(t);return GS.Yi(r,e)}vr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return jS.Yi(new Bi(void 0!==r[2]?r[2]:null),i,e)}Dr(t,e){const r=this.lr.exec(t),i=Number(r[1]);return LC.Yi(i,e)}mr(t){return uk.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,ve.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);He("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const r=e?this.ir.insert(t,e):this.ir.remove(t),i=this.yr(this.ir),a=this.yr(r),d=[],f=[];return a.forEach(_=>{i.has(_)||d.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=Br();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class YL{constructor(){this.$r=new ck,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,r){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new ck,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class M${Lr(t){}shutdown(){}}class KL{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const R$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class k${constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class P$ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,r,i,a){const d=this.uo(t,e);He("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,a),this.co(t,d,f,r).then(_=>(He("RestConnection","Received: ",_),_),_=>{throw qd("RestConnection",`${t} failed with error: `,_,"url: ",d,"request:",r),_})}ho(t,e,r,i,a){return this.oo(t,e,r,i,a)}ao(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+Hf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,a)=>t[a]=i),r&&r.headers.forEach((i,a)=>t[a]=i)}uo(t,e){return`${this.io}/v1/${e}:${R$[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((a,d)=>{const f=new cS;f.listenOnce(pR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case iC.NO_ERROR:const w=f.getResponseJson();He("Connection","XHR received:",JSON.stringify(w)),a(w);break;case iC.TIMEOUT:He("Connection",'RPC "'+t+'" timed out'),d(new Pe(me.DEADLINE_EXCEEDED,"Request time out"));break;case iC.HTTP_ERROR:const T=f.getStatus();if(He("Connection",'RPC "'+t+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const M=function(V){const Y=V.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(Y)>=0?Y:me.UNKNOWN}(S.status);d(new Pe(M,S.message))}else d(new Pe(me.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Pe(me.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{He("Connection",'RPC "'+t+'" completed.')}});const _=JSON.stringify(i);f.send(e,"POST",_,r,15)})}lo(t,e,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=rC(),d=uS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new zF({})),this.ao(f.initMessageHeaders,e,r),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");He("Connection","Creating WebChannel: "+_,f);const w=a.createWebChannel(_,f);let T=!1,S=!1;const M=new k$({Wr:Y=>{S?He("Connection","Not sending because WebChannel is closed:",Y):(T||(He("Connection","Opening WebChannel transport."),w.open(),T=!0),He("Connection","WebChannel sending:",Y),w.send(Y))},zr:()=>w.close()}),V=(Y,ue,De)=>{Y.listen(ue,rt=>{try{De(rt)}catch(Je){setTimeout(()=>{throw Je},0)}})};return V(w,pm.EventType.OPEN,()=>{S||He("Connection","WebChannel transport opened.")}),V(w,pm.EventType.CLOSE,()=>{S||(S=!0,He("Connection","WebChannel transport closed"),M.no())}),V(w,pm.EventType.ERROR,Y=>{S||(S=!0,qd("Connection","WebChannel transport errored:",Y),M.no(new Pe(me.UNAVAILABLE,"The operation could not be completed")))}),V(w,pm.EventType.MESSAGE,Y=>{var ue;if(!S){const De=Y.data[0];Ot(!!De);const rt=De,Je=rt.error||(null===(ue=rt[0])||void 0===ue?void 0:ue.error);if(Je){He("Connection","WebChannel received error:",Je);const it=Je.status;let at=function(ln){const Yr=u[ln];if(void 0!==Yr)return p(Yr)}(it),Ft=Je.message;void 0===at&&(at=me.INTERNAL,Ft="Unknown error status: "+it+" with message "+Je.message),S=!0,M.no(new Pe(at,Ft)),w.close()}else He("Connection","WebChannel received:",De),M.so(De)}}),V(d,ZF.STAT_EVENT,Y=>{Y.stat===gR.PROXY?He("Connection","Detected buffering proxy"):Y.stat===gR.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.eo()},0),M}}function QL(){return"undefined"!=typeof window?window:null}function qS(){return"undefined"!=typeof document?document:null}function VC(n){return new C3(n,!0)}class hk{constructor(t,e,r=1e3,i=1.5,a=6e4){this.Yn=t,this.timerId=e,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,e-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class JL{constructor(t,e,r,i,a,d,f,_){this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new hk(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,ve.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,ve.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var r=this;return(0,ve.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==t?r.Do.reset():e&&e.code===me.RESOURCE_EXHAUSTED?(Xr(e.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):e&&e.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===e&&this.qo(r,i)},r=>{t(()=>{const i=new Pe(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,e){const r=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var t=this;this.state=5,this.Do.To((0,ve.Z)(function*(){t.state=0,t.start()}))}Ko(t){return He("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O$ extends JL{constructor(t,e,r,i,a,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,d),this.M=a}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(_=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ft(),i=t.targetChange.targetIds||[],a=function(_,w){return _.N?(Ot(void 0===w||"string"==typeof w),pi.fromBase64String(w||"")):(Ot(void 0===w||w instanceof Uint8Array),pi.fromUint8Array(w||new Uint8Array))}(n,t.targetChange.resumeToken),d=t.targetChange.cause,f=d&&function(_){const w=void 0===_.code?me.UNKNOWN:p(_.code);return new Pe(w,_.message||"")}(d);e=new nh(r,i,a,f||null)}else if("documentChange"in t){const r=t.documentChange,i=mc(n,r.document.name),a=rs(r.document.updateTime),d=new Cs({mapValue:{fields:r.document.fields}}),f=dr.newFoundDocument(i,a,d);e=new Kl(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const r=t.documentDelete,i=mc(n,r.document),a=r.readTime?rs(r.readTime):xt.min(),d=dr.newNoDocument(i,a);e=new Kl([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){const r=t.documentRemove,i=mc(n,r.document);e=new Kl([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return ft();{const r=t.filter,a=new o(r.count||0);e=new th(r.targetId,a)}}var _;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return xt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?xt.min():a.readTime?rs(a.readTime):xt.min()}(t);return this.listener.Qo(e,r)}jo(t){const e={};e.database=AC(this.M),e.addTarget=function(i,a){let d;const f=a.target;return d=gv(f)?{documents:sL(i,f)}:{query:oL(i,f)},d.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?d.resumeToken=XF(i,a.resumeToken):a.snapshotVersion.compareTo(xt.min())>0&&(d.readTime=IC(i,a.snapshotVersion.toTimestamp())),d}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Fo(e)}Wo(t){const e={};e.database=AC(this.M),e.removeTarget=t,this.Fo(e)}}class F$ extends JL{constructor(t,e,r,i,a,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,d),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(Ot(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(n,t){return n&&n.length>0?(Ot(void 0!==t),n.map(e=>function(r,i){let a=rs(r.updateTime?r.updateTime:i);return a.isEqual(xt.min())&&(a=rs(i)),new QF(a,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=rs(t.commitTime);return this.listener.Yo(r,e)}return Ot(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=AC(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>NC(this.M,r))};this.Fo(e)}}class L$ extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.oo(t,e,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(me.UNKNOWN,i.toString())})}ho(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ho(t,e,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(me.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class V${constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Xr(e),this.iu=!1):He("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class B${constructor(t,e,r,i,a){var d=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var _;ip(d)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ve.Z)(function*(w){const T=tt(w);T.fu.add(4),yield Fv(T),T.wu.set("Unknown"),T.fu.delete(4),yield BC(T)}),function(w){return _.apply(this,arguments)})(d))}))}),this.wu=new V$(r,i)}}function BC(n){return fk.apply(this,arguments)}function fk(){return(fk=(0,ve.Z)(function*(n){if(ip(n))for(const t of n.du)yield t(!0)})).apply(this,arguments)}function Fv(n){return pk.apply(this,arguments)}function pk(){return(pk=(0,ve.Z)(function*(n){for(const t of n.du)yield t(!1)})).apply(this,arguments)}function WS(n,t){const e=tt(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),_k(e)?mk(e):Vv(e).xo()&&gk(e,t))}function UC(n,t){const e=tt(n),r=Vv(e);e.lu.delete(t),r.xo()&&XL(e,t),0===e.lu.size&&(r.xo()?r.Mo():ip(e)&&e.wu.set("Unknown"))}function gk(n,t){n.mu.Z(t.targetId),Vv(n).jo(t)}function XL(n,t){n.mu.Z(t),Vv(n).Wo(t)}function mk(n){n.mu=new DC({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),Vv(n).start(),n.wu.ru()}function _k(n){return ip(n)&&!Vv(n).Co()&&n.lu.size>0}function ip(n){return 0===tt(n).fu.size}function e2(n){n.mu=void 0}function U$(n){return yk.apply(this,arguments)}function yk(){return(yk=(0,ve.Z)(function*(n){n.lu.forEach((t,e)=>{gk(n,t)})})).apply(this,arguments)}function $$(n,t){return vk.apply(this,arguments)}function vk(){return(vk=(0,ve.Z)(function*(n,t){e2(n),_k(n)?(n.wu.au(t),mk(n)):n.wu.set("Unknown")})).apply(this,arguments)}function H$(n,t,e){return bk.apply(this,arguments)}function bk(){return(bk=(0,ve.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof nh&&2===t.state&&t.cause)try{yield(r=(0,ve.Z)(function*(i,a){const d=a.cause;for(const f of a.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,t)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield ZS(n,r)}else if(t instanceof Kl?n.mu.ut(t):t instanceof th?n.mu._t(t):n.mu.ht(t),!e.isEqual(xt.min()))try{const r=yield HL(n.localStore);e.compareTo(r)>=0&&(yield function(i,a){const d=i.mu.yt(a);return d.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.lu.get(_);w&&i.lu.set(_,w.withResumeToken(f.resumeToken,a))}}),d.targetMismatches.forEach(f=>{const _=i.lu.get(f);if(!_)return;i.lu.set(f,_.withResumeToken(pi.EMPTY_BYTE_STRING,_.snapshotVersion)),XL(i,f);const w=new ep(_.target,f,1,_.sequenceNumber);gk(i,w)}),i.remoteSyncer.applyRemoteEvent(d)}(n,e))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield ZS(n,r)}var r})).apply(this,arguments)}function ZS(n,t,e){return wk.apply(this,arguments)}function wk(){return(wk=(0,ve.Z)(function*(n,t,e){if(!Am(t))throw t;n.fu.add(1),yield Fv(n),n.wu.set("Offline"),e||(e=()=>HL(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield BC(n)}))})).apply(this,arguments)}function t2(n,t){return t().catch(e=>ZS(n,e,t))}function Lv(n){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,ve.Z)(function*(n){const t=tt(n),e=sp(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;j$(t);)try{const i=yield b$(t.localStore,r);if(null===i){0===t.hu.length&&e.Mo();break}r=i.batchId,G$(t,i)}catch(i){yield ZS(t,i)}n2(t)&&r2(t)})).apply(this,arguments)}function j$(n){return ip(n)&&n.hu.length<10}function G$(n,t){n.hu.push(t);const e=sp(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function n2(n){return ip(n)&&!sp(n).Co()&&n.hu.length>0}function r2(n){sp(n).start()}function q$(n){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,ve.Z)(function*(n){sp(n).Zo()})).apply(this,arguments)}function W$(n){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,ve.Z)(function*(n){const t=sp(n);for(const e of n.hu)t.Jo(e.mutations)})).apply(this,arguments)}function Z$(n,t,e){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,ve.Z)(function*(n,t,e){const r=n.hu.shift(),i=GR.from(r,t,e);yield t2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Lv(n)})).apply(this,arguments)}function z$(n,t){return Ik.apply(this,arguments)}function Ik(){return(Ik=(0,ve.Z)(function*(n,t){var e;t&&sp(n).Ho&&(yield(e=(0,ve.Z)(function*(r,i){if(h(a=i.code)&&a!==me.ABORTED){const d=r.hu.shift();sp(r).ko(),yield t2(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Lv(r)}var a}),function(r,i){return e.apply(this,arguments)})(n,t)),n2(n)&&r2(n)})).apply(this,arguments)}function i2(n,t){return Sk.apply(this,arguments)}function Sk(){return(Sk=(0,ve.Z)(function*(n,t){const e=tt(n);e.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=ip(e);e.fu.add(3),yield Fv(e),r&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield BC(e)})).apply(this,arguments)}function Ak(n,t){return Nk.apply(this,arguments)}function Nk(){return(Nk=(0,ve.Z)(function*(n,t){const e=tt(n);t?(e.fu.delete(2),yield BC(e)):t||(e.fu.add(2),yield Fv(e),e.wu.set("Unknown"))})).apply(this,arguments)}function Vv(n){return n.gu||(n.gu=function(t,e,r){const i=tt(t);return i.eu(),new O$(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:U$.bind(null,n),Yr:$$.bind(null,n),Qo:H$.bind(null,n)}),n.du.push(function(){var t=(0,ve.Z)(function*(e){e?(n.gu.ko(),_k(n)?mk(n):n.wu.set("Unknown")):(yield n.gu.stop(),e2(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function sp(n){return n.yu||(n.yu=function(t,e,r){const i=tt(t);return i.eu(),new F$(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:q$.bind(null,n),Yr:z$.bind(null,n),Xo:W$.bind(null,n),Yo:Z$.bind(null,n)}),n.du.push(function(){var t=(0,ve.Z)(function*(e){e?(n.yu.ko(),yield Lv(n)):(yield n.yu.stop(),n.hu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class xk{constructor(t,e,r,i,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(t,e,r,i,a){const d=Date.now()+r,f=new xk(t,e,d,i,a);return f.start(r),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(me.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bv(n,t){if(Xr("AsyncQueue",`${t}: ${n}`),Am(n))return new Pe(me.UNAVAILABLE,`${t}: ${n}`);throw n}class Uv{constructor(t){this.comparator=t?(e,r)=>t(e,r)||ze.comparator(e.key,r.key):(e,r)=>ze.comparator(e.key,r.key),this.keyedMap=le(),this.sortedSet=new v(this.comparator)}static emptySet(t){return new Uv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Uv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new Uv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class s2{constructor(){this.pu=new v(ze.comparator)}track(t){const e=t.doc.key,r=this.pu.get(e);r?0!==t.type&&3===r.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==r.type?this.pu=this.pu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.pu=this.pu.remove(e):1===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):ft():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,r)=>{t.push(r)}),t}}class $v{constructor(t,e,r,i,a,d,f,_){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(t,e,r,i){const a=[];return e.forEach(d=>{a.push({type:0,doc:d})}),new $v(t,e,Uv.emptySet(e),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class Y${constructor(){this.Tu=void 0,this.listeners=[]}}class K${constructor(){this.queries=new m(t=>xS(t),Qf),this.onlineState="Unknown",this.Eu=new Set}}function Mk(n,t){return Rk.apply(this,arguments)}function Rk(){return(Rk=(0,ve.Z)(function*(n,t){const e=tt(n),r=t.query;let i=!1,a=e.queries.get(r);if(a||(i=!0,a=new Y$),i)try{a.Tu=yield e.onListen(r)}catch(d){const f=Bv(d,`Initialization of query '${yC(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,a),a.listeners.push(t),t.Au(e.onlineState),a.Tu&&t.Ru(a.Tu)&&Ok(e)})).apply(this,arguments)}function kk(n,t){return Pk.apply(this,arguments)}function Pk(){return(Pk=(0,ve.Z)(function*(n,t){const e=tt(n),r=t.query;let i=!1;const a=e.queries.get(r);if(a){const d=a.listeners.indexOf(t);d>=0&&(a.listeners.splice(d,1),i=0===a.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function Q$(n,t){const e=tt(n);let r=!1;for(const i of t){const d=e.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&Ok(e)}function J$(n,t,e){const r=tt(n),i=r.queries.get(t);if(i)for(const a of i.listeners)a.onError(e);r.queries.delete(t)}function Ok(n){n.Eu.forEach(t=>{t.next()})}class Fk{constructor(t,e,r){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new $v(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=$v.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class X${constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class o2{constructor(t){this.M=t}fi(t){return mc(this.M,t)}di(t){return t.metadata.exists?iL(this.M,t.document,!1):dr.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return rs(t)}}class e6{constructor(t,e,r){this.Nu=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=a2(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=Cn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,r=new o2(this.M);for(const i of t)if(i.metadata.queries){const a=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(e.get(d)||Qe()).add(a);e.set(d,f)}}return e}complete(){var t=this;return(0,ve.Z)(function*(){const e=yield function(n,t,e,r){return ik.apply(this,arguments)}(t.localStore,new o2(t.M),t.documents,t.Nu.id),r=t.Mu(t.documents);for(const i of t.queries)yield C$(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function a2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class l2{constructor(t){this.key=t}}class u2{constructor(t){this.key=t}}class c2{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=Qe(),this.mutatedKeys=Qe(),this.Uu=Jf(t),this.qu=new Uv(this.Uu)}get Ku(){return this.$u}Gu(t,e){const r=e?e.Qu:new s2,i=e?e.qu:this.qu;let a=e?e.mutatedKeys:this.mutatedKeys,d=i,f=!1;const _=hc(this.query)&&i.size===this.query.limit?i.last():null,w=Kf(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((T,S)=>{const M=i.get(T),V=vC(this.query,S)?S:null,Y=!!M&&this.mutatedKeys.has(M.key),ue=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let De=!1;M&&V?M.data.isEqual(V.data)?Y!==ue&&(r.track({type:3,doc:V}),De=!0):this.ju(M,V)||(r.track({type:2,doc:V}),De=!0,(_&&this.Uu(V,_)>0||w&&this.Uu(V,w)<0)&&(f=!0)):!M&&V?(r.track({type:0,doc:V}),De=!0):M&&!V&&(r.track({type:1,doc:M}),De=!0,(_||w)&&(f=!0)),De&&(V?(d=d.add(V),a=ue?a.add(T):a.delete(T)):(d=d.delete(T),a=a.delete(T)))}),hc(this.query)||Kf(this.query))for(;d.size>this.query.limit;){const T=hc(this.query)?d.last():d.first();d=d.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{qu:d,Qu:r,ni:f,mutatedKeys:a}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const a=t.Qu.Iu();a.sort((w,T)=>function(S,M){const V=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return V(S)-V(M)}(w.type,T.type)||this.Uu(w.doc,T.doc)),this.Wu(r);const d=e?this.zu():[],f=0===this.Lu.size&&this.current?1:0,_=f!==this.Bu;return this.Bu=f,0!==a.length||_?{snapshot:new $v(this.query,t.qu,i,a,t.mutatedKeys,0===f,_,!1),Hu:d}:{Hu:d}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new s2,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=Qe(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const e=[];return t.forEach(r=>{this.Lu.has(r)||e.push(new u2(r))}),this.Lu.forEach(r=>{t.has(r)||e.push(new l2(r))}),e}Yu(t){this.$u=t.li,this.Lu=Qe();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return $v.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class t6{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class n6{constructor(t){this.key=t,this.Zu=!1}}class r6{constructor(t,e,r,i,a,d){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new m(f=>xS(f),Qf),this.na=new Map,this.sa=new Set,this.ia=new v(ze.comparator),this.ra=new Map,this.oa=new ok,this.ua={},this.aa=new Map,this.ca=Pm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function i6(n,t){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,ve.Z)(function*(n,t){const e=oP(n);let r,i;const a=e.ea.get(t);if(a)r=a.targetId,e.sharedClientState.addLocalQueryTarget(r),i=a.view.Xu();else{const d=yield Pv(e.localStore,jo(t));e.isPrimaryClient&&WS(e.remoteStore,d);const f=e.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield Vk(e,t,r,"current"===f)}return i})).apply(this,arguments)}function Vk(n,t,e,r){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,ve.Z)(function*(n,t,e,r){n.la=(T,S,M)=>{return(V=(0,ve.Z)(function*(Y,ue,De,rt){let Je=ue.view.Gu(De);Je.ni&&(Je=yield HS(Y.localStore,ue.query,!1).then(({documents:Ft})=>ue.view.Gu(Ft,Je)));const it=rt&&rt.targetChanges.get(ue.targetId),at=ue.view.applyChanges(Je,Y.isPrimaryClient,it);return Yk(Y,ue.targetId,at.Hu),at.snapshot}),function(Y,ue,De,rt){return V.apply(this,arguments)})(n,T,S,M);var V};const i=yield HS(n.localStore,t,!0),a=new c2(t,i.li),d=a.Gu(i.documents),f=Yl.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),_=a.applyChanges(d,n.isPrimaryClient,f);Yk(n,e,_.Hu);const w=new t6(t,e,a);return n.ea.set(t,w),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),_.snapshot})).apply(this,arguments)}function s6(n,t){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,ve.Z)(function*(n,t){const e=tt(n),r=e.ea.get(t),i=e.na.get(r.targetId);if(i.length>1)return e.na.set(r.targetId,i.filter(a=>!Qf(a,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ov(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),UC(e.remoteStore,r.targetId),Hv(e,r.targetId)}).catch(Om))):(Hv(e,r.targetId),yield Ov(e.localStore,r.targetId,!0))})).apply(this,arguments)}function $k(){return($k=(0,ve.Z)(function*(n,t,e){const r=aP(n);try{const i=yield function(a,d){const f=tt(a),_=Er.now(),w=d.reduce((S,M)=>S.add(M.key),Qe());let T;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>f.ci.Ks(S,w).next(M=>{T=M;const V=[];for(const Y of d){const ue=JF(Y,T.get(Y.key));null!=ue&&V.push(new eh(Y.key,ue,dC(ue.value.mapValue),gi.exists(!0)))}return f.Bs.addMutationBatch(S,_,V,d)})).then(S=>(S.applyToLocalDocumentSet(T),{batchId:S.batchId,changes:T}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,d,f){let _=a.ua[a.currentUser.toKey()];_||(_=new v(Kt)),_=_.insert(d,f),a.ua[a.currentUser.toKey()]=_}(r,i.batchId,e),yield rh(r,i.changes),yield Lv(r.remoteStore)}catch(i){const a=Bv(i,"Failed to persist write");e.reject(a)}})).apply(this,arguments)}function d2(n,t){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,ve.Z)(function*(n,t){const e=tt(n);try{const r=yield v$(e.localStore,t);t.targetChanges.forEach((i,a)=>{const d=e.ra.get(a);d&&(Ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?Ot(d.Zu):i.removedDocuments.size>0&&(Ot(d.Zu),d.Zu=!1))}),yield rh(e,r,t)}catch(r){yield Om(r)}})).apply(this,arguments)}function h2(n,t,e){const r=tt(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ea.forEach((a,d)=>{const f=d.view.Au(t);f.snapshot&&i.push(f.snapshot)}),function(a,d){const f=tt(a);f.onlineState=d;let _=!1;f.queries.forEach((w,T)=>{for(const S of T.listeners)S.Au(d)&&(_=!0)}),_&&Ok(f)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function a6(n,t,e){return jk.apply(this,arguments)}function jk(){return(jk=(0,ve.Z)(function*(n,t,e){const r=tt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ra.get(t),a=i&&i.key;if(a){let d=new v(ze.comparator);d=d.insert(a,dr.newNoDocument(a,xt.min()));const f=Qe().add(a),_=new ns(xt.min(),new Map,new N(Kt),d,f);yield d2(r,_),r.ia=r.ia.remove(a),r.ra.delete(t),Kk(r)}else yield Ov(r.localStore,t,!1).then(()=>Hv(r,t,e)).catch(Om)})).apply(this,arguments)}function l6(n,t){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,ve.Z)(function*(n,t){const e=tt(n),r=t.batch.batchId;try{const i=yield y$(e.localStore,t);zk(e,r,null),Zk(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield rh(e,i)}catch(i){yield Om(i)}})).apply(this,arguments)}function u6(n,t,e){return qk.apply(this,arguments)}function qk(){return(qk=(0,ve.Z)(function*(n,t,e){const r=tt(n);try{const i=yield function(a,d){const f=tt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.Bs.lookupMutationBatch(_,d).next(T=>(Ot(null!==T),w=T.keys(),f.Bs.removeMutationBatch(_,T))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.ci.Ks(_,w))})}(r.localStore,t);zk(r,t,e),Zk(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield rh(r,i)}catch(i){yield Om(i)}})).apply(this,arguments)}function Wk(){return(Wk=(0,ve.Z)(function*(n,t){const e=tt(n);ip(e.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const d=tt(a);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===r)return void t.resolve();const i=e.aa.get(r)||[];i.push(t),e.aa.set(r,i)}catch(r){const i=Bv(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})).apply(this,arguments)}function Zk(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function zk(n,t,e){const r=tt(n);let i=r.ua[r.currentUser.toKey()];if(i){const a=i.get(t);a&&(e?a.reject(e):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function Hv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),e&&n.ta.fa(r,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||f2(n,r)})}function f2(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(UC(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),Kk(n))}function Yk(n,t,e){for(const r of e)r instanceof l2?(n.oa.addReference(r.key,t),d6(n,r)):r instanceof u2?(He("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||f2(n,r.key)):ft()}function d6(n,t){const e=t.key,r=e.path.canonicalString();n.ia.get(e)||n.sa.has(r)||(He("SyncEngine","New document in limbo: "+e),n.sa.add(r),Kk(n))}function Kk(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new ze(Cn.fromString(t)),r=n.ca.next();n.ra.set(r,new n6(e)),n.ia=n.ia.insert(e,r),WS(n.remoteStore,new ep(jo(oo(e.path)),r,2,Us.A))}}function rh(n,t,e){return Qk.apply(this,arguments)}function Qk(){return(Qk=(0,ve.Z)(function*(n,t,e){const r=tt(n),i=[],a=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,_)=>{d.push(r.la(_,t,e).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const T=tk.Ys(_.targetId,w);a.push(T)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,ve.Z)(function*(_,w){const T=tt(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>be.forEach(w,M=>be.forEach(M.Hs,V=>T.persistence.referenceDelegate.addReference(S,M.targetId,V)).next(()=>be.forEach(M.Js,V=>T.persistence.referenceDelegate.removeReference(S,M.targetId,V)))))}catch(S){if(!Am(S))throw S;He("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const M=S.targetId;if(!S.fromCache){const V=T.ii.get(M),ue=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);T.ii=T.ii.insert(M,ue)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))})).apply(this,arguments)}function h6(n,t){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,ve.Z)(function*(n,t){const e=tt(n);if(!e.currentUser.isEqual(t)){He("SyncEngine","User change. New user:",t.toKey());const r=yield $L(e.localStore,t);e.currentUser=t,(i=e).aa.forEach(d=>{d.forEach(f=>{f.reject(new Pe(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield rh(e,r.hi)}var i})).apply(this,arguments)}function f6(n,t){const e=tt(n),r=e.ra.get(t);if(r&&r.Zu)return Qe().add(r.key);{let i=Qe();const a=e.na.get(t);if(!a)return i;for(const d of a){const f=e.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function p6(n,t){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,ve.Z)(function*(n,t){const e=tt(n),r=yield HS(e.localStore,t.query,!0),i=t.view.Yu(r);return e.isPrimaryClient&&Yk(e,t.targetId,i.Hu),i})).apply(this,arguments)}function g6(n,t){return eP.apply(this,arguments)}function eP(){return(eP=(0,ve.Z)(function*(n,t){const e=tt(n);return qL(e.localStore,t).then(r=>rh(e,r))})).apply(this,arguments)}function m6(n,t,e,r){return tP.apply(this,arguments)}function tP(){return(tP=(0,ve.Z)(function*(n,t,e,r){const i=tt(n),a=yield function(d,f){const _=tt(d),w=tt(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.fn(T,f).next(S=>S?_.ci.Ks(T,S):be.resolve(null)))}(i.localStore,t);var f;null!==a?("pending"===e?yield Lv(i.remoteStore):"acknowledged"===e||"rejected"===e?(zk(i,t,r||null),Zk(i,t),f=t,tt(tt(i.localStore).Bs)._n(f)):ft(),yield rh(i,a)):He("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function nP(){return(nP=(0,ve.Z)(function*(n,t){const e=tt(n);if(oP(e),aP(e),!0===t&&!0!==e.ha){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield p2(e,r.toArray());e.ha=!0,yield Ak(e.remoteStore,!0);for(const a of i)WS(e.remoteStore,a)}else if(!1===t&&!1!==e.ha){const r=[];let i=Promise.resolve();e.na.forEach((a,d)=>{e.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Hv(e,d),Ov(e.localStore,d,!0))),UC(e.remoteStore,d)}),yield i,yield p2(e,r),function(a){const d=tt(a);d.ra.forEach((f,_)=>{UC(d.remoteStore,_)}),d.oa.bi(),d.ra=new Map,d.ia=new v(ze.comparator)}(e),e.ha=!1,yield Ak(e.remoteStore,!1)}})).apply(this,arguments)}function p2(n,t,e){return rP.apply(this,arguments)}function rP(){return(rP=(0,ve.Z)(function*(n,t,e){const r=tt(n),i=[],a=[];for(const d of t){let f;const _=r.na.get(d);if(_&&0!==_.length){f=yield Pv(r.localStore,jo(_[0]));for(const w of _){const T=r.ea.get(w),S=yield p6(r,T);S.snapshot&&a.push(S.snapshot)}}else{const w=yield GL(r.localStore,d);f=yield Pv(r.localStore,w),yield Vk(r,g2(w),d,!1)}i.push(f)}return r.ta.Qo(a),i})).apply(this,arguments)}function g2(n){return NS(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function y6(n){const t=tt(n);return tt(tt(t.localStore).persistence).Fs()}function v6(n,t,e,r){return iP.apply(this,arguments)}function iP(){return(iP=(0,ve.Z)(function*(n,t,e,r){const i=tt(n);if(i.ha)return void He("SyncEngine","Ignoring unexpected query state notification.");const a=i.na.get(t);if(a&&a.length>0)switch(e){case"current":case"not-current":{const d=yield qL(i.localStore,al(a[0])),f=ns.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield rh(i,d,f);break}case"rejected":yield Ov(i.localStore,t,!0),Hv(i,t,r);break;default:ft()}})).apply(this,arguments)}function b6(n,t,e){return sP.apply(this,arguments)}function sP(){return(sP=(0,ve.Z)(function*(n,t,e){const r=oP(n);if(r.ha){for(const i of t){if(r.na.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const a=yield GL(r.localStore,i),d=yield Pv(r.localStore,a);yield Vk(r,g2(a),d.targetId,!1),WS(r.remoteStore,d)}for(const i of e)r.na.has(i)&&(yield Ov(r.localStore,i,!1).then(()=>{UC(r.remoteStore,i),Hv(r,i)}).catch(Om))}})).apply(this,arguments)}function oP(n){const t=tt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=d2.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=f6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=a6.bind(null,t),t.ta.Qo=Q$.bind(null,t.eventManager),t.ta.fa=J$.bind(null,t.eventManager),t}function aP(n){const t=tt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=l6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=u6.bind(null,t),t}class m2{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ve.Z)(function*(){e.M=VC(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return UL(this.persistence,new BL,t.initialUser,this.M)}wa(t){return new N$(ak.zi,this.M)}_a(t){return new YL}terminate(){var t=this;return(0,ve.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class _2 extends m2{constructor(t,e,r){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield e().call(r,t),yield r.ya.initialize(r,t),yield aP(r.ya.syncEngine),yield Lv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(t){return UL(this.persistence,new BL,t.initialUser,this.M)}ma(t){return new c$(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=ek(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Go.withCacheSize(this.cacheSizeBytes):Go.DEFAULT;return new XR(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,QL(),qS(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new YL}}class C6 extends _2{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield e().call(r,t);const i=r.ya.syncEngine;r.sharedClientState instanceof dk&&(r.sharedClientState.syncEngine={Mr:m6.bind(null,i),Or:v6.bind(null,i),Fr:b6.bind(null,i),Fs:y6.bind(null,i),kr:g6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,ve.Z)(function*(d){yield function(n,t){return nP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return a.apply(this,arguments)}}())})()}_a(t){const e=QL();if(!dk.vt(e))throw new Pe(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ek(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dk(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class lP{initialize(t,e){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>h2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=h6.bind(null,r.syncEngine),yield Ak(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new K$}createDatastore(t){const e=VC(t.databaseInfo.databaseId),r=new P$(t.databaseInfo);return new L$(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,a=f=>h2(this.syncEngine,f,0),d=KL.vt()?new KL:new M$,new B$(e,r,i,a,d);var e,r,i,a,d}createSyncEngine(t,e){return function(r,i,a,d,f,_,w){const T=new r6(r,i,a,d,f,_);return w&&(T.ha=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ve.Z)(function*(e){const r=tt(e);He("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Fv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function y2(n,t=10240){let e=0;return{read:()=>(0,ve.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class zS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class E6{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new Ci,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,ve.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,ve.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,ve.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const r=t.Ea.decode(e),i=Number(r);isNaN(i)&&t.Pa(`length string (${r}) is not valid number`);const a=yield t.ba(i);return new X$(JSON.parse(a),e.length+i)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,ve.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ba(t){var e=this;return(0,ve.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const r=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,ve.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class D6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Pe(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,d){const f=tt(a),_=AC(f.M)+"/documents",w={documents:d.map(V=>SC(f.M,V))},T=yield f.ho("BatchGetDocuments",_,w),S=new Map;T.forEach(V=>{const Y=function(n,t){return"found"in t?function(e,r){Ot(!!r.found);const i=mc(e,r.found.name),a=rs(r.found.updateTime),d=new Cs({mapValue:{fields:r.found.fields}});return dr.newFoundDocument(i,a,d)}(n,t):"missing"in t?function(e,r){Ot(!!r.missing),Ot(!!r.readTime);const i=mc(e,r.missing),a=rs(r.readTime);return dr.newNoDocument(i,a)}(n,t):ft()}(f.M,V);S.set(Y.key.toString(),Y)});const M=[];return d.forEach(V=>{const Y=S.get(V.toString());Ot(!!Y),M.push(Y)}),M}),function(a,d){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new Dv(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const a=ze.fromPath(i);t.mutations.push(new s(a,t.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const d=tt(i),f=AC(d.M)+"/documents",_={writes:a.map(w=>NC(d.M,w))};yield d.oo("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ft();e=xt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Pe(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?gi.updateTime(e):gi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(xt.min()))throw new Pe(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gi.updateTime(e)}return gi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class T6{constructor(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new hk(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,ve.Z)(function*(){const e=new D6(t.datastore),r=t.Ca(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(a=>{t.xa(a)}))}).catch(i=>{t.xa(i)})}))}Ca(t){try{const e=this.updateFunction(t);return!Ui(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!h(e)}return!1}}class I6{constructor(t,e,r,i){var a=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Bi.UNAUTHENTICATED,this.clientId=yR.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(f){He("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(He("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var t=this;return(0,ve.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=Bv(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function v2(n,t){return uP.apply(this,arguments)}function uP(){return(uP=(0,ve.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield $L(t.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function b2(n,t){return cP.apply(this,arguments)}function cP(){return(cP=(0,ve.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield dP(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>i2(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>i2(t.remoteStore,a)),n.onlineComponents=t})).apply(this,arguments)}function dP(n){return hP.apply(this,arguments)}function hP(){return(hP=(0,ve.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield v2(n,new m2)),n.offlineComponents})).apply(this,arguments)}function YS(n){return fP.apply(this,arguments)}function fP(){return(fP=(0,ve.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield b2(n,new lP)),n.onlineComponents})).apply(this,arguments)}function w2(n){return dP(n).then(t=>t.persistence)}function pP(n){return dP(n).then(t=>t.localStore)}function C2(n){return YS(n).then(t=>t.remoteStore)}function gP(n){return YS(n).then(t=>t.syncEngine)}function jv(n){return mP.apply(this,arguments)}function mP(){return(mP=(0,ve.Z)(function*(n){const t=yield YS(n),e=t.eventManager;return e.onListen=i6.bind(null,t.syncEngine),e.onUnlisten=s6.bind(null,t.syncEngine),e})).apply(this,arguments)}function E2(n,t,e={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,d,f,_){const w=new zS({next:S=>{a.enqueueAndForget(()=>kk(i,T));const M=S.docs.has(d);!M&&S.fromCache?_.reject(new Pe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&S.fromCache&&f&&"server"===f.source?_.reject(new Pe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new Fk(oo(d.path),w,{includeMetadataChanges:!0,Cu:!0});return Mk(i,T)}(yield jv(n),n.asyncQueue,t,e,r)})),r.promise}function D2(n,t,e={}){const r=new Ci;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,d,f,_){const w=new zS({next:S=>{a.enqueueAndForget(()=>kk(i,T)),S.fromCache&&"server"===f.source?_.reject(new Pe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new Fk(d,w,{includeMetadataChanges:!0,Cu:!0});return Mk(i,T)}(yield jv(n),n.asyncQueue,t,e,r)})),r.promise}const T2=new Map;function _P(n,t,e){if(!e)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function I2(n,t,e,r){if(!0===t&&!0===r)throw new Pe(me.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function S2(n){if(!ze.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function A2(n){if(ze.isDocumentKey(n))throw new Pe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ft()}function Dn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Pe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=KS(n);throw new Pe(me.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function N2(n,t){if(t<=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class x2{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Pe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Pe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,I2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class $C{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x2({}),this._settingsFrozen=!1,t instanceof Zl?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(i.options.projectId)}(t))}get app(){if(!this._app)throw new Pe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x2(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new Wd;switch(e.type){case"gapi":const r=e.client;return Ot(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new mR(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Pe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=T2.get(t);e&&(He("ComponentProvider","Removing Datastore"),T2.delete(t),e.terminate())}(this),Promise.resolve()}}class xr{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new xr(this.firestore,t,this._key)}}class $s{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new $s(this.firestore,t,this._query)}}class yc extends $s{constructor(t,e,r){super(t,e,oo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new xr(this.firestore,null,new ze(t))}withConverter(t){return new yc(this.firestore,t,this._path)}}function M2(n,t,...e){if(n=(0,F.m9)(n),_P("collection","path",t),n instanceof $C){const r=Cn.fromString(t,...e);return A2(r),new yc(n,null,r)}{if(!(n instanceof xr||n instanceof yc))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(t,...e));return A2(r),new yc(n.firestore,null,r)}}function QS(n,t,...e){if(n=(0,F.m9)(n),1===arguments.length&&(t=yR.R()),_P("doc","path",t),n instanceof $C){const r=Cn.fromString(t,...e);return S2(r),new xr(n,null,new ze(r))}{if(!(n instanceof xr||n instanceof yc))throw new Pe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(t,...e));return S2(r),new xr(n.firestore,n instanceof yc?n.converter:null,new ze(r))}}function R2(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),(n instanceof xr||n instanceof yc)&&(t instanceof xr||t instanceof yc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function k2(n,t){return n=(0,F.m9)(n),t=(0,F.m9)(t),n instanceof $s&&t instanceof $s&&n.firestore===t.firestore&&Qf(n._query,t._query)&&n.converter===t.converter}class L6{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new hk(this,"async_queue_retry"),this.qa=()=>{const e=qS();e&&He("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=qS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=qS();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new Ci;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,ve.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!Am(e))throw e;He("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{throw this.$a=r,this.Ba=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=e,e}enqueueAfterDelay(t,e,r){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const i=xk.createAndSchedule(this,t,e,r,a=>this.ja(a));return this.Fa.push(i),i}Ka(){this.$a&&ft()}verifyOperationInProgress(){}Wa(){var t=this;return(0,ve.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function yP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class V6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ur extends $C{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new L6,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||P2(this),this._firestoreClient.terminate()}}function Ti(n){return n._firestoreClient||P2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function P2(n){var t;const e=n._freezeSettings(),r=(a=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new DR(n._databaseId,a,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new I6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function O2(n,t,e){const r=new Ci;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield v2(n,e),yield b2(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===me.FAILED_PRECONDITION||a.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function F2(n){if(n._initialized||n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ih{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Pe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class vc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new vc(pi.fromBase64String(t))}catch(e){throw new Pe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new vc(pi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Lm{constructor(t){this._methodName=t}}class JS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Pe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Pe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}}const z6=/^__.*__$/;class Y6{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new eh(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ev(t,this.data,e,this.fieldTransforms)}}class L2{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new eh(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function V2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class XS{constructor(t,e,r,i,a,d){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new XS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return nA(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(V2(this.Xa)&&z6.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class K6{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||VC(t)}ac(t,e,r,i=!1){return new XS({Xa:t,methodName:e,uc:r,path:Di.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Vm(n){const t=n._freezeSettings(),e=VC(n._databaseId);return new K6(n._databaseId,!!t.ignoreUndefinedProperties,e)}function eA(n,t,e,r,i,a={}){const d=n.ac(a.merge||a.mergeFields?2:0,t,e,i);CP("Data must be an object, but it was:",d,r);const f=$2(r,d);let _,w;if(a.merge)_=new qf(d.fieldMask),w=d.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const M=EP(t,S,e);if(!d.contains(M))throw new Pe(me.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);j2(T,M)||T.push(M)}_=new qf(T),w=d.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=d.fieldTransforms;return new Y6(new Cs(f),_,w)}class HC extends Lm{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof HC}}function B2(n,t,e){return new XS({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class vP extends Lm{_toFieldTransform(t){return new Sm(t.path,new Qd)}isEqual(t){return t instanceof vP}}class Q6 extends Lm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=B2(this,t,!0),r=this.cc.map(a=>Bm(a,e)),i=new pc(r);return new Sm(t.path,i)}isEqual(t){return this===t}}class J6 extends Lm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=B2(this,t,!0),r=this.cc.map(a=>Bm(a,e)),i=new Jd(r);return new Sm(t.path,i)}isEqual(t){return this===t}}class X6 extends Lm{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new Xd(t.M,MS(t.M,this.hc));return new Sm(t.path,e)}isEqual(t){return this===t}}function bP(n,t,e,r){const i=n.ac(1,t,e);CP("Data must be an object, but it was:",i,r);const a=[],d=Cs.empty();Gf(r,(_,w)=>{const T=tA(t,_,e);w=(0,F.m9)(w);const S=i.sc(T);if(w instanceof HC)a.push(T);else{const M=Bm(w,S);null!=M&&(a.push(T),d.set(T,M))}});const f=new qf(a);return new L2(d,f,i.fieldTransforms)}function wP(n,t,e,r,i,a){const d=n.ac(1,t,e),f=[EP(t,r,e)],_=[i];if(a.length%2!=0)throw new Pe(me.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<a.length;M+=2)f.push(EP(t,a[M])),_.push(a[M+1]);const w=[],T=Cs.empty();for(let M=f.length-1;M>=0;--M)if(!j2(w,f[M])){const V=f[M];let Y=_[M];Y=(0,F.m9)(Y);const ue=d.sc(V);if(Y instanceof HC)w.push(V);else{const De=Bm(Y,ue);null!=De&&(w.push(V),T.set(V,De))}}const S=new qf(w);return new L2(T,S,d.fieldTransforms)}function U2(n,t,e,r=!1){return Bm(e,n.ac(r?4:3,t))}function Bm(n,t){if(H2(n=(0,F.m9)(n)))return CP("Unsupported field value:",t,n),$2(n,t);if(n instanceof Lm)return function(e,r){if(!V2(r.Xa))throw r.rc(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,r){const i=[];let a=0;for(const d of e){let f=Bm(d,r.ic(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,F.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return MS(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Er.fromDate(e);return{timestampValue:IC(r.M,i)}}if(e instanceof Er){const i=new Er(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:IC(r.M,i)}}if(e instanceof JS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vc)return{bytesValue:XF(r.M,e._byteString)};if(e instanceof xr){const i=r.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw r.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:BR(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.rc(`Unsupported field value: ${KS(e)}`)}(n,t)}function $2(n,t){const e={};return wR(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gf(n,(r,i)=>{const a=Bm(i,t.tc(r));null!=a&&(e[r]=a)}),{mapValue:{fields:e}}}function H2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof JS||n instanceof vc||n instanceof xr||n instanceof Lm)}function CP(n,t,e){if(!H2(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=KS(e);throw t.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function EP(n,t,e){if((t=(0,F.m9)(t))instanceof ih)return t._internalPath;if("string"==typeof t)return tA(n,t);throw nA("Field path arguments must be of type string or ",n,!1,void 0,e)}const eH=new RegExp("[~\\*/\\[\\]]");function tA(n,t,e){if(t.search(eH)>=0)throw nA(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ih(...t.split("."))._internalPath}catch(r){throw nA(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function nA(n,t,e,r,i){const a=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||d)&&(_+=" (found",a&&(_+=` in field ${r}`),d&&(_+=` in document ${i}`),_+=")"),new Pe(me.INVALID_ARGUMENT,f+n+_)}function j2(n,t){return n.some(e=>e.isEqual(t))}class jC{constructor(t,e,r,i,a){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new xr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new tH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(rA("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class tH extends jC{data(){return super.data()}}function rA(n,t){return"string"==typeof t?tA(n,t):t instanceof ih?t._internalPath:t._delegate._internalPath}class Um{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sh extends jC{constructor(t,e,r,i,a,d){super(t,e,r,i,d),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new GC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(rA("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class GC extends sh{data(t={}){return super.data(t)}}class op{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Um(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new GC(this._firestore,this._userDataWriter,r.key,r,new Um(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Pe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new GC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Um(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new GC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Um(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==d.type&&(_=a.indexOf(d.doc.key),a=a.delete(d.doc.key)),1!==d.type&&(a=a.add(d.doc),w=a.indexOf(d.doc.key)),{type:nH(d.type),doc:f,oldIndex:_,newIndex:w}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function nH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function G2(n,t){return n instanceof sh&&t instanceof sh?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof op&&t instanceof op&&n._firestore===t._firestore&&k2(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function q2(n){if(Kf(n)&&0===n.explicitOrderBy.length)throw new Pe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qC{}function ap(n,...t){for(const e of t)n=e._apply(n);return n}class rH extends qC{constructor(t,e,r){super(),this.lc=t,this.fc=e,this.dc=r,this.type="where"}_apply(t){const e=Vm(t.firestore),r=function(i,a,d,f,_,w,T){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Q2(T,w);const V=[];for(const Y of T)V.push(K2(f,i,Y));S={arrayValue:{values:V}}}else S=K2(f,i,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Q2(T,w),S=U2(d,"where",T,"in"===w||"not-in"===w);const M=Fn.create(_,w,S);return function(V,Y){if(Y.S()){const De=gC(V);if(null!==De&&!De.isEqual(Y.field))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${De.toString()}' and '${Y.field.toString()}'`);const rt=pC(V);null!==rt&&J2(0,Y.field,rt)}const ue=function(De,rt){for(const Je of De.filters)if(rt.indexOf(Je.op)>=0)return Je.op;return null}(V,function(De){switch(De){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==ue)throw new Pe(me.INVALID_ARGUMENT,ue===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,M),M}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new $s(t.firestore,t.converter,function(i,a){const d=i.filters.concat([a]);return new zl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class sH extends qC{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(r,i,a){if(null!==r.startAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Yf(i,a);return function(f,_){if(null===pC(f)){const w=gC(f);null!==w&&J2(0,w,_.field)}}(r,d),d}(t._query,this.lc,this._c);return new $s(t.firestore,t.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new zl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class W2 extends qC{constructor(t,e,r){super(),this.type=t,this.wc=e,this.mc=r}_apply(t){return new $s(t.firestore,t.converter,_C(t._query,this.wc,this.mc))}}class Z2 extends qC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=Y2(t,this.type,this.gc,this.yc);return new $s(t.firestore,t.converter,(i=e,new zl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class z2 extends qC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=Y2(t,this.type,this.gc,this.yc);return new $s(t.firestore,t.converter,(i=e,new zl((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Y2(n,t,e,r){if(e[0]=(0,F.m9)(e[0]),e[0]instanceof jC)return function(i,a,d,f,_){if(!f)throw new Pe(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const T of fc(i))if(T.field.isKeyField())w.push(Zf(a,f.key));else{const S=f.data.field(T.field);if(lC(S))throw new Pe(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const M=T.field.canonicalString();throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}w.push(S)}return new dc(w,_)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=Vm(n.firestore);return function(a,d,f,_,w,T){const S=a.explicitOrderBy;if(w.length>S.length)throw new Pe(me.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let V=0;V<w.length;V++){const Y=w[V];if(S[V].field.isKeyField()){if("string"!=typeof Y)throw new Pe(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!mC(a)&&-1!==Y.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const ue=a.path.child(Cn.fromString(Y));if(!ze.isDocumentKey(ue))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const De=new ze(ue);M.push(Zf(d,De))}else{const ue=U2(f,_,Y);M.push(ue)}}return new dc(M,T)}(n._query,n.firestore._databaseId,i,t,e,r)}}function K2(n,t,e){if("string"==typeof(e=(0,F.m9)(e))){if(""===e)throw new Pe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mC(t)&&-1!==e.indexOf("/"))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(Cn.fromString(e));if(!ze.isDocumentKey(r))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zf(n,new ze(r))}if(e instanceof xr)return Zf(n,e._key);throw new Pe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KS(e)}.`)}function Q2(n,t){if(!Array.isArray(n)||0===n.length)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Pe(me.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function J2(n,t,e){if(!e.isEqual(t))throw new Pe(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class DP{convertValue(t,e="none"){switch(Zd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Wf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ft()}}convertObject(t,e){const r={};return Gf(t.fields,(i,a)=>{r[i]=this.convertValue(a,e)}),r}convertGeoPoint(t){return new JS(Zr(t.latitude),Zr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=gS(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(_m(t));default:return null}}convertTimestamp(t){const e=uc(t);return new Er(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Cn.fromString(t);Ot(uL(r));const i=new Zl(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(e)||Xr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}function iA(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class fH extends DP{constructor(t){super(),this.firestore=t}convertBytes(t){return new vc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new xr(this.firestore,null,e)}}class X2{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Vm(t)}set(t,e,r){this._verifyNotCommitted();const i=lp(t,this._firestore),a=iA(i.converter,e,r),d=eA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,gi.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const a=lp(t,this._firestore);let d;return d="string"==typeof(e=(0,F.m9)(e))||e instanceof ih?wP(this._dataReader,"WriteBatch.update",a._key,e,r,i):bP(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(d.toMutation(a._key,gi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=lp(t,this._firestore);return this._mutations=this._mutations.concat(new Dv(e._key,gi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lp(n,t){if((n=(0,F.m9)(n)).firestore!==t)throw new Pe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $m extends DP{constructor(t){super(),this.firestore=t}convertBytes(t){return new vc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new xr(this.firestore,null,e)}}function eV(n,t,e){n=Dn(n,xr);const r=Dn(n.firestore,Ur),i=iA(n.converter,t,e);return Gv(r,[eA(Vm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,gi.none())])}function tV(n,t,e,...r){n=Dn(n,xr);const i=Dn(n.firestore,Ur),a=Vm(i);let d;return d="string"==typeof(t=(0,F.m9)(t))||t instanceof ih?wP(a,"updateDoc",n._key,t,e,r):bP(a,"updateDoc",n._key,t),Gv(i,[d.toMutation(n._key,gi.exists(!0))])}function nV(n,...t){var e,r,i;n=(0,F.m9)(n);let a={includeMetadataChanges:!1},d=0;"object"!=typeof t[d]||yP(t[d])||(a=t[d],d++);const f={includeMetadataChanges:a.includeMetadataChanges};if(yP(t[d])){const S=t[d];t[d]=null===(e=S.next)||void 0===e?void 0:e.bind(S),t[d+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),t[d+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,T;if(n instanceof xr)w=Dn(n.firestore,Ur),T=oo(n._key.path),_={next:S=>{t[d]&&t[d](TP(w,n,S))},error:t[d+1],complete:t[d+2]};else{const S=Dn(n,$s);w=Dn(S.firestore,Ur),T=S._query;const M=new $m(w);_={next:V=>{t[d]&&t[d](new op(w,M,S,V))},error:t[d+1],complete:t[d+2]},q2(n._query)}return function(S,M,V,Y){const ue=new zS(Y),De=new Fk(M,ue,V);return S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Mk(yield jv(S),De)})),()=>{ue.Ia(),S.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return kk(yield jv(S),De)}))}}(Ti(w),T,f,_)}function Gv(n,t){return function(e,r){const i=new Ci;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(n,t,e){return $k.apply(this,arguments)}(yield gP(e),r,i)})),i.promise}(Ti(n),t)}function TP(n,t,e){const r=e.docs.get(t._key),i=new $m(n);return new sh(n,i,t._key,r,new Um(e.hasPendingWrites,e.fromCache),t.converter)}class EH extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Vm(t)}get(t){const e=lp(t,this._firestore),r=new fH(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new jC(this._firestore,r,a.key,a,e.converter);if(a.isNoDocument())return new jC(this._firestore,r,e._key,null,e.converter);throw ft()})}set(t,e,r){const i=lp(t,this._firestore),a=iA(i.converter,e,r),d=eA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(t,e,r,...i){const a=lp(t,this._firestore);let d;return d="string"==typeof(e=(0,F.m9)(e))||e instanceof ih?wP(this._dataReader,"Transaction.update",a._key,e,r,i):bP(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,d),this}delete(t){const e=lp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=lp(t,this._firestore),r=new $m(this._firestore);return super.get(t).then(i=>new sh(this._firestore,r,e._key,i._document,new Um(!1,!1),e.converter))}}function IP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function iV(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function sV(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Hf=Ki.SDK_VERSION,(0,Ki._registerComponent)(new ca.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),a=new Ur(i,new oC(e.getProvider("auth-internal")),new _R(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC")),(0,Ki.registerVersion)(dS,"3.4.8",n),(0,Ki.registerVersion)(dS,"3.4.8","esm2017")}();class WC{constructor(t){this._delegate=t}static fromBase64String(t){return sV(),new WC(vc.fromBase64String(t))}static fromUint8Array(t){return iV(),new WC(vc.fromUint8Array(t))}toBase64(){return sV(),this._delegate.toBase64()}toUint8Array(){return iV(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function SP(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class kH{enableIndexedDbPersistence(t,e){return function(n,t){F2(n=Dn(n,Ur));const e=Ti(n),r=n._freezeSettings(),i=new lP;return O2(e,i,new _2(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){F2(n=Dn(n,Ur));const t=Ti(n),e=n._freezeSettings(),r=new lP;return O2(t,r,new C6(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Pe(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(e=(0,ve.Z)(function*(r){if(!Ql.vt())return Promise.resolve();const i=r+"main";yield Ql.delete(i)}),function(r){return e.apply(this,arguments)})(ek(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class oV{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof Zl||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&qd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const a=(n=Dn(n,$C))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&qd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Bi.MOCK_USER;else{d=(0,F.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Pe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Bi(_)}n._authCredentials=new fS(new sC(d,f))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const t=yield w2(n),e=yield C2(n);return t.setNetworkEnabled(!0),function(r){const i=tt(r);return i.fu.delete(0),BC(i)}(e)}))}(Ti(n=Dn(n,Ur)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const t=yield w2(n),e=yield C2(n);return t.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=tt(i);a.fu.add(0),yield Fv(a),a.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(Ti(n=Dn(n,Ur)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,I2("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new Ci;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(n,t){return Wk.apply(this,arguments)}(yield gP(t),e)})),e.promise}(Ti(n=Dn(n,Ur)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new zS(t);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield jv(n),i=e,tt(r).Eu.add(i),void i.next();var r,i})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield jv(n),i=e,void tt(r).Eu.delete(i);var r,i}))}}(Ti(n=Dn(n,Ur)),yP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new qv(this,M2(this._delegate,t))}catch(e){throw lo(e,"collection()","Firestore.collection()")}}doc(t){try{return new ll(this,QS(this._delegate,t))}catch(e){throw lo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new uo(this,function(n,t){if(n=Dn(n,$C),_P("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pe(me.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $s(n,null,(e=t,new zl(Cn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw lo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new Ci;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,YS(i).then(a=>a.datastore));var i;new T6(n.asyncQueue,r,t,e).run()})),e.promise}(Ti(n=Dn(n,Ur)),e=>t(new EH(n,e)))}(this._delegate,e=>t(new aV(this,e)))}batch(){return Ti(this._delegate),new lV(new X2(this._delegate,t=>Gv(this._delegate,t)))}loadBundle(t){return function(n,t){const e=Ti(n=Dn(n,Ur)),r=new V6;return function(n,t,e,r){const i=function(a,d){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return y2(_,w);if(_ instanceof ArrayBuffer)return y2(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new E6(_,d);var _}(e,VC(t));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function(n,t,e){const r=tt(n);var i;(i=(0,ve.Z)(function*(a,d,f){try{const _=yield d.getMetadata();if(yield function(M,V){const Y=tt(M),ue=rs(V.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",De=>Y._s.getBundleMetadata(De,V.id)).then(De=>!!De&&De.createTime.compareTo(ue)>=0)}(a.localStore,_))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(M=_).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);f._updateProgress(a2(_));const w=new e6(_,a.localStore,d.M);let T=yield d.da();for(;T;){const M=yield w.ku(T);M&&f._updateProgress(M),T=yield d.da()}const S=yield w.complete();return yield rh(a,S.Fu,void 0),yield function(M,V){const Y=tt(M);return Y.persistence.runTransaction("Save bundle","readwrite",ue=>Y._s.saveBundleMetadata(ue,V))}(a.localStore,_),f._completeWith(S.progress),Promise.resolve(S.Ou)}catch(_){return qd("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var M}),function(a,d,f){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield gP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(e,r){const i=tt(e);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield pP(n),t)}))}(Ti(n=Dn(n,Ur)),t).then(e=>e?new $s(n,null,e.query):null)}(this._delegate,t).then(e=>e?new uo(this,e):null)}}class sA extends DP{constructor(t){super(),this.firestore=t}convertBytes(t){return new WC(new vc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return ll.forKey(e,this.firestore,null)}}class aV{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new sA(t)}get(t){const e=jm(t);return this._delegate.get(e).then(r=>new ZC(this._firestore,new sh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=jm(t);return r?(IP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const a=jm(t);return 2===arguments.length?this._delegate.update(a,e):this._delegate.update(a,e,r,...i),this}delete(t){const e=jm(t);return this._delegate.delete(e),this}}class lV{constructor(t){this._delegate=t}set(t,e,r){const i=jm(t);return r?(IP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const a=jm(t);return 2===arguments.length?this._delegate.update(a,e):this._delegate.update(a,e,r,...i),this}delete(t){const e=jm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Hm{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new GC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new zC(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Hm.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let a=i.get(e);return a||(a=new Hm(t,new sA(t),e),i.set(e,a)),a}}Hm.INSTANCES=new WeakMap;class ll{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sA(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ll(e,new xr(e._delegate,r,new ze(t)))}static forKey(t,e,r){return new ll(e,new xr(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new qv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new qv(this.firestore,M2(this._delegate,t))}catch(e){throw lo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,F.m9)(t))instanceof xr&&R2(this._delegate,t)}set(t,e){e=IP("DocumentReference.set",e);try{return e?eV(this._delegate,t,e):eV(this._delegate,t)}catch(r){throw lo(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?tV(this._delegate,t):tV(this._delegate,t,e,...r)}catch(i){throw lo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Gv(Dn(n.firestore,Ur),[new Dv(n._key,gi.none())])}(this._delegate)}onSnapshot(...t){const e=uV(t),r=cV(t,i=>new ZC(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nV(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Dn(n,xr);const t=Dn(n.firestore,Ur),e=Ti(t),r=new $m(t);return function(n,t){const e=new Ci;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,d){try{const f=yield function(_,w){const T=tt(_);return T.persistence.runTransaction("read document","readonly",S=>T.ci.Ls(S,w))}(i,a);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Pe(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=Bv(f,`Failed to get document '${a} from cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield pP(n),t,e);var r})),e.promise}(e,n._key).then(i=>new sh(t,r,n._key,i,new Um(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Dn(n,xr);const t=Dn(n.firestore,Ur);return E2(Ti(t),n._key,{source:"server"}).then(e=>TP(t,n,e))}(this._delegate):function(n){n=Dn(n,xr);const t=Dn(n.firestore,Ur);return E2(Ti(t),n._key).then(e=>TP(t,n,e))}(this._delegate),e.then(r=>new ZC(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new ll(this.firestore,this._delegate.withConverter(t?Hm.getInstance(this.firestore,t):null))}}function lo(n,t,e){return n.message=n.message.replace(t,e),n}function uV(n){for(const t of n)if("object"==typeof t&&!SP(t))return t;return{}}function cV(n,t){var e,r;let i;return i=SP(n[0])?n[0]:SP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(t(a))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class ZC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new ll(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return G2(this._delegate,t._delegate)}}class zC extends ZC{data(t){const e=this._delegate.data(t);return function(n,t){n||ft()}(void 0!==e),e}}class uo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new sA(t)}where(t,e,r){try{return new uo(this.firestore,ap(this._delegate,function(n,t,e){const r=t,i=rA("where",n);return new rH(i,r,e)}(t,e,r)))}catch(i){throw lo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new uo(this.firestore,ap(this._delegate,function(n,t="asc"){const e=t,r=rA("orderBy",n);return new sH(r,e)}(t,e)))}catch(r){throw lo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new uo(this.firestore,ap(this._delegate,function(n){return N2("limit",n),new W2("limit",n,"F")}(t)))}catch(e){throw lo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new uo(this.firestore,ap(this._delegate,function(n){return N2("limitToLast",n),new W2("limitToLast",n,"L")}(t)))}catch(e){throw lo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new Z2("startAt",n,!0)}(...t)))}catch(e){throw lo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new Z2("startAfter",n,!1)}(...t)))}catch(e){throw lo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new z2("endBefore",n,!1)}(...t)))}catch(e){throw lo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new uo(this.firestore,ap(this._delegate,function(...n){return new z2("endAt",n,!0)}(...t)))}catch(e){throw lo(e,"endAt()","Query.endAt()")}}isEqual(t){return k2(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Dn(n,$s);const t=Dn(n.firestore,Ur),e=Ti(t),r=new $m(t);return function(n,t){const e=new Ci;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,d){try{const f=yield HS(i,a,!0),_=new c2(a,f.li),w=_.Gu(f.documents),T=_.applyChanges(w,!1);d.resolve(T.snapshot)}catch(f){const _=Bv(f,`Failed to execute query '${a} against cache`);d.reject(_)}}),function(i,a,d){return r.apply(this,arguments)})(yield pP(n),t,e);var r})),e.promise}(e,n._query).then(i=>new op(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Dn(n,$s);const t=Dn(n.firestore,Ur),e=Ti(t),r=new $m(t);return D2(e,n._query,{source:"server"}).then(i=>new op(t,r,n,i))}(this._delegate):function(n){n=Dn(n,$s);const t=Dn(n.firestore,Ur),e=Ti(t),r=new $m(t);return q2(n._query),D2(e,n._query).then(i=>new op(t,r,n,i))}(this._delegate),e.then(r=>new AP(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=uV(t),r=cV(t,i=>new AP(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nV(this._delegate,e,r)}withConverter(t){return new uo(this.firestore,this._delegate.withConverter(t?Hm.getInstance(this.firestore,t):null))}}class OH{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new zC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class AP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new zC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new OH(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new zC(this._firestore,r))})}isEqual(t){return G2(this._delegate,t._delegate)}}class qv extends uo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ll(this.firestore,t):null}doc(t){try{return new ll(this.firestore,void 0===t?QS(this._delegate):QS(this._delegate,t))}catch(e){throw lo(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=Dn(n.firestore,Ur),r=QS(n),i=iA(n.converter,t);return Gv(e,[eA(Vm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,gi.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new ll(this.firestore,e))}isEqual(t){return R2(this._delegate,t._delegate)}withConverter(t){return new qv(this.firestore,this._delegate.withConverter(t?Hm.getInstance(this.firestore,t):null))}}function jm(n){return Dn(n,xr)}class NP{constructor(...t){this._delegate=new ih(...t)}static documentId(){return new NP(Di.keyField().canonicalString())}isEqual(t){return(t=(0,F.m9)(t))instanceof ih&&this._delegate._internalPath.isEqual(t._internalPath)}}class Gm{constructor(t){this._delegate=t}static serverTimestamp(){const t=new vP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Gm(t)}static delete(){const t=new HC("deleteField");return t._methodName="FieldValue.delete",new Gm(t)}static arrayUnion(...t){const e=function(...n){return new Q6("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Gm(e)}static arrayRemove(...t){const e=function(...n){return new J6("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Gm(e)}static increment(t){const e=function(n){return new X6("increment",n)}(t);return e._methodName="FieldValue.increment",new Gm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const FH={Firestore:oV,GeoPoint:JS,Timestamp:Er,Blob:WC,Transaction:aV,WriteBatch:lV,DocumentReference:ll,DocumentSnapshot:ZC,Query:uo,QueryDocumentSnapshot:zC,QuerySnapshot:AP,CollectionReference:qv,FieldPath:NP,FieldValue:Gm,setLogLevel:function(n){!function(n){lc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function dV(n,t){return function(n,t=ku.z){return new Yn.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function xP(n,t){return dV(n,t).pipe((0,pt.U)(e=>({payload:e,type:"query"})))}function oA(n,t){return xP(n,t).pipe(ea(void 0),Oy(),(0,pt.U)(([e,r])=>{const i=r.payload.docChanges(),a=i.map(d=>({type:d.type,payload:d}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const _=i.find(T=>T.doc.ref.isEqual(d.ref)),w=null==e?void 0:e.payload.docs.find(T=>T.ref.isEqual(d.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(d.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(d.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),a}))}function hV(n,t,e){return oA(n,e).pipe($a((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return MP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return MP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return MP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),t),[]),pd(),(0,pt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function MP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function fV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new ca.wA("firestore-compat",e=>((t,e)=>new oV(t,e,new kH))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},FH)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(HE.Z);class pV{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=oA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,pt.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(ea(void 0),Oy(),Qn(([r,i])=>i.length>0||!r),(0,pt.U)(([r,i])=>i),wn.iC)}auditTrail(t){return this.stateChanges(t).pipe($a((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=fV(t);return hV(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return xP(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),wn.iC)}get(t){return(0,Xt.D)(this.query.get(t)).pipe(wn.iC)}add(t){return this.ref.add(t)}doc(t){return new gV(this.ref.doc(t),this.afs)}}class gV{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:a}=yV(r,e);return new pV(i,a,this.afs)}snapshotChanges(){return function(n,t){return dV(n,t).pipe(ea(void 0),Oy(),(0,pt.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Xt.D)(this.ref.get(t)).pipe(wn.iC)}}class jH{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?oA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Qn(e=>e.length>0),wn.iC):oA(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(t){return this.stateChanges(t).pipe($a((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=fV(t);return hV(this.query,e,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(t={}){return xP(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),wn.iC)}get(t){return(0,Xt.D)(this.query.get(t)).pipe(wn.iC)}}const mV=new l.OlP("angularfire2.enableFirestorePersistence"),_V=new l.OlP("angularfire2.firestore.persistenceSettings"),GH=new l.OlP("angularfire2.firestore.settings"),qH=new l.OlP("angularfire2.firestore.use-emulator");function yV(n,t=(e=>e)){return{query:t(n),ref:n}}let vV=(()=>{class n{constructor(e,r,i,a,d,f,_,w,T,S,M,V,Y,ue,De,rt,Je){this.schedulers=_;const it=(0,Fr.on)(e,f,r),at=T;S&&zw(it,f,M,Y,ue,De,V,rt),[this.firestore,this.persistenceEnabled$]=(0,Fr.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const Ft=f.runOutsideAngular(()=>it.firestore());if(a&&Ft.settings(a),at&&Ft.useEmulator(...at),i&&!gh(d)){const ln=()=>{try{return(0,Xt.D)(Ft.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Yr){return"undefined"!=typeof console&&console.warn(Yr),(0,ct.of)(!1)}};return[Ft,f.runOutsideAngular(ln)]}return[Ft,(0,ct.of)(!1)]},[a,at,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:a,query:d}=yV(i,r),f=this.schedulers.ngZone.run(()=>a);return new pV(f,d,this)}collectionGroup(e,r){const i=r||(d=>d),a=this.firestore.collectionGroup(e);return new jH(i(a),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new gV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(mV,8),l.LFG(GH,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(_V,8),l.LFG(qH,8),l.LFG(Hg,8),l.LFG(qw,8),l.LFG(ky,8),l.LFG($g,8),l.LFG(Ww,8),l.LFG(mI,8),l.LFG(Zw,8),l.LFG(Bg,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WH=(()=>{class n{constructor(){Ug.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:mV,useValue:!0},{provide:_V,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[vV]}),n})(),ZH=(()=>{class n{constructor(e,r,i,a){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,r){return this.afAuth.signInWithEmailAndPassword(e,r)}SignUp(e,r){return this.afAuth.createUserWithEmailAndPassword(e,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=e),null!==e}GoogleAuth(){return this.AuthLogin(new LM.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(vV),l.LFG(Hg),l.LFG(gs),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var zH=B(9105);function Es(n,t,e,r){return(0,zH.m)(e)&&(r=e,e=void 0),r?Es(n,t,e).pipe((0,pt.U)(i=>(0,xs.k)(i)?r(...i):r(i))):new Yn.y(i=>{bV(n,t,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,e)})}function bV(n,t,e,r,i){let a;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(t,e,i),a=()=>d.removeEventListener(t,e,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(t,e),a=()=>d.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(t,e),a=()=>d.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)bV(n[d],t,e,r,i)}r.add(a)}function JH(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class XH{call(t,e){return e.subscribe(new ej(t))}}class ej extends Th{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const a=Kn(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)}}var tj=B(8640);new Yn.y(tj.Z);var aA=B(377);function lA(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,_u.n)(n,void 0).lift(new nj(t))}class nj{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new rj(t,this.resultSelector))}}class rj extends or.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,xs.k)(t)?e.push(new sj(t)):e.push("function"==typeof t[aA.hZ]?new ij(t[aA.hZ]()):new oj(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let d=0;d<e;d++){let f=t[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const a=[];for(let d=0;d<e;d++){let f=t[d],_=f.next();if(f.hasCompleted()&&(i=!0),_.done)return void r.complete();a.push(_.value)}this.resultSelector?this._tryresultSelector(a):r.next(a),i&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class ij{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class sj{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[aA.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class oj extends Yi.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[aA.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Yi.ft)(this.observable,new Yi.IY(this))}}function ti(n){return t=>t.lift(new lj(n))}class lj{constructor(t){this.notifier=t}call(t,e){const r=new uj(t),i=(0,Yi.ft)(this.notifier,new Yi.IY(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class uj extends Yi.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}B(1593);var mj=B(1555);function uA(n,t){return new Yn.y(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let a=0,d=0;for(let f=0;f<r;f++){const _=(0,Xt.D)(n[f]);let w=!1;e.add(_.subscribe({next:T=>{w||(w=!0,d++),i[f]=T},error:T=>e.error(T),complete:()=>{a++,(a===r||!w)&&(d===r&&e.next(t?t.reduce((T,S,M)=>(T[S]=i[M],T),{}):i),e.complete())}}))}})}let IV=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),qm=(()=>{class n extends IV{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Ds=new l.OlP("NgValueAccessor"),yj={provide:Ds,useExisting:(0,l.Gpc)(()=>kP),multi:!0};let kP=(()=>{class n extends qm{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&l.NdJ("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},features:[l._Bn([yj]),l.qOj]}),n})();const vj={provide:Ds,useExisting:(0,l.Gpc)(()=>cA),multi:!0},wj=new l.OlP("CompositionEventMode");let cA=(()=>{class n extends IV{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(wj,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&l.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[l._Bn([vj]),l.qOj]}),n})();const Ts=new l.OlP("NgValidators"),cp=new l.OlP("NgAsyncValidators");function FV(n){return null!=n}function LV(n){const t=(0,l.QGY)(n)?(0,Xt.D)(n):n;return(0,l.CqO)(t),t}function VV(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function BV(n,t){return t.map(e=>e(n))}function UV(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function PP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(FV);return 0==t.length?null:function(e){return VV(BV(e,t))}}(UV(n)):null}function OP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(FV);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,xs.k)(t))return uA(t,null);if((0,mj.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return uA(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return uA(n=1===n.length&&(0,xs.k)(n[0])?n[0]:n,null).pipe((0,pt.U)(e=>t(...e)))}return uA(n,null)}(BV(e,t).map(LV)).pipe((0,pt.U)(VV))}}(UV(n)):null}function jV(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function FP(n){return n?Array.isArray(n)?n:[n]:[]}function dA(n,t){return Array.isArray(n)?n.includes(t):n===t}function WV(n,t){const e=FP(t);return FP(n).forEach(i=>{dA(e,i)||e.push(i)}),e}function ZV(n,t){return FP(t).filter(e=>!dA(n,e))}let zV=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n}),n})(),co=(()=>{class n extends zV{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();class hp extends zV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let KV=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(hp,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[l.qOj]}),n})();function YC(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(jV(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(jV(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();gA(t._rawValidators,i),gA(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&QV(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&QV(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function gA(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function QV(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _A(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const KC="VALID",yA="INVALID",Wv="PENDING",QC="DISABLED";function HP(n){return(GP(n)?n.validators:n)||null}function eB(n){return Array.isArray(n)?PP(n):n||null}function jP(n,t){return(GP(t)?t.asyncValidators:n)||null}function tB(n){return Array.isArray(n)?OP(n):n||null}function GP(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class qP{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=eB(this._rawValidators),this._composedAsyncValidatorFn=tB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===KC}get invalid(){return this.status===yA}get pending(){return this.status==Wv}get disabled(){return this.status===QC}get enabled(){return this.status!==QC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=eB(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=tB(t)}addValidators(t){this.setValidators(WV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(WV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ZV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ZV(t,this._rawAsyncValidators))}hasValidator(t){return dA(this._rawValidators,t)}hasAsyncValidator(t){return dA(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Wv,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=QC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=KC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===KC||this.status===Wv)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?QC:KC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Wv,this._hasOwnPendingAsyncValidator=!0;const e=LV(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof WP?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof Fj&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?QC:this.errors?yA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wv)?Wv:this._anyControlsHaveStatus(yA)?yA:KC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){GP(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vA extends qP{constructor(t=null,e,r){super(HP(e),jP(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){_A(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){_A(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class WP extends qP{constructor(t,e,r){super(HP(e),jP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof vA?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,a)=>{r=e(r,i,a)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Fj extends qP{constructor(t,e,r){super(HP(e),jP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof vA?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Bj={provide:hp,useExisting:(0,l.Gpc)(()=>zP)},iB=(()=>Promise.resolve(null))();let zP=(()=>{class n extends hp{constructor(e,r,i,a){super(),this.control=new vA,this._registered=!1,this.update=new l.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(a=>{a.constructor===cA?e=a:function(n){return Object.getPrototypeOf(n.constructor)===qm}(a)?r=a:i=a}),i||r||e||null}(0,a)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){YC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){iB.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;iB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(co,9),l.Y36(Ts,10),l.Y36(cp,10),l.Y36(Ds,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([Bj]),l.qOj,l.TTD]}),n})(),oB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Kj={provide:Ds,useExisting:(0,l.Gpc)(()=>bA),multi:!0};function hB(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let bA=(()=>{class n extends qm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const i=hB(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&l.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([Kj]),l.qOj]}),n})(),XP=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(hB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(bA,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Jj={provide:Ds,useExisting:(0,l.Gpc)(()=>eO),multi:!0};function fB(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let eO=(()=>{class n extends qm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(a=>this._getOptionId(a));r=(a,d)=>{a._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const a=r.selectedOptions;for(let d=0;d<a.length;d++){const f=a.item(d),_=this._getOptionValue(f.value);i.push(_)}}else{const a=r.options;for(let d=0;d<a.length;d++){const f=a.item(d);if(f.selected){const _=this._getOptionValue(f.value);i.push(_)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&l.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([Jj]),l.qOj]}),n})(),tO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(fB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(fB(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(eO,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const nG={provide:Ts,useExisting:(0,l.Gpc)(()=>wA),multi:!0};let wA=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&l.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[l._Bn([nG])]}),n})(),EB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[oB]]}),n})(),DB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[EB]}),n})();const Zv=["*"],YG=["dialog"];function fp(n){return null!=n}function Yv(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const SB={animation:!0,transitionTimerDelayMs:5};let os=(()=>{class n{constructor(){this.animation=SB.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const a8=()=>{},{transitionTimerDelayMs:l8}=SB,eE=new Map,$i=(n,t,e,r)=>{let i=r.context||{};const a=eE.get(t);if(a)switch(r.runningTransition){case"continue":return ci.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),eE.delete(t)}const d=e(t,r.animation,i)||a8;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>d()),(0,ct.of)(void 0).pipe(function(n){return t=>new Yn.y(e=>t.subscribe(d=>n.run(()=>e.next(d)),d=>n.run(()=>e.error(d)),()=>n.run(()=>e.complete())))}(n));const f=new En.xQ,_=new En.xQ,w=f.pipe(function(...n){return t=>Zs(t,(0,ct.of)(...n))}(!0));eE.set(t,{transition$:f,complete:()=>{_.next(),_.complete()},context:i});const T=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const S=Es(t,"transitionend").pipe(ti(w),Qn(({target:V})=>V===t));(function(...n){if(1===n.length){if(!(0,xs.k)(n[0]))return n[0];n=n[0]}return(0,_u.n)(n,void 0).lift(new XH)})(function(n=0,t,e){let r=-1;return(0,P_.k)(t)?r=Number(t)<1?1:Number(t):(0,Jo.K)(t)&&(e=t),(0,Jo.K)(e)||(e=ku.P),new Yn.y(i=>{const a=(0,P_.k)(n)?n:+n-e.now();return e.schedule(JH,a,{index:0,period:r,subscriber:i})})}(T+l8).pipe(ti(w)),S,_).pipe(ti(w)).subscribe(()=>{eE.delete(t),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var pn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(pn||(pn={})),pn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const GB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function qB(n){const t=Array.from(n.querySelectorAll(GB)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const a=this.offsetParent(t);r=this.offset(t,!1),a!==document.documentElement&&(i=this.offset(a,!1)),i.top+=a.clientTop,i.left+=a.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let a={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}positionElements(t,e,r,i){const[a="top",d="center"]=r.split("-"),f=i?this.offset(t,!1):this.position(t,!1),_=this.getAllStyles(e),w=parseFloat(_.marginTop),T=parseFloat(_.marginBottom),S=parseFloat(_.marginLeft),M=parseFloat(_.marginRight);let V=0,Y=0;switch(a){case"top":V=f.top-(e.offsetHeight+w+T);break;case"bottom":V=f.top+f.height;break;case"left":Y=f.left-(e.offsetWidth+S+M);break;case"right":Y=f.left+f.width}switch(d){case"top":V=f.top;break;case"bottom":V=f.top+f.height-e.offsetHeight;break;case"left":Y=f.left;break;case"right":Y=f.left+f.width-e.offsetWidth;break;case"center":"top"===a||"bottom"===a?Y=f.left+f.width/2-e.offsetWidth/2:V=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(Y)}px, ${Math.round(V)}px)`;const ue=e.getBoundingClientRect(),De=document.documentElement,rt=window.innerHeight||De.clientHeight,Je=window.innerWidth||De.clientWidth;return ue.left>=0&&ue.top>=0&&ue.right<=Je&&ue.bottom<=rt}},new Date(1882,10,12),new Date(2174,10,25);let pO=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(os))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(os))},token:n,providedIn:"root"}),n})();class Km{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const sq=()=>{};let oU=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):sq}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,a=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${a+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(de))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(de))},token:n,providedIn:"root"}),n})(),oq=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(yi(1)).subscribe(()=>{$i(this._zone,this._el.nativeElement,(e,r)=>{r&&Yv(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return $i(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(l.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),l.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class aU{close(t){}dismiss(t){}}class aq{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new En.xQ,this._dismissed=new En.xQ,this._hidden=new En.xQ,t.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,d)=>{this._resolve=a,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ti(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ti(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ct.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),lA(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var oE=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(oE||(oE={})),oE))();let lq=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new En.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.vpe,this.shown=new En.xQ,this.hidden=new En.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(yi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=lA($i(this._zone,e,()=>e.classList.remove("show"),r),$i(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};lA($i(this._zone,this._elRef.nativeElement,(a,d)=>{d&&Yv(a),a.classList.add("show")},e),$i(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Es(e,"keydown").pipe(ti(this._closed$),Qn(i=>i.which===pn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(oE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Es(this._dialogEl.nativeElement,"mousedown").pipe(ti(this._closed$),(0,lr.b)(()=>r=!1),nr(()=>Es(e,"mouseup").pipe(ti(this._closed$),yi(1))),Qn(({target:i})=>e===i)).subscribe(()=>{r=!0}),Es(e,"click").pipe(ti(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(oE.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=qB(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&$i(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(de),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&l.Gf(YG,7),2&e){let i;l.iGM(i=l.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(l.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),l.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),l.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Zv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(l.F$t(),l.TgZ(0,"div",0,1),l.TgZ(2,"div",2),l.Hsn(3),l.qZA(),l.qZA()),2&e&&l.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),lU=(()=>{class n{constructor(e,r,i,a,d,f){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new En.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new l.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const _=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=Es(t,"focusin").pipe(ti(e),(0,pt.U)(a=>a.target));Es(t,"keydown").pipe(ti(e),Qn(a=>a.which===pn.Tab),Yp(i)).subscribe(([a,d])=>{const[f,_]=qB(t);(d===f||d===t)&&a.shiftKey&&(_.focus(),a.preventDefault()),d===_&&!a.shiftKey&&(f.focus(),a.preventDefault())}),r&&Es(t,"click").pipe(ti(e),Yp(i),(0,pt.U)(a=>a[1])).subscribe(a=>a.focus())})})(this._ngZone,_.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(_.location.nativeElement)}})}open(e,r,i,a){const d=a.container instanceof HTMLElement?a.container:fp(a.container)?this._document.querySelector(a.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),_=this._scrollBar.compensate(),w=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const T=new aU,S=this._getContentRef(e,a.injector||r,i,T,a);let M=!1!==a.backdrop?this._attachBackdrop(e,d):void 0,V=this._attachWindowComponent(e,d,S),Y=new aq(V,S,M,a.beforeDismiss);return this._registerModalRef(Y),this._registerWindowCmpt(V),Y.result.then(_,_),Y.result.then(w,w),T.close=ue=>{Y.close(ue)},T.dismiss=ue=>{Y.dismiss(ue)},this._applyWindowOptions(V.instance,a),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),M&&M.instance&&(this._applyBackdropOptions(M.instance,a),M.changeDetectorRef.detectChanges()),V.changeDetectorRef.detectChanges(),Y}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let a=e.resolveComponentFactory(oq).create(this._injector);return this._applicationRef.attachView(a.hostView),r.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,r,i){let d=e.resolveComponentFactory(lq).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{fp(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{fp(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,a,d){return i?i instanceof l.Rgc?this._createFromTemplateRef(i,a):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,a,d):new Km([])}_createFromTemplateRef(e,r){const a=e.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(a),new Km([a.rootNodes],a)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new Km([[r]])}_createFromComponent(e,r,i,a,d){const f=e.resolveComponentFactory(i),_=l.zs3.create({providers:[{provide:aU,useValue:a}],parent:r}),w=f.create(_),T=w.location.nativeElement;return d.scrollable&&T.classList.add("component-host-scrollable"),this._applicationRef.attachView(w.hostView),new Km([[T]],w.hostView,w)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.z2F),l.LFG(l.zs3),l.LFG(de),l.LFG(oU),l.LFG(l.FYo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(l.z2F),l.LFG(l.gxx),l.LFG(de),l.LFG(oU),l.LFG(l.FYo),l.LFG(l.R0b))},token:n,providedIn:"root"}),n})(),uU=(()=>{class n{constructor(e,r,i,a){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=a}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l._Vd),l.LFG(l.zs3),l.LFG(lU),l.LFG(pO))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(l._Vd),l.LFG(l.gxx),l.LFG(lU),l.LFG(pO))},token:n,providedIn:"root"}),n})();new l.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});const Wq=["modalLogin"],Zq=["modalConfiguracaoRobo"];function zq(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",11),l.TgZ(1,"button",12),l.NdJ("click",function(){return l.CHM(e),l.oxw().novoSinal()}),l._uU(2,"Novo sinal"),l.qZA(),l.qZA()}}function Yq(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"button",13),l.NdJ("click",function(){return l.CHM(e),l.oxw().openModalConfiguracaoRobo()}),l._UZ(2,"i",14),l.qZA(),l.TgZ(3,"button",15),l.NdJ("click",function(){return l.CHM(e),l.oxw().AuthService.SignOut()}),l._UZ(4,"i",16),l.qZA(),l.qZA()}}function Kq(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",28),l.TgZ(1,"div",29),l.TgZ(2,"input",30),l.NdJ("ngModelChange",function(i){return l.CHM(e).$implicit.valor=i}),l.qZA(),l.qZA(),l.TgZ(3,"div",29),l.TgZ(4,"input",31),l.NdJ("ngModelChange",function(i){return l.CHM(e).$implicit.descricao=i}),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit;l.xp6(2),l.Q6J("ngModel",e.valor),l.xp6(2),l.Q6J("ngModel",e.descricao)}}function Qq(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",17),l.TgZ(1,"div",18),l.TgZ(2,"label",19),l._uU(3,"Data"),l.qZA(),l.TgZ(4,"input",20),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().sinalModel.data=i}),l.qZA(),l.qZA(),l.TgZ(5,"div",18),l.TgZ(6,"label",19),l._uU(7,"Moeda"),l.qZA(),l.TgZ(8,"input",21),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().sinalModel.moeda=i}),l.qZA(),l.qZA(),l.TgZ(9,"div",18),l.TgZ(10,"label",19),l._uU(11,"Tipo"),l.qZA(),l.TgZ(12,"select",22),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().sinalModel.tipo=i}),l.TgZ(13,"option",23),l._uU(14,"LONG"),l.qZA(),l.TgZ(15,"option",24),l._uU(16,"SHORT"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"div",18),l.TgZ(18,"label",19),l._uU(19,"Entradas"),l.qZA(),l.YNc(20,Kq,5,2,"div",25),l.qZA(),l.TgZ(21,"div",18),l.TgZ(22,"button",26),l.NdJ("click",function(){return l.CHM(e),l.oxw().salvarEntrada()}),l._uU(23,"Salvar"),l.qZA(),l.TgZ(24,"button",27),l.NdJ("click",function(){return l.CHM(e),l.oxw().showFormNovoSinal=!1}),l._uU(25,"Cancelar"),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(4),l.Q6J("ngModel",e.sinalModel.data),l.xp6(4),l.Q6J("ngModel",e.sinalModel.moeda),l.xp6(4),l.Q6J("ngModel",e.sinalModel.tipo),l.xp6(8),l.Q6J("ngForOf",e.sinalModel.entradas)}}function Jq(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function Xq(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",48),l.TgZ(1,"span",49),l.NdJ("click",function(){l.CHM(e);const i=l.oxw().$implicit;return l.oxw(2).copyEntry(i.sugestao)}),l._uU(2),l.qZA(),l._UZ(3,"br"),l.qZA()}if(2&n){const e=l.oxw().$implicit;l.xp6(2),l.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function e5(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function t5(n,t){if(1&n&&(l.TgZ(0,"div",52),l._UZ(1,"i",53),l.TgZ(2,"small"),l._uU(3),l.YNc(4,e5,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function n5(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function r5(n,t){if(1&n&&(l.TgZ(0,"div",52),l._UZ(1,"i",53),l.TgZ(2,"small"),l._uU(3),l.qZA(),l.YNc(4,n5,2,1,"ng-container",3),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.Oqu(null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function i5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"li"),l.YNc(1,t5,5,2,"div",50),l.TgZ(2,"div"),l.TgZ(3,"i",51),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).toggleAlcancado(a)}),l.qZA(),l.TgZ(4,"span",49),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).copyEntry(a.valor)}),l._uU(5),l.qZA(),l.qZA(),l.YNc(6,r5,5,2,"div",50),l._UZ(7,"div"),l.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=l.oxw().$implicit,a=l.oxw(2);l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),l.xp6(2),l.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),l.xp6(2),l.AsE(" ",e.valor," - ",e.descricao," "),l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(e.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(e.valor)))}}function s5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",36),l.TgZ(1,"div",37),l.TgZ(2,"span",38),l.TgZ(3,"i",39),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).togglePinWatcher(a)}),l.qZA(),l.qZA(),l.TgZ(4,"h5",40),l.TgZ(5,"strong"),l._uU(6),l.qZA(),l.qZA(),l.TgZ(7,"h5"),l.YNc(8,Jq,2,1,"span",3),l.qZA(),l.TgZ(9,"h6",41),l._uU(10),l.ALo(11,"date"),l.qZA(),l.YNc(12,Xq,4,1,"div",42),l.TgZ(13,"div"),l.TgZ(14,"ul",43),l.YNc(15,i5,8,5,"li",44),l.qZA(),l.qZA(),l.TgZ(16,"div"),l.TgZ(17,"span",38),l.TgZ(18,"button",45),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).editarSinal(a,d)}),l._UZ(19,"i",46),l.qZA(),l.TgZ(20,"button",15),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).excluirSinal(a,d)}),l._UZ(21,"i",47),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit,r=l.oxw(2);l.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),l.xp6(3),l.Q6J("ngClass",r.watchersIDPinnedList.indexOf(e.id)>-1?"fa-star text-danger":"fa-star-o"),l.xp6(3),l.Oqu(e.moeda),l.xp6(2),l.Q6J("ngIf",r.PriceCoinMap[e.moeda]),l.xp6(1),l.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),l.xp6(1),l.AsE(" ",e.tipo," - ",l.xi3(11,9,e.data,"dd/MM/yyyy")," "),l.xp6(2),l.Q6J("ngIf",e.sugestao),l.xp6(3),l.Q6J("ngForOf",e.entradas)}}function o5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"h3",32),l._uU(2,"Favoritados "),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(e),l.MAs(5).classList.toggle("hidden")}),l.qZA(),l.qZA(),l.TgZ(4,"div",28,34),l.YNc(6,s5,22,12,"div",35),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(6),l.Q6J("ngForOf",e.watchersPinnedList)}}function a5(n,t){1&n&&l._UZ(0,"i",59)}function l5(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function u5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",48),l.TgZ(1,"span",49),l.NdJ("click",function(){l.CHM(e);const i=l.oxw().$implicit;return l.oxw(2).copyEntry(i.sugestao)}),l._uU(2),l.qZA(),l._UZ(3,"br"),l.qZA()}if(2&n){const e=l.oxw().$implicit;l.xp6(2),l.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function c5(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function d5(n,t){if(1&n&&(l.TgZ(0,"div",52),l._UZ(1,"i",53),l.TgZ(2,"small"),l._uU(3),l.YNc(4,c5,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij(" ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function h5(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function f5(n,t){if(1&n&&(l.TgZ(0,"div",52),l._UZ(1,"i",53),l.TgZ(2,"small"),l._uU(3),l.YNc(4,h5,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function p5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"li"),l.YNc(1,d5,5,2,"div",50),l.TgZ(2,"div"),l.TgZ(3,"i",51),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).toggleAlcancado(a)}),l.qZA(),l.TgZ(4,"span",49),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).copyEntry(a.valor)}),l._uU(5),l.qZA(),l.qZA(),l.YNc(6,f5,5,2,"div",50),l._UZ(7,"div"),l.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=l.oxw().$implicit,a=l.oxw(2);l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),l.xp6(2),l.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),l.xp6(2),l.AsE(" ",e.valor," - ",e.descricao," "),l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(e.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(e.valor)))}}function g5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",56),l.TgZ(1,"div",37),l.TgZ(2,"span",38),l.TgZ(3,"i",39),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).togglePinWatcher(a)}),l.qZA(),l.qZA(),l.TgZ(4,"h5",40),l.YNc(5,a5,1,0,"i",57),l.TgZ(6,"i",58),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).toggleSinalBloqueado(a)}),l.qZA(),l.TgZ(7,"strong"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"h5"),l.YNc(10,l5,2,1,"span",3),l.qZA(),l.TgZ(11,"h6",41),l._uU(12),l.ALo(13,"date"),l.qZA(),l.YNc(14,u5,4,1,"div",42),l.TgZ(15,"div"),l.TgZ(16,"ul",43),l.YNc(17,p5,8,5,"li",44),l.qZA(),l.qZA(),l.TgZ(18,"div"),l.TgZ(19,"span",38),l.TgZ(20,"button",45),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).editarSinal(a,d)}),l._UZ(21,"i",46),l.qZA(),l.TgZ(22,"button",15),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).excluirSinal(a,d)}),l._UZ(23,"i",47),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit,r=l.oxw(2);l.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short")("id",e.id),l.xp6(3),l.Q6J("ngClass",r.watchersIDPinnedList.indexOf(e.id)>-1?"fa-star text-danger":"fa-star-o"),l.xp6(2),l.Q6J("ngIf",r.sinaisCompradosMap[e.id]),l.xp6(1),l.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),l.xp6(2),l.Oqu(e.moeda),l.xp6(2),l.Q6J("ngIf",r.PriceCoinMap[e.moeda]),l.xp6(1),l.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),l.xp6(1),l.AsE(" ",e.tipo," - ",l.xi3(13,12,e.data,"dd/MM/yyyy")," "),l.xp6(2),l.Q6J("ngIf",e.sugestao),l.xp6(3),l.Q6J("ngForOf",e.entradas)}}function m5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"h3",32),l._uU(2),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(e),l.MAs(5).classList.toggle("hidden")}),l.qZA(),l.qZA(),l.TgZ(4,"div",28,54),l.YNc(6,g5,24,15,"div",55),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(2),l.hij("Sinais na entrada (",e.watchersEntradaList.length,") "),l.xp6(4),l.Q6J("ngForOf",e.watchersEntradaList)}}function _5(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function y5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",48),l.TgZ(1,"span",49),l.NdJ("click",function(){l.CHM(e);const i=l.oxw().$implicit;return l.oxw(2).copyEntry(i.sugestao)}),l._uU(2),l.qZA(),l._UZ(3,"br"),l.qZA()}if(2&n){const e=l.oxw().$implicit;l.xp6(2),l.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function v5(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function b5(n,t){if(1&n&&(l.TgZ(0,"div",52),l._UZ(1,"i",53),l.TgZ(2,"small"),l._uU(3),l.YNc(4,v5,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function w5(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function C5(n,t){if(1&n&&(l.TgZ(0,"div",52),l._UZ(1,"i",53),l.TgZ(2,"small"),l._uU(3),l.YNc(4,w5,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function E5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"li"),l.YNc(1,b5,5,2,"div",50),l.TgZ(2,"div"),l.TgZ(3,"i",51),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).toggleAlcancado(a)}),l.qZA(),l.TgZ(4,"span",49),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).copyEntry(a.valor)}),l._uU(5),l.qZA(),l.qZA(),l.YNc(6,C5,5,2,"div",50),l._UZ(7,"div"),l.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=l.oxw().$implicit,a=l.oxw(2);l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),l.xp6(2),l.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),l.xp6(2),l.AsE(" ",e.valor," - ",e.descricao," "),l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(e.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(e.valor)))}}function D5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",36),l.TgZ(1,"div",37),l.TgZ(2,"span",38),l.TgZ(3,"i",39),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).togglePinWatcher(a)}),l.qZA(),l.qZA(),l.TgZ(4,"i",58),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).toggleSinalBloqueado(a)}),l.qZA(),l.TgZ(5,"h5",40),l.TgZ(6,"strong"),l._uU(7),l.qZA(),l.qZA(),l.TgZ(8,"h5"),l.YNc(9,_5,2,1,"span",3),l.qZA(),l.TgZ(10,"h6",41),l._uU(11),l.ALo(12,"date"),l.qZA(),l.YNc(13,y5,4,1,"div",42),l.TgZ(14,"div"),l.TgZ(15,"ul",43),l.YNc(16,E5,8,5,"li",44),l.qZA(),l.qZA(),l.TgZ(17,"div"),l.TgZ(18,"span",38),l.TgZ(19,"button",45),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).editarSinal(a,d)}),l._UZ(20,"i",46),l.qZA(),l.TgZ(21,"button",15),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).excluirSinal(a,d)}),l._UZ(22,"i",47),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit,r=l.oxw(2);l.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),l.xp6(3),l.Q6J("ngClass",r.watchersIDPinnedList.indexOf(e.id)>-1?"fa-star text-danger":"fa-star-o"),l.xp6(1),l.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),l.xp6(3),l.Oqu(e.moeda),l.xp6(2),l.Q6J("ngIf",r.PriceCoinMap[e.moeda]),l.xp6(1),l.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),l.xp6(1),l.AsE(" ",e.tipo," - ",l.xi3(12,10,e.data,"dd/MM/yyyy")," "),l.xp6(2),l.Q6J("ngIf",e.sugestao),l.xp6(3),l.Q6J("ngForOf",e.entradas)}}function T5(n,t){if(1&n&&(l.TgZ(0,"div",60),l.TgZ(1,"h3",32),l._uU(2,"Lista de Sinais"),l.qZA(),l.TgZ(3,"div",28),l.YNc(4,D5,23,13,"div",35),l.qZA(),l.qZA()),2&n){const e=l.oxw();l.xp6(4),l.Q6J("ngForOf",e.watchersList)}}function I5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",61),l.TgZ(1,"h4",62),l._uU(2,"Sign In"),l.qZA(),l.qZA(),l.TgZ(3,"div",63),l.TgZ(4,"div",5),l.TgZ(5,"div",5),l.TgZ(6,"div",5,64),l.TgZ(8,"div",65),l._UZ(9,"input",66,67),l.qZA(),l.TgZ(11,"div",65),l.TgZ(12,"label"),l._uU(13,"Password"),l.qZA(),l.TgZ(14,"div",68),l.TgZ(15,"input",69,70),l.NdJ("keydown",function(i){const d=l.CHM(e).$implicit,f=l.MAs(10),_=l.MAs(16);return l.oxw().submitSeach(i,f.value,_.value,d)}),l.qZA(),l.TgZ(17,"div",71),l.TgZ(18,"span",72),l.NdJ("click",function(){l.CHM(e);const i=l.oxw();return i.showPassword=!i.showPassword}),l._UZ(19,"i",73),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"div",65),l.TgZ(21,"button",74),l.NdJ("click",function(){const a=l.CHM(e).$implicit,d=l.MAs(10),f=l.MAs(16);return l.oxw().sigin(d.value,f.value,a)}),l._uU(22,"Login"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(15),l.Q6J("type",e.showPassword?"text":"password"),l.xp6(4),l.Q6J("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function S5(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",61),l.TgZ(1,"h4",75),l._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),l.qZA(),l.TgZ(3,"button",76),l.NdJ("click",function(){return l.CHM(e).$implicit.dismiss("Cross click")}),l.TgZ(4,"span",77),l._uU(5,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",63),l.TgZ(7,"div",5),l.TgZ(8,"div",5),l.TgZ(9,"div",5,64),l.TgZ(11,"div",65),l.TgZ(12,"label"),l._uU(13,"Valor entrada em USDT"),l.qZA(),l.TgZ(14,"input",78),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().configuracaoRobo.valorEntradaUsdt=i}),l.qZA(),l.qZA(),l.TgZ(15,"div",65),l.TgZ(16,"label"),l._uU(17,"M\xe1ximo de rob\xf4s ativos"),l.qZA(),l.TgZ(18,"input",79),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().configuracaoRobo.maximoRobosAtivos=i}),l.qZA(),l.qZA(),l.TgZ(19,"div",80),l.TgZ(20,"input",81),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().configuracaoRobo.ativo=i}),l.qZA(),l.TgZ(21,"label",82),l._uU(22," Ativo "),l.qZA(),l.qZA(),l.TgZ(23,"div",65),l.TgZ(24,"button",74),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw().salvarConfiguracacaoRobo(a)}),l._uU(25," salvar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(14),l.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),l.xp6(4),l.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),l.xp6(2),l.Q6J("ngModel",e.configuracaoRobo.ativo)}}k_.extend($t);let A5=(()=>{class n{constructor(e,r,i,a){this.db=e,this.AuthService=r,this.modalService=i,this.config=a,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.watchersList=[],this.watchersPinnedList=[],this.watchersIDPinnedList=[],this.watchersEntradaList=[],this.sinaisBloqueadosList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.sinaisCompradosMap={},this.editandoSinalIdx=-1,this.configuracaoRobo={id:null,valorEntradaUsdt:10,maximoRobosAtivos:10,ativo:!1,sinaisBloqueadosList:[]},this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){setTimeout(()=>{this.AuthService.isLoggedIn?(this.startPriceWatcher(),this.loadWatcherList(),this.loadConfiguracaoRobo(),this.loadSinaisComprados(),this.loadSinaisBloqueados()):this.openModalLogin()},1e3)}startPriceWatcher(){const r=function(n=0,t=ku.P){return(!(0,P_.k)(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=ku.P),new Yn.y(e=>(e.add(t.schedule(ua,n,{subscriber:e,counter:0,period:n})),e))}(5e3);this.populatePriceCoinMap(),r.subscribe(i=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let i=[];r.forEach(d=>{this.PriceCoinMap[d.symbol]={price:d.price},i.push(d.symbol)});let a=this;i.sort(),i.forEach(d=>{a.PriceCoinList.push({symbol:d,price:this.PriceCoinMap[d].price})}),this.updatePricePositionOnSinais()})}updatePricePositionOnSinais(){this.watchersList&&this.watchersList.length>0&&(this.watchersList.forEach((e,r)=>{let i=0;try{i=parseFloat(this.PriceCoinMap[e.moeda].price)}catch(a){}if(i){let a=-1,d=0;"LONG"===e.tipo?(d=(e.entradas[e.entradas.length-1].valor-e.entradas[0].valor)/100,e.priceCoinPercentage=i>e.entradas[0].valor?((i-e.entradas[0].valor)/d).toFixed(2):0):(d=(e.entradas[0].valor-e.entradas[e.entradas.length-1].valor)/100,e.priceCoinPercentage=i<e.entradas[0].valor?(100-(i-e.entradas[e.entradas.length-1].valor)/d).toFixed(2):0);for(let f=0;f<e.entradas.length;f++){let w=parseFloat(e.entradas[f].valor);if("LONG"===e.tipo){if(0==f||f===e.entradas.length-1){if(i<=w){a=f;break}if(f===e.entradas.length-1&&i>w){a=1e3;break}continue}if(i>=parseFloat(e.entradas[f-1].valor)&&i<=w){a=f;break}}else if("SHORT"===e.tipo){if(0==f||f===e.entradas.length-1){if(i>=w){a=f;break}if(f===e.entradas.length-1&&i<w){a=1e3;break}continue}if(i<=parseFloat(e.entradas[f-1].valor)&&i>=w){a=f;break}}}this.watchersList[r].indexPricePosition=a}}),this.sortWatcherList(),this.sortWatcherEntradaList())}sortWatcherEntradaList(){this.watchersEntradaList=[],this.watchersList.forEach(r=>{r.indexPricePosition>=1&&this.watchersEntradaList.push(r)}),this.watchersEntradaList.sort((r,i)=>{let a=0;return a=r.indexPricePosition>0?r.indexPricePosition-i.indexPricePosition:-1,a||r.priceCoinPercentage-i.priceCoinPercentage})}castPrice(e){return parseFloat(e)}novoSinal(){let e=k_().format("YYYY-MM-DD");console.log(e),this.editandoSinalIdx=-1,this.sinalModel={data:e,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let a=Object.assign({},this.entradaModel);a.descricao=r[i],this.sinalModel.entradas.push(a)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadSinaisComprados(){this.sinaisCompradosObservable=this.db.object("/sinais-comprados/"+this.AuthService.userData.uid).valueChanges(),this.sinaisCompradosObservable.subscribe(r=>{console.log(r),this.sinaisCompradosMap=r||{}})}loadWatcherList(){this.watchersObservable=this.db.list("/sinais").valueChanges(),this.watchersObservable.subscribe(e=>{console.log(e),this.watchersList=e,this.watchersList&&this.watchersList.length>0&&this.watchersList.forEach(r=>{if(r.entradas&&r.entradas.length>0){let i=parseFloat(r.entradas[0].valor),a=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?i+(a-i)/4:i-(i-a)/4,r.sugestao){let d=r.entradas[r.entradas.length-1].valor,f=d.indexOf(".")-1,_=d.substr(f).length;r.sugestao=r.sugestao.toFixed(_)}}}),this.loadWatchersFavoritos(),this.updatePricePositionOnSinais()})}sortWatcherList(){this.watchersList.sort((e,r)=>{let i=k_(e.data),a=k_(r.data),d=-10;return i==a?d=0:i>a?d=-1:i<a&&(d=1),d||e.priceCoinPercentage-r.priceCoinPercentage})}salvarEntrada(){console.log(this.sinalModel);let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!this.PriceCoinMap[e.moeda])return void alert("Moeda inv\xe1lida");if(!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}editarSinal(e,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(e,r){var i=this;return(0,ve.Z)(function*(){window.confirm("Realmente deseja excluir o sinal?")&&(yield i.db.object("/sinais/"+e.id).remove())})()}playAlert(){}toggleAlcancado(e){e.alcancado=!e.alcancado||!e.alcancado}togglePinWatcher(e){var r=this;return(0,ve.Z)(function*(){let i=r.watchersIDPinnedList.indexOf(e.id);if(i>-1){r.watchersIDPinnedList.splice(i,1);for(let d=0;d<r.watchersPinnedList.length;d++)if(r.watchersPinnedList[d].id===e.id){r.watchersPinnedList.splice(d,1);break}}else r.watchersIDPinnedList.push(e.id),r.watchersPinnedList.push(e);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.watchersIDPinnedList).then(()=>{}).catch(d=>{console.error(d)})})()}loadWatchersFavoritos(){this.watchersPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.watchersIDPinnedList=r,this.watchersIDPinnedList.forEach(i=>{this.watchersList.forEach(a=>{a.id===i&&this.watchersPinnedList.push(a)})}))})}loadSinaisBloqueados(){this.sinaisBloqueadosList=[],this.db.list("/sinais-bloqueados/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.sinaisBloqueadosList=r)})}toggleSinalBloqueado(e){var r=this;return(0,ve.Z)(function*(){r.configuracaoRobo.sinaisBloqueadosList||(r.configuracaoRobo.sinaisBloqueadosList=[]);let i=r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id);i>-1?r.configuracaoRobo.sinaisBloqueadosList.splice(i,1):r.configuracaoRobo.sinaisBloqueadosList.push(e.id),yield r.salvarConfiguracacaoRobo()})()}copyEntry(e){this.canCopyClipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Entrada ${e} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(e=>{},e=>{})}sigin(e,r,i){this.AuthService.SignIn(e.trim(),r).then(()=>{this.startPriceWatcher(),this.loadWatcherList(),i&&i.close()}).catch(a=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(e,r,i,a){13==e.keyCode&&this.sigin(r,i,a)}signOut(){this.AuthService.SignOut()}submitForm(e,r){13==r.keyCode&&e.submit()}loadConfiguracaoRobo(){this.watchersPinnedList=[],this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.configuracaoRobo=r,this.configuracaoRobo.sinaisBloqueadosList&&(this.configuracaoRobo.sinaisBloqueadosList=[]))})}openModalConfiguracaoRobo(){this.modalService.open(this.modalConfiguracaoRobo,{centered:!0}).result.then(e=>{},e=>{})}salvarConfiguracacaoRobo(e){var r=this;return(0,ve.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(FM),l.Y36(ZH),l.Y36(uU),l.Y36(pO))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(1&e&&(l.Gf(Wq,5),l.Gf(Zq,5)),2&e){let i;l.iGM(i=l.CRH())&&(r.modalLogin=i.first),l.iGM(i=l.CRH())&&(r.modalConfiguracaoRobo=i.first)}},decls:15,vars:6,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,""],["class","col-md-6",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["modalLogin",""],["modalConfiguracaoRobo",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-white",3,"click"],[1,"fa","fa-cogs","fa-2x"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-white"],[1,"btn","bt-sm","btn-outline-secondary","fa","fa-chevron-up",3,"click"],["divPinnedList",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"float-right"],[1,"fa","clickable",3,"ngClass","click"],[1,"card-title"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],[1,"alert","alert-primary"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["divWatchersEntrada",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass","id",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass","id"],["class","mr-2 fa fa-android text-success",4,"ngIf"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass","click"],[1,"mr-2","fa","fa-android","text-success"],[1,"container","mt-4"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],[1,"fa",3,"ngClass"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"],["id","",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"]],template:function(e,r){1&e&&(l.TgZ(0,"nav",0),l.TgZ(1,"div",1),l.YNc(2,zq,3,0,"div",2),l.YNc(3,Yq,5,0,"div",3),l.qZA(),l.qZA(),l.TgZ(4,"main",4),l.TgZ(5,"section",5),l.TgZ(6,"div",1),l.YNc(7,Qq,26,4,"div",6),l.qZA(),l.YNc(8,o5,7,1,"div",7),l.YNc(9,m5,7,2,"div",7),l.YNc(10,T5,5,1,"div",8),l.qZA(),l.YNc(11,I5,23,2,"ng-template",null,9,l.W1O),l.YNc(13,S5,26,3,"ng-template",null,10,l.W1O),l.qZA()),2&e&&(l.xp6(2),l.Q6J("ngIf",r.AuthService.isLoggedIn),l.xp6(1),l.Q6J("ngIf",r.AuthService.isLoggedIn),l.xp6(4),l.Q6J("ngIf",r.showFormNovoSinal),l.xp6(1),l.Q6J("ngIf",r.watchersPinnedList&&r.watchersPinnedList.length>0),l.xp6(1),l.Q6J("ngIf",r.watchersEntradaList&&r.watchersEntradaList.length>0),l.xp6(1),l.Q6J("ngIf",r.watchersList&&r.watchersList.length>0))},directives:[Mr,cA,KV,zP,bA,XP,tO,zt,po,wA,kP],pipes:[tu],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.shake-element[_ngcontent-%COMP%]{animation:shake .5s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();class x5{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new M5(t,this.dueTime,this.scheduler))}}class M5 extends or.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(R5,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function R5(n){n.debouncedNext()}const LU="firebasestorage.googleapis.com",VU="storageBucket";class ri extends F.ZR{constructor(t,e){super(vO(t),`Firebase Storage: ${e} (${vO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ri.prototype)}_codeEquals(t){return vO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function vO(n){return"storage/"+n}function bO(){return new ri("unknown","An unknown error occurred, please check the error payload for server response.")}function BU(){return new ri("canceled","User canceled the upload/download.")}function UU(){return new ri("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Xv(n){return new ri("invalid-argument",n)}function $U(){return new ri("app-deleted","The Firebase app was deleted.")}function HU(n){return new ri("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aE(n,t){return new ri("invalid-format","String does not match format '"+n+"': "+t)}function lE(n){throw new ri("internal-error","Internal error: "+n)}class Hs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Hs.makeFromUrl(t,e)}catch(i){return new Hs(t,"")}if(""===r.path)return r;throw function(n){return new ri("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(at){at.path_=decodeURIComponent(at.path)}const S=e.replace(/[.]/g,"\\."),it=[{regex:f,indices:{bucket:1,path:3},postModify:function(at){"/"===at.path.charAt(at.path.length-1)&&(at.path_=at.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${e===LU?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let at=0;at<it.length;at++){const Ft=it[at],ln=Ft.regex.exec(t);if(ln){let ii=ln[Ft.indices.path];ii||(ii=""),r=new Hs(ln[Ft.indices.bucket],ii),Ft.postModify(r);break}}if(null==r)throw function(n){return new ri("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class W5{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function PA(n){return"string"==typeof n||n instanceof String}function jU(n){return wO()&&n instanceof Blob}function wO(){return"undefined"!=typeof Blob}function CO(n,t,e,r){if(r<t)throw Xv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw Xv(`Invalid value for '${n}'. Expected ${e} or less.`)}function oh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function GU(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var gp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(gp||(gp={})),gp))();class J5{constructor(t,e,r,i,a,d,f,_,w,T,S){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,V)=>{this.resolve_=M,this.reject_=V,this.start_()})}start_(){const e=(r,i)=>{const a=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(_)?a():a(_)}catch(_){d(_)}else if(null!==f){const _=bO();_.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,_):_)}else d(i.canceled?this.appDelete_?$U():BU():new ri("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new OA(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,i=null,a=null,d=!1,f=0;function _(){return 2===f}let w=!1;function T(...De){w||(w=!0,t.apply(null,De))}function S(De){i=setTimeout(()=>{i=null,n(V,_())},De)}function M(){a&&clearTimeout(a)}function V(De,...rt){if(w)return void M();if(De)return M(),void T.call(null,De,...rt);if(_()||d)return M(),void T.call(null,De,...rt);let it;r<64&&(r*=2),1===f?(f=2,it=0):it=1e3*(r+Math.random()),S(it)}let Y=!1;function ue(De){Y||(Y=!0,M(),!w&&(null!==i?(De||(f=2),clearTimeout(i),S(0)):De||(f=1)))}return S(0),a=setTimeout(()=>{d=!0,ue(!0)},e),ue}((r,i)=>{if(i)return void r(!1,new OA(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(d),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(d),this.pendingConnection_=null;const f=a.getErrorCode()===gp.NO_ERROR,_=a.getStatus();if(!f||this.isRetryStatusCode_(_)){const T=a.getErrorCode()===gp.ABORT;return void r(!1,new OA(!1,null,T))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new OA(w,a))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),a=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||a}}class OA{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function sW(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(wO())return new Blob(n);throw new ri("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Ca={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class EO{constructor(t,e){this.data=t,this.contentType=e||null}}function DO(n,t){switch(n){case Ca.RAW:return new EO(qU(t));case Ca.BASE64:case Ca.BASE64URL:return new EO(WU(n,t));case Ca.DATA_URL:return new EO(function(n){const t=new ZU(n);return t.base64?WU(Ca.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw aE(Ca.DATA_URL,"Malformed data URL.")}return qU(t)}(t.rest)}(t),function(n){return new ZU(n).contentType}(t))}throw bO()}function qU(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function WU(n,t){switch(n){case Ca.BASE64:{const i=-1!==t.indexOf("-"),a=-1!==t.indexOf("_");if(i||a)throw aE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ca.BASE64URL:{const i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw aE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(i){throw aE(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class ZU{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw aE(Ca.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class bc{constructor(t,e){let r=0,i="";jU(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(jU(this.data_)){const i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new bc(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new bc(r,!0)}}static getBlob(...t){if(wO()){const e=t.map(r=>r instanceof bc?r.data_:r);return new bc(sW.apply(null,e))}{const e=t.map(d=>PA(d)?DO(Ca.RAW,d).data:d.data_);let r=0;e.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let a=0;return e.forEach(d=>{for(let f=0;f<d.length;f++)i[a++]=d[f]}),new bc(i,!0)}}uploadData(){return this.data_}}function TO(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function zU(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function pW(n,t){return t}class ho{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||pW}}let FA=null;function uE(){if(FA)return FA;const n=[];n.push(new ho("bucket")),n.push(new ho("generation")),n.push(new ho("metageneration")),n.push(new ho("name","fullPath",!0));const e=new ho("name");e.xform=function(a,d){return function(n){return!PA(n)||n.length<2?n:zU(n)}(d)},n.push(e);const i=new ho("size");return i.xform=function(a,d){return void 0!==d?Number(d):d},n.push(i),n.push(new ho("timeCreated")),n.push(new ho("updated")),n.push(new ho("md5Hash",null,!0)),n.push(new ho("cacheControl",null,!0)),n.push(new ho("contentDisposition",null,!0)),n.push(new ho("contentEncoding",null,!0)),n.push(new ho("contentLanguage",null,!0)),n.push(new ho("contentType",null,!0)),n.push(new ho("metadata","customMetadata",!0)),FA=n,FA}function YU(n,t,e){const r=TO(t);return null===r?null:function(n,t,e){const r={type:"file"},i=e.length;for(let a=0;a<i;a++){const d=e[a];r[d.local]=d.xform(r,t[d.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const a=new Hs(n.bucket,n.fullPath);return t._makeStorageReference(a)}})}(r,n),r}(n,r,e)}function IO(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const a=t[i];a.writable&&(e[a.server]=n[a.local])}return JSON.stringify(e)}const KU="prefixes";class wc{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cc(n){if(!n)throw bO()}function LA(n,t){return function(r,i){const a=YU(n,i,t);return Cc(null!==a),a}}function e0(n){return function(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new ri("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ri("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new ri("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new ri("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function cE(n){const t=e0(n);return function(r,i){let a=t(r,i);return 404===r.getStatus()&&(a=function(n){return new ri("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function JU(n,t,e){const i=oh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new wc(i,"GET",LA(n,e),d);return f.errorHandler=cE(t),f}function EW(n,t,e,r,i){const a={};a.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(a.delimiter=e),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=oh(t.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,T=new wc(f,"GET",function(n,t){return function(r,i){const a=function(n,t,e){const r=TO(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[KU])for(const i of e[KU]){const a=i.replace(/\/$/,""),d=n._makeStorageReference(new Hs(t,a));r.prefixes.push(d)}if(e.items)for(const i of e.items){const a=n._makeStorageReference(new Hs(t,i.name));r.items.push(a)}return r}(n,t,r)}(n,t,i);return Cc(null!==a),a}}(n,t.bucket),w);return T.urlParams=a,T.errorHandler=e0(t),T}function e3(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class VA{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function SO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Cc(!1)}return Cc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const MW={STATE_CHANGED:"state_changed"},fo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function AO(n){switch(n){case"running":case"pausing":case"canceling":return fo.RUNNING;case"paused":return fo.PAUSED;case"success":return fo.SUCCESS;case"canceled":return fo.CANCELED;case"error":default:return fo.ERROR}}class RW{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function t0(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class PW extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw lE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw lE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function Xl(){return new PW}class i3{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=uE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const a=t.bucketOnlyServerUrl(),d=e3(t,r,i),f={name:d.fullPath},_=oh(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},S=IO(d,e),Y=new wc(_,"POST",function(ue){let De;SO(ue);try{De=ue.getResponseHeader("X-Goog-Upload-URL")}catch(rt){Cc(!1)}return Cc(PA(De)),De},n.maxUploadRetryTime);return Y.urlParams=f,Y.headers=T,Y.body=S,Y.errorHandler=e0(t),Y}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,t,e);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function(n,t,e,r){const _=new wc(e,"POST",function(w){const T=SO(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(V){Cc(!1)}S||Cc(!1);const M=Number(S);return Cc(!isNaN(M)),new VA(M,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=e0(t),_}(this._ref.storage,this._ref._location,t,this._blob),a=this._ref.storage._makeRequest(i,Xl,e,r);this._request=a,a.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new VA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let d;try{d=function(n,t,e,r,i,a,d,f){const _=new VA(0,0);if(d?(_.current=d.current,_.total=d.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw new ri("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const w=_.total-_.current;let T=w;i>0&&(T=Math.min(T,i));const S=_.current,Y={"X-Goog-Upload-Command":T===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ue=r.slice(S,S+T);if(null===ue)throw UU();const it=new wc(e,"POST",function(at,Ft){const ln=SO(at,["active","final"]),Yr=_.current+T,ii=r.size();let MO;return MO="final"===ln?LA(t,a)(at,Ft):null,new VA(Yr,ii,"final"===ln,MO)},t.maxUploadRetryTime);return it.headers=Y,it.body=ue.uploadData(),it.progressCallback=f||null,it.errorHandler=e0(n),it}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(d,Xl,i,a);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=JU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Xl,t,e);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const a=t.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},_=function(){let it="";for(let at=0;at<2;at++)it+=Math.random().toString().slice(2);return it}();d["Content-Type"]="multipart/related; boundary="+_;const w=e3(t,r,i),T=IO(w,e),V=bc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===V)throw UU();const Y={name:w.fullPath},ue=oh(a,n.host,n._protocol),rt=n.maxUploadRetryTime,Je=new wc(ue,"POST",LA(n,e),rt);return Je.urlParams=Y,Je.headers=d,Je.body=V.uploadData(),Je.errorHandler=e0(t),Je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Xl,t,e);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=BU(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=AO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const a=new RW(e||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(AO(this._state)){case fo.SUCCESS:t0(this._resolve.bind(null,this.snapshot))();break;case fo.CANCELED:case fo.ERROR:t0(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(AO(this._state)){case fo.RUNNING:case fo.PAUSED:t.next&&t0(t.next.bind(t,this.snapshot))();break;case fo.SUCCESS:t.complete&&t0(t.complete.bind(t))();break;case fo.CANCELED:case fo.ERROR:t.error&&t0(t.error.bind(t,this._error))();break;default:t.error&&t0(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Qm{constructor(t,e){this._service=t,this._location=e instanceof Hs?e:Hs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Qm(t,e)}get root(){const t=new Hs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zU(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Hs(this._location.bucket,t);return new Qm(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw HU(t)}}function o3(n,t,e){return NO.apply(this,arguments)}function NO(){return(NO=(0,ve.Z)(function*(n,t,e){const i=yield a3(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield o3(n,t,i.nextPageToken))})).apply(this,arguments)}function a3(n,t){null!=t&&"number"==typeof t.maxResults&&CO("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=EW(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,Xl)}function WW(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const i=oh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new wc(i,"GET",function(n,t){return function(r,i){const a=YU(n,i,t);return Cc(null!==a),function(n,t,e,r){const i=TO(t);if(null===i||!PA(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const d=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return oh("/b/"+d(n.bucket)+"/o/"+d(S),e,r)+GU({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,e),d);return f.errorHandler=cE(t),f}(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(t,Xl).then(e=>{if(null===e)throw new ri("no-download-url","The given file does not have any download URLs.");return e})}function l3(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new Hs(n._location.bucket,e);return new Qm(n.storage,r)}function u3(n,t){if(n instanceof xO){const e=n;if(null==e._bucket)throw new ri("no-default-bucket","No default bucket found. Did you set the '"+VU+"' property when initializing the app?");const r=new Qm(e,e._bucket);return null!=t?u3(r,t):r}return void 0!==t?l3(n,t):n}function KW(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof xO)return function(n,t){return new Qm(n,t)}(n,t);throw Xv("To use ref(service, url), the first argument must be a Storage instance.")}return u3(n,t)}function c3(n,t){const e=null==t?void 0:t[VU];return null==e?null:Hs.makeFromBucketSpec(e,n)}class xO{constructor(t,e,r,i,a){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=LU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Hs.makeFromBucketSpec(i,this._host):c3(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Hs.makeFromBucketSpec(this._url,t):c3(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){CO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){CO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,ve.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,ve.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Qm(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new W5($U());{const a=function(n,t,e,r,i,a){const d=GU(n.urlParams),f=n.url+d,_=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(_,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(_,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(_,a),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(_,r),new J5(f,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(t,e){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,a).getPromise()})()}}const d3="@firebase/storage";function p3(n,t){return KW(n=(0,F.m9)(n),t)}(0,Ki._registerComponent)(new ca.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new xO(e,r,i,t,Ki.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ki.registerVersion)(d3,"0.9.5",""),(0,Ki.registerVersion)(d3,"0.9.5","esm2017");class BA{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class g3{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new BA(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new BA(r,this,this._ref))},e)}on(t,e,r,i){let a;return e&&(a="function"==typeof e?d=>e(new BA(d,this,this._ref)):{next:e.next?d=>e.next(new BA(d,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)}}class m3{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new ah(t,this._service))}get items(){return this._delegate.items.map(t=>new ah(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ah{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return l3(n,t)}(this._delegate,t);return new ah(e,this.storage)}get root(){return new ah(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new ah(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new g3(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new i3(n,new bc(t),e)}(n=(0,F.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Ca.RAW,r){this._throwIfRoot("putString");const i=DO(e,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new g3(new i3(this._delegate,new bc(i.data,!0),a),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return o3(n,t).then(()=>t)}(n=(0,F.m9)(n))}(this._delegate).then(t=>new m3(t,this.storage))}list(t){return function(n,t){return a3(n=(0,F.m9)(n),t)}(this._delegate,t||void 0).then(e=>new m3(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=JU(n.storage,n._location,uE());return n.storage.makeRequestWithTokens(t,Xl)}(n=(0,F.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const a=oh(t.fullServerUrl(),n.host,n._protocol),f=IO(e,r),w=n.maxOperationRetryTime,T=new wc(a,"PATCH",LA(n,r),w);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=cE(t),T}(n.storage,n._location,t,uE());return n.storage.makeRequestWithTokens(e,Xl)}(n=(0,F.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return WW(n=(0,F.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=oh(t.fullServerUrl(),n.host,n._protocol),f=new wc(r,"DELETE",function(_,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=cE(t),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,Xl)}(n=(0,F.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw HU(t)}}class _3{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(y3(t))throw Xv("ref() expected a child path but got a URL, use refFromURL instead.");return new ah(p3(this._delegate,t),this)}refFromURL(t){if(!y3(t))throw Xv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hs.makeFromUrl(t,this._delegate.host)}catch(e){throw Xv("refFromUrl() expected a valid full URL but got an invalid one.")}return new ah(p3(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,F.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function y3(n){return/^[A-Za-z]+:\/\//.test(n)}function hZ(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new _3(e,r)}function v3(n){const t=function(n){return new Yn.y(t=>{const e=d=>t.next(d);e(n.snapshot);const a=n.on("state_changed",e);return n.then(d=>{e(d),t.complete()},d=>{e(n.snapshot),(d=>{t.error(d)})(d)}),function(){a()}}).pipe(function(n,t=ku.P){return e=>e.lift(new x5(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,pt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function UA(n){return{getDownloadURL:()=>(0,ct.of)(void 0).pipe(wn.fc,nr(()=>n.getDownloadURL()),wn.iC),getMetadata:()=>(0,ct.of)(void 0).pipe(wn.fc,nr(()=>n.getMetadata()),wn.iC),delete:()=>(0,Xt.D)(n.delete()),child:t=>UA(n.child(t)),updateMetadata:t=>(0,Xt.D)(n.updateMetadata(t)),put:(t,e)=>v3(n.put(t,e)),putString:(t,e,r)=>v3(n.putString(t,e,r)),list:t=>(0,Xt.D)(n.list(t)),listAll:()=>(0,Xt.D)(n.listAll())}}!function(n){const t={TaskState:fo,TaskEvent:MW,StringFormat:Ca,Storage:_3,Reference:ah};n.INTERNAL.registerComponent(new ca.wA("storage-compat",hZ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(HE.Z);const gZ=new l.OlP("angularfire2.storageBucket"),mZ=new l.OlP("angularfire2.storage.maxUploadRetryTime"),_Z=new l.OlP("angularfire2.storage.maxOperationRetryTime"),yZ=new l.OlP("angularfire2.storage.use-emulator");let vZ=(()=>{class n{constructor(e,r,i,a,d,f,_,w,T,S){const M=(0,Fr.on)(e,d,r);this.storage=(0,Fr.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const V=d.runOutsideAngular(()=>M.storage(i||void 0)),Y=T;return Y&&V.useEmulator(...Y),_&&V.setMaxUploadRetryTime(_),w&&V.setMaxOperationRetryTime(w),V},[_,w])}ref(e){return UA(this.storage.ref(e))}refFromURL(e){return UA(this.storage.refFromURL(e))}upload(e,r,i){return UA(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Fr.Dh),l.LFG(Fr.xv,8),l.LFG(gZ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(wn.HU),l.LFG(mZ,8),l.LFG(_Z,8),l.LFG(yZ,8),l.LFG(Bg,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),wZ=(()=>{class n{constructor(){Ug.Z.registerVersion("angularfire",wn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[vZ],imports:[bZ]}),n})();const CZ={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let EZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[A5]}),n.\u0275inj=l.cJS({providers:[],imports:[[Ep,gN,DB,Fr.hO.initializeApp(CZ),WH,TM,wZ]]}),n})();(0,l.G48)(),La().bootstrapModule(EZ).catch(n=>console.error(n))},3394:(st,Ee,B)=>{"use strict";B.d(Ee,{Z:()=>Se});var l=B(3854),G=B(3910),O=B(8026),ie=B(5422);class oe{constructor(Ve,ce){this._delegate=Ve,this.firebase=ce,(0,O._addComponent)(Ve,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Ve.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ve){this._delegate.automaticDataCollectionEnabled=Ve}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ve=>{this._delegate.checkDestroyed(),Ve()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ve,ce=O._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(Ve);return!ke.isInitialized()&&"EXPLICIT"===(null===(fe=ke.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:ce})}_removeServiceInstance(Ve,ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ve).clearInstance(ce)}_addComponent(Ve){(0,O._addComponent)(this._delegate,Ve)}_addOrOverwriteComponent(Ve){(0,O._addOrOverwriteComponent)(this._delegate,Ve)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function J(){const we=function(we){const Ve={},ce={__esModule:!0,initializeApp:function(dt,Ke={}){const xe=O.initializeApp(dt,Ke);if((0,l.r3)(Ve,xe.name))return Ve[xe.name];const Te=new we(xe,ce);return Ve[xe.name]=Te,Te},app:ke,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(dt){const Ke=dt.name,xe=Ke.replace("-compat","");if(O._registerComponent(dt)&&"PUBLIC"===dt.type){const Te=($e=ke())=>{if("function"!=typeof $e[xe])throw de.create("invalid-app-argument",{appName:Ke});return $e[xe]()};void 0!==dt.serviceProps&&(0,l.ZB)(Te,dt.serviceProps),ce[xe]=Te,we.prototype[xe]=function(...$e){return this._getService.bind(this,Ke).apply(this,dt.multipleInstances?$e:[])}}return"PUBLIC"===dt.type?ce[xe]:null},removeApp:function(dt){delete Ve[dt]},useAsService:function(dt,Ke){return"serverAuth"===Ke?null:Ke},modularAPIs:O}};function ke(dt){if(!(0,l.r3)(Ve,dt=dt||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:dt});return Ve[dt]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function(){return Object.keys(Ve).map(dt=>Ve[dt])}}),ke.App=we,ce}(oe);return we.INTERNAL=Object.assign(Object.assign({},we.INTERNAL),{createFirebaseNamespace:J,extendNamespace:function(ce){(0,l.ZB)(we,ce)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),we}(),z=new ie.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const we=self.firebase.SDK_VERSION;we&&we.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=U;(0,O.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(st,Ee,B)=>{"use strict";B.r(Ee),B.d(Ee,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>Dr,_addOrOverwriteComponent:()=>mi,_apps:()=>jt,_clearComponents:()=>cn,_components:()=>yt,_getProvider:()=>wt,_registerComponent:()=>Wn,_removeServiceInstance:()=>er,deleteApp:()=>fr,getApp:()=>hr,getApps:()=>Le,initializeApp:()=>si,onLog:()=>vn,registerVersion:()=>ot,setLogLevel:()=>Zn});var l=B(8239),G=B(3910),O=B(5422),ie=B(3854);class oe{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(lt=>{if(function(Ge){const Ne=Ge.getComponent();return"VERSION"===(null==Ne?void 0:Ne.type)}(lt)){const Et=lt.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(lt=>lt).join(" ")}}const de="@firebase/app",J=new O.Yd("@firebase/app"),Qt="[DEFAULT]",An={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},jt=new Map,yt=new Map;function Dr(Ge,Ne){try{Ge.container.addComponent(Ne)}catch(lt){J.debug(`Component ${Ne.name} failed to register with FirebaseApp ${Ge.name}`,lt)}}function mi(Ge,Ne){Ge.container.addOrOverwriteComponent(Ne)}function Wn(Ge){const Ne=Ge.name;if(yt.has(Ne))return J.debug(`There were multiple attempts to register component ${Ne}.`),!1;yt.set(Ne,Ge);for(const lt of jt.values())Dr(lt,Ge);return!0}function wt(Ge,Ne){const lt=Ge.container.getProvider("heartbeat").getImmediate({optional:!0});return lt&&lt.triggerHeartbeat(),Ge.container.getProvider(Ne)}function er(Ge,Ne,lt=Qt){wt(Ge,Ne).clearInstance(lt)}function cn(){yt.clear()}const dn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ln{constructor(Ne,lt,Et){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},lt),this._name=lt.name,this._automaticDataCollectionEnabled=lt.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw dn.create("app-deleted",{appName:this._name})}}const ji="9.6.11";function si(Ge,Ne={}){"object"!=typeof Ne&&(Ne={name:Ne});const lt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},Ne),Et=lt.name;if("string"!=typeof Et||!Et)throw dn.create("bad-app-name",{appName:String(Et)});const Rt=jt.get(Et);if(Rt){if((0,ie.vZ)(Ge,Rt.options)&&(0,ie.vZ)(lt,Rt.config))return Rt;throw dn.create("duplicate-app",{appName:Et})}const Jt=new G.H0(Et);for(const Z of yt.values())Jt.addComponent(Z);const Q=new Ln(Ge,lt,Jt);return jt.set(Et,Q),Q}function hr(Ge=Qt){const Ne=jt.get(Ge);if(!Ne)throw dn.create("no-app",{appName:Ge});return Ne}function Le(){return Array.from(jt.values())}function fr(Ge){return ir.apply(this,arguments)}function ir(){return(ir=(0,l.Z)(function*(Ge){const Ne=Ge.name;jt.has(Ne)&&(jt.delete(Ne),yield Promise.all(Ge.container.getProviders().map(lt=>lt.delete())),Ge.isDeleted=!0)})).apply(this,arguments)}function ot(Ge,Ne,lt){var Et;let Rt=null!==(Et=An[Ge])&&void 0!==Et?Et:Ge;lt&&(Rt+=`-${lt}`);const Jt=Rt.match(/\s|\//),Q=Ne.match(/\s|\//);if(Jt||Q){const Z=[`Unable to register library "${Rt}" with version "${Ne}":`];return Jt&&Z.push(`library name "${Rt}" contains illegal characters (whitespace or "/")`),Jt&&Q&&Z.push("and"),Q&&Z.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void J.warn(Z.join(" "))}Wn(new G.wA(`${Rt}-version`,()=>({library:Rt,version:Ne}),"VERSION"))}function vn(Ge,Ne){if(null!==Ge&&"function"!=typeof Ge)throw dn.create("invalid-log-argument");(0,O.Am)(Ge,Ne)}function Zn(Ge){(0,O.Ub)(Ge)}const Hr="firebase-heartbeat-store";let pr=null;function Vn(){return pr||(pr=(0,ie.X3)("firebase-heartbeat-database",1,(Ge,Ne)=>{switch(Ne){case 0:Ge.createObjectStore(Hr)}}).catch(Ge=>{throw dn.create("storage-open",{originalErrorMessage:Ge.message})})),pr}function _n(){return(_n=(0,l.Z)(function*(Ge){try{return(yield Vn()).transaction(Hr).objectStore(Hr).get(Gi(Ge))}catch(Ne){throw dn.create("storage-get",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function qe(Ge,Ne){return gt.apply(this,arguments)}function gt(){return(gt=(0,l.Z)(function*(Ge,Ne){try{const Et=(yield Vn()).transaction(Hr,"readwrite");return yield Et.objectStore(Hr).put(Ne,Gi(Ge)),Et.complete}catch(lt){throw dn.create("storage-set",{originalErrorMessage:lt.message})}})).apply(this,arguments)}function Gi(Ge){return`${Ge.name}!${Ge.options.appId}`}class It{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const lt=this.container.getProvider("app").getImmediate();this._storage=new sn(lt),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var Ne=this;return(0,l.Z)(function*(){const Et=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rt=Tr();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==Rt&&!Ne._heartbeatsCache.heartbeats.some(Jt=>Jt.date===Rt))return Ne._heartbeatsCache.heartbeats.push({date:Rt,agent:Et}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(Jt=>{const Q=new Date(Jt.date).valueOf();return Date.now()-Q<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,l.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const lt=Tr(),{heartbeatsToSend:Et,unsentEntries:Rt}=function(Ge,Ne=1024){const lt=[];let Et=Ge.slice();for(const Rt of Ge){const Jt=lt.find(Q=>Q.agent===Rt.agent);if(Jt){if(Jt.dates.push(Rt.date),bt(lt)>Ne){Jt.dates.pop();break}}else if(lt.push({agent:Rt.agent,dates:[Rt.date]}),bt(lt)>Ne){lt.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:lt,unsentEntries:Et}}(Ne._heartbeatsCache.heartbeats),Jt=(0,ie.L)(JSON.stringify({version:2,heartbeats:Et}));return Ne._heartbeatsCache.lastSentHeartbeatDate=lt,Rt.length>0?(Ne._heartbeatsCache.heartbeats=Rt,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),Jt})()}}function Tr(){return(new Date).toISOString().substring(0,10)}class sn{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,l.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function(Ge){return _n.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var lt=this;return(0,l.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const Jt=yield lt.read();return qe(lt.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Jt.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var lt=this;return(0,l.Z)(function*(){var Et;if(yield lt._canUseIndexedDBPromise){const Jt=yield lt.read();return qe(lt.app,{lastSentHeartbeatDate:null!==(Et=Ne.lastSentHeartbeatDate)&&void 0!==Et?Et:Jt.lastSentHeartbeatDate,heartbeats:[...Jt.heartbeats,...Ne.heartbeats]})}})()}}function bt(Ge){return(0,ie.L)(JSON.stringify({version:2,heartbeats:Ge})).length}Wn(new G.wA("platform-logger",Ne=>new oe(Ne),"PRIVATE")),Wn(new G.wA("heartbeat",Ne=>new It(Ne),"PRIVATE")),ot(de,"0.7.21",""),ot(de,"0.7.21","esm2017"),ot("fire-js","")},3910:(st,Ee,B)=>{"use strict";B.d(Ee,{wA:()=>O,H0:()=>ee,zt:()=>oe});var l=B(8239),G=B(3854);class O{constructor(U,z,j){this.name=U,this.instanceFactory=z,this.type=j,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ie="[DEFAULT]";class oe{constructor(U,z){this.name=U,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const z=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(z)){const j=new G.BH;if(this.instancesDeferred.set(z,j),this.isInitialized(z)||this.shouldAutoInitialize())try{const ae=this.getOrInitializeService({instanceIdentifier:z});ae&&j.resolve(ae)}catch(ae){}}return this.instancesDeferred.get(z).promise}getImmediate(U){var z;const j=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),ae=null!==(z=null==U?void 0:U.optional)&&void 0!==z&&z;if(!this.isInitialized(j)&&!this.shouldAutoInitialize()){if(ae)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:j})}catch(Re){if(ae)return null;throw Re}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ie})}catch(z){}for(const[z,j]of this.instancesDeferred.entries()){const ae=this.normalizeInstanceIdentifier(z);try{const Re=this.getOrInitializeService({instanceIdentifier:ae});j.resolve(Re)}catch(Re){}}}}clearInstance(U=ie){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,l.Z)(function*(){const z=Array.from(U.instances.values());yield Promise.all([...z.filter(j=>"INTERNAL"in j).map(j=>j.INTERNAL.delete()),...z.filter(j=>"_delete"in j).map(j=>j._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ie){return this.instances.has(U)}getOptions(U=ie){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:z={}}=U,j=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(j))throw Error(`${this.name}(${j}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ae=this.getOrInitializeService({instanceIdentifier:j,options:z});for(const[Re,Se]of this.instancesDeferred.entries())j===this.normalizeInstanceIdentifier(Re)&&Se.resolve(ae);return ae}onInit(U,z){var j;const ae=this.normalizeInstanceIdentifier(z),Re=null!==(j=this.onInitCallbacks.get(ae))&&void 0!==j?j:new Set;Re.add(U),this.onInitCallbacks.set(ae,Re);const Se=this.instances.get(ae);return Se&&U(Se,ae),()=>{Re.delete(U)}}invokeOnInitCallbacks(U,z){const j=this.onInitCallbacks.get(z);if(j)for(const ae of j)try{ae(U,z)}catch(Re){}}getOrInitializeService({instanceIdentifier:U,options:z={}}){let j=this.instances.get(U);if(!j&&this.component&&(j=this.component.instanceFactory(this.container,{instanceIdentifier:(J=U,J===ie?void 0:J),options:z}),this.instances.set(U,j),this.instancesOptions.set(U,z),this.invokeOnInitCallbacks(j,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,j)}catch(ae){}var J;return j||null}normalizeInstanceIdentifier(U=ie){return this.component?this.component.multipleInstances?U:ie:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const z=this.getProvider(U.name);if(z.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);z.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const z=new oe(U,this);return this.providers.set(U,z),z}getProviders(){return Array.from(this.providers.values())}}},5422:(st,Ee,B)=>{"use strict";B.d(Ee,{in:()=>G,Yd:()=>de,Ub:()=>ee,Am:()=>J});const l=[];var G=(()=>{return(U=G||(G={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",G;var U})();const O={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},ie=G.INFO,oe={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},te=(U,z,...j)=>{if(z<U.logLevel)return;const ae=(new Date).toISOString(),Re=oe[z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Re](`[${ae}]  ${U.name}:`,...j)};class de{constructor(z){this.name=z,this._logLevel=ie,this._logHandler=te,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in G))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...z),this._logHandler(this,G.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...z),this._logHandler(this,G.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,G.INFO,...z),this._logHandler(this,G.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,G.WARN,...z),this._logHandler(this,G.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...z),this._logHandler(this,G.ERROR,...z)}}function ee(U){l.forEach(z=>{z.setLogLevel(U)})}function J(U,z){for(const j of l){let ae=null;z&&z.level&&(ae=O[z.level]),j.userLogHandler=null===U?null:(Re,Se,...we)=>{const Ve=we.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(fe){return null}}).filter(ce=>ce).join(" ");Se>=(null!=ae?ae:Re.logLevel)&&U({level:G[Se].toLowerCase(),message:Ve,args:we,type:Re.name})}}}},8239:(st,Ee,B)=>{"use strict";function l(O,ie,oe,te,de,ee,J){try{var U=O[ee](J),z=U.value}catch(j){return void oe(j)}U.done?ie(z):Promise.resolve(z).then(te,de)}function G(O){return function(){var ie=this,oe=arguments;return new Promise(function(te,de){var ee=O.apply(ie,oe);function J(z){l(ee,te,de,J,U,"next",z)}function U(z){l(ee,te,de,J,U,"throw",z)}J(void 0)})}}B.d(Ee,{Z:()=>G})}},st=>{st(st.s=8340)}]);