(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:ut=>{function Ce(U){return Promise.resolve().then(()=>{var R=new Error("Cannot find module '"+U+"'");throw R.code="MODULE_NOT_FOUND",R})}Ce.keys=()=>[],Ce.resolve=Ce,Ce.id=8255,ut.exports=Ce},7716:(ut,Ce,U)=>{"use strict";U.d(Ce,{deG:()=>Jc,tb:()=>pc,AFp:()=>fc,ip1:()=>Lf,CZH:()=>bl,hGG:()=>kR,z2F:()=>gc,sBO:()=>NF,Sil:()=>Vf,_Vd:()=>wf,EJc:()=>Cl,SBq:()=>_l,qLn:()=>jh,vpe:()=>Jo,gxx:()=>dl,tBr:()=>el,XFs:()=>at,OlP:()=>Wn,zs3:()=>Rt,ZZ4:()=>Fy,aQg:()=>Jg,soG:()=>wl,YKP:()=>Xg,v3s:()=>$I,h0i:()=>Li,PXZ:()=>cu,R0b:()=>$s,FiY:()=>Vo,Lbi:()=>bv,g9A:()=>Bd,Qsj:()=>Zx,FYo:()=>Oy,JOm:()=>al,Tiy:()=>Tw,q3G:()=>nn,tp0:()=>Kn,EAV:()=>WI,Rgc:()=>Vy,dDg:()=>PI,DyG:()=>Zs,q4F:()=>di,GfV:()=>au,s_b:()=>By,ifc:()=>Nt,eFA:()=>BI,G48:()=>_R,Gpc:()=>Y,X6Q:()=>jd,_c5:()=>Ai,VLi:()=>Dv,c2e:()=>AI,zSh:()=>fg,wAp:()=>ft,vHH:()=>De,EiD:()=>vt,mCW:()=>$o,qzn:()=>Wu,JVY:()=>T0,pB0:()=>_a,eBb:()=>Gp,L6k:()=>T_,LAX:()=>qp,cg1:()=>Ls,Tjo:()=>B1,kL8:()=>ZT,yhl:()=>Oh,dqk:()=>wt,sIi:()=>Xn,CqO:()=>Hb,QGY:()=>gy,F4k:()=>gT,RDi:()=>wi,AaK:()=>J,z3N:()=>ma,qOj:()=>bb,TTD:()=>Ns,_Bn:()=>vD,xp6:()=>aE,uIk:()=>ly,Tol:()=>xT,DjV:()=>VT,ekj:()=>pf,Suo:()=>av,Xpm:()=>Z,lG2:()=>mt,Yz7:()=>Tt,cJS:()=>$n,oAB:()=>W,Yjl:()=>Et,Y36:()=>cf,_UZ:()=>Sg,BQk:()=>Bb,ynx:()=>df,qZA:()=>Vb,TgZ:()=>Lb,EpF:()=>$b,n5z:()=>ko,Ikx:()=>Td,SDv:()=>gD,QtT:()=>mD,pQV:()=>vw,LFG:()=>kr,$8M:()=>Hl,NdJ:()=>my,CRH:()=>s1,oxw:()=>Gb,ALo:()=>Xw,lcZ:()=>e1,xi3:()=>tv,Hsn:()=>qb,F$t:()=>vy,Q6J:()=>Ob,s9C:()=>Wb,MGl:()=>Ng,VKq:()=>lm,WLB:()=>ev,kEZ:()=>Mf,iGM:()=>uI,MAs:()=>Cg,CHM:()=>aa,LSH:()=>Ku,kYT:()=>pe,Udp:()=>ff,YNc:()=>wg,W1O:()=>Rf,_uU:()=>Og,Oqu:()=>Fg,hij:()=>mf,AsE:()=>Lg,Gf:()=>cI});var R=U(9765),l=U(5319),L=U(7574),ie=U(6682),ue=U(8819);function ee(s){for(let o in s)if(s[o]===ee)return o;throw Error("Could not find renamed property on target object.")}function ye(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function J(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(J).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Q(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=ee({__forward_ref__:ee});function Y(s){return s.__forward_ref__=Y,s.toString=function(){return J(this())},s}function G(s){return le(s)?s():s}function le(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===Y}class De extends Error{constructor(o,u){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function ce(s){return"string"==typeof s?s:null==s?"":String(s)}function fe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ce(s)}function Xe(s,o){const u=o?` in ${o}`:"";throw new De("201",`No provider for ${fe(s)} found${u}`)}function _t(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}function Tt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function $n(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ft(s){return Qt(s,_r)||Qt(s,fr)}function Qt(s,o){return s.hasOwnProperty(o)?s[o]:null}function vi(s){return s&&(s.hasOwnProperty(Ue)||s.hasOwnProperty(pr))?s[Ue]:null}const _r=ee({\u0275prov:ee}),Ue=ee({\u0275inj:ee}),fr=ee({ngInjectableDef:ee}),pr=ee({ngInjectorDef:ee});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let Ar;function kn(s){const o=Ar;return Ar=s,o}function Qr(s,o,u){const c=Ft(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&at.Optional?null:void 0!==o?o:void Xe(J(s),"Injector")}function yr(s){return{toString:s}.toString()}var gr=(()=>((gr=gr||{})[gr.OnPush=0]="OnPush",gr[gr.Default=1]="Default",gr))(),Nt=(()=>((Nt=Nt||{})[Nt.Emulated=0]="Emulated",Nt[Nt.None=2]="None",Nt[Nt.ShadowDom=3]="ShadowDom",Nt))();const lt="undefined"!=typeof globalThis&&globalThis,Ct="undefined"!=typeof window&&window,Gs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wt=lt||"undefined"!=typeof global&&global||Ct||Gs,jr={},nt=[],Xr=ee({\u0275cmp:ee}),ke=ee({\u0275dir:ee}),Se=ee({\u0275pipe:ee}),st=ee({\u0275mod:ee}),Mt=ee({\u0275loc:ee}),xt=ee({\u0275fac:ee}),Xt=ee({__NG_ELEMENT_ID__:ee});let X=0;function Z(s){return yr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===gr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||nt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Nt.Emulated,id:"c",styles:s.styles||nt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,_=s.pipes;return c.id+=X++,c.inputs=He(s.inputs,u),c.outputs=He(s.outputs),p&&p.forEach(v=>v(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(ge):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map(H):null,c})}function ge(s){return Qe(s)||function(s){return s[ke]||null}(s)}function H(s){return function(s){return s[Se]||null}(s)}const j={};function W(s){return yr(()=>{const o={type:s.type,bootstrap:s.bootstrap||nt,declarations:s.declarations||nt,imports:s.imports||nt,exports:s.exports||nt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(j[s.id]=s.type),o})}function pe(s,o){return yr(()=>{const u=mn(s,!0);u.declarations=o.declarations||nt,u.imports=o.imports||nt,u.exports=o.exports||nt})}function He(s,o){if(null==s)return jr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const mt=Z;function Et(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Qe(s){return s[Xr]||null}function mn(s,o){const u=s[st]||null;if(!u&&!0===o)throw new Error(`Type ${J(s)} does not have '\u0275mod' property.`);return u}function En(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ss(s){return Array.isArray(s)&&!0===s[1]}function wu(s){return 0!=(8&s.flags)}function xl(s){return 2==(2&s.flags)}function Cu(s){return 1==(1&s.flags)}function rr(s){return null!==s.template}function u_(s){return 0!=(512&s[2])}function as(s,o){return s.hasOwnProperty(xt)?s[xt]:null}class Pa{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ns(){return ii}function ii(s){return s.type.prototype.ngOnChanges&&(s.setInput=Nr),sa}function sa(){const s=Oa(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===jr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Nr(s,o,u,c){const h=Oa(s)||function(s,o){return s[gh]=o}(s,{previous:jr,current:null}),p=h.current||(h.current={}),_=h.previous,v=this.declaredInputs[u],C=_[v];p[v]=new Pa(C&&C.currentValue,o,_===jr),s[c]=o}Ns.ngInherit=!0;const gh="__ngSimpleChanges__";function Oa(s){return s[gh]||null}let Rl;function wi(s){Rl=s}function kl(){return void 0!==Rl?Rl:"undefined"!=typeof document?document:void 0}function Tn(s){return!!s.listen}const To={createRenderer:(s,o)=>kl()};function Gn(s){for(;Array.isArray(s);)s=s[0];return s}function Pl(s,o){return Gn(o[s])}function Dn(s,o){return Gn(o[s.index])}function Yi(s,o){return s.data[o]}function Fa(s,o){return s[o]}function xr(s,o){const u=o[s];return En(u)?u:u[0]}function Fc(s){return 4==(4&s[2])}function Ol(s){return 128==(128&s[2])}function Yn(s,o){return null==o?null:s[o]}function Iu(s){s[18]=0}function Au(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const St={lFrame:Ou(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Su(){return St.bindingsEnabled}function Ae(){return St.lFrame.lView}function zt(){return St.lFrame.tView}function aa(s){return St.lFrame.contextLView=s,s[8]}function ir(){let s=Do();for(;null!==s&&64===s.type;)s=s.parent;return s}function Do(){return St.lFrame.currentTNode}function Io(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function ai(s,o){const u=St.lFrame;u.currentTNode=s,u.isParent=o}function la(){return St.lFrame.isParent}function Ll(){St.lFrame.isParent=!1}function Ao(){return St.isInCheckNoChangesMode}function Ru(s){St.isInCheckNoChangesMode=s}function Mr(){const s=St.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function li(){return St.lFrame.bindingIndex}function Ms(){return St.lFrame.bindingIndex++}function ki(s){const o=St.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function yh(s){St.lFrame.inI18n=s}function Bl(s,o){const u=St.lFrame;u.bindingIndex=u.bindingRootIndex=s,ua(o)}function ua(s){St.lFrame.currentDirectiveIndex=s}function ku(){return St.lFrame.currentQueryIndex}function La(s){St.lFrame.currentQueryIndex=s}function Va(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Pu(s,o,u){if(u&at.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&at.Host||(h=Va(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=St.lFrame=bh();return c.currentTNode=o,c.lView=s,!0}function Ba(s){const o=bh(),u=s[1];St.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function bh(){const s=St.lFrame,o=null===s?null:s.child;return null===o?Ou(s):o}function Ou(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function wh(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Fu=wh;function Ul(){const s=wh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Gr(){return St.lFrame.selectedIndex}function No(s){St.lFrame.selectedIndex=s}function qn(){const s=St.lFrame;return Yi(s.tView,s.selectedIndex)}function Ua(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:I,ngOnDestroy:N}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),v&&((s.contentHooks||(s.contentHooks=[])).push(u,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),I&&((s.viewHooks||(s.viewHooks=[])).push(u,I),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,I)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function ca(s,o,u){Ch(s,o,3,u)}function sr(s,o,u,c){(3&s[2])===u&&Ch(s,o,u,c)}function $a(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Ch(s,o,u,c){const p=null!=c?c:-1,_=o.length-1;let v=0;for(let C=void 0!==c?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(Ap(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Ap(s,o,u,c){const h=u[c]<0,p=u[c+1],v=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Ws{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Eh(s,o,u){const c=Tn(s);let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const _=u[h++],v=u[h++],C=u[h++];c?s.setAttribute(o,v,C,_):o.setAttributeNS(_,v,C)}else{const _=p,v=u[++h];qc(_)?c&&s.setProperty(o,_,v):c?s.setAttribute(o,_,v):o.setAttribute(_,v),h++}}return h}function m_(s){return 3===s||4===s||6===s}function qc(s){return 64===s.charCodeAt(0)}function Rs(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||xp(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function xp(s,o,u,c,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Wc(s){return-1!==s}function ha(s){return 32767&s}function Ki(s,o){let u=function(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Ga=!0;function Zc(s){const o=Ga;return Ga=s,o}let Vu=0;function qa(s,o){const u=us(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Wa(c.data,s),Wa(o,null),Wa(c.blueprint,null));const h=vn(s,o),p=s.injectorIndex;if(Wc(h)){const _=ha(h),v=Ki(h,o),C=v[1].data;for(let I=0;I<8;I++)o[p+I]=v[_+I]|C[_+I]}return o[p+8]=h,p}function Wa(s,o){s.push(0,0,0,0,0,0,0,0,o)}function us(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function vn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(c=2===_?p.declTNode:1===_?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function ht(s,o,u){!function(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Xt)&&(c=u[Xt]),null==c&&(c=u[Xt]=Vu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function zc(s,o,u){if(u&at.Optional)return s;Xe(o,"NodeInjector")}function or(s,o,u,c){if(u&at.Optional&&void 0===c&&(c=null),0==(u&(at.Self|at.Host))){const h=s[9],p=kn(void 0);try{return h?h.get(o,c,u&at.Optional):Qr(o,c,u&at.Optional)}finally{kn(p)}}return zc(c,o,u)}function xo(s,o,u,c=at.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Xt)?s[Xt]:void 0;return"number"==typeof o?o>=0?255&o:ui:o}(u);if("function"==typeof p){if(!Pu(o,s,c))return c&at.Host?zc(h,u,c):or(o,u,c,h);try{const _=p(c);if(null!=_||c&at.Optional)return _;Xe(u)}finally{Fu()}}else if("number"==typeof p){let _=null,v=us(s,o),C=-1,I=c&at.Host?o[16][6]:null;for((-1===v||c&at.SkipSelf)&&(C=-1===v?vn(s,o):o[v+8],-1!==C&&Ro(c,!1)?(_=o[1],v=ha(C),o=Ki(C,o)):v=-1);-1!==v;){const N=o[1];if(Bu(p,v,N.data)){const F=Yc(v,o,u,_,c,I);if(F!==cs)return F}C=o[v+8],-1!==C&&Ro(c,o[1].data[v+8]===I)&&Bu(p,v,o)?(_=N,v=ha(C),o=Ki(C,o)):v=-1}}}return or(o,u,c,h)}const cs={};function ui(){return new fa(ir(),Ae())}function Yc(s,o,u,c,h,p){const _=o[1],v=_.data[s+8],N=Mo(v,_,u,null==c?xl(v)&&Ga:c!=_&&0!=(3&v.type),h&at.Host&&p===v);return null!==N?$l(o,_,N,v):cs}function Mo(s,o,u,c,h){const p=s.providerIndexes,_=o.data,v=1048575&p,C=s.directiveStart,N=p>>20,B=h?v+N:s.directiveEnd;for(let K=c?v:v+N;K<B;K++){const te=_[K];if(K<C&&u===te||K>=C&&te.type===u)return K}if(h){const K=_[C];if(K&&rr(K)&&K.type===u)return C}return null}function $l(s,o,u,c){let h=s[u];const p=o.data;if(function(s){return s instanceof Ws}(h)){const _=h;_.resolving&&function(s,o){throw new De("200",`Circular dependency in DI detected for ${s}`)}(fe(p[u]));const v=Zc(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?kn(_.injectImpl):null;Pu(s,c,at.Default);try{h=s[u]=_.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const _=ii(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&kn(C),Zc(v),_.resolving=!1,Fu()}}return h}function Bu(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Ro(s,o){return!(s&at.Self||s&at.Host&&o)}class fa{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return xo(this._tNode,this._lView,o,c,u)}}function ko(s){return yr(()=>{const o=s.prototype.constructor,u=o[xt]||Kc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[xt]||Kc(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Kc(s){return le(s)?()=>{const o=Kc(G(s));return o&&o()}:as(s)}function Hl(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(m_(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(ir(),s)}const ds="__parameters__";function br(s,o,u){return yr(()=>{const c=function(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const _=new h(...p);return v.annotation=_,v;function v(C,I,N){const F=C.hasOwnProperty(ds)?C[ds]:Object.defineProperty(C,ds,{value:[]})[ds];for(;F.length<=N;)F.push(null);return(F[N]=F[N]||[]).push(_),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Wn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Tt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Jc=new Wn("AnalyzeForEntryComponents"),Zs=Function;function qr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),qr(c,o)):o!==s&&o.push(c)}return o}function Ps(s,o){s.forEach(u=>Array.isArray(u)?Ps(u,o):o(u))}function zs(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ys(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Oo(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function Ei(s,o,u){let c=lr(s,o);return c>=0?s[1|c]=u:(c=~c,function(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function fs(s,o){const u=lr(s,o);if(u>=0)return s[1|u]}function lr(s,o){return function(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),_=s[p<<u];if(o===_)return p<<u;_>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const tn={},Bt="__NG_DI_FLAG__",Cr="ngTempTokenPath",Gl=/\n/gm,Ks="__source",Os=ee({provide:String,useValue:ee});let Xa;function pa(s){const o=Xa;return Xa=s,o}function Yt(s,o=at.Default){if(void 0===Xa)throw new Error("inject() must be called from an injection context");return null===Xa?Qr(s,void 0,o):Xa.get(s,o&at.Optional?null:void 0,o)}function kr(s,o=at.Default){return(Ar||Yt)(G(s),o)}function ga(s){const o=[];for(let u=0;u<s.length;u++){const c=G(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,p=at.Default;for(let _=0;_<c.length;_++){const v=c[_],C=Vp(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(kr(h,p))}else o.push(kr(c))}return o}function ql(s,o){return s[Bt]=o,s.prototype[Bt]=o,s}function Vp(s){return s[Bt]}function xh(s,o,u,c){const h=s[Cr];throw o[Ks]&&h.unshift(o[Ks]),s.message=function(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=J(o);if(Array.isArray(o))h=o.map(J).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];p.push(_+":"+("string"==typeof v?JSON.stringify(v):J(v)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Gl,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Cr]=null,s}const el=ql(br("Inject",s=>({token:s})),-1),Vo=ql(br("Optional"),8),Kn=ql(br("SkipSelf"),4);let Wl;function Gu(s){var o;return(null===(o=function(){if(void 0===Wl&&(Wl=null,wt.trustedTypes))try{Wl=wt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Wl}())||void 0===o?void 0:o.createHTML(s))||s}class il{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class b0 extends il{getTypeName(){return"HTML"}}class w0 extends il{getTypeName(){return"Style"}}class C0 extends il{getTypeName(){return"Script"}}class Ph extends il{getTypeName(){return"URL"}}class E0 extends il{getTypeName(){return"ResourceURL"}}function ma(s){return s instanceof il?s.changingThisBreaksApplicationSecurity:s}function Wu(s,o){const u=Oh(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function Oh(s){return s instanceof il&&s.getTypeName()||null}function T0(s){return new b0(s)}function T_(s){return new w0(s)}function Gp(s){return new C0(s)}function qp(s){return new Ph(s)}function _a(s){return new E0(s)}function zl(s){const o=new I_(s);return function(){try{return!!(new window.DOMParser).parseFromString(Gu(""),"text/html")}catch(s){return!1}}()?new D_(o):o}class D_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(Gu(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class I_{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Gu(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=Gu(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const _=u.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const Zu=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I0=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $o(s){return(s=String(s)).match(Zu)||s.match(I0)?s:"unsafe:"+s}function Zp(s){return(s=String(s)).split(",").map(o=>$o(o.trim())).join(", ")}function ps(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function zu(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const Yu=ps("area,br,col,hr,img,wbr"),Fh=ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zp=ps("rp,rt"),Yp=zu(Yu,zu(Fh,ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zu(zp,ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zu(zp,Fh)),A_=ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),w=ps("srcset"),E=zu(A_,w,ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),x=ps("script,style,template");class k{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Yp.hasOwnProperty(u))return this.sanitizedSomething=!0,!x.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),_=p.name,v=_.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;A_[v]&&(C=$o(C)),w[v]&&(C=Zp(C)),this.buf.push(" ",_,'="',tt(C),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Yp.hasOwnProperty(u)&&!Yu.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(tt(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const re=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,we=/([^\#-~ |!])/g;function tt(s){return s.replace(/&/g,"&amp;").replace(re,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(we,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let je;function vt(s,o){let u=null;try{je=je||zl(s);let c=o?String(o):"";u=je.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=u.innerHTML,u=je.getInertBodyElement(c)}while(c!==p);return Gu((new k).sanitizeChildren(un(u)||u))}finally{if(u){const c=un(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function un(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var nn=(()=>((nn=nn||{})[nn.NONE=0]="NONE",nn[nn.HTML=1]="HTML",nn[nn.STYLE=2]="STYLE",nn[nn.SCRIPT=3]="SCRIPT",nn[nn.URL=4]="URL",nn[nn.RESOURCE_URL=5]="RESOURCE_URL",nn))();function Ku(s){const o=function(){const s=Ae();return s&&s[12]}();return o?o.sanitize(nn.URL,s)||"":Wu(s,"URL")?ma(s):$o(ce(s))}const Uh="__ngContext__";function Wr(s,o){s[Uh]=o}function x_(s){const o=function(s){return s[Uh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Xp(s){return s.ngOriginalError}function $C(s,...o){s.error(...o)}class jh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=this._findContext(o),h=(s=o)&&s.ngErrorLogger||$C;var s;h(this._console,"ERROR",o),u&&h(this._console,"ORIGINAL ERROR",u),c&&h(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(Xp(o)):null}_findOriginalError(o){let u=o&&Xp(o);for(;u&&Xp(u);)u=Xp(u);return u||null}}const LS=/^>|^->|<!--|-->|--!>|<!-$/g,VS=/(<|>)/;const Gh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wt))();function ol(s){return s instanceof Function?s():s}var al=(()=>((al=al||{})[al.Important=1]="Important",al[al.DashCase=2]="DashCase",al))();let k0;function P0(s,o){return k0(s,o)}function rg(s){const o=s[3];return Ss(o)?o[3]:o}function O0(s){return jS(s[13])}function O_(s){return jS(s[4])}function jS(s){for(;null!==s&&!Ss(s);)s=s[4];return s}function od(s,o,u,c,h){if(null!=c){let p,_=!1;Ss(c)?p=c:En(c)&&(_=!0,c=c[0]);const v=Gn(c);0===s&&null!==u?null==h?$0(o,u,v):ad(o,u,v,h||null,!0):1===s&&null!==u?ad(o,u,v,h||null,!0):2===s?XC(o,v,_):3===s&&o.destroyNode(v),null!=p&&function(s,o,u,c,h){const p=u[7];p!==Gn(u)&&od(o,s,c,p,h);for(let v=10;v<u.length;v++){const C=u[v];Zh(C[1],C,s,o,c,p)}}(o,s,p,u,h)}}function F_(s,o){return Tn(s)?s.createText(o):s.createTextNode(o)}function F0(s,o,u){Tn(s)?s.setValue(o,u):o.textContent=u}function qS(s,o){return s.createComment(function(s){return s.replace(LS,o=>o.replace(VS,"\u200b$1\u200b"))}(o))}function L0(s,o,u){return Tn(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function ZC(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,Au(h,-1)),u.splice(c,1)}function ig(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&ZC(h,c),o>0&&(s[u-1][4]=c[4]);const p=Ys(s,10+o);!function(s,o){Zh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function B0(s,o){if(!(256&o[2])){const u=o[11];Tn(u)&&u.destroyNode&&Zh(s,o,u,3,null,null),function(s){let o=s[13];if(!o)return U0(s[1],s);for(;o;){let u=null;if(En(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)En(o)&&U0(o[1],o),o=o[3];null===o&&(o=s),En(o)&&U0(o[1],o),u=o&&o[4]}o=u}}(o)}}function U0(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof Ws)){const p=u[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const v=h[p[_]],C=p[_+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const _=u[p+1],v="function"==typeof _?_(o):Gn(o[_]),C=c[h=u[p+2]],I=u[p+3];"boolean"==typeof I?v.removeEventListener(u[p],C,I):I>=0?c[h=I]():c[h=-I].unsubscribe(),p+=2}else{const _=c[h=u[p+1]];u[p].call(_)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&Tn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Ss(o[3])){u!==o[3]&&ZC(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function zC(s,o,u){return YC(s,o.parent,u)}function YC(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===Nt.None||h===Nt.Emulated)return null}return Dn(c,u)}function ad(s,o,u,c,h){Tn(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function $0(s,o,u){Tn(s)?s.appendChild(o,u):o.appendChild(u)}function KC(s,o,u,c,h){null!==c?ad(s,o,u,c,h):$0(s,o,u)}function Ti(s,o){return Tn(s)?s.parentNode(o):o.parentNode}function sg(s,o,u){return V_(s,o,u)}function L_(s,o,u){return 40&s.type?Dn(s,u):null}let Qu,V_=L_;function JC(s,o){V_=s,Qu=o}function B_(s,o,u,c){const h=zC(s,c,o),p=o[11],v=sg(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)KC(p,h,u[C],v,!1);else KC(p,h,u,v,!1);void 0!==Qu&&Qu(p,c,o,u,h)}function og(s,o){if(null!==o){const u=o.type;if(3&u)return Dn(o,s);if(4&u)return U_(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return og(s,c);{const h=s[o.index];return Ss(h)?U_(-1,h):Gn(h)}}if(32&u)return P0(o,s)()||Gn(s[o.index]);{const c=QC(s,o);return null!==c?Array.isArray(c)?c[0]:og(rg(s[16]),c):og(s,o.next)}}return null}function QC(s,o){return null!==o?s[16][6].projection[o.projection]:null}function U_(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return og(c,h)}return o[7]}function XC(s,o,u){const c=Ti(s,o);c&&function(s,o,u,c){Tn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}function $_(s,o,u,c,h,p,_){for(;null!=u;){const v=c[u.index],C=u.type;if(_&&0===o&&(v&&Wr(Gn(v),c),u.flags|=4),64!=(64&u.flags))if(8&C)$_(s,o,u.child,c,h,p,!1),od(o,s,h,v,p);else if(32&C){const I=P0(u,c);let N;for(;N=I();)od(o,s,h,N,p);od(o,s,h,v,p)}else 16&C?eN(s,o,c,u,h,p):od(o,s,h,v,p);u=_?u.projectionNext:u.next}}function Zh(s,o,u,c,h,p){$_(u,c,s.firstChild,o,h,p,!1)}function eN(s,o,u,c,h,p){const _=u[16],C=_[6].projection[c.projection];if(Array.isArray(C))for(let I=0;I<C.length;I++)od(o,s,h,C[I],p);else $_(s,o,C,_[3],h,p,!0)}function tE(s,o,u){Tn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function j0(s,o,u){Tn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function nE(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const rE="ng-template";function nN(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==nE(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function iE(s){return 4===s.type&&s.value!==rE}function sE(s,o,u){return o===(4!==s.type||u?s.value:rE)}function rN(s,o,u){let c=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(m_(s[o]))return o;return s.length}(h);let _=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!_)if(4&c){if(c=2|1&c,""!==C&&!sE(s,C,u)||""===C&&1===o.length){if(ya(c))return!1;_=!0}}else{const I=8&c?C:o[++v];if(8&c&&null!==s.attrs){if(!nN(s.attrs,I,u)){if(ya(c))return!1;_=!0}continue}const F=iN(8&c?"class":C,h,iE(s),u);if(-1===F){if(ya(c))return!1;_=!0;continue}if(""!==I){let B;B=F>p?"":h[F+1].toLowerCase();const K=8&c?B:null;if(K&&-1!==nE(K,I,0)||2&c&&I!==B){if(ya(c))return!1;_=!0}}}}else{if(!_&&!ya(c)&&!ya(C))return!1;if(_&&ya(C))continue;_=!1,c=C|1&c}}return ya(c)||_}function ya(s){return 0==(1&s)}function iN(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function H_(s,o,u=!1){for(let c=0;c<o.length;c++)if(rN(s,o[c],u))return!0;return!1}function aN(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function lN(s,o){return s?":not("+o.trim()+")":o}function uN(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const v=s[++u];h+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+_:4&c&&(h+=" "+_);else""!==h&&!ya(_)&&(o+=lN(p,h),h=""),c=_,p=p||!ya(c);u++}return""!==h&&(o+=lN(p,h)),o}const Ot={};function aE(s){Xu(zt(),Ae(),Gr()+s,Ao())}function Xu(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ca(o,p,u)}else{const p=s.preOrderHooks;null!==p&&sr(o,p,0,u)}No(u)}function zh(s,o){return s<<17|o<<2}function va(s){return s>>17&32767}function G0(s){return 2|s}function Kl(s){return(131068&s)>>2}function uE(s,o){return-131069&s|o<<2}function cE(s){return 1|s}function cd(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const _=s.data[p];La(h),_.contentQueries(2,o[p],p)}}}function Xl(s,o,u,c,h,p,_,v,C,I){const N=o.blueprint.slice();return N[0]=h,N[2]=140|c,Iu(N),N[3]=N[15]=s,N[8]=u,N[10]=_||s&&s[10],N[11]=v||s&&s[11],N[12]=C||s&&s[12]||null,N[9]=I||s&&s[9]||null,N[6]=p,N[16]=2==o.type?s[16]:N,N}function Go(s,o,u,c,h){let p=s.data[o];if(null===p)p=W_(s,o,u,c,h),St.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const _=Io();p.injectorIndex=null===_?-1:_.injectorIndex}return ai(p,!0),p}function W_(s,o,u,c,h){const p=Do(),_=la(),C=s.data[o]=function(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function dd(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Pr(s,o,u){Ba(o);try{const c=s.viewQuery;null!==c&&cb(1,c,u);const h=s.template;null!==h&&wa(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&cd(s,o),s.staticViewQueries&&cb(2,s.viewQuery,u);const p=s.components;null!==p&&function(s,o){for(let u=0;u<o.length;u++)DN(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Ul()}}function ul(s,o,u,c){const h=o[2];if(256==(256&h))return;Ba(o);const p=Ao();try{Iu(o),function(s){St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&wa(s,o,u,2,c);const _=3==(3&h);if(!p)if(_){const I=s.preOrderCheckHooks;null!==I&&ca(o,I,null)}else{const I=s.preOrderHooks;null!==I&&sr(o,I,0,null),$a(o,0)}if(function(s){for(let o=O0(s);null!==o;o=O_(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(1024&h[2])&&Au(p,1),h[2]|=1024}}}(o),function(s){for(let o=O0(s);null!==o;o=O_(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Ol(c)&&ul(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&cd(s,o),!p)if(_){const I=s.contentCheckHooks;null!==I&&ca(o,I)}else{const I=s.contentHooks;null!==I&&sr(o,I,1),$a(o,1)}!function(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)No(~h);else{const p=h,_=u[++c],v=u[++c];Bl(_,p),v(2,o[p])}}}finally{No(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let u=0;u<o.length;u++)ob(s,o[u])}(o,v);const C=s.viewQuery;if(null!==C&&cb(2,C,c),!p)if(_){const I=s.viewCheckHooks;null!==I&&ca(o,I)}else{const I=s.viewHooks;null!==I&&sr(o,I,2),$a(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Au(o[3],-1))}finally{Ul()}}function J0(s,o,u,c){const h=o[10],p=!Ao(),_=Fc(o);try{p&&!_&&h.begin&&h.begin(),_&&Pr(s,o,c),ul(s,o,u,c)}finally{p&&!_&&h.end&&h.end()}}function wa(s,o,u,c,h){const p=Gr(),_=2&c;try{No(-1),_&&o.length>20&&Xu(s,o,20,Ao()),u(c,h)}finally{No(p)}}function Qi(s,o,u){if(wu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,u[p],p)}}}function Q0(s,o,u){!Su()||(function(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||qa(u,o),Wr(c,o);const _=u.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],I=rr(C);I&&nb(o,u,C);const N=$l(o,s,v,u);Wr(N,o),null!==_&&rb(0,v-h,N,C,0,_),I&&(xr(u.index,o)[8]=N)}}(s,o,u,Dn(u,o)),128==(128&u.flags)&&function(s,o,u){const c=u.directiveStart,h=u.directiveEnd,_=u.index,v=St.lFrame.currentDirectiveIndex;try{No(_);for(let C=c;C<h;C++){const I=s.data[C],N=o[C];ua(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&X0(I,N)}}finally{No(-1),ua(v)}}(s,o,u))}function Kh(s,o,u=Dn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],v=-1===_?u(o,s):s[_];s[h++]=v}}}function mE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=qo(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function qo(s,o,u,c,h,p,_,v,C,I){const N=20+c,F=N+h,B=function(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ot);return u}(N,F),K="function"==typeof I?I():I;return B[1]={type:s,blueprint:B,template:u,queries:null,viewQuery:v,declTNode:o,data:B.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function Z_(s,o,u,c){const h=db(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&hb(s).push(c,h.length-1))}function ci(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function to(s,o,u,c,h,p,_,v){const C=Dn(o,u);let N,I=o.inputs;!v&&null!=I&&(N=I[c])?(NE(s,u,N,c,h),xl(o)&&function(s,o){const u=xr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=_?_(h,o.value||"",c):h,Tn(p)?p.setProperty(C,c,h):qc(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function hd(s,o,u,c){let h=!1;if(Su()){const p=function(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const _=c[p];H_(u,_.selectors,!1)&&(h||(h=[]),ht(qa(u,o),s,_.type),rr(_)?(eb(s,u),h.unshift(_)):h.push(_))}return h}(s,o,u),_=null===c?null:{"":-1};if(null!==p){h=!0,tb(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const F=p[N];F.providersResolver&&F.providersResolver(F)}let v=!1,C=!1,I=dd(s,o,p.length,null);for(let N=0;N<p.length;N++){const F=p[N];u.mergedAttrs=Rs(u.mergedAttrs,F.hostAttrs),TE(s,u,o,I,F),EE(I,F,_),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const B=F.type.prototype;!v&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!C&&(B.ngOnChanges||B.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),I++}!function(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,_=[];let v=null,C=null;for(let I=o.directiveStart;I<c;I++){const N=h[I],F=N.inputs,B=null===p||iE(o)?null:EN(F,p);_.push(B),v=ci(F,I,v),C=ci(N.outputs,I,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=C}(s,u)}_&&function(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new De("301",`Export of name '${o[h+1]}' not found!`);c.push(o[h],p)}}}(u,c,_)}return u.mergedAttrs=Rs(u.mergedAttrs,u.attrs),h}function bE(s,o,u,c,h,p){const _=p.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=C&&v.push(C),v.push(c,h,_)}}function X0(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function eb(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function EE(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;rr(o)&&(u[""]=s)}}function tb(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function TE(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=as(h.type)),_=new Ws(p,rr(h),null);s.blueprint[c]=_,u[c]=_,bE(s,o,0,c,dd(s,u,h.hostVars,Ot),h)}function nb(s,o,u){const c=Dn(o,s),h=mE(u),p=s[10],_=K_(s,Xl(s,h,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=_}function Y_(s,o,u,c,h,p,_){if(null==p)Tn(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const v=null==_?ce(p):_(p,c||"",h);Tn(s)?s.setAttribute(o,h,v,u):u?o.setAttributeNS(u,h,v):o.setAttribute(h,v)}}function rb(s,o,u,c,h,p){const _=p[o];if(null!==_){const v=c.setInput;for(let C=0;C<_.length;){const I=_[C++],N=_[C++],F=_[C++];null!==v?c.setInput(u,F,I,N):u[N]=F}}}function EN(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function DE(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function ob(s,o){const u=xr(o,s);if(Ol(u)){const c=u[1];80&u[2]?ul(c,u,c.template,u[8]):u[5]>0&&ab(u)}}function ab(s){for(let c=O0(s);null!==c;c=O_(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const _=p[1];ul(_,p,_.template,p[8])}else p[5]>0&&ab(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=xr(u[c],s);Ol(h)&&h[5]>0&&ab(h)}}function DN(s,o){const u=xr(o,s),c=u[1];(function(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Pr(c,u,u[8])}function K_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function lb(s){for(;s;){s[2]|=64;const o=rg(s);if(u_(s)&&!o)return s;s=o}return null}function Q_(s,o,u){const c=o[10];c.begin&&c.begin();try{ul(s,o,s.template,u)}catch(h){throw SE(o,h),h}finally{c.end&&c.end()}}function ub(s){!function(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=x_(u),h=c[1];J0(h,c,h.template,u)}}(s[8])}function cb(s,o,u){La(0),o(s,u)}const NN=(()=>Promise.resolve(null))();function db(s){return s[7]||(s[7]=[])}function hb(s){return s.cleanup||(s.cleanup=[])}function SE(s,o){const u=s[9],c=u?u.get(jh,null):null;c&&c.handleError(o)}function NE(s,o,u,c,h){for(let p=0;p<u.length;){const _=u[p++],v=u[p++],C=o[_],I=s.data[_];null!==I.setInput?I.setInput(C,h,c,v):C[v]=h}}function Fs(s,o,u){const c=Pl(o,s);F0(s[11],c,u)}function Qh(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?p=v:1==p?h=Q(h,v):2==p&&(c=Q(c,v+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const dl=new Wn("INJECTOR",-1);class ey{get(o,u=tn){if(u===tn){const c=new Error(`NullInjectorError: No provider for ${J(o)}!`);throw c.name="NullInjectorError",c}return u}}const fg=new Wn("Set Injector scope."),pg={},RN={};let fb;function ty(){return void 0===fb&&(fb=new ey),fb}function ME(s,o=null,u=null,c){return new RE(s,u,o||ty(),c)}class RE{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&Ps(u,v=>this.processProvider(v,o,u)),Ps([o],v=>this.processInjectorType(v,[],p)),this.records.set(dl,fd(void 0,this));const _=this.records.get(fg);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:J(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=tn,c=at.Default){this.assertNotDestroyed();const h=pa(this),p=kn(void 0);try{if(!(c&at.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof Wn)&&Ft(o);v=C&&this.injectableDefInScope(C)?fd(pb(o),pg):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(c&at.Self?ty():this.parent).get(o,u=c&at.Optional&&u===tn?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Cr]=_[Cr]||[]).unshift(J(o)),h)throw _;return xh(_,o,"R3InjectorError",this.source)}throw _}finally{kn(p),pa(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(J(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,c){if(!(o=G(o)))return!1;let h=vi(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,v=-1!==c.indexOf(_);if(void 0!==p&&(h=vi(p)),null==h)return!1;if(null!=h.imports&&!v){let N;c.push(_);try{Ps(h.imports,F=>{this.processInjectorType(F,u,c)&&(void 0===N&&(N=[]),N.push(F))})}finally{}if(void 0!==N)for(let F=0;F<N.length;F++){const{ngModule:B,providers:K}=N[F];Ps(K,te=>this.processProvider(te,B,K||nt))}}this.injectorDefTypes.add(_);const C=as(_)||(()=>new _);this.records.set(_,fd(C,pg));const I=h.providers;if(null!=I&&!v){const N=o;Ps(I,F=>this.processProvider(F,N,I))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let h=pd(o=G(o))?o:G(o&&o.provide);const p=OE(s=o)?fd(void 0,s.useValue):fd(gb(s),pg);var s;if(pd(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=fd(void 0,pg,!0),_.factory=()=>ga(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,u){return u.value===pg&&(u.value=RN,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(s=u.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const u=G(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function pb(s){const o=Ft(s),u=null!==o?o.factory:as(s);if(null!==u)return u;if(s instanceof Wn)throw new Error(`Token ${J(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=Oo(o,"?");throw new Error(`Can't resolve all parameters for ${J(s)}: (${c.join(", ")}).`)}const u=function(s){const o=s&&(s[_r]||s[fr]);if(o){const u=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function gb(s,o,u){let c;if(pd(s)){const h=G(s);return as(h)||pb(h)}if(OE(s))c=()=>G(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...ga(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>kr(G(s.useExisting));else{const h=G(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return as(h)||pb(h);c=()=>new h(...ga(s.deps))}return c}function fd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function OE(s){return null!==s&&"object"==typeof s&&Os in s}function pd(s){return"function"==typeof s}const eu=function(s,o,u){return function(s,o=null,u=null,c){const h=ME(s,o,u,c);return h._resolveInjectorDefTypes(),h}({name:u},o,s,u)};let Rt=(()=>{class s{static create(u,c){return Array.isArray(u)?eu(u,c,""):eu(u.providers,u.parent,u.name||"")}}return s.THROW_IF_NOT_FOUND=tn,s.NULL=new ey,s.\u0275prov=Tt({token:s,providedIn:"any",factory:()=>kr(dl)}),s.__NG_ELEMENT_ID__=-1,s})();function YE(s,o){Ua(x_(s)[1],ir())}function bb(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(rr(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(u){c.push(h);const _=s;_.inputs=wb(s.inputs),_.declaredInputs=wb(s.declaredInputs),_.outputs=wb(s.outputs);const v=h.hostBindings;v&&Cb(s,v);const C=h.viewQuery,I=h.contentQueries;if(C&&$N(s,C),I&&oy(s,I),ye(s.inputs,h.inputs),ye(s.declaredInputs,h.declaredInputs),ye(s.outputs,h.outputs),rr(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const v=p[_];v&&v.ngInherit&&v(s),v===bb&&(u=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Rs(h.hostAttrs,u=Rs(u,h.hostAttrs))}}(c)}function wb(s){return s===jr?{}:s===nt?[]:s}function $N(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function oy(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function Cb(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Ht=null;function tf(){if(!Ht){const s=wt.Symbol;if(s&&s.iterator)Ht=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ht=c)}}}return Ht}class Ta{constructor(o){this.wrapped=o}static wrap(o){return new Ta(o)}static unwrap(o){return Ta.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof Ta}}function Xn(s){return!!vg(s)&&(Array.isArray(s)||!(s instanceof Map)&&tf()in s)}function vg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ys(s,o,u){return s[o]=u}function Fi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function nc(s,o,u,c){const h=Fi(s,o,u);return Fi(s,o+1,c)||h}function ly(s,o,u,c){const h=Ae();return Fi(h,Ms(),o)&&(zt(),function(s,o,u,c,h,p){const _=Dn(s,o);Y_(o[11],_,p,s.value,u,c,h)}(qn(),h,s,o,u,c)),ly}function Da(s,o,u,c){return Fi(s,Ms(),u)?o+ce(u)+c:Ot}function rf(s,o,u,c,h,p,_,v,C,I){const F=function(s,o,u,c,h,p){const _=nc(s,o,u,c);return nc(s,o+2,h,p)||_}(s,li(),u,h,_,C);return ki(4),F?o+ce(u)+c+ce(h)+p+ce(_)+v+ce(C)+I:Ot}function wg(s,o,u,c,h,p,_,v){const C=Ae(),I=zt(),N=s+20,F=I.firstCreatePass?function(s,o,u,c,h,p,_,v,C){const I=o.consts,N=Go(o,s,4,_||null,Yn(I,v));hd(o,u,N,Yn(I,C)),Ua(o,N);const F=N.tViews=qo(2,N,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,I);return null!==o.queries&&(o.queries.template(o,N),F.queries=o.queries.embeddedTView(N)),N}(N,I,C,o,u,c,h,p,_):I.data[N];ai(F,!1);const B=C[11].createComment("");B_(I,C,B,F),Wr(B,C),K_(C,C[N]=DE(B,C,B,F)),Cu(F)&&Q0(I,C,F),null!=_&&Kh(C,F,v)}function Cg(s){return Fa(St.lFrame.contextLView,20+s)}function cf(s,o=at.Default){const u=Ae();return null===u?kr(s,o):xo(ir(),u,G(s),o)}function Ob(s,o,u){const c=Ae();return Fi(c,Ms(),o)&&to(zt(),qn(),c,s,o,c[11],u,!1),Ob}function Fb(s,o,u,c,h){const _=h?"class":"style";NE(s,u,o.inputs[_],_,c)}function Lb(s,o,u,c){const h=Ae(),p=zt(),_=20+s,v=h[11],C=h[_]=L0(v,o,St.lFrame.currentNamespace),I=p.firstCreatePass?function(s,o,u,c,h,p,_){const v=o.consts,I=Go(o,s,2,h,Yn(v,p));return hd(o,u,I,Yn(v,_)),null!==I.attrs&&Qh(I,I.attrs,!1),null!==I.mergedAttrs&&Qh(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(_,p,h,0,o,u,c):p.data[_];ai(I,!0);const N=I.mergedAttrs;null!==N&&Eh(v,C,N);const F=I.classes;null!==F&&j0(v,C,F);const B=I.styles;null!==B&&tE(v,C,B),64!=(64&I.flags)&&B_(p,h,C,I),0===St.lFrame.elementDepthCount&&Wr(C,h),St.lFrame.elementDepthCount++,Cu(I)&&(Q0(p,h,I),Qi(p,I,h)),null!==c&&Kh(h,I)}function Vb(){let s=ir();la()?Ll():(s=s.parent,ai(s,!1));const o=s;St.lFrame.elementDepthCount--;const u=zt();u.firstCreatePass&&(Ua(u,s),wu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Fb(u,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Fb(u,o,Ae(),o.stylesWithoutHost,!1)}function Sg(s,o,u,c){Lb(s,o,u,c),Vb()}function df(s,o,u){const c=Ae(),h=zt(),p=s+20,_=h.firstCreatePass?function(s,o,u,c,h){const p=o.consts,_=Yn(p,c),v=Go(o,s,8,"ng-container",_);return null!==_&&Qh(v,_,!0),hd(o,u,v,Yn(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,c,o,u):h.data[p];ai(_,!0);const v=c[p]=c[11].createComment("");B_(h,c,v,_),Wr(v,c),Cu(_)&&(Q0(h,c,_),Qi(h,_,c)),null!=u&&Kh(c,_)}function Bb(){let s=ir();const o=zt();la()?Ll():(s=s.parent,ai(s,!1)),o.firstCreatePass&&(Ua(o,s),wu(s)&&o.queries.elementEnd(s))}function $b(){return Ae()}function gy(s){return!!s&&"function"==typeof s.then}function gT(s){return!!s&&"function"==typeof s.subscribe}const Hb=gT;function my(s,o,u,c){const h=Ae(),p=zt(),_=ir();return function(s,o,u,c,h,p,_,v){const C=Cu(c),N=s.firstCreatePass&&hb(s),F=o[8],B=db(o);let K=!0;if(3&c.type||v){const ae=Dn(c,o),$e=v?v(ae):ae,Te=B.length,yt=v?It=>v(Gn(It[c.index])):c.index;if(Tn(u)){let It=null;if(!v&&C&&(It=function(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===u&&h[p+1]===c){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,c.index)),null!==It)(It.__ngLastListenerFn__||It).__ngNextListenerFn__=p,It.__ngLastListenerFn__=p,K=!1;else{p=jb(c,o,F,p,!1);const on=u.listen($e,h,p);B.push(p,on),N&&N.push(h,yt,Te,Te+1)}}else p=jb(c,o,F,p,!0),$e.addEventListener(h,p,_),B.push(p),N&&N.push(h,yt,Te,_)}else p=jb(c,o,F,p,!1);const te=c.outputs;let he;if(K&&null!==te&&(he=te[h])){const ae=he.length;if(ae)for(let $e=0;$e<ae;$e+=2){const mi=o[he[$e]][he[$e+1]].subscribe(p),Rn=B.length;B.push(p,mi),N&&N.push(h,c.index,Rn,-(Rn+1))}}}(p,h,h[11],_,s,o,!!u,c),my}function _T(s,o,u,c){try{return!1!==u(c)}catch(h){return SE(s,h),!1}}function jb(s,o,u,c,h){return function p(_){if(_===Function)return c;const v=2&s.flags?xr(s.index,o):o;0==(32&o[2])&&lb(v);let C=_T(o,0,c,_),I=p.__ngNextListenerFn__;for(;I;)C=_T(o,0,I,_)&&C,I=I.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Gb(s=1){return function(s){return(St.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,St.lFrame.contextLView))[8]}(s)}function yy(s,o){let u=null;const c=function(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?H_(s,p,!0):aN(c,p))return h}else u=h}return u}function vy(s){const o=Ae()[16][6];if(!o.projection){const c=o.projection=Oo(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const _=s?yy(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:c[_]=p,h[_]=p),p=p.next}}}function qb(s,o=0,u){const c=Ae(),h=zt(),p=Go(h,20+s,16,null,u||null);null===p.projection&&(p.projection=o),Ll(),64!=(64&p.flags)&&function(s,o,u){eN(o[11],0,o,u,zC(s,u,o),sg(u.parent||o[6],u,o))}(h,c,p)}function Wb(s,o,u){return Ng(s,"",o,"",u),Wb}function Ng(s,o,u,c,h){const p=Ae(),_=Da(p,o,u,c);return _!==Ot&&to(zt(),qn(),p,s,_,p[11],h,!1),Ng}function Zb(s,o,u,c,h){const p=s[u+1],_=null===o;let v=c?va(p):Kl(p),C=!1;for(;0!==v&&(!1===C||_);){const N=s[v+1];rx(s[v],o)&&(C=!0,s[v+1]=c?cE(N):G0(N)),v=c?va(N):Kl(N)}C&&(s[u+1]=c?G0(p):cE(p))}function rx(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&lr(s,o)>=0}const Zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xg(s){return s.substring(Zr.key,Zr.keyEnd)}function AT(s,o){const u=Zr.textEnd;return u===o?-1:(o=Zr.keyEnd=function(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,Zr.key=o,u),hf(s,o,u))}function hf(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function ff(s,o,u){return ao(s,o,u,!1),ff}function pf(s,o){return ao(s,o,null,!0),pf}function xT(s){Sa(Ei,Aa,s,!0)}function Aa(s,o){for(let u=function(s){return function(s){Zr.key=0,Zr.keyEnd=0,Zr.value=0,Zr.valueEnd=0,Zr.textEnd=s.length}(s),AT(s,hf(s,0,Zr.textEnd))}(o);u>=0;u=AT(o,u))Ei(s,xg(o),!0)}function ao(s,o,u,c){const h=Ae(),p=zt(),_=ki(2);p.firstUpdatePass&&gf(p,s,_,c),o!==Ot&&Fi(h,_,o)&&Cd(p,p.data[Gr()],h,h[11],s,h[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=J(ma(s)))),s}(o,u),c,_)}function Sa(s,o,u,c){const h=zt(),p=ki(2);h.firstUpdatePass&&gf(h,null,p,c);const _=Ae();if(u!==Ot&&Fi(_,p,u)){const v=h.data[Gr()];if(Pg(v,c)&&!su(h,p)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(u=Q(C,u||"")),Fb(h,v,_,u,c)}else!function(s,o,u,c,h,p,_,v){h===Ot&&(h=nt);let C=0,I=0,N=0<h.length?h[0]:null,F=0<p.length?p[0]:null;for(;null!==N||null!==F;){const B=C<h.length?h[C+1]:void 0,K=I<p.length?p[I+1]:void 0;let he,te=null;N===F?(C+=2,I+=2,B!==K&&(te=F,he=K)):null===F||null!==N&&N<F?(C+=2,te=N):(I+=2,te=F,he=K),null!==te&&Cd(s,o,u,c,te,he,_,v),N=C<h.length?h[C]:null,F=I<p.length?p[I]:null}}(h,v,_,_[11],_[p+1],_[p+1]=function(s,o,u){if(null==u||""===u)return nt;const c=[],h=ma(u);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,p)}}function su(s,o){return o>=s.expandoStartIndex}function gf(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[Gr()],_=su(s,u);Pg(p,c)&&null===o&&!_&&(o=!1),o=function(s,o,u,c){const h=function(s){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Mg(u=Jb(null,s,o,u,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(u=Jb(h,s,o,u,c),null===p){let C=function(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Kl(c))return s[va(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Jb(null,s,o,C[1],c),C=Mg(C,o.attrs,c),function(s,o,u,c){s[va(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Mg(c,s[p].hostAttrs,u);return Mg(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function(s,o,u,c,h,p){let _=p?o.classBindings:o.styleBindings,v=va(_),C=Kl(_);s[c]=u;let N,I=!1;if(Array.isArray(u)){const F=u;N=F[1],(null===N||lr(F,N)>0)&&(I=!0)}else N=u;if(h)if(0!==C){const B=va(s[v+1]);s[c+1]=zh(B,v),0!==B&&(s[B+1]=uE(s[B+1],c)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],c)}else s[c+1]=zh(v,0),0!==v&&(s[v+1]=uE(s[v+1],c)),v=c;else s[c+1]=zh(C,0),0===v?v=c:s[C+1]=uE(s[C+1],c),C=c;I&&(s[c+1]=G0(s[c+1])),Zb(s,N,c,!0),Zb(s,N,c,!1),function(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&lr(p,o)>=0&&(u[c+1]=cE(u[c+1]))}(o,N,s,c,p),_=zh(v,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,u,_,c)}}function Jb(s,o,u,c,h){let p=null;const _=u.directiveEnd;let v=u.directiveStylingLast;for(-1===v?v=u.directiveStart:v++;v<_&&(p=o[v],c=Mg(c,p.hostAttrs,h),p!==s);)v++;return null!==s&&(u.directiveStylingLast=v),c}function Mg(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ei(s,_,!!u||o[++p]))}return void 0===s?null:s}function Cd(s,o,u,c,h,p,_,v){if(!(3&o.type))return;const C=s.data,I=C[v+1];kg(function(s){return 1==(1&s)}(I)?Qb(C,o,u,h,Kl(I),_):void 0)||(kg(p)||function(s){return 2==(2&s)}(I)&&(p=Qb(C,null,u,h,v,_)),function(s,o,u,c,h){const p=Tn(s);if(o)h?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let _=-1===c.indexOf("-")?void 0:al.DashCase;if(null==h)p?s.removeStyle(u,c,_):u.style.removeProperty(c);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),_|=al.Important),p?s.setStyle(u,c,h,_):u.style.setProperty(c,h,v?"important":"")}}}(c,_,Pl(Gr(),u),h,p))}function Qb(s,o,u,c,h,p){const _=null===o;let v;for(;h>0;){const C=s[h],I=Array.isArray(C),N=I?C[1]:C,F=null===N;let B=u[h+1];B===Ot&&(B=F?nt:void 0);let K=F?fs(B,c):N===c?B:void 0;if(I&&!kg(K)&&(K=fs(C,c)),kg(K)&&(v=K,_))return v;const te=s[h+1];h=_?va(te):Kl(te)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=fs(C,c))}return v}function kg(s){return void 0!==s}function Pg(s,o){return 0!=(s.flags&(o?16:32))}function Og(s,o=""){const u=Ae(),c=zt(),h=s+20,p=c.firstCreatePass?Go(c,h,1,o,null):c.data[h],_=u[h]=F_(u[11],o);B_(c,u,_,p),ai(p,!1)}function Fg(s){return mf("",s,""),Fg}function mf(s,o,u){const c=Ae(),h=Da(c,s,o,u);return h!==Ot&&Fs(c,Gr(),h),mf}function Lg(s,o,u,c,h){const p=Ae(),_=function(s,o,u,c,h,p){const v=nc(s,li(),u,h);return ki(2),v?o+ce(u)+c+ce(h)+p:Ot}(p,s,o,u,c,h);return _!==Ot&&Fs(p,Gr(),_),Lg}function VT(s,o,u,c,h,p,_,v,C){Sa(Ei,Aa,rf(Ae(),s,o,u,c,h,p,_,v,C),!0)}function Td(s,o,u){const c=Ae();return Fi(c,Ms(),o)&&to(zt(),qn(),c,s,o,c[11],u,!0),Td}const ac=void 0;var Ug=["en",[["a","p"],["AM","PM"],ac],[["AM","PM"],ac,ac],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ac,"{1} 'at' {0}",ac],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ml={};function Ls(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=$g(o);if(u)return u;const c=o.split("-")[0];if(u=$g(c),u)return u;if("en"===c)return Ug;throw new Error(`Missing locale data for the locale "${s}".`)}function ZT(s){return Ls(s)[ft.PluralCase]}function $g(s){return s in ml||(ml[s]=wt.ng&&wt.ng.common&&wt.ng.common.locales&&wt.ng.common.locales[s]),ml[s]}var ft=(()=>((ft=ft||{})[ft.LocaleId=0]="LocaleId",ft[ft.DayPeriodsFormat=1]="DayPeriodsFormat",ft[ft.DayPeriodsStandalone=2]="DayPeriodsStandalone",ft[ft.DaysFormat=3]="DaysFormat",ft[ft.DaysStandalone=4]="DaysStandalone",ft[ft.MonthsFormat=5]="MonthsFormat",ft[ft.MonthsStandalone=6]="MonthsStandalone",ft[ft.Eras=7]="Eras",ft[ft.FirstDayOfWeek=8]="FirstDayOfWeek",ft[ft.WeekendRange=9]="WeekendRange",ft[ft.DateFormat=10]="DateFormat",ft[ft.TimeFormat=11]="TimeFormat",ft[ft.DateTimeFormat=12]="DateTimeFormat",ft[ft.NumberSymbols=13]="NumberSymbols",ft[ft.NumberFormats=14]="NumberFormats",ft[ft.CurrencyCode=15]="CurrencyCode",ft[ft.CurrencySymbol=16]="CurrencySymbol",ft[ft.CurrencyName=17]="CurrencyName",ft[ft.Currencies=18]="Currencies",ft[ft.Directionality=19]="Directionality",ft[ft.PluralCase=20]="PluralCase",ft[ft.ExtraData=21]="ExtraData",ft))();const _x=["zero","one","two","few","many"],Ay="en-US",Sy={marker:"element"},Hg={marker:"ICU"};var hr=(()=>((hr=hr||{})[hr.SHIFT=2]="SHIFT",hr[hr.APPEND_EAGERLY=1]="APPEND_EAGERLY",hr[hr.COMMENT=2]="COMMENT",hr))();let ow=Ay;function aw(s){(function(s,o){null==s&&_t(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(ow=s.toLowerCase().replace(/_/g,"-"))}function jg(s,o,u){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?L_(s,0,u):Gn(u[h])}function JT(s,o,u,c,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let _=c,v=null;if(3&o.type||(v=_,_=h),null!==_&&0==(2&o.flags))for(let C=1;C<p.length;C++)ad(s,_,u[p[C]],v,!1)}}function Ny(s,o){if(s.push(o),s.length>1)for(let u=s.length-2;u>=0;u--){const c=s[u];QT(c)||bx(c,o)&&null===wx(c)&&XT(c,o.index)}}function QT(s){return!(64&s.type)}function bx(s,o){return QT(o)||s.index>o.index}function wx(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function XT(s,o){const u=s.insertBeforeIndex;Array.isArray(u)?u[0]=o:(JC(jg,JT),s.insertBeforeIndex=o)}function Gg(s,o){const u=s.data[o];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function uw(s,o,u){const c=W_(s,u,64,null,null);return Ny(o,c),c}function qg(s,o){const u=o[s.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function eD(s){return s>>>17}function Dd(s){return(131070&s)>>>1}let Id=0,lc=0;function cw(s,o,u,c){const h=u[11];let _,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const I=o[++v];null===u[I]&&(u[I]=F_(h,C))}else if("number"==typeof C)switch(1&C){case 0:const I=eD(C);let N,F;if(null===p&&(p=I,_=Ti(h,c)),I===p?(N=c,F=_):(N=null,F=Gn(u[I])),null!==F){const he=Dd(C);ad(h,F,u[he],N,!1);const $e=Gg(s,he);if(null!==$e&&"object"==typeof $e){const Te=qg($e,u);null!==Te&&cw(s,$e.create[Te],u,u[$e.anchorIdx])}}break;case 1:const K=o[++v],te=o[++v];Y_(h,Pl(C>>>1,u),null,null,K,te,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case Hg:const I=o[++v],N=o[++v];null===u[N]&&Wr(u[N]=qS(h,I),u);break;case Sy:const F=o[++v],B=o[++v];null===u[B]&&Wr(u[B]=L0(h,F,null),u)}}}function dw(s,o,u,c,h){for(let p=0;p<u.length;p++){const _=u[p],v=u[++p];if(_&h){let C="";for(let I=p+1;I<=p+v;I++){const N=u[I];if("string"==typeof N)C+=N;else if("number"==typeof N)if(N<0)C+=ce(o[c-N]);else{const F=N>>>2;switch(3&N){case 1:const B=u[++I],K=u[++I],te=s.data[F];"string"==typeof te?Y_(o[11],o[F],null,te,B,C,K):to(s,te,o,B,C,o[11],K,!1);break;case 0:const he=o[F];null!==he&&F0(o[11],he,C);break;case 2:xy(s,Gg(s,F),o,C);break;case 3:hw(s,Gg(s,F),c,o)}}}}else{const C=u[p+1];if(C>0&&3==(3&C)){const N=Gg(s,C>>>2);o[N.currentCaseLViewIndex]<0&&hw(s,N,c,o)}}p+=v}}function hw(s,o,u,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let p=Id;h<0&&(h=c[o.currentCaseLViewIndex]=~h,p=-1),dw(s,c,o.update[h],u,p)}}function xy(s,o,u,c){const h=function(s,o){let u=s.cases.indexOf(o);if(-1===u)switch(s.type){case 1:{const c=function(s,o){const u=ZT(o)(parseInt(s,10)),c=_x[u];return void 0!==c?c:"other"}(o,ow);u=s.cases.indexOf(c),-1===u&&"other"!==c&&(u=s.cases.indexOf("other"));break}case 0:u=s.cases.indexOf("other")}return-1===u?null:u}(o,c);if(qg(o,u)!==h&&(My(s,o,u),u[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const _=u[o.anchorIdx];_&&cw(s,o.create[h],u,_)}}function My(s,o,u){let c=qg(o,u);if(null!==c){const h=o.remove[c];for(let p=0;p<h.length;p++){const _=h[p];if(_>0){const v=Pl(_,u);null!==v&&XC(u[11],v)}else My(s,Gg(s,~_),u)}}}function Ax(){const s=[];let u,c,o=-1;function p(v,C){o=0;const I=qg(v,C);c=null!==I?v.remove[I]:nt}function _(){if(o<c.length){const v=c[o++];return v>0?u[v]:(s.push(o,c),p(u[1].data[~v],u),_())}return 0===s.length?null:(c=s.pop(),o=s.pop(),_())}return function(v,C){for(u=C;s.length;)s.pop();return p(v.value,C),_}}const Wg=/\ufffd(\d+):?\d*\ufffd/gi,Vs=/\ufffd(\d+)\ufffd/,Zg=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ry=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,zo=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Ad=/\uE500/g;function uc(s,o,u,c,h,p,_){const v=dd(s,c,1,null);let C=v<<hr.SHIFT,I=Io();o===I&&(I=null),null===I&&(C|=hr.APPEND_EAGERLY),_&&(C|=hr.COMMENT,function(s){void 0===k0&&(k0=s())}(Ax)),h.push(C,null===p?"":p);const N=W_(s,v,_?32:1,null===p?"":p,null);Ny(u,N);const F=N.index;return ai(N,!1),null!==I&&o!==I&&function(s,o){let u=s.insertBeforeIndex;null===u?(JC(jg,JT),u=s.insertBeforeIndex=[null,o]):(function(s,o,u){s!=o&&_t(u,s,o,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(o))}(I,F),N}function wF(s,o,u,c,h,p,_){const v=_.match(Wg),C=uc(s,o,u,p,c,v?null:_,!1);v&&bf(h,_,C.index,null,0,null)}function bf(s,o,u,c,h,p){const _=s.length,v=_+1;s.push(null,null);const C=_+2,I=o.split(Wg);let N=0;for(let F=0;F<I.length;F++){const B=I[F];if(1&F){const K=h+parseInt(B,10);s.push(-1-K),N|=sD(K)}else""!==B&&s.push(B)}return s.push(u<<2|(c?1:0)),c&&s.push(c,p),s[_]=N,s[v]=s.length-C,N}function sD(s){return 1<<Math.min(s,31)}function oD(s){let o,p,u="",c=0,h=!1;for(;null!==(o=Ry.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,h=!1):(u+=s.substring(c,o.index+o[0].length),p=o[1],h=!0);return u+=s.substr(c),u}function zg(s,o,u,c,h,p){let _=0;const v={type:h.type,currentCaseLViewIndex:dd(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,u){s.push(sD(o.mainBinding),2,-1-o.mainBinding,u<<2|2)})(u,h,p),function(s,o,u){const c=s.data[o];null===c?s.data[o]=u:c.value=u}(s,p,v);const C=h.values;for(let I=0;I<C.length;I++){const N=C[I],F=[];for(let B=0;B<N.length;B++){const K=N[B];if("string"!=typeof K){const te=F.push(K)-1;N[B]=`\x3c!--\ufffd${te}\ufffd--\x3e`}}_=mw(s,v,o,u,c,h.cases[I],N.join(""),F)|_}_&&function(s,o,u){s.push(o,1,u<<2|3)}(u,_,p)}function ky(s){const o=[],u=[];let c=1,h=0;const p=Sd(s=s.replace(Zg,function(_,v,C){return c="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let _=0;_<p.length;){let v=p[_++].trim();1===c&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=Sd(p[_++]);o.length>u.length&&u.push(C)}return{type:c,mainBinding:h,cases:o,values:u}}function Sd(s){if(!s)return[];let o=0;const u=[],c=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(u.pop(),0==u.length){const C=s.substring(o,v);Zg.test(C)?c.push(ky(C)):c.push(C),o=v+1}}else{if(0==u.length){const C=s.substring(o,v);c.push(C),o=v+1}u.push("{")}}const _=s.substring(o);return c.push(_),c}function mw(s,o,u,c,h,p,_,v){const C=[],I=[],N=[];o.cases.push(p),o.create.push(C),o.remove.push(I),o.update.push(N);const B=zl(kl()).getInertBodyElement(_),K=un(B)||B;return K?_w(s,o,u,c,C,I,N,K,h,v,0):0}function _w(s,o,u,c,h,p,_,v,C,I,N){let F=0,B=v.firstChild;for(;B;){const K=dd(s,u,1,null);switch(B.nodeType){case Node.ELEMENT_NODE:const te=B,he=te.tagName.toLowerCase();if(Yp.hasOwnProperty(he)){lo(h,Sy,he,C,K),s.data[K]=he;const yt=te.attributes;for(let It=0;It<yt.length;It++){const on=yt.item(It),mi=on.name.toLowerCase();on.value.match(Wg)?E.hasOwnProperty(mi)&&bf(_,on.value,K,on.name,0,A_[mi]?$o:w[mi]?Zp:null):cD(h,K,on)}F=_w(s,o,u,c,h,p,_,B,K,I,N+1)|F,yw(p,K,N)}break;case Node.TEXT_NODE:const ae=B.textContent||"",$e=ae.match(Wg);lo(h,null,$e?"":ae,C,K),yw(p,K,N),$e&&(F=bf(_,ae,K,null,0,null)|F);break;case Node.COMMENT_NODE:const Te=Vs.exec(B.textContent||"");if(Te){const It=I[parseInt(Te[1],10)];lo(h,Hg,"",C,K),zg(s,u,c,C,It,K),aD(p,K,N)}}B=B.nextSibling}return F}function yw(s,o,u){0===u&&s.push(o)}function aD(s,o,u){0===u&&(s.push(~o),s.push(o))}function lo(s,o,u,c,h){null!==o&&s.push(o),s.push(u,h,function(s,o,u){return 0|o<<17|u<<1}(0,c,h))}function cD(s,o,u){s.push(o<<1|1,u.name,u.value)}function fD(s,o,u=-1){const c=zt(),h=Ae(),p=20+s,_=Yn(c.consts,o),v=Io();c.firstCreatePass&&function(s,o,u,c,h,p){const _=Io(),v=[],C=[],I=[[]],N=function(s){return s.replace(Ad," ")}(h=function(s,o){if(function(s){return-1===s}(o))return oD(s);{const u=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return oD(s.substring(u,c))}}(h,p)).split(zo);for(let F=0;F<N.length;F++){let B=N[F];if(0==(1&F)){const K=Sd(B);for(let te=0;te<K.length;te++){let he=K[te];if(0==(1&te)){const ae=he;""!==ae&&wF(s,_,I[0],v,C,u,ae)}else{const ae=he;if("object"!=typeof ae)throw new Error(`Unable to parse ICU expression in "${h}" message.`);zg(s,u,C,o,ae,uc(s,_,I[0],u,v,"",!0).index)}}}else{const K=47===B.charCodeAt(0),he=(B.charCodeAt(K?1:0),20+Number.parseInt(B.substring(K?2:1)));if(K)I.shift(),ai(Io(),!1);else{const ae=uw(s,I[0],he);I.unshift([]),ai(ae,!0)}}}s.data[c]={create:v,update:C}}(c,null===v?0:v.index,h,p,_,u);const C=c.data[p],N=YC(c,v===h[6]?null:v,h);(function(s,o,u,c){const h=s[11];for(let p=0;p<o.length;p++){const _=o[p++],v=o[p],C=(_&hr.COMMENT)===hr.COMMENT,I=(_&hr.APPEND_EAGERLY)===hr.APPEND_EAGERLY,N=_>>>hr.SHIFT;let F=s[N];null===F&&(F=s[N]=C?h.createComment(v):F_(h,v)),I&&null!==u&&ad(h,u,F,c,!1)}})(h,C.create,N,v&&8&v.type?h[v.index]:null),yh(!0)}function gD(s,o,u){fD(s,o,u),yh(!1)}function vw(s){return function(s){s&&(Id|=1<<Math.min(lc,31)),lc++}(Fi(Ae(),Ms(),s)),vw}function mD(s){!function(s,o,u){if(lc>0){const c=s.data[u];dw(s,o,Array.isArray(c)?c:c.update,li()-lc-1,Id)}Id=0,lc=0}(zt(),Ae(),s+20)}function bw(s,o,u,c,h){if(s=G(s),Array.isArray(s))for(let p=0;p<s.length;p++)bw(s[p],o,u,c,h);else{const p=zt(),_=Ae();let v=pd(s)?s:G(s.provide),C=gb(s);const I=ir(),N=1048575&I.providerIndexes,F=I.directiveStart,B=I.providerIndexes>>20;if(pd(s)||!s.multi){const K=new Ws(C,h,cf),te=Cw(v,o,h?N:N+B,F);-1===te?(ht(qa(I,_),p,v),ww(p,s,o.length),o.push(v),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),u.push(K),_.push(K)):(u[te]=K,_[te]=K)}else{const K=Cw(v,o,N+B,F),te=Cw(v,o,N,N+B),he=K>=0&&u[K],ae=te>=0&&u[te];if(h&&!ae||!h&&!he){ht(qa(I,_),p,v);const $e=function(s,o,u,c,h){const p=new Ws(s,u,cf);return p.multi=[],p.index=o,p.componentProviders=0,_D(p,h,c&&!u),p}(h?Hx:xa,u.length,h,c,C);!h&&ae&&(u[te].providerFactory=$e),ww(p,s,o.length,0),o.push(v),I.directiveStart++,I.directiveEnd++,h&&(I.providerIndexes+=1048576),u.push($e),_.push($e)}else ww(p,s,K>-1?K:te,_D(u[h?te:K],C,!h&&c));!h&&c&&ae&&u[te].componentProviders++}}}function ww(s,o,u,c){const h=pd(o);if(h||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(u);-1===C?v.push(u,[c,_]):v[C+1].push(c,_)}else v.push(u,_)}}}function _D(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Cw(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function xa(s,o,u,c){return Yg(this.multi,[])}function Hx(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=$l(u,u[1],this.providerFactory.index,c);p=v.slice(0,_),Yg(h,p);for(let C=_;C<v.length;C++)p.push(v[C])}else p=[],Yg(h,p);return p}function Yg(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function vD(s,o=[]){return u=>{u.providersResolver=(c,h)=>function(s,o,u){const c=zt();if(c.firstCreatePass){const h=rr(s);bw(u,c.data,c.blueprint,h,!0),bw(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class wD{}const ED="ngComponent";class EF{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${J(s)}. Did you add it to @NgModule.entryComponents?`);return o[ED]=s,o}(o)}}let wf=(()=>{class s{}return s.NULL=new EF,s})();function Py(...s){}function Cf(s,o){return new _l(Dn(s,o))}const qx=function(){return Cf(ir(),Ae())};let _l=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=qx,s})();function Wx(s){return s instanceof _l?s.nativeElement:s}class Oy{}let Zx=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>Kx(),s})();const Kx=function(){const s=Ae(),u=xr(ir().index,s);return function(s){return s[11]}(En(u)?u:s)};let Tw=(()=>{class s{}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:()=>null}),s})();class au{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const di=new au("12.2.16");class Bs{constructor(){}supports(o){return Xn(o)}create(o){return new Xx(o)}}const Kg=(s,o)=>o;class Xx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Kg}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const _=!c||u&&u.currentIndex<TD(c,h,p)?u:c,v=TD(_,h,p),C=_.currentIndex;if(_===c)h--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)h++;else{p||(p=[]);const I=v-h,N=C-h;if(I!=N){for(let B=0;B<I;B++){const K=B<p.length?p[B]:p[B]=0,te=K+B;N<=te&&te<I&&(p[B]=K+1)}p[_.previousIndex]=N-I}}v!==C&&o(_,v,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Xn(o))throw new Error(`Error trying to diff '${J(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],_=this._trackByFn(v,p),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,p,_,v)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,_,v),c=!0),u=u._next}else h=0,function(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[tf()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,v=>{_=this._trackByFn(h,v),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,v,_,h)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,_,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new eM(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ef),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ef),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class eM{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tM{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Ef{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new tM,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TD(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class DD{constructor(){}supports(o){return o instanceof Map||vg(o)}create(){return new nM}}class nM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||vg(o)))throw new Error(`Error trying to diff '${J(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const c=new rM(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class rM{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Dw(){return new Fy([new Bs])}let Fy=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Dw()),deps:[[s,new Kn,new Vo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:Dw}),s})();function Ly(){return new Jg([new DD])}let Jg=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Ly()),deps:[[s,new Kn,new Vo]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=Tt({token:s,providedIn:"root",factory:Ly}),s})();function Nd(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Gn(p)),Ss(p))for(let v=10;v<p.length;v++){const C=p[v],I=C[1].firstChild;null!==I&&Nd(C[1],C,I,c)}const _=u.type;if(8&_)Nd(s,o,u.child,c);else if(32&_){const v=P0(u,o);let C;for(;C=v();)c.push(C)}else if(16&_){const v=QC(o,u);if(Array.isArray(v))c.push(...v);else{const C=rg(o[16]);Nd(C[1],C,v,c,!0)}}u=h?u.projectionNext:u.next}return c}class Qg{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Nd(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ss(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(ig(o,c),Ys(u,c))}this._attachedToViewContainer=!1}B0(this._lView[1],this._lView)}onDestroy(o){Z_(this._lView[1],this._lView,null,o)}markForCheck(){lb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Q_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,u){Ru(!0);try{Q_(s,o,u)}finally{Ru(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,Zh(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class AF extends Qg{constructor(o){super(o),this._view=o}detectChanges(){ub(this._view)}checkNoChanges(){!function(s){Ru(!0);try{ub(s)}finally{Ru(!1)}}(this._view)}get context(){return null}}const SF=function(s){return function(s,o,u){if(xl(s)&&!u){const c=xr(s.index,o);return new Qg(c,c)}return 47&s.type?new Qg(o[16],o):null}(ir(),Ae(),16==(16&s))};let NF=(()=>{class s{}return s.__NG_ELEMENT_ID__=SF,s})();const xF=[new DD],RF=new Fy([new Bs]),kF=new Jg(xF),OF=function(){return Br(ir(),Ae())};let Vy=(()=>{class s{}return s.__NG_ELEMENT_ID__=OF,s})();const SD=Vy,aM=class extends SD{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Xl(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),Pr(u,c,o),new Qg(c)}};function Br(s,o){return 4&s.type?new aM(o,s,Cf(s,o)):null}class Li{}class Xg{}const uM=function(){return Xi(ir(),Ae())};let By=(()=>{class s{}return s.__NG_ELEMENT_ID__=uM,s})();const cM=By,xD=class extends cM{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Cf(this._hostTNode,this._hostLView)}get injector(){return new fa(this._hostTNode,this._hostLView)}get parentInjector(){const o=vn(this._hostTNode,this._hostLView);if(Wc(o)){const u=Ki(o,this._hostLView),c=ha(o);return new fa(u[1].data[c+8],u)}return new fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=MD(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,p){const _=c||this.parentInjector;if(!p&&null==o.ngModule&&_){const C=_.get(Li,null);C&&(p=C)}const v=o.create(_,h,void 0,p);return this.insert(v.hostView,u),v}insert(o,u){const c=o._lView,h=c[1];if(Ss(c[3])){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const F=c[3],B=new xD(F,F[6],F[3]);B.detach(B.indexOf(o))}}const p=this._adjustIndex(u),_=this._lContainer;!function(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],zs(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,c,_,p);const v=U_(p,_),C=c[11],I=Ti(C,_[7]);return null!==I&&function(s,o,u,c,h,p){c[0]=h,c[6]=o,Zh(s,c,u,1,h,p)}(h,_[6],C,c,I,v),o.attachToViewContainerRef(),zs(Aw(_),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=MD(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=ig(this._lContainer,u);c&&(Ys(Aw(this._lContainer),u),B0(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=ig(this._lContainer,u);return c&&null!=Ys(Aw(this._lContainer),u)?new Qg(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function MD(s){return s[8]}function Aw(s){return s[8]||(s[8]=[])}function Xi(s,o){let u;const c=o[s.index];if(Ss(c))u=c;else{let h;if(8&s.type)h=Gn(c);else{const p=o[11];h=p.createComment("");const _=Dn(s,o);ad(p,Ti(p,_),h,function(s,o){return Tn(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=u=DE(c,o,h,s),K_(o,u)}return new xD(u,s,o)}const Nf={};class JD extends wf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Qe(o);return new XD(u,this.ngModule)}}function Kw(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const MM=new Wn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Gh});class XD extends wD{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=o.selectors.map(uN).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Kw(this.componentDef.inputs)}get outputs(){return Kw(this.componentDef.outputs)}create(o,u,c,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(u,c,h)=>{const p=s.get(u,Nf,h);return p!==Nf||c===Nf?p:o.get(u,c,h)}}}(o,h.injector):o,_=p.get(Oy,To),v=p.get(Tw,null),C=_.createRenderer(null,this.componentDef),I=this.componentDef.selectors[0][0]||"div",N=c?function(s,o,u){if(Tn(s))return s.selectRootElement(o,u===Nt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):L0(_.createRenderer(null,this.componentDef),I,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(I)),F=this.componentDef.onPush?576:528,B=function(s,o){return{components:[],scheduler:s||Gh,clean:NN,playerHandler:o||null,flags:0}}(),K=qo(0,null,null,1,0,null,null,null,null,null),te=Xl(null,K,B,F,null,null,_,C,v,p);let he,ae;Ba(te);try{const $e=function(s,o,u,c,h,p){const _=u[1];u[20]=s;const C=Go(_,20,2,"#host",null),I=C.mergedAttrs=o.hostAttrs;null!==I&&(Qh(C,I,!0),null!==s&&(Eh(h,s,I),null!==C.classes&&j0(h,s,C.classes),null!==C.styles&&tE(h,s,C.styles)));const N=c.createRenderer(s,o),F=Xl(u,mE(o),null,o.onPush?64:16,u[20],C,c,N,p||null,null);return _.firstCreatePass&&(ht(qa(C,u),_,o.type),eb(_,C),tb(C,u.length,1)),K_(u,F),u[20]=F}(N,this.componentDef,te,_,C);if(N)if(c)Eh(C,N,["ng-version",di.full]);else{const{attrs:Te,classes:yt}=function(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!ya(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Te&&Eh(C,N,Te),yt&&yt.length>0&&j0(C,N,yt.join(" "))}if(ae=Yi(K,20),void 0!==u){const Te=ae.projection=[];for(let yt=0;yt<this.ngContentSelectors.length;yt++){const It=u[yt];Te.push(null!=It?Array.from(It):null)}}he=function(s,o,u,c,h){const p=u[1],_=function(s,o,u){const c=ir();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),TE(s,c,o,dd(s,o,1,null),u));const h=$l(o,s,c.directiveStart,c);Wr(h,o);const p=Dn(c,o);return p&&Wr(p,o),h}(p,u,o);if(c.components.push(_),s[8]=_,h&&h.forEach(C=>C(_,o)),o.contentQueries){const C=ir();o.contentQueries(1,_,C.directiveStart)}const v=ir();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(No(v.index),bE(u[1],v,0,v.directiveStart,v.directiveEnd,o),X0(o,_)),_}($e,this.componentDef,te,B,[YE]),Pr(K,te,null)}finally{Ul()}return new kM(this.componentType,he,Cf(ae,te),te,ae)}}class kM extends class{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new AF(h),this.componentType=o}get injector(){return new fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const xf=new Map;class dt extends Li{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new JD(this);const c=mn(o),h=o[Mt]||null;h&&aw(h),this._bootstrapComponents=ol(c.bootstrap),this._r3Injector=ME(o,u,[{provide:Li,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],J(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Rt.THROW_IF_NOT_FOUND,c=at.Default){return o===Rt||o===Li||o===dl?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class am extends Xg{constructor(o){super(),this.moduleType=o,null!==mn(o)&&function(s){const o=new Set;!function u(c){const h=mn(c,!0),p=h.id;null!==p&&(function(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${J(o)} vs ${J(o.name)}`)}(p,xf.get(p),c),xf.set(p,c));const _=ol(h.imports);for(const v of _)o.has(v)||(o.add(v),u(v))}(s)}(o)}create(o){return new dt(this.moduleType,o)}}function lm(s,o,u,c){return Ii(Ae(),Mr(),s,o,u,c)}function ev(s,o,u,c,h){return lu(Ae(),Mr(),s,o,u,c,h)}function Mf(s,o,u,c,h,p){return function(s,o,u,c,h,p,_,v){const C=o+u;return function(s,o,u,c,h){const p=nc(s,o,u,c);return Fi(s,o+2,h)||p}(s,C,h,p,_)?ys(s,C+3,v?c.call(v,h,p,_):c(h,p,_)):dc(s,C+3)}(Ae(),Mr(),s,o,u,c,h,p)}function dc(s,o){const u=s[o];return u===Ot?void 0:u}function Ii(s,o,u,c,h,p){const _=o+u;return Fi(s,_,h)?ys(s,_+1,p?c.call(p,h):c(h)):dc(s,_+1)}function lu(s,o,u,c,h,p,_){const v=o+u;return nc(s,v,h,p)?ys(s,v+2,_?c.call(_,h,p):c(h,p)):dc(s,v+2)}function Xw(s,o){const u=zt();let c;const h=s+20;u.firstCreatePass?(c=function(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}throw new De("302",`The pipe '${s}' could not be found!`)}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=as(c.type)),_=kn(cf);try{const v=Zc(!1),C=p();return Zc(v),function(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Ae(),h,C),C}finally{kn(_)}}function e1(s,o,u){const c=s+20,h=Ae(),p=Fa(h,c);return hi(h,Fd(h,c)?Ii(h,Mr(),o,p.transform,u,p):p.transform(u))}function tv(s,o,u,c){const h=s+20,p=Ae(),_=Fa(p,h);return hi(p,Fd(p,h)?lu(p,Mr(),o,_.transform,u,c,_):_.transform(u,c))}function Fd(s,o){return s[1].data[o].pure}function hi(s,o){return Ta.isWrapped(o)&&(o=Ta.unwrap(o),s[li()]=Ot),o}function rv(s){return o=>{setTimeout(s,void 0,o)}}const Jo=class extends R.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,p,_;let v=o,C=u||(()=>null),I=c;if(o&&"object"==typeof o){const F=o;v=null===(h=F.next)||void 0===h?void 0:h.bind(F),C=null===(p=F.error)||void 0===p?void 0:p.bind(F),I=null===(_=F.complete)||void 0===_?void 0:_.bind(F)}this.__isAsync&&(C=rv(C),v&&(v=rv(v)),I&&(I=rv(I)));const N=super.subscribe({next:v,error:C,complete:I});return o instanceof l.w&&o.add(N),N}};function oI(){return this._results[tf()]()}class um{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=tf(),c=um.prototype;c[u]||(c[u]=oI)}get changes(){return this._changes||(this._changes=new Jo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=qr(o);(this._changesDetected=!function(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class n1{constructor(o){this.queryList=o,this.matches=null}clone(){return new n1(this.queryList)}setDirty(){this.queryList.setDirty()}}class hc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const _=u.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new hc(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==hI(o,u).matches&&this.queries[u].setDirty()}}class r1{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class cm{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new cm(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class iv{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new iv(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,UM(u,p)),this.matchTNodeWithReadOption(o,u,Mo(u,o,p,!1,!1))}else c===Vy?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Mo(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===_l||h===By||h===Vy&&4&u.type)this.addMatch(u.index,-2);else{const p=Mo(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function UM(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function sv(s,o,u,c){return-1===u?function(s,o){return 11&s.type?Cf(s,o):4&s.type?Br(s,o):null}(o,s):-2===u?function(s,o,u){return u===_l?Cf(o,s):u===Vy?Br(o,s):u===By?Xi(o,s):void 0}(s,o,c):$l(s,s[1],u,o)}function ov(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,_=u.matches,v=[];for(let C=0;C<_.length;C+=2){const I=_[C];v.push(I<0?null:sv(o,p[I],_[C+1],u.metadata.read))}h.matches=v}return h.matches}function dm(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const _=ov(s,o,h,u);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)c.push(_[v/2]);else{const I=p[v+1],N=o[-C];for(let F=10;F<N.length;F++){const B=N[F];B[17]===B[3]&&dm(B[1],B,I,c)}if(null!==N[9]){const F=N[9];for(let B=0;B<F.length;B++){const K=F[B];dm(K[1],K,I,c)}}}}}return c}function uI(s){const o=Ae(),u=zt(),c=ku();La(c+1);const h=hI(u,c);if(s.dirty&&Fc(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?dm(u,o,c,[]):ov(u,o,h,c);s.reset(p,Wx),s.notifyOnChanges()}return!0}return!1}function cI(s,o,u){const c=zt();c.firstCreatePass&&(Ui(c,new r1(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),dI(c,Ae(),o)}function av(s,o,u,c){const h=zt();if(h.firstCreatePass){const p=ir();Ui(h,new r1(o,u,c),p.index),function(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}dI(h,Ae(),u)}function s1(){return s=Ae(),o=ku(),s[19].queries[o].queryList;var s,o}function dI(s,o,u){const c=new um(4==(4&u));Z_(s,o,c,c.destroy),null===o[19]&&(o[19]=new hc),o[19].queries.push(new n1(c))}function Ui(s,o,u){null===s.queries&&(s.queries=new cm),s.queries.track(new iv(o,u))}function hI(s,o){return s.queries.getByIndex(o)}function Rf(s,o){return Br(s,o)}const Lf=new Wn("Application Initializer");let bl=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Py,this.reject=Py,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(gy(p))u.push(p);else if(Hb(p)){const _=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(kr(Lf,8))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})();const fc=new Wn("AppId"),oR={provide:fc,useFactory:function(){return`${_m()}${_m()}${_m()}`},deps:[]};function _m(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Bd=new Wn("Platform Initializer"),bv=new Wn("Platform ID"),pc=new Wn("appBootstrapListener");let AI=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})();const wl=new Wn("LocaleId"),Cl=new Wn("DefaultCurrencyCode");class lR{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}const $d=function(s){return new am(s)},uR=$d,dR=function(s){return Promise.resolve($d(s))},NI=function(s){const o=$d(s),c=ol(mn(s).declarations).reduce((h,p)=>{const _=Qe(p);return _&&h.push(new XD(_)),h},[]);return new lR(o,c)},ym=NI,xI=function(s){return Promise.resolve(NI(s))};let Vf=(()=>{class s{constructor(){this.compileModuleSync=uR,this.compileModuleAsync=dR,this.compileModuleAndAllComponentsSync=ym,this.compileModuleAndAllComponentsAsync=xI}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})();const pR=(()=>Promise.resolve(0))();function Cv(s){"undefined"==typeof Zone?pR.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class $s{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jo(!1),this.onMicrotaskEmpty=new Jo(!1),this.onStable=new Jo(!1),this.onError=new Jo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=wt.requestAnimationFrame,o=wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Ev(s),s.isCheckStableRunning=!0,vm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Ev(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,_,v)=>{try{return Tv(s),u.invokeTask(h,p,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),kI(s)}},onInvoke:(u,c,h,p,_,v,C)=>{try{return Tv(s),u.invoke(h,p,_,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),kI(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Ev(s),vm(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$s.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if($s.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,MI,Py,Py);try{return p.runTask(_,u,c)}finally{p.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const MI={};function vm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Ev(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Tv(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function kI(s){s._nesting--,vm(s)}class mR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jo,this.onMicrotaskEmpty=new Jo,this.onStable=new Jo,this.onError=new Jo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let PI=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$s.assertNotInAngularZone(),Cv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cv(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(kr($s))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})(),bm=(()=>{class s{constructor(){this._applications=new Map,Cm.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Cm.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})();class wm{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function Dv(s){Cm=s}let Cm=new wm,N1=!0,Uf=!1;function jd(){return Uf=!0,N1}function _R(){if(Uf)throw new Error("Cannot enable prod mode after platform setup.");N1=!1}let Bn;const x1=new Wn("AllowMultipleToken");class cu{constructor(o,u){this.name=o,this.token=u}}function BI(s,o,u=[]){const c=`Platform: ${o}`,h=new Wn(c);return(p=[])=>{let _=R1();if(!_||_.injector.get(x1,!1))if(s)s(u.concat(p).concat({provide:h,useValue:!0}));else{const v=u.concat(p).concat({provide:h,useValue:!0},{provide:fg,useValue:"platform"});!function(s){if(Bn&&!Bn.destroyed&&!Bn.injector.get(x1,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Bn=s.get(Sv);const o=s.get(Bd,null);o&&o.forEach(u=>u())}(Rt.create({providers:v,name:c}))}return function(s){const o=R1();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function R1(){return Bn&&!Bn.destroyed?Bn:null}let Sv=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const v=function(s,o){let u;return u="noop"===s?new mR:("zone.js"===s?void 0:s)||new $s({enableLongStackTrace:jd(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:$s,useValue:v}];return v.run(()=>{const I=Rt.create({providers:C,parent:this.injector,name:u.moduleType.name}),N=u.create(I),F=N.injector.get(jh,null);if(!F)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const B=v.onError.subscribe({next:K=>{F.handleError(K)}});N.onDestroy(()=>{k1(this._modules,N),B.unsubscribe()})}),function(s,o,u){try{const c=u();return gy(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(F,v,()=>{const B=N.injector.get(bl);return B.runInitializers(),B.donePromise.then(()=>(aw(N.injector.get(wl,Ay)||Ay),this._moduleDoBootstrap(N),N))})})}bootstrapModule(u,c=[]){const h=xv({},c);return function(s,o,u){const c=new am(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(gc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${J(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(kr(Rt))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})();function xv(s,o){return Array.isArray(o)?o.reduce(xv,s):Object.assign(Object.assign({},s),o)}let gc=(()=>{class s{constructor(u,c,h,p,_){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new L.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new L.y(I=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{$s.assertNotInAngularZone(),Cv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{$s.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{N.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ie.T)(v,C.pipe((0,ue.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=u instanceof wD?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Li),v=h.create(Rt.NULL,[],c||h.selector,p),C=v.location.nativeElement,I=v.injector.get(PI,null),N=I&&v.injector.get(bm);return I&&N&&N.registerApplication(C,I),v.onDestroy(()=>{this.detachView(v.hostView),k1(this.components,v),N&&N.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;k1(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(pc,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(kr($s),kr(Rt),kr(jh),kr(wf),kr(bl))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})();function k1(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}class $I{}class qI{}const Gd={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let WI=(()=>{class s{constructor(u,c){this._compiler=u,this._config=c||Gd}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,h]=u.split("#");return void 0===h&&(h="default"),U(8255)(c).then(p=>p[h]).then(p=>F1(p,c,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(u){let[c,h]=u.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),U(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(_=>_[h+p]).then(_=>F1(_,c,h))}}return s.\u0275fac=function(u){return new(u||s)(kr(Vf),kr(qI,8))},s.\u0275prov=Tt({token:s,factory:s.\u0275fac}),s})();function F1(s,o,u){if(!s)throw new Error(`Cannot find '${u}' in '${o}'`);return s}const B1=function(s){return null},Ai=BI(null,"core",[{provide:bv,useValue:"unknown"},{provide:Sv,deps:[Rt]},{provide:bm,deps:[]},{provide:AI,deps:[]}]),RR=[{provide:gc,useClass:gc,deps:[$s,Rt,jh,wf,bl]},{provide:MM,deps:[$s],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:bl,useClass:bl,deps:[[new Vo,Lf]]},{provide:Vf,useClass:Vf,deps:[]},oR,{provide:Fy,useFactory:function(){return RF},deps:[]},{provide:Jg,useFactory:function(){return kF},deps:[]},{provide:wl,useFactory:function(s){return aw(s=s||"undefined"!=typeof $localize&&$localize.locale||Ay),s},deps:[[new el(wl),new Vo,new Kn]]},{provide:Cl,useValue:"USD"}];let kR=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(kr(gc))},s.\u0275mod=W({type:s}),s.\u0275inj=$n({providers:RR}),s})()},8939:(ut,Ce,U)=>{"use strict";U.d(Ce,{hO:()=>le,xv:()=>Q,Dh:()=>J,GT:()=>ee,cc:()=>Ne,on:()=>$,pX:()=>ue});var R=U(7716),l=U(7841),L=U(8971);ut=U.hmd(ut);const ie=["ngOnDestroy"],ue=(ce,fe,Pe,Ke={})=>new Proxy(ce,{get:(bt,Xe)=>Pe.runOutsideAngular(()=>{var At;if(ce[Xe])return(null===(At=null==Ke?void 0:Ke.spy)||void 0===At?void 0:At.get)&&Ke.spy.get(Xe,ce[Xe]),ce[Xe];if(ie.indexOf(Xe)>-1)return()=>{};const gt=fe.toPromise().then(Je=>{const Fe=Je&&Je[Xe];return"function"==typeof Fe?Fe.bind(Je):Fe&&Fe.then?Fe.then(Ie=>Pe.run(()=>Ie)):Pe.run(()=>Fe)});return new Proxy(()=>{},{get:(Je,Fe)=>gt[Fe],apply:(Je,Fe,Ie)=>gt.then(Ze=>{var xe;const Re=Ze&&Ze(...Ie);return(null===(xe=null==Ke?void 0:Ke.spy)||void 0===xe?void 0:xe.apply)&&Ke.spy.apply(Xe,Ie,Re),Re})})})}),ee=(ce,fe)=>{fe.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(Ke=>{Object.defineProperty(ce.prototype,Ke,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,Ke))})})};class ye{constructor(fe){return fe}}const J=new R.OlP("angularfire2.app.options"),Q=new R.OlP("angularfire2.app.name");function $(ce,fe,Pe){const bt="object"==typeof Pe&&Pe||{};bt.name=bt.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const At=l.Z.apps.filter(gt=>gt&&gt.name===bt.name)[0]||fe.runOutsideAngular(()=>l.Z.initializeApp(ce,bt));try{JSON.stringify(ce)!==JSON.stringify(At.options)&&Y("error",`${At.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(gt){}return new ye(At)}const Y=(ce,...fe)=>{(0,R.X6Q)()&&"undefined"!=typeof console&&console[ce](...fe)},G={provide:ye,useFactory:$,deps:[J,R.R0b,[new R.FiY,Q]]};let le=(()=>{class ce{constructor(Pe){l.Z.registerVersion("angularfire",L.q4.full,"core"),l.Z.registerVersion("angularfire",L.q4.full,"app-compat"),l.Z.registerVersion("angular",R.q4F.full,Pe.toString())}static initializeApp(Pe,Ke){return{ngModule:ce,providers:[{provide:J,useValue:Pe},{provide:Q,useValue:Ke}]}}}return ce.\u0275fac=function(Pe){return new(Pe||ce)(R.LFG(R.Lbi))},ce.\u0275mod=R.oAB({type:ce}),ce.\u0275inj=R.cJS({providers:[G]}),ce})();function Ne(ce,fe,Pe,Ke,bt){const[,Xe,At]=globalThis.\u0275AngularfireInstanceCache.find(gt=>gt[0]===ce)||[];if(Xe)return function(ce,fe){try{return ce.toString()===fe.toString()}catch(Pe){return ce===fe}}(bt,At)||(Be("error",`${fe} was already initialized on the ${Pe} Firebase App with different settings.${Ee?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:bt,was:At})),Xe;{const gt=Ke();return globalThis.\u0275AngularfireInstanceCache.push([ce,gt,bt]),gt}}const Ee=!!ut.hot,Be=(ce,...fe)=>{(0,R.X6Q)()&&"undefined"!=typeof console&&console[ce](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(ut,Ce,U)=>{"use strict";U.d(Ce,{q4:()=>Ka,iC:()=>Ei,fc:()=>v_,HU:()=>Sh,vb:()=>Ps,JM:()=>qr});var R=U(7716),l=U(2329),L=U(8239),ie=U(8026),ue=U(3854),ee=U(3910),ye=U(5422);const J="@firebase/installations",Q="0.5.8",Y=`w:${Q}`,G="FIS_v2",ce=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function fe(D){return D instanceof ue.ZR&&D.code.includes("request-failed")}function Pe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ke(D){return{token:D.token,requestStatus:2,expiresIn:Ie(D.expiresIn),creationTime:Date.now()}}function bt(D,S){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,L.Z)(function*(D,S){const z=(yield S.json()).error;return ce.create("request-failed",{requestName:D,serverCode:z.code,serverMessage:z.message,serverStatus:z.status})})).apply(this,arguments)}function At({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function gt(D,{refreshToken:S}){const P=At(D);return P.append("Authorization",function(D){return`${G} ${D}`}(S)),P}function Je(D){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,L.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function Ie(D){return Number(D.replace("s","000"))}function xe(D,S){return Re.apply(this,arguments)}function Re(){return(Re=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:P}){const z=Pe(D),se=At(D),de=S.getImmediate({optional:!0});if(de){const Vt=yield de.getHeartbeatsHeader();Vt&&se.append("x-firebase-client",Vt)}const et={method:"POST",headers:se,body:JSON.stringify({fid:P,authVersion:G,appId:D.appId,sdkVersion:Y})},Dt=yield Je(()=>fetch(z,et));if(Dt.ok){const Vt=yield Dt.json();return{fid:Vt.fid||P,registrationStatus:2,refreshToken:Vt.refreshToken,authToken:Ke(Vt.authToken)}}throw yield bt("Create Installation",Dt)})).apply(this,arguments)}function Ge(D){return new Promise(S=>{setTimeout(S,D)})}const yn=/^[cdef][\w-]{21}$/;function An(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const P=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return yn.test(P)?P:""}catch(D){return""}}function _t(D){return`${D.appName}!${D.appId}`}const mr=new Map;function yi(D,S){const P=_t(D);tr(P,S),function(D,S){const P=(!Ft&&"BroadcastChannel"in self&&(Ft=new BroadcastChannel("[Firebase] FID Change"),Ft.onmessage=D=>{tr(D.data.key,D.data.fid)}),Ft);P&&P.postMessage({key:D,fid:S}),0===mr.size&&Ft&&(Ft.close(),Ft=null)}(P,S)}function tr(D,S){const P=mr.get(D);if(P)for(const z of P)z(S)}let Ft=null;const _r="firebase-installations-store";let Ue=null;function fr(){return Ue||(Ue=(0,ue.X3)("firebase-installations-database",1,(D,S)=>{switch(S){case 0:D.createObjectStore(_r)}})),Ue}function pr(D,S){return at.apply(this,arguments)}function at(){return(at=(0,L.Z)(function*(D,S){const P=_t(D),se=(yield fr()).transaction(_r,"readwrite"),de=se.objectStore(_r),Oe=yield de.get(P);return yield de.put(S,P),yield se.complete,(!Oe||Oe.fid!==S.fid)&&yi(D,S.fid),S})).apply(this,arguments)}function Ar(D){return pn.apply(this,arguments)}function pn(){return(pn=(0,L.Z)(function*(D){const S=_t(D),z=(yield fr()).transaction(_r,"readwrite");yield z.objectStore(_r).delete(S),yield z.complete})).apply(this,arguments)}function kn(D,S){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,L.Z)(function*(D,S){const P=_t(D),se=(yield fr()).transaction(_r,"readwrite"),de=se.objectStore(_r),Oe=yield de.get(P),et=S(Oe);return void 0===et?yield de.delete(P):yield de.put(et,P),yield se.complete,et&&(!Oe||Oe.fid!==et.fid)&&yi(D,et.fid),et})).apply(this,arguments)}function Lr(D){return yr.apply(this,arguments)}function yr(){return(yr=(0,L.Z)(function*(D){let S;const P=yield kn(D.appConfig,z=>{const se=gr(z),de=Is(D,se);return S=de.registrationPromise,de.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function gr(D){return Cn(D||{fid:An(),registrationStatus:0})}function Is(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(ce.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:P,registrationPromise:function(D,S){return Nt.apply(this,arguments)}(D,P)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:lt(D)}:{installationEntry:S}}function Nt(){return(Nt=(0,L.Z)(function*(D,S){try{const P=yield xe(D,S);return pr(D.appConfig,P)}catch(P){throw fe(P)&&409===P.customData.serverCode?yield Ar(D.appConfig):yield pr(D.appConfig,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function lt(D){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,L.Z)(function*(D){let S=yield Gs(D.appConfig);for(;1===S.registrationStatus;)yield Ge(100),S=yield Gs(D.appConfig);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:z}=yield Lr(D);return z||P}return S})).apply(this,arguments)}function Gs(D){return kn(D,S=>{if(!S)throw ce.create("installation-not-found");return Cn(S)})}function Cn(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Zi(D,S){return gn.apply(this,arguments)}function gn(){return(gn=(0,L.Z)(function*({appConfig:D,heartbeatServiceProvider:S},P){const z=jr(D,P),se=gt(D,P),de=S.getImmediate({optional:!0});if(de){const Vt=yield de.getHeartbeatsHeader();Vt&&se.append("x-firebase-client",Vt)}const et={method:"POST",headers:se,body:JSON.stringify({installation:{sdkVersion:Y,appId:D.appId}})},Dt=yield Je(()=>fetch(z,et));if(Dt.ok)return Ke(yield Dt.json());throw yield bt("Generate Auth Token",Dt)})).apply(this,arguments)}function jr(D,{fid:S}){return`${Pe(D)}/${S}/authTokens:generate`}function nt(D){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,L.Z)(function*(D,S=!1){let P;const z=yield kn(D.appConfig,de=>{if(!Xt(de))throw ce.create("not-registered");const Oe=de.authToken;if(!S&&X(Oe))return de;if(1===Oe.requestStatus)return P=ke(D,S),de;{if(!navigator.onLine)throw ce.create("app-offline");const et=ne(de);return P=Mt(D,et),et}});return P?yield P:z.authToken})).apply(this,arguments)}function ke(D,S){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*(D,S){let P=yield st(D.appConfig);for(;1===P.authToken.requestStatus;)yield Ge(100),P=yield st(D.appConfig);const z=P.authToken;return 0===z.requestStatus?nt(D,S):z})).apply(this,arguments)}function st(D){return kn(D,S=>{if(!Xt(S))throw ce.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Mt(D,S){return xt.apply(this,arguments)}function xt(){return(xt=(0,L.Z)(function*(D,S){try{const P=yield Zi(D,S),z=Object.assign(Object.assign({},S),{authToken:P});return yield pr(D.appConfig,z),P}catch(P){if(!fe(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const z=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield pr(D.appConfig,z)}else yield Ar(D.appConfig);throw P}})).apply(this,arguments)}function Xt(D){return void 0!==D&&2===D.registrationStatus}function X(D){return 2===D.requestStatus&&!function(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function ne(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function j(){return(j=(0,L.Z)(function*(D){const S=D,{installationEntry:P,registrationPromise:z}=yield Lr(S);return z?z.catch(console.error):nt(S).catch(console.error),P.fid})).apply(this,arguments)}function pe(){return(pe=(0,L.Z)(function*(D,S=!1){const P=D;return yield He(P),(yield nt(P,S)).token})).apply(this,arguments)}function He(D){return mt.apply(this,arguments)}function mt(){return(mt=(0,L.Z)(function*(D){const{registrationPromise:S}=yield Lr(D);S&&(yield S)})).apply(this,arguments)}function $t(D){return ce.create("missing-app-config-values",{valueName:D})}const jn="installations";(0,ie._registerComponent)(new ee.wA(jn,D=>{const S=D.getProvider("app").getImmediate();return{app:S,appConfig:function(D){if(!D||!D.options)throw $t("App Configuration");if(!D.name)throw $t("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!D.options[P])throw $t(P);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S),heartbeatServiceProvider:(0,ie._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ie._registerComponent)(new ee.wA("installations-internal",D=>{const S=D.getProvider("app").getImmediate(),P=(0,ie._getProvider)(S,jn).getImmediate();return{getId:()=>function(D){return j.apply(this,arguments)}(P),getToken:se=>function(D){return pe.apply(this,arguments)}(P,se)}},"PRIVATE")),(0,ie.registerVersion)(J,Q),(0,ie.registerVersion)(J,Q,"esm2017");const _n="@firebase/remote-config",Sn=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xl{constructor(S,P,z,se){this.client=S,this.storage=P,this.storageCache=z,this.logger=se}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const z=Date.now()-P,se=z<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${z}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${se}.`),se}fetch(S){var P=this;return(0,L.Z)(function*(){const[z,se]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(se&&P.isCachedDataFresh(S.cacheMaxAgeMillis,z))return se;S.eTag=se&&se.eTag;const de=yield P.client.fetch(S),Oe=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&Oe.push(P.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(Oe),de})()}}function Cu(D=navigator){return D.languages&&D.languages[0]||D.language}class rr{constructor(S,P,z,se,de,Oe){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=z,this.projectId=se,this.apiKey=de,this.appId=Oe}fetch(S){var P=this;return(0,L.Z)(function*(){const[z,se]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Dt={sdk_version:P.sdkVersion,app_instance_id:z,app_instance_id_token:se,app_id:P.appId,language_code:Cu()},Vt={method:"POST",headers:et,body:JSON.stringify(Dt)},tn=fetch(Oe,Vt),Bt=new Promise((Qa,Os)=>{S.signal.addEventListener(()=>{const Xa=new Error("The operation was aborted.");Xa.name="AbortError",Os(Xa)})});let Cr;try{yield Promise.race([tn,Bt]),Cr=yield tn}catch(Qa){let Os="fetch-client-network";throw"AbortError"===Qa.name&&(Os="fetch-timeout"),Sn.create(Os,{originalErrorMessage:Qa.message})}let Rr=Cr.status;const Gl=Cr.headers.get("ETag")||void 0;let Hu,Ks;if(200===Cr.status){let Qa;try{Qa=yield Cr.json()}catch(Os){throw Sn.create("fetch-client-parse",{originalErrorMessage:Os.message})}Hu=Qa.entries,Ks=Qa.state}if("INSTANCE_STATE_UNSPECIFIED"===Ks?Rr=500:"NO_CHANGE"===Ks?Rr=304:("NO_TEMPLATE"===Ks||"EMPTY_CONFIG"===Ks)&&(Hu={}),304!==Rr&&200!==Rr)throw Sn.create("fetch-status",{httpStatus:Rr});return{status:Rr,eTag:Gl,config:Hu}})()}}class uh{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,L.Z)(function*(){const z=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,z)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:z}){var se=this;return(0,L.Z)(function*(){yield function(D,S){return new Promise((P,z)=>{const se=Math.max(S-Date.now(),0),de=setTimeout(P,se);D.addEventListener(()=>{clearTimeout(de),z(Sn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const de=yield se.client.fetch(S);return yield se.storage.deleteThrottleMetadata(),de}catch(de){if(!function(D){if(!(D instanceof ue.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(de))throw de;const Oe={throttleEndTimeMillis:Date.now()+(0,ue.$s)(z),backoffCount:z+1};return yield se.storage.setThrottleMetadata(Oe),se.attemptFetch(S,Oe)}})()}}class ch{constructor(S,P,z,se,de){this.app=S,this._client=P,this._storageCache=z,this._storage=se,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xc(D,S){const P=D.target.error||void 0;return Sn.create(S,{originalErrorMessage:P&&P.message})}const Eo="app_namespace_store";class Rc{constructor(S,P,z,se=function(){return new Promise((D,S)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=z=>{S(xc(z,"storage-open"))},P.onsuccess=z=>{D(z.target.result)},P.onupgradeneeded=z=>{const se=z.target.result;switch(z.oldVersion){case 0:se.createObjectStore(Eo,{keyPath:"compositeKey"})}}}catch(P){S(Sn.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=S,this.appName=P,this.namespace=z,this.openDbPromise=se}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,L.Z)(function*(){const z=yield P.openDbPromise;return new Promise((se,de)=>{const et=z.transaction([Eo],"readonly").objectStore(Eo),Dt=P.createCompositeKey(S);try{const Vt=et.get(Dt);Vt.onerror=tn=>{de(xc(tn,"storage-get"))},Vt.onsuccess=tn=>{const Bt=tn.target.result;se(Bt?Bt.value:void 0)}}catch(Vt){de(Sn.create("storage-get",{originalErrorMessage:Vt&&Vt.message}))}})})()}set(S,P){var z=this;return(0,L.Z)(function*(){const se=yield z.openDbPromise;return new Promise((de,Oe)=>{const Dt=se.transaction([Eo],"readwrite").objectStore(Eo),Vt=z.createCompositeKey(S);try{const tn=Dt.put({compositeKey:Vt,value:P});tn.onerror=Bt=>{Oe(xc(Bt,"storage-set"))},tn.onsuccess=()=>{de()}}catch(tn){Oe(Sn.create("storage-set",{originalErrorMessage:tn&&tn.message}))}})})()}delete(S){var P=this;return(0,L.Z)(function*(){const z=yield P.openDbPromise;return new Promise((se,de)=>{const et=z.transaction([Eo],"readwrite").objectStore(Eo),Dt=P.createCompositeKey(S);try{const Vt=et.delete(Dt);Vt.onerror=tn=>{de(xc(tn,"storage-delete"))},Vt.onsuccess=()=>{se()}}catch(Vt){de(Sn.create("storage-delete",{originalErrorMessage:Vt&&Vt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class d_{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const P=S.storage.getLastFetchStatus(),z=S.storage.getLastSuccessfulFetchTimestampMillis(),se=S.storage.getActiveConfig(),de=yield P;de&&(S.lastFetchStatus=de);const Oe=yield z;Oe&&(S.lastSuccessfulFetchTimestampMillis=Oe);const et=yield se;et&&(S.activeConfig=et)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function h_(){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,L.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,ie._registerComponent)(new ee.wA("remote-config",function(S,{instanceIdentifier:P}){const z=S.getProvider("app").getImmediate(),se=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,ue.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:de,apiKey:Oe,appId:et}=z.options;if(!de)throw Sn.create("registration-project-id");if(!Oe)throw Sn.create("registration-api-key");if(!et)throw Sn.create("registration-app-id");const Dt=new Rc(et,z.name,P=P||"firebase"),Vt=new d_(Dt),tn=new ye.Yd(_n);tn.logLevel=ye.in.ERROR;const Bt=new rr(se,ie.SDK_VERSION,P,de,Oe,et),Cr=new uh(Bt,Dt),Rr=new xl(Cr,Dt,Vt,tn),Gl=new ch(z,Rr,Vt,Dt,tn);return function(D){const S=(0,ue.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Gl),Gl},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(_n,"0.3.7"),(0,ie.registerVersion)(_n,"0.3.7","esm2017");const kc="/firebase-messaging-sw.js",Ml="/firebase-cloud-messaging-push-scope",fh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Pc="google.c.a.c_id",as="google.c.a.c_l",Pa="google.c.a.ts",Ns="google.c.a.e";var sa=(()=>{return(D=sa||(sa={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",sa;var D})();function Nr(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gh(D){const P=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),z=atob(P),se=new Uint8Array(z.length);for(let de=0;de<z.length;++de)se[de]=z.charCodeAt(de);return se}const Oa="fcm_token_details_db",oa="fcm_token_object_Store";function f_(D){return si.apply(this,arguments)}function si(){return(si=(0,L.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(Oa))return null;let S=null;return(yield(0,ue.X3)(Oa,5,function(){var z=(0,L.Z)(function*(se,de,Oe,et){var Dt;if(de<2||!se.objectStoreNames.contains(oa))return;const Vt=et.objectStore(oa),tn=yield Vt.index("fcmSenderId").get(D);if(yield Vt.clear(),tn)if(2===de){const Bt=tn;if(!Bt.auth||!Bt.p256dh||!Bt.endpoint)return;S={token:Bt.fcmToken,createTime:null!==(Dt=Bt.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:Bt.auth,p256dh:Bt.p256dh,endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:"string"==typeof Bt.vapidKey?Bt.vapidKey:Nr(Bt.vapidKey)}}}else if(3===de){const Bt=tn;S={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Nr(Bt.auth),p256dh:Nr(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Nr(Bt.vapidKey)}}}else if(4===de){const Bt=tn;S={token:Bt.fcmToken,createTime:Bt.createTime,subscriptionOptions:{auth:Nr(Bt.auth),p256dh:Nr(Bt.p256dh),endpoint:Bt.endpoint,swScope:Bt.swScope,vapidKey:Nr(Bt.vapidKey)}}}});return function(se,de,Oe,et){return z.apply(this,arguments)}}())).close(),yield(0,ue.Lj)(Oa),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),bp(S)?S:null})).apply(this,arguments)}function bp(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const wi="firebase-messaging-store";let kl=null;function wp(){return kl||(kl=(0,ue.X3)("firebase-messaging-database",1,(D,S)=>{switch(S){case 0:D.createObjectStore(wi)}})),kl}function Tn(D){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,L.Z)(function*(D){const S=mh(D),z=yield(yield wp()).transaction(wi).objectStore(wi).get(S);if(z)return z;{const se=yield f_(D.appConfig.senderId);if(se)return yield To(D,se),se}})).apply(this,arguments)}function To(D,S){return oi.apply(this,arguments)}function oi(){return(oi=(0,L.Z)(function*(D,S){const P=mh(D),se=(yield wp()).transaction(wi,"readwrite");return yield se.objectStore(wi).put(S,P),yield se.complete,S})).apply(this,arguments)}function Gn(D){return xs.apply(this,arguments)}function xs(){return(xs=(0,L.Z)(function*(D){const S=mh(D),z=(yield wp()).transaction(wi,"readwrite");yield z.objectStore(wi).delete(S),yield z.complete})).apply(this,arguments)}function mh({appConfig:D}){return D.appId}const Dn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ep(D,S){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,L.Z)(function*(D,S){const P=yield Yn(D),z=Au(S),se={method:"POST",headers:P,body:JSON.stringify(z)};let de;try{de=yield(yield fetch(Du(D.appConfig),se)).json()}catch(Oe){throw Dn.create("token-subscribe-failed",{errorInfo:Oe})}if(de.error)throw Dn.create("token-subscribe-failed",{errorInfo:de.error.message});if(!de.token)throw Dn.create("token-subscribe-no-token");return de.token})).apply(this,arguments)}function Fa(D,S){return xr.apply(this,arguments)}function xr(){return(xr=(0,L.Z)(function*(D,S){const P=yield Yn(D),z=Au(S.subscriptionOptions),se={method:"PATCH",headers:P,body:JSON.stringify(z)};let de;try{de=yield(yield fetch(`${Du(D.appConfig)}/${S.token}`,se)).json()}catch(Oe){throw Dn.create("token-update-failed",{errorInfo:Oe})}if(de.error)throw Dn.create("token-update-failed",{errorInfo:de.error.message});if(!de.token)throw Dn.create("token-update-no-token");return de.token})).apply(this,arguments)}function Fc(D,S){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,L.Z)(function*(D,S){const z={method:"DELETE",headers:yield Yn(D)};try{const de=yield(yield fetch(`${Du(D.appConfig)}/${S}`,z)).json();if(de.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:de.error.message})}catch(se){throw Dn.create("token-unsubscribe-failed",{errorInfo:se})}})).apply(this,arguments)}function Du({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Yn(D){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,L.Z)(function*({appConfig:D,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function Au({p256dh:D,auth:S,endpoint:P,vapidKey:z}){const se={web:{endpoint:P,auth:S,p256dh:D}};return z!==fh&&(se.web.applicationPubKey=z),se}const St=6048e5;function Lc(D){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,L.Z)(function*(D){const S=yield zt(D.swRegistration,D.vapidKey),P={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Nr(S.getKey("auth")),p256dh:Nr(S.getKey("p256dh"))},z=yield Tn(D.firebaseDependencies);if(z){if(ir(z.subscriptionOptions,P))return Date.now()>=z.createTime+St?Su(D,{token:z.token,createTime:Date.now(),subscriptionOptions:P}):z.token;try{yield Fc(D.firebaseDependencies,z.token)}catch(se){console.warn(se)}return xu(D.firebaseDependencies,P)}return xu(D.firebaseDependencies,P)})).apply(this,arguments)}function Vc(D){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,L.Z)(function*(D){const S=yield Tn(D.firebaseDependencies);S&&(yield Fc(D.firebaseDependencies,S.token),yield Gn(D.firebaseDependencies));const P=yield D.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function Su(D,S){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,L.Z)(function*(D,S){try{const P=yield Fa(D.firebaseDependencies,S),z=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield To(D.firebaseDependencies,z),P}catch(P){throw yield Vc(D),P}})).apply(this,arguments)}function xu(D,S){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(D,S){const z={token:yield Ep(D,S),createTime:Date.now(),subscriptionOptions:S};return yield To(D,z),z.token})).apply(this,arguments)}function zt(D,S){return aa.apply(this,arguments)}function aa(){return(aa=(0,L.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gh(S)})})).apply(this,arguments)}function ir(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function Do(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function(D,S){if(!S.notification)return;D.notification={};const P=S.notification.title;P&&(D.notification.title=P);const z=S.notification.body;z&&(D.notification.body=z);const se=S.notification.image;se&&(D.notification.image=se)}(S,D),function(D,S){!S.data||(D.data=S.data)}(S,D),function(D,S){if(!S.fcmOptions)return;D.fcmOptions={};const P=S.fcmOptions.link;P&&(D.fcmOptions.link=P);const z=S.fcmOptions.analytics_label;z&&(D.fcmOptions.analyticsLabel=z)}(S,D),S}function Ll(D){return"object"==typeof D&&!!D&&Pc in D}function Mu(D,S){const P=[];for(let z=0;z<D.length;z++)P.push(D.charAt(z)),z<S.length&&P.push(S.charAt(z));return P.join("")}function Ao(D){return Dn.create("missing-app-config-values",{valueName:D})}Mu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Mu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ru{constructor(S,P,z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const se=function(D){if(!D||!D.options)throw Ao("App Configuration Object");if(!D.name)throw Ao("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=D;for(const z of S)if(!P[z])throw Ao(z);return{appName:D.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:se,installations:P,analyticsProvider:z}}_delete(){return Promise.resolve()}}function Mr(D){return li.apply(this,arguments)}function li(){return(li=(0,L.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(kc,{scope:Ml}),D.swRegistration.update().catch(()=>{})}catch(S){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Vl(D,S){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,L.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield Mr(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function ki(D,S){return So.apply(this,arguments)}function So(){return(So=(0,L.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=fh)})).apply(this,arguments)}function Bl(){return(Bl=(0,L.Z)(function*(D,S){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield ki(D,null==S?void 0:S.vapidKey),yield Vl(D,null==S?void 0:S.serviceWorkerRegistration),Lc(D)})).apply(this,arguments)}function vh(D,S,P){return ua.apply(this,arguments)}function ua(){return(ua=(0,L.Z)(function*(D,S,P){const z=Uc(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(z,{message_id:P[Pc],message_name:P[as],message_time:P[Pa],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uc(D){switch(D){case sa.NOTIFICATION_CLICKED:return"notification_open";case sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function La(){return(La=(0,L.Z)(function*(D,S){const P=S.data;if(!P.isFirebaseMessaging)return;D.onMessageHandler&&P.messageType===sa.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Do(P)):D.onMessageHandler.next(Do(P)));const z=P.data;Ll(z)&&"1"===z[Ns]&&(yield vh(D,P.messageType,z))})).apply(this,arguments)}const Va="@firebase/messaging";function wh(){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,L.Z)(function*(){try{yield(0,ue.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ie._registerComponent)(new ee.wA("messaging",D=>{const S=new Ru(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function(D,S){return La.apply(this,arguments)}(S,P)),S},"PUBLIC")),(0,ie._registerComponent)(new ee.wA("messaging-internal",D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:z=>function(D,S){return Bl.apply(this,arguments)}(S,z)}},"PRIVATE")),(0,ie.registerVersion)(Va,"0.9.12"),(0,ie.registerVersion)(Va,"0.9.12","esm2017");const $c="analytics",Hc="firebase_id",Ua="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ca="https://www.googletagmanager.com/gtag/js",sr=new ye.Yd("@firebase/analytics");function $a(D){return Promise.all(D.map(S=>S.catch(P=>P)))}function Ch(D,S){const P=document.createElement("script");P.src=`${ca}?l=${D}&id=${S}`,P.async=!0,document.head.appendChild(P)}function qs(D,S,P,z,se,de){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,L.Z)(function*(D,S,P,z,se,de){const Oe=z[se];try{if(Oe)yield S[Oe];else{const Dt=(yield $a(P)).find(Vt=>Vt.measurementId===se);Dt&&(yield S[Dt.appId])}}catch(et){sr.error(et)}D("config",se,de)})).apply(this,arguments)}function p_(D,S,P,z,se){return da.apply(this,arguments)}function da(){return(da=(0,L.Z)(function*(D,S,P,z,se){try{let de=[];if(se&&se.send_to){let Oe=se.send_to;Array.isArray(Oe)||(Oe=[Oe]);const et=yield $a(P);for(const Dt of Oe){const Vt=et.find(Bt=>Bt.measurementId===Dt),tn=Vt&&S[Vt.appId];if(!tn){de=[];break}de.push(tn)}}0===de.length&&(de=Object.values(S)),yield Promise.all(de),D("event",z,se||{})}catch(de){sr.error(de)}})).apply(this,arguments)}function Sp(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(ca))return S;return null}const ls=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),qc=new class{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Rs(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function xp(D){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,L.Z)(function*(D){var S;const{appId:P,apiKey:z}=D,se={method:"GET",headers:Rs(z)},de=Ua.replace("{app-id}",P),Oe=yield fetch(de,se);if(200!==Oe.status&&304!==Oe.status){let et="";try{const Dt=yield Oe.json();(null===(S=Dt.error)||void 0===S?void 0:S.message)&&(et=Dt.error.message)}catch(Dt){}throw ls.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:et})}return Oe.json()})).apply(this,arguments)}function ha(D){return ja.apply(this,arguments)}function ja(){return(ja=(0,L.Z)(function*(D,S=qc,P){const{appId:z,apiKey:se,measurementId:de}=D.options;if(!z)throw ls.create("no-app-id");if(!se){if(de)return{measurementId:de,appId:z};throw ls.create("no-api-key")}const Oe=S.getThrottleMetadata(z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new Mp;return setTimeout((0,L.Z)(function*(){et.abort()}),void 0!==P?P:6e4),Ki({appId:z,apiKey:se,measurementId:de},Oe,et,S)})).apply(this,arguments)}function Ki(D,S,P){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,L.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:P},z,se=qc){const{appId:de,measurementId:Oe}=D;try{yield Zc(z,S)}catch(et){if(Oe)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:de,measurementId:Oe};throw et}try{const et=yield xp(D);return se.deleteThrottleMetadata(de),et}catch(et){if(!__(et)){if(se.deleteThrottleMetadata(de),Oe)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${et.message}]`),{appId:de,measurementId:Oe};throw et}const Dt=503===Number(et.customData.httpStatus)?(0,ue.$s)(P,se.intervalMillis,30):(0,ue.$s)(P,se.intervalMillis),Vt={throttleEndTimeMillis:Date.now()+Dt,backoffCount:P+1};return se.setThrottleMetadata(de,Vt),sr.debug(`Calling attemptFetch again in ${Dt} millis`),Ki(D,Vt,z,se)}})).apply(this,arguments)}function Zc(D,S){return new Promise((P,z)=>{const se=Math.max(S-Date.now(),0),de=setTimeout(P,se);D.addEventListener(()=>{clearTimeout(de),z(ls.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function __(D){if(!(D instanceof ue.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Mp{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Th(){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,L.Z)(function*(){if(!(0,ue.hl)())return sr.warn(ls.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(D){return sr.warn(ls.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function qa(){return(qa=(0,L.Z)(function*(D,S,P,z,se,de,Oe){var et;const Dt=ha(D);Dt.then(Rr=>{P[Rr.measurementId]=Rr.appId,D.options.measurementId&&Rr.measurementId!==D.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rr=>sr.error(Rr)),S.push(Dt);const Vt=Th().then(Rr=>{if(Rr)return z.getId()}),[tn,Bt]=yield Promise.all([Dt,Vt]);Sp()||Ch(de,tn.measurementId),se("js",new Date);const Cr=null!==(et=null==Oe?void 0:Oe.config)&&void 0!==et?et:{};return Cr.origin="firebase",Cr.update=!0,null!=Bt&&(Cr[Hc]=Bt),se("config",tn.measurementId,Cr),tn.measurementId})).apply(this,arguments)}class Wa{constructor(S){this.app=S}_delete(){return delete us[this.app.options.appId],Promise.resolve()}}let us={},vn=[];const ht={};let or,xo,In="dataLayer",cs=!1;function Mo(D,S,P){!function(){const D=[];if((0,ue.ru)()&&D.push("This is a browser extension environment."),(0,ue.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((z,se)=>`(${se+1}) ${z}`).join(" "),P=ls.create("invalid-analytics-context",{errorInfo:S});sr.warn(P.message)}}();const z=D.options.appId;if(!z)throw ls.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ls.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=us[z])throw ls.create("already-exists",{id:z});if(!cs){!function(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(In);const{wrappedGtag:de,gtagCore:Oe}=function(D,S,P,z,se){let de=function(...Oe){window[z].push(arguments)};return window[se]&&"function"==typeof window[se]&&(de=window[se]),window[se]=function(D,S,P,z){function de(){return(de=(0,L.Z)(function*(Oe,et,Dt){try{"event"===Oe?yield p_(D,S,P,et,Dt):"config"===Oe?yield qs(D,S,P,z,et,Dt):D("set",et)}catch(Vt){sr.error(Vt)}})).apply(this,arguments)}return function(Oe,et,Dt){return de.apply(this,arguments)}}(de,D,S,P),{gtagCore:de,wrappedGtag:window[se]}}(us,vn,ht,In,"gtag");xo=de,or=Oe,cs=!0}return us[z]=function(D,S,P,z,se,de,Oe){return qa.apply(this,arguments)}(D,vn,ht,S,or,In,P),new Wa(D)}function Wt(){return(Wt=(0,L.Z)(function*(D,S,P,z,se){if(se&&se.global)D("event",P,z);else{const de=yield S;D("event",P,Object.assign(Object.assign({},z),{send_to:de}))}})).apply(this,arguments)}function ks(){return br.apply(this,arguments)}function br(){return(br=(0,L.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(D){return!1}})).apply(this,arguments)}const Wn="@firebase/analytics";(0,ie._registerComponent)(new ee.wA($c,(S,{options:P})=>Mo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,ie._registerComponent)(new ee.wA("analytics-internal",function(S){try{const P=S.getProvider($c).getImmediate();return{logEvent:(z,se,de)=>function(D,S,P,z){D=(0,ue.m9)(D),function(D,S,P,z,se){return Wt.apply(this,arguments)}(xo,us[D.app.options.appId],S,P,z).catch(se=>sr.error(se))}(P,z,se,de)}}catch(P){throw ls.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,ie.registerVersion)(Wn,"0.7.8"),(0,ie.registerVersion)(Wn,"0.7.8","esm2017");var Pp=U(7771),Pi=U(3637),Op=U(8307),Fp=U(9746),Ya=U(2639);const Ka=new R.GfV("7.3.0"),Uu="__angularfire_symbol__analyticsIsSupportedValue",Ih="__angularfire_symbol__analyticsIsSupported",Zn="__angularfire_symbol__remoteConfigIsSupportedValue",Po="__angularfire_symbol__remoteConfigIsSupported",Ah="__angularfire_symbol__messagingIsSupportedValue",Nn="__angularfire_symbol__messagingIsSupported";function qr(D,S,P){if(S){if(1===S.length)return S[0];const de=S.filter(Oe=>Oe.app===P);if(1===de.length)return de[0]}return P.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ih]||(globalThis[Ih]=ks().then(D=>globalThis[Uu]=D).catch(()=>globalThis[Uu]=!1)),globalThis[Nn]||(globalThis[Nn]=wh().then(D=>globalThis[Ah]=D).catch(()=>globalThis[Ah]=!1)),globalThis[Po]||(globalThis[Po]=h_().then(D=>globalThis[Zn]=D).catch(()=>globalThis[Zn]=!1));const Ps=(D,S)=>{const P=S?[S]:(0,l.C6)(),z=[];return P.forEach(se=>{se.container.getProvider(D).instances.forEach(Oe=>{z.includes(Oe)||z.push(Oe)})}),z};function zs(){}class Ys{constructor(S,P=Pp.N){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,z){const se=this.zone;return this.delegate.schedule(function(Oe){se.runGuarded(()=>{S.apply(this,[Oe])})},P,z)}}class Oo{constructor(S){this.zone=S,this.task=null}call(S,P){const z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs)),P.pipe((0,Op.b)({next:z,complete:z,error:z})).subscribe(S).add(z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Sh=(()=>{class D{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Ys(Zone.current)),this.insideAngular=P.run(()=>new Ys(Zone.current,Pi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(P){return new(P||D)(R.LFG(R.R0b))},D.\u0275prov=R.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Fo(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function v_(D){return D.pipe((0,Fp.QV)(Fo().outsideAngular))}function Ei(D){return Fo(),function(D){return function(P){return(P=P.lift(new Oo(D.ngZone))).pipe((0,Ya.R)(D.outsideAngular),(0,Fp.QV)(D.insideAngular))}}(Fo())(D)}},982:(ut,Ce,U)=>{"use strict";U.d(Ce,{$:()=>yh,A:()=>Zt,E:()=>wu,G:()=>ri,I:()=>Nr,K:()=>Lt,L:()=>To,M:()=>mh,N:()=>Pl,P:()=>Oe,Q:()=>Dn,R:()=>Ja,T:()=>xs,U:()=>xr,V:()=>Fc,W:()=>Au,X:()=>ai,Y:()=>Ll,Z:()=>_h,_:()=>li,a:()=>cs,a0:()=>vh,a1:()=>Uc,a2:()=>La,a3:()=>Pu,a4:()=>bh,a5:()=>wh,a6:()=>Fu,a7:()=>Lu,a8:()=>Tp,a9:()=>_0,aA:()=>nl,aB:()=>Js,aC:()=>En,aG:()=>Mo,aJ:()=>Yi,aa:()=>$c,ab:()=>Ip,ae:()=>sr,af:()=>Ch,ag:()=>Ap,aj:()=>Bc,ak:()=>g_,am:()=>Zc,an:()=>qa,ao:()=>bu,ap:()=>pr,aq:()=>wo,ar:()=>ni,as:()=>Qt,at:()=>Wp,au:()=>Wl,av:()=>Hn,aw:()=>Ue,ax:()=>Ar,ay:()=>As,az:()=>td,b:()=>or,c:()=>Hu,d:()=>Xa,e:()=>Qa,f:()=>Vo,g:()=>ed,h:()=>Bo,i:()=>Op,j:()=>C_,k:()=>ps,l:()=>lr,m:()=>Fh,o:()=>yn,r:()=>D,s:()=>Ei,u:()=>se,z:()=>yi});var R=U(8239),l=U(3854),L=U(8026);function ye(w,g){var y={};for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&g.indexOf(E)<0&&(y[E]=w[E]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(E=Object.getOwnPropertySymbols(w);x<E.length;x++)g.indexOf(E[x])<0&&Object.prototype.propertyIsEnumerable.call(w,E[x])&&(y[E[x]]=w[E[x]])}return y}var Re=U(5422),Ge=U(3910);const yn={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Zt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const yi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},wr=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Tt=new l.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),$n=new Re.Yd("@firebase/auth");function Ft(w,...g){$n.logLevel<=Re.in.ERROR&&$n.error(`Auth (${L.SDK_VERSION}): ${w}`,...g)}function Qt(w,...g){throw _r(w,...g)}function Hn(w,...g){return _r(w,...g)}function Wi(w,g,y){const E=Object.assign(Object.assign({},wr()),{[g]:y});return new l.LL("auth","Firebase",E).create(g,{appName:w.name})}function vi(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Qt(w,"argument-error"),Wi(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _r(w,...g){if("string"!=typeof w){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return Tt.create(w,...g)}function Ue(w,g,...y){if(!w)throw _r(g,...y)}function fr(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Ft(g),new Error(g)}function pr(w,g){w||fr(g)}const at=new Map;function Ar(w){pr(w instanceof Function,"Expected a class definition");let g=at.get(w);return g?(pr(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,at.set(w,g),g)}function Qr(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Lr(){return"http:"===yr()||"https:"===yr()}function yr(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ri{constructor(g,y){this.shortDelay=g,this.longDelay=y,pr(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,l.uI)()||(0,l.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Lr()||(0,l.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Nt(w,g){pr(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class lt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gs=new Ri(3e4,6e4);function Cn(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function wt(w,g,y,E){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,R.Z)(function*(w,g,y,E,x={}){return gn(w,x,(0,R.Z)(function*(){let k={},re={};E&&("GET"===g?re=E:k={body:JSON.stringify(E)});const we=(0,l.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),tt=yield w._getAdditionalHeaders();return tt["Content-Type"]="application/json",w.languageCode&&(tt["X-Firebase-Locale"]=w.languageCode),lt.fetch()(ke(w,w.config.apiHost,y,we),Object.assign({method:g,headers:tt,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function gn(w,g,y){return jr.apply(this,arguments)}function jr(){return(jr=(0,R.Z)(function*(w,g,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},Ct),g);try{const x=new Se(w),k=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const re=yield k.json();if("needConfirmation"in re)throw st(w,"account-exists-with-different-credential",re);if(k.ok&&!("errorMessage"in re))return re;{const we=k.ok?re.errorMessage:re.error.message,[tt,je]=we.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw st(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===tt)throw st(w,"email-already-in-use",re);const vt=E[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw Wi(w,vt,je);Qt(w,vt)}}catch(x){if(x instanceof l.ZR)throw x;Qt(w,"network-request-failed")}})).apply(this,arguments)}function nt(w,g,y,E){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,R.Z)(function*(w,g,y,E,x={}){const k=yield wt(w,g,y,E,x);return"mfaPendingCredential"in k&&Qt(w,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function ke(w,g,y,E){const x=`${g}${y}?${E}`;return w.config.emulator?Nt(w.config,x):`${w.config.apiScheme}://${x}`}class Se{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Hn(this.auth,"network-request-failed")),Gs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function st(w,g,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const x=Hn(w,g,E);return x.customData._tokenResponse=y,x}function xt(){return(xt=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Xt(w,g){return X.apply(this,arguments)}function X(){return(X=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Z(w,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ge(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function W(){return(W=(0,R.Z)(function*(w,g=!1){const y=(0,l.m9)(w),E=yield y.getIdToken(g),x=He(E);Ue(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const k="object"==typeof x.firebase?x.firebase:void 0,re=null==k?void 0:k.sign_in_provider;return{claims:x,token:E,authTime:ge(pe(x.auth_time)),issuedAtTime:ge(pe(x.iat)),expirationTime:ge(pe(x.exp)),signInProvider:re||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function pe(w){return 1e3*Number(w)}function He(w){const[g,y,E]=w.split(".");if(void 0===g||void 0===y||void 0===E)return Ft("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,l.tV)(y);return x?JSON.parse(x):(Ft("Failed to decode base64 JWT payload"),null)}catch(x){return Ft("Caught error parsing JWT payload as JSON",x),null}}function Et(w,g){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,R.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof l.ZR&&en(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function en({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Pn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,R.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,R.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class mn{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ge(this.lastLoginAt),this.creationTime=ge(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function rn(w){return nr.apply(this,arguments)}function nr(){return(nr=(0,R.Z)(function*(w){var g;const y=w.auth,E=yield w.getIdToken(),x=yield Et(w,Z(y,{idToken:E}));Ue(null==x?void 0:x.users.length,y,"internal-error");const k=x.users[0];w._notifyReloadListener(k);const re=(null===(g=k.providerUserInfo)||void 0===g?void 0:g.length)?ei(k.providerUserInfo):[],we=jn(w.providerData,re),vt=!!w.isAnonymous&&!(w.email&&k.passwordHash||(null==we?void 0:we.length)),un={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:we,metadata:new mn(k.createdAt,k.lastLoginAt),isAnonymous:vt};Object.assign(w,un)})).apply(this,arguments)}function $t(){return($t=(0,R.Z)(function*(w){const g=(0,l.m9)(w);yield rn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function jn(w,g){return[...w.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function ei(w){return w.map(g=>{var{providerId:y}=g,E=ye(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function vr(){return(vr=(0,R.Z)(function*(w,g){const y=yield gn(w,{},(0,R.Z)(function*(){const E=(0,l.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:k}=w.config,re=ke(w,x,"/v1/token",`key=${k}`),we=yield w._getAdditionalHeaders();return we["Content-Type"]="application/x-www-form-urlencoded",lt.fetch()(re,{method:"POST",headers:we,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class os{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ue(g.idToken,"internal-error"),Ue(void 0!==g.idToken,"internal-error"),Ue(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=He(w);return Ue(g,"internal-error"),Ue(void 0!==g.exp,"internal-error"),Ue(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,R.Z)(function*(){return Ue(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,R.Z)(function*(){const{accessToken:x,refreshToken:k,expiresIn:re}=yield function(w,g){return vr.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(x,k,Number(re))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:x,expirationTime:k}=y,re=new os;return E&&(Ue("string"==typeof E,"internal-error",{appName:g}),re.refreshToken=E),x&&(Ue("string"==typeof x,"internal-error",{appName:g}),re.accessToken=x),k&&(Ue("number"==typeof k,"internal-error",{appName:g}),re.expirationTime=k),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new os,this.toJSON())}_performRefresh(){return fr("not implemented")}}function _n(w,g){Ue("string"==typeof w||void 0===w,"internal-error",{appName:g})}class zi{constructor(g){var{uid:y,auth:E,stsTokenManager:x}=g,k=ye(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new mn(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,R.Z)(function*(){const E=yield Et(y,y.stsTokenManager.getToken(y.auth,g));return Ue(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function(w){return W.apply(this,arguments)}(this,g)}reload(){return function(w){return $t.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ue(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new zi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,R.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield rn(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,R.Z)(function*(){const y=yield g.getIdToken();return yield Et(g,function(w,g){return xt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,x,k,re,we,tt,je,vt;const un=null!==(E=y.displayName)&&void 0!==E?E:void 0,zn=null!==(x=y.email)&&void 0!==x?x:void 0,nn=null!==(k=y.phoneNumber)&&void 0!==k?k:void 0,sl=null!==(re=y.photoURL)&&void 0!==re?re:void 0,sd=null!==(we=y.tenantId)&&void 0!==we?we:void 0,Ku=null!==(tt=y._redirectEventId)&&void 0!==tt?tt:void 0,Kp=null!==(je=y.createdAt)&&void 0!==je?je:void 0,S_=null!==(vt=y.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Vh,emailVerified:N_,isAnonymous:Bh,providerData:Ho,stsTokenManager:S0}=y;Ue(Vh&&S0,g,"internal-error");const Ju=os.fromJSON(this.name,S0);Ue("string"==typeof Vh,g,"internal-error"),_n(un,g.name),_n(zn,g.name),Ue("boolean"==typeof N_,g,"internal-error"),Ue("boolean"==typeof Bh,g,"internal-error"),_n(nn,g.name),_n(sl,g.name),_n(sd,g.name),_n(Ku,g.name),_n(Kp,g.name),_n(S_,g.name);const Yl=new zi({uid:Vh,auth:g,email:zn,emailVerified:N_,displayName:un,isAnonymous:Bh,photoURL:sl,phoneNumber:nn,tenantId:sd,stsTokenManager:Ju,createdAt:Kp,lastLoginAt:S_});return Ho&&Array.isArray(Ho)&&(Yl.providerData=Ho.map(Oi=>Object.assign({},Oi))),Ku&&(Yl._redirectEventId=Ku),Yl}static _fromIdTokenResponse(g,y,E=!1){return(0,R.Z)(function*(){const x=new os;x.updateFromServerResponse(y);const k=new zi({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield rn(k),k})()}}const Lt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,R.Z)(function*(){return!0})()}_set(y,E){var x=this;return(0,R.Z)(function*(){x.storage[y]=E})()}_get(y){var E=this;return(0,R.Z)(function*(){const x=E.storage[y];return void 0===x?null:x})()}_remove(y){var E=this;return(0,R.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function As(w,g,y){return`firebase:${w}:${g}:${y}`}class Sn{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:x,name:k}=this.auth;this.fullUserKey=As(this.userKey,x.apiKey,k),this.fullPersistenceKey=As("persistence",x.apiKey,k),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,R.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?zi._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,R.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,R.Z)(function*(){if(!y.length)return new Sn(Ar(Lt),g,E);const x=(yield Promise.all(y.map(function(){var je=(0,R.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return je.apply(this,arguments)}}()))).filter(je=>je);let k=x[0]||Ar(Lt);const re=As(E,g.config.apiKey,g.name);let we=null;for(const je of y)try{const vt=yield je._get(re);if(vt){const un=zi._fromJSON(g,vt);je!==k&&(we=un),k=je;break}}catch(vt){}const tt=x.filter(je=>je._shouldAllowMigration);return k._shouldAllowMigration&&tt.length?(k=tt[0],we&&(yield k._set(re,we.toJSON())),yield Promise.all(y.map(function(){var je=(0,R.Z)(function*(vt){if(vt!==k)try{yield vt._remove(re)}catch(un){}});return function(vt){return je.apply(this,arguments)}}())),new Sn(k,g,E)):new Sn(k,g,E)})()}}function Sl(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(bo(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ra(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(On(g))return"Blackberry";if(bi(g))return"Webos";if(ti(g))return"Safari";if((g.includes("chrome/")||vo(g))&&!g.includes("edge/"))return"Chrome";if(ni(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function ra(w=(0,l.z$)()){return/firefox\//i.test(w)}function ti(w=(0,l.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function vo(w=(0,l.z$)()){return/crios\//i.test(w)}function bo(w=(0,l.z$)()){return/iemobile/i.test(w)}function ni(w=(0,l.z$)()){return/android/i.test(w)}function On(w=(0,l.z$)()){return/blackberry/i.test(w)}function bi(w=(0,l.z$)()){return/webos/i.test(w)}function wo(w=(0,l.z$)()){return/iphone|ipad|ipod/i.test(w)}function bu(w=(0,l.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Nl(w=(0,l.z$)()){return wo(w)||ni(w)||bi(w)||On(w)||/windows phone/i.test(w)||bo(w)}function Sr(w,g=[]){let y;switch(w){case"Browser":y=Sl((0,l.z$)());break;case"Worker":y=`${Sl((0,l.z$)())}-${w}`;break;default:y=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${L.SDK_VERSION}/${E}`}class l_{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ss(this),this.idTokenSubscription=new Ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=Ar(y)),this._initializationPromise=this.queue((0,R.Z)(function*(){var x,k;if(!E._deleted&&(E.persistenceManager=yield Sn.create(E,g),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(re){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,R.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,R.Z)(function*(){var E;let x=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const k=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,re=null==x?void 0:x._redirectEventId,we=yield y.tryRedirectSignIn(g);(!k||k===re)&&(null==we?void 0:we.user)&&(x=we.user)}return x?x._redirectEventId?(Ue(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===x._redirectEventId?y.directlySetCurrentUser(x):y.reloadAndSetCurrentUserOrClear(x)):y.reloadAndSetCurrentUserOrClear(x):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,R.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(x){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,R.Z)(function*(){try{yield rn(g)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,R.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,R.Z)(function*(){const E=g?(0,l.m9)(g):null;return E&&Ue(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,R.Z)(function*(){if(!y._deleted)return g&&Ue(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,R.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,R.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,R.Z)(function*(){yield y.assertedPersistence.setPersistence(Ar(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new l.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,R.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,R.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&Ar(g)||y._popupRedirectResolver;Ue(E,y,"argument-error"),y.redirectPersistenceManager=yield Sn.create(y,[Ar(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,R.Z)(function*(){var E,x;return y._isInitialized&&(yield y.queue((0,R.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,R.Z)(function*(){if(g===y.currentUser)return y.queue((0,R.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,x){if(this._deleted)return()=>{};const k="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Ue(re,this,"internal-error"),re.then(()=>k(this.currentUser)),"function"==typeof y?g.addObserver(y,E,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,R.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Sr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,R.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function En(w){return(0,l.m9)(w)}class Ss{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,l.ne)(y=>this.observer=y)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wu(w,g,y){const E=En(w);Ue(E._canInitEmulator,E,"emulator-config-failed"),Ue(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!(null==y?void 0:y.disableWarnings),k=xl(g),{host:re,port:we}=function(w){const g=xl(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const k=x[1];return{host:k,port:rr(E.substr(k.length+1))}}{const[k,re]=E.split(":");return{host:k,port:rr(re)}}}(g);E.config.emulator={url:`${k}//${re}${null===we?"":`:${we}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:re,port:we,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function xl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function rr(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class ri{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return fr("not implemented")}_getIdTokenResponse(g){return fr("not implemented")}_linkToIdToken(g,y){return fr("not implemented")}_getReauthenticationResolver(g){return fr("not implemented")}}function uh(w,g){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:resetPassword",Cn(w,g))})).apply(this,arguments)}function yp(w,g){return ch.apply(this,arguments)}function ch(){return(ch=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function xc(w,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",Cn(w,g))})).apply(this,arguments)}function dh(){return(dh=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signInWithPassword",Cn(w,g))})).apply(this,arguments)}function Mc(w,g){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:sendOobCode",Cn(w,g))})).apply(this,arguments)}function d_(w,g){return hh.apply(this,arguments)}function hh(){return(hh=(0,R.Z)(function*(w,g){return Mc(w,g)})).apply(this,arguments)}function m0(w,g){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,R.Z)(function*(w,g){return Mc(w,g)})).apply(this,arguments)}function h_(w,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,R.Z)(function*(w,g){return Mc(w,g)})).apply(this,arguments)}function kc(w,g){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,R.Z)(function*(w,g){return Mc(w,g)})).apply(this,arguments)}function ph(){return(ph=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signInWithEmailLink",Cn(w,g))})).apply(this,arguments)}function as(){return(as=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signInWithEmailLink",Cn(w,g))})).apply(this,arguments)}class Pa extends ri{constructor(g,y,E,x=null){super("password",E),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new Pa(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new Pa(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,R.Z)(function*(){switch(y.signInMethod){case"password":return function(w,g){return dh.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,g){return ph.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Qt(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,R.Z)(function*(){switch(E.signInMethod){case"password":return yp(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(w,g){return as.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:Qt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ns(w,g){return ii.apply(this,arguments)}function ii(){return(ii=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signInWithIdp",Cn(w,g))})).apply(this,arguments)}class Nr extends ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Nr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Qt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=y,k=ye(y,["providerId","signInMethod"]);if(!E||!x)return null;const re=new Nr(E,x);return re.idToken=k.idToken||void 0,re.accessToken=k.accessToken||void 0,re.secret=k.secret,re.nonce=k.nonce,re.pendingToken=k.pendingToken||null,re}_getIdTokenResponse(g){return Ns(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Ns(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Ns(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,l.xO)(y)}return g}}function gh(w,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:sendVerificationCode",Cn(w,g))})).apply(this,arguments)}function oa(){return(oa=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signInWithPhoneNumber",Cn(w,g))})).apply(this,arguments)}function si(){return(si=(0,R.Z)(function*(w,g){const y=yield nt(w,"POST","/v1/accounts:signInWithPhoneNumber",Cn(w,g));if(y.temporaryProof)throw st(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const bp={USER_NOT_FOUND:"user-not-found"};function Rl(){return(Rl=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signInWithPhoneNumber",Cn(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),bp)})).apply(this,arguments)}class wi extends ri{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new wi({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new wi({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(w,g){return oa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(w,g){return si.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return Rl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:k}=g;return E||y||x||k?new wi({verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:k}):null}}class Tn{constructor(g){var y,E,x,k,re,we;const tt=(0,l.zd)((0,l.pd)(g)),je=null!==(y=tt.apiKey)&&void 0!==y?y:null,vt=null!==(E=tt.oobCode)&&void 0!==E?E:null,un=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=tt.mode)&&void 0!==x?x:null);Ue(je&&vt&&un,"argument-error"),this.apiKey=je,this.operation=un,this.code=vt,this.continueUrl=null!==(k=tt.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(re=tt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(we=tt.tenantId)&&void 0!==we?we:null}static parseLink(g){const y=function(w){const g=(0,l.zd)((0,l.pd)(w)).link,y=g?(0,l.zd)((0,l.pd)(g)).deep_link_id:null,E=(0,l.zd)((0,l.pd)(w)).deep_link_id;return(E?(0,l.zd)((0,l.pd)(E)).link:null)||E||y||g||w}(g);try{return new Tn(y)}catch(E){return null}}}let To=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return Pa._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const x=Tn.parseLink(E);return Ue(x,"argument-error"),Pa._fromEmailAndCode(y,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class oi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Gn extends oi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class xs extends Gn{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Ue("providerId"in y&&"signInMethod"in y,"argument-error"),Nr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ue(g.idToken||g.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return xs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return xs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:k,nonce:re,providerId:we}=g;if(!E&&!x&&!y&&!k||!we)return null;try{return new xs(we)._credential({idToken:y,accessToken:E,nonce:re,pendingToken:k})}catch(tt){return null}}}let mh=(()=>{class w extends Gn{constructor(){super("facebook.com")}static credential(y){return Nr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Pl=(()=>{class w extends Gn{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Nr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:x}=y;if(!E&&!x)return null;try{return w.credential(E,x)}catch(k){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Dn=(()=>{class w extends Gn{constructor(){super("github.com")}static credential(y){return Nr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Yi extends ri{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Ns(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Ns(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Ns(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:k}=y;return E&&x&&k&&E===x?new Yi(E,k):null}static _create(g,y){return new Yi(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xr extends oi{constructor(g){Ue(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return xr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return xr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Yi.fromJSON(g);return Ue(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return Yi._create(E,y)}catch(x){return null}}}let Fc=(()=>{class w extends Gn{constructor(){super("twitter.com")}static credential(y,E){return Nr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=y;if(!E||!x)return null;try{return w.credential(E,x)}catch(k){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ol(w,g){return Du.apply(this,arguments)}function Du(){return(Du=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signUp",Cn(w,g))})).apply(this,arguments)}class Yn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,x=!1){return(0,R.Z)(function*(){const k=yield zi._fromIdTokenResponse(g,E,x),re=Iu(E);return new Yn({user:k,providerId:re,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,R.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=Iu(E);return new Yn({user:g,providerId:x,_tokenResponse:E,operationType:y})})()}}function Iu(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Au(w){return St.apply(this,arguments)}function St(){return(St=(0,R.Z)(function*(w){var g;const y=En(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new Yn({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield Ol(y,{returnSecureToken:!0}),x=yield Yn._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class Lc extends l.ZR{constructor(g,y,E,x){var k;super(y.code,y.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Lc.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,x){return new Lc(g,y,E,x)}}function Fl(w,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Lc._fromErrorAndOperation(w,k,g,E):k})}function Vc(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Bc(w,g){return Su.apply(this,arguments)}function Su(){return(Su=(0,R.Z)(function*(w,g){const y=(0,l.m9)(w);yield Ae(!0,y,g);const{providerUserInfo:E}=yield Xt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=Vc(E||[]);return y.providerData=y.providerData.filter(k=>x.has(k.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Nu(w,g){return xu.apply(this,arguments)}function xu(){return(xu=(0,R.Z)(function*(w,g,y=!1){const E=yield Et(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return Yn._forOperation(w,"link",E)})).apply(this,arguments)}function Ae(w,g,y){return zt.apply(this,arguments)}function zt(){return(zt=(0,R.Z)(function*(w,g,y){yield rn(g);const x=!1===w?"provider-already-linked":"no-such-provider";Ue(Vc(g.providerData).has(y)===w,g.auth,x)})).apply(this,arguments)}function aa(w,g){return ir.apply(this,arguments)}function ir(){return(ir=(0,R.Z)(function*(w,g,y=!1){const{auth:E}=w,x="reauthenticate";try{const k=yield Et(w,Fl(E,x,g,w),y);Ue(k.idToken,E,"internal-error");const re=He(k.idToken);Ue(re,E,"internal-error");const{sub:we}=re;return Ue(w.uid===we,E,"user-mismatch"),Yn._forOperation(w,x,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&Qt(E,"user-mismatch"),k}})).apply(this,arguments)}function Do(w,g){return Io.apply(this,arguments)}function Io(){return(Io=(0,R.Z)(function*(w,g,y=!1){const E="signIn",x=yield Fl(w,E,g),k=yield Yn._fromIdTokenResponse(w,E,x);return y||(yield w._updateCurrentUser(k.user)),k})).apply(this,arguments)}function ai(w,g){return la.apply(this,arguments)}function la(){return(la=(0,R.Z)(function*(w,g){return Do(En(w),g)})).apply(this,arguments)}function Ll(w,g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,R.Z)(function*(w,g){const y=(0,l.m9)(w);return yield Ae(!1,y,g.providerId),Nu(y,g)})).apply(this,arguments)}function _h(w,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,R.Z)(function*(w,g){return aa((0,l.m9)(w),g)})).apply(this,arguments)}function Ru(w,g){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,R.Z)(function*(w,g){return nt(w,"POST","/v1/accounts:signInWithCustomToken",Cn(w,g))})).apply(this,arguments)}function li(w,g){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,R.Z)(function*(w,g){const y=En(w),E=yield Ru(y,{token:g,returnSecureToken:!0}),x=yield Yn._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class Ms{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?ki._fromServerResponse(g,y):Qt(g,"internal-error")}}class ki extends Ms{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new ki(y)}}function So(w,g,y){var E;Ue((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),Ue(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Ue(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Ue(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function yh(w,g,y){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w),x={requestType:"PASSWORD_RESET",email:g};y&&So(E,x,y),yield m0(E,x)})).apply(this,arguments)}function vh(w,g,y){return ua.apply(this,arguments)}function ua(){return(ua=(0,R.Z)(function*(w,g,y){yield uh((0,l.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Uc(w,g){return ku.apply(this,arguments)}function ku(){return(ku=(0,R.Z)(function*(w,g){yield xc((0,l.m9)(w),{oobCode:g})})).apply(this,arguments)}function La(w,g){return Va.apply(this,arguments)}function Va(){return(Va=(0,R.Z)(function*(w,g){const y=(0,l.m9)(w),E=yield uh(y,{oobCode:g}),x=E.requestType;switch(Ue(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ue(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ue(E.mfaInfo,y,"internal-error");default:Ue(E.email,y,"internal-error")}let k=null;return E.mfaInfo&&(k=Ms._fromServerResponse(En(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:x}})).apply(this,arguments)}function Pu(w,g){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,R.Z)(function*(w,g){const{data:y}=yield La((0,l.m9)(w),g);return y.email})).apply(this,arguments)}function bh(w,g,y){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,R.Z)(function*(w,g,y){const E=En(w),x=yield Ol(E,{returnSecureToken:!0,email:g,password:y}),k=yield Yn._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function wh(w,g,y){return ai((0,l.m9)(w),To.credential(g,y))}function Fu(w,g,y){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};Ue(y.handleCodeInApp,E,"argument-error"),y&&So(E,x,y),yield h_(E,x)})).apply(this,arguments)}function Lu(w,g){const y=Tn.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function Tp(w,g,y){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w),x=To.credentialWithLink(g,y||Qr());return Ue(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),ai(E,x)})).apply(this,arguments)}function No(w,g){return qn.apply(this,arguments)}function qn(){return(qn=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:createAuthUri",Cn(w,g))})).apply(this,arguments)}function _0(w,g){return Dp.apply(this,arguments)}function Dp(){return(Dp=(0,R.Z)(function*(w,g){const E={identifier:g,continueUri:Lr()?Qr():"http://localhost"},{signinMethods:x}=yield No((0,l.m9)(w),E);return x||[]})).apply(this,arguments)}function $c(w,g){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,R.Z)(function*(w,g){const y=(0,l.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&So(y.auth,x,g);const{email:k}=yield d_(y.auth,x);k!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ip(w,g,y){return jc.apply(this,arguments)}function jc(){return(jc=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&So(E.auth,k,y);const{email:re}=yield kc(E.auth,k);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function Ua(w,g){return ca.apply(this,arguments)}function ca(){return(ca=(0,R.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function sr(w,g){return $a.apply(this,arguments)}function $a(){return($a=(0,R.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,l.m9)(w),k={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},re=yield Et(E,Ua(E.auth,k));E.displayName=re.displayName||null,E.photoURL=re.photoUrl||null;const we=E.providerData.find(({providerId:tt})=>"password"===tt);we&&(we.displayName=E.displayName,we.photoURL=E.photoURL),yield E._updateTokensIfNecessary(re)})).apply(this,arguments)}function Ch(w,g){return qs((0,l.m9)(w),g,null)}function Ap(w,g){return qs((0,l.m9)(w),null,g)}function qs(w,g,y){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,R.Z)(function*(w,g,y){const{auth:E}=w,k={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(k.email=g),y&&(k.password=y);const re=yield Et(w,yp(E,k));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class da{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class Ha extends da{constructor(g,y,E,x){super(g,y,E),this.username=x}}class Gc extends da{constructor(g,y){super(g,"facebook.com",y)}}class Sp extends Ha{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class Np extends da{constructor(g,y){super(g,"google.com",y)}}class ls extends Ha{constructor(g,y,E){super(g,"twitter.com",y,E)}}function g_(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,y;if(!w)return null;const{providerId:E}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},k=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const re=null===(y=null===(g=He(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new da(k,"anonymous"!==re&&"custom"!==re?re:null)}if(!E)return null;switch(E){case"facebook.com":return new Gc(k,x);case"github.com":return new Sp(k,x);case"google.com":return new Np(k,x);case"twitter.com":return new ls(k,x,w.screenName||null);case"custom":case"anonymous":return new da(k,null);default:return new da(k,E,x)}}(y)}class Ki{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new Ki("enroll",g)}static _fromMfaPendingCredential(g){return new Ki("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return Ki._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return Ki._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ga{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=En(g),x=y.customData._serverResponse,k=(x.mfaInfo||[]).map(we=>Ms._fromServerResponse(E,we));Ue(x.mfaPendingCredential,E,"internal-error");const re=Ki._fromMfaPendingCredential(x.mfaPendingCredential);return new Ga(re,k,function(){var we=(0,R.Z)(function*(tt){const je=yield tt._process(E,re);delete x.mfaInfo,delete x.mfaPendingCredential;const vt=Object.assign(Object.assign({},x),{idToken:je.idToken,refreshToken:je.refreshToken});switch(y.operationType){case"signIn":const un=yield Yn._fromIdTokenResponse(E,y.operationType,vt);return yield E._updateCurrentUser(un.user),un;case"reauthenticate":return Ue(y.user,E,"internal-error"),Yn._forOperation(y.user,y.operationType,vt);default:Qt(E,"internal-error")}});return function(tt){return we.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,R.Z)(function*(){return y.signInResolver(g)})()}}function Zc(w,g){var y;const E=(0,l.m9)(w),x=g;return Ue(g.customData.operationType,E,"argument-error"),Ue(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Ga._fromError(E,x)}function __(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:start",Cn(w,g))}class Vu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>Ms._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Vu(g)}getSession(){var g=this;return(0,R.Z)(function*(){return Ki._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,R.Z)(function*(){const x=g,k=yield E.getSession(),re=yield Et(E.user,x._process(E.user.auth,k,y));return yield E.user._updateTokensIfNecessary(re),E.user.reload()})()}unenroll(g){var y=this;return(0,R.Z)(function*(){const E="string"==typeof g?g:g.uid,x=yield y.user.getIdToken(),k=yield Et(y.user,function(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Cn(w,g))}(y.user.auth,{idToken:x,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:re})=>re!==E),yield y.user._updateTokensIfNecessary(k);try{yield y.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const Dh=new WeakMap;function qa(w){const g=(0,l.m9)(w);return Dh.has(g)||Dh.set(g,Vu._fromUser(g)),Dh.get(g)}const Wa="__sak";class us{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Wa,"1"),this.storage.removeItem(Wa),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const or=(()=>{class w extends us{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,l.z$)();return ti(w)||wo(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Nl(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),k=this.localCache[E];x!==k&&y(E,k,x)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((we,tt,je)=>{this.notifyListeners(we,je)});const x=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const we=this.storage.getItem(x);if(y.newValue!==we)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!E)return}const k=()=>{const we=this.storage.getItem(x);!E&&this.localCache[x]===we||this.notifyListeners(x,we)},re=this.storage.getItem(x);(0,l.w1)()&&10===document.documentMode&&re!==y.newValue&&y.newValue!==y.oldValue?setTimeout(k,10):k()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const k of Array.from(x))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var x=()=>super._set,k=this;return(0,R.Z)(function*(){yield x().call(k,y,E),k.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,x=this;return(0,R.Z)(function*(){const k=yield E().call(x,y);return x.localCache[y]=JSON.stringify(k),k})()}_remove(y){var E=()=>super._remove,x=this;return(0,R.Z)(function*(){yield E().call(x,y),delete x.localCache[y]})()}}return w.type="LOCAL",w})(),cs=(()=>{class w extends us{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Yc=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(k=>k.isListeningto(y));if(E)return E;const x=new w(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,R.Z)(function*(){const x=y,{eventId:k,eventType:re,data:we}=x.data,tt=E.handlersMap[re];if(!(null==tt?void 0:tt.size))return;x.ports[0].postMessage({status:"ack",eventId:k,eventType:re});const je=Array.from(tt).map(function(){var un=(0,R.Z)(function*(zn){return zn(x.origin,we)});return function(zn){return un.apply(this,arguments)}}()),vt=yield function(w){return Promise.all(w.map(function(){var g=(0,R.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(je);x.ports[0].postMessage({status:"done",eventId:k,eventType:re,response:vt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Mo(w="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return w+y}class $l{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var x=this;return(0,R.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let re,we;return new Promise((tt,je)=>{const vt=Mo("",20);k.port1.start();const un=setTimeout(()=>{je(new Error("unsupported_event"))},E);we={messageChannel:k,onMessage(zn){const nn=zn;if(nn.data.eventId===vt)switch(nn.data.status){case"ack":clearTimeout(un),re=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),tt(nn.data.response);break;default:clearTimeout(un),clearTimeout(re),je(new Error("invalid_response"))}}},x.handlers.add(we),k.port1.addEventListener("message",we.onMessage),x.target.postMessage({eventType:g,eventId:vt,data:y},[k.port2])}).finally(()=>{we&&x.removeMessageHandler(we)})})()}}function Wt(){return window}function Ro(){return void 0!==Wt().WorkerGlobalScope&&"function"==typeof Wt().importScripts}function ko(){return(ko=(0,R.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Za="firebaseLocalStorageDb",hs="firebaseLocalStorage",za="fbase_key";class ks{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function br(w,g){return w.transaction([hs],g?"readwrite":"readonly").objectStore(hs)}function Rp(){const w=indexedDB.open(Za,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(hs,{keyPath:za})}catch(x){y(x)}}),w.addEventListener("success",(0,R.Z)(function*(){const E=w.result;E.objectStoreNames.contains(hs)?g(E):(E.close(),yield function(){const w=indexedDB.deleteDatabase(Za);return new ks(w).toPromise()}(),g(yield Rp()))}))})}function ct(w,g,y){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,R.Z)(function*(w,g,y){const E=br(w,!0).put({[za]:g,value:y});return new ks(E).toPromise()})).apply(this,arguments)}function Wn(){return(Wn=(0,R.Z)(function*(w,g){const y=br(w,!1).get(g),E=yield new ks(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Jc(w,g){const y=br(w,!0).delete(g);return new ks(y).toPromise()}const Op=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,R.Z)(function*(){return y.db||(y.db=yield Rp()),y.db})()}_withRetries(y){var E=this;return(0,R.Z)(function*(){let x=0;for(;;)try{const k=yield E._openDb();return yield y(k)}catch(k){if(x++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,R.Z)(function*(){return Ro()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,R.Z)(function*(){y.receiver=Yc._getInstance(Ro()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,R.Z)(function*(x,k){return{keyProcessed:(yield y._poll()).includes(k.key)}});return function(x,k){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,R.Z)(function*(x,k){return["keyChanged"]});return function(x,k){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,R.Z)(function*(){var E,x;if(y.activeServiceWorker=yield function(){return ko.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new $l(y.activeServiceWorker);const k=yield y.sender._send("ping",{},800);!k||(null===(E=k[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=k[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,R.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,R.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Rp();return yield ct(y,Wa,"1"),yield Jc(y,Wa),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,R.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var x=this;return(0,R.Z)(function*(){return x._withPendingWrite((0,R.Z)(function*(){return yield x._withRetries(k=>ct(k,y,E)),x.localCache[y]=E,x.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,R.Z)(function*(){const x=yield E._withRetries(k=>function(w,g){return Wn.apply(this,arguments)}(k,y));return E.localCache[y]=x,x})()}_remove(y){var E=this;return(0,R.Z)(function*(){return E._withPendingWrite((0,R.Z)(function*(){return yield E._withRetries(x=>Jc(x,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,R.Z)(function*(){const E=yield y._withRetries(re=>{const we=br(re,!1).getAll();return new ks(we).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const x=[],k=new Set;for(const{fbase_key:re,value:we}of E)k.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(we)&&(y.notifyListeners(re,we),x.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!k.has(re)&&(y.notifyListeners(re,null),x.push(re));return x})()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const k of Array.from(x))k(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,R.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Fp(w,g){return wt(w,"POST","/v2/accounts/mfaSignIn:start",Cn(w,g))}function Uu(){return(Uu=(0,R.Z)(function*(w){return(yield wt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zn(w){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=x=>{const k=Hn("internal-error");k.customData=x,y(k)},E.type="text/javascript",E.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function Po(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Zs=1e12;class Qc{constructor(g){this.auth=g,this.counter=Zs,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Ci(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||Zs;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Zs))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,R.Z)(function*(){var E;return null===(E=y._widgets.get(g||Zs))||void 0===E||E.execute(),""})()}}class Ci{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;Ue(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qr=Po("rcb"),Ps=new Ri(3e4,6e4);class Ys{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wt().grecaptcha}load(g,y=""){return Ue((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Wt().grecaptcha):new Promise((E,x)=>{const k=Wt().setTimeout(()=>{x(Hn(g,"network-request-failed"))},Ps.get());Wt()[qr]=()=>{Wt().clearTimeout(k),delete Wt()[qr];const we=Wt().grecaptcha;if(!we)return void x(Hn(g,"internal-error"));const tt=we.render;we.render=(je,vt)=>{const un=tt(je,vt);return this.counter++,un},this.hostLanguage=y,E(we)},Zn(`https://www.google.com/recaptcha/api.js??${(0,l.xO)({onload:qr,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(k),x(Hn(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Wt().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Sh{load(g){return(0,R.Z)(function*(){return new Qc(g)})()}clearedOneInstance(){}}const Fo="recaptcha",Nh={theme:"light",type:"image"};class Ja{constructor(g,y=Object.assign({},Nh),E){this.parameters=y,this.type=Fo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=En(E),this.isInvisible="invisible"===this.parameters.size,Ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;Ue(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sh:new Ys,this.validateStartingState()}verify(){var g=this;return(0,R.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(k=>{const re=we=>{!we||(g.tokenChangeListeners.delete(re),k(we))};g.tokenChangeListeners.add(re),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ue(!this.parameters.sitekey,this.auth,"argument-error"),Ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Wt()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){Ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,R.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,R.Z)(function*(){Ue(Lr()&&!Ro(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(w){return Uu.apply(this,arguments)}(g.auth);Ue(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $u{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=wi._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Ei(w,g,y){return fs.apply(this,arguments)}function fs(){return(fs=(0,R.Z)(function*(w,g,y){const E=En(w),x=yield P(E,g,(0,l.m9)(y));return new $u(x,k=>ai(E,k))})).apply(this,arguments)}function lr(w,g,y){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w);yield Ae(!1,E,"phone");const x=yield P(E.auth,g,(0,l.m9)(y));return new $u(x,k=>Ll(E,k))})).apply(this,arguments)}function D(w,g,y){return S.apply(this,arguments)}function S(){return(S=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w),x=yield P(E.auth,g,(0,l.m9)(y));return new $u(x,k=>_h(E,k))})).apply(this,arguments)}function P(w,g,y){return z.apply(this,arguments)}function z(){return(z=(0,R.Z)(function*(w,g,y){var E;const x=yield y.verify();try{let k;if(Ue("string"==typeof x,w,"argument-error"),Ue(y.type===Fo,w,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const re=k.session;if("phoneNumber"in k)return Ue("enroll"===re.type,w,"internal-error"),(yield __(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Ue("signin"===re.type,w,"internal-error");const we=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return Ue(we,w,"missing-multi-factor-info"),(yield Fp(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:we,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield gh(w,{phoneNumber:k.phoneNumber,recaptchaToken:x});return re}}finally{y._reset()}})).apply(this,arguments)}function se(w,g){return de.apply(this,arguments)}function de(){return(de=(0,R.Z)(function*(w,g){yield Nu((0,l.m9)(w),g)})).apply(this,arguments)}let Oe=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=En(y)}verifyPhoneNumber(y,E){return P(this.auth,y,(0,l.m9)(E))}static credential(y,E){return wi._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:x}=y;return E&&x?wi._fromTokenResponse(E,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function et(w,g){return g?Ar(g):(Ue(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Dt extends ri{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ns(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Ns(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Ns(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Vt(w){return Do(w.auth,new Dt(w),w.bypassAuthState)}function tn(w){const{auth:g,user:y}=w;return Ue(y,g,"internal-error"),aa(y,new Dt(w),w.bypassAuthState)}function Bt(w){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,R.Z)(function*(w){const{auth:g,user:y}=w;return Ue(y,g,"internal-error"),Nu(y,new Dt(w),w.bypassAuthState)})).apply(this,arguments)}class Rr{constructor(g,y,E,x,k=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,R.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(E,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,R.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:k,tenantId:re,error:we,type:tt}=g;if(we)return void y.reject(we);const je={auth:y.auth,requestUri:E,sessionId:x,tenantId:re||void 0,postBody:k||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(tt)(je))}catch(vt){y.reject(vt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Vt;case"linkViaPopup":case"linkViaRedirect":return Bt;case"reauthViaPopup":case"reauthViaRedirect":return tn;default:Qt(this.auth,"internal-error")}}resolve(g){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gl=new Ri(2e3,1e4);function Hu(w,g,y){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,R.Z)(function*(w,g,y){const E=En(w);vi(w,g,oi);const x=et(E,y);return new Yt(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Qa(w,g,y){return Os.apply(this,arguments)}function Os(){return(Os=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w);vi(E.auth,g,oi);const x=et(E.auth,y);return new Yt(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function Xa(w,g,y){return pa.apply(this,arguments)}function pa(){return(pa=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w);vi(E.auth,g,oi);const x=et(E.auth,y);return new Yt(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let Yt=(()=>{class w extends Rr{constructor(y,E,x,k,re){super(y,E,k,re),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,R.Z)(function*(){const E=yield y.execute();return Ue(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,R.Z)(function*(){pr(1===y.filter.length,"Popup operations only handle one event");const E=Mo();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Hn(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Gl.get())};y()}}return w.currentPopupAction=null,w})();const Lo=new Map;class y0 extends Rr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,R.Z)(function*(){let E=Lo.get(y.auth._key());if(!E){try{const k=(yield function(w,g){return ql.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(k)}catch(x){E=()=>Promise.reject(x)}Lo.set(y.auth._key(),E)}return y.bypassAuthState||Lo.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,R.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,R.Z)(function*(){})()}cleanUp(){}}function ql(){return(ql=(0,R.Z)(function*(w,g){const y=el(g),E=b_(w);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(y));return yield E._remove(y),x})).apply(this,arguments)}function Vp(w,g){return xh.apply(this,arguments)}function xh(){return(xh=(0,R.Z)(function*(w,g){return b_(w)._set(el(g),"true")})).apply(this,arguments)}function Js(){Lo.clear()}function b_(w){return Ar(w._redirectPersistence)}function el(w){return As("pendingRedirect",w.config.apiKey,w.name)}function Vo(w,g,y){return function(w,g,y){return Kn.apply(this,arguments)}(w,g,y)}function Kn(){return(Kn=(0,R.Z)(function*(w,g,y){const E=En(w);vi(w,g,oi);const x=et(E,y);return yield Vp(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function Bo(w,g,y){return function(w,g,y){return Xc.apply(this,arguments)}(w,g,y)}function Xc(){return(Xc=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w);vi(E.auth,g,oi);const x=et(E.auth,y);yield Vp(x,E.auth);const k=yield Rh(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function ed(w,g,y){return function(w,g,y){return $p.apply(this,arguments)}(w,g,y)}function $p(){return($p=(0,R.Z)(function*(w,g,y){const E=(0,l.m9)(w);vi(E.auth,g,oi);const x=et(E.auth,y);yield Ae(!1,E,g.providerId),yield Vp(x,E.auth);const k=yield Rh(E);return x._openRedirect(E.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function C_(w,g){return tl.apply(this,arguments)}function tl(){return(tl=(0,R.Z)(function*(w,g){return yield En(w)._initializationPromise,nl(w,g,!1)})).apply(this,arguments)}function nl(w,g){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,R.Z)(function*(w,g,y=!1){const E=En(w),x=et(E,g),re=yield new y0(E,x,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield E._persistUserIfCurrent(re.user),yield E._setRedirectUser(null,g)),re})).apply(this,arguments)}function Rh(w){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,R.Z)(function*(w){const g=Mo(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class td{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rl(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!rl(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Hn(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(E_(g))}saveEventToCache(g){this.cachedEventUids.add(E_(g)),this.lastProcessedEventTime=Date.now()}}function E_(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function rl({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Wl(w){return ju.apply(this,arguments)}function ju(){return(ju=(0,R.Z)(function*(w,g={}){return wt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Gu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kh=/^https?/;function Hp(){return(Hp=(0,R.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Wl(w);for(const y of g)try{if(Zl(y))return}catch(E){}Qt(w,"unauthorized-domain")})).apply(this,arguments)}function Zl(w){const g=Qr(),{protocol:y,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===E}if(!kh.test(y))return!1;if(Gu.test(w))return E===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const jp=new Ri(3e4,6e4);function rd(){const w=Wt().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let qu=null;function il(w){return qu=qu||function(w){return new Promise((g,y)=>{var E,x,k;function re(){rd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{rd(),y(Hn(w,"network-request-failed"))},timeout:jp.get()})}if(null===(x=null===(E=Wt().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(k=Wt().gapi)||void 0===k?void 0:k.load)){const we=Po("iframefcb");return Wt()[we]=()=>{gapi.load?re():y(Hn(w,"network-request-failed"))},Zn(`https://apis.google.com/js/api.js?onload=${we}`).catch(tt=>y(tt))}re()}}).catch(g=>{throw qu=null,g})}(w),qu}const b0=new Ri(5e3,15e3),Ph={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ma(w){const g=w.config;Ue(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?Nt(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:L.SDK_VERSION},x=E0.get(w.config.apiHost);x&&(E.eid=x);const k=w._getFrameworks();return k.length&&(E.fw=k.join(",")),`${y}?${(0,l.xO)(E).slice(1)}`}function Oh(){return(Oh=(0,R.Z)(function*(w){const g=yield il(w),y=Wt().gapi;return Ue(y,w,"internal-error"),g.open({where:document.body,url:ma(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ph,dontclear:!0},E=>new Promise(function(){var x=(0,R.Z)(function*(k,re){yield E.restyle({setHideOnLeave:!1});const we=Hn(w,"network-request-failed"),tt=Wt().setTimeout(()=>{re(we)},b0.get());function je(){Wt().clearTimeout(tt),k(E)}E.ping(je).then(je,()=>{re(we)})});return function(k,re){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const T0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zl{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Wp(w,g,y,E,x,k){Ue(w.config.authDomain,w,"auth-domain-config-required"),Ue(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:L.SDK_VERSION,eventId:x};if(g instanceof oi){g.setDefaultLanguage(w.languageCode),re.providerId=g.providerId||"",(0,l.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[tt,je]of Object.entries(k||{}))re[tt]=je}if(g instanceof Gn){const tt=g.getScopes().filter(je=>""!==je);tt.length>0&&(re.scopes=tt.join(","))}w.tenantId&&(re.tid=w.tenantId);const we=re;for(const tt of Object.keys(we))void 0===we[tt]&&delete we[tt];return`${function({config:w}){return w.emulator?Nt(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,l.xO)(we).slice(1)}`}const $o="webStorageSupport",ps=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cs,this._completeRedirectFn=nl}_openPopup(g,y,E,x){var k=this;return(0,R.Z)(function*(){var re;pr(null===(re=k.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const we=Wp(g,y,E,Qr(),x);return function(w,g,y,E=500,x=600){const k=Math.max((window.screen.availHeight-x)/2,0).toString(),re=Math.max((window.screen.availWidth-E)/2,0).toString();let we="";const tt=Object.assign(Object.assign({},T0),{width:E.toString(),height:x.toString(),top:k,left:re}),je=(0,l.z$)().toLowerCase();y&&(we=vo(je)?"_blank":y),ra(je)&&(g=g||"http://localhost",tt.scrollbars="yes");const vt=Object.entries(tt).reduce((zn,[nn,sl])=>`${zn}${nn}=${sl},`,"");if(function(w=(0,l.z$)()){var g;return wo(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(je)&&"_self"!==we)return function(w,g){const y=document.createElement("a");y.href=w,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",we),new zl(null);const un=window.open(g||"",we,vt);Ue(un,w,"popup-blocked");try{un.focus()}catch(zn){}return new zl(un)}(g,we,Mo())})()}_openRedirect(g,y,E,x){var k=this;return(0,R.Z)(function*(){return yield k._originValidation(g),w=Wp(g,y,E,Qr(),x),Wt().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:k}=this.eventManagers[y];return x?Promise.resolve(x):(pr(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,R.Z)(function*(){const E=yield function(w){return Oh.apply(this,arguments)}(g),x=new td(g);return E.register("authEvent",k=>(Ue(null==k?void 0:k.authEvent,g,"invalid-auth-event"),{status:x.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send($o,{type:$o},x=>{var k;const re=null===(k=null==x?void 0:x[0])||void 0===k?void 0:k[$o];void 0!==re&&y(!!re),Qt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return Hp.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Nl()||ti()||wo()}};class Yu extends class{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return fr("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Yu(g)}_finalizeEnroll(g,y,E){return function(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Cn(w,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(w,g){return wt(w,"POST","/v2/accounts/mfaSignIn:finalize",Cn(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Fh=(()=>{class w{constructor(){}static assertion(y){return Yu._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w,zp="@firebase/auth",Lh="0.19.12";class A0{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,R.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}w="Browser",(0,L._registerComponent)(new Ge.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:k,authDomain:re}=E.options;return((we,tt)=>{Ue(k&&!k.includes(":"),"invalid-api-key",{appName:we.name}),Ue(!(null==re?void 0:re.includes(":")),"argument-error",{appName:we.name});const je={apiKey:k,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sr(w)},vt=new l_(we,tt,je);return function(w,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(Ar);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(vt,y),vt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new Ge.wA("auth-internal",g=>{const y=En(g.getProvider("auth").getImmediate());return new A0(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(zp,Lh,void 0),(0,L.registerVersion)(zp,Lh,"esm2017")},3854:(ut,Ce,U)=>{"use strict";U.d(Ce,{BH:()=>Ne,LL:()=>Ve,ZR:()=>Ge,gQ:()=>fr,zI:()=>Ze,hu:()=>L,g5:()=>ie,US:()=>ye,tV:()=>$,h$:()=>J,L:()=>Q,$s:()=>wt,r3:()=>tr,Sg:()=>De,ne:()=>pr,p$:()=>Y,vZ:()=>Hn,ZB:()=>G,Lj:()=>xt,gK:()=>Lr,pd:()=>Ue,m9:()=>jr,z$:()=>Ee,GJ:()=>Tt,jU:()=>fe,ru:()=>Pe,d:()=>bt,xb:()=>Ft,w1:()=>Xe,hl:()=>Fe,uI:()=>Be,UG:()=>ce,Yr:()=>gt,b$:()=>Ke,G6:()=>Je,Mn:()=>At,w9:()=>wr,cI:()=>An,UI:()=>Qt,X3:()=>Mt,xO:()=>vi,zd:()=>_r,DV:()=>$n,ug:()=>Nt,dS:()=>Ri,Pz:()=>Zt,Dv:()=>Qr,Wj:()=>gr,lb:()=>Is,eu:()=>Ie});var R=U(8239);const L=function(X,Z){if(!X)throw ie(Z)},ie=function(X){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+X)},ue=function(X){const Z=[];let ne=0;for(let ge=0;ge<X.length;ge++){let H=X.charCodeAt(ge);H<128?Z[ne++]=H:H<2048?(Z[ne++]=H>>6|192,Z[ne++]=63&H|128):55296==(64512&H)&&ge+1<X.length&&56320==(64512&X.charCodeAt(ge+1))?(H=65536+((1023&H)<<10)+(1023&X.charCodeAt(++ge)),Z[ne++]=H>>18|240,Z[ne++]=H>>12&63|128,Z[ne++]=H>>6&63|128,Z[ne++]=63&H|128):(Z[ne++]=H>>12|224,Z[ne++]=H>>6&63|128,Z[ne++]=63&H|128)}return Z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,Z){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=Z?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let H=0;H<X.length;H+=3){const j=X[H],W=H+1<X.length,pe=W?X[H+1]:0,He=H+2<X.length,mt=He?X[H+2]:0;let en=(15&pe)<<2|mt>>6,Pn=63&mt;He||(Pn=64,W||(en=64)),ge.push(ne[j>>2],ne[(3&j)<<4|pe>>4],ne[en],ne[Pn])}return ge.join("")},encodeString(X,Z){return this.HAS_NATIVE_SUPPORT&&!Z?btoa(X):this.encodeByteArray(ue(X),Z)},decodeString(X,Z){return this.HAS_NATIVE_SUPPORT&&!Z?atob(X):function(X){const Z=[];let ne=0,ge=0;for(;ne<X.length;){const H=X[ne++];if(H<128)Z[ge++]=String.fromCharCode(H);else if(H>191&&H<224){const j=X[ne++];Z[ge++]=String.fromCharCode((31&H)<<6|63&j)}else if(H>239&&H<365){const He=((7&H)<<18|(63&X[ne++])<<12|(63&X[ne++])<<6|63&X[ne++])-65536;Z[ge++]=String.fromCharCode(55296+(He>>10)),Z[ge++]=String.fromCharCode(56320+(1023&He))}else{const j=X[ne++],W=X[ne++];Z[ge++]=String.fromCharCode((15&H)<<12|(63&j)<<6|63&W)}}return Z.join("")}(this.decodeStringToByteArray(X,Z))},decodeStringToByteArray(X,Z){this.init_();const ne=Z?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let H=0;H<X.length;){const j=ne[X.charAt(H++)],pe=H<X.length?ne[X.charAt(H)]:0;++H;const mt=H<X.length?ne[X.charAt(H)]:64;++H;const Qe=H<X.length?ne[X.charAt(H)]:64;if(++H,null==j||null==pe||null==mt||null==Qe)throw Error();ge.push(j<<2|pe>>4),64!==mt&&(ge.push(pe<<4&240|mt>>2),64!==Qe&&ge.push(mt<<6&192|Qe))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},J=function(X){const Z=ue(X);return ye.encodeByteArray(Z,!0)},Q=function(X){return J(X).replace(/\./g,"")},$=function(X){try{return ye.decodeString(X,!0)}catch(Z){console.error("base64Decode failed: ",Z)}return null};function Y(X){return G(void 0,X)}function G(X,Z){if(!(Z instanceof Object))return Z;switch(Z.constructor){case Date:return new Date(Z.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return Z}for(const ne in Z)!Z.hasOwnProperty(ne)||!le(ne)||(X[ne]=G(X[ne],Z[ne]));return X}function le(X){return"__proto__"!==X}class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Z,ne)=>{this.resolve=Z,this.reject=ne})}wrapCallback(Z){return(ne,ge)=>{ne?this.reject(ne):this.resolve(ge),"function"==typeof Z&&(this.promise.catch(()=>{}),1===Z.length?Z(ne):Z(ne,ge))}}}function De(X,Z){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=Z||"demo-project",H=X.iat||0,j=X.sub||X.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const W=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:H,exp:H+3600,auth_time:H,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},X);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(W)),""].join(".")}function Ee(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(X){return!1}}function fe(){return"object"==typeof self&&self.self===self}function Pe(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bt(){return Ee().indexOf("Electron/")>=0}function Xe(){const X=Ee();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function At(){return Ee().indexOf("MSAppHost/")>=0}function gt(){return!1}function Je(){return!ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Fe(){return"object"==typeof indexedDB}function Ie(){return new Promise((X,Z)=>{try{let ne=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(ge);H.onsuccess=()=>{H.result.close(),ne||self.indexedDB.deleteDatabase(ge),X(!0)},H.onupgradeneeded=()=>{ne=!1},H.onerror=()=>{var j;Z((null===(j=H.error)||void 0===j?void 0:j.message)||"")}}catch(ne){Z(ne)}})}function Ze(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ge extends Error{constructor(Z,ne,ge){super(ne),this.code=Z,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ve.prototype.create)}}class Ve{constructor(Z,ne,ge){this.service=Z,this.serviceName=ne,this.errors=ge}create(Z,...ne){const ge=ne[0]||{},H=`${this.service}/${Z}`,j=this.errors[Z],W=j?function(X,Z){return X.replace(Jt,(ne,ge)=>{const H=Z[ge];return null!=H?String(H):`<${ge}?>`})}(j,ge):"Error";return new Ge(H,`${this.serviceName}: ${W} (${H}).`,ge)}}const Jt=/\{\$([^}]+)}/g;function An(X){return JSON.parse(X)}function Zt(X){return JSON.stringify(X)}const _t=function(X){let Z={},ne={},ge={},H="";try{const j=X.split(".");Z=An($(j[0])||""),ne=An($(j[1])||""),H=j[2],ge=ne.d||{},delete ne.d}catch(j){}return{header:Z,claims:ne,data:ge,signature:H}},wr=function(X){const ne=_t(X).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},Tt=function(X){const Z=_t(X).claims;return"object"==typeof Z&&!0===Z.admin};function tr(X,Z){return Object.prototype.hasOwnProperty.call(X,Z)}function $n(X,Z){if(Object.prototype.hasOwnProperty.call(X,Z))return X[Z]}function Ft(X){for(const Z in X)if(Object.prototype.hasOwnProperty.call(X,Z))return!1;return!0}function Qt(X,Z,ne){const ge={};for(const H in X)Object.prototype.hasOwnProperty.call(X,H)&&(ge[H]=Z.call(ne,X[H],H,X));return ge}function Hn(X,Z){if(X===Z)return!0;const ne=Object.keys(X),ge=Object.keys(Z);for(const H of ne){if(!ge.includes(H))return!1;const j=X[H],W=Z[H];if(Wi(j)&&Wi(W)){if(!Hn(j,W))return!1}else if(j!==W)return!1}for(const H of ge)if(!ne.includes(H))return!1;return!0}function Wi(X){return null!==X&&"object"==typeof X}function vi(X){const Z=[];for(const[ne,ge]of Object.entries(X))Array.isArray(ge)?ge.forEach(H=>{Z.push(encodeURIComponent(ne)+"="+encodeURIComponent(H))}):Z.push(encodeURIComponent(ne)+"="+encodeURIComponent(ge));return Z.length?"&"+Z.join("&"):""}function _r(X){const Z={};return X.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[H,j]=ge.split("=");Z[decodeURIComponent(H)]=decodeURIComponent(j)}}),Z}function Ue(X){const Z=X.indexOf("?");if(!Z)return"";const ne=X.indexOf("#",Z);return X.substring(Z,ne>0?ne:void 0)}class fr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Z=1;Z<this.blockSize;++Z)this.pad_[Z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Z,ne){ne||(ne=0);const ge=this.W_;if("string"==typeof Z)for(let Qe=0;Qe<16;Qe++)ge[Qe]=Z.charCodeAt(ne)<<24|Z.charCodeAt(ne+1)<<16|Z.charCodeAt(ne+2)<<8|Z.charCodeAt(ne+3),ne+=4;else for(let Qe=0;Qe<16;Qe++)ge[Qe]=Z[ne]<<24|Z[ne+1]<<16|Z[ne+2]<<8|Z[ne+3],ne+=4;for(let Qe=16;Qe<80;Qe++){const en=ge[Qe-3]^ge[Qe-8]^ge[Qe-14]^ge[Qe-16];ge[Qe]=4294967295&(en<<1|en>>>31)}let mt,Et,H=this.chain_[0],j=this.chain_[1],W=this.chain_[2],pe=this.chain_[3],He=this.chain_[4];for(let Qe=0;Qe<80;Qe++){Qe<40?Qe<20?(mt=pe^j&(W^pe),Et=1518500249):(mt=j^W^pe,Et=1859775393):Qe<60?(mt=j&W|pe&(j|W),Et=2400959708):(mt=j^W^pe,Et=3395469782);const en=(H<<5|H>>>27)+mt+He+Et+ge[Qe]&4294967295;He=pe,pe=W,W=4294967295&(j<<30|j>>>2),j=H,H=en}this.chain_[0]=this.chain_[0]+H&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+W&4294967295,this.chain_[3]=this.chain_[3]+pe&4294967295,this.chain_[4]=this.chain_[4]+He&4294967295}update(Z,ne){if(null==Z)return;void 0===ne&&(ne=Z.length);const ge=ne-this.blockSize;let H=0;const j=this.buf_;let W=this.inbuf_;for(;H<ne;){if(0===W)for(;H<=ge;)this.compress_(Z,H),H+=this.blockSize;if("string"==typeof Z){for(;H<ne;)if(j[W]=Z.charCodeAt(H),++W,++H,W===this.blockSize){this.compress_(j),W=0;break}}else for(;H<ne;)if(j[W]=Z[H],++W,++H,W===this.blockSize){this.compress_(j),W=0;break}}this.inbuf_=W,this.total_+=ne}digest(){const Z=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let H=this.blockSize-1;H>=56;H--)this.buf_[H]=255&ne,ne/=256;this.compress_(this.buf_);let ge=0;for(let H=0;H<5;H++)for(let j=24;j>=0;j-=8)Z[ge]=this.chain_[H]>>j&255,++ge;return Z}}function pr(X,Z){const ne=new at(X,Z);return ne.subscribe.bind(ne)}class at{constructor(Z,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{Z(this)}).catch(ge=>{this.error(ge)})}next(Z){this.forEachObserver(ne=>{ne.next(Z)})}error(Z){this.forEachObserver(ne=>{ne.error(Z)}),this.close(Z)}complete(){this.forEachObserver(Z=>{Z.complete()}),this.close()}subscribe(Z,ne,ge){let H;if(void 0===Z&&void 0===ne&&void 0===ge)throw new Error("Missing Observer.");H=function(X,Z){if("object"!=typeof X||null===X)return!1;for(const ne of["next","error","complete"])if(ne in X&&"function"==typeof X[ne])return!0;return!1}(Z)?Z:{next:Z,error:ne,complete:ge},void 0===H.next&&(H.next=kn),void 0===H.error&&(H.error=kn),void 0===H.complete&&(H.complete=kn);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(W){}}),this.observers.push(H),j}unsubscribeOne(Z){void 0===this.observers||void 0===this.observers[Z]||(delete this.observers[Z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Z){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,Z)}sendOne(Z,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Z])try{ne(this.observers[Z])}catch(ge){"undefined"!=typeof console&&console.error&&console.error(ge)}})}close(Z){this.finalized||(this.finalized=!0,void 0!==Z&&(this.finalError=Z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kn(){}const Qr=function(X,Z,ne,ge){let H;if(ge<Z?H="at least "+Z:ge>ne&&(H=0===ne?"none":"no more than "+ne),H)throw new Error(X+" failed: Was called with "+ge+(1===ge?" argument.":" arguments.")+" Expects "+H+".")};function Lr(X,Z){return`${X} failed: ${Z} argument `}function gr(X,Z,ne,ge){if((!ge||ne)&&"function"!=typeof ne)throw new Error(Lr(X,Z)+"must be a valid function.")}function Is(X,Z,ne,ge){if((!ge||ne)&&("object"!=typeof ne||null===ne))throw new Error(Lr(X,Z)+"must be a valid context object.")}const Ri=function(X){const Z=[];let ne=0;for(let ge=0;ge<X.length;ge++){let H=X.charCodeAt(ge);if(H>=55296&&H<=56319){const j=H-55296;ge++,L(ge<X.length,"Surrogate pair missing trail surrogate."),H=65536+(j<<10)+(X.charCodeAt(ge)-56320)}H<128?Z[ne++]=H:H<2048?(Z[ne++]=H>>6|192,Z[ne++]=63&H|128):H<65536?(Z[ne++]=H>>12|224,Z[ne++]=H>>6&63|128,Z[ne++]=63&H|128):(Z[ne++]=H>>18|240,Z[ne++]=H>>12&63|128,Z[ne++]=H>>6&63|128,Z[ne++]=63&H|128)}return Z},Nt=function(X){let Z=0;for(let ne=0;ne<X.length;ne++){const ge=X.charCodeAt(ne);ge<128?Z++:ge<2048?Z+=2:ge>=55296&&ge<=56319?(Z+=4,ne++):Z+=3}return Z};function wt(X,Z=1e3,ne=2){const ge=Z*Math.pow(ne,X),H=Math.round(.5*ge*(Math.random()-.5)*2);return Math.min(144e5,ge+H)}function jr(X){return X&&X._delegate?X._delegate:X}function nt(X,Z){return new Promise((ne,ge)=>{X.onsuccess=H=>{ne(H.target.result)},X.onerror=H=>{var j;ge(`${Z}: ${null===(j=H.target.error)||void 0===j?void 0:j.message}`)}})}class Xr{constructor(Z){this._db=Z,this.objectStoreNames=this._db.objectStoreNames}transaction(Z,ne="readonly"){return new ke(this._db.transaction.call(this._db,Z,ne))}createObjectStore(Z,ne){return new Se(this._db.createObjectStore(Z,ne))}close(){this._db.close()}}class ke{constructor(Z){this._transaction=Z,this.complete=new Promise((ne,ge)=>{this._transaction.oncomplete=function(){ne()},this._transaction.onerror=()=>{ge(this._transaction.error)},this._transaction.onabort=()=>{ge(this._transaction.error)}})}objectStore(Z){return new Se(this._transaction.objectStore(Z))}}class Se{constructor(Z){this._store=Z}index(Z){return new st(this._store.index(Z))}createIndex(Z,ne,ge){return new st(this._store.createIndex(Z,ne,ge))}get(Z){return nt(this._store.get(Z),"Error reading from IndexedDB")}put(Z,ne){return nt(this._store.put(Z,ne),"Error writing to IndexedDB")}delete(Z){return nt(this._store.delete(Z),"Error deleting from IndexedDB")}clear(){return nt(this._store.clear(),"Error clearing IndexedDB object store")}}class st{constructor(Z){this._index=Z}get(Z){return nt(this._index.get(Z),"Error reading from IndexedDB")}}function Mt(X,Z,ne){return new Promise((ge,H)=>{try{const j=indexedDB.open(X,Z);j.onsuccess=W=>{ge(new Xr(W.target.result))},j.onerror=W=>{var pe;H(`Error opening indexedDB: ${null===(pe=W.target.error)||void 0===pe?void 0:pe.message}`)},j.onupgradeneeded=W=>{ne(new Xr(j.result),W.oldVersion,W.newVersion,new ke(j.transaction))}}catch(j){H(`Error opening indexedDB: ${j.message}`)}})}function xt(X){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,R.Z)(function*(X){return new Promise((Z,ne)=>{try{const ge=indexedDB.deleteDatabase(X);ge.onsuccess=()=>{Z()},ge.onerror=H=>{var j;ne(`Error deleting indexedDB database "${X}": ${null===(j=H.target.error)||void 0===j?void 0:j.message}`)}}catch(ge){ne(`Error deleting indexedDB database "${X}": ${ge.message}`)}})})).apply(this,arguments)}},8873:function(ut){ut.exports=function(){"use strict";var U=6e4,R=36e5,l="millisecond",L="second",ie="minute",ue="hour",ee="day",ye="week",J="month",Q="quarter",$="year",Y="date",G="Invalid Date",le=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Ne=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,De={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},Ee=function(Je,Fe,Ie){var Ze=String(Je);return!Ze||Ze.length>=Fe?Je:""+Array(Fe+1-Ze.length).join(Ie)+Je},Be={s:Ee,z:function(Je){var Fe=-Je.utcOffset(),Ie=Math.abs(Fe),Ze=Math.floor(Ie/60),xe=Ie%60;return(Fe<=0?"+":"-")+Ee(Ze,2,"0")+":"+Ee(xe,2,"0")},m:function Je(Fe,Ie){if(Fe.date()<Ie.date())return-Je(Ie,Fe);var Ze=12*(Ie.year()-Fe.year())+(Ie.month()-Fe.month()),xe=Fe.clone().add(Ze,J),Re=Ie-xe<0,Ge=Fe.clone().add(Ze+(Re?-1:1),J);return+(-(Ze+(Ie-xe)/(Re?xe-Ge:Ge-xe))||0)},a:function(Je){return Je<0?Math.ceil(Je)||0:Math.floor(Je)},p:function(Je){return{M:J,y:$,w:ye,d:ee,D:Y,h:ue,m:ie,s:L,ms:l,Q}[Je]||String(Je||"").toLowerCase().replace(/s$/,"")},u:function(Je){return void 0===Je}},ce="en",fe={};fe[ce]=De;var Pe=function(Je){return Je instanceof At},Ke=function Je(Fe,Ie,Ze){var xe;if(!Fe)return ce;if("string"==typeof Fe){var Re=Fe.toLowerCase();fe[Re]&&(xe=Re),Ie&&(fe[Re]=Ie,xe=Re);var Ge=Fe.split("-");if(!xe&&Ge.length>1)return Je(Ge[0])}else{var Ve=Fe.name;fe[Ve]=Fe,xe=Ve}return!Ze&&xe&&(ce=xe),xe||!Ze&&ce},bt=function(Je,Fe){if(Pe(Je))return Je.clone();var Ie="object"==typeof Fe?Fe:{};return Ie.date=Je,Ie.args=arguments,new At(Ie)},Xe=Be;Xe.l=Ke,Xe.i=Pe,Xe.w=function(Je,Fe){return bt(Je,{locale:Fe.$L,utc:Fe.$u,x:Fe.$x,$offset:Fe.$offset})};var At=function(){function Je(Ie){this.$L=Ke(Ie.locale,null,!0),this.parse(Ie)}var Fe=Je.prototype;return Fe.parse=function(Ie){this.$d=function(Ze){var xe=Ze.date,Re=Ze.utc;if(null===xe)return new Date(NaN);if(Xe.u(xe))return new Date;if(xe instanceof Date)return new Date(xe);if("string"==typeof xe&&!/Z$/i.test(xe)){var Ge=xe.match(le);if(Ge){var Ve=Ge[2]-1||0,yn=(Ge[7]||"0").substring(0,3);return Re?new Date(Date.UTC(Ge[1],Ve,Ge[3]||1,Ge[4]||0,Ge[5]||0,Ge[6]||0,yn)):new Date(Ge[1],Ve,Ge[3]||1,Ge[4]||0,Ge[5]||0,Ge[6]||0,yn)}}return new Date(xe)}(Ie),this.$x=Ie.x||{},this.init()},Fe.init=function(){var Ie=this.$d;this.$y=Ie.getFullYear(),this.$M=Ie.getMonth(),this.$D=Ie.getDate(),this.$W=Ie.getDay(),this.$H=Ie.getHours(),this.$m=Ie.getMinutes(),this.$s=Ie.getSeconds(),this.$ms=Ie.getMilliseconds()},Fe.$utils=function(){return Xe},Fe.isValid=function(){return this.$d.toString()!==G},Fe.isSame=function(Ie,Ze){var xe=bt(Ie);return this.startOf(Ze)<=xe&&xe<=this.endOf(Ze)},Fe.isAfter=function(Ie,Ze){return bt(Ie)<this.startOf(Ze)},Fe.isBefore=function(Ie,Ze){return this.endOf(Ze)<bt(Ie)},Fe.$g=function(Ie,Ze,xe){return Xe.u(Ie)?this[Ze]:this.set(xe,Ie)},Fe.unix=function(){return Math.floor(this.valueOf()/1e3)},Fe.valueOf=function(){return this.$d.getTime()},Fe.startOf=function(Ie,Ze){var xe=this,Re=!!Xe.u(Ze)||Ze,Ge=Xe.p(Ie),Ve=function(wr,Tt){var tr=Xe.w(xe.$u?Date.UTC(xe.$y,Tt,wr):new Date(xe.$y,Tt,wr),xe);return Re?tr:tr.endOf(ee)},yn=function(wr,Tt){return Xe.w(xe.toDate()[wr].apply(xe.toDate("s"),(Re?[0,0,0,0]:[23,59,59,999]).slice(Tt)),xe)},Jt=this.$W,An=this.$M,Zt=this.$D,_t="set"+(this.$u?"UTC":"");switch(Ge){case $:return Re?Ve(1,0):Ve(31,11);case J:return Re?Ve(1,An):Ve(0,An+1);case ye:var mr=this.$locale().weekStart||0,yi=(Jt<mr?Jt+7:Jt)-mr;return Ve(Re?Zt-yi:Zt+(6-yi),An);case ee:case Y:return yn(_t+"Hours",0);case ue:return yn(_t+"Minutes",1);case ie:return yn(_t+"Seconds",2);case L:return yn(_t+"Milliseconds",3);default:return this.clone()}},Fe.endOf=function(Ie){return this.startOf(Ie,!1)},Fe.$set=function(Ie,Ze){var xe,Re=Xe.p(Ie),Ge="set"+(this.$u?"UTC":""),Ve=(xe={},xe[ee]=Ge+"Date",xe[Y]=Ge+"Date",xe[J]=Ge+"Month",xe[$]=Ge+"FullYear",xe[ue]=Ge+"Hours",xe[ie]=Ge+"Minutes",xe[L]=Ge+"Seconds",xe[l]=Ge+"Milliseconds",xe)[Re],yn=Re===ee?this.$D+(Ze-this.$W):Ze;if(Re===J||Re===$){var Jt=this.clone().set(Y,1);Jt.$d[Ve](yn),Jt.init(),this.$d=Jt.set(Y,Math.min(this.$D,Jt.daysInMonth())).$d}else Ve&&this.$d[Ve](yn);return this.init(),this},Fe.set=function(Ie,Ze){return this.clone().$set(Ie,Ze)},Fe.get=function(Ie){return this[Xe.p(Ie)]()},Fe.add=function(Ie,Ze){var xe,Re=this;Ie=Number(Ie);var Ge=Xe.p(Ze),Ve=function(An){var Zt=bt(Re);return Xe.w(Zt.date(Zt.date()+Math.round(An*Ie)),Re)};if(Ge===J)return this.set(J,this.$M+Ie);if(Ge===$)return this.set($,this.$y+Ie);if(Ge===ee)return Ve(1);if(Ge===ye)return Ve(7);var yn=(xe={},xe[ie]=U,xe[ue]=R,xe[L]=1e3,xe)[Ge]||1,Jt=this.$d.getTime()+Ie*yn;return Xe.w(Jt,this)},Fe.subtract=function(Ie,Ze){return this.add(-1*Ie,Ze)},Fe.format=function(Ie){var Ze=this,xe=this.$locale();if(!this.isValid())return xe.invalidDate||G;var Re=Ie||"YYYY-MM-DDTHH:mm:ssZ",Ge=Xe.z(this),Ve=this.$H,yn=this.$m,Jt=this.$M,An=xe.weekdays,Zt=xe.months,_t=function(Tt,tr,$n,Ft){return Tt&&(Tt[tr]||Tt(Ze,Re))||$n[tr].slice(0,Ft)},mr=function(Tt){return Xe.s(Ve%12||12,Tt,"0")},yi=xe.meridiem||function(Tt,tr,$n){var Ft=Tt<12?"AM":"PM";return $n?Ft.toLowerCase():Ft},wr={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Jt+1,MM:Xe.s(Jt+1,2,"0"),MMM:_t(xe.monthsShort,Jt,Zt,3),MMMM:_t(Zt,Jt),D:this.$D,DD:Xe.s(this.$D,2,"0"),d:String(this.$W),dd:_t(xe.weekdaysMin,this.$W,An,2),ddd:_t(xe.weekdaysShort,this.$W,An,3),dddd:An[this.$W],H:String(Ve),HH:Xe.s(Ve,2,"0"),h:mr(1),hh:mr(2),a:yi(Ve,yn,!0),A:yi(Ve,yn,!1),m:String(yn),mm:Xe.s(yn,2,"0"),s:String(this.$s),ss:Xe.s(this.$s,2,"0"),SSS:Xe.s(this.$ms,3,"0"),Z:Ge};return Re.replace(Ne,function(Tt,tr){return tr||wr[Tt]||Ge.replace(":","")})},Fe.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Fe.diff=function(Ie,Ze,xe){var Re,Ge=Xe.p(Ze),Ve=bt(Ie),yn=(Ve.utcOffset()-this.utcOffset())*U,Jt=this-Ve,An=Xe.m(this,Ve);return An=(Re={},Re[$]=An/12,Re[J]=An,Re[Q]=An/3,Re[ye]=(Jt-yn)/6048e5,Re[ee]=(Jt-yn)/864e5,Re[ue]=Jt/R,Re[ie]=Jt/U,Re[L]=Jt/1e3,Re)[Ge]||Jt,xe?An:Xe.a(An)},Fe.daysInMonth=function(){return this.endOf(J).$D},Fe.$locale=function(){return fe[this.$L]},Fe.locale=function(Ie,Ze){if(!Ie)return this.$L;var xe=this.clone(),Re=Ke(Ie,Ze,!0);return Re&&(xe.$L=Re),xe},Fe.clone=function(){return Xe.w(this.$d,this)},Fe.toDate=function(){return new Date(this.valueOf())},Fe.toJSON=function(){return this.isValid()?this.toISOString():null},Fe.toISOString=function(){return this.$d.toISOString()},Fe.toString=function(){return this.$d.toUTCString()},Je}(),gt=At.prototype;return bt.prototype=gt,[["$ms",l],["$s",L],["$m",ie],["$H",ue],["$W",ee],["$M",J],["$y",$],["$D",Y]].forEach(function(Je){gt[Je[1]]=function(Fe){return this.$g(Fe,Je[0],Je[1])}}),bt.extend=function(Je,Fe){return Je.$i||(Je(Fe,At,bt),Je.$i=!0),bt},bt.locale=Ke,bt.isDayjs=Pe,bt.unix=function(Je){return bt(1e3*Je)},bt.en=fe[ce],bt.Ls=fe,bt.p={},bt}()},4292:function(ut){ut.exports=function(){"use strict";var Ce={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},U=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,R=/\d\d/,l=/\d\d?/,L=/\d*[^\s\d-_:/()]+/,ie={},ue=function(G){return(G=+G)+(G>68?1900:2e3)},ee=function(G){return function(le){this[G]=+le}},ye=[/[+-]\d\d:?(\d\d)?|Z/,function(G){(this.zone||(this.zone={})).offset=function(le){if(!le||"Z"===le)return 0;var Ne=le.match(/([+-]|\d\d)/g),De=60*Ne[1]+(+Ne[2]||0);return 0===De?0:"+"===Ne[0]?-De:De}(G)}],J=function(G){var le=ie[G];return le&&(le.indexOf?le:le.s.concat(le.f))},Q=function(G,le){var Ne,De=ie.meridiem;if(De){for(var Ee=1;Ee<=24;Ee+=1)if(G.indexOf(De(Ee,0,le))>-1){Ne=Ee>12;break}}else Ne=G===(le?"pm":"PM");return Ne},$={A:[L,function(G){this.afternoon=Q(G,!1)}],a:[L,function(G){this.afternoon=Q(G,!0)}],S:[/\d/,function(G){this.milliseconds=100*+G}],SS:[R,function(G){this.milliseconds=10*+G}],SSS:[/\d{3}/,function(G){this.milliseconds=+G}],s:[l,ee("seconds")],ss:[l,ee("seconds")],m:[l,ee("minutes")],mm:[l,ee("minutes")],H:[l,ee("hours")],h:[l,ee("hours")],HH:[l,ee("hours")],hh:[l,ee("hours")],D:[l,ee("day")],DD:[R,ee("day")],Do:[L,function(G){var le=ie.ordinal,Ne=G.match(/\d+/);if(this.day=Ne[0],le)for(var De=1;De<=31;De+=1)le(De).replace(/\[|\]/g,"")===G&&(this.day=De)}],M:[l,ee("month")],MM:[R,ee("month")],MMM:[L,function(G){var le=J("months"),Ne=(J("monthsShort")||le.map(function(De){return De.slice(0,3)})).indexOf(G)+1;if(Ne<1)throw new Error;this.month=Ne%12||Ne}],MMMM:[L,function(G){var le=J("months").indexOf(G)+1;if(le<1)throw new Error;this.month=le%12||le}],Y:[/[+-]?\d+/,ee("year")],YY:[R,function(G){this.year=ue(G)}],YYYY:[/\d{4}/,ee("year")],Z:ye,ZZ:ye};return function(G,le,Ne){Ne.p.customParseFormat=!0,G&&G.parseTwoDigitYear&&(ue=G.parseTwoDigitYear);var De=le.prototype,Ee=De.parse;De.parse=function(Be){var ce=Be.date,fe=Be.utc,Pe=Be.args;this.$u=fe;var Ke=Pe[1];if("string"==typeof Ke){var bt=!0===Pe[2],Xe=!0===Pe[3],At=bt||Xe,gt=Pe[2];Xe&&(gt=Pe[2]),ie=this.$locale(),!bt&&gt&&(ie=Ne.Ls[gt]),this.$d=function(Ze,xe,Re){try{if(["x","X"].indexOf(xe)>-1)return new Date(("X"===xe?1e3:1)*Ze);var Ge=function(G){var Ne;Ne=ie&&ie.formats;for(var De=(G=G.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(bt,Xe,At){var gt=At&&At.toUpperCase();return Xe||Ne[At]||Ce[At]||Ne[gt].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Je,Fe,Ie){return Fe||Ie.slice(1)})})).match(U),Ee=De.length,Be=0;Be<Ee;Be+=1){var ce=De[Be],fe=$[ce],Ke=fe&&fe[1];De[Be]=Ke?{regex:fe&&fe[0],parser:Ke}:ce.replace(/^\[|\]$/g,"")}return function(bt){for(var Xe={},At=0,gt=0;At<Ee;At+=1){var Je=De[At];if("string"==typeof Je)gt+=Je.length;else{var Fe=Je.regex,Ie=Je.parser,Ze=bt.slice(gt),xe=Fe.exec(Ze)[0];Ie.call(Xe,xe),bt=bt.replace(xe,"")}}return function(Re){var Ge=Re.afternoon;if(void 0!==Ge){var Ve=Re.hours;Ge?Ve<12&&(Re.hours+=12):12===Ve&&(Re.hours=0),delete Re.afternoon}}(Xe),Xe}}(xe)(Ze),Ve=Ge.year,yn=Ge.month,Jt=Ge.day,An=Ge.hours,Zt=Ge.minutes,_t=Ge.seconds,mr=Ge.milliseconds,yi=Ge.zone,wr=new Date,Tt=Jt||(Ve||yn?1:wr.getDate()),tr=Ve||wr.getFullYear(),$n=0;Ve&&!yn||($n=yn>0?yn-1:wr.getMonth());var Ft=An||0,Qt=Zt||0,Hn=_t||0,Wi=mr||0;return yi?new Date(Date.UTC(tr,$n,Tt,Ft,Qt,Hn,Wi+60*yi.offset*1e3)):Re?new Date(Date.UTC(tr,$n,Tt,Ft,Qt,Hn,Wi)):new Date(tr,$n,Tt,Ft,Qt,Hn,Wi)}catch(vi){return new Date("")}}(ce,Ke,fe),this.init(),gt&&!0!==gt&&(this.$L=this.locale(gt).$L),At&&ce!=this.format(Ke)&&(this.$d=new Date("")),ie={}}else if(Ke instanceof Array)for(var Je=Ke.length,Fe=1;Fe<=Je;Fe+=1){Pe[1]=Ke[Fe-1];var Ie=Ne.apply(this,Pe);if(Ie.isValid()){this.$d=Ie.$d,this.$L=Ie.$L,this.init();break}Fe===Je&&(this.$d=new Date(""))}else Ee.call(this,Be)}}}()},2329:(ut,Ce,U)=>{"use strict";U.d(Ce,{Mq:()=>R.getApp,C6:()=>R.getApps});var R=U(8026);(0,R.registerVersion)("firebase","9.6.11","app")},7841:(ut,Ce,U)=>{"use strict";U.d(Ce,{Z:()=>R.Z});var R=U(3394);R.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(ut,Ce,U)=>{"use strict";U.r(Ce);var R=U(8239),l=U(3394),L=U(982),ie=U(3854),ye=(U(8026),U(5422),U(3910));function J(){return window}function Y(){return(Y=(0,R.Z)(function*(H,j,W){var pe;const{BuildInfo:He}=J();(0,L.ap)(j.sessionId,"AuthEvent did not contain a session ID");const mt=yield ce(j.sessionId),Et={};return(0,L.aq)()?Et.ibi=He.packageName:(0,L.ar)()?Et.apn=He.packageName:(0,L.as)(H,"operation-not-supported-in-this-environment"),He.displayName&&(Et.appDisplayName=He.displayName),Et.sessionId=mt,(0,L.at)(H,W,j.type,void 0,null!==(pe=j.eventId)&&void 0!==pe?pe:void 0,Et)})).apply(this,arguments)}function le(){return(le=(0,R.Z)(function*(H){const{BuildInfo:j}=J(),W={};(0,L.aq)()?W.iosBundleId=j.packageName:(0,L.ar)()?W.androidPackageName=j.packageName:(0,L.as)(H,"operation-not-supported-in-this-environment"),yield(0,L.au)(H,W)})).apply(this,arguments)}function Ee(){return(Ee=(0,R.Z)(function*(H,j,W){const{cordova:pe}=J();let He=()=>{};try{yield new Promise((mt,Et)=>{let Qe=null;function en(){var rn;mt();const nr=null===(rn=pe.plugins.browsertab)||void 0===rn?void 0:rn.close;"function"==typeof nr&&nr(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Pn(){Qe||(Qe=window.setTimeout(()=>{Et((0,L.av)(H,"redirect-cancelled-by-user"))},2e3))}function mn(){"visible"===(null==document?void 0:document.visibilityState)&&Pn()}j.addPassiveListener(en),document.addEventListener("resume",Pn,!1),(0,L.ar)()&&document.addEventListener("visibilitychange",mn,!1),He=()=>{j.removePassiveListener(en),document.removeEventListener("resume",Pn,!1),document.removeEventListener("visibilitychange",mn,!1),Qe&&window.clearTimeout(Qe)}})}finally{He()}})).apply(this,arguments)}function ce(H){return fe.apply(this,arguments)}function fe(){return(fe=(0,R.Z)(function*(H){const j=Pe(H),W=yield crypto.subtle.digest("SHA-256",j);return Array.from(new Uint8Array(W)).map(He=>He.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pe(H){if((0,L.ap)(/[0-9a-zA-Z]+/.test(H),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(H);const j=new ArrayBuffer(H.length),W=new Uint8Array(j);for(let pe=0;pe<H.length;pe++)W[pe]=H.charCodeAt(pe);return W}class bt extends L.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(j)),super.onEvent(j)}initialized(){var j=this;return(0,R.Z)(function*(){yield j.initPromise})()}}function gt(H){return Je.apply(this,arguments)}function Je(){return(Je=(0,R.Z)(function*(H){const j=yield Ze()._get(xe(H));return j&&(yield Ze()._remove(xe(H))),j})).apply(this,arguments)}function Ie(){const H=[],j="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const pe=Math.floor(Math.random()*j.length);H.push(j.charAt(pe))}return H.join("")}function Ze(){return(0,L.ax)(L.b)}function xe(H){return(0,L.ay)("authEvent",H.config.apiKey,H.name)}function Ve(H){if(!(null==H?void 0:H.includes("?")))return{};const[j,...W]=H.split("?");return(0,ie.zd)(W.join("?"))}function Zt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.av)("no-auth-event")}}function Tt(){var H;return(null===(H=null==self?void 0:self.location)||void 0===H?void 0:H.protocol)||null}function $n(H=(0,ie.z$)()){return!("file:"!==Tt()&&"ionic:"!==Tt()||!H.toLowerCase().match(/iphone|ipad|ipod|android/))}function vi(){try{const H=self.localStorage,j=L.aG();if(H)return H.setItem(j,"1"),H.removeItem(j),!function(H=(0,ie.z$)()){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)||function(H=(0,ie.z$)()){return/Edge\/\d+/.test(H)}(H)}()||(0,ie.hl)()}catch(H){return _r()&&(0,ie.hl)()}return!1}function _r(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ue(){return("http:"===Tt()||"https:"===Tt()||(0,ie.ru)()||$n())&&!((0,ie.b$)()||(0,ie.UG)())&&vi()&&!_r()}function fr(){return $n()&&"undefined"!=typeof document}function at(){return(at=(0,R.Z)(function*(){return!!fr()&&new Promise(H=>{const j=setTimeout(()=>{H(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(j),H(!0)})})})).apply(this,arguments)}const pn={LOCAL:"local",NONE:"none",SESSION:"session"},kn=L.aw,Qr="persistence";function yr(H){return gr.apply(this,arguments)}function gr(){return(gr=(0,R.Z)(function*(H){yield H._initializationPromise;const j=Ri(),W=L.ay(Qr,H.config.apiKey,H.name);j&&j.setItem(W,H._getPersistence())})).apply(this,arguments)}function Ri(){var H;try{return(null===(H="undefined"!=typeof window?window:null)||void 0===H?void 0:H.sessionStorage)||null}catch(j){return null}}const Nt=L.aw;class lt{constructor(){this.browserResolver=L.ax(L.k),this.cordovaResolver=L.ax(class{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aA}_initialize(j){var W=this;return(0,R.Z)(function*(){const pe=j._key();let He=W.eventManagers.get(pe);return He||(He=new bt(j),W.eventManagers.set(pe,He),W.attachCallbackListeners(j,He)),He})()}_openPopup(j){(0,L.as)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,W,pe,He){var mt=this;return(0,R.Z)(function*(){!function(H){var j,W,pe,He,mt,Et,Qe,en,Pn,mn;const rn=J();(0,L.aw)("function"==typeof(null===(j=null==rn?void 0:rn.universalLinks)||void 0===j?void 0:j.subscribe),H,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aw)(void 0!==(null===(W=null==rn?void 0:rn.BuildInfo)||void 0===W?void 0:W.packageName),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aw)("function"==typeof(null===(mt=null===(He=null===(pe=null==rn?void 0:rn.cordova)||void 0===pe?void 0:pe.plugins)||void 0===He?void 0:He.browsertab)||void 0===mt?void 0:mt.openUrl),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aw)("function"==typeof(null===(en=null===(Qe=null===(Et=null==rn?void 0:rn.cordova)||void 0===Et?void 0:Et.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===en?void 0:en.isAvailable),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aw)("function"==typeof(null===(mn=null===(Pn=null==rn?void 0:rn.cordova)||void 0===Pn?void 0:Pn.InAppBrowser)||void 0===mn?void 0:mn.open),H,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const Et=yield mt._initialize(j);yield Et.initialized(),Et.resetRedirect(),(0,L.aB)(),yield mt._originValidation(j);const Qe=function(H,j,W=null){return{type:j,eventId:W,urlResponse:null,sessionId:Ie(),postBody:null,tenantId:H.tenantId,error:(0,L.av)(H,"no-auth-event")}}(j,pe,He);yield function(H,j){return Ze()._set(xe(H),j)}(j,Qe);const en=yield function(H,j,W){return Y.apply(this,arguments)}(j,Qe,W),Pn=yield function(H){const{cordova:j}=J();return new Promise(W=>{j.plugins.browsertab.isAvailable(pe=>{let He=null;pe?j.plugins.browsertab.openUrl(H):He=j.InAppBrowser.open(H,(0,L.ao)()?"_blank":"_system","location=yes"),W(He)})})}(en);return function(H,j,W){return Ee.apply(this,arguments)}(j,Et,Pn)})()}_isIframeWebStorageSupported(j,W){throw new Error("Method not implemented.")}_originValidation(j){const W=j._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function(H){return le.apply(this,arguments)}(j)),this.originValidationPromises[W]}attachCallbackListeners(j,W){const{universalLinks:pe,handleOpenURL:He,BuildInfo:mt}=J(),Et=setTimeout((0,R.Z)(function*(){yield gt(j),W.onEvent(Zt())}),500),Qe=function(){var mn=(0,R.Z)(function*(rn){clearTimeout(Et);const nr=yield gt(j);let ze=null;nr&&(null==rn?void 0:rn.url)&&(ze=function(H,j){var W,pe;const He=function(H){const j=Ve(H),W=j.link?decodeURIComponent(j.link):void 0,pe=Ve(W).link,He=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return Ve(He).link||He||pe||W||H}(j);if(He.includes("/__/auth/callback")){const mt=Ve(He),Et=mt.firebaseError?function(H){try{return JSON.parse(H)}catch(j){return null}}(decodeURIComponent(mt.firebaseError)):null,Qe=null===(pe=null===(W=null==Et?void 0:Et.code)||void 0===W?void 0:W.split("auth/"))||void 0===pe?void 0:pe[1],en=Qe?(0,L.av)(Qe):null;return en?{type:H.type,eventId:H.eventId,tenantId:H.tenantId,error:en,urlResponse:null,sessionId:null,postBody:null}:{type:H.type,eventId:H.eventId,tenantId:H.tenantId,sessionId:H.sessionId,urlResponse:He,postBody:null}}return null}(nr,rn.url)),W.onEvent(ze||Zt())});return function(nr){return mn.apply(this,arguments)}}();void 0!==pe&&"function"==typeof pe.subscribe&&pe.subscribe(null,Qe);const en=He,Pn=`${mt.packageName.toLowerCase()}://`;J().handleOpenURL=function(){var mn=(0,R.Z)(function*(rn){if(rn.toLowerCase().startsWith(Pn)&&Qe({url:rn}),"function"==typeof en)try{en(rn)}catch(nr){console.error(nr)}});return function(rn){return mn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aA}_initialize(j){var W=this;return(0,R.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,W,pe,He){var mt=this;return(0,R.Z)(function*(){return yield mt.selectUnderlyingResolver(),mt.assertedUnderlyingResolver._openPopup(j,W,pe,He)})()}_openRedirect(j,W,pe,He){var mt=this;return(0,R.Z)(function*(){return yield mt.selectUnderlyingResolver(),mt.assertedUnderlyingResolver._openRedirect(j,W,pe,He)})()}_isIframeWebStorageSupported(j,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,W)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return fr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,R.Z)(function*(){if(j.underlyingResolver)return;const W=yield function(){return at.apply(this,arguments)}();j.underlyingResolver=W?j.cordovaResolver:j.browserResolver})()}}function Ct(H){return H.unwrap()}function Cn(H){return Zi(H)}function Zi(H){const{_tokenResponse:j}=H instanceof ie.ZR?H.customData:H;if(!j)return null;if(!(H instanceof ie.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return L.P.credentialFromResult(H);const W=j.providerId;if(!W||W===L.o.PASSWORD)return null;let pe;switch(W){case L.o.GOOGLE:pe=L.N;break;case L.o.FACEBOOK:pe=L.M;break;case L.o.GITHUB:pe=L.Q;break;case L.o.TWITTER:pe=L.V;break;default:const{oauthIdToken:He,oauthAccessToken:mt,oauthTokenSecret:Et,pendingToken:Qe,nonce:en}=j;return mt||Et||He||Qe?Qe?W.startsWith("saml.")?L.aJ._create(W,Qe):L.I._fromParams({providerId:W,signInMethod:W,pendingToken:Qe,idToken:He,accessToken:mt}):new L.T(W).credential({idToken:He,accessToken:mt,rawNonce:en}):null}return H instanceof ie.ZR?pe.credentialFromError(H):pe.credentialFromResult(H)}function gn(H,j){return j.catch(W=>{throw W instanceof ie.ZR&&function(H,j){var W;const pe=null===(W=j.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===j.code)j.resolver=new Xr(H,L.am(H,j));else if(pe){const He=Zi(j),mt=j;He&&(mt.credential=He,mt.tenantId=pe.tenantId||void 0,mt.email=pe.email||void 0,mt.phoneNumber=pe.phoneNumber||void 0)}}(H,W),W}).then(W=>{const He=W.user;return{operationType:W.operationType,credential:Cn(W),additionalUserInfo:L.ak(W),user:ke.getOrCreate(He)}})}function jr(H,j){return nt.apply(this,arguments)}function nt(){return(nt=(0,R.Z)(function*(H,j){const W=yield j;return{verificationId:W.verificationId,confirm:pe=>gn(H,W.confirm(pe))}})).apply(this,arguments)}class Xr{constructor(j,W){this.resolver=W,this.auth=j.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return gn(Ct(this.auth),this.resolver.resolveSignIn(j))}}class ke{constructor(j){this._delegate=j,this.multiFactor=L.an(j)}static getOrCreate(j){return ke.USER_MAP.has(j)||ke.USER_MAP.set(j,new ke(j)),ke.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var W=this;return(0,R.Z)(function*(){return gn(W.auth,L.Y(W._delegate,j))})()}linkWithPhoneNumber(j,W){var pe=this;return(0,R.Z)(function*(){return jr(pe.auth,L.l(pe._delegate,j,W))})()}linkWithPopup(j){var W=this;return(0,R.Z)(function*(){return gn(W.auth,L.d(W._delegate,j,lt))})()}linkWithRedirect(j){var W=this;return(0,R.Z)(function*(){return yield yr(L.aC(W.auth)),L.g(W._delegate,j,lt)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var W=this;return(0,R.Z)(function*(){return gn(W.auth,L.Z(W._delegate,j))})()}reauthenticateWithPhoneNumber(j,W){return jr(this.auth,L.r(this._delegate,j,W))}reauthenticateWithPopup(j){return gn(this.auth,L.e(this._delegate,j,lt))}reauthenticateWithRedirect(j){var W=this;return(0,R.Z)(function*(){return yield yr(L.aC(W.auth)),L.h(W._delegate,j,lt)})()}sendEmailVerification(j){return L.aa(this._delegate,j)}unlink(j){var W=this;return(0,R.Z)(function*(){return yield L.aj(W._delegate,j),W})()}updateEmail(j){return L.af(this._delegate,j)}updatePassword(j){return L.ag(this._delegate,j)}updatePhoneNumber(j){return L.u(this._delegate,j)}updateProfile(j){return L.ae(this._delegate,j)}verifyBeforeUpdateEmail(j,W){return L.ab(this._delegate,j,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ke.USER_MAP=new WeakMap;const Se=L.aw;let st=(()=>{class H{constructor(W,pe){if(this.app=W,pe.isInitialized())return this._delegate=pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:He}=W.options;Se(He,"invalid-api-key",{appName:W.name}),Se(He,"invalid-api-key",{appName:W.name});const mt="undefined"!=typeof window?lt:void 0;this._delegate=pe.initialize({options:{persistence:xt(He,W.name),popupRedirectResolver:mt}}),this._delegate._updateErrorMap(L.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ke.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,pe){L.E(this._delegate,W,pe)}applyActionCode(W){return L.a1(this._delegate,W)}checkActionCode(W){return L.a2(this._delegate,W)}confirmPasswordReset(W,pe){return L.a0(this._delegate,W,pe)}createUserWithEmailAndPassword(W,pe){var He=this;return(0,R.Z)(function*(){return gn(He._delegate,L.a4(He._delegate,W,pe))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return L.a9(this._delegate,W)}isSignInWithEmailLink(W){return L.a7(this._delegate,W)}getRedirectResult(){var W=this;return(0,R.Z)(function*(){Se(Ue(),W._delegate,"operation-not-supported-in-this-environment");const pe=yield L.j(W._delegate,lt);return pe?gn(W._delegate,Promise.resolve(pe)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function(H,j){(0,L.aC)(H)._logFramework(j)}(this._delegate,W)}onAuthStateChanged(W,pe,He){const{next:mt,error:Et,complete:Qe}=Mt(W,pe,He);return this._delegate.onAuthStateChanged(mt,Et,Qe)}onIdTokenChanged(W,pe,He){const{next:mt,error:Et,complete:Qe}=Mt(W,pe,He);return this._delegate.onIdTokenChanged(mt,Et,Qe)}sendSignInLinkToEmail(W,pe){return L.a6(this._delegate,W,pe)}sendPasswordResetEmail(W,pe){return L.$(this._delegate,W,pe||void 0)}setPersistence(W){var pe=this;return(0,R.Z)(function*(){let He;switch(function(H,j){kn(Object.values(pn).includes(j),H,"invalid-persistence-type"),(0,ie.b$)()?kn(j!==pn.SESSION,H,"unsupported-persistence-type"):(0,ie.UG)()?kn(j===pn.NONE,H,"unsupported-persistence-type"):_r()?kn(j===pn.NONE||j===pn.LOCAL&&(0,ie.hl)(),H,"unsupported-persistence-type"):kn(j===pn.NONE||vi(),H,"unsupported-persistence-type")}(pe._delegate,W),W){case pn.SESSION:He=L.a;break;case pn.LOCAL:He=(yield L.ax(L.i)._isAvailable())?L.i:L.b;break;case pn.NONE:He=L.K;break;default:return L.as("argument-error",{appName:pe._delegate.name})}return pe._delegate.setPersistence(He)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return gn(this._delegate,L.W(this._delegate))}signInWithCredential(W){return gn(this._delegate,L.X(this._delegate,W))}signInWithCustomToken(W){return gn(this._delegate,L._(this._delegate,W))}signInWithEmailAndPassword(W,pe){return gn(this._delegate,L.a5(this._delegate,W,pe))}signInWithEmailLink(W,pe){return gn(this._delegate,L.a8(this._delegate,W,pe))}signInWithPhoneNumber(W,pe){return jr(this._delegate,L.s(this._delegate,W,pe))}signInWithPopup(W){var pe=this;return(0,R.Z)(function*(){return Se(Ue(),pe._delegate,"operation-not-supported-in-this-environment"),gn(pe._delegate,L.c(pe._delegate,W,lt))})()}signInWithRedirect(W){var pe=this;return(0,R.Z)(function*(){return Se(Ue(),pe._delegate,"operation-not-supported-in-this-environment"),yield yr(pe._delegate),L.f(pe._delegate,W,lt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return L.a3(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return H.Persistence=pn,H})();function Mt(H,j,W){let pe=H;"function"!=typeof H&&({next:pe,error:j,complete:W}=H);const He=pe;return{next:Et=>He(Et&&ke.getOrCreate(Et)),error:j,complete:W}}function xt(H,j){const W=function(H,j){const W=Ri();if(!W)return[];const pe=L.ay(Qr,H,j);switch(W.getItem(pe)){case pn.NONE:return[L.K];case pn.LOCAL:return[L.i,L.a];case pn.SESSION:return[L.a];default:return[]}}(H,j);if("undefined"!=typeof self&&!W.includes(L.i)&&W.push(L.i),"undefined"!=typeof window)for(const pe of[L.b,L.a])W.includes(pe)||W.push(pe);return W.includes(L.K)||W.push(L.K),W}class Xt{constructor(){this.providerId="phone",this._delegate=new L.P(Ct(l.Z.auth()))}static credential(j,W){return L.P.credential(j,W)}verifyPhoneNumber(j,W){return this._delegate.verifyPhoneNumber(j,W)}unwrap(){return this._delegate}}Xt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Xt.PROVIDER_ID=L.P.PROVIDER_ID;const X=L.aw;var H;(H=l.Z).INTERNAL.registerComponent(new ye.wA("auth-compat",j=>{const W=j.getProvider("app-compat").getImmediate(),pe=j.getProvider("auth");return new st(W,pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.L,FacebookAuthProvider:L.M,GithubAuthProvider:L.Q,GoogleAuthProvider:L.N,OAuthProvider:L.T,SAMLAuthProvider:L.U,PhoneAuthProvider:Xt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:class{constructor(j,W,pe=l.Z.app()){var He;X(null===(He=pe.options)||void 0===He?void 0:He.apiKey,"invalid-api-key",{appName:pe.name}),this._delegate=new L.R(j,W,pe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:L.V,Auth:st,AuthCredential:L.G,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),H.registerVersion("@firebase/auth-compat","0.2.12")},1593:(ut,Ce,U)=>{"use strict";U.d(Ce,{P:()=>ye});var R=U(9193),l=U(5917),L=U(7574);class ye{constructor(Q,$,Y){this.kind=Q,this.value=$,this.error=Y,this.hasValue="N"===Q}observe(Q){switch(this.kind){case"N":return Q.next&&Q.next(this.value);case"E":return Q.error&&Q.error(this.error);case"C":return Q.complete&&Q.complete()}}do(Q,$,Y){switch(this.kind){case"N":return Q&&Q(this.value);case"E":return $&&$(this.error);case"C":return Y&&Y()}}accept(Q,$,Y){return Q&&"function"==typeof Q.next?this.observe(Q):this.do(Q,$,Y)}toObservable(){switch(this.kind){case"N":return(0,l.of)(this.value);case"E":return J=this.error,new L.y($=>$.error(J));case"C":return(0,R.c)()}var J;throw new Error("unexpected notification kind value")}static createNext(Q){return void 0!==Q?new ye("N",Q):ye.undefinedValueNotification}static createError(Q){return new ye("E",void 0,Q)}static createComplete(){return ye.completeNotification}}ye.completeNotification=new ye("C"),ye.undefinedValueNotification=new ye("N",void 0)},7574:(ut,Ce,U)=>{"use strict";U.d(Ce,{y:()=>Y});var R=U(7393),L=U(9181),ie=U(6490),ee=U(6554),ye=U(4487);var $=U(2494);let Y=(()=>{class le{constructor(De){this._isScalar=!1,De&&(this._subscribe=De)}lift(De){const Ee=new le;return Ee.source=this,Ee.operator=De,Ee}subscribe(De,Ee,Be){const{operator:ce}=this,fe=function(le,Ne,De){if(le){if(le instanceof R.L)return le;if(le[L.b])return le[L.b]()}return le||Ne||De?new R.L(le,Ne,De):new R.L(ie.c)}(De,Ee,Be);if(fe.add(ce?ce.call(fe,this.source):this.source||$.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),$.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(De){try{return this._subscribe(De)}catch(Ee){$.v.useDeprecatedSynchronousErrorHandling&&(De.syncErrorThrown=!0,De.syncErrorValue=Ee),function(le){for(;le;){const{closed:Ne,destination:De,isStopped:Ee}=le;if(Ne||Ee)return!1;le=De&&De instanceof R.L?De:null}return!0}(De)?De.error(Ee):console.warn(Ee)}}forEach(De,Ee){return new(Ee=G(Ee))((Be,ce)=>{let fe;fe=this.subscribe(Pe=>{try{De(Pe)}catch(Ke){ce(Ke),fe&&fe.unsubscribe()}},ce,Be)})}_subscribe(De){const{source:Ee}=this;return Ee&&Ee.subscribe(De)}[ee.L](){return this}pipe(...De){return 0===De.length?this:function(le){return 0===le.length?ye.y:1===le.length?le[0]:function(De){return le.reduce((Ee,Be)=>Be(Ee),De)}}(De)(this)}toPromise(De){return new(De=G(De))((Ee,Be)=>{let ce;this.subscribe(fe=>ce=fe,fe=>Be(fe),()=>Ee(ce))})}}return le.create=Ne=>new le(Ne),le})();function G(le){if(le||(le=$.v.Promise||Promise),!le)throw new Error("no Promise impl found");return le}},6490:(ut,Ce,U)=>{"use strict";U.d(Ce,{c:()=>L});var R=U(2494),l=U(4449);const L={closed:!0,next(ie){},error(ie){if(R.v.useDeprecatedSynchronousErrorHandling)throw ie;(0,l.z)(ie)},complete(){}}},9765:(ut,Ce,U)=>{"use strict";U.d(Ce,{Yc:()=>ye,xQ:()=>J});var R=U(7574),l=U(7393),L=U(5319),ie=U(7971),ue=U(8858),ee=U(9181);class ye extends l.L{constructor(Y){super(Y),this.destination=Y}}let J=(()=>{class $ extends R.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new ye(this)}lift(G){const le=new Q(this,this);return le.operator=G,le}next(G){if(this.closed)throw new ie.N;if(!this.isStopped){const{observers:le}=this,Ne=le.length,De=le.slice();for(let Ee=0;Ee<Ne;Ee++)De[Ee].next(G)}}error(G){if(this.closed)throw new ie.N;this.hasError=!0,this.thrownError=G,this.isStopped=!0;const{observers:le}=this,Ne=le.length,De=le.slice();for(let Ee=0;Ee<Ne;Ee++)De[Ee].error(G);this.observers.length=0}complete(){if(this.closed)throw new ie.N;this.isStopped=!0;const{observers:G}=this,le=G.length,Ne=G.slice();for(let De=0;De<le;De++)Ne[De].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(G){if(this.closed)throw new ie.N;return super._trySubscribe(G)}_subscribe(G){if(this.closed)throw new ie.N;return this.hasError?(G.error(this.thrownError),L.w.EMPTY):this.isStopped?(G.complete(),L.w.EMPTY):(this.observers.push(G),new ue.W(this,G))}asObservable(){const G=new R.y;return G.source=this,G}}return $.create=(Y,G)=>new Q(Y,G),$})();class Q extends J{constructor(Y,G){super(),this.destination=Y,this.source=G}next(Y){const{destination:G}=this;G&&G.next&&G.next(Y)}error(Y){const{destination:G}=this;G&&G.error&&this.destination.error(Y)}complete(){const{destination:Y}=this;Y&&Y.complete&&this.destination.complete()}_subscribe(Y){const{source:G}=this;return G?this.source.subscribe(Y):L.w.EMPTY}}},8858:(ut,Ce,U)=>{"use strict";U.d(Ce,{W:()=>l});var R=U(5319);class l extends R.w{constructor(ie,ue){super(),this.subject=ie,this.subscriber=ue,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ie=this.subject,ue=ie.observers;if(this.subject=null,!ue||0===ue.length||ie.isStopped||ie.closed)return;const ee=ue.indexOf(this.subscriber);-1!==ee&&ue.splice(ee,1)}}},7393:(ut,Ce,U)=>{"use strict";U.d(Ce,{L:()=>ye});var R=U(9105),l=U(6490),L=U(5319),ie=U(9181),ue=U(2494),ee=U(4449);class ye extends L.w{constructor($,Y,G){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l.c;break;case 1:if(!$){this.destination=l.c;break}if("object"==typeof $){$ instanceof ye?(this.syncErrorThrowable=$.syncErrorThrowable,this.destination=$,$.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,$));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,$,Y,G)}}[ie.b](){return this}static create($,Y,G){const le=new ye($,Y,G);return le.syncErrorThrowable=!1,le}next($){this.isStopped||this._next($)}error($){this.isStopped||(this.isStopped=!0,this._error($))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next($){this.destination.next($)}_error($){this.destination.error($),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:$}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=$,this}}class J extends ye{constructor($,Y,G,le){super(),this._parentSubscriber=$;let Ne,De=this;(0,R.m)(Y)?Ne=Y:Y&&(Ne=Y.next,G=Y.error,le=Y.complete,Y!==l.c&&(De=Object.create(Y),(0,R.m)(De.unsubscribe)&&this.add(De.unsubscribe.bind(De)),De.unsubscribe=this.unsubscribe.bind(this))),this._context=De,this._next=Ne,this._error=G,this._complete=le}next($){if(!this.isStopped&&this._next){const{_parentSubscriber:Y}=this;ue.v.useDeprecatedSynchronousErrorHandling&&Y.syncErrorThrowable?this.__tryOrSetError(Y,this._next,$)&&this.unsubscribe():this.__tryOrUnsub(this._next,$)}}error($){if(!this.isStopped){const{_parentSubscriber:Y}=this,{useDeprecatedSynchronousErrorHandling:G}=ue.v;if(this._error)G&&Y.syncErrorThrowable?(this.__tryOrSetError(Y,this._error,$),this.unsubscribe()):(this.__tryOrUnsub(this._error,$),this.unsubscribe());else if(Y.syncErrorThrowable)G?(Y.syncErrorValue=$,Y.syncErrorThrown=!0):(0,ee.z)($),this.unsubscribe();else{if(this.unsubscribe(),G)throw $;(0,ee.z)($)}}}complete(){if(!this.isStopped){const{_parentSubscriber:$}=this;if(this._complete){const Y=()=>this._complete.call(this._context);ue.v.useDeprecatedSynchronousErrorHandling&&$.syncErrorThrowable?(this.__tryOrSetError($,Y),this.unsubscribe()):(this.__tryOrUnsub(Y),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub($,Y){try{$.call(this._context,Y)}catch(G){if(this.unsubscribe(),ue.v.useDeprecatedSynchronousErrorHandling)throw G;(0,ee.z)(G)}}__tryOrSetError($,Y,G){if(!ue.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{Y.call(this._context,G)}catch(le){return ue.v.useDeprecatedSynchronousErrorHandling?($.syncErrorValue=le,$.syncErrorThrown=!0,!0):((0,ee.z)(le),!0)}return!1}_unsubscribe(){const{_parentSubscriber:$}=this;this._context=null,this._parentSubscriber=null,$.unsubscribe()}}},5319:(ut,Ce,U)=>{"use strict";U.d(Ce,{w:()=>ee});var R=U(9796),l=U(1555),L=U(9105);const ue=(()=>{function J(Q){return Error.call(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map(($,Y)=>`${Y+1}) ${$.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q,this}return J.prototype=Object.create(Error.prototype),J})();class ee{constructor(Q){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Q&&(this._ctorUnsubscribe=!0,this._unsubscribe=Q)}unsubscribe(){let Q;if(this.closed)return;let{_parentOrParents:$,_ctorUnsubscribe:Y,_unsubscribe:G,_subscriptions:le}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,$ instanceof ee)$.remove(this);else if(null!==$)for(let Ne=0;Ne<$.length;++Ne)$[Ne].remove(this);if((0,L.m)(G)){Y&&(this._unsubscribe=void 0);try{G.call(this)}catch(Ne){Q=Ne instanceof ue?ye(Ne.errors):[Ne]}}if((0,R.k)(le)){let Ne=-1,De=le.length;for(;++Ne<De;){const Ee=le[Ne];if((0,l.K)(Ee))try{Ee.unsubscribe()}catch(Be){Q=Q||[],Be instanceof ue?Q=Q.concat(ye(Be.errors)):Q.push(Be)}}}if(Q)throw new ue(Q)}add(Q){let $=Q;if(!Q)return ee.EMPTY;switch(typeof Q){case"function":$=new ee(Q);case"object":if($===this||$.closed||"function"!=typeof $.unsubscribe)return $;if(this.closed)return $.unsubscribe(),$;if(!($ instanceof ee)){const le=$;$=new ee,$._subscriptions=[le]}break;default:throw new Error("unrecognized teardown "+Q+" added to Subscription.")}let{_parentOrParents:Y}=$;if(null===Y)$._parentOrParents=this;else if(Y instanceof ee){if(Y===this)return $;$._parentOrParents=[Y,this]}else{if(-1!==Y.indexOf(this))return $;Y.push(this)}const G=this._subscriptions;return null===G?this._subscriptions=[$]:G.push($),$}remove(Q){const $=this._subscriptions;if($){const Y=$.indexOf(Q);-1!==Y&&$.splice(Y,1)}}}var J;function ye(J){return J.reduce((Q,$)=>Q.concat($ instanceof ue?$.errors:$),[])}ee.EMPTY=((J=new ee).closed=!0,J)},2494:(ut,Ce,U)=>{"use strict";U.d(Ce,{v:()=>l});let R=!1;const l={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ie=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ie.stack)}else R&&console.log("RxJS: Back to a better error behavior. Thank you. <3");R=L},get useDeprecatedSynchronousErrorHandling(){return R}}},5345:(ut,Ce,U)=>{"use strict";U.d(Ce,{IY:()=>ie,Ds:()=>ee,ft:()=>J});var R=U(7393),l=U(7574),L=U(7444);class ie extends R.L{constructor($){super(),this.parent=$}_next($){this.parent.notifyNext($)}_error($){this.parent.notifyError($),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends R.L{notifyNext($){this.destination.next($)}notifyError($){this.destination.error($)}notifyComplete(){this.destination.complete()}}function J(Q,$){if($.closed)return;if(Q instanceof l.y)return Q.subscribe($);let Y;try{Y=(0,L.s)(Q)($)}catch(G){$.error(G)}return Y}},2441:(ut,Ce,U)=>{"use strict";U.d(Ce,{c:()=>ue,N:()=>ee});var R=U(9765),l=U(7574),L=U(5319),ie=U(1307);class ue extends l.y{constructor(Y,G){super(),this.source=Y,this.subjectFactory=G,this._refCount=0,this._isComplete=!1}_subscribe(Y){return this.getSubject().subscribe(Y)}getSubject(){const Y=this._subject;return(!Y||Y.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let Y=this._connection;return Y||(this._isComplete=!1,Y=this._connection=new L.w,Y.add(this.source.subscribe(new ye(this.getSubject(),this))),Y.closed&&(this._connection=null,Y=L.w.EMPTY)),Y}refCount(){return(0,ie.x)()(this)}}const ee=(()=>{const $=ue.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:$._subscribe},_isComplete:{value:$._isComplete,writable:!0},getSubject:{value:$.getSubject},connect:{value:$.connect},refCount:{value:$.refCount}}})();class ye extends R.Yc{constructor(Y,G){super(Y),this.connectable=G}_error(Y){this._unsubscribe(),super._error(Y)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const Y=this.connectable;if(Y){this.connectable=null;const G=Y._connection;Y._refCount=0,Y._subject=null,Y._connection=null,G&&G.unsubscribe()}}}},9193:(ut,Ce,U)=>{"use strict";U.d(Ce,{E:()=>l,c:()=>L});var R=U(7574);const l=new R.y(ue=>ue.complete());function L(ue){return ue?function(ue){return new R.y(ee=>ue.schedule(()=>ee.complete()))}(ue):l}},4402:(ut,Ce,U)=>{"use strict";U.d(Ce,{D:()=>De});var R=U(7574),l=U(7444),L=U(5319),ie=U(6554),ye=U(4087),J=U(377),Y=U(4072),G=U(9489);function De(Ee,Be){return Be?function(Ee,Be){if(null!=Ee){if(function(Ee){return Ee&&"function"==typeof Ee[ie.L]}(Ee))return function(Ee,Be){return new R.y(ce=>{const fe=new L.w;return fe.add(Be.schedule(()=>{const Pe=Ee[ie.L]();fe.add(Pe.subscribe({next(Ke){fe.add(Be.schedule(()=>ce.next(Ke)))},error(Ke){fe.add(Be.schedule(()=>ce.error(Ke)))},complete(){fe.add(Be.schedule(()=>ce.complete()))}}))})),fe})}(Ee,Be);if((0,Y.t)(Ee))return function(Ee,Be){return new R.y(ce=>{const fe=new L.w;return fe.add(Be.schedule(()=>Ee.then(Pe=>{fe.add(Be.schedule(()=>{ce.next(Pe),fe.add(Be.schedule(()=>ce.complete()))}))},Pe=>{fe.add(Be.schedule(()=>ce.error(Pe)))}))),fe})}(Ee,Be);if((0,G.z)(Ee))return(0,ye.r)(Ee,Be);if(function(Ee){return Ee&&"function"==typeof Ee[J.hZ]}(Ee)||"string"==typeof Ee)return function(Ee,Be){if(!Ee)throw new Error("Iterable cannot be null");return new R.y(ce=>{const fe=new L.w;let Pe;return fe.add(()=>{Pe&&"function"==typeof Pe.return&&Pe.return()}),fe.add(Be.schedule(()=>{Pe=Ee[J.hZ](),fe.add(Be.schedule(function(){if(ce.closed)return;let Ke,bt;try{const Xe=Pe.next();Ke=Xe.value,bt=Xe.done}catch(Xe){return void ce.error(Xe)}bt?ce.complete():(ce.next(Ke),this.schedule())}))})),fe})}(Ee,Be)}throw new TypeError((null!==Ee&&typeof Ee||Ee)+" is not observable")}(Ee,Be):Ee instanceof R.y?Ee:new R.y((0,l.s)(Ee))}},6693:(ut,Ce,U)=>{"use strict";U.d(Ce,{n:()=>ie});var R=U(7574),l=U(5015),L=U(4087);function ie(ue,ee){return ee?(0,L.r)(ue,ee):new R.y((0,l.V)(ue))}},6682:(ut,Ce,U)=>{"use strict";U.d(Ce,{T:()=>ue});var R=U(7574),l=U(4869),L=U(3282),ie=U(6693);function ue(...ee){let ye=Number.POSITIVE_INFINITY,J=null,Q=ee[ee.length-1];return(0,l.K)(Q)?(J=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(ye=ee.pop())):"number"==typeof Q&&(ye=ee.pop()),null===J&&1===ee.length&&ee[0]instanceof R.y?ee[0]:(0,L.J)(ye)((0,ie.n)(ee,J))}},5917:(ut,Ce,U)=>{"use strict";U.d(Ce,{of:()=>ie});var R=U(4869),l=U(6693),L=U(4087);function ie(...ue){let ee=ue[ue.length-1];return(0,R.K)(ee)?(ue.pop(),(0,L.r)(ue,ee)):(0,l.n)(ue)}},8002:(ut,Ce,U)=>{"use strict";U.d(Ce,{U:()=>l});var R=U(7393);function l(ue,ee){return function(J){if("function"!=typeof ue)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return J.lift(new L(ue,ee))}}class L{constructor(ee,ye){this.project=ee,this.thisArg=ye}call(ee,ye){return ye.subscribe(new ie(ee,this.project,this.thisArg))}}class ie extends R.L{constructor(ee,ye,J){super(ee),this.project=ye,this.count=0,this.thisArg=J||this}_next(ee){let ye;try{ye=this.project.call(this.thisArg,ee,this.count++)}catch(J){return void this.destination.error(J)}this.destination.next(ye)}}},3282:(ut,Ce,U)=>{"use strict";U.d(Ce,{J:()=>L});var R=U(9773),l=U(4487);function L(ie=Number.POSITIVE_INFINITY){return(0,R.zg)(l.y,ie)}},9773:(ut,Ce,U)=>{"use strict";U.d(Ce,{zg:()=>ie});var R=U(8002),l=U(4402),L=U(5345);function ie(J,Q,$=Number.POSITIVE_INFINITY){return"function"==typeof Q?Y=>Y.pipe(ie((G,le)=>(0,l.D)(J(G,le)).pipe((0,R.U)((Ne,De)=>Q(G,Ne,le,De))),$)):("number"==typeof Q&&($=Q),Y=>Y.lift(new ue(J,$)))}class ue{constructor(Q,$=Number.POSITIVE_INFINITY){this.project=Q,this.concurrent=$}call(Q,$){return $.subscribe(new ee(Q,this.project,this.concurrent))}}class ee extends L.Ds{constructor(Q,$,Y=Number.POSITIVE_INFINITY){super(Q),this.project=$,this.concurrent=Y,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Q){this.active<this.concurrent?this._tryNext(Q):this.buffer.push(Q)}_tryNext(Q){let $;const Y=this.index++;try{$=this.project(Q,Y)}catch(G){return void this.destination.error(G)}this.active++,this._innerSub($)}_innerSub(Q){const $=new L.IY(this),Y=this.destination;Y.add($);const G=(0,L.ft)(Q,$);G!==$&&Y.add(G)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Q){this.destination.next(Q)}notifyComplete(){const Q=this.buffer;this.active--,Q.length>0?this._next(Q.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(ut,Ce,U)=>{"use strict";U.d(Ce,{QV:()=>L,ht:()=>ue});var R=U(7393),l=U(1593);function L(ye,J=0){return function($){return $.lift(new ie(ye,J))}}class ie{constructor(J,Q=0){this.scheduler=J,this.delay=Q}call(J,Q){return Q.subscribe(new ue(J,this.scheduler,this.delay))}}class ue extends R.L{constructor(J,Q,$=0){super(J),this.scheduler=Q,this.delay=$}static dispatch(J){const{notification:Q,destination:$}=J;Q.observe($),this.unsubscribe()}scheduleMessage(J){this.destination.add(this.scheduler.schedule(ue.dispatch,this.delay,new ee(J,this.destination)))}_next(J){this.scheduleMessage(l.P.createNext(J))}_error(J){this.scheduleMessage(l.P.createError(J)),this.unsubscribe()}_complete(){this.scheduleMessage(l.P.createComplete()),this.unsubscribe()}}class ee{constructor(J,Q){this.notification=J,this.destination=Q}}},1307:(ut,Ce,U)=>{"use strict";U.d(Ce,{x:()=>l});var R=U(7393);function l(){return function(ee){return ee.lift(new L(ee))}}class L{constructor(ee){this.connectable=ee}call(ee,ye){const{connectable:J}=this;J._refCount++;const Q=new ie(ee,J),$=ye.subscribe(Q);return Q.closed||(Q.connection=J.connect()),$}}class ie extends R.L{constructor(ee,ye){super(ee),this.connectable=ye}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const ye=ee._refCount;if(ye<=0)return void(this.connection=null);if(ee._refCount=ye-1,ye>1)return void(this.connection=null);const{connection:J}=this,Q=ee._connection;this.connection=null,Q&&(!J||Q===J)&&Q.unsubscribe()}}},8819:(ut,Ce,U)=>{"use strict";U.d(Ce,{B:()=>ye});var R=U(2441);var ie=U(1307),ue=U(9765);function ee(){return new ue.xQ}function ye(){return J=>(0,ie.x)()(function(J,Q){return function(Y){let G;G="function"==typeof J?J:function(){return J};const le=Object.create(Y,R.N);return le.source=Y,le.subjectFactory=G,le}}(ee)(J))}},2639:(ut,Ce,U)=>{"use strict";U.d(Ce,{R:()=>Ee});var R=U(7574);let l=1;const L=Promise.resolve(),ie={};function ue(ce){return ce in ie&&(delete ie[ce],!0)}const ee={setImmediate(ce){const fe=l++;return ie[fe]=!0,L.then(()=>ue(fe)&&ce()),fe},clearImmediate(ce){ue(ce)}};var J=U(6465),$=U(6102);const le=new class extends $.v{flush(fe){this.active=!0,this.scheduled=void 0;const{actions:Pe}=this;let Ke,bt=-1,Xe=Pe.length;fe=fe||Pe.shift();do{if(Ke=fe.execute(fe.state,fe.delay))break}while(++bt<Xe&&(fe=Pe.shift()));if(this.active=!1,Ke){for(;++bt<Xe&&(fe=Pe.shift());)fe.unsubscribe();throw Ke}}}(class extends J.o{constructor(fe,Pe){super(fe,Pe),this.scheduler=fe,this.work=Pe}requestAsyncId(fe,Pe,Ke=0){return null!==Ke&&Ke>0?super.requestAsyncId(fe,Pe,Ke):(fe.actions.push(this),fe.scheduled||(fe.scheduled=ee.setImmediate(fe.flush.bind(fe,null))))}recycleAsyncId(fe,Pe,Ke=0){if(null!==Ke&&Ke>0||null===Ke&&this.delay>0)return super.recycleAsyncId(fe,Pe,Ke);0===fe.actions.length&&(ee.clearImmediate(Pe),fe.scheduled=void 0)}});var Ne=U(6561);class De extends R.y{constructor(fe,Pe=0,Ke=le){super(),this.source=fe,this.delayTime=Pe,this.scheduler=Ke,(!(0,Ne.k)(Pe)||Pe<0)&&(this.delayTime=0),(!Ke||"function"!=typeof Ke.schedule)&&(this.scheduler=le)}static create(fe,Pe=0,Ke=le){return new De(fe,Pe,Ke)}static dispatch(fe){const{source:Pe,subscriber:Ke}=fe;return this.add(Pe.subscribe(Ke))}_subscribe(fe){return this.scheduler.schedule(De.dispatch,this.delayTime,{source:this.source,subscriber:fe})}}function Ee(ce,fe=0){return function(Ke){return Ke.lift(new Be(ce,fe))}}class Be{constructor(fe,Pe){this.scheduler=fe,this.delay=Pe}call(fe,Pe){return new De(Pe,this.delay,this.scheduler).subscribe(fe)}}},8307:(ut,Ce,U)=>{"use strict";U.d(Ce,{b:()=>ie});var R=U(7393),l=U(8640),L=U(9105);function ie(ye,J,Q){return function(Y){return Y.lift(new ue(ye,J,Q))}}class ue{constructor(J,Q,$){this.nextOrObserver=J,this.error=Q,this.complete=$}call(J,Q){return Q.subscribe(new ee(J,this.nextOrObserver,this.error,this.complete))}}class ee extends R.L{constructor(J,Q,$,Y){super(J),this._tapNext=l.Z,this._tapError=l.Z,this._tapComplete=l.Z,this._tapError=$||l.Z,this._tapComplete=Y||l.Z,(0,L.m)(Q)?(this._context=this,this._tapNext=Q):Q&&(this._context=Q,this._tapNext=Q.next||l.Z,this._tapError=Q.error||l.Z,this._tapComplete=Q.complete||l.Z)}_next(J){try{this._tapNext.call(this._context,J)}catch(Q){return void this.destination.error(Q)}this.destination.next(J)}_error(J){try{this._tapError.call(this._context,J)}catch(Q){return void this.destination.error(Q)}this.destination.error(J)}_complete(){try{this._tapComplete.call(this._context)}catch(J){return void this.destination.error(J)}return this.destination.complete()}}},4087:(ut,Ce,U)=>{"use strict";U.d(Ce,{r:()=>L});var R=U(7574),l=U(5319);function L(ie,ue){return new R.y(ee=>{const ye=new l.w;let J=0;return ye.add(ue.schedule(function(){J!==ie.length?(ee.next(ie[J++]),ee.closed||ye.add(this.schedule())):ee.complete()})),ye})}},6465:(ut,Ce,U)=>{"use strict";U.d(Ce,{o:()=>L});var R=U(5319);class l extends R.w{constructor(ue,ee){super()}schedule(ue,ee=0){return this}}class L extends l{constructor(ue,ee){super(ue,ee),this.scheduler=ue,this.work=ee,this.pending=!1}schedule(ue,ee=0){if(this.closed)return this;this.state=ue;const ye=this.id,J=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(J,ye,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(J,this.id,ee),this}requestAsyncId(ue,ee,ye=0){return setInterval(ue.flush.bind(ue,this),ye)}recycleAsyncId(ue,ee,ye=0){if(null!==ye&&this.delay===ye&&!1===this.pending)return ee;clearInterval(ee)}execute(ue,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(ue,ee);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ee){let J,ye=!1;try{this.work(ue)}catch(Q){ye=!0,J=!!Q&&Q||new Error(Q)}if(ye)return this.unsubscribe(),J}_unsubscribe(){const ue=this.id,ee=this.scheduler,ye=ee.actions,J=ye.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==J&&ye.splice(J,1),null!=ue&&(this.id=this.recycleAsyncId(ee,ue,null)),this.delay=null}}},6102:(ut,Ce,U)=>{"use strict";U.d(Ce,{v:()=>l});let R=(()=>{class L{constructor(ue,ee=L.now){this.SchedulerAction=ue,this.now=ee}schedule(ue,ee=0,ye){return new this.SchedulerAction(this,ue).schedule(ye,ee)}}return L.now=()=>Date.now(),L})();class l extends R{constructor(ie,ue=R.now){super(ie,()=>l.delegate&&l.delegate!==this?l.delegate.now():ue()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ie,ue=0,ee){return l.delegate&&l.delegate!==this?l.delegate.schedule(ie,ue,ee):super.schedule(ie,ue,ee)}flush(ie){const{actions:ue}=this;if(this.active)return void ue.push(ie);let ee;this.active=!0;do{if(ee=ie.execute(ie.state,ie.delay))break}while(ie=ue.shift());if(this.active=!1,ee){for(;ie=ue.shift();)ie.unsubscribe();throw ee}}}},3637:(ut,Ce,U)=>{"use strict";U.d(Ce,{z:()=>L,P:()=>ie});var R=U(6465);const L=new(U(6102).v)(R.o),ie=L},7771:(ut,Ce,U)=>{"use strict";U.d(Ce,{c:()=>ee,N:()=>ue});var R=U(6465),L=U(6102);const ue=new class extends L.v{}(class extends R.o{constructor(J,Q){super(J,Q),this.scheduler=J,this.work=Q}schedule(J,Q=0){return Q>0?super.schedule(J,Q):(this.delay=Q,this.state=J,this.scheduler.flush(this),this)}execute(J,Q){return Q>0||this.closed?super.execute(J,Q):this._execute(J,Q)}requestAsyncId(J,Q,$=0){return null!==$&&$>0||null===$&&this.delay>0?super.requestAsyncId(J,Q,$):J.flush(this)}}),ee=ue},377:(ut,Ce,U)=>{"use strict";U.d(Ce,{hZ:()=>l});const l="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(ut,Ce,U)=>{"use strict";U.d(Ce,{L:()=>R});const R="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(ut,Ce,U)=>{"use strict";U.d(Ce,{b:()=>R});const R="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(ut,Ce,U)=>{"use strict";U.d(Ce,{N:()=>l});const l=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(ut,Ce,U)=>{"use strict";function R(l){setTimeout(()=>{throw l},0)}U.d(Ce,{z:()=>R})},4487:(ut,Ce,U)=>{"use strict";function R(l){return l}U.d(Ce,{y:()=>R})},9796:(ut,Ce,U)=>{"use strict";U.d(Ce,{k:()=>R});const R=Array.isArray||(l=>l&&"number"==typeof l.length)},9489:(ut,Ce,U)=>{"use strict";U.d(Ce,{z:()=>R});const R=l=>l&&"number"==typeof l.length&&"function"!=typeof l},9105:(ut,Ce,U)=>{"use strict";function R(l){return"function"==typeof l}U.d(Ce,{m:()=>R})},6561:(ut,Ce,U)=>{"use strict";U.d(Ce,{k:()=>l});var R=U(9796);function l(L){return!(0,R.k)(L)&&L-parseFloat(L)+1>=0}},1555:(ut,Ce,U)=>{"use strict";function R(l){return null!==l&&"object"==typeof l}U.d(Ce,{K:()=>R})},4072:(ut,Ce,U)=>{"use strict";function R(l){return!!l&&"function"!=typeof l.subscribe&&"function"==typeof l.then}U.d(Ce,{t:()=>R})},4869:(ut,Ce,U)=>{"use strict";function R(l){return l&&"function"==typeof l.schedule}U.d(Ce,{K:()=>R})},8640:(ut,Ce,U)=>{"use strict";function R(){}U.d(Ce,{Z:()=>R})},7444:(ut,Ce,U)=>{"use strict";U.d(Ce,{s:()=>Y});var R=U(5015),l=U(4449),ie=U(377),ee=U(6554),J=U(9489),Q=U(4072),$=U(1555);const Y=G=>{if(G&&"function"==typeof G[ee.L])return(G=>le=>{const Ne=G[ee.L]();if("function"!=typeof Ne.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ne.subscribe(le)})(G);if((0,J.z)(G))return(0,R.V)(G);if((0,Q.t)(G))return(G=>le=>(G.then(Ne=>{le.closed||(le.next(Ne),le.complete())},Ne=>le.error(Ne)).then(null,l.z),le))(G);if(G&&"function"==typeof G[ie.hZ])return(G=>le=>{const Ne=G[ie.hZ]();for(;;){let De;try{De=Ne.next()}catch(Ee){return le.error(Ee),le}if(De.done){le.complete();break}if(le.next(De.value),le.closed)break}return"function"==typeof Ne.return&&le.add(()=>{Ne.return&&Ne.return()}),le})(G);{const Ne=`You provided ${(0,$.K)(G)?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ne)}}},5015:(ut,Ce,U)=>{"use strict";U.d(Ce,{V:()=>R});const R=l=>L=>{for(let ie=0,ue=l.length;ie<ue&&!L.closed;ie++)L.next(l[ie]);L.complete()}},3375:(ut,Ce,U)=>{"use strict";var R={};U.r(R),U.d(R,{default:()=>rF});var l=U(7716);let L=null;function ie(){return L}const J=new l.OlP("DocumentToken");let Q=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,l.Yz7)({factory:$,token:n,providedIn:"platform"}),n})();function $(){return(0,l.LFG)(G)}const Y=new l.OlP("Location Initialized");let G=(()=>{class n extends Q{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ie().getBaseHref(this._doc)}onPopState(e){const r=ie().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=ie().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){le()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){le()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(J))},n.\u0275prov=(0,l.Yz7)({factory:Ne,token:n,providedIn:"platform"}),n})();function le(){return!!window.history.pushState}function Ne(){return new G((0,l.LFG)(J))}function De(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Ee(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,l.Yz7)({factory:fe,token:n,providedIn:"root"}),n})();function fe(n){const t=(0,l.LFG)(J).location;return new Ke((0,l.LFG)(Q),t&&t.origin||"")}const Pe=new l.OlP("appBaseHref");let Ke=(()=>{class n extends ce{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return De(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,a){const d=this.prepareExternalUrl(i+Be(a));this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,a){const d=this.prepareExternalUrl(i+Be(a));this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Q),l.LFG(Pe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),bt=(()=>{class n extends ce{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=De(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,a){let d=this.prepareExternalUrl(i+Be(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,a){let d=this.prepareExternalUrl(i+Be(a));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Q),l.LFG(Pe,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Xe=(()=>{class n{constructor(e,r){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ee(Je(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Be(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Je(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Be(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ce),l.LFG(Q))},n.normalizeQueryParams=Be,n.joinWithSlash=De,n.stripTrailingSlash=Ee,n.\u0275prov=(0,l.Yz7)({factory:At,token:n,providedIn:"root"}),n})();function At(){return new Xe((0,l.LFG)(ce),(0,l.LFG)(Q))}function Je(n){return n.replace(/\/index.html$/,"")}var Ze=(()=>((Ze=Ze||{})[Ze.Zero=0]="Zero",Ze[Ze.One=1]="One",Ze[Ze.Two=2]="Two",Ze[Ze.Few=3]="Few",Ze[Ze.Many=4]="Many",Ze[Ze.Other=5]="Other",Ze))(),xe=(()=>((xe=xe||{})[xe.Format=0]="Format",xe[xe.Standalone=1]="Standalone",xe))(),Re=(()=>((Re=Re||{})[Re.Narrow=0]="Narrow",Re[Re.Abbreviated=1]="Abbreviated",Re[Re.Wide=2]="Wide",Re[Re.Short=3]="Short",Re))(),Ge=(()=>((Ge=Ge||{})[Ge.Short=0]="Short",Ge[Ge.Medium=1]="Medium",Ge[Ge.Long=2]="Long",Ge[Ge.Full=3]="Full",Ge))(),Ve=(()=>((Ve=Ve||{})[Ve.Decimal=0]="Decimal",Ve[Ve.Group=1]="Group",Ve[Ve.List=2]="List",Ve[Ve.PercentSign=3]="PercentSign",Ve[Ve.PlusSign=4]="PlusSign",Ve[Ve.MinusSign=5]="MinusSign",Ve[Ve.Exponential=6]="Exponential",Ve[Ve.SuperscriptingExponent=7]="SuperscriptingExponent",Ve[Ve.PerMille=8]="PerMille",Ve[Ve.Infinity=9]="Infinity",Ve[Ve.NaN=10]="NaN",Ve[Ve.TimeSeparator=11]="TimeSeparator",Ve[Ve.CurrencyDecimal=12]="CurrencyDecimal",Ve[Ve.CurrencyGroup=13]="CurrencyGroup",Ve))();function Tt(n,t){return pn((0,l.cg1)(n)[l.wAp.DateFormat],t)}function tr(n,t){return pn((0,l.cg1)(n)[l.wAp.TimeFormat],t)}function $n(n,t){return pn((0,l.cg1)(n)[l.wAp.DateTimeFormat],t)}function Ft(n,t){const e=(0,l.cg1)(n),r=e[l.wAp.NumberSymbols][t];if(void 0===r){if(t===Ve.CurrencyDecimal)return e[l.wAp.NumberSymbols][Ve.Decimal];if(t===Ve.CurrencyGroup)return e[l.wAp.NumberSymbols][Ve.Group]}return r}const Ue=l.kL8;function fr(n){if(!n[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pn(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function kn(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const gr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Is={},Ri=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Nt=(()=>((Nt=Nt||{})[Nt.Short=0]="Short",Nt[Nt.ShortGMT=1]="ShortGMT",Nt[Nt.Long=2]="Long",Nt[Nt.Extended=3]="Extended",Nt))(),lt=(()=>((lt=lt||{})[lt.FullYear=0]="FullYear",lt[lt.Month=1]="Month",lt[lt.Date=2]="Date",lt[lt.Hours=3]="Hours",lt[lt.Minutes=4]="Minutes",lt[lt.Seconds=5]="Seconds",lt[lt.FractionalSeconds=6]="FractionalSeconds",lt[lt.Day=7]="Day",lt))(),Ct=(()=>((Ct=Ct||{})[Ct.DayPeriods=0]="DayPeriods",Ct[Ct.Days=1]="Days",Ct[Ct.Months=2]="Months",Ct[Ct.Eras=3]="Eras",Ct))();function Gs(n,t,e,r){let i=function(n){if(Et(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,a=1,d=1]=n.split("-").map(f=>+f);return Cn(i,a-1,d)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(gr))return function(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,a=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-e,f=Number(n[5]||0)-r,m=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return a.call(t,d,f,m,b),t}(r)}const t=new Date(n);if(!Et(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=wt(e,t)||t;let f,d=[];for(;t;){if(f=Ri.exec(t),!f){d.push(t);break}{d=d.concat(f.slice(1));const T=d.pop();if(!T)break;t=T}}let m=i.getTimezoneOffset();r&&(m=j(r,m),i=function(n,t,e){const i=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*(j(t,i)-i))}(i,r));let b="";return d.forEach(T=>{const A=function(n){if(ge[n])return ge[n];let t;switch(n){case"G":case"GG":case"GGG":t=ke(Ct.Eras,Re.Abbreviated);break;case"GGGG":t=ke(Ct.Eras,Re.Wide);break;case"GGGGG":t=ke(Ct.Eras,Re.Narrow);break;case"y":t=nt(lt.FullYear,1,0,!1,!0);break;case"yy":t=nt(lt.FullYear,2,0,!0,!0);break;case"yyy":t=nt(lt.FullYear,3,0,!1,!0);break;case"yyyy":t=nt(lt.FullYear,4,0,!1,!0);break;case"Y":t=ne(1);break;case"YY":t=ne(2,!0);break;case"YYY":t=ne(3);break;case"YYYY":t=ne(4);break;case"M":case"L":t=nt(lt.Month,1,1);break;case"MM":case"LL":t=nt(lt.Month,2,1);break;case"MMM":t=ke(Ct.Months,Re.Abbreviated);break;case"MMMM":t=ke(Ct.Months,Re.Wide);break;case"MMMMM":t=ke(Ct.Months,Re.Narrow);break;case"LLL":t=ke(Ct.Months,Re.Abbreviated,xe.Standalone);break;case"LLLL":t=ke(Ct.Months,Re.Wide,xe.Standalone);break;case"LLLLL":t=ke(Ct.Months,Re.Narrow,xe.Standalone);break;case"w":t=Z(1);break;case"ww":t=Z(2);break;case"W":t=Z(1,!0);break;case"d":t=nt(lt.Date,1);break;case"dd":t=nt(lt.Date,2);break;case"c":case"cc":t=nt(lt.Day,1);break;case"ccc":t=ke(Ct.Days,Re.Abbreviated,xe.Standalone);break;case"cccc":t=ke(Ct.Days,Re.Wide,xe.Standalone);break;case"ccccc":t=ke(Ct.Days,Re.Narrow,xe.Standalone);break;case"cccccc":t=ke(Ct.Days,Re.Short,xe.Standalone);break;case"E":case"EE":case"EEE":t=ke(Ct.Days,Re.Abbreviated);break;case"EEEE":t=ke(Ct.Days,Re.Wide);break;case"EEEEE":t=ke(Ct.Days,Re.Narrow);break;case"EEEEEE":t=ke(Ct.Days,Re.Short);break;case"a":case"aa":case"aaa":t=ke(Ct.DayPeriods,Re.Abbreviated);break;case"aaaa":t=ke(Ct.DayPeriods,Re.Wide);break;case"aaaaa":t=ke(Ct.DayPeriods,Re.Narrow);break;case"b":case"bb":case"bbb":t=ke(Ct.DayPeriods,Re.Abbreviated,xe.Standalone,!0);break;case"bbbb":t=ke(Ct.DayPeriods,Re.Wide,xe.Standalone,!0);break;case"bbbbb":t=ke(Ct.DayPeriods,Re.Narrow,xe.Standalone,!0);break;case"B":case"BB":case"BBB":t=ke(Ct.DayPeriods,Re.Abbreviated,xe.Format,!0);break;case"BBBB":t=ke(Ct.DayPeriods,Re.Wide,xe.Format,!0);break;case"BBBBB":t=ke(Ct.DayPeriods,Re.Narrow,xe.Format,!0);break;case"h":t=nt(lt.Hours,1,-12);break;case"hh":t=nt(lt.Hours,2,-12);break;case"H":t=nt(lt.Hours,1);break;case"HH":t=nt(lt.Hours,2);break;case"m":t=nt(lt.Minutes,1);break;case"mm":t=nt(lt.Minutes,2);break;case"s":t=nt(lt.Seconds,1);break;case"ss":t=nt(lt.Seconds,2);break;case"S":t=nt(lt.FractionalSeconds,1);break;case"SS":t=nt(lt.FractionalSeconds,2);break;case"SSS":t=nt(lt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=st(Nt.Short);break;case"ZZZZZ":t=st(Nt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=st(Nt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=st(Nt.Long);break;default:return null}return ge[n]=t,t}(T);b+=A?A(i,e,m):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Cn(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function wt(n,t){const e=function(n){return(0,l.cg1)(n)[l.wAp.LocaleId]}(n);if(Is[e]=Is[e]||{},Is[e][t])return Is[e][t];let r="";switch(t){case"shortDate":r=Tt(n,Ge.Short);break;case"mediumDate":r=Tt(n,Ge.Medium);break;case"longDate":r=Tt(n,Ge.Long);break;case"fullDate":r=Tt(n,Ge.Full);break;case"shortTime":r=tr(n,Ge.Short);break;case"mediumTime":r=tr(n,Ge.Medium);break;case"longTime":r=tr(n,Ge.Long);break;case"fullTime":r=tr(n,Ge.Full);break;case"short":const i=wt(n,"shortTime"),a=wt(n,"shortDate");r=Zi($n(n,Ge.Short),[i,a]);break;case"medium":const d=wt(n,"mediumTime"),f=wt(n,"mediumDate");r=Zi($n(n,Ge.Medium),[d,f]);break;case"long":const m=wt(n,"longTime"),b=wt(n,"longDate");r=Zi($n(n,Ge.Long),[m,b]);break;case"full":const T=wt(n,"fullTime"),A=wt(n,"fullDate");r=Zi($n(n,Ge.Full),[T,A])}return r&&(Is[e][t]=r),r}function Zi(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function gn(n,t,e="-",r,i){let a="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,a=e));let d=String(n);for(;d.length<t;)d="0"+d;return r&&(d=d.substr(d.length-t)),a+d}function nt(n,t,e=0,r=!1,i=!1){return function(a,d){let f=function(n,t){switch(n){case lt.FullYear:return t.getFullYear();case lt.Month:return t.getMonth();case lt.Date:return t.getDate();case lt.Hours:return t.getHours();case lt.Minutes:return t.getMinutes();case lt.Seconds:return t.getSeconds();case lt.FractionalSeconds:return t.getMilliseconds();case lt.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,a);if((e>0||f>-e)&&(f+=e),n===lt.Hours)0===f&&-12===e&&(f=12);else if(n===lt.FractionalSeconds)return function(n,t){return gn(n,3).substr(0,t)}(f,t);const m=Ft(d,Ve.MinusSign);return gn(f,t,m,r,i)}}function ke(n,t,e=xe.Format,r=!1){return function(i,a){return function(n,t,e,r,i,a){switch(e){case Ct.Months:return function(n,t,e){const r=(0,l.cg1)(n),a=pn([r[l.wAp.MonthsFormat],r[l.wAp.MonthsStandalone]],t);return pn(a,e)}(t,i,r)[n.getMonth()];case Ct.Days:return function(n,t,e){const r=(0,l.cg1)(n),a=pn([r[l.wAp.DaysFormat],r[l.wAp.DaysStandalone]],t);return pn(a,e)}(t,i,r)[n.getDay()];case Ct.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(a){const b=function(n){const t=(0,l.cg1)(n);return fr(t),(t[l.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?kn(r):[kn(r[0]),kn(r[1])])}(t),T=function(n,t,e){const r=(0,l.cg1)(n);fr(r);const a=pn([r[l.wAp.ExtraData][0],r[l.wAp.ExtraData][1]],t)||[];return pn(a,e)||[]}(t,i,r),A=b.findIndex(M=>{if(Array.isArray(M)){const[O,q]=M,oe=d>=O.hours&&f>=O.minutes,_e=d<q.hours||d===q.hours&&f<q.minutes;if(O.hours<q.hours){if(oe&&_e)return!0}else if(oe||_e)return!0}else if(M.hours===d&&M.minutes===f)return!0;return!1});if(-1!==A)return T[A]}return function(n,t,e){const r=(0,l.cg1)(n),a=pn([r[l.wAp.DayPeriodsFormat],r[l.wAp.DayPeriodsStandalone]],t);return pn(a,e)}(t,i,r)[d<12?0:1];case Ct.Eras:return function(n,t){return pn((0,l.cg1)(n)[l.wAp.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,a,n,t,e,r)}}function st(n){return function(t,e,r){const i=-1*r,a=Ft(e,Ve.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Nt.Short:return(i>=0?"+":"")+gn(d,2,a)+gn(Math.abs(i%60),2,a);case Nt.ShortGMT:return"GMT"+(i>=0?"+":"")+gn(d,1,a);case Nt.Long:return"GMT"+(i>=0?"+":"")+gn(d,2,a)+":"+gn(Math.abs(i%60),2,a);case Nt.Extended:return 0===r?"Z":(i>=0?"+":"")+gn(d,2,a)+":"+gn(Math.abs(i%60),2,a);default:throw new Error(`Unknown zone width "${n}"`)}}}function X(n){return Cn(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function Z(n,t=!1){return function(e,r){let i;if(t){const a=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();i=1+Math.floor((d+a)/7)}else{const a=X(e),d=function(n){const t=Cn(n,0,1).getDay();return Cn(n,0,1+(t<=4?4:11)-t)}(a.getFullYear()),f=a.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return gn(i,n,Ft(r,Ve.MinusSign))}}function ne(n,t=!1){return function(e,r){return gn(X(e).getFullYear(),n,Ft(r,Ve.MinusSign),t)}}const ge={};function j(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Et(n){return n instanceof Date&&!isNaN(n.valueOf())}class Sn{}let ra=(()=>{class n extends Sn{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(Ue(r||this.locale)(e)){case Ze.Zero:return"zero";case Ze.One:return"one";case Ze.Two:return"two";case Ze.Few:return"few";case Ze.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.soG))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function vo(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,a]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(a)}return null}let bo=(()=>{class n{constructor(e,r,i,a){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class On{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bi=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,a,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new On(null,this._ngForOf,-1,-1),null===d?void 0:d),m=new wo(i,f);r.push(m)}else if(null==d)this._viewContainer.remove(null===a?void 0:a);else if(null!==a){const f=this._viewContainer.get(a);this._viewContainer.move(f,d);const m=new wo(i,f);r.push(m)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,a=this._viewContainer.length;i<a;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=a,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class wo{constructor(t,e){this.record=t,this.view=e}}let Vr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new ia,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Nl("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Nl("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class ia{constructor(){this.$implicit=null,this.ngIf=null}}function Nl(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(t)}'.`)}let Rc=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",i,a){if(null==e||""===e||e!=e)return null;try{return Gs(e,r,a||this.locale,i)}catch(d){throw function(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,l.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.soG,16))},n.\u0275pipe=l.Yjl({name:"date",type:n,pure:!0}),n})(),ii=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[{provide:Sn,useClass:ra}]}),n})();function oa(n){return"server"===n}let Oc=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Rl((0,l.LFG)(J),window)}),n})();class Rl{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const d=a.getElementById(t)||a.querySelector(`[name="${t}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=wi(this.window.history)||wi(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function wi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Tn{}class To extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new To,L||(L=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(oi=oi||document.querySelector("base"),oi?oi.getAttribute("href"):null);return null==e?null:function(n){xs=xs||document.createElement("a"),xs.setAttribute("href",n);const t=xs.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){oi=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return vo(document.cookie,t)}}let xs,oi=null;const Pl=new l.OlP("TRANSITION_ID"),Ep=[{provide:l.ip1,useFactory:function(n,t,e){return()=>{e.get(l.CZH).donePromise.then(()=>{const r=ie(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Pl,J,l.zs3],multi:!0}];class Yi{static init(){(0,l.VLi)(new Yi)}addToWindow(t){l.dqk.getAngularTestability=(r,i=!0)=>{const a=t.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},l.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let a=i.length,d=!1;const f=function(m){d=d||m,a--,0==a&&r(d)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?ie().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Fa=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ae=new l.OlP("EventManagerPlugins");let zt=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const d=i[a];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ae),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class aa{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=ie().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let ir=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Do=(()=>{class n extends ir{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(a=>{const d=this._doc.createElement("style");d.textContent=a,i.push(r.appendChild(d))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(Io),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Io))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(J))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Io(n){ie().remove(n)}const ai={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},la=/%COMP%/g;function li(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?li(n,i,e):(i=i.replace(la,n),e.push(i))}return e}function Vl(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let ki=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new So(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ua(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case l.ifc.ShadowDom:return new Uc(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=li(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(zt),l.LFG(Do),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class So{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(ai[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const a=ai[i];a?t.setAttributeNS(a,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=ai[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(l.JOm.DashCase|l.JOm.Important)?t.style.setProperty(e,r,i&l.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&l.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Vl(r)):this.eventManager.addEventListener(t,e,Vl(r))}}class ua extends So{constructor(t,e,r,i){super(t),this.component=r;const a=li(i+"-"+r.id,r.styles,[]);e.addStyles(a),this.contentAttr="_ngcontent-%COMP%".replace(la,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(la,i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Uc extends So{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=li(i.id,i.styles,[]);for(let d=0;d<a.length;d++){const f=document.createElement("style");f.textContent=a[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ku=(()=>{class n extends aa{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(J))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Lu=["alt","control","meta","shift"],Gr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},No={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Hc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ip=(()=>{class n extends aa{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const a=n.parseEventName(r),d=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ie().onAndCancel(e,a.domEventName,d))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let d="";if(Lu.forEach(m=>{const b=r.indexOf(m);b>-1&&(r.splice(b,1),d+=m+".")}),d+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&No.hasOwnProperty(t)&&(t=No[t]))}return Gr[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lu.forEach(a=>{a!=i&&Hc[a](e)&&(r+=a+".")}),r+=i,r}static eventCallback(e,r,i){return a=>{n.getEventFullKey(a)===e&&i.runGuarded(()=>r(a))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(J))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Gc=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function(){To.makeCurrent(),Yi.init()},multi:!0},{provide:J,useFactory:function(){return(0,l.RDi)(document),document},deps:[]}]),Sp=[[],{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function(){return new l.qLn},deps:[]},{provide:Ae,useClass:ku,multi:!0,deps:[J,l.R0b,l.Lbi]},{provide:Ae,useClass:Ip,multi:!0,deps:[J]},[],{provide:ki,useClass:ki,deps:[zt,Do,l.AFp]},{provide:l.FYo,useExisting:ki},{provide:ir,useExisting:Do},{provide:Do,useClass:Do,deps:[J]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:zt,useClass:zt,deps:[Ae,l.R0b]},{provide:Tn,useClass:Fa,deps:[]},[]];let Np=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:l.AFp,useValue:e.appId},{provide:Pl,useExisting:l.AFp},Ep]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Sp,imports:[ii,l.hGG]}),n})();"undefined"!=typeof window&&window;var vn=U(4402),ht=U(5917),In=U(9765),zc=U(7971);class or extends In.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new zc.N;return this._value}next(t){super.next(this._value=t)}}var xo=U(4869),cs=U(9796),ui=U(7393);class Yc extends ui.L{notifyNext(t,e,r,i,a){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Mo extends ui.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var $l=U(7444),Wt=U(7574);function Bu(n,t,e,r,i=new Mo(n,e,r)){if(!i.closed)return t instanceof Wt.y?t.subscribe(i):(0,$l.s)(t)(i)}var Ro=U(6693);const fa={};class Kc{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Hl(t,this.resultSelector))}}class Hl extends Yc{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(fa),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(Bu(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,d=this.toRespond?i[r]===fa?--this.toRespond:this.toRespond:0;i[r]=e,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const ds=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var hs=U(3282);function ks(...n){return(0,hs.J)(1)((0,ht.of)(...n))}var br=U(9193);function y_(n){return new Wt.y(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?(0,vn.D)(e):(0,br.c)()).subscribe(t)})}var Rp=U(2441),ct=U(8002),Ji=U(5345);function ar(n,t){return"function"==typeof t?e=>e.pipe(ar((r,i)=>(0,vn.D)(n(r,i)).pipe((0,ct.U)((a,d)=>t(r,a,i,d))))):e=>e.lift(new Wn(n))}class Wn{constructor(t){this.project=t}call(t,e){return e.subscribe(new Jc(t,this.project))}}class Jc extends Ji.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new Ji.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,Ji.ft)(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Pp=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Pi(n){return t=>0===n?(0,br.c)():t.lift(new Op(n))}class Op{constructor(t){if(this.total=t,this.total<0)throw new Pp}call(t,e){return e.subscribe(new Fp(t,this.total))}}class Fp extends ui.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function Ya(...n){const t=n[n.length-1];return(0,xo.K)(t)?(n.pop(),e=>ks(n,e,t)):e=>ks(n,e)}function Ka(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new Uu(n,t,e))}}class Uu{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Ih(t,this.accumulator,this.seed,this.hasSeed))}}class Ih extends ui.L{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Zn(n,t){return function(r){return r.lift(new Po(n,t))}}class Po{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Ah(t,this.predicate,this.thisArg))}}class Ah extends ui.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Nn(n){return function(e){const r=new Zs(n),i=e.lift(r);return r.caught=i}}class Zs{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Qc(t,this.selector,this.caught))}}class Qc extends Ji.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(a){return void super.error(a)}this._unsubscribeAndRecycle();const r=new Ji.IY(this);this.add(r);const i=(0,Ji.ft)(e,r);i!==r&&this.add(i)}}}var Ci=U(9773);function jl(n,t){return(0,Ci.zg)(n,t,1)}function qr(n){return function(e){return 0===n?(0,br.c)():e.lift(new Ps(n))}}class Ps{constructor(t){if(this.total=t,this.total<0)throw new Pp}call(t,e){return e.subscribe(new zs(t,this.total))}}class zs extends ui.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let a=0;a<r;a++){const d=e++%r;t.next(i[d])}}t.complete()}}function Ys(n=Fo){return t=>t.lift(new Oo(n))}class Oo{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Sh(t,this.errorFactory))}}class Sh extends ui.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Fo(){return new ds}function Nh(n=null){return t=>t.lift(new Ja(n))}class Ja{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new v_(t,this.defaultValue))}}class v_ extends ui.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var $u=U(4487);function fs(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Zn((i,a)=>n(i,a,r)):$u.y,Pi(1),e?Nh(t):Ys(()=>new ds))}var lr=U(8307),Lp=U(1307),D=U(5319);class P{constructor(t){this.callback=t}call(t,e){return e.subscribe(new z(t,this.callback))}}class z extends ui.L{constructor(t,e){super(t),this.add(new D.w(e))}}class se{constructor(t,e){this.id=t,this.url=e}}class de extends se{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Oe extends se{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class et extends se{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dt extends se{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vt extends se{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tn extends se{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bt extends se{constructor(t,e,r,i,a){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cr extends se{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rr extends se{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gl{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hu{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ks{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qa{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Os{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xa{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pa{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class kr{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Lo(n){return new kr(n)}const y0="ngNavigationCancelingError";function ga(n){const t=Error("NavigationCancelingError: "+n);return t[y0]=!0,t}function Vp(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const d=r[a],f=n[a];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Js(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let a=0;a<e.length;a++)if(i=e[a],!b_(n[i],t[i]))return!1;return!0}function b_(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,a)=>r[a]===i)}return n===t}function el(n){return Array.prototype.concat.apply([],n)}function Vo(n){return n.length>0?n[n.length-1]:null}function Kn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Bo(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,vn.D)(Promise.resolve(n)):(0,ht.of)(n)}const Xc={exact:function C_(n,t,e){if(!rl(n.segments,t.segments)||!Rh(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!C_(n.children[r],t.children[r],e))return!1;return!0},subset:nl},ed={exact:function(n,t){return Js(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>b_(n[e],t[e]))},ignored:()=>!0};function Up(n,t,e){return Xc[e.paths](n.root,t.root,e.matrixParams)&&ed[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function nl(n,t,e){return Mh(n,t,t.segments,e)}function Mh(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!rl(i,e)||t.hasChildren()||!Rh(i,e,r))}if(n.segments.length===e.length){if(!rl(n.segments,e)||!Rh(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!nl(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),a=e.slice(n.segments.length);return!!(rl(n.segments,i)&&Rh(n.segments,i,r)&&n.children[Yt])&&Mh(n.children[Yt],t,a,r)}}function Rh(n,t,e){return t.every((r,i)=>ed[e](n[i].parameters,r.parameters))}class Uo{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return Gu.serialize(this)}}class ln{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Kn(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kh(this)}}class td{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Lo(this.parameters)),this._parameterMap}toString(){return il(this)}}function rl(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class Wl{}class ju{parse(t){const e=new T0(t);return new Uo(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${nd(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${Zl(e)}=${Zl(i)}`).join("&"):`${Zl(e)}=${Zl(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const Gu=new ju;function kh(n){return n.segments.map(t=>il(t)).join("/")}function nd(n,t){if(!n.hasChildren())return kh(n);if(t){const e=n.children[Yt]?nd(n.children[Yt],!1):"",r=[];return Kn(n.children,(i,a)=>{a!==Yt&&r.push(`${a}:${nd(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Kn(n.children,(r,i)=>{i===Yt&&(e=e.concat(t(r,i)))}),Kn(n.children,(r,i)=>{i!==Yt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Yt?[nd(n.children[Yt],!1)]:[`${i}:${nd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${kh(n)}/${e[0]}`:`${kh(n)}/(${e.join("//")})`}}function Hp(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zl(n){return Hp(n).replace(/%3B/gi,";")}function rd(n){return Hp(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function id(n){return decodeURIComponent(n)}function qu(n){return id(n.replace(/\+/g,"%20"))}function il(n){return`${rd(n.path)}${function(n){return Object.keys(n).map(t=>`;${rd(t)}=${rd(n[t])}`).join("")}(n.parameters)}`}const C0=/^[^\/()?;=#]+/;function Ph(n){const t=n.match(C0);return t?t[0]:""}const E0=/^[^=?&#]+/,Wu=/^[^?&#]+/;class T0{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ln([],{}):new ln([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Yt]=new ln(t,e)),r}parseSegment(){const t=Ph(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new td(id(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ph(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Ph(this.remaining);i&&(r=i,this.capture(r))}t[id(e)]=id(r)}parseQueryParam(t){const e=function(n){const t=n.match(E0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const d=function(n){const t=n.match(Wu);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=qu(e),a=qu(r);if(t.hasOwnProperty(i)){let d=t[i];Array.isArray(d)||(d=[d],t[i]=d),d.push(a)}else t[i]=a}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ph(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):t&&(a=Yt);const d=this.parseChildren();e[a]=1===Object.keys(d).length?d[Yt]:new ln([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class T_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Gp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Gp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=qp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return qp(t,this._root).map(e=>e.value)}}function Gp(n,t){if(n===t.value)return t;for(const e of t.children){const r=Gp(n,e);if(r)return r}return null}function qp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=qp(n,e);if(r.length)return r.unshift(t),r}return[]}class _a{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function zl(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class D_ extends T_{constructor(t,e){super(t),this.snapshot=e,ps(this,t)}toString(){return this.snapshot.toString()}}function I_(n,t){const e=function(n,t){const d=new $o([],{},{},"",{},Yt,t,null,n.root,-1,{});return new Zp("",new _a(d,[]))}(n,t),r=new or([new td("",{})]),i=new or({}),a=new or({}),d=new or({}),f=new or(""),m=new Zu(r,i,d,f,a,Yt,t,e.root);return m.snapshot=e.root,new D_(new _a(m,[]),e)}class Zu{constructor(t,e,r,i,a,d,f,m){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(t=>Lo(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(t=>Lo(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wp(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],a=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class $o{constructor(t,e,r,i,a,d,f,m,b,T,A){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this.routeConfig=m,this._urlSegment=b,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Zp extends T_{constructor(t,e){super(e),this.url=t,ps(this,e)}toString(){return zu(this._root)}}function ps(n,t){t.value._routerState=n,t.children.forEach(e=>ps(n,e))}function zu(n){const t=n.children.length>0?` { ${n.children.map(zu).join(", ")} } `:"";return`${n.value}${t}`}function Yu(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Js(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),Js(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Js(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),Js(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fh(n,t){return Js(n.params,t.params)&&function(n,t){return rl(n,t)&&n.every((e,r)=>Js(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||Fh(n.parent,t.parent))}function Lh(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Lh(n,r,i);return Lh(n,r)})}(n,t,e);return new _a(r,i)}{if(n.shouldAttach(t.value)){const a=n.retrieve(t.value);if(null!==a){const d=a.route;return A0(t,d),d}}const r=function(n){return new Zu(new or(n.url),new or(n.params),new or(n.queryParams),new or(n.fragment),new or(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(a=>Lh(n,a));return new _a(r,i)}}function A0(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)A0(n.children[e],t.children[e])}function w(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function g(n){return"object"==typeof n&&null!=n&&n.outlets}function y(n,t,e,r,i){let a={};return r&&Kn(r,(d,f)=>{a[f]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),new Uo(e.root===n?t:E(e.root,n,t),a,i)}function E(n,t,e){const r={};return Kn(n.children,(i,a)=>{r[a]=i===t?e:E(i,t,e)}),new ln(n.segments,r)}class x{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&w(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(g);if(i&&i!==Vo(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class re{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function vt(n,t,e){if(n||(n=new ln([],{})),0===n.segments.length&&n.hasChildren())return un(n,t,e);const r=function(n,t,e){let r=0,i=t;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return a;const d=n.segments[i],f=e[r];if(g(f))break;const m=`${f}`,b=r<e.length-1?e[r+1]:null;if(i>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ku(m,b,d))return a;r+=2}else{if(!Ku(m,{},d))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new ln(n.segments.slice(0,r.pathIndex),{});return a.children[Yt]=new ln(n.segments.slice(r.pathIndex),n.children),un(a,0,i)}return r.match&&0===i.length?new ln(n.segments,{}):r.match&&!n.hasChildren()?nn(n,t,e):r.match?un(n,0,i):nn(n,t,e)}function un(n,t,e){if(0===e.length)return new ln(n.segments,{});{const r=function(n){return g(n[0])?n[0].outlets:{[Yt]:n}}(e),i={};return Kn(r,(a,d)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[d]=vt(n.children[d],t,a))}),Kn(n.children,(a,d)=>{void 0===r[d]&&(i[d]=a)}),new ln(n.segments,i)}}function nn(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const a=e[i];if(g(a)){const m=sl(a.outlets);return new ln(r,m)}if(0===i&&w(e[0])){r.push(new td(n.segments[t].path,sd(e[0]))),i++;continue}const d=g(a)?a.outlets[Yt]:`${a}`,f=i<e.length-1?e[i+1]:null;d&&f&&w(f)?(r.push(new td(d,sd(f))),i+=2):(r.push(new td(d,{})),i++)}return new ln(r,{})}function sl(n){const t={};return Kn(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=nn(new ln([],{}),0,e))}),t}function sd(n){const t={};return Kn(n,(e,r)=>t[r]=`${e}`),t}function Ku(n,t,e){return n==e.path&&Js(t,e.parameters)}class S_{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Yu(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=zl(e);t.children.forEach(a=>{const d=a.value.outlet;this.deactivateRoutes(a,i[d],r),delete i[d]}),Kn(i,(a,d)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(t,e,r){const i=t.value,a=e?e.value:null;if(i===a)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,r);else a&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,a=zl(t);for(const d of Object.keys(a))this.deactivateRouteAndItsChildren(a[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=zl(e);t.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Xa(a.value.snapshot))}),t.children.length&&this.forwardEvent(new Qa(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,a=e?e.value:null;if(Yu(i),i===a)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Vh(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=m,d.outlet&&d.outlet.activateWith(i,m),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}function Vh(n){Yu(n.value),n.children.forEach(Vh)}class Bh{constructor(t,e){this.routes=t,this.module=e}}function Ho(n){return"function"==typeof n}function Ju(n){return n instanceof Uo}const Uh=Symbol("INITIAL_VALUE");function Wr(){return ar(n=>function(...n){let t,e;return(0,xo.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,cs.k)(n[0])&&(n=n[0]),(0,Ro.n)(n,e).lift(new Kc(t))}(n.map(t=>t.pipe(Pi(1),Ya(Uh)))).pipe(Ka((t,e)=>{let r=!1;return e.reduce((i,a,d)=>i!==Uh?i:(a===Uh&&(r=!0),r||!1!==a&&d!==e.length-1&&!Ju(a)?i:a),t)},Uh),Zn(t=>t!==Uh),(0,ct.U)(t=>Ju(t)?t:!0===t),Pi(1)))}let $h=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&l._UZ(0,"router-outlet")},directives:function(){return[og]},encapsulation:2}),n})();function x_(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];xS(r,MS(t,r))}}function xS(n,t){n.children&&x_(n.children,t)}function MS(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function M_(n){const t=n.children&&n.children.map(M_),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Yt&&(e.component=$h),e}function jo(n){return n.outlet||Yt}function x0(n,t){const e=n.filter(r=>jo(r)===t);return e.push(...n.filter(r=>jo(r)!==t)),e}const VC={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Jp(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},VC):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(t.matcher||Vp)(e,n,t);if(!a)return Object.assign({},VC);const d={};Kn(a.posParams,(m,b)=>{d[b]=m.path});const f=a.consumed.length>0?Object.assign(Object.assign({},d),a.consumed[a.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:f,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function R_(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Qp(n,t,r)&&jo(r)!==Yt)}(n,e,r)){const d=new ln(t,function(n,t,e,r){const i={};i[Yt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const a of e)if(""===a.path&&jo(a)!==Yt){const d=new ln([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,i[jo(a)]=d}return i}(n,t,r,new ln(e,n.children)));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Qp(n,t,r))}(n,e,r)){const d=new ln(n.segments,function(n,t,e,r,i,a){const d={};for(const f of r)if(Qp(n,e,f)&&!i[jo(f)]){const m=new ln([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:t.length,d[jo(f)]=m}return Object.assign(Object.assign({},i),d)}(n,t,e,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const a=new ln(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:e}}function Qp(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function UC(n,t,e,r){return!!(jo(n)===r||r!==Yt&&Qp(t,e,n))&&("**"===n.path||Jp(t,n,e).matched)}function PS(n,t,e){return 0===t.length&&!n.children[e]}class Hh{constructor(t){this.segmentGroup=t||null}}class Xp{constructor(t){this.urlTree=t}}function k_(n){return new Wt.y(t=>t.error(new Hh(n)))}function $C(n){return new Wt.y(t=>t.error(new Xp(n)))}function jh(n){return new Wt.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class LS{constructor(t,e,r,i,a){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=t.get(l.h0i)}apply(){const t=R_(this.urlTree.root,[],[],this.config).segmentGroup,e=new ln(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Yt).pipe((0,ct.U)(a=>this.createUrlTree(R0(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Nn(a=>{if(a instanceof Xp)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Hh?this.noMatchError(a):a}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Yt).pipe((0,ct.U)(i=>this.createUrlTree(R0(i),t.queryParams,t.fragment))).pipe(Nn(i=>{throw i instanceof Hh?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new ln([],{[Yt]:t}):t;return new Uo(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,ct.U)(a=>new ln([],a))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,vn.D)(i).pipe(jl(a=>{const d=r.children[a],f=x0(e,a);return this.expandSegmentGroup(t,f,d,a).pipe((0,ct.U)(m=>({segment:m,outlet:a})))}),Ka((a,d)=>(a[d.outlet]=d.segment,a),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Zn((i,a)=>n(i,a,r)):$u.y,qr(1),e?Nh(t):Ys(()=>new ds))}())}expandSegment(t,e,r,i,a,d){return(0,vn.D)(r).pipe(jl(f=>this.expandSegmentAgainstRoute(t,e,r,f,i,a,d).pipe(Nn(b=>{if(b instanceof Hh)return(0,ht.of)(null);throw b}))),fs(f=>!!f),Nn((f,m)=>{if(f instanceof ds||"EmptyError"===f.name){if(PS(e,i,a))return(0,ht.of)(new ln([],{}));throw new Hh(e)}throw f}))}expandSegmentAgainstRoute(t,e,r,i,a,d,f){return UC(i,e,a,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,a,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d):k_(e):k_(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?$C(a):this.lineralizeSegments(r,a).pipe((0,Ci.zg)(d=>{const f=new ln(d,{});return this.expandSegment(t,f,e,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,a,d){const{matched:f,consumedSegments:m,lastChild:b,positionalParamSegments:T}=Jp(e,i,a);if(!f)return k_(e);const A=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?$C(A):this.lineralizeSegments(i,A).pipe((0,Ci.zg)(M=>this.expandSegment(t,e,r,M.concat(a.slice(b)),d,!1)))}matchSegmentAgainstRoute(t,e,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ht.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,ct.U)(M=>(r._loadedConfig=M,new ln(i,{})))):(0,ht.of)(new ln(i,{}));const{matched:d,consumedSegments:f,lastChild:m}=Jp(e,r,i);if(!d)return k_(e);const b=i.slice(m);return this.getChildConfig(t,r,i).pipe((0,Ci.zg)(A=>{const M=A.module,O=A.routes,{segmentGroup:q,slicedSegments:oe}=R_(e,f,b,O),_e=new ln(q.segments,q.children);if(0===oe.length&&_e.hasChildren())return this.expandChildren(M,O,_e).pipe((0,ct.U)(ot=>new ln(f,ot)));if(0===O.length&&0===oe.length)return(0,ht.of)(new ln(f,{}));const qe=jo(r)===a;return this.expandSegment(M,_e,O,oe,qe?Yt:a,!0).pipe((0,ct.U)(it=>new ln(f.concat(it.segments),it.children)))}))}getChildConfig(t,e,r){return e.children?(0,ht.of)(new Bh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,ht.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Ci.zg)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,ct.U)(a=>(e._loadedConfig=a,a))):(n=e,new Wt.y(t=>t.error(ga(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ht.of)(new Bh([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;if(!i||0===i.length)return(0,ht.of)(!0);const a=i.map(d=>{const f=t.get(d);let m;if((n=f)&&Ho(n.canLoad))m=f.canLoad(e,r);else{if(!Ho(f))throw new Error("Invalid CanLoad guard");m=f(e,r)}var n;return Bo(m)});return(0,ht.of)(a).pipe(Wr(),(0,lr.b)(d=>{if(!Ju(d))return;const f=ga(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,ct.U)(d=>!0===d))}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,ht.of)(r);if(i.numberOfChildren>1||!i.children[Yt])return jh(t.redirectTo);i=i.children[Yt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const a=this.createSegmentGroup(t,e.root,r,i);return new Uo(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Kn(t,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=e[f]}else r[a]=i}),r}createSegmentGroup(t,e,r,i){const a=this.createSegments(t,e.segments,r,i);let d={};return Kn(e.children,(f,m)=>{d[m]=this.createSegmentGroup(t,f,r,i)}),new ln(a,d)}createSegments(t,e,r,i){return e.map(a=>a.path.startsWith(":")?this.findPosParam(t,a,i):this.findOrReturn(a,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function R0(n){const t={};for(const r of Object.keys(n.children)){const a=R0(n.children[r]);(a.segments.length>0||a.hasChildren())&&(t[r]=a)}return function(n){if(1===n.numberOfChildren&&n.children[Yt]){const t=n.children[Yt];return new ln(n.segments.concat(t.segments),t.children)}return n}(new ln(n.segments,t))}class Qs{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class eg{constructor(t,e){this.component=t,this.route=e}}function BS(n,t,e){const r=n._root;return Gh(r,t?t._root:null,e,[r.value])}function tg(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function Gh(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=zl(t);return n.children.forEach(d=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,d=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){const m=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!rl(n.url,t.url);case"pathParamsOrQueryParamsChange":return!rl(n.url,t.url)||!Js(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fh(n,t)||!Js(n.queryParams,t.queryParams);case"paramsChange":default:return!Fh(n,t)}}(d,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Qs(r)):(a.data=d.data,a._resolvedData=d._resolvedData),Gh(n,t,a.component?f?f.children:null:e,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new eg(f.outlet.component,d))}else d&&ng(t,f,i),i.canActivateChecks.push(new Qs(r)),Gh(n,null,a.component?f?f.children:null:e,r,i)})(d,a[d.value.outlet],e,r.concat([d.value]),i),delete a[d.value.outlet]}),Kn(a,(d,f)=>ng(d,e.getContext(f),i)),i}function ng(n,t,e){const r=zl(n),i=n.value;Kn(r,(a,d)=>{ng(a,i.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new eg(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class P0{}function jC(n){return new Wt.y(t=>t.error(n))}class rg{constructor(t,e,r,i,a,d){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=d}recognize(){const t=R_(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Yt);if(null===e)return null;const r=new $o([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new _a(r,e),a=new Zp(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(t){const e=t.value,r=Wp(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const a of Object.keys(e.children)){const d=e.children[a],f=x0(t,a),m=this.processSegmentGroup(f,d,a);if(null===m)return null;r.push(...m)}const i=O_(r);return i.sort((t,e)=>t.value.outlet===Yt?-1:e.value.outlet===Yt?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const a of t){const d=this.processSegmentAgainstRoute(a,e,r,i);if(null!==d)return d}return PS(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!UC(t,e,r,i))return null;let a,d=[],f=[];if("**"===t.path){const O=r.length>0?Vo(r).parameters:{};a=new $o(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,F_(t),jo(t),t.component,t,GS(e),od(e)+r.length,F0(t))}else{const O=Jp(e,t,r);if(!O.matched)return null;d=O.consumedSegments,f=r.slice(O.lastChild),a=new $o(d,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,F_(t),jo(t),t.component,t,GS(e),od(e)+d.length,F0(t))}const m=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:T}=R_(e,d,f,m.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);var n;if(0===T.length&&b.hasChildren()){const O=this.processChildren(m,b);return null===O?null:[new _a(a,O)]}if(0===m.length&&0===T.length)return[new _a(a,[])];const A=jo(t)===i,M=this.processSegment(m,b,T,A?Yt:i);return null===M?null:[new _a(a,M)]}}function O0(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function O_(n){const t=[],e=new Set;for(const r of n){if(!O0(r)){t.push(r);continue}const i=t.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=O_(r.children);t.push(new _a(r.value,i))}return t.filter(r=>!e.has(r))}function GS(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function od(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function F_(n){return n.data||{}}function F0(n){return n.resolve||{}}function V0(n){return ar(t=>{const e=n(t);return e?(0,vn.D)(e).pipe((0,ct.U)(()=>t)):(0,ht.of)(t)})}class ZC extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const ig=new l.OlP("ROUTES");class B0{constructor(t,e,r,i){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,ct.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=a.create(t);return new Bh(el(d.injector.get(ig,void 0,l.XFs.Self|l.XFs.Optional)).map(M_),d)}),Nn(a=>{throw e._loader$=void 0,a}));return e._loader$=new Rp.c(i,()=>new In.xQ).pipe((0,Lp.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,vn.D)(this.loader.load(t)):Bo(t()).pipe((0,Ci.zg)(e=>e instanceof l.YKP?(0,ht.of)(e):(0,vn.D)(this.compiler.compileModuleAsync(e))))}}class U0{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wh,this.attachRef=null}}class Wh{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new U0,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class zC{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function YC(n){throw n}function ad(n,t,e){return t.parse("/")}function $0(n,t){return(0,ht.of)(null)}const KC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ti=(()=>{class n{constructor(e,r,i,a,d,f,m,b){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new In.xQ,this.errorHandler=YC,this.malformedUriErrorHandler=ad,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$0,afterPreactivation:$0},this.urlHandlingStrategy=new zC,this.routeReuseStrategy=new ZC,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(l.h0i),this.console=d.get(l.c2e);const M=d.get(l.R0b);this.isNgZoneEnabled=M instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new Uo(new ln([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new B0(f,m,O=>this.triggerEvent(new Gl(O)),O=>this.triggerEvent(new Hu(O))),this.routerState=I_(this.currentUrlTree,this.rootComponentType),this.transitions=new or({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(Zn(i=>0!==i.id),(0,ct.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ar(i=>{let a=!1,d=!1;return(0,ht.of)(i).pipe((0,lr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ar(f=>{const m=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return sg(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,ht.of)(f).pipe(ar(A=>{const M=this.transitions.getValue();return r.next(new de(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),M!==this.transitions.getValue()?br.E:Promise.resolve(A)}),function(n,t,e,r){return ar(i=>function(n,t,e,r,i){return new LS(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,ct.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lr.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(n,t,e,r,i){return(0,Ci.zg)(a=>function(n,t,e,r,i="emptyOnly",a="legacy"){try{const d=new rg(n,t,e,r,i,a).recognize();return null===d?jC(new P0):(0,ht.of)(d)}catch(d){return jC(d)}}(n,t,a.urlAfterRedirects,e(a.urlAfterRedirects),r,i).pipe((0,ct.U)(d=>Object.assign(Object.assign({},a),{targetSnapshot:d}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lr.b)(A=>{"eager"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(A.urlAfterRedirects,A),this.browserUrlTree=A.urlAfterRedirects);const M=new Vt(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(M)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:O,source:q,restoredState:oe,extras:_e}=f,qe=new de(M,this.serializeUrl(O),q,oe);r.next(qe);const Ye=I_(O,this.rootComponentType).snapshot;return(0,ht.of)(Object.assign(Object.assign({},f),{targetSnapshot:Ye,urlAfterRedirects:O,extras:Object.assign(Object.assign({},_e),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),br.E}),V0(f=>{const{targetSnapshot:m,id:b,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:O}}=f;return this.hooks.beforePreactivation(m,{navigationId:b,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!O})}),(0,lr.b)(f=>{const m=new tn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,ct.U)(f=>Object.assign(Object.assign({},f),{guards:BS(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,Ci.zg)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:d}}=e;return 0===d.length&&0===a.length?(0,ht.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,vn.D)(n).pipe((0,Ci.zg)(i=>function(n,t,e,r,i){const a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return(0,ht.of)(!0);const d=a.map(f=>{const m=tg(f,t,i);let b;if(function(n){return n&&Ho(n.canDeactivate)}(m))b=Bo(m.canDeactivate(n,t,e,r));else{if(!Ho(m))throw new Error("Invalid CanDeactivate guard");b=Bo(m(n,t,e,r))}return b.pipe(fs())});return(0,ht.of)(d).pipe(Wr())}(i.component,i.route,e,t,r)),fs(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Ci.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,r){return(0,vn.D)(t).pipe(jl(i=>ks(function(n,t){return null!==n&&t&&t(new Ks(n)),(0,ht.of)(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new Os(n)),(0,ht.of)(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],a=t.slice(0,t.length-1).reverse().map(d=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(d)).filter(d=>null!==d).map(d=>y_(()=>{const f=d.guards.map(m=>{const b=tg(m,d.node,e);let T;if(function(n){return n&&Ho(n.canActivateChild)}(b))T=Bo(b.canActivateChild(r,n));else{if(!Ho(b))throw new Error("Invalid CanActivateChild guard");T=Bo(b(r,n))}return T.pipe(fs())});return(0,ht.of)(f).pipe(Wr())}));return(0,ht.of)(a).pipe(Wr())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ht.of)(!0);const i=r.map(a=>y_(()=>{const d=tg(a,t,e);let f;if(function(n){return n&&Ho(n.canActivate)}(d))f=Bo(d.canActivate(t,n));else{if(!Ho(d))throw new Error("Invalid CanActivate guard");f=Bo(d(t,n))}return f.pipe(fs())}));return(0,ht.of)(i).pipe(Wr())}(n,i.route,e))),fs(i=>!0!==i,!0))}(r,a,n,t):(0,ht.of)(f)),(0,ct.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,lr.b)(f=>{if(Ju(f.guardsResult)){const b=ga(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const m=new Bt(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),Zn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),V0(f=>{if(f.guards.canActivateChecks.length)return(0,ht.of)(f).pipe((0,lr.b)(m=>{const b=new Cr(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}),ar(m=>{let b=!1;return(0,ht.of)(m).pipe(function(n,t){return(0,Ci.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,ht.of)(e);let a=0;return(0,vn.D)(i).pipe(jl(d=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return(0,ht.of)({});const a={};return(0,vn.D)(i).pipe((0,Ci.zg)(d=>function(n,t,e,r){const i=tg(n,t,r);return Bo(i.resolve?i.resolve(t,e):i(t,e))}(n[d],t,e,r).pipe((0,lr.b)(f=>{a[d]=f}))),qr(1),(0,Ci.zg)(()=>Object.keys(a).length===i.length?(0,ht.of)(a):br.E))}(n._resolve,n,t,r).pipe((0,ct.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),Wp(n,e).resolve),null)))}(d.route,r,n,t)),(0,lr.b)(()=>a++),qr(1),(0,Ci.zg)(d=>a===i.length?(0,ht.of)(e):br.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,lr.b)(m=>{const b=new Rr(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}))}),V0(f=>{const{targetSnapshot:m,id:b,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:O}}=f;return this.hooks.afterPreactivation(m,{navigationId:b,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!O})}),(0,ct.U)(f=>{const m=function(n,t,e){const r=Lh(n,t._root,e?e._root:void 0);return new D_(r,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,lr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,ct.U)(r=>(new S_(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,lr.b)({next(){a=!0},complete(){a=!0}}),function(n){return t=>t.lift(new P(n))}(()=>{var f;if(!a&&!d){const m=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,m)):this.cancelNavigationTransition(i,m)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Nn(f=>{if(d=!0,function(n){return n&&n[y0]}(f)){const m=Ju(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const b=new et(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sg(i.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new Dt(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return br.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:a,urlTree:d}=r,f={replaceUrl:!0};if(a){const m=Object.assign({},a);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}this.scheduleNavigation(d,i,a,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const i=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!i||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){x_(e),this.config=e.map(M_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:a,fragment:d,queryParamsHandling:f,preserveFragment:m}=r,b=i||this.routerState.root,T=m?this.currentUrlTree.fragment:d;let A=null;switch(f){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),function(n,t,e,r,i){if(0===e.length)return y(t.root,t.root,t,r,i);const a=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new x(!0,0,n);let t=0,e=!1;const r=n.reduce((i,a,d)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Kn(a.outlets,(m,b)=>{f[b]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===d?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?e=!0:".."===f?t++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new x(e,t,r)}(e);if(a.toRoot())return y(t.root,new ln([],{}),t,r,i);const d=function(n,t,e){if(n.isAbsolute)return new re(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const a=e.snapshot._urlSegment;return new re(a,a===t.root,0)}const r=w(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,a=e;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new re(r,!1,i-a)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,t,n),f=d.processChildren?un(d.segmentGroup,d.index,a.commands):vt(d.segmentGroup,d.index,a.commands);return y(d.segmentGroup,f,t,r,i)}(b,this.currentUrlTree,e,A,null!=T?T:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=Ju(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},KC):!1===r?Object.assign({},QS):r,Ju(e))return Up(this.currentUrlTree,e,i);const a=this.parseUrl(e);return Up(this.currentUrlTree,a,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const a=e[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Oe(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,a,d){var f,m;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),T=sg(r)&&b&&!sg(b.source),O=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===e.toString();if(T&&O)return Promise.resolve(!0);let q,oe,_e;d?(q=d.resolve,oe=d.reject,_e=d.promise):_e=new Promise((it,ot)=>{q=it,oe=ot});const qe=++this.navigationId;let Ye;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Ye=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):Ye=0,this.setTransition({id:qe,targetPageId:Ye,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:a,resolve:q,reject:oe,promise:_e,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_e.catch(it=>Promise.reject(it))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(e,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new et(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.DyG),l.LFG(Wl),l.LFG(Wh),l.LFG(Xe),l.LFG(l.zs3),l.LFG(l.v3s),l.LFG(l.Sil),l.LFG(void 0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function sg(n){return"imperative"!==n}let og=(()=>{class n{constructor(e,r,i,a,d){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.name=a||Yt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new QC(e,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(Wh),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class QC{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Zu?this.route:t===Wh?this.childContexts:this.parent.get(t,e)}}class U_{}class $_{preload(t,e){return(0,ht.of)(null)}}let Zh=(()=>{class n{constructor(e,r,i,a,d){this.router=e,this.injector=a,this.preloadingStrategy=d,this.loader=new B0(r,i,b=>e.triggerEvent(new Gl(b)),b=>e.triggerEvent(new Hu(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Zn(e=>e instanceof Oe),jl(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(l.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const d=a._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(e,a)):a.children&&i.push(this.processRoutes(e,a.children));return(0,vn.D)(i).pipe((0,hs.J)(),(0,ct.U)(a=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ht.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Ci.zg)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ti),l.LFG(l.v3s),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(U_))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),H0=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof de?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Oe&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof pa&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new pa(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Ti),l.LFG(Oc),l.LFG(void 0))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ld=new l.OlP("ROUTER_CONFIGURATION"),eE=new l.OlP("ROUTER_FORROOT_GUARD"),j0=[Xe,{provide:Wl,useClass:ju},{provide:Ti,useFactory:function(n,t,e,r,i,a,d,f={},m,b){const T=new Ti(null,n,t,e,r,i,a,el(d));return m&&(T.urlHandlingStrategy=m),b&&(T.routeReuseStrategy=b),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,T),f.enableTracing&&T.events.subscribe(A=>{var M,O;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(O=console.groupEnd)||void 0===O||O.call(console)}),T},deps:[Wl,Wh,Xe,l.zs3,l.v3s,l.Sil,ig,ld,[class{},new l.FiY],[class{},new l.FiY]]},Wh,{provide:Zu,useFactory:function(n){return n.routerState.root},deps:[Ti]},{provide:l.v3s,useClass:l.EAV},Zh,$_,class{preload(t,e){return e().pipe(Nn(()=>(0,ht.of)(null)))}},{provide:ld,useValue:{enableTracing:!1}}];function nE(){return new l.PXZ("Router",Ti)}let tN=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[j0,sE(e),{provide:eE,useFactory:iE,deps:[[Ti,new l.FiY,new l.tp0]]},{provide:ld,useValue:r||{}},{provide:ce,useFactory:nN,deps:[Q,[new l.tBr(Pe),new l.FiY],ld]},{provide:H0,useFactory:rE,deps:[Ti,Oc,ld]},{provide:U_,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:$_},{provide:l.PXZ,multi:!0,useFactory:nE},[H_,{provide:l.ip1,multi:!0,useFactory:sN,deps:[H_]},{provide:oE,useFactory:oN,deps:[H_]},{provide:l.tb,multi:!0,useExisting:oE}]]}}static forChild(e){return{ngModule:n,providers:[sE(e)]}}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(eE,8),l.LFG(Ti,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function rE(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new H0(n,t,e)}function nN(n,t,e={}){return e.useHash?new bt(n,t):new Ke(n,t)}function iE(n){return"guarded"}function sE(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:ig,multi:!0,useValue:n}]}let H_=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new In.xQ}appInitializer(){return this.injector.get(Y,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),a=this.injector.get(Ti),d=this.injector.get(ld);return"disabled"===d.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?(0,ht.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(ld),i=this.injector.get(Zh),a=this.injector.get(H0),d=this.injector.get(Ti),f=this.injector.get(l.z2F);e===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),a.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function sN(n){return n.appInitializer.bind(n)}function oN(n){return n.bootstrapListener.bind(n)}const oE=new l.OlP("Router Initializer"),uN=[];let cN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[tN.forRoot(uN)],tN]}),n})();var ve=U(8239),Ot=U(8873),aE=U(4292),Xu=U(3637),zh=U(6561);function lE(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}const ag=n=>"number"==typeof n&&n==n,G0=Array.isArray,j_=(n,t)=>((n,t,e)=>{const r=n.length;if(t>1)return Array(r);if(1===t)return n.slice();const i=!G0(t),a=[];let d,f=0,m=0;for(;f<r;f++)if(d=n[f],ag(d)&&(i||ag(d))){a[f]=d,m=d,f++;break}if(!i){for(;f<r;f++)d=n[f],ag(d)&&ag(t[f])?m=a[f]=t[f]*d+(1-t[f])*m:a[f]=a[f-1];return a}const b=1-t;for(;f<r;f++)d=n[f],ag(d)?m=a[f]=t*d+b*m:a[f]=a[f-1];return a})(n,2/(t+1)),G_=n=>{throw new Error(n)},dN=(n,t,e)=>(n.length!==t.length&&G_("the length of arrays not match"),n.map((r,i)=>e(r,t[i]))),ba=(n,t,e)=>n.map(r=>e(r,t)),lg=(n,t)=>[n,t].map(Array.isArray),ug=n=>{n.forEach((t,e)=>{t!=t&&delete n[e]})},hN=(n,t)=>n-t,W0=(n,t,e)=>((n,t,e,r)=>{const[i,a]=lg(n,t),d=i?a?dN(n,t,e):ba(n,t,e):G_("the first argument must be an array");return r&&ug(d),d})(n,t,hN,e),fN=(n,t)=>n*t,pN=(n,t,e)=>((n,t,e,r,i)=>{const[a,d]=lg(n,t),f=a?d?dN(n,t,e):ba(n,t,e):d?ba(t,n,r):G_("at least one array is required");return i&&ug(f),f})(n,t,fN,fN,e),rF=(n,t=26,e=12,r=9)=>{const i=W0(j_(n,e),j_(n,t),1),a=j_(i,r);return{MACD:i,signal:a,histogram:pN(2,W0(i,a),1)}};class dE{constructor(t,e){this.http=t,this.appComponent=e,this.robo=null,this._1second=1e3,this._5seconds=5*this._1second,this.getMovingAverage=(r=[])=>{const i=[];let a=0,d=0;for(let f=0;f<r.length;f++)a+=r[f],d++,i[f]=a/d;return i}}stop(){}loadCandleList(t){this.sinal=t,null==this.robo&&this.http.get(`https://api.binance.com/api/v3/klines?symbol=${t.moeda}&interval=5m&limit=26`).subscribe(r=>{let a=this.verificarCruzamentoMACD(r);a.canBuy&&(a.sinal=this.sinal,a.id=this.sinal.moeda+this.sinal.tipo,this.appComponent.acionarAlerta(a))},r=>console.error(r))}verificarCruzamentoMACD(t){let e=t.map(b=>parseFloat(b[4])),r=R(e,12,5,9),i={canBuy:!1,stopLossPrice:""},a=r.MACD[r.MACD.length-1],d=r.MACD[r.signal.length-1],f=r.MACD[r.MACD.length-2],m=r.MACD[r.signal.length-2];return"LONG"===this.sinal.tipo&&a>d&&f<m&&(i.canBuy=!0),"SHORT"===this.sinal.tipo&&a>d&&f>m&&(i.canBuy=!0),i.stopLossPrice=this.calculateStopLoss(t),i}verificarCompra(t){const e=this.mapCandleResult(t);this.fillMA5(e),this.fillM26(e),this.fillMA12(e);let r=e[e.length-1],i=e[e.length-2],a=e[e.length-3],d=t[t.length-1],f=t[t.length-2],m=t[t.length-3];console.log(`Moeda ${this.sinal.moeda}-${this.sinal.tipo} ${this.sinal.priceCoinPercentage}% `);let b=!1;"LONG"===this.sinal.tipo&&(r.MA5>r.MA12&&m.MA5<m.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26||this.sinal.priceCoin>r.MA12&&this.isGreenCandle(d)&&this.isGreenCandle(f)&&this.isGreenCandle(m)&&r.MA5<r.MA12&&i.MA5<i.MA12&&a.MA5<a.MA12)&&(b=!0);let T=!1;"SHORT"===this.sinal.tipo&&r.MA5<r.MA26&&a.MA5>a.MA26&&r.MA12>r.MA26&&r.MA12>r.MA5&&(T=!0);let A=b||T;console.log("Resultado: "+A);let M={canBuy:A,stopLossPrice:""};return A&&(M.stopLossPrice=this.calculateStopLoss(t)),M}calculateStopLoss(t){let e=t.length-1,r=parseFloat(t[e][2]),i=parseFloat(t[e][4]),a=parseFloat(t[--e][2]),d=parseFloat(t[--e][4]),f=parseFloat(t[--e][2]),m=parseFloat(t[--e][4]),b=0;return b="LONG"===this.sinal.tipo?[i,d,m].sort((T,A)=>T-A)[0]:[r,a,f].sort((T,A)=>A-T)[0],b.toString()}mapCandleResult(t=[]){let e=[];return t.forEach(r=>{let i=(parseFloat(r[1])+parseFloat(r[4]))/2;e.push({data:Ot(r[0]).add(3,"hours").format("HH:mm:ss"),mediana:parseFloat(String(i)),MA5:0,MA12:0,MA26:0})}),e}fillMA5(t=[]){let e=[];for(let i=t.length-5;i<t.length;i++)e.push(t[i]);let r=this.sinal.priceCoin.toString().length;e=this.getMovingAverage(e.map(i=>i.mediana));for(let i=t.length-5;i<t.length;i++){let a=e.shift();a=parseFloat(a.toString().substr(0,r)),t[i].MA5=a}}fillMA12(t=[]){let e=[];for(let i=t.length-12;i<t.length;i++)e.push(t[i]);e=this.getMovingAverage(e.map(i=>i.mediana));let r=this.sinal.priceCoin.toString().length;for(let i=t.length-12;i<t.length;i++){let a=e.shift();a=parseFloat(a.toString().substr(0,r)),t[i].MA12=a}}fillM26(t=[]){let e=t.map(a=>a.mediana),r=this.getMovingAverage(e),i=this.sinal.priceCoin.toString().length;t.forEach((a,d)=>{let f=r[d];f=parseFloat(f.toString().substr(0,i)),a.MA26=f})}checkCandleSinal(t){let e=t[t.length-1],r=t[t.length-2],i=t[t.length-3],a=parseFloat(e[1]),d=parseFloat(e[4]),m=(parseFloat(e[2]),parseFloat(e[3])),A=(parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[2])),M=parseFloat(r[3]),oe=(parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[2])),_e=parseFloat(i[3]),qe=!1;return qe="LONG"===this.sinal.tipo?a<d&&d>A&&d>oe&&m>M&&m>_e:a>d&&d<M&&d<_e&&d<A&&d<oe,qe}checkDiffMAIsValid(t,e){let i=0,a=0,d=0,f=0;for(let b=e.length-3;b<e.length;b++){let T=e[b],A=e[b+1];if(b===e.length-1){"LONG"===t?(T.MA5>T.MA12&&a++,T.MA5>T.MA26&&d++,T.MA12>T.MA26&&f++):(T.MA5<T.MA12&&a--,T.MA5<T.MA26&&d--,T.MA12<T.MA26&&f--);break}"LONG"===t?(T.MA5<A.MA5&&i++,T.MA5>T.MA12&&a++,T.MA5>T.MA26&&d++,T.MA12>T.MA26&&f++):(T.MA5>A.MA5&&i--,T.MA5<T.MA12&&a--,T.MA5<T.MA26&&d--,T.MA12<T.MA26&&f--)}let m=!1;return("LONG"===t&&2===i&&3===a&&3===d&&3===f||"SHORT"===t&&-2===i&&-3===a&&-3===d&&-3===f)&&(m=!0),m}calculate_MA5_MA26_MA12(t,e){let r=t[t.length-1],i=this.checkCandleSinal(e[e.length-1]),a=!1,d=!1,f=!1;"LONG"===this.sinal.tipo?(a=r.MA5>r.MA26&&r.MA26>r.MA12,d=this.sinal.priceCoin>r.MA5):(a=r.MA5<r.MA26&&r.MA26<r.MA12,d=this.sinal.priceCoin<r.MA5);let m=0,b=0;for(let A=t.length-3;A<t.length;A++){let M=t[A],O=t[A+1];if(!O)break;"LONG"===this.sinal.tipo?(M.MA5<O.MA5&&m++,M.MA26<O.MA26&&b++):(M.MA5>O.MA5&&m--,M.MA26>O.MA26&&b--)}return("LONG"===this.sinal.tipo&&2===m&&2===b||"SHORT"===this.sinal.tipo&&-2===m&&-2===b)&&(f=!0),f&&i&&a&&d}calculate_MA5_MA12(t,e){let r=t[t.length-1],i=this.checkDiffMAIsValid(this.sinal.tipo,t),a=this.checkCandleSinal(e),d=!1,f=!1;return"LONG"===this.sinal.tipo?(d=r.MA5>r.MA12&&r.MA5>r.MA26&&r.MA12>r.MA26,f=this.sinal.priceCoin>r.MA5):(d=r.MA5<r.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26,f=this.sinal.priceCoin<r.MA5),i&&a&&d&&f}isGreenCandle(t){return parseFloat(t[1])<parseFloat(t[4])}isRedCandle(t){return parseFloat(t[1])>parseFloat(t[4])}}var Yh=U(6682),hE=U(8819);function ud(n,t){return e=>e.lift(new iF(n,t))}class iF{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new sF(t,this.compare,this.keySelector))}}class sF extends ui.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function Z0(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new oF(n,e))}}class oF{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new aF(t,this.observables,this.project))}}class aF extends Yc{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let a=0;a<i;a++)this.toRespond.push(a);for(let a=0;a<i;a++)this.add(Bu(this,e[a],void 0,a))}notifyNext(t,e,r){this.values[r]=e;const i=this.toRespond;if(i.length>0){const a=i.indexOf(r);-1!==a&&i.splice(a,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class uF{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new cF(t,this.predicate))}}class cF extends ui.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Fn=U(8971),Di=U(8939),ll=(U(4828),U(3394)),Xs=U(3910),gs=U(8026),V=U(3854),eo=U(5422);const z0="@firebase/database";let Y0="";function Jl(n){Y0=n}class fE{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,V.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,V.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class gN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,V.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const mN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new fE(t)}}catch(t){}return new gN},Ql=mN("localStorage"),K0=mN("sessionStorage"),cd=new eo.Yd("@firebase/database"),pE=function(){let n=1;return function(){return n++}}(),gE=function(n){const t=(0,V.dS)(n),e=new V.gQ;e.update(t);const r=e.digest();return V.US.encodeByteArray(r)},Xl=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=Xl.apply(null,r):t+="object"==typeof r?(0,V.Pz)(r):r,t+=" "}return t};let Go=null,W_=!0;const dd=function(n,t){(0,V.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(cd.logLevel=eo.in.VERBOSE,Go=cd.log.bind(cd),t&&K0.set("logging_enabled",!0)):"function"==typeof n?Go=n:(Go=null,K0.remove("logging_enabled"))},Pr=function(...n){if(!0===W_&&(W_=!1,null===Go&&!0===K0.get("logging_enabled")&&dd(!0)),Go){const t=Xl.apply(null,n);Go(t)}},ul=function(n){return function(...t){Pr(n,...t)}},J0=function(...n){const t="FIREBASE INTERNAL ERROR: "+Xl(...n);cd.error(t)},wa=function(...n){const t=`FIREBASE FATAL ERROR: ${Xl(...n)}`;throw cd.error(t),new Error(t)},Qi=function(...n){const t="FIREBASE WARNING: "+Xl(...n);cd.warn(t)},Kh=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},qo="[MIN_NAME]",cl="[MAX_NAME]",ec=function(n,t){if(n===t)return 0;if(n===qo||t===cl)return-1;if(t===qo||n===cl)return 1;{const e=cg(n),r=cg(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},dF=function(n,t){return n===t?0:n<t?-1:1},Jh=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Pz)(t))},Z_=function(n){if("object"!=typeof n||null===n)return(0,V.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,V.Pz)(t[r]),e+=":",e+=Z_(n[t[r]]);return e+="}",e},_E=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function ci(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const yE=function(n){(0,V.hu)(!Kh(n),"Invalid JSON number");const r=1023;let i,a,d,f,m;0===n?(a=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(m=52;m;m-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(m=11;m;m-=1)b.push(a%2?1:0),a=Math.floor(a/2);b.push(i?1:0),b.reverse();const T=b.join("");let A="";for(m=0;m<64;m+=8){let M=parseInt(T.substr(m,8),2).toString(16);1===M.length&&(M="0"+M),A+=M}return A.toLowerCase()},vN=new RegExp("^-?(0*)\\d{1,10}$"),bN=-2147483648,vE=2147483647,cg=function(n){if(vN.test(n)){const t=Number(n);if(t>=bN&&t<=vE)return t}return null},dg=function(n){try{n()}catch(t){setTimeout(()=>{throw Qi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},hd=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class bE{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Qi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class CN{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Pr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qi(t)}}let hg=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const EE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ca="websocket",Y_="long_polling";class rb{constructor(t,e,r,i,a=!1,d="",f=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ql.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ql.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function TN(n,t,e){let r;if((0,V.hu)("string"==typeof t,"typeof type must == string"),(0,V.hu)("object"==typeof e,"typeof params must == object"),t===Ca)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==Y_)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return ci(e,(a,d)=>{i.push(a+"="+d)}),r+i.join("&")}class DE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,V.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,V.p$)(this.counters_)}}const ib={},sb={};function ob(n){const t=n.toString();return ib[t]||(ib[t]=new DE),ib[t]}class DN{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&dg(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fs{constructor(t,e,r,i,a,d,f){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ul(t),this.stats_=ob(e),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),TN(e,Y_,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new DN(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qh((...a)=>{const[d,f,m,b,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=m;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[d,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&EE.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fs.forceAllow_=!0}static forceDisallow(){Fs.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!Fs.forceAllow_&&(Fs.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,V.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,V.h$)(e),i=_E(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,V.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class Qh{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=pE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Qh.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){Pr("frame writing exception"),f.stack&&Pr(f.stack),Pr(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Pr("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,V.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{Pr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let X_=null;"undefined"!=typeof MozWebSocket?X_=MozWebSocket:"undefined"!=typeof WebSocket&&(X_=WebSocket);let dl=(()=>{class n{constructor(e,r,i,a,d,f,m){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ul(this.connId),this.stats_=ob(r),this.connURL=n.connectionURL_(r,f,m,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,a){const d={v:"5"};return!(0,V.Yr)()&&"undefined"!=typeof location&&location.hostname&&EE.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),TN(e,Ca,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ql.set("previous_websocket_failure",!0);try{if((0,V.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${Y0}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(a.proxy={origin:f}),this.mySock=new X_(this.connURL,[],a)}else this.mySock=new X_(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==X_&&!n.forceDisallow_}static previouslyFailed(){return Ql.isInMemoryStorage||!0===Ql.get("previous_websocket_failure")}markConnectionHealthy(){Ql.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,V.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,V.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=_E(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class ey{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Fs,dl]}initTransports_(t){const e=dl&&dl.isAvailable();let r=e&&!dl.previouslyFailed();if(t.webSocketOnly&&(e||Qi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dl];else{const i=this.transports_=[];for(const a of ey.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class FE{constructor(t,e,r,i,a,d,f,m,b,T){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=b,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ul("c:"+this.id+":"),this.transportManager_=new ey(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=hd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Jh("t",t),r=Jh("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Jh("t",t),r=Jh("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Jh("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?J0("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):J0("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&Qi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),hd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ql.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class LE{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class pd{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,V.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let a=0;a<i.length;a++)if(i[a].callback===e&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(t){(0,V.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class ny extends pd{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ny}getInitialEvent(t){return(0,V.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Ln{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function xn(){return new Ln("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function eu(n){return n.pieces_.length-n.pieceNum_}function Rt(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Ln(n.pieces_,t)}function gg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function no(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function ry(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Ln(t,0)}function ur(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Ln)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Ln(e,0)}function cn(n){return n.pieceNum_>=n.pieces_.length}function ms(n,t){const e=sn(n),r=sn(t);if(null===e)return t;if(e===r)return ms(Rt(n),Rt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function kN(n,t){const e=no(n,0),r=no(t,0);for(let i=0;i<e.length&&i<r.length;i++){const a=ec(e[i],r[i]);if(0!==a)return a}return e.length===r.length?0:e.length<r.length?-1:1}function iy(n,t){if(eu(n)!==eu(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function ro(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(eu(n)>eu(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class UE{constructor(t,e){this.errorPrefix_=e,this.parts_=no(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,V.ug)(this.parts_[r]);HE(this)}}function HE(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ea(n))}function Ea(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class mg extends pd{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mg}getInitialEvent(t){return(0,V.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Xh=1e3;let sy,tc=(()=>{class n extends LE{constructor(e,r,i,a,d,f,m,b){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=ul("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xh,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mg.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ny.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const a=++this.requestNumber_,d={r:a,a:e,b:r};this.log_((0,V.Pz)(d)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const r=new V.BH,i={p:e._path.toString(),q:e._queryObject},a={action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||a!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(e,r,i,a){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:e,tag:i};this.listens.get(f).set(d,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const d={p:i};e.tag&&(d.q=r._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest("q",d,m=>{const b=m.d,T=m.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,a),e.onComplete&&e.onComplete(T,b))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,V.r3)(e,"w")){const i=(0,V.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Qi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,V.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,V.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const d=a.s,f=a.d||"error";this.authToken_===e&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,r)}sendUnlisten_(e,r,i,a){this.log_("Unlisten on "+e+" for "+r);const d={p:e};a&&(d.q=i,d.t=a),this.sendRequest("n",d)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,a){const d={p:r,d:i};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(e,r,i,a){this.putInternal("p",e,r,i,a)}merge(e,r,i,a){this.putInternal("m",e,r,i,a)}putInternal(e,r,i,a,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(d.s,d.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,V.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):J0("Unrecognized action received from server: "+(0,V.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,ve.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),a=e.onRealtimeDisconnect_.bind(e),d=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let m=!1,b=null;const T=function(){b?b.close():(m=!0,a())};e.realtime_={close:T,sendRequest:function(O){(0,V.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(O)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[O,q]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);m?Pr("getToken() completed but was canceled"):(Pr("getToken() completed. Creating connection."),e.authToken_=O&&O.accessToken,e.appCheckToken_=q&&q.token,b=new FE(d,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,a,oe=>{Qi(oe+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch(O){e.log_("Failed to get token: "+O),m||(e.repoInfo_.nodeAdmin&&Qi(O),T())}}})()}interrupt(e){Pr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Pr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Xh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(d=>Z_(d)).join("$"):"default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,r){const i=new Ln(e).toString();let a;if(this.listens.has(i)){const d=this.listens.get(i);a=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,r){Pr("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){Pr("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,V.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+Y0.replace(/\./g,"-")]=1,(0,V.uI)()?e["framework.cordova"]=1:(0,V.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ny.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class hn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new hn(t,e)}}class _g{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new hn(qo,t),i=new hn(qo,e);return 0!==this.compare(r,i)}minPost(){return hn.MIN}}class WE extends _g{static get __EMPTY_NODE(){return sy}static set __EMPTY_NODE(t){sy=t}compare(t,e){return ec(t.name,e.name)}isDefinedOn(t){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return hn.MIN}maxPost(){return new hn(cl,sy)}makePost(t,e){return(0,V.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new hn(t,sy)}toString(){return".key"}}const tu=new WE;class _b{constructor(t,e,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=e?r(t.key,e):1,i&&(d*=-1),d<0)t=this.isReverse_?t.left:t.right;else{if(0===d){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let so,io=(()=>{class n{constructor(e,r,i,a,d){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:_s.EMPTY_NODE,this.right=null!=d?d:_s.EMPTY_NODE}copy(e,r,i,a,d){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let a=this;const d=i(e,a.key);return a=d<0?a.copy(null,null,null,a.left.insert(e,r,i),null):0===d?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return _s.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,a;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return _s.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class _s{constructor(t,e=_s.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new _s(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,io.BLACK,null,null))}remove(t){return new _s(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,io.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new _b(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new _b(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new _b(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new _b(this.root_,null,this.comparator_,!0,t)}}function ZE(n,t){return ec(n.name,t.name)}function zE(n,t){return ec(n,t)}_s.EMPTY_NODE=new class{copy(t,e,r,i,a){return this}insert(t,e,r){return new io(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const BN=function(n){return"number"==typeof n?"number:"+yE(n):"string:"+n},UN=function(n){if(n.isLeafNode()){const t=n.val();(0,V.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,V.r3)(t,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===so||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===so||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yb,vb,YE,gd=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),UN(this.priorityNode_)}static set __childrenNodeConstructor(e){yb=e}static get __childrenNodeConstructor(){return yb}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return cn(e)?this:".priority"===sn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=sn(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,V.hu)(".priority"!==i||1===eu(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rt(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+BN(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?yE(this.value_):this.value_,this.lazyHash_=gE(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,V.hu)(a>=0,"Unknown leaf type: "+r),(0,V.hu)(d>=0,"Unknown leaf type: "+i),a===d?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const cr=new class extends _g{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),a=r.compareTo(i);return 0===a?ec(t.name,e.name):a}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return hn.MIN}maxPost(){return new hn(cl,new gd("[PRIORITY-POST]",YE))}makePost(t,e){const r=vb(t);return new hn(e,new gd("[PRIORITY-POST]",r))}toString(){return".priority"}},wb=Math.log(2);class $N{constructor(t){this.count=parseInt(Math.log(t+1)/wb,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const oy=function(n,t,e,r){n.sort(t);const i=function(m,b){const T=b-m;let A,M;if(0===T)return null;if(1===T)return A=n[m],M=e?e(A):A,new io(M,A.node,io.BLACK,null,null);{const O=parseInt(T/2,10)+m,q=i(m,O),oe=i(O+1,b);return A=n[O],M=e?e(A):A,new io(M,A.node,io.BLACK,q,oe)}},f=function(m){let b=null,T=null,A=n.length;const M=function(q,oe){const _e=A-q,qe=A;A-=q;const Ye=i(_e+1,qe),it=n[_e],ot=e?e(it):it;O(new io(ot,it.node,oe,null,Ye))},O=function(q){b?(b.left=q,b=q):(T=q,b=q)};for(let q=0;q<m.count;++q){const oe=m.nextBitIsOne(),_e=Math.pow(2,m.count-(q+1));oe?M(_e,io.BLACK):(M(_e,io.BLACK),M(_e,io.RED))}return T}(new $N(n.length));return new _s(r||t,f)};let Cb;const ef={};class nu{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,V.hu)(ef&&cr,"ChildrenNode.ts has not been loaded"),Cb=Cb||new nu({".priority":ef},{".priority":cr}),Cb}get(t){const e=(0,V.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof _s?e:null}hasIndex(t){return(0,V.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,V.hu)(t!==tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=e.getIterator(hn.Wrap);let f,d=a.getNext();for(;d;)i=i||t.isDefinedOn(d.node),r.push(d),d=a.getNext();f=i?oy(r,t.getCompare()):ef;const m=t.toString(),b=Object.assign({},this.indexSet_);b[m]=t;const T=Object.assign({},this.indexes_);return T[m]=f,new nu(T,b)}addToIndexes(t,e){const r=(0,V.UI)(this.indexes_,(i,a)=>{const d=(0,V.DV)(this.indexSet_,a);if((0,V.hu)(d,"Missing index implementation for "+a),i===ef){if(d.isDefinedOn(t.node)){const f=[],m=e.getIterator(hn.Wrap);let b=m.getNext();for(;b;)b.name!==t.name&&f.push(b),b=m.getNext();return f.push(t),oy(f,d.getCompare())}return ef}{const f=e.get(t.name);let m=i;return f&&(m=m.remove(new hn(t.name,f))),m.insert(t,t.node)}});return new nu(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,V.UI)(this.indexes_,i=>{if(i===ef)return i;{const a=e.get(t.name);return a?i.remove(new hn(t.name,a)):i}});return new nu(r,this.indexSet_)}}let yg,Ht=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&UN(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yg||(yg=new n(new _s(zE),null,nu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yg}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?yg:r}}getChild(e){const r=sn(e);return null===r?this:this.getImmediateChild(r).getChild(Rt(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,V.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new hn(e,r);let a,d;r.isEmpty()?(a=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?yg:this.priorityNode_;return new n(a,f,d)}}updateChild(e,r){const i=sn(e);if(null===i)return r;{(0,V.hu)(".priority"!==sn(e)||1===eu(e),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Rt(e),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,a=0,d=!0;if(this.forEachChild(cr,(f,m)=>{r[f]=m.val(e),i++,d&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):d=!1}),!e&&d&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+BN(this.getPriority().val())+":"),this.forEachChild(cr,(r,i)=>{const a=i.hash();""!==a&&(e+=":"+r+":"+a)}),this.lazyHash_=""===e?"":gE(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const a=this.resolveIndex_(i);if(a){const d=a.getPredecessorKey(new hn(e,r));return d?d.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new hn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new hn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,hn.Wrap);let d=a.peek();for(;null!=d&&r.compare(d,e)<0;)a.getNext(),d=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,hn.Wrap);let d=a.peek();for(;null!=d&&r.compare(d,e)>0;)a.getNext(),d=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===nf?-1:0}withIndex(e){if(e===tu||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===tu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(cr),a=r.getIterator(cr);let d=i.getNext(),f=a.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=a.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(e){return e===tu?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const nf=new class extends Ht{constructor(){super(new _s(zE),Ht.EMPTY_NODE,nu.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ht.EMPTY_NODE}isEmpty(){return!1}};function Xn(n,t=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,V.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new gd(n,Xn(t));if(n instanceof Array){let e=Ht.EMPTY_NODE;return ci(n,(r,i)=>{if((0,V.r3)(n,r)&&"."!==r.substring(0,1)){const a=Xn(i);(a.isLeafNode()||!a.isEmpty())&&(e=e.updateImmediateChild(r,a))}}),e.updatePriority(Xn(t))}{const e=[];let r=!1;if(ci(n,(d,f)=>{if("."!==d.substring(0,1)){const m=Xn(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),e.push(new hn(d,m)))}}),0===e.length)return Ht.EMPTY_NODE;const a=oy(e,ZE,d=>d.name,zE);if(r){const d=oy(e,cr.getCompare());return new Ht(a,Xn(t),new nu({".priority":d},{".priority":cr}))}return new Ht(a,Xn(t),nu.Default)}}Object.defineProperties(hn,{MIN:{value:new hn(qo,Ht.EMPTY_NODE)},MAX:{value:new hn(cl,nf)}}),WE.__EMPTY_NODE=Ht.EMPTY_NODE,gd.__childrenNodeConstructor=Ht,so=nf,YE=nf,function(n){vb=n}(Xn);class Eb extends _g{constructor(t){super(),this.indexPath_=t,(0,V.hu)(!cn(t)&&".priority"!==sn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),a=r.compareTo(i);return 0===a?ec(t.name,e.name):a}makePost(t,e){const r=Xn(t),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new hn(e,i)}maxPost(){const t=Ht.EMPTY_NODE.updateChild(this.indexPath_,nf);return new hn(cl,t)}toString(){return no(this.indexPath_,0).join("/")}}const vg=new class extends _g{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?ec(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return hn.MIN}maxPost(){return hn.MAX}makePost(t,e){const r=Xn(t);return new hn(e,r)}toString(){return".value"}},ys="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ay=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const a=new Array(8);for(i=7;i>=0;i--)a[i]=ys.charAt(e%64),e=Math.floor(e/64);(0,V.hu)(0===e,"Cannot push at time == 0");let d=a.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=ys.charAt(t[i]);return(0,V.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),oo=function(n){if(n===""+vE)return"-";const t=cg(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let d=0;d<e.length;d++)e[d]=n.charAt(d);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return cl;const a=ys.charAt(ys.indexOf(e[r])+1);return e[r]=a,e.slice(0,r+1).join("")},ly=function(n){if(n===""+bN)return qo;const t=cg(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+vE:(delete e[e.length-1],e.join("")):(e[e.length-1]=ys.charAt(ys.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function _d(n){return{type:"value",snapshotNode:n}}function Da(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function hl(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function fl(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class rc{constructor(t){this.index_=t}updateChild(t,e,r,i,a,d){(0,V.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?t.hasChild(e)?d.trackChildChange(hl(e,f)):(0,V.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(Da(e,r)):d.trackChildChange(fl(e,r,f))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(cr,(i,a)=>{e.hasChild(i)||r.trackChildChange(hl(i,a))}),e.isLeafNode()||e.forEachChild(cr,(i,a)=>{if(t.hasChild(i)){const d=t.getImmediateChild(i);d.equals(a)||r.trackChildChange(fl(i,a,d))}else r.trackChildChange(Da(i,a))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Ht.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class pl{constructor(t){this.indexedFilter_=new rc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=pl.getStartPost_(t),this.endPost_=pl.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,a,d){return this.matches(new hn(e,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,a,d)}updateFullNode(t,e,r){e.isLeafNode()&&(e=Ht.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const a=this;return e.forEachChild(cr,(d,f)=>{a.matches(new hn(d,f))||(i=i.updateImmediateChild(d,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class sf{constructor(t){this.rangedFilter_=new pl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,a,d){return this.rangedFilter_.matches(new hn(e,r))||(r=Ht.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,a,d):this.fullLimitUpdateChild_(t,e,r,a,d)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let a;i=Ht.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;a.hasNext()&&d<this.limit_;){const f=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let a,d,f,m;if(i=e.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();f=(M,O)=>A(O,M)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let b=0,T=!1;for(;m.hasNext();){const A=m.getNext();!T&&f(a,A)<=0&&(T=!0),T&&b<this.limit_&&f(A,d)<=0?b++:i=i.updateImmediateChild(A.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,a){let d;if(this.reverse_){const A=this.index_.getCompare();d=(M,O)=>A(O,M)}else d=this.index_.getCompare();const f=t;(0,V.hu)(f.numChildren()===this.limit_,"");const m=new hn(e,r),b=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(f.hasChild(e)){const A=f.getImmediateChild(e);let M=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=M&&(M.name===e||f.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const O=null==M?1:d(M,m);if(T&&!r.isEmpty()&&O>=0)return null!=a&&a.trackChildChange(fl(e,r,A)),f.updateImmediateChild(e,r);{null!=a&&a.trackChildChange(hl(e,A));const oe=f.updateImmediateChild(e,Ht.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=a&&a.trackChildChange(Da(M.name,M.node)),oe.updateImmediateChild(M.name,M.node)):oe}}return r.isEmpty()?t:T&&d(b,m)>=0?(null!=a&&(a.trackChildChange(hl(b.name,b.node)),a.trackChildChange(Da(e,r))),f.updateImmediateChild(e,r).updateImmediateChild(b.name,Ht.EMPTY_NODE)):t}}class ru{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qo}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cr}copy(){const t=new ru;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function uy(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function cy(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function bg(n,t){const e=n.copy();return e.index_=t,e}function Tb(n){const t={};if(n.isDefault())return t;let e;return n.index_===cr?e="$priority":n.index_===vg?e="$value":n.index_===tu?e="$key":((0,V.hu)(n.index_ instanceof Eb,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,V.Pz)(e),n.startSet_&&(t.startAt=(0,V.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,V.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,V.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,V.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function nT(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==cr&&(t.i=n.index_.toString()),t}class wg extends LE{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ul("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,V.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);const d=wg.getListenId_(t,r),f={};this.listens_[d]=f;const m=Tb(t._queryParams);this.restRequest_(a+".json",m,(b,T)=>{let A=T;if(404===b&&(A=null,b=null),null===b&&this.onDataUpdate_(a,A,!1,r),(0,V.DV)(this.listens_,d)===f){let M;M=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(M,null)}})}unlisten(t,e){const r=wg.getListenId_(t,e);delete this.listens_[r]}get(t){const e=Tb(t._queryParams),r=t._path.toString(),i=new V.BH;return this.restRequest_(r+".json",e,(a,d)=>{let f=d;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(e.auth=i.accessToken),a&&a.token&&(e.ac=a.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,V.xO)(e);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,V.cI)(f.responseText)}catch(b){Qi("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&Qi("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class jN{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Cg(){return{value:null,children:new Map}}function yd(n,t,e){if(cn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=sn(t);n.children.has(r)||n.children.set(r,Cg()),yd(n.children.get(r),t=Rt(t),e)}}function Db(n,t){if(cn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(cr,(r,i)=>{yd(n,new Ln(r),i)}),Db(n,t)}}if(n.children.size>0){const e=sn(t);return t=Rt(t),n.children.has(e)&&Db(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function rT(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{rT(i,new Ln(t.toString()+"/"+r),e)})}class iT{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ci(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class WN{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new iT(t);const r=1e4+2e4*Math.random();hd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;ci(t,(i,a)=>{a>0&&(0,V.r3)(this.statsToReport_,i)&&(e[i]=a,r=!0)}),r&&this.server_.reportStats(e),hd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ia=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ia||(Ia={})),Ia))();function aT(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ab{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Ia.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(cn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ln(t));return new Ab(xn(),e,this.revert)}}return(0,V.hu)(sn(this.path)===t,"operationForChild called for unrelated child."),new Ab(Rt(this.path),this.affectedTree,this.revert)}}class hy{constructor(t,e){this.source=t,this.path=e,this.type=Ia.LISTEN_COMPLETE}operationForChild(t){return cn(this.path)?new hy(this.source,xn()):new hy(this.source,Rt(this.path))}}class vd{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Ia.OVERWRITE}operationForChild(t){return cn(this.path)?new vd(this.source,xn(),this.snap.getImmediateChild(t)):new vd(this.source,Rt(this.path),this.snap)}}class Eg{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Ia.MERGE}operationForChild(t){if(cn(this.path)){const e=this.children.subtree(new Ln(t));return e.isEmpty()?null:e.value?new vd(this.source,xn(),e.value):new Eg(this.source,xn(),e)}return(0,V.hu)(sn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Eg(this.source,Rt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ic{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(cn(t))return this.isFullyInitialized()&&!this.filtered_;const e=sn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class ZN{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function bd(n,t,e,r,i,a){const d=r.filter(f=>f.type===e);d.sort((f,m)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,V.g5)("Should only compare child_ events.");const r=new hn(t.childName,t.snapshotNode),i=new hn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),d.forEach(f=>{const m=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,a);i.forEach(b=>{b.respondsTo(f.type)&&t.push(b.createEvent(m,n.query_))})})}function Nb(n,t){return{eventCache:n,serverCache:t}}function fy(n,t,e,r){return Nb(new ic(t,e,r),n.serverCache)}function lT(n,t,e,r){return Nb(n.eventCache,new ic(t,e,r))}function Tg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function af(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xb;class dr{constructor(t,e=(()=>(xb||(xb=new _s(dF)),xb))()){this.value=t,this.children=e}static fromObject(t){let e=new dr(null);return ci(t,(r,i)=>{e=e.set(new Ln(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:xn(),value:this.value};if(cn(t))return null;{const r=sn(t),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Rt(t),e);return null!=a?{path:ur(new Ln(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(cn(t))return this;{const e=sn(t),r=this.children.get(e);return null!==r?r.subtree(Rt(t)):new dr(null)}}set(t,e){if(cn(t))return new dr(e,this.children);{const r=sn(t),a=(this.children.get(r)||new dr(null)).set(Rt(t),e),d=this.children.insert(r,a);return new dr(this.value,d)}}remove(t){if(cn(t))return this.children.isEmpty()?new dr(null):new dr(null,this.children);{const e=sn(t),r=this.children.get(e);if(r){const i=r.remove(Rt(t));let a;return a=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&a.isEmpty()?new dr(null):new dr(this.value,a)}return this}}get(t){if(cn(t))return this.value;{const e=sn(t),r=this.children.get(e);return r?r.get(Rt(t)):null}}setTree(t,e){if(cn(t))return e;{const r=sn(t),a=(this.children.get(r)||new dr(null)).setTree(Rt(t),e);let d;return d=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new dr(this.value,d)}}fold(t){return this.fold_(xn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(ur(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,xn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(cn(t))return null;{const a=sn(t),d=this.children.get(a);return d?d.findOnPath_(Rt(t),ur(e,a),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,xn(),e)}foreachOnPath_(t,e,r){if(cn(t))return this;{this.value&&r(e,this.value);const i=sn(t),a=this.children.get(i);return a?a.foreachOnPath_(Rt(t),ur(e,i),r):new dr(null)}}foreach(t){this.foreach_(xn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(ur(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class Wo{constructor(t){this.writeTree_=t}static empty(){return new Wo(new dr(null))}}function Dg(n,t,e){if(cn(t))return new Wo(new dr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let a=r.value;const d=ms(i,t);return a=a.updateChild(d,e),new Wo(n.writeTree_.set(i,a))}{const i=new dr(e),a=n.writeTree_.setTree(t,i);return new Wo(a)}}}function py(n,t,e){let r=n;return ci(e,(i,a)=>{r=Dg(r,ur(t,i),a)}),r}function Ig(n,t){if(cn(t))return Wo.empty();{const e=n.writeTree_.setTree(t,new dr(null));return new Wo(e)}}function Mb(n,t){return null!=sc(n,t)}function sc(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(ms(e.path,t)):null}function uT(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(cr,(r,i)=>{t.push(new hn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new hn(r,i.value))}),t}function oc(n,t){if(cn(t))return n;{const e=sc(n,t);return new Wo(null!=e?new dr(e):n.writeTree_.subtree(t))}}function Rb(n){return n.writeTree_.isEmpty()}function uf(n,t){return cT(xn(),n.writeTree_,t)}function cT(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,a)=>{".priority"===i?((0,V.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):e=cT(ur(n,i),a,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(ur(n,".priority"),r)),e}}function Ag(n,t){return gy(t,n)}function _F(n,t){if(n.snap)return ro(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&ro(ur(n.path,e),t))return!0;return!1}function KN(n){return n.visible}function JN(n,t,e){let r=Wo.empty();for(let i=0;i<n.length;++i){const a=n[i];if(t(a)){const d=a.path;let f;if(a.snap)ro(e,d)?(f=ms(e,d),r=Dg(r,f,a.snap)):ro(d,e)&&(f=ms(d,e),r=Dg(r,xn(),a.snap.getChild(f)));else{if(!a.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(ro(e,d))f=ms(e,d),r=py(r,f,a.children);else if(ro(d,e))if(f=ms(d,e),cn(f))r=py(r,xn(),a.children);else{const m=(0,V.DV)(a.children,sn(f));if(m){const b=m.getChild(Rt(f));r=Dg(r,xn(),b)}}}}}return r}function cf(n,t,e,r,i){if(r||i){const a=oc(n.visibleWrites,t);return!i&&Rb(a)?e:i||null!=e||Mb(a,xn())?uf(JN(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(ro(b.path,t)||ro(t,b.path))},t),e||Ht.EMPTY_NODE):null}{const a=sc(n.visibleWrites,t);if(null!=a)return a;{const d=oc(n.visibleWrites,t);return Rb(d)?e:null!=e||Mb(d,xn())?uf(d,e||Ht.EMPTY_NODE):null}}}function Sg(n,t,e,r){return cf(n.writeTree,n.treePath,t,e,r)}function fT(n,t){return function(n,t,e){let r=Ht.EMPTY_NODE;const i=sc(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(cr,(a,d)=>{r=r.updateImmediateChild(a,d)}),r;if(e){const a=oc(n.visibleWrites,t);return e.forEachChild(cr,(d,f)=>{const m=uf(oc(a,new Ln(d)),f);r=r.updateImmediateChild(d,m)}),uT(a).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return uT(oc(n.visibleWrites,t)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,t)}function pT(n,t,e,r){return function(n,t,e,r,i){(0,V.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=ur(t,e);if(Mb(n.visibleWrites,a))return null;{const d=oc(n.visibleWrites,a);return Rb(d)?i.getChild(e):uf(d,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function df(n,t){return function(n,t){return sc(n.visibleWrites,t)}(n.writeTree,ur(n.treePath,t))}function Ub(n,t,e){return function(n,t,e,r){const i=ur(t,e),a=sc(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(e)?uf(oc(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function $b(n,t){return gy(ur(n.treePath,t),n.writeTree)}function gy(n,t){return{treePath:n,writeTree:t}}class gT{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,V.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===e&&"child_removed"===a)this.changeMap.set(r,fl(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===a)this.changeMap.set(r,hl(r,i.oldSnap));else if("child_changed"===e&&"child_added"===a)this.changeMap.set(r,Da(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==a)throw(0,V.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,fl(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const my=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class _y{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new ic(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ub(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:af(this.viewCache_),a=function(n,t,e,r,i,a){return function(n,t,e,r,i,a,d){let f;const m=oc(n.visibleWrites,t),b=sc(m,xn());if(null!=b)f=b;else{if(null==e)return[];f=uf(m,e)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const T=[],A=d.getCompare(),M=a?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let O=M.getNext();for(;O&&T.length<i;)0!==A(O,r)&&T.push(O),O=M.getNext();return T}}(n.writeTree,n.treePath,t,e,r,i,a)}(this.writes_,i,e,1,r,t);return 0===a.length?null:a[0]}}function Gb(n,t,e,r,i,a){const d=t.eventCache;if(null!=df(r,e))return t;{let f,m;if(cn(e))if((0,V.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const b=af(t),A=fT(r,b instanceof Ht?b:Ht.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),A,a)}else{const b=Sg(r,af(t));f=n.filter.updateFullNode(t.eventCache.getNode(),b,a)}else{const b=sn(e);if(".priority"===b){(0,V.hu)(1===eu(e),"Can't have a priority with additional path components");const T=d.getNode();m=t.serverCache.getNode();const A=pT(r,e,T,m);f=null!=A?n.filter.updatePriority(T,A):d.getNode()}else{const T=Rt(e);let A;if(d.isCompleteForChild(b)){m=t.serverCache.getNode();const M=pT(r,e,d.getNode(),m);A=null!=M?d.getNode().getImmediateChild(b).updateChild(T,M):d.getNode().getImmediateChild(b)}else A=Ub(r,b,t.serverCache);f=null!=A?n.filter.updateChild(d.getNode(),b,A,T,i,a):d.getNode()}}return fy(t,f,d.isFullyInitialized()||cn(e),n.filter.filtersNodes())}}function yy(n,t,e,r,i,a,d,f){const m=t.serverCache;let b;const T=d?n.filter:n.filter.getIndexedFilter();if(cn(e))b=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const O=m.getNode().updateChild(e,r);b=T.updateFullNode(m.getNode(),O,null)}else{const O=sn(e);if(!m.isCompleteForPath(e)&&eu(e)>1)return t;const q=Rt(e),_e=m.getNode().getImmediateChild(O).updateChild(q,r);b=".priority"===O?T.updatePriority(m.getNode(),_e):T.updateChild(m.getNode(),O,_e,q,my,null)}const A=lT(t,b,m.isFullyInitialized()||cn(e),T.filtersNodes());return Gb(n,A,e,i,new _y(i,A,a),f)}function vy(n,t,e,r,i,a,d){const f=t.eventCache;let m,b;const T=new _y(i,t,a);if(cn(e))b=n.filter.updateFullNode(t.eventCache.getNode(),r,d),m=fy(t,b,!0,n.filter.filtersNodes());else{const A=sn(e);if(".priority"===A)b=n.filter.updatePriority(t.eventCache.getNode(),r),m=fy(t,b,f.isFullyInitialized(),f.isFiltered());else{const M=Rt(e),O=f.getNode().getImmediateChild(A);let q;if(cn(M))q=r;else{const oe=T.getCompleteChild(A);q=null!=oe?".priority"===gg(M)&&oe.getChild(ry(M)).isEmpty()?oe:oe.updateChild(M,r):Ht.EMPTY_NODE}m=O.equals(q)?t:fy(t,n.filter.updateChild(f.getNode(),A,q,M,T,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function qb(n,t){return n.eventCache.isCompleteForChild(t)}function Ng(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function by(n,t,e,r,i,a,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let b,m=t;b=cn(e)?r:new dr(null).setTree(e,r);const T=t.serverCache.getNode();return b.children.inorderTraversal((A,M)=>{if(T.hasChild(A)){const q=Ng(0,t.serverCache.getNode().getImmediateChild(A),M);m=yy(n,m,new Ln(A),q,i,a,d,f)}}),b.children.inorderTraversal((A,M)=>{const O=!t.serverCache.isCompleteForChild(A)&&void 0===M.value;if(!T.hasChild(A)&&!O){const oe=Ng(0,t.serverCache.getNode().getImmediateChild(A),M);m=yy(n,m,new Ln(A),oe,i,a,d,f)}}),m}class wT{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new rc(r.getIndex()),a=function(n){return n.loadsAllData()?new rc(n.getIndex()):n.hasLimit()?new sf(n):new pl(n)}(r);this.processor_=function(n){return{filter:n}}(a);const d=e.serverCache,f=e.eventCache,m=i.updateFullNode(Ht.EMPTY_NODE,d.getNode(),null),b=a.updateFullNode(Ht.EMPTY_NODE,f.getNode(),null),T=new ic(m,d.isFullyInitialized(),i.filtersNodes()),A=new ic(b,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=Nb(A,T),this.eventGenerator_=new ZN(this.query_)}get query(){return this.query_}}function TT(n,t){const e=af(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!cn(t)&&!e.getImmediateChild(sn(t)).isEmpty())?e.getChild(t):null}function tx(n){return 0===n.eventRegistrations_.length}function DT(n,t,e){const r=[];if(e){(0,V.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const d=a.createCancelEvent(e,i);d&&r.push(d)})}if(t){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const d=n.eventRegistrations_[a];if(d.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Zb(n,t,e,r){t.type===Ia.MERGE&&null!==t.source.queryId&&((0,V.hu)(af(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(Tg(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function(n,t,e,r,i){const a=new gT;let d,f;if(e.type===Ia.OVERWRITE){const b=e;b.source.fromUser?d=vy(n,t,b.path,b.snap,r,i,a):((0,V.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered()&&!cn(b.path),d=yy(n,t,b.path,b.snap,r,i,f,a))}else if(e.type===Ia.MERGE){const b=e;b.source.fromUser?d=function(n,t,e,r,i,a,d){let f=t;return r.foreach((m,b)=>{const T=ur(e,m);qb(t,sn(T))&&(f=vy(n,f,T,b,i,a,d))}),r.foreach((m,b)=>{const T=ur(e,m);qb(t,sn(T))||(f=vy(n,f,T,b,i,a,d))}),f}(n,t,b.path,b.children,r,i,a):((0,V.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered(),d=by(n,t,b.path,b.children,r,i,f,a))}else if(e.type===Ia.ACK_USER_WRITE){const b=e;d=b.revert?function(n,t,e,r,i,a){let d;if(null!=df(r,e))return t;{const f=new _y(r,t,i),m=t.eventCache.getNode();let b;if(cn(e)||".priority"===sn(e)){let T;if(t.serverCache.isFullyInitialized())T=Sg(r,af(t));else{const A=t.serverCache.getNode();(0,V.hu)(A instanceof Ht,"serverChildren would be complete if leaf node"),T=fT(r,A)}T=T,b=n.filter.updateFullNode(m,T,a)}else{const T=sn(e);let A=Ub(r,T,t.serverCache);null==A&&t.serverCache.isCompleteForChild(T)&&(A=m.getImmediateChild(T)),b=null!=A?n.filter.updateChild(m,T,A,Rt(e),f,a):t.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,Ht.EMPTY_NODE,Rt(e),f,a):m,b.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=Sg(r,af(t)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,a)))}return d=t.serverCache.isFullyInitialized()||null!=df(r,xn()),fy(t,b,d,n.filter.filtersNodes())}}(n,t,b.path,r,i,a):function(n,t,e,r,i,a,d){if(null!=df(i,e))return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(null!=r.value){if(cn(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return yy(n,t,e,m.getNode().getChild(e),i,a,f,d);if(cn(e)){let b=new dr(null);return m.getNode().forEachChild(tu,(T,A)=>{b=b.set(new Ln(T),A)}),by(n,t,e,b,i,a,f,d)}return t}{let b=new dr(null);return r.foreach((T,A)=>{const M=ur(e,T);m.isCompleteForPath(M)&&(b=b.set(T,m.getNode().getChild(M)))}),by(n,t,e,b,i,a,f,d)}}(n,t,b.path,b.affectedTree,r,i,a)}else{if(e.type!==Ia.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+e.type);d=function(n,t,e,r,i){const a=t.serverCache;return Gb(n,lT(t,a.getNode(),a.isFullyInitialized()||cn(e),a.isFiltered()),e,r,my,i)}(n,t,e.path,r,a)}const m=a.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Tg(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&e.push(_d(Tg(t)))}}(t,d,m),{viewCache:d,changes:m}}(n.processor_,i,t,e,r);return function(n,t){(0,V.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,V.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,Zr(n,a.changes,a.viewCache.eventCache.getNode(),null)}function Zr(n,t,e,r){return function(n,t,e,r){const i=[],a=[];return t.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&a.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(d.childName,d.snapshotNode))}),bd(n,i,"child_removed",t,r,e),bd(n,i,"child_added",t,r,e),bd(n,i,"child_moved",a,r,e),bd(n,i,"child_changed",t,r,e),bd(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let xg,pf;class IT{constructor(){this.views=new Map}}function wy(n,t,e,r){const i=t.source.queryId;if(null!==i){const a=n.views.get(i);return(0,V.hu)(null!=a,"SyncTree gave us an op for an invalid query."),Zb(a,t,e,r)}{let a=[];for(const d of n.views.values())a=a.concat(Zb(d,t,e,r));return a}}function zb(n,t,e,r,i){const d=n.views.get(t._queryIdentifier);if(!d){let f=Sg(e,i?r:null),m=!1;f?m=!0:r instanceof Ht?(f=fT(e,r),m=!1):(f=Ht.EMPTY_NODE,m=!1);const b=Nb(new ic(f,m,!1),new ic(r,i,!1));return new wT(t,b)}return d}function ST(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function iu(n,t){let e=null;for(const r of n.views.values())e=e||TT(r,t);return e}function NT(n,t){return t._queryParams.loadsAllData()?ff(n):n.views.get(t._queryIdentifier)}function Yb(n,t){return null!=NT(n,t)}function wd(n){return null!=ff(n)}function ff(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let xT=1;class Aa{constructor(t){this.listenProvider_=t,this.syncPointTree_=new dr(null),this.pendingWriteTree_={visibleWrites:Wo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ao(n,t,e,r,i){return function(n,t,e,r,i){(0,V.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=Dg(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?Cd(n,new vd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function su(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,V.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,a=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=e&&_F(f,r.path)?i=!1:ro(r.path,f.path)&&(a=!0)),d--}return!!i&&(a?(function(n){n.visibleWrites=JN(n.allWrites,KN,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Ig(n.visibleWrites,r.path):ci(r.children,m=>{n.visibleWrites=Ig(n.visibleWrites,ur(r.path,m))}),!0))}(n.pendingWriteTree_,t)){let a=new dr(null);return null!=r.snap?a=a.set(xn(),!0):ci(r.children,d=>{a=a.set(new Ln(d),!0)}),Cd(n,new Ab(r.path,a,e))}return[]}function gf(n,t,e){return Cd(n,new vd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Kb(n,t,e,r){const i=t._path,a=n.syncPointTree_.get(i);let d=[];if(a&&("default"===t._queryIdentifier||Yb(a,t))){const f=function(n,t,e,r){const i=t._queryIdentifier,a=[];let d=[];const f=wd(n);if("default"===i)for(const[m,b]of n.views.entries())d=d.concat(DT(b,e,r)),tx(b)&&(n.views.delete(m),b.query._queryParams.loadsAllData()||a.push(b.query));else{const m=n.views.get(i);m&&(d=d.concat(DT(m,e,r)),tx(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!wd(n)&&a.push(new((0,V.hu)(xg,"Reference.ts has not been loaded"),xg)(t._repo,t._path)),{removed:a,events:d}}(a,t,e,r);(function(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;d=f.events;const b=-1!==m.findIndex(A=>A._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(A,M)=>wd(M));if(b&&!T){const A=n.syncPointTree_.subtree(i);if(!A.isEmpty()){const M=function(n){return n.fold((t,e,r)=>{if(e&&wd(e))return[ff(e)];{let i=[];return e&&(i=ST(e)),ci(r,(a,d)=>{i=i.concat(d)}),i}})}(A);for(let O=0;O<M.length;++O){const q=M[O],oe=q.query,_e=RT(n,q);n.listenProvider_.startListening(_f(oe),Pg(n,oe),_e.hashFn,_e.onComplete)}}}if(!T&&m.length>0&&!r)if(b){const A=null;n.listenProvider_.stopListening(_f(t),A)}else m.forEach(A=>{const M=n.queryToTagMap.get(Og(A));n.listenProvider_.stopListening(_f(A),M)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=Og(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return d}function MT(n,t,e){const r=t._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(A,M)=>{const O=ms(A,r);i=i||iu(M,O),a=a||wd(M)});let f,d=n.syncPointTree_.get(r);d?(a=a||wd(d),i=i||iu(d,xn())):(d=new IT,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=Ht.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,O)=>{const q=iu(O,xn());q&&(i=i.updateImmediateChild(M,q))}));const m=Yb(d,t);if(!m&&!t._queryParams.loadsAllData()){const A=Og(t);(0,V.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const M=xT++;n.queryToTagMap.set(A,M),n.tagToQueryMap.set(M,A)}let T=function(n,t,e,r,i,a){const d=zb(n,t,r,i,a);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,d),function(n,t){n.eventRegistrations_.push(t)}(d,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(cr,(a,d)=>{r.push(Da(a,d))}),e.isFullyInitialized()&&r.push(_d(e.getNode())),Zr(n,r,e.getNode(),t)}(d,e)}(d,t,e,Ag(n.pendingWriteTree_,r),i,f);if(!m&&!a){const A=NT(d,t);T=T.concat(function(n,t,e){const r=t._path,i=Pg(n,t),a=RT(n,e),d=n.listenProvider_.startListening(_f(t),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,V.hu)(!wd(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((b,T,A)=>{if(!cn(b)&&T&&wd(T))return[ff(T).query];{let M=[];return T&&(M=M.concat(ST(T).map(O=>O.query))),ci(A,(O,q)=>{M=M.concat(q)}),M}});for(let b=0;b<m.length;++b){const T=m[b];n.listenProvider_.stopListening(_f(T),Pg(n,T))}}return d}(n,t,A))}return T}function Rg(n,t,e){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(t,(d,f)=>{const b=iu(f,ms(d,t));if(b)return b});return cf(i,t,a,e,!0)}function Cd(n,t){return Qb(t,n.syncPointTree_,null,Ag(n.pendingWriteTree_,xn()))}function Qb(n,t,e,r){if(cn(n.path))return kg(n,t,e,r);{const i=t.get(xn());null==e&&null!=i&&(e=iu(i,xn()));let a=[];const d=sn(n.path),f=n.operationForChild(d),m=t.children.get(d);if(m&&f){const b=e?e.getImmediateChild(d):null,T=$b(r,d);a=a.concat(Qb(f,m,b,T))}return i&&(a=a.concat(wy(i,n,r,e))),a}}function kg(n,t,e,r){const i=t.get(xn());null==e&&null!=i&&(e=iu(i,xn()));let a=[];return t.children.inorderTraversal((d,f)=>{const m=e?e.getImmediateChild(d):null,b=$b(r,d),T=n.operationForChild(d);T&&(a=a.concat(kg(T,f,m,b)))}),i&&(a=a.concat(wy(i,n,r,e))),a}function RT(n,t){const e=t.query,r=Pg(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=Fg(n,e);if(r){const i=mf(r),a=i.path,d=i.queryId,f=ms(a,t);return Lg(n,a,new hy(aT(d),f))}return[]}(n,e._path,r):function(n,t){return Cd(n,new hy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const a=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return Kb(n,e,null,a)}}}}function Pg(n,t){const e=Og(t);return n.queryToTagMap.get(e)}function Og(n){return n._path.toString()+"$"+n._queryIdentifier}function Fg(n,t){return n.tagToQueryMap.get(t)}function mf(n){const t=n.indexOf("$");return(0,V.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Ln(n.substr(0,t))}}function Lg(n,t,e){const r=n.syncPointTree_.get(t);return(0,V.hu)(r,"Missing sync point for query tag that we're tracking"),wy(r,e,Ag(n.pendingWriteTree_,t),null)}function _f(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,V.hu)(pf,"Reference.ts has not been loaded"),pf)(n._repo,n._path):n}class Cy{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Cy(e)}node(){return this.node_}}class Ey{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=ur(this.path_,t);return new Ey(this.syncTree_,e)}node(){return Rg(this.syncTree_,this.path_)}}const LT=function(n,t,e){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fx(n[".sv"],t,e):"object"==typeof n[".sv"]?VT(n[".sv"],t):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fx=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,V.hu)(!1,"Unexpected server value: "+n)}},VT=function(n,t,e){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,V.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,V.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},BT=function(n,t,e,r){return ew(t,new Ey(e,n),r)},Xb=function(n,t,e){return ew(n,new Cy(t),e)};function ew(n,t,e){const r=n.getPriority().val(),i=LT(r,t.getImmediateChild(".priority"),e);let a;if(n.isLeafNode()){const d=n,f=LT(d.getValue(),t,e);return f!==d.getValue()||i!==d.getPriority().val()?new gd(f,Xn(i)):n}{const d=n;return a=d,i!==d.getPriority().val()&&(a=a.updatePriority(new gd(i))),d.forEachChild(cr,(f,m)=>{const b=ew(m,t.getImmediateChild(f),e);b!==m&&(a=a.updateImmediateChild(f,b))}),a}}class tw{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function Ty(n,t){let e=t instanceof Ln?t:new Ln(t),r=n,i=sn(e);for(;null!==i;){const a=(0,V.DV)(r.node.children,i)||{children:{},childCount:0};r=new tw(i,r,a),e=Rt(e),i=sn(e)}return r}function Ed(n){return n.node.value}function nw(n,t){n.node.value=t,rw(n)}function UT(n){return n.node.childCount>0}function Dy(n,t){ci(n.node.children,(e,r)=>{t(new tw(e,n,r))})}function $T(n,t,e,r){e&&!r&&t(n),Dy(n,i=>{$T(i,t,!0,r)}),e&&r&&t(n)}function Vg(n){return new Ln(null===n.parent?n.name:Vg(n.parent)+"/"+n.name)}function rw(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===Ed(n)&&!UT(n)}(e),i=(0,V.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,rw(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,rw(n))}(n.parent,n.name,n)}const jT=/[\[\].#$\/\u0000-\u001F\u007F]/,GT=/[\[\].#$\u0000-\u001F\u007F]/,Iy=10485760,Bg=function(n){return"string"==typeof n&&0!==n.length&&!jT.test(n)},iw=function(n){return"string"==typeof n&&0!==n.length&&!GT.test(n)},yf=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Kh(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},Na=function(n,t,e,r){r&&void 0===t||Td((0,V.gK)(n,"value"),t,e)},Td=function(n,t,e){const r=e instanceof Ln?new UE(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Ea(r));if("function"==typeof t)throw new Error(n+"contains a function "+Ea(r)+" with contents = "+t.toString());if(Kh(t))throw new Error(n+"contains "+t.toString()+" "+Ea(r));if("string"==typeof t&&t.length>Iy/3&&(0,V.ug)(t)>Iy)throw new Error(n+"contains a string greater than "+Iy+" utf8 bytes "+Ea(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,a=!1;if(ci(t,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(a=!0,!Bg(d)))throw new Error(n+" contains an invalid key ("+d+") "+Ea(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,V.ug)(t),HE(n)})(r,d),Td(n,f,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,V.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Ea(r)+" in addition to actual children.")}},ac=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,V.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const a=[];ci(t,(d,f)=>{const m=new Ln(d);if(Td(i,f,ur(e,m)),".priority"===gg(m)&&!yf(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const a=no(r);for(let d=0;d<a.length;d++)if((".priority"!==a[d]||d!==a.length-1)&&!Bg(a[d]))throw new Error(n+"contains an invalid key ("+a[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(kN);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&ro(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},sw=function(n,t,e){if(!e||void 0!==t){if(Kh(t))throw new Error((0,V.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!yf(t))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ug=function(n,t,e,r){if(!(r&&void 0===e||Bg(e)))throw new Error((0,V.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ml=function(n,t,e,r){if(!(r&&void 0===e||iw(e)))throw new Error((0,V.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ls=function(n,t){if(".info"===sn(t))throw new Error(n+" failed = Can't modify data under /.info/")},mx=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Bg(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),iw(n)}(e))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ZT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $g(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],a=i.getPath();null!==e&&!iy(a,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:a}),e.events.push(i)}e&&n.eventLists_.push(e)}function zT(n,t,e){$g(n,e),YT(n,r=>iy(r,t))}function ft(n,t,e){$g(n,e),YT(n,r=>ro(r,t)||ro(t,r))}function YT(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(_x(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function _x(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();Go&&Pr("event: "+e.toString()),dg(r)}}}const KT="repo_interrupt";class yx{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cg(),this.transactionQueueTree_=new tw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Hg(n){const e=n.infoData_.getNode(new Ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function hr(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Hg(n)})}function vx(n,t,e,r,i){n.dataUpdateCount++;const a=new Ln(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let d=[];if(i)if(r){const m=(0,V.UI)(e,b=>Xn(b));d=function(n,t,e,r){const i=Fg(n,r);if(i){const a=mf(i),d=a.path,f=a.queryId,m=ms(d,t),b=dr.fromObject(e);return Lg(n,d,new Eg(aT(f),m,b))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Xn(e);d=function(n,t,e,r){const i=Fg(n,r);if(null!=i){const a=mf(i),d=a.path,f=a.queryId,m=ms(d,t);return Lg(n,d,new vd(aT(f),m,e))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,V.UI)(e,b=>Xn(b));d=function(n,t,e){const r=dr.fromObject(e);return Cd(n,new Eg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,a,m)}else{const m=Xn(e);d=gf(n.serverSyncTree_,a,m)}let f=a;d.length>0&&(f=vf(n,a)),ft(n.eventQueue_,f,d)}function ow(n,t){lw(n,"connected",t),!1===t&&function(n){Dd(n,"onDisconnectEvents");const t=hr(n),e=Cg();rT(n.onDisconnect_,xn(),(i,a)=>{const d=BT(i,a,n.serverSyncTree_,t);yd(e,i,d)});let r=[];rT(e,xn(),(i,a)=>{r=r.concat(gf(n.serverSyncTree_,i,a));const d=My(n,i);vf(n,d)}),n.onDisconnect_=Cg(),ft(n.eventQueue_,xn(),r)}(n)}function lw(n,t,e){const r=new Ln("/.info/"+t),i=Xn(e);n.infoData_.updateSnapshot(r,i);const a=gf(n.infoSyncTree_,r,i);ft(n.eventQueue_,r,a)}function jg(n){return n.nextWriteId_++}function Ny(n,t,e,r,i){Dd(n,"set",{path:t.toString(),value:e,priority:r});const a=hr(n),d=Xn(e,r),f=Rg(n.serverSyncTree_,t),m=Xb(d,f,a),b=jg(n),T=ao(n.serverSyncTree_,t,m,b,!0);$g(n.eventQueue_,T),n.server_.put(t.toString(),d.val(!0),(M,O)=>{const q="ok"===M;q||Qi("set at "+t+" failed: "+M);const oe=su(n.serverSyncTree_,b,!q);ft(n.eventQueue_,t,oe),ou(0,i,M,O)});const A=My(n,t);vf(n,A),ft(n.eventQueue_,A,[])}function wx(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&Db(n.onDisconnect_,t),ou(0,e,r,i)})}function XT(n,t,e,r){const i=Xn(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(a,d)=>{"ok"===a&&yd(n.onDisconnect_,t,i),ou(0,r,a,d)})}function uw(n,t,e){let r;r=".info"===sn(t._path)?Kb(n.infoSyncTree_,t,e):Kb(n.serverSyncTree_,t,e),zT(n.eventQueue_,t._path,r)}function qg(n){n.persistentConnection_&&n.persistentConnection_.interrupt(KT)}function Dd(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),Pr(e,...t)}function ou(n,t,e,r){t&&dg(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let a=i;r&&(a+=": "+r);const d=new Error(a);d.code=i,t(d)}})}function Id(n,t,e){return Rg(n.serverSyncTree_,t,e)||Ht.EMPTY_NODE}function lc(n,t=n.transactionQueueTree_){if(t||xy(n,t),Ed(t)){const e=dw(n,t);(0,V.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(b=>b.currentWriteId),i=Id(n,t,r);let a=i;const d=i.hash();for(let b=0;b<e.length;b++){const T=e[b];(0,V.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const A=ms(t,T.path);a=a.updateChild(A,T.currentOutputSnapshotRaw)}const f=a.val(!0),m=t;n.server_.put(m.toString(),f,b=>{Dd(n,"transaction put response",{path:m.toString(),status:b});let T=[];if("ok"===b){const A=[];for(let M=0;M<e.length;M++)e[M].status=2,T=T.concat(su(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&A.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();xy(n,Ty(n.transactionQueueTree_,t)),lc(n,n.transactionQueueTree_),ft(n.eventQueue_,t,T);for(let M=0;M<A.length;M++)dg(A[M])}else{if("datastale"===b)for(let A=0;A<e.length;A++)e[A].status=3===e[A].status?4:0;else{Qi("transaction at "+m.toString()+" failed: "+b);for(let A=0;A<e.length;A++)e[A].status=4,e[A].abortReason=b}vf(n,t)}},d)}(n,Vg(t),e)}else UT(t)&&Dy(t,e=>{lc(n,e)})}function vf(n,t){const e=cw(n,t),r=Vg(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const d=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],b=ms(e,m.path);let A,T=!1;if((0,V.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,A=m.abortReason,i=i.concat(su(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,A="maxretry",i=i.concat(su(n.serverSyncTree_,m.currentWriteId,!0));else{const M=Id(n,m.path,d);m.currentInputSnapshot=M;const O=t[f].update(M.val());if(void 0!==O){Td("transaction failed: Data returned ",O,m.path);let q=Xn(O);"object"==typeof O&&null!=O&&(0,V.r3)(O,".priority")||(q=q.updatePriority(M.getPriority()));const _e=m.currentWriteId,qe=hr(n),Ye=Xb(q,M,qe);m.currentOutputSnapshotRaw=q,m.currentOutputSnapshotResolved=Ye,m.currentWriteId=jg(n),d.splice(d.indexOf(_e),1),i=i.concat(ao(n.serverSyncTree_,m.path,Ye,m.currentWriteId,m.applyLocally)),i=i.concat(su(n.serverSyncTree_,_e,!0))}else T=!0,A="nodata",i=i.concat(su(n.serverSyncTree_,m.currentWriteId,!0))}ft(n.eventQueue_,e,i),i=[],T&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&r.push("nodata"===A?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(A),!1,null)))}xy(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)dg(r[f]);lc(n,n.transactionQueueTree_)}(n,dw(n,e),r),r}function cw(n,t){let e,r=n.transactionQueueTree_;for(e=sn(t);null!==e&&void 0===Ed(r);)r=Ty(r,e),e=sn(t=Rt(t));return r}function dw(n,t){const e=[];return hw(n,t,e),e.sort((r,i)=>r.order-i.order),e}function hw(n,t,e){const r=Ed(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);Dy(t,i=>{hw(n,i,e)})}function xy(n,t){const e=Ed(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,nw(t,e.length>0?e:void 0)}Dy(t,r=>{xy(n,r)})}function My(n,t){const e=Vg(cw(n,t)),r=Ty(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{fw(n,i)}),fw(n,r),$T(r,i=>{fw(n,i)}),e}function fw(n,t){const e=Ed(t);if(e){const r=[];let i=[],a=-1;for(let d=0;d<e.length;d++)3===e[d].status||(1===e[d].status?((0,V.hu)(a===d-1,"All SENT items should be at beginning of queue."),a=d,e[d].status=3,e[d].abortReason="set"):((0,V.hu)(0===e[d].status,"Unexpected transaction status in abort"),e[d].unwatcher(),i=i.concat(su(n.serverSyncTree_,e[d].currentWriteId,!0)),e[d].onComplete&&r.push(e[d].onComplete.bind(null,new Error("set"),!1,null))));-1===a?nw(t,void 0):e.length=a+1,ft(n.eventQueue_,Vg(t),i);for(let d=0;d<r.length;d++)dg(r[d])}}const tD=function(n,t){const e=bF(n),r=e.namespace;return"firebase.com"===e.domain&&wa(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&wa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rb(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Ln(e.pathString)}},bF=function(n){let t="",e="",r="",i="",a="",d=!0,f="https",m=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(f=n.substring(0,b-1),n=n.substring(b+2));let T=n.indexOf("/");-1===T&&(T=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),t=n.substring(0,Math.min(T,A)),T<A&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(n.substring(T,A)));const M=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,A)));b=t.indexOf(":"),b>=0?(d="https"===f||"wss"===f,m=parseInt(t.substring(b+1),10)):b=t.length;const O=t.slice(0,b);if("localhost"===O.toLowerCase())e="localhost";else if(O.split(".").length<=2)e=O;else{const q=t.indexOf(".");r=t.substring(0,q).toLowerCase(),e=t.substring(q+1),a=r}"ns"in M&&(a=M.ns)}return{host:t,port:m,domain:e,subdomain:r,secure:d,scheme:f,pathString:i,namespace:a}};class Sx{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Pz)(this.snapshot.exportVal())}}class pw{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Wg{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class nD{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new V.BH;return wx(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Ls("OnDisconnect.remove",this._path);const t=new V.BH;return XT(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Ls("OnDisconnect.set",this._path),Na("OnDisconnect.set",t,this._path,!1);const e=new V.BH;return XT(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Ls("OnDisconnect.setWithPriority",this._path),Na("OnDisconnect.setWithPriority",t,this._path,!1),sw("OnDisconnect.setWithPriority",e,!1);const r=new V.BH;return function(n,t,e,r,i){const a=Xn(e,r);n.server_.onDisconnectPut(t.toString(),a.val(!0),(d,f)=>{"ok"===d&&yd(n.onDisconnect_,t,a),ou(0,i,d,f)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){Ls("OnDisconnect.update",this._path),ac("OnDisconnect.update",t,this._path,!1);const e=new V.BH;return function(n,t,e,r){if((0,V.xb)(e))return Pr("onDisconnect().update() called with empty data.  Don't do anything."),void ou(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,a)=>{"ok"===i&&ci(e,(d,f)=>{const m=Xn(f);yd(n.onDisconnect_,ur(t,d),m)}),ou(0,r,i,a)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Vs{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return cn(this._path)?null:gg(this._path)}get ref(){return new zo(this._repo,this._path)}get _queryIdentifier(){const t=nT(this._queryParams),e=Z_(t);return"{}"===e?"default":e}get _queryObject(){return nT(this._queryParams)}isEqual(t){if(!((t=(0,V.m9)(t))instanceof Vs))return!1;const e=this._repo===t._repo,r=iy(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function Zg(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Zo(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===tu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==qo)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==cl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===cr){if(null!=t&&!yf(t)||null!=e&&!yf(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof Eb||n.getIndex()===vg,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ry(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class zo extends Vs{constructor(t,e){super(t,e,new ru,!1)}get parent(){const t=ry(this._path);return null===t?null:new zo(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Ad{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Ln(t),r=uc(this.ref,t);return new Ad(this._node.getChild(e),r,cr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new Ad(i,uc(this.ref,r),cr)))}hasChild(t){const e=new Ln(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function rD(n,t){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==t?uc(n._root,t):n._root}function iD(n,t){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const e=tD(t,n._repo.repoInfo_.nodeAdmin);mx("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&wa("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),rD(n,e.path.toString())}function uc(n,t){return null===sn((n=(0,V.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ml("child","path",e,!1)):ml("child","path",t,!1),new zo(n._repo,ur(n._path,t));var e}function gw(n,t){n=(0,V.m9)(n),Ls("set",n._path),Na("set",t,n._path,!1);const e=new V.BH;return Ny(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function oD(n,t){ac("update",t,n._path,!1);const e=new V.BH;return function(n,t,e,r){Dd(n,"update",{path:t.toString(),value:e});let i=!0;const a=hr(n),d={};if(ci(e,(f,m)=>{i=!1,d[f]=BT(ur(t,f),Xn(m),n.serverSyncTree_,a)}),i)Pr("update() called with empty data.  Don't do anything."),ou(0,r,"ok",void 0);else{const f=jg(n),m=function(n,t,e,r){!function(n,t,e,r){(0,V.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=py(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=dr.fromObject(e);return Cd(n,new Eg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,d,f);$g(n.eventQueue_,m),n.server_.merge(t.toString(),e,(b,T)=>{const A="ok"===b;A||Qi("update at "+t+" failed: "+b);const M=su(n.serverSyncTree_,f,!A),O=M.length>0?vf(n,t):t;ft(n.eventQueue_,O,M),ou(0,r,b,T)}),ci(e,b=>{const T=My(n,ur(t,b));vf(n,T)}),ft(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function Mx(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(b,T)=>{const A=ms(b,e);r=r||iu(T,A)});let i=n.syncPointTree_.get(e);i?r=r||iu(i,xn()):(i=new IT,n.syncPointTree_=n.syncPointTree_.set(e,i));const a=null!=r,d=a?new ic(r,!0,!1):null;return function(n){return Tg(n.viewCache_)}(zb(i,t,Ag(n.pendingWriteTree_,t._path),a?d.getNode():Ht.EMPTY_NODE,a))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Xn(r).withIndex(t._queryParams.getIndex()),a=gf(n.serverSyncTree_,t._path,i);return zT(n.eventQueue_,t._path,a),Promise.resolve(i)},r=>(Dd(n,"get for query "+(0,V.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,V.m9)(n))._repo,n).then(t=>new Ad(t,new zo(n._repo,n._path),n._queryParams.getIndex()))}class zg{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new Sx("value",this,new Ad(t.snapshotNode,new zo(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new pw(this,t,e):null}matches(t){return t instanceof zg&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ky{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new pw(this,t,e):null}createEvent(t,e){(0,V.hu)(null!=t.childName,"Child events should have a childName.");const r=uc(new zo(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new Sx(t.type,this,new Ad(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof ky&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Sd(n,t,e,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=e,b=(T,A)=>{uw(n._repo,n,f),m(T,A)};b.userCallback=e.userCallback,b.context=e.context,e=b}const d=new Wg(e,a||void 0),f="value"===t?new zg(d):new ky(t,d);return function(n,t,e){let r;r=".info"===sn(t._path)?MT(n.infoSyncTree_,t,e):MT(n.serverSyncTree_,t,e),zT(n.eventQueue_,t._path,r)}(n._repo,n,f),()=>uw(n._repo,n,f)}function mw(n,t,e,r){return Sd(n,"value",t,e,r)}function _w(n,t,e,r){return Sd(n,"child_added",t,e,r)}function yw(n,t,e,r){return Sd(n,"child_changed",t,e,r)}function aD(n,t,e,r){return Sd(n,"child_moved",t,e,r)}function lD(n,t,e,r){return Sd(n,"child_removed",t,e,r)}function uD(n,t,e){let r=null;const i=e?new Wg(e):null;"value"===t?r=new zg(i):t&&(r=new ky(t,i)),uw(n._repo,n,r)}class lo{}class cD extends lo{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Na("endAt",this._value,t._path,!0);const e=cy(t._queryParams,this._value,this._key);if(Ry(e),Zo(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class Rx extends lo{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Na("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===tu?("string"==typeof t&&(t=ly(t)),i=cy(n,t,e)):(r=null==e?qo:ly(e),i=cy(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Ry(e),Zo(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class hD extends lo{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Na("startAt",this._value,t._path,!0);const e=uy(t._queryParams,this._value,this._key);if(Ry(e),Zo(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class Ox extends lo{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Na("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===tu)"string"==typeof t&&(t=oo(t)),r=uy(n,t,e);else{let i;i=null==e?cl:oo(e),r=uy(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Ry(e),Zo(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vs(t._repo,t._path,e,t._orderByCalled)}}class Lx extends lo{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class fD extends lo{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vs(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class gD extends lo{constructor(t){super(),this._path=t}_apply(t){Zg(t,"orderByChild");const e=new Ln(this._path);if(cn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Eb(e),i=bg(t._queryParams,r);return Zo(i),new Vs(t._repo,t._path,i,!0)}}class vw extends lo{_apply(t){Zg(t,"orderByKey");const e=bg(t._queryParams,tu);return Zo(e),new Vs(t._repo,t._path,e,!0)}}class Ux extends lo{_apply(t){Zg(t,"orderByPriority");const e=bg(t._queryParams,cr);return Zo(e),new Vs(t._repo,t._path,e,!0)}}class bw extends lo{_apply(t){Zg(t,"orderByValue");const e=bg(t._queryParams,vg);return Zo(e),new Vs(t._repo,t._path,e,!0)}}class _D extends lo{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Na("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cD(this._value,this._key)._apply(new hD(this._value,this._key)._apply(t))}}function xa(n,...t){let e=(0,V.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,V.hu)(!xg,"__referenceConstructor has already been defined"),xg=n})(zo),function(n){(0,V.hu)(!pf,"__referenceConstructor has already been defined"),pf=n}(zo);const Yg={};function bD(n,t,e,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||wa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Pr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,b,d=tD(a,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(m=!0,a=`http://${b}?ns=${f.namespace}`,d=tD(a,i),f=d.repoInfo):m=!d.repoInfo.secure;const T=i&&m?new hg(hg.OWNER):new CN(n.name,n.options,t);mx("Invalid Firebase Database URL",d),cn(d.path)||wa("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function(n,t,e,r){let i=Yg[t.name];i||(i={},Yg[t.name]=i);let a=i[n.toURLString()];return a&&wa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new yx(n,false,e,r),i[n.toURLString()]=a,a}(f,n,T,new bE(n.name,e));return new CF(A,n)}class CF{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=ob(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new wg(n.repoInfo_,(r,i,a,d)=>{vx(n,r,i,a,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ow(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new tc(n.repoInfo_,t,(r,i,a,d)=>{vx(n,r,i,a,d)},r=>{ow(n,r)},r=>{!function(n,t){ci(t,(e,r)=>{lw(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return sb[e]||(sb[e]=t()),sb[e]}(n.repoInfo_,()=>new WN(n.stats_,n.server_)),n.infoData_=new jN,n.infoSyncTree_=new Aa({startListening:(r,i,a,d)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=gf(n.infoSyncTree_,r._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),lw(n,"connected",!1),n.serverSyncTree_=new Aa({startListening:(r,i,a,d)=>(n.server_.listen(r,a,i,(f,m)=>{const b=d(f,m);ft(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new zo(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=Yg[t];(!e||e[n.key]!==n)&&wa(`Database ${t}(${n.repoInfo_}) has already been deleted.`),qg(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&wa("Cannot call "+t+" on a deleted database.")}}function Py(n,t){dd(n,t)}class qx{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}tc.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},tc.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},Jl(gs.SDK_VERSION),(0,gs._registerComponent)(new Xs.wA("database",(t,{instanceIdentifier:e})=>bD(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,gs.registerVersion)(z0,"0.12.8",void 0),(0,gs.registerVersion)(z0,"0.12.8","esm2017");const zx=new eo.Yd("@firebase/database-compat"),Yx=function(n){zx.warn("FIREBASE WARNING: "+n)};class Qx{constructor(t){this._delegate=t}cancel(t){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),a=>r(a)),i}update(t,e){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let a=0;a<t.length;++a)i[""+a]=t[a];t=i,Yx("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class Tw{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class au{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),ml("DataSnapshot.child","path",t,!1),new au(this._database,this._delegate.child(t))}hasChild(t){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ml("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new au(this._database,e)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new Bs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class di{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var a;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",e,!1);const d=di.getCancelAndContextArgs_("Query.on",r,i),f=(b,T)=>{e.call(d.context,new au(this.database,b),T)};f.userCallback=e,f.context=d.context;const m=null===(a=d.cancel)||void 0===a?void 0:a.bind(d.context);switch(t){case"value":return mw(this._delegate,f,m),e;case"child_added":return _w(this._delegate,f,m),e;case"child_removed":return lD(this._delegate,f,m),e;case"child_changed":return yw(this._delegate,f,m),e;case"child_moved":return aD(this._delegate,f,m),e;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,V.Wj)("Query.off","callback",e,!0),(0,V.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,uD(this._delegate,t,i)}else uD(this._delegate,t)}get(){return Mx(this._delegate).then(t=>new au(this.database,t))}once(t,e,r,i){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",e,!0);const a=di.getCancelAndContextArgs_("Query.once",r,i),d=new V.BH,f=(b,T)=>{const A=new au(this.database,b);e&&e.call(a.context,A,T),d.resolve(A)};f.userCallback=e,f.context=a.context;const m=b=>{a.cancel&&a.cancel.call(a.context,b),d.reject(b)};switch(t){case"value":mw(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":_w(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":lD(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":yw(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":aD(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(t){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new di(this.database,xa(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Lx(n)}(t)))}limitToLast(t){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new di(this.database,xa(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new fD(n)}(t)))}orderByChild(t){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new di(this.database,xa(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ml("orderByChild","path",n,!1),new gD(n)}(t)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new di(this.database,xa(this._delegate,new vw))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new di(this.database,xa(this._delegate,new Ux))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new di(this.database,xa(this._delegate,new bw))}startAt(t=null,e){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new di(this.database,xa(this._delegate,function(n=null,t){return Ug("startAt","key",t,!0),new hD(n,t)}(t,e)))}startAfter(t=null,e){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new di(this.database,xa(this._delegate,function(n,t){return Ug("startAfter","key",t,!0),new Ox(n,t)}(t,e)))}endAt(t=null,e){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new di(this.database,xa(this._delegate,function(n,t){return Ug("endAt","key",t,!0),new cD(n,t)}(t,e)))}endBefore(t=null,e){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new di(this.database,xa(this._delegate,function(n,t){return Ug("endBefore","key",t,!0),new Rx(n,t)}(t,e)))}equalTo(t,e){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new di(this.database,xa(this._delegate,function(n,t){return Ug("equalTo","key",t,!0),new _D(n,t)}(t,e)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof di))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,V.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,V.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,V.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Bs(this.database,new zo(this._delegate._repo,this._delegate._path))}}class Bs extends di{constructor(t,e){super(t,new Vs(e._repo,e._path,new ru,!1)),this.database=t,this._delegate=e}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Bs(this.database,uc(this._delegate,t))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Bs(this.database,t):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new Bs(this.database,this._delegate.root)}set(t,e){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",e,!0);const r=gw(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let a=0;a<t.length;++a)i[""+a]=t[a];t=i,Yx("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ls("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",e,!0);const r=oD(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(Ls("setWithPriority",n._path),Na("setWithPriority",t,n._path,!1),sw("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new V.BH;return Ny(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),a=>r(a)),i}remove(t){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return Ls("remove",n._path),gw(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,V.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,V.m9)(n),Ls("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,a=new V.BH,f=mw(n,()=>{});return function(n,t,e,r,i,a){Dd(n,"transaction on "+t);const d={path:t,update:e,onComplete:r,status:null,order:pE(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=Id(n,t,void 0);d.currentInputSnapshot=f;const m=d.update(f.val());if(void 0===m)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{Td("transaction failed: Data returned ",m,d.path),d.status=0;const b=Ty(n.transactionQueueTree_,t),T=Ed(b)||[];let A;T.push(d),nw(b,T),"object"==typeof m&&null!==m&&(0,V.r3)(m,".priority")?(A=(0,V.DV)(m,".priority"),(0,V.hu)(yf(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(Rg(n.serverSyncTree_,t)||Ht.EMPTY_NODE).getPriority().val();const M=hr(n),O=Xn(m,A),q=Xb(O,f,M);d.currentOutputSnapshotRaw=O,d.currentOutputSnapshotResolved=q,d.currentWriteId=jg(n);const oe=ao(n.serverSyncTree_,t,q,d.currentWriteId,d.applyLocally);ft(n.eventQueue_,t,oe),lc(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(m,b,T)=>{let A=null;m?a.reject(m):(A=new Ad(T,new zo(n._repo,n._path),cr),a.resolve(new qx(b,A)))},f,i),a.promise}(this._delegate,t,{applyLocally:r}).then(a=>new Tw(a.committed,new au(this.database,a.snapshot)));return e&&i.then(a=>e(null,a.committed,a.snapshot),a=>e(a,!1,null)),i}setPriority(t,e){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,V.m9)(n),Ls("setPriority",n._path),sw("setPriority",t,!1);const e=new V.BH;return Ny(n._repo,ur(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,V.m9)(n),Ls("push",n._path),Na("push",t,n._path,!0);const e=Hg(n._repo),r=ay(e),i=uc(n,r),a=uc(n,r);let d;return d=null!=t?gw(a,t).then(()=>a):Promise.resolve(a),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,t),i=r.then(d=>new Bs(this.database,d));e&&i.then(()=>e(null),d=>e(d));const a=new Bs(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ls("Reference.onDisconnect",this._delegate._path),new Qx(new nD(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Kg{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&wa("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&wa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new hg(hg.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,V.Sg)(r.mockUserToken,n.app.options.projectId);a=new hg(d)}!function(n,t,e,r){n.repoInfo_=new rb(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,a)}(this._delegate,t,e,r)}ref(t){if((0,V.Dv)("database.ref",0,1,arguments.length),t instanceof Bs){const e=iD(this._delegate,t.toString());return new Bs(this,e)}{const e=rD(this._delegate,t);return new Bs(this,e)}}refFromURL(t){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const r=iD(this._delegate,t);return new Bs(this,r)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),qg(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(KT)}(n._repo)}(this._delegate)}}Kg.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var Xx=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Jl(e);const d=new Xs.zt("auth-internal",new Xs.H0("database-standalone"));return d.setComponent(new Xs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Kg(bD(n,d,void 0,t,a),n),namespace:i}}});const eM=Kg.ServerValue;!function(n){n.INTERNAL.registerComponent(new Xs.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new Kg(i,r)},"PUBLIC").setServiceProps({Reference:Bs,Query:di,Database:Kg,DataSnapshot:au,enableLogging:Py,INTERNAL:Xx,ServerValue:eM}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(ll.Z);var Ef=U(9746),TD=U(7771),DD=U(8858);class nM extends In.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new rM(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;let d;if(this.closed)throw new zc.N;if(this.isStopped||this.hasError?d=D.w.EMPTY:(this.observers.push(t),d=new DD.W(this,t)),i&&t.add(t=new Ef.ht(t,i)),e)for(let f=0;f<a&&!t.closed;f++)t.next(r[f]);else for(let f=0;f<a&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||TD.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,a=i.length;let d=0;for(;d<a&&!(t-i[d].time<r);)d++;return a>e&&(d=Math.max(d,a-e)),d>0&&i.splice(0,d),i}}class rM{constructor(t,e){this.time=t,this.value=e}}function Dw(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let i,d,a=0,f=!1,m=!1;return function(T){let A;a++,!i||f?(f=!1,i=new nM(n,t,r),A=i.subscribe(this),d=T.subscribe({next(M){i.next(M)},error(M){f=!0,i.error(M)},complete(){m=!0,d=void 0,i.complete()}}),m&&(d=void 0)):A=i.subscribe(this),this.add(()=>{a--,A.unsubscribe(),A=void 0,d&&!m&&e&&0===a&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function ID(n,t){return t?ar(()=>n,t):ar(()=>n)}var Ly=U(2639);U(2329);const SD=new Map,aM={activated:!1,tokenObservers:[]},lM={initialized:!1,enabled:!1};function Br(n){return SD.get(n)||aM}function Li(n,t){SD.set(n,t)}function Xg(){return lM}class xD{constructor(t,e,r,i,a){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ve.Z)(function*(){e.stop();try{e.pending=new V.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new V.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Xi=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function RD(n){if(!Br(n).activated)throw Xi.create("use-before-activation",{appName:n.name})}function Hy(n,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,ve.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(t),headers:r};let d,f;try{d=yield fetch(n,a)}catch(A){throw Xi.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==d.status)throw Xi.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(A){throw Xi.create("fetch-parse-error",{originalErrorMessage:A.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Xi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(m[1]),T=Date.now();return{token:f.attestationToken,expireTimeMillis:T+b,issuedAtTimeMillis:T}})).apply(this,arguments)}function tm(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const yl="firebase-app-check-store";let Sw=null;function jt(){return Sw||(Sw=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(Xi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yl,{keyPath:"compositeKey"})}}}catch(e){t(Xi.create("storage-open",{originalErrorMessage:e.message}))}}),Sw)}function Gy(){return(Gy=(0,ve.Z)(function*(n,t){const r=(yield jt()).transaction(yl,"readwrite"),a=r.objectStore(yl).put({compositeKey:n,value:t});return new Promise((d,f)=>{a.onsuccess=m=>{d()},r.onerror=m=>{var b;f(Xi.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const es=new eo.Yd("@firebase/app-check");function Rw(n,t){return(0,V.hl)()?function(n,t){return function(n,t){return Gy.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{es.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Wy(){return Xg().enabled}function Md(){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,ve.Z)(function*(){const n=Xg();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const kd={error:"UNKNOWN_ERROR"};function gM(n){return V.US.encodeString(JSON.stringify(n),!1)}function nm(n){return rm.apply(this,arguments)}function rm(){return(rm=(0,ve.Z)(function*(n,t=!1){const e=n.app;RD(e);const r=Br(e);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Od(m)&&(i=m)}if(!t&&i&&Od(i))return{token:i.token};let f,d=!1;if(Wy()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hy(tm(e,yield Md()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const m=yield r.exchangeTokenPromise;return yield Rw(e,m),Li(e,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),d=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?es.warn(m.message):es.error(m),a=m}return i?(f={token:i.token},Li(e,Object.assign(Object.assign({},r),{token:i})),yield Rw(e,i)):f=OD(a),d&&PD(e,f),f})).apply(this,arguments)}function im(n,t){const e=Br(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),Li(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function kw(n){const{app:t}=n,e=Br(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new xD((0,ve.Z)(function*(){let r;if(r=Br(t).token?yield nm(n,!0):yield nm(n),r.error)throw r.error}),()=>!0,()=>{const e=Br(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Li(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function PD(n,t){const e=Br(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function Od(n){return n.expireTimeMillis-Date.now()>0}function OD(n){return{token:gM(kd),error:n}}class FD{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Br(this.app);for(const e of t)im(this.app,e.next);return Promise.resolve()}}const HD="app-check-internal";(0,gs._registerComponent)(new Xs.wA("app-check",n=>function(n,t){return new FD(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(HD).initialize()})),(0,gs._registerComponent)(new Xs.wA(HD,n=>function(n){return{getToken:t=>nm(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,a=Br(i),d={next:e,error:r,type:t};if(Li(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,d]})),a.token&&Od(a.token)){const f=a.token;Promise.resolve().then(()=>{e({token:f.token}),kw(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>kw(n))}(n,"INTERNAL",t),removeTokenListener:t=>im(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gs.registerVersion)("@firebase/app-check","0.5.6");class om{constructor(){return(0,Fn.vb)("app-check")}}"undefined"!=typeof window&&window;var Hw=U(7841);const jw=new l.OlP("angularfire2.auth.use-emulator"),Gw=new l.OlP("angularfire2.auth.settings"),Jy=new l.OlP("angularfire2.auth.tenant-id"),qw=new l.OlP("angularfire2.auth.langugage-code"),Ww=new l.OlP("angularfire2.auth.use-device-language"),jD=new l.OlP("angularfire.auth.persistence"),GD=(n,t,e,r,i,a,d,f)=>(0,Di.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=t.runOutsideAngular(()=>n.auth());if(e&&m.useEmulator(...e),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),d)for(const[b,T]of Object.entries(d))m.settings[b]=T;return f&&m.setPersistence(f),m},[e,r,i,a,d,f]);let Qy=(()=>{class n{constructor(e,r,i,a,d,f,m,b,T,A,M,O){const q=new In.xQ,oe=(0,ht.of)(void 0).pipe((0,Ef.QV)(d.outsideAngular),ar(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,4828)))),(0,ct.U)(()=>(0,Di.on)(e,a,r)),(0,ct.U)(_e=>GD(_e,a,f,b,T,A,m,M)),Dw({bufferSize:1,refCount:!1}));if(oa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ht.of)(null);else{oe.pipe(fs()).subscribe();const qe=oe.pipe(ar(ot=>ot.getRedirectResult().then(Ut=>Ut,()=>null)),Fn.iC,Dw({bufferSize:1,refCount:!1})),Ye=oe.pipe(ar(ot=>new Wt.y(Ut=>({unsubscribe:a.runOutsideAngular(()=>ot.onAuthStateChanged(an=>Ut.next(an),an=>Ut.error(an),()=>Ut.complete()))})))),it=oe.pipe(ar(ot=>new Wt.y(Ut=>({unsubscribe:a.runOutsideAngular(()=>ot.onIdTokenChanged(an=>Ut.next(an),an=>Ut.error(an),()=>Ut.complete()))}))));this.authState=qe.pipe(ID(Ye),(0,Ly.R)(d.outsideAngular),(0,Ef.QV)(d.insideAngular)),this.user=qe.pipe(ID(it),(0,Ly.R)(d.outsideAngular),(0,Ef.QV)(d.insideAngular)),this.idToken=this.user.pipe(ar(ot=>ot?(0,vn.D)(ot.getIdToken()):(0,ht.of)(null))),this.idTokenResult=this.user.pipe(ar(ot=>ot?(0,vn.D)(ot.getIdTokenResult()):(0,ht.of)(null))),this.credential=(0,Yh.T)(qe,q,this.authState.pipe(Zn(ot=>!ot))).pipe((0,ct.U)(ot=>(null==ot?void 0:ot.user)?ot:null),(0,Ly.R)(d.outsideAngular),(0,Ef.QV)(d.insideAngular))}return(0,Di.pX)(this,oe,a,{spy:{apply:(_e,qe,Ye)=>{(_e.startsWith("signIn")||_e.startsWith("createUser"))&&Ye.then(it=>q.next(it))}}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Di.Dh),l.LFG(Di.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Fn.HU),l.LFG(jw,8),l.LFG(Gw,8),l.LFG(Jy,8),l.LFG(qw,8),l.LFG(Ww,8),l.LFG(jD,8),l.LFG(om,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zw=(()=>{class n{constructor(){Hw.Z.registerVersion("angularfire",Fn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Qy]}),n})();function qD(n){return null==n}function WD(n){return"function"==typeof n.set}function ZD(n,t){return WD(t)?t:n.ref(t)}function zD(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(WD(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Sf(n,t,e="on",r=Xu.z){return new Wt.y(i=>{let a=null;return a=n[e](t,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===e&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===e?{unsubscribe(){null!=a&&n.off(t,a)}}:{unsubscribe(){}}}).pipe((0,ct.U)(i=>{const{snapshot:a,prevKey:d}=i;let f=null;return a.exists()&&(f=a.key),{type:t,payload:a,prevKey:d,key:f}}),(0,hE.B)())}function YD(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function ts(n,t){const{payload:e,prevKey:r,key:i}=t,a=YD(n,i),d=function(n,t){if(qD(t))return 0;{const e=YD(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(m=>{const b={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,b],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==e.key)).splice(d,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(d,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===i?t:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function Yw(n){return(qD(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Ko(n,t,e){return function(n,t,e){return Sf(n,"value","once",e).pipe(ar(r=>{const i=[(0,ht.of)(r)];return t.forEach(a=>i.push(Sf(n,a,"on",e))),(0,Yh.T)(...i).pipe(Ka(ts,[]))}),ud())}(n,t=Yw(t),e)}function Xy(n,t,e){const r=(t=Yw(t)).map(i=>Sf(n,i,"on",e));return(0,Yh.T)(...r)}function Kw(n,t){return function(r,i){return zD(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function xM(n){return function(e){return e?zD(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function QD(n,t){return function(){return Sf(n,"value","on",t)}}const RM=new l.OlP("angularfire2.realtimeDatabaseURL"),JF=new l.OlP("angularfire2.database.use-emulator");let kM=(()=>{class n{constructor(e,r,i,a,d,f,m,b,T,A,M,O,q,oe,_e){this.schedulers=f;const qe=m,Ye=(0,Di.on)(e,d,r);b&&GD(Ye,d,T,M,O,q,A,oe),this.database=(0,Di.cc)(`${Ye.name}.database.${i}`,"AngularFireDatabase",Ye.name,()=>{const it=d.runOutsideAngular(()=>Ye.database(i||void 0));return qe&&it.useEmulator(...qe),it},[qe])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ZD(this.database,e));let a=i;return r&&(a=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Kw(r,"update"),set:Kw(r,"set"),push:i=>r.push(i),remove:xM(r),snapshotChanges:i=>Ko(n,i,e).pipe(Fn.iC),stateChanges:i=>Xy(n,i,e).pipe(Fn.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return Sf(n,"value","on",t).pipe((0,ct.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(Z0(t),(0,ct.U)(([i,a])=>{const d=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:d,loadedKeys:f}}),function(n){return t=>t.lift(new uF(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ct.U)(i=>i.actions))}(n,Xy(n,t).pipe(Ka((i,a)=>[...i,a],[])),e)}(n,i,e).pipe(Fn.iC),valueChanges:(i,a)=>Ko(n,i,e).pipe((0,ct.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),Fn.iC)}}(a,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>QD(n,t.schedulers.outsideAngular)().pipe(Fn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>QD(n,t.schedulers.outsideAngular)().pipe(Fn.iC,(0,ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ZD(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Di.Dh),l.LFG(Di.xv,8),l.LFG(RM,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Fn.HU),l.LFG(JF,8),l.LFG(Qy,8),l.LFG(jw,8),l.LFG(Gw,8),l.LFG(Jy,8),l.LFG(qw,8),l.LFG(Ww,8),l.LFG(jD,8),l.LFG(om,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var xf=U(982);function eI(){return n=>n.lift(new tI)}class tI{call(t,e){return e.subscribe(new PM(t))}}class PM extends ui.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var dt,XF="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},vl={},am=am||{},qt=XF||self;function lm(){}function ev(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Mf(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var Jw="closure_uid_"+(1e9*Math.random()>>>0),FM=0;function LM(n,t,e){return n.call.apply(n.bind,arguments)}function VM(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function Bi(n,t,e){return(Bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?LM:VM).apply(null,arguments)}function dc(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ii(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return t.prototype[i].apply(r,d)}}function lu(){this.s=this.s,this.o=this.o}var rI={};lu.prototype.s=!1,lu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Jw)&&n[Jw]||(n[Jw]=++FM)}(this);delete rI[n]}},lu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Qw=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},Xw=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&t.call(e,i[a],a,n)};function e1(n){return Array.prototype.concat.apply([],arguments)}function tv(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function nv(n){return/^[\s\xa0]*$/.test(n)}var hi,iI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function vs(n,t){return-1!=n.indexOf(t)}function Fd(n,t){return n<t?-1:n>t?1:0}e:{var sI=qt.navigator;if(sI){var rv=sI.userAgent;if(rv){hi=rv;break e}}hi=""}function Jo(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function oI(n){const t={};for(const e in n)t[e]=n[e];return t}var um="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function aI(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let a=0;a<um.length;a++)e=um[a],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function t1(n){return t1[" "](n),n}t1[" "]=lm;var sv,n1=vs(hi,"Opera"),hc=vs(hi,"Trident")||vs(hi,"MSIE"),r1=vs(hi,"Edge"),cm=r1||hc,iv=vs(hi,"Gecko")&&!(vs(hi.toLowerCase(),"webkit")&&!vs(hi,"Edge"))&&!(vs(hi,"Trident")||vs(hi,"MSIE"))&&!vs(hi,"Edge"),UM=vs(hi.toLowerCase(),"webkit")&&!vs(hi,"Edge");function lI(){var n=qt.document;return n?n.documentMode:void 0}e:{var i1="",ov=function(){var n=hi;return iv?/rv:([^\);]+)(\)|;)/.exec(n):r1?/Edge\/([\d\.]+)/.exec(n):hc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):UM?/WebKit\/(\S+)/.exec(n):n1?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(ov&&(i1=ov?ov[1]:""),hc){var dm=lI();if(null!=dm&&dm>parseFloat(i1)){sv=String(dm);break e}}sv=i1}var uI={};function cI(){return t=uI,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=iI(String(sv)).split("."),e=iI("9").split("."),r=Math.max(t.length,e.length);for(let d=0;0==n&&d<r;d++){var i=t[d]||"",a=e[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Fd(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Fd(0==i[2].length,0==a[2].length)||Fd(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n}();var t}var $M=qt.document&&hc&&(lI()||parseInt(sv,10))||void 0,dI=function(){if(!qt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{qt.addEventListener("test",lm,t),qt.removeEventListener("test",lm,t)}catch(e){}return n}();function Ui(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function hm(n,t){if(Ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(iv){e:{try{t1(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:hI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&hm.Z.h.call(this)}}Ui.prototype.h=function(){this.defaultPrevented=!0},Ii(hm,Ui);var hI={2:"touch",3:"pen",4:"mouse"};hm.prototype.h=function(){hm.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rf="closure_listenable_"+(1e6*Math.random()|0),tL=0;function bs(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++tL,this.ca=this.fa=!1}function uu(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function lv(n){this.src=n,this.g={},this.h=0}function o1(n,t){var e=t.type;if(e in n.g){var a,r=n.g[e],i=Qw(r,t);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(uu(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function fI(n,t,e,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==t&&a.capture==!!e&&a.ia==r)return i}return-1}lv.prototype.add=function(n,t,e,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var d=fI(n,t,r,i);return-1<d?(t=n[d],e||(t.fa=!1)):((t=new bs(t,this.src,a,!!r,i)).fa=e,n.push(t)),t};var Ld="closure_lm_"+(1e6*Math.random()|0),a1={};function uv(n,t,e,r,i){if(r&&r.once)return mI(n,t,e,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)uv(n,t[a],e,r,i);return null}return e=vI(e),n&&n[Rf]?n.N(t,e,Mf(r)?!!r.capture:!!r,i):pI(n,t,e,!1,r,i)}function pI(n,t,e,r,i,a){if(!t)throw Error("Invalid event type");var d=Mf(i)?!!i.capture:!!i,f=kf(n);if(f||(n[Ld]=f=new lv(n)),(e=f.add(t,e,r,d,a)).proxy)return e;if(r=function(){var t=yI;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)dI||(i=d),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(l1(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function mI(n,t,e,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)mI(n,t[a],e,r,i);return null}return e=vI(e),n&&n[Rf]?n.O(t,e,Mf(r)?!!r.capture:!!r,i):pI(n,t,e,!0,r,i)}function _I(n,t,e,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)_I(n,t[a],e,r,i);else r=Mf(r)?!!r.capture:!!r,e=vI(e),n&&n[Rf]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=fI(a=n.g[t],e,r,i))&&(uu(a[e]),Array.prototype.splice.call(a,e,1),0==a.length&&(delete n.g[t],n.h--))):n&&(n=kf(n))&&(t=n.g[t.toString()],n=-1,t&&(n=fI(t,e,r,i)),(e=-1<n?t[n]:null)&&fm(e))}function fm(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Rf])o1(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(l1(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=kf(t))?(o1(e,n),0==e.h&&(e.src=null,t[Ld]=null)):uu(n)}}}function l1(n){return n in a1?a1[n]:a1[n]="on"+n}function yI(n,t){if(n.ca)n=!0;else{t=new hm(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&fm(n),n=e.call(r,t)}return n}function kf(n){return(n=n[Ld])instanceof lv?n:null}var pm="__closure_events_fn_"+(1e9*Math.random()>>>0);function vI(n){return"function"==typeof n?n:(n[pm]||(n[pm]=function(t){return n.handleEvent(t)}),n[pm])}function fi(){lu.call(this),this.i=new lv(this),this.P=this,this.I=null}function $i(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Ui(t,n);else if(t instanceof Ui)t.target=t.target||n;else{var i=t;aI(t=new Ui(r,n),i)}if(i=!0,e)for(var a=e.length-1;0<=a;a--){var d=t.g=e[a];i=gm(d,r,!0,t)&&i}if(i=gm(d=t.g=n,r,!0,t)&&i,i=gm(d,r,!1,t)&&i,e)for(a=0;a<e.length;a++)i=gm(d=t.g=e[a],r,!1,t)&&i}function gm(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var d=t[a];if(d&&!d.ca&&d.capture==e){var f=d.listener,m=d.ia||d.src;d.fa&&o1(n.i,d),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Ii(fi,lu),fi.prototype[Rf]=!0,fi.prototype.removeEventListener=function(n,t,e,r){_I(this,n,t,e,r)},fi.prototype.M=function(){if(fi.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)uu(e[r]);delete n.g[t],n.h--}}this.I=null},fi.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},fi.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var Pf=qt.JSON.stringify;function bI(){var n=CI;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var dv,cv=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new u1,n=>n.reset());class u1{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function jM(n){qt.setTimeout(()=>{throw n},0)}function c1(n,t){dv||function(){var n=qt.Promise.resolve(void 0);dv=function(){n.then(EI)}}(),hv||(dv(),hv=!0),CI.add(n,t)}var hv=!1,CI=new class{constructor(){this.h=this.g=null}add(t,e){const r=cv.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function EI(){for(var n;n=bI();){try{n.h.call(n.g)}catch(e){jM(e)}var t=cv;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}hv=!1}function mm(n,t){fi.call(this),this.h=n||1,this.g=t||qt,this.j=Bi(this.kb,this),this.l=Date.now()}function d1(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function h1(n,t,e){if("function"==typeof n)e&&(n=Bi(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Bi(n.handleEvent,n)}return 2147483647<Number(t)?-1:qt.setTimeout(n,t||0)}function f1(n){n.g=h1(()=>{n.g=null,n.i&&(n.i=!1,f1(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Ii(mm,fi),(dt=mm.prototype).da=!1,dt.S=null,dt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$i(this,"tick"),this.da&&(d1(this),this.start()))}},dt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){mm.Z.M.call(this),d1(this),delete this.g};class GM extends lu{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:f1(this)}M(){super.M(),this.g&&(qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Of(n){lu.call(this),this.h=n,this.g={}}Ii(Of,lu);var p1=[];function g1(n,t,e,r){Array.isArray(e)||(e&&(p1[0]=e.toString()),e=p1);for(var i=0;i<e.length;i++){var a=uv(t,e[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function m1(n){Jo(n.g,function(t,e){this.g.hasOwnProperty(e)&&fm(t)},n),n.g={}}function fv(){this.g=!0}function Vd(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var d=1;d<i.length;d++)i[d]=""}}}return Pf(e)}catch(f){return t}}(n,e)+(r?" "+r:"")})}Of.prototype.M=function(){Of.Z.M.call(this),m1(this)},Of.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fv.prototype.Aa=function(){this.g=!1},fv.prototype.info=function(){};var Ff={},ZM=null;function _1(){return ZM=ZM||new fi}function zM(n){Ui.call(this,Ff.Ma,n)}function pv(n){const t=_1();$i(t,new zM(t,n))}function YM(n,t){Ui.call(this,Ff.STAT_EVENT,n),this.stat=t}function Us(n){const t=_1();$i(t,new YM(t,n))}function KM(n,t){Ui.call(this,Ff.Na,n),this.size=t}function gv(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return qt.setTimeout(function(){n()},t)}Ff.Ma="serverreachability",Ii(zM,Ui),Ff.STAT_EVENT="statevent",Ii(YM,Ui),Ff.Na="timingevent",Ii(KM,Ui);var y1={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},JM={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function TI(){}function XM(){}TI.prototype.h=null;var w1,mv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function v1(){Ui.call(this,"d")}function b1(){Ui.call(this,"c")}function C1(){}function _v(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new Of(this),this.P=tR,this.W=new mm(n=cm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new eR}function eR(){this.i=null,this.g="",this.h=!1}Ii(v1,Ui),Ii(b1,Ui),Ii(C1,TI),C1.prototype.g=function(){return new XMLHttpRequest},C1.prototype.i=function(){return{}},w1=new C1;var tR=45e3,E1={},yv={};function DI(n,t,e){n.K=1,n.v=Ud(Cl(t)),n.s=e,n.U=!0,nR(n,null)}function nR(n,t){n.F=Date.now(),vv(n),n.A=Cl(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Vf(e.h,"t",r),n.C=0,e=n.l.H,n.h=new eR,n.g=CR(n.l,e?t:null,!n.s),0<n.O&&(n.L=new GM(Bi(n.Ia,n,n.g),n.O)),g1(n.V,n.g,"readystatechange",n.gb),t=n.H?oI(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),pv(1),function(n,t,e,r,i,a){n.info(function(){if(n.g)if(a)for(var d="",f=a.split("&"),m=0;m<f.length;m++){var b=f[m].split("=");if(1<b.length){var T=b[0];b=b[1];var A=T.split("_");d=2<=A.length&&"type"==A[1]?d+(T+"=")+b+"&":d+(T+"=redacted&")}}else d=null;else d=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function iR(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=sR(n,e),i==yv){4==t&&(n.o=4,Us(14),r=!1),Vd(n.j,n.m,null,"[Incomplete Response]");break}if(i==E1){n.o=4,Us(15),Vd(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}Vd(n.j,n.m,i,null),T1(n,i)}rR(n)&&i!=yv&&i!=E1&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,Us(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),jI(t),t.L=!0,Us(11))):(Vd(n.j,n.m,e,"[Invalid Chunked Response]"),fc(n),bl(n))}function sR(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?yv:(e=Number(t.substring(e,r)),isNaN(e)?E1:(r+=1)+e>t.length?yv:(t=t.substr(r,e),n.C=r+e,t))}function vv(n){n.Y=Date.now()+n.P,II(n,n.P)}function II(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=gv(Bi(n.eb,n),t)}function Lf(n){n.B&&(qt.clearTimeout(n.B),n.B=null)}function bl(n){0==n.l.G||n.I||GI(n.l,n)}function fc(n){Lf(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,d1(n.W),m1(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function T1(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||vm(e.i,n)))if(e.I=n.N,!n.J&&vm(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=gv(Bi(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;Tm(e),Nv(e)}HI(e),Us(18)}if(1>=MI(e.i)&&e.ka){try{e.ka()}catch(b){}e.ka=void 0}}else Gd(e,11)}else if((n.J||e.g==n)&&Tm(e),!nv(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let b=i[t];if(e.U=b[0],b=b[1],2==e.G)if("c"==b[0]){e.J=b[1],e.la=b[2];const T=b[3];null!=T&&(e.ma=T,e.h.info("VER="+e.ma));const A=b[4];null!=A&&(e.za=A,e.h.info("SVER="+e.za));const M=b[5];null!=M&&"number"==typeof M&&0<M&&(e.K=r=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const O=n.g;if(O){const q=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.i;!a.g&&(vs(q,"spdy")||vs(q,"quic")||vs(q,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(S1(a,a.h),a.h=null))}if(r.D){const oe=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;oe&&(r.sa=oe,Tr(r.F,r.D,oe))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var d=n;if((r=e).oa=F1(r,r.H?r.la:null,r.W),d.J){RI(r.i,d);var f=d,m=r.K;m&&f.setTimeout(m),f.B&&(Lf(f),vv(f)),r.g=d}else wR(r);0<e.l.length&&gc(e)}else"stop"!=b[0]&&"close"!=b[0]||Gd(e,7);else 3==e.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Gd(e,7):Sv(e):"noop"!=b[0]&&e.j&&e.j.wa(b),e.A=0)}pv(4)}catch(b){}}function _m(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(ev(n)||"string"==typeof n)Xw(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(ev(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(ev(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var a=0;a<i;a++)t.call(void 0,r[a],e&&e[a],n)}}function Bd(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Bd)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function bv(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];pc(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)pc(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function pc(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(dt=_v.prototype).setTimeout=function(n){this.P=n},dt.gb=function(n){n=n.target;const t=this.L;t&&3==cu(n)?t.l():this.Ia(n)},dt.Ia=function(n){try{if(n==this.g)e:{const T=cu(this.g);var t=this.g.Da();const A=this.g.ba();if(!(3>T)&&(3!=T||cm||this.g&&(this.h.h||this.g.ga()||VI(this.g)))){this.I||4!=T||7==t||pv(8==t||0>=A?3:2),Lf(this);var e=this.g.ba();this.N=e;t:if(rR(this)){var r=VI(this.g);n="";var i=r.length,a=4==cu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fc(this),bl(this);var d="";break t}this.h.i=new qt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:a&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,a,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+a+" "+d})}(this.j,this.u,this.A,this.m,this.X,T,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nv(f)){var b=f;break t}}b=null}if(!(e=b)){this.i=!1,this.o=3,Us(12),fc(this),bl(this);break e}Vd(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,T1(this,e)}this.U?(iR(this,T,d),cm&&this.i&&3==T&&(g1(this.V,this.W,"tick",this.fb),this.W.start())):(Vd(this.j,this.m,d,null),T1(this,d)),4==T&&fc(this),this.i&&!this.I&&(4==T?GI(this.l,this):(this.i=!1,vv(this)))}else 400==e&&0<d.indexOf("Unknown SID")?(this.o=3,Us(12)):(this.o=0,Us(13)),fc(this),bl(this)}}}catch(T){}},dt.fb=function(){if(this.g){var n=cu(this.g),t=this.g.ga();this.C<t.length&&(Lf(this),iR(this,n,t),this.i&&4!=n&&vv(this))}},dt.cancel=function(){this.I=!0,fc(this)},dt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(pv(3),Us(17)),fc(this),this.o=2,bl(this)):II(this,this.Y-n)},(dt=Bd.prototype).R=function(){bv(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},dt.T=function(){return bv(this),this.g.concat()},dt.get=function(n,t){return pc(this.h,n)?this.h[n]:t},dt.set=function(n,t){pc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},dt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],a=this.get(i);n.call(t,a,i,this)}};var aR=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wl(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof wl){this.g=void 0!==t?t:n.g,D1(this,n.j),this.s=n.s,I1(this,n.i),A1(this,n.m),this.l=n.l,t=n.h;var e=new ym;e.i=t.i,t.g&&(e.g=new Bd(t.g),e.h=t.h),SI(this,e),this.o=n.o}else n&&(e=String(n).match(aR))?(this.g=!!t,D1(this,e[1]||"",!0),this.s=wv(e[2]||""),I1(this,e[3]||"",!0),A1(this,e[4]),this.l=wv(e[5]||"",!0),SI(this,e[6]||"",!0),this.o=wv(e[7]||"")):(this.g=!!t,this.h=new ym(null,this.g))}function Cl(n){return new wl(n)}function D1(n,t,e){n.j=e?wv(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function I1(n,t,e){n.i=e?wv(t,!0):t}function A1(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function SI(n,t,e){t instanceof ym?(n.h=t,function(n,t){t&&!n.j&&(Hd(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(hR(this,r),Vf(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=$d(t,oL)),n.h=new ym(t,n.g))}function Tr(n,t,e){n.h.set(t,e)}function Ud(n){return Tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function wv(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function $d(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,uR),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wl.prototype.toString=function(){var n=[],t=this.j;t&&n.push($d(t,cR,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push($d(t,cR,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push($d(e,"/"==e.charAt(0)?dR:sL,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",$d(e,NI)),n.join("")};var cR=/[#\/\?@]/g,sL=/[#\?:]/g,dR=/[#\?]/g,oL=/[#\?@]/g,NI=/#/g;function ym(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Hd(n){n.g||(n.g=new Bd,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var a=n[e].substring(0,r);i=n[e].substring(r+1)}else a=n[e];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function hR(n,t){Hd(n),t=Bf(n,t),pc(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,pc((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&bv(n)))}function xI(n,t){return Hd(n),t=Bf(n,t),pc(n.g.h,t)}function Vf(n,t,e){hR(n,t),0<e.length&&(n.i=null,n.g.set(Bf(n,t),tv(e)),n.h+=e.length)}function Bf(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function Cv(n){this.l=n||gR,n=qt.PerformanceNavigationTiming?0<(n=qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(qt.g&&qt.g.Ea&&qt.g.Ea()&&qt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=ym.prototype).add=function(n,t){Hd(this),this.i=null,n=Bf(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},dt.forEach=function(n,t){Hd(this),this.g.forEach(function(e,r){Xw(e,function(i){n.call(t,i,r,this)},this)},this)},dt.T=function(){Hd(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],a=0;a<i.length;a++)e.push(t[r]);return e},dt.R=function(n){Hd(this);var t=[];if("string"==typeof n)xI(this,n)&&(t=e1(t,this.g.get(Bf(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=e1(t,n[e])}return t},dt.set=function(n,t){return Hd(this),this.i=null,xI(this,n=Bf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},dt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var d=i;""!==r[a]&&(d+="="+encodeURIComponent(String(r[a]))),n.push(d)}}return this.i=n.join("&")};var gR=10;function $s(n){return!!n.h||!!n.g&&n.g.size>=n.j}function MI(n){return n.h?1:n.g?n.g.size:0}function vm(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function S1(n,t){n.g?n.g.add(t):n.h=t}function RI(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function Ev(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return tv(n.i)}function Tv(){}function kI(){this.g=new Tv}function mR(n,t,e){const r=e||"";try{_m(n,function(i,a){let d=i;Mf(i)&&(d=Pf(i)),t.push(r+a+"="+encodeURIComponent(d))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bm(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function wm(n){this.l=n.$b||null,this.j=n.ib||!1}function Dv(n,t){fi.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Cm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Cv.prototype.cancel=function(){if(this.i=Ev(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Tv.prototype.stringify=function(n){return qt.JSON.stringify(n,void 0)},Tv.prototype.parse=function(n){return qt.JSON.parse(n,void 0)},Ii(wm,TI),wm.prototype.g=function(){return new Dv(this.l,this.j)},wm.prototype.i=function(n){return function(){return n}}({}),Ii(Dv,fi);var Cm=0;function N1(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Uf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,jd(n)}function jd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=Dv.prototype).open=function(n,t){if(this.readyState!=Cm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,jd(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||qt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Uf(this)),this.readyState=Cm},dt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,jd(this)),this.g&&(this.readyState=3,jd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==qt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;N1(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},dt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?Uf(this):jd(this),3==this.readyState&&N1(this)}},dt.Ua=function(n){this.g&&(this.response=this.responseText=n,Uf(this))},dt.Ta=function(n){this.g&&(this.response=n,Uf(this))},dt.ha=function(){this.g&&Uf(this)},dt.setRequestHeader=function(n,t){this.v.append(n,t)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Dv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var _R=qt.JSON.parse;function Bn(n){fi.call(this),this.headers=new Bd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=OI,this.K=this.L=!1}Ii(Bn,fi);var OI="",aL=/^https?$/i,yR=["POST","PUT"];function vR(n){return"content-type"==n.toLowerCase()}function FI(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,LI(n),Iv(n)}function LI(n){n.D||(n.D=!0,$i(n,"complete"),$i(n,"error"))}function bR(n){if(n.h&&void 0!==am&&(!n.C[1]||4!=cu(n)||2!=n.ba()))if(n.v&&4==cu(n))h1(n.Fa,0,n);else if($i(n,"readystatechange"),4==cu(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===f){var i=String(n.H).match(aR)[1]||null;if(!i&&qt.self&&qt.self.location){var a=qt.self.location.protocol;i=a.substr(0,a.length-1)}r=!aL.test(i?i.toLowerCase():"")}e=r}if(e)$i(n,"complete"),$i(n,"success");else{n.m=6;try{var d=2<cu(n)?n.g.statusText:""}catch(m){d=""}n.j=d+" ["+n.ba()+"]",LI(n)}}finally{Iv(n)}}}function Iv(n,t){if(n.g){x1(n);const e=n.g,r=n.C[0]?lm:null;n.g=null,n.C=null,t||$i(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function x1(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(qt.clearTimeout(n.A),n.A=null)}function cu(n){return n.g?n.g.readyState:0}function VI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case OI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function M1(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return Jo(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):Tr(n,t,e))}function Av(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function R1(n){this.za=0,this.l=[],this.h=new fv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Av("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Av("baseRetryDelayMs",5e3,n),this.$a=Av("retryDelaySeedMs",1e4,n),this.Ya=Av("forwardChannelMaxRetries",2,n),this.ra=Av("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Cv(n&&n.concurrentRequestLimit),this.Ca=new kI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Sv(n){if(UI(n),3==n.G){var t=n.V++,e=Cl(n.F);Tr(e,"SID",n.J),Tr(e,"RID",t),Tr(e,"TYPE","terminate"),Em(n,e),(t=new _v(n,n.h,t,void 0)).K=2,t.v=Ud(Cl(e)),e=!1,qt.navigator&&qt.navigator.sendBeacon&&(e=qt.navigator.sendBeacon(t.v.toString(),"")),!e&&qt.Image&&((new Image).src=t.v,e=!0),e||(t.g=CR(t.l,null),t.g.ea(t.v)),t.F=Date.now(),vv(t)}WI(n)}function Nv(n){n.g&&(jI(n),n.g.cancel(),n.g=null)}function UI(n){Nv(n),n.u&&(qt.clearTimeout(n.u),n.u=null),Tm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&qt.clearTimeout(n.m),n.m=null)}function xv(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&gc(n)}function gc(n){$s(n.i)||n.m||(n.m=!0,c1(n.Ha,n),n.C=0)}function P1(n,t){var e;e=t?t.m:n.V++;const r=Cl(n.F);Tr(r,"SID",n.J),Tr(r,"RID",e),Tr(r,"AID",n.U),Em(n,r),n.o&&n.s&&M1(r,n.o,n.s),e=new _v(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=$I(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),S1(n.i,e),DI(e,r,t)}function Em(n,t){n.j&&_m({},function(e,r){Tr(t,r,e)})}function $I(n,t,e){e=Math.min(n.l.length,e);var r=n.j?Bi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const d=["count="+e];-1==a?0<e?(a=i[0].h,d.push("ofs="+a)):a=0:d.push("ofs="+a);let f=!0;for(let m=0;m<e;m++){let b=i[m].h;const T=i[m].g;if(b-=a,0>b)a=Math.max(0,i[m].h-100),f=!1;else try{mR(T,d,"req"+b+"_")}catch(A){r&&r(T)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function wR(n){n.g||n.u||(n.Y=1,c1(n.Ga,n),n.A=0)}function HI(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=gv(Bi(n.Ga,n),qI(n,n.A)),n.A++,0))}function jI(n){null!=n.B&&(qt.clearTimeout(n.B),n.B=null)}function O1(n){n.g=new _v(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Cl(n.oa);Tr(t,"RID","rpc"),Tr(t,"SID",n.J),Tr(t,"CI",n.N?"0":"1"),Tr(t,"AID",n.U),Em(n,t),Tr(t,"TYPE","xmlhttp"),n.o&&n.s&&M1(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Ud(Cl(t)),e.s=null,e.U=!0,nR(e,n)}function Tm(n){null!=n.v&&(qt.clearTimeout(n.v),n.v=null)}function GI(n,t){var e=null;if(n.g==t){Tm(n),jI(n),n.g=null;var r=2}else{if(!vm(n.i,t))return;e=t.D,RI(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;$i(r=_1(),new KM(r,e,t,i)),gc(n)}else wR(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(MI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=gv(Bi(n.Ha,n,t),qI(n,n.C)),n.C++,0)))}(n,t)||2==r&&HI(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:Gd(n,5);break;case 4:Gd(n,10);break;case 3:Gd(n,6);break;default:Gd(n,2)}}function qI(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Gd(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=Bi(n.jb,n);e||(e=new wl("//www.google.com/images/cleardot.gif"),qt.location&&"http"==qt.location.protocol||D1(e,"https"),Ud(e)),function(n,t){const e=new fv;if(qt.Image){const r=new Image;r.onload=dc(bm,e,r,"TestLoadImage: loaded",!0,t),r.onerror=dc(bm,e,r,"TestLoadImage: error",!1,t),r.onabort=dc(bm,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=dc(bm,e,r,"TestLoadImage: timeout",!1,t),qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else Us(2);n.G=0,n.j&&n.j.va(t),WI(n),UI(n)}function WI(n){n.G=0,n.I=-1,n.j&&((0!=Ev(n.i).length||0!=n.l.length)&&(n.i.i.length=0,tv(n.l),n.l.length=0),n.j.ua())}function F1(n,t,e){let r=function(n){return n instanceof wl?Cl(n):new wl(n,void 0)}(e);if(""!=r.i)t&&I1(r,t+"."+r.i),A1(r,r.m);else{const i=qt.location;r=function(n,t,e,r){var i=new wl(null,void 0);return n&&D1(i,n),t&&I1(i,t),e&&A1(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&Jo(n.aa,function(i,a){Tr(r,a,i)}),e=n.sa,(t=n.D)&&e&&Tr(r,t,e),Tr(r,"VER",n.ma),Em(n,r),r}function CR(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Bn(e&&n.Ba&&!n.qa?new wm({ib:!0}):n.qa)).L=n.H,t}function ER(){}function Mv(){if(hc&&!(10<=Number($M)))throw Error("Environmental error: no available transport.")}function ws(n,t){fi.call(this),this.g=new R1(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!nv(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!nv(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new qd(this)}function pi(n){v1.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function TR(){b1.call(this),this.status=1}function qd(n){this.g=n}(dt=Bn.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():w1.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:w1),this.g.onreadystatechange=Bi(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(a){return void FI(this,a)}n=e||"";const i=new Bd(this.headers);r&&_m(r,function(a,d){i.set(d,a)}),r=function(n){e:{var t=vR;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=qt.FormData&&n instanceof qt.FormData,!(0<=Qw(yR,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,d){this.g.setRequestHeader(d,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{x1(this),0<this.B&&((this.K=function(n){return hc&&cI()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bi(this.pa,this)):this.A=h1(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){FI(this,a)}},dt.pa=function(){void 0!==am&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$i(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$i(this,"complete"),$i(this,"abort"),Iv(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Iv(this,!0)),Bn.Z.M.call(this)},dt.Fa=function(){this.s||(this.F||this.v||this.l?bR(this):this.cb())},dt.cb=function(){bR(this)},dt.ba=function(){try{return 2<cu(this)?this.g.status:-1}catch(n){return-1}},dt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},dt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),_R(t)}},dt.Da=function(){return this.m},dt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=R1.prototype).ma=8,dt.G=1,dt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},dt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new _v(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=oI(a),aI(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=$I(this,i,t),Tr(e=Cl(this.F),"RID",n),Tr(e,"CVER",22),this.D&&Tr(e,"X-HTTP-Session-Id",this.D),Em(this,e),this.o&&a&&M1(e,this.o,a),S1(this.i,i),this.Ra&&Tr(e,"TYPE","init"),this.ja?(Tr(e,"$req",t),Tr(e,"SID","null"),i.$=!0,DI(i,e,null)):DI(i,e,t),this.G=2}}else 3==this.G&&(n?P1(this,n):0==this.l.length||$s(this.i)||P1(this))},dt.Ga=function(){if(this.u=null,O1(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=gv(Bi(this.bb,this),n)}},dt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Us(10),Nv(this),O1(this))},dt.ab=function(){null!=this.v&&(this.v=null,Nv(this),HI(this),Us(19))},dt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Us(2)):(this.h.info("Failed to ping google.com"),Us(1))},(dt=ER.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Oa=function(){},Mv.prototype.g=function(n,t){return new ws(n,t)},Ii(ws,fi),ws.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),c1(Bi(n.hb,n,t))),Us(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=F1(n,null,n.W),gc(n)},ws.prototype.close=function(){Sv(this.g)},ws.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,xv(this.g,t)}else this.v?((t={}).__data__=Pf(n),xv(this.g,t)):xv(this.g,n)},ws.prototype.M=function(){this.g.j=null,delete this.j,Sv(this.g),delete this.g,ws.Z.M.call(this)},Ii(pi,v1),Ii(TR,b1),Ii(qd,ER),qd.prototype.xa=function(){$i(this.g,"a")},qd.prototype.wa=function(n){$i(this.g,new pi(n))},qd.prototype.va=function(n){$i(this.g,new TR(n))},qd.prototype.ua=function(){$i(this.g,"b")},Mv.prototype.createWebChannel=Mv.prototype.g,ws.prototype.send=ws.prototype.u,ws.prototype.open=ws.prototype.m,ws.prototype.close=ws.prototype.close,y1.NO_ERROR=0,y1.TIMEOUT=8,y1.HTTP_ERROR=6,JM.COMPLETE="complete",XM.EventType=mv,mv.OPEN="a",mv.CLOSE="b",mv.ERROR="c",mv.MESSAGE="d",fi.prototype.listen=fi.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.La,Bn.prototype.getLastErrorCode=Bn.prototype.Da,Bn.prototype.getStatus=Bn.prototype.ba,Bn.prototype.getResponseJson=Bn.prototype.Qa,Bn.prototype.getResponseText=Bn.prototype.ga,Bn.prototype.send=Bn.prototype.ea;var ZI=vl.createWebChannelTransport=function(){return new Mv},DR=vl.getStatEventTarget=function(){return _1()},$f=vl.ErrorCode=y1,IR=vl.EventType=JM,AR=vl.Event=Ff,L1=vl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Wd=vl.FetchXmlHttpFactory=wm,Dm=vl.WebChannel=XM,V1=vl.XhrIo=Bn;const Rv="@firebase/firestore";class Hi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Hi.UNAUTHENTICATED=new Hi(null),Hi.GOOGLE_CREDENTIALS=new Hi("google-credentials-uid"),Hi.FIRST_PARTY=new Hi("first-party-uid"),Hi.MOCK_USER=new Hi("mock-user");let du="9.6.11";const mc=new eo.Yd("@firebase/firestore");function Im(){return mc.logLevel}function Me(n,...t){if(mc.logLevel<=eo.in.DEBUG){const e=t.map(B1);mc.debug(`Firestore (${du}): ${n}`,...e)}}function gi(n,...t){if(mc.logLevel<=eo.in.ERROR){const e=t.map(B1);mc.error(`Firestore (${du}): ${n}`,...e)}}function Am(n,...t){if(mc.logLevel<=eo.in.WARN){const e=t.map(B1);mc.warn(`Firestore (${du}): ${n}`,...e)}}function B1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function pt(n="Unexpected state"){const t=`FIRESTORE (${du}) INTERNAL ASSERTION FAILED: `+n;throw gi(t),new Error(t)}function kt(n,t){n||pt()}function rt(n,t){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends V.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ai{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class YI{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class NR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Hi.UNAUTHENTICATED))}shutdown(){}}class xR{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class MR{constructor(t){this.t=t,this.currentUser=Hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const a=b=>this.i!==i?(i=this.i,e(b)):Promise.resolve();let d=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Ai,t.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const b=d;t.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield a(r.currentUser)}))},m=b=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Ai)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new YI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return kt(null===t||"string"==typeof t),new Hi(t)}}class uL{constructor(t,e,r){this.type="FirstParty",this.user=Hi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class RR{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new uL(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class KI{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kR{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=a=>{null!=a.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const d=a.token!==this.p;return this.p=a.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?e(a.token):Promise.resolve()};this.o=a=>{t.enqueueRetryable(()=>r(a))};const i=a=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(kt("string"==typeof e.token),this.p=e.token,new KI(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Qo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function PR(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Qo.A=-1;class JI{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=PR(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<e&&(r+=t.charAt(i[a]%t.length))}return r}}function Kt(n,t){return n<t?-1:n>t?1:0}function Hf(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function QI(n){return n+"\0"}class Mn{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Le(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Le(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Le(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Le(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Mn.fromMillis(Date.now())}static fromDate(t){return Mn.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Mn(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Kt(this.nanoseconds,t.nanoseconds):Kt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Pt(t)}static min(){return new Pt(new Mn(0,0))}static max(){return new Pt(new Mn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function XI(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Zd(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function eA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class kv{constructor(t,e,r){void 0===e?e=0:e>t.length&&pt(),void 0===r?r=t.length-e:r>t.length-e&&pt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===kv.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof kv?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const a=t.get(i),d=e.get(i);if(a<d)return-1;if(a>d)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class bn extends kv{construct(t,e,r){return new bn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Le(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new bn(e)}static emptyPath(){return new bn([])}}const OR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Si extends kv{construct(t,e,r){return new Si(t,e,r)}static isValidIdentifier(t){return OR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Si.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Si(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Le(me.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let d=!1;for(;i<t.length;){const f=t[i];if("\\"===f){if(i+1===t.length)throw new Le(me.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Le(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(a(),i++)}if(a(),d)throw new Le(me.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Si(e)}static emptyPath(){return new Si([])}}class El{constructor(t){this.fields=t,t.sort(Si.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Hf(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class Ni{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Ni(e)}static fromUint8Array(t){const e=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(t);return new Ni(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Kt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const FR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zd(n){if(kt(!!n),"string"==typeof n){let t=0;const e=FR.exec(n);if(kt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ur(n.seconds),nanos:Ur(n.nanos)}}function Ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jf(n){return"string"==typeof n?Ni.fromBase64String(n):Ni.fromUint8Array(n)}function Sm(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function nA(n){const t=n.mapValue.fields.__previous_value__;return Sm(t)?nA(t):t}function Nm(n){const t=zd(n.mapValue.fields.__local_write_time__.timestampValue);return new Mn(t.seconds,t.nanos)}class LR{constructor(t,e,r,i,a,d,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class _c{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new _c("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof _c&&t.projectId===this.projectId&&t.database===this.database}}function Yd(n){return null==n}function xm(n){return 0===n&&1/n==-1/0}function rA(n){return"number"==typeof n&&Number.isInteger(n)&&!xm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class We{constructor(t){this.path=t}static fromPath(t){return new We(bn.fromString(t))}static fromName(t){return new We(bn.fromString(t).popFirst(5))}static empty(){return new We(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===bn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return bn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new We(new bn(t.slice()))}}const VR={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},U1={nullValue:"NULL_VALUE"};function Kd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sm(n)?4:sA(n)?9:10:pt()}function Ma(n,t){if(n===t)return!0;const e=Kd(n);if(e!==Kd(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Nm(n).isEqual(Nm(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=zd(r.timestampValue),d=zd(i.timestampValue);return a.seconds===d.seconds&&a.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,jf(n.bytesValue).isEqual(jf(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Ur(r.geoPointValue.latitude)===Ur(i.geoPointValue.latitude)&&Ur(r.geoPointValue.longitude)===Ur(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ur(r.integerValue)===Ur(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Ur(r.doubleValue),d=Ur(i.doubleValue);return a===d?xm(a)===xm(d):isNaN(a)&&isNaN(d)}return!1}(n,t);case 9:return Hf(n.arrayValue.values||[],t.arrayValue.values||[],Ma);case 10:return function(r,i){const a=r.mapValue.fields||{},d=i.mapValue.fields||{};if(XI(a)!==XI(d))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===d[f]||!Ma(a[f],d[f])))return!1;return!0}(n,t);default:return pt()}var i}function Gf(n,t){return void 0!==(n.values||[]).find(e=>Ma(e,t))}function hu(n,t){if(n===t)return 0;const e=Kd(n),r=Kd(t);if(e!==r)return Kt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,t.booleanValue);case 2:return function(i,a){const d=Ur(i.integerValue||i.doubleValue),f=Ur(a.integerValue||a.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,t);case 3:return Pv(n.timestampValue,t.timestampValue);case 4:return Pv(Nm(n),Nm(t));case 5:return Kt(n.stringValue,t.stringValue);case 6:return function(i,a){const d=jf(i),f=jf(a);return d.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(i,a){const d=i.split("/"),f=a.split("/");for(let m=0;m<d.length&&m<f.length;m++){const b=Kt(d[m],f[m]);if(0!==b)return b}return Kt(d.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,a){const d=Kt(Ur(i.latitude),Ur(a.latitude));return 0!==d?d:Kt(Ur(i.longitude),Ur(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,a){const d=i.values||[],f=a.values||[];for(let m=0;m<d.length&&m<f.length;++m){const b=hu(d[m],f[m]);if(b)return b}return Kt(d.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,a){const d=i.fields||{},f=Object.keys(d),m=a.fields||{},b=Object.keys(m);f.sort(),b.sort();for(let T=0;T<f.length&&T<b.length;++T){const A=Kt(f[T],b[T]);if(0!==A)return A;const M=hu(d[f[T]],m[b[T]]);if(0!==M)return M}return Kt(f.length,b.length)}(n.mapValue,t.mapValue);default:throw pt()}}function Pv(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Kt(n,t);const e=zd(n),r=zd(t),i=Kt(e.seconds,r.seconds);return 0!==i?i:Kt(e.nanos,r.nanos)}function yc(n){return Mm(n)}function Mm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=zd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jf(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const d of r.values||[])a?a=!1:i+=",",i+=Mm(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",d=!0;for(const f of i)d?d=!1:a+=",",a+=`${f}:${Mm(r.fields[f])}`;return a+"}"}(n.mapValue):pt();var t}function Tl(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function qf(n){return!!n&&"integerValue"in n}function Wf(n){return!!n&&"arrayValue"in n}function $1(n){return!!n&&"nullValue"in n}function iA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ov(n){return!!n&&"mapValue"in n}function Zf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Zd(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Zf(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Zf(n.arrayValue.values[e]);return t}return Object.assign({},n)}function sA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function BR(n){return"nullValue"in n?U1:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Tl(_c.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:pt()}function UR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Tl(_c.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?VR:pt()}function Fv(n,t){return void 0===n?t:void 0===t||hu(n,t)>0?n:t}function oA(n,t){return void 0===n?t:void 0===t||hu(n,t)<0?n:t}class Un{constructor(t){this.value=t}static empty(){return new Un({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Ov(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Zf(e)}setAll(t){let e=Si.emptyPath(),r={},i=[];t.forEach((d,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,r,i),r={},i=[],e=f.popLast()}d?r[f.lastSegment()]=Zf(d):i.push(f.lastSegment())});const a=this.getFieldsMap(e);this.applyChanges(a,r,i)}delete(t){const e=this.field(t.popLast());Ov(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ma(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];Ov(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Zd(e,(i,a)=>t[i]=a);for(const i of r)delete t[i]}clone(){return new Un(Zf(this.value))}}function zf(n){const t=[];return Zd(n.fields,(e,r)=>{const i=new Si([e]);if(Ov(r)){const a=zf(r.mapValue).fields;if(0===a.length)t.push(i);else for(const d of a)t.push(i.child(d))}else t.push(i)}),new El(t)}class Jn{constructor(t,e,r,i,a,d){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=a,this.documentState=d}static newInvalidDocument(t){return new Jn(t,0,Pt.min(),Pt.min(),Un.empty(),0)}static newFoundDocument(t,e,r){return new Jn(t,1,e,Pt.min(),r,0)}static newNoDocument(t,e){return new Jn(t,2,e,Pt.min(),Un.empty(),0)}static newUnknownDocument(t,e){return new Jn(t,3,e,Pt.min(),Un.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Jn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rm{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function Yf(n){return n.fields.find(t=>2===t.kind)}function fu(n){return n.fields.filter(t=>2!==t.kind)}Rm.UNKNOWN_ID=-1;class km{constructor(t,e){this.fieldPath=t,this.kind=e}}class vc{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new vc(0,pu.min())}}function aA(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(1e9===r?new Mn(e+1,0):new Mn(e,r));return new pu(i,We.empty(),t)}function $R(n){return new pu(n.readTime,n.key,-1)}class pu{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new pu(Pt.min(),We.empty(),-1)}static max(){return new pu(Pt.max(),We.empty(),-1)}}function HR(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=We.comparator(n.documentKey,t.documentKey),0!==e?e:Kt(n.largestBatchId,t.largestBatchId))}class lA{constructor(t,e=null,r=[],i=[],a=null,d=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=d,this.endAt=f,this.P=null}}function uA(n,t=null,e=[],r=[],i=null,a=null,d=null){return new lA(n,t,e,r,i,a,d)}function Jd(n){const t=rt(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+yc(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Yd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>yc(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>yc(r)).join(",")),t.P=e}return t.P}function Xo(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Lv(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!Ma(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!fA(n.startAt,t.startAt)&&fA(n.endAt,t.endAt)}function bc(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Kf(n,t){return n.filters.filter(e=>e instanceof ji&&e.field.isEqual(t))}function cA(n,t,e){let r,i=!0;for(const a of Kf(n,t)){let d,f=!0;switch(a.op){case"<":case"<=":d=BR(a.value);break;case"==":case"in":case">=":d=a.value;break;case">":d=a.value,f=!1;break;case"!=":case"not-in":d=U1}Fv(r,d)===d&&(r=d,i=f)}if(null!==e)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const d=e.position[a];Fv(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}function dA(n,t,e){let r,i=!0;for(const a of Kf(n,t)){let d,f=!0;switch(a.op){case">=":case">":d=UR(a.value),f=!1;break;case"==":case"in":case"<=":d=a.value;break;case"<":d=a.value,f=!1;break;case"!=":case"not-in":d=VR}oA(r,d)===d&&(r=d,i=f)}if(null!==e)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(t)){const d=e.position[a];oA(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}class ji extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new H1(t,e,r):"array-contains"===e?new qR(t,r):"in"===e?new WR(t,r):"not-in"===e?new ZR(t,r):"array-contains-any"===e?new gu(t,r):new ji(t,e,r)}static V(t,e,r){return"in"===e?new GR(t,r):new hA(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(hu(e,this.value)):null!==e&&Kd(this.value)===Kd(e)&&this.v(hu(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class H1 extends ji{constructor(t,e,r){super(t,e,r),this.key=We.fromName(r.referenceValue)}matches(t){const e=We.comparator(t.key,this.key);return this.v(e)}}class GR extends ji{constructor(t,e){super(t,"in",e),this.keys=j1(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class hA extends ji{constructor(t,e){super(t,"not-in",e),this.keys=j1(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function j1(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>We.fromName(r.referenceValue))}class qR extends ji{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Wf(e)&&Gf(e.arrayValue,this.value)}}class WR extends ji{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Gf(this.value.arrayValue,e)}}class ZR extends ji{constructor(t,e){super(t,"not-in",e)}matches(t){if(Gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Gf(this.value.arrayValue,e)}}class gu extends ji{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Wf(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Gf(this.value.arrayValue,r))}}class ea{constructor(t,e){this.position=t,this.inclusive=e}}class Ra{constructor(t,e="asc"){this.field=t,this.dir=e}}function Lv(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function Qd(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const a=t[i],d=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(d.referenceValue),e.key):hu(d,e.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function fA(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ma(n.position[e],t.position[e]))return!1;return!0}class mu{constructor(t,e=null,r=[],i=[],a=null,d="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=d,this.startAt=f,this.endAt=m,this.D=null,this.C=null}}function pA(n,t,e,r,i,a,d,f){return new mu(n,t,e,r,i,a,d,f)}function Xd(n){return new mu(n)}function Pm(n){return!Yd(n.limit)&&"F"===n.limitType}function Om(n){return!Yd(n.limit)&&"L"===n.limitType}function Vv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Fm(n){for(const t of n.filters)if(t.S())return t.field;return null}function G1(n){return null!==n.collectionGroup}function Jf(n){const t=rt(n);if(null===t.D){t.D=[];const e=Fm(t),r=Vv(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new Ra(e)),t.D.push(new Ra(Si.keyField(),"asc"));else{let i=!1;for(const a of t.explicitOrderBy)t.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Ra(Si.keyField(),a))}}}return t.D}function co(n){const t=rt(n);if(!t.C)if("F"===t.limitType)t.C=uA(t.path,t.collectionGroup,Jf(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const a of Jf(t))e.push(new Ra(a.field,"desc"===a.dir?"asc":"desc"));const r=t.endAt?new ea(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new ea(t.startAt.position,!t.startAt.inclusive):null;t.C=uA(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function wc(n,t,e){return new mu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function eh(n,t){return Xo(co(n),co(t))&&n.limitType===t.limitType}function gA(n){return`${Jd(co(n))}|lt:${n.limitType}`}function q1(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${yc(r.value)}`;var r}).join(", ")}]`),Yd(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>yc(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>yc(e)).join(",")),`Target(${t})`}(co(n))}; limitType=${n.limitType})`}function mA(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):We.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,a,d){const f=Qd(i,a,d);return i.inclusive?f<=0:f<0}(e.startAt,Jf(e),r)||e.endAt&&!function(i,a,d){const f=Qd(i,a,d);return i.inclusive?f>=0:f>0}(e.endAt,Jf(e),r)));var e,r}function zR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YR(n){return(t,e)=>{let r=!1;for(const i of Jf(n)){const a=cL(i,t,e);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function cL(n,t,e){const r=n.field.isKeyField()?We.comparator(t.key,e.key):function(i,a,d){const f=a.data.field(i),m=d.data.field(i);return null!==f&&null!==m?hu(f,m):pt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}function _A(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xm(t)?"-0":t}}function yA(n){return{integerValue:""+n}}function KR(n,t){return rA(t)?yA(t):_A(n,t)}class W1{constructor(){this._=void 0}}function dL(n,t,e){return n instanceof Lm?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(e,t):n instanceof Qf?JR(n,t):n instanceof Xf?s(n,t):function(r,i){const a=vA(r,i),d=u(a)+u(r.k);return qf(a)&&qf(r.k)?yA(d):_A(r.M,d)}(n,t)}function hL(n,t,e){return n instanceof Qf?JR(n,t):n instanceof Xf?s(n,t):e}function vA(n,t){return n instanceof o?qf(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class Lm extends W1{}class Qf extends W1{constructor(t){super(),this.elements=t}}function JR(n,t){const e=c(t);for(const r of n.elements)e.some(i=>Ma(i,r))||e.push(r);return{arrayValue:{values:e}}}class Xf extends W1{constructor(t){super(),this.elements=t}}function s(n,t){let e=c(t);for(const r of n.elements)e=e.filter(i=>!Ma(i,r));return{arrayValue:{values:e}}}class o extends W1{constructor(t,e){super(),this.M=t,this.k=e}}function u(n){return Ur(n.integerValue||n.doubleValue)}function c(n){return Wf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class h{constructor(t,e){this.field=t,this.transform=e}}class _{constructor(t,e){this.version=t,this.transformResults=e}}class v{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new v}static exists(t){return new v(void 0,t)}static updateTime(t){return new v(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function C(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class I{}function N(n,t,e){n instanceof he?function(r,i,a){const d=r.value.clone(),f=Te(r.fieldTransforms,i,a.transformResults);d.setAll(f),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,t,e):n instanceof ae?function(r,i,a){if(!C(r.precondition,i))return void i.convertToUnknownDocument(a.version);const d=Te(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll($e(r)),f.setAll(d),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function F(n,t,e){var i;n instanceof he?function(r,i,a){if(!C(r.precondition,i))return;const d=r.value.clone(),f=yt(r.fieldTransforms,a,i);d.setAll(f),i.convertToFoundDocument(te(i),d).setHasLocalMutations()}(n,t,e):n instanceof ae?function(r,i,a){if(!C(r.precondition,i))return;const d=yt(r.fieldTransforms,a,i),f=i.data;f.setAll($e(r)),f.setAll(d),i.convertToFoundDocument(te(i),f).setHasLocalMutations()}(n,t,e):C(n.precondition,i=t)&&i.convertToNoDocument(Pt.min())}function B(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),a=vA(r.transform,i||null);null!=a&&(null==e&&(e=Un.empty()),e.set(r.field,a))}return e||null}function K(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&Hf(e,r,(i,a)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof Qf&&r instanceof Qf||e instanceof Xf&&r instanceof Xf?Hf(e.elements,r.elements,Ma):e instanceof o&&r instanceof o?Ma(e.k,r.k):e instanceof Lm&&r instanceof Lm);var e,r}(i,a))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function te(n){return n.isFoundDocument()?n.version:Pt.min()}class he extends I{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class ae extends I{constructor(t,e,r,i,a=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function $e(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function Te(n,t,e){const r=new Map;kt(n.length===e.length);for(let i=0;i<e.length;i++){const a=n[i],d=a.transform,f=t.data.field(a.field);r.set(a.field,hL(d,f,e[i]))}return r}function yt(n,t,e){const r=new Map;for(const i of n){const a=i.transform,d=e.data.field(i.field);r.set(i.field,dL(a,d,t))}return r}class It extends I{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class on extends I{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class mi{constructor(t){this.count=t}}var Rn,dn;function th(n){switch(n){default:return pt();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function nh(n){if(void 0===n)return gi("GRPC error has no .code"),me.UNKNOWN;switch(n){case Rn.OK:return me.OK;case Rn.CANCELLED:return me.CANCELLED;case Rn.UNKNOWN:return me.UNKNOWN;case Rn.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Rn.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Rn.INTERNAL:return me.INTERNAL;case Rn.UNAVAILABLE:return me.UNAVAILABLE;case Rn.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Rn.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Rn.NOT_FOUND:return me.NOT_FOUND;case Rn.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Rn.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Rn.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Rn.ABORTED:return me.ABORTED;case Rn.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Rn.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Rn.DATA_LOSS:return me.DATA_LOSS;default:return pt()}}(dn=Rn||(Rn={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";class ho{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,t))return a}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return void(i[a]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Zd(this.inner,(e,r)=>{for(const[i,a]of r)t(i,a)})}isEmpty(){return eA(this.inner)}size(){return this.innerSize}}class Dr{constructor(t,e){this.comparator=t,this.root=e||_i.EMPTY}insert(t,e){return new Dr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(t){return new Dr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_i.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ep(this.root,t,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ep(this.root,t,this.comparator,!0)}}class ep{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!t.isEmpty();)if(a=e?r(t.key,e):1,e&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class _i{constructor(t,e,r,i,a){this.key=t,this.value=e,this.color=null!=r?r:_i.RED,this.left=null!=i?i:_i.EMPTY,this.right=null!=a?a:_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,a){return new _i(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const a=r(t,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===a?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return _i.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const t=this.left.check();if(t!==this.right.check())throw pt();return t+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1,_i.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(n,t,e,r,i){return this}insert(n,t,e){return new _i(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(t){this.comparator=t,this.data=new Dr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Bv(this.data.getIterator())}getIteratorFrom(t){return new Bv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof er)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new er(this.comparator);return e.data=t,e}}class Bv{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Uv(n){return n.hasNext()?n.getNext():void 0}const s$=new Dr(We.comparator);function Dl(){return s$}const o$=new Dr(We.comparator);function QR(){return o$}function Z1(){return new ho(n=>n.toString(),(n,t)=>n.isEqual(t))}const a$=new Dr(We.comparator),l$=new er(We.comparator);function Qn(...n){let t=l$;for(const e of n)t=t.add(e);return t}const u$=new er(Kt);function bA(){return u$}class z1{constructor(t,e,r,i,a){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,Y1.createSynthesizedTargetChangeForCurrentChange(t,e)),new z1(Pt.min(),r,bA(),Dl(),Qn())}}class Y1{constructor(t,e,r,i,a){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Y1(Ni.EMPTY_BYTE_STRING,e,Qn(),Qn(),Qn())}}class wA{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class fL{constructor(t,e){this.targetId=t,this.$=e}}class pL{constructor(t,e,r=Ni.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class gL{constructor(){this.B=0,this.L=_L(),this.U=Ni.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Qn(),e=Qn(),r=Qn();return this.L.forEach((i,a)=>{switch(a){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new Y1(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=_L()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class c${constructor(t){this.nt=t,this.st=new Map,this.it=Dl(),this.rt=mL(),this.ot=new er(Kt)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:pt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const a=i.target;if(bc(a))if(0===r){const d=new We(a.path);this.ct(e,d,Jn.newNoDocument(d,Pt.min()))}else kt(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((a,d)=>{const f=this.wt(d);if(f){if(a.current&&bc(f.target)){const m=new We(f.target.path);null!==this.it.get(m)||this.It(d,m)||this.ct(d,m,Jn.newNoDocument(m,t))}a.j&&(e.set(d,a.H()),a.J())}});let r=Qn();this.rt.forEach((a,d)=>{let f=!0;d.forEachWhile(m=>{const b=this.wt(m);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.it.forEach((a,d)=>d.setReadTime(t));const i=new z1(t,e,this.ot,this.it,r);return this.it=Dl(),this.rt=mL(),this.ot=new er(Kt),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new gL,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new er(Kt),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||Me("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new gL),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function mL(){return new Dr(We.comparator)}function _L(){return new Dr(We.comparator)}const d$={asc:"ASCENDING",desc:"DESCENDING"},h$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class f${constructor(t,e){this.databaseId=t,this.N=e}}function K1(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yL(n,t){return n.N?t.toBase64():t.toUint8Array()}function p$(n,t){return K1(n,t.toTimestamp())}function ns(n){return kt(!!n),Pt.fromTimestamp(function(t){const e=zd(t);return new Mn(e.seconds,e.nanos)}(n))}function XR(n,t){return(e=n,new bn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function vL(n){const t=bn.fromString(n);return kt(SL(t)),t}function J1(n,t){return XR(n.databaseId,t.path)}function Cc(n,t){const e=vL(t);if(e.get(1)!==n.databaseId.projectId)throw new Le(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Le(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new We(wL(e))}function ek(n,t){return XR(n.databaseId,t)}function bL(n){const t=vL(n);return 4===t.length?bn.emptyPath():wL(t)}function Q1(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wL(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function CL(n,t,e){return{name:J1(n,t),fields:e.value.mapValue.fields}}function EL(n,t,e){const r=Cc(n,t.name),i=ns(t.updateTime),a=new Un({mapValue:{fields:t.fields}}),d=Jn.newFoundDocument(r,i,a);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function X1(n,t){let e;if(t instanceof he)e={update:CL(n,t.key,t.value)};else if(t instanceof It)e={delete:J1(n,t.key)};else if(t instanceof ae)e={update:CL(n,t.key,t.data),updateMask:E$(t.fieldMask)};else{if(!(t instanceof on))return pt();e={verify:J1(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,a){const d=a.transform;if(d instanceof Lm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Qf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Xf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof o)return{fieldPath:a.field.canonicalString(),increment:d.k};throw pt()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:p$(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:pt()),e;var i}function tk(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?v.updateTime(ns(i.updateTime)):void 0!==i.exists?v.exists(i.exists):v.none():v.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(a,d){let f=null;"setToServerValue"in d?(kt("REQUEST_TIME"===d.setToServerValue),f=new Lm):"appendMissingElements"in d?f=new Qf(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new Xf(d.removeAllFromArray.values||[]):"increment"in d?f=new o(a,d.increment):pt();const m=Si.fromServerFormat(d.fieldPath);return new h(m,f)}(n,i)):[];var i;if(t.update){const i=Cc(n,t.update.name),a=new Un({mapValue:{fields:t.update.fields}});if(t.updateMask){const d=new El((t.updateMask.fieldPaths||[]).map(b=>Si.fromServerFormat(b)));return new ae(i,a,d,e,r)}return new he(i,a,e,r)}if(t.delete){const i=Cc(n,t.delete);return new It(i,e)}if(t.verify){const i=Cc(n,t.verify);return new on(i,e)}return pt()}function TL(n,t){return{documents:[ek(n,t.path)]}}function DL(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=ek(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=ek(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const b=m.map(T=>function(A){if("=="===A.op){if(iA(A.value))return{unaryFilter:{field:$v(A.field),op:"IS_NAN"}};if($1(A.value))return{unaryFilter:{field:$v(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(iA(A.value))return{unaryFilter:{field:$v(A.field),op:"IS_NOT_NAN"}};if($1(A.value))return{unaryFilter:{field:$v(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$v(A.field),op:b$(A.op),value:A.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);i&&(e.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(b=>{return{field:$v((T=b).field),direction:v$(T.dir)};var T})}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const d=(b=t.limit,n.N||Yd(b)?b:{value:b});var b,f,m;return null!==d&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt={before:(f=t.startAt).inclusive,values:f.position}),t.endAt&&(e.structuredQuery.endAt={before:!(m=t.endAt).inclusive,values:m.position}),e}function IL(n){let t=bL(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){kt(1===r);const T=e.from[0];T.allDescendants?i=T.collectionId:t=t.child(T.collectionId)}let a=[];e.where&&(a=AL(e.where));let d=[];e.orderBy&&(d=e.orderBy.map(T=>{return new Ra(Hv((A=T).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;e.limit&&(f=function(T){let A;return A="object"==typeof T?T.value:T,Yd(A)?null:A}(e.limit));let m=null;var T;e.startAt&&(m=new ea((T=e.startAt).values||[],!!T.before));let b=null;return e.endAt&&(b=function(T){return new ea(T.values||[],!T.before)}(e.endAt)),pA(t,i,d,a,f,"F",m,b)}function AL(n){return n?void 0!==n.unaryFilter?[C$(n)]:void 0!==n.fieldFilter?[w$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>AL(t)).reduce((t,e)=>t.concat(e)):pt():[]}function v$(n){return d$[n]}function b$(n){return h$[n]}function $v(n){return{fieldPath:n.canonicalString()}}function Hv(n){return Si.fromServerFormat(n.fieldPath)}function w$(n){return ji.create(Hv(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(n.fieldFilter.op),n.fieldFilter.value)}function C$(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Hv(n.unaryFilter.field);return ji.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Hv(n.unaryFilter.field);return ji.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hv(n.unaryFilter.field);return ji.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Hv(n.unaryFilter.field);return ji.create(i,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}function E$(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function SL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function fo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=NL(t)),t=T$(n.get(e),t);return NL(t)}function T$(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=a}}return e}function NL(n){return n+"\x01\x01"}function Ec(n){const t=n.length;if(kt(t>=2),2===t)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),bn.emptyPath();const e=t-2,r=[];let i="";for(let a=0;a<t;){const d=n.indexOf("\x01",a);switch((d<0||d>e)&&pt(),n.charAt(d+1)){case"\x01":const f=n.substring(a,d);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,d),i+="\0";break;case"\x11":i+=n.substring(a,d+1);break;default:pt()}a=d+2}return new bn(r)}const xL=["userId","batchId"];function CA(n,t){return[n,fo(t)]}function ML(n,t,e){return[n,fo(t),e]}const D$={},I$=["prefixPath","collectionGroup","readTime","documentId"],A$=["prefixPath","collectionGroup","documentId"],S$=["collectionGroup","readTime","prefixPath","documentId"],N$=["canonicalId","targetId"],x$=["targetId","path"],M$=["path","targetId"],R$=["collectionId","parent"],k$=["indexId","uid"],P$=["uid","sequenceNumber"],O$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],F$=["indexId","uid","orderedDocumentKey"],L$=["userId","collectionPath","documentId"],V$=["userId","collectionPath","largestBatchId"],B$=["userId","collectionGroup","largestBatchId"],RL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],U$=[...RL,"documentOverlays"],kL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$$=[...kL,"indexConfiguration","indexState","indexEntries"],PL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class be{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new be((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(t,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(e,a).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof be?e:be.resolve(e)}catch(e){return be.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):be.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):be.reject(e)}static resolve(t){return new be((e,r)=>{e(t)})}static reject(t){return new be((e,r)=>{r(t)})}static waitFor(t){return new be((e,r)=>{let i=0,a=0,d=!1;t.forEach(f=>{++i,f.next(()=>{++a,d&&a===i&&e()},m=>r(m))}),d=!0,a===i&&e()})}static or(t){let e=be.resolve(!1);for(const r of t)e=e.next(i=>i?be.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,a)=>{r.push(e.call(this,i,a))}),this.waitFor(r)}}class EA{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Ai,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new eC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=nk(r.target.error);this.At.reject(new eC(t,i))}}static open(t,e,r,i){try{return new EA(e,t.transaction(i,r))}catch(a){throw new eC(e,a)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(Me("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new j$(e)}}class _u{constructor(t,e,r){this.name=t,this.version=e,this.bt=r,12.2===_u.Vt((0,V.z$)())&&gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Me("SimpleDb","Removing database:",t),Bm(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,V.hl)())return!1;if(_u.St())return!0;const t=(0,V.z$)(),e=_u.Vt(t),r=0<e&&e<10,i=_u.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,ve.Z)(function*(){return e.db||(Me("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const a=indexedDB.open(e.name,e.version);a.onsuccess=d=>{r(d.target.result)},a.onblocked=()=>{i(new eC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Le(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Le(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new eC(t,f))},a.onupgradeneeded=d=>{Me("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',d.oldVersion),e.bt.kt(d.target.result,a.transaction,d.oldVersion,e.version).next(()=>{Me("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var a=this;return(0,ve.Z)(function*(){const d="readonly"===e;let f=0;for(;;){++f;try{a.db=yield a.Nt(t);const m=EA.open(a.db,t,d?"readonly":"readwrite",r),b=i(m).next(T=>(m.Pt(),T)).catch(T=>(m.abort(T),be.reject(T))).toPromise();return b.catch(()=>{}),yield m.Rt,b}catch(m){const b="FirebaseError"!==m.name&&f<3;if(Me("SimpleDb","Transaction failed with error:",m.message,"Retrying:",b),a.close(),!b)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class H${constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Bm(this.Ft.delete())}}class eC extends Le{constructor(t,e){super(me.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Vm(n){return"IndexedDbTransactionError"===n.name}class j${constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(Me("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Bm(r)}add(t){return Me("SimpleDb","ADD",this.store.name,t,t),Bm(this.store.add(t))}get(t){return Bm(this.store.get(t)).next(e=>(void 0===e&&(e=null),Me("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Me("SimpleDb","DELETE",this.store.name,t),Bm(this.store.delete(t))}count(){return Me("SimpleDb","COUNT",this.store.name),Bm(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(d,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new be((a,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new be((i,a)=>{r.onerror=d=>{a(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(t,e){Me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,d,f)=>f.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new be((r,i)=>{e.onerror=a=>{const d=nk(a.target.error);i(d)},e.onsuccess=a=>{const d=a.target.result;d?t(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(t,e){const r=[];return new be((i,a)=>{t.onerror=d=>{a(d.target.error)},t.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const m=new H$(f),b=e(f.primaryKey,f.value,m);if(b instanceof be){const T=b.catch(A=>(m.done(),be.reject(A)));r.push(T)}m.isDone?i():null===m.Lt?f.continue():f.continue(m.Lt)}}).next(()=>be.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Bm(n){return new be((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=nk(r.target.error);e(i)}})}let FL=!1;function nk(n){const t=_u.Vt((0,V.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FL||(FL=!0,setTimeout(()=>{throw r},0)),r}}return n}class LL extends OL{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function rs(n,t){const e=rt(n);return _u.xt(e.Ht,t)}class rk{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(t.key)&&N(a,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&F(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&F(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Pt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Qn())}isEqual(t){return this.batchId===t.batchId&&Hf(this.mutations,t.mutations,(e,r)=>K(e,r))&&Hf(this.baseMutations,t.baseMutations,(e,r)=>K(e,r))}}class ik{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){kt(t.mutations.length===r.length);let i=a$;const a=t.mutations;for(let d=0;d<a.length;d++)i=i.insert(a[d].key,r[d].version);return new ik(t,e,r,i)}}class sk{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tp{constructor(t,e,r,i,a=Pt.min(),d=Pt.min(),f=Ni.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(t){return new tp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new tp(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new tp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class VL{constructor(t){this.Jt=t}}function BL(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:TA(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:J1(i=n.Jt,(a=t).key),fields:a.data.value.mapValue.fields,updateTime:K1(i,a.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Um(t.version)};else{if(!t.isUnknownDocument())return pt();r.unknownDocument={path:e.path.toArray(),version:Um(t.version)}}var i,a;return r}function TA(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Um(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $m(n){const t=new Mn(n.seconds,n.nanoseconds);return Pt.fromTimestamp(t)}function jv(n,t){const e=(t.baseMutations||[]).map(a=>tk(n.Jt,a));for(let a=0;a<t.mutations.length-1;++a){const d=t.mutations[a];a+1<t.mutations.length&&void 0!==t.mutations[a+1].transform&&(d.updateTransforms=t.mutations[a+1].transform.fieldTransforms,t.mutations.splice(a+1,1),++a)}const r=t.mutations.map(a=>tk(n.Jt,a)),i=Mn.fromMillis(t.localWriteTimeMs);return new rk(t.batchId,i,e,r)}function tC(n){const t=$m(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?$m(n.lastLimboFreeSnapshotVersion):Pt.min();let r;var i;return void 0!==n.query.documents?(kt(1===(i=n.query).documents.length),r=co(Xd(bL(i.documents[0])))):r=co(IL(n.query)),new tp(r,n.targetId,0,n.lastListenSequenceNumber,t,e,Ni.fromBase64String(n.resumeToken))}function UL(n,t){const e=Um(t.snapshotVersion),r=Um(t.lastLimboFreeSnapshotVersion);let i;i=bc(t.target)?TL(n.Jt,t.target):DL(n.Jt,t.target);const a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Jd(t.target),readTime:e,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ok(n){const t=IL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?wc(t,t.limit,"L"):t}function ak(n,t){return new sk(t.largestBatchId,tk(n.Jt,t.overlayMutation))}function $L(n,t){const e=t.path.lastSegment();return[n,fo(t.path.popLast()),e]}class q${getBundleMetadata(t,e){return HL(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$m(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return HL(t).put({bundleId:(r=e).id,createTime:Um(ns(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return jL(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:ok(i.bundledQuery),readTime:$m(i.readTime)};var i})}saveNamedQuery(t,e){return jL(t).put({name:(r=e).name,readTime:Um(ns(r.readTime)),bundledQuery:r.bundledQuery});var r}}function HL(n){return rs(n,"bundles")}function jL(n){return rs(n,"namedQueries")}class lk{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new lk(t,e.uid||"")}getOverlay(t,e){return nC(t).get($L(this.userId,e)).next(r=>r?ak(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((a,d)=>{const f=new sk(e,d);i.push(this.Xt(t,f))}),be.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(d=>i.add(fo(d.getCollectionPath())));const a=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);a.push(nC(t).Qt("collectionPathOverlayIndex",f))}),be.waitFor(a)}getOverlaysForCollection(t,e,r){const i=Z1(),a=fo(e),d=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return nC(t).qt("collectionPathOverlayIndex",d).next(f=>{for(const m of f){const b=ak(this.M,m);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const a=Z1();let d;const f=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return nC(t).Wt({index:"collectionGroupOverlayIndex",range:f},(m,b,T)=>{const A=ak(this.M,b);a.size()<i||A.largestBatchId===d?(a.set(A.getKey(),A),d=A.largestBatchId):T.done()}).next(()=>a)}Xt(t,e){return nC(t).put(function(r,i,a){const[d,f,m]=$L(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:X1(r.Jt,a.mutation)}}(this.M,this.userId,e))}}function nC(n){return rs(n,"documentOverlays")}class Hm{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Ur(t.integerValue));else if("doubleValue"in t){const r=Ur(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),xm(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(jf(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?sA(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):pt()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),We.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function W$(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function GL(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const a=W$(255&e[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(t/8)}Hm.fe=new Hm;class Z${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=GL(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=GL(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class z${constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class Y${constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class rC{constructor(){this.De=new Z$,this.Ce=new z$(this.De),this.xe=new Y$(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class np{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new np(this.indexId,this.documentKey,this.arrayValue,r)}}function jm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=qL(n.arrayValue,t.arrayValue),0!==e?e:(e=qL(n.directionalValue,t.directionalValue),0!==e?e:We.comparator(n.documentKey,t.documentKey)))}function qL(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class K${constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=Yf(t);if(void 0!==e&&!this.Be(e))return!1;const r=fu(t);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[a++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],d))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class J${constructor(){this.qe=new uk}addToCollectionParentIndex(t,e){return this.qe.add(e),be.resolve()}getCollectionParents(t,e){return be.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return be.resolve()}deleteFieldIndex(t,e){return be.resolve()}getDocumentsMatchingTarget(t,e){return be.resolve(null)}getFieldIndex(t,e){return be.resolve(null)}getFieldIndexes(t,e){return be.resolve([])}getNextCollectionGroupToUpdate(t){return be.resolve(null)}updateCollectionGroup(t,e,r){return be.resolve()}updateIndexEntries(t,e){return be.resolve()}}class uk{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new er(bn.comparator),a=!i.has(r);return this.index[e]=i.add(r),a}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new er(bn.comparator)).toArray()}}const Gv=new Uint8Array(0);class Q${constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new uk,this.Ge=new ho(r=>Jd(r),(r,i)=>Xo(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const a={collectionId:r,parent:fo(i)};return WL(t).put(a)}return be.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[QI(e),""],!1,!0);return WL(t).qt(i).next(a=>{for(const d of a){if(d.collectionId!==e)break;r.push(Ec(d.parent))}return r})}addFieldIndex(t,e){const r=DA(t),i={indexId:(a=e).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=DA(t),i=IA(t),a=iC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=iC(t);let i=!0;const a=new Map;return be.forEach(this.Qe(e),d=>this.getFieldIndex(t,d).next(f=>{i&&(i=!!f),a.set(d,f)})).next(()=>{if(i){let d=Qn();const f=[];return be.forEach(a,(m,b)=>{var T;Me("IndexedDbIndexManager",`Using index ${T=m,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${Jd(e)}`);const A=function(it,ot){const Ut=Yf(ot);if(void 0===Ut)return null;for(const an of Kf(it,Ut.fieldPath))switch(an.op){case"array-contains-any":return an.value.arrayValue.values||[];case"array-contains":return[an.value]}return null}(b,m),M=function(it,ot){const Ut=new Map;for(const an of fu(ot))for(const Hr of Kf(it,an.fieldPath))switch(Hr.op){case"==":case"in":Ut.set(an.fieldPath.canonicalString(),Hr.value);break;case"not-in":case"!=":return Ut.set(an.fieldPath.canonicalString(),Hr.value),Array.from(Ut.values())}return null}(b,m),O=function(it,ot){const Ut=[];let an=!0;for(const Hr of fu(ot)){const Jr=0===Hr.kind?cA(it,Hr.fieldPath,it.startAt):dA(it,Hr.fieldPath,it.startAt);if(!Jr.value)return null;Ut.push(Jr.value),an&&(an=Jr.inclusive)}return new ea(Ut,an)}(b,m),q=function(it,ot){const Ut=[];let an=!0;for(const Hr of fu(ot)){const Jr=0===Hr.kind?dA(it,Hr.fieldPath,it.endAt):cA(it,Hr.fieldPath,it.endAt);if(!Jr.value)return null;Ut.push(Jr.value),an&&(an=Jr.inclusive)}return new ea(Ut,an)}(b,m),oe=this.je(m,b,O),_e=this.je(m,b,q),qe=this.We(m,b,M),Ye=this.ze(m.indexId,A,oe,!!O&&O.inclusive,_e,!!q&&q.inclusive,qe);return be.forEach(Ye,it=>r.Gt(it,e.limit).next(ot=>{ot.forEach(Ut=>{const an=We.fromSegments(Ut.documentKey);d.has(an)||(d=d.add(an),f.push(an))})}))}).next(()=>f)}return be.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,r,i,a,d,f){const m=(null!=e?e.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),b=m/(null!=e?e.length:1),T=[];for(let A=0;A<m;++A){const M=e?this.He(e[A/b]):Gv,O=r?this.Je(t,M,r[A%b],i):this.Ye(t),q=a?this.Xe(t,M,a[A%b],d):this.Ye(t+1);T.push(...this.createRange(O,q,f.map(oe=>this.Je(t,M,oe,!0))))}return T}Je(t,e,r,i){const a=new np(t,We.empty(),e,r);return i?a:a.ke()}Xe(t,e,r,i){const a=new np(t,We.empty(),e,r);return i?a.ke():a}Ye(t){return new np(t,We.empty(),Gv,Gv)}getFieldIndex(t,e){const r=new K$(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(a=>{const d=a.filter(f=>r.$e(f));return d.sort((f,m)=>m.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(t,e){const r=new rC;for(const i of fu(t)){const a=e.data.field(i.fieldPath);if(null==a)return null;const d=r.Ne(i.kind);Hm.fe.Zt(a,d)}return r.Se()}He(t){const e=new rC;return Hm.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new rC;return Hm.fe.Zt(Tl(this.databaseId,e),r.Ne(function(i){const a=fu(i);return 0===a.length?0:a[a.length-1].kind}(t))),r.Se()}We(t,e,r){if(null===r)return[];let i=[];i.push(new rC);let a=0;for(const d of fu(t)){const f=r[a++];for(const m of i)if(this.en(e,d.fieldPath)&&Wf(f))i=this.nn(i,d,f);else{const b=m.Ne(d.kind);Hm.fe.Zt(f,b)}}return this.sn(i)}je(t,e,r){return null==r?null:this.We(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],a=[];for(const d of r.arrayValue.values||[])for(const f of i){const m=new rC;m.seed(f.Se()),Hm.fe.Zt(d,m.Ne(e.kind)),a.push(m)}return a}en(t,e){return!!t.filters.find(r=>r instanceof ji&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=DA(t),i=IA(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(a=>{const d=[];return be.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{d.push(function(b,T){const A=T?new vc(T.sequenceNumber,new pu($m(T.readTime),new We(Ec(T.documentKey)),T.largestBatchId)):vc.empty(),M=b.fields.map(([O,q])=>new km(Si.fromServerFormat(O),q));return new Rm(b.indexId,b.collectionGroup,M,A)}(f,m))})).next(()=>d)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Kt(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=DA(t),a=IA(t);return this.rn(t).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(f=>be.forEach(f,m=>{return a.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Um((M=r).readTime),documentKey:fo(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(t,e){const r=new Map;return be.forEach(e,(i,a)=>{const d=r.get(i.collectionGroup);return(d?be.resolve(d):this.getFieldIndexes(t,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),be.forEach(f,m=>this.on(t,i,m).next(b=>{const T=this.un(a,m);return b.isEqual(T)?be.resolve():this.an(t,a,m,b,T)}))))})}cn(t,e,r,i){return iC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return iC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=iC(t);let a=new er(jm);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(d,f)=>{a=a.add(new np(r.indexId,e,f.arrayValue,f.directionalValue))}).next(()=>a)}un(t,e){let r=new er(jm);const i=this.Ze(e,t);if(null==i)return r;const a=Yf(e);if(null!=a){const d=t.data.field(a.fieldPath);if(Wf(d))for(const f of d.arrayValue.values||[])r=r.add(new np(e.indexId,t.key,this.He(f),i))}else r=r.add(new np(e.indexId,t.key,Gv,i));return r}an(t,e,r,i,a){Me("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const d=[];return function(f,m,b,T,A){const M=f.getIterator(),O=m.getIterator();let q=Uv(M),oe=Uv(O);for(;q||oe;){let _e=!1,qe=!1;if(q&&oe){const Ye=b(q,oe);Ye<0?qe=!0:Ye>0&&(_e=!0)}else null!=q?qe=!0:_e=!0;_e?(T(oe),oe=Uv(O)):qe?(A(q),q=Uv(M)):(q=Uv(M),oe=Uv(O))}}(i,a,jm,f=>{d.push(this.cn(t,e,r,f))},f=>{d.push(this.hn(t,e,r,f))}),be.waitFor(d)}rn(t){let e=1;return IA(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((d,f)=>jm(d,f)).filter((d,f,m)=>!f||0!==jm(d,m[f-1]));const i=[];i.push(t);for(const d of r){const f=jm(d,t),m=jm(d,e);if(0===f)i[0]=t.ke();else if(f>0&&m<0)i.push(d),i.push(d.ke());else if(m>0)break}i.push(e);const a=[];for(let d=0;d<i.length;d+=2)a.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Gv,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Gv,[]]));return a}}function WL(n){return rs(n,"collectionParents")}function iC(n){return rs(n,"indexEntries")}function DA(n){return rs(n,"indexConfiguration")}function IA(n){return rs(n,"indexState")}const ZL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ta{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new ta(t,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zL(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],d=IDBKeyRange.only(e.batchId);let f=0;const m=r.Wt({range:d},(T,A,M)=>(f++,M.delete()));a.push(m.next(()=>{kt(1===f)}));const b=[];for(const T of e.mutations){const A=ML(t,T.key.path,e.batchId);a.push(i.delete(A)),b.push(T.key)}return be.waitFor(a).next(()=>b)}function AA(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw pt();t=n.noDocument}return JSON.stringify(t).length}ta.DEFAULT_COLLECTION_PERCENTILE=10,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ta.DEFAULT=new ta(41943040,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ta.DISABLED=new ta(-1,0,0);class ck{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){kt(""!==t.uid);const a=t.isAuthenticated()?t.uid:"";return new ck(a,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rp(t).Wt({index:"userMutationsIndex",range:r},(i,a,d)=>{e=!1,d.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const a=qv(t),d=rp(t);return d.add({}).next(f=>{kt("number"==typeof f);const m=new rk(f,e,r,i),b=function(M,O,q){const oe=q.baseMutations.map(qe=>X1(M.Jt,qe)),_e=q.mutations.map(qe=>X1(M.Jt,qe));return{userId:O,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:oe,mutations:_e}}(this.M,this.userId,m),T=[];let A=new er((M,O)=>Kt(M.canonicalString(),O.canonicalString()));for(const M of i){const O=ML(this.userId,M.key.path,f);A=A.add(M.key.path.popLast()),T.push(d.put(b)),T.push(a.put(O,D$))}return A.forEach(M=>{T.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.ln[f]=m.keys()}),be.waitFor(T).next(()=>m)})}lookupMutationBatch(t,e){return rp(t).get(e).next(r=>r?(kt(r.userId===this.userId),jv(this.M,r)):null)}fn(t,e){return this.ln[e]?be.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return rp(t).Wt({index:"userMutationsIndex",range:i},(d,f,m)=>{f.userId===this.userId&&(kt(f.batchId>=r),a=jv(this.M,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rp(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,a,d)=>{r=a.batchId,d.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rp(t).qt("userMutationsIndex",e).next(r=>r.map(i=>jv(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=CA(this.userId,e.path),i=IDBKeyRange.lowerBound(r),a=[];return qv(t).Wt({range:i},(d,f,m)=>{const[b,T,A]=d,M=Ec(T);if(b===this.userId&&e.path.isEqual(M))return rp(t).get(A).next(O=>{if(!O)throw pt();kt(O.userId===this.userId),a.push(jv(this.M,O))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new er(Kt);const i=[];return e.forEach(a=>{const d=CA(this.userId,a.path),f=IDBKeyRange.lowerBound(d),m=qv(t).Wt({range:f},(b,T,A)=>{const[M,O,q]=b,oe=Ec(O);M===this.userId&&a.path.isEqual(oe)?r=r.add(q):A.done()});i.push(m)}),be.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,a=CA(this.userId,r),d=IDBKeyRange.lowerBound(a);let f=new er(Kt);return qv(t).Wt({range:d},(m,b,T)=>{const[A,M,O]=m,q=Ec(M);A===this.userId&&r.isPrefixOf(q)?q.length===i&&(f=f.add(O)):T.done()}).next(()=>this.dn(t,f))}dn(t,e){const r=[],i=[];return e.forEach(a=>{i.push(rp(t).get(a).next(d=>{if(null===d)throw pt();kt(d.userId===this.userId),r.push(jv(this.M,d))}))}),be.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return zL(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),be.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return be.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return qv(t).Wt({range:r},(a,d,f)=>{if(a[0]===this.userId){const m=Ec(a[1]);i.push(m)}else f.done()}).next(()=>{kt(0===i.length)})})}containsKey(t,e){return YL(t,this.userId,e)}wn(t){return KL(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function YL(n,t,e){const r=CA(t,e.path),i=r[1],a=IDBKeyRange.lowerBound(r);let d=!1;return qv(n).Wt({range:a,jt:!0},(f,m,b)=>{const[T,A,M]=f;T===t&&A===i&&(d=!0),b.done()}).next(()=>d)}function rp(n){return rs(n,"mutations")}function qv(n){return rs(n,"documentMutations")}function KL(n){return rs(n,"mutationQueues")}class Gm{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Gm(0)}static yn(){return new Gm(-1)}}class X${constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new Gm(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>Pt.fromTimestamp(new Mn(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Wv(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const a=[];return Wv(t).Wt((d,f)=>{const m=tC(f);m.sequenceNumber<=e&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(t,m)))}).next(()=>be.waitFor(a)).next(()=>i)}forEachTarget(t,e){return Wv(t).Wt((r,i)=>{const a=tC(i);e(a)})}pn(t){return JL(t).get("targetGlobalKey").next(e=>(kt(null!==e),e))}In(t,e){return JL(t).put("targetGlobalKey",e)}Tn(t,e){return Wv(t).put(UL(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Jd(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Wv(t).Wt({range:i,index:"queryTargetsIndex"},(d,f,m)=>{const b=tC(f);Xo(e,b.target)&&(a=b,m.done())}).next(()=>a)}addMatchingKeys(t,e,r){const i=[],a=ip(t);return e.forEach(d=>{const f=fo(d.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(t,r,d))}),be.waitFor(i)}removeMatchingKeys(t,e,r){const i=ip(t);return be.forEach(e,a=>{const d=fo(a.path);return be.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(t,r,a)])})}removeMatchingKeysForTargetId(t,e){const r=ip(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=ip(t);let a=Qn();return i.Wt({range:r,jt:!0},(d,f,m)=>{const b=Ec(d[1]),T=new We(b);a=a.add(T)}).next(()=>a)}containsKey(t,e){const r=fo(e.path),i=IDBKeyRange.bound([r],[QI(r)],!1,!0);let a=0;return ip(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],m,b)=>{0!==d&&(a++,b.done())}).next(()=>a>0)}Et(t,e){return Wv(t).get(e).next(r=>r?tC(r):null)}}function Wv(n){return rs(n,"targets")}function JL(n){return rs(n,"targetGlobal")}function ip(n){return rs(n,"targetDocuments")}function qm(n){return dk.apply(this,arguments)}function dk(){return(dk=(0,ve.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==PL)throw n;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function QL([n,t],[e,r]){const i=Kt(n,e);return 0===i?Kt(t,r):i}class e6{constructor(t){this.An=t,this.buffer=new er(QL),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();QL(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class t6{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Vm(i)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield qm(i)}yield e.Sn(t)}))}}class n6{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return be.resolve(Qo.A);const r=new e6(e);return this.Dn.forEachTarget(t,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(ZL)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZL):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,a,d,f,m,b;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,d=Date.now(),this.nthSequenceNumber(t,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(t,r,e))).next(A=>(a=A,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(A=>(b=Date.now(),Im()<=eo.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${A} documents in `+(b-m)+`ms\nTotal Duration: ${b-T}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class r6{constructor(t,e){this.db=t,this.garbageCollector=new n6(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return SA(t,r)}removeReference(t,e,r){return SA(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return SA(t,e)}On(t,e){return function(r,i){let a=!1;return KL(r).zt(d=>YL(r,d,i).next(f=>(f&&(a=!0),be.resolve(!f)))).next(()=>a)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(t,(d,f)=>{if(f<=e){const m=this.On(t,d).next(b=>{if(!b)return a++,r.getEntry(t,d).next(()=>(r.removeEntry(d,Pt.min()),ip(t).delete([0,fo(d.path)])))});i.push(m)}}).next(()=>be.waitFor(i)).next(()=>r.apply(t)).next(()=>a)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return SA(t,e)}Mn(t,e){const r=ip(t);let i,a=Qo.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:m,sequenceNumber:b})=>{0===d?(a!==Qo.A&&e(new We(Ec(i)),a),a=b,i=m):a=Qo.A}).next(()=>{a!==Qo.A&&e(new We(Ec(i)),a)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function SA(n,t){return ip(n).put((r=n.currentSequenceNumber,{targetId:0,path:fo(t.path),sequenceNumber:r}));var r}class XL{constructor(){this.changes=new ho(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Jn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?be.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class i6{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Wm(t).put(r)}removeEntry(t,e,r){return Wm(t).delete(function(i,a){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],TA(a),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=Jn.newInvalidDocument(e);return Wm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(sC(e))},(i,a)=>{r=this.$n(e,a)}).next(()=>r)}Bn(t,e){let r={size:0,document:Jn.newInvalidDocument(e)};return Wm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(sC(e))},(i,a)=>{r={document:this.$n(e,a),size:AA(a)}}).next(()=>r)}getEntries(t,e){let r=Dl();return this.Ln(t,e,(i,a)=>{const d=this.$n(i,a);r=r.insert(i,d)}).next(()=>r)}Un(t,e){let r=Dl(),i=new Dr(We.comparator);return this.Ln(t,e,(a,d)=>{const f=this.$n(a,d);r=r.insert(a,f),i=i.insert(a,AA(d))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return be.resolve();let i=new er(n2);e.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(sC(i.first()),sC(i.last())),d=i.getIterator();let f=d.getNext();return Wm(t).Wt({index:"documentKeyIndex",range:a},(m,b,T)=>{const A=We.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&n2(f,A)<0;)r(f,null),f=d.getNext();f&&f.isEqual(A)&&(r(f,b),f=d.hasNext()?d.getNext():null),f?T.Ut(sC(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),TA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wm(t).qt(IDBKeyRange.bound(i,a,!0)).next(d=>{let f=Dl();for(const m of d){const b=this.$n(We.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(t,e,r,i){let a=Dl();const d=t2(e,r),f=t2(e,pu.max());return Wm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(m,b,T)=>{const A=this.$n(We.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);a=a.insert(A.key,A),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(t){return new s6(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return e2(t).get("remoteDocumentGlobalKey").next(e=>(kt(!!e),e))}Fn(t,e){return e2(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=EL(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=We.fromSegments(t.noDocument.path),i=$m(t.noDocument.readTime);e=Jn.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return pt();{const r=We.fromSegments(t.unknownDocument.path),i=$m(t.unknownDocument.version);e=Jn.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new Mn(r[0],r[1]);return Pt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(Pt.min()))return r}return Jn.newInvalidDocument(t)}}class s6 extends XL{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new ho(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new er((a,d)=>Kt(a.canonicalString(),d.canonicalString()));return this.changes.forEach((a,d)=>{const f=this.Gn.get(a);if(e.push(this.Kn.removeEntry(t,a,f.readTime)),d.isValidDocument()){const m=BL(this.Kn.M,d);i=i.add(a.path.popLast()),r+=AA(m)-f.size,e.push(this.Kn.addEntry(t,a,m))}else if(r-=f.size,this.trackRemovals){const m=BL(this.Kn.M,d.convertToNoDocument(Pt.min()));e.push(this.Kn.addEntry(t,a,m))}}),i.forEach(a=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,a))}),e.push(this.Kn.updateMetadata(t,r)),be.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((a,d)=>{this.Gn.set(a,{size:d,readTime:r.get(a).readTime})}),r))}}function e2(n){return rs(n,"remoteDocumentGlobal")}function Wm(n){return rs(n,"remoteDocumentsV14")}function sC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function t2(n,t){const e=t.documentKey.path.toArray();return[n,TA(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function n2(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let a=0;a<e.length-2&&a<r.length-2;++a)if(i=Kt(e[a],r[a]),i)return i;return i=Kt(e.length,r.length),i||(i=Kt(e[e.length-2],r[r.length-2]),i||Kt(e[e.length-1],r[r.length-1]))}class o6{constructor(t){this.M=t}kt(t,e,r,i){const a=new EA("createOrUpgrade",e);var f;r<1&&i>=1&&(t.createObjectStore("owner"),(f=t).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xL,{unique:!0}),f.createObjectStore("documentMutations"),r2(t),function(f){f.createObjectStore("remoteDocuments")}(t));let d=be.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(t),r2(t)),d=d.next(()=>function(f){const m=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(a))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,m){return m.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xL,{unique:!0});const T=m.store("mutations"),A=b.map(M=>T.put(M));return be.waitFor(A)})}(t,a))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(a))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(t),this.jn(a)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(a))),r<8&&i>=8&&(d=d.next(()=>this.zn(t,a))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(a))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:L$});m.createIndex("collectionPathOverlayIndex",V$,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",B$,{unique:!1})}(t)})),r<13&&i>=13&&(d=d.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:I$});m.createIndex("documentKeyIndex",A$),m.createIndex("collectionGroupIndex",S$)}(t)).next(()=>this.Jn(t,a)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:k$}).createIndex("sequenceNumberIndex",P$,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:O$}).createIndex("documentKeyIndex",F$,{unique:!1})}(t)})),d}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=AA(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>be.forEach(i,a=>{const d=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>be.forEach(f,m=>{kt(m.userId===a.userId);const b=jv(this.M,m);return zL(t,a.userId,b).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((d,f)=>{const m=new bn(d),b=[0,fo(m)];a.push(e.get(b).next(T=>T?be.resolve():e.put({targetId:0,path:fo(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>be.waitFor(a))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:R$});const r=e.store("collectionParents"),i=new uk,a=d=>{if(i.add(d)){const f=d.lastSegment(),m=d.popLast();return r.put({collectionId:f,parent:fo(m)})}};return e.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const m=new bn(d);return a(m.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([d,f,m],b)=>{const T=Ec(f);return a(T.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const a=tC(i),d=UL(this.M,a);return e.put(d)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((a,d)=>{const f=e.store("remoteDocumentsV14"),m=(b=d,b.document?new We(bn.fromString(b.document.name).popFirst(5)):b.noDocument?We.fromSegments(b.noDocument.path):b.unknownDocument?We.fromSegments(b.unknownDocument.path):pt()).path.toArray();var b;const T={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(T))}).next(()=>be.waitFor(i))}}function r2(n){n.createObjectStore("targetDocuments",{keyPath:x$}).createIndex("documentTargetsIndex",M$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",N$,{unique:!0}),n.createObjectStore("targetGlobal")}const hk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fk{constructor(t,e,r,i,a,d,f,m,b,T,A=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=a,this.window=d,this.document=f,this.Xn=b,this.Zn=T,this.ts=A,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!fk.vt())throw new Le(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new r6(this,i),this.hs=e+"main",this.M=new VL(m),this.ls=new _u(this.hs,this.ts,new o6(this.M)),this.fs=new X$(this.referenceDelegate,this.M),this.ds=new i6(this.M),this._s=new q$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&gi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(me.FAILED_PRECONDITION,hk);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Qo(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,ve.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,ve.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,ve.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>NA(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(Vm(t))return Me("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return oC(t).get("owner").next(e=>be.resolve(this.bs(e)))}Vs(t){return NA(t).delete(this.clientId)}vs(){var t=this;return(0,ve.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=rs(r,"clientMetadata");return i.qt().next(a=>{const d=t.Ds(a,18e5),f=a.filter(m=>-1===d.indexOf(m));return be.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?be.resolve(!0):oC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Le(me.FAILED_PRECONDITION,hk);return!1}}return!(!this.networkEnabled||!this.inForeground)||NA(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Me("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,ve.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new LL(e,Qo.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>NA(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return ck.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new Q$(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return lk.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){Me("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",a=14===(d=this.ts)?$$:13===d?kL:12===d?U$:11===d?RL:void pt();var d;let f;return this.ls.runTransaction(t,i,a,m=>(f=new LL(m,this.es?this.es.next():Qo.A),"readwrite-primary"===e?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw gi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Le(me.FAILED_PRECONDITION,PL);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}$s(t){return oC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Le(me.FAILED_PRECONDITION,hk)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oC(t).put("owner",e)}static vt(){return _u.vt()}Rs(t){const e=oC(t);return e.get("owner").next(r=>this.bs(r)?(Me("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):be.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(gi(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,V.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return Me("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){gi("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function oC(n){return rs(n,"owner")}function NA(n){return rs(n,"clientMetadata")}function pk(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class a6{constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const a of e)a.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return We.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):G1(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new We(e)).next(r=>{let i=QR();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let a=QR();return this.indexManager.getCollectionParents(t,i).next(d=>be.forEach(d,f=>{const m=(b=e,T=f.child(i),new mu(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.zs(t,m,r).next(b=>{b.forEach((T,A)=>{a=a.insert(T,A)})})}).next(()=>a))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(a=>{for(const d of a)for(const f of d.mutations){const m=f.key;let b=i.get(m);null==b&&(b=Jn.newInvalidDocument(m),i=i.insert(m,b)),F(f,b,d.localWriteTime),b.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((a,d)=>{mA(e,d)||(i=i.remove(a))}),i))}}class gk{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=Qn(),i=Qn();for(const a of e.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new gk(t,e.fromCache,r,i)}}class i2{Xs(t){this.Zs=t}Qs(t,e,r,i){return 0===(a=e).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Pt.min())?this.ti(t,e):this.Zs.Ks(t,i).next(a=>{const d=this.ei(e,a);return(Pm(e)||Om(e))&&this.ni(e.limitType,d,i,r)?this.ti(t,e):(Im()<=eo.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),q1(e)),this.Zs.Qs(t,e,aA(r,-1)).next(f=>(d.forEach(m=>{f=f.insert(m.key,m)}),f)))});var a}ei(t,e){let r=new er(YR(t));return e.forEach((i,a)=>{mA(t,a)&&(r=r.add(a))}),r}ni(t,e,r,i){if(r.size!==e.size)return!0;const a="F"===t?e.last():e.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ti(t,e){return Im()<=eo.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",q1(e)),this.Zs.Qs(t,e,pu.min())}}class l6{constructor(t,e,r,i){this.persistence=t,this.si=e,this.M=i,this.ii=new Dr(Kt),this.ri=new ho(a=>Jd(a),Xo),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new a6(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function s2(n,t,e,r){return new l6(n,t,e,r)}function o2(n,t){return mk.apply(this,arguments)}function mk(){return(mk=(0,ve.Z)(function*(n,t){const e=rt(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(a=>(i=a,e.ai(t),e.Bs.getAllMutationBatches(r))).next(a=>{const d=[],f=[];let m=Qn();for(const b of i){d.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}for(const b of a){f.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}return e.ci.Ks(r,m).next(b=>({hi:b,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function u6(n,t){const e=rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),a=e.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,m,b){const T=m.batch,A=T.keys();let M=be.resolve();return A.forEach(O=>{M=M.next(()=>b.getEntry(f,O)).next(q=>{const oe=m.docVersions.get(O);kt(null!==oe),q.version.compareTo(oe)<0&&(T.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),b.addEntry(q)))})}),M.next(()=>d.Bs.removeMutationBatch(f,T))}(e,r,t,a).next(()=>a.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.ci.Ks(r,i))})}function a2(n){const t=rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function c6(n,t){const e=rt(n),r=t.snapshotVersion;let i=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const d=e.ui.newChangeBuffer({trackRemovals:!0});i=e.ii;const f=[];t.targetChanges.forEach((b,T)=>{const A=i.get(T);if(!A)return;f.push(e.fs.removeMatchingKeys(a,b.removedDocuments,T).next(()=>e.fs.addMatchingKeys(a,b.addedDocuments,T)));let M=A.withSequenceNumber(a.currentSequenceNumber);var O,q,oe;t.targetMismatches.has(T)?M=M.withResumeToken(Ni.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):b.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(b.resumeToken,r)),i=i.insert(T,M),q=M,oe=b,(0===(O=A).resumeToken.approximateByteSize()||q.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&f.push(e.fs.updateTargetData(a,M))});let m=Dl();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(l2(a,d,t.documentUpdates).next(b=>{m=b})),!r.isEqual(Pt.min())){const b=e.fs.getLastRemoteSnapshotVersion(a).next(T=>e.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return be.waitFor(f).next(()=>d.apply(a)).next(()=>e.ci.Gs(a,m)).next(()=>m)}).then(a=>(e.ii=i,a))}function l2(n,t,e){let r=Qn();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let a=Dl();return e.forEach((d,f)=>{const m=i.get(d);f.isNoDocument()&&f.version.isEqual(Pt.min())?(t.removeEntry(d,f.readTime),a=a.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(t.addEntry(f),a=a.insert(d,f)):Me("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),a})}function d6(n,t){const e=rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function Zv(n,t){const e=rt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(a=>a?(i=a,be.resolve(i)):e.fs.allocateTargetId(r).next(d=>(i=new tp(t,d,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ii=e.ii.insert(r.targetId,r),e.ri.set(t,r.targetId)),r})}function zv(n,t,e){return _k.apply(this,arguments)}function _k(){return(_k=(0,ve.Z)(function*(n,t,e){const r=rt(n),i=r.ii.get(t),a=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",a,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Vm(d))throw d;Me("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function xA(n,t,e){const r=rt(n);let i=Pt.min(),a=Qn();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,m,b){const T=rt(f),A=T.ri.get(b);return void 0!==A?be.resolve(T.ii.get(A)):T.fs.getTargetData(m,b)}(r,d,co(t)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(m=>{a=m})}).next(()=>r.si.Qs(d,t,e?i:Pt.min(),e?a:Qn())).next(f=>(d2(r,zR(t),f),{documents:f,li:a})))}function u2(n,t){const e=rt(n),r=rt(e.fs),i=e.ii.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,t).next(d=>d?d.target:null))}function c2(n,t){const e=rt(n),r=e.oi.get(t)||Pt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.ui.getAllFromCollectionGroup(i,t,aA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(d2(e,t,i),i))}function d2(n,t,e){let r=Pt.min();e.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.oi.set(t,r)}function yk(){return(yk=(0,ve.Z)(function*(n,t,e,r){const i=rt(n);let a=Qn(),d=Dl();for(const b of e){const T=t.fi(b.metadata.name);b.document&&(a=a.add(T));const A=t.di(b);A.setReadTime(t._i(b.metadata.readTime)),d=d.insert(T,A)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),m=yield Zv(i,(b=r,co(Xd(bn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>l2(b,f,d).next(T=>(f.apply(b),T)).next(T=>i.fs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>i.fs.addMatchingKeys(b,a,m.targetId)).next(()=>i.ci.Gs(b,T)).next(()=>T)))})).apply(this,arguments)}function f6(n,t){return vk.apply(this,arguments)}function vk(){return(vk=(0,ve.Z)(function*(n,t,e=Qn()){const r=yield Zv(n,co(ok(t.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const d=ns(t.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(a,t);const f=r.withResumeToken(Ni.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(a,f).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,e,r.targetId)).next(()=>i._s.saveNamedQuery(a,t))})})).apply(this,arguments)}class p6{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return be.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var r;return this.wi.set(e.id,{id:(r=e).id,version:r.version,createTime:ns(r.createTime)}),be.resolve()}getNamedQuery(t,e){return be.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(r=e).name,query:ok(r.bundledQuery),readTime:ns(r.readTime)}),be.resolve();var r}}class g6{constructor(){this.overlays=new Dr(We.comparator),this.gi=new Map}getOverlay(t,e){return be.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,a)=>{this.Xt(t,e,a)}),be.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.gi.delete(r)),be.resolve()}getOverlaysForCollection(t,e,r){const i=Z1(),a=e.length+1,d=new We(e.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!e.isPrefixOf(b.path))break;b.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return be.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let a=new Dr((b,T)=>b-T);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===e&&b.largestBatchId>r){let T=a.get(b.largestBatchId);null===T&&(T=Z1(),a=a.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const f=Z1(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,T)=>f.set(b,T)),!(f.size()>=i)););return be.resolve(f)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new sk(e,r));let a=this.gi.get(e);void 0===a&&(a=Qn(),this.gi.set(e,a)),this.gi.set(e,a.add(r.key))}}class bk{constructor(){this.yi=new er(is.pi),this.Ii=new er(is.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const r=new is(t,e);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Ai(new is(t,e))}Ri(t,e){t.forEach(r=>this.removeReference(r,e))}Pi(t){const e=new We(new bn([])),r=new is(e,t),i=new is(e,t+1),a=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),a.push(d.key)}),a}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new We(new bn([])),r=new is(e,t),i=new is(e,t+1);let a=Qn();return this.Ii.forEachInRange([r,i],d=>{a=a.add(d.key)}),a}containsKey(t){const e=new is(t,0),r=this.yi.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class is{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return We.comparator(t.key,e.key)||Kt(t.vi,e.vi)}static Ti(t,e){return Kt(t.vi,e.vi)||We.comparator(t.key,e.key)}}class m6{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new er(is.pi)}checkEmpty(t){return be.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const a=this.Si;this.Si++;const d=new rk(a,e,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new is(f.key,a)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return be.resolve(d)}lookupMutationBatch(t,e){return be.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.xi(e+1),a=i<0?0:i;return be.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return be.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new is(e,0),i=new is(e,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);a.push(f)}),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new er(Kt);return e.forEach(i=>{const a=new is(i,0),d=new is(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([a,d],f=>{r=r.add(f.vi)})}),be.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const d=new is(new We(a),0);let f=new er(Kt);return this.Di.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(m.vi)),!0)},d),be.resolve(this.Ni(f))}Ni(t){const e=[];return t.forEach(r=>{const i=this.Ci(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){kt(0===this.ki(e.batchId,"removed")),this.Bs.shift();let r=this.Di;return be.forEach(e.mutations,i=>{const a=new is(i.key,e.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,e){const r=new is(e,0),i=this.Di.firstAfterOrEqual(r);return be.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return be.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class _6{constructor(t){this.Mi=t,this.docs=new Dr(We.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),a=i?i.size:0,d=this.Mi(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:d}),this.size+=d-a,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return be.resolve(r?r.document.mutableCopy():Jn.newInvalidDocument(e))}getEntries(t,e){let r=Dl();return e.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Jn.newInvalidDocument(i))}),be.resolve(r)}getAllFromCollection(t,e,r){let i=Dl();const a=new We(e.child("")),d=this.docs.getIteratorFrom(a);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!e.isPrefixOf(f.path))break;f.path.length>e.length+1||HR($R(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return be.resolve(i)}getAllFromCollectionGroup(t,e,r,i){pt()}Oi(t,e){return be.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new y6(this)}getSize(t){return be.resolve(this.size)}}class y6 extends XL{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),be.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class v6{constructor(t){this.persistence=t,this.Fi=new ho(e=>Jd(e),Xo),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new bk,this.targetCount=0,this.Li=Gm.gn()}forEachTarget(t,e){return this.Fi.forEach((r,i)=>e(i)),be.resolve()}getLastRemoteSnapshotVersion(t){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return be.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$i&&(this.$i=e),be.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new Gm(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,be.resolve()}updateTargetData(t,e){return this.Tn(e),be.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,be.resolve()}removeTargets(t,e,r){let i=0;const a=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=e&&null===r.get(f.targetId)&&(this.Fi.delete(d),a.push(this.removeMatchingKeysForTargetId(t,f.targetId)),i++)}),be.waitFor(a).next(()=>i)}getTargetCount(t){return be.resolve(this.targetCount)}getTargetData(t,e){const r=this.Fi.get(e)||null;return be.resolve(r)}addMatchingKeys(t,e,r){return this.Bi.Ei(e,r),be.resolve()}removeMatchingKeys(t,e,r){this.Bi.Ri(e,r);const i=this.persistence.referenceDelegate,a=[];return i&&e.forEach(d=>{a.push(i.markPotentiallyOrphaned(t,d))}),be.waitFor(a)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),be.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Bi.Vi(e);return be.resolve(r)}containsKey(t,e){return be.resolve(this.Bi.containsKey(e))}}class b6{constructor(t,e){this.Ui={},this.overlays={},this.es=new Qo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new v6(this),this.indexManager=new J$,this.ds=new _6(r=>this.referenceDelegate.qi(r)),this.M=new VL(e),this._s=new p6(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new g6,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Ui[t.toKey()];return r||(r=new m6(e,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){Me("MemoryPersistence","Starting transaction:",t);const i=new w6(this.es.next());return this.referenceDelegate.Ki(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Qi(t,e){return be.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,e)))}}class w6 extends OL{constructor(t){super(),this.currentSequenceNumber=t}}class wk{constructor(t){this.persistence=t,this.ji=new bk,this.Wi=null}static zi(t){return new wk(t)}get Hi(){if(this.Wi)return this.Wi;throw pt()}addReference(t,e,r){return this.ji.addReference(r,e),this.Hi.delete(r.toString()),be.resolve()}removeReference(t,e,r){return this.ji.removeReference(r,e),this.Hi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),be.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(a=>this.Hi.add(a.toString()))}).next(()=>r.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.Hi,r=>{const i=We.fromPath(r);return this.Ji(t,i).next(a=>{a||e.removeEntry(i,Pt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(r=>{r?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return be.or([()=>be.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function h2(n,t){return`firestore_clients_${n}_${t}`}function f2(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Ck(n,t){return`firestore_targets_${n}_${t}`}class MA{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Yi(t,e,r){const i=JSON.parse(r);let a,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(a=new Le(i.error.code,i.error.message))),d?new MA(t,e,i.state,a):(gi("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class aC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Yi(t,e){const r=JSON.parse(e);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Le(r.error.code,r.error.message))),a?new aC(t,r.state,i):(gi("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class RA{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=bA();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=rA(r.activeTargetIds[d]),a=a.add(r.activeTargetIds[d]);return i?new RA(t,a):(gi("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Ek{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Ek(e.clientId,e.onlineState):(gi("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Tk{constructor(){this.activeTargetIds=bA()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Dk{constructor(t,e,r,i,a){this.window=t,this.Yn=e,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Dr(Kt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=h2(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Tk),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ve.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.er)continue;const a=t.getItem(h2(t.persistenceKey,i));if(a){const d=RA.Yi(i,a);d&&(t.ir=t.ir.insert(d.clientId,d))}}t.wr();const r=t.storage.getItem(t.dr);if(r){const i=t.mr(r);i&&t.gr(i)}for(const i of t.rr)t.sr(i);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,r){this.pr(t,e,r),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(Ck(this.persistenceKey,t));if(r){const i=aC.Yi(t,r);i&&(e=i.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Ck(this.persistenceKey,t))}updateQueryState(t,e,r){this.Er(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ir(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Me("SharedClientState","READ",t,e),e}setItem(t,e){Me("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Me("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(Me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void gi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ve.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Pr(r.key);return e.br(i,null)}{const i=e.Vr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Sr(i)}}else if(e.lr.test(r.key)){if(null!==r.newValue){const i=e.Dr(r.key,r.newValue);if(i)return e.Cr(i)}}else if(r.key===e.dr){if(null!==r.newValue){const i=e.mr(r.newValue);if(i)return e.gr(i)}}else if(r.key===e.ar){const i=function(a){let d=Qo.A;if(null!=a)try{const f=JSON.parse(a);kt("number"==typeof f),d=f}catch(f){gi("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==Qo.A&&e.sequenceNumberHandler(i)}else if(r.key===e._r){const i=e.Nr(r.newValue);yield Promise.all(i.map(a=>e.syncEngine.kr(a)))}}else e.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,r){const i=new MA(this.currentUser,t,e,r),a=f2(this.persistenceKey,this.currentUser,t);this.setItem(a,i.Xi())}Ir(t){const e=f2(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,r){const i=Ck(this.persistenceKey,t),a=new aC(t,e,r);this.setItem(i,a.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const r=this.Pr(t);return RA.Yi(r,e)}vr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return MA.Yi(new Hi(void 0!==r[2]?r[2]:null),i,e)}Dr(t,e){const r=this.lr.exec(t),i=Number(r[1]);return aC.Yi(i,e)}mr(t){return Ek.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,ve.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);Me("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const r=e?this.ir.insert(t,e):this.ir.remove(t),i=this.yr(this.ir),a=this.yr(r),d=[],f=[];return a.forEach(m=>{i.has(m)||d.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=bA();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class p2{constructor(){this.$r=new Tk,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,r){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new Tk,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class C6{Lr(t){}shutdown(){}}class g2{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const E6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class T6{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class D6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,r,i,a){const d=this.uo(t,e);Me("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,a),this.co(t,d,f,r).then(m=>(Me("RestConnection","Received: ",m),m),m=>{throw Am("RestConnection",`${t} failed with error: `,m,"url: ",d,"request:",r),m})}ho(t,e,r,i,a){return this.oo(t,e,r,i,a)}ao(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+du,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,a)=>t[a]=i),r&&r.headers.forEach((i,a)=>t[a]=i)}uo(t,e){return`${this.io}/v1/${e}:${E6[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((a,d)=>{const f=new V1;f.listenOnce(IR.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case $f.NO_ERROR:const b=f.getResponseJson();Me("Connection","XHR received:",JSON.stringify(b)),a(b);break;case $f.TIMEOUT:Me("Connection",'RPC "'+t+'" timed out'),d(new Le(me.DEADLINE_EXCEEDED,"Request time out"));break;case $f.HTTP_ERROR:const T=f.getStatus();if(Me("Connection",'RPC "'+t+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const M=function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(q)>=0?q:me.UNKNOWN}(A.status);d(new Le(M,A.message))}else d(new Le(me.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Le(me.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Me("Connection",'RPC "'+t+'" completed.')}});const m=JSON.stringify(i);f.send(e,"POST",m,r,15)})}lo(t,e,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=ZI(),d=DR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new Wd({})),this.ao(f.initMessageHeaders,e,r),(0,V.uI)()||(0,V.b$)()||(0,V.d)()||(0,V.w1)()||(0,V.Mn)()||(0,V.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Me("Connection","Creating WebChannel: "+m,f);const b=a.createWebChannel(m,f);let T=!1,A=!1;const M=new T6({Wr:q=>{A?Me("Connection","Not sending because WebChannel is closed:",q):(T||(Me("Connection","Opening WebChannel transport."),b.open(),T=!0),Me("Connection","WebChannel sending:",q),b.send(q))},zr:()=>b.close()}),O=(q,oe,_e)=>{q.listen(oe,qe=>{try{_e(qe)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return O(b,Dm.EventType.OPEN,()=>{A||Me("Connection","WebChannel transport opened.")}),O(b,Dm.EventType.CLOSE,()=>{A||(A=!0,Me("Connection","WebChannel transport closed"),M.no())}),O(b,Dm.EventType.ERROR,q=>{A||(A=!0,Am("Connection","WebChannel transport errored:",q),M.no(new Le(me.UNAVAILABLE,"The operation could not be completed")))}),O(b,Dm.EventType.MESSAGE,q=>{var oe;if(!A){const _e=q.data[0];kt(!!_e);const qe=_e,Ye=qe.error||(null===(oe=qe[0])||void 0===oe?void 0:oe.error);if(Ye){Me("Connection","WebChannel received error:",Ye);const it=Ye.status;let ot=function(an){const Hr=Rn[an];if(void 0!==Hr)return nh(Hr)}(it),Ut=Ye.message;void 0===ot&&(ot=me.INTERNAL,Ut="Unknown error status: "+it+" with message "+Ye.message),A=!0,M.no(new Le(ot,Ut)),b.close()}else Me("Connection","WebChannel received:",_e),M.so(_e)}}),O(d,AR.STAT_EVENT,q=>{q.stat===L1.PROXY?Me("Connection","Detected buffering proxy"):q.stat===L1.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.eo()},0),M}}function m2(){return"undefined"!=typeof window?window:null}function kA(){return"undefined"!=typeof document?document:null}function lC(n){return new f$(n,!0)}class Ik{constructor(t,e,r=1e3,i=1.5,a=6e4){this.Yn=t,this.timerId=e,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,e-r);i>0&&Me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class _2{constructor(t,e,r,i,a,d,f,m){this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Ik(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,ve.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,ve.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var r=this;return(0,ve.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==t?r.Do.reset():e&&e.code===me.RESOURCE_EXHAUSTED?(gi(e.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):e&&e.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===e&&this.qo(r,i)},r=>{t(()=>{const i=new Le(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,e){const r=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var t=this;this.state=5,this.Do.To((0,ve.Z)(function*(){t.state=0,t.start()}))}Ko(t){return Me("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class I6 extends _2{constructor(t,e,r,i,a,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,d),this.M=a}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(m=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:pt(),i=t.targetChange.targetIds||[],a=function(m,b){return m.N?(kt(void 0===b||"string"==typeof b),Ni.fromBase64String(b||"")):(kt(void 0===b||b instanceof Uint8Array),Ni.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),d=t.targetChange.cause,f=d&&function(m){const b=void 0===m.code?me.UNKNOWN:nh(m.code);return new Le(b,m.message||"")}(d);e=new pL(r,i,a,f||null)}else if("documentChange"in t){const r=t.documentChange,i=Cc(n,r.document.name),a=ns(r.document.updateTime),d=new Un({mapValue:{fields:r.document.fields}}),f=Jn.newFoundDocument(i,a,d);e=new wA(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const r=t.documentDelete,i=Cc(n,r.document),a=r.readTime?ns(r.readTime):Pt.min(),d=Jn.newNoDocument(i,a);e=new wA([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){const r=t.documentRemove,i=Cc(n,r.document);e=new wA([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return pt();{const r=t.filter,a=new mi(r.count||0);e=new fL(r.targetId,a)}}var m;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return Pt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?ns(a.readTime):Pt.min()}(t);return this.listener.Qo(e,r)}jo(t){const e={};e.database=Q1(this.M),e.addTarget=function(i,a){let d;const f=a.target;return d=bc(f)?{documents:TL(i,f)}:{query:DL(i,f)},d.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?d.resumeToken=yL(i,a.resumeToken):a.snapshotVersion.compareTo(Pt.min())>0&&(d.readTime=K1(i,a.snapshotVersion.toTimestamp())),d}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Fo(e)}Wo(t){const e={};e.database=Q1(this.M),e.removeTarget=t,this.Fo(e)}}class A6 extends _2{constructor(t,e,r,i,a,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,d),this.M=a,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(kt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(n,t){return n&&n.length>0?(kt(void 0!==t),n.map(e=>function(r,i){let a=ns(r.updateTime?r.updateTime:i);return a.isEqual(Pt.min())&&(a=ns(i)),new _(a,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ns(t.commitTime);return this.listener.Yo(r,e)}return kt(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=Q1(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>X1(this.M,r))};this.Fo(e)}}class S6 extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Le(me.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.oo(t,e,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(me.UNKNOWN,i.toString())})}ho(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ho(t,e,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(me.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class N6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(gi(e),this.iu=!1):Me("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class x6{constructor(t,e,r,i,a){var d=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr(f=>{r.enqueueAndForget((0,ve.Z)(function*(){var m;sp(d)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ve.Z)(function*(b){const T=rt(b);T.fu.add(4),yield Yv(T),T.wu.set("Unknown"),T.fu.delete(4),yield uC(T)}),function(b){return m.apply(this,arguments)})(d))}))}),this.wu=new N6(r,i)}}function uC(n){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,ve.Z)(function*(n){if(sp(n))for(const t of n.du)yield t(!0)})).apply(this,arguments)}function Yv(n){return Sk.apply(this,arguments)}function Sk(){return(Sk=(0,ve.Z)(function*(n){for(const t of n.du)yield t(!1)})).apply(this,arguments)}function PA(n,t){const e=rt(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),Mk(e)?xk(e):Jv(e).xo()&&Nk(e,t))}function cC(n,t){const e=rt(n),r=Jv(e);e.lu.delete(t),r.xo()&&y2(e,t),0===e.lu.size&&(r.xo()?r.Mo():sp(e)&&e.wu.set("Unknown"))}function Nk(n,t){n.mu.Z(t.targetId),Jv(n).jo(t)}function y2(n,t){n.mu.Z(t),Jv(n).Wo(t)}function xk(n){n.mu=new c$({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),Jv(n).start(),n.wu.ru()}function Mk(n){return sp(n)&&!Jv(n).Co()&&n.lu.size>0}function sp(n){return 0===rt(n).fu.size}function v2(n){n.mu=void 0}function M6(n){return Rk.apply(this,arguments)}function Rk(){return(Rk=(0,ve.Z)(function*(n){n.lu.forEach((t,e)=>{Nk(n,t)})})).apply(this,arguments)}function R6(n,t){return kk.apply(this,arguments)}function kk(){return(kk=(0,ve.Z)(function*(n,t){v2(n),Mk(n)?(n.wu.au(t),xk(n)):n.wu.set("Unknown")})).apply(this,arguments)}function k6(n,t,e){return Pk.apply(this,arguments)}function Pk(){return(Pk=(0,ve.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof pL&&2===t.state&&t.cause)try{yield(r=(0,ve.Z)(function*(i,a){const d=a.cause;for(const f of a.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,t)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield OA(n,r)}else if(t instanceof wA?n.mu.ut(t):t instanceof fL?n.mu._t(t):n.mu.ht(t),!e.isEqual(Pt.min()))try{const r=yield a2(n.localStore);e.compareTo(r)>=0&&(yield function(i,a){const d=i.mu.yt(a);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(m);b&&i.lu.set(m,b.withResumeToken(f.resumeToken,a))}}),d.targetMismatches.forEach(f=>{const m=i.lu.get(f);if(!m)return;i.lu.set(f,m.withResumeToken(Ni.EMPTY_BYTE_STRING,m.snapshotVersion)),y2(i,f);const b=new tp(m.target,f,1,m.sequenceNumber);Nk(i,b)}),i.remoteSyncer.applyRemoteEvent(d)}(n,e))}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),yield OA(n,r)}var r})).apply(this,arguments)}function OA(n,t,e){return Ok.apply(this,arguments)}function Ok(){return(Ok=(0,ve.Z)(function*(n,t,e){if(!Vm(t))throw t;n.fu.add(1),yield Yv(n),n.wu.set("Offline"),e||(e=()=>a2(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield uC(n)}))})).apply(this,arguments)}function b2(n,t){return t().catch(e=>OA(n,e,t))}function Kv(n){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,ve.Z)(function*(n){const t=rt(n),e=op(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;P6(t);)try{const i=yield d6(t.localStore,r);if(null===i){0===t.hu.length&&e.Mo();break}r=i.batchId,O6(t,i)}catch(i){yield OA(t,i)}w2(t)&&C2(t)})).apply(this,arguments)}function P6(n){return sp(n)&&n.hu.length<10}function O6(n,t){n.hu.push(t);const e=op(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function w2(n){return sp(n)&&!op(n).Co()&&n.hu.length>0}function C2(n){op(n).start()}function F6(n){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,ve.Z)(function*(n){op(n).Zo()})).apply(this,arguments)}function L6(n){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,ve.Z)(function*(n){const t=op(n);for(const e of n.hu)t.Jo(e.mutations)})).apply(this,arguments)}function V6(n,t,e){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,ve.Z)(function*(n,t,e){const r=n.hu.shift(),i=ik.from(r,t,e);yield b2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kv(n)})).apply(this,arguments)}function B6(n,t){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,ve.Z)(function*(n,t){var e;t&&op(n).Ho&&(yield(e=(0,ve.Z)(function*(r,i){if(th(a=i.code)&&a!==me.ABORTED){const d=r.hu.shift();op(r).ko(),yield b2(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Kv(r)}var a}),function(r,i){return e.apply(this,arguments)})(n,t)),w2(n)&&C2(n)})).apply(this,arguments)}function E2(n,t){return $k.apply(this,arguments)}function $k(){return($k=(0,ve.Z)(function*(n,t){const e=rt(n);e.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=sp(e);e.fu.add(3),yield Yv(e),r&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield uC(e)})).apply(this,arguments)}function Hk(n,t){return jk.apply(this,arguments)}function jk(){return(jk=(0,ve.Z)(function*(n,t){const e=rt(n);t?(e.fu.delete(2),yield uC(e)):t||(e.fu.add(2),yield Yv(e),e.wu.set("Unknown"))})).apply(this,arguments)}function Jv(n){return n.gu||(n.gu=function(t,e,r){const i=rt(t);return i.eu(),new I6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:M6.bind(null,n),Yr:R6.bind(null,n),Qo:k6.bind(null,n)}),n.du.push(function(){var t=(0,ve.Z)(function*(e){e?(n.gu.ko(),Mk(n)?xk(n):n.wu.set("Unknown")):(yield n.gu.stop(),v2(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function op(n){return n.yu||(n.yu=function(t,e,r){const i=rt(t);return i.eu(),new A6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:F6.bind(null,n),Yr:B6.bind(null,n),Xo:L6.bind(null,n),Yo:V6.bind(null,n)}),n.du.push(function(){var t=(0,ve.Z)(function*(e){e?(n.yu.ko(),yield Kv(n)):(yield n.yu.stop(),n.hu.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class Gk{constructor(t,e,r,i,a){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(t,e,r,i,a){const d=Date.now()+r,f=new Gk(t,e,d,i,a);return f.start(r),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(me.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qv(n,t){if(gi("AsyncQueue",`${t}: ${n}`),Vm(n))return new Le(me.UNAVAILABLE,`${t}: ${n}`);throw n}class Xv{constructor(t){this.comparator=t?(e,r)=>t(e,r)||We.comparator(e.key,r.key):(e,r)=>We.comparator(e.key,r.key),this.keyedMap=QR(),this.sortedSet=new Dr(this.comparator)}static emptySet(t){return new Xv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Xv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new Xv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class T2{constructor(){this.pu=new Dr(We.comparator)}track(t){const e=t.doc.key,r=this.pu.get(e);r?0!==t.type&&3===r.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==r.type?this.pu=this.pu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.pu=this.pu.remove(e):1===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):pt():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,r)=>{t.push(r)}),t}}class e0{constructor(t,e,r,i,a,d,f,m){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(t,e,r,i){const a=[];return e.forEach(d=>{a.push({type:0,doc:d})}),new e0(t,e,Xv.emptySet(e),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&eh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class U6{constructor(){this.Tu=void 0,this.listeners=[]}}class $6{constructor(){this.queries=new ho(t=>gA(t),eh),this.onlineState="Unknown",this.Eu=new Set}}function qk(n,t){return Wk.apply(this,arguments)}function Wk(){return(Wk=(0,ve.Z)(function*(n,t){const e=rt(n),r=t.query;let i=!1,a=e.queries.get(r);if(a||(i=!0,a=new U6),i)try{a.Tu=yield e.onListen(r)}catch(d){const f=Qv(d,`Initialization of query '${q1(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,a),a.listeners.push(t),t.Au(e.onlineState),a.Tu&&t.Ru(a.Tu)&&Yk(e)})).apply(this,arguments)}function Zk(n,t){return zk.apply(this,arguments)}function zk(){return(zk=(0,ve.Z)(function*(n,t){const e=rt(n),r=t.query;let i=!1;const a=e.queries.get(r);if(a){const d=a.listeners.indexOf(t);d>=0&&(a.listeners.splice(d,1),i=0===a.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function H6(n,t){const e=rt(n);let r=!1;for(const i of t){const d=e.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&Yk(e)}function j6(n,t,e){const r=rt(n),i=r.queries.get(t);if(i)for(const a of i.listeners)a.onError(e);r.queries.delete(t)}function Yk(n){n.Eu.forEach(t=>{t.next()})}class Kk{constructor(t,e,r){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new e0(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=e0.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class G6{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class D2{constructor(t){this.M=t}fi(t){return Cc(this.M,t)}di(t){return t.metadata.exists?EL(this.M,t.document,!1):Jn.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return ns(t)}}class q6{constructor(t,e,r){this.Nu=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=I2(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=bn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,r=new D2(this.M);for(const i of t)if(i.metadata.queries){const a=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(e.get(d)||Qn()).add(a);e.set(d,f)}}return e}complete(){var t=this;return(0,ve.Z)(function*(){const e=yield function(n,t,e,r){return yk.apply(this,arguments)}(t.localStore,new D2(t.M),t.documents,t.Nu.id),r=t.Mu(t.documents);for(const i of t.queries)yield f6(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function I2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class A2{constructor(t){this.key=t}}class S2{constructor(t){this.key=t}}class N2{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=Qn(),this.mutatedKeys=Qn(),this.Uu=YR(t),this.qu=new Xv(this.Uu)}get Ku(){return this.$u}Gu(t,e){const r=e?e.Qu:new T2,i=e?e.qu:this.qu;let a=e?e.mutatedKeys:this.mutatedKeys,d=i,f=!1;const m=Pm(this.query)&&i.size===this.query.limit?i.last():null,b=Om(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((T,A)=>{const M=i.get(T),O=mA(this.query,A)?A:null,q=!!M&&this.mutatedKeys.has(M.key),oe=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let _e=!1;M&&O?M.data.isEqual(O.data)?q!==oe&&(r.track({type:3,doc:O}),_e=!0):this.ju(M,O)||(r.track({type:2,doc:O}),_e=!0,(m&&this.Uu(O,m)>0||b&&this.Uu(O,b)<0)&&(f=!0)):!M&&O?(r.track({type:0,doc:O}),_e=!0):M&&!O&&(r.track({type:1,doc:M}),_e=!0,(m||b)&&(f=!0)),_e&&(O?(d=d.add(O),a=oe?a.add(T):a.delete(T)):(d=d.delete(T),a=a.delete(T)))}),Pm(this.query)||Om(this.query))for(;d.size>this.query.limit;){const T=Pm(this.query)?d.last():d.first();d=d.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{qu:d,Qu:r,ni:f,mutatedKeys:a}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const a=t.Qu.Iu();a.sort((b,T)=>function(A,M){const O=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return O(A)-O(M)}(b.type,T.type)||this.Uu(b.doc,T.doc)),this.Wu(r);const d=e?this.zu():[],f=0===this.Lu.size&&this.current?1:0,m=f!==this.Bu;return this.Bu=f,0!==a.length||m?{snapshot:new e0(this.query,t.qu,i,a,t.mutatedKeys,0===f,m,!1),Hu:d}:{Hu:d}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new T2,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=Qn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const e=[];return t.forEach(r=>{this.Lu.has(r)||e.push(new S2(r))}),this.Lu.forEach(r=>{t.has(r)||e.push(new A2(r))}),e}Yu(t){this.$u=t.li,this.Lu=Qn();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return e0.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class W6{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Z6{constructor(t){this.key=t,this.Zu=!1}}class z6{constructor(t,e,r,i,a,d){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new ho(f=>gA(f),eh),this.na=new Map,this.sa=new Set,this.ia=new Dr(We.comparator),this.ra=new Map,this.oa=new bk,this.ua={},this.aa=new Map,this.ca=Gm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function Y6(n,t){return Jk.apply(this,arguments)}function Jk(){return(Jk=(0,ve.Z)(function*(n,t){const e=bP(n);let r,i;const a=e.ea.get(t);if(a)r=a.targetId,e.sharedClientState.addLocalQueryTarget(r),i=a.view.Xu();else{const d=yield Zv(e.localStore,co(t));e.isPrimaryClient&&PA(e.remoteStore,d);const f=e.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield Qk(e,t,r,"current"===f)}return i})).apply(this,arguments)}function Qk(n,t,e,r){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,ve.Z)(function*(n,t,e,r){n.la=(T,A,M)=>{return(O=(0,ve.Z)(function*(q,oe,_e,qe){let Ye=oe.view.Gu(_e);Ye.ni&&(Ye=yield xA(q.localStore,oe.query,!1).then(({documents:Ut})=>oe.view.Gu(Ut,Ye)));const it=qe&&qe.targetChanges.get(oe.targetId),ot=oe.view.applyChanges(Ye,q.isPrimaryClient,it);return uP(q,oe.targetId,ot.Hu),ot.snapshot}),function(q,oe,_e,qe){return O.apply(this,arguments)})(n,T,A,M);var O};const i=yield xA(n.localStore,t,!0),a=new N2(t,i.li),d=a.Gu(i.documents),f=Y1.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),m=a.applyChanges(d,n.isPrimaryClient,f);uP(n,e,m.Hu);const b=new W6(t,e,a);return n.ea.set(t,b),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),m.snapshot})).apply(this,arguments)}function K6(n,t){return eP.apply(this,arguments)}function eP(){return(eP=(0,ve.Z)(function*(n,t){const e=rt(n),r=e.ea.get(t),i=e.na.get(r.targetId);if(i.length>1)return e.na.set(r.targetId,i.filter(a=>!eh(a,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield zv(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),cC(e.remoteStore,r.targetId),t0(e,r.targetId)}).catch(qm))):(t0(e,r.targetId),yield zv(e.localStore,r.targetId,!0))})).apply(this,arguments)}function tP(){return(tP=(0,ve.Z)(function*(n,t,e){const r=wP(n);try{const i=yield function(a,d){const f=rt(a),m=Mn.now(),b=d.reduce((A,M)=>A.add(M.key),Qn());let T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>f.ci.Ks(A,b).next(M=>{T=M;const O=[];for(const q of d){const oe=B(q,T.get(q.key));null!=oe&&O.push(new ae(q.key,oe,zf(oe.value.mapValue),v.exists(!0)))}return f.Bs.addMutationBatch(A,m,O,d)})).then(A=>(A.applyToLocalDocumentSet(T),{batchId:A.batchId,changes:T}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(a,d,f){let m=a.ua[a.currentUser.toKey()];m||(m=new Dr(Kt)),m=m.insert(d,f),a.ua[a.currentUser.toKey()]=m}(r,i.batchId,e),yield rh(r,i.changes),yield Kv(r.remoteStore)}catch(i){const a=Qv(i,"Failed to persist write");e.reject(a)}})).apply(this,arguments)}function x2(n,t){return nP.apply(this,arguments)}function nP(){return(nP=(0,ve.Z)(function*(n,t){const e=rt(n);try{const r=yield c6(e.localStore,t);t.targetChanges.forEach((i,a)=>{const d=e.ra.get(a);d&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?kt(d.Zu):i.removedDocuments.size>0&&(kt(d.Zu),d.Zu=!1))}),yield rh(e,r,t)}catch(r){yield qm(r)}})).apply(this,arguments)}function M2(n,t,e){const r=rt(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ea.forEach((a,d)=>{const f=d.view.Au(t);f.snapshot&&i.push(f.snapshot)}),function(a,d){const f=rt(a);f.onlineState=d;let m=!1;f.queries.forEach((b,T)=>{for(const A of T.listeners)A.Au(d)&&(m=!0)}),m&&Yk(f)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Q6(n,t,e){return rP.apply(this,arguments)}function rP(){return(rP=(0,ve.Z)(function*(n,t,e){const r=rt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ra.get(t),a=i&&i.key;if(a){let d=new Dr(We.comparator);d=d.insert(a,Jn.newNoDocument(a,Pt.min()));const f=Qn().add(a),m=new z1(Pt.min(),new Map,new er(Kt),d,f);yield x2(r,m),r.ia=r.ia.remove(a),r.ra.delete(t),cP(r)}else yield zv(r.localStore,t,!1).then(()=>t0(r,t,e)).catch(qm)})).apply(this,arguments)}function X6(n,t){return iP.apply(this,arguments)}function iP(){return(iP=(0,ve.Z)(function*(n,t){const e=rt(n),r=t.batch.batchId;try{const i=yield u6(e.localStore,t);lP(e,r,null),aP(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield rh(e,i)}catch(i){yield qm(i)}})).apply(this,arguments)}function eH(n,t,e){return sP.apply(this,arguments)}function sP(){return(sP=(0,ve.Z)(function*(n,t,e){const r=rt(n);try{const i=yield function(a,d){const f=rt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return f.Bs.lookupMutationBatch(m,d).next(T=>(kt(null!==T),b=T.keys(),f.Bs.removeMutationBatch(m,T))).next(()=>f.Bs.performConsistencyCheck(m)).next(()=>f.ci.Ks(m,b))})}(r.localStore,t);lP(r,t,e),aP(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield rh(r,i)}catch(i){yield qm(i)}})).apply(this,arguments)}function oP(){return(oP=(0,ve.Z)(function*(n,t){const e=rt(n);sp(e.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const d=rt(a);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===r)return void t.resolve();const i=e.aa.get(r)||[];i.push(t),e.aa.set(r,i)}catch(r){const i=Qv(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})).apply(this,arguments)}function aP(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function lP(n,t,e){const r=rt(n);let i=r.ua[r.currentUser.toKey()];if(i){const a=i.get(t);a&&(e?a.reject(e):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function t0(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),e&&n.ta.fa(r,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||R2(n,r)})}function R2(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(cC(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),cP(n))}function uP(n,t,e){for(const r of e)r instanceof A2?(n.oa.addReference(r.key,t),nH(n,r)):r instanceof S2?(Me("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||R2(n,r.key)):pt()}function nH(n,t){const e=t.key,r=e.path.canonicalString();n.ia.get(e)||n.sa.has(r)||(Me("SyncEngine","New document in limbo: "+e),n.sa.add(r),cP(n))}function cP(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new We(bn.fromString(t)),r=n.ca.next();n.ra.set(r,new Z6(e)),n.ia=n.ia.insert(e,r),PA(n.remoteStore,new tp(co(Xd(e.path)),r,2,Qo.A))}}function rh(n,t,e){return dP.apply(this,arguments)}function dP(){return(dP=(0,ve.Z)(function*(n,t,e){const r=rt(n),i=[],a=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,m)=>{d.push(r.la(m,t,e).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b.fromCache?"not-current":"current"),i.push(b);const T=gk.Ys(m.targetId,b);a.push(T)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,ve.Z)(function*(m,b){const T=rt(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>be.forEach(b,M=>be.forEach(M.Hs,O=>T.persistence.referenceDelegate.addReference(A,M.targetId,O)).next(()=>be.forEach(M.Js,O=>T.persistence.referenceDelegate.removeReference(A,M.targetId,O)))))}catch(A){if(!Vm(A))throw A;Me("LocalStore","Failed to update sequence numbers: "+A)}for(const A of b){const M=A.targetId;if(!A.fromCache){const O=T.ii.get(M),oe=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);T.ii=T.ii.insert(M,oe)}}}),function(m,b){return f.apply(this,arguments)})(r.localStore,a))})).apply(this,arguments)}function rH(n,t){return hP.apply(this,arguments)}function hP(){return(hP=(0,ve.Z)(function*(n,t){const e=rt(n);if(!e.currentUser.isEqual(t)){Me("SyncEngine","User change. New user:",t.toKey());const r=yield o2(e.localStore,t);e.currentUser=t,(i=e).aa.forEach(d=>{d.forEach(f=>{f.reject(new Le(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield rh(e,r.hi)}var i})).apply(this,arguments)}function iH(n,t){const e=rt(n),r=e.ra.get(t);if(r&&r.Zu)return Qn().add(r.key);{let i=Qn();const a=e.na.get(t);if(!a)return i;for(const d of a){const f=e.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function sH(n,t){return fP.apply(this,arguments)}function fP(){return(fP=(0,ve.Z)(function*(n,t){const e=rt(n),r=yield xA(e.localStore,t.query,!0),i=t.view.Yu(r);return e.isPrimaryClient&&uP(e,t.targetId,i.Hu),i})).apply(this,arguments)}function oH(n,t){return pP.apply(this,arguments)}function pP(){return(pP=(0,ve.Z)(function*(n,t){const e=rt(n);return c2(e.localStore,t).then(r=>rh(e,r))})).apply(this,arguments)}function aH(n,t,e,r){return gP.apply(this,arguments)}function gP(){return(gP=(0,ve.Z)(function*(n,t,e,r){const i=rt(n),a=yield function(d,f){const m=rt(d),b=rt(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.fn(T,f).next(A=>A?m.ci.Ks(T,A):be.resolve(null)))}(i.localStore,t);var f;null!==a?("pending"===e?yield Kv(i.remoteStore):"acknowledged"===e||"rejected"===e?(lP(i,t,r||null),aP(i,t),f=t,rt(rt(i.localStore).Bs)._n(f)):pt(),yield rh(i,a)):Me("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function mP(){return(mP=(0,ve.Z)(function*(n,t){const e=rt(n);if(bP(e),wP(e),!0===t&&!0!==e.ha){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield k2(e,r.toArray());e.ha=!0,yield Hk(e.remoteStore,!0);for(const a of i)PA(e.remoteStore,a)}else if(!1===t&&!1!==e.ha){const r=[];let i=Promise.resolve();e.na.forEach((a,d)=>{e.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(t0(e,d),zv(e.localStore,d,!0))),cC(e.remoteStore,d)}),yield i,yield k2(e,r),function(a){const d=rt(a);d.ra.forEach((f,m)=>{cC(d.remoteStore,m)}),d.oa.bi(),d.ra=new Map,d.ia=new Dr(We.comparator)}(e),e.ha=!1,yield Hk(e.remoteStore,!1)}})).apply(this,arguments)}function k2(n,t,e){return _P.apply(this,arguments)}function _P(){return(_P=(0,ve.Z)(function*(n,t,e){const r=rt(n),i=[],a=[];for(const d of t){let f;const m=r.na.get(d);if(m&&0!==m.length){f=yield Zv(r.localStore,co(m[0]));for(const b of m){const T=r.ea.get(b),A=yield sH(r,T);A.snapshot&&a.push(A.snapshot)}}else{const b=yield u2(r.localStore,d);f=yield Zv(r.localStore,b),yield Qk(r,P2(b),d,!1)}i.push(f)}return r.ta.Qo(a),i})).apply(this,arguments)}function P2(n){return pA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uH(n){const t=rt(n);return rt(rt(t.localStore).persistence).Fs()}function cH(n,t,e,r){return yP.apply(this,arguments)}function yP(){return(yP=(0,ve.Z)(function*(n,t,e,r){const i=rt(n);if(i.ha)return void Me("SyncEngine","Ignoring unexpected query state notification.");const a=i.na.get(t);if(a&&a.length>0)switch(e){case"current":case"not-current":{const d=yield c2(i.localStore,zR(a[0])),f=z1.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield rh(i,d,f);break}case"rejected":yield zv(i.localStore,t,!0),t0(i,t,r);break;default:pt()}})).apply(this,arguments)}function dH(n,t,e){return vP.apply(this,arguments)}function vP(){return(vP=(0,ve.Z)(function*(n,t,e){const r=bP(n);if(r.ha){for(const i of t){if(r.na.has(i)){Me("SyncEngine","Adding an already active target "+i);continue}const a=yield u2(r.localStore,i),d=yield Zv(r.localStore,a);yield Qk(r,P2(a),d.targetId,!1),PA(r.remoteStore,d)}for(const i of e)r.na.has(i)&&(yield zv(r.localStore,i,!1).then(()=>{cC(r.remoteStore,i),t0(r,i)}).catch(qm))}})).apply(this,arguments)}function bP(n){const t=rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=x2.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iH.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Q6.bind(null,t),t.ta.Qo=H6.bind(null,t.eventManager),t.ta.fa=j6.bind(null,t.eventManager),t}function wP(n){const t=rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=X6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eH.bind(null,t),t}class O2{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ve.Z)(function*(){e.M=lC(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return s2(this.persistence,new i2,t.initialUser,this.M)}wa(t){return new b6(wk.zi,this.M)}_a(t){return new p2}terminate(){var t=this;return(0,ve.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class F2 extends O2{constructor(t,e,r){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield e().call(r,t),yield r.ya.initialize(r,t),yield wP(r.ya.syncEngine),yield Kv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(t){return s2(this.persistence,new i2,t.initialUser,this.M)}ma(t){return new t6(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=pk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ta.withCacheSize(this.cacheSizeBytes):ta.DEFAULT;return new fk(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,m2(),kA(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new p2}}class fH extends F2{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield e().call(r,t);const i=r.ya.syncEngine;r.sharedClientState instanceof Dk&&(r.sharedClientState.syncEngine={Mr:aH.bind(null,i),Or:cH.bind(null,i),Fr:dH.bind(null,i),Fs:uH.bind(null,i),kr:oH.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,ve.Z)(function*(d){yield function(n,t){return mP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return a.apply(this,arguments)}}())})()}_a(t){const e=m2();if(!Dk.vt(e))throw new Le(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=pk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Dk(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class CP{initialize(t,e){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>M2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=rH.bind(null,r.syncEngine),yield Hk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new $6}createDatastore(t){const e=lC(t.databaseInfo.databaseId),r=new D6(t.databaseInfo);return new S6(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,a=f=>M2(this.syncEngine,f,0),d=g2.vt()?new g2:new C6,new x6(e,r,i,a,d);var e,r,i,a,d}createSyncEngine(t,e){return function(r,i,a,d,f,m,b){const T=new z6(r,i,a,d,f,m);return b&&(T.ha=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ve.Z)(function*(e){const r=rt(e);Me("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Yv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function L2(n,t=10240){let e=0;return{read:()=>(0,ve.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class FA{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class pH{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new Ai,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,ve.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,ve.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,ve.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const r=t.Ea.decode(e),i=Number(r);isNaN(i)&&t.Pa(`length string (${r}) is not valid number`);const a=yield t.ba(i);return new G6(JSON.parse(a),e.length+i)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,ve.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ba(t){var e=this;return(0,ve.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const r=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,ve.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class gH{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Le(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,d){const f=rt(a),m=Q1(f.M)+"/documents",b={documents:d.map(O=>J1(f.M,O))},T=yield f.ho("BatchGetDocuments",m,b),A=new Map;T.forEach(O=>{const q=function(n,t){return"found"in t?function(e,r){kt(!!r.found);const i=Cc(e,r.found.name),a=ns(r.found.updateTime),d=new Un({mapValue:{fields:r.found.fields}});return Jn.newFoundDocument(i,a,d)}(n,t):"missing"in t?function(e,r){kt(!!r.missing),kt(!!r.readTime);const i=Cc(e,r.missing),a=ns(r.readTime);return Jn.newNoDocument(i,a)}(n,t):pt()}(f.M,O);A.set(q.key.toString(),q)});const M=[];return d.forEach(O=>{const q=A.get(O.toString());kt(!!q),M.push(q)}),M}),function(a,d){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new It(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const a=We.fromPath(i);t.mutations.push(new on(a,t.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const d=rt(i),f=Q1(d.M)+"/documents",m={writes:a.map(b=>X1(d.M,b))};yield d.oo("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw pt();e=Pt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Le(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?v.updateTime(e):v.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Pt.min()))throw new Le(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return v.updateTime(e)}return v.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class mH{constructor(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Ik(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,ve.Z)(function*(){const e=new gH(t.datastore),r=t.Ca(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(a=>{t.xa(a)}))}).catch(i=>{t.xa(i)})}))}Ca(t){try{const e=this.updateFunction(t);return!Yd(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!th(e)}return!1}}class _H{constructor(t,e,r,i){var a=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Hi.UNAUTHENTICATED,this.clientId=JI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ve.Z)(function*(f){Me("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Me("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var t=this;return(0,ve.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=Qv(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function V2(n,t){return EP.apply(this,arguments)}function EP(){return(EP=(0,ve.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield o2(t.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function B2(n,t){return TP.apply(this,arguments)}function TP(){return(TP=(0,ve.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield DP(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>E2(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>E2(t.remoteStore,a)),n.onlineComponents=t})).apply(this,arguments)}function DP(n){return IP.apply(this,arguments)}function IP(){return(IP=(0,ve.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield V2(n,new O2)),n.offlineComponents})).apply(this,arguments)}function LA(n){return AP.apply(this,arguments)}function AP(){return(AP=(0,ve.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield B2(n,new CP)),n.onlineComponents})).apply(this,arguments)}function U2(n){return DP(n).then(t=>t.persistence)}function SP(n){return DP(n).then(t=>t.localStore)}function $2(n){return LA(n).then(t=>t.remoteStore)}function NP(n){return LA(n).then(t=>t.syncEngine)}function n0(n){return xP.apply(this,arguments)}function xP(){return(xP=(0,ve.Z)(function*(n){const t=yield LA(n),e=t.eventManager;return e.onListen=Y6.bind(null,t.syncEngine),e.onUnlisten=K6.bind(null,t.syncEngine),e})).apply(this,arguments)}function H2(n,t,e={}){const r=new Ai;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,d,f,m){const b=new FA({next:A=>{a.enqueueAndForget(()=>Zk(i,T));const M=A.docs.has(d);!M&&A.fromCache?m.reject(new Le(me.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&A.fromCache&&f&&"server"===f.source?m.reject(new Le(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new Kk(Xd(d.path),b,{includeMetadataChanges:!0,Cu:!0});return qk(i,T)}(yield n0(n),n.asyncQueue,t,e,r)})),r.promise}function j2(n,t,e={}){const r=new Ai;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,d,f,m){const b=new FA({next:A=>{a.enqueueAndForget(()=>Zk(i,T)),A.fromCache&&"server"===f.source?m.reject(new Le(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new Kk(d,b,{includeMetadataChanges:!0,Cu:!0});return qk(i,T)}(yield n0(n),n.asyncQueue,t,e,r)})),r.promise}const G2=new Map;function MP(n,t,e){if(!e)throw new Le(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function q2(n,t,e,r){if(!0===t&&!0===r)throw new Le(me.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function W2(n){if(!We.isDocumentKey(n))throw new Le(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Z2(n){if(We.isDocumentKey(n))throw new Le(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":pt()}function wn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Le(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=VA(n);throw new Le(me.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function z2(n,t){if(t<=0)throw new Le(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class Y2{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Le(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Le(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,q2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class dC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y2({}),this._settingsFrozen=!1,t instanceof _c?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Le(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _c(i.options.projectId)}(t))}get app(){if(!this._app)throw new Le(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Le(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y2(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new NR;switch(e.type){case"gapi":const r=e.client;return kt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new RR(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Le(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=G2.get(t);e&&(Me("ComponentProvider","Removing Datastore"),G2.delete(t),e.terminate())}(this),Promise.resolve()}}class Ir{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ir(this.firestore,t,this._key)}}class Hs{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Hs(this.firestore,t,this._query)}}class Tc extends Hs{constructor(t,e,r){super(t,e,Xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ir(this.firestore,null,new We(t))}withConverter(t){return new Tc(this.firestore,t,this._path)}}function K2(n,t,...e){if(n=(0,V.m9)(n),MP("collection","path",t),n instanceof dC){const r=bn.fromString(t,...e);return Z2(r),new Tc(n,null,r)}{if(!(n instanceof Ir||n instanceof Tc))throw new Le(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(t,...e));return Z2(r),new Tc(n.firestore,null,r)}}function BA(n,t,...e){if(n=(0,V.m9)(n),1===arguments.length&&(t=JI.R()),MP("doc","path",t),n instanceof dC){const r=bn.fromString(t,...e);return W2(r),new Ir(n,null,new We(r))}{if(!(n instanceof Ir||n instanceof Tc))throw new Le(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(t,...e));return W2(r),new Ir(n.firestore,n instanceof Tc?n.converter:null,new We(r))}}function J2(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),(n instanceof Ir||n instanceof Tc)&&(t instanceof Ir||t instanceof Tc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function Q2(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),n instanceof Hs&&t instanceof Hs&&n.firestore===t.firestore&&eh(n._query,t._query)&&n.converter===t.converter}class SH{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Ik(this,"async_queue_retry"),this.qa=()=>{const e=kA();e&&Me("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=kA();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=kA();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new Ai;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,ve.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!Vm(e))throw e;Me("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{throw this.$a=r,this.Ba=!1,gi("INTERNAL UNHANDLED ERROR: ",function(a){let d=a.message||"";return a.stack&&(d=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=e,e}enqueueAfterDelay(t,e,r){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const i=Gk.createAndSchedule(this,t,e,r,a=>this.ja(a));return this.Fa.push(i),i}Ka(){this.$a&&pt()}verifyOperationInProgress(){}Wa(){var t=this;return(0,ve.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function RP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class NH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ai,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Or extends dC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new SH,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||X2(this),this._firestoreClient.terminate()}}function xi(n){return n._firestoreClient||X2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function X2(n){var t;const e=n._freezeSettings(),r=(a=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new LR(n._databaseId,a,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new _H(n._authCredentials,n._appCheckCredentials,n._queue,r)}function eV(n,t,e){const r=new Ai;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield V2(n,e),yield B2(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===me.FAILED_PRECONDITION||a.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function tV(n){if(n._initialized||n._terminated)throw new Le(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ih{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Le(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Si(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Dc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Dc(Ni.fromBase64String(t))}catch(e){throw new Le(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Dc(Ni.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Zm{constructor(t){this._methodName=t}}class UA{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Le(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Le(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Kt(this._lat,t._lat)||Kt(this._long,t._long)}}const BH=/^__.*__$/;class UH{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new ae(t,this.data,this.fieldMask,e,this.fieldTransforms):new he(t,this.data,e,this.fieldTransforms)}}class nV{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new ae(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function rV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class $A{constructor(t,e,r,i,a,d){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new $A(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return GA(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(rV(this.Xa)&&BH.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class $H{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||lC(t)}ac(t,e,r,i=!1){return new $A({Xa:t,methodName:e,uc:r,path:Si.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function zm(n){const t=n._freezeSettings(),e=lC(n._databaseId);return new $H(n._databaseId,!!t.ignoreUndefinedProperties,e)}function HA(n,t,e,r,i,a={}){const d=n.ac(a.merge||a.mergeFields?2:0,t,e,i);FP("Data must be an object, but it was:",d,r);const f=oV(r,d);let m,b;if(a.merge)m=new El(d.fieldMask),b=d.fieldTransforms;else if(a.mergeFields){const T=[];for(const A of a.mergeFields){const M=LP(t,A,e);if(!d.contains(M))throw new Le(me.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);lV(T,M)||T.push(M)}m=new El(T),b=d.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,b=d.fieldTransforms;return new UH(new Un(f),m,b)}class hC extends Zm{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hC}}function iV(n,t,e){return new $A({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class kP extends Zm{_toFieldTransform(t){return new h(t.path,new Lm)}isEqual(t){return t instanceof kP}}class HH extends Zm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=iV(this,t,!0),r=this.cc.map(a=>Ym(a,e)),i=new Qf(r);return new h(t.path,i)}isEqual(t){return this===t}}class jH extends Zm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=iV(this,t,!0),r=this.cc.map(a=>Ym(a,e)),i=new Xf(r);return new h(t.path,i)}isEqual(t){return this===t}}class GH extends Zm{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new o(t.M,KR(t.M,this.hc));return new h(t.path,e)}isEqual(t){return this===t}}function PP(n,t,e,r){const i=n.ac(1,t,e);FP("Data must be an object, but it was:",i,r);const a=[],d=Un.empty();Zd(r,(m,b)=>{const T=jA(t,m,e);b=(0,V.m9)(b);const A=i.sc(T);if(b instanceof hC)a.push(T);else{const M=Ym(b,A);null!=M&&(a.push(T),d.set(T,M))}});const f=new El(a);return new nV(d,f,i.fieldTransforms)}function OP(n,t,e,r,i,a){const d=n.ac(1,t,e),f=[LP(t,r,e)],m=[i];if(a.length%2!=0)throw new Le(me.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<a.length;M+=2)f.push(LP(t,a[M])),m.push(a[M+1]);const b=[],T=Un.empty();for(let M=f.length-1;M>=0;--M)if(!lV(b,f[M])){const O=f[M];let q=m[M];q=(0,V.m9)(q);const oe=d.sc(O);if(q instanceof hC)b.push(O);else{const _e=Ym(q,oe);null!=_e&&(b.push(O),T.set(O,_e))}}const A=new El(b);return new nV(T,A,d.fieldTransforms)}function sV(n,t,e,r=!1){return Ym(e,n.ac(r?4:3,t))}function Ym(n,t){if(aV(n=(0,V.m9)(n)))return FP("Unsupported field value:",t,n),oV(n,t);if(n instanceof Zm)return function(e,r){if(!rV(r.Xa))throw r.rc(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,r){const i=[];let a=0;for(const d of e){let f=Ym(d,r.ic(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,V.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return KR(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Mn.fromDate(e);return{timestampValue:K1(r.M,i)}}if(e instanceof Mn){const i=new Mn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:K1(r.M,i)}}if(e instanceof UA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Dc)return{bytesValue:yL(r.M,e._byteString)};if(e instanceof Ir){const i=r.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw r.rc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:XR(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.rc(`Unsupported field value: ${VA(e)}`)}(n,t)}function oV(n,t){const e={};return eA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zd(n,(r,i)=>{const a=Ym(i,t.tc(r));null!=a&&(e[r]=a)}),{mapValue:{fields:e}}}function aV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mn||n instanceof UA||n instanceof Dc||n instanceof Ir||n instanceof Zm)}function FP(n,t,e){if(!aV(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=VA(e);throw t.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function LP(n,t,e){if((t=(0,V.m9)(t))instanceof ih)return t._internalPath;if("string"==typeof t)return jA(n,t);throw GA("Field path arguments must be of type string or ",n,!1,void 0,e)}const qH=new RegExp("[~\\*/\\[\\]]");function jA(n,t,e){if(t.search(qH)>=0)throw GA(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ih(...t.split("."))._internalPath}catch(r){throw GA(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function GA(n,t,e,r,i){const a=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||d)&&(m+=" (found",a&&(m+=` in field ${r}`),d&&(m+=` in document ${i}`),m+=")"),new Le(me.INVALID_ARGUMENT,f+n+m)}function lV(n,t){return n.some(e=>e.isEqual(t))}class fC{constructor(t,e,r,i,a){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new WH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(qA("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class WH extends fC{data(){return super.data()}}function qA(n,t){return"string"==typeof t?jA(n,t):t instanceof ih?t._internalPath:t._delegate._internalPath}class Km{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sh extends fC{constructor(t,e,r,i,a,d){super(t,e,r,i,d),this._firestore=t,this._firestoreImpl=t,this.metadata=a}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new pC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(qA("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class pC extends sh{data(t={}){return super.data(t)}}class ap{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Km(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new pC(this._firestore,this._userDataWriter,r.key,r,new Km(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Le(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new pC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Km(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new pC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Km(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==d.type&&(m=a.indexOf(d.doc.key),a=a.delete(d.doc.key)),1!==d.type&&(a=a.add(d.doc),b=a.indexOf(d.doc.key)),{type:ZH(d.type),doc:f,oldIndex:m,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ZH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function uV(n,t){return n instanceof sh&&t instanceof sh?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof ap&&t instanceof ap&&n._firestore===t._firestore&&Q2(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function cV(n){if(Om(n)&&0===n.explicitOrderBy.length)throw new Le(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gC{}function lp(n,...t){for(const e of t)n=e._apply(n);return n}class zH extends gC{constructor(t,e,r){super(),this.lc=t,this.fc=e,this.dc=r,this.type="where"}_apply(t){const e=zm(t.firestore),r=function(i,a,d,f,m,b,T){let A;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Le(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){mV(T,b);const O=[];for(const q of T)O.push(gV(f,i,q));A={arrayValue:{values:O}}}else A=gV(f,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||mV(T,b),A=sV(d,"where",T,"in"===b||"not-in"===b);const M=ji.create(m,b,A);return function(O,q){if(q.S()){const _e=Fm(O);if(null!==_e&&!_e.isEqual(q.field))throw new Le(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_e.toString()}' and '${q.field.toString()}'`);const qe=Vv(O);null!==qe&&_V(0,q.field,qe)}const oe=function(_e,qe){for(const Ye of _e.filters)if(qe.indexOf(Ye.op)>=0)return Ye.op;return null}(O,function(_e){switch(_e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==oe)throw new Le(me.INVALID_ARGUMENT,oe===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${oe.toString()}' filters.`)}(i,M),M}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new Hs(t.firestore,t.converter,function(i,a){const d=i.filters.concat([a]);return new mu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class KH extends gC{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(r,i,a){if(null!==r.startAt)throw new Le(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Ra(i,a);return function(f,m){if(null===Vv(f)){const b=Fm(f);null!==b&&_V(0,b,m.field)}}(r,d),d}(t._query,this.lc,this._c);return new Hs(t.firestore,t.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new mu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class dV extends gC{constructor(t,e,r){super(),this.type=t,this.wc=e,this.mc=r}_apply(t){return new Hs(t.firestore,t.converter,wc(t._query,this.wc,this.mc))}}class hV extends gC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=pV(t,this.type,this.gc,this.yc);return new Hs(t.firestore,t.converter,(i=e,new mu((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class fV extends gC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=pV(t,this.type,this.gc,this.yc);return new Hs(t.firestore,t.converter,(i=e,new mu((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function pV(n,t,e,r){if(e[0]=(0,V.m9)(e[0]),e[0]instanceof fC)return function(i,a,d,f,m){if(!f)throw new Le(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const T of Jf(i))if(T.field.isKeyField())b.push(Tl(a,f.key));else{const A=f.data.field(T.field);if(Sm(A))throw new Le(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const M=T.field.canonicalString();throw new Le(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}b.push(A)}return new ea(b,m)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=zm(n.firestore);return function(a,d,f,m,b,T){const A=a.explicitOrderBy;if(b.length>A.length)throw new Le(me.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let O=0;O<b.length;O++){const q=b[O];if(A[O].field.isKeyField()){if("string"!=typeof q)throw new Le(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof q}`);if(!G1(a)&&-1!==q.indexOf("/"))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${q}' contains a slash.`);const oe=a.path.child(bn.fromString(q));if(!We.isDocumentKey(oe))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${oe}' is not because it contains an odd number of segments.`);const _e=new We(oe);M.push(Tl(d,_e))}else{const oe=sV(f,m,q);M.push(oe)}}return new ea(M,T)}(n._query,n.firestore._databaseId,i,t,e,r)}}function gV(n,t,e){if("string"==typeof(e=(0,V.m9)(e))){if(""===e)throw new Le(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G1(t)&&-1!==e.indexOf("/"))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(bn.fromString(e));if(!We.isDocumentKey(r))throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tl(n,new We(r))}if(e instanceof Ir)return Tl(n,e._key);throw new Le(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VA(e)}.`)}function mV(n,t){if(!Array.isArray(n)||0===n.length)throw new Le(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Le(me.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function _V(n,t,e){if(!e.isEqual(t))throw new Le(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class VP{convertValue(t,e="none"){switch(Kd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ur(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(jf(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw pt()}}convertObject(t,e){const r={};return Zd(t.fields,(i,a)=>{r[i]=this.convertValue(a,e)}),r}convertGeoPoint(t){return new UA(Ur(t.latitude),Ur(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=nA(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Nm(t));default:return null}}convertTimestamp(t){const e=zd(t);return new Mn(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=bn.fromString(t);kt(SL(r));const i=new _c(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(e)||gi(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),a}}function WA(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class ij extends VP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Dc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ir(this.firestore,null,e)}}class yV{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=zm(t)}set(t,e,r){this._verifyNotCommitted();const i=up(t,this._firestore),a=WA(i.converter,e,r),d=HA(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,v.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const a=up(t,this._firestore);let d;return d="string"==typeof(e=(0,V.m9)(e))||e instanceof ih?OP(this._dataReader,"WriteBatch.update",a._key,e,r,i):PP(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(d.toMutation(a._key,v.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=up(t,this._firestore);return this._mutations=this._mutations.concat(new It(e._key,v.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function up(n,t){if((n=(0,V.m9)(n)).firestore!==t)throw new Le(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Jm extends VP{constructor(t){super(),this.firestore=t}convertBytes(t){return new Dc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ir(this.firestore,null,e)}}function vV(n,t,e){n=wn(n,Ir);const r=wn(n.firestore,Or),i=WA(n.converter,t,e);return r0(r,[HA(zm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,v.none())])}function bV(n,t,e,...r){n=wn(n,Ir);const i=wn(n.firestore,Or),a=zm(i);let d;return d="string"==typeof(t=(0,V.m9)(t))||t instanceof ih?OP(a,"updateDoc",n._key,t,e,r):PP(a,"updateDoc",n._key,t),r0(i,[d.toMutation(n._key,v.exists(!0))])}function wV(n,...t){var e,r,i;n=(0,V.m9)(n);let a={includeMetadataChanges:!1},d=0;"object"!=typeof t[d]||RP(t[d])||(a=t[d],d++);const f={includeMetadataChanges:a.includeMetadataChanges};if(RP(t[d])){const A=t[d];t[d]=null===(e=A.next)||void 0===e?void 0:e.bind(A),t[d+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),t[d+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,b,T;if(n instanceof Ir)b=wn(n.firestore,Or),T=Xd(n._key.path),m={next:A=>{t[d]&&t[d](BP(b,n,A))},error:t[d+1],complete:t[d+2]};else{const A=wn(n,Hs);b=wn(A.firestore,Or),T=A._query;const M=new Jm(b);m={next:O=>{t[d]&&t[d](new ap(b,M,A,O))},error:t[d+1],complete:t[d+2]},cV(n._query)}return function(A,M,O,q){const oe=new FA(q),_e=new Kk(M,oe,O);return A.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return qk(yield n0(A),_e)})),()=>{oe.Ia(),A.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return Zk(yield n0(A),_e)}))}}(xi(b),T,f,m)}function r0(n,t){return function(e,r){const i=new Ai;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(n,t,e){return tP.apply(this,arguments)}(yield NP(e),r,i)})),i.promise}(xi(n),t)}function BP(n,t,e){const r=e.docs.get(t._key),i=new Jm(n);return new sh(n,i,t._key,r,new Km(e.hasPendingWrites,e.fromCache),t.converter)}class pj extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=zm(t)}get(t){const e=up(t,this._firestore),r=new ij(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return pt();const a=i[0];if(a.isFoundDocument())return new fC(this._firestore,r,a.key,a,e.converter);if(a.isNoDocument())return new fC(this._firestore,r,e._key,null,e.converter);throw pt()})}set(t,e,r){const i=up(t,this._firestore),a=WA(i.converter,e,r),d=HA(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(t,e,r,...i){const a=up(t,this._firestore);let d;return d="string"==typeof(e=(0,V.m9)(e))||e instanceof ih?OP(this._dataReader,"Transaction.update",a._key,e,r,i):PP(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,d),this}delete(t){const e=up(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=up(t,this._firestore),r=new Jm(this._firestore);return super.get(t).then(i=>new sh(this._firestore,r,e._key,i._document,new Km(!1,!1),e.converter))}}function UP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function EV(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function TV(){if("undefined"==typeof atob)throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){du=gs.SDK_VERSION,(0,gs._registerComponent)(new Xs.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),a=new Or(i,new MR(e.getProvider("auth-internal")),new kR(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC")),(0,gs.registerVersion)(Rv,"3.4.8",n),(0,gs.registerVersion)(Rv,"3.4.8","esm2017")}();class mC{constructor(t){this._delegate=t}static fromBase64String(t){return TV(),new mC(Dc.fromBase64String(t))}static fromUint8Array(t){return EV(),new mC(Dc.fromUint8Array(t))}toBase64(){return TV(),this._delegate.toBase64()}toUint8Array(){return EV(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function $P(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class Tj{enableIndexedDbPersistence(t,e){return function(n,t){tV(n=wn(n,Or));const e=xi(n),r=n._freezeSettings(),i=new CP;return eV(e,i,new F2(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){tV(n=wn(n,Or));const t=xi(n),e=n._freezeSettings(),r=new CP;return eV(t,r,new fH(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Le(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ai;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(e=(0,ve.Z)(function*(r){if(!_u.vt())return Promise.resolve();const i=r+"main";yield _u.delete(i)}),function(r){return e.apply(this,arguments)})(pk(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class DV{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof _c||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Am("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const a=(n=wn(n,dC))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Am("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Hi.MOCK_USER;else{d=(0,V.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Le(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Hi(m)}n._authCredentials=new xR(new YI(d,f))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const t=yield U2(n),e=yield $2(n);return t.setNetworkEnabled(!0),function(r){const i=rt(r);return i.fu.delete(0),uC(i)}(e)}))}(xi(n=wn(n,Or)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const t=yield U2(n),e=yield $2(n);return t.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=rt(i);a.fu.add(0),yield Yv(a),a.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(xi(n=wn(n,Or)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,q2("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new Ai;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(n,t){return oP.apply(this,arguments)}(yield NP(t),e)})),e.promise}(xi(n=wn(n,Or)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new FA(t);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield n0(n),i=e,rt(r).Eu.add(i),void i.next();var r,i})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield n0(n),i=e,void rt(r).Eu.delete(i);var r,i}))}}(xi(n=wn(n,Or)),RP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new s0(this,K2(this._delegate,t))}catch(e){throw po(e,"collection()","Firestore.collection()")}}doc(t){try{return new Il(this,BA(this._delegate,t))}catch(e){throw po(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new go(this,function(n,t){if(n=wn(n,dC),MP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Le(me.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hs(n,null,(e=t,new mu(bn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw po(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new Ai;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,LA(i).then(a=>a.datastore));var i;new mH(n.asyncQueue,r,t,e).run()})),e.promise}(xi(n=wn(n,Or)),e=>t(new pj(n,e)))}(this._delegate,e=>t(new IV(this,e)))}batch(){return xi(this._delegate),new AV(new yV(this._delegate,t=>r0(this._delegate,t)))}loadBundle(t){return function(n,t){const e=xi(n=wn(n,Or)),r=new NH;return function(n,t,e,r){const i=function(a,d){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,b){if(m instanceof Uint8Array)return L2(m,b);if(m instanceof ArrayBuffer)return L2(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new pH(m,d);var m}(e,lC(t));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function(n,t,e){const r=rt(n);var i;(i=(0,ve.Z)(function*(a,d,f){try{const m=yield d.getMetadata();if(yield function(M,O){const q=rt(M),oe=ns(O.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",_e=>q._s.getBundleMetadata(_e,O.id)).then(_e=>!!_e&&_e.createTime.compareTo(oe)>=0)}(a.localStore,m))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(M=m).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);f._updateProgress(I2(m));const b=new q6(m,a.localStore,d.M);let T=yield d.da();for(;T;){const M=yield b.ku(T);M&&f._updateProgress(M),T=yield d.da()}const A=yield b.complete();return yield rh(a,A.Fu,void 0),yield function(M,O){const q=rt(M);return q.persistence.runTransaction("Save bundle","readwrite",oe=>q._s.saveBundleMetadata(oe,O))}(a.localStore,m),f._completeWith(A.progress),Promise.resolve(A.Ou)}catch(m){return Am("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var M}),function(a,d,f){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield NP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(e,r){const i=rt(e);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield SP(n),t)}))}(xi(n=wn(n,Or)),t).then(e=>e?new Hs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new go(this,e):null)}}class ZA extends VP{constructor(t){super(),this.firestore=t}convertBytes(t){return new mC(new Dc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Il.forKey(e,this.firestore,null)}}class IV{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ZA(t)}get(t){const e=Xm(t);return this._delegate.get(e).then(r=>new _C(this._firestore,new sh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Xm(t);return r?(UP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const a=Xm(t);return 2===arguments.length?this._delegate.update(a,e):this._delegate.update(a,e,r,...i),this}delete(t){const e=Xm(t);return this._delegate.delete(e),this}}class AV{constructor(t){this._delegate=t}set(t,e,r){const i=Xm(t);return r?(UP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const a=Xm(t);return 2===arguments.length?this._delegate.update(a,e):this._delegate.update(a,e,r,...i),this}delete(t){const e=Xm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Qm{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new pC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yC(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Qm.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let a=i.get(e);return a||(a=new Qm(t,new ZA(t),e),i.set(e,a)),a}}Qm.INSTANCES=new WeakMap;class Il{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ZA(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Il(e,new Ir(e._delegate,r,new We(t)))}static forKey(t,e,r){return new Il(e,new Ir(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new s0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new s0(this.firestore,K2(this._delegate,t))}catch(e){throw po(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,V.m9)(t))instanceof Ir&&J2(this._delegate,t)}set(t,e){e=UP("DocumentReference.set",e);try{return e?vV(this._delegate,t,e):vV(this._delegate,t)}catch(r){throw po(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?bV(this._delegate,t):bV(this._delegate,t,e,...r)}catch(i){throw po(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return r0(wn(n.firestore,Or),[new It(n._key,v.none())])}(this._delegate)}onSnapshot(...t){const e=SV(t),r=NV(t,i=>new _C(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wV(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=wn(n,Ir);const t=wn(n.firestore,Or),e=xi(t),r=new Jm(t);return function(n,t){const e=new Ai;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,d){try{const f=yield function(m,b){const T=rt(m);return T.persistence.runTransaction("read document","readonly",A=>T.ci.Ls(A,b))}(i,a);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Le(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=Qv(f,`Failed to get document '${a} from cache`);d.reject(m)}}),function(i,a,d){return r.apply(this,arguments)})(yield SP(n),t,e);var r})),e.promise}(e,n._key).then(i=>new sh(t,r,n._key,i,new Km(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=wn(n,Ir);const t=wn(n.firestore,Or);return H2(xi(t),n._key,{source:"server"}).then(e=>BP(t,n,e))}(this._delegate):function(n){n=wn(n,Ir);const t=wn(n.firestore,Or);return H2(xi(t),n._key).then(e=>BP(t,n,e))}(this._delegate),e.then(r=>new _C(this.firestore,new sh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new Il(this.firestore,this._delegate.withConverter(t?Qm.getInstance(this.firestore,t):null))}}function po(n,t,e){return n.message=n.message.replace(t,e),n}function SV(n){for(const t of n)if("object"==typeof t&&!$P(t))return t;return{}}function NV(n,t){var e,r;let i;return i=$P(n[0])?n[0]:$P(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(t(a))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _C{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Il(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return uV(this._delegate,t._delegate)}}class yC extends _C{data(t){const e=this._delegate.data(t);return function(n,t){n||pt()}(void 0!==e),e}}class go{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ZA(t)}where(t,e,r){try{return new go(this.firestore,lp(this._delegate,function(n,t,e){const r=t,i=qA("where",n);return new zH(i,r,e)}(t,e,r)))}catch(i){throw po(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new go(this.firestore,lp(this._delegate,function(n,t="asc"){const e=t,r=qA("orderBy",n);return new KH(r,e)}(t,e)))}catch(r){throw po(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new go(this.firestore,lp(this._delegate,function(n){return z2("limit",n),new dV("limit",n,"F")}(t)))}catch(e){throw po(e,"limit()","Query.limit()")}}limitToLast(t){try{return new go(this.firestore,lp(this._delegate,function(n){return z2("limitToLast",n),new dV("limitToLast",n,"L")}(t)))}catch(e){throw po(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new go(this.firestore,lp(this._delegate,function(...n){return new hV("startAt",n,!0)}(...t)))}catch(e){throw po(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new go(this.firestore,lp(this._delegate,function(...n){return new hV("startAfter",n,!1)}(...t)))}catch(e){throw po(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new go(this.firestore,lp(this._delegate,function(...n){return new fV("endBefore",n,!1)}(...t)))}catch(e){throw po(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new go(this.firestore,lp(this._delegate,function(...n){return new fV("endAt",n,!0)}(...t)))}catch(e){throw po(e,"endAt()","Query.endAt()")}}isEqual(t){return Q2(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=wn(n,Hs);const t=wn(n.firestore,Or),e=xi(t),r=new Jm(t);return function(n,t){const e=new Ai;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,d){try{const f=yield xA(i,a,!0),m=new N2(a,f.li),b=m.Gu(f.documents),T=m.applyChanges(b,!1);d.resolve(T.snapshot)}catch(f){const m=Qv(f,`Failed to execute query '${a} against cache`);d.reject(m)}}),function(i,a,d){return r.apply(this,arguments)})(yield SP(n),t,e);var r})),e.promise}(e,n._query).then(i=>new ap(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=wn(n,Hs);const t=wn(n.firestore,Or),e=xi(t),r=new Jm(t);return j2(e,n._query,{source:"server"}).then(i=>new ap(t,r,n,i))}(this._delegate):function(n){n=wn(n,Hs);const t=wn(n.firestore,Or),e=xi(t),r=new Jm(t);return cV(n._query),j2(e,n._query).then(i=>new ap(t,r,n,i))}(this._delegate),e.then(r=>new HP(this.firestore,new ap(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=SV(t),r=NV(t,i=>new HP(this.firestore,new ap(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wV(this._delegate,e,r)}withConverter(t){return new go(this.firestore,this._delegate.withConverter(t?Qm.getInstance(this.firestore,t):null))}}class Ij{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new yC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class HP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new yC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new Ij(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new yC(this._firestore,r))})}isEqual(t){return uV(this._delegate,t._delegate)}}class s0 extends go{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Il(this.firestore,t):null}doc(t){try{return new Il(this.firestore,void 0===t?BA(this._delegate):BA(this._delegate,t))}catch(e){throw po(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=wn(n.firestore,Or),r=BA(n),i=WA(n.converter,t);return r0(e,[HA(zm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,v.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new Il(this.firestore,e))}isEqual(t){return J2(this._delegate,t._delegate)}withConverter(t){return new s0(this.firestore,this._delegate.withConverter(t?Qm.getInstance(this.firestore,t):null))}}function Xm(n){return wn(n,Ir)}class jP{constructor(...t){this._delegate=new ih(...t)}static documentId(){return new jP(Si.keyField().canonicalString())}isEqual(t){return(t=(0,V.m9)(t))instanceof ih&&this._delegate._internalPath.isEqual(t._internalPath)}}class e_{constructor(t){this._delegate=t}static serverTimestamp(){const t=new kP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e_(t)}static delete(){const t=new hC("deleteField");return t._methodName="FieldValue.delete",new e_(t)}static arrayUnion(...t){const e=function(...n){return new HH("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new e_(e)}static arrayRemove(...t){const e=function(...n){return new jH("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new e_(e)}static increment(t){const e=function(n){return new GH("increment",n)}(t);return e._methodName="FieldValue.increment",new e_(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const Aj={Firestore:DV,GeoPoint:UA,Timestamp:Mn,Blob:mC,Transaction:IV,WriteBatch:AV,DocumentReference:Il,DocumentSnapshot:_C,Query:go,QueryDocumentSnapshot:yC,QuerySnapshot:HP,CollectionReference:s0,FieldPath:jP,FieldValue:e_,setLogLevel:function(n){!function(n){mc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xV(n,t){return function(n,t=Xu.z){return new Wt.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function GP(n,t){return xV(n,t).pipe((0,ct.U)(e=>({payload:e,type:"query"})))}function zA(n,t){return GP(n,t).pipe(Ya(void 0),eI(),(0,ct.U)(([e,r])=>{const i=r.payload.docChanges(),a=i.map(d=>({type:d.type,payload:d}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const m=i.find(T=>T.doc.ref.isEqual(d.ref)),b=null==e?void 0:e.payload.docs.find(T=>T.ref.isEqual(d.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(d.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),a}))}function MV(n,t,e){return zA(n,e).pipe(Ka((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return qP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return qP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return qP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),t),[]),ud(),(0,ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function qP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function RV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new Xs.wA("firestore-compat",e=>((t,e)=>new DV(t,e,new Tj))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Aj)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(ll.Z);class kV{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=zA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ct.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(Ya(void 0),eI(),Zn(([r,i])=>i.length>0||!r),(0,ct.U)(([r,i])=>i),Fn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ka((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=RV(t);return MV(this.query,e,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(t={}){return GP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),Fn.iC)}get(t){return(0,vn.D)(this.query.get(t)).pipe(Fn.iC)}add(t){return this.ref.add(t)}doc(t){return new PV(this.ref.doc(t),this.afs)}}class PV{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:a}=LV(r,e);return new kV(i,a,this.afs)}snapshotChanges(){return function(n,t){return xV(n,t).pipe(Ya(void 0),eI(),(0,ct.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,vn.D)(this.ref.get(t)).pipe(Fn.iC)}}class Pj{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?zA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Zn(e=>e.length>0),Fn.iC):zA(this.query,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Ka((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=RV(t);return MV(this.query,e,this.afs.schedulers.outsideAngular).pipe(Fn.iC)}valueChanges(t={}){return GP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),Fn.iC)}get(t){return(0,vn.D)(this.query.get(t)).pipe(Fn.iC)}}const OV=new l.OlP("angularfire2.enableFirestorePersistence"),FV=new l.OlP("angularfire2.firestore.persistenceSettings"),Oj=new l.OlP("angularfire2.firestore.settings"),Fj=new l.OlP("angularfire2.firestore.use-emulator");function LV(n,t=(e=>e)){return{query:t(n),ref:n}}let VV=(()=>{class n{constructor(e,r,i,a,d,f,m,b,T,A,M,O,q,oe,_e,qe,Ye){this.schedulers=m;const it=(0,Di.on)(e,f,r),ot=T;A&&GD(it,f,M,q,oe,_e,O,qe),[this.firestore,this.persistenceEnabled$]=(0,Di.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const Ut=f.runOutsideAngular(()=>it.firestore());if(a&&Ut.settings(a),ot&&Ut.useEmulator(...ot),i&&!oa(d)){const an=()=>{try{return(0,vn.D)(Ut.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Hr){return"undefined"!=typeof console&&console.warn(Hr),(0,ht.of)(!1)}};return[Ut,f.runOutsideAngular(an)]}return[Ut,(0,ht.of)(!1)]},[a,ot,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:a,query:d}=LV(i,r),f=this.schedulers.ngZone.run(()=>a);return new kV(f,d,this)}collectionGroup(e,r){const i=r||(d=>d),a=this.firestore.collectionGroup(e);return new Pj(i(a),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new PV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Di.Dh),l.LFG(Di.xv,8),l.LFG(OV,8),l.LFG(Oj,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Fn.HU),l.LFG(FV,8),l.LFG(Fj,8),l.LFG(Qy,8),l.LFG(jw,8),l.LFG(Gw,8),l.LFG(Jy,8),l.LFG(qw,8),l.LFG(Ww,8),l.LFG(jD,8),l.LFG(om,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Lj=(()=>{class n{constructor(){Hw.Z.registerVersion("angularfire",Fn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:OV,useValue:!0},{provide:FV,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[VV]}),n})(),Vj=(()=>{class n{constructor(e,r,i,a){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,r){return this.afAuth.signInWithEmailAndPassword(e,r)}SignUp(e,r){return this.afAuth.createUserWithEmailAndPassword(e,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=e),null!==e}GoogleAuth(){return this.AuthLogin(new xf.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(VV),l.LFG(Qy),l.LFG(Ti),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Bj=U(9105);function Cs(n,t,e,r){return(0,Bj.m)(e)&&(r=e,e=void 0),r?Cs(n,t,e).pipe((0,ct.U)(i=>(0,cs.k)(i)?r(...i):r(i))):new Wt.y(i=>{BV(n,t,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,e)})}function BV(n,t,e,r,i){let a;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(t,e,i),a=()=>d.removeEventListener(t,e,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(t,e),a=()=>d.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(t,e),a=()=>d.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)BV(n[d],t,e,r,i)}r.add(a)}function jj(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class Gj{call(t,e){return e.subscribe(new qj(t))}}class qj extends Yc{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const a=Bu(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)}}var Wj=U(8640);new Wt.y(Wj.Z);var YA=U(377);function KA(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,Ro.n)(n,void 0).lift(new Zj(t))}class Zj{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new zj(t,this.resultSelector))}}class zj extends ui.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,cs.k)(t)?e.push(new Kj(t)):e.push("function"==typeof t[YA.hZ]?new Yj(t[YA.hZ]()):new Jj(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let d=0;d<e;d++){let f=t[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const a=[];for(let d=0;d<e;d++){let f=t[d],m=f.next();if(f.hasCompleted()&&(i=!0),m.done)return void r.complete();a.push(m.value)}this.resultSelector?this._tryresultSelector(a):r.next(a),i&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class Yj{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class Kj{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[YA.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Jj extends Ji.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[YA.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Ji.ft)(this.observable,new Ji.IY(this))}}function zr(n){return t=>t.lift(new Xj(n))}class Xj{constructor(t){this.notifier=t}call(t,e){const r=new eG(t),i=(0,Ji.ft)(this.notifier,new Ji.IY(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class eG extends Ji.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}U(1593);var aG=U(1555);function JA(n,t){return new Wt.y(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let a=0,d=0;for(let f=0;f<r;f++){const m=(0,vn.D)(n[f]);let b=!1;e.add(m.subscribe({next:T=>{b||(b=!0,d++),i[f]=T},error:T=>e.error(T),complete:()=>{a++,(a===r||!b)&&(d===r&&e.next(t?t.reduce((T,A,M)=>(T[A]=i[M],T),{}):i),e.complete())}}))}})}let qV=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),t_=(()=>{class n extends qV{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Es=new l.OlP("NgValueAccessor"),uG={provide:Es,useExisting:(0,l.Gpc)(()=>ZP),multi:!0};let ZP=(()=>{class n extends t_{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&l.NdJ("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},features:[l._Bn([uG]),l.qOj]}),n})();const cG={provide:Es,useExisting:(0,l.Gpc)(()=>QA),multi:!0},hG=new l.OlP("CompositionEventMode");let QA=(()=>{class n extends qV{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=ie()?ie().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(hG,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&l.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[l._Bn([cG]),l.qOj]}),n})();const Ts=new l.OlP("NgValidators"),dp=new l.OlP("NgAsyncValidators");function tB(n){return null!=n}function nB(n){const t=(0,l.QGY)(n)?(0,vn.D)(n):n;return(0,l.CqO)(t),t}function rB(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function iB(n,t){return t.map(e=>e(n))}function sB(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function zP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(tB);return 0==t.length?null:function(e){return rB(iB(e,t))}}(sB(n)):null}function YP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(tB);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,cs.k)(t))return JA(t,null);if((0,aG.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return JA(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return JA(n=1===n.length&&(0,cs.k)(n[0])?n[0]:n,null).pipe((0,ct.U)(e=>t(...e)))}return JA(n,null)}(iB(e,t).map(nB)).pipe((0,ct.U)(rB))}}(sB(n)):null}function lB(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function KP(n){return n?Array.isArray(n)?n:[n]:[]}function XA(n,t){return Array.isArray(n)?n.includes(t):n===t}function dB(n,t){const e=KP(t);return KP(n).forEach(i=>{XA(e,i)||e.push(i)}),e}function hB(n,t){return KP(t).filter(e=>!XA(n,e))}let fB=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=YP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n}),n})(),mo=(()=>{class n extends fB{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();class fp extends fB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let gB=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(fp,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&l.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[l.qOj]}),n})();function vC(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(lB(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(lB(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rS(t._rawValidators,i),rS(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&mB(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&mB(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function rS(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function mB(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const bC="VALID",oS="INVALID",o0="PENDING",wC="DISABLED";function nO(n){return(iO(n)?n.validators:n)||null}function vB(n){return Array.isArray(n)?zP(n):n||null}function rO(n,t){return(iO(t)?t.asyncValidators:n)||null}function bB(n){return Array.isArray(n)?YP(n):n||null}function iO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class sO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=vB(this._rawValidators),this._composedAsyncValidatorFn=bB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===bC}get invalid(){return this.status===oS}get pending(){return this.status==o0}get disabled(){return this.status===wC}get enabled(){return this.status!==wC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=vB(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=bB(t)}addValidators(t){this.setValidators(dB(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(dB(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(hB(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(hB(t,this._rawAsyncValidators))}hasValidator(t){return XA(this._rawValidators,t)}hasAsyncValidator(t){return XA(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=o0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=bC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bC||this.status===o0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wC:bC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=o0,this._hasOwnPendingAsyncValidator=!0;const e=nB(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof oO?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof AG&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?wC:this.errors?oS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(o0)?o0:this._anyControlsHaveStatus(oS)?oS:bC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){iO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class aS extends sO{constructor(t=null,e,r){super(nO(e),rO(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){sS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){sS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class oO extends sO{constructor(t,e,r){super(nO(e),rO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof aS?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,a)=>{r=e(r,i,a)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class AG extends sO{constructor(t,e,r){super(nO(e),rO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof aS?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const xG={provide:fp,useExisting:(0,l.Gpc)(()=>lO)},EB=(()=>Promise.resolve(null))();let lO=(()=>{class n extends fp{constructor(e,r,i,a){super(),this.control=new aS,this._registered=!1,this.update=new l.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(a=>{a.constructor===QA?e=a:function(n){return Object.getPrototypeOf(n.constructor)===t_}(a)?r=a:i=a}),i||r||e||null}(0,a)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){vC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){EB.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;EB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(mo,9),l.Y36(Ts,10),l.Y36(dp,10),l.Y36(Es,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([xG]),l.qOj,l.TTD]}),n})(),DB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const $G={provide:Es,useExisting:(0,l.Gpc)(()=>lS),multi:!0};function MB(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let lS=(()=>{class n extends t_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const i=MB(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&l.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([$G]),l.qOj]}),n})(),fO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(MB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(lS,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const jG={provide:Es,useExisting:(0,l.Gpc)(()=>pO),multi:!0};function RB(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let pO=(()=>{class n extends t_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(a=>this._getOptionId(a));r=(a,d)=>{a._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const a=r.selectedOptions;for(let d=0;d<a.length;d++){const f=a.item(d),m=this._getOptionValue(f.value);i.push(m)}}else{const a=r.options;for(let d=0;d<a.length;d++){const f=a.item(d);if(f.selected){const m=this._getOptionValue(f.value);i.push(m)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&l.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[l._Bn([jG]),l.qOj]}),n})(),gO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(RB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(RB(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(pO,9))},n.\u0275dir=l.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const ZG={provide:Ts,useExisting:(0,l.Gpc)(()=>uS),multi:!0};let uS=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&l.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[l._Bn([ZG])]}),n})(),HB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[DB]]}),n})(),jB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[HB]}),n})();const a0=["*"],U4=["dialog"];function pp(n){return null!=n}function u0(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const WB={animation:!0,transitionTimerDelayMs:5};let ss=(()=>{class n{constructor(){this.animation=WB.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Q8=()=>{},{transitionTimerDelayMs:X8}=WB,TC=new Map,Gi=(n,t,e,r)=>{let i=r.context||{};const a=TC.get(t);if(a)switch(r.runningTransition){case"continue":return br.E;case"stop":n.run(()=>a.transition$.complete()),i=Object.assign(a.context,i),TC.delete(t)}const d=e(t,r.animation,i)||Q8;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>d()),(0,ht.of)(void 0).pipe(function(n){return t=>new Wt.y(e=>t.subscribe(d=>n.run(()=>e.next(d)),d=>n.run(()=>e.error(d)),()=>n.run(()=>e.complete())))}(n));const f=new In.xQ,m=new In.xQ,b=f.pipe(function(...n){return t=>ks(t,(0,ht.of)(...n))}(!0));TC.set(t,{transition$:f,complete:()=>{m.next(),m.complete()},context:i});const T=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const A=Cs(t,"transitionend").pipe(zr(b),Zn(({target:O})=>O===t));(function(...n){if(1===n.length){if(!(0,cs.k)(n[0]))return n[0];n=n[0]}return(0,Ro.n)(n,void 0).lift(new Gj)})(function(n=0,t,e){let r=-1;return(0,zh.k)(t)?r=Number(t)<1?1:Number(t):(0,xo.K)(t)&&(e=t),(0,xo.K)(e)||(e=Xu.P),new Wt.y(i=>{const a=(0,zh.k)(n)?n:+n-e.now();return e.schedule(jj,a,{index:0,period:r,subscriber:i})})}(T+X8).pipe(zr(b)),A,m).pipe(zr(b)).subscribe(()=>{TC.delete(t),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var fn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(fn||(fn={})),fn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const uU=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function cU(n){const t=Array.from(n.querySelectorAll(uU)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const a=this.offsetParent(t);r=this.offset(t,!1),a!==document.documentElement&&(i=this.offset(a,!1)),i.top+=a.clientTop,i.left+=a.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let a={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(a.height=Math.round(a.height),a.width=Math.round(a.width),a.top=Math.round(a.top),a.bottom=Math.round(a.bottom),a.left=Math.round(a.left),a.right=Math.round(a.right)),a}positionElements(t,e,r,i){const[a="top",d="center"]=r.split("-"),f=i?this.offset(t,!1):this.position(t,!1),m=this.getAllStyles(e),b=parseFloat(m.marginTop),T=parseFloat(m.marginBottom),A=parseFloat(m.marginLeft),M=parseFloat(m.marginRight);let O=0,q=0;switch(a){case"top":O=f.top-(e.offsetHeight+b+T);break;case"bottom":O=f.top+f.height;break;case"left":q=f.left-(e.offsetWidth+A+M);break;case"right":q=f.left+f.width}switch(d){case"top":O=f.top;break;case"bottom":O=f.top+f.height-e.offsetHeight;break;case"left":q=f.left;break;case"right":q=f.left+f.width-e.offsetWidth;break;case"center":"top"===a||"bottom"===a?q=f.left+f.width/2-e.offsetWidth/2:O=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(q)}px, ${Math.round(O)}px)`;const oe=e.getBoundingClientRect(),_e=document.documentElement,qe=window.innerHeight||_e.clientHeight,Ye=window.innerWidth||_e.clientWidth;return oe.left>=0&&oe.top>=0&&oe.right<=Ye&&oe.bottom<=qe}},new Date(1882,10,12),new Date(2174,10,25);let SO=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(ss))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(ss))},token:n,providedIn:"root"}),n})();class o_{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const K5=()=>{};let DU=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):K5}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,a=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${a+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(J))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(J))},token:n,providedIn:"root"}),n})(),J5=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(Pi(1)).subscribe(()=>{Gi(this._zone,this._el.nativeElement,(e,r)=>{r&&u0(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Gi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(l.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),l.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class IU{close(t){}dismiss(t){}}class Q5{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new In.xQ,this._dismissed=new In.xQ,this._hidden=new In.xQ,t.instance.dismissEvent.subscribe(a=>{this.dismiss(a)}),this.result=new Promise((a,d)=>{this._resolve=a,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(zr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(zr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ht.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),KA(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var xC=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(xC||(xC={})),xC))();let X5=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new In.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.vpe,this.shown=new In.xQ,this.hidden=new In.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Pi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=KA(Gi(this._zone,e,()=>e.classList.remove("show"),r),Gi(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};KA(Gi(this._zone,this._elRef.nativeElement,(a,d)=>{d&&u0(a),a.classList.add("show")},e),Gi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Cs(e,"keydown").pipe(zr(this._closed$),Zn(i=>i.which===fn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(xC.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Cs(this._dialogEl.nativeElement,"mousedown").pipe(zr(this._closed$),(0,lr.b)(()=>r=!1),ar(()=>Cs(e,"mouseup").pipe(zr(this._closed$),Pi(1))),Zn(({target:i})=>e===i)).subscribe(()=>{r=!0}),Cs(e,"click").pipe(zr(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(xC.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=cU(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Gi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(J),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&l.Gf(U4,7),2&e){let i;l.iGM(i=l.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(l.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),l.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),l.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:a0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(l.F$t(),l.TgZ(0,"div",0,1),l.TgZ(2,"div",2),l.Hsn(3),l.qZA(),l.qZA()),2&e&&l.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),AU=(()=>{class n{constructor(e,r,i,a,d,f){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=a,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new In.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new l.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=Cs(t,"focusin").pipe(zr(e),(0,ct.U)(a=>a.target));Cs(t,"keydown").pipe(zr(e),Zn(a=>a.which===fn.Tab),Z0(i)).subscribe(([a,d])=>{const[f,m]=cU(t);(d===f||d===t)&&a.shiftKey&&(m.focus(),a.preventDefault()),d===m&&!a.shiftKey&&(f.focus(),a.preventDefault())}),r&&Cs(t,"click").pipe(zr(e),Z0(i),(0,ct.U)(a=>a[1])).subscribe(a=>a.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}open(e,r,i,a){const d=a.container instanceof HTMLElement?a.container:pp(a.container)?this._document.querySelector(a.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),m=this._scrollBar.compensate(),b=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${a.container||"body"}" was not found in the DOM.`);const T=new IU,A=this._getContentRef(e,a.injector||r,i,T,a);let M=!1!==a.backdrop?this._attachBackdrop(e,d):void 0,O=this._attachWindowComponent(e,d,A),q=new Q5(O,A,M,a.beforeDismiss);return this._registerModalRef(q),this._registerWindowCmpt(O),q.result.then(m,m),q.result.then(b,b),T.close=oe=>{q.close(oe)},T.dismiss=oe=>{q.dismiss(oe)},this._applyWindowOptions(O.instance,a),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),M&&M.instance&&(this._applyBackdropOptions(M.instance,a),M.changeDetectorRef.detectChanges()),O.changeDetectorRef.detectChanges(),q}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let a=e.resolveComponentFactory(J5).create(this._injector);return this._applicationRef.attachView(a.hostView),r.appendChild(a.location.nativeElement),a}_attachWindowComponent(e,r,i){let d=e.resolveComponentFactory(X5).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{pp(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{pp(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,a,d){return i?i instanceof l.Rgc?this._createFromTemplateRef(i,a):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,a,d):new o_([])}_createFromTemplateRef(e,r){const a=e.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(a),new o_([a.rootNodes],a)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new o_([[r]])}_createFromComponent(e,r,i,a,d){const f=e.resolveComponentFactory(i),m=l.zs3.create({providers:[{provide:IU,useValue:a}],parent:r}),b=f.create(m),T=b.location.nativeElement;return d.scrollable&&T.classList.add("component-host-scrollable"),this._applicationRef.attachView(b.hostView),new o_([[T]],b.hostView,b)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l.z2F),l.LFG(l.zs3),l.LFG(J),l.LFG(DU),l.LFG(l.FYo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(l.z2F),l.LFG(l.gxx),l.LFG(J),l.LFG(DU),l.LFG(l.FYo),l.LFG(l.R0b))},token:n,providedIn:"root"}),n})(),SU=(()=>{class n{constructor(e,r,i,a){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=a}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(l._Vd),l.LFG(l.zs3),l.LFG(AU),l.LFG(SO))},n.\u0275prov=l.Yz7({factory:function(){return new n(l.LFG(l._Vd),l.LFG(l.gxx),l.LFG(AU),l.LFG(SO))},token:n,providedIn:"root"}),n})();new l.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});class n3{}class r3{}class oh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),a=i.toLowerCase(),d=e.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(d):this.headers.set(a,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof oh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new oh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof oh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const a=t.value;if(a){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===a.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Lq{encodeKey(t){return i3(t)}encodeValue(t){return i3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Bq=/%(\d[a-f0-9])/gi,Uq={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function i3(n){return encodeURIComponent(n).replace(Bq,(t,e)=>{var r;return null!==(r=Uq[e])&&void 0!==r?r:t})}function s3(n){return`${n}`}class mp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Lq,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[d,f]=-1==a?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,a)),t.decodeValue(i.slice(a+1))],m=e.get(d)||[];m.push(f),e.set(d,m)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(a=>{e.push({param:r,value:a,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new mp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(s3(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(s3(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class $q{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function o3(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function a3(n){return"undefined"!=typeof Blob&&n instanceof Blob}function l3(n){return"undefined"!=typeof FormData&&n instanceof FormData}class MC{constructor(t,e,r,i){let a;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new oh),this.context||(this.context=new $q),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new mp,this.urlWithParams=e}serializeBody(){return null===this.body?null:o3(this.body)||a3(this.body)||l3(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof mp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||l3(this.body)?null:a3(this.body)?this.body.type||null:o3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof mp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,a=t.responseType||this.responseType,d=void 0!==t.body?t.body:this.body,f=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,m=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let b=t.headers||this.headers,T=t.params||this.params;const A=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(b=Object.keys(t.setHeaders).reduce((M,O)=>M.set(O,t.setHeaders[O]),b)),t.setParams&&(T=Object.keys(t.setParams).reduce((M,O)=>M.set(O,t.setParams[O]),T)),new MC(r,i,d,{params:T,headers:b,context:A,reportProgress:m,responseType:a,withCredentials:f})}}var Mi=(()=>((Mi=Mi||{})[Mi.Sent=0]="Sent",Mi[Mi.UploadProgress=1]="UploadProgress",Mi[Mi.ResponseHeader=2]="ResponseHeader",Mi[Mi.DownloadProgress=3]="DownloadProgress",Mi[Mi.Response=4]="Response",Mi[Mi.User=5]="User",Mi))();class kO{constructor(t,e=200,r="OK"){this.headers=t.headers||new oh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class PO extends kO{constructor(t={}){super(t),this.type=Mi.ResponseHeader}clone(t={}){return new PO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class CS extends kO{constructor(t={}){super(t),this.type=Mi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new CS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class u3 extends kO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function OO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let c3=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let a;if(e instanceof MC)a=e;else{let m,b;m=i.headers instanceof oh?i.headers:new oh(i.headers),i.params&&(b=i.params instanceof mp?i.params:new mp({fromObject:i.params})),a=new MC(e,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=(0,ht.of)(a).pipe(jl(m=>this.handler.handle(m)));if(e instanceof MC||"events"===i.observe)return d;const f=d.pipe(Zn(m=>m instanceof CS));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,ct.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,ct.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,ct.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));case"json":default:return f.pipe((0,ct.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new mp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,OO(i,r))}post(e,r,i={}){return this.request("POST",e,OO(i,r))}put(e,r,i={}){return this.request("PUT",e,OO(i,r))}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(n3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class d3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const h3=new l.OlP("HTTP_INTERCEPTORS");let Gq=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qq=/^\)\]\}',?\n/;let f3=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Wt.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((O,q)=>i.setRequestHeader(O,q.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const O=e.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(e.responseType){const O=e.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const a=e.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const O=1223===i.status?204:i.status,q=i.statusText||"OK",oe=new oh(i.getAllResponseHeaders()),_e=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return d=new PO({headers:oe,status:O,statusText:q,url:_e}),d},m=()=>{let{headers:O,status:q,statusText:oe,url:_e}=f(),qe=null;204!==q&&(qe=void 0===i.response?i.responseText:i.response),0===q&&(q=qe?200:0);let Ye=q>=200&&q<300;if("json"===e.responseType&&"string"==typeof qe){const it=qe;qe=qe.replace(qq,"");try{qe=""!==qe?JSON.parse(qe):null}catch(ot){qe=it,Ye&&(Ye=!1,qe={error:ot,text:qe})}}Ye?(r.next(new CS({body:qe,headers:O,status:q,statusText:oe,url:_e||void 0})),r.complete()):r.error(new u3({error:qe,headers:O,status:q,statusText:oe,url:_e||void 0}))},b=O=>{const{url:q}=f(),oe=new u3({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:q||void 0});r.error(oe)};let T=!1;const A=O=>{T||(r.next(f()),T=!0);let q={type:Mi.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(q.total=O.total),"text"===e.responseType&&!!i.responseText&&(q.partialText=i.responseText),r.next(q)},M=O=>{let q={type:Mi.UploadProgress,loaded:O.loaded};O.lengthComputable&&(q.total=O.total),r.next(q)};return i.addEventListener("load",m),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),e.reportProgress&&(i.addEventListener("progress",A),null!==a&&i.upload&&i.upload.addEventListener("progress",M)),i.send(a),r.next({type:Mi.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",m),i.removeEventListener("timeout",b),e.reportProgress&&(i.removeEventListener("progress",A),null!==a&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Tn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const FO=new l.OlP("XSRF_COOKIE_NAME"),LO=new l.OlP("XSRF_HEADER_NAME");class p3{}let Zq=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=vo(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(J),l.LFG(l.Lbi),l.LFG(FO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),VO=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const a=this.tokenService.getToken();return null!==a&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,a)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(p3),l.LFG(LO))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),zq=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(h3,[]);this.chain=r.reduceRight((i,a)=>new d3(i,a),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(r3),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Yq=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:VO,useClass:Gq}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:FO,useValue:e.cookieName}:[],e.headerName?{provide:LO,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[VO,{provide:h3,useExisting:VO,multi:!0},{provide:p3,useClass:Zq},{provide:FO,useValue:"XSRF-TOKEN"},{provide:LO,useValue:"X-XSRF-TOKEN"}]}),n})(),Kq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[c3,{provide:n3,useClass:zq},f3,{provide:r3,useExisting:f3}],imports:[[Yq.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const Jq=["modalLogin"],Qq=["modalConfiguracaoRobo"],Xq=["modalBinanceApiKey"],eW=["modalAlertaEntrada"];function tW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",13),l.TgZ(1,"button",14),l.NdJ("click",function(){return l.CHM(e),l.oxw().novoSinal()}),l._uU(2,"Novo sinal"),l.qZA(),l.qZA()}}function nW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"button",15),l.NdJ("click",function(){return l.CHM(e),l.oxw().openModalConfiguracaoRobo()}),l._UZ(2,"i",16),l.qZA(),l.TgZ(3,"button",17),l.NdJ("click",function(){return l.CHM(e),l.oxw().AuthService.SignOut()}),l._UZ(4,"i",18),l.qZA(),l.qZA()}}function rW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",30),l.TgZ(1,"div",31),l.TgZ(2,"input",32),l.NdJ("ngModelChange",function(i){return l.CHM(e).$implicit.valor=i}),l.qZA(),l.qZA(),l.TgZ(3,"div",31),l.TgZ(4,"input",33),l.NdJ("ngModelChange",function(i){return l.CHM(e).$implicit.descricao=i}),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit;l.xp6(2),l.Q6J("ngModel",e.valor),l.xp6(2),l.Q6J("ngModel",e.descricao)}}function iW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",19),l.TgZ(1,"div",20),l.TgZ(2,"label",21),l._uU(3,"Data"),l.qZA(),l.TgZ(4,"input",22),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().sinalModel.data=i}),l.qZA(),l.qZA(),l.TgZ(5,"div",20),l.TgZ(6,"label",21),l._uU(7,"Moeda"),l.qZA(),l.TgZ(8,"input",23),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().sinalModel.moeda=i}),l.qZA(),l.qZA(),l.TgZ(9,"div",20),l.TgZ(10,"label",21),l._uU(11,"Tipo"),l.qZA(),l.TgZ(12,"select",24),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().sinalModel.tipo=i}),l.TgZ(13,"option",25),l._uU(14,"LONG"),l.qZA(),l.TgZ(15,"option",26),l._uU(16,"SHORT"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"div",20),l.TgZ(18,"label",21),l._uU(19,"Entradas"),l.qZA(),l.YNc(20,rW,5,2,"div",27),l.qZA(),l.TgZ(21,"div",20),l.TgZ(22,"button",28),l.NdJ("click",function(){return l.CHM(e),l.oxw().salvarEntrada()}),l._uU(23,"Salvar"),l.qZA(),l.TgZ(24,"button",29),l.NdJ("click",function(){return l.CHM(e),l.oxw().showFormNovoSinal=!1}),l._uU(25,"Cancelar"),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(4),l.Q6J("ngModel",e.sinalModel.data),l.xp6(4),l.Q6J("ngModel",e.sinalModel.moeda),l.xp6(4),l.Q6J("ngModel",e.sinalModel.tipo),l.xp6(8),l.Q6J("ngForOf",e.sinalModel.entradas)}}function sW(n,t){1&n&&l._UZ(0,"i",52)}function oW(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function aW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",53),l.TgZ(1,"span",54),l.NdJ("click",function(){l.CHM(e);const i=l.oxw().$implicit;return l.oxw(2).copyEntry(i.sugestao)}),l._uU(2),l.qZA(),l._UZ(3,"br"),l.qZA()}if(2&n){const e=l.oxw().$implicit;l.xp6(2),l.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function lW(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function uW(n,t){if(1&n&&(l.TgZ(0,"div",57),l._UZ(1,"i",58),l.TgZ(2,"small"),l._uU(3),l.YNc(4,lW,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function cW(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function dW(n,t){if(1&n&&(l.TgZ(0,"div",57),l._UZ(1,"i",58),l.TgZ(2,"small"),l._uU(3),l.qZA(),l.YNc(4,cW,2,1,"ng-container",3),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.Oqu(null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function hW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"li"),l.YNc(1,uW,5,2,"div",55),l.TgZ(2,"div"),l.TgZ(3,"i",56),l.NdJ("click",function(){const a=l.CHM(e).$implicit,d=l.oxw().$implicit;return l.oxw(2).toggleAlcancado(d,a)}),l.qZA(),l.TgZ(4,"span",54),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).copyEntry(a.valor)}),l._uU(5),l.qZA(),l.qZA(),l.YNc(6,dW,5,2,"div",55),l._UZ(7,"div"),l.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=l.oxw().$implicit,a=l.oxw(2);l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),l.xp6(2),l.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),l.xp6(2),l.AsE(" ",e.valor," - ",e.descricao," "),l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(e.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(e.valor)))}}function fW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",38),l.TgZ(1,"div",39),l.TgZ(2,"span",40),l.TgZ(3,"i",41),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).togglePinWatcher(a)}),l.qZA(),l.qZA(),l.TgZ(4,"h5",42),l.YNc(5,sW,1,0,"i",43),l.TgZ(6,"i",44),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).toggleSinalBloqueado(a)}),l.qZA(),l.TgZ(7,"strong"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"h5"),l.YNc(10,oW,2,1,"span",3),l.qZA(),l.TgZ(11,"h6",45),l._uU(12),l.ALo(13,"date"),l.qZA(),l.YNc(14,aW,4,1,"div",46),l.TgZ(15,"div"),l.TgZ(16,"ul",47),l.YNc(17,hW,8,5,"li",48),l.qZA(),l.qZA(),l.TgZ(18,"div"),l.TgZ(19,"span",40),l.TgZ(20,"button",49),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).editarSinal(a,d)}),l._UZ(21,"i",50),l.qZA(),l.TgZ(22,"button",17),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).excluirSinal(a,d)}),l._UZ(23,"i",51),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit,r=l.oxw(2);l.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),l.xp6(3),l.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),l.xp6(2),l.Q6J("ngIf",r.sinaisCompradosMap[e.id]),l.xp6(1),l.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),l.xp6(2),l.Oqu(e.moeda),l.xp6(2),l.Q6J("ngIf",r.PriceCoinMap[e.moeda]),l.xp6(1),l.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),l.xp6(1),l.AsE(" ",e.tipo," - ",l.xi3(13,11,e.data,"dd/MM/yyyy")," "),l.xp6(2),l.Q6J("ngIf",e.sugestao),l.xp6(3),l.Q6J("ngForOf",e.entradas)}}function pW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"h3",34),l._uU(2),l.TgZ(3,"button",35),l.NdJ("click",function(){return l.CHM(e),l.MAs(5).classList.toggle("hidden")}),l.qZA(),l.qZA(),l.TgZ(4,"div",30,36),l.YNc(6,fW,24,14,"div",37),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(2),l.hij("Favoritados (",e.sinaisPinnedList.length,") "),l.xp6(4),l.Q6J("ngForOf",e.sinaisPinnedList)}}function gW(n,t){1&n&&l._UZ(0,"i",52)}function mW(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function _W(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",53),l.TgZ(1,"span",54),l.NdJ("click",function(){l.CHM(e);const i=l.oxw().$implicit;return l.oxw(2).copyEntry(i.sugestao)}),l._uU(2),l.qZA(),l._UZ(3,"br"),l.qZA()}if(2&n){const e=l.oxw().$implicit;l.xp6(2),l.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function yW(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function vW(n,t){if(1&n&&(l.TgZ(0,"div",57),l._UZ(1,"i",58),l.TgZ(2,"small"),l._uU(3),l.YNc(4,yW,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij(" ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function bW(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function wW(n,t){if(1&n&&(l.TgZ(0,"div",57),l._UZ(1,"i",58),l.TgZ(2,"small"),l._uU(3),l.YNc(4,bW,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function CW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"li"),l.YNc(1,vW,5,2,"div",55),l.TgZ(2,"div"),l.TgZ(3,"i",56),l.NdJ("click",function(){const a=l.CHM(e).$implicit,d=l.oxw().$implicit;return l.oxw(2).toggleAlcancado(d,a)}),l.qZA(),l.TgZ(4,"span",54),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).copyEntry(a.valor)}),l._uU(5),l.qZA(),l.qZA(),l.YNc(6,wW,5,2,"div",55),l._UZ(7,"div"),l.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=l.oxw().$implicit,a=l.oxw(2);l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),l.xp6(2),l.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),l.xp6(2),l.AsE(" ",e.valor," - ",e.descricao," "),l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(e.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(e.valor)))}}function EW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",61),l.TgZ(1,"div",39),l.TgZ(2,"span",40),l.TgZ(3,"i",41),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).togglePinWatcher(a)}),l.qZA(),l.qZA(),l.TgZ(4,"h5",42),l.YNc(5,gW,1,0,"i",43),l.TgZ(6,"i",44),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).toggleSinalBloqueado(a)}),l.qZA(),l.TgZ(7,"strong"),l._uU(8),l.qZA(),l.qZA(),l.TgZ(9,"h5"),l.YNc(10,mW,2,1,"span",3),l.qZA(),l.TgZ(11,"h6",45),l._uU(12),l.ALo(13,"date"),l.qZA(),l.YNc(14,_W,4,1,"div",46),l.TgZ(15,"div"),l.TgZ(16,"ul",47),l.YNc(17,CW,8,5,"li",48),l.qZA(),l.qZA(),l.TgZ(18,"div"),l.TgZ(19,"span",40),l.TgZ(20,"button",49),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).editarSinal(a,d)}),l._UZ(21,"i",50),l.qZA(),l.TgZ(22,"button",17),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).excluirSinal(a,d)}),l._UZ(23,"i",51),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit,r=l.oxw(2);l.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short")("id",e.id),l.xp6(3),l.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),l.xp6(2),l.Q6J("ngIf",r.sinaisCompradosMap[e.id]),l.xp6(1),l.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),l.xp6(2),l.Oqu(e.moeda),l.xp6(2),l.Q6J("ngIf",r.PriceCoinMap[e.moeda]),l.xp6(1),l.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),l.xp6(1),l.AsE(" ",e.tipo," - ",l.xi3(13,12,e.data,"dd/MM/yyyy")," "),l.xp6(2),l.Q6J("ngIf",e.sugestao),l.xp6(3),l.Q6J("ngForOf",e.entradas)}}function TW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"h3",34),l._uU(2),l.TgZ(3,"button",35),l.NdJ("click",function(){return l.CHM(e),l.MAs(5).classList.toggle("hidden")}),l.qZA(),l.qZA(),l.TgZ(4,"div",30,59),l.YNc(6,EW,24,15,"div",60),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(2),l.hij("Sinais na entrada (",e.watchersEntradaList.length,") "),l.xp6(4),l.Q6J("ngForOf",e.watchersEntradaList)}}function DW(n,t){if(1&n&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&n){const e=l.oxw().$implicit,r=l.oxw(2);l.xp6(1),l.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function IW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",53),l.TgZ(1,"span",54),l.NdJ("click",function(){l.CHM(e);const i=l.oxw().$implicit;return l.oxw(2).copyEntry(i.sugestao)}),l._uU(2),l.qZA(),l._UZ(3,"br"),l.qZA()}if(2&n){const e=l.oxw().$implicit;l.xp6(2),l.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function AW(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function SW(n,t){if(1&n&&(l.TgZ(0,"div",57),l._UZ(1,"i",58),l.TgZ(2,"small"),l._uU(3),l.YNc(4,AW,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function NW(n,t){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const e=l.oxw(3).$implicit;l.xp6(1),l.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function xW(n,t){if(1&n&&(l.TgZ(0,"div",57),l._UZ(1,"i",58),l.TgZ(2,"small"),l._uU(3),l.YNc(4,NW,2,1,"ng-container",3),l.qZA(),l.qZA()),2&n){const e=l.oxw(2).$implicit,r=l.oxw(2);l.xp6(3),l.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),l.xp6(1),l.Q6J("ngIf",e.priceCoinPercentage)}}function MW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"li"),l.YNc(1,SW,5,2,"div",55),l.TgZ(2,"div"),l.TgZ(3,"i",56),l.NdJ("click",function(){const a=l.CHM(e).$implicit,d=l.oxw().$implicit;return l.oxw(2).toggleAlcancado(d,a)}),l.qZA(),l.TgZ(4,"span",54),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(3).copyEntry(a.valor)}),l._uU(5),l.qZA(),l.qZA(),l.YNc(6,xW,5,2,"div",55),l._UZ(7,"div"),l.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=l.oxw().$implicit,a=l.oxw(2);l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),l.xp6(2),l.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),l.xp6(2),l.AsE(" ",e.valor," - ",e.descricao," "),l.xp6(1),l.Q6J("ngIf",a.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)>a.castPrice(e.valor)||"SHORT"===i.tipo&&a.castPrice(null==a.PriceCoinMap[i.moeda]?null:a.PriceCoinMap[i.moeda].price)<a.castPrice(e.valor)))}}function RW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",38),l.TgZ(1,"div",39),l.TgZ(2,"span",40),l.TgZ(3,"i",41),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).togglePinWatcher(a)}),l.qZA(),l.qZA(),l.TgZ(4,"i",44),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw(2).toggleSinalBloqueado(a)}),l.qZA(),l.TgZ(5,"h5",42),l.TgZ(6,"strong"),l._uU(7),l.qZA(),l.qZA(),l.TgZ(8,"h5"),l.YNc(9,DW,2,1,"span",3),l.qZA(),l.TgZ(10,"h6",45),l._uU(11),l.ALo(12,"date"),l.qZA(),l.YNc(13,IW,4,1,"div",46),l.TgZ(14,"div"),l.TgZ(15,"ul",47),l.YNc(16,MW,8,5,"li",48),l.qZA(),l.qZA(),l.TgZ(17,"div"),l.TgZ(18,"span",40),l.TgZ(19,"button",49),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).editarSinal(a,d)}),l._UZ(20,"i",50),l.qZA(),l.TgZ(21,"button",17),l.NdJ("click",function(){const i=l.CHM(e),a=i.$implicit,d=i.index;return l.oxw(2).excluirSinal(a,d)}),l._UZ(22,"i",51),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit,r=l.oxw(2);l.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),l.xp6(3),l.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),l.xp6(1),l.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),l.xp6(3),l.Oqu(e.moeda),l.xp6(2),l.Q6J("ngIf",r.PriceCoinMap[e.moeda]),l.xp6(1),l.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),l.xp6(1),l.AsE(" ",e.tipo," - ",l.xi3(12,10,e.data,"dd/MM/yyyy")," "),l.xp6(2),l.Q6J("ngIf",e.sugestao),l.xp6(3),l.Q6J("ngForOf",e.entradas)}}function kW(n,t){if(1&n&&(l.TgZ(0,"div",62),l.TgZ(1,"h3",34),l._uU(2,"Lista de Sinais"),l.qZA(),l.TgZ(3,"div",30),l.YNc(4,RW,23,13,"div",37),l.qZA(),l.qZA()),2&n){const e=l.oxw();l.xp6(4),l.Q6J("ngForOf",e.sinaisList)}}function PW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",63),l.TgZ(1,"h4",64),l._uU(2,"Sign In"),l.qZA(),l.qZA(),l.TgZ(3,"div",65),l.TgZ(4,"div",5),l.TgZ(5,"div",5),l.TgZ(6,"div",5,66),l.TgZ(8,"div",67),l._UZ(9,"input",68,69),l.qZA(),l.TgZ(11,"div",67),l.TgZ(12,"label"),l._uU(13,"Password"),l.qZA(),l.TgZ(14,"div",70),l.TgZ(15,"input",71,72),l.NdJ("keydown",function(i){const d=l.CHM(e).$implicit,f=l.MAs(10),m=l.MAs(16);return l.oxw().submitSeach(i,f.value,m.value,d)}),l.qZA(),l.TgZ(17,"div",73),l.TgZ(18,"span",74),l.NdJ("click",function(){l.CHM(e);const i=l.oxw();return i.showPassword=!i.showPassword}),l._UZ(19,"i",75),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"div",67),l.TgZ(21,"button",76),l.NdJ("click",function(){const a=l.CHM(e).$implicit,d=l.MAs(10),f=l.MAs(16);return l.oxw().sigin(d.value,f.value,a)}),l._uU(22,"Login"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(15),l.Q6J("type",e.showPassword?"text":"password"),l.xp6(4),l.Q6J("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function OW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",63),l.TgZ(1,"h4",77),l._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),l.qZA(),l.TgZ(3,"button",78),l.NdJ("click",function(){return l.CHM(e).$implicit.dismiss("Cross click")}),l.TgZ(4,"span",79),l._uU(5,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",65),l.TgZ(7,"div",5),l.TgZ(8,"div",5),l.TgZ(9,"div",5,66),l.TgZ(11,"div",67),l.TgZ(12,"label"),l._uU(13,"Valor entrada em USDT"),l.qZA(),l.TgZ(14,"input",80),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().configuracaoRobo.valorEntradaUsdt=i}),l.qZA(),l.qZA(),l.TgZ(15,"div",67),l.TgZ(16,"label"),l._uU(17,"M\xe1ximo de rob\xf4s ativos"),l.qZA(),l.TgZ(18,"input",81),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().configuracaoRobo.maximoRobosAtivos=i}),l.qZA(),l.qZA(),l.TgZ(19,"div",82),l.TgZ(20,"input",83),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().configuracaoRobo.ativo=i}),l.qZA(),l.TgZ(21,"label",84),l._uU(22," Ativo "),l.qZA(),l.qZA(),l.TgZ(23,"div",67),l.TgZ(24,"button",76),l.NdJ("click",function(){const a=l.CHM(e).$implicit;return l.oxw().salvarConfiguracacaoRobo(a)}),l._uU(25," salvar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(14),l.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),l.xp6(4),l.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),l.xp6(2),l.Q6J("ngModel",e.configuracaoRobo.ativo)}}function FW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",63),l.TgZ(1,"h4",77),l._uU(2,"Salvar Binace API KEY"),l.qZA(),l.TgZ(3,"button",78),l.NdJ("click",function(){return l.CHM(e).$implicit.dismiss("Cross click")}),l.TgZ(4,"span",79),l._uU(5,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",65),l.TgZ(7,"div",5),l.TgZ(8,"div",5),l.TgZ(9,"div",5,66),l.TgZ(11,"div",67),l.TgZ(12,"label"),l._uU(13,"API KEY"),l.qZA(),l.TgZ(14,"input",85),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().binanceModel.apiKey=i}),l.qZA(),l.qZA(),l.TgZ(15,"div",67),l.TgZ(16,"label"),l._uU(17,"API SECRET"),l.qZA(),l.TgZ(18,"input",85),l.NdJ("ngModelChange",function(i){return l.CHM(e),l.oxw().binanceModel.apiSecret=i}),l.qZA(),l.qZA(),l.TgZ(19,"div",67),l.TgZ(20,"button",76),l.NdJ("click",function(){return l.CHM(e).$implicit.close(!0)}),l._uU(21," salvar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(14),l.Q6J("ngModel",e.binanceModel.apiKey),l.xp6(4),l.Q6J("ngModel",e.binanceModel.apiSecret)}}function LW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"tr"),l.TgZ(1,"td"),l.TgZ(2,"strong"),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"td"),l.TgZ(5,"span",89),l.TgZ(6,"strong"),l._uU(7),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"td"),l.TgZ(9,"button",90),l._uU(10," Comprar "),l.qZA(),l.TgZ(11,"button",91),l.NdJ("click",function(){const a=l.CHM(e).index;return l.oxw(2).removerAlerta(a)}),l._uU(12," excluir "),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=t.$implicit;l.xp6(3),l.Oqu(e.sinal.moeda),l.xp6(2),l.Q6J("ngClass","LONG"===e.sinal.tipo?"text-success":"text-danger"),l.xp6(2),l.Oqu(e.sinal.tipo)}}function VW(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",63),l.TgZ(1,"h4",86),l._uU(2,"Alerta de entrada"),l.qZA(),l.TgZ(3,"button",78),l.NdJ("click",function(){return l.CHM(e).$implicit.dismiss("Cross click")}),l.TgZ(4,"span",79),l._uU(5,"\xd7"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",65),l.TgZ(7,"div",5),l.TgZ(8,"div",5),l.TgZ(9,"div",5,66),l.TgZ(11,"table",87),l.YNc(12,LW,13,3,"tr",88),l.qZA(),l.TgZ(13,"div",67),l.TgZ(14,"button",76),l.NdJ("click",function(){return l.CHM(e).$implicit.close(!0)}),l._uU(15," salvar"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(12),l.Q6J("ngForOf",e.alertaEntradasList)}}Ot.extend(aE);let BW=(()=>{class n{constructor(e,r,i,a,d){this.db=e,this.AuthService=r,this.modalService=i,this.config=a,this.http=d,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.sinaisList=[],this.sinaisMap={},this.coinCandleWatcherMap={},this.sinaisPinnedList=[],this.sinaisIDPinnedList=[],this.watchersEntradaList=[],this.sinaisBloqueadosList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.canSendNotification=!1,this._1second=1e3,this._5seconds=5*this._1second,this.sinaisCompradosMap={},this.editandoSinalIdx=-1,this.configuracaoRobo={id:null,valorEntradaUsdt:10,maximoRobosAtivos:10,ativo:!1,sinaisBloqueadosList:[]},this.binanceModel={apiKey:"",apiSecret:""},this.modalAberto=!1,this.alertaEntradasList=[],this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){"denied"===Notification.permission?Notification.requestPermission().then(e=>{this.canSendNotification="granted"===e}):"granted"===Notification.permission&&(this.canSendNotification=!0),setTimeout(()=>{this.AuthService.isLoggedIn?(this.startPriceWatcher(),this.loadSinaisList(),this.loadConfiguracaoRobo(),this.checkBinaceApiKey()):this.openModalLogin()},1e3)}startPriceWatcher(){const e=function(n=0,t=Xu.P){return(!(0,zh.k)(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=Xu.P),new Wt.y(e=>(e.add(t.schedule(lE,n,{subscriber:e,counter:0,period:n})),e))}(this._5seconds);this.populatePriceCoinMap(),e.subscribe(r=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let i=[];r.forEach(d=>{this.PriceCoinMap[d.symbol]={price:d.price},i.push(d.symbol)});let a=this;i.sort(),i.forEach(d=>{a.PriceCoinList.push({symbol:d,price:this.PriceCoinMap[d].price})}),this.updatePricePositionOnSinais()})}updatePricePositionOnSinais(){this.sinaisList&&this.sinaisList.length>0&&(this.sinaisList.forEach((e,r)=>{let i=0;try{i=parseFloat(this.PriceCoinMap[e.moeda].price)}catch(a){}if(i){e.priceCoin=i;let a=-1,d=0;"LONG"===e.tipo?(d=(e.entradas[e.entradas.length-1].valor-e.entradas[0].valor)/100,e.priceCoinPercentage=i>e.entradas[0].valor?((i-e.entradas[0].valor)/d).toFixed(2):0):(d=(e.entradas[0].valor-e.entradas[e.entradas.length-1].valor)/100,e.priceCoinPercentage=i<e.entradas[0].valor?(100-(i-e.entradas[e.entradas.length-1].valor)/d).toFixed(2):0);for(let f=0;f<e.entradas.length;f++){let b=parseFloat(e.entradas[f].valor);if("LONG"===e.tipo){if(0==f||f===e.entradas.length-1){if(i<=b){a=f;break}if(f===e.entradas.length-1&&i>b){a=1e3;break}continue}if(i>=parseFloat(e.entradas[f-1].valor)&&i<=b){a=f;break}}else if("SHORT"===e.tipo){if(0==f||f===e.entradas.length-1){if(i>=b){a=f;break}if(f===e.entradas.length-1&&i<b){a=1e3;break}continue}if(i<=parseFloat(e.entradas[f-1].valor)&&i>=b){a=f;break}}}this.sinaisList[r].indexPricePosition=a;try{-1===this.sinaisBloqueadosList.indexOf(e.id)&&this.coinCandleWatcherMap[e.id].loadCandleList(e)}catch(f){}}}),this.sortWatcherList(),this.sortWatcherEntradaList())}sortWatcherEntradaList(){this.watchersEntradaList=[],this.sinaisList.forEach(r=>{r.indexPricePosition>=1&&this.watchersEntradaList.push(r)}),this.watchersEntradaList.sort((r,i)=>{let a=0;return a=r.indexPricePosition>0?r.indexPricePosition-i.indexPricePosition:-1,a||r.priceCoinPercentage-i.priceCoinPercentage})}castPrice(e){return parseFloat(e)}novoSinal(){let e=Ot().format("YYYY-MM-DD");this.editandoSinalIdx=-1,this.sinalModel={data:e,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let a=Object.assign({},this.entradaModel);a.descricao=r[i],this.sinalModel.entradas.push(a)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadSinaisComprados(){this.sinaisCompradosObservable=this.db.object("/sinais-comprados/"+this.AuthService.userData.uid).valueChanges(),this.sinaisCompradosObservable.subscribe(r=>{if(r){try{for(let a in r)if(!this.sinaisCompradosMap[a]){let d=this.sinaisMap[a];new Notification("Binace watcher",{body:`Sinal comprado ${d.moeda}::${d.tipo}`,icon:"/assets/bot.png"})}}catch(a){}this.sinaisCompradosMap=r}else this.sinaisCompradosMap={}})}loadSinaisList(){this.sinaisFirebaseObservable=this.db.list("/sinais").valueChanges(),this.sinaisFirebaseObservable.subscribe(e=>{this.sinaisList=e,this.sinaisList&&this.sinaisList.length>0&&this.sinaisList.forEach(r=>{if(this.sinaisMap[r.id]=r,this.coinCandleWatcherMap[r.id]=new dE(this.http,this),r.entradas&&r.entradas.length>0){let i=parseFloat(r.entradas[0].valor),a=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?i+(a-i)/4:i-(i-a)/4,r.sugestao){let d=r.entradas[r.entradas.length-1].valor,f=d.indexOf(".")-1,m=d.substr(f).length;r.sugestao=r.sugestao.toFixed(m)}}}),this.loadSinaisFavoritos(),this.updatePricePositionOnSinais()})}sortWatcherList(){this.sinaisList.sort((e,r)=>{let i=Ot(e.data).toDate().getTime(),a=Ot(r.data).toDate().getTime(),d=-10;i==a?d=0:i>a?d=-1:i<a&&(d=1);let f=e.moeda.localeCompare(r.moeda);return d||f})}salvarEntrada(){let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase().trim(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!this.PriceCoinMap[e.moeda])return void alert("Moeda inv\xe1lida");if(!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}updateEntrada(e){this.db.object("/sinais/"+e.id).set(e).then(()=>{})}editarSinal(e,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(e,r){var i=this;return(0,ve.Z)(function*(){if(window.confirm("Realmente deseja excluir o sinal?")){try{i.coinCandleWatcherMap[e.id].stop(),delete i.coinCandleWatcherMap[e.id]}catch(a){}yield i.db.object("/sinais/"+e.id).remove()}})()}playAlert(){}toggleAlcancado(e,r){r.alcancado=!r.alcancado||!r.alcancado,this.updateEntrada(e)}togglePinWatcher(e){var r=this;return(0,ve.Z)(function*(){let i=r.sinaisIDPinnedList.indexOf(e.id);if(i>-1){r.sinaisIDPinnedList.splice(i,1);for(let d=0;d<r.sinaisPinnedList.length;d++)if(r.sinaisPinnedList[d].id===e.id){r.sinaisPinnedList.splice(d,1);break}}else r.sinaisIDPinnedList.push(e.id),r.sinaisPinnedList.push(e);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.sinaisIDPinnedList).then(()=>{}).catch(d=>{console.error(d)})})()}loadSinaisFavoritos(){this.sinaisPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.sinaisIDPinnedList=r,this.sinaisIDPinnedList.forEach(i=>{this.sinaisList.forEach(a=>{a.id===i&&this.sinaisPinnedList.push(a)})}))})}toggleSinalBloqueado(e){var r=this;return(0,ve.Z)(function*(){r.configuracaoRobo.sinaisBloqueadosList||(r.configuracaoRobo.sinaisBloqueadosList=[]);let i=r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id);i>-1?r.configuracaoRobo.sinaisBloqueadosList.splice(i,1):r.configuracaoRobo.sinaisBloqueadosList.push(e.id),yield r.salvarConfiguracacaoRobo()})()}copyEntry(e){this.canCopyClipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Entrada ${e} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(e=>{},e=>{})}sigin(e,r,i){this.AuthService.SignIn(e.trim(),r).then(()=>{this.startPriceWatcher(),this.loadSinaisList(),this.checkBinaceApiKey(),i&&i.close()}).catch(a=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(e,r,i,a){13==e.keyCode&&this.sigin(r,i,a)}signOut(){this.AuthService.SignOut()}submitForm(e,r){13==r.keyCode&&e.submit()}loadConfiguracaoRobo(){var e;this.sinaisPinnedList=[],this.configuracaoRoboObservable=this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).valueChanges(),null===(e=this.configuracaoRoboObservable)||void 0===e||e.subscribe(r=>{r&&(this.configuracaoRobo=r,this.configuracaoRobo.sinaisBloqueadosList?this.sinaisBloqueadosList=this.configuracaoRobo.sinaisBloqueadosList:(this.configuracaoRobo.sinaisBloqueadosList=[],this.configuracaoRobo.sinaisBloqueadosList=[]))})}openModalConfiguracaoRobo(){this.modalService.open(this.modalConfiguracaoRobo,{centered:!0}).result.then(e=>{},e=>{})}salvarConfiguracacaoRobo(e){var r=this;return(0,ve.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}checkBinaceApiKey(){let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret");!e&&!r&&this.openModalBinanceApiKey()}openModalBinanceApiKey(){this.modalService.open(this.modalBinanceApiKey,{centered:!0}).result.then(e=>{e&&this.binanceModel.apiKey&&this.binanceModel.apiSecret&&(window.localStorage.setItem("apiKey",this.binanceModel.apiKey.trim()),window.localStorage.setItem("apiSecret",this.binanceModel.apiSecret.trim()),window.toastr.success("Chaves salvas!","Sucesso!"))},e=>{})}removerAlerta(e){this.alertaEntradasList.splice(e,1)}acionarAlerta(e){0===this.alertaEntradasList.filter(i=>i.id==e.id).length&&this.alertaEntradasList.splice(0,0,e),this.modalAberto||this.openModalAlertaEntrada()}openModalAlertaEntrada(){this.config.backdrop="static",this.config.keyboard=!1,this.modalAberto=!0,this.modalService.open(this.modalAlertaEntrada,{centered:!0}).result.then(e=>{this.modalAberto=!1},e=>{})}}return n.\u0275fac=function(e){return new(e||n)(l.Y36(kM),l.Y36(Vj),l.Y36(SU),l.Y36(SO),l.Y36(c3))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(1&e&&(l.Gf(Jq,5),l.Gf(Qq,5),l.Gf(Xq,5),l.Gf(eW,5)),2&e){let i;l.iGM(i=l.CRH())&&(r.modalLogin=i.first),l.iGM(i=l.CRH())&&(r.modalConfiguracaoRobo=i.first),l.iGM(i=l.CRH())&&(r.modalBinanceApiKey=i.first),l.iGM(i=l.CRH())&&(r.modalAlertaEntrada=i.first)}},decls:19,vars:6,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,""],["class","col-md-8 col-lg-6",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["modalLogin",""],["modalConfiguracaoRobo",""],["modalBinanceApiKey",""],["modalAlertaEntrada",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-white",3,"click"],[1,"fa","fa-cogs","fa-2x"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-8","col-lg-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-white"],[1,"btn","bt-sm","btn-outline-secondary","fa","fa-chevron-up",3,"click"],["divPinnedList",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"float-right"],[1,"fa","clickable",3,"ngClass","click"],[1,"card-title"],["class","mr-2 fa fa-android text-success",4,"ngIf"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass","click"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],[1,"mr-2","fa","fa-android","text-success"],[1,"alert","alert-primary"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["divWatchersEntrada",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass","id",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass","id"],[1,"container","mt-4"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],[1,"fa",3,"ngClass"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"],["type","text","placeholder","","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","",1,"modal-title"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn","btn-button","btn-sm","btn-success"],[1,"btn","btn-button","btn-sm","btn-danger",3,"click"]],template:function(e,r){1&e&&(l.TgZ(0,"nav",0),l.TgZ(1,"div",1),l.YNc(2,tW,3,0,"div",2),l.YNc(3,nW,5,0,"div",3),l.qZA(),l.qZA(),l.TgZ(4,"main",4),l.TgZ(5,"section",5),l.TgZ(6,"div",1),l.YNc(7,iW,26,4,"div",6),l.qZA(),l.YNc(8,pW,7,2,"div",7),l.YNc(9,TW,7,2,"div",7),l.YNc(10,kW,5,1,"div",8),l.qZA(),l.YNc(11,PW,23,2,"ng-template",null,9,l.W1O),l.YNc(13,OW,26,3,"ng-template",null,10,l.W1O),l.YNc(15,FW,22,2,"ng-template",null,11,l.W1O),l.YNc(17,VW,16,1,"ng-template",null,12,l.W1O),l.qZA()),2&e&&(l.xp6(2),l.Q6J("ngIf",r.AuthService.isLoggedIn),l.xp6(1),l.Q6J("ngIf",r.AuthService.isLoggedIn),l.xp6(4),l.Q6J("ngIf",r.showFormNovoSinal),l.xp6(1),l.Q6J("ngIf",r.sinaisPinnedList&&r.sinaisPinnedList.length>0),l.xp6(1),l.Q6J("ngIf",r.watchersEntradaList&&r.watchersEntradaList.length>0),l.xp6(1),l.Q6J("ngIf",r.sinaisList&&r.sinaisList.length>0))},directives:[Vr,QA,gB,lO,lS,fO,gO,bi,bo,uS,ZP],pipes:[Rc],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.shake-element[_ngcontent-%COMP%]{animation:shake .5s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();class $W{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new HW(t,this.dueTime,this.scheduler))}}class HW extends ui.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(jW,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function jW(n){n.debouncedNext()}const g3="firebasestorage.googleapis.com",m3="storageBucket";class Kr extends V.ZR{constructor(t,e){super(BO(t),`Firebase Storage: ${e} (${BO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Kr.prototype)}_codeEquals(t){return BO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function BO(n){return"storage/"+n}function UO(){return new Kr("unknown","An unknown error occurred, please check the error payload for server response.")}function _3(){return new Kr("canceled","User canceled the upload/download.")}function y3(){return new Kr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function f0(n){return new Kr("invalid-argument",n)}function v3(){return new Kr("app-deleted","The Firebase app was deleted.")}function b3(n){return new Kr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function RC(n,t){return new Kr("invalid-format","String does not match format '"+n+"': "+t)}function kC(n){throw new Kr("internal-error","Internal error: "+n)}class js{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=js.makeFromUrl(t,e)}catch(i){return new js(t,"")}if(""===r.path)return r;throw function(n){return new Kr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(ot){ot.path_=decodeURIComponent(ot.path)}const A=e.replace(/[.]/g,"\\."),it=[{regex:f,indices:{bucket:1,path:3},postModify:function(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${e===g3?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let ot=0;ot<it.length;ot++){const Ut=it[ot],an=Ut.regex.exec(t);if(an){let Jr=an[Ut.indices.path];Jr||(Jr=""),r=new js(an[Ut.indices.bucket],Jr),Ut.postModify(r);break}}if(null==r)throw function(n){return new Kr("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class rZ{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function ES(n){return"string"==typeof n||n instanceof String}function w3(n){return $O()&&n instanceof Blob}function $O(){return"undefined"!=typeof Blob}function HO(n,t,e,r){if(r<t)throw f0(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw f0(`Invalid value for '${n}'. Expected ${e} or less.`)}function ah(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function C3(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var _p=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(_p||(_p={})),_p))();class uZ{constructor(t,e,r,i,a,d,f,m,b,T,A){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=T,this.connectionFactory_=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,O)=>{this.resolve_=M,this.reject_=O,this.start_()})}start_(){const e=(r,i)=>{const a=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(m)?a():a(m)}catch(m){d(m)}else if(null!==f){const m=UO();m.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,m):m)}else d(i.canceled?this.appDelete_?v3():_3():new Kr("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new TS(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,i=null,a=null,d=!1,f=0;function m(){return 2===f}let b=!1;function T(..._e){b||(b=!0,t.apply(null,_e))}function A(_e){i=setTimeout(()=>{i=null,n(O,m())},_e)}function M(){a&&clearTimeout(a)}function O(_e,...qe){if(b)return void M();if(_e)return M(),void T.call(null,_e,...qe);if(m()||d)return M(),void T.call(null,_e,...qe);let it;r<64&&(r*=2),1===f?(f=2,it=0):it=1e3*(r+Math.random()),A(it)}let q=!1;function oe(_e){q||(q=!0,M(),!b&&(null!==i?(_e||(f=2),clearTimeout(i),A(0)):_e||(f=1)))}return A(0),a=setTimeout(()=>{d=!0,oe(!0)},e),oe}((r,i)=>{if(i)return void r(!1,new TS(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(d),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(d),this.pendingConnection_=null;const f=a.getErrorCode()===_p.NO_ERROR,m=a.getStatus();if(!f||this.isRetryStatusCode_(m)){const T=a.getErrorCode()===_p.ABORT;return void r(!1,new TS(!1,null,T))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new TS(b,a))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),a=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||a}}class TS{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function mZ(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if($O())return new Blob(n);throw new Kr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ka={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jO{constructor(t,e){this.data=t,this.contentType=e||null}}function GO(n,t){switch(n){case ka.RAW:return new jO(E3(t));case ka.BASE64:case ka.BASE64URL:return new jO(T3(n,t));case ka.DATA_URL:return new jO(function(n){const t=new D3(n);return t.base64?T3(ka.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw RC(ka.DATA_URL,"Malformed data URL.")}return E3(t)}(t.rest)}(t),function(n){return new D3(n).contentType}(t))}throw UO()}function E3(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function T3(n,t){switch(n){case ka.BASE64:{const i=-1!==t.indexOf("-"),a=-1!==t.indexOf("_");if(i||a)throw RC(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ka.BASE64URL:{const i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw RC(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(i){throw RC(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class D3{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw RC(ka.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class Ic{constructor(t,e){let r=0,i="";w3(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(w3(this.data_)){const i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new Ic(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new Ic(r,!0)}}static getBlob(...t){if($O()){const e=t.map(r=>r instanceof Ic?r.data_:r);return new Ic(mZ.apply(null,e))}{const e=t.map(d=>ES(d)?GO(ka.RAW,d).data:d.data_);let r=0;e.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let a=0;return e.forEach(d=>{for(let f=0;f<d.length;f++)i[a++]=d[f]}),new Ic(i,!0)}}uploadData(){return this.data_}}function qO(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function I3(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function DZ(n,t){return t}class _o{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||DZ}}let DS=null;function PC(){if(DS)return DS;const n=[];n.push(new _o("bucket")),n.push(new _o("generation")),n.push(new _o("metageneration")),n.push(new _o("name","fullPath",!0));const e=new _o("name");e.xform=function(a,d){return function(n){return!ES(n)||n.length<2?n:I3(n)}(d)},n.push(e);const i=new _o("size");return i.xform=function(a,d){return void 0!==d?Number(d):d},n.push(i),n.push(new _o("timeCreated")),n.push(new _o("updated")),n.push(new _o("md5Hash",null,!0)),n.push(new _o("cacheControl",null,!0)),n.push(new _o("contentDisposition",null,!0)),n.push(new _o("contentEncoding",null,!0)),n.push(new _o("contentLanguage",null,!0)),n.push(new _o("contentType",null,!0)),n.push(new _o("metadata","customMetadata",!0)),DS=n,DS}function A3(n,t,e){const r=qO(t);return null===r?null:function(n,t,e){const r={type:"file"},i=e.length;for(let a=0;a<i;a++){const d=e[a];r[d.local]=d.xform(r,t[d.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const a=new js(n.bucket,n.fullPath);return t._makeStorageReference(a)}})}(r,n),r}(n,r,e)}function WO(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const a=t[i];a.writable&&(e[a.server]=n[a.local])}return JSON.stringify(e)}const S3="prefixes";class Ac{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Sc(n){if(!n)throw UO()}function IS(n,t){return function(r,i){const a=A3(n,i,t);return Sc(null!==a),a}}function p0(n){return function(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new Kr("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Kr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new Kr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new Kr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function OC(n){const t=p0(n);return function(r,i){let a=t(r,i);return 404===r.getStatus()&&(a=function(n){return new Kr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function x3(n,t,e){const i=ah(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Ac(i,"GET",IS(n,e),d);return f.errorHandler=OC(t),f}function PZ(n,t,e,r,i){const a={};a.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(a.delimiter=e),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=ah(t.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,T=new Ac(f,"GET",function(n,t){return function(r,i){const a=function(n,t,e){const r=qO(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[S3])for(const i of e[S3]){const a=i.replace(/\/$/,""),d=n._makeStorageReference(new js(t,a));r.prefixes.push(d)}if(e.items)for(const i of e.items){const a=n._makeStorageReference(new js(t,i.name));r.items.push(a)}return r}(n,t,r)}(n,t,i);return Sc(null!==a),a}}(n,t.bucket),b);return T.urlParams=a,T.errorHandler=p0(t),T}function R3(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class AS{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function ZO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Sc(!1)}return Sc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const HZ={STATE_CHANGED:"state_changed"},yo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zO(n){switch(n){case"running":case"pausing":case"canceling":return yo.RUNNING;case"paused":return yo.PAUSED;case"success":return yo.SUCCESS;case"canceled":return yo.CANCELED;case"error":default:return yo.ERROR}}class jZ{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function g0(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class qZ extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_p.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_p.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_p.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw kC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw kC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function vu(){return new qZ}class F3{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=PC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const a=t.bucketOnlyServerUrl(),d=R3(t,r,i),f={name:d.fullPath},m=ah(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},A=WO(d,e),q=new Ac(m,"POST",function(oe){let _e;ZO(oe);try{_e=oe.getResponseHeader("X-Goog-Upload-URL")}catch(qe){Sc(!1)}return Sc(ES(_e)),_e},n.maxUploadRetryTime);return q.urlParams=f,q.headers=T,q.body=A,q.errorHandler=p0(t),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vu,t,e);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function(n,t,e,r){const m=new Ac(e,"POST",function(b){const T=ZO(b,["active","final"]);let A=null;try{A=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){Sc(!1)}A||Sc(!1);const M=Number(A);return Sc(!isNaN(M)),new AS(M,r.size(),"final"===T)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=p0(t),m}(this._ref.storage,this._ref._location,t,this._blob),a=this._ref.storage._makeRequest(i,vu,e,r);this._request=a,a.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new AS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let d;try{d=function(n,t,e,r,i,a,d,f){const m=new AS(0,0);if(d?(m.current=d.current,m.total=d.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw new Kr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=m.total-m.current;let T=b;i>0&&(T=Math.min(T,i));const A=m.current,q={"X-Goog-Upload-Command":T===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},oe=r.slice(A,A+T);if(null===oe)throw y3();const it=new Ac(e,"POST",function(ot,Ut){const an=ZO(ot,["active","final"]),Hr=m.current+T,Jr=r.size();let JO;return JO="final"===an?IS(t,a)(ot,Ut):null,new AS(Hr,Jr,"final"===an,JO)},t.maxUploadRetryTime);return it.headers=q,it.body=oe.uploadData(),it.progressCallback=f||null,it.errorHandler=p0(n),it}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(d,vu,i,a);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=x3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,vu,t,e);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const a=t.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},m=function(){let it="";for(let ot=0;ot<2;ot++)it+=Math.random().toString().slice(2);return it}();d["Content-Type"]="multipart/related; boundary="+m;const b=R3(t,r,i),T=WO(b,e),O=Ic.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===O)throw y3();const q={name:b.fullPath},oe=ah(a,n.host,n._protocol),qe=n.maxUploadRetryTime,Ye=new Ac(oe,"POST",IS(n,e),qe);return Ye.urlParams=q,Ye.headers=d,Ye.body=O.uploadData(),Ye.errorHandler=p0(t),Ye}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vu,t,e);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=_3(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=zO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const a=new jZ(e||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(zO(this._state)){case yo.SUCCESS:g0(this._resolve.bind(null,this.snapshot))();break;case yo.CANCELED:case yo.ERROR:g0(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(zO(this._state)){case yo.RUNNING:case yo.PAUSED:t.next&&g0(t.next.bind(t,this.snapshot))();break;case yo.SUCCESS:t.complete&&g0(t.complete.bind(t))();break;case yo.CANCELED:case yo.ERROR:t.error&&g0(t.error.bind(t,this._error))();break;default:t.error&&g0(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class a_{constructor(t,e){this._service=t,this._location=e instanceof js?e:js.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new a_(t,e)}get root(){const t=new js(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return I3(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new js(this._location.bucket,t);return new a_(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw b3(t)}}function V3(n,t,e){return YO.apply(this,arguments)}function YO(){return(YO=(0,ve.Z)(function*(n,t,e){const i=yield B3(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield V3(n,t,i.nextPageToken))})).apply(this,arguments)}function B3(n,t){null!=t&&"number"==typeof t.maxResults&&HO("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=PZ(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,vu)}function r7(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const i=ah(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Ac(i,"GET",function(n,t){return function(r,i){const a=A3(n,i,t);return Sc(null!==a),function(n,t,e,r){const i=qO(t);if(null===i||!ES(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const d=encodeURIComponent;return a.split(",").map(b=>{const A=n.fullPath;return ah("/b/"+d(n.bucket)+"/o/"+d(A),e,r)+C3({alt:"media",token:b})})[0]}(a,i,n.host,n._protocol)}}(n,e),d);return f.errorHandler=OC(t),f}(n.storage,n._location,PC());return n.storage.makeRequestWithTokens(t,vu).then(e=>{if(null===e)throw new Kr("no-download-url","The given file does not have any download URLs.");return e})}function U3(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new js(n._location.bucket,e);return new a_(n.storage,r)}function $3(n,t){if(n instanceof KO){const e=n;if(null==e._bucket)throw new Kr("no-default-bucket","No default bucket found. Did you set the '"+m3+"' property when initializing the app?");const r=new a_(e,e._bucket);return null!=t?$3(r,t):r}return void 0!==t?U3(n,t):n}function a7(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof KO)return function(n,t){return new a_(n,t)}(n,t);throw f0("To use ref(service, url), the first argument must be a Storage instance.")}return $3(n,t)}function H3(n,t){const e=null==t?void 0:t[m3];return null==e?null:js.makeFromBucketSpec(e,n)}class KO{constructor(t,e,r,i,a){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=g3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?js.makeFromBucketSpec(i,this._host):H3(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?js.makeFromBucketSpec(this._url,t):H3(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){HO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){HO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,ve.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,ve.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new a_(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new rZ(v3());{const a=function(n,t,e,r,i,a){const d=C3(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(m,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(m,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(m,a),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(m,r),new uZ(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(t,e){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,a).getPromise()})()}}const j3="@firebase/storage";function W3(n,t){return a7(n=(0,V.m9)(n),t)}(0,gs._registerComponent)(new Xs.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new KO(e,r,i,t,gs.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,gs.registerVersion)(j3,"0.9.5",""),(0,gs.registerVersion)(j3,"0.9.5","esm2017");class SS{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Z3{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new SS(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new SS(r,this,this._ref))},e)}on(t,e,r,i){let a;return e&&(a="function"==typeof e?d=>e(new SS(d,this,this._ref)):{next:e.next?d=>e.next(new SS(d,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)}}class z3{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new lh(t,this._service))}get items(){return this._delegate.items.map(t=>new lh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class lh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return U3(n,t)}(this._delegate,t);return new lh(e,this.storage)}get root(){return new lh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new lh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new Z3(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new F3(n,new Ic(t),e)}(n=(0,V.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=ka.RAW,r){this._throwIfRoot("putString");const i=GO(e,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new Z3(new F3(this._delegate,new Ic(i.data,!0),a),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return V3(n,t).then(()=>t)}(n=(0,V.m9)(n))}(this._delegate).then(t=>new z3(t,this.storage))}list(t){return function(n,t){return B3(n=(0,V.m9)(n),t)}(this._delegate,t||void 0).then(e=>new z3(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=x3(n.storage,n._location,PC());return n.storage.makeRequestWithTokens(t,vu)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const a=ah(t.fullServerUrl(),n.host,n._protocol),f=WO(e,r),b=n.maxOperationRetryTime,T=new Ac(a,"PATCH",IS(n,r),b);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=OC(t),T}(n.storage,n._location,t,PC());return n.storage.makeRequestWithTokens(e,vu)}(n=(0,V.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return r7(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=ah(t.fullServerUrl(),n.host,n._protocol),f=new Ac(r,"DELETE",function(m,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=OC(t),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,vu)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw b3(t)}}class Y3{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(K3(t))throw f0("ref() expected a child path but got a URL, use refFromURL instead.");return new lh(W3(this._delegate,t),this)}refFromURL(t){if(!K3(t))throw f0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{js.makeFromUrl(t,this._delegate.host)}catch(e){throw f0("refFromUrl() expected a valid full URL but got an invalid one.")}return new lh(W3(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,V.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function K3(n){return/^[A-Za-z]+:\/\//.test(n)}function E7(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new Y3(e,r)}function J3(n){const t=function(n){return new Wt.y(t=>{const e=d=>t.next(d);e(n.snapshot);const a=n.on("state_changed",e);return n.then(d=>{e(d),t.complete()},d=>{e(n.snapshot),(d=>{t.error(d)})(d)}),function(){a()}}).pipe(function(n,t=Xu.P){return e=>e.lift(new $W(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ct.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function NS(n){return{getDownloadURL:()=>(0,ht.of)(void 0).pipe(Fn.fc,ar(()=>n.getDownloadURL()),Fn.iC),getMetadata:()=>(0,ht.of)(void 0).pipe(Fn.fc,ar(()=>n.getMetadata()),Fn.iC),delete:()=>(0,vn.D)(n.delete()),child:t=>NS(n.child(t)),updateMetadata:t=>(0,vn.D)(n.updateMetadata(t)),put:(t,e)=>J3(n.put(t,e)),putString:(t,e,r)=>J3(n.putString(t,e,r)),list:t=>(0,vn.D)(n.list(t)),listAll:()=>(0,vn.D)(n.listAll())}}!function(n){const t={TaskState:yo,TaskEvent:HZ,StringFormat:ka,Storage:Y3,Reference:lh};n.INTERNAL.registerComponent(new Xs.wA("storage-compat",E7,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(ll.Z);const I7=new l.OlP("angularfire2.storageBucket"),A7=new l.OlP("angularfire2.storage.maxUploadRetryTime"),S7=new l.OlP("angularfire2.storage.maxOperationRetryTime"),N7=new l.OlP("angularfire2.storage.use-emulator");let x7=(()=>{class n{constructor(e,r,i,a,d,f,m,b,T,A){const M=(0,Di.on)(e,d,r);this.storage=(0,Di.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const O=d.runOutsideAngular(()=>M.storage(i||void 0)),q=T;return q&&O.useEmulator(...q),m&&O.setMaxUploadRetryTime(m),b&&O.setMaxOperationRetryTime(b),O},[m,b])}ref(e){return NS(this.storage.ref(e))}refFromURL(e){return NS(this.storage.refFromURL(e))}upload(e,r,i){return NS(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(l.LFG(Di.Dh),l.LFG(Di.xv,8),l.LFG(I7,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Fn.HU),l.LFG(A7,8),l.LFG(S7,8),l.LFG(N7,8),l.LFG(om,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),M7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),R7=(()=>{class n{constructor(){Hw.Z.registerVersion("angularfire",Fn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[x7],imports:[M7]}),n})();const k7={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let P7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[BW]}),n.\u0275inj=l.cJS({providers:[],imports:[[Np,cN,jB,Kq,Di.hO.initializeApp(k7),Lj,Zw,R7]]}),n})();(0,l.G48)(),Gc().bootstrapModule(P7).catch(n=>console.error(n))},3394:(ut,Ce,U)=>{"use strict";U.d(Ce,{Z:()=>De});var R=U(3854),l=U(3910),L=U(8026),ie=U(5422);class ue{constructor(Be,ce){this._delegate=Be,this.firebase=ce,(0,L._addComponent)(Be,new l.wA("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Be,ce=L._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(Be);return!Pe.isInitialized()&&"EXPLICIT"===(null===(fe=Pe.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:ce})}_removeServiceInstance(Be,ce=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(ce)}_addComponent(Be){(0,L._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,L._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new R.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function Q(){const Ee=function(Ee){const Be={},ce={__esModule:!0,initializeApp:function(gt,Je={}){const Fe=L.initializeApp(gt,Je);if((0,R.r3)(Be,Fe.name))return Be[Fe.name];const Ie=new Ee(Fe,ce);return Be[Fe.name]=Ie,Ie},app:Pe,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(gt){const Je=gt.name,Fe=Je.replace("-compat","");if(L._registerComponent(gt)&&"PUBLIC"===gt.type){const Ie=(Ze=Pe())=>{if("function"!=typeof Ze[Fe])throw ye.create("invalid-app-argument",{appName:Je});return Ze[Fe]()};void 0!==gt.serviceProps&&(0,R.ZB)(Ie,gt.serviceProps),ce[Fe]=Ie,Ee.prototype[Fe]=function(...Ze){return this._getService.bind(this,Je).apply(this,gt.multipleInstances?Ze:[])}}return"PUBLIC"===gt.type?ce[Fe]:null},removeApp:function(gt){delete Be[gt]},useAsService:function(gt,Je){return"serverAuth"===Je?null:Je},modularAPIs:L}};function Pe(gt){if(!(0,R.r3)(Be,gt=gt||L._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:gt});return Be[gt]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function(){return Object.keys(Be).map(gt=>Be[gt])}}),Pe.App=Ee,ce}(ue);return Ee.INTERNAL=Object.assign(Object.assign({},Ee.INTERNAL),{createFirebaseNamespace:Q,extendNamespace:function(ce){(0,R.ZB)(Ee,ce)},createSubscribe:R.ne,ErrorFactory:R.LL,deepExtend:R.ZB}),Ee}(),Y=new ie.Yd("@firebase/app-compat");if((0,R.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ee=self.firebase.SDK_VERSION;Ee&&Ee.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=$;(0,L.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(ut,Ce,U)=>{"use strict";U.r(Ce),U.d(Ce,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>Wi,_DEFAULT_ENTRY_NAME:()=>Jt,_addComponent:()=>mr,_addOrOverwriteComponent:()=>yi,_apps:()=>Zt,_clearComponents:()=>$n,_components:()=>_t,_getProvider:()=>Tt,_registerComponent:()=>wr,_removeServiceInstance:()=>tr,deleteApp:()=>fr,getApp:()=>_r,getApps:()=>Ue,initializeApp:()=>vi,onLog:()=>Ar,registerVersion:()=>at,setLogLevel:()=>pn});var R=U(8239),l=U(3910),L=U(5422),ie=U(3854);class ue{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(st=>{if(function(ke){const Se=ke.getComponent();return"VERSION"===(null==Se?void 0:Se.type)}(st)){const Mt=st.getImmediate();return`${Mt.library}/${Mt.version}`}return null}).filter(st=>st).join(" ")}}const ye="@firebase/app",J="0.7.21",Q=new L.Yd("@firebase/app"),Jt="[DEFAULT]",An={[ye]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Zt=new Map,_t=new Map;function mr(ke,Se){try{ke.container.addComponent(Se)}catch(st){Q.debug(`Component ${Se.name} failed to register with FirebaseApp ${ke.name}`,st)}}function yi(ke,Se){ke.container.addOrOverwriteComponent(Se)}function wr(ke){const Se=ke.name;if(_t.has(Se))return Q.debug(`There were multiple attempts to register component ${Se}.`),!1;_t.set(Se,ke);for(const st of Zt.values())mr(st,ke);return!0}function Tt(ke,Se){const st=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return st&&st.triggerHeartbeat(),ke.container.getProvider(Se)}function tr(ke,Se,st=Jt){Tt(ke,Se).clearInstance(st)}function $n(){_t.clear()}const Qt=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Hn{constructor(Se,st,Mt){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},st),this._name=st.name,this._automaticDataCollectionEnabled=st.automaticDataCollectionEnabled,this._container=Mt,this.container.addComponent(new l.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Wi="9.6.11";function vi(ke,Se={}){"object"!=typeof Se&&(Se={name:Se});const st=Object.assign({name:Jt,automaticDataCollectionEnabled:!1},Se),Mt=st.name;if("string"!=typeof Mt||!Mt)throw Qt.create("bad-app-name",{appName:String(Mt)});const xt=Zt.get(Mt);if(xt){if((0,ie.vZ)(ke,xt.options)&&(0,ie.vZ)(st,xt.config))return xt;throw Qt.create("duplicate-app",{appName:Mt})}const Xt=new l.H0(Mt);for(const Z of _t.values())Xt.addComponent(Z);const X=new Hn(ke,st,Xt);return Zt.set(Mt,X),X}function _r(ke=Jt){const Se=Zt.get(ke);if(!Se)throw Qt.create("no-app",{appName:ke});return Se}function Ue(){return Array.from(Zt.values())}function fr(ke){return pr.apply(this,arguments)}function pr(){return(pr=(0,R.Z)(function*(ke){const Se=ke.name;Zt.has(Se)&&(Zt.delete(Se),yield Promise.all(ke.container.getProviders().map(st=>st.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function at(ke,Se,st){var Mt;let xt=null!==(Mt=An[ke])&&void 0!==Mt?Mt:ke;st&&(xt+=`-${st}`);const Xt=xt.match(/\s|\//),X=Se.match(/\s|\//);if(Xt||X){const Z=[`Unable to register library "${xt}" with version "${Se}":`];return Xt&&Z.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Xt&&X&&Z.push("and"),X&&Z.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void Q.warn(Z.join(" "))}wr(new l.wA(`${xt}-version`,()=>({library:xt,version:Se}),"VERSION"))}function Ar(ke,Se){if(null!==ke&&"function"!=typeof ke)throw Qt.create("invalid-log-argument");(0,L.Am)(ke,Se)}function pn(ke){(0,L.Ub)(ke)}const Lr="firebase-heartbeat-store";let yr=null;function gr(){return yr||(yr=(0,ie.X3)("firebase-heartbeat-database",1,(ke,Se)=>{switch(Se){case 0:ke.createObjectStore(Lr)}}).catch(ke=>{throw Qt.create("storage-open",{originalErrorMessage:ke.message})})),yr}function Ri(){return(Ri=(0,R.Z)(function*(ke){try{return(yield gr()).transaction(Lr).objectStore(Lr).get(Ct(ke))}catch(Se){throw Qt.create("storage-get",{originalErrorMessage:Se.message})}})).apply(this,arguments)}function Nt(ke,Se){return lt.apply(this,arguments)}function lt(){return(lt=(0,R.Z)(function*(ke,Se){try{const Mt=(yield gr()).transaction(Lr,"readwrite");return yield Mt.objectStore(Lr).put(Se,Ct(ke)),Mt.complete}catch(st){throw Qt.create("storage-set",{originalErrorMessage:st.message})}})).apply(this,arguments)}function Ct(ke){return`${ke.name}!${ke.options.appId}`}class wt{constructor(Se){this.container=Se,this._heartbeatsCache=null;const st=this.container.getProvider("app").getImmediate();this._storage=new jr(st),this._heartbeatsCachePromise=this._storage.read().then(Mt=>(this._heartbeatsCache=Mt,Mt))}triggerHeartbeat(){var Se=this;return(0,R.Z)(function*(){const Mt=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=Zi();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==xt&&!Se._heartbeatsCache.heartbeats.some(Xt=>Xt.date===xt))return Se._heartbeatsCache.heartbeats.push({date:xt,agent:Mt}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(Xt=>{const X=new Date(Xt.date).valueOf();return Date.now()-X<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,R.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const st=Zi(),{heartbeatsToSend:Mt,unsentEntries:xt}=function(ke,Se=1024){const st=[];let Mt=ke.slice();for(const xt of ke){const Xt=st.find(X=>X.agent===xt.agent);if(Xt){if(Xt.dates.push(xt.date),nt(st)>Se){Xt.dates.pop();break}}else if(st.push({agent:xt.agent,dates:[xt.date]}),nt(st)>Se){st.pop();break}Mt=Mt.slice(1)}return{heartbeatsToSend:st,unsentEntries:Mt}}(Se._heartbeatsCache.heartbeats),Xt=(0,ie.L)(JSON.stringify({version:2,heartbeats:Mt}));return Se._heartbeatsCache.lastSentHeartbeatDate=st,xt.length>0?(Se._heartbeatsCache.heartbeats=xt,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),Xt})()}}function Zi(){return(new Date).toISOString().substring(0,10)}class jr{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,R.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,R.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function(ke){return Ri.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var st=this;return(0,R.Z)(function*(){var Mt;if(yield st._canUseIndexedDBPromise){const Xt=yield st.read();return Nt(st.app,{lastSentHeartbeatDate:null!==(Mt=Se.lastSentHeartbeatDate)&&void 0!==Mt?Mt:Xt.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var st=this;return(0,R.Z)(function*(){var Mt;if(yield st._canUseIndexedDBPromise){const Xt=yield st.read();return Nt(st.app,{lastSentHeartbeatDate:null!==(Mt=Se.lastSentHeartbeatDate)&&void 0!==Mt?Mt:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...Se.heartbeats]})}})()}}function nt(ke){return(0,ie.L)(JSON.stringify({version:2,heartbeats:ke})).length}wr(new l.wA("platform-logger",Se=>new ue(Se),"PRIVATE")),wr(new l.wA("heartbeat",Se=>new wt(Se),"PRIVATE")),at(ye,J,""),at(ye,J,"esm2017"),at("fire-js","")},3910:(ut,Ce,U)=>{"use strict";U.d(Ce,{wA:()=>L,H0:()=>J,zt:()=>ue});var R=U(8239),l=U(3854);class L{constructor($,Y,G){this.name=$,this.instanceFactory=Y,this.type=G,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ie="[DEFAULT]";class ue{constructor($,Y){this.name=$,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const Y=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(Y)){const G=new l.BH;if(this.instancesDeferred.set(Y,G),this.isInitialized(Y)||this.shouldAutoInitialize())try{const le=this.getOrInitializeService({instanceIdentifier:Y});le&&G.resolve(le)}catch(le){}}return this.instancesDeferred.get(Y).promise}getImmediate($){var Y;const G=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),le=null!==(Y=null==$?void 0:$.optional)&&void 0!==Y&&Y;if(!this.isInitialized(G)&&!this.shouldAutoInitialize()){if(le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:G})}catch(Ne){if(le)return null;throw Ne}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if("EAGER"===$.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ie})}catch(Y){}for(const[Y,G]of this.instancesDeferred.entries()){const le=this.normalizeInstanceIdentifier(Y);try{const Ne=this.getOrInitializeService({instanceIdentifier:le});G.resolve(Ne)}catch(Ne){}}}}clearInstance($=ie){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,R.Z)(function*(){const Y=Array.from($.instances.values());yield Promise.all([...Y.filter(G=>"INTERNAL"in G).map(G=>G.INTERNAL.delete()),...Y.filter(G=>"_delete"in G).map(G=>G._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ie){return this.instances.has($)}getOptions($=ie){return this.instancesOptions.get($)||{}}initialize($={}){const{options:Y={}}=$,G=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(G))throw Error(`${this.name}(${G}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const le=this.getOrInitializeService({instanceIdentifier:G,options:Y});for(const[Ne,De]of this.instancesDeferred.entries())G===this.normalizeInstanceIdentifier(Ne)&&De.resolve(le);return le}onInit($,Y){var G;const le=this.normalizeInstanceIdentifier(Y),Ne=null!==(G=this.onInitCallbacks.get(le))&&void 0!==G?G:new Set;Ne.add($),this.onInitCallbacks.set(le,Ne);const De=this.instances.get(le);return De&&$(De,le),()=>{Ne.delete($)}}invokeOnInitCallbacks($,Y){const G=this.onInitCallbacks.get(Y);if(G)for(const le of G)try{le($,Y)}catch(Ne){}}getOrInitializeService({instanceIdentifier:$,options:Y={}}){let G=this.instances.get($);if(!G&&this.component&&(G=this.component.instanceFactory(this.container,{instanceIdentifier:(Q=$,Q===ie?void 0:Q),options:Y}),this.instances.set($,G),this.instancesOptions.set($,Y),this.invokeOnInitCallbacks(G,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,G)}catch(le){}var Q;return G||null}normalizeInstanceIdentifier($=ie){return this.component?this.component.multipleInstances?$:ie:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor($){this.name=$,this.providers=new Map}addComponent($){const Y=this.getProvider($.name);if(Y.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);Y.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const Y=new ue($,this);return this.providers.set($,Y),Y}getProviders(){return Array.from(this.providers.values())}}},5422:(ut,Ce,U)=>{"use strict";U.d(Ce,{in:()=>l,Yd:()=>ye,Ub:()=>J,Am:()=>Q});const R=[];var l=(()=>{return($=l||(l={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",l;var $})();const L={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},ie=l.INFO,ue={[l.DEBUG]:"log",[l.VERBOSE]:"log",[l.INFO]:"info",[l.WARN]:"warn",[l.ERROR]:"error"},ee=($,Y,...G)=>{if(Y<$.logLevel)return;const le=(new Date).toISOString(),Ne=ue[Y];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[Ne](`[${le}]  ${$.name}:`,...G)};class ye{constructor(Y){this.name=Y,this._logLevel=ie,this._logHandler=ee,this._userLogHandler=null,R.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in l))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?L[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,l.DEBUG,...Y),this._logHandler(this,l.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,l.VERBOSE,...Y),this._logHandler(this,l.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,l.INFO,...Y),this._logHandler(this,l.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,l.WARN,...Y),this._logHandler(this,l.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,l.ERROR,...Y),this._logHandler(this,l.ERROR,...Y)}}function J($){R.forEach(Y=>{Y.setLogLevel($)})}function Q($,Y){for(const G of R){let le=null;Y&&Y.level&&(le=L[Y.level]),G.userLogHandler=null===$?null:(Ne,De,...Ee)=>{const Be=Ee.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(fe){return null}}).filter(ce=>ce).join(" ");De>=(null!=le?le:Ne.logLevel)&&$({level:l[De].toLowerCase(),message:Be,args:Ee,type:Ne.name})}}}},8239:(ut,Ce,U)=>{"use strict";function R(L,ie,ue,ee,ye,J,Q){try{var $=L[J](Q),Y=$.value}catch(G){return void ue(G)}$.done?ie(Y):Promise.resolve(Y).then(ee,ye)}function l(L){return function(){var ie=this,ue=arguments;return new Promise(function(ee,ye){var J=L.apply(ie,ue);function Q(Y){R(J,ee,ye,Q,$,"next",Y)}function $(Y){R(J,ee,ye,Q,$,"throw",Y)}Q(void 0)})}}U.d(Ce,{Z:()=>l})}},ut=>{ut(ut.s=3375)}]);