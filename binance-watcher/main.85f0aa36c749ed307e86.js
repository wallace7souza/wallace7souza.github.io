(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:tt=>{function be(V){return Promise.resolve().then(()=>{var m=new Error("Cannot find module '"+V+"'");throw m.code="MODULE_NOT_FOUND",m})}be.keys=()=>[],be.resolve=be,be.id=8255,tt.exports=be},7716:(tt,be,V)=>{"use strict";V.d(be,{deG:()=>Jc,tb:()=>GM,AFp:()=>$M,ip1:()=>bb,CZH:()=>Wd,hGG:()=>gA,z2F:()=>Xu,sBO:()=>OD,Sil:()=>om,_Vd:()=>wr,EJc:()=>KS,SBq:()=>iu,qLn:()=>Bl,vpe:()=>su,gxx:()=>Td,tBr:()=>Ga,XFs:()=>Ze,OlP:()=>On,zs3:()=>sr,ZZ4:()=>$g,aQg:()=>xr,soG:()=>Jy,YKP:()=>FD,v3s:()=>rP,h0i:()=>Ld,PXZ:()=>kb,R0b:()=>Fr,FiY:()=>ra,Lbi:()=>HM,g9A:()=>zS,Qsj:()=>SN,FYo:()=>Bg,JOm:()=>Ro,Tiy:()=>ND,q3G:()=>ir,tp0:()=>Zr,EAV:()=>iP,Rgc:()=>hc,dDg:()=>Rb,DyG:()=>ja,q4F:()=>jg,GfV:()=>MD,s_b:()=>Vd,ifc:()=>He,eFA:()=>ov,G48:()=>JS,Gpc:()=>G,X6Q:()=>sv,_c5:()=>lP,VLi:()=>as,c2e:()=>WM,zSh:()=>nn,wAp:()=>vt,vHH:()=>fe,EiD:()=>cd,mCW:()=>Nl,qzn:()=>Al,JVY:()=>kh,pB0:()=>ud,eBb:()=>Lp,L6k:()=>Fp,LAX:()=>sa,cg1:()=>e0,Tjo:()=>hA,kL8:()=>eD,yhl:()=>h_,dqk:()=>Et,sIi:()=>wg,CqO:()=>ry,QGY:()=>Nw,F4k:()=>AT,RDi:()=>Fs,AaK:()=>J,z3N:()=>ia,qOj:()=>mw,TTD:()=>zo,_Bn:()=>bD,xp6:()=>Zh,uIk:()=>Ew,ekj:()=>ay,Suo:()=>sb,Xpm:()=>H,lG2:()=>Vn,Yz7:()=>Tt,cJS:()=>gn,oAB:()=>yt,Yjl:()=>zi,Y36:()=>Ag,_UZ:()=>Rw,qZA:()=>xw,TgZ:()=>ny,EpF:()=>ST,n5z:()=>Il,Ikx:()=>yy,LFG:()=>Tn,$8M:()=>Tl,NdJ:()=>Mw,CRH:()=>DS,oxw:()=>kw,ALo:()=>Bi,xi3:()=>yM,Q6J:()=>ty,iGM:()=>ib,CHM:()=>Yo,LSH:()=>qp,kYT:()=>tn,YNc:()=>hT,_uU:()=>hy,Oqu:()=>fy,hij:()=>py,AsE:()=>Cf});var m=V(9765),X=V(5319),L=V(7574),ae=V(6682),re=V(8819);function Z(i){for(let s in i)if(i[s]===Z)return s;throw Error("Could not find renamed property on target object.")}function me(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function J(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(J).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ne(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=Z({__forward_ref__:Z});function G(i){return i.__forward_ref__=G,i.toString=function(){return J(this())},i}function B(i){return te(i)?i():i}function te(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===G}class fe extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function oe(i){return"string"==typeof i?i:null==i?"":String(i)}function he(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():oe(i)}function Qe(i,s){const a=s?` in ${s}`:"";throw new fe("201",`No provider for ${he(i)} found${a}`)}function Xt(i,s){null==i&&function(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Tt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function gn(i){return{providers:i.providers||[],imports:i.imports||[]}}function sn(i){return Xn(i,ar)||Xn(i,Me)}function Xn(i,s){return i.hasOwnProperty(s)?i[s]:null}function io(i){return i&&(i.hasOwnProperty(Ii)||i.hasOwnProperty(ur))?i[Ii]:null}const ar=Z({\u0275prov:Z}),Ii=Z({\u0275inj:Z}),Me=Z({ngInjectableDef:Z}),ur=Z({ngInjectorDef:Z});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let er;function pr(i){const s=er;return er=i,s}function so(i,s,a){const l=sn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ze.Optional?null:void 0!==s?s:void Qe(J(i),"Injector")}function Ir(i){return{toString:i}.toString()}var Ln=(()=>((Ln=Ln||{})[Ln.OnPush=0]="OnPush",Ln[Ln.Default=1]="Default",Ln))(),He=(()=>((He=He||{})[He.Emulated=0]="Emulated",He[He.None=2]="None",He[He.ShadowDom=3]="ShadowDom",He))();const mt="undefined"!=typeof globalThis&&globalThis,Ns="undefined"!=typeof window&&window,Ms="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Et=mt||"undefined"!=typeof global&&global||Ns||Ms,un={},Pt=[],Dt=Z({\u0275cmp:Z}),Ye=Z({\u0275dir:Z}),Ae=Z({\u0275pipe:Z}),at=Z({\u0275mod:Z}),_t=Z({\u0275loc:Z}),Lt=Z({\u0275fac:Z}),Qt=Z({__NG_ELEMENT_ID__:Z});let z=0;function H(i){return Ir(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Ln.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Pt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||He.Emulated,id:"c",styles:i.styles||Pt,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,h=i.features,_=i.pipes;return l.id+=z++,l.inputs=Mr(i.inputs,a),l.outputs=Mr(i.outputs),h&&h.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(_e):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(se):null,l})}function _e(i){return dt(i)||function(i){return i[Ye]||null}(i)}function se(i){return function(i){return i[Ae]||null}(i)}const je={};function yt(i){return Ir(()=>{const s={type:i.type,bootstrap:i.bootstrap||Pt,declarations:i.declarations||Pt,imports:i.imports||Pt,exports:i.exports||Pt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(je[i.id]=i.type),s})}function tn(i,s){return Ir(()=>{const a=Pr(i,!0);a.declarations=s.declarations||Pt,a.imports=s.imports||Pt,a.exports=s.exports||Pt})}function Mr(i,s){if(null==i)return un;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=l,s&&(s[d]=h)}return a}const Vn=H;function zi(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function dt(i){return i[Dt]||null}function Pr(i,s){const a=i[at]||null;if(!a&&!0===s)throw new Error(`Type ${J(i)} does not have '\u0275mod' property.`);return a}function Si(i){return Array.isArray(i)&&"object"==typeof i[1]}function mn(i){return Array.isArray(i)&&!0===i[1]}function al(i){return 0!=(8&i.flags)}function ul(i){return 2==(2&i.flags)}function fu(i){return 1==(1&i.flags)}function fs(i){return null!==i.template}function Ai(i){return 0!=(512&i[2])}function qo(i,s){return i.hasOwnProperty(Lt)?i[Lt]:null}class Lc{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function zo(){return ps}function ps(i){return i.type.prototype.ngOnChanges&&(i.setInput=ks),lo}function lo(){const i=Vc(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===un)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function ks(i,s,a,l){const d=Vc(i)||function(i,s){return i[Zi]=s}(i,{previous:un,current:null}),h=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],C=_[E];h[E]=new Lc(C&&C.currentValue,s,_===un),i[l]=s}zo.ngInherit=!0;const Zi="__ngSimpleChanges__";function Vc(i){return i[Zi]||null}let dl;function Fs(i){dl=i}function Mn(i){return!!i.listen}const Ko={createRenderer:(i,s)=>void 0!==dl?dl:"undefined"!=typeof document?document:void 0};function an(i){for(;Array.isArray(i);)i=i[0];return i}function yu(i,s){return an(s[i])}function fn(i,s){return an(s[i.index])}function vu(i,s){return i.data[s]}function Hr(i,s){const a=s[i];return Si(a)?a:a[0]}function Eu(i){return 4==(4&i[2])}function wu(i){return 128==(128&i[2])}function Qi(i,s){return null==s?null:i[s]}function Gr(i){i[18]=0}function bu(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const bt={lFrame:mp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function pp(){return bt.bindingsEnabled}function De(){return bt.lFrame.lView}function $t(){return bt.lFrame.tView}function Yo(i){return bt.lFrame.contextLView=i,i[8]}function xn(){let i=Ma();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ma(){return bt.lFrame.currentTNode}function ni(i,s){const a=bt.lFrame;a.currentTNode=i,a.isParent=s}function Qo(){return bt.lFrame.isParent}function Jo(){return bt.isInCheckNoChangesMode}function Oa(i){bt.isInCheckNoChangesMode=i}function Wr(){return bt.lFrame.bindingIndex}function xi(){return bt.lFrame.bindingIndex++}function ri(i){const s=bt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function gl(i,s){const a=bt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Iu(s)}function Iu(i){bt.lFrame.currentDirectiveIndex=i}function _h(){return bt.lFrame.currentQueryIndex}function Ls(i){bt.lFrame.currentQueryIndex=i}function ml(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Du(i,s,a){if(a&Ze.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=ml(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const l=bt.lFrame=yl();return l.currentTNode=s,l.lView=i,!0}function _l(i){const s=yl(),a=i[1];bt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function yl(){const i=bt.lFrame,s=null===i?null:i.child;return null===s?mp(i):s}function mp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Su(){const i=bt.lFrame;return bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Gc=Su;function Au(){const i=Su();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qr(){return bt.lFrame.selectedIndex}function mo(i){bt.lFrame.selectedIndex=i}function Pn(){const i=bt.lFrame;return vu(i.tView,i.selectedIndex)}function La(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:R}=h;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),C&&(i.viewHooks||(i.viewHooks=[])).push(-a,C),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function Xo(i,s,a){El(i,s,3,a)}function Un(i,s,a,l){(3&i[2])===a&&El(i,s,a,l)}function vl(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function El(i,s,a,l){const h=null!=l?l:-1,_=s.length-1;let E=0;for(let C=void 0!==l?65535&i[18]:0;C<_;C++)if("number"==typeof s[C+1]){if(E=s[C],null!=l&&E>=l)break}else s[C]<0&&(i[18]+=65536),(E<h||-1==h)&&(Ep(i,a,s,C),i[18]=(4294901760&i[18])+C+2),C++}function Ep(i,s,a,l){const d=a[l]<0,h=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(E)}finally{}}}else try{h.call(E)}finally{}}class ea{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Kc(i,s,a){const l=Mn(i);let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const _=a[d++],E=a[d++],C=a[d++];l?i.setAttribute(s,E,C,_):s.setAttributeNS(_,E,C)}else{const _=h,E=a[++d];_s(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),d++}}return d}function bp(i){return 3===i||4===i||6===i}function _s(i){return 64===i.charCodeAt(0)}function Zc(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||Cp(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function Cp(i,s,a,l,d){let h=0,_=i.length;if(-1===s)_=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[h+1]=d));if(l===i[h+1])return void(i[h+2]=d)}h++,null!==l&&h++,null!==d&&h++}-1!==_&&(i.splice(_,0,s),h=_+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==d&&i.splice(h++,0,d)}function Ru(i){return-1!==i}function Va(i){return 32767&i}function yo(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let ys=!0;function Ua(i){const s=ys;return ys=i,s}let Eh=0;function Vs(i,s){const a=Ht(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,bh(l.data,i),bh(s,null),bh(l.blueprint,null));const d=ut(i,s),h=i.injectorIndex;if(Ru(d)){const _=Va(d),E=yo(d,s),C=E[1].data;for(let T=0;T<8;T++)s[h+T]=E[_+T]|C[_+T]}return s[h+8]=d,h}function bh(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ht(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ut(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){const h=d[1],_=h.type;if(l=2===_?h.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ni(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Qt)&&(l=a[Qt]),null==l&&(l=a[Qt]=Eh++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function _i(i,s,a){if(a&Ze.Optional)return i;Qe(s,"NodeInjector")}function Yc(i,s,a,l){if(a&Ze.Optional&&void 0===l&&(l=null),0==(a&(Ze.Self|Ze.Host))){const d=i[9],h=pr(void 0);try{return d?d.get(s,l,a&Ze.Optional):so(s,l,a&Ze.Optional)}finally{pr(h)}}return _i(l,s,a)}function Ji(i,s,a,l=Ze.Default,d){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Qt)?i[Qt]:void 0;return"number"==typeof s?s>=0?255&s:vo:s}(a);if("function"==typeof h){if(!Du(s,i,l))return l&Ze.Host?_i(d,a,l):Yc(s,a,l,d);try{const _=h(l);if(null!=_||l&Ze.Optional)return _;Qe(a)}finally{Gc()}}else if("number"==typeof h){let _=null,E=Ht(i,s),C=-1,T=l&Ze.Host?s[16][6]:null;for((-1===E||l&Ze.SkipSelf)&&(C=-1===E?ut(i,s):s[E+8],-1!==C&&Mu(l,!1)?(_=s[1],E=Va(C),s=yo(C,s)):E=-1);-1!==E;){const R=s[1];if(tr(h,E,R.data)){const P=Dp(E,s,a,_,l,T);if(P!==zr)return P}C=s[E+8],-1!==C&&Mu(l,s[1].data[E+8]===T)&&tr(h,E,s)?(_=R,E=Va(C),s=yo(C,s)):E=-1}}}return Yc(s,a,l,d)}const zr={};function vo(){return new Eo(xn(),De())}function Dp(i,s,a,l,d,h){const _=s[1],E=_.data[i+8],R=bl(E,_,a,null==l?ul(E)&&ys:l!=_&&0!=(3&E.type),d&Ze.Host&&h===E);return null!==R?Bn(s,_,R,E):zr}function bl(i,s,a,l,d){const h=i.providerIndexes,_=s.data,E=1048575&h,C=i.directiveStart,R=h>>20,F=d?E+R:i.directiveEnd;for(let W=l?E:E+R;W<F;W++){const Y=_[W];if(W<C&&a===Y||W>=C&&Y.type===a)return W}if(d){const W=_[C];if(W&&fs(W)&&W.type===a)return C}return null}function Bn(i,s,a,l){let d=i[a];const h=s.data;if(function(i){return i instanceof ea}(d)){const _=d;_.resolving&&function(i,s){throw new fe("200",`Circular dependency in DI detected for ${i}`)}(he(h[a]));const E=Ua(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?pr(_.injectImpl):null;Du(i,l,Ze.Default);try{d=i[a]=_.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(l){const _=ps(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==C&&pr(C),Ua(E),_.resolving=!1,Gc()}}return d}function tr(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Mu(i,s){return!(i&Ze.Self||i&Ze.Host&&s)}class Eo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return Ji(this._tNode,this._lView,s,l,a)}}function Il(i){return Ir(()=>{const s=i.prototype.constructor,a=s[Lt]||Pu(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const h=d[Lt]||Pu(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function Pu(i){return te(i)?()=>{const s=Pu(B(i));return s&&s()}:qo(i)}function Tl(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const h=a[d];if(bp(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(xn(),i)}const Mi="__parameters__";function ii(i,s,a){return Ir(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...h){if(this instanceof d)return l.apply(this,h),this;const _=new d(...h);return E.annotation=_,E;function E(C,T,R){const P=C.hasOwnProperty(Mi)?C[Mi]:Object.defineProperty(C,Mi,{value:[]})[Mi];for(;P.length<=R;)P.push(null);return(P[R]=P[R]||[]).push(_),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class On{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Tt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Jc=new On("AnalyzeForEntryComponents"),ja=Function;function Oi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Oi(l,s)):s!==i&&s.push(l)}return s}function ki(i,s){i.forEach(a=>Array.isArray(a)?ki(a,s):s(a))}function Es(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function bo(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function jn(i,s,a){let l=To(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Kr(i,s){const a=To(i,s);if(a>=0)return i[1|a]}function To(i,s){return function(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const h=l+(d-l>>1),_=i[h<<a];if(s===_)return h<<a;_>s?d=h:l=h+1}return~(d<<a)}(i,s,1)}const zt={},At="__NG_DI_FLAG__",Dr="ngTempTokenPath",Ha=/\n/gm,na="__source",So=Z({provide:String,useValue:Z});let $s;function Ot(i){const s=$s;return $s=i,s}function xp(i,s=Ze.Default){if(void 0===$s)throw new Error("inject() must be called from an injection context");return null===$s?so(i,void 0,s):$s.get(i,s&Ze.Optional?null:void 0,s)}function Tn(i,s=Ze.Default){return(er||xp)(B(i),s)}function ku(i){const s=[];for(let a=0;a<i.length;a++){const l=B(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let d,h=Ze.Default;for(let _=0;_<l.length;_++){const E=l[_],C=Np(E);"number"==typeof C?-1===C?d=E.token:h|=C:d=E}s.push(Tn(d,h))}else s.push(Tn(l))}return s}function nd(i,s){return i[At]=s,i.prototype[At]=s,i}function Np(i){return i[At]}function es(i,s,a,l){const d=i[Dr];throw s[na]&&d.unshift(s[na]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=J(s);if(Array.isArray(s))d=s.map(J).join(" -> ");else if("object"==typeof s){let h=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];h.push(_+":"+("string"==typeof E?JSON.stringify(E):J(E)))}d=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Ha,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[Dr]=null,i}const Ga=nd(ii("Inject",i=>({token:i})),-1),ra=nd(ii("Optional"),8),Zr=nd(ii("SkipSelf"),4);let id;function Hs(i){var s;return(null===(s=function(){if(void 0===id&&(id=null,Et.trustedTypes))try{id=Et.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return id}())||void 0===s?void 0:s.createHTML(i))||i}class Ao{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class uE extends Ao{getTypeName(){return"HTML"}}class lE extends Ao{getTypeName(){return"Style"}}class Oh extends Ao{getTypeName(){return"Script"}}class cE extends Ao{getTypeName(){return"URL"}}class dE extends Ao{getTypeName(){return"ResourceURL"}}function ia(i){return i instanceof Ao?i.changingThisBreaksApplicationSecurity:i}function Al(i,s){const a=h_(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function h_(i){return i instanceof Ao&&i.getTypeName()||null}function kh(i){return new uE(i)}function Fp(i){return new lE(i)}function Lp(i){return new Oh(i)}function sa(i){return new cE(i)}function ud(i){return new dE(i)}class Up{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Hs(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class hE{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Hs(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Hs(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let d=a.length-1;0<d;d--){const _=a.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&s.removeAttribute(_)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const f_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Rl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Nl(i){return(i=String(i)).match(f_)||i.match(Rl)?i:"unsafe:"+i}function Gs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Ka(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Fh=Gs("area,br,col,hr,img,wbr"),Lh=Gs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ld=Gs("rp,rt"),Bp=Ka(Fh,Ka(Lh,Gs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ka(ld,Gs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ka(ld,Lh)),Pl=Gs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ol=Gs("srcset"),jp=Ka(Pl,Ol,Gs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Gs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$p=Gs("script,style,template");class Hp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Bp.hasOwnProperty(a))return this.sanitizedSomething=!0,!$p.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let d=0;d<l.length;d++){const h=l.item(d),_=h.name,E=_.toLowerCase();if(!jp.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let C=h.value;Pl[E]&&(C=Nl(C)),Ol[E]&&(i=C,C=(i=String(i)).split(",").map(s=>Nl(s.trim())).join(", ")),this.buf.push(" ",_,'="',g_(C),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Bp.hasOwnProperty(a)&&!Fh.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(g_(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const Gp=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gE=/([^\#-~ |!])/g;function g_(i){return i.replace(/&/g,"&amp;").replace(Gp,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(gE,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Bu;function cd(i,s){let a=null;try{Bu=Bu||function(i){const s=new hE(i);return function(){try{return!!(new window.DOMParser).parseFromString(Hs(""),"text/html")}catch(i){return!1}}()?new Up(s):s}(i);let l=s?String(s):"";a=Bu.getInertBodyElement(l);let d=5,h=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=h,h=a.innerHTML,a=Bu.getInertBodyElement(l)}while(l!==h);return Hs((new Hp).sanitizeChildren(Wp(a)||a))}finally{if(a){const l=Wp(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Wp(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function qp(i){const s=function(){const i=De();return i&&i[12]}();return s?s.sanitize(ir.URL,i)||"":Al(i,"URL")?ia(i):Nl(oe(i))}const Fl="__ngContext__";function kr(i,s){i[Fl]=s}function Jp(i){const s=function(i){return i[Fl]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Sr(i){return i.ngOriginalError}function b_(i,...s){i.error(...s)}class Bl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),d=(i=s)&&i.ngErrorLogger||b_;var i;d(this._console,"ERROR",s),a&&d(this._console,"ORIGINAL ERROR",a),l&&d(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(Sr(s)):null}_findOriginalError(s){let a=s&&Sr(s);for(;a&&Sr(a);)a=Sr(a);return a||null}}const Gh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Et))();function Ws(i){return i instanceof Function?i():i}var Ro=(()=>((Ro=Ro||{})[Ro.Important=1]="Important",Ro[Ro.DashCase=2]="DashCase",Ro))();function qh(i,s){return undefined(i,s)}function g(i){const s=i[3];return mn(s)?s[3]:s}function N(i){return le(i[13])}function q(i){return le(i[4])}function le(i){for(;null!==i&&!mn(i);)i=i[4];return i}function Re(i,s,a,l,d){if(null!=l){let h,_=!1;mn(l)?h=l:Si(l)&&(_=!0,l=l[0]);const E=an(l);0===i&&null!==a?null==d?hI(s,a,E):jl(s,a,E,d||null,!0):1===i&&null!==a?jl(s,a,E,d||null,!0):2===i?function(i,s,a){const l=S_(i,s);l&&function(i,s,a,l){Mn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=h&&function(i,s,a,l,d){const h=a[7];h!==an(a)&&Re(s,i,l,h,d);for(let E=10;E<a.length;E++){const C=a[E];vd(C[1],C,i,s,l,h)}}(s,i,h,a,d)}}function yr(i,s,a){return Mn(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function md(i,s){const a=i[9],l=a.indexOf(s),d=s[3];1024&s[2]&&(s[2]&=-1025,bu(d,-1)),a.splice(l,1)}function _d(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&md(d,l),s>0&&(i[a-1][4]=l[4]);const h=bo(i,10+s);!function(i,s){vd(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=h[19];null!==_&&_.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Kh(i,s){if(!(256&s[2])){const a=s[11];Mn(a)&&a.destroyNode&&vd(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return aa(i[1],i);for(;s;){let a=null;if(Si(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Si(s)&&aa(s[1],s),s=s[3];null===s&&(s=i),Si(s)&&aa(s[1],s),a=s&&s[4]}s=a}}(s)}}function aa(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof ea)){const h=a[l+1];if(Array.isArray(h))for(let _=0;_<h.length;_+=2){const E=d[h[_]],C=h[_+1];try{C.call(E)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const _=a[h+1],E="function"==typeof _?_(s):an(s[_]),C=l[d=a[h+2]],T=a[h+3];"boolean"==typeof T?E.removeEventListener(a[h],C,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),h+=2}else{const _=l[d=a[h+1]];a[h].call(_)}if(null!==l){for(let h=d+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&Mn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&mn(s[3])){a!==s[3]&&md(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function D_(i,s,a){return function(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===He.None||d===He.Emulated)return null}return fn(l,a)}(i,s.parent,a)}function jl(i,s,a,l,d){Mn(i)?i.insertBefore(s,a,l,d):s.insertBefore(a,l,d)}function hI(i,s,a){Mn(i)?i.appendChild(s,a):s.appendChild(a)}function fI(i,s,a,l,d){null!==l?jl(i,s,a,l,d):hI(i,s,a)}function S_(i,s){return Mn(i)?i.parentNode(s):s.parentNode}let yd=function(i,s,a){return 40&i.type?fn(i,a):null};function ug(i,s,a,l){const d=D_(i,l,s),h=s[11],E=function(i,s,a){return yd(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)fI(h,d,a[C],E,!1);else fI(h,d,a,E,!1)}function N_(i,s){if(null!==s){const a=s.type;if(3&a)return fn(s,i);if(4&a)return DE(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return N_(i,l);{const d=i[s.index];return mn(d)?DE(-1,d):an(d)}}if(32&a)return qh(s,i)()||an(i[s.index]);{const l=TE(i,s);return null!==l?Array.isArray(l)?l[0]:N_(g(i[16]),l):N_(i,s.next)}}return null}function TE(i,s){return null!==s?i[16][6].projection[s.projection]:null}function DE(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return N_(l,d)}return s[7]}function M_(i,s,a,l,d,h,_){for(;null!=a;){const E=l[a.index],C=a.type;if(_&&0===s&&(E&&kr(an(E),l),a.flags|=4),64!=(64&a.flags))if(8&C)M_(i,s,a.child,l,d,h,!1),Re(s,i,d,E,h);else if(32&C){const T=qh(a,l);let R;for(;R=T();)Re(s,i,d,R,h);Re(s,i,d,E,h)}else 16&C?$l(i,s,l,a,d,h):Re(s,i,d,E,h);a=_?a.projectionNext:a.next}}function vd(i,s,a,l,d,h){M_(a,l,i.firstChild,s,d,h,!1)}function $l(i,s,a,l,d,h){const _=a[16],C=_[6].projection[l.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)Re(s,i,d,C[T],h);else M_(i,s,C,_[3],d,h,!0)}function mI(i,s,a){Mn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function AE(i,s,a){Mn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function xE(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===l||i.charCodeAt(d+h)<=32)return d}a=d+1}}const _I="ng-template";function Px(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==xE(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function RE(i){return 4===i.type&&i.value!==_I}function Ox(i,s,a){return s===(4!==i.type||a?i.value:_I)}function kx(i,s,a){let l=4;const d=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if(bp(i[s]))return s;return i.length}(d);let _=!1;for(let E=0;E<s.length;E++){const C=s[E];if("number"!=typeof C){if(!_)if(4&l){if(l=2|1&l,""!==C&&!Ox(i,C,a)||""===C&&1===s.length){if(ua(l))return!1;_=!0}}else{const T=8&l?C:s[++E];if(8&l&&null!==i.attrs){if(!Px(i.attrs,T,a)){if(ua(l))return!1;_=!0}continue}const P=NE(8&l?"class":C,d,RE(i),a);if(-1===P){if(ua(l))return!1;_=!0;continue}if(""!==T){let F;F=P>h?"":d[P+1].toLowerCase();const W=8&l?F:null;if(W&&-1!==xE(W,T,0)||2&l&&T!==F){if(ua(l))return!1;_=!0}}}}else{if(!_&&!ua(l)&&!ua(C))return!1;if(_&&ua(C))continue;_=!1,l=C|1&l}}return ua(l)||_}function ua(i){return 0==(1&i)}function NE(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let h=!1;for(;d<s.length;){const _=s[d];if(_===i)return d;if(3===_||6===_)h=!0;else{if(1===_||2===_){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function yI(i,s,a=!1){for(let l=0;l<s.length;l++)if(kx(i,s[l],a))return!0;return!1}function EI(i,s){return i?":not("+s.trim()+")":s}function Vx(i){let s=i[0],a=1,l=2,d="",h=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!ua(_)&&(s+=EI(h,d),d=""),l=_,h=h||!ua(l);a++}return""!==d&&(s+=EI(h,d)),s}const kt={};function Zh(i){bI($t(),De(),qr()+i,Jo())}function bI(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Xo(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Un(s,h,0,a)}mo(a)}function P_(i,s){return i<<17|s<<2}function la(i){return i>>17&32767}function k_(i){return 2|i}function ju(i){return(131068&i)>>2}function ME(i,s){return-131069&i|s<<2}function PE(i){return 1|i}function VE(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],h=a[l+1];if(-1!==h){const _=i.data[h];Ls(d),_.contentQueries(2,s[h],h)}}}function cg(i,s,a,l,d,h,_,E,C,T){const R=s.blueprint.slice();return R[0]=d,R[2]=140|l,Gr(R),R[3]=R[15]=i,R[8]=a,R[10]=_||i&&i[10],R[11]=E||i&&i[11],R[12]=C||i&&i[12]||null,R[9]=T||i&&i[9]||null,R[6]=h,R[16]=2==s.type?i[16]:R,R}function Xh(i,s,a,l,d){let h=i.data[s];if(null===h)h=function(i,s,a,l,d){const h=Ma(),_=Qo(),C=i.data[s]=function(i,s,a,l,d,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?h:h&&h.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=C),null!==h&&(_?null==h.child&&null!==C.parent&&(h.child=C):null===h.next&&(h.next=C)),C}(i,s,a,l,d),bt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=d;const _=function(){const i=bt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===_?-1:_.injectorIndex}return ni(h,!0),h}function ef(i,s,a,l){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function tf(i,s,a){_l(s);try{const l=i.viewQuery;null!==l&&tw(1,l,a);const d=i.template;null!==d&&Cd(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&VE(i,s),i.staticViewQueries&&tw(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)tR(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Au()}}function Hl(i,s,a,l){const d=s[2];if(256==(256&d))return;_l(s);const h=Jo();try{Gr(s),function(i){bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Cd(i,s,a,2,l);const _=3==(3&d);if(!h)if(_){const T=i.preOrderCheckHooks;null!==T&&Xo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Un(s,T,0,null),vl(s,0)}if(function(i){for(let s=N(i);null!==s;s=q(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],h=d[3];0==(1024&d[2])&&bu(h,1),d[2]|=1024}}}(s),function(i){for(let s=N(i);null!==s;s=q(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];wu(l)&&Hl(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&VE(i,s),!h)if(_){const T=i.contentCheckHooks;null!==T&&Xo(s,T)}else{const T=i.contentHooks;null!==T&&Un(s,T,1),vl(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)mo(~d);else{const h=d,_=a[++l],E=a[++l];gl(_,h),E(2,s[h])}}}finally{mo(-1)}}(i,s);const E=i.components;null!==E&&function(i,s){for(let a=0;a<s.length;a++)YE(i,s[a])}(s,E);const C=i.viewQuery;if(null!==C&&tw(2,C,l),!h)if(_){const T=i.viewCheckHooks;null!==T&&Xo(s,T)}else{const T=i.viewHooks;null!==T&&Un(s,T,2),vl(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,bu(s[3],-1))}finally{Au()}}function V_(i,s,a,l){const d=s[10],h=!Jo(),_=Eu(s);try{h&&!_&&d.begin&&d.begin(),_&&tf(i,s,l),Hl(i,s,a,l)}finally{h&&!_&&d.end&&d.end()}}function Cd(i,s,a,l,d){const h=qr(),_=2&l;try{mo(-1),_&&s.length>20&&bI(i,s,20,Jo()),a(l,d)}finally{mo(h)}}function Id(i,s,a){!pp()||(function(i,s,a,l){const d=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Vs(a,s),kr(l,s);const _=a.initialInputs;for(let E=d;E<h;E++){const C=i.data[E],T=fs(C);T&&Xx(s,a,C);const R=Bn(s,i,E,a);kr(R,s),null!==_&&GI(0,E-d,R,C,0,_),T&&(Hr(a.index,s)[8]=R)}}(i,s,a,fn(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,E=bt.lFrame.currentDirectiveIndex;try{mo(_);for(let C=l;C<d;C++){const T=i.data[C],R=s[C];Iu(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&UI(T,R)}}finally{mo(-1),Iu(E)}}(i,s,a))}function BE(i,s,a=fn){const l=s.localNames;if(null!==l){let d=s.index+1;for(let h=0;h<l.length;h+=2){const _=l[h+1],E=-1===_?a(s,i):i[_];i[d++]=E}}}function MI(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Gl(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Gl(i,s,a,l,d,h,_,E,C,T){const R=20+l,P=R+d,F=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:kt);return a}(R,P),W="function"==typeof T?T():T;return F[1]={type:i,blueprint:F,template:a,queries:null,viewQuery:E,declTNode:s,data:F.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:W,incompleteFirstPass:!1}}function HE(i,s,a,l){const d=nw(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&rw(i).push(l,d.length-1))}function GE(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function Cs(i,s,a,l,d,h,_,E){const C=fn(s,a);let R,T=s.inputs;!E&&null!=T&&(R=T[l])?(ZI(i,a,R,l,d),ul(s)&&function(i,s){const a=Hr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,s.value||"",l):d,Mn(h)?h.setProperty(C,l,d):_s(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}function dg(i,s,a,l){let d=!1;if(pp()){const h=function(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let h=0;h<l.length;h++){const _=l[h];yI(a,_.selectors,!1)&&(d||(d=[]),Ni(Vs(a,s),i,_.type),fs(_)?(KE(i,a),d.unshift(_)):d.push(_))}return d}(i,s,a),_=null===l?null:{"":-1};if(null!==h){d=!0,$I(a,i.data.length,h.length);for(let R=0;R<h.length;R++){const P=h[R];P.providersResolver&&P.providersResolver(P)}let E=!1,C=!1,T=ef(i,s,h.length,null);for(let R=0;R<h.length;R++){const P=h[R];a.mergedAttrs=Zc(a.mergedAttrs,P.hostAttrs),HI(i,a,s,T,P),jI(T,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const F=P.type.prototype;!E&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!C&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function(i,s){const l=s.directiveEnd,d=i.data,h=s.attrs,_=[];let E=null,C=null;for(let T=s.directiveStart;T<l;T++){const R=d[T],P=R.inputs,F=null===h||RE(s)?null:WI(P,h);_.push(F),E=GE(P,T,E),C=GE(R.outputs,T,C)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=C}(i,a)}_&&function(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new fe("301",`Export of name '${s[d+1]}' not found!`);l.push(s[d],h)}}}(a,l,_)}return a.mergedAttrs=Zc(a.mergedAttrs,a.attrs),d}function LI(i,s,a,l,d,h){const _=h.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const C=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(l,d,_)}}function UI(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function KE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function jI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;fs(s)&&(a[""]=i)}}function $I(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function HI(i,s,a,l,d){i.data[l]=d;const h=d.factory||(d.factory=qo(d.type)),_=new ea(h,fs(d),null);i.blueprint[l]=_,a[l]=_,LI(i,s,0,l,ef(i,a,d.hostVars,kt),d)}function Xx(i,s,a){const l=fn(s,i),d=MI(a),h=i[10],_=Wl(i,cg(i,d,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=_}function eu(i,s,a,l,d,h){const _=fn(i,s);!function(i,s,a,l,d,h,_){if(null==h)Mn(i)?i.removeAttribute(s,d,a):s.removeAttribute(d);else{const E=null==_?oe(h):_(h,l||"",d);Mn(i)?i.setAttribute(s,d,E,a):a?s.setAttributeNS(a,d,E):s.setAttribute(d,E)}}(s[11],_,h,i.value,a,l,d)}function GI(i,s,a,l,d,h){const _=h[s];if(null!==_){const E=l.setInput;for(let C=0;C<_.length;){const T=_[C++],R=_[C++],P=_[C++];null!==E?l.setInput(a,P,T,R):a[R]=P}}}function WI(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function qI(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function YE(i,s){const a=Hr(s,i);if(wu(a)){const l=a[1];80&a[2]?Hl(l,a,l.template,a[8]):a[5]>0&&QE(a)}}function QE(i){for(let l=N(i);null!==l;l=q(l))for(let d=10;d<l.length;d++){const h=l[d];if(1024&h[2]){const _=h[1];Hl(_,h,_.template,h[8])}else h[5]>0&&QE(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Hr(a[l],i);wu(d)&&d[5]>0&&QE(d)}}function tR(i,s){const a=Hr(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),tf(l,a,a[8])}function Wl(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function fg(i){for(;i;){i[2]|=64;const s=g(i);if(Ai(i)&&!s)return i;i=s}return null}function XE(i,s,a){const l=s[10];l.begin&&l.begin();try{Hl(i,s,i.template,a)}catch(d){throw sw(s,d),d}finally{l.end&&l.end()}}function zI(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Jp(a),d=l[1];V_(d,l,d.template,a)}}(i[8])}function tw(i,s,a){Ls(0),s(i,a)}const iR=(()=>Promise.resolve(null))();function nw(i){return i[7]||(i[7]=[])}function rw(i){return i.cleanup||(i.cleanup=[])}function sw(i,s){const a=i[9],l=a?a.get(Bl,null):null;l&&l.handleError(s)}function ZI(i,s,a,l,d){for(let h=0;h<a.length;){const _=a[h++],E=a[h++],C=s[_],T=i.data[_];null!==T.setInput?T.setInput(C,d,l,E):C[E]=d}}function tu(i,s,a){const l=yu(s,i);!function(i,s,a){Mn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function pg(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?h=E:1==h?d=ne(d,E):2==h&&(l=ne(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Td=new On("INJECTOR",-1);class wn{get(s,a=zt){if(a===zt){const l=new Error(`NullInjectorError: No provider for ${J(s)}!`);throw l.name="NullInjectorError",l}return a}}const nn=new On("Set Injector scope."),Gt={},ql={};let Dn;function j_(){return void 0===Dn&&(Dn=new wn),Dn}function rf(i,s=null,a=null,l){return new QI(i,a,s||j_(),l)}class QI{constructor(s,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&ki(a,E=>this.processProvider(E,s,a)),ki([s],E=>this.processInjectorType(E,[],h)),this.records.set(Td,zl(void 0,this));const _=this.records.get(nn);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof s?null:J(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=zt,l=Ze.Default){this.assertNotDestroyed();const d=Ot(this),h=pr(void 0);try{if(!(l&Ze.SkipSelf)){let E=this.records.get(s);if(void 0===E){const C=("function"==typeof(i=s)||"object"==typeof i&&i instanceof On)&&sn(s);E=C&&this.injectableDefInScope(C)?zl($n(s),Gt):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&Ze.Self?j_():this.parent).get(s,a=l&Ze.Optional&&a===zt?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Dr]=_[Dr]||[]).unshift(J(s)),d)throw _;return es(_,s,"R3InjectorError",this.source)}throw _}finally{pr(h),Ot(d)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,d)=>s.push(J(d))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=B(s)))return!1;let d=io(s);const h=null==d&&s.ngModule||void 0,_=void 0===h?s:h,E=-1!==l.indexOf(_);if(void 0!==h&&(d=io(h)),null==d)return!1;if(null!=d.imports&&!E){let R;l.push(_);try{ki(d.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===R&&(R=[]),R.push(P))})}finally{}if(void 0!==R)for(let P=0;P<R.length;P++){const{ngModule:F,providers:W}=R[P];ki(W,Y=>this.processProvider(Y,F,W||Pt))}}this.injectorDefTypes.add(_);const C=qo(_)||(()=>new _);this.records.set(_,zl(C,Gt));const T=d.providers;if(null!=T&&!E){const R=s;ki(T,P=>this.processProvider(P,R,T))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let d=sf(s=B(s))?s:B(s&&s.provide);const h=qs(i=s)?zl(void 0,i.useValue):zl(JI(i),Gt);var i;if(sf(s)||!0!==s.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=zl(void 0,Gt,!0),_.factory=()=>ku(_.multi),this.records.set(d,_)),d=s,_.multi.push(s)}this.records.set(d,h)}hydrate(s,a){return a.value===Gt&&(a.value=ql,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=B(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function $n(i){const s=sn(i),a=null!==s?s.factory:qo(i);if(null!==a)return a;if(i instanceof On)throw new Error(`Token ${J(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=function(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${J(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[ar]||i[Me]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function JI(i,s,a){let l;if(sf(i)){const d=B(i);return qo(d)||$n(d)}if(qs(i))l=()=>B(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...ku(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>Tn(B(i.useExisting));else{const d=B(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return qo(d)||$n(d);l=()=>new d(...ku(i.deps))}return l}function zl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function qs(i){return null!==i&&"object"==typeof i&&So in i}function sf(i){return"function"==typeof i}const aw=function(i,s,a){return function(i,s=null,a=null,l){const d=rf(i,s,a,l);return d._resolveInjectorDefTypes(),d}({name:a},s,i,a)};let sr=(()=>{class i{static create(a,l){return Array.isArray(a)?aw(a,l,""):aw(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=zt,i.NULL=new wn,i.\u0275prov=Tt({token:i,providedIn:"any",factory:()=>Tn(Td)}),i.__NG_ELEMENT_ID__=-1,i})();function pw(i,s){La(Jp(i)[1],xn())}function mw(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(fs(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");d=s.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=G_(i.inputs),_.declaredInputs=G_(i.declaredInputs),_.outputs=G_(i.outputs);const E=d.hostBindings;E&&yg(i,E);const C=d.viewQuery,T=d.contentQueries;if(C&&cT(i,C),T&&lf(i,T),me(i.inputs,d.inputs),me(i.declaredInputs,d.declaredInputs),me(i.outputs,d.outputs),fs(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let _=0;_<h.length;_++){const E=h[_];E&&E.ngInherit&&E(i),E===mw&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Zc(d.hostAttrs,a=Zc(a,d.hostAttrs))}}(l)}function G_(i){return i===un?{}:i===Pt?[]:i}function cT(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function lf(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,h)=>{s(l,d,h),a(l,d,h)}:s}function yg(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Zl=null;function cf(){if(!Zl){const i=Et.Symbol;if(i&&i.iterator)Zl=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Zl=l)}}}return Zl}class ga{constructor(s){this.wrapped=s}static wrap(s){return new ga(s)}static unwrap(s){return ga.isWrapped(s)?s.wrapped:s}static isWrapped(s){return s instanceof ga}}function wg(i){return!!vw(i)&&(Array.isArray(i)||!(i instanceof Map)&&cf()in i)}function vw(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Qr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Yl(i,s,a,l){const d=Qr(i,s,a);return Qr(i,s+1,l)||d}function Ew(i,s,a,l){const d=De();return Qr(d,xi(),s)&&($t(),eu(Pn(),d,i,s,a,l)),Ew}function hT(i,s,a,l,d,h,_,E){const C=De(),T=$t(),R=i+20,P=T.firstCreatePass?function(i,s,a,l,d,h,_,E,C){const T=s.consts,R=Xh(s,i,4,_||null,Qi(T,E));dg(s,a,R,Qi(T,C)),La(s,R);const P=R.tViews=Gl(2,R,l,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),P.queries=s.queries.embeddedTView(R)),R}(R,T,C,s,a,l,d,h,_):T.data[R];ni(P,!1);const F=C[11].createComment("");ug(T,C,F,P),kr(F,C),Wl(C,C[R]=qI(F,C,F,P)),fu(P)&&Id(T,C,P),null!=_&&BE(C,P,E)}function Ag(i,s=Ze.Default){const a=De();return null===a?Tn(i,s):Ji(xn(),a,B(i),s)}function ty(i,s,a){const l=De();return Qr(l,xi(),s)&&Cs($t(),Pn(),l,i,s,l[11],a,!1),ty}function _f(i,s,a,l,d){const _=d?"class":"style";ZI(i,a,s.inputs[_],_,l)}function ny(i,s,a,l){const d=De(),h=$t(),_=20+i,E=d[11],C=d[_]=yr(E,s,bt.lFrame.currentNamespace),T=h.firstCreatePass?function(i,s,a,l,d,h,_){const E=s.consts,T=Xh(s,i,2,d,Qi(E,h));return dg(s,a,T,Qi(E,_)),null!==T.attrs&&pg(T,T.attrs,!1),null!==T.mergedAttrs&&pg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(_,h,d,0,s,a,l):h.data[_];ni(T,!0);const R=T.mergedAttrs;null!==R&&Kc(E,C,R);const P=T.classes;null!==P&&AE(E,C,P);const F=T.styles;null!==F&&mI(E,C,F),64!=(64&T.flags)&&ug(h,d,C,T),0===bt.lFrame.elementDepthCount&&kr(C,d),bt.lFrame.elementDepthCount++,fu(T)&&(Id(h,d,T),function(i,s,a){if(al(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const _=i.data[h];_.contentQueries&&_.contentQueries(1,a[h],h)}}}(h,T,d)),null!==l&&BE(d,T)}function xw(){let i=xn();Qo()?bt.lFrame.isParent=!1:(i=i.parent,ni(i,!1));const s=i;bt.lFrame.elementDepthCount--;const a=$t();a.firstCreatePass&&(La(a,i),al(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&_f(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&_f(a,s,De(),s.stylesWithoutHost,!1)}function Rw(i,s,a,l){ny(i,s,a,l),xw()}function ST(){return De()}function Nw(i){return!!i&&"function"==typeof i.then}function AT(i){return!!i&&"function"==typeof i.subscribe}const ry=AT;function Mw(i,s,a,l){const d=De(),h=$t(),_=xn();return function(i,s,a,l,d,h,_,E){const C=fu(l),R=i.firstCreatePass&&rw(i),P=s[8],F=nw(s);let W=!0;if(3&l.type||E){const ie=fn(l,s),Oe=E?E(ie):ie,Ce=F.length,lt=E?it=>E(an(it[l.index])):l.index;if(Mn(a)){let it=null;if(!E&&C&&(it=function(i,s,a,l){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const _=d[h];if(_===a&&d[h+1]===l){const E=s[7],C=d[h+2];return E.length>C?E[C]:null}"string"==typeof _&&(h+=2)}return null}(i,s,d,l.index)),null!==it)(it.__ngLastListenerFn__||it).__ngNextListenerFn__=h,it.__ngLastListenerFn__=h,W=!1;else{h=yf(l,s,P,h,!1);const qt=a.listen(Oe,d,h);F.push(h,qt),R&&R.push(d,lt,Ce,Ce+1)}}else h=yf(l,s,P,h,!0),Oe.addEventListener(d,h,_),F.push(h),R&&R.push(d,lt,Ce,_)}else h=yf(l,s,P,h,!1);const Y=l.outputs;let de;if(W&&null!==Y&&(de=Y[d])){const ie=de.length;if(ie)for(let Oe=0;Oe<ie;Oe+=2){const Hn=s[de[Oe]][de[Oe+1]].subscribe(h),Ss=F.length;F.push(h,Hn),R&&R.push(d,l.index,Ss,-(Ss+1))}}}(h,d,d[11],_,i,s,!!a,l),Mw}function Ow(i,s,a,l){try{return!1!==a(l)}catch(d){return sw(i,d),!1}}function yf(i,s,a,l,d){return function h(_){if(_===Function)return l;const E=2&i.flags?Hr(i.index,s):s;0==(32&s[2])&&fg(E);let C=Ow(s,0,l,_),T=h.__ngNextListenerFn__;for(;T;)C=Ow(s,0,T,_)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function kw(i=1){return function(i){return(bt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,bt.lFrame.contextLView))[8]}(i)}function PT(i,s,a,l,d){const h=i[a+1],_=null===s;let E=l?la(h):ju(h),C=!1;for(;0!==E&&(!1===C||_);){const R=i[E+1];OT(i[E],s)&&(C=!0,i[E+1]=l?PE(R):k_(R)),E=l?la(R):ju(R)}C&&(i[a+1]=l?k_(h):PE(h))}function OT(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&To(i,s)>=0}function ay(i,s){return function(i,s,a,l){const d=De(),h=$t(),_=ri(2);h.firstUpdatePass&&function(i,s,a,l){const d=i.data;if(null===d[a+1]){const h=d[qr()],_=function(i,s){return s>=i.expandoStartIndex}(i,a);(function(i,s){return 0!=(i.flags&(s?16:32))})(h,l)&&null===s&&!_&&(s=!1),s=function(i,s,a,l){const d=function(i){const s=bt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=wf(a=Gw(null,i,s,a,l),s.attrs,l),h=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Gw(d,i,s,a,l),null===h){let C=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ju(l))return i[la(l)]}(i,s,l);void 0!==C&&Array.isArray(C)&&(C=Gw(null,i,s,C[1],l),C=wf(C,s.attrs,l),function(i,s,a,l){i[la(a?s.classBindings:s.styleBindings)]=l}(i,s,l,C))}else h=function(i,s,a){let l;const d=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<d;h++)l=wf(l,i[h].hostAttrs,a);return wf(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(d,h,s,l),function(i,s,a,l,d,h){let _=h?s.classBindings:s.styleBindings,E=la(_),C=ju(_);i[l]=a;let R,T=!1;if(Array.isArray(a)){const P=a;R=P[1],(null===R||To(P,R)>0)&&(T=!0)}else R=a;if(d)if(0!==C){const F=la(i[E+1]);i[l+1]=P_(F,E),0!==F&&(i[F+1]=ME(i[F+1],l)),i[E+1]=function(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=P_(E,0),0!==E&&(i[E+1]=ME(i[E+1],l)),E=l;else i[l+1]=P_(C,0),0===E?E=l:i[C+1]=ME(i[C+1],l),C=l;T&&(i[l+1]=k_(i[l+1])),PT(i,R,l,!0),PT(i,R,l,!1),function(i,s,a,l,d){const h=d?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&To(h,s)>=0&&(a[l+1]=PE(a[l+1]))}(s,R,i,l,h),_=P_(E,C),h?s.classBindings=_:s.styleBindings=_}(d,h,s,a,_,l)}}(h,i,_,l),s!==kt&&Qr(d,_,s)&&function(i,s,a,l,d,h,_,E){if(!(3&s.type))return;const C=i.data,T=C[E+1];bf(function(i){return 1==(1&i)}(T)?cy(C,s,a,d,ju(T),_):void 0)||(bf(h)||function(i){return 2==(2&i)}(T)&&(h=cy(C,null,a,d,E,_)),function(i,s,a,l,d){const h=Mn(i);if(s)d?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:Ro.DashCase;if(null==d)h?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),_|=Ro.Important),h?i.setStyle(a,l,d,_):a.style.setProperty(l,d,E?"important":"")}}}(l,_,yu(qr(),a),d,h))}(h,h.data[qr()],d,d[11],i,d[_+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=J(ia(i)))),i}(s,a),l,_)}(i,s,null,!0),ay}function Gw(i,s,a,l,d){let h=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(h=s[E],l=wf(l,h.hostAttrs,d),h!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function wf(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let h=0;h<s.length;h++){const _=s[h];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),jn(i,_,!!a||s[++h]))}return void 0===i?null:i}function cy(i,s,a,l,d,h){const _=null===s;let E;for(;d>0;){const C=i[d],T=Array.isArray(C),R=T?C[1]:C,P=null===R;let F=a[d+1];F===kt&&(F=P?Pt:void 0);let W=P?Kr(F,l):R===l?F:void 0;if(T&&!bf(W)&&(W=Kr(C,l)),bf(W)&&(E=W,_))return E;const Y=i[d+1];d=_?la(Y):ju(Y)}if(null!==s){let C=h?s.residualClasses:s.residualStyles;null!=C&&(E=Kr(C,l))}return E}function bf(i){return void 0!==i}function hy(i,s=""){const a=De(),l=$t(),d=i+20,h=l.firstCreatePass?Xh(l,d,1,s,null):l.data[d],_=a[d]=function(i,s){return Mn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);ug(l,a,_,h),ni(h,!1)}function fy(i){return py("",i,""),fy}function py(i,s,a){const l=De(),d=function(i,s,a,l){return Qr(i,xi(),a)?s+oe(a)+l:kt}(l,i,s,a);return d!==kt&&tu(l,qr(),d),py}function Cf(i,s,a,l,d){const h=De(),_=function(i,s,a,l,d,h){const E=Yl(i,Wr(),a,d);return ri(2),E?s+oe(a)+l+oe(d)+h:kt}(h,i,s,a,l,d);return _!==kt&&tu(h,qr(),_),Cf}function yy(i,s,a){const l=De();return Qr(l,xi(),s)&&Cs($t(),Pn(),l,i,s,l[11],a,!0),yy}const Od=void 0;var vy=["en",[["a","p"],["AM","PM"],Od],[["AM","PM"],Od,Od],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Od,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Od,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Od,"{1} 'at' {0}",Od],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Df={};function e0(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=t0(s);if(a)return a;const l=s.split("-")[0];if(a=t0(l),a)return a;if("en"===l)return vy;throw new Error(`Missing locale data for the locale "${i}".`)}function eD(i){return e0(i)[vt.PluralCase]}function t0(i){return i in Df||(Df[i]=Et.ng&&Et.ng.common&&Et.ng.common.locales&&Et.ng.common.locales[i]),Df[i]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Ey="en-US";let nD=Ey;function oc(i){Xt(i,"Expected localeId to be defined"),"string"==typeof i&&(nD=i.toLowerCase().replace(/_/g,"-"))}function w0(i,s,a,l,d){if(i=B(i),Array.isArray(i))for(let h=0;h<i.length;h++)w0(i[h],s,a,l,d);else{const h=$t(),_=De();let E=sf(i)?i:B(i.provide),C=JI(i);const T=xn(),R=1048575&T.providerIndexes,P=T.directiveStart,F=T.providerIndexes>>20;if(sf(i)||!i.multi){const W=new ea(C,d,Ag),Y=C0(E,s,d?R:R+F,P);-1===Y?(Ni(Vs(T,_),h,E),b0(h,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(W),_.push(W)):(a[Y]=W,_[Y]=W)}else{const W=C0(E,s,R+F,P),Y=C0(E,s,R,R+F),de=W>=0&&a[W],ie=Y>=0&&a[Y];if(d&&!ie||!d&&!de){Ni(Vs(T,_),h,E);const Oe=function(i,s,a,l,d){const h=new ea(i,a,Ag);return h.multi=[],h.index=s,h.componentProviders=0,wD(h,d,l&&!a),h}(d?C1:b1,a.length,d,l,C);!d&&ie&&(a[Y].providerFactory=Oe),b0(h,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Oe),_.push(Oe)}else b0(h,i,W>-1?W:Y,wD(a[d?Y:W],C,!d&&l));!d&&l&&ie&&a[Y].componentProviders++}}}function b0(i,s,a,l){const d=sf(s);if(d||function(i){return!!i.useClass}(s)){const _=(s.useClass||s).prototype.ngOnDestroy;if(_){const E=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const C=E.indexOf(a);-1===C?E.push(a,[l,_]):E[C+1].push(l,_)}else E.push(a,_)}}}function wD(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function C0(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function b1(i,s,a,l){return I0(this.multi,[])}function C1(i,s,a,l){const d=this.multi;let h;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Bn(a,a[1],this.providerFactory.index,l);h=E.slice(0,_),I0(d,h);for(let C=_;C<E.length;C++)h.push(E[C])}else h=[],I0(d,h);return h}function I0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function bD(i,s=[]){return a=>{a.providersResolver=(l,d)=>function(i,s,a){const l=$t();if(l.firstCreatePass){const d=fs(i);w0(a,l.data,l.blueprint,d,!0),w0(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class ID{}const DD="ngComponent";class cc{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${J(i)}. Did you add it to @NgModule.entryComponents?`);return s[DD]=i,s}(s)}}let wr=(()=>{class i{}return i.NULL=new cc,i})();function Cy(...i){}function Rf(i,s){return new iu(fn(i,s))}const DN=function(){return Rf(xn(),De())};let iu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=DN,i})();function SD(i){return i instanceof iu?i.nativeElement:i}class Bg{}let SN=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>RD(),i})();const RD=function(){const i=De(),a=Hr(xn().index,i);return function(i){return i[11]}(Si(a)?a:i)};let ND=(()=>{class i{}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:()=>null}),i})();class MD{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const jg=new MD("12.2.16");class xN{constructor(){}supports(s){return wg(s)}create(s){return new RN(s)}}const D1=(i,s)=>s;class RN{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||D1}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,h=null;for(;a||l;){const _=!l||a&&a.currentIndex<MN(l,d,h)?a:l,E=MN(_,d,h),C=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{h||(h=[]);const T=E-d,R=C-d;if(T!=R){for(let F=0;F<T;F++){const W=F<h.length?h[F]:h[F]=0,Y=W+F;R<=Y&&Y<T&&(h[F]=W+1)}h[_.previousIndex]=R-T}}E!==C&&s(_,E,C)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!wg(s))throw new Error(`Error trying to diff '${J(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)h=s[E],_=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,h,_,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,_,E),l=!0),a=a._next}else d=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[cf()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new A1(a,l),h,d),s}_verifyReinsertion(s,a,l,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new NN),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new NN),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class A1{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class x1{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class NN{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new x1,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function MN(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class PN{constructor(){}supports(s){return s instanceof Map||vw(s)}create(){return new R1}}class R1{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||vw(s)))throw new Error(`Error trying to diff '${J(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,_=d._next;return h&&(h._next=_),_&&(_._prev=h),d._next=null,d._prev=null,d}const l=new N1(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class N1{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ON(){return new $g([new xN])}let $g=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||ON()),deps:[[i,new Zr,new ra]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:ON}),i})();function PD(){return new xr([new PN])}let xr=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||PD()),deps:[[i,new Zr,new ra]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:PD}),i})();function Ts(i,s,a,l,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(an(h)),mn(h))for(let E=10;E<h.length;E++){const C=h[E],T=C[1].firstChild;null!==T&&Ts(C[1],C,T,l)}const _=a.type;if(8&_)Ts(i,s,a.child,l);else if(32&_){const E=qh(a,s);let C;for(;C=E();)l.push(C)}else if(16&_){const E=TE(s,a);if(Array.isArray(E))l.push(...E);else{const C=g(s[16]);Ts(C[1],C,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class dc{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Ts(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(mn(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(_d(s,l),bo(a,l))}this._attachedToViewContainer=!1}Kh(this._lView[1],this._lView)}onDestroy(s){HE(this._lView[1],this._lView,null,s)}markForCheck(){fg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){XE(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){Oa(!0);try{XE(i,s,a)}finally{Oa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,vd(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class T0 extends dc{constructor(s){super(s),this._view=s}detectChanges(){zI(this._view)}checkNoChanges(){!function(i){Oa(!0);try{zI(i)}finally{Oa(!1)}}(this._view)}get context(){return null}}const LN=function(i){return function(i,s,a){if(ul(i)&&!a){const l=Hr(i.index,s);return new dc(l,l)}return 47&i.type?new dc(s[16],s):null}(xn(),De(),16==(16&i))};let OD=(()=>{class i{}return i.__NG_ELEMENT_ID__=LN,i})();const BN=[new PN],ss=new $g([new xN]),Dy=new xr(BN),D0=function(){return Sy(xn(),De())};let hc=(()=>{class i{}return i.__NG_ELEMENT_ID__=D0,i})();const S0=hc,A0=class extends S0{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=cg(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),tf(a,l,s),new dc(l)}};function Sy(i,s){return 4&i.type?new A0(s,i,Rf(i,s)):null}class Ld{}class FD{}const LD=function(){return R0(xn(),De())};let Vd=(()=>{class i{}return i.__NG_ELEMENT_ID__=LD,i})();const GN=Vd,UD=class extends GN{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Rf(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const s=ut(this._hostTNode,this._hostLView);if(Ru(s)){const a=yo(s,this._hostLView),l=Va(s);return new Eo(a[1].data[l+8],a)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=BD(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const d=s.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(s,a,l,d,h){const _=l||this.parentInjector;if(!h&&null==s.ngModule&&_){const C=_.get(Ld,null);C&&(h=C)}const E=s.create(_,d,void 0,h);return this.insert(E.hostView,a),E}insert(s,a){const l=s._lView,d=l[1];if(mn(l[3])){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const P=l[3],F=new UD(P,P[6],P[3]);F.detach(F.indexOf(s))}}const h=this._adjustIndex(a),_=this._lContainer;!function(i,s,a,l){const d=10+l,h=a.length;l>0&&(a[d-1][4]=s),l<h-10?(s[4]=a[d],Es(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(d,l,_,h);const E=DE(h,_),C=l[11],T=S_(C,_[7]);return null!==T&&function(i,s,a,l,d,h){l[0]=d,l[6]=s,vd(i,l,a,1,d,h)}(d,_[6],C,l,T,E),s.attachToViewContainerRef(),Es(x0(_),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=BD(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=_d(this._lContainer,a);l&&(bo(x0(this._lContainer),a),Kh(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=_d(this._lContainer,a);return l&&null!=bo(x0(this._lContainer),a)?new dc(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function BD(i){return i[8]}function x0(i){return i[8]||(i[8]=[])}function R0(i,s){let a;const l=s[i.index];if(mn(l))a=l;else{let d;if(8&i.type)d=an(l);else{const h=s[11];d=h.createComment("");const _=fn(i,s);jl(h,S_(h,_),d,function(i,s){return Mn(i)?i.nextSibling(s):s.nextSibling}(h,_),!1)}s[i.index]=a=qI(l,s,d,i),Wl(s,a)}return new UD(a,i,s)}const Bo={};class em extends wr{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=dt(s);return new cS(a,this.ngModule)}}function Qu(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const Ui=new On("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Gh});class cS extends ID{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(Vx).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Qu(this.componentDef.inputs)}get outputs(){return Qu(this.componentDef.outputs)}create(s,a,l,d){const h=(d=d||this.ngModule)?function(i,s){return{get:(a,l,d)=>{const h=i.get(a,Bo,d);return h!==Bo||l===Bo?h:s.get(a,l,d)}}}(s,d.injector):s,_=h.get(Bg,Ko),E=h.get(ND,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",R=l?function(i,s,a){if(Mn(i))return i.selectRootElement(s,a===He.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(C,l,this.componentDef.encapsulation):yr(_.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),P=this.componentDef.onPush?576:528,F=function(i,s){return{components:[],scheduler:i||Gh,clean:iR,playerHandler:s||null,flags:0}}(),W=Gl(0,null,null,1,0,null,null,null,null,null),Y=cg(null,W,F,P,null,null,_,C,E,h);let de,ie;_l(Y);try{const Oe=function(i,s,a,l,d,h){const _=a[1];a[20]=i;const C=Xh(_,20,2,"#host",null),T=C.mergedAttrs=s.hostAttrs;null!==T&&(pg(C,T,!0),null!==i&&(Kc(d,i,T),null!==C.classes&&AE(d,i,C.classes),null!==C.styles&&mI(d,i,C.styles)));const R=l.createRenderer(i,s),P=cg(a,MI(s),null,s.onPush?64:16,a[20],C,l,R,h||null,null);return _.firstCreatePass&&(Ni(Vs(C,a),_,s.type),KE(_,C),$I(C,a.length,1)),Wl(a,P),a[20]=P}(R,this.componentDef,Y,_,C);if(R)if(l)Kc(C,R,["ng-version",jg.full]);else{const{attrs:Ce,classes:lt}=function(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++l]):8===d&&a.push(h);else{if(!ua(d))break;d=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ce&&Kc(C,R,Ce),lt&&lt.length>0&&AE(C,R,lt.join(" "))}if(ie=vu(W,20),void 0!==a){const Ce=ie.projection=[];for(let lt=0;lt<this.ngContentSelectors.length;lt++){const it=a[lt];Ce.push(null!=it?Array.from(it):null)}}de=function(i,s,a,l,d){const h=a[1],_=function(i,s,a){const l=xn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),HI(i,l,s,ef(i,s,1,null),a));const d=Bn(s,i,l.directiveStart,l);kr(d,s);const h=fn(l,s);return h&&kr(h,s),d}(h,a,s);if(l.components.push(_),i[8]=_,d&&d.forEach(C=>C(_,s)),s.contentQueries){const C=xn();s.contentQueries(1,_,C.directiveStart)}const E=xn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(mo(E.index),LI(a[1],E,0,E.directiveStart,E.directiveEnd,s),UI(s,_)),_}(Oe,this.componentDef,Y,F,[pw]),tf(W,Y,null)}finally{Au()}return new dS(this.componentType,de,Rf(ie,Y),Y,ie)}}class dS extends class{}{constructor(s,a,l,d,h){super(),this.location=l,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new T0(d),this.componentType=s}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const $d=new Map;class pS extends Ld{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new em(this);const l=Pr(s),d=s[_t]||null;d&&oc(d),this._bootstrapComponents=Ws(l.bootstrap),this._r3Injector=rf(s,a,[{provide:Ld,useValue:this},{provide:wr,useValue:this.componentFactoryResolver}],J(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=sr.THROW_IF_NOT_FOUND,l=Ze.Default){return s===sr||s===Ld||s===Td?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Fy extends FD{constructor(s){super(),this.moduleType=s,null!==Pr(s)&&function(i){const s=new Set;!function a(l){const d=Pr(l,!0),h=d.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${J(s)} vs ${J(s.name)}`)}(h,$d.get(h),l),$d.set(h,l));const _=Ws(d.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new pS(this.moduleType,s)}}function tm(i,s,a,l,d,h,_){const E=s+a;return Yl(i,E,d,h)?function(i,s,a){return i[s]=a}(i,E+2,_?l.call(_,d,h):l(d,h)):function(i,s){const a=i[s];return a===kt?void 0:a}(i,E+2)}function Bi(i,s){const a=$t();let l;const d=i+20;a.firstCreatePass?(l=function(i,s){if(s)for(let a=s.length-1;a>=0;a--){const l=s[a];if(i===l.name)return l}throw new fe("302",`The pipe '${i}' could not be found!`)}(s,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const h=l.factory||(l.factory=qo(l.type)),_=pr(Ag);try{const E=Ua(!1),C=h();return Ua(E),function(i,s,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=l}(a,De(),d,C),C}finally{pr(_)}}function yM(i,s,a,l){const d=i+20,h=De(),_=function(i,s){return i[s]}(h,d);return function(i,s){ga.isWrapped(s)&&(s=ga.unwrap(s),i[Wr()]=kt);return s}(h,function(i,s){return i[1].data[s].pure}(h,d)?tm(h,function(){const i=bt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,_.transform,a,l,_):_.transform(a,l))}function nm(i){return s=>{setTimeout(i,void 0,s)}}const su=class extends m.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,h,_;let E=s,C=a||(()=>null),T=l;if(s&&"object"==typeof s){const P=s;E=null===(d=P.next)||void 0===d?void 0:d.bind(P),C=null===(h=P.error)||void 0===h?void 0:h.bind(P),T=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(C=nm(C),E&&(E=nm(E)),T&&(T=nm(T)));const R=super.subscribe({next:E,error:C,complete:T});return s instanceof X.w&&s.add(R),R}};function X1(){return this._results[cf()]()}class eb{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=cf(),l=eb.prototype;l[a]||(l[a]=X1)}get changes(){return this._changes||(this._changes=new su)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=Oi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],h=s[l];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class IS{constructor(s){this.queryList=s,this.matches=null}clone(){return new IS(this.queryList)}setDirty(){this.queryList.setDirty()}}class tb{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<l;h++){const _=a.getByIndex(h);d.push(this.queries[_.indexInDeclarationView].clone())}return new tb(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==ob(s,a).matches&&this.queries[a].setDirty()}}class rm{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Gd{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,d);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new Gd(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ff{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Ff(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const h=l[d];this.matchTNodeWithReadOption(s,a,Vy(a,h)),this.matchTNodeWithReadOption(s,a,bl(a,s,h,!1,!1))}else l===hc?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,bl(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===iu||d===Vd||d===hc&&4&a.type)this.addMatch(a.index,-2);else{const h=bl(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Vy(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function nb(i,s,a,l){return-1===a?function(i,s){return 11&i.type?Rf(i,s):4&i.type?Sy(i,s):null}(s,i):-2===a?function(i,s,a){return a===iu?Rf(s,i):a===hc?Sy(s,i):a===Vd?R0(s,i):void 0}(i,s,l):Bn(i,i[1],a,s)}function TS(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const h=i.data,_=a.matches,E=[];for(let C=0;C<_.length;C+=2){const T=_[C];E.push(T<0?null:nb(s,h[T],_[C+1],a.metadata.read))}d.matches=E}return d.matches}function rb(i,s,a,l){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const _=TS(i,s,d,a);for(let E=0;E<h.length;E+=2){const C=h[E];if(C>0)l.push(_[E/2]);else{const T=h[E+1],R=s[-C];for(let P=10;P<R.length;P++){const F=R[P];F[17]===F[3]&&rb(F[1],F,T,l)}if(null!==R[9]){const P=R[9];for(let F=0;F<P.length;F++){const W=P[F];rb(W[1],W,T,l)}}}}}return l}function ib(i){const s=De(),a=$t(),l=_h();Ls(l+1);const d=ob(a,l);if(i.dirty&&Eu(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?rb(a,s,l,[]):TS(a,s,d,l);i.reset(h,SD),i.notifyOnChanges()}return!0}return!1}function sb(i,s,a,l){const d=$t();if(d.firstCreatePass){const h=xn();(function(i,s,a){null===i.queries&&(i.queries=new Gd),i.queries.track(new Ff(s,a))})(d,new rm(s,a,l),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function(i,s,a){const l=new eb(4==(4&a));HE(i,s,l,l.destroy),null===s[19]&&(s[19]=new tb),s[19].queries.push(new IS(l))}(d,De(),a)}function DS(){return i=De(),s=_h(),i[19].queries[s].queryList;var i,s}function ob(i,s){return i.queries.getByIndex(s)}const bb=new On("Application Initializer");let Wd=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Cy,this.reject=Cy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(Nw(h))a.push(h);else if(ry(h)){const _=new Promise((E,C)=>{h.subscribe({complete:E,error:C})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Tn(bb,8))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();const $M=new On("AppId"),_F={provide:$M,useFactory:function(){return`${Qy()}${Qy()}${Qy()}`},deps:[]};function Qy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zS=new On("Platform Initializer"),HM=new On("Platform ID"),GM=new On("appBootstrapListener");let WM=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();const Jy=new On("LocaleId"),KS=new On("DefaultCurrencyCode");class zM{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const Cb=function(i){return new Fy(i)},KM=Cb,Ib=function(i){return Promise.resolve(Cb(i))},sm=function(i){const s=Cb(i),l=Ws(Pr(i).declarations).reduce((d,h)=>{const _=dt(h);return _&&d.push(new cS(_)),d},[]);return new zM(s,l)},Tb=sm,Db=function(i){return Promise.resolve(sm(i))};let om=(()=>{class i{constructor(){this.compileModuleSync=KM,this.compileModuleAsync=Ib,this.compileModuleAndAllComponentsSync=Tb,this.compileModuleAndAllComponentsAsync=Db}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();const vi=(()=>Promise.resolve(0))();function Uf(i){"undefined"==typeof Zone?vi.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Fr{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new su(!1),this.onMicrotaskEmpty=new su(!1),this.onStable=new su(!1),this.onError=new su(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let i=Et.requestAnimationFrame,s=Et.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Et,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Ab(i),i.isCheckStableRunning=!0,Sb(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Ab(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,h,_,E)=>{try{return xb(i),a.invokeTask(d,h,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),tv(i)}},onInvoke:(a,l,d,h,_,E,C)=>{try{return xb(i),a.invoke(d,h,_,E,C)}finally{i.shouldCoalesceRunChangeDetection&&s(),tv(i)}},onHasTask:(a,l,d,h)=>{a.hasTask(d,h),l===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Ab(i),Sb(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fr.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Fr.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const h=this._inner,_=h.scheduleEventTask("NgZoneEvent: "+d,s,QM,Cy,Cy);try{return h.runTask(_,a,l)}finally{h.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const QM={};function Sb(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Ab(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function xb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function tv(i){i._nesting--,Sb(i)}class nv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new su,this.onMicrotaskEmpty=new su,this.onStable=new su,this.onError=new su}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}let Rb=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fr.assertNotInAngularZone(),Uf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Uf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Tn(Fr))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})(),ji=(()=>{class i{constructor(){this._applications=new Map,rv.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return rv.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();class Nb{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function as(i){rv=i}let rv=new Nb,Mb=!0,iv=!1;function sv(){return iv=!0,Mb}function JS(){if(iv)throw new Error("Cannot enable prod mode after platform setup.");Mb=!1}let $o;const um=new On("AllowMultipleToken");class kb{constructor(s,a){this.name=s,this.token=a}}function ov(i,s,a=[]){const l=`Platform: ${s}`,d=new On(l);return(h=[])=>{let _=av();if(!_||_.injector.get(um,!1))if(i)i(a.concat(h).concat({provide:d,useValue:!0}));else{const E=a.concat(h).concat({provide:d,useValue:!0},{provide:nn,useValue:"platform"});!function(i){if($o&&!$o.destroyed&&!$o.injector.get(um,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$o=i.get(Lb);const s=i.get(zS,null);s&&s.forEach(a=>a())}(sr.create({providers:E,name:l}))}return function(i){const s=av();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(d)}}function av(){return $o&&!$o.destroyed?$o:null}let Lb=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function(i,s){let a;return a="noop"===i?new nv:("zone.js"===i?void 0:i)||new Fr({enableLongStackTrace:sv(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:Fr,useValue:E}];return E.run(()=>{const T=sr.create({providers:C,parent:this.injector,name:a.moduleType.name}),R=a.create(T),P=R.injector.get(Bl,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const F=E.onError.subscribe({next:W=>{P.handleError(W)}});R.onDestroy(()=>{Vb(this._modules,R),F.unsubscribe()})}),function(i,s,a){try{const l=a();return Nw(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,E,()=>{const F=R.injector.get(Wd);return F.runInitializers(),F.donePromise.then(()=>(oc(R.injector.get(Jy,Ey)||Ey),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,l=[]){const d=wi({},l);return function(i,s,a){const l=new Fy(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const l=a.injector.get(Xu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${J(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Tn(sr))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();function wi(i,s){return Array.isArray(s)?s.reduce(wi,i):Object.assign(Object.assign({},i),s)}let Xu=(()=>{class i{constructor(a,l,d,h,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=h,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new L.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Fr.assertNotInAngularZone(),Uf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Fr.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ae.T)(E,C.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof ID?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const h=function(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Ld),E=d.create(sr.NULL,[],l||d.selector,h),C=E.location.nativeElement,T=E.injector.get(Rb,null),R=T&&E.injector.get(ji);return T&&R&&R.registerApplication(C,T),E.onDestroy(()=>{this.detachView(E.hostView),Vb(this.components,E),R&&R.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Vb(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(GM,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Tn(Fr),Tn(sr),Tn(Bl),Tn(wr),Tn(Wd))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();function Vb(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class rP{}class rA{}const iA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let iP=(()=>{class i{constructor(a,l){this._compiler=a,this._config=l||iA}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[l,d]=a.split("#");return void 0===d&&(d="default"),V(8255)(l).then(h=>h[d]).then(h=>$b(h,l,d)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(a){let[l,d]=a.split("#"),h="NgFactory";return void 0===d&&(d="default",h=""),V(8255)(this._config.factoryPathPrefix+l+this._config.factoryPathSuffix).then(_=>_[d+h]).then(_=>$b(_,l,d))}}return i.\u0275fac=function(a){return new(a||i)(Tn(om),Tn(rA,8))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})();function $b(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const hA=function(i){return null},lP=ov(null,"core",[{provide:HM,useValue:"unknown"},{provide:Lb,deps:[sr]},{provide:ji,deps:[]},{provide:WM,deps:[]}]),pA=[{provide:Xu,useClass:Xu,deps:[Fr,sr,Bl,wr,Wd]},{provide:Ui,deps:[Fr],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Wd,useClass:Wd,deps:[[new ra,bb]]},{provide:om,useClass:om,deps:[]},_F,{provide:$g,useFactory:function(){return ss},deps:[]},{provide:xr,useFactory:function(){return Dy},deps:[]},{provide:Jy,useFactory:function(i){return oc(i=i||"undefined"!=typeof $localize&&$localize.locale||Ey),i},deps:[[new Ga(Jy),new ra,new Zr]]},{provide:KS,useValue:"USD"}];let gA=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Tn(Xu))},i.\u0275mod=yt({type:i}),i.\u0275inj=gn({providers:pA}),i})()},8939:(tt,be,V)=>{"use strict";V.d(be,{hO:()=>te,xv:()=>ne,Dh:()=>J,GT:()=>Z,cc:()=>ue,on:()=>U,pX:()=>re});var m=V(7716),X=V(7841),L=V(8971);tt=V.hmd(tt);const ae=["ngOnDestroy"],re=(oe,he,ke,$e={})=>new Proxy(oe,{get:(ft,Qe)=>ke.runOutsideAngular(()=>{var wt;if(oe[Qe])return(null===(wt=null==$e?void 0:$e.spy)||void 0===wt?void 0:wt.get)&&$e.spy.get(Qe,oe[Qe]),oe[Qe];if(ae.indexOf(Qe)>-1)return()=>{};const ct=he.toPromise().then(ze=>{const Se=ze&&ze[Qe];return"function"==typeof Se?Se.bind(ze):Se&&Se.then?Se.then(we=>ke.run(()=>we)):ke.run(()=>Se)});return new Proxy(()=>{},{get:(ze,Se)=>ct[Se],apply:(ze,Se,we)=>ct.then(Ue=>{var Ie;const Be=Ue&&Ue(...we);return(null===(Ie=null==$e?void 0:$e.spy)||void 0===Ie?void 0:Ie.apply)&&$e.spy.apply(Qe,we,Be),Be})})})}),Z=(oe,he)=>{he.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach($e=>{Object.defineProperty(oe.prototype,$e,Object.getOwnPropertyDescriptor(ke.prototype||ke,$e))})})};class me{constructor(he){return he}}const J=new m.OlP("angularfire2.app.options"),ne=new m.OlP("angularfire2.app.name");function U(oe,he,ke){const ft="object"==typeof ke&&ke||{};ft.name=ft.name||"string"==typeof ke&&ke||"[DEFAULT]";const wt=X.Z.apps.filter(ct=>ct&&ct.name===ft.name)[0]||he.runOutsideAngular(()=>X.Z.initializeApp(oe,ft));try{JSON.stringify(oe)!==JSON.stringify(wt.options)&&G("error",`${wt.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ct){}return new me(wt)}const G=(oe,...he)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[oe](...he)},B={provide:me,useFactory:U,deps:[J,m.R0b,[new m.FiY,ne]]};let te=(()=>{class oe{constructor(ke){X.Z.registerVersion("angularfire",L.q4.full,"core"),X.Z.registerVersion("angularfire",L.q4.full,"app-compat"),X.Z.registerVersion("angular",m.q4F.full,ke.toString())}static initializeApp(ke,$e){return{ngModule:oe,providers:[{provide:J,useValue:ke},{provide:ne,useValue:$e}]}}}return oe.\u0275fac=function(ke){return new(ke||oe)(m.LFG(m.Lbi))},oe.\u0275mod=m.oAB({type:oe}),oe.\u0275inj=m.cJS({providers:[B]}),oe})();function ue(oe,he,ke,$e,ft){const[,Qe,wt]=globalThis.\u0275AngularfireInstanceCache.find(ct=>ct[0]===oe)||[];if(Qe)return function(oe,he){try{return oe.toString()===he.toString()}catch(ke){return oe===he}}(ft,wt)||(Le("error",`${he} was already initialized on the ${ke} Firebase App with different settings.${pe?" You may need to reload as Firebase is not HMR aware.":""}`),Le("warn",{is:ft,was:wt})),Qe;{const ct=$e();return globalThis.\u0275AngularfireInstanceCache.push([oe,ct,ft]),ct}}const pe=!!tt.hot,Le=(oe,...he)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[oe](...he)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(tt,be,V)=>{"use strict";V.d(be,{q4:()=>s_,iC:()=>jn,fc:()=>Sp,HU:()=>Ah,vb:()=>ki,JM:()=>Oi});var m=V(7716),X=V(2329),L=V(8239),ae=V(8026),re=V(3854),Z=V(3910),me=V(5422);const J="@firebase/installations",G="w:0.5.8",B="FIS_v2",oe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function he(I){return I instanceof re.ZR&&I.code.includes("request-failed")}function ke({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function $e(I){return{token:I.token,requestStatus:2,expiresIn:we(I.expiresIn),creationTime:Date.now()}}function ft(I,A){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,L.Z)(function*(I,A){const j=(yield A.json()).error;return oe.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function wt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ct(I,{refreshToken:A}){const M=wt(I);return M.append("Authorization",function(I){return`${B} ${I}`}(A)),M}function ze(I){return Se.apply(this,arguments)}function Se(){return(Se=(0,L.Z)(function*(I){const A=yield I();return A.status>=500&&A.status<600?I():A})).apply(this,arguments)}function we(I){return Number(I.replace("s","000"))}function Ie(I,A){return Be.apply(this,arguments)}function Be(){return(Be=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},{fid:M}){const j=ke(I),ee=wt(I),ce=A.getImmediate({optional:!0});if(ce){const Ct=yield ce.getHeartbeatsHeader();Ct&&ee.append("x-firebase-client",Ct)}const Ke={method:"POST",headers:ee,body:JSON.stringify({fid:M,authVersion:B,appId:I.appId,sdkVersion:G})},pt=yield ze(()=>fetch(j,Ke));if(pt.ok){const Ct=yield pt.json();return{fid:Ct.fid||M,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:$e(Ct.authToken)}}throw yield ft("Create Installation",pt)})).apply(this,arguments)}function Te(I){return new Promise(A=>{setTimeout(A,I)})}const dn=/^[cdef][\w-]{21}$/;function Sn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const M=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return dn.test(M)?M:""}catch(I){return""}}function ot(I){return`${I.appName}!${I.appId}`}const Nr=new Map;function hi(I,A){const M=ot(I);Fn(M,A),function(I,A){const M=(!sn&&"BroadcastChannel"in self&&(sn=new BroadcastChannel("[Firebase] FID Change"),sn.onmessage=I=>{Fn(I.data.key,I.data.fid)}),sn);M&&M.postMessage({key:I,fid:A}),0===Nr.size&&sn&&(sn.close(),sn=null)}(M,A)}function Fn(I,A){const M=Nr.get(I);if(M)for(const j of M)j(A)}let sn=null;const ar="firebase-installations-store";let Ii=null;function Me(){return Ii||(Ii=(0,re.X3)("firebase-installations-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(ar)}})),Ii}function ur(I,A){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,L.Z)(function*(I,A){const M=ot(I),ee=(yield Me()).transaction(ar,"readwrite"),ce=ee.objectStore(ar),Ne=yield ce.get(M);return yield ce.put(A,M),yield ee.complete,(!Ne||Ne.fid!==A.fid)&&hi(I,A.fid),A})).apply(this,arguments)}function er(I){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,L.Z)(function*(I){const A=ot(I),j=(yield Me()).transaction(ar,"readwrite");yield j.objectStore(ar).delete(A),yield j.complete})).apply(this,arguments)}function pr(I,A){return so.apply(this,arguments)}function so(){return(so=(0,L.Z)(function*(I,A){const M=ot(I),ee=(yield Me()).transaction(ar,"readwrite"),ce=ee.objectStore(ar),Ne=yield ce.get(M),Ke=A(Ne);return void 0===Ke?yield ce.delete(M):yield ce.put(Ke,M),yield ee.complete,Ke&&(!Ne||Ne.fid!==Ke.fid)&&hi(I,Ke.fid),Ke})).apply(this,arguments)}function Cr(I){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,L.Z)(function*(I){let A;const M=yield pr(I.appConfig,j=>{const ee=Ln(j),ce=sl(I,ee);return A=ce.registrationPromise,ce.installationEntry});return""===M.fid?{installationEntry:yield A}:{installationEntry:M,registrationPromise:A}})).apply(this,arguments)}function Ln(I){return fi(I||{fid:Sn(),registrationStatus:0})}function sl(I,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(oe.create("app-offline"))};const M={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:M,registrationPromise:function(I,A){return He.apply(this,arguments)}(I,M)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:mt(I)}:{installationEntry:A}}function He(){return(He=(0,L.Z)(function*(I,A){try{const M=yield Ie(I,A);return ur(I.appConfig,M)}catch(M){throw he(M)&&409===M.customData.serverCode?yield er(I.appConfig):yield ur(I.appConfig,{fid:A.fid,registrationStatus:0}),M}})).apply(this,arguments)}function mt(I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,L.Z)(function*(I){let A=yield Ms(I.appConfig);for(;1===A.registrationStatus;)yield Te(100),A=yield Ms(I.appConfig);if(0===A.registrationStatus){const{installationEntry:M,registrationPromise:j}=yield Cr(I);return j||M}return A})).apply(this,arguments)}function Ms(I){return pr(I,A=>{if(!A)throw oe.create("installation-not-found");return fi(A)})}function fi(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function on(I,A){return oo.apply(this,arguments)}function oo(){return(oo=(0,L.Z)(function*({appConfig:I,heartbeatServiceProvider:A},M){const j=un(I,M),ee=ct(I,M),ce=A.getImmediate({optional:!0});if(ce){const Ct=yield ce.getHeartbeatsHeader();Ct&&ee.append("x-firebase-client",Ct)}const Ke={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:G,appId:I.appId}})},pt=yield ze(()=>fetch(j,Ke));if(pt.ok)return $e(yield pt.json());throw yield ft("Generate Auth Token",pt)})).apply(this,arguments)}function un(I,{fid:A}){return`${ke(I)}/${A}/authTokens:generate`}function Pt(I){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,L.Z)(function*(I,A=!1){let M;const j=yield pr(I.appConfig,ce=>{if(!Qt(ce))throw oe.create("not-registered");const Ne=ce.authToken;if(!A&&z(Ne))return ce;if(1===Ne.requestStatus)return M=Ye(I,A),ce;{if(!navigator.onLine)throw oe.create("app-offline");const Ke=Q(ce);return M=_t(I,Ke),Ke}});return M?yield M:j.authToken})).apply(this,arguments)}function Ye(I,A){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,L.Z)(function*(I,A){let M=yield at(I.appConfig);for(;1===M.authToken.requestStatus;)yield Te(100),M=yield at(I.appConfig);const j=M.authToken;return 0===j.requestStatus?Pt(I,A):j})).apply(this,arguments)}function at(I){return pr(I,A=>{if(!Qt(A))throw oe.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function _t(I,A){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,L.Z)(function*(I,A){try{const M=yield on(I,A),j=Object.assign(Object.assign({},A),{authToken:M});return yield ur(I.appConfig,j),M}catch(M){if(!he(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const j=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield ur(I.appConfig,j)}else yield er(I.appConfig);throw M}})).apply(this,arguments)}function Qt(I){return void 0!==I&&2===I.registrationStatus}function z(I){return 2===I.requestStatus&&!function(I){const A=Date.now();return A<I.creationTime||I.creationTime+I.expiresIn<A+36e5}(I)}function Q(I){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:A})}function je(){return(je=(0,L.Z)(function*(I){const A=I,{installationEntry:M,registrationPromise:j}=yield Cr(A);return j?j.catch(console.error):Pt(A).catch(console.error),M.fid})).apply(this,arguments)}function tn(){return(tn=(0,L.Z)(function*(I,A=!1){const M=I;return yield Mr(M),(yield Pt(M,A)).token})).apply(this,arguments)}function Mr(I){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,L.Z)(function*(I){const{registrationPromise:A}=yield Cr(I);A&&(yield A)})).apply(this,arguments)}function Vt(I){return oe.create("missing-app-config-values",{valueName:I})}const hn="installations";(0,ae._registerComponent)(new Z.wA(hn,I=>{const A=I.getProvider("app").getImmediate();return{app:A,appConfig:function(I){if(!I||!I.options)throw Vt("App Configuration");if(!I.name)throw Vt("App Name");const A=["projectId","apiKey","appId"];for(const M of A)if(!I.options[M])throw Vt(M);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(A),heartbeatServiceProvider:(0,ae._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ae._registerComponent)(new Z.wA("installations-internal",I=>{const A=I.getProvider("app").getImmediate(),M=(0,ae._getProvider)(A,hn).getImmediate();return{getId:()=>function(I){return je.apply(this,arguments)}(M),getToken:ee=>function(I){return tn.apply(this,arguments)}(M,ee)}},"PRIVATE")),(0,ae.registerVersion)(J,"0.5.8"),(0,ae.registerVersion)(J,"0.5.8","esm2017");const En="@firebase/remote-config",Cn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ul{constructor(A,M,j,ee){this.client=A,this.storage=M,this.storageCache=j,this.logger=ee}isCachedDataFresh(A,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-M,ee=j<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${ee}.`),ee}fetch(A){var M=this;return(0,L.Z)(function*(){const[j,ee]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(ee&&M.isCachedDataFresh(A.cacheMaxAgeMillis,j))return ee;A.eTag=ee&&ee.eTag;const ce=yield M.client.fetch(A),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(Ne),ce})()}}function fu(I=navigator){return I.languages&&I.languages[0]||I.language}class fs{constructor(A,M,j,ee,ce,Ne){this.firebaseInstallations=A,this.sdkVersion=M,this.namespace=j,this.projectId=ee,this.apiKey=ce,this.appId=Ne}fetch(A){var M=this;return(0,L.Z)(function*(){const[j,ee]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ne=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},pt={sdk_version:M.sdkVersion,app_instance_id:j,app_instance_id_token:ee,app_id:M.appId,language_code:fu()},Ct={method:"POST",headers:Ke,body:JSON.stringify(pt)},zt=fetch(Ne,Ct),At=new Promise((Do,So)=>{A.signal.addEventListener(()=>{const $s=new Error("The operation was aborted.");$s.name="AbortError",So($s)})});let Dr;try{yield Promise.race([zt,At]),Dr=yield zt}catch(Do){let So="fetch-client-network";throw"AbortError"===Do.name&&(So="fetch-timeout"),Cn.create(So,{originalErrorMessage:Do.message})}let rr=Dr.status;const Ha=Dr.headers.get("ETag")||void 0;let ed,na;if(200===Dr.status){let Do;try{Do=yield Dr.json()}catch(So){throw Cn.create("fetch-client-parse",{originalErrorMessage:So.message})}ed=Do.entries,na=Do.state}if("INSTANCE_STATE_UNSPECIFIED"===na?rr=500:"NO_CHANGE"===na?rr=304:("NO_TEMPLATE"===na||"EMPTY_CONFIG"===na)&&(ed={}),304!==rr&&200!==rr)throw Cn.create("fetch-status",{httpStatus:rr});return{status:rr,eTag:Ha,config:ed}})()}}class xa{constructor(A,M){this.client=A,this.storage=M}fetch(A){var M=this;return(0,L.Z)(function*(){const j=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(A,j)})()}attemptFetch(A,{throttleEndTimeMillis:M,backoffCount:j}){var ee=this;return(0,L.Z)(function*(){yield function(I,A){return new Promise((M,j)=>{const ee=Math.max(A-Date.now(),0),ce=setTimeout(M,ee);I.addEventListener(()=>{clearTimeout(ce),j(Cn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,M);try{const ce=yield ee.client.fetch(A);return yield ee.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}(ce))throw ce;const Ne={throttleEndTimeMillis:Date.now()+(0,re.$s)(j),backoffCount:j+1};return yield ee.storage.setThrottleMetadata(Ne),ee.attemptFetch(A,Ne)}})()}}class hp{constructor(A,M,j,ee,ce){this.app=A,this._client=M,this._storageCache=j,this._storage=ee,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pu(I,A){const M=I.target.error||void 0;return Cn.create(A,{originalErrorMessage:M&&M.message})}const Ra="app_namespace_store";class Pc{constructor(A,M,j,ee=function(){return new Promise((I,A)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=j=>{A(pu(j,"storage-open"))},M.onsuccess=j=>{I(j.target.result)},M.onupgradeneeded=j=>{const ee=j.target.result;switch(j.oldVersion){case 0:ee.createObjectStore(Ra,{keyPath:"compositeKey"})}}}catch(M){A(Cn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=A,this.appName=M,this.namespace=j,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var M=this;return(0,L.Z)(function*(){const j=yield M.openDbPromise;return new Promise((ee,ce)=>{const Ke=j.transaction([Ra],"readonly").objectStore(Ra),pt=M.createCompositeKey(A);try{const Ct=Ke.get(pt);Ct.onerror=zt=>{ce(pu(zt,"storage-get"))},Ct.onsuccess=zt=>{const At=zt.target.result;ee(At?At.value:void 0)}}catch(Ct){ce(Cn.create("storage-get",{originalErrorMessage:Ct&&Ct.message}))}})})()}set(A,M){var j=this;return(0,L.Z)(function*(){const ee=yield j.openDbPromise;return new Promise((ce,Ne)=>{const pt=ee.transaction([Ra],"readwrite").objectStore(Ra),Ct=j.createCompositeKey(A);try{const zt=pt.put({compositeKey:Ct,value:M});zt.onerror=At=>{Ne(pu(At,"storage-set"))},zt.onsuccess=()=>{ce()}}catch(zt){Ne(Cn.create("storage-set",{originalErrorMessage:zt&&zt.message}))}})})()}delete(A){var M=this;return(0,L.Z)(function*(){const j=yield M.openDbPromise;return new Promise((ee,ce)=>{const Ke=j.transaction([Ra],"readwrite").objectStore(Ra),pt=M.createCompositeKey(A);try{const Ct=Ke.delete(pt);Ct.onerror=zt=>{ce(pu(zt,"storage-delete"))},Ct.onsuccess=()=>{ee()}}catch(Ct){ce(Cn.create("storage-delete",{originalErrorMessage:Ct&&Ct.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class lh{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,L.Z)(function*(){const M=A.storage.getLastFetchStatus(),j=A.storage.getLastSuccessfulFetchTimestampMillis(),ee=A.storage.getActiveConfig(),ce=yield M;ce&&(A.lastFetchStatus=ce);const Ne=yield j;Ne&&(A.lastSuccessfulFetchTimestampMillis=Ne);const Ke=yield ee;Ke&&(A.activeConfig=Ke)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function dh(){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,L.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ae._registerComponent)(new Z.wA("remote-config",function(A,{instanceIdentifier:M}){const j=A.getProvider("app").getImmediate(),ee=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Cn.create("registration-window");if(!(0,re.hl)())throw Cn.create("indexed-db-unavailable");const{projectId:ce,apiKey:Ne,appId:Ke}=j.options;if(!ce)throw Cn.create("registration-project-id");if(!Ne)throw Cn.create("registration-api-key");if(!Ke)throw Cn.create("registration-app-id");const pt=new Pc(Ke,j.name,M=M||"firebase"),Ct=new lh(pt),zt=new me.Yd(En);zt.logLevel=me.in.ERROR;const At=new fs(ee,ae.SDK_VERSION,M,ce,Ne,Ke),Dr=new xa(At,pt),rr=new ul(Dr,pt,Ct,zt),Ha=new hp(j,rr,Ct,pt,zt);return function(I){const A=(0,re.m9)(I);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Ha),Ha},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(En,"0.3.7"),(0,ae.registerVersion)(En,"0.3.7","esm2017");const ll="/firebase-messaging-sw.js",kc="/firebase-cloud-messaging-push-scope",Fc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gu="google.c.a.c_id",qo="google.c.a.c_l",Lc="google.c.a.ts",zo="google.c.a.e";var lo=(()=>{return(I=lo||(lo={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",lo;var I})();function ks(I){const A=new Uint8Array(I);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zi(I){const M=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(M),ee=new Uint8Array(j.length);for(let ce=0;ce<j.length;++ce)ee[ce]=j.charCodeAt(ce);return ee}const Vc="fcm_token_details_db",Uc="fcm_token_object_Store";function fh(I){return mi.apply(this,arguments)}function mi(){return(mi=(0,L.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(Vc))return null;let A=null;return(yield(0,re.X3)(Vc,5,function(){var j=(0,L.Z)(function*(ee,ce,Ne,Ke){var pt;if(ce<2||!ee.objectStoreNames.contains(Uc))return;const Ct=Ke.objectStore(Uc),zt=yield Ct.index("fcmSenderId").get(I);if(yield Ct.clear(),zt)if(2===ce){const At=zt;if(!At.auth||!At.p256dh||!At.endpoint)return;A={token:At.fcmToken,createTime:null!==(pt=At.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:ks(At.vapidKey)}}}else if(3===ce){const At=zt;A={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:ks(At.auth),p256dh:ks(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:ks(At.vapidKey)}}}else if(4===ce){const At=zt;A={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:ks(At.auth),p256dh:ks(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:ks(At.vapidKey)}}}});return function(ee,ce,Ne,Ke){return j.apply(this,arguments)}}())).close(),yield(0,re.Lj)(Vc),yield(0,re.Lj)("fcm_vapid_details_db"),yield(0,re.Lj)("undefined"),mu(A)?A:null})).apply(this,arguments)}function mu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:A}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Fs="firebase-messaging-store";let gs=null;function gh(){return gs||(gs=(0,re.X3)("firebase-messaging-database",1,(I,A)=>{switch(A){case 0:I.createObjectStore(Fs)}})),gs}function Mn(I){return co.apply(this,arguments)}function co(){return(co=(0,L.Z)(function*(I){const A=fo(I),j=yield(yield gh()).transaction(Fs).objectStore(Fs).get(A);if(j)return j;{const ee=yield fh(I.appConfig.senderId);if(ee)return yield Ko(I,ee),ee}})).apply(this,arguments)}function Ko(I,A){return _u.apply(this,arguments)}function _u(){return(_u=(0,L.Z)(function*(I,A){const M=fo(I),ee=(yield gh()).transaction(Fs,"readwrite");return yield ee.objectStore(Fs).put(A,M),yield ee.complete,A})).apply(this,arguments)}function an(I){return ho.apply(this,arguments)}function ho(){return(ho=(0,L.Z)(function*(I){const A=fo(I),j=(yield gh()).transaction(Fs,"readwrite");yield j.objectStore(Fs).delete(A),yield j.complete})).apply(this,arguments)}function fo({appConfig:I}){return I.appId}const fn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function hl(I,A){return vu.apply(this,arguments)}function vu(){return(vu=(0,L.Z)(function*(I,A){const M=yield Qi(I),j=bu(A),ee={method:"POST",headers:M,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(Zo(I.appConfig),ee)).json()}catch(Ne){throw fn.create("token-subscribe-failed",{errorInfo:Ne})}if(ce.error)throw fn.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw fn.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function Yi(I,A){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,L.Z)(function*(I,A){const M=yield Qi(I),j=bu(A.subscriptionOptions),ee={method:"PATCH",headers:M,body:JSON.stringify(j)};let ce;try{ce=yield(yield fetch(`${Zo(I.appConfig)}/${A.token}`,ee)).json()}catch(Ne){throw fn.create("token-update-failed",{errorInfo:Ne})}if(ce.error)throw fn.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw fn.create("token-update-no-token");return ce.token})).apply(this,arguments)}function Eu(I,A){return wu.apply(this,arguments)}function wu(){return(wu=(0,L.Z)(function*(I,A){const j={method:"DELETE",headers:yield Qi(I)};try{const ce=yield(yield fetch(`${Zo(I.appConfig)}/${A}`,j)).json();if(ce.error)throw fn.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(ee){throw fn.create("token-unsubscribe-failed",{errorInfo:ee})}})).apply(this,arguments)}function Zo({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Qi(I){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,L.Z)(function*({appConfig:I,installations:A}){const M=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function bu({p256dh:I,auth:A,endpoint:M,vapidKey:j}){const ee={web:{endpoint:M,auth:A,p256dh:I}};return j!==Fc&&(ee.web.applicationPubKey=j),ee}const bt=6048e5;function Bc(I){return Na.apply(this,arguments)}function Na(){return(Na=(0,L.Z)(function*(I){const A=yield $t(I.swRegistration,I.vapidKey),M={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:A.endpoint,auth:ks(A.getKey("auth")),p256dh:ks(A.getKey("p256dh"))},j=yield Mn(I.firebaseDependencies);if(j){if(xn(j.subscriptionOptions,M))return Date.now()>=j.createTime+bt?pp(I,{token:j.token,createTime:Date.now(),subscriptionOptions:M}):j.token;try{yield Eu(I.firebaseDependencies,j.token)}catch(ee){console.warn(ee)}return po(I.firebaseDependencies,M)}return po(I.firebaseDependencies,M)})).apply(this,arguments)}function jc(I){return fl.apply(this,arguments)}function fl(){return(fl=(0,L.Z)(function*(I){const A=yield Mn(I.firebaseDependencies);A&&(yield Eu(I.firebaseDependencies,A.token),yield an(I.firebaseDependencies));const M=yield I.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function pp(I,A){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,L.Z)(function*(I,A){try{const M=yield Yi(I.firebaseDependencies,A),j=Object.assign(Object.assign({},A),{token:M,createTime:Date.now()});return yield Ko(I.firebaseDependencies,j),M}catch(M){throw yield jc(I),M}})).apply(this,arguments)}function po(I,A){return De.apply(this,arguments)}function De(){return(De=(0,L.Z)(function*(I,A){const j={token:yield hl(I,A),createTime:Date.now(),subscriptionOptions:A};return yield Ko(I,j),j.token})).apply(this,arguments)}function $t(I,A){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,L.Z)(function*(I,A){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zi(A)})})).apply(this,arguments)}function xn(I,A){return A.vapidKey===I.vapidKey&&A.endpoint===I.endpoint&&A.auth===I.auth&&A.p256dh===I.p256dh}function Ma(I){const A={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,A){if(!A.notification)return;I.notification={};const M=A.notification.title;M&&(I.notification.title=M);const j=A.notification.body;j&&(I.notification.body=j);const ee=A.notification.image;ee&&(I.notification.image=ee)}(A,I),function(I,A){!A.data||(I.data=A.data)}(A,I),function(I,A){if(!A.fcmOptions)return;I.fcmOptions={};const M=A.fcmOptions.link;M&&(I.fcmOptions.link=M);const j=A.fcmOptions.analytics_label;j&&(I.fcmOptions.analyticsLabel=j)}(A,I),A}function Pa(I){return"object"==typeof I&&!!I&&gu in I}function mh(I,A){const M=[];for(let j=0;j<I.length;j++)M.push(I.charAt(j)),j<A.length&&M.push(A.charAt(j));return M.join("")}function Jo(I){return fn.create("missing-app-config-values",{valueName:I})}mh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Oa{constructor(A,M,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function(I){if(!I||!I.options)throw Jo("App Configuration Object");if(!I.name)throw Jo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:M}=I;for(const j of A)if(!M[j])throw Jo(j);return{appName:I.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:ee,installations:M,analyticsProvider:j}}_delete(){return Promise.resolve()}}function lr(I){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,L.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(ll,{scope:kc}),I.swRegistration.update().catch(()=>{})}catch(A){throw fn.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function gp(I,A){return xi.apply(this,arguments)}function xi(){return(xi=(0,L.Z)(function*(I,A){if(!A&&!I.swRegistration&&(yield lr(I)),A||!I.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");I.swRegistration=A}})).apply(this,arguments)}function ri(I,A){return pl.apply(this,arguments)}function pl(){return(pl=(0,L.Z)(function*(I,A){A?I.vapidKey=A:I.vapidKey||(I.vapidKey=Fc)})).apply(this,arguments)}function gl(){return(gl=(0,L.Z)(function*(I,A){if(!navigator)throw fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw fn.create("permission-blocked");return yield ri(I,null==A?void 0:A.vapidKey),yield gp(I,null==A?void 0:A.serviceWorkerRegistration),Bc(I)})).apply(this,arguments)}function Hc(I,A,M){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,L.Z)(function*(I,A,M){const j=Tu(A);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:M[gu],message_name:M[qo],message_time:M[Lc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tu(I){switch(I){case lo.NOTIFICATION_CLICKED:return"notification_open";case lo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ls(){return(Ls=(0,L.Z)(function*(I,A){const M=A.data;if(!M.isFirebaseMessaging)return;I.onMessageHandler&&M.messageType===lo.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Ma(M)):I.onMessageHandler.next(Ma(M)));const j=M.data;Pa(j)&&"1"===j[zo]&&(yield Hc(I,M.messageType,j))})).apply(this,arguments)}const ml="@firebase/messaging";function Su(){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,L.Z)(function*(){try{yield(0,re.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ae._registerComponent)(new Z.wA("messaging",I=>{const A=new Oa(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function(I,A){return Ls.apply(this,arguments)}(A,M)),A},"PUBLIC")),(0,ae._registerComponent)(new Z.wA("messaging-internal",I=>{const A=I.getProvider("messaging").getImmediate();return{getToken:j=>function(I,A){return gl.apply(this,arguments)}(A,j)}},"PRIVATE")),(0,ae.registerVersion)(ml,"0.9.12"),(0,ae.registerVersion)(ml,"0.9.12","esm2017");const Fa="analytics",vp="firebase_id",La="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xo="https://www.googletagmanager.com/gtag/js",Un=new me.Yd("@firebase/analytics");function vl(I){return Promise.all(I.map(A=>A.catch(M=>M)))}function El(I,A){const M=document.createElement("script");M.src=`${Xo}?l=${I}&id=${A}`,M.async=!0,document.head.appendChild(M)}function _o(I,A,M,j,ee,ce){return ea.apply(this,arguments)}function ea(){return(ea=(0,L.Z)(function*(I,A,M,j,ee,ce){const Ne=j[ee];try{if(Ne)yield A[Ne];else{const pt=(yield vl(M)).find(Ct=>Ct.measurementId===ee);pt&&(yield A[pt.appId])}}catch(Ke){Un.error(Ke)}I("config",ee,ce)})).apply(this,arguments)}function yh(I,A,M,j,ee){return zc.apply(this,arguments)}function zc(){return(zc=(0,L.Z)(function*(I,A,M,j,ee){try{let ce=[];if(ee&&ee.send_to){let Ne=ee.send_to;Array.isArray(Ne)||(Ne=[Ne]);const Ke=yield vl(M);for(const pt of Ne){const Ct=Ke.find(At=>At.measurementId===pt),zt=Ct&&A[Ct.appId];if(!zt){ce=[];break}ce.push(zt)}}0===ce.length&&(ce=Object.values(A)),yield Promise.all(ce),I("event",j,ee||{})}catch(ce){Un.error(ce)}})).apply(this,arguments)}function wp(){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Xo))return A;return null}const Ri=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_s=new class{constructor(A={},M=1e3){this.throttleMetadata=A,this.intervalMillis=M}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,M){this.throttleMetadata[A]=M}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Zc(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Cp(I){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,L.Z)(function*(I){var A;const{appId:M,apiKey:j}=I,ee={method:"GET",headers:Zc(j)},ce=La.replace("{app-id}",M),Ne=yield fetch(ce,ee);if(200!==Ne.status&&304!==Ne.status){let Ke="";try{const pt=yield Ne.json();(null===(A=pt.error)||void 0===A?void 0:A.message)&&(Ke=pt.error.message)}catch(pt){}throw Ri.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:Ke})}return Ne.json()})).apply(this,arguments)}function Va(I){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,L.Z)(function*(I,A=_s,M){const{appId:j,apiKey:ee,measurementId:ce}=I.options;if(!j)throw Ri.create("no-app-id");if(!ee){if(ce)return{measurementId:ce,appId:j};throw Ri.create("no-api-key")}const Ne=A.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new vh;return setTimeout((0,L.Z)(function*(){Ke.abort()}),void 0!==M?M:6e4),yo({appId:j,apiKey:ee,measurementId:ce},Ne,Ke,A)})).apply(this,arguments)}function yo(I,A,M){return ys.apply(this,arguments)}function ys(){return(ys=(0,L.Z)(function*(I,{throttleEndTimeMillis:A,backoffCount:M},j,ee=_s){const{appId:ce,measurementId:Ne}=I;try{yield Ua(j,A)}catch(Ke){if(Ne)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ce,measurementId:Ne};throw Ke}try{const Ke=yield Cp(I);return ee.deleteThrottleMetadata(ce),Ke}catch(Ke){if(!sE(Ke)){if(ee.deleteThrottleMetadata(ce),Ne)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ne} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ce,measurementId:Ne};throw Ke}const pt=503===Number(Ke.customData.httpStatus)?(0,re.$s)(M,ee.intervalMillis,30):(0,re.$s)(M,ee.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+pt,backoffCount:M+1};return ee.setThrottleMetadata(ce,Ct),Un.debug(`Calling attemptFetch again in ${pt} millis`),yo(I,Ct,j,ee)}})).apply(this,arguments)}function Ua(I,A){return new Promise((M,j)=>{const ee=Math.max(A-Date.now(),0),ce=setTimeout(M,ee);I.addEventListener(()=>{clearTimeout(ce),j(Ri.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function sE(I){if(!(I instanceof re.ZR&&I.customData))return!1;const A=Number(I.customData.httpStatus);return 429===A||500===A||503===A||504===A}class vh{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Tp(){return Eh.apply(this,arguments)}function Eh(){return(Eh=(0,L.Z)(function*(){if(!(0,re.hl)())return Un.warn(Ri.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(I){return Un.warn(Ri.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Vs(){return(Vs=(0,L.Z)(function*(I,A,M,j,ee,ce,Ne){var Ke;const pt=Va(I);pt.then(rr=>{M[rr.measurementId]=rr.appId,I.options.measurementId&&rr.measurementId!==I.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rr=>Un.error(rr)),A.push(pt);const Ct=Tp().then(rr=>{if(rr)return j.getId()}),[zt,At]=yield Promise.all([pt,Ct]);wp()||El(ce,zt.measurementId),ee("js",new Date);const Dr=null!==(Ke=null==Ne?void 0:Ne.config)&&void 0!==Ke?Ke:{};return Dr.origin="firebase",Dr.update=!0,null!=At&&(Dr[vp]=At),ee("config",zt.measurementId,Dr),zt.measurementId})).apply(this,arguments)}class bh{constructor(A){this.app=A}_delete(){return delete Ht[this.app.options.appId],Promise.resolve()}}let Ht={},ut=[];const Ni={};let Yc,Ji,Nu="dataLayer",zr=!1;function bl(I,A,M){!function(){const I=[];if((0,re.ru)()&&I.push("This is a browser extension environment."),(0,re.zI)()||I.push("Cookies are not available."),I.length>0){const A=I.map((j,ee)=>`(${ee+1}) ${j}`).join(" "),M=Ri.create("invalid-analytics-context",{errorInfo:A});Un.warn(M.message)}}();const j=I.options.appId;if(!j)throw Ri.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ri.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ht[j])throw Ri.create("already-exists",{id:j});if(!zr){!function(I){let A=[];Array.isArray(window[I])?A=window[I]:window[I]=A}(Nu);const{wrappedGtag:ce,gtagCore:Ne}=function(I,A,M,j,ee){let ce=function(...Ne){window[j].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ce=window[ee]),window[ee]=function(I,A,M,j){function ce(){return(ce=(0,L.Z)(function*(Ne,Ke,pt){try{"event"===Ne?yield yh(I,A,M,Ke,pt):"config"===Ne?yield _o(I,A,M,j,Ke,pt):I("set",Ke)}catch(Ct){Un.error(Ct)}})).apply(this,arguments)}return function(Ne,Ke,pt){return ce.apply(this,arguments)}}(ce,I,A,M),{gtagCore:ce,wrappedGtag:window[ee]}}(Ht,ut,Ni,Nu,"gtag");Ji=ce,Yc=Ne,zr=!0}return Ht[j]=function(I,A,M,j,ee,ce,Ne){return Vs.apply(this,arguments)}(I,ut,Ni,A,Yc,Nu,M),new bh(I)}function Cl(){return(Cl=(0,L.Z)(function*(I,A,M,j,ee){if(ee&&ee.global)I("event",M,j);else{const ce=yield A;I("event",M,Object.assign(Object.assign({},j),{send_to:ce}))}})).apply(this,arguments)}function Xi(){return ii.apply(this,arguments)}function ii(){return(ii=(0,L.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(I){return!1}})).apply(this,arguments)}const On="@firebase/analytics";(0,ae._registerComponent)(new Z.wA(Fa,(A,{options:M})=>bl(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new Z.wA("analytics-internal",function(A){try{const M=A.getProvider(Fa).getImmediate();return{logEvent:(j,ee,ce)=>function(I,A,M,j){I=(0,re.m9)(I),function(I,A,M,j,ee){return Cl.apply(this,arguments)}(Ji,Ht[I.app.options.appId],A,M,j).catch(ee=>Un.error(ee))}(M,j,ee,ce)}}catch(M){throw Ri.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)(On,"0.7.8"),(0,ae.registerVersion)(On,"0.7.8","esm2017");var Ih=V(7771),i_=V(3637),oE=V(3342),Bs=V(309),Ba=V(2639);const s_=new m.GfV("7.3.0"),Th="__angularfire_symbol__analyticsIsSupportedValue",Pi="__angularfire_symbol__analyticsIsSupported",Dh="__angularfire_symbol__remoteConfigIsSupportedValue",wo="__angularfire_symbol__remoteConfigIsSupported",js="__angularfire_symbol__messagingIsSupportedValue",qn="__angularfire_symbol__messagingIsSupported";function Oi(I,A,M){if(A){if(1===A.length)return A[0];const ce=A.filter(Ne=>Ne.app===M);if(1===ce.length)return ce[0]}return M.container.getProvider(I).getImmediate({optional:!0})}globalThis[Pi]||(globalThis[Pi]=Xi().then(I=>globalThis[Th]=I).catch(()=>globalThis[Th]=!1)),globalThis[qn]||(globalThis[qn]=Su().then(I=>globalThis[js]=I).catch(()=>globalThis[js]=!1)),globalThis[wo]||(globalThis[wo]=dh().then(I=>globalThis[Dh]=I).catch(()=>globalThis[Dh]=!1));const ki=(I,A)=>{const M=A?[A]:(0,X.C6)(),j=[];return M.forEach(ee=>{ee.container.getProvider(I).instances.forEach(Ne=>{j.includes(Ne)||j.push(Ne)})}),j};function Es(){}class bo{constructor(A,M=Ih.N){this.zone=A,this.delegate=M}now(){return this.delegate.now()}schedule(A,M,j){const ee=this.zone;return this.delegate.schedule(function(Ne){ee.runGuarded(()=>{A.apply(this,[Ne])})},M,j)}}class Co{constructor(A){this.zone=A,this.task=null}call(A,M){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Es,{},Es,Es)),M.pipe((0,oE.b)({next:j,complete:j,error:j})).subscribe(A).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ah=(()=>{class I{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new bo(Zone.current)),this.insideAngular=M.run(()=>new bo(Zone.current,i_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(M){return new(M||I)(m.LFG(m.R0b))},I.\u0275prov=m.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Io(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Sp(I){return I.pipe((0,Bs.QV)(Io().outsideAngular))}function jn(I){return Io(),function(I){return function(M){return(M=M.lift(new Co(I.ngZone))).pipe((0,Ba.R)(I.outsideAngular),(0,Bs.QV)(I.insideAngular))}}(Io())(I)}},3854:(tt,be,V)=>{"use strict";V.d(be,{BH:()=>ue,LL:()=>Rt,ZR:()=>Te,gQ:()=>Me,zI:()=>Ue,hu:()=>L,g5:()=>ae,US:()=>me,tV:()=>U,h$:()=>J,L:()=>ne,$s:()=>Et,r3:()=>Fn,Sg:()=>fe,ne:()=>ur,p$:()=>G,vZ:()=>vn,ZB:()=>B,Lj:()=>Lt,gK:()=>Cr,pd:()=>Ii,m9:()=>un,z$:()=>pe,GJ:()=>Tt,jU:()=>he,ru:()=>ke,d:()=>ft,xb:()=>sn,w1:()=>Qe,hl:()=>Se,uI:()=>Le,UG:()=>oe,Yr:()=>ct,b$:()=>$e,G6:()=>ze,Mn:()=>wt,w9:()=>Gn,cI:()=>Sn,UI:()=>Xn,X3:()=>_t,xO:()=>io,zd:()=>ar,DV:()=>gn,ug:()=>He,dS:()=>An,Pz:()=>Xt,Dv:()=>so,Wj:()=>Ln,lb:()=>sl,eu:()=>we});var m=V(8239);const L=function(z,H){if(!z)throw ae(H)},ae=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},re=function(z){const H=[];let Q=0;for(let _e=0;_e<z.length;_e++){let se=z.charCodeAt(_e);se<128?H[Q++]=se:se<2048?(H[Q++]=se>>6|192,H[Q++]=63&se|128):55296==(64512&se)&&_e+1<z.length&&56320==(64512&z.charCodeAt(_e+1))?(se=65536+((1023&se)<<10)+(1023&z.charCodeAt(++_e)),H[Q++]=se>>18|240,H[Q++]=se>>12&63|128,H[Q++]=se>>6&63|128,H[Q++]=63&se|128):(H[Q++]=se>>12|224,H[Q++]=se>>6&63|128,H[Q++]=63&se|128)}return H},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Q=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let se=0;se<z.length;se+=3){const je=z[se],yt=se+1<z.length,tn=yt?z[se+1]:0,Mr=se+2<z.length,Vn=Mr?z[se+2]:0;let Nn=(15&tn)<<2|Vn>>6,Br=63&Vn;Mr||(Br=64,yt||(Nn=64)),_e.push(Q[je>>2],Q[(3&je)<<4|tn>>4],Q[Nn],Q[Br])}return _e.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(re(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let Q=0,_e=0;for(;Q<z.length;){const se=z[Q++];if(se<128)H[_e++]=String.fromCharCode(se);else if(se>191&&se<224){const je=z[Q++];H[_e++]=String.fromCharCode((31&se)<<6|63&je)}else if(se>239&&se<365){const Mr=((7&se)<<18|(63&z[Q++])<<12|(63&z[Q++])<<6|63&z[Q++])-65536;H[_e++]=String.fromCharCode(55296+(Mr>>10)),H[_e++]=String.fromCharCode(56320+(1023&Mr))}else{const je=z[Q++],yt=z[Q++];H[_e++]=String.fromCharCode((15&se)<<12|(63&je)<<6|63&yt)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const Q=H?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let se=0;se<z.length;){const je=Q[z.charAt(se++)],tn=se<z.length?Q[z.charAt(se)]:0;++se;const Vn=se<z.length?Q[z.charAt(se)]:64;++se;const dt=se<z.length?Q[z.charAt(se)]:64;if(++se,null==je||null==tn||null==Vn||null==dt)throw Error();_e.push(je<<2|tn>>4),64!==Vn&&(_e.push(tn<<4&240|Vn>>2),64!==dt&&_e.push(Vn<<6&192|dt))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},J=function(z){const H=re(z);return me.encodeByteArray(H,!0)},ne=function(z){return J(z).replace(/\./g,"")},U=function(z){try{return me.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(z){return B(void 0,z)}function B(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const Q in H)!H.hasOwnProperty(Q)||!te(Q)||(z[Q]=B(z[Q],H[Q]));return z}function te(z){return"__proto__"!==z}class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Q)=>{this.resolve=H,this.reject=Q})}wrapCallback(H){return(Q,_e)=>{Q?this.reject(Q):this.resolve(_e),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Q):H(Q,_e))}}}function fe(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=H||"demo-project",se=z.iat||0,je=z.sub||z.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:se,exp:se+3600,auth_time:se,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},z);return[ne(JSON.stringify({alg:"none",type:"JWT"})),ne(JSON.stringify(yt)),""].join(".")}function pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pe())}function oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function he(){return"object"==typeof self&&self.self===self}function ke(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function $e(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ft(){return pe().indexOf("Electron/")>=0}function Qe(){const z=pe();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function wt(){return pe().indexOf("MSAppHost/")>=0}function ct(){return!1}function ze(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Se(){return"object"==typeof indexedDB}function we(){return new Promise((z,H)=>{try{let Q=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(_e);se.onsuccess=()=>{se.result.close(),Q||self.indexedDB.deleteDatabase(_e),z(!0)},se.onupgradeneeded=()=>{Q=!1},se.onerror=()=>{var je;H((null===(je=se.error)||void 0===je?void 0:je.message)||"")}}catch(Q){H(Q)}})}function Ue(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Te extends Error{constructor(H,Q,_e){super(Q),this.code=H,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,Te.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rt.prototype.create)}}class Rt{constructor(H,Q,_e){this.service=H,this.serviceName=Q,this.errors=_e}create(H,...Q){const _e=Q[0]||{},se=`${this.service}/${H}`,je=this.errors[H],yt=je?function(z,H){return z.replace(jt,(Q,_e)=>{const se=H[_e];return null!=se?String(se):`<${_e}?>`})}(je,_e):"Error";return new Te(se,`${this.serviceName}: ${yt} (${se}).`,_e)}}const jt=/\{\$([^}]+)}/g;function Sn(z){return JSON.parse(z)}function Xt(z){return JSON.stringify(z)}const ot=function(z){let H={},Q={},_e={},se="";try{const je=z.split(".");H=Sn(U(je[0])||""),Q=Sn(U(je[1])||""),se=je[2],_e=Q.d||{},delete Q.d}catch(je){}return{header:H,claims:Q,data:_e,signature:se}},Gn=function(z){const Q=ot(z).claims;return!!Q&&"object"==typeof Q&&Q.hasOwnProperty("iat")},Tt=function(z){const H=ot(z).claims;return"object"==typeof H&&!0===H.admin};function Fn(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function gn(z,H){if(Object.prototype.hasOwnProperty.call(z,H))return z[H]}function sn(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function Xn(z,H,Q){const _e={};for(const se in z)Object.prototype.hasOwnProperty.call(z,se)&&(_e[se]=H.call(Q,z[se],se,z));return _e}function vn(z,H){if(z===H)return!0;const Q=Object.keys(z),_e=Object.keys(H);for(const se of Q){if(!_e.includes(se))return!1;const je=z[se],yt=H[se];if(In(je)&&In(yt)){if(!vn(je,yt))return!1}else if(je!==yt)return!1}for(const se of _e)if(!Q.includes(se))return!1;return!0}function In(z){return null!==z&&"object"==typeof z}function io(z){const H=[];for(const[Q,_e]of Object.entries(z))Array.isArray(_e)?_e.forEach(se=>{H.push(encodeURIComponent(Q)+"="+encodeURIComponent(se))}):H.push(encodeURIComponent(Q)+"="+encodeURIComponent(_e));return H.length?"&"+H.join("&"):""}function ar(z){const H={};return z.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[se,je]=_e.split("=");H[decodeURIComponent(se)]=decodeURIComponent(je)}}),H}function Ii(z){const H=z.indexOf("?");if(!H)return"";const Q=z.indexOf("#",H);return z.substring(H,Q>0?Q:void 0)}class Me{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Q){Q||(Q=0);const _e=this.W_;if("string"==typeof H)for(let dt=0;dt<16;dt++)_e[dt]=H.charCodeAt(Q)<<24|H.charCodeAt(Q+1)<<16|H.charCodeAt(Q+2)<<8|H.charCodeAt(Q+3),Q+=4;else for(let dt=0;dt<16;dt++)_e[dt]=H[Q]<<24|H[Q+1]<<16|H[Q+2]<<8|H[Q+3],Q+=4;for(let dt=16;dt<80;dt++){const Nn=_e[dt-3]^_e[dt-8]^_e[dt-14]^_e[dt-16];_e[dt]=4294967295&(Nn<<1|Nn>>>31)}let Vn,zi,se=this.chain_[0],je=this.chain_[1],yt=this.chain_[2],tn=this.chain_[3],Mr=this.chain_[4];for(let dt=0;dt<80;dt++){dt<40?dt<20?(Vn=tn^je&(yt^tn),zi=1518500249):(Vn=je^yt^tn,zi=1859775393):dt<60?(Vn=je&yt|tn&(je|yt),zi=2400959708):(Vn=je^yt^tn,zi=3395469782);const Nn=(se<<5|se>>>27)+Vn+Mr+zi+_e[dt]&4294967295;Mr=tn,tn=yt,yt=4294967295&(je<<30|je>>>2),je=se,se=Nn}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+je&4294967295,this.chain_[2]=this.chain_[2]+yt&4294967295,this.chain_[3]=this.chain_[3]+tn&4294967295,this.chain_[4]=this.chain_[4]+Mr&4294967295}update(H,Q){if(null==H)return;void 0===Q&&(Q=H.length);const _e=Q-this.blockSize;let se=0;const je=this.buf_;let yt=this.inbuf_;for(;se<Q;){if(0===yt)for(;se<=_e;)this.compress_(H,se),se+=this.blockSize;if("string"==typeof H){for(;se<Q;)if(je[yt]=H.charCodeAt(se),++yt,++se,yt===this.blockSize){this.compress_(je),yt=0;break}}else for(;se<Q;)if(je[yt]=H[se],++yt,++se,yt===this.blockSize){this.compress_(je),yt=0;break}}this.inbuf_=yt,this.total_+=Q}digest(){const H=[];let Q=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&Q,Q/=256;this.compress_(this.buf_);let _e=0;for(let se=0;se<5;se++)for(let je=24;je>=0;je-=8)H[_e]=this.chain_[se]>>je&255,++_e;return H}}function ur(z,H){const Q=new Ze(z,H);return Q.subscribe.bind(Q)}class Ze{constructor(H,Q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Q,this.task.then(()=>{H(this)}).catch(_e=>{this.error(_e)})}next(H){this.forEachObserver(Q=>{Q.next(H)})}error(H){this.forEachObserver(Q=>{Q.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Q,_e){let se;if(void 0===H&&void 0===Q&&void 0===_e)throw new Error("Missing Observer.");se=function(z,H){if("object"!=typeof z||null===z)return!1;for(const Q of["next","error","complete"])if(Q in z&&"function"==typeof z[Q])return!0;return!1}(H)?H:{next:H,error:Q,complete:_e},void 0===se.next&&(se.next=pr),void 0===se.error&&(se.error=pr),void 0===se.complete&&(se.complete=pr);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(yt){}}),this.observers.push(se),je}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Q=0;Q<this.observers.length;Q++)this.sendOne(Q,H)}sendOne(H,Q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Q(this.observers[H])}catch(_e){"undefined"!=typeof console&&console.error&&console.error(_e)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pr(){}const so=function(z,H,Q,_e){let se;if(_e<H?se="at least "+H:_e>Q&&(se=0===Q?"none":"no more than "+Q),se)throw new Error(z+" failed: Was called with "+_e+(1===_e?" argument.":" arguments.")+" Expects "+se+".")};function Cr(z,H){return`${z} failed: ${H} argument `}function Ln(z,H,Q,_e){if((!_e||Q)&&"function"!=typeof Q)throw new Error(Cr(z,H)+"must be a valid function.")}function sl(z,H,Q,_e){if((!_e||Q)&&("object"!=typeof Q||null===Q))throw new Error(Cr(z,H)+"must be a valid context object.")}const An=function(z){const H=[];let Q=0;for(let _e=0;_e<z.length;_e++){let se=z.charCodeAt(_e);if(se>=55296&&se<=56319){const je=se-55296;_e++,L(_e<z.length,"Surrogate pair missing trail surrogate."),se=65536+(je<<10)+(z.charCodeAt(_e)-56320)}se<128?H[Q++]=se:se<2048?(H[Q++]=se>>6|192,H[Q++]=63&se|128):se<65536?(H[Q++]=se>>12|224,H[Q++]=se>>6&63|128,H[Q++]=63&se|128):(H[Q++]=se>>18|240,H[Q++]=se>>12&63|128,H[Q++]=se>>6&63|128,H[Q++]=63&se|128)}return H},He=function(z){let H=0;for(let Q=0;Q<z.length;Q++){const _e=z.charCodeAt(Q);_e<128?H++:_e<2048?H+=2:_e>=55296&&_e<=56319?(H+=4,Q++):H+=3}return H};function Et(z,H=1e3,Q=2){const _e=H*Math.pow(Q,z),se=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+se)}function un(z){return z&&z._delegate?z._delegate:z}function Pt(z,H){return new Promise((Q,_e)=>{z.onsuccess=se=>{Q(se.target.result)},z.onerror=se=>{var je;_e(`${H}: ${null===(je=se.target.error)||void 0===je?void 0:je.message}`)}})}class Dt{constructor(H){this._db=H,this.objectStoreNames=this._db.objectStoreNames}transaction(H,Q="readonly"){return new Ye(this._db.transaction.call(this._db,H,Q))}createObjectStore(H,Q){return new Ae(this._db.createObjectStore(H,Q))}close(){this._db.close()}}class Ye{constructor(H){this._transaction=H,this.complete=new Promise((Q,_e)=>{this._transaction.oncomplete=function(){Q()},this._transaction.onerror=()=>{_e(this._transaction.error)},this._transaction.onabort=()=>{_e(this._transaction.error)}})}objectStore(H){return new Ae(this._transaction.objectStore(H))}}class Ae{constructor(H){this._store=H}index(H){return new at(this._store.index(H))}createIndex(H,Q,_e){return new at(this._store.createIndex(H,Q,_e))}get(H){return Pt(this._store.get(H),"Error reading from IndexedDB")}put(H,Q){return Pt(this._store.put(H,Q),"Error writing to IndexedDB")}delete(H){return Pt(this._store.delete(H),"Error deleting from IndexedDB")}clear(){return Pt(this._store.clear(),"Error clearing IndexedDB object store")}}class at{constructor(H){this._index=H}get(H){return Pt(this._index.get(H),"Error reading from IndexedDB")}}function _t(z,H,Q){return new Promise((_e,se)=>{try{const je=indexedDB.open(z,H);je.onsuccess=yt=>{_e(new Dt(yt.target.result))},je.onerror=yt=>{var tn;se(`Error opening indexedDB: ${null===(tn=yt.target.error)||void 0===tn?void 0:tn.message}`)},je.onupgradeneeded=yt=>{Q(new Dt(je.result),yt.oldVersion,yt.newVersion,new Ye(je.transaction))}}catch(je){se(`Error opening indexedDB: ${je.message}`)}})}function Lt(z){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,m.Z)(function*(z){return new Promise((H,Q)=>{try{const _e=indexedDB.deleteDatabase(z);_e.onsuccess=()=>{H()},_e.onerror=se=>{var je;Q(`Error deleting indexedDB database "${z}": ${null===(je=se.target.error)||void 0===je?void 0:je.message}`)}}catch(_e){Q(`Error deleting indexedDB database "${z}": ${_e.message}`)}})})).apply(this,arguments)}},8873:function(tt){tt.exports=function(){"use strict";var V=6e4,m=36e5,X="millisecond",L="second",ae="minute",re="hour",Z="day",me="week",J="month",ne="quarter",U="year",G="date",B="Invalid Date",te=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ue=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},pe=function(ze,Se,we){var Ue=String(ze);return!Ue||Ue.length>=Se?ze:""+Array(Se+1-Ue.length).join(we)+ze},Le={s:pe,z:function(ze){var Se=-ze.utcOffset(),we=Math.abs(Se),Ue=Math.floor(we/60),Ie=we%60;return(Se<=0?"+":"-")+pe(Ue,2,"0")+":"+pe(Ie,2,"0")},m:function ze(Se,we){if(Se.date()<we.date())return-ze(we,Se);var Ue=12*(we.year()-Se.year())+(we.month()-Se.month()),Ie=Se.clone().add(Ue,J),Be=we-Ie<0,Te=Se.clone().add(Ue+(Be?-1:1),J);return+(-(Ue+(we-Ie)/(Be?Ie-Te:Te-Ie))||0)},a:function(ze){return ze<0?Math.ceil(ze)||0:Math.floor(ze)},p:function(ze){return{M:J,y:U,w:me,d:Z,D:G,h:re,m:ae,s:L,ms:X,Q:ne}[ze]||String(ze||"").toLowerCase().replace(/s$/,"")},u:function(ze){return void 0===ze}},oe="en",he={};he[oe]=fe;var ke=function(ze){return ze instanceof wt},$e=function ze(Se,we,Ue){var Ie;if(!Se)return oe;if("string"==typeof Se){var Be=Se.toLowerCase();he[Be]&&(Ie=Be),we&&(he[Be]=we,Ie=Be);var Te=Se.split("-");if(!Ie&&Te.length>1)return ze(Te[0])}else{var Rt=Se.name;he[Rt]=Se,Ie=Rt}return!Ue&&Ie&&(oe=Ie),Ie||!Ue&&oe},ft=function(ze,Se){if(ke(ze))return ze.clone();var we="object"==typeof Se?Se:{};return we.date=ze,we.args=arguments,new wt(we)},Qe=Le;Qe.l=$e,Qe.i=ke,Qe.w=function(ze,Se){return ft(ze,{locale:Se.$L,utc:Se.$u,x:Se.$x,$offset:Se.$offset})};var wt=function(){function ze(we){this.$L=$e(we.locale,null,!0),this.parse(we)}var Se=ze.prototype;return Se.parse=function(we){this.$d=function(Ue){var Ie=Ue.date,Be=Ue.utc;if(null===Ie)return new Date(NaN);if(Qe.u(Ie))return new Date;if(Ie instanceof Date)return new Date(Ie);if("string"==typeof Ie&&!/Z$/i.test(Ie)){var Te=Ie.match(te);if(Te){var Rt=Te[2]-1||0,dn=(Te[7]||"0").substring(0,3);return Be?new Date(Date.UTC(Te[1],Rt,Te[3]||1,Te[4]||0,Te[5]||0,Te[6]||0,dn)):new Date(Te[1],Rt,Te[3]||1,Te[4]||0,Te[5]||0,Te[6]||0,dn)}}return new Date(Ie)}(we),this.$x=we.x||{},this.init()},Se.init=function(){var we=this.$d;this.$y=we.getFullYear(),this.$M=we.getMonth(),this.$D=we.getDate(),this.$W=we.getDay(),this.$H=we.getHours(),this.$m=we.getMinutes(),this.$s=we.getSeconds(),this.$ms=we.getMilliseconds()},Se.$utils=function(){return Qe},Se.isValid=function(){return this.$d.toString()!==B},Se.isSame=function(we,Ue){var Ie=ft(we);return this.startOf(Ue)<=Ie&&Ie<=this.endOf(Ue)},Se.isAfter=function(we,Ue){return ft(we)<this.startOf(Ue)},Se.isBefore=function(we,Ue){return this.endOf(Ue)<ft(we)},Se.$g=function(we,Ue,Ie){return Qe.u(we)?this[Ue]:this.set(Ie,we)},Se.unix=function(){return Math.floor(this.valueOf()/1e3)},Se.valueOf=function(){return this.$d.getTime()},Se.startOf=function(we,Ue){var Ie=this,Be=!!Qe.u(Ue)||Ue,Te=Qe.p(we),Rt=function(Gn,Tt){var Fn=Qe.w(Ie.$u?Date.UTC(Ie.$y,Tt,Gn):new Date(Ie.$y,Tt,Gn),Ie);return Be?Fn:Fn.endOf(Z)},dn=function(Gn,Tt){return Qe.w(Ie.toDate()[Gn].apply(Ie.toDate("s"),(Be?[0,0,0,0]:[23,59,59,999]).slice(Tt)),Ie)},jt=this.$W,Sn=this.$M,Xt=this.$D,ot="set"+(this.$u?"UTC":"");switch(Te){case U:return Be?Rt(1,0):Rt(31,11);case J:return Be?Rt(1,Sn):Rt(0,Sn+1);case me:var Nr=this.$locale().weekStart||0,hi=(jt<Nr?jt+7:jt)-Nr;return Rt(Be?Xt-hi:Xt+(6-hi),Sn);case Z:case G:return dn(ot+"Hours",0);case re:return dn(ot+"Minutes",1);case ae:return dn(ot+"Seconds",2);case L:return dn(ot+"Milliseconds",3);default:return this.clone()}},Se.endOf=function(we){return this.startOf(we,!1)},Se.$set=function(we,Ue){var Ie,Be=Qe.p(we),Te="set"+(this.$u?"UTC":""),Rt=(Ie={},Ie[Z]=Te+"Date",Ie[G]=Te+"Date",Ie[J]=Te+"Month",Ie[U]=Te+"FullYear",Ie[re]=Te+"Hours",Ie[ae]=Te+"Minutes",Ie[L]=Te+"Seconds",Ie[X]=Te+"Milliseconds",Ie)[Be],dn=Be===Z?this.$D+(Ue-this.$W):Ue;if(Be===J||Be===U){var jt=this.clone().set(G,1);jt.$d[Rt](dn),jt.init(),this.$d=jt.set(G,Math.min(this.$D,jt.daysInMonth())).$d}else Rt&&this.$d[Rt](dn);return this.init(),this},Se.set=function(we,Ue){return this.clone().$set(we,Ue)},Se.get=function(we){return this[Qe.p(we)]()},Se.add=function(we,Ue){var Ie,Be=this;we=Number(we);var Te=Qe.p(Ue),Rt=function(Sn){var Xt=ft(Be);return Qe.w(Xt.date(Xt.date()+Math.round(Sn*we)),Be)};if(Te===J)return this.set(J,this.$M+we);if(Te===U)return this.set(U,this.$y+we);if(Te===Z)return Rt(1);if(Te===me)return Rt(7);var dn=(Ie={},Ie[ae]=V,Ie[re]=m,Ie[L]=1e3,Ie)[Te]||1,jt=this.$d.getTime()+we*dn;return Qe.w(jt,this)},Se.subtract=function(we,Ue){return this.add(-1*we,Ue)},Se.format=function(we){var Ue=this,Ie=this.$locale();if(!this.isValid())return Ie.invalidDate||B;var Be=we||"YYYY-MM-DDTHH:mm:ssZ",Te=Qe.z(this),Rt=this.$H,dn=this.$m,jt=this.$M,Sn=Ie.weekdays,Xt=Ie.months,ot=function(Tt,Fn,gn,sn){return Tt&&(Tt[Fn]||Tt(Ue,Be))||gn[Fn].slice(0,sn)},Nr=function(Tt){return Qe.s(Rt%12||12,Tt,"0")},hi=Ie.meridiem||function(Tt,Fn,gn){var sn=Tt<12?"AM":"PM";return gn?sn.toLowerCase():sn},Gn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:jt+1,MM:Qe.s(jt+1,2,"0"),MMM:ot(Ie.monthsShort,jt,Xt,3),MMMM:ot(Xt,jt),D:this.$D,DD:Qe.s(this.$D,2,"0"),d:String(this.$W),dd:ot(Ie.weekdaysMin,this.$W,Sn,2),ddd:ot(Ie.weekdaysShort,this.$W,Sn,3),dddd:Sn[this.$W],H:String(Rt),HH:Qe.s(Rt,2,"0"),h:Nr(1),hh:Nr(2),a:hi(Rt,dn,!0),A:hi(Rt,dn,!1),m:String(dn),mm:Qe.s(dn,2,"0"),s:String(this.$s),ss:Qe.s(this.$s,2,"0"),SSS:Qe.s(this.$ms,3,"0"),Z:Te};return Be.replace(ue,function(Tt,Fn){return Fn||Gn[Tt]||Te.replace(":","")})},Se.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Se.diff=function(we,Ue,Ie){var Be,Te=Qe.p(Ue),Rt=ft(we),dn=(Rt.utcOffset()-this.utcOffset())*V,jt=this-Rt,Sn=Qe.m(this,Rt);return Sn=(Be={},Be[U]=Sn/12,Be[J]=Sn,Be[ne]=Sn/3,Be[me]=(jt-dn)/6048e5,Be[Z]=(jt-dn)/864e5,Be[re]=jt/m,Be[ae]=jt/V,Be[L]=jt/1e3,Be)[Te]||jt,Ie?Sn:Qe.a(Sn)},Se.daysInMonth=function(){return this.endOf(J).$D},Se.$locale=function(){return he[this.$L]},Se.locale=function(we,Ue){if(!we)return this.$L;var Ie=this.clone(),Be=$e(we,Ue,!0);return Be&&(Ie.$L=Be),Ie},Se.clone=function(){return Qe.w(this.$d,this)},Se.toDate=function(){return new Date(this.valueOf())},Se.toJSON=function(){return this.isValid()?this.toISOString():null},Se.toISOString=function(){return this.$d.toISOString()},Se.toString=function(){return this.$d.toUTCString()},ze}(),ct=wt.prototype;return ft.prototype=ct,[["$ms",X],["$s",L],["$m",ae],["$H",re],["$W",Z],["$M",J],["$y",U],["$D",G]].forEach(function(ze){ct[ze[1]]=function(Se){return this.$g(Se,ze[0],ze[1])}}),ft.extend=function(ze,Se){return ze.$i||(ze(Se,wt,ft),ze.$i=!0),ft},ft.locale=$e,ft.isDayjs=ke,ft.unix=function(ze){return ft(1e3*ze)},ft.en=he[oe],ft.Ls=he,ft.p={},ft}()},4292:function(tt){tt.exports=function(){"use strict";var be={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},V=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,m=/\d\d/,X=/\d\d?/,L=/\d*[^\s\d-_:/()]+/,ae={},re=function(B){return(B=+B)+(B>68?1900:2e3)},Z=function(B){return function(te){this[B]=+te}},me=[/[+-]\d\d:?(\d\d)?|Z/,function(B){(this.zone||(this.zone={})).offset=function(te){if(!te||"Z"===te)return 0;var ue=te.match(/([+-]|\d\d)/g),fe=60*ue[1]+(+ue[2]||0);return 0===fe?0:"+"===ue[0]?-fe:fe}(B)}],J=function(B){var te=ae[B];return te&&(te.indexOf?te:te.s.concat(te.f))},ne=function(B,te){var ue,fe=ae.meridiem;if(fe){for(var pe=1;pe<=24;pe+=1)if(B.indexOf(fe(pe,0,te))>-1){ue=pe>12;break}}else ue=B===(te?"pm":"PM");return ue},U={A:[L,function(B){this.afternoon=ne(B,!1)}],a:[L,function(B){this.afternoon=ne(B,!0)}],S:[/\d/,function(B){this.milliseconds=100*+B}],SS:[m,function(B){this.milliseconds=10*+B}],SSS:[/\d{3}/,function(B){this.milliseconds=+B}],s:[X,Z("seconds")],ss:[X,Z("seconds")],m:[X,Z("minutes")],mm:[X,Z("minutes")],H:[X,Z("hours")],h:[X,Z("hours")],HH:[X,Z("hours")],hh:[X,Z("hours")],D:[X,Z("day")],DD:[m,Z("day")],Do:[L,function(B){var te=ae.ordinal,ue=B.match(/\d+/);if(this.day=ue[0],te)for(var fe=1;fe<=31;fe+=1)te(fe).replace(/\[|\]/g,"")===B&&(this.day=fe)}],M:[X,Z("month")],MM:[m,Z("month")],MMM:[L,function(B){var te=J("months"),ue=(J("monthsShort")||te.map(function(fe){return fe.slice(0,3)})).indexOf(B)+1;if(ue<1)throw new Error;this.month=ue%12||ue}],MMMM:[L,function(B){var te=J("months").indexOf(B)+1;if(te<1)throw new Error;this.month=te%12||te}],Y:[/[+-]?\d+/,Z("year")],YY:[m,function(B){this.year=re(B)}],YYYY:[/\d{4}/,Z("year")],Z:me,ZZ:me};return function(B,te,ue){ue.p.customParseFormat=!0,B&&B.parseTwoDigitYear&&(re=B.parseTwoDigitYear);var fe=te.prototype,pe=fe.parse;fe.parse=function(Le){var oe=Le.date,he=Le.utc,ke=Le.args;this.$u=he;var $e=ke[1];if("string"==typeof $e){var ft=!0===ke[2],Qe=!0===ke[3],wt=ft||Qe,ct=ke[2];Qe&&(ct=ke[2]),ae=this.$locale(),!ft&&ct&&(ae=ue.Ls[ct]),this.$d=function(Ue,Ie,Be){try{if(["x","X"].indexOf(Ie)>-1)return new Date(("X"===Ie?1e3:1)*Ue);var Te=function(B){var ue;ue=ae&&ae.formats;for(var fe=(B=B.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(ft,Qe,wt){var ct=wt&&wt.toUpperCase();return Qe||ue[wt]||be[wt]||ue[ct].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ze,Se,we){return Se||we.slice(1)})})).match(V),pe=fe.length,Le=0;Le<pe;Le+=1){var oe=fe[Le],he=U[oe],$e=he&&he[1];fe[Le]=$e?{regex:he&&he[0],parser:$e}:oe.replace(/^\[|\]$/g,"")}return function(ft){for(var Qe={},wt=0,ct=0;wt<pe;wt+=1){var ze=fe[wt];if("string"==typeof ze)ct+=ze.length;else{var Se=ze.regex,we=ze.parser,Ue=ft.slice(ct),Ie=Se.exec(Ue)[0];we.call(Qe,Ie),ft=ft.replace(Ie,"")}}return function(Be){var Te=Be.afternoon;if(void 0!==Te){var Rt=Be.hours;Te?Rt<12&&(Be.hours+=12):12===Rt&&(Be.hours=0),delete Be.afternoon}}(Qe),Qe}}(Ie)(Ue),Rt=Te.year,dn=Te.month,jt=Te.day,Sn=Te.hours,Xt=Te.minutes,ot=Te.seconds,Nr=Te.milliseconds,hi=Te.zone,Gn=new Date,Tt=jt||(Rt||dn?1:Gn.getDate()),Fn=Rt||Gn.getFullYear(),gn=0;Rt&&!dn||(gn=dn>0?dn-1:Gn.getMonth());var sn=Sn||0,Xn=Xt||0,vn=ot||0,In=Nr||0;return hi?new Date(Date.UTC(Fn,gn,Tt,sn,Xn,vn,In+60*hi.offset*1e3)):Be?new Date(Date.UTC(Fn,gn,Tt,sn,Xn,vn,In)):new Date(Fn,gn,Tt,sn,Xn,vn,In)}catch(io){return new Date("")}}(oe,$e,he),this.init(),ct&&!0!==ct&&(this.$L=this.locale(ct).$L),wt&&oe!=this.format($e)&&(this.$d=new Date("")),ae={}}else if($e instanceof Array)for(var ze=$e.length,Se=1;Se<=ze;Se+=1){ke[1]=$e[Se-1];var we=ue.apply(this,ke);if(we.isValid()){this.$d=we.$d,this.$L=we.$L,this.init();break}Se===ze&&(this.$d=new Date(""))}else pe.call(this,Le)}}}()},2329:(tt,be,V)=>{"use strict";V.d(be,{Mq:()=>m.getApp,C6:()=>m.getApps});var m=V(8026);(0,m.registerVersion)("firebase","9.6.11","app")},7841:(tt,be,V)=>{"use strict";V.d(be,{Z:()=>m.Z});var m=V(3394);m.Z.registerVersion("firebase","9.6.11","app-compat")},3259:(tt,be,V)=>{"use strict";V.r(be);var m=V(8239),X=V(3394),L=V(3854),ae=V(8026);function J(v,f){var g={};for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&f.indexOf(w)<0&&(g[w]=v[w]);if(null!=v&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(w=Object.getOwnPropertySymbols(v);D<w.length;D++)f.indexOf(w[D])<0&&Object.prototype.propertyIsEnumerable.call(v,w[D])&&(g[w[D]]=v[w[D]])}return g}var Te=V(5422),Rt=V(3910);const Gn=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Tt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Fn=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),sn=new Te.Yd("@firebase/auth");function Xn(v,...f){sn.logLevel<=Te.in.ERROR&&sn.error(`Auth (${ae.SDK_VERSION}): ${v}`,...f)}function vn(v,...f){throw Ii(v,...f)}function In(v,...f){return Ii(v,...f)}function io(v,f,g){const w=Object.assign(Object.assign({},Tt()),{[f]:g});return new L.LL("auth","Firebase",w).create(f,{appName:v.name})}function ar(v,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&vn(v,"argument-error"),io(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ii(v,...f){if("string"!=typeof v){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(g,...w)}return Fn.create(v,...f)}function Me(v,f,...g){if(!v)throw Ii(f,...g)}function ur(v){const f="INTERNAL ASSERTION FAILED: "+v;throw Xn(f),new Error(f)}function Ze(v,f){v||ur(f)}const er=new Map;function Wn(v){Ze(v instanceof Function,"Expected a class definition");let f=er.get(v);return f?(Ze(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,er.set(v,f),f)}function Cr(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ir(){return"http:"===Ln()||"https:"===Ln()}function Ln(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class He{constructor(f,g){this.shortDelay=f,this.longDelay=g,Ze(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ir()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function mt(v,f){Ze(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Ns{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ms={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fi=new He(3e4,6e4);function Et(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function on(v,f,g,w){return oo.apply(this,arguments)}function oo(){return(oo=(0,m.Z)(function*(v,f,g,w,D={}){return un(v,D,(0,m.Z)(function*(){let N={},q={};w&&("GET"===f?q=w:N={body:JSON.stringify(w)});const le=(0,L.xO)(Object.assign({key:v.config.apiKey},q)).slice(1),Ve=yield v._getAdditionalHeaders();return Ve["Content-Type"]="application/json",v.languageCode&&(Ve["X-Firebase-Locale"]=v.languageCode),Ns.fetch()(Ae(v,v.config.apiHost,g,le),Object.assign({method:f,headers:Ve,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function un(v,f,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(v,f,g){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Ms),f);try{const D=new at(v),N=yield Promise.race([g(),D.promise]);D.clearNetworkTimeout();const q=yield N.json();if("needConfirmation"in q)throw _t(v,"account-exists-with-different-credential",q);if(N.ok&&!("errorMessage"in q))return q;{const le=N.ok?q.errorMessage:q.error.message,[Ve,Re]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw _t(v,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ve)throw _t(v,"email-already-in-use",q);const Je=w[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw io(v,Je,Re);vn(v,Je)}}catch(D){if(D instanceof L.ZR)throw D;vn(v,"network-request-failed")}})).apply(this,arguments)}function Dt(v,f,g,w){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,m.Z)(function*(v,f,g,w,D={}){const N=yield on(v,f,g,w,D);return"mfaPendingCredential"in N&&vn(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ae(v,f,g,w){const D=`${f}${g}?${w}`;return v.config.emulator?mt(v.config,D):`${v.config.apiScheme}://${D}`}class at{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(In(this.auth,"network-request-failed")),fi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _t(v,f,g){const w={appName:v.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const D=In(v,f,w);return D.customData._tokenResponse=g,D}function Qt(){return(Qt=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function z(v,f){return H.apply(this,arguments)}function H(){return(H=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Q(v,f){return _e.apply(this,arguments)}function _e(){return(_e=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function se(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function tn(){return(tn=(0,m.Z)(function*(v,f=!1){const g=(0,L.m9)(v),w=yield g.getIdToken(f),D=Vn(w);Me(D&&D.exp&&D.auth_time&&D.iat,g.auth,"internal-error");const N="object"==typeof D.firebase?D.firebase:void 0,q=null==N?void 0:N.sign_in_provider;return{claims:D,token:w,authTime:se(Mr(D.auth_time)),issuedAtTime:se(Mr(D.iat)),expirationTime:se(Mr(D.exp)),signInProvider:q||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function Mr(v){return 1e3*Number(v)}function Vn(v){const[f,g,w]=v.split(".");if(void 0===f||void 0===g||void 0===w)return Xn("JWT malformed, contained fewer than 3 sections"),null;try{const D=(0,L.tV)(g);return D?JSON.parse(D):(Xn("Failed to decode base64 JWT payload"),null)}catch(D){return Xn("Caught error parsing JWT payload as JSON",D),null}}function dt(v,f){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,m.Z)(function*(v,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof L.ZR&&Br(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Br({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Pr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const D=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,D)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class cp{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=se(this.lastLoginAt),this.creationTime=se(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Tr(v){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,m.Z)(function*(v){var f;const g=v.auth,w=yield v.getIdToken(),D=yield dt(v,Q(g,{idToken:w}));Me(null==D?void 0:D.users.length,g,"internal-error");const N=D.users[0];v._notifyReloadListener(N);const q=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?Go(N.providerUserInfo):[],le=pi(v.providerData,q),Je=!!v.isAnonymous&&!(v.email&&N.passwordHash||(null==le?void 0:le.length)),nt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:le,metadata:new cp(N.createdAt,N.lastLoginAt),isAnonymous:Je};Object.assign(v,nt)})).apply(this,arguments)}function hn(){return(hn=(0,m.Z)(function*(v){const f=(0,L.m9)(v);yield Tr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function pi(v,f){return[...v.filter(w=>!f.some(D=>D.providerId===w.providerId)),...f]}function Go(v){return v.map(f=>{var{providerId:g}=f,w=J(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Ki(){return(Ki=(0,m.Z)(function*(v,f){const g=yield un(v,{},(0,m.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:N}=v.config,q=Ae(v,D,"/v1/token",`key=${N}`),le=yield v._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Ns.fetch()(q,{method:"POST",headers:le,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class En{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Me(f.idToken,"internal-error"),Me(void 0!==f.idToken,"internal-error"),Me(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(v){const f=Vn(v);return Me(f,"internal-error"),Me(void 0!==f.exp,"internal-error"),Me(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,m.Z)(function*(){return Me(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,m.Z)(function*(){const{accessToken:D,refreshToken:N,expiresIn:q}=yield function(v,f){return Ki.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(D,N,Number(q))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:D,expirationTime:N}=g,q=new En;return w&&(Me("string"==typeof w,"internal-error",{appName:f}),q.refreshToken=w),D&&(Me("string"==typeof D,"internal-error",{appName:f}),q.accessToken=D),N&&(Me("number"==typeof N,"internal-error",{appName:f}),q.expirationTime=N),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new En,this.toJSON())}_performRefresh(){return ur("not implemented")}}function gi(v,f){Me("string"==typeof v||void 0===v,"internal-error",{appName:f})}class Ti{constructor(f){var{uid:g,auth:w,stsTokenManager:D}=f,N=J(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=D,this.accessToken=D.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new cp(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const w=yield dt(g,g.stsTokenManager.getToken(g.auth,f));return Me(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function(v){return tn.apply(this,arguments)}(this,f)}reload(){return function(v){return hn.apply(this,arguments)}(this)}_assign(f){this!==f&&(Me(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Ti(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,m.Z)(function*(){let D=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),D=!0),g&&(yield Tr(w)),yield w.auth._persistUserIfCurrent(w),D&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield dt(f,function(v,f){return Qt.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,D,N,q,le,Ve,Re,Je;const nt=null!==(w=g.displayName)&&void 0!==w?w:void 0,en=null!==(D=g.email)&&void 0!==D?D:void 0,yr=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,Xa=null!==(q=g.photoURL)&&void 0!==q?q:void 0,zh=null!==(le=g.tenantId)&&void 0!==le?le:void 0,gd=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,I_=null!==(Re=g.createdAt)&&void 0!==Re?Re:void 0,T_=null!==(Je=g.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:og,emailVerified:md,isAnonymous:_d,providerData:Kh,stsTokenManager:aa}=g;Me(og&&aa,f,"internal-error");const CE=En.fromJSON(this.name,aa);Me("string"==typeof og,f,"internal-error"),gi(nt,f.name),gi(en,f.name),Me("boolean"==typeof md,f,"internal-error"),Me("boolean"==typeof _d,f,"internal-error"),gi(yr,f.name),gi(Xa,f.name),gi(zh,f.name),gi(gd,f.name),gi(I_,f.name),gi(T_,f.name);const ag=new Ti({uid:og,auth:f,email:en,emailVerified:md,displayName:nt,isAnonymous:_d,photoURL:Xa,phoneNumber:yr,tenantId:zh,stsTokenManager:CE,createdAt:I_,lastLoginAt:T_});return Kh&&Array.isArray(Kh)&&(ag.providerData=Kh.map(D_=>Object.assign({},D_))),gd&&(ag._redirectEventId=gd),ag}static _fromIdTokenResponse(f,g,w=!1){return(0,m.Z)(function*(){const D=new En;D.updateFromServerResponse(g);const N=new Ti({uid:g.localId,auth:f,stsTokenManager:D,isAnonymous:w});return yield Tr(N),N})()}}const Di=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,w){var D=this;return(0,m.Z)(function*(){D.storage[g]=w})()}_get(g){var w=this;return(0,m.Z)(function*(){const D=w.storage[g];return void 0===D?null:D})()}_remove(g){var w=this;return(0,m.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return v.type="NONE",v})();function Cn(v,f,g){return`firebase:${v}:${f}:${g}`}class ao{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:D,name:N}=this.auth;this.fullUserKey=Cn(this.userKey,D.apiKey,N),this.fullPersistenceKey=Cn("persistence",D.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Ti._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,m.Z)(function*(){if(!g.length)return new ao(Wn(Di),f,w);const D=(yield Promise.all(g.map(function(){var Re=(0,m.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let N=D[0]||Wn(Di);const q=Cn(w,f.config.apiKey,f.name);let le=null;for(const Re of g)try{const Je=yield Re._get(q);if(Je){const nt=Ti._fromJSON(f,Je);Re!==N&&(le=nt),N=Re;break}}catch(Je){}const Ve=D.filter(Re=>Re._shouldAllowMigration);return N._shouldAllowMigration&&Ve.length?(N=Ve[0],le&&(yield N._set(q,le.toJSON())),yield Promise.all(g.map(function(){var Re=(0,m.Z)(function*(Je){if(Je!==N)try{yield Je._remove(q)}catch(nt){}});return function(Je){return Re.apply(this,arguments)}}())),new ao(N,f,w)):new ao(N,f,w)})()}}function Aa(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ti(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(jr(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Rc(f))return"Blackberry";if(ol(f))return"Webos";if(Ps(f))return"Safari";if((f.includes("chrome/")||Wo(f))&&!f.includes("edge/"))return"Chrome";if(ln(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function jr(v=(0,L.z$)()){return/firefox\//i.test(v)}function Ps(v=(0,L.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Wo(v=(0,L.z$)()){return/crios\//i.test(v)}function ti(v=(0,L.z$)()){return/iemobile/i.test(v)}function ln(v=(0,L.z$)()){return/android/i.test(v)}function Rc(v=(0,L.z$)()){return/blackberry/i.test(v)}function ol(v=(0,L.z$)()){return/webos/i.test(v)}function hs(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Os(v=(0,L.z$)()){return hs(v)||ln(v)||ol(v)||Rc(v)||/windows phone/i.test(v)||ti(v)}function dp(v,f=[]){let g;switch(v){case"Browser":g=Aa((0,L.z$)());break;case"Worker":g=`${Aa((0,L.z$)())}-${v}`;break;default:g=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${ae.SDK_VERSION}/${w}`}class Si{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new al(this),this.idTokenSubscription=new al(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=Wn(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var D,N;if(!w._deleted&&(w.persistenceManager=yield ao.create(w,f),!w._deleted)){if(null===(D=w._popupRedirectResolver)||void 0===D?void 0:D._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(q){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var w;let D=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const N=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,q=null==D?void 0:D._redirectEventId,le=yield g.tryRedirectSignIn(f);(!N||N===q)&&(null==le?void 0:le.user)&&(D=le.user)}return D?D._redirectEventId?(Me(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===D._redirectEventId?g.directlySetCurrentUser(D):g.reloadAndSetCurrentUserOrClear(D)):g.reloadAndSetCurrentUserOrClear(D):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(D){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){try{yield Tr(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const w=f?(0,L.m9)(f):null;return w&&Me(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){if(!g._deleted)return f&&Me(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,m.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(Wn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,m.Z)(function*(){const D=yield w.getOrInitRedirectPersistenceManager(g);return null===f?D.removeCurrentUser():D.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&Wn(f)||g._popupRedirectResolver;Me(w,g,"argument-error"),g.redirectPersistenceManager=yield ao.create(g,[Wn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var w,D;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(D=g.redirectUser)||void 0===D?void 0:D._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,D){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(q,this,"internal-error"),q.then(()=>N(this.currentUser)),"function"==typeof g?f.addObserver(g,w,D):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=dp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const D=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return D&&(w["X-Firebase-Client"]=D),w})()}}function mn(v){return(0,L.m9)(v)}class al{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fu(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function Ai(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class xa{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ur("not implemented")}_getIdTokenResponse(f){return ur("not implemented")}_linkToIdToken(f,g){return ur("not implemented")}_getReauthenticationResolver(f){return ur("not implemented")}}function oh(v,f){return ah.apply(this,arguments)}function ah(){return(ah=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:resetPassword",Et(v,f))})).apply(this,arguments)}function hp(v,f){return pu.apply(this,arguments)}function pu(){return(pu=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ra(v,f){return uh.apply(this,arguments)}function uh(){return(uh=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",Et(v,f))})).apply(this,arguments)}function Mc(){return(Mc=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signInWithPassword",Et(v,f))})).apply(this,arguments)}function Pc(v,f){return lh.apply(this,arguments)}function lh(){return(lh=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:sendOobCode",Et(v,f))})).apply(this,arguments)}function n_(v,f){return fp.apply(this,arguments)}function fp(){return(fp=(0,m.Z)(function*(v,f){return Pc(v,f)})).apply(this,arguments)}function ch(v,f){return dh.apply(this,arguments)}function dh(){return(dh=(0,m.Z)(function*(v,f){return Pc(v,f)})).apply(this,arguments)}function Oc(v,f){return ll.apply(this,arguments)}function ll(){return(ll=(0,m.Z)(function*(v,f){return Pc(v,f)})).apply(this,arguments)}function kc(v,f){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,m.Z)(function*(v,f){return Pc(v,f)})).apply(this,arguments)}function gu(){return(gu=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,f))})).apply(this,arguments)}function Lc(){return(Lc=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signInWithEmailLink",Et(v,f))})).apply(this,arguments)}class zo extends xa{constructor(f,g,w,D=null){super("password",w),this._email=f,this._password=g,this._tenantId=D}static _fromEmailAndPassword(f,g){return new zo(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new zo(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function(v,f){return Mc.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(v,f){return gu.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:vn(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return hp(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(v,f){return Lc.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:vn(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ps(v,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signInWithIdp",Et(v,f))})).apply(this,arguments)}class Zi extends xa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Zi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):vn("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D}=g,N=J(g,["providerId","signInMethod"]);if(!w||!D)return null;const q=new Zi(w,D);return q.idToken=N.idToken||void 0,q.accessToken=N.accessToken||void 0,q.secret=N.secret,q.nonce=N.nonce,q.pendingToken=N.pendingToken||null,q}_getIdTokenResponse(f){return ps(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,ps(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ps(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,L.xO)(g)}return f}}function Vc(v,f){return cl.apply(this,arguments)}function cl(){return(cl=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:sendVerificationCode",Et(v,f))})).apply(this,arguments)}function fh(){return(fh=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,f))})).apply(this,arguments)}function mu(){return(mu=(0,m.Z)(function*(v,f){const g=yield Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,f));if(g.temporaryProof)throw _t(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const ph={USER_NOT_FOUND:"user-not-found"};function Fs(){return(Fs=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signInWithPhoneNumber",Et(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ph)})).apply(this,arguments)}class gs extends xa{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new gs({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new gs({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function(v,f){return fh.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function(v,f){return mu.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(v,f){return Fs.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:D}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:D}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:N}=f;return w||g||D||N?new gs({verificationId:g,verificationCode:w,phoneNumber:D,temporaryProof:N}):null}}class co{constructor(f){var g,w,D,N,q,le;const Ve=(0,L.zd)((0,L.pd)(f)),Re=null!==(g=Ve.apiKey)&&void 0!==g?g:null,Je=null!==(w=Ve.oobCode)&&void 0!==w?w:null,nt=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(D=Ve.mode)&&void 0!==D?D:null);Me(Re&&Je&&nt,"argument-error"),this.apiKey=Re,this.operation=nt,this.code=Je,this.continueUrl=null!==(N=Ve.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(q=Ve.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(le=Ve.tenantId)&&void 0!==le?le:null}static parseLink(f){const g=function(v){const f=(0,L.zd)((0,L.pd)(v)).link,g=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||f||v}(f);try{return new co(g)}catch(w){return null}}}let _u=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,w){return zo._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const D=co.parseLink(w);return Me(D,"argument-error"),zo._fromEmailAndCode(g,D.code,D.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class an{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ho extends an{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class fo extends ho{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Me("providerId"in g&&"signInMethod"in g,"argument-error"),Zi._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Me(f.idToken||f.accessToken,"argument-error"),Zi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return fo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return fo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:D,pendingToken:N,nonce:q,providerId:le}=f;if(!w&&!D&&!g&&!N||!le)return null;try{return new fo(le)._credential({idToken:g,accessToken:w,nonce:q,pendingToken:N})}catch(Ve){return null}}}let yu=(()=>{class v extends ho{constructor(){super("facebook.com")}static credential(g){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),fn=(()=>{class v extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:D}=g;if(!w&&!D)return null;try{return v.credential(w,D)}catch(N){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),hl=(()=>{class v extends ho{constructor(){super("github.com")}static credential(g){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Yi extends xa{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return ps(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,ps(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,ps(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:D,pendingToken:N}=g;return w&&D&&N&&w===D?new Yi(w,N):null}static _create(f,g){return new Yi(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Eu extends an{constructor(f){Me(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Eu.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Eu.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Yi.fromJSON(f);return Me(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Yi._create(w,g)}catch(D){return null}}}let wu=(()=>{class v extends ho{constructor(){super("twitter.com")}static credential(g,w){return Zi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:D}=g;if(!w||!D)return null;try{return v.credential(w,D)}catch(N){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Zo(v,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signUp",Et(v,f))})).apply(this,arguments)}class Gr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,D=!1){return(0,m.Z)(function*(){const N=yield Ti._fromIdTokenResponse(f,w,D),q=bu(w);return new Gr({user:N,providerId:q,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const D=bu(w);return new Gr({user:f,providerId:D,_tokenResponse:w,operationType:g})})()}}function bu(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Bc(){return(Bc=(0,m.Z)(function*(v){var f;const g=mn(v);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Gr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Zo(g,{returnSecureToken:!0}),D=yield Gr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class Na extends L.ZR{constructor(f,g,w,D){var N;super(g.code,g.message),this.operationType=w,this.user=D,Object.setPrototypeOf(this,Na.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,D){return new Na(f,g,w,D)}}function jc(v,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Na._fromErrorAndOperation(v,N,f,w):N})}function fl(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Cu(){return(Cu=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v);yield $t(!0,g,f);const{providerUserInfo:w}=yield z(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),D=fl(w||[]);return g.providerData=g.providerData.filter(N=>D.has(N.providerId)),D.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function po(v,f){return De.apply(this,arguments)}function De(){return(De=(0,m.Z)(function*(v,f,g=!1){const w=yield dt(v,f._linkToIdToken(v.auth,yield v.getIdToken()),g);return Gr._forOperation(v,"link",w)})).apply(this,arguments)}function $t(v,f,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,m.Z)(function*(v,f,g){yield Tr(f);const D=!1===v?"provider-already-linked":"no-such-provider";Me(fl(f.providerData).has(g)===v,f.auth,D)})).apply(this,arguments)}function xn(v,f){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,m.Z)(function*(v,f,g=!1){const{auth:w}=v,D="reauthenticate";try{const N=yield dt(v,jc(w,D,f,v),g);Me(N.idToken,w,"internal-error");const q=Vn(N.idToken);Me(q,w,"internal-error");const{sub:le}=q;return Me(v.uid===le,w,"user-mismatch"),Gr._forOperation(v,D,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&vn(w,"user-mismatch"),N}})).apply(this,arguments)}function go(v,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,m.Z)(function*(v,f,g=!1){const w="signIn",D=yield jc(v,w,f),N=yield Gr._fromIdTokenResponse(v,w,D);return g||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Qo(v,f){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(v,f){return go(mn(v),f)})).apply(this,arguments)}function mh(v,f){return $c.apply(this,arguments)}function $c(){return($c=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v);return yield $t(!1,g,f.providerId),po(g,f)})).apply(this,arguments)}function Jo(v,f){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,m.Z)(function*(v,f){return xn((0,L.m9)(v),f)})).apply(this,arguments)}function lr(v,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(v,f){return Dt(v,"POST","/v1/accounts:signInWithCustomToken",Et(v,f))})).apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(v,f){const g=mn(v),w=yield lr(g,{token:f,returnSecureToken:!0}),D=yield Gr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(D.user),D})).apply(this,arguments)}class ri{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?pl._fromServerResponse(f,g):vn(f,"internal-error")}}class pl extends ri{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new pl(g)}}function ka(v,f,g){var w;Me((null===(w=g.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),Me(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Me(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Me(g.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Hc(){return(Hc=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D={requestType:"PASSWORD_RESET",email:f};g&&ka(w,D,g),yield ch(w,D)})).apply(this,arguments)}function Tu(){return(Tu=(0,m.Z)(function*(v,f,g){yield oh((0,L.m9)(v),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(v,f){yield Ra((0,L.m9)(v),{oobCode:f})})).apply(this,arguments)}function ml(v,f){return Du.apply(this,arguments)}function Du(){return(Du=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v),w=yield oh(g,{oobCode:f}),D=w.requestType;switch(Me(D,g,"internal-error"),D){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(w.mfaInfo,g,"internal-error");default:Me(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=ri._fromServerResponse(mn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:D}})).apply(this,arguments)}function yl(){return(yl=(0,m.Z)(function*(v,f){const{data:g}=yield ml((0,L.m9)(v),f);return g.email})).apply(this,arguments)}function Su(){return(Su=(0,m.Z)(function*(v,f,g){const w=mn(v),D=yield Zo(w,{returnSecureToken:!0,email:f,password:g}),N=yield Gr._fromIdTokenResponse(w,"signIn",D);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function xu(){return(xu=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D={requestType:"EMAIL_SIGNIN",email:f};Me(g.handleCodeInApp,w,"argument-error"),g&&ka(w,D,g),yield Oc(w,D)})).apply(this,arguments)}function mo(){return(mo=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D=_u.credentialWithLink(f,g||Cr());return Me(D._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Qo(w,D)})).apply(this,arguments)}function Pn(v,f){return yp.apply(this,arguments)}function yp(){return(yp=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:createAuthUri",Et(v,f))})).apply(this,arguments)}function Fa(){return(Fa=(0,m.Z)(function*(v,f){const w={identifier:f,continueUri:Ir()?Cr():"http://localhost"},{signinMethods:D}=yield Pn((0,L.m9)(v),w);return D||[]})).apply(this,arguments)}function Wc(){return(Wc=(0,m.Z)(function*(v,f){const g=(0,L.m9)(v),D={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&ka(g.auth,D,f);const{email:N}=yield n_(g.auth,D);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function La(){return(La=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};g&&ka(w.auth,N,g);const{email:q}=yield kc(w.auth,N);q!==v.email&&(yield v.reload())})).apply(this,arguments)}function Xo(v,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,m.Z)(function*(v,f){return on(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function El(){return(El=(0,m.Z)(function*(v,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,L.m9)(v),N={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield dt(w,Xo(w.auth,N));w.displayName=q.displayName||null,w.photoURL=q.photoUrl||null;const le=w.providerData.find(({providerId:Ve})=>"password"===Ve);le&&(le.displayName=w.displayName,le.photoURL=w.photoURL),yield w._updateTokensIfNecessary(q)})).apply(this,arguments)}function ea(v,f,g){return yh.apply(this,arguments)}function yh(){return(yh=(0,m.Z)(function*(v,f,g){const{auth:w}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(N.email=f),g&&(N.password=g);const q=yield dt(v,hp(w,N));yield v._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ms{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class wl extends ms{constructor(f,g,w,D){super(f,g,w),this.username=D}}class wp extends ms{constructor(f,g){super(f,"facebook.com",g)}}class r_ extends wl{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Ri extends ms{constructor(f,g){super(f,"google.com",g)}}class iE extends wl{constructor(f,g,w){super(f,"twitter.com",g,w)}}function Kc(v){const{user:f,_tokenResponse:g}=v;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(v){var f,g;if(!v)return null;const{providerId:w}=v,D=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const q=null===(g=null===(f=Vn(v.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new ms(N,"anonymous"!==q&&"custom"!==q?q:null)}if(!w)return null;switch(w){case"facebook.com":return new wp(N,D);case"github.com":return new r_(N,D);case"google.com":return new Ri(N,D);case"twitter.com":return new iE(N,D,v.screenName||null);case"custom":case"anonymous":return new ms(N,null);default:return new ms(N,w,D)}}(g)}class ys{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ys("enroll",f)}static _fromMfaPendingCredential(f){return new ys("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ys._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ys._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ua{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=mn(f),D=g.customData._serverResponse,N=(D.mfaInfo||[]).map(le=>ri._fromServerResponse(w,le));Me(D.mfaPendingCredential,w,"internal-error");const q=ys._fromMfaPendingCredential(D.mfaPendingCredential);return new Ua(q,N,function(){var le=(0,m.Z)(function*(Ve){const Re=yield Ve._process(w,q);delete D.mfaInfo,delete D.mfaPendingCredential;const Je=Object.assign(Object.assign({},D),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(g.operationType){case"signIn":const nt=yield Gr._fromIdTokenResponse(w,g.operationType,Je);return yield w._updateCurrentUser(nt.user),nt;case"reauthenticate":return Me(g.user,w,"internal-error"),Gr._forOperation(g.user,g.operationType,Je);default:vn(w,"internal-error")}});return function(Ve){return le.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function vh(v,f){return on(v,"POST","/v2/accounts/mfaEnrollment:start",Et(v,f))}class wh{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>ri._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new wh(f)}getSession(){var f=this;return(0,m.Z)(function*(){return ys._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,m.Z)(function*(){const D=f,N=yield w.getSession(),q=yield dt(w.user,D._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(q),w.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){const w="string"==typeof f?f:f.uid,D=yield g.user.getIdToken(),N=yield dt(g.user,function(v,f){return on(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(v,f))}(g.user.auth,{idToken:D,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==w),yield g.user._updateTokensIfNecessary(N);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Vs=new WeakMap,Ht="__sak";class ut{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ht,"1"),this.storage.removeItem(Ht),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ji=(()=>{class v extends ut{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,L.z$)();return Ps(v)||hs(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Os(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const D=this.storage.getItem(w),N=this.localCache[w];D!==N&&g(w,N,D)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((le,Ve,Re)=>{this.notifyListeners(le,Re)});const D=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(D);if(g.newValue!==le)null!==g.newValue?this.storage.setItem(D,g.newValue):this.storage.removeItem(D);else if(this.localCache[D]===g.newValue&&!w)return}const N=()=>{const le=this.storage.getItem(D);!w&&this.localCache[D]===le||this.notifyListeners(D,le)},q=this.storage.getItem(D);(0,L.w1)()&&10===document.documentMode&&q!==g.newValue&&g.newValue!==g.oldValue?setTimeout(N,10):N()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const N of Array.from(D))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,D)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:D}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var D=()=>super._set,N=this;return(0,m.Z)(function*(){yield D().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,D=this;return(0,m.Z)(function*(){const N=yield w().call(D,g);return D.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,D=this;return(0,m.Z)(function*(){yield w().call(D,g),delete D.localCache[g]})()}}return v.type="LOCAL",v})(),vo=(()=>{class v extends ut{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return v.type="SESSION",v})();let bl=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const D=new v(g);return this.receivers.push(D),D}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,m.Z)(function*(){const D=g,{eventId:N,eventType:q,data:le}=D.data,Ve=w.handlersMap[q];if(!(null==Ve?void 0:Ve.size))return;D.ports[0].postMessage({status:"ack",eventId:N,eventType:q});const Re=Array.from(Ve).map(function(){var nt=(0,m.Z)(function*(en){return en(D.origin,le)});return function(en){return nt.apply(this,arguments)}}()),Je=yield function(v){return Promise.all(v.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Re);D.ports[0].postMessage({status:"done",eventId:N,eventType:q,response:Je})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Bn(v="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return v+g}class Cl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var D=this;return(0,m.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let q,le;return new Promise((Ve,Re)=>{const Je=Bn("",20);N.port1.start();const nt=setTimeout(()=>{Re(new Error("unsupported_event"))},w);le={messageChannel:N,onMessage(en){const yr=en;if(yr.data.eventId===Je)switch(yr.data.status){case"ack":clearTimeout(nt),q=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ve(yr.data.response);break;default:clearTimeout(nt),clearTimeout(q),Re(new Error("invalid_response"))}}},D.handlers.add(le),N.port1.addEventListener("message",le.onMessage),D.target.postMessage({eventType:f,eventId:Je,data:g},[N.port2])}).finally(()=>{le&&D.removeMessageHandler(le)})})()}}function tr(){return window}function Eo(){return void 0!==tr().WorkerGlobalScope&&"function"==typeof tr().importScripts}function Pu(){return(Pu=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Mi="firebaseLocalStorageDb",vs="firebaseLocalStorage",Xi="fbase_key";class ii{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ch(v,f){return v.transaction([vs],f?"readwrite":"readonly").objectStore(vs)}function ta(){const v=indexedDB.open(Mi,1);return new Promise((f,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(vs,{keyPath:Xi})}catch(D){g(D)}}),v.addEventListener("success",(0,m.Z)(function*(){const w=v.result;w.objectStoreNames.contains(vs)?f(w):(w.close(),yield function(){const v=indexedDB.deleteDatabase(Mi);return new ii(v).toPromise()}(),f(yield ta()))}))})}function mr(v,f,g){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,m.Z)(function*(v,f,g){const w=Ch(v,!0).put({[Xi]:f,value:g});return new ii(w).toPromise()})).apply(this,arguments)}function Jc(){return(Jc=(0,m.Z)(function*(v,f){const g=Ch(v,!1).get(f),w=yield new ii(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Dl(v,f){const g=Ch(v,!0).delete(f);return new ii(g).toPromise()}const Bs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield ta()),g.db})()}_withRetries(g){var w=this;return(0,m.Z)(function*(){let D=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(D++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return Eo()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=bl._getInstance(Eo()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(D,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(D,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(D,N){return["keyChanged"]});return function(D,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var w,D;if(g.activeServiceWorker=yield function(){return Pu.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Cl(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(D=N[0])||void 0===D?void 0:D.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(D){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ta();return yield mr(g,Ht,"1"),yield Dl(g,Ht),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var D=this;return(0,m.Z)(function*(){return D._withPendingWrite((0,m.Z)(function*(){return yield D._withRetries(N=>mr(N,g,w)),D.localCache[g]=w,D.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,m.Z)(function*(){const D=yield w._withRetries(N=>function(v,f){return Jc.apply(this,arguments)}(N,g));return w.localCache[g]=D,D})()}_remove(g){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(D=>Dl(D,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const w=yield g._withRetries(q=>{const le=Ch(q,!1).getAll();return new ii(le).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const D=[],N=new Set;for(const{fbase_key:q,value:le}of w)N.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(le)&&(g.notifyListeners(q,le),D.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!N.has(q)&&(g.notifyListeners(q,null),D.push(q));return D})()}notifyListeners(g,w){this.localCache[g]=w;const D=this.listeners[g];if(D)for(const N of Array.from(D))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ba(v,f){return on(v,"POST","/v2/accounts/mfaSignIn:start",Et(v,f))}function Pi(){return(Pi=(0,m.Z)(function*(v){return(yield on(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wo(v){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=D=>{const N=In("internal-error");N.customData=D,g(N)},w.type="text/javascript",w.charset="UTF-8",function(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function js(v){return`__${v}${Math.floor(1e6*Math.random())}`}const nr=1e12;class Xc{constructor(f){this.auth=f,this.counter=nr,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new Sh(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||nr;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||nr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var w;return null===(w=g._widgets.get(f||nr))||void 0===w||w.execute(),""})()}}class Sh{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const D="string"==typeof f?document.getElementById(f):f;Me(D,"argument-error",{appName:g}),this.container=D,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}();const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ki=js("rcb"),Es=new He(3e4,6e4);class Co{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!tr().grecaptcha}load(f,g=""){return Me((v=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(tr().grecaptcha):new Promise((w,D)=>{const N=tr().setTimeout(()=>{D(In(f,"network-request-failed"))},Es.get());tr()[ki]=()=>{tr().clearTimeout(N),delete tr()[ki];const le=tr().grecaptcha;if(!le)return void D(In(f,"internal-error"));const Ve=le.render;le.render=(Re,Je)=>{const nt=Ve(Re,Je);return this.counter++,nt},this.hostLanguage=g,w(le)},wo(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:ki,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),D(In(f,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!tr().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Io{load(f){return(0,m.Z)(function*(){return new Xc(f)})()}clearedOneInstance(){}}const xh="recaptcha",$a={theme:"light",type:"image"};class Sp{constructor(f,g=Object.assign({},$a),w){this.parameters=g,this.type=xh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(w),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const D="string"==typeof f?document.getElementById(f):f;Me(D,this.auth,"argument-error"),this.container=D,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Io:new Co,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const q=le=>{!le||(f.tokenChangeListeners.delete(q),N(le))};f.tokenChangeListeners.add(q),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=tr()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){Me(Ir()&&!Eo(),f.auth,"internal-error"),yield function(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function(v){return Pi.apply(this,arguments)}(f.auth);Me(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class jn{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=gs._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function To(){return(To=(0,m.Z)(function*(v,f,g){const w=mn(v),D=yield j(w,f,(0,L.m9)(g));return new jn(D,N=>Qo(w,N))})).apply(this,arguments)}function I(){return(I=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);yield $t(!1,w,"phone");const D=yield j(w.auth,f,(0,L.m9)(g));return new jn(D,N=>mh(w,N))})).apply(this,arguments)}function M(){return(M=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v),D=yield j(w.auth,f,(0,L.m9)(g));return new jn(D,N=>Jo(w,N))})).apply(this,arguments)}function j(v,f,g){return ee.apply(this,arguments)}function ee(){return(ee=(0,m.Z)(function*(v,f,g){var w;const D=yield g.verify();try{let N;if(Me("string"==typeof D,v,"argument-error"),Me(g.type===xh,v,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const q=N.session;if("phoneNumber"in N)return Me("enroll"===q.type,v,"internal-error"),(yield vh(v,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:D}})).phoneSessionInfo.sessionInfo;{Me("signin"===q.type,v,"internal-error");const le=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return Me(le,v,"missing-multi-factor-info"),(yield Ba(v,{mfaPendingCredential:q.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:D}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Vc(v,{phoneNumber:N.phoneNumber,recaptchaToken:D});return q}}finally{g._reset()}})).apply(this,arguments)}function Ne(){return(Ne=(0,m.Z)(function*(v,f){yield po((0,L.m9)(v),f)})).apply(this,arguments)}let Ke=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=mn(g)}verifyPhoneNumber(g,w){return j(this.auth,g,(0,L.m9)(w))}static credential(g,w){return gs._fromVerification(g,w)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:D}=g;return w&&D?gs._fromTokenResponse(w,D):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function pt(v,f){return f?Wn(f):(Me(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ct extends xa{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ps(f,this._buildIdpRequest())}_linkToIdToken(f,g){return ps(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return ps(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function zt(v){return go(v.auth,new Ct(v),v.bypassAuthState)}function At(v){const{auth:f,user:g}=v;return Me(g,f,"internal-error"),xn(g,new Ct(v),v.bypassAuthState)}function Dr(v){return rr.apply(this,arguments)}function rr(){return(rr=(0,m.Z)(function*(v){const{auth:f,user:g}=v;return Me(g,f,"internal-error"),po(g,new Ct(v),v.bypassAuthState)})).apply(this,arguments)}class Ha{constructor(f,g,w,D,N=!1){this.auth=f,this.resolver=w,this.user=D,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(w,D){f.pendingPromise={resolve:w,reject:D};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(w,D){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:D,postBody:N,tenantId:q,error:le,type:Ve}=f;if(le)return void g.reject(le);const Re={auth:g.auth,requestUri:w,sessionId:D,tenantId:q||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Re))}catch(Je){g.reject(Je)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return zt;case"linkViaPopup":case"linkViaRedirect":return Dr;case"reauthViaPopup":case"reauthViaRedirect":return At;default:vn(this.auth,"internal-error")}}resolve(f){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Ze(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ed=new He(2e3,1e4);function Do(){return(Do=(0,m.Z)(function*(v,f,g){const w=mn(v);ar(v,f,an);const D=pt(w,g);return new Tn(w,"signInViaPopup",f,D).executeNotNull()})).apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=pt(w.auth,g);return new Tn(w.auth,"reauthViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}function xp(){return(xp=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=pt(w.auth,g);return new Tn(w.auth,"linkViaPopup",f,D,w).executeNotNull()})).apply(this,arguments)}let Tn=(()=>{class v extends Ha{constructor(g,w,D,N,q){super(g,w,N,q),this.provider=D,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const w=yield g.execute();return Me(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,m.Z)(function*(){Ze(1===g.filter.length,"Popup operations only handle one event");const w=Bn();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(D=>{g.reject(D)}),g.resolver._isIframeWebStorageSupported(g.auth,D=>{D||g.reject(In(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(In(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,D;this.pollId=(null===(D=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===D?void 0:D.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(In(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,ed.get())};g()}}return v.currentPopupAction=null,v})();const td=new Map;class ku extends Ha{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let w=td.get(g.auth._key());if(!w){try{const N=(yield function(v,f){return Np.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(N)}catch(D){w=()=>Promise.reject(D)}td.set(g.auth._key(),w)}return g.bypassAuthState||td.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const D=yield w.auth._redirectUserForId(f.eventId);if(D)return w.user=D,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Np(){return(Np=(0,m.Z)(function*(v,f){const g=ra(f),w=Ga(v);if(!(yield w._isAvailable()))return!1;const D="true"===(yield w._get(g));return yield w._remove(g),D})).apply(this,arguments)}function es(v,f){return rd.apply(this,arguments)}function rd(){return(rd=(0,m.Z)(function*(v,f){return Ga(v)._set(ra(f),"true")})).apply(this,arguments)}function Ga(v){return Wn(v._redirectPersistence)}function ra(v){return Cn("pendingRedirect",v.config.apiKey,v.name)}function Mp(){return(Mp=(0,m.Z)(function*(v,f,g){const w=mn(v);ar(v,f,an);const D=pt(w,g);return yield es(D,w),D._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function Fu(){return(Fu=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=pt(w.auth,g);yield es(D,w.auth);const N=yield Kt(w);return D._openRedirect(w.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function Pp(){return(Pp=(0,m.Z)(function*(v,f,g){const w=(0,L.m9)(v);ar(w.auth,f,an);const D=pt(w.auth,g);yield $t(!1,w,f.providerId),yield es(D,w.auth);const N=yield Kt(w);return D._openRedirect(w.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(v,f){return yield mn(v)._initializationPromise,Vu(v,f,!1)})).apply(this,arguments)}function Vu(v,f){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.Z)(function*(v,f,g=!1){const w=mn(v),D=pt(w,f),q=yield new ku(w,D,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield w._persistUserIfCurrent(q.user),yield w._setRedirectUser(null,f)),q})).apply(this,arguments)}function Kt(v){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,m.Z)(function*(v){const f=Bn(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class za{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Nh(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!Nh(f)){const D=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(In(this.auth,D))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(c_(f))}saveEventToCache(f){this.cachedEventUids.add(c_(f)),this.lastProcessedEventTime=Date.now()}}function c_(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Nh({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Mh(v){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,m.Z)(function*(v,f={}){return on(v,"GET","/v1/projects",f)})).apply(this,arguments)}const sd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d_=/^https?/;function Sl(){return(Sl=(0,m.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield Mh(v);for(const g of f)try{if(od(g))return}catch(w){}vn(v,"unauthorized-domain")})).apply(this,arguments)}function od(v){const f=Cr(),{protocol:g,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const q=new URL(v);return""===q.hostname&&""===w?"chrome-extension:"===g&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===w}if(!d_.test(g))return!1;if(sd.test(v))return w===v;const D=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(w)}const ad=new He(3e4,6e4);function Ph(){const v=tr().___jsl;if(null==v?void 0:v.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Ao=null;function uE(v){return Ao=Ao||function(v){return new Promise((f,g)=>{var w,D,N;function q(){Ph(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ph(),g(In(v,"network-request-failed"))},timeout:ad.get()})}if(null===(D=null===(w=tr().gapi)||void 0===w?void 0:w.iframes)||void 0===D?void 0:D.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=tr().gapi)||void 0===N?void 0:N.load)){const le=js("iframefcb");return tr()[le]=()=>{gapi.load?q():g(In(v,"network-request-failed"))},wo(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ve=>g(Ve))}q()}}).catch(f=>{throw Ao=null,f})}(v),Ao}const lE=new He(5e3,15e3),dE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ia=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Al(v){const f=v.config;Me(f.authDomain,v,"auth-domain-config-required");const g=f.emulator?mt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:ae.SDK_VERSION},D=ia.get(v.config.apiHost);D&&(w.eid=D);const N=v._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function kh(){return(kh=(0,m.Z)(function*(v){const f=yield uE(v),g=tr().gapi;return Me(g,v,"internal-error"),f.open({where:document.body,url:Al(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dE,dontclear:!0},w=>new Promise(function(){var D=(0,m.Z)(function*(N,q){yield w.restyle({setHideOnLeave:!1});const le=In(v,"network-request-failed"),Ve=tr().setTimeout(()=>{q(le)},lE.get());function Re(){tr().clearTimeout(Ve),N(w)}w.ping(Re).then(Re,()=>{q(le)})});return function(N,q){return D.apply(this,arguments)}}()))})).apply(this,arguments)}const Fp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Up{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Rl(v,f,g,w,D,N){Me(v.config.authDomain,v,"auth-domain-config-required"),Me(v.config.apiKey,v,"invalid-api-key");const q={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:w,v:ae.SDK_VERSION,eventId:D};if(f instanceof an){f.setDefaultLanguage(v.languageCode),q.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ve,Re]of Object.entries(N||{}))q[Ve]=Re}if(f instanceof ho){const Ve=f.getScopes().filter(Re=>""!==Re);Ve.length>0&&(q.scopes=Ve.join(","))}v.tenantId&&(q.tid=v.tenantId);const le=q;for(const Ve of Object.keys(le))void 0===le[Ve]&&delete le[Ve];return`${function({config:v}){return v.emulator?mt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(le).slice(1)}`}const Ml="webStorageSupport";class Lh extends class{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return ur("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Lh(f)}_finalizeEnroll(f,g,w){return function(v,f){return on(v,"POST","/v2/accounts/mfaEnrollment:finalize",Et(v,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function(v,f){return on(v,"POST","/v2/accounts/mfaSignIn:finalize",Et(v,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ld=(()=>{class v{constructor(){}static assertion(g){return Lh._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var v,p_="@firebase/auth",fE="0.19.12";class aI{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var D;f((null===(D=w)||void 0===D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Za(){return window}function $p(){return($p=(0,m.Z)(function*(v,f,g){var w;const{BuildInfo:D}=Za();Ze(f.sessionId,"AuthEvent did not contain a session ID");const N=yield Wp(f.sessionId),q={};return hs()?q.ibi=D.packageName:ln()?q.apn=D.packageName:vn(v,"operation-not-supported-in-this-environment"),D.displayName&&(q.appDisplayName=D.displayName),q.sessionId=N,Rl(v,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,q)})).apply(this,arguments)}function Gp(){return(Gp=(0,m.Z)(function*(v){const{BuildInfo:f}=Za(),g={};hs()?g.iosBundleId=f.packageName:ln()?g.androidPackageName=f.packageName:vn(v,"operation-not-supported-in-this-environment"),yield Mh(v,g)})).apply(this,arguments)}function Bu(){return(Bu=(0,m.Z)(function*(v,f,g){const{cordova:w}=Za();let D=()=>{};try{yield new Promise((N,q)=>{let le=null;function Ve(){var nt;N();const en=null===(nt=w.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof en&&en(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Re(){le||(le=window.setTimeout(()=>{q(In(v,"redirect-cancelled-by-user"))},2e3))}function Je(){"visible"===(null==document?void 0:document.visibilityState)&&Re()}f.addPassiveListener(Ve),document.addEventListener("resume",Re,!1),ln()&&document.addEventListener("visibilitychange",Je,!1),D=()=>{f.removePassiveListener(Ve),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",Je,!1),le&&window.clearTimeout(le)}})}finally{D()}})).apply(this,arguments)}function Wp(v){return dd.apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(v){const f=ir(v),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(D=>D.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ir(v){if(Ze(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const f=new ArrayBuffer(v.length),g=new Uint8Array(f);for(let w=0;w<v.length;w++)g[w]=v.charCodeAt(w);return g}v="Browser",(0,ae._registerComponent)(new Rt.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),{apiKey:N,authDomain:q}=w.options;return((le,Ve)=>{Me(N&&!N.includes(":"),"invalid-api-key",{appName:le.name}),Me(!(null==q?void 0:q.includes(":")),"argument-error",{appName:le.name});const Re={apiKey:N,authDomain:q,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dp(v)},Je=new Si(le,Ve,Re);return function(v,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Wn);(null==f?void 0:f.errorMap)&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(Je,g),Je})(w,D)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new Rt.wA("auth-internal",f=>{const g=mn(f.getProvider("auth").getImmediate());return new aI(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(p_,fE,void 0),(0,ae.registerVersion)(p_,fE,"esm2017");class __ extends za{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function zp(v){return Kp.apply(this,arguments)}function Kp(){return(Kp=(0,m.Z)(function*(v){const f=yield Yp()._get(Qa(v));return f&&(yield Yp()._remove(Qa(v))),f})).apply(this,arguments)}function Ya(){const v=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);v.push(f.charAt(w))}return v.join("")}function Yp(){return Wn(Ji)}function Qa(v){return Cn("authEvent",v.config.apiKey,v.name)}function Or(v){if(!(null==v?void 0:v.includes("?")))return{};const[f,...g]=v.split("?");return(0,L.zd)(g.join("?"))}function kr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:In("no-auth-event")}}function si(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function Vh(v=(0,L.z$)()){return!("file:"!==si()&&"ionic:"!==si()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function E_(){try{const v=self.localStorage,f=Bn();if(v)return v.setItem(f,"1"),v.removeItem(f),!function(v=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,L.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,L.hl)()}catch(v){return Bh()&&(0,L.hl)()}return!1}function Bh(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ja(){return("http:"===si()||"https:"===si()||(0,L.ru)()||Vh())&&!((0,L.b$)()||(0,L.UG)())&&E_()&&!Bh()}function jh(){return Vh()&&"undefined"!=typeof document}function Vl(){return(Vl=(0,m.Z)(function*(){return!!jh()&&new Promise(v=>{const f=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),v(!0)})})})).apply(this,arguments)}const Sr={LOCAL:"local",NONE:"none",SESSION:"session"},Ul=Me,b_="persistence";function tg(v){return ng.apply(this,arguments)}function ng(){return(ng=(0,m.Z)(function*(v){yield v._initializationPromise;const f=$h(),g=Cn(b_,v.config.apiKey,v.name);f&&f.setItem(g,v._getPersistence())})).apply(this,arguments)}function $h(){var v;try{return(null===(v="undefined"!=typeof window?window:null)||void 0===v?void 0:v.sessionStorage)||null}catch(f){return null}}const EE=Me;class ws{constructor(){this.browserResolver=Wn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vo,this._completeRedirectFn=Vu}_openPopup(f,g,w,D){var N=this;return(0,m.Z)(function*(){var q;Ze(null===(q=N.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const le=Rl(f,g,w,Cr(),D);return function(v,f,g,w=500,D=600){const N=Math.max((window.screen.availHeight-D)/2,0).toString(),q=Math.max((window.screen.availWidth-w)/2,0).toString();let le="";const Ve=Object.assign(Object.assign({},Fp),{width:w.toString(),height:D.toString(),top:N,left:q}),Re=(0,L.z$)().toLowerCase();g&&(le=Wo(Re)?"_blank":g),jr(Re)&&(f=f||"http://localhost",Ve.scrollbars="yes");const Je=Object.entries(Ve).reduce((en,[yr,Xa])=>`${en}${yr}=${Xa},`,"");if(function(v=(0,L.z$)()){var f;return hs(v)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Re)&&"_self"!==le)return function(v,f){const g=document.createElement("a");g.href=v,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",le),new Up(null);const nt=window.open(f||"",le,Je);Me(nt,v,"popup-blocked");try{nt.focus()}catch(en){}return new Up(nt)}(f,le,Bn())})()}_openRedirect(f,g,w,D){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(f),v=Rl(f,g,w,Cr(),D),tr().location.href=v,new Promise(()=>{});var v})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:D,promise:N}=this.eventManagers[g];return D?Promise.resolve(D):(Ze(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const w=yield function(v){return kh.apply(this,arguments)}(f),D=new za(f);return w.register("authEvent",N=>(Me(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:D.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:D},g.iframes[f._key()]=w,D})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ml,{type:Ml},D=>{var N;const q=null===(N=null==D?void 0:D[0])||void 0===N?void 0:N[Ml];void 0!==q&&g(!!q),vn(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return Sl.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Os()||Ps()||hs()}}),this.cordovaResolver=Wn(class{constructor(){this._redirectPersistence=vo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vu}_initialize(f){var g=this;return(0,m.Z)(function*(){const w=f._key();let D=g.eventManagers.get(w);return D||(D=new __(f),g.eventManagers.set(w,D),g.attachCallbackListeners(f,D)),D})()}_openPopup(f){vn(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,D){var N=this;return(0,m.Z)(function*(){!function(v){var f,g,w,D,N,q,le,Ve,Re,Je;const nt=Za();Me("function"==typeof(null===(f=null==nt?void 0:nt.universalLinks)||void 0===f?void 0:f.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Me(void 0!==(null===(g=null==nt?void 0:nt.BuildInfo)||void 0===g?void 0:g.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Me("function"==typeof(null===(N=null===(D=null===(w=null==nt?void 0:nt.cordova)||void 0===w?void 0:w.plugins)||void 0===D?void 0:D.browsertab)||void 0===N?void 0:N.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Ve=null===(le=null===(q=null==nt?void 0:nt.cordova)||void 0===q?void 0:q.plugins)||void 0===le?void 0:le.browsertab)||void 0===Ve?void 0:Ve.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Je=null===(Re=null==nt?void 0:nt.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===Je?void 0:Je.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield N._initialize(f);yield q.initialized(),q.resetRedirect(),td.clear(),yield N._originValidation(f);const le=function(v,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Ya(),postBody:null,tenantId:v.tenantId,error:In(v,"no-auth-event")}}(f,w,D);yield function(v,f){return Yp()._set(Qa(v),f)}(f,le);const Ve=yield function(v,f,g){return $p.apply(this,arguments)}(f,le,g),Re=yield function(v){const{cordova:f}=Za();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let D=null;w?f.plugins.browsertab.openUrl(v):D=f.InAppBrowser.open(v,function(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(D)})})}(Ve);return function(v,f,g){return Bu.apply(this,arguments)}(f,q,Re)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return Gp.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:D,BuildInfo:N}=Za(),q=setTimeout((0,m.Z)(function*(){yield zp(f),g.onEvent(kr())}),500),le=function(){var Je=(0,m.Z)(function*(nt){clearTimeout(q);const en=yield zp(f);let yr=null;en&&(null==nt?void 0:nt.url)&&(yr=function(v,f){var g,w;const D=function(v){const f=Or(v),g=f.link?decodeURIComponent(f.link):void 0,w=Or(g).link,D=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Or(D).link||D||w||g||v}(f);if(D.includes("/__/auth/callback")){const N=Or(D),q=N.firebaseError?function(v){try{return JSON.parse(v)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,le=null===(w=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ve=le?In(le):null;return Ve?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:D,postBody:null}}return null}(en,nt.url)),g.onEvent(yr||kr())});return function(en){return Je.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,le);const Ve=D,Re=`${N.packageName.toLowerCase()}://`;Za().handleOpenURL=function(){var Je=(0,m.Z)(function*(nt){if(nt.toLowerCase().startsWith(Re)&&le({url:nt}),"function"==typeof Ve)try{Ve(nt)}catch(en){console.error(en)}});return function(nt){return Je.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=vo,this._completeRedirectFn=Vu}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,D){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,g,w,D)})()}_openRedirect(f,g,w,D){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,g,w,D)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return jh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return EE(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function(){return Vl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function oi(v){return v.unwrap()}function wE(v){return rg(v)}function rg(v){const{_tokenResponse:f}=v instanceof L.ZR?v.customData:v;if(!f)return null;if(!(v instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ke.credentialFromResult(v);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=fn;break;case"facebook.com":w=yu;break;case"github.com":w=hl;break;case"twitter.com":w=wu;break;default:const{oauthIdToken:D,oauthAccessToken:N,oauthTokenSecret:q,pendingToken:le,nonce:Ve}=f;return N||q||D||le?le?g.startsWith("saml.")?Yi._create(g,le):Zi._fromParams({providerId:g,signInMethod:g,pendingToken:le,idToken:D,accessToken:N}):new fo(g).credential({idToken:D,accessToken:N,rawNonce:Ve}):null}return v instanceof L.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function Yr(v,f){return f.catch(g=>{throw g instanceof L.ZR&&function(v,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new pd(v,function(v,f){var g;const w=(0,L.m9)(v),D=f;return Me(f.customData.operationType,w,"argument-error"),Me(null===(g=D.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Ua._fromError(w,D)}(v,f));else if(w){const D=rg(f),N=f;D&&(N.credential=D,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(v,g),g}).then(g=>{const D=g.user;return{operationType:g.operationType,credential:wE(g),additionalUserInfo:Kc(g),user:oa.getOrCreate(D)}})}function Gh(v,f){return ig.apply(this,arguments)}function ig(){return(ig=(0,m.Z)(function*(v,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>Yr(v,g.confirm(w))}})).apply(this,arguments)}class pd{constructor(f,g){this.resolver=g,this.auth=function(v){return v.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Yr(oi(this.auth),this.resolver.resolveSignIn(f))}}class oa{constructor(f){this._delegate=f,this.multiFactor=function(v){const f=(0,L.m9)(v);return Vs.has(f)||Vs.set(f,wh._fromUser(f)),Vs.get(f)}(f)}static getOrCreate(f){return oa.USER_MAP.has(f)||oa.USER_MAP.set(f,new oa(f)),oa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return Yr(g.auth,mh(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,m.Z)(function*(){return Gh(w.auth,function(v,f,g){return I.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return Yr(g.auth,function(v,f,g){return xp.apply(this,arguments)}(g._delegate,f,ws))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield tg(mn(g.auth)),function(v,f,g){return function(v,f,g){return Pp.apply(this,arguments)}(v,f,g)}(g._delegate,f,ws)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return Yr(g.auth,Jo(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Gh(this.auth,function(v,f,g){return M.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Yr(this.auth,function(v,f,g){return $s.apply(this,arguments)}(this._delegate,f,ws))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield tg(mn(g.auth)),function(v,f,g){return function(v,f,g){return Fu.apply(this,arguments)}(v,f,g)}(g._delegate,f,ws)})()}sendEmailVerification(f){return function(v,f){return Wc.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function(v,f){return Cu.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function(v,f){return ea((0,L.m9)(v),f,null)}(this._delegate,f)}updatePassword(f){return function(v,f){return ea((0,L.m9)(v),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(v,f){return Ne.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(v,f){return El.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function(v,f,g){return La.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}oa.USER_MAP=new WeakMap;const xo=Me;let Ws=(()=>{class v{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:D}=g.options;xo(D,"invalid-api-key",{appName:g.name}),xo(D,"invalid-api-key",{appName:g.name});const N="undefined"!=typeof window?ws:void 0;this._delegate=w.initialize({options:{persistence:lI(D,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Gn),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(v,f,g){const w=mn(v);Me(w._canInitEmulator,w,"emulator-config-failed"),Me(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const D=!!(null==g?void 0:g.disableWarnings),N=fu(f),{host:q,port:le}=function(v){const f=fu(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(w);if(D){const N=D[1];return{host:N,port:Ai(w.substr(N.length+1))}}{const[N,q]=w.split(":");return{host:N,port:Ai(q)}}}(f);w.config.emulator={url:`${N}//${q}${null===le?"":`:${le}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:q,port:le,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:D})}),D||function(){function v(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,w)}applyActionCode(g){return function(v,f){return Ls.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return ml(this._delegate,g)}confirmPasswordReset(g,w){return function(v,f,g){return Tu.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var D=this;return(0,m.Z)(function*(){return Yr(D._delegate,function(v,f,g){return Su.apply(this,arguments)}(D._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(v,f){return Fa.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(v,f){const g=co.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){xo(Ja(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(v,f){return Wa.apply(this,arguments)}(g._delegate,ws);return w?Yr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(v,f){mn(v)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,D){const{next:N,error:q,complete:le}=bE(g,w,D);return this._delegate.onAuthStateChanged(N,q,le)}onIdTokenChanged(g,w,D){const{next:N,error:q,complete:le}=bE(g,w,D);return this._delegate.onIdTokenChanged(N,q,le)}sendSignInLinkToEmail(g,w){return function(v,f,g){return xu.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(v,f,g){return Hc.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,m.Z)(function*(){let D;switch(function(v,f){Ul(Object.values(Sr).includes(f),v,"invalid-persistence-type"),(0,L.b$)()?Ul(f!==Sr.SESSION,v,"unsupported-persistence-type"):(0,L.UG)()?Ul(f===Sr.NONE,v,"unsupported-persistence-type"):Bh()?Ul(f===Sr.NONE||f===Sr.LOCAL&&(0,L.hl)(),v,"unsupported-persistence-type"):Ul(f===Sr.NONE||E_(),v,"unsupported-persistence-type")}(w._delegate,g),g){case Sr.SESSION:D=vo;break;case Sr.LOCAL:D=(yield Wn(Bs)._isAvailable())?Bs:Ji;break;case Sr.NONE:D=Di;break;default:return vn("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(D)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Yr(this._delegate,function(v){return Bc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Yr(this._delegate,Qo(this._delegate,g))}signInWithCustomToken(g){return Yr(this._delegate,function(v,f){return xi.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Yr(this._delegate,function(v,f,g){return Qo((0,L.m9)(v),_u.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Yr(this._delegate,function(v,f,g){return mo.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Gh(this._delegate,function(v,f,g){return To.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,m.Z)(function*(){return xo(Ja(),w._delegate,"operation-not-supported-in-this-environment"),Yr(w._delegate,function(v,f,g){return Do.apply(this,arguments)}(w._delegate,g,ws))})()}signInWithRedirect(g){var w=this;return(0,m.Z)(function*(){return xo(Ja(),w._delegate,"operation-not-supported-in-this-environment"),yield tg(w._delegate),function(v,f,g){return function(v,f,g){return Mp.apply(this,arguments)}(v,f,g)}(w._delegate,g,ws)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(v,f){return yl.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Sr,v})();function bE(v,f,g){let w=v;"function"!=typeof v&&({next:w,error:f,complete:g}=v);const D=w;return{next:q=>D(q&&oa.getOrCreate(q)),error:f,complete:g}}function lI(v,f){const g=function(v,f){const g=$h();if(!g)return[];const w=Cn(b_,v,f);switch(g.getItem(w)){case Sr.NONE:return[Di];case Sr.LOCAL:return[Bs,vo];case Sr.SESSION:return[vo];default:return[]}}(v,f);if("undefined"!=typeof self&&!g.includes(Bs)&&g.push(Bs),"undefined"!=typeof window)for(const w of[Ji,vo])g.includes(w)||g.push(w);return g.includes(Di)||g.push(Di),g}class Wh{constructor(){this.providerId="phone",this._delegate=new Ke(oi(X.Z.auth()))}static credential(f,g){return Ke.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Wh.PHONE_SIGN_IN_METHOD=Ke.PHONE_SIGN_IN_METHOD,Wh.PROVIDER_ID=Ke.PROVIDER_ID;const cI=Me;class Ro{constructor(f,g,w=X.Z.app()){var D;cI(null===(D=w.options)||void 0===D?void 0:D.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Sp(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new Rt.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new Ws(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:_u,FacebookAuthProvider:yu,GithubAuthProvider:hl,GoogleAuthProvider:fn,OAuthProvider:fo,SAMLAuthProvider:Eu,PhoneAuthProvider:Wh,PhoneMultiFactorGenerator:ld,RecaptchaVerifier:Ro,TwitterAuthProvider:wu,Auth:Ws,AuthCredential:xa,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.12")}(X.Z)},7574:(tt,be,V)=>{"use strict";V.d(be,{y:()=>G});var m=V(7393),L=V(9181),ae=V(6490),Z=V(6554),me=V(4487);var U=V(2494);let G=(()=>{class te{constructor(fe){this._isScalar=!1,fe&&(this._subscribe=fe)}lift(fe){const pe=new te;return pe.source=this,pe.operator=fe,pe}subscribe(fe,pe,Le){const{operator:oe}=this,he=function(te,ue,fe){if(te){if(te instanceof m.L)return te;if(te[L.b])return te[L.b]()}return te||ue||fe?new m.L(te,ue,fe):new m.L(ae.c)}(fe,pe,Le);if(he.add(oe?oe.call(he,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!he.syncErrorThrowable?this._subscribe(he):this._trySubscribe(he)),U.v.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable&&(he.syncErrorThrowable=!1,he.syncErrorThrown))throw he.syncErrorValue;return he}_trySubscribe(fe){try{return this._subscribe(fe)}catch(pe){U.v.useDeprecatedSynchronousErrorHandling&&(fe.syncErrorThrown=!0,fe.syncErrorValue=pe),function(te){for(;te;){const{closed:ue,destination:fe,isStopped:pe}=te;if(ue||pe)return!1;te=fe&&fe instanceof m.L?fe:null}return!0}(fe)?fe.error(pe):console.warn(pe)}}forEach(fe,pe){return new(pe=B(pe))((Le,oe)=>{let he;he=this.subscribe(ke=>{try{fe(ke)}catch($e){oe($e),he&&he.unsubscribe()}},oe,Le)})}_subscribe(fe){const{source:pe}=this;return pe&&pe.subscribe(fe)}[Z.L](){return this}pipe(...fe){return 0===fe.length?this:function(te){return 0===te.length?me.y:1===te.length?te[0]:function(fe){return te.reduce((pe,Le)=>Le(pe),fe)}}(fe)(this)}toPromise(fe){return new(fe=B(fe))((pe,Le)=>{let oe;this.subscribe(he=>oe=he,he=>Le(he),()=>pe(oe))})}}return te.create=ue=>new te(ue),te})();function B(te){if(te||(te=U.v.Promise||Promise),!te)throw new Error("no Promise impl found");return te}},6490:(tt,be,V)=>{"use strict";V.d(be,{c:()=>L});var m=V(2494),X=V(4449);const L={closed:!0,next(ae){},error(ae){if(m.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,X.z)(ae)},complete(){}}},9765:(tt,be,V)=>{"use strict";V.d(be,{Yc:()=>me,xQ:()=>J});var m=V(7574),X=V(7393),L=V(5319),ae=V(7971),re=V(8858),Z=V(9181);class me extends X.L{constructor(G){super(G),this.destination=G}}let J=(()=>{class U extends m.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Z.b](){return new me(this)}lift(B){const te=new ne(this,this);return te.operator=B,te}next(B){if(this.closed)throw new ae.N;if(!this.isStopped){const{observers:te}=this,ue=te.length,fe=te.slice();for(let pe=0;pe<ue;pe++)fe[pe].next(B)}}error(B){if(this.closed)throw new ae.N;this.hasError=!0,this.thrownError=B,this.isStopped=!0;const{observers:te}=this,ue=te.length,fe=te.slice();for(let pe=0;pe<ue;pe++)fe[pe].error(B);this.observers.length=0}complete(){if(this.closed)throw new ae.N;this.isStopped=!0;const{observers:B}=this,te=B.length,ue=B.slice();for(let fe=0;fe<te;fe++)ue[fe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(B){if(this.closed)throw new ae.N;return super._trySubscribe(B)}_subscribe(B){if(this.closed)throw new ae.N;return this.hasError?(B.error(this.thrownError),L.w.EMPTY):this.isStopped?(B.complete(),L.w.EMPTY):(this.observers.push(B),new re.W(this,B))}asObservable(){const B=new m.y;return B.source=this,B}}return U.create=(G,B)=>new ne(G,B),U})();class ne extends J{constructor(G,B){super(),this.destination=G,this.source=B}next(G){const{destination:B}=this;B&&B.next&&B.next(G)}error(G){const{destination:B}=this;B&&B.error&&this.destination.error(G)}complete(){const{destination:G}=this;G&&G.complete&&this.destination.complete()}_subscribe(G){const{source:B}=this;return B?this.source.subscribe(G):L.w.EMPTY}}},8858:(tt,be,V)=>{"use strict";V.d(be,{W:()=>X});var m=V(5319);class X extends m.w{constructor(ae,re){super(),this.subject=ae,this.subscriber=re,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ae=this.subject,re=ae.observers;if(this.subject=null,!re||0===re.length||ae.isStopped||ae.closed)return;const Z=re.indexOf(this.subscriber);-1!==Z&&re.splice(Z,1)}}},7393:(tt,be,V)=>{"use strict";V.d(be,{L:()=>me});var m=V(9105),X=V(6490),L=V(5319),ae=V(9181),re=V(2494),Z=V(4449);class me extends L.w{constructor(U,G,B){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=X.c;break;case 1:if(!U){this.destination=X.c;break}if("object"==typeof U){U instanceof me?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,U,G,B)}}[ae.b](){return this}static create(U,G,B){const te=new me(U,G,B);return te.syncErrorThrowable=!1,te}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class J extends me{constructor(U,G,B,te){super(),this._parentSubscriber=U;let ue,fe=this;(0,m.m)(G)?ue=G:G&&(ue=G.next,B=G.error,te=G.complete,G!==X.c&&(fe=Object.create(G),(0,m.m)(fe.unsubscribe)&&this.add(fe.unsubscribe.bind(fe)),fe.unsubscribe=this.unsubscribe.bind(this))),this._context=fe,this._next=ue,this._error=B,this._complete=te}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:G}=this;re.v.useDeprecatedSynchronousErrorHandling&&G.syncErrorThrowable?this.__tryOrSetError(G,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:G}=this,{useDeprecatedSynchronousErrorHandling:B}=re.v;if(this._error)B&&G.syncErrorThrowable?(this.__tryOrSetError(G,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(G.syncErrorThrowable)B?(G.syncErrorValue=U,G.syncErrorThrown=!0):(0,Z.z)(U),this.unsubscribe();else{if(this.unsubscribe(),B)throw U;(0,Z.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const G=()=>this._complete.call(this._context);re.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,G),this.unsubscribe()):(this.__tryOrUnsub(G),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,G){try{U.call(this._context,G)}catch(B){if(this.unsubscribe(),re.v.useDeprecatedSynchronousErrorHandling)throw B;(0,Z.z)(B)}}__tryOrSetError(U,G,B){if(!re.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{G.call(this._context,B)}catch(te){return re.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=te,U.syncErrorThrown=!0,!0):((0,Z.z)(te),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(tt,be,V)=>{"use strict";V.d(be,{w:()=>Z});var m=V(9796),X=V(1555),L=V(9105);const re=(()=>{function J(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((U,G)=>`${G+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return J.prototype=Object.create(Error.prototype),J})();class Z{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:G,_unsubscribe:B,_subscriptions:te}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof Z)U.remove(this);else if(null!==U)for(let ue=0;ue<U.length;++ue)U[ue].remove(this);if((0,L.m)(B)){G&&(this._unsubscribe=void 0);try{B.call(this)}catch(ue){ne=ue instanceof re?me(ue.errors):[ue]}}if((0,m.k)(te)){let ue=-1,fe=te.length;for(;++ue<fe;){const pe=te[ue];if((0,X.K)(pe))try{pe.unsubscribe()}catch(Le){ne=ne||[],Le instanceof re?ne=ne.concat(me(Le.errors)):ne.push(Le)}}}if(ne)throw new re(ne)}add(ne){let U=ne;if(!ne)return Z.EMPTY;switch(typeof ne){case"function":U=new Z(ne);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof Z)){const te=U;U=new Z,U._subscriptions=[te]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:G}=U;if(null===G)U._parentOrParents=this;else if(G instanceof Z){if(G===this)return U;U._parentOrParents=[G,this]}else{if(-1!==G.indexOf(this))return U;G.push(this)}const B=this._subscriptions;return null===B?this._subscriptions=[U]:B.push(U),U}remove(ne){const U=this._subscriptions;if(U){const G=U.indexOf(ne);-1!==G&&U.splice(G,1)}}}var J;function me(J){return J.reduce((ne,U)=>ne.concat(U instanceof re?U.errors:U),[])}Z.EMPTY=((J=new Z).closed=!0,J)},2494:(tt,be,V)=>{"use strict";V.d(be,{v:()=>X});let m=!1;const X={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const ae=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ae.stack)}else m&&console.log("RxJS: Back to a better error behavior. Thank you. <3");m=L},get useDeprecatedSynchronousErrorHandling(){return m}}},5345:(tt,be,V)=>{"use strict";V.d(be,{IY:()=>ae,Ds:()=>Z,ft:()=>J});var m=V(7393),X=V(7574),L=V(7444);class ae extends m.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Z extends m.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function J(ne,U){if(U.closed)return;if(ne instanceof X.y)return ne.subscribe(U);let G;try{G=(0,L.s)(ne)(U)}catch(B){U.error(B)}return G}},2441:(tt,be,V)=>{"use strict";V.d(be,{c:()=>re,N:()=>Z});var m=V(9765),X=V(7574),L=V(5319),ae=V(1307);class re extends X.y{constructor(G,B){super(),this.source=G,this.subjectFactory=B,this._refCount=0,this._isComplete=!1}_subscribe(G){return this.getSubject().subscribe(G)}getSubject(){const G=this._subject;return(!G||G.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let G=this._connection;return G||(this._isComplete=!1,G=this._connection=new L.w,G.add(this.source.subscribe(new me(this.getSubject(),this))),G.closed&&(this._connection=null,G=L.w.EMPTY)),G}refCount(){return(0,ae.x)()(this)}}const Z=(()=>{const U=re.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class me extends m.Yc{constructor(G,B){super(G),this.connectable=B}_error(G){this._unsubscribe(),super._error(G)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const G=this.connectable;if(G){this.connectable=null;const B=G._connection;G._refCount=0,G._subject=null,G._connection=null,B&&B.unsubscribe()}}}},9193:(tt,be,V)=>{"use strict";V.d(be,{E:()=>X,c:()=>L});var m=V(7574);const X=new m.y(re=>re.complete());function L(re){return re?function(re){return new m.y(Z=>re.schedule(()=>Z.complete()))}(re):X}},4402:(tt,be,V)=>{"use strict";V.d(be,{D:()=>fe});var m=V(7574),X=V(7444),L=V(5319),ae=V(6554),me=V(4087),J=V(377),G=V(4072),B=V(9489);function fe(pe,Le){return Le?function(pe,Le){if(null!=pe){if(function(pe){return pe&&"function"==typeof pe[ae.L]}(pe))return function(pe,Le){return new m.y(oe=>{const he=new L.w;return he.add(Le.schedule(()=>{const ke=pe[ae.L]();he.add(ke.subscribe({next($e){he.add(Le.schedule(()=>oe.next($e)))},error($e){he.add(Le.schedule(()=>oe.error($e)))},complete(){he.add(Le.schedule(()=>oe.complete()))}}))})),he})}(pe,Le);if((0,G.t)(pe))return function(pe,Le){return new m.y(oe=>{const he=new L.w;return he.add(Le.schedule(()=>pe.then(ke=>{he.add(Le.schedule(()=>{oe.next(ke),he.add(Le.schedule(()=>oe.complete()))}))},ke=>{he.add(Le.schedule(()=>oe.error(ke)))}))),he})}(pe,Le);if((0,B.z)(pe))return(0,me.r)(pe,Le);if(function(pe){return pe&&"function"==typeof pe[J.hZ]}(pe)||"string"==typeof pe)return function(pe,Le){if(!pe)throw new Error("Iterable cannot be null");return new m.y(oe=>{const he=new L.w;let ke;return he.add(()=>{ke&&"function"==typeof ke.return&&ke.return()}),he.add(Le.schedule(()=>{ke=pe[J.hZ](),he.add(Le.schedule(function(){if(oe.closed)return;let $e,ft;try{const Qe=ke.next();$e=Qe.value,ft=Qe.done}catch(Qe){return void oe.error(Qe)}ft?oe.complete():(oe.next($e),this.schedule())}))})),he})}(pe,Le)}throw new TypeError((null!==pe&&typeof pe||pe)+" is not observable")}(pe,Le):pe instanceof m.y?pe:new m.y((0,X.s)(pe))}},6693:(tt,be,V)=>{"use strict";V.d(be,{n:()=>ae});var m=V(7574),X=V(5015),L=V(4087);function ae(re,Z){return Z?(0,L.r)(re,Z):new m.y((0,X.V)(re))}},6682:(tt,be,V)=>{"use strict";V.d(be,{T:()=>re});var m=V(7574),X=V(4869),L=V(3282),ae=V(6693);function re(...Z){let me=Number.POSITIVE_INFINITY,J=null,ne=Z[Z.length-1];return(0,X.K)(ne)?(J=Z.pop(),Z.length>1&&"number"==typeof Z[Z.length-1]&&(me=Z.pop())):"number"==typeof ne&&(me=Z.pop()),null===J&&1===Z.length&&Z[0]instanceof m.y?Z[0]:(0,L.J)(me)((0,ae.n)(Z,J))}},5917:(tt,be,V)=>{"use strict";V.d(be,{of:()=>ae});var m=V(4869),X=V(6693),L=V(4087);function ae(...re){let Z=re[re.length-1];return(0,m.K)(Z)?(re.pop(),(0,L.r)(re,Z)):(0,X.n)(re)}},8002:(tt,be,V)=>{"use strict";V.d(be,{U:()=>X});var m=V(7393);function X(re,Z){return function(J){if("function"!=typeof re)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return J.lift(new L(re,Z))}}class L{constructor(Z,me){this.project=Z,this.thisArg=me}call(Z,me){return me.subscribe(new ae(Z,this.project,this.thisArg))}}class ae extends m.L{constructor(Z,me,J){super(Z),this.project=me,this.count=0,this.thisArg=J||this}_next(Z){let me;try{me=this.project.call(this.thisArg,Z,this.count++)}catch(J){return void this.destination.error(J)}this.destination.next(me)}}},3282:(tt,be,V)=>{"use strict";V.d(be,{J:()=>L});var m=V(9773),X=V(4487);function L(ae=Number.POSITIVE_INFINITY){return(0,m.zg)(X.y,ae)}},9773:(tt,be,V)=>{"use strict";V.d(be,{zg:()=>ae});var m=V(8002),X=V(4402),L=V(5345);function ae(J,ne,U=Number.POSITIVE_INFINITY){return"function"==typeof ne?G=>G.pipe(ae((B,te)=>(0,X.D)(J(B,te)).pipe((0,m.U)((ue,fe)=>ne(B,ue,te,fe))),U)):("number"==typeof ne&&(U=ne),G=>G.lift(new re(J,U)))}class re{constructor(ne,U=Number.POSITIVE_INFINITY){this.project=ne,this.concurrent=U}call(ne,U){return U.subscribe(new Z(ne,this.project,this.concurrent))}}class Z extends L.Ds{constructor(ne,U,G=Number.POSITIVE_INFINITY){super(ne),this.project=U,this.concurrent=G,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ne){this.active<this.concurrent?this._tryNext(ne):this.buffer.push(ne)}_tryNext(ne){let U;const G=this.index++;try{U=this.project(ne,G)}catch(B){return void this.destination.error(B)}this.active++,this._innerSub(U)}_innerSub(ne){const U=new L.IY(this),G=this.destination;G.add(U);const B=(0,L.ft)(ne,U);B!==U&&G.add(B)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ne){this.destination.next(ne)}notifyComplete(){const ne=this.buffer;this.active--,ne.length>0?this._next(ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(tt,be,V)=>{"use strict";V.d(be,{ht:()=>G,QV:()=>ne});var m=V(7393),X=V(9193),L=V(5917),ae=V(7574);class J{constructor(ue,fe,pe){this.kind=ue,this.value=fe,this.error=pe,this.hasValue="N"===ue}observe(ue){switch(this.kind){case"N":return ue.next&&ue.next(this.value);case"E":return ue.error&&ue.error(this.error);case"C":return ue.complete&&ue.complete()}}do(ue,fe,pe){switch(this.kind){case"N":return ue&&ue(this.value);case"E":return fe&&fe(this.error);case"C":return pe&&pe()}}accept(ue,fe,pe){return ue&&"function"==typeof ue.next?this.observe(ue):this.do(ue,fe,pe)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return te=this.error,new ae.y(fe=>fe.error(te));case"C":return(0,X.c)()}var te;throw new Error("unexpected notification kind value")}static createNext(ue){return void 0!==ue?new J("N",ue):J.undefinedValueNotification}static createError(ue){return new J("E",void 0,ue)}static createComplete(){return J.completeNotification}}function ne(te,ue=0){return function(pe){return pe.lift(new U(te,ue))}}J.completeNotification=new J("C"),J.undefinedValueNotification=new J("N",void 0);class U{constructor(ue,fe=0){this.scheduler=ue,this.delay=fe}call(ue,fe){return fe.subscribe(new G(ue,this.scheduler,this.delay))}}class G extends m.L{constructor(ue,fe,pe=0){super(ue),this.scheduler=fe,this.delay=pe}static dispatch(ue){const{notification:fe,destination:pe}=ue;fe.observe(pe),this.unsubscribe()}scheduleMessage(ue){this.destination.add(this.scheduler.schedule(G.dispatch,this.delay,new B(ue,this.destination)))}_next(ue){this.scheduleMessage(J.createNext(ue))}_error(ue){this.scheduleMessage(J.createError(ue)),this.unsubscribe()}_complete(){this.scheduleMessage(J.createComplete()),this.unsubscribe()}}class B{constructor(ue,fe){this.notification=ue,this.destination=fe}}},1307:(tt,be,V)=>{"use strict";V.d(be,{x:()=>X});var m=V(7393);function X(){return function(Z){return Z.lift(new L(Z))}}class L{constructor(Z){this.connectable=Z}call(Z,me){const{connectable:J}=this;J._refCount++;const ne=new ae(Z,J),U=me.subscribe(ne);return ne.closed||(ne.connection=J.connect()),U}}class ae extends m.L{constructor(Z,me){super(Z),this.connectable=me}_unsubscribe(){const{connectable:Z}=this;if(!Z)return void(this.connection=null);this.connectable=null;const me=Z._refCount;if(me<=0)return void(this.connection=null);if(Z._refCount=me-1,me>1)return void(this.connection=null);const{connection:J}=this,ne=Z._connection;this.connection=null,ne&&(!J||ne===J)&&ne.unsubscribe()}}},8819:(tt,be,V)=>{"use strict";V.d(be,{B:()=>me});var m=V(2441);var ae=V(1307),re=V(9765);function Z(){return new re.xQ}function me(){return J=>(0,ae.x)()(function(J,ne){return function(G){let B;B="function"==typeof J?J:function(){return J};const te=Object.create(G,m.N);return te.source=G,te.subjectFactory=B,te}}(Z)(J))}},2639:(tt,be,V)=>{"use strict";V.d(be,{R:()=>pe});var m=V(7574);let X=1;const L=Promise.resolve(),ae={};function re(oe){return oe in ae&&(delete ae[oe],!0)}const Z={setImmediate(oe){const he=X++;return ae[he]=!0,L.then(()=>re(he)&&oe()),he},clearImmediate(oe){re(oe)}};var J=V(6465),U=V(6102);const te=new class extends U.v{flush(he){this.active=!0,this.scheduled=void 0;const{actions:ke}=this;let $e,ft=-1,Qe=ke.length;he=he||ke.shift();do{if($e=he.execute(he.state,he.delay))break}while(++ft<Qe&&(he=ke.shift()));if(this.active=!1,$e){for(;++ft<Qe&&(he=ke.shift());)he.unsubscribe();throw $e}}}(class extends J.o{constructor(he,ke){super(he,ke),this.scheduler=he,this.work=ke}requestAsyncId(he,ke,$e=0){return null!==$e&&$e>0?super.requestAsyncId(he,ke,$e):(he.actions.push(this),he.scheduled||(he.scheduled=Z.setImmediate(he.flush.bind(he,null))))}recycleAsyncId(he,ke,$e=0){if(null!==$e&&$e>0||null===$e&&this.delay>0)return super.recycleAsyncId(he,ke,$e);0===he.actions.length&&(Z.clearImmediate(ke),he.scheduled=void 0)}});var ue=V(6561);class fe extends m.y{constructor(he,ke=0,$e=te){super(),this.source=he,this.delayTime=ke,this.scheduler=$e,(!(0,ue.k)(ke)||ke<0)&&(this.delayTime=0),(!$e||"function"!=typeof $e.schedule)&&(this.scheduler=te)}static create(he,ke=0,$e=te){return new fe(he,ke,$e)}static dispatch(he){const{source:ke,subscriber:$e}=he;return this.add(ke.subscribe($e))}_subscribe(he){return this.scheduler.schedule(fe.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function pe(oe,he=0){return function($e){return $e.lift(new Le(oe,he))}}class Le{constructor(he,ke){this.scheduler=he,this.delay=ke}call(he,ke){return new fe(ke,this.delay,this.scheduler).subscribe(he)}}},3342:(tt,be,V)=>{"use strict";V.d(be,{b:()=>ae});var m=V(7393);function X(){}var L=V(9105);function ae(me,J,ne){return function(G){return G.lift(new re(me,J,ne))}}class re{constructor(J,ne,U){this.nextOrObserver=J,this.error=ne,this.complete=U}call(J,ne){return ne.subscribe(new Z(J,this.nextOrObserver,this.error,this.complete))}}class Z extends m.L{constructor(J,ne,U,G){super(J),this._tapNext=X,this._tapError=X,this._tapComplete=X,this._tapError=U||X,this._tapComplete=G||X,(0,L.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||X,this._tapError=ne.error||X,this._tapComplete=ne.complete||X)}_next(J){try{this._tapNext.call(this._context,J)}catch(ne){return void this.destination.error(ne)}this.destination.next(J)}_error(J){try{this._tapError.call(this._context,J)}catch(ne){return void this.destination.error(ne)}this.destination.error(J)}_complete(){try{this._tapComplete.call(this._context)}catch(J){return void this.destination.error(J)}return this.destination.complete()}}},4087:(tt,be,V)=>{"use strict";V.d(be,{r:()=>L});var m=V(7574),X=V(5319);function L(ae,re){return new m.y(Z=>{const me=new X.w;let J=0;return me.add(re.schedule(function(){J!==ae.length?(Z.next(ae[J++]),Z.closed||me.add(this.schedule())):Z.complete()})),me})}},6465:(tt,be,V)=>{"use strict";V.d(be,{o:()=>L});var m=V(5319);class X extends m.w{constructor(re,Z){super()}schedule(re,Z=0){return this}}class L extends X{constructor(re,Z){super(re,Z),this.scheduler=re,this.work=Z,this.pending=!1}schedule(re,Z=0){if(this.closed)return this;this.state=re;const me=this.id,J=this.scheduler;return null!=me&&(this.id=this.recycleAsyncId(J,me,Z)),this.pending=!0,this.delay=Z,this.id=this.id||this.requestAsyncId(J,this.id,Z),this}requestAsyncId(re,Z,me=0){return setInterval(re.flush.bind(re,this),me)}recycleAsyncId(re,Z,me=0){if(null!==me&&this.delay===me&&!1===this.pending)return Z;clearInterval(Z)}execute(re,Z){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(re,Z);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,Z){let J,me=!1;try{this.work(re)}catch(ne){me=!0,J=!!ne&&ne||new Error(ne)}if(me)return this.unsubscribe(),J}_unsubscribe(){const re=this.id,Z=this.scheduler,me=Z.actions,J=me.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==J&&me.splice(J,1),null!=re&&(this.id=this.recycleAsyncId(Z,re,null)),this.delay=null}}},6102:(tt,be,V)=>{"use strict";V.d(be,{v:()=>X});let m=(()=>{class L{constructor(re,Z=L.now){this.SchedulerAction=re,this.now=Z}schedule(re,Z=0,me){return new this.SchedulerAction(this,re).schedule(me,Z)}}return L.now=()=>Date.now(),L})();class X extends m{constructor(ae,re=m.now){super(ae,()=>X.delegate&&X.delegate!==this?X.delegate.now():re()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ae,re=0,Z){return X.delegate&&X.delegate!==this?X.delegate.schedule(ae,re,Z):super.schedule(ae,re,Z)}flush(ae){const{actions:re}=this;if(this.active)return void re.push(ae);let Z;this.active=!0;do{if(Z=ae.execute(ae.state,ae.delay))break}while(ae=re.shift());if(this.active=!1,Z){for(;ae=re.shift();)ae.unsubscribe();throw Z}}}},3637:(tt,be,V)=>{"use strict";V.d(be,{z:()=>L,P:()=>ae});var m=V(6465);const L=new(V(6102).v)(m.o),ae=L},7771:(tt,be,V)=>{"use strict";V.d(be,{c:()=>Z,N:()=>re});var m=V(6465),L=V(6102);const re=new class extends L.v{}(class extends m.o{constructor(J,ne){super(J,ne),this.scheduler=J,this.work=ne}schedule(J,ne=0){return ne>0?super.schedule(J,ne):(this.delay=ne,this.state=J,this.scheduler.flush(this),this)}execute(J,ne){return ne>0||this.closed?super.execute(J,ne):this._execute(J,ne)}requestAsyncId(J,ne,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(J,ne,U):J.flush(this)}}),Z=re},377:(tt,be,V)=>{"use strict";V.d(be,{hZ:()=>X});const X="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(tt,be,V)=>{"use strict";V.d(be,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(tt,be,V)=>{"use strict";V.d(be,{b:()=>m});const m="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(tt,be,V)=>{"use strict";V.d(be,{N:()=>X});const X=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(tt,be,V)=>{"use strict";function m(X){setTimeout(()=>{throw X},0)}V.d(be,{z:()=>m})},4487:(tt,be,V)=>{"use strict";function m(X){return X}V.d(be,{y:()=>m})},9796:(tt,be,V)=>{"use strict";V.d(be,{k:()=>m});const m=Array.isArray||(X=>X&&"number"==typeof X.length)},9489:(tt,be,V)=>{"use strict";V.d(be,{z:()=>m});const m=X=>X&&"number"==typeof X.length&&"function"!=typeof X},9105:(tt,be,V)=>{"use strict";function m(X){return"function"==typeof X}V.d(be,{m:()=>m})},6561:(tt,be,V)=>{"use strict";V.d(be,{k:()=>X});var m=V(9796);function X(L){return!(0,m.k)(L)&&L-parseFloat(L)+1>=0}},1555:(tt,be,V)=>{"use strict";function m(X){return null!==X&&"object"==typeof X}V.d(be,{K:()=>m})},4072:(tt,be,V)=>{"use strict";function m(X){return!!X&&"function"!=typeof X.subscribe&&"function"==typeof X.then}V.d(be,{t:()=>m})},4869:(tt,be,V)=>{"use strict";function m(X){return X&&"function"==typeof X.schedule}V.d(be,{K:()=>m})},7444:(tt,be,V)=>{"use strict";V.d(be,{s:()=>G});var m=V(5015),X=V(4449),ae=V(377),Z=V(6554),J=V(9489),ne=V(4072),U=V(1555);const G=B=>{if(B&&"function"==typeof B[Z.L])return(B=>te=>{const ue=B[Z.L]();if("function"!=typeof ue.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return ue.subscribe(te)})(B);if((0,J.z)(B))return(0,m.V)(B);if((0,ne.t)(B))return(B=>te=>(B.then(ue=>{te.closed||(te.next(ue),te.complete())},ue=>te.error(ue)).then(null,X.z),te))(B);if(B&&"function"==typeof B[ae.hZ])return(B=>te=>{const ue=B[ae.hZ]();for(;;){let fe;try{fe=ue.next()}catch(pe){return te.error(pe),te}if(fe.done){te.complete();break}if(te.next(fe.value),te.closed)break}return"function"==typeof ue.return&&te.add(()=>{ue.return&&ue.return()}),te})(B);{const ue=`You provided ${(0,U.K)(B)?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(ue)}}},5015:(tt,be,V)=>{"use strict";V.d(be,{V:()=>m});const m=X=>L=>{for(let ae=0,re=X.length;ae<re&&!L.closed;ae++)L.next(X[ae]);L.complete()}},1301:(tt,be,V)=>{"use strict";var m=V(7716);let X=null;function L(){return X}const me=new m.OlP("DocumentToken");let J=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:ne,token:n,providedIn:"platform"}),n})();function ne(){return(0,m.LFG)(G)}const U=new m.OlP("Location Initialized");let G=(()=>{class n extends J{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=(0,m.Yz7)({factory:te,token:n,providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function te(){return new G((0,m.LFG)(me))}function ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function pe(n){return n&&"?"!==n[0]?"?"+n:n}let Le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,m.Yz7)({factory:oe,token:n,providedIn:"root"}),n})();function oe(n){const e=(0,m.LFG)(me).location;return new ke((0,m.LFG)(J),e&&e.origin||"")}const he=new m.OlP("appBaseHref");let ke=(()=>{class n extends Le{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+pe(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+pe(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(J),m.LFG(he,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),$e=(()=>{class n extends Le{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+pe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+pe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(J),m.LFG(he,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ft=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=fe(ct(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+pe(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ct(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Le),m.LFG(J))},n.normalizeQueryParams=pe,n.joinWithSlash=ue,n.stripTrailingSlash=fe,n.\u0275prov=(0,m.Yz7)({factory:Qe,token:n,providedIn:"root"}),n})();function Qe(){return new ft((0,m.LFG)(Le),(0,m.LFG)(J))}function ct(n){return n.replace(/\/index.html$/,"")}var we=(()=>((we=we||{})[we.Zero=0]="Zero",we[we.One=1]="One",we[we.Two=2]="Two",we[we.Few=3]="Few",we[we.Many=4]="Many",we[we.Other=5]="Other",we))(),Ue=(()=>((Ue=Ue||{})[Ue.Format=0]="Format",Ue[Ue.Standalone=1]="Standalone",Ue))(),Ie=(()=>((Ie=Ie||{})[Ie.Narrow=0]="Narrow",Ie[Ie.Abbreviated=1]="Abbreviated",Ie[Ie.Wide=2]="Wide",Ie[Ie.Short=3]="Short",Ie))(),Be=(()=>((Be=Be||{})[Be.Short=0]="Short",Be[Be.Medium=1]="Medium",Be[Be.Long=2]="Long",Be[Be.Full=3]="Full",Be))(),Te=(()=>((Te=Te||{})[Te.Decimal=0]="Decimal",Te[Te.Group=1]="Group",Te[Te.List=2]="List",Te[Te.PercentSign=3]="PercentSign",Te[Te.PlusSign=4]="PlusSign",Te[Te.MinusSign=5]="MinusSign",Te[Te.Exponential=6]="Exponential",Te[Te.SuperscriptingExponent=7]="SuperscriptingExponent",Te[Te.PerMille=8]="PerMille",Te[Te.Infinity=9]="Infinity",Te[Te.NaN=10]="NaN",Te[Te.TimeSeparator=11]="TimeSeparator",Te[Te.CurrencyDecimal=12]="CurrencyDecimal",Te[Te.CurrencyGroup=13]="CurrencyGroup",Te))();function Gn(n,e){return er((0,m.cg1)(n)[m.wAp.DateFormat],e)}function Tt(n,e){return er((0,m.cg1)(n)[m.wAp.TimeFormat],e)}function Fn(n,e){return er((0,m.cg1)(n)[m.wAp.DateTimeFormat],e)}function gn(n,e){const t=(0,m.cg1)(n),r=t[m.wAp.NumberSymbols][e];if(void 0===r){if(e===Te.CurrencyDecimal)return t[m.wAp.NumberSymbols][Te.Decimal];if(e===Te.CurrencyGroup)return t[m.wAp.NumberSymbols][Te.Group]}return r}const ar=m.kL8;function Ii(n){if(!n[m.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[m.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function er(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function Wn(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Ir=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ln={},sl=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var An=(()=>((An=An||{})[An.Short=0]="Short",An[An.ShortGMT=1]="ShortGMT",An[An.Long=2]="Long",An[An.Extended=3]="Extended",An))(),He=(()=>((He=He||{})[He.FullYear=0]="FullYear",He[He.Month=1]="Month",He[He.Date=2]="Date",He[He.Hours=3]="Hours",He[He.Minutes=4]="Minutes",He[He.Seconds=5]="Seconds",He[He.FractionalSeconds=6]="FractionalSeconds",He[He.Day=7]="Day",He))(),mt=(()=>((mt=mt||{})[mt.DayPeriods=0]="DayPeriods",mt[mt.Days=1]="Days",mt[mt.Months=2]="Months",mt[mt.Eras=3]="Eras",mt))();function Ns(n,e,t,r){let o=function(n){if(Vn(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[o,u=1,c=1]=n.split("-").map(p=>+p);return Ms(o,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Ir))return function(n){const e=new Date(0);let t=0,r=0;const o=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),o.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,p=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,p,y,b),e}(r)}const e=new Date(n);if(!Vn(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=fi(t,e)||e;let p,c=[];for(;e;){if(p=sl.exec(e),!p){c.push(e);break}{c=c.concat(p.slice(1));const S=c.pop();if(!S)break;e=S}}let y=o.getTimezoneOffset();r&&(y=se(r,y),o=function(n,e,t){const o=n.getTimezoneOffset();return function(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,-1*(se(e,o)-o))}(o,r));let b="";return c.forEach(S=>{const x=function(n){if(Q[n])return Q[n];let e;switch(n){case"G":case"GG":case"GGG":e=Dt(mt.Eras,Ie.Abbreviated);break;case"GGGG":e=Dt(mt.Eras,Ie.Wide);break;case"GGGGG":e=Dt(mt.Eras,Ie.Narrow);break;case"y":e=un(He.FullYear,1,0,!1,!0);break;case"yy":e=un(He.FullYear,2,0,!0,!0);break;case"yyy":e=un(He.FullYear,3,0,!1,!0);break;case"yyyy":e=un(He.FullYear,4,0,!1,!0);break;case"Y":e=H(1);break;case"YY":e=H(2,!0);break;case"YYY":e=H(3);break;case"YYYY":e=H(4);break;case"M":case"L":e=un(He.Month,1,1);break;case"MM":case"LL":e=un(He.Month,2,1);break;case"MMM":e=Dt(mt.Months,Ie.Abbreviated);break;case"MMMM":e=Dt(mt.Months,Ie.Wide);break;case"MMMMM":e=Dt(mt.Months,Ie.Narrow);break;case"LLL":e=Dt(mt.Months,Ie.Abbreviated,Ue.Standalone);break;case"LLLL":e=Dt(mt.Months,Ie.Wide,Ue.Standalone);break;case"LLLLL":e=Dt(mt.Months,Ie.Narrow,Ue.Standalone);break;case"w":e=z(1);break;case"ww":e=z(2);break;case"W":e=z(1,!0);break;case"d":e=un(He.Date,1);break;case"dd":e=un(He.Date,2);break;case"c":case"cc":e=un(He.Day,1);break;case"ccc":e=Dt(mt.Days,Ie.Abbreviated,Ue.Standalone);break;case"cccc":e=Dt(mt.Days,Ie.Wide,Ue.Standalone);break;case"ccccc":e=Dt(mt.Days,Ie.Narrow,Ue.Standalone);break;case"cccccc":e=Dt(mt.Days,Ie.Short,Ue.Standalone);break;case"E":case"EE":case"EEE":e=Dt(mt.Days,Ie.Abbreviated);break;case"EEEE":e=Dt(mt.Days,Ie.Wide);break;case"EEEEE":e=Dt(mt.Days,Ie.Narrow);break;case"EEEEEE":e=Dt(mt.Days,Ie.Short);break;case"a":case"aa":case"aaa":e=Dt(mt.DayPeriods,Ie.Abbreviated);break;case"aaaa":e=Dt(mt.DayPeriods,Ie.Wide);break;case"aaaaa":e=Dt(mt.DayPeriods,Ie.Narrow);break;case"b":case"bb":case"bbb":e=Dt(mt.DayPeriods,Ie.Abbreviated,Ue.Standalone,!0);break;case"bbbb":e=Dt(mt.DayPeriods,Ie.Wide,Ue.Standalone,!0);break;case"bbbbb":e=Dt(mt.DayPeriods,Ie.Narrow,Ue.Standalone,!0);break;case"B":case"BB":case"BBB":e=Dt(mt.DayPeriods,Ie.Abbreviated,Ue.Format,!0);break;case"BBBB":e=Dt(mt.DayPeriods,Ie.Wide,Ue.Format,!0);break;case"BBBBB":e=Dt(mt.DayPeriods,Ie.Narrow,Ue.Format,!0);break;case"h":e=un(He.Hours,1,-12);break;case"hh":e=un(He.Hours,2,-12);break;case"H":e=un(He.Hours,1);break;case"HH":e=un(He.Hours,2);break;case"m":e=un(He.Minutes,1);break;case"mm":e=un(He.Minutes,2);break;case"s":e=un(He.Seconds,1);break;case"ss":e=un(He.Seconds,2);break;case"S":e=un(He.FractionalSeconds,1);break;case"SS":e=un(He.FractionalSeconds,2);break;case"SSS":e=un(He.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ae(An.Short);break;case"ZZZZZ":e=Ae(An.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ae(An.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ae(An.Long);break;default:return null}return Q[n]=e,e}(S);b+=x?x(o,t,y):"''"===S?"'":S.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function Ms(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function fi(n,e){const t=function(n){return(0,m.cg1)(n)[m.wAp.LocaleId]}(n);if(Ln[t]=Ln[t]||{},Ln[t][e])return Ln[t][e];let r="";switch(e){case"shortDate":r=Gn(n,Be.Short);break;case"mediumDate":r=Gn(n,Be.Medium);break;case"longDate":r=Gn(n,Be.Long);break;case"fullDate":r=Gn(n,Be.Full);break;case"shortTime":r=Tt(n,Be.Short);break;case"mediumTime":r=Tt(n,Be.Medium);break;case"longTime":r=Tt(n,Be.Long);break;case"fullTime":r=Tt(n,Be.Full);break;case"short":const o=fi(n,"shortTime"),u=fi(n,"shortDate");r=Et(Fn(n,Be.Short),[o,u]);break;case"medium":const c=fi(n,"mediumTime"),p=fi(n,"mediumDate");r=Et(Fn(n,Be.Medium),[c,p]);break;case"long":const y=fi(n,"longTime"),b=fi(n,"longDate");r=Et(Fn(n,Be.Long),[y,b]);break;case"full":const S=fi(n,"fullTime"),x=fi(n,"fullDate");r=Et(Fn(n,Be.Full),[S,x])}return r&&(Ln[t][e]=r),r}function Et(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function on(n,e,t="-",r,o){let u="";(n<0||o&&n<=0)&&(o?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function un(n,e,t=0,r=!1,o=!1){return function(u,c){let p=function(n,e){switch(n){case He.FullYear:return e.getFullYear();case He.Month:return e.getMonth();case He.Date:return e.getDate();case He.Hours:return e.getHours();case He.Minutes:return e.getMinutes();case He.Seconds:return e.getSeconds();case He.FractionalSeconds:return e.getMilliseconds();case He.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||p>-t)&&(p+=t),n===He.Hours)0===p&&-12===t&&(p=12);else if(n===He.FractionalSeconds)return function(n,e){return on(n,3).substr(0,e)}(p,e);const y=gn(c,Te.MinusSign);return on(p,e,y,r,o)}}function Dt(n,e,t=Ue.Format,r=!1){return function(o,u){return function(n,e,t,r,o,u){switch(t){case mt.Months:return function(n,e,t){const r=(0,m.cg1)(n),u=er([r[m.wAp.MonthsFormat],r[m.wAp.MonthsStandalone]],e);return er(u,t)}(e,o,r)[n.getMonth()];case mt.Days:return function(n,e,t){const r=(0,m.cg1)(n),u=er([r[m.wAp.DaysFormat],r[m.wAp.DaysStandalone]],e);return er(u,t)}(e,o,r)[n.getDay()];case mt.DayPeriods:const c=n.getHours(),p=n.getMinutes();if(u){const b=function(n){const e=(0,m.cg1)(n);return Ii(e),(e[m.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Wn(r):[Wn(r[0]),Wn(r[1])])}(e),S=function(n,e,t){const r=(0,m.cg1)(n);Ii(r);const u=er([r[m.wAp.ExtraData][0],r[m.wAp.ExtraData][1]],e)||[];return er(u,t)||[]}(e,o,r),x=b.findIndex(O=>{if(Array.isArray(O)){const[$,K]=O,ye=c>=$.hours&&p>=$.minutes,xe=c<K.hours||c===K.hours&&p<K.minutes;if($.hours<K.hours){if(ye&&xe)return!0}else if(ye||xe)return!0}else if(O.hours===c&&O.minutes===p)return!0;return!1});if(-1!==x)return S[x]}return function(n,e,t){const r=(0,m.cg1)(n),u=er([r[m.wAp.DayPeriodsFormat],r[m.wAp.DayPeriodsStandalone]],e);return er(u,t)}(e,o,r)[c<12?0:1];case mt.Eras:return function(n,e){return er((0,m.cg1)(n)[m.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(o,u,n,e,t,r)}}function Ae(n){return function(e,t,r){const o=-1*r,u=gn(t,Te.MinusSign),c=o>0?Math.floor(o/60):Math.ceil(o/60);switch(n){case An.Short:return(o>=0?"+":"")+on(c,2,u)+on(Math.abs(o%60),2,u);case An.ShortGMT:return"GMT"+(o>=0?"+":"")+on(c,1,u);case An.Long:return"GMT"+(o>=0?"+":"")+on(c,2,u)+":"+on(Math.abs(o%60),2,u);case An.Extended:return 0===r?"Z":(o>=0?"+":"")+on(c,2,u)+":"+on(Math.abs(o%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Qt(n){return Ms(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function z(n,e=!1){return function(t,r){let o;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();o=1+Math.floor((c+u)/7)}else{const u=Qt(t),c=function(n){const e=Ms(n,0,1).getDay();return Ms(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),p=u.getTime()-c.getTime();o=1+Math.round(p/6048e5)}return on(o,n,gn(r,Te.MinusSign))}}function H(n,e=!1){return function(t,r){return on(Qt(t).getFullYear(),n,gn(r,Te.MinusSign),e)}}const Q={};function se(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Vn(n){return n instanceof Date&&!isNaN(n.valueOf())}class Di{}let ao=(()=>{class n extends Di{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(ar(r||this.locale)(t)){case we.Zero:return"zero";case we.One:return"one";case we.Two:return"two";case we.Few:return"few";case we.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.soG))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ps=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ti{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ln=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,u,c)=>{if(null==o.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new ti(null,this._ngForOf,-1,-1),null===c?void 0:c),y=new Rc(o,p);r.push(y)}else if(null==c)this._viewContainer.remove(null===u?void 0:u);else if(null!==u){const p=this._viewContainer.get(u);this._viewContainer.move(p,c);const y=new Rc(o,p);r.push(y)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,u=this._viewContainer.length;o<u;o++){const c=this._viewContainer.get(o);c.context.index=o,c.context.count=u,c.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Rc{constructor(e,t){this.record=e,this.view=t}}let hs=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Nc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){uo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){uo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Nc{constructor(){this.$implicit=null,this.ngIf=null}}function uo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,m.AaK)(e)}'.`)}let Mc=(()=>{class n{constructor(t){this.locale=t}transform(t,r="mediumDate",o,u){if(null==t||""===t||t!=t)return null;try{return Ns(t,r,u||this.locale,o)}catch(c){throw function(n,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,m.AaK)(n)}'`)}(n,c.message)}}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.soG,16))},n.\u0275pipe=m.Yjl({name:"date",type:n,pure:!0}),n})(),zo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[{provide:Di,useClass:ao}]}),n})();function cl(n){return"server"===n}let mu=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new ph((0,m.LFG)(me),window)}),n})();class ph{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=dl(this.window.history)||dl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function dl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class co extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new co,X||(X=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ko=Ko||document.querySelector("base"),Ko?Ko.getAttribute("href"):null);return null==t?null:function(n){an=an||document.createElement("a"),an.setAttribute("href",n);const e=an.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ko=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let an,Ko=null;const fo=new m.OlP("TRANSITION_ID"),fn=[{provide:m.ip1,useFactory:function(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=L(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[fo,me,m.zs3],multi:!0}];class hl{static init(){(0,m.VLi)(new hl)}addToWindow(e){m.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const o=m.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const p=function(y){c=c||y,u--,0==u&&r(c)};o.forEach(function(y){y.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let vu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const po=new m.OlP("EventManagerPlugins");let De=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(po),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class $t{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=L().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Yo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),xn=(()=>{class n extends Yo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ma),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ma))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Ma(n){L().remove(n)}const go={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ni=/%COMP%/g;function lr(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?lr(n,o,t):(o=o.replace(ni,n),t.push(o))}return t}function Wr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xi=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new ri(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Hc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case m.ifc.ShadowDom:return new Iu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=lr(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(De),m.LFG(xn),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ri{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(go[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=go[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=go[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,o&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Wr(r)):this.eventManager.addEventListener(e,t,Wr(r))}}class Hc extends ri{constructor(e,t,r,o){super(e),this.component=r;const u=lr(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(ni,o+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(ni,o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Iu extends ri{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=lr(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Tu=(()=>{class n extends $t{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Au=["alt","control","meta","shift"],_p={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vp=(()=>{class n extends $t{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="";if(Au.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=o,p.fullKey=c,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&qr.hasOwnProperty(e)&&(e=qr[e]))}return _p[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Au.forEach(u=>{u!=o&&Fa[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(me))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ms=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function(){co.makeCurrent(),hl.init()},multi:!0},{provide:me,useFactory:function(){return(0,m.RDi)(document),document},deps:[]}]),wl=[[],{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function(){return new m.qLn},deps:[]},{provide:po,useClass:Tu,multi:!0,deps:[me,m.R0b,m.Lbi]},{provide:po,useClass:vp,multi:!0,deps:[me]},[],{provide:xi,useClass:xi,deps:[De,xn,m.AFp]},{provide:m.FYo,useExisting:xi},{provide:Yo,useExisting:xn},{provide:xn,useClass:xn,deps:[me]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:De,useClass:De,deps:[po,m.R0b]},{provide:class{},useClass:vu,deps:[]},[]];let wp=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:fo,useExisting:m.AFp},fn]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:wl,imports:[zo,m.hGG]}),n})();"undefined"!=typeof window&&window;var Ht=V(4402),ut=V(5917),Ni=V(9765),Nu=V(7971);class _i extends Ni.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Nu.N;return this._value}next(e){super.next(this._value=e)}}var Yc=V(4869),Ji=V(9796),zr=V(7393);class vo extends zr.L{notifyNext(e,t,r,o,u){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Dp extends zr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var bl=V(7444),Bn=V(7574);function Cl(n,e,t,r,o=new Dp(n,t,r)){if(!o.closed)return e instanceof Bn.y?e.subscribe(o):(0,bl.s)(e)(o)}var tr=V(6693);const Mu={};class Il{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Pu(e,this.resultSelector))}}class Pu extends vo{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Mu),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(Cl(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,c=this.toRespond?o[r]===Mu?--this.toRespond:this.toRespond:0;o[r]=t,0===c&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Us=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Mi=V(3282);function vs(...n){return(0,Mi.J)(1)((0,ut.of)(...n))}var Xi=V(9193);function ii(n){return new Bn.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Ht.D)(t):(0,Xi.c)()).subscribe(e)})}var Ch=V(2441),St=V(8002),ta=V(5345);function mr(n,e){return"function"==typeof e?t=>t.pipe(mr((r,o)=>(0,Ht.D)(n(r,o)).pipe((0,St.U)((u,c)=>e(r,u,o,c))))):t=>t.lift(new Qc(n))}class Qc{constructor(e){this.project=e}call(e,t){return t.subscribe(new On(e,this.project))}}class On extends ta.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new ta.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,ta.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Dl=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function Ih(n){return e=>0===n?(0,Xi.c)():e.lift(new i_(n))}class i_{constructor(e){if(this.total=e,this.total<0)throw new Dl}call(e,t){return t.subscribe(new oE(e,this.total))}}class oE extends zr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function Bs(...n){const e=n[n.length-1];return(0,Yc.K)(e)?(n.pop(),t=>vs(n,t,e)):t=>vs(n,t)}function Ba(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new s_(n,e,t))}}class s_{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new Th(e,this.accumulator,this.seed,this.hasSeed))}}class Th extends zr.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Pi(n,e){return function(r){return r.lift(new Dh(n,e))}}class Dh{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new wo(e,this.predicate,this.thisArg))}}class wo extends zr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function js(n){return function(t){const r=new qn(n),o=t.lift(r);return r.caught=o}}class qn{constructor(e){this.selector=e}call(e,t){return t.subscribe(new ja(e,this.selector,this.caught))}}class ja extends ta.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new ta.IY(this);this.add(r);const o=(0,ta.ft)(t,r);o!==r&&this.add(o)}}}var nr=V(9773);function Xc(n,e){return(0,nr.zg)(n,e,1)}function Sh(n){return function(t){return 0===n?(0,Xi.c)():t.lift(new Oi(n))}}class Oi{constructor(e){if(this.total=e,this.total<0)throw new Dl}call(e,t){return t.subscribe(new ki(e,this.total))}}class ki extends zr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let u=0;u<r;u++){const c=t++%r;e.next(o[c])}}e.complete()}}function Es(n=Ah){return e=>e.lift(new bo(n))}class bo{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new Co(e,this.errorFactory))}}class Co extends zr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Ah(){return new Us}function Io(n=null){return e=>e.lift(new xh(n))}class xh{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new $a(e,this.defaultValue))}}class $a extends zr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Sp=V(4487);function jn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((o,u)=>n(o,u,r)):Sp.y,Ih(1),t?Io(e):Es(()=>new Us))}var Kr=V(3342),To=V(1307),o_=V(5319);class A{constructor(e){this.callback=e}call(e,t){return t.subscribe(new M(e,this.callback))}}class M extends zr.L{constructor(e,t){super(e),this.add(new o_.w(t))}}class j{constructor(e,t){this.id=e,this.url=t}}class ee extends j{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ce extends j{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ne extends j{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ke extends j{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class pt extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ct extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zt extends j{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class At extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dr extends j{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ha{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ed{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class na{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Do{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class So{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $s{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class xp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Tn(n){return new xp(n)}const Rp="ngNavigationCancelingError";function td(n){const e=Error("NavigationCancelingError: "+n);return e[Rp]=!0,e}function nd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))o[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function es(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!rd(n[o],e[o]))return!1;return!0}function rd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function aE(n){return Array.prototype.concat.apply([],n)}function Ga(n){return n.length>0?n[n.length-1]:null}function _r(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Zr(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Ht.D)(Promise.resolve(n)):(0,ut.of)(n)}const a_={exact:function l_(n,e,t){if(!za(n.segments,e.segments)||!Vu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!l_(n.children[r],e.children[r],t))return!1;return!0},subset:Lu},Rh={exact:function(n,e){return es(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rd(n[t],e[t]))},ignored:()=>!0};function Fu(n,e,t){return a_[t.paths](n.root,e.root,t.matrixParams)&&Rh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Lu(n,e,t){return Wa(n,e,e.segments,t)}function Wa(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!za(o,t)||e.hasChildren()||!Vu(o,t,r))}if(n.segments.length===t.length){if(!za(n.segments,t)||!Vu(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Lu(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(za(n.segments,o)&&Vu(n.segments,o,r)&&n.children[Ot])&&Wa(n.children[Ot],e,u,r)}}function Vu(n,e,t){return e.every((r,o)=>Rh[t](n[o].parameters,r.parameters))}class qa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tn(this.queryParams)),this._queryParamMap}toString(){return Mh.serialize(this)}}class Kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_r(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hs(this)}}class Uu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Tn(this.parameters)),this._parameterMap}toString(){return kp(this)}}function za(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Nh{}class id{parse(e){const t=new h_(e);return new qa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${sd(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Op(t)}=${Op(o)}`).join("&"):`${Op(t)}=${Op(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Mh=new id;function Hs(n){return n.segments.map(e=>kp(e)).join("/")}function sd(n,e){if(!n.hasChildren())return Hs(n);if(e){const t=n.children[Ot]?sd(n.children[Ot],!1):"",r=[];return _r(n.children,(o,u)=>{u!==Ot&&r.push(`${u}:${sd(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return _r(n.children,(r,o)=>{o===Ot&&(t=t.concat(e(r,o)))}),_r(n.children,(r,o)=>{o!==Ot&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ot?[sd(n.children[Ot],!1)]:[`${o}:${sd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${Hs(n)}/${t[0]}`:`${Hs(n)}/(${t.join("//")})`}}function d_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Op(n){return d_(n).replace(/%3B/gi,";")}function od(n){return d_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ad(n){return decodeURIComponent(n)}function Ph(n){return ad(n.replace(/\+/g,"%20"))}function kp(n){return`${od(n.path)}${function(n){return Object.keys(n).map(e=>`;${od(e)}=${od(n[e])}`).join("")}(n.parameters)}`}const lE=/^[^\/()?;=#]+/;function Oh(n){const e=n.match(lE);return e?e[0]:""}const cE=/^[^=?&#]+/,ia=/^[^?&#]+/;class h_{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Kt([],{}):new Kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Kt(e,t)),r}parseSegment(){const e=Oh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Uu(ad(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Oh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Oh(this.remaining);o&&(r=o,this.capture(r))}e[ad(t)]=ad(r)}parseQueryParam(e){const t=function(n){const e=n.match(cE);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function(n){const e=n.match(ia);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=Ph(t),u=Ph(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Oh(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ot);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Ot]:new Kt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class kh{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Fp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Fp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Lp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Lp(e,this._root).map(t=>t.value)}}function Fp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Fp(n,t);if(r)return r}return null}function Lp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Lp(n,t);if(r.length)return r.unshift(e),r}return[]}class sa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ud(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Vp extends kh{constructor(e,t){super(e),this.snapshot=t,Ml(this,e)}toString(){return this.snapshot.toString()}}function Up(n,e){const t=function(n,e){const c=new Rl([],{},{},"",{},Ot,e,null,n.root,-1,{});return new Nl("",new sa(c,[]))}(n,e),r=new _i([new Uu("",{})]),o=new _i({}),u=new _i({}),c=new _i({}),p=new _i(""),y=new xl(r,o,c,p,u,Ot,e,t.root);return y.snapshot=t.root,new Vp(new sa(y,[]),t)}class xl{constructor(e,t,r,o,u,c,p,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(e=>Tn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(e=>Tn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function f_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Rl{constructor(e,t,r,o,u,c,p,y,b,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=p,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nl extends kh{constructor(e,t){super(t),this.url=e,Ml(this,t)}toString(){return Gs(this._root)}}function Ml(n,e){e.value._routerState=n,e.children.forEach(t=>Ml(n,t))}function Gs(n){const e=n.children.length>0?` { ${n.children.map(Gs).join(", ")} } `:"";return`${n.value}${e}`}function Ka(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),es(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),es(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fh(n,e){return es(n.params,e.params)&&function(n,e){return za(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Fh(n.parent,e.parent))}function ld(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return ld(n,r,o);return ld(n,r)})}(n,e,t);return new sa(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return p_(e,c),c}}const r=function(n){return new xl(new _i(n.url),new _i(n.params),new _i(n.queryParams),new _i(n.fragment),new _i(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>ld(n,u));return new sa(r,o)}}function p_(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)p_(n.children[t],e.children[t])}function Pl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ol(n){return"object"==typeof n&&null!=n&&n.outlets}function Za(n,e,t,r,o){let u={};return r&&_r(r,(c,p)=>{u[p]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),new qa(t.root===n?e:pE(t.root,n,e),u,o)}function pE(n,e,t){const r={};return _r(n.children,(o,u)=>{r[u]=o===e?t:pE(o,e,t)}),new Kt(n.segments,r)}class jp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Pl(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Ol);if(o&&o!==Ga(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Bu(n,e,t){if(n||(n=new Kt([],{})),0===n.segments.length&&n.hasChildren())return cd(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],p=t[r];if(Ol(p))break;const y=`${p}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!__(y,b,c))return u;r+=2}else{if(!__(y,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Kt(n.segments.slice(0,r.pathIndex),{});return u.children[Ot]=new Kt(n.segments.slice(r.pathIndex),n.children),cd(u,0,o)}return r.match&&0===o.length?new Kt(n.segments,{}):r.match&&!n.hasChildren()?dd(n,e,t):r.match?cd(n,0,o):dd(n,e,t)}function cd(n,e,t){if(0===t.length)return new Kt(n.segments,{});{const r=function(n){return Ol(n[0])?n[0].outlets:{[Ot]:n}}(t),o={};return _r(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=Bu(n.children[c],e,u))}),_r(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new Kt(n.segments,o)}}function dd(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Ol(u)){const y=ir(u.outlets);return new Kt(r,y)}if(0===o&&Pl(t[0])){r.push(new Uu(n.segments[e].path,m_(t[0]))),o++;continue}const c=Ol(u)?u.outlets[Ot]:`${u}`,p=o<t.length-1?t[o+1]:null;c&&p&&Pl(p)?(r.push(new Uu(c,m_(p))),o+=2):(r.push(new Uu(c,{})),o++)}return new Kt(r,{})}function ir(n){const e={};return _r(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=dd(new Kt([],{}),0,t))}),e}function m_(n){const e={};return _r(n,(t,r)=>e[r]=`${t}`),e}function __(n,e,t){return n==t.path&&es(e,t.parameters)}class y_{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ka(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ud(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),_r(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ud(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ud(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new So(u.value.snapshot))}),e.children.length&&this.forwardEvent(new na(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Ka(o),o===u)if(o.component){const c=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const c=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),zp(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),y=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=o,c.resolver=y,c.outlet&&c.outlet.activateWith(o,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}function zp(n){Ka(n.value),n.children.forEach(zp)}class Zp{constructor(e,t){this.routes=e,this.module=t}}function Ya(n){return"function"==typeof n}function Qa(n){return n instanceof qa}const kl=Symbol("INITIAL_VALUE");function Fl(){return mr(n=>function(...n){let e,t;return(0,Yc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,Ji.k)(n[0])&&(n=n[0]),(0,tr.n)(n,t).lift(new Il(e))}(n.map(e=>e.pipe(Ih(1),Bs(kl)))).pipe(Ba((e,t)=>{let r=!1;return t.reduce((o,u,c)=>o!==kl?o:(u===kl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Qa(u)?o:u),e)},kl),Pi(e=>e!==kl),(0,St.U)(e=>Qa(e)?e:!0===e),Ih(1)))}let kr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:function(){return[ug]},encapsulation:2}),n})();function Ll(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Jp(r,mE(e,r))}}function Jp(n,e){n.children&&Ll(n.children,e)}function mE(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Xp(n){const e=n.children&&n.children.map(Xp),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=kr),t}function si(n){return n.outlet||Ot}function v_(n,e){const t=n.filter(r=>si(r)===e);return t.push(...n.filter(r=>si(r)!==e)),t}const Vh={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Uh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Vh):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(e.matcher||nd)(t,n,e);if(!u)return Object.assign({},Vh);const c={};_r(u.posParams,(y,b)=>{c[b]=y.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function fd(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Ja(n,e,r)&&si(r)!==Ot)}(n,t,r)){const c=new Kt(e,function(n,e,t,r){const o={};o[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&si(u)!==Ot){const c=new Kt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[si(u)]=c}return o}(n,e,r,new Kt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Ja(n,e,r))}(n,t,r)){const c=new Kt(n.segments,function(n,e,t,r,o,u){const c={};for(const p of r)if(Ja(n,t,p)&&!o[si(p)]){const y=new Kt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[si(p)]=y}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Kt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ja(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jh(n,e,t,r){return!!(si(n)===r||r!==Ot&&Ja(e,t,n))&&("**"===n.path||Uh(e,n,t).matched)}function w_(n,e,t){return 0===e.length&&!n.children[t]}class Vl{constructor(e){this.segmentGroup=e||null}}class eg{constructor(e){this.urlTree=e}}function Sr(n){return new Bn.y(e=>e.error(new Vl(n)))}function Ul(n){return new Bn.y(e=>e.error(new eg(n)))}function b_(n){return new Bn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class ng{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=fd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ot).pipe((0,St.U)(u=>this.createUrlTree($h(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(js(u=>{if(u instanceof eg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Vl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ot).pipe((0,St.U)(o=>this.createUrlTree($h(o),e.queryParams,e.fragment))).pipe(js(o=>{throw o instanceof Vl?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Kt([],{[Ot]:e}):e;return new qa(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,St.U)(u=>new Kt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Ht.D)(o).pipe(Xc(u=>{const c=r.children[u],p=v_(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,St.U)(y=>({segment:y,outlet:u})))}),Ba((u,c)=>(u[c.outlet]=c.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pi((o,u)=>n(o,u,r)):Sp.y,Sh(1),t?Io(e):Es(()=>new Us))}())}expandSegment(e,t,r,o,u,c){return(0,Ht.D)(r).pipe(Xc(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,c).pipe(js(b=>{if(b instanceof Vl)return(0,ut.of)(null);throw b}))),jn(p=>!!p),js((p,y)=>{if(p instanceof Us||"EmptyError"===p.name){if(w_(t,o,u))return(0,ut.of)(new Kt([],{}));throw new Vl(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,c,p){return jh(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):Sr(t):Sr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ul(u):this.lineralizeSegments(r,u).pipe((0,nr.zg)(c=>{const p=new Kt(c,{});return this.expandSegment(e,p,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:p,consumedSegments:y,lastChild:b,positionalParamSegments:S}=Uh(t,o,u);if(!p)return Sr(t);const x=this.applyRedirectCommands(y,o.redirectTo,S);return o.redirectTo.startsWith("/")?Ul(x):this.lineralizeSegments(o,x).pipe((0,nr.zg)(O=>this.expandSegment(e,t,r,O.concat(u.slice(b)),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,ut.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,St.U)(O=>(r._loadedConfig=O,new Kt(o,{})))):(0,ut.of)(new Kt(o,{}));const{matched:c,consumedSegments:p,lastChild:y}=Uh(t,r,o);if(!c)return Sr(t);const b=o.slice(y);return this.getChildConfig(e,r,o).pipe((0,nr.zg)(x=>{const O=x.module,$=x.routes,{segmentGroup:K,slicedSegments:ye}=fd(t,p,b,$),xe=new Kt(K.segments,K.children);if(0===ye.length&&xe.hasChildren())return this.expandChildren(O,$,xe).pipe((0,St.U)(st=>new Kt(p,st)));if(0===$.length&&0===ye.length)return(0,ut.of)(new Kt(p,{}));const gt=si(r)===u;return this.expandSegment(O,xe,$,ye,gt?Ot:u,!0).pipe((0,St.U)(et=>new Kt(p.concat(et.segments),et.children)))}))}getChildConfig(e,t,r){return t.children?(0,ut.of)(new Zp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ut.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,nr.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,St.U)(u=>(t._loadedConfig=u,u))):(n=t,new Bn.y(e=>e.error(td(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,ut.of)(new Zp([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,ut.of)(!0);const u=o.map(c=>{const p=e.get(c);let y;if((n=p)&&Ya(n.canLoad))y=p.canLoad(t,r);else{if(!Ya(p))throw new Error("Invalid CanLoad guard");y=p(t,r)}var n;return Zr(y)});return(0,ut.of)(u).pipe(Fl(),(0,Kr.b)(c=>{if(!Qa(c))return;const p=td(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,St.U)(c=>!0===c))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,ut.of)(r);if(o.numberOfChildren>1||!o.children[Ot])return b_(e.redirectTo);o=o.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new qa(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return _r(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return _r(t.children,(p,y)=>{c[y]=this.createSegmentGroup(e,p,r,o)}),new Kt(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function $h(n){const e={};for(const r of Object.keys(n.children)){const u=$h(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Kt(n.segments.concat(e.segments),e.children)}return n}(new Kt(n.segments,e))}class ws{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class oi{constructor(e,t){this.component=e,this.route=t}}function C_(n,e,t){const r=n._root;return Yr(r,e?e._root:null,t,[r.value])}function Hh(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Yr(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ud(e);return n.children.forEach(c=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!za(n.url,e.url);case"pathParamsOrQueryParamsChange":return!za(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fh(n,e)||!es(n.queryParams,e.queryParams);case"paramsChange":default:return!Fh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?o.canActivateChecks.push(new ws(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Yr(n,e,u.component?p?p.children:null:t,r,o),y&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new oi(p.outlet.component,c))}else c&&pd(e,p,o),o.canActivateChecks.push(new ws(r)),Yr(n,null,u.component?p?p.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),_r(u,(c,p)=>pd(c,t.getContext(p),o)),o}function pd(n,e,t){const r=ud(n),o=n.value;_r(r,(u,c)=>{pd(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new oi(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class sg{}function qh(n){return new Bn.y(e=>e.error(n))}class f{constructor(e,t,r,o,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=fd(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ot);if(null===t)return null;const r=new Rl([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new sa(r,t),u=new Nl(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=f_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=v_(e,u),y=this.processSegmentGroup(p,c,u);if(null===y)return null;r.push(...y)}const o=N(r);return o.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,o);if(null!==c)return c}return w_(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!jh(e,t,r,o))return null;let u,c=[],p=[];if("**"===e.path){const $=r.length>0?Ga(r).parameters:{};u=new Rl(r,$,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Re(e),si(e),e.component,e,le(t),Ve(t)+r.length,Je(e))}else{const $=Uh(t,e,r);if(!$.matched)return null;c=$.consumedSegments,p=r.slice($.lastChild),u=new Rl(c,$.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Re(e),si(e),e.component,e,le(t),Ve(t)+c.length,Je(e))}const y=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:S}=fd(t,c,p,y.filter($=>void 0===$.redirectTo),this.relativeLinkResolution);var n;if(0===S.length&&b.hasChildren()){const $=this.processChildren(y,b);return null===$?null:[new sa(u,$)]}if(0===y.length&&0===S.length)return[new sa(u,[])];const x=si(e)===o,O=this.processSegment(y,b,S,x?Ot:o);return null===O?null:[new sa(u,O)]}}function D(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function N(n){const e=[],t=new Set;for(const r of n){if(!D(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=N(r.children);e.push(new sa(r.value,o))}return e.filter(r=>!t.has(r))}function le(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ve(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Re(n){return n.data||{}}function Je(n){return n.resolve||{}}function gd(n){return mr(e=>{const t=n(e);return t?(0,Ht.D)(t).pipe((0,St.U)(()=>e)):(0,ut.of)(e)})}class og extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const md=new m.OlP("ROUTES");class _d{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,St.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Zp(aE(c.injector.get(md,void 0,m.XFs.Self|m.XFs.Optional)).map(Xp),c)}),js(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ch.c(o,()=>new Ni.xQ).pipe((0,To.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Ht.D)(this.loader.load(e)):Zr(e()).pipe((0,nr.zg)(t=>t instanceof m.YKP?(0,ut.of)(t):(0,Ht.D)(this.compiler.compileModuleAsync(t))))}}class Kh{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new aa,this.attachRef=null}}class aa{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Kh,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class ag{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function D_(n){throw n}function dI(n,e,t){return e.parse("/")}function jl(n,e){return(0,ut.of)(null)}const hI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let bs=(()=>{class n{constructor(t,r,o,u,c,p,y,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ni.xQ,this.errorHandler=D_,this.malformedUriErrorHandler=dI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:jl,afterPreactivation:jl},this.urlHandlingStrategy=new ag,this.routeReuseStrategy=new og,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(m.h0i),this.console=c.get(m.c2e);const O=c.get(m.R0b);this.isNgZoneEnabled=O instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new qa(new Kt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new _d(p,y,$=>this.triggerEvent(new rr($)),$=>this.triggerEvent(new Ha($))),this.routerState=Up(this.currentUrlTree,this.rootComponentType),this.transitions=new _i({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Pi(o=>0!==o.id),(0,St.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mr(o=>{let u=!1,c=!1;return(0,ut.of)(o).pipe((0,Kr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mr(p=>{const y=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return A_(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,ut.of)(p).pipe(mr(x=>{const O=this.transitions.getValue();return r.next(new ee(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),O!==this.transitions.getValue()?Xi.E:Promise.resolve(x)}),function(n,e,t,r){return mr(o=>function(n,e,t,r,o){return new ng(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,St.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function(n,e,t,r,o){return(0,nr.zg)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const c=new f(n,e,t,r,o,u).recognize();return null===c?qh(new sg):(0,ut.of)(c)}catch(c){return qh(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,St.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kr.b)(x=>{"eager"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(x.urlAfterRedirects,x),this.browserUrlTree=x.urlAfterRedirects);const O=new pt(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(O)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:$,source:K,restoredState:ye,extras:xe}=p,gt=new ee(O,this.serializeUrl($),K,ye);r.next(gt);const ht=Up($,this.rootComponentType).snapshot;return(0,ut.of)(Object.assign(Object.assign({},p),{targetSnapshot:ht,urlAfterRedirects:$,extras:Object.assign(Object.assign({},xe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),Xi.E}),gd(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=p;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,Kr.b)(p=>{const y=new Ct(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),(0,St.U)(p=>Object.assign(Object.assign({},p),{guards:C_(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,nr.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?(0,ut.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Ht.D)(n).pipe((0,nr.zg)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!u||0===u.length)return(0,ut.of)(!0);const c=u.map(p=>{const y=Hh(p,e,o);let b;if(function(n){return n&&Ya(n.canDeactivate)}(y))b=Zr(y.canDeactivate(n,e,t,r));else{if(!Ya(y))throw new Error("Invalid CanDeactivate guard");b=Zr(y(n,e,t,r))}return b.pipe(jn())});return(0,ut.of)(c).pipe(Fl())}(o.component,o.route,t,e,r)),jn(o=>!0!==o,!0))}(c,r,o,n).pipe((0,nr.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Ht.D)(e).pipe(Xc(o=>vs(function(n,e){return null!==n&&e&&e(new ed(n)),(0,ut.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new Do(n)),(0,ut.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ii(()=>{const p=c.guards.map(y=>{const b=Hh(y,c.node,t);let S;if(function(n){return n&&Ya(n.canActivateChild)}(b))S=Zr(b.canActivateChild(r,n));else{if(!Ya(b))throw new Error("Invalid CanActivateChild guard");S=Zr(b(r,n))}return S.pipe(jn())});return(0,ut.of)(p).pipe(Fl())}));return(0,ut.of)(u).pipe(Fl())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ut.of)(!0);const o=r.map(u=>ii(()=>{const c=Hh(u,e,t);let p;if(function(n){return n&&Ya(n.canActivate)}(c))p=Zr(c.canActivate(e,n));else{if(!Ya(c))throw new Error("Invalid CanActivate guard");p=Zr(c(e,n))}return p.pipe(jn())}));return(0,ut.of)(o).pipe(Fl())}(n,o.route,t))),jn(o=>!0!==o,!0))}(r,u,n,e):(0,ut.of)(p)),(0,St.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Kr.b)(p=>{if(Qa(p.guardsResult)){const b=td(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const y=new zt(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(y)}),Pi(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),gd(p=>{if(p.guards.canActivateChecks.length)return(0,ut.of)(p).pipe((0,Kr.b)(y=>{const b=new At(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),mr(y=>{let b=!1;return(0,ut.of)(y).pipe(function(n,e){return(0,nr.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,ut.of)(t);let u=0;return(0,Ht.D)(o).pipe(Xc(c=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,ut.of)({});const u={};return(0,Ht.D)(o).pipe((0,nr.zg)(c=>function(n,e,t,r){const o=Hh(n,e,r);return Zr(o.resolve?o.resolve(e,t):o(e,t))}(n[c],e,t,r).pipe((0,Kr.b)(p=>{u[c]=p}))),Sh(1),(0,nr.zg)(()=>Object.keys(u).length===o.length?(0,ut.of)(u):Xi.E))}(n._resolve,n,e,r).pipe((0,St.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),f_(n,t).resolve),null)))}(c.route,r,n,e)),(0,Kr.b)(()=>u++),Sh(1),(0,nr.zg)(c=>u===o.length?(0,ut.of)(t):Xi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,Kr.b)(y=>{const b=new Dr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),gd(p=>{const{targetSnapshot:y,id:b,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:$}}=p;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!$})}),(0,St.U)(p=>{const y=function(n,e,t){const r=ld(n,e._root,t?t._root:void 0);return new Vp(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:y})}),(0,Kr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,St.U)(r=>(new y_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Kr.b)({next(){u=!0},complete(){u=!0}}),function(n){return e=>e.lift(new A(n))}(()=>{var p;if(!u&&!c){const y=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,y)):this.cancelNavigationTransition(o,y)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),js(p=>{if(c=!0,function(n){return n&&n[Rp]}(p)){const y=Qa(p.url);y||(this.navigated=!0,this.restoreHistory(o,!0));const b=new Ne(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(b),y?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||A_(o.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const y=new Ke(o.id,this.serializeUrl(o.extractedUrl),p);r.next(y);try{o.resolve(this.errorHandler(p))}catch(b){o.reject(b)}}return Xi.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:u,urlTree:c}=r,p={replaceUrl:!0};if(u){const y=Object.assign({},u);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(p.state=y)}this.scheduleNavigation(c,o,u,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ll(t),this.config=t.map(Xp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:y}=r,b=o||this.routerState.root,S=y?this.currentUrlTree.fragment:c;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function(n,e,t,r,o){if(0===t.length)return Za(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jp(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return _r(u.outlets,(y,b)=>{p[b]="string"==typeof y?y.split("/"):y}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((p,y)=>{0==y&&"."===p||(0==y&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new jp(t,e,r)}(t);if(u.toRoot())return Za(e.root,new Kt([],{}),e,r,o);const c=function(n,e,t){if(n.isAbsolute)return new Hp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Hp(u,u===e.root,0)}const r=Pl(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Hp(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?cd(c.segmentGroup,c.index,u.commands):Bu(c.segmentGroup,c.index,u.commands);return Za(c.segmentGroup,p,e,r,o)}(b,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Qa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},hI):!1===r?Object.assign({},fI):r,Qa(t))return Fu(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Fu(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ce(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var p,y;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),S=A_(r)&&b&&!A_(b.source),$=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===t.toString();if(S&&$)return Promise.resolve(!0);let K,ye,xe;c?(K=c.resolve,ye=c.reject,xe=c.promise):xe=new Promise((et,st)=>{K=et,ye=st});const gt=++this.navigationId;let ht;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ht=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):ht=0,this.setTransition({id:gt,targetPageId:ht,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:K,reject:ye,promise:xe,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),xe.catch(et=>Promise.reject(et))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new Ne(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.DyG),m.LFG(Nh),m.LFG(aa),m.LFG(ft),m.LFG(m.zs3),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function A_(n){return"imperative"!==n}let ug=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.name=u||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,y=new N_(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(aa),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class N_{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xl?this.route:e===aa?this.childContexts:this.parent.get(e,t)}}class TE{}class SE{preload(e,t){return(0,ut.of)(null)}}let M_=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.injector=u,this.preloadingStrategy=c,this.loader=new _d(r,o,b=>t.triggerEvent(new rr(b)),b=>t.triggerEvent(new Ha(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Pi(t=>t instanceof ce),Xc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;o.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,Ht.D)(o).pipe((0,Mi.J)(),(0,St.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,ut.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,nr.zg)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bs),m.LFG(m.v3s),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(TE))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),vd=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ee?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ce&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $s&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $s(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(bs),m.LFG(mu),m.LFG(void 0))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const $l=new m.OlP("ROUTER_CONFIGURATION"),gI=new m.OlP("ROUTER_FORROOT_GUARD"),mI=[ft,{provide:Nh,useClass:id},{provide:bs,useFactory:function(n,e,t,r,o,u,c,p={},y,b){const S=new bs(null,n,e,t,r,o,u,aE(c));return y&&(S.urlHandlingStrategy=y),b&&(S.routeReuseStrategy=b),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,S),p.enableTracing&&S.events.subscribe(x=>{var O,$;null===(O=console.group)||void 0===O||O.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===($=console.groupEnd)||void 0===$||$.call(console)}),S},deps:[Nh,aa,ft,m.zs3,m.v3s,m.Sil,md,$l,[class{},new m.FiY],[class{},new m.FiY]]},aa,{provide:xl,useFactory:function(n){return n.routerState.root},deps:[bs]},{provide:m.v3s,useClass:m.EAV},M_,SE,class{preload(e,t){return t().pipe(js(()=>(0,ut.of)(null)))}},{provide:$l,useValue:{enableTracing:!1}}];function AE(){return new m.PXZ("Router",bs)}let xE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[mI,RE(t),{provide:gI,useFactory:Px,deps:[[bs,new m.FiY,new m.tp0]]},{provide:$l,useValue:r||{}},{provide:Le,useFactory:_I,deps:[J,[new m.tBr(he),new m.FiY],$l]},{provide:vd,useFactory:Xk,deps:[bs,mu,$l]},{provide:TE,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:SE},{provide:m.PXZ,multi:!0,useFactory:AE},[NE,{provide:m.ip1,multi:!0,useFactory:yI,deps:[NE]},{provide:vI,useFactory:Fx,deps:[NE]},{provide:m.tb,multi:!0,useExisting:vI}]]}}static forChild(t){return{ngModule:n,providers:[RE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(gI,8),m.LFG(bs,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function Xk(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new vd(n,e,t)}function _I(n,e,t={}){return t.useHash?new $e(n,e):new ke(n,e)}function Px(n){return"guarded"}function RE(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:md,multi:!0,useValue:n}]}let NE=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ni.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),u=this.injector.get(bs),c=this.injector.get($l);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?(0,ut.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get($l),o=this.injector.get(M_),u=this.injector.get(vd),c=this.injector.get(bs),p=this.injector.get(m.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),o.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function yI(n){return n.appInitializer.bind(n)}function Fx(n){return n.bootstrapListener.bind(n)}const vI=new m.OlP("Router Initializer"),EI=[];let Vx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[xE.forRoot(EI)],xE]}),n})();var Ee=V(8239),wI=V(8873),kt=V(4292),Zh=V(3637),bI=V(6561);function la(n){const{subscriber:e,counter:t,period:r}=n;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}var O_=V(6682),Ux=V(8819);function k_(n,e){return t=>t.lift(new ju(n,e))}class ju{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new ME(e,this.compare,this.keySelector))}}class ME extends zr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}class PE{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new t1(e,this.observables,this.project))}}class t1 extends vo{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let u=0;u<o;u++)this.toRespond.push(u);for(let u=0;u<o;u++)this.add(Cl(this,t[u],void 0,u))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const u=o.indexOf(r);-1!==u&&o.splice(u,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class n1{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new $u(e,this.predicate))}}class $u extends zr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var cn=V(8971),vr=V(8939),DI=(V(3259),V(3394)),ca=V(3910),Fi=V(8026),k=V(3854),da=V(5422);const Bx="@firebase/database";let F_="";function SI(n){F_=n}class kE{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class r1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const jx=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kE(e)}}catch(e){}return new r1},Yh=jx("localStorage"),AI=jx("sessionStorage"),lg=new da.Yd("@firebase/database"),$x=function(){let n=1;return function(){return n++}}(),Hx=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},L_=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=L_.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let Qh=null,Gx=!0;const Wx=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(lg.logLevel=da.in.VERBOSE,Qh=lg.log.bind(lg),e&&AI.set("logging_enabled",!0)):"function"==typeof n?Qh=n:(Qh=null,AI.remove("logging_enabled"))},zn=function(...n){if(!0===Gx&&(Gx=!1,null===Qh&&!0===AI.get("logging_enabled")&&Wx(!0)),Qh){const e=L_.apply(null,n);Qh(e)}},Ed=function(n){return function(...e){zn(n,...e)}},FE=function(...n){const e="FIREBASE INTERNAL ERROR: "+L_(...n);lg.error(e)},ha=function(...n){const e=`FIREBASE FATAL ERROR: ${L_(...n)}`;throw lg.error(e),new Error(e)},yi=function(...n){const e="FIREBASE WARNING: "+L_(...n);lg.warn(e)},Jh=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Li="[MIN_NAME]",fa="[MAX_NAME]",wd=function(n,e){if(n===e)return 0;if(n===Li||e===fa)return-1;if(e===Li||n===fa)return 1;{const t=V_(n),r=V_(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},i1=function(n,e){return n===e?0:n<e?-1:1},bd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},LE=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=LE(n[e[r]]);return t+="}",t},VE=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function ai(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const RI=function(n){(0,k.hu)(!Jh(n),"Invalid JSON number");const r=1023;let o,u,c,p,y;0===n?(u=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const b=[];for(y=52;y;y-=1)b.push(c%2?1:0),c=Math.floor(c/2);for(y=11;y;y-=1)b.push(u%2?1:0),u=Math.floor(u/2);b.push(o?1:0),b.reverse();const S=b.join("");let x="";for(y=0;y<64;y+=8){let O=parseInt(S.substr(y,8),2).toString(16);1===O.length&&(O="0"+O),x+=O}return x.toLowerCase()},ef=new RegExp("^-?(0*)\\d{1,10}$"),tf=-2147483648,Hl=2147483647,V_=function(n){if(ef.test(n)){const e=Number(n);if(e>=tf&&e<=Hl)return e}return null},Cd=function(n){try{n()}catch(e){setTimeout(()=>{throw yi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Id=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class BE{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){yi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class MI{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(zn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yi(e)}}let Gl=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const PI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cs="websocket",OI="long_polling";class qE{constructor(e,t,r,o,u=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yh.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Yh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Zx(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===Cs)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==OI)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return ai(t,(u,c)=>{o.push(u+"="+c)}),r+o.join("&")}class kI{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const FI={},zE={};function dg(n){const e=n.toString();return FI[e]||(FI[e]=new kI),FI[e]}class Yx{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Cd(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class nf{constructor(e,t,r,o,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ed(e),this.stats_=dg(t),this.urlFn=y=>(this.appCheckToken&&(y.ac=this.appCheckToken),Zx(t,OI,y))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Yx(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new YE((...u)=>{const[c,p,y,b,S]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=y;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&PI.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nf.forceAllow_=!0}static forceDisallow(){nf.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!nf.forceAllow_&&(nf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),o=VE(r,1840);for(let u=0;u<o.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class YE{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=$x(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=YE.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){zn("frame writing exception"),p.stack&&zn(p.stack),zn(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let hg=null;"undefined"!=typeof MozWebSocket?hg=MozWebSocket:"undefined"!=typeof WebSocket&&(hg=WebSocket);let Wl=(()=>{class n{constructor(t,r,o,u,c,p,y){this.connId=t,this.applicationId=o,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ed(this.connId),this.stats_=dg(r),this.connURL=n.connectionURL_(r,p,y,u),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,u){const c={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&PI.test(location.hostname)&&(c.r="f"),r&&(c.s=r),o&&(c.ls=o),u&&(c.ac=u),Zx(t,Cs,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yh.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const u={headers:{"User-Agent":`Firebase/5/${F_}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(u.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(u.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(u.proxy={origin:p}),this.mySock=new hg(this.connURL,[],u)}else this.mySock=new hg(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const u=o.message||o.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const u=o.message||o.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==hg&&!n.forceDisallow_}static previouslyFailed(){return Yh.isInMemoryStorage||!0===Yh.get("previous_websocket_failure")}markConnectionHealthy(){Yh.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,k.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=VE(r,16384);o.length>1&&this.sendString_(String(o.length));for(let u=0;u<o.length;u++)this.sendString_(o[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class fg{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nf,Wl]}initTransports_(e){const t=Wl&&Wl.isAvailable();let r=t&&!Wl.previouslyFailed();if(e.webSocketOnly&&(t||yi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Wl];else{const o=this.transports_=[];for(const u of fg.ALL_TRANSPORTS)u&&u.isAvailable()&&o.push(u)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class tu{constructor(e,t,r,o,u,c,p,y,b,S){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=y,this.onKill_=b,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ed("c:"+this.id+":"),this.transportManager_=new fg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=Id(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=bd("t",e),r=bd("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=bd("t",e),r=bd("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=bd("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?FE("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):FE("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&yi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Id(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Id(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pg{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class YI{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let u=0;u<o.length;u++)if(o[u].callback===t&&(!r||r===o[u].context))return void o.splice(u,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class B_ extends YI{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new B_}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function nn(){return new wn("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ql(n){return n.pieces_.length-n.pieceNum_}function Dn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new wn(n.pieces_,e)}function j_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function rf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function QI(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new wn(e,0)}function $n(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new wn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function ts(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return ts(Dn(n),Dn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function JI(n,e){const t=rf(n,0),r=rf(e,0);for(let o=0;o<t.length&&o<r.length;o++){const u=wd(t[o],r[o]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function zl(n,e){if(ql(n)!==ql(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function qs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ql(n)>ql(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class aR{constructor(e,t){this.errorPrefix_=t,this.parts_=rf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);XI(this)}}function XI(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Dd(n))}function Dd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class ow extends YI{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new ow}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const gg=1e3;let $_,Hu=(()=>{class n extends pg{constructor(t,r,o,u,c,p,y,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=y,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=Ed("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=gg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ow.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&B_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,k.Pz)(c)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[u]=o)}get(t){this.initConnection_();const r=new k.BH,o={p:t._path.toString(),q:t._queryObject},u={action:"g",request:o,onComplete:p=>{const y=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,y,!1,null),r.resolve(y)):r.reject(y)}};this.outstandingGets_.push(u),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||u!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,o,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const y={onComplete:u,hashFn:r,query:t,tag:o};this.listens.get(p).set(c,y),this.connected_&&this.sendListen_(y)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+o+" for "+u);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,y=>{const b=y.d,S=y.s;n.warnOnListenWarnings_(b,r),(this.listens.get(o)&&this.listens.get(o).get(u))===t&&(this.log_("listen response",y),"ok"!==S&&this.removeListen_(o,u),t.onComplete&&t.onComplete(S,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const o=(0,k.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();yi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+u),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,u)&&this.connected_&&this.sendUnlisten_(o,u,t._queryObject,r)}sendUnlisten_(t,r,o,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=o,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,u){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,o,u){this.putInternal("p",t,r,o,u)}merge(t,r,o,u){this.putInternal("m",t,r,o,u)}putInternal(t,r,o,u,c){this.initConnection_();const p={p:r,d:o};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):FE("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=gg,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=gg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=gg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let y=!1,b=null;const S=function(){b?b.close():(y=!0,u())};t.realtime_={close:S,sendRequest:function($){(0,k.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest($)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[$,K]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);y?zn("getToken() completed but was canceled"):(zn("getToken() completed. Creating connection."),t.authToken_=$&&$.accessToken,t.appCheckToken_=K&&K.token,b=new tu(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,u,ye=>{yi(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch($){t.log_("Failed to get token: "+$),y||(t.repoInfo_.nodeAdmin&&yi($),S())}}})()}interrupt(t){zn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){zn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=gg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>LE(c)).join("$"):"default";const u=this.removeListen_(t,o);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const o=new wn(t).toString();let u;if(this.listens.has(o)){const c=this.listens.get(o);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else u=void 0;return u}onAuthRevoked_(t,r){zn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){zn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+F_.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=B_.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class lw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt(Li,e),o=new Zt(Li,t);return 0!==this.compare(r,o)}minPost(){return Zt.MIN}}class eT extends lw{static get __EMPTY_NODE(){return $_}static set __EMPTY_NODE(e){$_=e}compare(e,t){return wd(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(fa,$_)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,$_)}toString(){return".key"}}const pa=new eT;class mg{constructor(e,t,r,o,u=null){this.isReverse_=o,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let _g,No=(()=>{class n{constructor(t,r,o,u,c){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=u?u:Is.EMPTY_NODE,this.right=null!=c?c:Is.EMPTY_NODE}copy(t,r,o,u,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const c=o(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return Is.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,u;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return Is.EMPTY_NODE;u=o.right.min_(),o=o.copy(u.key,u.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Is{constructor(e,t=Is.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Is(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,No.BLACK,null,null))}remove(e){return new Is(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,No.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new mg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new mg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new mg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new mg(this.root_,null,this.comparator_,!0,e)}}function cR(n,e){return wd(n.name,e.name)}function Sd(n,e){return wd(n,e)}Is.EMPTY_NODE=new class{copy(e,t,r,o,u){return this}insert(e,t,r){return new No(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const cw=function(n){return"number"==typeof n?"number:"+RI(n):"string:"+n},dw=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===_g||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===_g||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let hw,rT,iT,af=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),dw(this.priorityNode_)}static set __childrenNodeConstructor(t){hw=t}static get __childrenNodeConstructor(){return hw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Gt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,k.hu)(".priority"!==o||1===ql(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+cw(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?RI(this.value_):this.value_,this.lazyHash_=Hx(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,k.hu)(u>=0,"Unknown leaf type: "+r),(0,k.hu)(c>=0,"Unknown leaf type: "+o),u===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const kn=new class extends lw{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),u=r.compareTo(o);return 0===u?wd(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(fa,new af("[PRIORITY-POST]",iT))}makePost(e,t){const r=rT(e);return new Zt(t,new af("[PRIORITY-POST]",r))}toString(){return".priority"}},hR=Math.log(2);class fR{constructor(e){this.count=parseInt(Math.log(e+1)/hR,10),this.current_=this.count-1;const o=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fw=function(n,e,t,r){n.sort(e);const o=function(y,b){const S=b-y;let x,O;if(0===S)return null;if(1===S)return x=n[y],O=t?t(x):x,new No(O,x.node,No.BLACK,null,null);{const $=parseInt(S/2,10)+y,K=o(y,$),ye=o($+1,b);return x=n[$],O=t?t(x):x,new No(O,x.node,No.BLACK,K,ye)}},p=function(y){let b=null,S=null,x=n.length;const O=function(K,ye){const xe=x-K,gt=x;x-=K;const ht=o(xe+1,gt),et=n[xe],st=t?t(et):et;$(new No(st,et.node,ye,null,ht))},$=function(K){b?(b.left=K,b=K):(S=K,b=K)};for(let K=0;K<y.count;++K){const ye=y.nextBitIsOne(),xe=Math.pow(2,y.count-(K+1));ye?O(xe,No.BLACK):(O(xe,No.BLACK),O(xe,No.RED))}return S}(new fR(n.length));return new Is(r||e,p)};let oT;const Kl={};class Gu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Kl&&kn,"ChildrenNode.ts has not been loaded"),oT=oT||new Gu({".priority":Kl},{".priority":kn}),oT}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Is?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==pa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const u=t.getIterator(Zt.Wrap);let p,c=u.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=o?fw(r,e.getCompare()):Kl;const y=e.toString(),b=Object.assign({},this.indexSet_);b[y]=e;const S=Object.assign({},this.indexes_);return S[y]=p,new Gu(S,b)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(o,u)=>{const c=(0,k.DV)(this.indexSet_,u);if((0,k.hu)(c,"Missing index implementation for "+u),o===Kl){if(c.isDefinedOn(e.node)){const p=[],y=t.getIterator(Zt.Wrap);let b=y.getNext();for(;b;)b.name!==e.name&&p.push(b),b=y.getNext();return p.push(e),fw(p,c.getCompare())}return Kl}{const p=t.get(e.name);let y=o;return p&&(y=y.remove(new Zt(e.name,p))),y.insert(e,e.node)}});return new Gu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,o=>{if(o===Kl)return o;{const u=t.get(e.name);return u?o.remove(new Zt(e.name,u)):o}});return new Gu(r,this.indexSet_)}}let uf,Ut=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&dw(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uf||(uf=new n(new Is(Sd),null,Gu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?uf:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Dn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Zt(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const p=u.isEmpty()?uf:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const o=Gt(t);if(null===o)return r;{(0,k.hu)(".priority"!==Gt(t)||1===ql(t),".priority must be the last token in a path");const u=this.getImmediateChild(o).updateChild(Dn(t),r);return this.updateImmediateChild(o,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,u=0,c=!0;if(this.forEachChild(kn,(p,y)=>{r[p]=y.val(t),o++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*o){const p=[];for(const y in r)p[y]=r[y];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+cw(this.getPriority().val())+":"),this.forEachChild(kn,(r,o)=>{const u=o.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":Hx(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const u=this.resolveIndex_(o);if(u){const c=u.getPredecessorKey(new Zt(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,Zt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ns?-1:0}withIndex(t){if(t===pa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===pa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(kn),u=r.getIterator(kn);let c=o.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=o.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===pa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ns=new class extends Ut{constructor(){super(new Is(Sd),Ut.EMPTY_NODE,Gu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ut.EMPTY_NODE}isEmpty(){return!1}};function Er(n,e=null){if(null===n)return Ut.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new af(n,Er(e));if(n instanceof Array){let t=Ut.EMPTY_NODE;return ai(n,(r,o)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const u=Er(o);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(Er(e))}{const t=[];let r=!1;if(ai(n,(c,p)=>{if("."!==c.substring(0,1)){const y=Er(p);y.isEmpty()||(r=r||!y.getPriority().isEmpty(),t.push(new Zt(c,y)))}}),0===t.length)return Ut.EMPTY_NODE;const u=fw(t,cR,c=>c.name,Sd);if(r){const c=fw(t,kn.getCompare());return new Ut(u,Er(e),new Gu({".priority":c},{".priority":kn}))}return new Ut(u,Er(e),Gu.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(Li,Ut.EMPTY_NODE)},MAX:{value:new Zt(fa,ns)}}),eT.__EMPTY_NODE=Ut.EMPTY_NODE,af.__childrenNodeConstructor=Ut,_g=ns,iT=ns,function(n){rT=n}(Er);class aT extends lw{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Jt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),u=r.compareTo(o);return 0===u?wd(e.name,t.name):u}makePost(e,t){const r=Er(e),o=Ut.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,o)}maxPost(){const e=Ut.EMPTY_NODE.updateChild(this.indexPath_,ns);return new Zt(fa,e)}toString(){return rf(this.indexPath_,0).join("/")}}const H_=new class extends lw{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?wd(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=Er(e);return new Zt(t,r)}toString(){return".value"}},Ad="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mw=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const u=new Array(8);for(o=7;o>=0;o--)u[o]=Ad.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=Ad.charAt(e[o]);return(0,k.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),lT=function(n){if(n===""+Hl)return"-";const e=V_(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return fa;const u=Ad.charAt(Ad.indexOf(t[r])+1);return t[r]=u,t.slice(0,r+1).join("")},G_=function(n){if(n===""+tf)return Li;const e=V_(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Hl:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ad.charAt(Ad.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function cT(n){return{type:"value",snapshotNode:n}}function lf(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function yg(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function vg(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class _w{constructor(e){this.index_=e}updateChild(e,t,r,o,u,c){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(yg(t,p)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(lf(t,r)):c.trackChildChange(vg(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(kn,(o,u)=>{t.hasChild(o)||r.trackChildChange(yg(o,u))}),t.isLeafNode()||t.forEachChild(kn,(o,u)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(u)||r.trackChildChange(vg(o,u,c))}else r.trackChildChange(lf(o,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ut.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Zl{constructor(e){this.indexedFilter_=new _w(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Zl.getStartPost_(e),this.endPost_=Zl.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,u,c){return this.matches(new Zt(t,r))||(r=Ut.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ut.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Ut.EMPTY_NODE);const u=this;return t.forEachChild(kn,(c,p)=>{u.matches(new Zt(c,p))||(o=o.updateImmediateChild(c,Ut.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class cf{constructor(e){this.rangedFilter_=new Zl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,u,c){return this.rangedFilter_.matches(new Zt(t,r))||(r=Ut.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Ut.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;o=Ut.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();let y;if(y=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!y)break;o=o.updateImmediateChild(p.name,p.node),c++}}else{let u,c,p,y;if(o=t.withIndex(this.index_),o=o.updatePriority(Ut.EMPTY_NODE),this.reverse_){y=o.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();p=(O,$)=>x($,O)}else y=o.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let b=0,S=!1;for(;y.hasNext();){const x=y.getNext();!S&&p(u,x)<=0&&(S=!0),S&&b<this.limit_&&p(x,c)<=0?b++:o=o.updateImmediateChild(x.name,Ut.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,u){let c;if(this.reverse_){const x=this.index_.getCompare();c=(O,$)=>x($,O)}else c=this.index_.getCompare();const p=e;(0,k.hu)(p.numChildren()===this.limit_,"");const y=new Zt(t,r),b=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),S=this.rangedFilter_.matches(y);if(p.hasChild(t)){const x=p.getImmediateChild(t);let O=o.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=O&&(O.name===t||p.hasChild(O.name));)O=o.getChildAfterChild(this.index_,O,this.reverse_);const $=null==O?1:c(O,y);if(S&&!r.isEmpty()&&$>=0)return null!=u&&u.trackChildChange(vg(t,r,x)),p.updateImmediateChild(t,r);{null!=u&&u.trackChildChange(yg(t,x));const ye=p.updateImmediateChild(t,Ut.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=u&&u.trackChildChange(lf(O.name,O.node)),ye.updateImmediateChild(O.name,O.node)):ye}}return r.isEmpty()?e:S&&c(b,y)>=0?(null!=u&&(u.trackChildChange(yg(b.name,b.node)),u.trackChildChange(lf(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(b.name,Ut.EMPTY_NODE)):e}}class Eg{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Li}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kn}copy(){const e=new Eg;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function yw(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Mo(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Qr(n,e){const t=n.copy();return t.index_=e,t}function Yl(n){const e={};if(n.isDefault())return e;let t;return n.index_===kn?t="$priority":n.index_===H_?t="$value":n.index_===pa?t="$key":((0,k.hu)(n.index_ instanceof aT,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Cg(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==kn&&(e.i=n.index_.toString()),e}class rs extends pg{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=Ed("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=rs.getListenId_(e,r),p={};this.listens_[c]=p;const y=Yl(e._queryParams);this.restRequest_(u+".json",y,(b,S)=>{let x=S;if(404===b&&(x=null,b=null),null===b&&this.onDataUpdate_(u,x,!1,r),(0,k.DV)(this.listens_,c)===p){let O;O=b?401===b?"permission_denied":"rest_error:"+b:"ok",o(O,null)}})}unlisten(e,t){const r=rs.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Yl(e._queryParams),r=e._path.toString(),o=new k.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,u])=>{o&&o.accessToken&&(t.auth=o.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=(0,k.cI)(p.responseText)}catch(b){yi("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,y)}else 401!==p.status&&404!==p.status&&yi("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class Ew{constructor(){this.rootNode_=Ut.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Wu(){return{value:null,children:new Map}}function ma(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,Wu()),ma(n.children.get(r),e=Dn(e),t)}}function Ql(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(kn,(r,o)=>{ma(n,new wn(r),o)}),Ql(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Dn(e),n.children.has(t)&&Ql(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Jl(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{Jl(o,new wn(e.toString()+"/"+r),t)})}class hf{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ai(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class dT{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hf(e);const r=1e4+2e4*Math.random();Id(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ai(e,(o,u)=>{u>0&&(0,k.r3)(this.statsToReport_,o)&&(t[o]=u,r=!0)}),r&&this.server_.reportStats(t),Id(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zs=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(zs||(zs={})),zs))();function z_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ig{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=zs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new wn(e));return new Ig(nn(),t,this.revert)}}return(0,k.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new Ig(Dn(this.path),this.affectedTree,this.revert)}}class gf{constructor(e,t){this.source=e,this.path=t,this.type=zs.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new gf(this.source,nn()):new gf(this.source,Dn(this.path))}}class Xl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=zs.OVERWRITE}operationForChild(e){return Jt(this.path)?new Xl(this.source,nn(),this.snap.getImmediateChild(e)):new Xl(this.source,Dn(this.path),this.snap)}}class Rd{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=zs.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new wn(e));return t.isEmpty()?null:t.value?new Xl(this.source,nn(),t.value):new Rd(this.source,nn(),t)}return(0,k.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Rd(this.source,Dn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ec{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class hT{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Tg(n,e,t,r,o,u){const c=r.filter(p=>p.type===t);c.sort((p,y)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),o=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,y)),c.forEach(p=>{const y=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);o.forEach(b=>{b.respondsTo(p.type)&&e.push(b.createEvent(y,n.query_))})})}function ww(n,e){return{eventCache:n,serverCache:e}}function Dg(n,e,t,r){return ww(new ec(e,t,r),n.serverCache)}function bw(n,e,t,r){return ww(n.eventCache,new ec(e,t,r))}function K_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function tc(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Cw;class Kn{constructor(e,t=(()=>(Cw||(Cw=new Is(i1)),Cw))()){this.value=e,this.children=t}static fromObject(e){let t=new Kn(null);return ai(e,(r,o)=>{t=t.set(new wn(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:nn(),value:this.value};if(Jt(e))return null;{const r=Gt(e),o=this.children.get(r);if(null!==o){const u=o.findRootMostMatchingPathAndValue(Dn(e),t);return null!=u?{path:$n(new wn(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Dn(e)):new Kn(null)}}set(e,t){if(Jt(e))return new Kn(t,this.children);{const r=Gt(e),u=(this.children.get(r)||new Kn(null)).set(Dn(e),t),c=this.children.insert(r,u);return new Kn(this.value,c)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Kn(null):new Kn(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const o=r.remove(Dn(e));let u;return u=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&u.isEmpty()?new Kn(null):new Kn(this.value,u)}return this}}get(e){if(Jt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Dn(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=Gt(e),u=(this.children.get(r)||new Kn(null)).setTree(Dn(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Kn(this.value,c)}}fold(e){return this.fold_(nn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,u)=>{r[o]=u.fold_($n(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,nn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(Jt(e))return null;{const u=Gt(e),c=this.children.get(u);return c?c.findOnPath_(Dn(e),$n(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,nn(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const o=Gt(e),u=this.children.get(o);return u?u.foreachOnPath_(Dn(e),$n(t,o),r):new Kn(null)}}foreach(e){this.foreach_(nn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_($n(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class _a{constructor(e){this.writeTree_=e}static empty(){return new _a(new Kn(null))}}function mf(n,e,t){if(Jt(e))return new _a(new Kn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let u=r.value;const c=ts(o,e);return u=u.updateChild(c,t),new _a(n.writeTree_.set(o,u))}{const o=new Kn(t),u=n.writeTree_.setTree(e,o);return new _a(u)}}}function pT(n,e,t){let r=n;return ai(t,(o,u)=>{r=mf(r,$n(e,o),u)}),r}function ER(n,e){if(Jt(e))return _a.empty();{const t=n.writeTree_.setTree(e,new Kn(null));return new _a(t)}}function gT(n,e){return null!=Nd(n,e)}function Nd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ts(t.path,e)):null}function wR(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(kn,(r,o)=>{e.push(new Zt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Zt(r,o.value))}),e}function nc(n,e){if(Jt(e))return n;{const t=Nd(n,e);return new _a(null!=t?new Kn(t):n.writeTree_.subtree(e))}}function Iw(n){return n.writeTree_.isEmpty()}function rc(n,e){return Z_(nn(),n.writeTree_,e)}function Z_(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,u)=>{".priority"===o?((0,k.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=Z_($n(n,o),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild($n(n,".priority"),r)),t}}function Y_(n,e){return Dw(e,n)}function mT(n,e){if(n.snap)return qs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&qs($n(n.path,t),e))return!0;return!1}function CR(n){return n.visible}function Md(n,e,t){let r=_a.empty();for(let o=0;o<n.length;++o){const u=n[o];if(e(u)){const c=u.path;let p;if(u.snap)qs(t,c)?(p=ts(t,c),r=mf(r,p,u.snap)):qs(c,t)&&(p=ts(c,t),r=mf(r,nn(),u.snap.getChild(p)));else{if(!u.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(qs(t,c))p=ts(t,c),r=pT(r,p,u.children);else if(qs(c,t))if(p=ts(c,t),Jt(p))r=pT(r,nn(),u.children);else{const y=(0,k.DV)(u.children,Gt(p));if(y){const b=y.getChild(Dn(p));r=mf(r,nn(),b)}}}}}return r}function _T(n,e,t,r,o){if(r||o){const u=nc(n.visibleWrites,e);return!o&&Iw(u)?t:o||null!=t||gT(u,nn())?rc(Md(n.allWrites,function(b){return(b.visible||o)&&(!r||!~r.indexOf(b.writeId))&&(qs(b.path,e)||qs(e,b.path))},e),t||Ut.EMPTY_NODE):null}{const u=Nd(n.visibleWrites,e);if(null!=u)return u;{const c=nc(n.visibleWrites,e);return Iw(c)?t:null!=t||gT(c,nn())?rc(c,t||Ut.EMPTY_NODE):null}}}function J_(n,e,t,r){return _T(n.writeTree,n.treePath,e,t,r)}function Tw(n,e){return function(n,e,t){let r=Ut.EMPTY_NODE;const o=Nd(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(kn,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=nc(n.visibleWrites,e);return t.forEachChild(kn,(c,p)=>{const y=rc(nc(u,new wn(c)),p);r=r.updateImmediateChild(c,y)}),wR(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return wR(nc(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function wT(n,e,t,r){return function(n,e,t,r,o){(0,k.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const u=$n(e,t);if(gT(n.visibleWrites,u))return null;{const c=nc(n.visibleWrites,u);return Iw(c)?o.getChild(t):rc(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function X_(n,e){return function(n,e){return Nd(n.visibleWrites,e)}(n.writeTree,$n(n.treePath,e))}function ey(n,e,t){return function(n,e,t,r){const o=$n(e,t),u=Nd(n.visibleWrites,o);return null!=u?u:r.isCompleteForChild(t)?rc(nc(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function bT(n,e){return Dw($n(n.treePath,e),n.writeTree)}function Dw(n,e){return{treePath:n,writeTree:e}}class CT{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const u=o.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,vg(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,yg(r,o.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,lf(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,vg(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const SR=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Sg{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ec(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ey(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:tc(this.viewCache_),u=function(n,e,t,r,o,u){return function(n,e,t,r,o,u,c){let p;const y=nc(n.visibleWrites,e),b=Nd(y,nn());if(null!=b)p=b;else{if(null==t)return[];p=rc(y,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const S=[],x=c.getCompare(),O=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let $=O.getNext();for(;$&&S.length<o;)0!==x($,r)&&S.push($),$=O.getNext();return S}}(n.writeTree,n.treePath,e,t,r,o,u)}(this.writes_,o,t,1,r,e);return 0===u.length?null:u[0]}}function ty(n,e,t,r,o,u){const c=e.eventCache;if(null!=X_(r,t))return e;{let p,y;if(Jt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=tc(e),x=Tw(r,b instanceof Ut?b:Ut.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),x,u)}else{const b=J_(r,tc(e));p=n.filter.updateFullNode(e.eventCache.getNode(),b,u)}else{const b=Gt(t);if(".priority"===b){(0,k.hu)(1===ql(t),"Can't have a priority with additional path components");const S=c.getNode();y=e.serverCache.getNode();const x=wT(r,t,S,y);p=null!=x?n.filter.updatePriority(S,x):c.getNode()}else{const S=Dn(t);let x;if(c.isCompleteForChild(b)){y=e.serverCache.getNode();const O=wT(r,t,c.getNode(),y);x=null!=O?c.getNode().getImmediateChild(b).updateChild(S,O):c.getNode().getImmediateChild(b)}else x=ey(r,b,e.serverCache);p=null!=x?n.filter.updateChild(c.getNode(),b,x,S,o,u):c.getNode()}}return Dg(e,p,c.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function _f(n,e,t,r,o,u,c,p){const y=e.serverCache;let b;const S=c?n.filter:n.filter.getIndexedFilter();if(Jt(t))b=S.updateFullNode(y.getNode(),r,null);else if(S.filtersNodes()&&!y.isFiltered()){const $=y.getNode().updateChild(t,r);b=S.updateFullNode(y.getNode(),$,null)}else{const $=Gt(t);if(!y.isCompleteForPath(t)&&ql(t)>1)return e;const K=Dn(t),xe=y.getNode().getImmediateChild($).updateChild(K,r);b=".priority"===$?S.updatePriority(y.getNode(),xe):S.updateChild(y.getNode(),$,xe,K,SR,null)}const x=bw(e,b,y.isFullyInitialized()||Jt(t),S.filtersNodes());return ty(n,x,t,o,new Sg(o,x,u),p)}function Aw(n,e,t,r,o,u,c){const p=e.eventCache;let y,b;const S=new Sg(o,e,u);if(Jt(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,c),y=Dg(e,b,!0,n.filter.filtersNodes());else{const x=Gt(t);if(".priority"===x)b=n.filter.updatePriority(e.eventCache.getNode(),r),y=Dg(e,b,p.isFullyInitialized(),p.isFiltered());else{const O=Dn(t),$=p.getNode().getImmediateChild(x);let K;if(Jt(O))K=r;else{const ye=S.getCompleteChild(x);K=null!=ye?".priority"===j_(O)&&ye.getChild(QI(O)).isEmpty()?ye:ye.updateChild(O,r):Ut.EMPTY_NODE}y=$.equals(K)?e:Dg(e,n.filter.updateChild(p.getNode(),x,K,O,S,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return y}function ny(n,e){return n.eventCache.isCompleteForChild(e)}function Rw(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function IT(n,e,t,r,o,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,y=e;b=Jt(t)?r:new Kn(null).setTree(t,r);const S=e.serverCache.getNode();return b.children.inorderTraversal((x,O)=>{if(S.hasChild(x)){const K=Rw(0,e.serverCache.getNode().getImmediateChild(x),O);y=_f(n,y,new wn(x),K,o,u,c,p)}}),b.children.inorderTraversal((x,O)=>{const $=!e.serverCache.isCompleteForChild(x)&&void 0===O.value;if(!S.hasChild(x)&&!$){const ye=Rw(0,e.serverCache.getNode().getImmediateChild(x),O);y=_f(n,y,new wn(x),ye,o,u,c,p)}}),y}class NR{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new _w(r.getIndex()),u=function(n){return n.loadsAllData()?new _w(n.getIndex()):n.hasLimit()?new cf(n):new Zl(n)}(r);this.processor_=function(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,y=o.updateFullNode(Ut.EMPTY_NODE,c.getNode(),null),b=u.updateFullNode(Ut.EMPTY_NODE,p.getNode(),null),S=new ec(y,c.isFullyInitialized(),o.filtersNodes()),x=new ec(b,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=ww(x,S),this.eventGenerator_=new hT(this.query_)}get query(){return this.query_}}function AT(n,e){const t=tc(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function ry(n){return 0===n.eventRegistrations_.length}function Pw(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(u+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function xT(n,e,t,r){e.type===zs.MERGE&&null!==e.source.queryId&&((0,k.hu)(tc(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(K_(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,u=function(n,e,t,r,o){const u=new CT;let c,p;if(t.type===zs.OVERWRITE){const b=t;b.source.fromUser?c=Aw(n,e,b.path,b.snap,r,o,u):((0,k.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered()&&!Jt(b.path),c=_f(n,e,b.path,b.snap,r,o,p,u))}else if(t.type===zs.MERGE){const b=t;b.source.fromUser?c=function(n,e,t,r,o,u,c){let p=e;return r.foreach((y,b)=>{const S=$n(t,y);ny(e,Gt(S))&&(p=Aw(n,p,S,b,o,u,c))}),r.foreach((y,b)=>{const S=$n(t,y);ny(e,Gt(S))||(p=Aw(n,p,S,b,o,u,c))}),p}(n,e,b.path,b.children,r,o,u):((0,k.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered(),c=IT(n,e,b.path,b.children,r,o,p,u))}else if(t.type===zs.ACK_USER_WRITE){const b=t;c=b.revert?function(n,e,t,r,o,u){let c;if(null!=X_(r,t))return e;{const p=new Sg(r,e,o),y=e.eventCache.getNode();let b;if(Jt(t)||".priority"===Gt(t)){let S;if(e.serverCache.isFullyInitialized())S=J_(r,tc(e));else{const x=e.serverCache.getNode();(0,k.hu)(x instanceof Ut,"serverChildren would be complete if leaf node"),S=Tw(r,x)}S=S,b=n.filter.updateFullNode(y,S,u)}else{const S=Gt(t);let x=ey(r,S,e.serverCache);null==x&&e.serverCache.isCompleteForChild(S)&&(x=y.getImmediateChild(S)),b=null!=x?n.filter.updateChild(y,S,x,Dn(t),p,u):e.eventCache.getNode().hasChild(S)?n.filter.updateChild(y,S,Ut.EMPTY_NODE,Dn(t),p,u):y,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=J_(r,tc(e)),c.isLeafNode()&&(b=n.filter.updateFullNode(b,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=X_(r,nn()),Dg(e,b,c,n.filter.filtersNodes())}}(n,e,b.path,r,o,u):function(n,e,t,r,o,u,c){if(null!=X_(o,t))return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(null!=r.value){if(Jt(t)&&y.isFullyInitialized()||y.isCompleteForPath(t))return _f(n,e,t,y.getNode().getChild(t),o,u,p,c);if(Jt(t)){let b=new Kn(null);return y.getNode().forEachChild(pa,(S,x)=>{b=b.set(new wn(S),x)}),IT(n,e,t,b,o,u,p,c)}return e}{let b=new Kn(null);return r.foreach((S,x)=>{const O=$n(t,S);y.isCompleteForPath(O)&&(b=b.set(S,y.getNode().getChild(O)))}),IT(n,e,t,b,o,u,p,c)}}(n,e,b.path,b.affectedTree,r,o,u)}else{if(t.type!==zs.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);c=function(n,e,t,r,o){const u=e.serverCache;return ty(n,bw(e,u.getNode(),u.isFullyInitialized()||Jt(t),u.isFiltered()),t,r,SR,o)}(n,e,t.path,r,u)}const y=u.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=K_(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(cT(K_(e)))}}(e,c,y),{viewCache:c,changes:y}}(n.processor_,o,e,t,r);return function(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,k.hu)(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,Ow(n,u.changes,u.viewCache.eventCache.getNode(),null)}function Ow(n,e,t,r){return function(n,e,t,r){const o=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Tg(n,o,"child_removed",e,r,t),Tg(n,o,"child_added",e,r,t),Tg(n,o,"child_moved",u,r,t),Tg(n,o,"child_changed",e,r,t),Tg(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let yf,Uw;class kw{constructor(){this.views=new Map}}function iy(n,e,t,r){const o=e.source.queryId;if(null!==o){const u=n.views.get(o);return(0,k.hu)(null!=u,"SyncTree gave us an op for an invalid query."),xT(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(xT(c,e,t,r));return u}}function sy(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let p=J_(t,o?r:null),y=!1;p?y=!0:r instanceof Ut?(p=Tw(t,r),y=!1):(p=Ut.EMPTY_NODE,y=!1);const b=ww(new ec(p,y,!1),new ec(r,o,!1));return new NR(e,b)}return c}function Fw(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function qu(n,e){let t=null;for(const r of n.views.values())t=t||AT(r,e);return t}function Lw(n,e){return e._queryParams.loadsAllData()?xg(n):n.views.get(e._queryIdentifier)}function Vw(n,e){return null!=Lw(n,e)}function zu(n){return null!=xg(n)}function xg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let PT=1;class OT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Kn(null),this.pendingWriteTree_={visibleWrites:_a.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ar(n,e,t,r,o){return function(n,e,t,r,o){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=mf(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Pd(n,new Xl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ic(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,u=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&mT(p,r.path)?o=!1:qs(r.path,p.path)&&(u=!0)),c--}return!!o&&(u?(function(n){n.visibleWrites=Md(n.allWrites,CR,nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=ER(n.visibleWrites,r.path):ai(r.children,y=>{n.visibleWrites=ER(n.visibleWrites,$n(r.path,y))}),!0))}(n.pendingWriteTree_,e)){let u=new Kn(null);return null!=r.snap?u=u.set(nn(),!0):ai(r.children,c=>{u=u.set(new wn(c),!0)}),Pd(n,new Ig(r.path,u,t))}return[]}function Rg(n,e,t){return Pd(n,new Xl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function oy(n,e,t,r){const o=e._path,u=n.syncPointTree_.get(o);let c=[];if(u&&("default"===e._queryIdentifier||Vw(u,e))){const p=function(n,e,t,r){const o=e._queryIdentifier,u=[];let c=[];const p=zu(n);if("default"===o)for(const[y,b]of n.views.entries())c=c.concat(Pw(b,t,r)),ry(b)&&(n.views.delete(y),b.query._queryParams.loadsAllData()||u.push(b.query));else{const y=n.views.get(o);y&&(c=c.concat(Pw(y,t,r)),ry(y)&&(n.views.delete(o),y.query._queryParams.loadsAllData()||u.push(y.query)))}return p&&!zu(n)&&u.push(new((0,k.hu)(yf,"Reference.ts has not been loaded"),yf)(e._repo,e._path)),{removed:u,events:c}}(u,e,t,r);(function(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const y=p.removed;c=p.events;const b=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(o,(x,O)=>zu(O));if(b&&!S){const x=n.syncPointTree_.subtree(o);if(!x.isEmpty()){const O=function(n){return n.fold((e,t,r)=>{if(t&&zu(t))return[xg(t)];{let o=[];return t&&(o=Fw(t)),ai(r,(u,c)=>{o=o.concat(c)}),o}})}(x);for(let $=0;$<O.length;++$){const K=O[$],ye=K.query,xe=ay(n,K);n.listenProvider_.startListening(Ef(ye),Ks(n,ye),xe.hashFn,xe.onComplete)}}}if(!S&&y.length>0&&!r)if(b){const x=null;n.listenProvider_.stopListening(Ef(e),x)}else y.forEach(x=>{const O=n.queryToTagMap.get(uy(x));n.listenProvider_.stopListening(Ef(x),O)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=uy(r),u=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(u)}}}(n,y)}return c}function VT(n,e,t){const r=e._path;let o=null,u=!1;n.syncPointTree_.foreachOnPath(r,(x,O)=>{const $=ts(x,r);o=o||qu(O,$),u=u||zu(O)});let p,c=n.syncPointTree_.get(r);c?(u=u||zu(c),o=o||qu(c,nn())):(c=new kw,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=o?p=!0:(p=!1,o=Ut.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,$)=>{const K=qu($,nn());K&&(o=o.updateImmediateChild(O,K))}));const y=Vw(c,e);if(!y&&!e._queryParams.loadsAllData()){const x=uy(e);(0,k.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const O=PT++;n.queryToTagMap.set(x,O),n.tagToQueryMap.set(O,x)}let S=function(n,e,t,r,o,u){const c=sy(n,e,r,o,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function(n,e){n.eventRegistrations_.push(e)}(c,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(kn,(u,c)=>{r.push(lf(u,c))}),t.isFullyInitialized()&&r.push(cT(t.getNode())),Ow(n,r,t.getNode(),e)}(c,t)}(c,e,t,Y_(n.pendingWriteTree_,r),o,p);if(!y&&!u){const x=Lw(c,e);S=S.concat(function(n,e,t){const r=e._path,o=Ks(n,e),u=ay(n,t),c=n.listenProvider_.startListening(Ef(e),o,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(o)(0,k.hu)(!zu(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((b,S,x)=>{if(!Jt(b)&&S&&zu(S))return[xg(S).query];{let O=[];return S&&(O=O.concat(Fw(S).map($=>$.query))),ai(x,($,K)=>{O=O.concat(K)}),O}});for(let b=0;b<y.length;++b){const S=y[b];n.listenProvider_.stopListening(Ef(S),Ks(n,S))}}return c}(n,e,x))}return S}function Ng(n,e,t){const o=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const b=qu(p,ts(c,e));if(b)return b});return _T(o,e,u,t,!0)}function Pd(n,e){return BR(e,n.syncPointTree_,null,Y_(n.pendingWriteTree_,nn()))}function BR(n,e,t,r){if(Jt(n.path))return Bw(n,e,t,r);{const o=e.get(nn());null==t&&null!=o&&(t=qu(o,nn()));let u=[];const c=Gt(n.path),p=n.operationForChild(c),y=e.children.get(c);if(y&&p){const b=t?t.getImmediateChild(c):null,S=bT(r,c);u=u.concat(BR(p,y,b,S))}return o&&(u=u.concat(iy(o,n,r,t))),u}}function Bw(n,e,t,r){const o=e.get(nn());null==t&&null!=o&&(t=qu(o,nn()));let u=[];return e.children.inorderTraversal((c,p)=>{const y=t?t.getImmediateChild(c):null,b=bT(r,c),S=n.operationForChild(c);S&&(u=u.concat(Bw(S,p,y,b)))}),o&&(u=u.concat(iy(o,n,r,t))),u}function ay(n,e){const t=e.query,r=Ks(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Ut.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=jw(n,t);if(r){const o=Po(r),u=o.path,c=o.queryId,p=ts(u,e);return Zs(n,u,new gf(z_(c),p))}return[]}(n,t._path,r):function(n,e){return Pd(n,new gf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return oy(n,t,null,u)}}}}function Ks(n,e){const t=uy(e);return n.queryToTagMap.get(t)}function uy(n){return n._path.toString()+"$"+n._queryIdentifier}function jw(n,e){return n.tagToQueryMap.get(e)}function Po(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new wn(n.substr(0,e))}}function Zs(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),iy(r,t,Y_(n.pendingWriteTree_,e),null)}function Ef(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,k.hu)(Uw,"Reference.ts has not been loaded"),Uw)(n._repo,n._path):n}class $w{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new $w(t)}node(){return this.node_}}class Hw{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=$n(this.path_,e);return new Hw(this.syncTree_,t)}node(){return Ng(this.syncTree_,this.path_)}}const wf=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?HR(n[".sv"],e,t):"object"==typeof n[".sv"]?BT(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},HR=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,k.hu)(!1,"Unexpected server value: "+n)}},BT=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,k.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},jT=function(n,e,t,r){return cy(e,new Hw(t,n),r)},ly=function(n,e,t){return cy(n,new $w(e),t)};function cy(n,e,t){const r=n.getPriority().val(),o=wf(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=wf(c.getValue(),e,t);return p!==c.getValue()||o!==c.getPriority().val()?new af(p,Er(o)):n}{const c=n;return u=c,o!==c.getPriority().val()&&(u=u.updatePriority(new af(o))),c.forEachChild(kn,(p,y)=>{const b=cy(y,e.getImmediateChild(p),t);b!==y&&(u=u.updateImmediateChild(p,b))}),u}}class bf{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function dy(n,e){let t=e instanceof wn?e:new wn(e),r=n,o=Gt(t);for(;null!==o;){const u=(0,k.DV)(r.node.children,o)||{children:{},childCount:0};r=new bf(o,r,u),t=Dn(t),o=Gt(t)}return r}function sc(n){return n.node.value}function hy(n,e){n.node.value=e,gy(n)}function fy(n){return n.node.childCount>0}function Cf(n,e){ai(n.node.children,(t,r)=>{e(new bf(t,n,r))})}function Ww(n,e,t,r){t&&!r&&e(n),Cf(n,o=>{Ww(o,e,!0,r)}),t&&r&&e(n)}function If(n){return new wn(null===n.parent?n.name:If(n.parent)+"/"+n.name)}function gy(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===sc(n)&&!fy(n)}(t),o=(0,k.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,gy(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,gy(n))}(n.parent,n.name,n)}const GT=/[\[\].#$\/\u0000-\u001F\u007F]/,WT=/[\[\].#$\u0000-\u001F\u007F]/,qw=10485760,my=function(n){return"string"==typeof n&&0!==n.length&&!GT.test(n)},qT=function(n){return"string"==typeof n&&0!==n.length&&!WT.test(n)},Mg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Jh(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},ru=function(n,e,t,r){r&&void 0===e||Pg((0,k.gK)(n,"value"),e,t)},Pg=function(n,e,t){const r=t instanceof wn?new aR(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Dd(r));if("function"==typeof e)throw new Error(n+"contains a function "+Dd(r)+" with contents = "+e.toString());if(Jh(e))throw new Error(n+"contains "+e.toString()+" "+Dd(r));if("string"==typeof e&&e.length>qw/3&&(0,k.ug)(e)>qw)throw new Error(n+"contains a string greater than "+qw+" utf8 bytes "+Dd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,u=!1;if(ai(e,(c,p)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!my(c)))throw new Error(n+" contains an invalid key ("+c+") "+Dd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),XI(n)})(r,c),Pg(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&u)throw new Error(n+' contains ".value" child '+Dd(r)+" in addition to actual children.")}},zT=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const u=[];ai(e,(c,p)=>{const y=new wn(c);if(Pg(o,p,$n(t,y)),".priority"===j_(y)&&!Mg(p))throw new Error(o+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(y)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=rf(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!my(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(JI);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&qs(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,u)},zw=function(n,e,t){if(!t||void 0!==e){if(Jh(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Mg(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Og=function(n,e,t,r){if(!(r&&void 0===t||my(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kg=function(n,e,t,r){if(!(r&&void 0===t||qT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Oo=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},KT=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!my(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),qT(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function _y(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],u=o.getPath();null!==t&&!zl(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(o)}t&&n.eventLists_.push(t)}function Kw(n,e,t){_y(n,t),Zw(n,r=>zl(r,e))}function Ys(n,e,t){_y(n,t),Zw(n,r=>qs(r,e)||qs(e,r))}function Zw(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(ZT(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ZT(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Qh&&zn("event: "+t.toString()),Cd(r)}}}const Yw="repo_interrupt";class QT{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wu(),this.transactionQueueTree_=new bf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qw(n){const t=n.infoData_.getNode(new wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Tf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Qw(n)})}function yy(n,e,t,r,o){n.dataUpdateCount++;const u=new wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const y=(0,k.UI)(t,b=>Er(b));c=function(n,e,t,r){const o=jw(n,r);if(o){const u=Po(o),c=u.path,p=u.queryId,y=ts(c,e),b=Kn.fromObject(t);return Zs(n,c,new Rd(z_(p),y,b))}return[]}(n.serverSyncTree_,u,y,o)}else{const y=Er(t);c=function(n,e,t,r){const o=jw(n,r);if(null!=o){const u=Po(o),c=u.path,p=u.queryId,y=ts(c,e);return Zs(n,c,new Xl(z_(p),y,t))}return[]}(n.serverSyncTree_,u,y,o)}else if(r){const y=(0,k.UI)(t,b=>Er(b));c=function(n,e,t){const r=Kn.fromObject(t);return Pd(n,new Rd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,y)}else{const y=Er(t);c=Rg(n.serverSyncTree_,u,y)}let p=u;c.length>0&&(p=oc(n,u)),Ys(n.eventQueue_,p,c)}function Jw(n,e){Xw(n,"connected",e),!1===e&&function(n){Sf(n,"onDisconnectEvents");const e=Tf(n),t=Wu();Jl(n.onDisconnect_,nn(),(o,u)=>{const c=jT(o,u,n.serverSyncTree_,e);ma(t,o,c)});let r=[];Jl(t,nn(),(o,u)=>{r=r.concat(Rg(n.serverSyncTree_,o,u));const c=u0(n,o);oc(n,c)}),n.onDisconnect_=Wu(),Ys(n.eventQueue_,nn(),r)}(n)}function Xw(n,e,t){const r=new wn("/.info/"+e),o=Er(t);n.infoData_.updateSnapshot(r,o);const u=Rg(n.infoSyncTree_,r,o);Ys(n.eventQueue_,r,u)}function vy(n){return n.nextWriteId_++}function XT(n,e,t,r,o){Sf(n,"set",{path:e.toString(),value:t,priority:r});const u=Tf(n),c=Er(t,r),p=Ng(n.serverSyncTree_,e),y=ly(c,p,u),b=vy(n),S=Ar(n.serverSyncTree_,e,y,b,!0);_y(n.eventQueue_,S),n.server_.put(e.toString(),c.val(!0),(O,$)=>{const K="ok"===O;K||yi("set at "+e+" failed: "+O);const ye=ic(n.serverSyncTree_,b,!K);Ys(n.eventQueue_,e,ye),va(0,o,O,$)});const x=u0(n,e);oc(n,x),Ys(n.eventQueue_,x,[])}function eD(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&Ql(n.onDisconnect_,e),va(0,t,r,o)})}function t0(n,e,t,r){const o=Er(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(u,c)=>{"ok"===u&&ma(n.onDisconnect_,e,o),va(0,r,u,c)})}function n0(n,e,t){let r;r=".info"===Gt(e._path)?oy(n.infoSyncTree_,e,t):oy(n.serverSyncTree_,e,t),Kw(n.eventQueue_,e._path,r)}function tD(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Yw)}function Sf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zn(t,...e)}function va(n,e,t,r){e&&Cd(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let u=o;r&&(u+=": "+r);const c=new Error(u);c.code=o,e(c)}})}function or(n,e,t){return Ng(n.serverSyncTree_,e,t)||Ut.EMPTY_NODE}function r0(n,e=n.transactionQueueTree_){if(e||Fg(n,e),sc(e)){const t=o0(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(b=>b.currentWriteId),o=or(n,e,r);let u=o;const c=o.hash();for(let b=0;b<t.length;b++){const S=t[b];(0,k.hu)(0===S.status,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const x=ts(e,S.path);u=u.updateChild(x,S.currentOutputSnapshotRaw)}const p=u.val(!0),y=e;n.server_.put(y.toString(),p,b=>{Sf(n,"transaction put response",{path:y.toString(),status:b});let S=[];if("ok"===b){const x=[];for(let O=0;O<t.length;O++)t[O].status=2,S=S.concat(ic(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&x.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();Fg(n,dy(n.transactionQueueTree_,e)),r0(n,n.transactionQueueTree_),Ys(n.eventQueue_,e,S);for(let O=0;O<x.length;O++)Cd(x[O])}else{if("datastale"===b)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{yi("transaction at "+y.toString()+" failed: "+b);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=b}oc(n,e)}},c)}(n,If(e),t)}else fy(e)&&Cf(e,t=>{r0(n,t)})}function oc(n,e){const t=s0(n,e),r=If(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],b=ts(t,y.path);let x,S=!1;if((0,k.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===y.status)S=!0,x=y.abortReason,o=o.concat(ic(n.serverSyncTree_,y.currentWriteId,!0));else if(0===y.status)if(y.retryCount>=25)S=!0,x="maxretry",o=o.concat(ic(n.serverSyncTree_,y.currentWriteId,!0));else{const O=or(n,y.path,c);y.currentInputSnapshot=O;const $=e[p].update(O.val());if(void 0!==$){Pg("transaction failed: Data returned ",$,y.path);let K=Er($);"object"==typeof $&&null!=$&&(0,k.r3)($,".priority")||(K=K.updatePriority(O.getPriority()));const xe=y.currentWriteId,gt=Tf(n),ht=ly(K,O,gt);y.currentOutputSnapshotRaw=K,y.currentOutputSnapshotResolved=ht,y.currentWriteId=vy(n),c.splice(c.indexOf(xe),1),o=o.concat(Ar(n.serverSyncTree_,y.path,ht,y.currentWriteId,y.applyLocally)),o=o.concat(ic(n.serverSyncTree_,xe,!0))}else S=!0,x="nodata",o=o.concat(ic(n.serverSyncTree_,y.currentWriteId,!0))}Ys(n.eventQueue_,t,o),o=[],S&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===x?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(x),!1,null)))}Fg(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Cd(r[p]);r0(n,n.transactionQueueTree_)}(n,o0(n,t),r),r}function s0(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===sc(r);)r=dy(r,t),t=Gt(e=Dn(e));return r}function o0(n,e){const t=[];return a0(n,e,t),t.sort((r,o)=>r.order-o.order),t}function a0(n,e,t){const r=sc(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);Cf(e,o=>{a0(n,o,t)})}function Fg(n,e){const t=sc(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,hy(e,t.length>0?t:void 0)}Cf(e,r=>{Fg(n,r)})}function u0(n,e){const t=If(s0(n,e)),r=dy(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{l0(n,o)}),l0(n,r),Ww(r,o=>{l0(n,o)}),t}function l0(n,e){const t=sc(e);if(t){const r=[];let o=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,k.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,k.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(ic(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?hy(e,void 0):t.length=u+1,Ys(n.eventQueue_,If(e),o);for(let c=0;c<r.length;c++)Cd(r[c])}}const c0=function(n,e){const t=QR(n),r=t.namespace;return"firebase.com"===t.domain&&ha(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&ha("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&yi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qE(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new wn(t.pathString)}},QR=function(n){let e="",t="",r="",o="",u="",c=!0,p="https",y=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(p=n.substring(0,b-1),n=n.substring(b+2));let S=n.indexOf("/");-1===S&&(S=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(S,x)),S<x&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(u){}e+="/"+o}return e}(n.substring(S,x)));const O=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):yi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));b=e.indexOf(":"),b>=0?(c="https"===p||"wss"===p,y=parseInt(e.substring(b+1),10)):b=e.length;const $=e.slice(0,b);if("localhost"===$.toLowerCase())t="localhost";else if($.split(".").length<=2)t=$;else{const K=e.indexOf(".");r=e.substring(0,K).toLowerCase(),t=e.substring(K+1),u=r}"ns"in O&&(u=O.ns)}return{host:e,port:y,domain:t,subdomain:r,secure:c,scheme:p,pathString:o,namespace:u}};class rD{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class Vg{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class d0{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class h0{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return eD(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Oo("OnDisconnect.remove",this._path);const e=new k.BH;return t0(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Oo("OnDisconnect.set",this._path),ru("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return t0(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Oo("OnDisconnect.setWithPriority",this._path),ru("OnDisconnect.setWithPriority",e,this._path,!1),zw("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function(n,e,t,r,o){const u=Er(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&ma(n.onDisconnect_,e,u),va(0,o,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Oo("OnDisconnect.update",this._path),zT("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function(n,e,t,r){if((0,k.xb)(t))return zn("onDisconnect().update() called with empty data.  Don't do anything."),void va(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,u)=>{"ok"===o&&ai(t,(c,p)=>{const y=Er(p);ma(n.onDisconnect_,$n(e,c),y)}),va(0,r,o,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class is{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return Jt(this._path)?null:j_(this._path)}get ref(){return new Fo(this._repo,this._path)}get _queryIdentifier(){const e=Cg(this._queryParams),t=LE(e);return"{}"===t?"default":t}get _queryObject(){return Cg(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof is))return!1;const t=this._repo===e._repo,r=zl(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function by(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function ko(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===pa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Li)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==fa)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===kn){if(null!=e&&!Mg(e)||null!=t&&!Mg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof aT||n.getIndex()===H_,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ac(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Fo extends is{constructor(e,t){super(e,t,new Eg,!1)}get parent(){const e=QI(this._path);return null===e?null:new Fo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class kd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new wn(e),r=uc(this.ref,e);return new kd(this._node.getChild(t),r,kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new kd(o,uc(this.ref,r),kn)))}hasChild(e){const t=new wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function iD(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?uc(n._root,e):n._root}function f0(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=c0(e,n._repo.repoInfo_.nodeAdmin);KT("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ha("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),iD(n,t.path.toString())}function uc(n,e){return null===Gt((n=(0,k.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kg("child","path",t,!1)):kg("child","path",e,!1),new Fo(n._repo,$n(n._path,e));var t}function p0(n,e){n=(0,k.m9)(n),Oo("set",n._path),ru("set",e,n._path,!1);const t=new k.BH;return XT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function E1(n,e){zT("update",e,n._path,!1);const t=new k.BH;return function(n,e,t,r){Sf(n,"update",{path:e.toString(),value:t});let o=!0;const u=Tf(n),c={};if(ai(t,(p,y)=>{o=!1,c[p]=jT($n(e,p),Er(y),n.serverSyncTree_,u)}),o)zn("update() called with empty data.  Don't do anything."),va(0,r,"ok",void 0);else{const p=vy(n),y=function(n,e,t,r){!function(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=pT(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=Kn.fromObject(t);return Pd(n,new Rd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,p);_y(n.eventQueue_,y),n.server_.merge(e.toString(),t,(b,S)=>{const x="ok"===b;x||yi("update at "+e+" failed: "+b);const O=ic(n.serverSyncTree_,p,!x),$=O.length>0?oc(n,e):e;Ys(n.eventQueue_,$,O),va(0,r,b,S)}),ai(t,b=>{const S=u0(n,$n(e,b));oc(n,S)}),Ys(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function w1(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,S)=>{const x=ts(b,t);r=r||qu(S,x)});let o=n.syncPointTree_.get(t);o?r=r||qu(o,nn()):(o=new kw,n.syncPointTree_=n.syncPointTree_.set(t,o));const u=null!=r,c=u?new ec(r,!0,!1):null;return function(n){return K_(n.viewCache_)}(sy(o,e,Y_(n.pendingWriteTree_,e._path),u?c.getNode():Ut.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=Er(r).withIndex(e._queryParams.getIndex()),u=Rg(n.serverSyncTree_,e._path,o);return Kw(n.eventQueue_,e._path,u),Promise.resolve(o)},r=>(Sf(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new kd(e,new Fo(n._repo,n._path),n._queryParams.getIndex()))}class g0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new rD("value",this,new kd(e.snapshotNode,new Fo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Vg(this,e,t):null}matches(e){return e instanceof g0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ug{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Vg(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=uc(new Fo(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new rD(e.type,this,new kd(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ug&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lc(n,e,t,r,o){let u;if("object"==typeof r&&(u=void 0,o=r),"function"==typeof r&&(u=r),o&&o.onlyOnce){const y=t,b=(S,x)=>{n0(n._repo,n,p),y(S,x)};b.userCallback=t.userCallback,b.context=t.context,t=b}const c=new d0(t,u||void 0),p="value"===e?new g0(c):new Ug(e,c);return function(n,e,t){let r;r=".info"===Gt(e._path)?VT(n.infoSyncTree_,e,t):VT(n.serverSyncTree_,e,t),Kw(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>n0(n._repo,n,p)}function m0(n,e,t,r){return lc(n,"value",e,t,r)}function oD(n,e,t,r){return lc(n,"child_added",e,t,r)}function _0(n,e,t,r){return lc(n,"child_changed",e,t,r)}function Af(n,e,t,r){return lc(n,"child_moved",e,t,r)}function aD(n,e,t,r){return lc(n,"child_removed",e,t,r)}function uD(n,e,t){let r=null;const o=t?new d0(t):null;"value"===e?r=new g0(o):e&&(r=new Ug(e,o)),n0(n._repo,n,r)}class Ea{}class lD extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("endAt",this._value,e._path,!0);const t=Mo(e._queryParams,this._value,this._key);if(ac(t),ko(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class cD extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===pa?("string"==typeof e&&(e=G_(e)),o=Mo(n,e,t)):(r=null==t?Li:G_(t),o=Mo(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(ac(t),ko(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class dD extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("startAt",this._value,e._path,!0);const t=yw(e._queryParams,this._value,this._key);if(ac(t),ko(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class rN extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ru("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===pa)"string"==typeof e&&(e=lT(e)),r=yw(n,e,t);else{let o;o=null==t?fa:lT(t),r=yw(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(ac(t),ko(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new is(e._repo,e._path,t,e._orderByCalled)}}class iN extends Ea{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class sN extends Ea{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new is(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class oN extends Ea{constructor(e){super(),this._path=e}_apply(e){by(e,"orderByChild");const t=new wn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new aT(t),o=Qr(e._queryParams,r);return ko(o),new is(e._repo,e._path,o,!0)}}class aN extends Ea{_apply(e){by(e,"orderByKey");const t=Qr(e._queryParams,pa);return ko(t),new is(e._repo,e._path,t,!0)}}class mD extends Ea{_apply(e){by(e,"orderByPriority");const t=Qr(e._queryParams,kn);return ko(t),new is(e._repo,e._path,t,!0)}}class lN extends Ea{_apply(e){by(e,"orderByValue");const t=Qr(e._queryParams,H_);return ko(t),new is(e._repo,e._path,t,!0)}}class v0 extends Ea{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ru("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new lD(this._value,this._key)._apply(new dD(this._value,this._key)._apply(e))}}function Lo(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,k.hu)(!yf,"__referenceConstructor has already been defined"),yf=n})(Fo),function(n){(0,k.hu)(!Uw,"__referenceConstructor has already been defined"),Uw=n}(Fo);const E0={};function yD(n,e,t,r,o){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||ha("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zn("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let y,b,c=c0(u,o),p=c.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(y=!0,u=`http://${b}?ns=${p.namespace}`,c=c0(u,o),p=c.repoInfo):y=!c.repoInfo.secure;const S=o&&y?new Gl(Gl.OWNER):new MI(n.name,n.options,e);KT("Invalid Firebase Database URL",c),Jt(c.path)||ha("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function(n,e,t,r){let o=E0[e.name];o||(o={},E0[e.name]=o);let u=o[n.toURLString()];return u&&ha("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new QT(n,false,t,r),o[n.toURLString()]=u,u}(p,n,S,new BE(n.name,t));return new vD(x,n)}class vD{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=dg(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new rs(n.repoInfo_,(r,o,u,c)=>{yy(n,r,o,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Jw(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Hu(n.repoInfo_,e,(r,o,u,c)=>{yy(n,r,o,u,c)},r=>{Jw(n,r)},r=>{!function(n,e){ai(e,(t,r)=>{Xw(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return zE[t]||(zE[t]=e()),zE[t]}(n.repoInfo_,()=>new dT(n.stats_,n.server_)),n.infoData_=new Ew,n.infoSyncTree_=new OT({startListening:(r,o,u,c)=>{let p=[];const y=n.infoData_.getNode(r._path);return y.isEmpty()||(p=Rg(n.infoSyncTree_,r._path,y),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),Xw(n,"connected",!1),n.serverSyncTree_=new OT({startListening:(r,o,u,c)=>(n.server_.listen(r,u,o,(p,y)=>{const b=c(p,y);Ys(n.eventQueue_,r._path,b)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fo(this._repo,nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=E0[e];(!t||t[n.key]!==n)&&ha(`Database ${e}(${n.repoInfo_}) has already been deleted.`),tD(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ha("Cannot call "+e+" on a deleted database.")}}function EN(n,e){Wx(n,e)}class wD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Hu.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Hu.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},SI(Fi.SDK_VERSION),(0,Fi._registerComponent)(new ca.wA("database",(e,{instanceIdentifier:t})=>yD(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(Bx,"0.12.8",void 0),(0,Fi.registerVersion)(Bx,"0.12.8","esm2017");const bD=new da.Yd("@firebase/database-compat"),CD=function(n){bD.warn("FIREBASE WARNING: "+n)};class DD{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),u=>r(u)),o}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,CD("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class I1{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class cc{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),kg("DataSnapshot.child","path",e,!1),new cc(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),kg("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new cc(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Vo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class wr{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var u;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const c=wr.getCancelAndContextArgs_("Query.on",r,o),p=(b,S)=>{t.call(c.context,new cc(this.database,b),S)};p.userCallback=t,p.context=c.context;const y=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return m0(this._delegate,p,y),t;case"child_added":return oD(this._delegate,p,y),t;case"child_removed":return aD(this._delegate,p,y),t;case"child_changed":return _0(this._delegate,p,y),t;case"child_moved":return Af(this._delegate,p,y),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,uD(this._delegate,e,o)}else uD(this._delegate,e)}get(){return w1(this._delegate).then(e=>new cc(this.database,e))}once(e,t,r,o){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const u=wr.getCancelAndContextArgs_("Query.once",r,o),c=new k.BH,p=(b,S)=>{const x=new cc(this.database,b);t&&t.call(u.context,x,S),c.resolve(x)};p.userCallback=t,p.context=u.context;const y=b=>{u.cancel&&u.cancel.call(u.context,b),c.reject(b)};switch(e){case"value":m0(this._delegate,p,y,{onlyOnce:!0});break;case"child_added":oD(this._delegate,p,y,{onlyOnce:!0});break;case"child_removed":aD(this._delegate,p,y,{onlyOnce:!0});break;case"child_changed":_0(this._delegate,p,y,{onlyOnce:!0});break;case"child_moved":Af(this._delegate,p,y,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new wr(this.database,Lo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new iN(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new wr(this.database,Lo(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new sN(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new wr(this.database,Lo(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kg("orderByChild","path",n,!1),new oN(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new wr(this.database,Lo(this._delegate,new aN))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new wr(this.database,Lo(this._delegate,new mD))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new wr(this.database,Lo(this._delegate,new lN))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new wr(this.database,Lo(this._delegate,function(n=null,e){return Og("startAt","key",e,!0),new dD(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new wr(this.database,Lo(this._delegate,function(n,e){return Og("startAfter","key",e,!0),new rN(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new wr(this.database,Lo(this._delegate,function(n,e){return Og("endAt","key",e,!0),new lD(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new wr(this.database,Lo(this._delegate,function(n,e){return Og("endBefore","key",e,!0),new cD(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new wr(this.database,Lo(this._delegate,function(n,e){return Og("equalTo","key",e,!0),new v0(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof wr))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,k.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,k.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new Vo(this.database,new Fo(this._delegate._repo,this._delegate._path))}}class Vo extends wr{constructor(e,t){super(e,new is(t._repo,t._path,new Eg,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Vo(this.database,uc(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Vo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Vo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=p0(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let u=0;u<e.length;++u)o[""+u]=e[u];e=o,CD("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oo("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=E1(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(Oo("setWithPriority",n._path),ru("setWithPriority",e,n._path,!1),zw("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return XT(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),u=>r(u)),o}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Oo("remove",n._path),p0(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,k.m9)(n),Oo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,u=new k.BH,p=m0(n,()=>{});return function(n,e,t,r,o,u){Sf(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:$x(),applyLocally:u,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=or(n,e,void 0);c.currentInputSnapshot=p;const y=c.update(p.val());if(void 0===y)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Pg("transaction failed: Data returned ",y,c.path),c.status=0;const b=dy(n.transactionQueueTree_,e),S=sc(b)||[];let x;S.push(c),hy(b,S),"object"==typeof y&&null!==y&&(0,k.r3)(y,".priority")?(x=(0,k.DV)(y,".priority"),(0,k.hu)(Mg(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(Ng(n.serverSyncTree_,e)||Ut.EMPTY_NODE).getPriority().val();const O=Tf(n),$=Er(y,x),K=ly($,p,O);c.currentOutputSnapshotRaw=$,c.currentOutputSnapshotResolved=K,c.currentWriteId=vy(n);const ye=Ar(n.serverSyncTree_,e,K,c.currentWriteId,c.applyLocally);Ys(n.eventQueue_,e,ye),r0(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(y,b,S)=>{let x=null;y?u.reject(y):(x=new kd(S,new Fo(n._repo,n._path),kn),u.resolve(new wD(b,x)))},p,o),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new I1(u.committed,new cc(this.database,u.snapshot)));return t&&o.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),o}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),Oo("setPriority",n._path),zw("setPriority",e,!1);const t=new k.BH;return XT(n._repo,$n(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,k.m9)(n),Oo("push",n._path),ru("push",e,n._path,!0);const t=Qw(n._repo),r=mw(t),o=uc(n,r),u=uc(n,r);let c;return c=null!=e?p0(u,e).then(()=>u):Promise.resolve(u),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new Vo(this.database,c));t&&o.then(()=>t(null),c=>t(c));const u=new Vo(this.database,r);return u.then=o.then.bind(o),u.catch=o.catch.bind(o,void 0),u}onDisconnect(){return Oo("Reference.onDisconnect",this._delegate._path),new DD(new h0(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fd{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ha("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let u;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&ha('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Gl(Gl.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);u=new Gl(c)}!function(n,e,t,r){n.repoInfo_=new qE(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Vo){const t=f0(this._delegate,e.toString());return new Vo(this,t)}{const t=iD(this._delegate,e);return new Vo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=f0(this._delegate,e);return new Vo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),tD(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(Yw)}(n._repo)}(this._delegate)}}Fd.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var IN=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:u=!1}){SI(t);const c=new ca.zt("auth-internal",new ca.H0("database-standalone"));return c.setComponent(new ca.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Fd(yD(n,c,void 0,e,u),n),namespace:o}}});const Rf=Fd.ServerValue;!function(n){n.INTERNAL.registerComponent(new ca.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new Fd(o,r)},"PUBLIC").setServiceProps({Reference:Vo,Query:wr,Database:Fd,DataSnapshot:cc,enableLogging:EN,INTERNAL:IN,ServerValue:Rf}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(DI.Z);var Iy=V(309),DN=V(7771),iu=V(8858);class SD extends Ni.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new T1(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,u=r.length;let c;if(this.closed)throw new Nu.N;if(this.isStopped||this.hasError?c=o_.w.EMPTY:(this.observers.push(e),c=new iu.W(this,e)),o&&e.add(e=new Iy.ht(e,o)),t)for(let p=0;p<u&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<u&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||DN.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,u=o.length;let c=0;for(;c<u&&!(e-o[c].time<r);)c++;return u>t&&(c=Math.max(c,u-t)),c>0&&o.splice(0,c),o}}class T1{constructor(e,t){this.time=e,this.value=t}}function Bg(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,c,u=0,p=!1,y=!1;return function(S){let x;u++,!o||p?(p=!1,o=new SD(n,e,r),x=o.subscribe(this),c=S.subscribe({next(O){o.next(O)},error(O){p=!0,o.error(O)},complete(){y=!0,c=void 0,o.complete()}}),y&&(c=void 0)):x=o.subscribe(this),this.add(()=>{u--,x.unsubscribe(),x=void 0,c&&!y&&t&&0===u&&(c.unsubscribe(),c=void 0,o=void 0)})}}(r))}function AD(n,e){return e?mr(()=>n,e):mr(()=>n)}var xD=V(2639);V(2329);const $g=new Map,kN={activated:!1,tokenObservers:[]},PD={initialized:!1,enabled:!1};function xr(n){return $g.get(n)||kN}function Ts(n,e){$g.set(n,e)}function dc(){return PD}class UN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ss=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kD(n){if(!xr(n).activated)throw ss.create("use-before-activation",{appName:n.name})}function S0(n,e){return A0.apply(this,arguments)}function A0(){return(A0=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const x=yield o.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(x){throw ss.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw ss.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(x){throw ss.create("fetch-parse-error",{originalErrorMessage:x.message})}const y=p.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(y[1]),S=Date.now();return{token:p.attestationToken,expireTimeMillis:S+b,issuedAtTimeMillis:S}})).apply(this,arguments)}function Ld(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ay="firebase-app-check-store";let Vd=null;function VD(){return Vd||(Vd=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ss.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(Ay,{keyPath:"compositeKey"})}}}catch(t){e(ss.create("storage-open",{originalErrorMessage:t.message}))}}),Vd)}function xy(){return(xy=(0,Ee.Z)(function*(n,e){const r=(yield VD()).transaction(Ay,"readwrite"),u=r.objectStore(Ay).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;p(ss.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Hg=new da.Yd("@firebase/app-check");function Gg(n,e){return(0,k.hl)()?function(n,e){return function(n,e){return xy.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Hg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function bn(){return dc().enabled}function Ku(){return fc.apply(this,arguments)}function fc(){return(fc=(0,Ee.Z)(function*(){const n=dc();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const k1={error:"UNKNOWN_ERROR"};function Ft(n){return k.US.encodeString(JSON.stringify(n),!1)}function os(n){return qg.apply(this,arguments)}function qg(){return(qg=(0,Ee.Z)(function*(n,e=!1){const t=n.app;kD(t);const r=xr(t);let u,o=r.token;if(!o){const y=yield r.cachedTokenPromise;y&&Ry(y)&&(o=y)}if(!e&&o&&Ry(o))return{token:o.token};let p,c=!1;if(bn()){r.exchangeTokenPromise||(r.exchangeTokenPromise=S0(Ld(t,yield Ku()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield Gg(t,y),Ts(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),o=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Hg.warn(y.message):Hg.error(y),u=y}return o?(p={token:o.token},Ts(t,Object.assign(Object.assign({},r),{token:o})),yield Gg(t,o)):p=qN(u),c&&WN(t,p),p})).apply(this,arguments)}function HD(n,e){const t=xr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ts(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function P0(n){const{app:e}=n,t=xr(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new UN((0,Ee.Z)(function*(){let r;if(r=xr(e).token?yield os(n,!0):yield os(n),r.error)throw r.error}),()=>!0,()=>{const t=xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ts(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function WN(n,e){const t=xr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Ry(n){return n.expireTimeMillis-Date.now()>0}function qN(n){return{token:Ft(k1),error:n}}class Uo{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xr(this.app);for(const t of e)HD(this.app,t.next);return Promise.resolve()}}const ZN="app-check-internal";(0,Fi._registerComponent)(new ca.wA("app-check",n=>function(n,e){return new Uo(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZN).initialize()})),(0,Fi._registerComponent)(new ca.wA(ZN,n=>function(n){return{getToken:e=>os(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=xr(o),c={next:t,error:r,type:e};if(Ts(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&Ry(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),P0(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>P0(n))}(n,"INTERNAL",e),removeTokenListener:e=>HD(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Fi.registerVersion)("@firebase/app-check","0.5.6");class Qg{constructor(){return(0,cn.vb)("app-check")}}"undefined"!=typeof window&&window;var Jg=V(7841);const j0=new m.OlP("angularfire2.auth.use-emulator"),Py=new m.OlP("angularfire2.auth.settings"),Xg=new m.OlP("angularfire2.auth.tenant-id"),$0=new m.OlP("angularfire2.auth.langugage-code"),JD=new m.OlP("angularfire2.auth.use-device-language"),H0=new m.OlP("angularfire.auth.persistence"),G0=(n,e,t,r,o,u,c,p)=>(0,vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=o,u&&y.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))y.settings[b]=S;return p&&y.setPersistence(p),y},[t,r,o,u,c,p]);let Oy=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x,O,$){const K=new Ni.xQ,ye=(0,ut.of)(void 0).pipe((0,Iy.QV)(c.outsideAngular),mr(()=>u.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,3259)))),(0,St.U)(()=>(0,vr.on)(t,u,r)),(0,St.U)(xe=>G0(xe,u,p,b,S,x,y,O)),Bg({bufferSize:1,refCount:!1}));if(cl(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ut.of)(null);else{ye.pipe(jn()).subscribe();const gt=ye.pipe(mr(st=>st.getRedirectResult().then(Wt=>Wt,()=>null)),cn.iC,Bg({bufferSize:1,refCount:!1})),ht=ye.pipe(mr(st=>new Bn.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>st.onAuthStateChanged(rn=>Wt.next(rn),rn=>Wt.error(rn),()=>Wt.complete()))})))),et=ye.pipe(mr(st=>new Bn.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>st.onIdTokenChanged(rn=>Wt.next(rn),rn=>Wt.error(rn),()=>Wt.complete()))}))));this.authState=gt.pipe(AD(ht),(0,xD.R)(c.outsideAngular),(0,Iy.QV)(c.insideAngular)),this.user=gt.pipe(AD(et),(0,xD.R)(c.outsideAngular),(0,Iy.QV)(c.insideAngular)),this.idToken=this.user.pipe(mr(st=>st?(0,Ht.D)(st.getIdToken()):(0,ut.of)(null))),this.idTokenResult=this.user.pipe(mr(st=>st?(0,Ht.D)(st.getIdTokenResult()):(0,ut.of)(null))),this.credential=(0,O_.T)(gt,K,this.authState.pipe(Pi(st=>!st))).pipe((0,St.U)(st=>(null==st?void 0:st.user)?st:null),(0,xD.R)(c.outsideAngular),(0,Iy.QV)(c.insideAngular))}return(0,vr.pX)(this,ye,u,{spy:{apply:(xe,gt,ht)=>{(xe.startsWith("signIn")||xe.startsWith("createUser"))&&ht.then(et=>K.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vr.Dh),m.LFG(vr.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG(j0,8),m.LFG(Py,8),m.LFG(Xg,8),m.LFG($0,8),m.LFG(JD,8),m.LFG(H0,8),m.LFG(Qg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),eM=(()=>{class n{constructor(){Jg.Z.registerVersion("angularfire",cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Oy]}),n})();function Pf(n){return null==n}function XD(n){return"function"==typeof n.set}function eS(n,e){return XD(e)?e:n.ref(e)}function W0(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(XD(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Yu(n,e,t="on",r=Zh.z){return new Bn.y(o=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,St.U)(o=>{const{snapshot:u,prevKey:c}=o;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,Ux.B)())}function q0(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function iM(n,e){const{payload:t,prevKey:r,key:o}=e,u=q0(n,o),c=function(n,e){if(Pf(e))return 0;{const t=q0(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(y=>{const b={payload:y,type:"value",prevKey:p,key:y.key};return p=y.key,n=[...n,b],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(y=>y.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===o?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function tS(n){return(Pf(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function nS(n,e,t){return function(n,e,t){return Yu(n,"value","once",t).pipe(mr(r=>{const o=[(0,ut.of)(r)];return e.forEach(u=>o.push(Yu(n,u,"on",t))),(0,O_.T)(...o).pipe(Ba(iM,[]))}),k_())}(n,e=tS(e),t)}function rS(n,e,t){const r=(e=tS(e)).map(o=>Yu(n,o,"on",t));return(0,O_.T)(...r)}function aM(n,e){return function(r,o){return W0(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function K1(n){return function(t){return t?W0(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function ky(n,e){return function(){return Yu(n,"value","on",e)}}const lM=new m.OlP("angularfire2.realtimeDatabaseURL"),cM=new m.OlP("angularfire2.database.use-emulator");let dM=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x,O,$,K,ye,xe){this.schedulers=p;const gt=y,ht=(0,vr.on)(t,c,r);b&&G0(ht,c,S,O,$,K,x,ye),this.database=(0,vr.cc)(`${ht.name}.database.${o}`,"AngularFireDatabase",ht.name,()=>{const et=c.runOutsideAngular(()=>ht.database(o||void 0));return gt&&et.useEmulator(...gt),et},[gt])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>eS(this.database,t));let u=o;return r&&(u=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:aM(r,"update"),set:aM(r,"set"),push:o=>r.push(o),remove:K1(r),snapshotChanges:o=>nS(n,o,t).pipe(cn.iC),stateChanges:o=>rS(n,o,t).pipe(cn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return Yu(n,"value","on",e).pipe((0,St.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new PE(n,t))}}(e),(0,St.U)(([o,u])=>{const c=o.lastKeyToLoad,p=u.map(y=>y.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),function(n){return e=>e.lift(new n1(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,St.U)(o=>o.actions))}(n,rS(n,e).pipe(Ba((o,u)=>[...o,u],[])),t)}(n,o,t).pipe(cn.iC),valueChanges:(o,u)=>nS(n,o,t).pipe((0,St.U)(p=>p.map(y=>u&&u.idField?Object.assign(Object.assign({},y.payload.val()),{[u.idField]:y.key}):y.payload.val())),cn.iC)}}(u,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>ky(n,e.schedulers.outsideAngular)().pipe(cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>ky(n,e.schedulers.outsideAngular)().pipe(cn.iC,(0,St.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>eS(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vr.Dh),m.LFG(vr.xv,8),m.LFG(lM,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG(cM,8),m.LFG(Oy,8),m.LFG(j0,8),m.LFG(Py,8),m.LFG(Xg,8),m.LFG($0,8),m.LFG(JD,8),m.LFG(H0,8),m.LFG(Qg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var hM=V(1555);function Of(n,e){return new Bn.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let u=0,c=0;for(let p=0;p<r;p++){const y=(0,Ht.D)(n[p]);let b=!1;t.add(y.subscribe({next:S=>{b||(b=!0,c++),o[p]=S},error:S=>t.error(S),complete:()=>{u++,(u===r||!b)&&(c===r&&t.next(e?e.reduce((S,x,O)=>(S[x]=o[O],S),{}):o),t.complete())}}))}})}let oS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),Bo=(()=>{class n extends oS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Zn=new m.OlP("NgValueAccessor"),z0={provide:Zn,useExisting:(0,m.Gpc)(()=>em),multi:!0},uS=new m.OlP("CompositionEventMode");let em=(()=>{class n extends oS{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(uS,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[m._Bn([z0]),m.qOj]}),n})();const Ui=new m.OlP("NgValidators"),gc=new m.OlP("NgAsyncValidators");function pS(n){return null!=n}function Fy(n){const e=(0,m.QGY)(n)?(0,Ht.D)(n):n;return(0,m.CqO)(e),e}function gS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function mS(n,e){return e.map(t=>t(n))}function _S(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Z0(n){return null!=n?function(n){if(!n)return null;const e=n.filter(pS);return 0==e.length?null:function(t){return gS(mS(t,e))}}(_S(n)):null}function Y0(n){return null!=n?function(n){if(!n)return null;const e=n.filter(pS);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,Ji.k)(e))return Of(e,null);if((0,hM.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Of(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Of(n=1===n.length&&(0,Ji.k)(n[0])?n[0]:n,null).pipe((0,St.U)(t=>e(...t)))}return Of(n,null)}(mS(t,e).map(Fy)).pipe((0,St.U)(gS))}}(_S(n)):null}function ES(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ly(n){return n?Array.isArray(n)?n:[n]:[]}function tm(n,e){return Array.isArray(n)?n.includes(e):n===e}function Q0(n,e){const t=Ly(e);return Ly(n).forEach(o=>{tm(t,o)||t.push(o)}),t}function J0(n,e){return Ly(e).filter(t=>!tm(n,t))}let X0=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Z0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Y0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=m.lG2({type:n}),n})(),Bi=(()=>{class n extends X0{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();class mc extends X0{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let CS=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(mc,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})();function Gd(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ES(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ES(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Vy(e._rawValidators,o),Vy(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ib(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ib(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Vy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ib(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ub(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ou="VALID",jy="INVALID",Lf="PENDING",$y="DISABLED";function lb(n){return(hb(n)?n.validators:n)||null}function Hy(n){return Array.isArray(n)?Z0(n):n||null}function cb(n,e){return(hb(e)?e.asyncValidators:n)||null}function db(n){return Array.isArray(n)?Y0(n):n||null}function hb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class fb{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Hy(this._rawValidators),this._composedAsyncValidatorFn=db(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ou}get invalid(){return this.status===jy}get pending(){return this.status==Lf}get disabled(){return this.status===$y}get enabled(){return this.status!==$y}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Hy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=db(e)}addValidators(e){this.setValidators(Q0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Q0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(J0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(J0(e,this._rawAsyncValidators))}hasValidator(e){return tm(this._rawValidators,e)}hasAsyncValidator(e){return tm(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=$y,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ou,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ou||this.status===Lf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$y:ou}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lf,this._hasOwnPendingAsyncValidator=!0;const t=Fy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Gy?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof AS&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?$y:this.errors?jy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lf)?Lf:this._anyControlsHaveStatus(jy)?jy:ou}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Vf extends fb{constructor(e=null,t,r){super(lb(t),cb(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ub(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ub(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Gy extends fb{constructor(e,t,r){super(lb(t),cb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Vf?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class AS extends fb{constructor(e,t,r){super(lb(t),cb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Vf?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const DM={provide:mc,useExisting:(0,m.Gpc)(()=>Zy)},mb=(()=>Promise.resolve(null))();let Zy=(()=>{class n extends mc{constructor(t,r,o,u){super(),this.control=new Vf,this._registered=!1,this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===em?t=u:function(n){return Object.getPrototypeOf(n.constructor)===Bo}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Gd(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mb.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;mb.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Bi,9),m.Y36(Ui,10),m.Y36(gc,10),m.Y36(Zn,10))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([DM]),m.qOj,m.TTD]}),n})(),PS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();const uF={provide:Zn,useExisting:(0,m.Gpc)(()=>Eb),multi:!0};function NM(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Eb=(()=>{class n extends Bo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const o=NM(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&m.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([uF]),m.qOj]}),n})(),MM=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(NM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(Eb,9))},n.\u0275dir=m.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const cF={provide:Zn,useExisting:(0,m.Gpc)(()=>$S),multi:!0};function PM(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let $S=(()=>{class n extends Bo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(o.indexOf(c.toString())>-1)}}else r=(o,u)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[];if(void 0!==r.selectedOptions){const u=r.selectedOptions;for(let c=0;c<u.length;c++){const p=u.item(c),y=this._getOptionValue(p.value);o.push(y)}}else{const u=r.options;for(let c=0;c<u.length;c++){const p=u.item(c);if(p.selected){const y=this._getOptionValue(p.value);o.push(y)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&m.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([cF]),m.qOj]}),n})(),OM=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(PM(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(PM(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36($S,9))},n.\u0275dir=m.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[PS]]}),n})(),zS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[Qy]}),n})();function Jy(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",18),m.TgZ(1,"div",19),m.TgZ(2,"input",20),m.NdJ("ngModelChange",function(o){return m.CHM(t).$implicit.valor=o}),m.qZA(),m.qZA(),m.TgZ(3,"div",19),m.TgZ(4,"input",21),m.NdJ("ngModelChange",function(o){return m.CHM(t).$implicit.descricao=o}),m.qZA(),m.qZA(),m.qZA()}if(2&n){const t=e.$implicit;m.xp6(2),m.Q6J("ngModel",t.valor),m.xp6(2),m.Q6J("ngModel",t.descricao)}}function KS(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",7),m.TgZ(1,"div",8),m.TgZ(2,"label",9),m._uU(3,"Data"),m.qZA(),m.TgZ(4,"input",10),m.NdJ("ngModelChange",function(o){return m.CHM(t),m.oxw().sinalModel.data=o}),m.qZA(),m.qZA(),m.TgZ(5,"div",8),m.TgZ(6,"label",9),m._uU(7,"Moeda"),m.qZA(),m.TgZ(8,"input",11),m.NdJ("ngModelChange",function(o){return m.CHM(t),m.oxw().sinalModel.moeda=o}),m.qZA(),m.qZA(),m.TgZ(9,"div",8),m.TgZ(10,"label",9),m._uU(11,"Tipo"),m.qZA(),m.TgZ(12,"select",12),m.NdJ("ngModelChange",function(o){return m.CHM(t),m.oxw().sinalModel.tipo=o}),m.TgZ(13,"option",13),m._uU(14,"LONG"),m.qZA(),m.TgZ(15,"option",14),m._uU(16,"SHORT"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",8),m.TgZ(18,"label",9),m._uU(19,"Entradas"),m.qZA(),m.YNc(20,Jy,5,2,"div",15),m.qZA(),m.TgZ(21,"div",8),m.TgZ(22,"button",16),m.NdJ("click",function(){return m.CHM(t),m.oxw().salvarEntrada()}),m._uU(23,"Salvar"),m.qZA(),m.TgZ(24,"button",17),m.NdJ("click",function(){return m.CHM(t),m.oxw().showFormNovoSinal=!1}),m._uU(25,"Cancelar"),m.qZA(),m.qZA(),m.qZA()}if(2&n){const t=m.oxw();m.xp6(4),m.Q6J("ngModel",t.sinalModel.data),m.xp6(4),m.Q6J("ngModel",t.sinalModel.moeda),m.xp6(4),m.Q6J("ngModel",t.sinalModel.tipo),m.xp6(8),m.Q6J("ngForOf",t.sinalModel.entradas)}}function yF(n,e){if(1&n&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&n){const t=m.oxw().$implicit,r=m.oxw(2);m.xp6(1),m.hij("$: ",null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price,"")}}function vF(n,e){if(1&n&&(m.TgZ(0,"div",37),m._UZ(1,"i",38),m.TgZ(2,"small"),m._uU(3),m.qZA(),m.qZA()),2&n){const t=m.oxw(2).$implicit,r=m.oxw(2);m.xp6(3),m.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function EF(n,e){if(1&n&&(m.TgZ(0,"div",37),m._UZ(1,"i",38),m.TgZ(2,"small"),m._uU(3),m.qZA(),m.qZA()),2&n){const t=m.oxw(2).$implicit,r=m.oxw(2);m.xp6(3),m.Oqu(null==r.PriceCoinMap[t.moeda]?null:r.PriceCoinMap[t.moeda].price)}}function qM(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"li"),m.YNc(1,vF,4,1,"div",35),m.TgZ(2,"div"),m.TgZ(3,"i",36),m.NdJ("click",function(){const u=m.CHM(t).$implicit;return m.oxw(3).toggleAlcancado(u)}),m.qZA(),m._uU(4),m.qZA(),m.YNc(5,EF,4,1,"div",35),m._UZ(6,"div"),m.qZA()}if(2&n){const t=e.$implicit,r=e.index,o=m.oxw().$implicit,u=m.oxw(2);m.xp6(1),m.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&o.indexPricePosition===r),m.xp6(2),m.Q6J("ngClass",t.alcancado?"fa-flag text-success":"fa-caret-right"),m.xp6(1),m.AsE(" ",t.valor," - ",t.descricao," "),m.xp6(1),m.Q6J("ngIf",u.PriceCoinMap[o.moeda]&&r==o.entradas.length-1&&("LONG"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)>u.castPrice(t.valor)||"SHORT"===o.tipo&&u.castPrice(null==u.PriceCoinMap[o.moeda]?null:u.PriceCoinMap[o.moeda].price)<u.castPrice(t.valor)))}}function wF(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",23),m.TgZ(1,"div",24),m.TgZ(2,"h5",25),m.TgZ(3,"strong"),m._uU(4),m.qZA(),m.qZA(),m.TgZ(5,"h5"),m.YNc(6,yF,2,1,"span",26),m.qZA(),m.TgZ(7,"h6",27),m._uU(8),m.ALo(9,"date"),m.qZA(),m.TgZ(10,"div"),m.TgZ(11,"ul",28),m.YNc(12,qM,7,5,"li",29),m.qZA(),m.qZA(),m.TgZ(13,"div"),m.TgZ(14,"span",30),m.TgZ(15,"button",31),m.NdJ("click",function(){const o=m.CHM(t),u=o.$implicit,c=o.index;return m.oxw(2).editarSinal(u,c)}),m._UZ(16,"i",32),m.qZA(),m.TgZ(17,"button",33),m.NdJ("click",function(){const o=m.CHM(t),u=o.$implicit,c=o.index;return m.oxw(2).excluirSinal(u,c)}),m._UZ(18,"i",34),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&n){const t=e.$implicit,r=m.oxw(2);m.Q6J("ngClass","LONG"===t.tipo?"border-long":"border-short"),m.xp6(4),m.Oqu(t.moeda),m.xp6(2),m.Q6J("ngIf",r.PriceCoinMap[t.moeda]),m.xp6(1),m.Q6J("ngClass","LONG"===t.tipo?"text-success":"text-danger"),m.xp6(1),m.AsE(" ",t.tipo," - ",m.xi3(9,7,t.data,"dd/MM/yyyy")," "),m.xp6(4),m.Q6J("ngForOf",t.entradas)}}function Xy(n,e){if(1&n&&(m.TgZ(0,"div",2),m.TgZ(1,"div",18),m.YNc(2,wF,19,10,"div",22),m.qZA(),m.qZA()),2&n){const t=m.oxw();m.xp6(2),m.Q6J("ngForOf",t.watchersList)}}wI.extend(kt);let zM=(()=>{class n{constructor(t){this.db=t,this.title="binance-future-watcher-githubio",this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.watchersList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.editandoSinalIdx=-1,this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){this.startPriceWatcher(),this.loadWatcherList()}startPriceWatcher(){const r=function(n=0,e=Zh.P){return(!(0,bI.k)(n)||n<0)&&(n=0),(!e||"function"!=typeof e.schedule)&&(e=Zh.P),new Bn.y(t=>(t.add(e.schedule(la,n,{subscriber:t,counter:0,period:n})),t))}(5e3);this.populatePriceCoinMap(),r.subscribe(o=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let o=[];r.forEach(c=>{this.PriceCoinMap[c.symbol]={price:c.price},o.push(c.symbol)});let u=this;o.sort(),o.forEach(c=>{u.PriceCoinList.push({symbol:c,price:this.PriceCoinMap[c].price})}),this.setOrderSinais()})}setOrderSinais(){this.watchersList&&this.watchersList.length>0&&(this.watchersList.forEach((t,r)=>{let o=0;try{o=parseFloat(this.PriceCoinMap[t.moeda].price)}catch(u){}if(o){let u=-1;for(let c=0;c<t.entradas.length;c++){let y=parseFloat(t.entradas[c].valor);if("LONG"===t.tipo){if(0==c||c===t.entradas.length-1){if(o<=y){u=c,0==c&&(t.alert=!0);break}continue}if(o>=parseFloat(t.entradas[c-1].valor)&&o<=y){u=c,t.alert&&(this.playAlert(),t.alert=!1);break}}else if("SHORT"===t.tipo){if(0==c||c===t.entradas.length-1){if(o>=y){u=c,0==c&&(t.alert=!0);break}continue}if(o<=parseFloat(t.entradas[c-1].valor)&&o>=y){u=c,t.alert&&(this.playAlert(),t.alert=!1);break}}}this.watchersList[r].indexPricePosition=u}}),console.log(this.watchersList),this.watchersList.sort((t,r)=>t.indexPricePosition>r.indexPricePosition?-1:1))}castPrice(t){return parseFloat(t)}novoSinal(){let t=wI().format("YYYY-MM-DD");console.log(t),this.editandoSinalIdx=-1,this.sinalModel={data:t,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let o=0;o<5;o++){let u=Object.assign({},this.entradaModel);u.descricao=r[o],this.sinalModel.entradas.push(u)}this.showFormNovoSinal=!0}loadWatcherList(){this.watchersObservable=this.db.list("/sinais").valueChanges(),this.watchersObservable.subscribe(t=>{console.log(t),this.watchersList=t,this.setOrderSinais()})}salvarEntrada(){console.log(this.sinalModel);let t=Object.assign({},this.sinalModel);t.entradas.length>0&&t.entradas.forEach(o=>{o.valor=o.valor.trim()});let r=t.id?t.id:"_"+Math.random().toString().replace(".","");this.editandoSinalIdx>-1||(t.id=r,t.moeda=t.moeda.toUpperCase()),this.db.object("/sinais/"+r).set(t).then(()=>{this.showFormNovoSinal=!1})}editarSinal(t,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},t),this.showFormNovoSinal=!0}excluirSinal(t,r){var o=this;return(0,Ee.Z)(function*(){window.confirm("Realmente deseja excluir o sinal?")&&(yield o.db.object("/sinais/"+t.id).remove())})()}playAlert(){notificationAudio.play()}toggleAlcancado(t){t.alcancado=!t.alcancado||!t.alcancado}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(dM))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:2,consts:[["role","main"],[1,""],[1,"container"],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],["class","col-md-6",4,"ngIf"],["class","container",4,"ngIf"],[1,"col-md-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"card-title"],[4,"ngIf"],[1,"card-subtitle","mb-2",3,"ngClass"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"float-right"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-trash"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"]],template:function(t,r){1&t&&(m.TgZ(0,"main",0),m.TgZ(1,"section",1),m.TgZ(2,"div",2),m.TgZ(3,"p",3),m.TgZ(4,"button",4),m.NdJ("click",function(){return r.novoSinal()}),m._uU(5,"Novo sinal"),m.qZA(),m.qZA(),m.YNc(6,KS,26,4,"div",5),m.qZA(),m.YNc(7,Xy,3,1,"div",6),m.qZA(),m.qZA()),2&t&&(m.xp6(6),m.Q6J("ngIf",r.showFormNovoSinal),m.xp6(1),m.Q6J("ngIf",r.watchersList&&r.watchersList.length>0))},directives:[hs,em,CS,Zy,Eb,MM,OM,ln,Ps],pipes:[Mc],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.text-red[_ngcontent-%COMP%]{color:#fff}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();function ZS(){return n=>n.lift(new bF)}class bF{call(e,t){return t.subscribe(new Cb(e))}}class Cb extends zr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var rt,KM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yc={},Ib=Ib||{},Bt=KM||self;function sm(){}function Tb(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ev(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Db="closure_uid_"+(1e9*Math.random()>>>0),om=0;function ZM(n,e,t){return n.call.apply(n.bind,arguments)}function YM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function vi(n,e,t){return(vi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZM:YM).apply(null,arguments)}function Uf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ei(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[o].apply(r,c)}}function Fr(){this.s=this.s,this.o=this.o}var Sb={};Fr.prototype.s=!1,Fr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,Db)&&n[Db]||(n[Db]=++om)}(this);delete Sb[n]}},Fr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YS=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},QS=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function xb(n){return Array.prototype.concat.apply([],arguments)}function tv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function nv(n){return/^[\s\xa0]*$/.test(n)}var as,Rb=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ji(n,e){return-1!=n.indexOf(e)}function Nb(n,e){return n<e?-1:n>e?1:0}e:{var rv=Bt.navigator;if(rv){var Mb=rv.userAgent;if(Mb){as=Mb;break e}}as=""}function iv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function sv(n){const e={};for(const t in n)e[t]=n[t];return e}var JS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $o(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<JS.length;u++)t=JS[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Pb(n){return Pb[" "](n),n}Pb[" "]=sm;var um,JM=ji(as,"Opera"),am=ji(as,"Trident")||ji(as,"MSIE"),XS=ji(as,"Edge"),Ob=XS||am,eA=ji(as,"Gecko")&&!(ji(as.toLowerCase(),"webkit")&&!ji(as,"Edge"))&&!(ji(as,"Trident")||ji(as,"MSIE"))&&!ji(as,"Edge"),TF=ji(as.toLowerCase(),"webkit")&&!ji(as,"Edge");function tA(){var n=Bt.document;return n?n.documentMode:void 0}e:{var kb="",Fb=function(){var n=as;return eA?/rv:([^\);]+)(\)|;)/.exec(n):XS?/Edge\/([\d\.]+)/.exec(n):am?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):TF?/WebKit\/(\S+)/.exec(n):JM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Fb&&(kb=Fb?Fb[1]:""),am){var ov=tA();if(null!=ov&&ov>parseFloat(kb)){um=String(ov);break e}}um=kb}var XM={};function DF(){return e=XM,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=Rb(String(um)).split("."),t=Rb("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Nb(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Nb(0==o[2].length,0==u[2].length)||Nb(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var eP=Bt.document&&am&&(tA()||parseInt(um,10))||void 0,tP=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",sm,e),Bt.removeEventListener("test",sm,e)}catch(t){}return n}();function wi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xu(n,e){if(wi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(eA){e:{try{Pb(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Vb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xu.Z.h.call(this)}}wi.prototype.h=function(){this.defaultPrevented=!0},Ei(Xu,wi);var Vb={2:"touch",3:"pen",4:"mouse"};Xu.prototype.h=function(){Xu.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bf="closure_listenable_"+(1e6*Math.random()|0),nP=0;function rP(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++nP,this.ca=this.fa=!1}function Ub(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Bb(n){this.src=n,this.g={},this.h=0}function nA(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=YS(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Ub(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function uv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}Bb.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=uv(n,e,r,o);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new rP(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var lv="closure_lm_"+(1e6*Math.random()|0),jb={};function rA(n,e,t,r,o){if(r&&r.once)return $b(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)rA(n,e[u],t,r,o);return null}return t=cv(t),n&&n[Bf]?n.N(e,t,ev(r)?!!r.capture:!!r,o):iA(n,e,t,!1,r,o)}function iA(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=ev(o)?!!o.capture:!!o,p=Lr(n);if(p||(n[lv]=p=new Bb(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function(){var e=Hb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)tP||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(oA(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function $b(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)$b(n,e[u],t,r,o);return null}return t=cv(t),n&&n[Bf]?n.O(e,t,ev(r)?!!r.capture:!!r,o):iA(n,e,t,!0,r,o)}function sP(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)sP(n,e[u],t,r,o);else r=ev(r)?!!r.capture:!!r,t=cv(t),n&&n[Bf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=uv(u=n.g[e],t,r,o))&&(Ub(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Lr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=uv(e,t,r,o)),(t=-1<n?e[n]:null)&&sA(t))}function sA(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Bf])nA(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(oA(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Lr(e))?(nA(t,n),0==t.h&&(t.src=null,e[lv]=null)):Ub(n)}}}function oA(n){return n in jb?jb[n]:jb[n]="on"+n}function Hb(n,e){if(n.ca)n=!0;else{e=new Xu(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&sA(n),n=t.call(r,e)}return n}function Lr(n){return(n=n[lv])instanceof Bb?n:null}var aA="__closure_events_fn_"+(1e9*Math.random()>>>0);function cv(n){return"function"==typeof n?n:(n[aA]||(n[aA]=function(e){return n.handleEvent(e)}),n[aA])}function Jr(){Fr.call(this),this.i=new Bb(this),this.P=this,this.I=null}function bi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new wi(e,n);else if(e instanceof wi)e.target=e.target||n;else{var o=e;$o(e=new wi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=qd(c,r,!0,e)&&o}if(o=qd(c=e.g=n,r,!0,e)&&o,o=qd(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=qd(c=e.g=t[u],r,!1,e)&&o}function qd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,y=c.ia||c.src;c.fa&&nA(n.i,c),o=!1!==p.call(y,r)&&o}}return o&&!r.defaultPrevented}Ei(Jr,Fr),Jr.prototype[Bf]=!0,Jr.prototype.removeEventListener=function(n,e,t,r){sP(this,n,e,t,r)},Jr.prototype.M=function(){if(Jr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Ub(t[r]);delete n.g[e],n.h--}}this.I=null},Jr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gb=Bt.JSON.stringify;function oP(){var n=hv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var qb,vc=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lA,n=>n.reset());class lA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Wb(n){Bt.setTimeout(()=>{throw n},0)}function lm(n,e){qb||function(){var n=Bt.Promise.resolve(void 0);qb=function(){n.then(cA)}}(),zb||(qb(),zb=!0),hv.add(n,e)}var zb=!1,hv=new class{constructor(){this.h=this.g=null}add(e,t){const r=vc.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function cA(){for(var n;n=oP();){try{n.h.call(n.g)}catch(t){Wb(t)}var e=vc;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}zb=!1}function Rr(n,e){Jr.call(this),this.h=n||1,this.g=e||Bt,this.j=vi(this.kb,this),this.l=Date.now()}function dA(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Kb(n,e,t){if("function"==typeof n)t&&(n=vi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=vi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function hA(n){n.g=Kb(()=>{n.g=null,n.i&&(n.i=!1,hA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ei(Rr,Jr),(rt=Rr.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),bi(this,"tick"),this.da&&(dA(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){Rr.Z.M.call(this),dA(this),delete this.g};class SF extends Fr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hA(this)}M(){super.M(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ec(n){Fr.call(this),this.h=n,this.g={}}Ei(Ec,Fr);var fA=[];function aP(n,e,t,r){Array.isArray(t)||(t&&(fA[0]=t.toString()),t=fA);for(var o=0;o<t.length;o++){var u=rA(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function uP(n){iv(n.g,function(e,t){this.g.hasOwnProperty(t)&&sA(e)},n),n.g={}}function Zb(){this.g=!0}function jf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return Gb(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Ec.prototype.M=function(){Ec.Z.M.call(this),uP(this)},Ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zb.prototype.Aa=function(){this.g=!1},Zb.prototype.info=function(){};var $f={},pA=null;function fv(){return pA=pA||new Jr}function gA(n){wi.call(this,$f.Ma,n)}function pv(n){const e=fv();bi(e,new gA(e,n))}function fP(n,e){wi.call(this,$f.STAT_EVENT,n),this.stat=e}function us(n){const e=fv();bi(e,new fP(e,n))}function mA(n,e){wi.call(this,$f.Na,n),this.size=e}function cm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}$f.Ma="serverreachability",Ei(gA,wi),$f.STAT_EVENT="statevent",Ei(fP,wi),$f.Na="timingevent",Ei(mA,wi);var gv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_A={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qs(){}function vA(){}Qs.prototype.h=null;var Qb,dm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Yb(){wi.call(this,"d")}function EA(){wi.call(this,"c")}function mv(){}function hm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ec(this),this.P=wA,this.W=new Rr(n=Ob?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Hf}function Hf(){this.i=null,this.g="",this.h=!1}Ei(Yb,wi),Ei(EA,wi),Ei(mv,Qs),mv.prototype.g=function(){return new XMLHttpRequest},mv.prototype.i=function(){return{}},Qb=new mv;var wA=45e3,bA={},_v={};function CA(n,e,t){n.K=1,n.v=vv(Ca(e)),n.s=t,n.U=!0,pP(n,null)}function pP(n,e){n.F=Date.now(),fm(n),n.A=Ca(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),ym(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Hf,n.g=l(n.l,t?e:null,!n.s),0<n.O&&(n.L=new SF(vi(n.Ia,n,n.g),n.O)),aP(n.V,n.g,"readystatechange",n.gb),e=n.H?sv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),pv(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),y=0;y<p.length;y++){var b=p[y].split("=");if(1<b.length){var S=b[0];b=b[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function gP(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=mP(n,t),o==_v){4==e&&(n.o=4,us(14),r=!1),jf(n.j,n.m,null,"[Incomplete Response]");break}if(o==bA){n.o=4,us(15),jf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}jf(n.j,n.m,o,null),Xb(n,o)}gP(n)&&o!=_v&&o!=bA&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,us(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),pC(e),e.L=!0,us(11))):(jf(n.j,n.m,t,"[Invalid Chunked Response]"),zd(n),pm(n))}function mP(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?_v:(t=Number(e.substring(t,r)),isNaN(t)?bA:(r+=1)+t>e.length?_v:(e=e.substr(r,t),n.C=r+t,e))}function fm(n){n.Y=Date.now()+n.P,IA(n,n.P)}function IA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=cm(vi(n.eb,n),e)}function Jb(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function pm(n){0==n.l.G||n.I||MP(n.l,n)}function zd(n){Jb(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,dA(n.W),uP(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Xb(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||iC(t.i,n)))if(t.I=n.N,!n.J&&iC(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=cm(vi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;gC(t),hC(t)}VA(t),us(18)}if(1>=NA(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else i(t,11)}else if((n.J||t.g==n)&&gC(t),!nv(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=b[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const O=b[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const $=n.g;if($){const K=$.g?$.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var u=r.i;!u.g&&(ji(K,"spdy")||ji(K,"quic")||ji(K,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(au(u,u.h),u.h=null))}if(r.D){const ye=$.g?$.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,Yn(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=a(r,r.H?r.la:null,r.W),c.J){zf(r.i,c);var p=c,y=r.K;y&&p.setTimeout(y),p.B&&(Jb(p),fm(p)),r.g=c}else RP(r);0<t.l.length&&fC(t)}else"stop"!=b[0]&&"close"!=b[0]||i(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?i(t,7):dC(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}pv(4)}catch(b){}}function TA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Tb(n)||"string"==typeof n)QS(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Tb(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Tb(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Kd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Kd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function eC(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];wc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)wc(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function wc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=hm.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==tl(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const S=tl(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||Ob||this.g&&(this.h.h||this.g.ga()||PA(this.g)))){this.I||4!=S||7==e||pv(8==e||0>=x?3:2),Jb(this);var t=this.g.ba();this.N=t;t:if(gP(this)){var r=PA(this.g);n="";var o=r.length,u=4==tl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){zd(this),pm(this);var c="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,y=this.g;if((p=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nv(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,us(12),zd(this),pm(this);break e}jf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xb(this,t)}this.U?(yv(this,S,c),Ob&&this.i&&3==S&&(aP(this.V,this.W,"tick",this.fb),this.W.start())):(jf(this.j,this.m,c,null),Xb(this,c)),4==S&&zd(this),this.i&&!this.I&&(4==S?MP(this.l,this):(this.i=!1,fm(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,us(12)):(this.o=0,us(13)),zd(this),pm(this)}}}catch(S){}},rt.fb=function(){if(this.g){var n=tl(this.g),e=this.g.ga();this.C<e.length&&(Jb(this),yv(this,n,e),this.i&&4!=n&&fm(this))}},rt.cancel=function(){this.I=!0,zd(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pv(3),us(17)),zd(this),this.o=2,pm(this)):IA(this,this.Y-n)},(rt=Kd.prototype).R=function(){eC(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return eC(this),this.g.concat()},rt.get=function(n,e){return wc(this.h,n)?this.h[n]:e},rt.set=function(n,e){wc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var tC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function el(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof el){this.g=void 0!==e?e:n.g,Gf(this,n.j),this.s=n.s,Zd(this,n.i),Yd(this,n.m),this.l=n.l,e=n.h;var t=new Wf;t.i=e.i,e.g&&(t.g=new Kd(e.g),t.h=e.h),nC(this,t),this.o=n.o}else n&&(t=String(n).match(tC))?(this.g=!!e,Gf(this,t[1]||"",!0),this.s=gm(t[2]||""),Zd(this,t[3]||"",!0),Yd(this,t[4]),this.l=gm(t[5]||"",!0),nC(this,t[6]||"",!0),this.o=gm(t[7]||"")):(this.g=!!e,this.h=new Wf(null,this.g))}function Ca(n){return new el(n)}function Gf(n,e,t){n.j=t?gm(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Zd(n,e,t){n.i=t?gm(e,!0):e}function Yd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nC(n,e,t){e instanceof Wf?(n.h=e,function(n,e){e&&!n.j&&(Ia(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(bv(this,r),ym(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=mm(e,_m)),n.h=new Wf(e,n.g))}function Yn(n,e,t){n.h.set(e,t)}function vv(n){return Yn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function gm(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function mm(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,yP),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function yP(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}el.prototype.toString=function(){var n=[],e=this.j;e&&n.push(mm(e,Ev,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(mm(e,Ev,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(mm(t,"/"==t.charAt(0)?ls:vP,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",mm(t,wv)),n.join("")};var Ev=/[#\/\?@]/g,vP=/[#\?:]/g,ls=/[#\?]/g,_m=/[#\?@]/g,wv=/#/g;function Wf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ia(n){n.g||(n.g=new Kd,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function bv(n,e){Ia(n),e=qf(n,e),wc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,wc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&eC(n)))}function rC(n,e){return Ia(n),e=qf(n,e),wc(n.g.h,e)}function ym(n,e,t){bv(n,e),0<t.length&&(n.i=null,n.g.set(qf(n,e),tv(t)),n.h+=t.length)}function qf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function AA(n){this.l=n||xA,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ea&&Bt.g.Ea()&&Bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Wf.prototype).add=function(n,e){Ia(this),this.i=null,n=qf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){Ia(this),this.g.forEach(function(t,r){QS(t,function(o){n.call(e,o,r,this)},this)},this)},rt.T=function(){Ia(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},rt.R=function(n){Ia(this);var e=[];if("string"==typeof n)rC(this,n)&&(e=xb(e,this.g.get(qf(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=xb(e,n[t])}return e},rt.set=function(n,e){return Ia(this),this.i=null,rC(this,n=qf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=o;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var xA=10;function RA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function NA(n){return n.h?1:n.g?n.g.size:0}function iC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function au(n,e){n.g?n.g.add(e):n.h=e}function zf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Cv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return tv(n.i)}function sC(){}function bP(){this.g=new sC}function CP(n,e,t){const r=t||"";try{TA(n,function(o,u){let c=o;ev(o)&&(c=Gb(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Iv(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Kf(n){this.l=n.$b||null,this.j=n.ib||!1}function vm(n,e){Jr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=aC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}AA.prototype.cancel=function(){if(this.i=Cv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},sC.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},sC.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},Ei(Kf,Qs),Kf.prototype.g=function(){return new vm(this.l,this.j)},Kf.prototype.i=function(n){return function(){return n}}({}),Ei(vm,Jr);var aC=0;function MA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Em(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Js(n)}function Js(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=vm.prototype).open=function(n,e){if(this.readyState!=aC)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Js(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Em(this)),this.readyState=aC},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Em(this):Js(this),3==this.readyState&&MA(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,Em(this))},rt.Ta=function(n){this.g&&(this.response=n,Em(this))},rt.ha=function(){this.g&&Em(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(vm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var wm=Bt.JSON.parse;function Qn(n){Jr.call(this),this.headers=new Kd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bm,this.K=this.L=!1}Ei(Qn,Jr);var bm="",Zf=/^https?$/i,IP=["POST","PUT"];function DP(n){return"content-type"==n.toLowerCase()}function uC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lC(n),Cm(n)}function lC(n){n.D||(n.D=!0,bi(n,"complete"),bi(n,"error"))}function cC(n){if(n.h&&void 0!==Ib&&(!n.C[1]||4!=tl(n)||2!=n.ba()))if(n.v&&4==tl(n))Kb(n.Fa,0,n);else if(bi(n,"readystatechange"),4==tl(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(tC)[1]||null;if(!o&&Bt.self&&Bt.self.location){var u=Bt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Zf.test(o?o.toLowerCase():"")}t=r}if(t)bi(n,"complete"),bi(n,"success");else{n.m=6;try{var c=2<tl(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",lC(n)}}finally{Cm(n)}}}function Cm(n,e){if(n.g){Tv(n);const t=n.g,r=n.C[0]?sm:null;n.g=null,n.C=null,e||bi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function Tv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function tl(n){return n.g?n.g.readyState:0}function PA(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case bm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nl(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return iv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Yn(n,e,t))}function Qd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function kA(n){this.za=0,this.l=[],this.h=new Zb,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qd("baseRetryDelayMs",5e3,n),this.$a=Qd("retryDelaySeedMs",1e4,n),this.Ya=Qd("forwardChannelMaxRetries",2,n),this.ra=Qd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new AA(n&&n.concurrentRequestLimit),this.Ca=new bP,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function dC(n){if(SP(n),3==n.G){var e=n.V++,t=Ca(n.F);Yn(t,"SID",n.J),Yn(t,"RID",e),Yn(t,"TYPE","terminate"),Dv(n,t),(e=new hm(n,n.h,e,void 0)).K=2,e.v=vv(Ca(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(t=Bt.navigator.sendBeacon(e.v.toString(),"")),!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=l(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fm(e)}s(n)}function hC(n){n.g&&(pC(n),n.g.cancel(),n.g=null)}function SP(n){hC(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),gC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function FA(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&fC(n)}function fC(n){RA(n.i)||n.m||(n.m=!0,lm(n.Ha,n),n.C=0)}function LA(n,e){var t;t=e?e.m:n.V++;const r=Ca(n.F);Yn(r,"SID",n.J),Yn(r,"RID",t),Yn(r,"AID",n.U),Dv(n,r),n.o&&n.s&&nl(r,n.o,n.s),t=new hm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xP(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),au(n.i,t),CA(t,r,e)}function Dv(n,e){n.j&&TA({},function(t,r){Yn(e,r,t)})}function xP(n,e,t){t=Math.min(n.l.length,t);var r=n.j?vi(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let y=0;y<t;y++){let b=o[y].h;const S=o[y].g;if(b-=u,0>b)u=Math.max(0,o[y].h-100),p=!1;else try{CP(S,c,"req"+b+"_")}catch(x){r&&r(S)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function RP(n){n.g||n.u||(n.Y=1,lm(n.Ga,n),n.A=0)}function VA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=cm(vi(n.Ga,n),PP(n,n.A)),n.A++,0))}function pC(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function NP(n){n.g=new hm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ca(n.oa);Yn(e,"RID","rpc"),Yn(e,"SID",n.J),Yn(e,"CI",n.N?"0":"1"),Yn(e,"AID",n.U),Dv(n,e),Yn(e,"TYPE","xmlhttp"),n.o&&n.s&&nl(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=vv(Ca(e)),t.s=null,t.U=!0,pP(t,n)}function gC(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function MP(n,e){var t=null;if(n.g==e){gC(n),pC(n),n.g=null;var r=2}else{if(!iC(n.i,e))return;t=e.D,zf(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;bi(r=fv(),new mA(r,t,e,o)),fC(n)}else RP(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(NA(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=cm(vi(n.Ha,n,e),PP(n,n.C)),n.C++,0)))}(n,e)||2==r&&VA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:i(n,5);break;case 4:i(n,10);break;case 3:i(n,6);break;default:i(n,2)}}function PP(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function i(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=vi(n.jb,n);t||(t=new el("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||Gf(t,"https"),vv(t)),function(n,e){const t=new Zb;if(Bt.Image){const r=new Image;r.onload=Uf(Iv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Uf(Iv,t,r,"TestLoadImage: error",!1,e),r.onabort=Uf(Iv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Uf(Iv,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else us(2);n.G=0,n.j&&n.j.va(e),s(n),SP(n)}function s(n){n.G=0,n.I=-1,n.j&&((0!=Cv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,tv(n.l),n.l.length=0),n.j.ua())}function a(n,e,t){let r=function(n){return n instanceof el?Ca(n):new el(n,void 0)}(t);if(""!=r.i)e&&Zd(r,e+"."+r.i),Yd(r,r.m);else{const o=Bt.location;r=function(n,e,t,r){var o=new el(null,void 0);return n&&Gf(o,n),e&&Zd(o,e),t&&Yd(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&iv(n.aa,function(o,u){Yn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Yn(r,e,t),Yn(r,"VER",n.ma),Dv(n,r),r}function l(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(t&&n.Ba&&!n.qa?new Kf({ib:!0}):n.qa)).L=n.H,e}function d(){}function h(){if(am&&!(10<=Number(eP)))throw Error("Environmental error: no available transport.")}function _(n,e){Jr.call(this),this.g=new kA(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!nv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new T(this)}function E(n){Yb.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function C(){EA.call(this),this.status=1}function T(n){this.g=n}(rt=Qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qb.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Qb),this.g.onreadystatechange=vi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void uC(this,u)}n=t||"";const o=new Kd(this.headers);r&&TA(r,function(u,c){o.set(c,u)}),r=function(n){e:{var e=DP;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Bt.FormData&&n instanceof Bt.FormData,!(0<=YS(IP,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Tv(this),0<this.B&&((this.K=function(n){return am&&DF()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vi(this.pa,this)):this.A=Kb(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){uC(this,u)}},rt.pa=function(){void 0!==Ib&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bi(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,bi(this,"complete"),bi(this,"abort"),Cm(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cm(this,!0)),Qn.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?cC(this):this.cb())},rt.cb=function(){cC(this)},rt.ba=function(){try{return 2<tl(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),wm(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=kA.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new hm(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=sv(u),$o(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xP(this,o,e),Yn(t=Ca(this.F),"RID",n),Yn(t,"CVER",22),this.D&&Yn(t,"X-HTTP-Session-Id",this.D),Dv(this,t),this.o&&u&&nl(t,this.o,u),au(this.i,o),this.Ra&&Yn(t,"TYPE","init"),this.ja?(Yn(t,"$req",e),Yn(t,"SID","null"),o.$=!0,CA(o,t,null)):CA(o,t,e),this.G=2}}else 3==this.G&&(n?LA(this,n):0==this.l.length||RA(this.i)||LA(this))},rt.Ga=function(){if(this.u=null,NP(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=cm(vi(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,us(10),hC(this),NP(this))},rt.ab=function(){null!=this.v&&(this.v=null,hC(this),VA(this),us(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),us(2)):(this.h.info("Failed to ping google.com"),us(1))},(rt=d.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},h.prototype.g=function(n,e){return new _(n,e)},Ei(_,Jr),_.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),lm(vi(n.hb,n,e))),us(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=a(n,null,n.W),fC(n)},_.prototype.close=function(){dC(this.g)},_.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,FA(this.g,e)}else this.v?((e={}).__data__=Gb(n),FA(this.g,e)):FA(this.g,n)},_.prototype.M=function(){this.g.j=null,delete this.j,dC(this.g),delete this.g,_.Z.M.call(this)},Ei(E,Yb),Ei(C,EA),Ei(T,d),T.prototype.xa=function(){bi(this.g,"a")},T.prototype.wa=function(n){bi(this.g,new E(n))},T.prototype.va=function(n){bi(this.g,new C(n))},T.prototype.ua=function(){bi(this.g,"b")},h.prototype.createWebChannel=h.prototype.g,_.prototype.send=_.prototype.u,_.prototype.open=_.prototype.m,_.prototype.close=_.prototype.close,gv.NO_ERROR=0,gv.TIMEOUT=8,gv.HTTP_ERROR=6,_A.COMPLETE="complete",vA.EventType=dm,dm.OPEN="a",dm.CLOSE="b",dm.ERROR="c",dm.MESSAGE="d",Jr.prototype.listen=Jr.prototype.N,Qn.prototype.listenOnce=Qn.prototype.O,Qn.prototype.getLastError=Qn.prototype.La,Qn.prototype.getLastErrorCode=Qn.prototype.Da,Qn.prototype.getStatus=Qn.prototype.ba,Qn.prototype.getResponseJson=Qn.prototype.Qa,Qn.prototype.getResponseText=Qn.prototype.ga,Qn.prototype.send=Qn.prototype.ea;var R=yc.createWebChannelTransport=function(){return new h},P=yc.getStatEventTarget=function(){return fv()},F=yc.ErrorCode=gv,W=yc.EventType=_A,Y=yc.Event=$f,de=yc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ie=yc.FetchXmlHttpFactory=Kf,Oe=yc.WebChannel=vA,Ce=yc.XhrIo=Qn;const lt="@firebase/firestore";class it{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");let qt="9.6.11";const Hn=new da.Yd("@firebase/firestore");function Ss(){return Hn.logLevel}function Fe(n,...e){if(Hn.logLevel<=da.in.DEBUG){const t=e.map(Tm);Hn.debug(`Firestore (${qt}): ${n}`,...t)}}function Jn(n,...e){if(Hn.logLevel<=da.in.ERROR){const t=e.map(Tm);Hn.error(`Firestore (${qt}): ${n}`,...t)}}function uu(n,...e){if(Hn.logLevel<=da.in.WARN){const t=e.map(Tm);Hn.warn(`Firestore (${qt}): ${n}`,...t)}}function Tm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${qt}) INTERNAL ASSERTION FAILED: `+n;throw Jn(e),new Error(e)}function It(n,e){n||Xe()}function qe(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class AF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(it.UNAUTHENTICATED))}shutdown(){}}class M2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class P2{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let c=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new $i,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new $i)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new AF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new it(e)}}class O2{constructor(e,t,r){this.type="FirstParty",this.user=it.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class k2{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new O2(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F2{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new xF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function L2(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ta.A=-1;class RF{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=L2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function Sv(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function NF(n){return n+"\0"}class Xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xr.fromMillis(Date.now())}static fromDate(e){return Xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Xr(0,0))}static max(){return new xt(new Xr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function MF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dm(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _C{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_C.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _C?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _n extends _C{construct(e,t,r){return new _n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new _n(t)}static emptyPath(){return new _n([])}}const V2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hi extends _C{construct(e,t,r){return new Hi(e,t,r)}static isValidIdentifier(e){return V2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Hi(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Pe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Pe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else"`"===p?(c=!c,o++):"."!==p||c?(r+=p,o++):(u(),o++)}if(u(),c)throw new Pe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hi(t)}static emptyPath(){return new Hi([])}}class Av{constructor(e){this.fields=e,e.sort(Hi.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sv(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ci(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const B2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yf(n){if(It(!!n),"string"==typeof n){let e=0;const t=B2.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vr(n.seconds),nanos:Vr(n.nanos)}}function Vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Sm(n){return"string"==typeof n?Ci.fromBase64String(n):Ci.fromUint8Array(n)}function OP(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function OF(n){const e=n.mapValue.fields.__previous_value__;return OP(e)?OF(e):e}function yC(n){const e=Yf(n.mapValue.fields.__local_write_time__.timestampValue);return new Xr(e.seconds,e.nanos)}class j2{constructor(e,t,r,o,u,c,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=y}}class Jd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Jd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jd&&e.projectId===this.projectId&&e.database===this.database}}function Am(n){return null==n}function vC(n){return 0===n&&1/n==-1/0}function kF(n){return"number"==typeof n&&Number.isInteger(n)&&!vC(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class We{constructor(e){this.path=e}static fromPath(e){return new We(_n.fromString(e))}static fromName(e){return new We(_n.fromString(e).popFirst(5))}static empty(){return new We(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new _n(e.slice()))}}const FF={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},LF={nullValue:"NULL_VALUE"};function xm(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?OP(n)?4:jF(n)?9:10:Xe()}function bc(n,e){if(n===e)return!0;const t=xm(n);if(t!==xm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yC(n).isEqual(yC(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Yf(r.timestampValue),c=Yf(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Sm(n.bytesValue).isEqual(Sm(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Vr(r.geoPointValue.latitude)===Vr(o.geoPointValue.latitude)&&Vr(r.geoPointValue.longitude)===Vr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vr(r.integerValue)===Vr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Vr(r.doubleValue),c=Vr(o.doubleValue);return u===c?vC(u)===vC(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Sv(n.arrayValue.values||[],e.arrayValue.values||[],bc);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(MF(u)!==MF(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!bc(u[p],c[p])))return!1;return!0}(n,e);default:return Xe()}var o}function EC(n,e){return void 0!==(n.values||[]).find(t=>bc(t,e))}function Qf(n,e){if(n===e)return 0;const t=xm(n),r=xm(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Vr(o.integerValue||o.doubleValue),p=Vr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return VF(n.timestampValue,e.timestampValue);case 4:return VF(yC(n),yC(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=Sm(o),p=Sm(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),p=u.split("/");for(let y=0;y<c.length&&y<p.length;y++){const b=Yt(c[y],p[y]);if(0!==b)return b}return Yt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=Yt(Vr(o.latitude),Vr(u.latitude));return 0!==c?c:Yt(Vr(o.longitude),Vr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],p=u.values||[];for(let y=0;y<c.length&&y<p.length;++y){const b=Qf(c[y],p[y]);if(b)return b}return Yt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const c=o.fields||{},p=Object.keys(c),y=u.fields||{},b=Object.keys(y);p.sort(),b.sort();for(let S=0;S<p.length&&S<b.length;++S){const x=Yt(p[S],b[S]);if(0!==x)return x;const O=Qf(c[p[S]],y[b[S]]);if(0!==O)return O}return Yt(p.length,b.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function VF(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=Yf(n),r=Yf(e),o=Yt(t.seconds,r.seconds);return 0!==o?o:Yt(t.nanos,r.nanos)}function xv(n){return kP(n)}function kP(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Yf(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Sm(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=kP(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of o)c?c=!1:u+=",",u+=`${p}:${kP(r.fields[p])}`;return u+"}"}(n.mapValue):Xe();var e}function Rm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function FP(n){return!!n&&"integerValue"in n}function wC(n){return!!n&&"arrayValue"in n}function UF(n){return!!n&&"nullValue"in n}function BF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function UA(n){return!!n&&"mapValue"in n}function bC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Dm(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bC(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jF(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function $2(n){return"nullValue"in n?LF:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Rm(Jd.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function H2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Rm(Jd.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?FF:Xe()}function $F(n,e){return void 0===n?e:void 0===e||Qf(n,e)>0?n:e}function HF(n,e){return void 0===n?e:void 0===e||Qf(n,e)<0?n:e}class As{constructor(e){this.value=e}static empty(){return new As({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!UA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bC(t)}setAll(e){let t=Hi.emptyPath(),r={},o=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=p.popLast()}c?r[p.lastSegment()]=bC(c):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());UA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];UA(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Dm(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new As(bC(this.value))}}function GF(n){const e=[];return Dm(n.fields,(t,r)=>{const o=new Hi([t]);if(UA(r)){const u=GF(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new Av(e)}class dr{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new dr(e,0,xt.min(),xt.min(),As.empty(),0)}static newFoundDocument(e,t,r){return new dr(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new dr(e,2,t,xt.min(),As.empty(),0)}static newUnknownDocument(e,t){return new dr(e,3,t,xt.min(),As.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class BA{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function LP(n){return n.fields.find(e=>2===e.kind)}function Nm(n){return n.fields.filter(e=>2!==e.kind)}BA.UNKNOWN_ID=-1;class jA{constructor(e,t){this.fieldPath=e,this.kind=t}}class CC{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new CC(0,Xd.min())}}function WF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=xt.fromTimestamp(1e9===r?new Xr(t+1,0):new Xr(t,r));return new Xd(o,We.empty(),e)}function G2(n){return new Xd(n.readTime,n.key,-1)}class Xd{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xd(xt.min(),We.empty(),-1)}static max(){return new Xd(xt.max(),We.empty(),-1)}}function W2(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}class q2{constructor(e,t=null,r=[],o=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=p,this.P=null}}function qF(n,e=null,t=[],r=[],o=null,u=null,c=null){return new q2(n,e,t,r,o,u,c)}function Mm(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+xv(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Am(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xv(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xv(r)).join(",")),e.P=t}return e.P}function IC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!tB(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!bc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QF(n.startAt,e.startAt)&&QF(n.endAt,e.endAt)}function $A(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function HA(n,e){return n.filters.filter(t=>t instanceof cs&&t.field.isEqual(e))}function zF(n,e,t){let r,o=!0;for(const u of HA(n,e)){let c,p=!0;switch(u.op){case"<":case"<=":c=$2(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=LF}$F(r,c)===c&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];$F(r,c)===c&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function KF(n,e,t){let r,o=!0;for(const u of HA(n,e)){let c,p=!0;switch(u.op){case">=":case">":c=H2(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=FF}HF(r,c)===c&&(r=c,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];HF(r,c)===c&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class cs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new K2(e,t,r):"array-contains"===t?new Q2(e,r):"in"===t?new J2(e,r):"not-in"===t?new X2(e,r):"array-contains-any"===t?new eB(e,r):new cs(e,t,r)}static V(e,t,r){return"in"===t?new Z2(e,r):new Y2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Qf(t,this.value)):null!==t&&xm(this.value)===xm(t)&&this.v(Qf(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class K2 extends cs{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.v(t)}}class Z2 extends cs{constructor(e,t){super(e,"in",t),this.keys=ZF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Y2 extends cs{constructor(e,t){super(e,"not-in",t),this.keys=ZF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ZF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class Q2 extends cs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wC(t)&&EC(t.arrayValue,this.value)}}class J2 extends cs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&EC(this.value.arrayValue,t)}}class X2 extends cs{constructor(e,t){super(e,"not-in",t)}matches(e){if(EC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!EC(this.value.arrayValue,t)}}class eB extends cs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>EC(this.value.arrayValue,r))}}class Jf{constructor(e,t){this.position=e,this.inclusive=t}}class Rv{constructor(e,t="asc"){this.field=e,this.dir=t}}function tB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function YF(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?We.comparator(We.fromName(c.referenceValue),t.key):Qf(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function QF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!bc(n.position[t],e.position[t]))return!1;return!0}class eh{constructor(e,t=null,r=[],o=[],u=null,c="F",p=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=y,this.D=null,this.C=null}}function JF(n,e,t,r,o,u,c,p){return new eh(n,e,t,r,o,u,c,p)}function Nv(n){return new eh(n)}function GA(n){return!Am(n.limit)&&"F"===n.limitType}function WA(n){return!Am(n.limit)&&"L"===n.limitType}function VP(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function UP(n){for(const e of n.filters)if(e.S())return e.field;return null}function BP(n){return null!==n.collectionGroup}function Mv(n){const e=qe(n);if(null===e.D){e.D=[];const t=UP(e),r=VP(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Rv(t)),e.D.push(new Rv(Hi.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Rv(Hi.keyField(),u))}}}return e.D}function lu(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=qF(e.path,e.collectionGroup,Mv(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Mv(e))t.push(new Rv(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Jf(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Jf(e.startAt.position,!e.startAt.inclusive):null;e.C=qF(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function XF(n,e,t){return new eh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function TC(n,e){return IC(lu(n),lu(e))&&n.limitType===e.limitType}function eL(n){return`${Mm(lu(n))}|lt:${n.limitType}`}function jP(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${xv(r.value)}`;var r}).join(", ")}]`),Am(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>xv(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>xv(t)).join(",")),`Target(${e})`}(lu(n))}; limitType=${n.limitType})`}function $P(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):We.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const p=YF(o,u,c);return o.inclusive?p<=0:p<0}(t.startAt,Mv(t),r)||t.endAt&&!function(o,u,c){const p=YF(o,u,c);return o.inclusive?p>=0:p>0}(t.endAt,Mv(t),r)));var t,r}function tL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nL(n){return(e,t)=>{let r=!1;for(const o of Mv(n)){const u=nB(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function nB(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(o,u,c){const p=u.data.field(o),y=c.data.field(o);return null!==p&&null!==y?Qf(p,y):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function rL(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vC(e)?"-0":e}}function iL(n){return{integerValue:""+n}}function sL(n,e){return kF(e)?iL(e):rL(n,e)}class qA{constructor(){this._=void 0}}function rB(n,e,t){return n instanceof Pv?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Pm?aL(n,e):n instanceof Om?uL(n,e):function(r,o){const u=oL(r,o),c=lL(u)+lL(r.k);return FP(u)&&FP(r.k)?iL(c):rL(r.M,c)}(n,e)}function iB(n,e,t){return n instanceof Pm?aL(n,e):n instanceof Om?uL(n,e):t}function oL(n,e){return n instanceof Ov?FP(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Pv extends qA{}class Pm extends qA{constructor(e){super(),this.elements=e}}function aL(n,e){const t=cL(e);for(const r of n.elements)t.some(o=>bc(o,r))||t.push(r);return{arrayValue:{values:t}}}class Om extends qA{constructor(e){super(),this.elements=e}}function uL(n,e){let t=cL(e);for(const r of n.elements)t=t.filter(o=>!bc(o,r));return{arrayValue:{values:t}}}class Ov extends qA{constructor(e,t){super(),this.M=e,this.k=t}}function lL(n){return Vr(n.integerValue||n.doubleValue)}function cL(n){return wC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class DC{constructor(e,t){this.field=e,this.transform=t}}class oB{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class KA{}function aB(n,e,t){n instanceof SC?function(r,o,u){const c=r.value.clone(),p=pL(r.fieldTransforms,o,u.transformResults);c.setAll(p),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof km?function(r,o,u){if(!zA(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=pL(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(fL(r)),p.setAll(c),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function HP(n,e,t){var o;n instanceof SC?function(r,o,u){if(!zA(r.precondition,o))return;const c=r.value.clone(),p=gL(r.fieldTransforms,u,o);c.setAll(p),o.convertToFoundDocument(hL(o),c).setHasLocalMutations()}(n,e,t):n instanceof km?function(r,o,u){if(!zA(r.precondition,o))return;const c=gL(r.fieldTransforms,u,o),p=o.data;p.setAll(fL(r)),p.setAll(c),o.convertToFoundDocument(hL(o),p).setHasLocalMutations()}(n,e,t):zA(n.precondition,o=e)&&o.convertToNoDocument(xt.min())}function uB(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=oL(r.transform,o||null);null!=u&&(null==t&&(t=As.empty()),t.set(r.field,u))}return t||null}function dL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sv(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Pm&&r instanceof Pm||t instanceof Om&&r instanceof Om?Sv(t.elements,r.elements,bc):t instanceof Ov&&r instanceof Ov?bc(t.k,r.k):t instanceof Pv&&r instanceof Pv);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function hL(n){return n.isFoundDocument()?n.version:xt.min()}class SC extends KA{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class km extends KA{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function fL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function pL(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,p=e.data.field(u.field);r.set(u.field,iB(c,p,t[o]))}return r}function gL(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,rB(u,c,e))}return r}class AC extends KA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class GP extends KA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class lB{constructor(e){this.count=e}}var li,yn;function mL(n){switch(n){default:return Xe();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function _L(n){if(void 0===n)return Jn("GRPC error has no .code"),ge.UNKNOWN;switch(n){case li.OK:return ge.OK;case li.CANCELLED:return ge.CANCELLED;case li.UNKNOWN:return ge.UNKNOWN;case li.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case li.INTERNAL:return ge.INTERNAL;case li.UNAVAILABLE:return ge.UNAVAILABLE;case li.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case li.NOT_FOUND:return ge.NOT_FOUND;case li.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case li.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case li.ABORTED:return ge.ABORTED;case li.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case li.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case li.DATA_LOSS:return ge.DATA_LOSS;default:return Xe()}}(yn=li||(li={}))[yn.OK=0]="OK",yn[yn.CANCELLED=1]="CANCELLED",yn[yn.UNKNOWN=2]="UNKNOWN",yn[yn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yn[yn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yn[yn.NOT_FOUND=5]="NOT_FOUND",yn[yn.ALREADY_EXISTS=6]="ALREADY_EXISTS",yn[yn.PERMISSION_DENIED=7]="PERMISSION_DENIED",yn[yn.UNAUTHENTICATED=16]="UNAUTHENTICATED",yn[yn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yn[yn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yn[yn.ABORTED=10]="ABORTED",yn[yn.OUT_OF_RANGE=11]="OUT_OF_RANGE",yn[yn.UNIMPLEMENTED=12]="UNIMPLEMENTED",yn[yn.INTERNAL=13]="INTERNAL",yn[yn.UNAVAILABLE=14]="UNAVAILABLE",yn[yn.DATA_LOSS=15]="DATA_LOSS";class Xf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Dm(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return PF(this.inner)}size(){return this.innerSize}}class ei{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new ei(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new ei(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ZA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ZA(this.root,e,this.comparator,!1)}getReverseIterator(){return new ZA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ZA(this.root,e,this.comparator,!0)}}class ZA{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ds.RED,this.left=null!=o?o:ds.EMPTY,this.right=null!=u?u:ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ds(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ds.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ds(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hr{constructor(e){this.comparator=e,this.data=new ei(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yL(this.data.getIterator())}getIteratorFrom(e){return new yL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hr(this.comparator);return t.data=e,t}}class yL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kv(n){return n.hasNext()?n.getNext():void 0}const cB=new ei(We.comparator);function cu(){return cB}const dB=new ei(We.comparator);function WP(){return dB}function xC(){return new Xf(n=>n.toString(),(n,e)=>n.isEqual(e))}const hB=new ei(We.comparator),fB=new hr(We.comparator);function Rn(...n){let e=fB;for(const t of n)e=e.add(t);return e}const pB=new hr(Yt);function YA(){return pB}class RC{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,NC.createSynthesizedTargetChangeForCurrentChange(e,t)),new RC(xt.min(),r,YA(),cu(),Rn())}}class NC{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new NC(Ci.EMPTY_BYTE_STRING,t,Rn(),Rn(),Rn())}}class QA{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class vL{constructor(e,t){this.targetId=e,this.$=t}}class EL{constructor(e,t,r=Ci.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class wL{constructor(){this.B=0,this.L=CL(),this.U=Ci.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Rn(),t=Rn(),r=Rn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new NC(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=CL()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class gB{constructor(e){this.nt=e,this.st=new Map,this.it=cu(),this.rt=bL(),this.ot=new hr(Yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if($A(u))if(0===r){const c=new We(u.path);this.ct(t,c,dr.newNoDocument(c,xt.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const p=this.wt(c);if(p){if(u.current&&$A(p.target)){const y=new We(p.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,dr.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=Rn();this.rt.forEach((u,c)=>{let p=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const o=new RC(e,t,this.ot,this.it,r);return this.it=cu(),this.rt=bL(),this.ot=new hr(Yt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new wL,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new hr(Yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new wL),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function bL(){return new ei(We.comparator)}function CL(){return new ei(We.comparator)}const mB={asc:"ASCENDING",desc:"DESCENDING"},_B={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class yB{constructor(e,t){this.databaseId=e,this.N=t}}function MC(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IL(n,e){return n.N?e.toBase64():e.toUint8Array()}function vB(n,e){return MC(n,e.toTimestamp())}function Gi(n){return It(!!n),xt.fromTimestamp(function(e){const t=Yf(e);return new Xr(t.seconds,t.nanos)}(n))}function qP(n,e){return(t=n,new _n(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function TL(n){const e=_n.fromString(n);return It(OL(e)),e}function PC(n,e){return qP(n.databaseId,e.path)}function Cc(n,e){const t=TL(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(SL(t))}function zP(n,e){return qP(n.databaseId,e)}function DL(n){const e=TL(n);return 4===e.length?_n.emptyPath():SL(e)}function OC(n){return new _n(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SL(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function AL(n,e,t){return{name:PC(n,e),fields:t.value.mapValue.fields}}function xL(n,e,t){const r=Cc(n,e.name),o=Gi(e.updateTime),u=new As({mapValue:{fields:e.fields}}),c=dr.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function kC(n,e){let t;if(e instanceof SC)t={update:AL(n,e.key,e.value)};else if(e instanceof AC)t={delete:PC(n,e.key)};else if(e instanceof km)t={update:AL(n,e.key,e.data),updateMask:AB(e.fieldMask)};else{if(!(e instanceof GP))return Xe();t={verify:PC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Pv)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Pm)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Om)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ov)return{fieldPath:u.field.canonicalString(),increment:c.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:vB(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function KP(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?ui.updateTime(Gi(o.updateTime)):void 0!==o.exists?ui.exists(o.exists):ui.none():ui.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let p=null;"setToServerValue"in c?(It("REQUEST_TIME"===c.setToServerValue),p=new Pv):"appendMissingElements"in c?p=new Pm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Om(c.removeAllFromArray.values||[]):"increment"in c?p=new Ov(u,c.increment):Xe();const y=Hi.fromServerFormat(c.fieldPath);return new DC(y,p)}(n,o)):[];var o;if(e.update){const o=Cc(n,e.update.name),u=new As({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Av((e.updateMask.fieldPaths||[]).map(b=>Hi.fromServerFormat(b)));return new km(o,u,c,t,r)}return new SC(o,u,t,r)}if(e.delete){const o=Cc(n,e.delete);return new AC(o,t)}if(e.verify){const o=Cc(n,e.verify);return new GP(o,t)}return Xe()}function RL(n,e){return{documents:[zP(n,e.path)]}}function NL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zP(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zP(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(y){if(0===y.length)return;const b=y.map(S=>function(x){if("=="===x.op){if(BF(x.value))return{unaryFilter:{field:Fv(x.field),op:"IS_NAN"}};if(UF(x.value))return{unaryFilter:{field:Fv(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(BF(x.value))return{unaryFilter:{field:Fv(x.field),op:"IS_NOT_NAN"}};if(UF(x.value))return{unaryFilter:{field:Fv(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fv(x.field),op:TB(x.op),value:x.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:Fv((S=b).field),direction:IB(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Am(b)?b:{value:b});var b,p,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function ML(n){let e=DL(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=PL(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new Rv(Lv((x=S).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(S){let x;return x="object"==typeof S?S.value:S,Am(x)?null:x}(t.limit));let y=null;var S;t.startAt&&(y=new Jf((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new Jf(S.values||[],!S.before)}(t.endAt)),JF(e,o,c,u,p,"F",y,b)}function PL(n){return n?void 0!==n.unaryFilter?[SB(n)]:void 0!==n.fieldFilter?[DB(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>PL(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function IB(n){return mB[n]}function TB(n){return _B[n]}function Fv(n){return{fieldPath:n.canonicalString()}}function Lv(n){return Hi.fromServerFormat(n.fieldPath)}function DB(n){return cs.create(Lv(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function SB(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Lv(n.unaryFilter.field);return cs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Lv(n.unaryFilter.field);return cs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Lv(n.unaryFilter.field);return cs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lv(n.unaryFilter.field);return cs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function AB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Xs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kL(e)),e=xB(n.get(t),e);return kL(e)}function xB(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function kL(n){return n+"\x01\x01"}function Ic(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_n.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&Xe(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let y;0===o.length?y=p:(o+=p,y=o,o=""),r.push(y);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:Xe()}u=c+2}return new _n(r)}const FL=["userId","batchId"];function JA(n,e){return[n,Xs(e)]}function LL(n,e,t){return[n,Xs(e),t]}const RB={},NB=["prefixPath","collectionGroup","readTime","documentId"],MB=["prefixPath","collectionGroup","documentId"],PB=["collectionGroup","readTime","prefixPath","documentId"],OB=["canonicalId","targetId"],kB=["targetId","path"],FB=["path","targetId"],LB=["collectionId","parent"],VB=["indexId","uid"],UB=["uid","sequenceNumber"],BB=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jB=["indexId","uid","orderedDocumentKey"],$B=["userId","collectionPath","documentId"],HB=["userId","collectionPath","largestBatchId"],GB=["userId","collectionGroup","largestBatchId"],VL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],WB=[...VL,"documentOverlays"],UL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qB=[...UL,"indexConfiguration","indexState","indexEntries"],BL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ve((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ve?t:ve.resolve(t)}catch(t){return ve.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ve.reject(t)}static resolve(e){return new ve((t,r)=>{t(e)})}static reject(e){return new ve((t,r)=>{r(e)})}static waitFor(e){return new ve((t,r)=>{let o=0,u=0,c=!1;e.forEach(p=>{++o,p.next(()=>{++u,c&&u===o&&t()},y=>r(y))}),c=!0,u===o&&t()})}static or(e){let t=ve.resolve(!1);for(const r of e)t=t.next(o=>o?ve.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class XA{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new $i,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new FC(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=ZP(r.target.error);this.At.reject(new FC(e,o))}}static open(e,t,r,o){try{return new XA(t,e.transaction(o,r))}catch(u){throw new FC(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KB(t)}}class rl{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===rl.Vt((0,k.z$)())&&Jn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Lm(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(rl.St())return!0;const e=(0,k.z$)(),t=rl.Vt(e),r=0<t&&t<10,o=rl.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new FC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;o("VersionError"===p.name?new Pe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Pe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new FC(e,p))},u.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.Nt(e);const y=XA.open(u.db,e,c?"readonly":"readwrite",r),b=o(y).next(S=>(y.Pt(),S)).catch(S=>(y.abort(S),ve.reject(S))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&p<3;if(Fe("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class zB{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Lm(this.Ft.delete())}}class FC extends Pe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fm(n){return"IndexedDbTransactionError"===n.name}class KB{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Lm(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Lm(this.store.add(e))}get(e){return Lm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Lm(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Lm(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(c,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ve((u,c)=>{o.onerror=p=>{c(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ve((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,c,p)=>p.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new ve((r,o)=>{t.onerror=u=>{const c=ZP(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new ve((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void o();const y=new zB(p),b=t(p.primaryKey,p.value,y);if(b instanceof ve){const S=b.catch(x=>(y.done(),ve.reject(x)));r.push(S)}y.isDone?o():null===y.Lt?p.continue():p.continue(y.Lt)}}).next(()=>ve.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Lm(n){return new ve((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=ZP(r.target.error);t(o)}})}let $L=!1;function ZP(n){const e=rl.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $L||($L=!0,setTimeout(()=>{throw r},0)),r}}return n}class HL extends jL{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Wi(n,e){const t=qe(n);return rl.xt(t.Ht,e)}class YP{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&aB(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&HP(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&HP(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Rn())}isEqual(e){return this.batchId===e.batchId&&Sv(this.mutations,e.mutations,(t,r)=>dL(t,r))&&Sv(this.baseMutations,e.baseMutations,(t,r)=>dL(t,r))}}class QP{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=hB;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new QP(e,t,r,o)}}class JP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ep{constructor(e,t,r,o,u=xt.min(),c=xt.min(),p=Ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new ep(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class GL{constructor(e){this.Jt=e}}function WL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ex(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:PC(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:MC(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Vm(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:Vm(e.version)}}var o,u;return r}function ex(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Vm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Um(n){const e=new Xr(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function Vv(n,e){const t=(e.baseMutations||[]).map(u=>KP(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>KP(n.Jt,u)),o=Xr.fromMillis(e.localWriteTimeMs);return new YP(e.batchId,o,t,r)}function LC(n){const e=Um(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Um(n.lastLimboFreeSnapshotVersion):xt.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=lu(Nv(DL(o.documents[0])))):r=lu(ML(n.query)),new ep(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ci.fromBase64String(n.resumeToken))}function qL(n,e){const t=Vm(e.snapshotVersion),r=Vm(e.lastLimboFreeSnapshotVersion);let o;o=$A(e.target)?RL(n.Jt,e.target):NL(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mm(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function XP(n){const e=ML({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?XF(e,e.limit,"L"):e}function eO(n,e){return new JP(e.largestBatchId,KP(n.Jt,e.overlayMutation))}function zL(n,e){const t=e.path.lastSegment();return[n,Xs(e.path.popLast()),t]}class YB{getBundleMetadata(e,t){return KL(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Um(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return KL(e).put({bundleId:(r=t).id,createTime:Vm(Gi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ZL(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:XP(o.bundledQuery),readTime:Um(o.readTime)};var o})}saveNamedQuery(e,t){return ZL(e).put({name:(r=t).name,readTime:Vm(Gi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function KL(n){return Wi(n,"bundles")}function ZL(n){return Wi(n,"namedQueries")}class tO{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new tO(e,t.uid||"")}getOverlay(e,t){return VC(e).get(zL(this.userId,t)).next(r=>r?eO(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const p=new JP(t,c);o.push(this.Xt(e,p))}),ve.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(Xs(c.getCollectionPath())));const u=[];return o.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(VC(e).Qt("collectionPathOverlayIndex",p))}),ve.waitFor(u)}getOverlaysForCollection(e,t,r){const o=xC(),u=Xs(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return VC(e).qt("collectionPathOverlayIndex",c).next(p=>{for(const y of p){const b=eO(this.M,y);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=xC();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return VC(e).Wt({index:"collectionGroupOverlayIndex",range:p},(y,b,S)=>{const x=eO(this.M,b);u.size()<o||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return VC(e).put(function(r,o,u){const[c,p,y]=zL(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:kC(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function VC(n){return Wi(n,"documentOverlays")}class Bm{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Vr(e.integerValue));else if("doubleValue"in e){const r=Vr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),vC(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Sm(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?jF(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),We.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function QB(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function YL(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=QB(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Bm.fe=new Bm;class JB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=YL(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=YL(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class XB{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class ej{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class UC{constructor(){this.De=new JB,this.Ce=new XB(this.De),this.xe=new ej(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class tp{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new tp(this.indexId,this.documentKey,this.arrayValue,r)}}function jm(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=QL(n.arrayValue,e.arrayValue),0!==t?t:(t=QL(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function QL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class tj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=LP(e);if(void 0!==t&&!this.Be(t))return!1;const r=Nm(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const c=r[o];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class nj{constructor(){this.qe=new nO}addToCollectionParentIndex(e,t){return this.qe.add(t),ve.resolve()}getCollectionParents(e,t){return ve.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ve.resolve()}deleteFieldIndex(e,t){return ve.resolve()}getDocumentsMatchingTarget(e,t){return ve.resolve(null)}getFieldIndex(e,t){return ve.resolve(null)}getFieldIndexes(e,t){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}updateCollectionGroup(e,t,r){return ve.resolve()}updateIndexEntries(e,t){return ve.resolve()}}class nO{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new hr(_n.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new hr(_n.comparator)).toArray()}}const Uv=new Uint8Array(0);class rj{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new nO,this.Ge=new Xf(r=>Mm(r),(r,o)=>IC(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Xs(o)};return JL(e).put(u)}return ve.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[NF(t),""],!1,!0);return JL(e).qt(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ic(c.parent))}return r})}addFieldIndex(e,t){const r=tx(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=tx(e),o=nx(e),u=BC(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=BC(e);let o=!0;const u=new Map;return ve.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(p=>{o&&(o=!!p),u.set(c,p)})).next(()=>{if(o){let c=Rn();const p=[];return ve.forEach(u,(y,b)=>{var S;Fe("IndexedDbIndexManager",`Using index ${S=y,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(et=>`${et.fieldPath}:${et.kind}`).join(",")}`} to execute ${Mm(t)}`);const x=function(et,st){const Wt=LP(st);if(void 0===Wt)return null;for(const rn of HA(et,Wt.fieldPath))switch(rn.op){case"array-contains-any":return rn.value.arrayValue.values||[];case"array-contains":return[rn.value]}return null}(b,y),O=function(et,st){const Wt=new Map;for(const rn of Nm(st))for(const di of HA(et,rn.fieldPath))switch(di.op){case"==":case"in":Wt.set(rn.fieldPath.canonicalString(),di.value);break;case"not-in":case"!=":return Wt.set(rn.fieldPath.canonicalString(),di.value),Array.from(Wt.values())}return null}(b,y),$=function(et,st){const Wt=[];let rn=!0;for(const di of Nm(st)){const Sa=0===di.kind?zF(et,di.fieldPath,et.startAt):KF(et,di.fieldPath,et.startAt);if(!Sa.value)return null;Wt.push(Sa.value),rn&&(rn=Sa.inclusive)}return new Jf(Wt,rn)}(b,y),K=function(et,st){const Wt=[];let rn=!0;for(const di of Nm(st)){const Sa=0===di.kind?KF(et,di.fieldPath,et.endAt):zF(et,di.fieldPath,et.endAt);if(!Sa.value)return null;Wt.push(Sa.value),rn&&(rn=Sa.inclusive)}return new Jf(Wt,rn)}(b,y),ye=this.je(y,b,$),xe=this.je(y,b,K),gt=this.We(y,b,O),ht=this.ze(y.indexId,x,ye,!!$&&$.inclusive,xe,!!K&&K.inclusive,gt);return ve.forEach(ht,et=>r.Gt(et,t.limit).next(st=>{st.forEach(Wt=>{const rn=We.fromSegments(Wt.documentKey);c.has(rn)||(c=c.add(rn),p.push(rn))})}))}).next(()=>p)}return ve.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,c,p){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),S=[];for(let x=0;x<y;++x){const O=t?this.He(t[x/b]):Uv,$=r?this.Je(e,O,r[x%b],o):this.Ye(e),K=u?this.Xe(e,O,u[x%b],c):this.Ye(e+1);S.push(...this.createRange($,K,p.map(ye=>this.Je(e,O,ye,!0))))}return S}Je(e,t,r,o){const u=new tp(e,We.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new tp(e,We.empty(),t,r);return o?u.ke():u}Ye(e){return new tp(e,We.empty(),Uv,Uv)}getFieldIndex(e,t){const r=new tj(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const c=u.filter(p=>r.$e(p));return c.sort((p,y)=>y.fields.length-p.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new UC;for(const o of Nm(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.Ne(o.kind);Bm.fe.Zt(u,c)}return r.Se()}He(e){const t=new UC;return Bm.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new UC;return Bm.fe.Zt(Rm(this.databaseId,t),r.Ne(function(o){const u=Nm(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new UC);let u=0;for(const c of Nm(e)){const p=r[u++];for(const y of o)if(this.en(t,c.fieldPath)&&wC(p))o=this.nn(o,c,p);else{const b=y.Ne(c.kind);Bm.fe.Zt(p,b)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of o){const y=new UC;y.seed(p.Se()),Bm.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof cs&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=tx(e),o=nx(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ve.forEach(u,p=>o.get([p.indexId,this.uid]).next(y=>{c.push(function(b,S){const x=S?new CC(S.sequenceNumber,new Xd(Um(S.readTime),new We(Ic(S.documentKey)),S.largestBatchId)):CC.empty(),O=b.fields.map(([$,K])=>new jA(Hi.fromServerFormat($),K));return new BA(b.indexId,b.collectionGroup,O,x)}(p,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Yt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=tx(e),u=nx(e);return this.rn(e).next(c=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ve.forEach(p,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Vm((O=r).readTime),documentKey:Xs(O.documentKey.path),largestBatchId:O.largestBatchId});var O})))}updateIndexEntries(e,t){const r=new Map;return ve.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?ve.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),ve.forEach(p,y=>this.on(e,o,y).next(b=>{const S=this.un(u,y);return b.isEqual(S)?ve.resolve():this.an(e,u,y,b,S)}))))})}cn(e,t,r,o){return BC(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return BC(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=BC(e);let u=new hr(jm);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,p)=>{u=u.add(new tp(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}un(e,t){let r=new hr(jm);const o=this.Ze(t,e);if(null==o)return r;const u=LP(t);if(null!=u){const c=e.data.field(u.fieldPath);if(wC(c))for(const p of c.arrayValue.values||[])r=r.add(new tp(t.indexId,e.key,this.He(p),o))}else r=r.add(new tp(t.indexId,e.key,Uv,o));return r}an(e,t,r,o,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,y,b,S,x){const O=p.getIterator(),$=y.getIterator();let K=kv(O),ye=kv($);for(;K||ye;){let xe=!1,gt=!1;if(K&&ye){const ht=b(K,ye);ht<0?gt=!0:ht>0&&(xe=!0)}else null!=K?gt=!0:xe=!0;xe?(S(ye),ye=kv($)):gt?(x(K),K=kv(O)):(K=kv(O),ye=kv($))}}(o,u,jm,p=>{c.push(this.cn(e,t,r,p))},p=>{c.push(this.hn(e,t,r,p))}),ve.waitFor(c)}rn(e){let t=1;return nx(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>jm(c,p)).filter((c,p,y)=>!p||0!==jm(c,y[p-1]));const o=[];o.push(e);for(const c of r){const p=jm(c,e),y=jm(c,t);if(0===p)o[0]=e.ke();else if(p>0&&y<0)o.push(c),o.push(c.ke());else if(y>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,Uv,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,Uv,[]]));return u}}function JL(n){return Wi(n,"collectionParents")}function BC(n){return Wi(n,"indexEntries")}function tx(n){return Wi(n,"indexConfiguration")}function nx(n){return Wi(n,"indexState")}const XL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ho{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ho(e,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eV(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const y=r.Wt({range:c},(S,x,O)=>(p++,O.delete()));u.push(y.next(()=>{It(1===p)}));const b=[];for(const S of t.mutations){const x=LL(e,S.key.path,t.batchId);u.push(o.delete(x)),b.push(S.key)}return ve.waitFor(u).next(()=>b)}function rx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Ho.DEFAULT_COLLECTION_PERCENTILE=10,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ho.DEFAULT=new Ho(41943040,Ho.DEFAULT_COLLECTION_PERCENTILE,Ho.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ho.DISABLED=new Ho(-1,0,0);class rO{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new rO(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return np(e).Wt({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Bv(e),c=np(e);return c.add({}).next(p=>{It("number"==typeof p);const y=new YP(p,t,r,o),b=function(O,$,K){const ye=K.baseMutations.map(gt=>kC(O.Jt,gt)),xe=K.mutations.map(gt=>kC(O.Jt,gt));return{userId:$,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:ye,mutations:xe}}(this.M,this.userId,y),S=[];let x=new hr((O,$)=>Yt(O.canonicalString(),$.canonicalString()));for(const O of o){const $=LL(this.userId,O.key.path,p);x=x.add(O.key.path.popLast()),S.push(c.put(b)),S.push(u.put($,RB))}return x.forEach(O=>{S.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.ln[p]=y.keys()}),ve.waitFor(S).next(()=>y)})}lookupMutationBatch(e,t){return np(e).get(t).next(r=>r?(It(r.userId===this.userId),Vv(this.M,r)):null)}fn(e,t){return this.ln[t]?ve.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return np(e).Wt({index:"userMutationsIndex",range:o},(c,p,y)=>{p.userId===this.userId&&(It(p.batchId>=r),u=Vv(this.M,p)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return np(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return np(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Vv(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=JA(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Bv(e).Wt({range:o},(c,p,y)=>{const[b,S,x]=c,O=Ic(S);if(b===this.userId&&t.path.isEqual(O))return np(e).get(x).next($=>{if(!$)throw Xe();It($.userId===this.userId),u.push(Vv(this.M,$))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(Yt);const o=[];return t.forEach(u=>{const c=JA(this.userId,u.path),p=IDBKeyRange.lowerBound(c),y=Bv(e).Wt({range:p},(b,S,x)=>{const[O,$,K]=b,ye=Ic($);O===this.userId&&u.path.isEqual(ye)?r=r.add(K):x.done()});o.push(y)}),ve.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=JA(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new hr(Yt);return Bv(e).Wt({range:c},(y,b,S)=>{const[x,O,$]=y,K=Ic(O);x===this.userId&&r.isPrefixOf(K)?K.length===o&&(p=p.add($)):S.done()}).next(()=>this.dn(e,p))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(np(e).get(u).next(c=>{if(null===c)throw Xe();It(c.userId===this.userId),r.push(Vv(this.M,c))}))}),ve.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return eV(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ve.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ve.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Bv(e).Wt({range:r},(u,c,p)=>{if(u[0]===this.userId){const y=Ic(u[1]);o.push(y)}else p.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return tV(e,this.userId,t)}wn(e){return nV(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tV(n,e,t){const r=JA(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Bv(n).Wt({range:u,jt:!0},(p,y,b)=>{const[S,x,O]=p;S===e&&x===o&&(c=!0),b.done()}).next(()=>c)}function np(n){return Wi(n,"mutations")}function Bv(n){return Wi(n,"documentMutations")}function nV(n){return Wi(n,"mutationQueues")}class $m{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new $m(0)}static yn(){return new $m(-1)}}class ij{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new $m(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>xt.fromTimestamp(new Xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jv(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return jv(e).Wt((c,p)=>{const y=LC(p);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(o++,u.push(this.removeTargetData(e,y)))}).next(()=>ve.waitFor(u)).next(()=>o)}forEachTarget(e,t){return jv(e).Wt((r,o)=>{const u=LC(o);t(u)})}pn(e){return rV(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return rV(e).put("targetGlobalKey",t)}Tn(e,t){return jv(e).put(qL(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mm(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return jv(e).Wt({range:o,index:"queryTargetsIndex"},(c,p,y)=>{const b=LC(p);IC(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=rp(e);return t.forEach(c=>{const p=Xs(c.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,c))}),ve.waitFor(o)}removeMatchingKeys(e,t,r){const o=rp(e);return ve.forEach(t,u=>{const c=Xs(u.path);return ve.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=rp(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=rp(e);let u=Rn();return o.Wt({range:r,jt:!0},(c,p,y)=>{const b=Ic(c[1]),S=new We(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Xs(t.path),o=IDBKeyRange.bound([r],[NF(r)],!1,!0);let u=0;return rp(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([c,p],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return jv(e).get(t).next(r=>r?LC(r):null)}}function jv(n){return Wi(n,"targets")}function rV(n){return Wi(n,"targetGlobal")}function rp(n){return Wi(n,"targetDocuments")}function Hm(n){return iO.apply(this,arguments)}function iO(){return(iO=(0,Ee.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==BL)throw n;Fe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function iV([n,e],[t,r]){const o=Yt(n,t);return 0===o?Yt(e,r):o}class sj{constructor(e){this.An=e,this.buffer=new hr(iV),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();iV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oj{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Fm(o)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Hm(o)}yield t.Sn(e)}))}}class aj{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ve.resolve(Ta.A);const r=new sj(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(XL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XL):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,c,p,y,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,c=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(b=Date.now(),Ss()<=da.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${o} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(y-p)+`ms\n\tRemoved ${x} documents in `+(b-y)+`ms\nTotal Duration: ${b-S}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}class uj{constructor(e,t){this.db=e,this.garbageCollector=new aj(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return ix(e,r)}removeReference(e,t,r){return ix(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ix(e,t)}On(e,t){return function(r,o){let u=!1;return nV(r).zt(c=>tV(r,c,o).next(p=>(p&&(u=!0),ve.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(c,p)=>{if(p<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,xt.min()),rp(e).delete([0,Xs(c.path)])))});o.push(y)}}).next(()=>ve.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ix(e,t)}Mn(e,t){const r=rp(e);let o,u=Ta.A;return r.Wt({index:"documentTargetsIndex"},([c,p],{path:y,sequenceNumber:b})=>{0===c?(u!==Ta.A&&t(new We(Ic(o)),u),u=b,o=y):u=Ta.A}).next(()=>{u!==Ta.A&&t(new We(Ic(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ix(n,e){return rp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Xs(e.path),sequenceNumber:r}));var r}class sV{constructor(){this.changes=new Xf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ve.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lj{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Gm(e).put(r)}removeEntry(e,t,r){return Gm(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ex(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=dr.newInvalidDocument(t);return Gm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(jC(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:dr.newInvalidDocument(t)};return Gm(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(jC(t))},(o,u)=>{r={document:this.$n(t,u),size:rx(u)}}).next(()=>r)}getEntries(e,t){let r=cu();return this.Ln(e,t,(o,u)=>{const c=this.$n(o,u);r=r.insert(o,c)}).next(()=>r)}Un(e,t){let r=cu(),o=new ei(We.comparator);return this.Ln(e,t,(u,c)=>{const p=this.$n(u,c);r=r.insert(u,p),o=o.insert(u,rx(c))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return ve.resolve();let o=new hr(uV);t.forEach(y=>o=o.add(y));const u=IDBKeyRange.bound(jC(o.first()),jC(o.last())),c=o.getIterator();let p=c.getNext();return Gm(e).Wt({index:"documentKeyIndex",range:u},(y,b,S)=>{const x=We.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&uV(p,x)<0;)r(p,null),p=c.getNext();p&&p.isEqual(x)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?S.Ut(jC(p)):S.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),ex(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gm(e).qt(IDBKeyRange.bound(o,u,!0)).next(c=>{let p=cu();for(const y of c){const b=this.$n(We.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);p=p.insert(b.key,b)}return p})}getAllFromCollectionGroup(e,t,r,o){let u=cu();const c=aV(t,r),p=aV(t,Xd.max());return Gm(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(y,b,S)=>{const x=this.$n(We.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(x.key,x),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new cj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oV(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return oV(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function(n,e){let t;if(e.document)t=xL(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),o=Um(e.noDocument.readTime);t=dr.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=We.fromSegments(e.unknownDocument.path),o=Um(e.unknownDocument.version);t=dr.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Xr(r[0],r[1]);return xt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return dr.newInvalidDocument(e)}}class cj extends sV{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Xf(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new hr((u,c)=>Yt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const y=WL(this.Kn.M,c);o=o.add(u.path.popLast()),r+=rx(y)-p.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=p.size,this.trackRemovals){const y=WL(this.Kn.M,c.convertToNoDocument(xt.min()));t.push(this.Kn.addEntry(e,u,y))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ve.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function oV(n){return Wi(n,"remoteDocumentGlobal")}function Gm(n){return Wi(n,"remoteDocumentsV14")}function jC(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aV(n,e){const t=e.documentKey.path.toArray();return[n,ex(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uV(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Yt(t[u],r[u]),o)return o;return o=Yt(t.length,r.length),o||(o=Yt(t[t.length-2],r[r.length-2]),o||Yt(t[t.length-1],r[r.length-1]))}class dj{constructor(e){this.M=e}kt(e,t,r,o){const u=new XA("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FL,{unique:!0}),p.createObjectStore("documentMutations"),lV(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ve.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),lV(e)),c=c.next(()=>function(p){const y=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(p,y){return y.store("mutations").qt().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",FL,{unique:!0});const S=y.store("mutations"),x=b.map(O=>S.put(O));return ve.waitFor(x)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.Qn(u))),r<6&&o>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(c=c.next(()=>this.Wn(u))),r<8&&o>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.Hn(u))),r<11&&o>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:$B});y.createIndex("collectionPathOverlayIndex",HB,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",GB,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:NB});y.createIndex("documentKeyIndex",MB),y.createIndex("collectionGroupIndex",PB)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>{!function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:VB}).createIndex("sequenceNumberIndex",UB,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:BB}).createIndex("documentKeyIndex",jB,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=rx(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>ve.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(p=>ve.forEach(p,y=>{It(y.userId===u.userId);const b=Vv(this.M,y);return eV(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((c,p)=>{const y=new _n(c),b=[0,Xs(y)];u.push(t.get(b).next(S=>S?ve.resolve():t.put({targetId:0,path:Xs(y),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ve.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:LB});const r=t.store("collectionParents"),o=new nO,u=c=>{if(o.add(c)){const p=c.lastSegment(),y=c.popLast();return r.put({collectionId:p,parent:Xs(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,p)=>{const y=new _n(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,p,y],b)=>{const S=Ic(p);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=LC(o),c=qL(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,c)=>{const p=t.store("remoteDocumentsV14"),y=(b=c,b.document?new We(_n.fromString(b.document.name).popFirst(5)):b.noDocument?We.fromSegments(b.noDocument.path):b.unknownDocument?We.fromSegments(b.unknownDocument.path):Xe()).path.toArray();var b;const S={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(p.put(S))}).next(()=>ve.waitFor(o))}}function lV(n){n.createObjectStore("targetDocuments",{keyPath:kB}).createIndex("documentTargetsIndex",FB,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",OB,{unique:!0}),n.createObjectStore("targetGlobal")}const sO="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class oO{constructor(e,t,r,o,u,c,p,y,b,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=p,this.Xn=b,this.Zn=S,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=O=>Promise.resolve(),!oO.vt())throw new Pe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new uj(this,o),this.hs=t+"main",this.M=new GL(y),this.ls=new rl(this.hs,this.ts,new dj(this.M)),this.fs=new ij(this.referenceDelegate,this.M),this.ds=new lj(this.M),this._s=new YB,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&Jn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,sO);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Ta(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Ee.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sx(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Fm(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return $C(e).get("owner").next(t=>ve.resolve(this.bs(t)))}Vs(e){return sx(e).delete(this.clientId)}vs(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Wi(r,"clientMetadata");return o.qt().next(u=>{const c=e.Ds(u,18e5),p=u.filter(y=>-1===c.indexOf(y));return ve.forEach(p,y=>o.delete(y.clientId)).next(()=>p)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ve.resolve(!0):$C(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Pe(ge.FAILED_PRECONDITION,sO);return!1}}return!(!this.networkEnabled||!this.inForeground)||sx(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new HL(t,Ta.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>sx(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return rO.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new rj(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return tO.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?qB:13===c?UL:12===c?WB:11===c?VL:void Xe();var c;let p;return this.ls.runTransaction(e,o,u,y=>(p=new HL(y,this.es?this.es.next():Ta.A),"readwrite-primary"===t?this.Es(p).next(b=>!!b||this.As(p)).next(b=>{if(!b)throw Jn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(ge.FAILED_PRECONDITION,BL);return r(p)}).next(b=>this.Ps(p).next(()=>b)):this.$s(p).next(()=>r(p)))).then(y=>(p.raiseOnCommittedEvent(),y))}$s(e){return $C(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ge.FAILED_PRECONDITION,sO)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $C(e).put("owner",t)}static vt(){return rl.vt()}Rs(e){const t=$C(e);return t.get("owner").next(r=>this.bs(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ve.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Jn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Jn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Jn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $C(n){return Wi(n,"owner")}function sx(n){return Wi(n,"clientMetadata")}function aO(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hj{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return We.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):BP(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new We(t)).next(r=>{let o=WP();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=WP();return this.indexManager.getCollectionParents(e,o).next(c=>ve.forEach(c,p=>{const y=(b=t,S=p.child(o),new eh(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,y,r).next(b=>{b.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const p of c.mutations){const y=p.key;let b=o.get(y);null==b&&(b=dr.newInvalidDocument(y),o=o.insert(y,b)),HP(p,b,c.localWriteTime),b.isFoundDocument()||(o=o.remove(y))}}).next(()=>(o.forEach((u,c)=>{$P(t,c)||(o=o.remove(u))}),o))}}class uO{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Rn(),o=Rn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new uO(e,t.fromCache,r,o)}}class cV{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const c=this.ei(t,u);return(GA(t)||WA(t))&&this.ni(t.limitType,c,o,r)?this.ti(e,t):(Ss()<=da.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jP(t)),this.Zs.Qs(e,t,WF(r,-1)).next(p=>(c.forEach(y=>{p=p.insert(y.key,y)}),p)))});var u}ei(e,t){let r=new hr(nL(e));return t.forEach((o,u)=>{$P(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return Ss()<=da.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",jP(t)),this.Zs.Qs(e,t,Xd.min())}}class fj{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new ei(Yt),this.ri=new Xf(u=>Mm(u),IC),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new hj(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function dV(n,e,t,r){return new fj(n,e,t,r)}function hV(n,e){return lO.apply(this,arguments)}function lO(){return(lO=(0,Ee.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let y=Rn();for(const b of o){c.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}for(const b of u){p.push(b.batchId);for(const S of b.mutations)y=y.add(S.key)}return t.ci.Ks(r,y).next(b=>({hi:b,removedBatchIds:c,addedBatchIds:p}))})})})).apply(this,arguments)}function pj(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,p,y,b){const S=y.batch,x=S.keys();let O=ve.resolve();return x.forEach($=>{O=O.next(()=>b.getEntry(p,$)).next(K=>{const ye=y.docVersions.get($);It(null!==ye),K.version.compareTo(ye)<0&&(S.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),b.addEntry(K)))})}),O.next(()=>c.Bs.removeMutationBatch(p,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function fV(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function gj(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const p=[];e.targetChanges.forEach((b,S)=>{const x=o.get(S);if(!x)return;p.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let O=x.withSequenceNumber(u.currentSequenceNumber);var $,K,ye;e.targetMismatches.has(S)?O=O.withResumeToken(Ci.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,r)),o=o.insert(S,O),K=O,ye=b,(0===($=x).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&p.push(t.fs.updateTargetData(u,O))});let y=cu();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),p.push(pV(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(xt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(b)}return ve.waitFor(p).next(()=>c.apply(u)).next(()=>t.ci.Gs(u,y)).next(()=>y)}).then(u=>(t.ii=o,u))}function pV(n,e,t){let r=Rn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=cu();return t.forEach((c,p)=>{const y=o.get(c);p.isNoDocument()&&p.version.isEqual(xt.min())?(e.removeEntry(c,p.readTime),u=u.insert(c,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),u=u.insert(c,p)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",p.version)}),u})}function mj(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function $v(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,ve.resolve(o)):t.fs.allocateTargetId(r).next(c=>(o=new ep(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Hv(n,e,t){return cO.apply(this,arguments)}function cO(){return(cO=(0,Ee.Z)(function*(n,e,t){const r=qe(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Fm(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)})).apply(this,arguments)}function ox(n,e,t){const r=qe(n);let o=xt.min(),u=Rn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,y,b){const S=qe(p),x=S.ri.get(b);return void 0!==x?ve.resolve(S.ii.get(x)):S.fs.getTargetData(y,b)}(r,c,lu(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,p.targetId).next(y=>{u=y})}).next(()=>r.si.Qs(c,e,t?o:xt.min(),t?u:Rn())).next(p=>(_V(r,tL(e),p),{documents:p,li:u})))}function gV(n,e){const t=qe(n),r=qe(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function mV(n,e){const t=qe(n),r=t.oi.get(e)||xt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,WF(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(_V(t,e,o),o))}function _V(n,e,t){let r=xt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function dO(){return(dO=(0,Ee.Z)(function*(n,e,t,r){const o=qe(n);let u=Rn(),c=cu();for(const b of t){const S=e.fi(b.metadata.name);b.document&&(u=u.add(S));const x=e.di(b);x.setReadTime(e._i(b.metadata.readTime)),c=c.insert(S,x)}const p=o.ui.newChangeBuffer({trackRemovals:!0}),y=yield $v(o,(b=r,lu(Nv(_n.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>pV(b,p,c).next(S=>(p.apply(b),S)).next(S=>o.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>o.fs.addMatchingKeys(b,u,y.targetId)).next(()=>o.ci.Gs(b,S)).next(()=>S)))})).apply(this,arguments)}function yj(n,e){return hO.apply(this,arguments)}function hO(){return(hO=(0,Ee.Z)(function*(n,e,t=Rn()){const r=yield $v(n,lu(XP(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=Gi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o._s.saveNamedQuery(u,e);const p=r.withResumeToken(Ci.EMPTY_BYTE_STRING,c);return o.ii=o.ii.insert(p.targetId,p),o.fs.updateTargetData(u,p).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})})).apply(this,arguments)}class vj{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return ve.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Gi(r.createTime)}),ve.resolve()}getNamedQuery(e,t){return ve.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:XP(r.bundledQuery),readTime:Gi(r.readTime)}),ve.resolve();var r}}class Ej{constructor(){this.overlays=new ei(We.comparator),this.gi=new Map}getOverlay(e,t){return ve.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),ve.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),ve.resolve()}getOverlaysForCollection(e,t,r){const o=xC(),u=t.length+1,c=new We(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const y=p.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&o.set(y.getKey(),y)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ei((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=xC(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const p=xC(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,S)=>p.set(b,S)),!(p.size()>=o)););return ve.resolve(p)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const c=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new JP(t,r));let u=this.gi.get(t);void 0===u&&(u=Rn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class fO{constructor(){this.yi=new hr(qi.pi),this.Ii=new hr(qi.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new qi(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new qi(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new We(new _n([])),r=new qi(t,e),o=new qi(t,e+1),u=[];return this.Ii.forEachInRange([r,o],c=>{this.Ai(c),u.push(c.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new We(new _n([])),r=new qi(t,e),o=new qi(t,e+1);let u=Rn();return this.Ii.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new qi(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class qi{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return We.comparator(e.key,t.key)||Yt(e.vi,t.vi)}static Ti(e,t){return Yt(e.vi,t.vi)||We.comparator(e.key,t.key)}}class wj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new hr(qi.pi)}checkEmpty(e){return ve.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const c=new YP(u,t,r,o);this.Bs.push(c);for(const p of o)this.Di=this.Di.add(new qi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ve.resolve(c)}lookupMutationBatch(e,t){return ve.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return ve.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return ve.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qi(t,0),o=new qi(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],c=>{const p=this.Ci(c.vi);u.push(p)}),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hr(Yt);return t.forEach(o=>{const u=new qi(o,0),c=new qi(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,c],p=>{r=r.add(p.vi)})}),ve.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;We.isDocumentKey(u)||(u=u.child(""));const c=new qi(new We(u),0);let p=new hr(Yt);return this.Di.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(y.vi)),!0)},c),ve.resolve(this.Ni(p))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return ve.forEach(t.mutations,o=>{const u=new qi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new qi(t,0),o=this.Di.firstAfterOrEqual(r);return ve.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ve.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class bj{constructor(e){this.Mi=e,this.docs=new ei(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ve.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(t))}getEntries(e,t){let r=cu();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():dr.newInvalidDocument(o))}),ve.resolve(r)}getAllFromCollection(e,t,r){let o=cu();const u=new We(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:y}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||W2(G2(y),r)<=0||(o=o.insert(y.key,y.mutableCopy()))}return ve.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Xe()}Oi(e,t){return ve.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Cj(this)}getSize(e){return ve.resolve(this.size)}}class Cj extends sV{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),ve.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Ij{constructor(e){this.persistence=e,this.Fi=new Xf(t=>Mm(t),IC),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new fO,this.targetCount=0,this.Li=$m.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),ve.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new $m(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ve.resolve()}updateTargetData(e,t){return this.Tn(t),ve.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Fi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),ve.waitFor(u).next(()=>o)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return ve.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),ve.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),ve.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),ve.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return ve.resolve(r)}containsKey(e,t){return ve.resolve(this.Bi.containsKey(t))}}class Tj{constructor(e,t){this.Ui={},this.overlays={},this.es=new Ta(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Ij(this),this.indexManager=new nj,this.ds=new bj(r=>this.referenceDelegate.qi(r)),this.M=new GL(t),this._s=new vj(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ej,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new wj(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const o=new Dj(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return ve.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class Dj extends jL{constructor(e){super(),this.currentSequenceNumber=e}}class pO{constructor(e){this.persistence=e,this.ji=new fO,this.Wi=null}static zi(e){return new pO(e)}get Hi(){if(this.Wi)return this.Wi;throw Xe()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),ve.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),ve.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.Hi,r=>{const o=We.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,xt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return ve.or([()=>ve.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function yV(n,e){return`firestore_clients_${n}_${e}`}function vV(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gO(n,e){return`firestore_targets_${n}_${e}`}class ax{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Pe(o.error.code,o.error.message))),c?new ax(e,t,o.state,u):(Jn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Pe(r.error.code,r.error.message))),u?new HC(e,r.state,o):(Jn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ux{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=YA();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=kF(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new ux(e,u):(Jn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mO{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mO(t.clientId,t.onlineState):(Jn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _O{constructor(){this.activeTargetIds=YA()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yO{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new ei(Yt),this.started=!1,this.rr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=yV(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new _O),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(yV(e.persistenceKey,o));if(u){const c=ux.Yi(o,u);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(gO(this.persistenceKey,e));if(r){const o=HC.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gO(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Jn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let c=Ta.A;if(null!=u)try{const p=JSON.parse(u);It("number"==typeof p),c=p}catch(p){Jn("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);o!==Ta.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new ax(this.currentUser,e,t,r),u=vV(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=vV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=gO(this.persistenceKey,e),u=new HC(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return ux.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return ax.Yi(new it(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return HC.Yi(o,t)}mr(e){return mO.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),c=[],p=[];return u.forEach(y=>{o.has(y)||c.push(y)}),o.forEach(y=>{u.has(y)||p.push(y)}),this.syncEngine.Fr(c,p).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=YA();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class EV{constructor(){this.$r=new _O,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new _O,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Sj{Lr(e){}shutdown(){}}class wV{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Aj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class xj{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Rj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const c=this.uo(e,t);Fe("RestConnection","Sending: ",c,r);const p={};return this.ao(p,o,u),this.co(e,c,p,r).then(y=>(Fe("RestConnection","Received: ",y),y),y=>{throw uu("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+qt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${Aj[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,c)=>{const p=new Ce;p.listenOnce(W.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case F.NO_ERROR:const b=p.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case F.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new Pe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case F.HTTP_ERROR:const S=p.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const O=function($){const K=$.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(K)>=0?K:ge.UNKNOWN}(x.status);c(new Pe(O,x.message))}else c(new Pe(ge.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Pe(ge.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(o);p.send(t,"POST",y,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=R(),c=P(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new ie({})),this.ao(p.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const y=o.join("");Fe("Connection","Creating WebChannel: "+y,p);const b=u.createWebChannel(y,p);let S=!1,x=!1;const O=new xj({Wr:K=>{x?Fe("Connection","Not sending because WebChannel is closed:",K):(S||(Fe("Connection","Opening WebChannel transport."),b.open(),S=!0),Fe("Connection","WebChannel sending:",K),b.send(K))},zr:()=>b.close()}),$=(K,ye,xe)=>{K.listen(ye,gt=>{try{xe(gt)}catch(ht){setTimeout(()=>{throw ht},0)}})};return $(b,Oe.EventType.OPEN,()=>{x||Fe("Connection","WebChannel transport opened.")}),$(b,Oe.EventType.CLOSE,()=>{x||(x=!0,Fe("Connection","WebChannel transport closed"),O.no())}),$(b,Oe.EventType.ERROR,K=>{x||(x=!0,uu("Connection","WebChannel transport errored:",K),O.no(new Pe(ge.UNAVAILABLE,"The operation could not be completed")))}),$(b,Oe.EventType.MESSAGE,K=>{var ye;if(!x){const xe=K.data[0];It(!!xe);const gt=xe,ht=gt.error||(null===(ye=gt[0])||void 0===ye?void 0:ye.error);if(ht){Fe("Connection","WebChannel received error:",ht);const et=ht.status;let st=function(rn){const di=li[rn];if(void 0!==di)return _L(di)}(et),Wt=ht.message;void 0===st&&(st=ge.INTERNAL,Wt="Unknown error status: "+et+" with message "+ht.message),x=!0,O.no(new Pe(st,Wt)),b.close()}else Fe("Connection","WebChannel received:",xe),O.so(xe)}}),$(c,Y.STAT_EVENT,K=>{K.stat===de.PROXY?Fe("Connection","Detected buffering proxy"):K.stat===de.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.eo()},0),O}}function bV(){return"undefined"!=typeof window?window:null}function lx(){return"undefined"!=typeof document?document:null}function GC(n){return new yB(n,!0)}class vO{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class CV{constructor(e,t,r,o,u,c,p,y){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new vO(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,Ee.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Jn(t.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Pe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,Ee.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Nj extends CV{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:Xe(),o=e.targetChange.targetIds||[],u=function(y,b){return y.N?(It(void 0===b||"string"==typeof b),Ci.fromBase64String(b||"")):(It(void 0===b||b instanceof Uint8Array),Ci.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(y){const b=void 0===y.code?ge.UNKNOWN:_L(y.code);return new Pe(b,y.message||"")}(c);t=new EL(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=Cc(n,r.document.name),u=Gi(r.document.updateTime),c=new As({mapValue:{fields:r.document.fields}}),p=dr.newFoundDocument(o,u,c);t=new QA(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=Cc(n,r.document),u=r.readTime?Gi(r.readTime):xt.min(),c=dr.newNoDocument(o,u);t=new QA([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=Cc(n,r.document);t=new QA([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new lB(r.count||0);t=new vL(r.targetId,u)}}var y;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return xt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?xt.min():u.readTime?Gi(u.readTime):xt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=OC(this.M),t.addTarget=function(o,u){let c;const p=u.target;return c=$A(p)?{documents:RL(o,p)}:{query:NL(o,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=IL(o,u.resumeToken):u.snapshotVersion.compareTo(xt.min())>0&&(c.readTime=MC(o,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=OC(this.M),t.removeTarget=e,this.Fo(t)}}class Mj extends CV{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=Gi(r.updateTime?r.updateTime:o);return u.isEqual(xt.min())&&(u=Gi(o)),new oB(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Gi(e.commitTime);return this.listener.Yo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=OC(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kC(this.M,r))};this.Fo(t)}}class Pj extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ge.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class Oj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Jn(t),this.iu=!1):Fe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class kj{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(p=>{r.enqueueAndForget((0,Ee.Z)(function*(){var y;ip(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,Ee.Z)(function*(b){const S=qe(b);S.fu.add(4),yield Gv(S),S.wu.set("Unknown"),S.fu.delete(4),yield WC(S)}),function(b){return y.apply(this,arguments)})(c))}))}),this.wu=new Oj(r,o)}}function WC(n){return EO.apply(this,arguments)}function EO(){return(EO=(0,Ee.Z)(function*(n){if(ip(n))for(const e of n.du)yield e(!0)})).apply(this,arguments)}function Gv(n){return wO.apply(this,arguments)}function wO(){return(wO=(0,Ee.Z)(function*(n){for(const e of n.du)yield e(!1)})).apply(this,arguments)}function cx(n,e){const t=qe(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),IO(t)?CO(t):qv(t).xo()&&bO(t,e))}function qC(n,e){const t=qe(n),r=qv(t);t.lu.delete(e),r.xo()&&IV(t,e),0===t.lu.size&&(r.xo()?r.Mo():ip(t)&&t.wu.set("Unknown"))}function bO(n,e){n.mu.Z(e.targetId),qv(n).jo(e)}function IV(n,e){n.mu.Z(e),qv(n).Wo(e)}function CO(n){n.mu=new gB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),qv(n).start(),n.wu.ru()}function IO(n){return ip(n)&&!qv(n).Co()&&n.lu.size>0}function ip(n){return 0===qe(n).fu.size}function TV(n){n.mu=void 0}function Fj(n){return TO.apply(this,arguments)}function TO(){return(TO=(0,Ee.Z)(function*(n){n.lu.forEach((e,t)=>{bO(n,e)})})).apply(this,arguments)}function Lj(n,e){return DO.apply(this,arguments)}function DO(){return(DO=(0,Ee.Z)(function*(n,e){TV(n),IO(n)?(n.wu.au(e),CO(n)):n.wu.set("Unknown")})).apply(this,arguments)}function Vj(n,e,t){return SO.apply(this,arguments)}function SO(){return(SO=(0,Ee.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof EL&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(o,u){const c=u.cause;for(const p of u.targetIds)o.lu.has(p)&&(yield o.remoteSyncer.rejectListen(p,c),o.lu.delete(p),o.mu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield dx(n,r)}else if(e instanceof QA?n.mu.ut(e):e instanceof vL?n.mu._t(e):n.mu.ht(e),!t.isEqual(xt.min()))try{const r=yield fV(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.mu.yt(u);return c.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const b=o.lu.get(y);b&&o.lu.set(y,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const y=o.lu.get(p);if(!y)return;o.lu.set(p,y.withResumeToken(Ci.EMPTY_BYTE_STRING,y.snapshotVersion)),IV(o,p);const b=new ep(y.target,p,1,y.sequenceNumber);bO(o,b)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield dx(n,r)}var r})).apply(this,arguments)}function dx(n,e,t){return AO.apply(this,arguments)}function AO(){return(AO=(0,Ee.Z)(function*(n,e,t){if(!Fm(e))throw e;n.fu.add(1),yield Gv(n),n.wu.set("Offline"),t||(t=()=>fV(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield WC(n)}))})).apply(this,arguments)}function DV(n,e){return e().catch(t=>dx(n,t,e))}function Wv(n){return xO.apply(this,arguments)}function xO(){return(xO=(0,Ee.Z)(function*(n){const e=qe(n),t=sp(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;Uj(e);)try{const o=yield mj(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,Bj(e,o)}catch(o){yield dx(e,o)}SV(e)&&AV(e)})).apply(this,arguments)}function Uj(n){return ip(n)&&n.hu.length<10}function Bj(n,e){n.hu.push(e);const t=sp(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function SV(n){return ip(n)&&!sp(n).Co()&&n.hu.length>0}function AV(n){sp(n).start()}function jj(n){return RO.apply(this,arguments)}function RO(){return(RO=(0,Ee.Z)(function*(n){sp(n).Zo()})).apply(this,arguments)}function $j(n){return NO.apply(this,arguments)}function NO(){return(NO=(0,Ee.Z)(function*(n){const e=sp(n);for(const t of n.hu)e.Jo(t.mutations)})).apply(this,arguments)}function Hj(n,e,t){return MO.apply(this,arguments)}function MO(){return(MO=(0,Ee.Z)(function*(n,e,t){const r=n.hu.shift(),o=QP.from(r,e,t);yield DV(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Wv(n)})).apply(this,arguments)}function Gj(n,e){return PO.apply(this,arguments)}function PO(){return(PO=(0,Ee.Z)(function*(n,e){var t;e&&sp(n).Ho&&(yield(t=(0,Ee.Z)(function*(r,o){if(mL(u=o.code)&&u!==ge.ABORTED){const c=r.hu.shift();sp(r).ko(),yield DV(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Wv(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),SV(n)&&AV(n)})).apply(this,arguments)}function xV(n,e){return OO.apply(this,arguments)}function OO(){return(OO=(0,Ee.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=ip(t);t.fu.add(3),yield Gv(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield WC(t)})).apply(this,arguments)}function kO(n,e){return FO.apply(this,arguments)}function FO(){return(FO=(0,Ee.Z)(function*(n,e){const t=qe(n);e?(t.fu.delete(2),yield WC(t)):e||(t.fu.add(2),yield Gv(t),t.wu.set("Unknown"))})).apply(this,arguments)}function qv(n){return n.gu||(n.gu=function(e,t,r){const o=qe(e);return o.eu(),new Nj(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Fj.bind(null,n),Yr:Lj.bind(null,n),Qo:Vj.bind(null,n)}),n.du.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.gu.ko(),IO(n)?CO(n):n.wu.set("Unknown")):(yield n.gu.stop(),TV(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function sp(n){return n.yu||(n.yu=function(e,t,r){const o=qe(e);return o.eu(),new Mj(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:jj.bind(null,n),Yr:Gj.bind(null,n),Xo:$j.bind(null,n),Yo:Hj.bind(null,n)}),n.du.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.yu.ko(),yield Wv(n)):(yield n.yu.stop(),n.hu.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class LO{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,p=new LO(e,t,c,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zv(n,e){if(Jn("AsyncQueue",`${e}: ${n}`),Fm(n))return new Pe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class Kv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=WP(),this.sortedSet=new ei(this.comparator)}static emptySet(e){return new Kv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Kv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RV{constructor(){this.pu=new ei(We.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Xe():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Zv{constructor(e,t,r,o,u,c,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Zv(e,t,Kv.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&TC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Wj{constructor(){this.Tu=void 0,this.listeners=[]}}class qj{constructor(){this.queries=new Xf(e=>eL(e),TC),this.onlineState="Unknown",this.Eu=new Set}}function VO(n,e){return UO.apply(this,arguments)}function UO(){return(UO=(0,Ee.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Wj),o)try{u.Tu=yield t.onListen(r)}catch(c){const p=zv(c,`Initialization of query '${jP(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&$O(t)})).apply(this,arguments)}function BO(n,e){return jO.apply(this,arguments)}function jO(){return(jO=(0,Ee.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function zj(n,e){const t=qe(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const p of c.listeners)p.Ru(o)&&(r=!0);c.Tu=o}}r&&$O(t)}function Kj(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function $O(n){n.Eu.forEach(e=>{e.next()})}class HO{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Zv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Zv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Zj{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class NV{constructor(e){this.M=e}fi(e){return Cc(this.M,e)}di(e){return e.metadata.exists?xL(this.M,e.document,!1):dr.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Gi(e)}}class Yj{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=MV(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=_n.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new NV(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const c of o.metadata.queries){const p=(t.get(c)||Rn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function(n,e,t,r){return dO.apply(this,arguments)}(e.localStore,new NV(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield yj(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function MV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class PV{constructor(e){this.key=e}}class OV{constructor(e){this.key=e}}class kV{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=Rn(),this.mutatedKeys=Rn(),this.Uu=nL(e),this.qu=new Kv(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new RV,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,p=!1;const y=GA(this.query)&&o.size===this.query.limit?o.last():null,b=WA(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,x)=>{const O=o.get(S),$=$P(this.query,x)?x:null,K=!!O&&this.mutatedKeys.has(O.key),ye=!!$&&($.hasLocalMutations||this.mutatedKeys.has($.key)&&$.hasCommittedMutations);let xe=!1;O&&$?O.data.isEqual($.data)?K!==ye&&(r.track({type:3,doc:$}),xe=!0):this.ju(O,$)||(r.track({type:2,doc:$}),xe=!0,(y&&this.Uu($,y)>0||b&&this.Uu($,b)<0)&&(p=!0)):!O&&$?(r.track({type:0,doc:$}),xe=!0):O&&!$&&(r.track({type:1,doc:O}),xe=!0,(y||b)&&(p=!0)),xe&&($?(c=c.add($),u=ye?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),GA(this.query)||WA(this.query))for(;c.size>this.query.limit;){const S=GA(this.query)?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{qu:c,Qu:r,ni:p,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((b,S)=>function(x,O){const $=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return $(x)-$(O)}(b.type,S.type)||this.Uu(b.doc,S.doc)),this.Wu(r);const c=t?this.zu():[],p=0===this.Lu.size&&this.current?1:0,y=p!==this.Bu;return this.Bu=p,0!==u.length||y?{snapshot:new Zv(this.query,e.qu,o,u,e.mutatedKeys,0===p,y,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new RV,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=Rn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new OV(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new PV(r))}),t}Yu(e){this.$u=e.li,this.Lu=Rn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Zv.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Qj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Jj{constructor(e){this.key=e,this.Zu=!1}}class Xj{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new Xf(p=>eL(p),TC),this.na=new Map,this.sa=new Set,this.ia=new ei(We.comparator),this.ra=new Map,this.oa=new fO,this.ua={},this.aa=new Map,this.ca=$m.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function e$(n,e){return GO.apply(this,arguments)}function GO(){return(GO=(0,Ee.Z)(function*(n,e){const t=fk(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const c=yield $v(t.localStore,lu(e));t.isPrimaryClient&&cx(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield WO(t,e,r,"current"===p)}return o})).apply(this,arguments)}function WO(n,e,t,r){return qO.apply(this,arguments)}function qO(){return(qO=(0,Ee.Z)(function*(n,e,t,r){n.la=(S,x,O)=>{return($=(0,Ee.Z)(function*(K,ye,xe,gt){let ht=ye.view.Gu(xe);ht.ni&&(ht=yield ox(K.localStore,ye.query,!1).then(({documents:Wt})=>ye.view.Gu(Wt,ht)));const et=gt&&gt.targetChanges.get(ye.targetId),st=ye.view.applyChanges(ht,K.isPrimaryClient,et);return nk(K,ye.targetId,st.Hu),st.snapshot}),function(K,ye,xe,gt){return $.apply(this,arguments)})(n,S,x,O);var $};const o=yield ox(n.localStore,e,!0),u=new kV(e,o.li),c=u.Gu(o.documents),p=NC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,p);nk(n,t,y.Hu);const b=new Qj(e,t,u);return n.ea.set(e,b),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),y.snapshot})).apply(this,arguments)}function t$(n,e){return zO.apply(this,arguments)}function zO(){return(zO=(0,Ee.Z)(function*(n,e){const t=qe(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!TC(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),qC(t.remoteStore,r.targetId),Yv(t,r.targetId)}).catch(Hm))):(Yv(t,r.targetId),yield Hv(t.localStore,r.targetId,!0))})).apply(this,arguments)}function KO(){return(KO=(0,Ee.Z)(function*(n,e,t){const r=pk(n);try{const o=yield function(u,c){const p=qe(u),y=Xr.now(),b=c.reduce((x,O)=>x.add(O.key),Rn());let S;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.ci.Ks(x,b).next(O=>{S=O;const $=[];for(const K of c){const ye=uB(K,S.get(K.key));null!=ye&&$.push(new km(K.key,ye,GF(ye.value.mapValue),ui.exists(!0)))}return p.Bs.addMutationBatch(x,y,$,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,p){let y=u.ua[u.currentUser.toKey()];y||(y=new ei(Yt)),y=y.insert(c,p),u.ua[u.currentUser.toKey()]=y}(r,o.batchId,t),yield th(r,o.changes),yield Wv(r.remoteStore)}catch(o){const u=zv(o,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function FV(n,e){return ZO.apply(this,arguments)}function ZO(){return(ZO=(0,Ee.Z)(function*(n,e){const t=qe(n);try{const r=yield gj(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.ra.get(u);c&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Zu=!0:o.modifiedDocuments.size>0?It(c.Zu):o.removedDocuments.size>0&&(It(c.Zu),c.Zu=!1))}),yield th(t,r,e)}catch(r){yield Hm(r)}})).apply(this,arguments)}function LV(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,c)=>{const p=c.view.Au(e);p.snapshot&&o.push(p.snapshot)}),function(u,c){const p=qe(u);p.onlineState=c;let y=!1;p.queries.forEach((b,S)=>{for(const x of S.listeners)x.Au(c)&&(y=!0)}),y&&$O(p)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function r$(n,e,t){return YO.apply(this,arguments)}function YO(){return(YO=(0,Ee.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let c=new ei(We.comparator);c=c.insert(u,dr.newNoDocument(u,xt.min()));const p=Rn().add(u),y=new RC(xt.min(),new Map,new hr(Yt),c,p);yield FV(r,y),r.ia=r.ia.remove(u),r.ra.delete(e),rk(r)}else yield Hv(r.localStore,e,!1).then(()=>Yv(r,e,t)).catch(Hm)})).apply(this,arguments)}function i$(n,e){return QO.apply(this,arguments)}function QO(){return(QO=(0,Ee.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield pj(t.localStore,e);tk(t,r,null),ek(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield th(t,o)}catch(o){yield Hm(o)}})).apply(this,arguments)}function s$(n,e,t){return JO.apply(this,arguments)}function JO(){return(JO=(0,Ee.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,c){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return p.Bs.lookupMutationBatch(y,c).next(S=>(It(null!==S),b=S.keys(),p.Bs.removeMutationBatch(y,S))).next(()=>p.Bs.performConsistencyCheck(y)).next(()=>p.ci.Ks(y,b))})}(r.localStore,e);tk(r,e,t),ek(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield th(r,o)}catch(o){yield Hm(o)}})).apply(this,arguments)}function XO(){return(XO=(0,Ee.Z)(function*(n,e){const t=qe(n);ip(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.Bs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=zv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function ek(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function tk(n,e,t){const r=qe(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function Yv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||VV(n,r)})}function VV(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(qC(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),rk(n))}function nk(n,e,t){for(const r of t)r instanceof PV?(n.oa.addReference(r.key,e),a$(n,r)):r instanceof OV?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||VV(n,r.key)):Xe()}function a$(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.sa.add(r),rk(n))}function rk(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new We(_n.fromString(e)),r=n.ca.next();n.ra.set(r,new Jj(t)),n.ia=n.ia.insert(t,r),cx(n.remoteStore,new ep(lu(Nv(t.path)),r,2,Ta.A))}}function th(n,e,t){return ik.apply(this,arguments)}function ik(){return(ik=(0,Ee.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],c=[];var p;r.ea.isEmpty()||(r.ea.forEach((p,y)=>{c.push(r.la(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),o.push(b);const S=uO.Ys(y.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.ta.Qo(o),yield(p=(0,Ee.Z)(function*(y,b){const S=qe(y);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ve.forEach(b,O=>ve.forEach(O.Hs,$=>S.persistence.referenceDelegate.addReference(x,O.targetId,$)).next(()=>ve.forEach(O.Js,$=>S.persistence.referenceDelegate.removeReference(x,O.targetId,$)))))}catch(x){if(!Fm(x))throw x;Fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const O=x.targetId;if(!x.fromCache){const $=S.ii.get(O),ye=$.withLastLimboFreeSnapshotVersion($.snapshotVersion);S.ii=S.ii.insert(O,ye)}}}),function(y,b){return p.apply(this,arguments)})(r.localStore,u))})).apply(this,arguments)}function u$(n,e){return sk.apply(this,arguments)}function sk(){return(sk=(0,Ee.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield hV(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(c=>{c.forEach(p=>{p.reject(new Pe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield th(t,r.hi)}var o})).apply(this,arguments)}function l$(n,e){const t=qe(n),r=t.ra.get(e);if(r&&r.Zu)return Rn().add(r.key);{let o=Rn();const u=t.na.get(e);if(!u)return o;for(const c of u){const p=t.ea.get(c);o=o.unionWith(p.view.Ku)}return o}}function c$(n,e){return ok.apply(this,arguments)}function ok(){return(ok=(0,Ee.Z)(function*(n,e){const t=qe(n),r=yield ox(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&nk(t,e.targetId,o.Hu),o})).apply(this,arguments)}function d$(n,e){return ak.apply(this,arguments)}function ak(){return(ak=(0,Ee.Z)(function*(n,e){const t=qe(n);return mV(t.localStore,e).then(r=>th(t,r))})).apply(this,arguments)}function h$(n,e,t,r){return uk.apply(this,arguments)}function uk(){return(uk=(0,Ee.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(c,p){const y=qe(c),b=qe(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,p).next(x=>x?y.ci.Ks(S,x):ve.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield Wv(o.remoteStore):"acknowledged"===t||"rejected"===t?(tk(o,e,r||null),ek(o,e),p=e,qe(qe(o.localStore).Bs)._n(p)):Xe(),yield th(o,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function lk(){return(lk=(0,Ee.Z)(function*(n,e){const t=qe(n);if(fk(t),pk(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield UV(t,r.toArray());t.ha=!0,yield kO(t.remoteStore,!0);for(const u of o)cx(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Yv(t,c),Hv(t.localStore,c,!0))),qC(t.remoteStore,c)}),yield o,yield UV(t,r),function(u){const c=qe(u);c.ra.forEach((p,y)=>{qC(c.remoteStore,y)}),c.oa.bi(),c.ra=new Map,c.ia=new ei(We.comparator)}(t),t.ha=!1,yield kO(t.remoteStore,!1)}})).apply(this,arguments)}function UV(n,e,t){return ck.apply(this,arguments)}function ck(){return(ck=(0,Ee.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const c of e){let p;const y=r.na.get(c);if(y&&0!==y.length){p=yield $v(r.localStore,lu(y[0]));for(const b of y){const S=r.ea.get(b),x=yield c$(r,S);x.snapshot&&u.push(x.snapshot)}}else{const b=yield gV(r.localStore,c);p=yield $v(r.localStore,b),yield WO(r,BV(b),c,!1)}o.push(p)}return r.ta.Qo(u),o})).apply(this,arguments)}function BV(n){return JF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function p$(n){const e=qe(n);return qe(qe(e.localStore).persistence).Fs()}function g$(n,e,t,r){return dk.apply(this,arguments)}function dk(){return(dk=(0,Ee.Z)(function*(n,e,t,r){const o=qe(n);if(o.ha)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield mV(o.localStore,tL(u[0])),p=RC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield th(o,c,p);break}case"rejected":yield Hv(o.localStore,e,!0),Yv(o,e,r);break;default:Xe()}})).apply(this,arguments)}function m$(n,e,t){return hk.apply(this,arguments)}function hk(){return(hk=(0,Ee.Z)(function*(n,e,t){const r=fk(n);if(r.ha){for(const o of e){if(r.na.has(o)){Fe("SyncEngine","Adding an already active target "+o);continue}const u=yield gV(r.localStore,o),c=yield $v(r.localStore,u);yield WO(r,BV(u),c.targetId,!1),cx(r.remoteStore,c)}for(const o of t)r.na.has(o)&&(yield Hv(r.localStore,o,!1).then(()=>{qC(r.remoteStore,o),Yv(r,o)}).catch(Hm))}})).apply(this,arguments)}function fk(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=FV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r$.bind(null,e),e.ta.Qo=zj.bind(null,e.eventManager),e.ta.fa=Kj.bind(null,e.eventManager),e}function pk(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=i$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s$.bind(null,e),e}class jV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.M=GC(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return dV(this.persistence,new cV,e.initialUser,this.M)}wa(e){return new Tj(pO.zi,this.M)}_a(e){return new EV}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class $V extends jV{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield pk(r.ya.syncEngine),yield Wv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return dV(this.persistence,new cV,e.initialUser,this.M)}ma(e){return new oj(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=aO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ho.withCacheSize(this.cacheSizeBytes):Ho.DEFAULT;return new oO(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,bV(),lx(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new EV}}class y$ extends $V{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof yO&&(r.sharedClientState.syncEngine={Mr:h$.bind(null,o),Or:g$.bind(null,o),Fr:m$.bind(null,o),Fs:p$.bind(null,o),kr:d$.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Ee.Z)(function*(c){yield function(n,e){return lk.apply(this,arguments)}(r.ya.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}_a(e){const t=bV();if(!yO.vt(t))throw new Pe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=aO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yO(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gk{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>LV(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=u$.bind(null,r.syncEngine),yield kO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new qj}createDatastore(e){const t=GC(e.databaseInfo.databaseId),r=new Rj(e.databaseInfo);return new Pj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>LV(this.syncEngine,p,0),c=wV.vt()?new wV:new Sj,new kj(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,p,y,b){const S=new Xj(r,o,u,c,p,y);return b&&(S.ha=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=qe(t);Fe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Gv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HV(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hx{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class v${constructor(e,t){this.Ta=e,this.M=t,this.metadata=new $i,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new Zj(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,Ee.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class E${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ee.Z)(function*(u,c){const p=qe(u),y=OC(p.M)+"/documents",b={documents:c.map($=>PC(p.M,$))},S=yield p.ho("BatchGetDocuments",y,b),x=new Map;S.forEach($=>{const K=function(n,e){return"found"in e?function(t,r){It(!!r.found);const o=Cc(t,r.found.name),u=Gi(r.found.updateTime),c=new As({mapValue:{fields:r.found.fields}});return dr.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=Cc(t,r.missing),u=Gi(r.readTime);return dr.newNoDocument(o,u)}(n,e):Xe()}(p.M,$);x.set(K.key.toString(),K)});const O=[];return c.forEach($=>{const K=x.get($.toString());It(!!K),O.push(K)}),O}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new AC(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=We.fromPath(o);e.mutations.push(new GP(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(o,u){const c=qe(o),p=OC(c.M)+"/documents",y={writes:u.map(b=>kC(c.M,b))};yield c.oo("Commit",p,y)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ui.updateTime(t):ui.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Pe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ui.updateTime(t)}return ui.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class w${constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new vO(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,Ee.Z)(function*(){const t=new E$(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Am(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!mL(t)}return!1}}class b${constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=it.UNAUTHENTICATED,this.clientId=RF.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(p){Fe("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Fe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=zv(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function GV(n,e){return mk.apply(this,arguments)}function mk(){return(mk=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield hV(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function WV(n,e){return _k.apply(this,arguments)}function _k(){return(_k=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yk(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>xV(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>xV(e.remoteStore,u)),n.onlineComponents=e})).apply(this,arguments)}function yk(n){return vk.apply(this,arguments)}function vk(){return(vk=(0,Ee.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield GV(n,new jV)),n.offlineComponents})).apply(this,arguments)}function fx(n){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,Ee.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield WV(n,new gk)),n.onlineComponents})).apply(this,arguments)}function qV(n){return yk(n).then(e=>e.persistence)}function wk(n){return yk(n).then(e=>e.localStore)}function zV(n){return fx(n).then(e=>e.remoteStore)}function bk(n){return fx(n).then(e=>e.syncEngine)}function Qv(n){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,Ee.Z)(function*(n){const e=yield fx(n),t=e.eventManager;return t.onListen=e$.bind(null,e.syncEngine),t.onUnlisten=t$.bind(null,e.syncEngine),t})).apply(this,arguments)}function KV(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,c,p,y){const b=new hx({next:x=>{u.enqueueAndForget(()=>BO(o,S));const O=x.docs.has(c);!O&&x.fromCache?y.reject(new Pe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&x.fromCache&&p&&"server"===p.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new HO(Nv(c.path),b,{includeMetadataChanges:!0,Cu:!0});return VO(o,S)}(yield Qv(n),n.asyncQueue,e,t,r)})),r.promise}function ZV(n,e,t={}){const r=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(o,u,c,p,y){const b=new hx({next:x=>{u.enqueueAndForget(()=>BO(o,S)),x.fromCache&&"server"===p.source?y.reject(new Pe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),S=new HO(c,b,{includeMetadataChanges:!0,Cu:!0});return VO(o,S)}(yield Qv(n),n.asyncQueue,e,t,r)})),r.promise}const YV=new Map;function Ik(n,e,t){if(!t)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QV(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function JV(n){if(!We.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function XV(n){if(We.isDocumentKey(n))throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function px(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=px(n);throw new Pe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eU(n,e){if(e<=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class tU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,QV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zC{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tU({}),this._settingsFrozen=!1,e instanceof Jd?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Pe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jd(o.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new N2;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new k2(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=YV.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),YV.delete(e),t.terminate())}(this),Promise.resolve()}}class fr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}}class xs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class Tc extends xs{constructor(e,t,r){super(e,t,Nv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new We(e))}withConverter(e){return new Tc(this.firestore,e,this._path)}}function nU(n,e,...t){if(n=(0,k.m9)(n),Ik("collection","path",e),n instanceof zC){const r=_n.fromString(e,...t);return XV(r),new Tc(n,null,r)}{if(!(n instanceof fr||n instanceof Tc))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return XV(r),new Tc(n.firestore,null,r)}}function gx(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=RF.R()),Ik("doc","path",e),n instanceof zC){const r=_n.fromString(e,...t);return JV(r),new fr(n,null,new We(r))}{if(!(n instanceof fr||n instanceof Tc))throw new Pe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_n.fromString(e,...t));return JV(r),new fr(n.firestore,n instanceof Tc?n.converter:null,new We(r))}}function rU(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof fr||n instanceof Tc)&&(e instanceof fr||e instanceof Tc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function iU(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof xs&&e instanceof xs&&n.firestore===e.firestore&&TC(n._query,e._query)&&n.converter===e.converter}class P${constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new vO(this,"async_queue_retry"),this.qa=()=>{const t=lx();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=lx();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=lx();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new $i;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Fm(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Jn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=LO.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&Xe()}verifyOperationInProgress(){}Wa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function Tk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class O${constructor(){this._progressObserver={},this._taskCompletionResolver=new $i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class br extends zC{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new P$,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||sU(this),this._firestoreClient.terminate()}}function ci(n){return n._firestoreClient||sU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sU(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j2(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new b$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function oU(n,e,t){const r=new $i;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield GV(n,t),yield WV(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ge.FAILED_PRECONDITION||u.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function aU(n){if(n._initialized||n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dc(Ci.fromBase64String(e))}catch(t){throw new Pe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dc(Ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wm{constructor(e){this._methodName=e}}class mx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const G$=/^__.*__$/;class W${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new km(e,this.data,this.fieldMask,t,this.fieldTransforms):new SC(e,this.data,t,this.fieldTransforms)}}class uU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new km(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class _x{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new _x(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return Ex(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(lU(this.Xa)&&G$.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class q${constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||GC(e)}ac(e,t,r,o=!1){return new _x({Xa:e,methodName:t,uc:r,path:Hi.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function qm(n){const e=n._freezeSettings(),t=GC(n._databaseId);return new q$(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yx(n,e,t,r,o,u={}){const c=n.ac(u.merge||u.mergeFields?2:0,e,t,o);xk("Data must be an object, but it was:",c,r);const p=hU(r,c);let y,b;if(u.merge)y=new Av(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const O=Rk(e,x,t);if(!c.contains(O))throw new Pe(ge.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);pU(S,O)||S.push(O)}y=new Av(S),b=c.fieldTransforms.filter(x=>y.covers(x.field))}else y=null,b=c.fieldTransforms;return new W$(new As(p),y,b)}class KC extends Wm{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof KC}}function cU(n,e,t){return new _x({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Dk extends Wm{_toFieldTransform(e){return new DC(e.path,new Pv)}isEqual(e){return e instanceof Dk}}class z$ extends Wm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=cU(this,e,!0),r=this.cc.map(u=>zm(u,t)),o=new Pm(r);return new DC(e.path,o)}isEqual(e){return this===e}}class K$ extends Wm{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=cU(this,e,!0),r=this.cc.map(u=>zm(u,t)),o=new Om(r);return new DC(e.path,o)}isEqual(e){return this===e}}class Z$ extends Wm{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Ov(e.M,sL(e.M,this.hc));return new DC(e.path,t)}isEqual(e){return this===e}}function Sk(n,e,t,r){const o=n.ac(1,e,t);xk("Data must be an object, but it was:",o,r);const u=[],c=As.empty();Dm(r,(y,b)=>{const S=vx(e,y,t);b=(0,k.m9)(b);const x=o.sc(S);if(b instanceof KC)u.push(S);else{const O=zm(b,x);null!=O&&(u.push(S),c.set(S,O))}});const p=new Av(u);return new uU(c,p,o.fieldTransforms)}function Ak(n,e,t,r,o,u){const c=n.ac(1,e,t),p=[Rk(e,r,t)],y=[o];if(u.length%2!=0)throw new Pe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<u.length;O+=2)p.push(Rk(e,u[O])),y.push(u[O+1]);const b=[],S=As.empty();for(let O=p.length-1;O>=0;--O)if(!pU(b,p[O])){const $=p[O];let K=y[O];K=(0,k.m9)(K);const ye=c.sc($);if(K instanceof KC)b.push($);else{const xe=zm(K,ye);null!=xe&&(b.push($),S.set($,xe))}}const x=new Av(b);return new uU(S,x,c.fieldTransforms)}function dU(n,e,t,r=!1){return zm(t,n.ac(r?4:3,e))}function zm(n,e){if(fU(n=(0,k.m9)(n)))return xk("Unsupported field value:",e,n),hU(n,e);if(n instanceof Wm)return function(t,r){if(!lU(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let p=zm(c,r.ic(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return sL(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Xr.fromDate(t);return{timestampValue:MC(r.M,o)}}if(t instanceof Xr){const o=new Xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:MC(r.M,o)}}if(t instanceof mx)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Dc)return{bytesValue:IL(r.M,t._byteString)};if(t instanceof fr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qP(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${px(t)}`)}(n,e)}function hU(n,e){const t={};return PF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dm(n,(r,o)=>{const u=zm(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function fU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xr||n instanceof mx||n instanceof Dc||n instanceof fr||n instanceof Wm)}function xk(n,e,t){if(!fU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=px(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function Rk(n,e,t){if((e=(0,k.m9)(e))instanceof nh)return e._internalPath;if("string"==typeof e)return vx(n,e);throw Ex("Field path arguments must be of type string or ",n,!1,void 0,t)}const Y$=new RegExp("[~\\*/\\[\\]]");function vx(n,e,t){if(e.search(Y$)>=0)throw Ex(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nh(...e.split("."))._internalPath}catch(r){throw Ex(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ex(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${o}`),y+=")"),new Pe(ge.INVALID_ARGUMENT,p+n+y)}function pU(n,e){return n.some(t=>t.isEqual(e))}class ZC{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Q$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Q$ extends ZC{data(){return super.data()}}function wx(n,e){return"string"==typeof e?vx(n,e):e instanceof nh?e._internalPath:e._delegate._internalPath}class Km{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rh extends ZC{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new YC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class YC extends rh{data(e={}){return super.data(e)}}class op{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Km(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new YC(this._firestore,this._userDataWriter,r.key,r,new Km(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new YC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Km(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const p=new YC(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Km(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:J$(c.type),doc:p,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function J$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function gU(n,e){return n instanceof rh&&e instanceof rh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof op&&e instanceof op&&n._firestore===e._firestore&&iU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function mU(n){if(WA(n)&&0===n.explicitOrderBy.length)throw new Pe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class QC{}function ap(n,...e){for(const t of e)n=t._apply(n);return n}class X$ extends QC{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=qm(e.firestore),r=function(o,u,c,p,y,b,S){let x;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){bU(S,b);const $=[];for(const K of S)$.push(wU(p,o,K));x={arrayValue:{values:$}}}else x=wU(p,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||bU(S,b),x=dU(c,"where",S,"in"===b||"not-in"===b);const O=cs.create(y,b,x);return function($,K){if(K.S()){const xe=UP($);if(null!==xe&&!xe.isEqual(K.field))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${xe.toString()}' and '${K.field.toString()}'`);const gt=VP($);null!==gt&&CU(0,K.field,gt)}const ye=function(xe,gt){for(const ht of xe.filters)if(gt.indexOf(ht.op)>=0)return ht.op;return null}($,function(xe){switch(xe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==ye)throw new Pe(ge.INVALID_ARGUMENT,ye===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${ye.toString()}' filters.`)}(o,O),O}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new xs(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new eh(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class tH extends QC{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Rv(o,u);return function(p,y){if(null===VP(p)){const b=UP(p);null!==b&&CU(0,b,y.field)}}(r,c),c}(e._query,this.lc,this._c);return new xs(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new eh(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class _U extends QC{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new xs(e.firestore,e.converter,XF(e._query,this.wc,this.mc))}}class yU extends QC{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=EU(e,this.type,this.gc,this.yc);return new xs(e.firestore,e.converter,(o=t,new eh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class vU extends QC{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=EU(e,this.type,this.gc,this.yc);return new xs(e.firestore,e.converter,(o=t,new eh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function EU(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof ZC)return function(o,u,c,p,y){if(!p)throw new Pe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of Mv(o))if(S.field.isKeyField())b.push(Rm(u,p.key));else{const x=p.data.field(S.field);if(OP(x))throw new Pe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const O=S.field.canonicalString();throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}b.push(x)}return new Jf(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=qm(n.firestore);return function(u,c,p,y,b,S){const x=u.explicitOrderBy;if(b.length>x.length)throw new Pe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let $=0;$<b.length;$++){const K=b[$];if(x[$].field.isKeyField()){if("string"!=typeof K)throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof K}`);if(!BP(u)&&-1!==K.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${K}' contains a slash.`);const ye=u.path.child(_n.fromString(K));if(!We.isDocumentKey(ye))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const xe=new We(ye);O.push(Rm(c,xe))}else{const ye=dU(p,y,K);O.push(ye)}}return new Jf(O,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function wU(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Pe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BP(e)&&-1!==t.indexOf("/"))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_n.fromString(t));if(!We.isDocumentKey(r))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rm(n,new We(r))}if(t instanceof fr)return Rm(n,t._key);throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${px(t)}.`)}function bU(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CU(n,e,t){if(!t.isEqual(e))throw new Pe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Nk{convertValue(e,t="none"){switch(xm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return Dm(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new mx(Vr(e.latitude),Vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=OF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yC(e));default:return null}}convertTimestamp(e){const t=Yf(e);return new Xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_n.fromString(e);It(OL(r));const o=new Jd(r.get(1),r.get(3)),u=new We(r.popFirst(5));return o.isEqual(t)||Jn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function bx(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class lH extends Nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}class IU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qm(e)}set(e,t,r){this._verifyNotCommitted();const o=up(e,this._firestore),u=bx(o.converter,t,r),c=yx(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,ui.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=up(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof nh?Ak(this._dataReader,"WriteBatch.update",u._key,t,r,o):Sk(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,ui.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=up(e,this._firestore);return this._mutations=this._mutations.concat(new AC(t._key,ui.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function up(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Pe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Zm extends Nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}function TU(n,e,t){n=pn(n,fr);const r=pn(n.firestore,br),o=bx(n.converter,e,t);return Jv(r,[yx(qm(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,ui.none())])}function DU(n,e,t,...r){n=pn(n,fr);const o=pn(n.firestore,br),u=qm(o);let c;return c="string"==typeof(e=(0,k.m9)(e))||e instanceof nh?Ak(u,"updateDoc",n._key,e,t,r):Sk(u,"updateDoc",n._key,e),Jv(o,[c.toMutation(n._key,ui.exists(!0))])}function SU(n,...e){var t,r,o;n=(0,k.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Tk(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Tk(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(o=x.complete)||void 0===o?void 0:o.bind(x)}let y,b,S;if(n instanceof fr)b=pn(n.firestore,br),S=Nv(n._key.path),y={next:x=>{e[c]&&e[c](Mk(b,n,x))},error:e[c+1],complete:e[c+2]};else{const x=pn(n,xs);b=pn(x.firestore,br),S=x._query;const O=new Zm(b);y={next:$=>{e[c]&&e[c](new op(b,O,x,$))},error:e[c+1],complete:e[c+2]},mU(n._query)}return function(x,O,$,K){const ye=new hx(K),xe=new HO(O,ye,$);return x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return VO(yield Qv(x),xe)})),()=>{ye.Ia(),x.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return BO(yield Qv(x),xe)}))}}(ci(b),S,p,y)}function Jv(n,e){return function(t,r){const o=new $i;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e,t){return KO.apply(this,arguments)}(yield bk(t),r,o)})),o.promise}(ci(n),e)}function Mk(n,e,t){const r=t.docs.get(e._key),o=new Zm(n);return new rh(n,o,e._key,r,new Km(t.hasPendingWrites,t.fromCache),e.converter)}class vH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qm(e)}get(e){const t=up(e,this._firestore),r=new lH(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const u=o[0];if(u.isFoundDocument())return new ZC(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new ZC(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=up(e,this._firestore),u=bx(o.converter,t,r),c=yx(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=up(e,this._firestore);let c;return c="string"==typeof(t=(0,k.m9)(t))||t instanceof nh?Ak(this._dataReader,"Transaction.update",u._key,t,r,o):Sk(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=up(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=up(e,this._firestore),r=new Zm(this._firestore);return super.get(e).then(o=>new rh(this._firestore,r,t._key,o._document,new Km(!1,!1),t.converter))}}function Pk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function xU(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function RU(){if("undefined"==typeof atob)throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){qt=Fi.SDK_VERSION,(0,Fi._registerComponent)(new ca.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new br(o,new P2(t.getProvider("auth-internal")),new F2(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Fi.registerVersion)(lt,"3.4.8",n),(0,Fi.registerVersion)(lt,"3.4.8","esm2017")}();class JC{constructor(e){this._delegate=e}static fromBase64String(e){return RU(),new JC(Dc.fromBase64String(e))}static fromUint8Array(e){return xU(),new JC(Dc.fromUint8Array(e))}toBase64(){return RU(),this._delegate.toBase64()}toUint8Array(){return xU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ok(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class xH{enableIndexedDbPersistence(e,t){return function(n,e){aU(n=pn(n,br));const t=ci(n),r=n._freezeSettings(),o=new gk;return oU(t,o,new $V(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){aU(n=pn(n,br));const e=ci(n),t=n._freezeSettings(),r=new gk;return oU(e,r,new y$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Pe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $i;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!rl.vt())return Promise.resolve();const o=r+"main";yield rl.delete(o)}),function(r){return t.apply(this,arguments)})(aO(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class NU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&uu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=pn(n,zC))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&uu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=it.MOCK_USER;else{c=(0,k.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new it(y)}n._authCredentials=new M2(new AF(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield qV(n),t=yield zV(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o.fu.delete(0),WC(o)}(t)}))}(ci(n=pn(n,br)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield qV(n),t=yield zV(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(o){const u=qe(o);u.fu.add(0),yield Gv(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(ci(n=pn(n,br)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new $i;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,e){return XO.apply(this,arguments)}(yield bk(e),t)})),t.promise}(ci(n=pn(n,br)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new hx(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Qv(n),o=t,qe(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Qv(n),o=t,void qe(r).Eu.delete(o);var r,o}))}}(ci(n=pn(n,br)),Tk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xv(this,nU(this._delegate,e))}catch(t){throw eo(t,"collection()","Firestore.collection()")}}doc(e){try{return new du(this,gx(this._delegate,e))}catch(t){throw eo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new to(this,function(n,e){if(n=pn(n,zC),Ik("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xs(n,null,(t=e,new eh(_n.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw eo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(o=n,fx(o).then(u=>u.datastore));var o;new w$(n.asyncQueue,r,e,t).run()})),t.promise}(ci(n=pn(n,br)),t=>e(new vH(n,t)))}(this._delegate,t=>e(new MU(this,t)))}batch(){return ci(this._delegate),new PU(new IU(this._delegate,e=>Jv(this._delegate,e)))}loadBundle(e){return function(n,e){const t=ci(n=pn(n,br)),r=new O$;return function(n,e,t,r){const o=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return HV(y,b);if(y instanceof ArrayBuffer)return HV(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new v$(y,c);var y}(t,GC(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(n,e,t){const r=qe(n);var o;(o=(0,Ee.Z)(function*(u,c,p){try{const y=yield c.getMetadata();if(yield function(O,$){const K=qe(O),ye=Gi($.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",xe=>K._s.getBundleMetadata(xe,$.id)).then(xe=>!!xe&&xe.createTime.compareTo(ye)>=0)}(u.localStore,y))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(O=y).totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}),Promise.resolve(new Set);p._updateProgress(MV(y));const b=new Yj(y,u.localStore,c.M);let S=yield c.da();for(;S;){const O=yield b.ku(S);O&&p._updateProgress(O),S=yield c.da()}const x=yield b.complete();return yield th(u,x.Fu,void 0),yield function(O,$){const K=qe(O);return K.persistence.runTransaction("Save bundle","readwrite",ye=>K._s.saveBundleMetadata(ye,$))}(u.localStore,y),p._completeWith(x.progress),Promise.resolve(x.Ou)}catch(y){return uu("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var O}),function(u,c,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield bk(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield wk(n),e)}))}(ci(n=pn(n,br)),e).then(t=>t?new xs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new to(this,t):null)}}class Cx extends Nk{constructor(e){super(),this.firestore=e}convertBytes(e){return new JC(new Dc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return du.forKey(t,this.firestore,null)}}class MU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Cx(e)}get(e){const t=Qm(e);return this._delegate.get(t).then(r=>new XC(this._firestore,new rh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Qm(e);return r?(Pk("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Qm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Qm(e);return this._delegate.delete(t),this}}class PU{constructor(e){this._delegate=e}set(e,t,r){const o=Qm(e);return r?(Pk("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Qm(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Qm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ym{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new YC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eI(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ym.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ym(e,new Cx(e),t),o.set(t,u)),u}}Ym.INSTANCES=new WeakMap;class du{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new du(t,new fr(t._delegate,r,new We(e)))}static forKey(e,t,r){return new du(t,new fr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Xv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xv(this.firestore,nU(this._delegate,e))}catch(t){throw eo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof fr&&rU(this._delegate,e)}set(e,t){t=Pk("DocumentReference.set",t);try{return t?TU(this._delegate,e,t):TU(this._delegate,e)}catch(r){throw eo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?DU(this._delegate,e):DU(this._delegate,e,t,...r)}catch(o){throw eo(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Jv(pn(n.firestore,br),[new AC(n._key,ui.none())])}(this._delegate)}onSnapshot(...e){const t=OU(e),r=kU(e,o=>new XC(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return SU(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=pn(n,fr);const e=pn(n.firestore,br),t=ci(e),r=new Zm(e);return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,c){try{const p=yield function(y,b){const S=qe(y);return S.persistence.runTransaction("read document","readonly",x=>S.ci.Ls(x,b))}(o,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Pe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=zv(p,`Failed to get document '${u} from cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield wk(n),e,t);var r})),t.promise}(t,n._key).then(o=>new rh(e,r,n._key,o,new Km(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=pn(n,fr);const e=pn(n.firestore,br);return KV(ci(e),n._key,{source:"server"}).then(t=>Mk(e,n,t))}(this._delegate):function(n){n=pn(n,fr);const e=pn(n.firestore,br);return KV(ci(e),n._key).then(t=>Mk(e,n,t))}(this._delegate),t.then(r=>new XC(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new du(this.firestore,this._delegate.withConverter(e?Ym.getInstance(this.firestore,e):null))}}function eo(n,e,t){return n.message=n.message.replace(e,t),n}function OU(n){for(const e of n)if("object"==typeof e&&!Ok(e))return e;return{}}function kU(n,e){var t,r;let o;return o=Ok(n[0])?n[0]:Ok(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class XC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new du(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gU(this._delegate,e._delegate)}}class eI extends XC{data(e){const t=this._delegate.data(e);return function(n,e){n||Xe()}(void 0!==t),t}}class to{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Cx(e)}where(e,t,r){try{return new to(this.firestore,ap(this._delegate,function(n,e,t){const r=e,o=wx("where",n);return new X$(o,r,t)}(e,t,r)))}catch(o){throw eo(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new to(this.firestore,ap(this._delegate,function(n,e="asc"){const t=e,r=wx("orderBy",n);return new tH(r,t)}(e,t)))}catch(r){throw eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new to(this.firestore,ap(this._delegate,function(n){return eU("limit",n),new _U("limit",n,"F")}(e)))}catch(t){throw eo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new to(this.firestore,ap(this._delegate,function(n){return eU("limitToLast",n),new _U("limitToLast",n,"L")}(e)))}catch(t){throw eo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new to(this.firestore,ap(this._delegate,function(...n){return new yU("startAt",n,!0)}(...e)))}catch(t){throw eo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new to(this.firestore,ap(this._delegate,function(...n){return new yU("startAfter",n,!1)}(...e)))}catch(t){throw eo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new to(this.firestore,ap(this._delegate,function(...n){return new vU("endBefore",n,!1)}(...e)))}catch(t){throw eo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new to(this.firestore,ap(this._delegate,function(...n){return new vU("endAt",n,!0)}(...e)))}catch(t){throw eo(t,"endAt()","Query.endAt()")}}isEqual(e){return iU(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=pn(n,xs);const e=pn(n.firestore,br),t=ci(e),r=new Zm(e);return function(n,e){const t=new $i;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(o,u,c){try{const p=yield ox(o,u,!0),y=new kV(u,p.li),b=y.Gu(p.documents),S=y.applyChanges(b,!1);c.resolve(S.snapshot)}catch(p){const y=zv(p,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(o,u,c){return r.apply(this,arguments)})(yield wk(n),e,t);var r})),t.promise}(t,n._query).then(o=>new op(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=pn(n,xs);const e=pn(n.firestore,br),t=ci(e),r=new Zm(e);return ZV(t,n._query,{source:"server"}).then(o=>new op(e,r,n,o))}(this._delegate):function(n){n=pn(n,xs);const e=pn(n.firestore,br),t=ci(e),r=new Zm(e);return mU(n._query),ZV(t,n._query).then(o=>new op(e,r,n,o))}(this._delegate),t.then(r=>new kk(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=OU(e),r=kU(e,o=>new kk(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return SU(this._delegate,t,r)}withConverter(e){return new to(this.firestore,this._delegate.withConverter(e?Ym.getInstance(this.firestore,e):null))}}class NH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new to(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new NH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new eI(this._firestore,r))})}isEqual(e){return gU(this._delegate,e._delegate)}}class Xv extends to{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new du(this.firestore,e):null}doc(e){try{return new du(this.firestore,void 0===e?gx(this._delegate):gx(this._delegate,e))}catch(t){throw eo(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=pn(n.firestore,br),r=gx(n),o=bx(n.converter,e);return Jv(t,[yx(qm(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,ui.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new du(this.firestore,t))}isEqual(e){return rU(this._delegate,e._delegate)}withConverter(e){return new Xv(this.firestore,this._delegate.withConverter(e?Ym.getInstance(this.firestore,e):null))}}function Qm(n){return pn(n,fr)}class Fk{constructor(...e){this._delegate=new nh(...e)}static documentId(){return new Fk(Hi.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof nh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Jm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Dk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Jm(e)}static delete(){const e=new KC("deleteField");return e._methodName="FieldValue.delete",new Jm(e)}static arrayUnion(...e){const t=function(...n){return new z$("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Jm(t)}static arrayRemove(...e){const t=function(...n){return new K$("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Jm(t)}static increment(e){const t=function(n){return new Z$("increment",n)}(e);return t._methodName="FieldValue.increment",new Jm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MH={Firestore:NU,GeoPoint:mx,Timestamp:Xr,Blob:JC,Transaction:MU,WriteBatch:PU,DocumentReference:du,DocumentSnapshot:XC,Query:to,QueryDocumentSnapshot:eI,QuerySnapshot:kk,CollectionReference:Xv,FieldPath:Fk,FieldValue:Jm,setLogLevel:function(n){!function(n){Hn.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function FU(n,e){return function(n,e=Zh.z){return new Bn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Lk(n,e){return FU(n,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function Ix(n,e){return Lk(n,e).pipe(Bs(void 0),ZS(),(0,St.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const y=o.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function LU(n,e,t){return Ix(n,t).pipe(Ba((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Vk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Vk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),k_(),(0,St.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Vk(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function VU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new ca.wA("firestore-compat",t=>((e,t)=>new NU(e,t,new xH))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},MH)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(DI.Z);class UU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Ix(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,St.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Bs(void 0),ZS(),Pi(([r,o])=>o.length>0||!r),(0,St.U)(([r,o])=>o),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ba((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VU(e);return LU(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return Lk(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new BU(this.ref.doc(e),this.afs)}}class BU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=HU(r,t);return new UU(o,u,this.afs)}snapshotChanges(){return function(n,e){return FU(n,e).pipe(Bs(void 0),ZS(),(0,St.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,St.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Ht.D)(this.ref.get(e)).pipe(cn.iC)}}class UH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pi(t=>t.length>0),cn.iC):Ix(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ba((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=VU(e);return LU(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return Lk(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),cn.iC)}get(e){return(0,Ht.D)(this.query.get(e)).pipe(cn.iC)}}const jU=new m.OlP("angularfire2.enableFirestorePersistence"),$U=new m.OlP("angularfire2.firestore.persistenceSettings"),BH=new m.OlP("angularfire2.firestore.settings"),jH=new m.OlP("angularfire2.firestore.use-emulator");function HU(n,e=(t=>t)){return{query:e(n),ref:n}}let $H=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x,O,$,K,ye,xe,gt,ht){this.schedulers=y;const et=(0,vr.on)(t,p,r),st=S;x&&G0(et,p,O,K,ye,xe,$,gt),[this.firestore,this.persistenceEnabled$]=(0,vr.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Wt=p.runOutsideAngular(()=>et.firestore());if(u&&Wt.settings(u),st&&Wt.useEmulator(...st),o&&!cl(c)){const rn=()=>{try{return(0,Ht.D)(Wt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(di){return"undefined"!=typeof console&&console.warn(di),(0,ut.of)(!1)}};return[Wt,p.runOutsideAngular(rn)]}return[Wt,(0,ut.of)(!1)]},[u,st,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=HU(o,r),p=this.schedulers.ngZone.run(()=>u);return new UU(p,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new UH(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new BU(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vr.Dh),m.LFG(vr.xv,8),m.LFG(jU,8),m.LFG(BH,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG($U,8),m.LFG(jH,8),m.LFG(Oy,8),m.LFG(j0,8),m.LFG(Py,8),m.LFG(Xg,8),m.LFG($0,8),m.LFG(JD,8),m.LFG(H0,8),m.LFG(Qg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),HH=(()=>{class n{constructor(){Jg.Z.registerVersion("angularfire",cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:jU,useValue:!0},{provide:$U,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[$H]}),n})();class WH{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new qH(e,this.dueTime,this.scheduler))}}class qH extends zr.L{constructor(e,t,r){super(e),this.dueTime=t,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(zH,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function zH(n){n.debouncedNext()}const GU="firebasestorage.googleapis.com",WU="storageBucket";class Ur extends k.ZR{constructor(e,t){super(Uk(e),`Firebase Storage: ${t} (${Uk(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ur.prototype)}_codeEquals(e){return Uk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Uk(n){return"storage/"+n}function Bk(){return new Ur("unknown","An unknown error occurred, please check the error payload for server response.")}function qU(){return new Ur("canceled","User canceled the upload/download.")}function zU(){return new Ur("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function eE(n){return new Ur("invalid-argument",n)}function KU(){return new Ur("app-deleted","The Firebase app was deleted.")}function ZU(n){return new Ur("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tI(n,e){return new Ur("invalid-format","String does not match format '"+n+"': "+e)}function nI(n){throw new Ur("internal-error","Internal error: "+n)}class Rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Rs.makeFromUrl(e,t)}catch(o){return new Rs(e,"")}if(""===r.path)return r;throw function(n){return new Ur("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+o+"(/(.*))?$","i");function b(st){st.path_=decodeURIComponent(st.path)}const x=t.replace(/[.]/g,"\\."),et=[{regex:p,indices:{bucket:1,path:3},postModify:function(st){"/"===st.path.charAt(st.path.length-1)&&(st.path_=st.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${x}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===GU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let st=0;st<et.length;st++){const Wt=et[st],rn=Wt.regex.exec(e);if(rn){let Sa=rn[Wt.indices.path];Sa||(Sa=""),r=new Rs(rn[Wt.indices.bucket],Sa),Wt.postModify(r);break}}if(null==r)throw function(n){return new Ur("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class a3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Tx(n){return"string"==typeof n||n instanceof String}function YU(n){return jk()&&n instanceof Blob}function jk(){return"undefined"!=typeof Blob}function $k(n,e,t,r){if(r<e)throw eE(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw eE(`Invalid value for '${n}'. Expected ${t} or less.`)}function ih(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function QU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var lp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(lp||(lp={})),lp))();class f3{constructor(e,t,r,o,u,c,p,y,b,S,x){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=S,this.connectionFactory_=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,$)=>{this.resolve_=O,this.reject_=$,this.start_()})}start_(){const t=(r,o)=>{const u=this.resolve_,c=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(p,p.getResponse());!function(n){return void 0!==n}(y)?u():u(y)}catch(y){c(y)}else if(null!==p){const y=Bk();y.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,y):y)}else c(o.canceled?this.appDelete_?KU():qU():new Ur("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new Dx(!1,null,!0)):this.backoffId_=function(n,e,t){let r=1,o=null,u=null,c=!1,p=0;function y(){return 2===p}let b=!1;function S(...xe){b||(b=!0,e.apply(null,xe))}function x(xe){o=setTimeout(()=>{o=null,n($,y())},xe)}function O(){u&&clearTimeout(u)}function $(xe,...gt){if(b)return void O();if(xe)return O(),void S.call(null,xe,...gt);if(y()||c)return O(),void S.call(null,xe,...gt);let et;r<64&&(r*=2),1===p?(p=2,et=0):et=1e3*(r+Math.random()),x(et)}let K=!1;function ye(xe){K||(K=!0,O(),!b&&(null!==o?(xe||(p=2),clearTimeout(o),x(0)):xe||(p=1)))}return x(0),u=setTimeout(()=>{c=!0,ye(!0)},t),ye}((r,o)=>{if(o)return void r(!1,new Dx(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===lp.NO_ERROR,y=u.getStatus();if(!p||this.isRetryStatusCode_(y)){const S=u.getErrorCode()===lp.ABORT;return void r(!1,new Dx(!1,null,S))}const b=-1!==this.successCodes_.indexOf(y);r(!0,new Dx(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,o=-1!==[408,429].indexOf(e),u=-1!==this.additionalRetryCodes_.indexOf(e);return t||o||u}}class Dx{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function E3(...n){const e="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(jk())return new Blob(n);throw new Ur("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Da={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Hk{constructor(e,t){this.data=e,this.contentType=t||null}}function Gk(n,e){switch(n){case Da.RAW:return new Hk(JU(e));case Da.BASE64:case Da.BASE64URL:return new Hk(XU(n,e));case Da.DATA_URL:return new Hk(function(n){const e=new e2(n);return e.base64?XU(Da.BASE64,e.rest):function(n){let e;try{e=decodeURIComponent(n)}catch(t){throw tI(Da.DATA_URL,"Malformed data URL.")}return JU(e)}(e.rest)}(e),function(n){return new e2(n).contentType}(e))}throw Bk()}function JU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function XU(n,e){switch(n){case Da.BASE64:{const o=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(o||u)throw tI(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Da.BASE64URL:{const o=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(o||u)throw tI(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function(n){return atob(n)}(e)}catch(o){throw tI(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class e2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw tI(Da.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class Sc{constructor(e,t){let r=0,o="";YU(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(YU(this.data_)){const o=function(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new Sc(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Sc(r,!0)}}static getBlob(...e){if(jk()){const t=e.map(r=>r instanceof Sc?r.data_:r);return new Sc(E3.apply(null,t))}{const t=e.map(c=>Tx(c)?Gk(Da.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)o[u++]=c[p]}),new Sc(o,!0)}}uploadData(){return this.data_}}function Wk(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function t2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function x3(n,e){return e}class no{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||x3}}let Sx=null;function rI(){if(Sx)return Sx;const n=[];n.push(new no("bucket")),n.push(new no("generation")),n.push(new no("metageneration")),n.push(new no("name","fullPath",!0));const t=new no("name");t.xform=function(u,c){return function(n){return!Tx(n)||n.length<2?n:t2(n)}(c)},n.push(t);const o=new no("size");return o.xform=function(u,c){return void 0!==c?Number(c):c},n.push(o),n.push(new no("timeCreated")),n.push(new no("updated")),n.push(new no("md5Hash",null,!0)),n.push(new no("cacheControl",null,!0)),n.push(new no("contentDisposition",null,!0)),n.push(new no("contentEncoding",null,!0)),n.push(new no("contentLanguage",null,!0)),n.push(new no("contentType",null,!0)),n.push(new no("metadata","customMetadata",!0)),Sx=n,Sx}function n2(n,e,t){const r=Wk(e);return null===r?null:function(n,e,t){const r={type:"file"},o=t.length;for(let u=0;u<o;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function(n,e){Object.defineProperty(n,"ref",{get:function(){const u=new Rs(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function qk(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const r2="prefixes";class Ac{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xc(n){if(!n)throw Bk()}function Ax(n,e){return function(r,o){const u=n2(n,o,e);return xc(null!==u),u}}function tE(n){return function(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?new Ur("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Ur("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(n){return new Ur("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function(n){return new Ur("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,o.serverResponse=r.serverResponse,o}}function iI(n){const e=tE(n);return function(r,o){let u=e(r,o);return 404===r.getStatus()&&(u=function(n){return new Ur("object-not-found","Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=o.serverResponse,u}}function s2(n,e,t){const o=ih(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Ac(o,"GET",Ax(n,t),c);return p.errorHandler=iI(e),p}function V3(n,e,t,r,o){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),o&&(u.maxResults=o);const p=ih(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,S=new Ac(p,"GET",function(n,e){return function(r,o){const u=function(n,e,t){const r=Wk(t);return null===r?null:function(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[r2])for(const o of t[r2]){const u=o.replace(/\/$/,""),c=n._makeStorageReference(new Rs(e,u));r.prefixes.push(c)}if(t.items)for(const o of t.items){const u=n._makeStorageReference(new Rs(e,o.name));r.items.push(u)}return r}(n,e,r)}(n,e,o);return xc(null!==u),u}}(n,e.bucket),b);return S.urlParams=u,S.errorHandler=tE(e),S}function a2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function(n,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}class xx{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function zk(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(o){xc(!1)}return xc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const q3={STATE_CHANGED:"state_changed"},ro={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kk(n){switch(n){case"running":case"pausing":case"canceling":return ro.RUNNING;case"paused":return ro.PAUSED;case"success":return ro.SUCCESS;case"canceled":return ro.CANCELED;case"error":default:return ro.ERROR}}class z3{constructor(e,t,r){if(function(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function nE(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Z3 extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=lp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=lp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw nI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nI("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw nI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function il(){return new Z3}class d2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=rI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{this._request=void 0,this._chunkMultiplier=1,o._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=o,this._transition("error"))},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals("canceled")?this.completeTransitions_():(this._error=o,this._transition("error"))},this._promise=new Promise((o,u)=>{this._resolve=o,this._reject=u,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c=a2(e,r,o),p={name:c.fullPath},y=ih(u,n.host,n._protocol),S={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},x=qk(c,t),K=new Ac(y,"POST",function(ye){let xe;zk(ye);try{xe=ye.getResponseHeader("X-Goog-Upload-URL")}catch(gt){xc(!1)}return xc(Tx(xe)),xe},n.maxUploadRetryTime);return K.urlParams=p,K.headers=S,K.body=x,K.errorHandler=tE(e),K}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,il,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function(n,e,t,r){const y=new Ac(t,"POST",function(b){const S=zk(b,["active","final"]);let x=null;try{x=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch($){xc(!1)}x||xc(!1);const O=Number(x);return xc(!isNaN(O)),new xx(O,r.size(),"final"===S)},n.maxUploadRetryTime);return y.headers={"X-Goog-Upload-Command":"query"},y.errorHandler=tE(e),y}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(o,il,t,r);this._request=u,u.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new xx(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,u)=>{let c;try{c=function(n,e,t,r,o,u,c,p){const y=new xx(0,0);if(c?(y.current=c.current,y.total=c.total):(y.current=0,y.total=r.size()),r.size()!==y.total)throw new Ur("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=y.total-y.current;let S=b;o>0&&(S=Math.min(S,o));const x=y.current,K={"X-Goog-Upload-Command":S===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${y.current}`},ye=r.slice(x,x+S);if(null===ye)throw zU();const et=new Ac(t,"POST",function(st,Wt){const rn=zk(st,["active","final"]),di=y.current+S,Sa=r.size();let Qk;return Qk="final"===rn?Ax(e,u)(st,Wt):null,new xx(di,Sa,"final"===rn,Qk)},e.maxUploadRetryTime);return et.headers=K,et.body=ye.uploadData(),et.progressCallback=p||null,et.errorHandler=tE(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(y){return this._error=y,void this._transition("error")}const p=this._ref.storage._makeRequest(c,il,o,u);this._request=p,p.getPromise().then(y=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(y.current),y.finalized?(this._metadata=y.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=s2(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,il,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function(n,e,t,r,o){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function(){let et="";for(let st=0;st<2;st++)et+=Math.random().toString().slice(2);return et}();c["Content-Type"]="multipart/related; boundary="+y;const b=a2(e,r,o),S=qk(b,t),$=Sc.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+S+"\r\n--"+y+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===$)throw zU();const K={name:b.fullPath},ye=ih(u,n.host,n._protocol),gt=n.maxUploadRetryTime,ht=new Ac(ye,"POST",Ax(n,t),gt);return ht.urlParams=K,ht.headers=c,ht.body=$.uploadData(),ht.errorHandler=tE(e),ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,il,e,t);this._request=o,o.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=qU(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Kk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const u=new z3(t||void 0,r||void 0,o||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Kk(this._state)){case ro.SUCCESS:nE(this._resolve.bind(null,this.snapshot))();break;case ro.CANCELED:case ro.ERROR:nE(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Kk(this._state)){case ro.RUNNING:case ro.PAUSED:e.next&&nE(e.next.bind(e,this.snapshot))();break;case ro.SUCCESS:e.complete&&nE(e.complete.bind(e))();break;case ro.CANCELED:case ro.ERROR:e.error&&nE(e.error.bind(e,this._error))();break;default:e.error&&nE(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xm{constructor(e,t){this._service=e,this._location=t instanceof Rs?t:Rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xm(e,t)}get root(){const e=new Rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return t2(this._location.path)}get storage(){return this._service}get parent(){const e=function(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Rs(this._location.bucket,e);return new Xm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw ZU(e)}}function f2(n,e,t){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,Ee.Z)(function*(n,e,t){const o=yield p2(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield f2(n,e,o.nextPageToken))})).apply(this,arguments)}function p2(n,e){null!=e&&"number"==typeof e.maxResults&&$k("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=V3(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,il)}function aG(n){n._throwIfRoot("getDownloadURL");const e=function(n,e,t){const o=ih(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new Ac(o,"GET",function(n,e){return function(r,o){const u=n2(n,o,e);return xc(null!==u),function(n,e,t,r){const o=Wk(e);if(null===o||!Tx(o.downloadTokens))return null;const u=o.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const x=n.fullPath;return ih("/b/"+c(n.bucket)+"/o/"+c(x),t,r)+QU({alt:"media",token:b})})[0]}(u,o,n.host,n._protocol)}}(n,t),c);return p.errorHandler=iI(e),p}(n.storage,n._location,rI());return n.storage.makeRequestWithTokens(e,il).then(t=>{if(null===t)throw new Ur("no-download-url","The given file does not have any download URLs.");return t})}function g2(n,e){const t=function(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Rs(n._location.bucket,t);return new Xm(n.storage,r)}function m2(n,e){if(n instanceof Yk){const t=n;if(null==t._bucket)throw new Ur("no-default-bucket","No default bucket found. Did you set the '"+WU+"' property when initializing the app?");const r=new Xm(t,t._bucket);return null!=e?m2(r,e):r}return void 0!==e?g2(n,e):n}function dG(n,e){if(e&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Yk)return function(n,e){return new Xm(n,e)}(n,e);throw eE("To use ref(service, url), the first argument must be a Storage instance.")}return m2(n,e)}function _2(n,e){const t=null==e?void 0:e[WU];return null==t?null:Rs.makeFromBucketSpec(t,n)}class Yk{constructor(e,t,r,o,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._bucket=null,this._host=GU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?Rs.makeFromBucketSpec(o,this._host):_2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Rs.makeFromBucketSpec(this._url,e):_2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$k("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$k("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xm(this,e)}_makeRequest(e,t,r,o){if(this._deleted)return new a3(KU());{const u=function(n,e,t,r,o,u){const c=QU(n.urlParams),p=n.url+c,y=Object.assign({},n.headers);return function(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,u),function(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new f3(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o)}(e,this._appId,r,o,t,this._firebaseVersion);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[o,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,u).getPromise()})()}}const y2="@firebase/storage";function w2(n,e){return dG(n=(0,k.m9)(n),e)}(0,Fi._registerComponent)(new ca.wA("storage",function(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Yk(t,r,o,e,Fi.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Fi.registerVersion)(y2,"0.9.5",""),(0,Fi.registerVersion)(y2,"0.9.5","esm2017");class Rx{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class b2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Rx(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Rx(r,this,this._ref))},t)}on(e,t,r,o){let u;return t&&(u="function"==typeof t?c=>t(new Rx(c,this,this._ref)):{next:t.next?c=>t.next(new Rx(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,o||void 0)}}class C2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new sh(e,this._service))}get items(){return this._delegate.items.map(e=>new sh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class sh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(n,e){return g2(n,e)}(this._delegate,e);return new sh(t,this.storage)}get root(){return new sh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new sh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new b2(function(n,e,t){return function(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new d2(n,new Sc(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Da.RAW,r){this._throwIfRoot("putString");const o=Gk(t,e),u=Object.assign({},r);return null==u.contentType&&null!=o.contentType&&(u.contentType=o.contentType),new b2(new d2(this._delegate,new Sc(o.data,!0),u),this)}listAll(){return function(n){return function(n){const e={prefixes:[],items:[]};return f2(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new C2(e,this.storage))}list(e){return function(n,e){return p2(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new C2(t,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const e=s2(n.storage,n._location,rI());return n.storage.makeRequestWithTokens(e,il)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function(n,e){return function(n,e){n._throwIfRoot("updateMetadata");const t=function(n,e,t,r){const u=ih(e.fullServerUrl(),n.host,n._protocol),p=qk(t,r),b=n.maxOperationRetryTime,S=new Ac(u,"PATCH",Ax(n,r),b);return S.headers={"Content-Type":"application/json; charset=utf-8"},S.body=p,S.errorHandler=iI(e),S}(n.storage,n._location,e,rI());return n.storage.makeRequestWithTokens(t,il)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function(n){return aG(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const e=function(n,e){const r=ih(e.fullServerUrl(),n.host,n._protocol),p=new Ac(r,"DELETE",function(y,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=iI(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,il)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw ZU(e)}}class I2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(T2(e))throw eE("ref() expected a child path but got a URL, use refFromURL instead.");return new sh(w2(this._delegate,e),this)}refFromURL(e){if(!T2(e))throw eE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rs.makeFromUrl(e,this._delegate.host)}catch(t){throw eE("refFromUrl() expected a valid full URL but got an invalid one.")}return new sh(w2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function(n,e,t,r={}){!function(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,k.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function T2(n){return/^[A-Za-z]+:\/\//.test(n)}function SG(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new I2(t,r)}function D2(n){const e=function(n){return new Bn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function(n,e=Zh.P){return t=>t.lift(new WH(n,e))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,St.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Nx(n){return{getDownloadURL:()=>(0,ut.of)(void 0).pipe(cn.fc,mr(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>(0,ut.of)(void 0).pipe(cn.fc,mr(()=>n.getMetadata()),cn.iC),delete:()=>(0,Ht.D)(n.delete()),child:e=>Nx(n.child(e)),updateMetadata:e=>(0,Ht.D)(n.updateMetadata(e)),put:(e,t)=>D2(n.put(e,t)),putString:(e,t,r)=>D2(n.putString(e,t,r)),list:e=>(0,Ht.D)(n.list(e)),listAll:()=>(0,Ht.D)(n.listAll())}}!function(n){const e={TaskState:ro,TaskEvent:q3,StringFormat:Da,Storage:I2,Reference:sh};n.INTERNAL.registerComponent(new ca.wA("storage-compat",SG,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(DI.Z);const RG=new m.OlP("angularfire2.storageBucket"),NG=new m.OlP("angularfire2.storage.maxUploadRetryTime"),MG=new m.OlP("angularfire2.storage.maxOperationRetryTime"),PG=new m.OlP("angularfire2.storage.use-emulator");let OG=(()=>{class n{constructor(t,r,o,u,c,p,y,b,S,x){const O=(0,vr.on)(t,c,r);this.storage=(0,vr.cc)(`${O.name}.storage.${o}`,"AngularFireStorage",O.name,()=>{const $=c.runOutsideAngular(()=>O.storage(o||void 0)),K=S;return K&&$.useEmulator(...K),y&&$.setMaxUploadRetryTime(y),b&&$.setMaxOperationRetryTime(b),$},[y,b])}ref(t){return Nx(this.storage.ref(t))}refFromURL(t){return Nx(this.storage.refFromURL(t))}upload(t,r,o){return Nx(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(vr.Dh),m.LFG(vr.xv,8),m.LFG(RG,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(cn.HU),m.LFG(NG,8),m.LFG(MG,8),m.LFG(PG,8),m.LFG(Qg,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),FG=(()=>{class n{constructor(){Jg.Z.registerVersion("angularfire",cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[OG],imports:[kG]}),n})();const LG={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let VG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[zM]}),n.\u0275inj=m.cJS({providers:[],imports:[[wp,Vx,zS,vr.hO.initializeApp(LG),HH,eM,FG]]}),n})();(0,m.G48)(),ms().bootstrapModule(VG).catch(n=>console.error(n))},3394:(tt,be,V)=>{"use strict";V.d(be,{Z:()=>fe});var m=V(3854),X=V(3910),L=V(8026),ae=V(5422);class re{constructor(Le,oe){this._delegate=Le,this.firebase=oe,(0,L._addComponent)(Le,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=Le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Le){this._delegate.automaticDataCollectionEnabled=Le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Le=>{this._delegate.checkDestroyed(),Le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(Le,oe=L._DEFAULT_ENTRY_NAME){var he;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(Le);return!ke.isInitialized()&&"EXPLICIT"===(null===(he=ke.getComponent())||void 0===he?void 0:he.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:oe})}_removeServiceInstance(Le,oe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Le).clearInstance(oe)}_addComponent(Le){(0,L._addComponent)(this._delegate,Le)}_addOrOverwriteComponent(Le){(0,L._addOrOverwriteComponent)(this._delegate,Le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ne(){const pe=function(pe){const Le={},oe={__esModule:!0,initializeApp:function(ct,ze={}){const Se=L.initializeApp(ct,ze);if((0,m.r3)(Le,Se.name))return Le[Se.name];const we=new pe(Se,oe);return Le[Se.name]=we,we},app:ke,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(ct){const ze=ct.name,Se=ze.replace("-compat","");if(L._registerComponent(ct)&&"PUBLIC"===ct.type){const we=(Ue=ke())=>{if("function"!=typeof Ue[Se])throw me.create("invalid-app-argument",{appName:ze});return Ue[Se]()};void 0!==ct.serviceProps&&(0,m.ZB)(we,ct.serviceProps),oe[Se]=we,pe.prototype[Se]=function(...Ue){return this._getService.bind(this,ze).apply(this,ct.multipleInstances?Ue:[])}}return"PUBLIC"===ct.type?oe[Se]:null},removeApp:function(ct){delete Le[ct]},useAsService:function(ct,ze){return"serverAuth"===ze?null:ze},modularAPIs:L}};function ke(ct){if(!(0,m.r3)(Le,ct=ct||L._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:ct});return Le[ct]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(Le).map(ct=>Le[ct])}}),ke.App=pe,oe}(re);return pe.INTERNAL=Object.assign(Object.assign({},pe.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(oe){(0,m.ZB)(pe,oe)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),pe}(),G=new ae.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pe=self.firebase.SDK_VERSION;pe&&pe.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const fe=U;(0,L.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(tt,be,V)=>{"use strict";V.r(be),V.d(be,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>In,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>Nr,_addOrOverwriteComponent:()=>hi,_apps:()=>Xt,_clearComponents:()=>gn,_components:()=>ot,_getProvider:()=>Tt,_registerComponent:()=>Gn,_removeServiceInstance:()=>Fn,deleteApp:()=>Me,getApp:()=>ar,getApps:()=>Ii,initializeApp:()=>io,onLog:()=>er,registerVersion:()=>Ze,setLogLevel:()=>Wn});var m=V(8239),X=V(3910),L=V(5422),ae=V(3854);class re{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(at=>{if(function(Ye){const Ae=Ye.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(at)){const _t=at.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(at=>at).join(" ")}}const me="@firebase/app",J="0.7.21",ne=new L.Yd("@firebase/app"),jt="[DEFAULT]",Sn={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,ot=new Map;function Nr(Ye,Ae){try{Ye.container.addComponent(Ae)}catch(at){ne.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Ye.name}`,at)}}function hi(Ye,Ae){Ye.container.addOrOverwriteComponent(Ae)}function Gn(Ye){const Ae=Ye.name;if(ot.has(Ae))return ne.debug(`There were multiple attempts to register component ${Ae}.`),!1;ot.set(Ae,Ye);for(const at of Xt.values())Nr(at,Ye);return!0}function Tt(Ye,Ae){const at=Ye.container.getProvider("heartbeat").getImmediate({optional:!0});return at&&at.triggerHeartbeat(),Ye.container.getProvider(Ae)}function Fn(Ye,Ae,at=jt){Tt(Ye,Ae).clearInstance(at)}function gn(){ot.clear()}const Xn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class vn{constructor(Ae,at,_t){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},at),this._name=at.name,this._automaticDataCollectionEnabled=at.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw Xn.create("app-deleted",{appName:this._name})}}const In="9.6.11";function io(Ye,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const at=Object.assign({name:jt,automaticDataCollectionEnabled:!1},Ae),_t=at.name;if("string"!=typeof _t||!_t)throw Xn.create("bad-app-name",{appName:String(_t)});const Lt=Xt.get(_t);if(Lt){if((0,ae.vZ)(Ye,Lt.options)&&(0,ae.vZ)(at,Lt.config))return Lt;throw Xn.create("duplicate-app",{appName:_t})}const Qt=new X.H0(_t);for(const H of ot.values())Qt.addComponent(H);const z=new vn(Ye,at,Qt);return Xt.set(_t,z),z}function ar(Ye=jt){const Ae=Xt.get(Ye);if(!Ae)throw Xn.create("no-app",{appName:Ye});return Ae}function Ii(){return Array.from(Xt.values())}function Me(Ye){return ur.apply(this,arguments)}function ur(){return(ur=(0,m.Z)(function*(Ye){const Ae=Ye.name;Xt.has(Ae)&&(Xt.delete(Ae),yield Promise.all(Ye.container.getProviders().map(at=>at.delete())),Ye.isDeleted=!0)})).apply(this,arguments)}function Ze(Ye,Ae,at){var _t;let Lt=null!==(_t=Sn[Ye])&&void 0!==_t?_t:Ye;at&&(Lt+=`-${at}`);const Qt=Lt.match(/\s|\//),z=Ae.match(/\s|\//);if(Qt||z){const H=[`Unable to register library "${Lt}" with version "${Ae}":`];return Qt&&H.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),Qt&&z&&H.push("and"),z&&H.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void ne.warn(H.join(" "))}Gn(new X.wA(`${Lt}-version`,()=>({library:Lt,version:Ae}),"VERSION"))}function er(Ye,Ae){if(null!==Ye&&"function"!=typeof Ye)throw Xn.create("invalid-log-argument");(0,L.Am)(Ye,Ae)}function Wn(Ye){(0,L.Ub)(Ye)}const Cr="firebase-heartbeat-store";let Ir=null;function Ln(){return Ir||(Ir=(0,ae.X3)("firebase-heartbeat-database",1,(Ye,Ae)=>{switch(Ae){case 0:Ye.createObjectStore(Cr)}}).catch(Ye=>{throw Xn.create("storage-open",{originalErrorMessage:Ye.message})})),Ir}function An(){return(An=(0,m.Z)(function*(Ye){try{return(yield Ln()).transaction(Cr).objectStore(Cr).get(Ns(Ye))}catch(Ae){throw Xn.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function He(Ye,Ae){return mt.apply(this,arguments)}function mt(){return(mt=(0,m.Z)(function*(Ye,Ae){try{const _t=(yield Ln()).transaction(Cr,"readwrite");return yield _t.objectStore(Cr).put(Ae,Ns(Ye)),_t.complete}catch(at){throw Xn.create("storage-set",{originalErrorMessage:at.message})}})).apply(this,arguments)}function Ns(Ye){return`${Ye.name}!${Ye.options.appId}`}class Et{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const at=this.container.getProvider("app").getImmediate();this._storage=new un(at),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var Ae=this;return(0,m.Z)(function*(){const _t=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=on();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!Ae._heartbeatsCache.heartbeats.some(Qt=>Qt.date===Lt))return Ae._heartbeatsCache.heartbeats.push({date:Lt,agent:_t}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Qt=>{const z=new Date(Qt.date).valueOf();return Date.now()-z<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,m.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const at=on(),{heartbeatsToSend:_t,unsentEntries:Lt}=function(Ye,Ae=1024){const at=[];let _t=Ye.slice();for(const Lt of Ye){const Qt=at.find(z=>z.agent===Lt.agent);if(Qt){if(Qt.dates.push(Lt.date),Pt(at)>Ae){Qt.dates.pop();break}}else if(at.push({agent:Lt.agent,dates:[Lt.date]}),Pt(at)>Ae){at.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:at,unsentEntries:_t}}(Ae._heartbeatsCache.heartbeats),Qt=(0,ae.L)(JSON.stringify({version:2,heartbeats:_t}));return Ae._heartbeatsCache.lastSentHeartbeatDate=at,Lt.length>0?(Ae._heartbeatsCache.heartbeats=Lt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Qt})()}}function on(){return(new Date).toISOString().substring(0,10)}class un{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,m.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function(Ye){return An.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var at=this;return(0,m.Z)(function*(){var _t;if(yield at._canUseIndexedDBPromise){const Qt=yield at.read();return He(at.app,{lastSentHeartbeatDate:null!==(_t=Ae.lastSentHeartbeatDate)&&void 0!==_t?_t:Qt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var at=this;return(0,m.Z)(function*(){var _t;if(yield at._canUseIndexedDBPromise){const Qt=yield at.read();return He(at.app,{lastSentHeartbeatDate:null!==(_t=Ae.lastSentHeartbeatDate)&&void 0!==_t?_t:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...Ae.heartbeats]})}})()}}function Pt(Ye){return(0,ae.L)(JSON.stringify({version:2,heartbeats:Ye})).length}Gn(new X.wA("platform-logger",Ae=>new re(Ae),"PRIVATE")),Gn(new X.wA("heartbeat",Ae=>new Et(Ae),"PRIVATE")),Ze(me,J,""),Ze(me,J,"esm2017"),Ze("fire-js","")},3910:(tt,be,V)=>{"use strict";V.d(be,{wA:()=>L,H0:()=>J,zt:()=>re});var m=V(8239),X=V(3854);class L{constructor(U,G,B){this.name=U,this.instanceFactory=G,this.type=B,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ae="[DEFAULT]";class re{constructor(U,G){this.name=U,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const G=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(G)){const B=new X.BH;if(this.instancesDeferred.set(G,B),this.isInitialized(G)||this.shouldAutoInitialize())try{const te=this.getOrInitializeService({instanceIdentifier:G});te&&B.resolve(te)}catch(te){}}return this.instancesDeferred.get(G).promise}getImmediate(U){var G;const B=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),te=null!==(G=null==U?void 0:U.optional)&&void 0!==G&&G;if(!this.isInitialized(B)&&!this.shouldAutoInitialize()){if(te)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:B})}catch(ue){if(te)return null;throw ue}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ae})}catch(G){}for(const[G,B]of this.instancesDeferred.entries()){const te=this.normalizeInstanceIdentifier(G);try{const ue=this.getOrInitializeService({instanceIdentifier:te});B.resolve(ue)}catch(ue){}}}}clearInstance(U=ae){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,m.Z)(function*(){const G=Array.from(U.instances.values());yield Promise.all([...G.filter(B=>"INTERNAL"in B).map(B=>B.INTERNAL.delete()),...G.filter(B=>"_delete"in B).map(B=>B._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ae){return this.instances.has(U)}getOptions(U=ae){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:G={}}=U,B=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(B))throw Error(`${this.name}(${B}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const te=this.getOrInitializeService({instanceIdentifier:B,options:G});for(const[ue,fe]of this.instancesDeferred.entries())B===this.normalizeInstanceIdentifier(ue)&&fe.resolve(te);return te}onInit(U,G){var B;const te=this.normalizeInstanceIdentifier(G),ue=null!==(B=this.onInitCallbacks.get(te))&&void 0!==B?B:new Set;ue.add(U),this.onInitCallbacks.set(te,ue);const fe=this.instances.get(te);return fe&&U(fe,te),()=>{ue.delete(U)}}invokeOnInitCallbacks(U,G){const B=this.onInitCallbacks.get(G);if(B)for(const te of B)try{te(U,G)}catch(ue){}}getOrInitializeService({instanceIdentifier:U,options:G={}}){let B=this.instances.get(U);if(!B&&this.component&&(B=this.component.instanceFactory(this.container,{instanceIdentifier:(ne=U,ne===ae?void 0:ne),options:G}),this.instances.set(U,B),this.instancesOptions.set(U,G),this.invokeOnInitCallbacks(B,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,B)}catch(te){}var ne;return B||null}normalizeInstanceIdentifier(U=ae){return this.component?this.component.multipleInstances?U:ae:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const G=this.getProvider(U.name);if(G.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);G.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const G=new re(U,this);return this.providers.set(U,G),G}getProviders(){return Array.from(this.providers.values())}}},5422:(tt,be,V)=>{"use strict";V.d(be,{in:()=>X,Yd:()=>me,Ub:()=>J,Am:()=>ne});const m=[];var X=(()=>{return(U=X||(X={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",X;var U})();const L={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},Z=(U,G,...B)=>{if(G<U.logLevel)return;const te=(new Date).toISOString(),ue=re[G];if(!ue)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[ue](`[${te}]  ${U.name}:`,...B)};class me{constructor(G){this.name=G,this._logLevel=ae,this._logHandler=Z,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in X))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...G),this._logHandler(this,X.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...G),this._logHandler(this,X.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,X.INFO,...G),this._logHandler(this,X.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,X.WARN,...G),this._logHandler(this,X.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...G),this._logHandler(this,X.ERROR,...G)}}function J(U){m.forEach(G=>{G.setLogLevel(U)})}function ne(U,G){for(const B of m){let te=null;G&&G.level&&(te=L[G.level]),B.userLogHandler=null===U?null:(ue,fe,...pe)=>{const Le=pe.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(he){return null}}).filter(oe=>oe).join(" ");fe>=(null!=te?te:ue.logLevel)&&U({level:X[fe].toLowerCase(),message:Le,args:pe,type:ue.name})}}}},8239:(tt,be,V)=>{"use strict";function m(L,ae,re,Z,me,J,ne){try{var U=L[J](ne),G=U.value}catch(B){return void re(B)}U.done?ae(G):Promise.resolve(G).then(Z,me)}function X(L){return function(){var ae=this,re=arguments;return new Promise(function(Z,me){var J=L.apply(ae,re);function ne(G){m(J,Z,me,ne,U,"next",G)}function U(G){m(J,Z,me,ne,U,"throw",G)}ne(void 0)})}}V.d(be,{Z:()=>X})}},tt=>{tt(tt.s=1301)}]);