(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:Ve=>{function me(O){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+O+"'");throw a.code="MODULE_NOT_FOUND",a})}me.keys=()=>[],me.resolve=me,me.id=8255,Ve.exports=me},7716:(Ve,me,O)=>{"use strict";O.d(me,{deG:()=>Oh,tb:()=>HT,AFp:()=>BT,ip1:()=>mr,CZH:()=>Xl,hGG:()=>qf,z2F:()=>hu,sBO:()=>O1,Sil:()=>ec,_Vd:()=>Tf,EJc:()=>jf,SBq:()=>il,qLn:()=>Qh,vpe:()=>ol,gxx:()=>Id,tBr:()=>Ha,XFs:()=>pt,OlP:()=>Jn,zs3:()=>or,ZZ4:()=>k1,aQg:()=>P1,soG:()=>Cy,YKP:()=>q_,v3s:()=>Gf,h0i:()=>Yl,PXZ:()=>jw,R0b:()=>oo,FiY:()=>$a,Lbi:()=>Fw,g9A:()=>UT,Qsj:()=>rM,FYo:()=>G_,JOm:()=>Za,Tiy:()=>Zg,q3G:()=>Cn,tp0:()=>Yr,EAV:()=>bR,Rgc:()=>ou,dDg:()=>Uw,DyG:()=>Js,q4F:()=>If,GfV:()=>M1,s_b:()=>Z_,ifc:()=>it,eFA:()=>wm,G48:()=>XT,Gpc:()=>N,X6Q:()=>nh,_c5:()=>Bt,VLi:()=>tc,c2e:()=>$T,zSh:()=>zc,wAp:()=>Ot,vHH:()=>J,EiD:()=>Tt,mCW:()=>Wa,qzn:()=>Vc,JVY:()=>C0,pB0:()=>dd,eBb:()=>Zp,L6k:()=>qp,LAX:()=>ia,cg1:()=>Ug,Tjo:()=>lo,kL8:()=>Zx,yhl:()=>$h,dqk:()=>St,sIi:()=>Bl,CqO:()=>Gb,QGY:()=>jb,F4k:()=>Ex,RDi:()=>Vi,AaK:()=>L,z3N:()=>ra,qOj:()=>Kc,TTD:()=>lr,_Bn:()=>XN,xp6:()=>qc,uIk:()=>hf,Tol:()=>Jb,DjV:()=>Bx,ekj:()=>Qb,Suo:()=>_w,Xpm:()=>ae,lG2:()=>Et,Yz7:()=>yt,cJS:()=>Xt,oAB:()=>se,Yjl:()=>Rt,Y36:()=>_f,_UZ:()=>Ig,BQk:()=>v_,ynx:()=>Hb,qZA:()=>y_,TgZ:()=>Ub,EpF:()=>Cx,n5z:()=>Fa,Ikx:()=>d1,SDv:()=>vD,QtT:()=>ZN,pQV:()=>D1,LFG:()=>ur,$8M:()=>Sc,NdJ:()=>Wb,CRH:()=>gT,oxw:()=>Zb,ALo:()=>uT,lcZ:()=>hw,xi3:()=>oy,Hsn:()=>Ag,F$t:()=>zb,Q6J:()=>Vb,s9C:()=>w_,MGl:()=>C_,VKq:()=>aw,WLB:()=>iy,kEZ:()=>am,iGM:()=>uy,MAs:()=>Od,CHM:()=>Ia,LSH:()=>pd,kYT:()=>Se,Udp:()=>bf,YNc:()=>gf,W1O:()=>hy,_uU:()=>R_,Oqu:()=>Rg,hij:()=>Ld,AsE:()=>ql,Gf:()=>mw});var a=O(9765),M=O(5319),k=O(7574),Q=O(6682),ie=O(8819);function W(s){for(let o in s)if(s[o]===W)return o;throw Error("Could not find renamed property on target object.")}function ee(s,o){for(const c in o)o.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=o[c])}function L(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(L).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function U(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const P=W({__forward_ref__:W});function N(s){return s.__forward_ref__=N,s.toString=function(){return L(this())},s}function S(s){return V(s)?s():s}function V(s){return"function"==typeof s&&s.hasOwnProperty(P)&&s.__forward_ref__===N}class J extends Error{constructor(o,c){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,c)),this.code=o}}function H(s){return"string"==typeof s?s:null==s?"":String(s)}function q(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():H(s)}function ve(s,o){const c=o?` in ${o}`:"";throw new J("201",`No provider for ${q(s)} found${c}`)}function Re(s,o,c,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${c} ${u} ${o} <=Actual]`))}function yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return an(s,Zn)||an(s,zn)}function an(s,o){return s.hasOwnProperty(o)?s[o]:null}function Nn(s){return s&&(s.hasOwnProperty(ze)||s.hasOwnProperty(Un))?s[ze]:null}const Zn=W({\u0275prov:W}),ze=W({\u0275inj:W}),zn=W({ngInjectableDef:W}),Un=W({ngInjectorDef:W});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let fn;function ln(s){const o=fn;return fn=s,o}function tr(s,o,c){const u=qt(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&pt.Optional?null:void 0!==o?o:void ve(L(s),"Injector")}function ar(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),it=(()=>((it=it||{})[it.Emulated=0]="Emulated",it[it.None=2]="None",it[it.ShadowDom=3]="ShadowDom",it))();const Dt="undefined"!=typeof globalThis&&globalThis,Nr="undefined"!=typeof window&&window,qr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,St=Dt||"undefined"!=typeof global&&global||Nr||qr,cn={},At=[],Zt=W({\u0275cmp:W}),rt=W({\u0275dir:W}),qe=W({\u0275pipe:W}),mt=W({\u0275mod:W}),Nt=W({\u0275loc:W}),Lt=W({\u0275fac:W}),en=W({__NG_ELEMENT_ID__:W});let fe=0;function ae(s){return ar(()=>{const c={},u={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||At,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||it.Emulated,id:"c",styles:s.styles||At,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,_=s.pipes;return u.id+=fe++,u.inputs=Xe(s.inputs,c),u.outputs=Xe(s.outputs),p&&p.forEach(v=>v(u)),u.directiveDefs=h?()=>("function"==typeof h?h():h).map(Le):null,u.pipeDefs=_?()=>("function"==typeof _?_():_).map(X):null,u})}function Le(s){return at(s)||function(s){return s[rt]||null}(s)}function X(s){return function(s){return s[qe]||null}(s)}const te={};function se(s){return ar(()=>{const o={type:s.type,bootstrap:s.bootstrap||At,declarations:s.declarations||At,imports:s.imports||At,exports:s.exports||At,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(te[s.id]=s.type),o})}function Se(s,o){return ar(()=>{const c=On(s,!0);c.declarations=o.declarations||At,c.imports=o.imports||At,c.exports=o.exports||At})}function Xe(s,o){if(null==s)return cn;const c={};for(const u in s)if(s.hasOwnProperty(u)){let h=s[u],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),c[h]=u,o&&(o[h]=p)}return c}const Et=ae;function Rt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function at(s){return s[Zt]||null}function On(s,o){const c=s[mt]||null;if(!c&&!0===o)throw new Error(`Type ${L(s)} does not have '\u0275mod' property.`);return c}function jn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Xi(s){return Array.isArray(s)&&!0===s[1]}function Nu(s){return 0!=(8&s.flags)}function dl(s){return 2==(2&s.flags)}function bi(s){return 1==(1&s.flags)}function us(s){return null!==s.template}function ds(s){return 0!=(512&s[2])}function Zs(s,o){return s.hasOwnProperty(Lt)?s[Lt]:null}class pl{constructor(o,c,u){this.previousValue=o,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function lr(){return gc}function gc(s){return s.type.prototype.ngOnChanges&&(s.setInput=Fr),Ea}function Ea(){const s=xa(this),o=null==s?void 0:s.current;if(o){const c=s.previous;if(c===cn)s.previous=o;else for(let u in o)c[u]=o[u];s.current=null,this.ngOnChanges(o)}}function Fr(s,o,c,u){const h=xa(s)||function(s,o){return s[xh]=o}(s,{previous:cn,current:null}),p=h.current||(h.current={}),_=h.previous,v=this.declaredInputs[c],C=_[v];p[v]=new pl(C&&C.currentValue,o,_===cn),s[u]=o}lr.ngInherit=!0;const xh="__ngSimpleChanges__";function xa(s){return s[xh]||null}let Da;function Vi(s){Da=s}function mc(){return void 0!==Da?Da:"undefined"!=typeof document?document:void 0}function Gn(s){return!!s.listen}const Ns={createRenderer:(s,o)=>mc()};function Fn(s){for(;Array.isArray(s);)s=s[0];return s}function _c(s,o){return Fn(o[s])}function Ln(s,o){return Fn(o[s.index])}function Ms(s,o){return s.data[o]}function Ta(s,o){return s[o]}function Lr(s,o){const c=o[s];return jn(c)?c:c[0]}function Ih(s){return 4==(4&s[2])}function ml(s){return 128==(128&s[2])}function xr(s,o){return null==o?null:s[o]}function _l(s){s[18]=0}function yc(s,o){s[5]+=o;let c=s,u=s[3];for(;null!==u&&(1===o&&1===c[5]||-1===o&&0===c[5]);)u[5]+=o,c=u,u=u[3]}const Pt={lFrame:Zu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Hu(){return Pt.bindingsEnabled}function Ze(){return Pt.lFrame.lView}function rn(){return Pt.lFrame.tView}function Ia(s){return Pt.lFrame.contextLView=s,s[8]}function Kn(){let s=vl();for(;null!==s&&64===s.type;)s=s.parent;return s}function vl(){return Pt.lFrame.currentTNode}function zs(){const s=Pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function pi(s,o){const c=Pt.lFrame;c.currentTNode=s,c.isParent=o}function Aa(){return Pt.lFrame.isParent}function bl(){Pt.lFrame.isParent=!1}function Eo(){return Pt.isInCheckNoChangesMode}function wc(s){Pt.isInCheckNoChangesMode=s}function _r(){const s=Pt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Bi(){return Pt.lFrame.bindingIndex}function Ui(){return Pt.lFrame.bindingIndex++}function Hi(s){const o=Pt.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,c}function Gu(s){Pt.lFrame.inI18n=s}function Sa(s,o){const c=Pt.lFrame;c.bindingIndex=c.bindingRootIndex=s,zo(o)}function zo(s){Pt.lFrame.currentDirectiveIndex=s}function Cc(){return Pt.lFrame.currentQueryIndex}function xo(s){Pt.lFrame.currentQueryIndex=s}function Cl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function qu(s,o,c){if(c&pt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||c&pt.Host||(h=Cl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const u=Pt.lFrame=Sh();return u.currentTNode=o,u.lView=s,!0}function Na(s){const o=Sh(),c=s[1];Pt.lFrame=o,o.currentTNode=c.firstChild,o.lView=s,o.tView=c,o.contextLView=s,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Sh(){const s=Pt.lFrame,o=null===s?null:s.child;return null===o?Zu(s):o}function Zu(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function zu(){const s=Pt.lFrame;return Pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Yu=zu;function Yo(){const s=zu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function zr(){return Pt.lFrame.selectedIndex}function Ma(s){Pt.lFrame.selectedIndex=s}function Qn(){const s=Pt.lFrame;return Ms(s.tView,s.selectedIndex)}function xc(s,o){for(let c=o.directiveStart,u=o.directiveEnd;c<u;c++){const p=s.data[c].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:R}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-c,_),v&&((s.contentHooks||(s.contentHooks=[])).push(c,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-c,C),T&&((s.viewHooks||(s.viewHooks=[])).push(c,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,T)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(c,R)}}function Ys(s,o,c){Nh(s,o,3,c)}function Dr(s,o,c,u){(3&s[2])===c&&Nh(s,o,c,u)}function Ra(s,o){let c=s[2];(3&c)===o&&(c&=2047,c+=1,s[2]=c)}function Nh(s,o,c,u){const p=null!=u?u:-1,_=o.length-1;let v=0;for(let C=void 0!==u?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=u&&v>=u)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(Mp(s,c,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Mp(s,o,c,u){const h=c[u]<0,p=c[u+1],v=s[h?-c[u]:c[u]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class Do{constructor(o,c,u){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function Mh(s,o,c){const u=Gn(s);let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const _=c[h++],v=c[h++],C=c[h++];u?s.setAttribute(o,v,C,_):o.setAttributeNS(_,v,C)}else{const _=p,v=c[++h];Rs(_)?u&&s.setProperty(o,_,v):u?s.setAttribute(o,_,v):o.setAttribute(_,v),h++}}return h}function kp(s){return 3===s||4===s||6===s}function Rs(s){return 64===s.charCodeAt(0)}function Xu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let c=-1;for(let u=0;u<o.length;u++){const h=o[u];"number"==typeof h?c=h:0===c||Pp(s,c,h,null,-1===c||2===c?o[++u]:null)}}return s}function Pp(s,o,c,u,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===c){if(null===u)return void(null!==h&&(s[p+1]=h));if(u===s[p+1])return void(s[p+2]=h)}p++,null!==u&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,c),null!==u&&s.splice(p++,0,u),null!==h&&s.splice(p++,0,h)}function xl(s){return-1!==s}function Pa(s){return 32767&s}function ts(s,o){let c=function(s){return s>>16}(s),u=o;for(;c>0;)u=u[15],c--;return u}let Oa=!0;function Tc(s){const o=Oa;return Oa=s,o}let Ic=0;function Ko(s,o){const c=un(s,o);if(-1!==c)return c;const u=o[1];u.firstCreatePass&&(s.injectorIndex=o.length,Dl(u.data,s),Dl(o,null),Dl(u.blueprint,null));const h=xt(s,o),p=s.injectorIndex;if(xl(h)){const _=Pa(h),v=ts(h,o),C=v[1].data;for(let T=0;T<8;T++)o[p+T]=v[_+T]|C[_+T]}return o[p+8]=h,p}function Dl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function un(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function xt(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,u=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(u=2===_?p.declTNode:1===_?h[6]:null,null===u)return-1;if(c++,h=h[15],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return-1}function Mn(s,o,c){!function(s,o,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(en)&&(u=c[en]),null==u&&(u=c[en]=Ic++);const h=255&u;o.data[s+(h>>5)]|=1<<h}(s,o,c)}function Tr(s,o,c){if(c&pt.Optional)return s;ve(o,"NodeInjector")}function Qo(s,o,c,u){if(c&pt.Optional&&void 0===u&&(u=null),0==(c&(pt.Self|pt.Host))){const h=s[9],p=ln(void 0);try{return h?h.get(o,u,c&pt.Optional):tr(o,u,c&pt.Optional)}finally{ln(p)}}return Tr(u,o,c)}function ks(s,o,c,u=pt.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(en)?s[en]:void 0;return"number"==typeof o?o>=0?255&o:Ph:o}(c);if("function"==typeof p){if(!qu(o,s,u))return u&pt.Host?Tr(h,c,u):Qo(o,c,u,h);try{const _=p(u);if(null!=_||u&pt.Optional)return _;ve(c)}finally{Yu()}}else if("number"==typeof p){let _=null,v=un(s,o),C=-1,T=u&pt.Host?o[16][6]:null;for((-1===v||u&pt.SkipSelf)&&(C=-1===v?xt(s,o):o[v+8],-1!==C&&Jo(u,!1)?(_=o[1],v=Pa(C),o=ts(C,o)):v=-1);-1!==v;){const R=o[1];if(Ac(p,v,R.data)){const j=Fp(v,o,c,_,u,T);if(j!==yr)return j}C=o[v+8],-1!==C&&Jo(u,o[1].data[v+8]===T)&&Ac(p,v,o)?(_=R,v=Pa(C),o=ts(C,o)):v=-1}}}return Qo(o,c,u,h)}const yr={};function Ph(){return new Ao(Kn(),Ze())}function Fp(s,o,c,u,h,p){const _=o[1],v=_.data[s+8],R=Io(v,_,c,null==u?dl(v)&&Oa:u!=_&&0!=(3&v.type),h&pt.Host&&p===v);return null!==R?ir(o,_,R,v):yr}function Io(s,o,c,u,h){const p=s.providerIndexes,_=o.data,v=1048575&p,C=s.directiveStart,R=p>>20,K=h?v+R:s.directiveEnd;for(let le=u?v:v+R;le<K;le++){const he=_[le];if(le<C&&c===he||le>=C&&he.type===c)return le}if(h){const le=_[C];if(le&&us(le)&&le.type===c)return C}return null}function ir(s,o,c,u){let h=s[c];const p=o.data;if(function(s){return s instanceof Do}(h)){const _=h;_.resolving&&function(s,o){throw new J("200",`Circular dependency in DI detected for ${s}`)}(q(p[c]));const v=Tc(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?ln(_.injectImpl):null;qu(s,u,pt.Default);try{h=s[c]=_.factory(void 0,p,s,u),o.firstCreatePass&&c>=u.directiveStart&&function(s,o,c){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(u){const _=gc(o);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,_),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,_)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,h),p&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,p),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,p))}(c,p[c],o)}finally{null!==C&&ln(C),Tc(v),_.resolving=!1,Yu()}}return h}function Ac(s,o,c){return!!(c[o+(s>>5)]&1<<s)}function Jo(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Ao{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,u){return ks(this._tNode,this._lView,o,u,c)}}function Fa(s){return ar(()=>{const o=s.prototype.constructor,c=o[Lt]||ed(o),u=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==u;){const p=h[Lt]||ed(h);if(p&&p!==c)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function ed(s){return V(s)?()=>{const o=ed(S(s));return o&&o()}:Zs(s)}function Sc(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const c=s.attrs;if(c){const u=c.length;let h=0;for(;h<u;){const p=c[h];if(kp(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<u&&"string"==typeof c[h];)h++;else{if(p===o)return c[h+1];h+=2}}}return null}(Kn(),s)}const fs="__parameters__";function $i(s,o,c){return ar(()=>{const u=function(s){return function(...c){if(s){const u=s(...c);for(const h in u)this[h]=u[h]}}}(o);function h(...p){if(this instanceof h)return u.apply(this,p),this;const _=new h(...p);return v.annotation=_,v;function v(C,T,R){const j=C.hasOwnProperty(fs)?C[fs]:Object.defineProperty(C,fs,{value:[]})[fs];for(;j.length<=R;)j.push(null);return(j[R]=j[R]||[]).push(_),C}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Jn{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=yt({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Oh=new Jn("AnalyzeForEntryComponents"),Js=Function;function Ci(s,o){void 0===o&&(o=s);for(let c=0;c<s.length;c++){let u=s[c];Array.isArray(u)?(o===s&&(o=s.slice(0,c)),Ci(u,o)):o!==s&&o.push(u)}return o}function Os(s,o){s.forEach(c=>Array.isArray(c)?Os(c,o):o(c))}function Fs(s,o,c){o>=s.length?s.push(c):s.splice(o,0,c)}function Ro(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ko(s,o){const c=[];for(let u=0;u<s;u++)c.push(o);return c}function Ir(s,o,c){let u=Ba(s,o);return u>=0?s[1|u]=c:(u=~u,function(s,o,c,u){let h=s.length;if(h==o)s.push(c,u);else if(1===h)s.push(u,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=c,s[o+1]=u}}(s,u,o,c)),u}function br(s,o){const c=Ba(s,o);if(c>=0)return s[1|c]}function Ba(s,o){return function(s,o,c){let u=0,h=s.length>>c;for(;h!==u;){const p=u+(h-u>>1),_=s[p<<c];if(o===_)return p<<c;_>o?h=p:u=p+1}return~(h<<c)}(s,o,1)}const pn={},Ht="__NG_DI_FLAG__",Mr="ngTempTokenPath",Il=/\n/gm,eo="__source",Ls=W({provide:String,useValue:W});let ea;function Gt(s){const o=ea;return ea=s,o}function Hp(s,o=pt.Default){if(void 0===ea)throw new Error("inject() must be called from an injection context");return null===ea?tr(s,void 0,o):ea.get(s,o&pt.Optional?null:void 0,o)}function ur(s,o=pt.Default){return(fn||Hp)(S(s),o)}function Al(s){const o=[];for(let c=0;c<s.length;c++){const u=S(s[c]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let h,p=pt.Default;for(let _=0;_<u.length;_++){const v=u[_],C=$p(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(ur(h,p))}else o.push(ur(u))}return o}function Sl(s,o){return s[Ht]=o,s.prototype[Ht]=o,s}function $p(s){return s[Ht]}function ps(s,o,c,u){const h=s[Mr];throw o[eo]&&h.unshift(o[eo]),s.message=function(s,o,c,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=L(o);if(Array.isArray(o))h=o.map(L).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];p.push(_+":"+("string"==typeof v?JSON.stringify(v):L(v)))}h=`{${p.join(", ")}}`}return`${c}${u?"("+u+")":""}[${h}]: ${s.replace(Il,"\n  ")}`}("\n"+s.message,h,c,u),s.ngTokenPath=h,s[Mr]=null,s}const Ha=Sl($i("Inject",s=>({token:s})),-1),$a=Sl($i("Optional"),8),Yr=Sl($i("SkipSelf"),4);let Oc;function na(s){var o;return(null===(o=function(){if(void 0===Oc&&(Oc=null,St.trustedTypes))try{Oc=St.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Oc}())||void 0===o?void 0:o.createHTML(s))||s}class Ml{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Nv extends Ml{getTypeName(){return"HTML"}}class Mv extends Ml{getTypeName(){return"Style"}}class Hh extends Ml{getTypeName(){return"Script"}}class Rv extends Ml{getTypeName(){return"URL"}}class kv extends Ml{getTypeName(){return"ResourceURL"}}function ra(s){return s instanceof Ml?s.changingThisBreaksApplicationSecurity:s}function Vc(s,o){const c=$h(s);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===o}function $h(s){return s instanceof Ml&&s.getTypeName()||null}function C0(s){return new Nv(s)}function qp(s){return new Mv(s)}function Zp(s){return new Hh(s)}function ia(s){return new Rv(s)}function dd(s){return new kv(s)}function jh(s){const o=new Pv(s);return function(){try{return!!(new window.DOMParser).parseFromString(na(""),"text/html")}catch(s){return!1}}()?new E0(o):o}class E0{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const c=(new window.DOMParser).parseFromString(na(o),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(o):(c.removeChild(c.firstChild),c)}catch(c){return null}}}class Pv{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const u=this.inertDocument.createElement("body");c.appendChild(u)}}getInertBodyElement(o){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=na(o),c;const u=this.inertDocument.createElement("body");return u.innerHTML=na(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(o){const c=o.attributes;for(let h=c.length-1;0<h;h--){const _=c.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let u=o.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const x0=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Gh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wa(s){return(s=String(s)).match(x0)||s.match(Gh)?s:"unsafe:"+s}function Wh(s){return(s=String(s)).split(",").map(o=>Wa(o.trim())).join(", ")}function Vs(s){const o={};for(const c of s.split(","))o[c]=!0;return o}function Rl(...s){const o={};for(const c of s)for(const u in c)c.hasOwnProperty(u)&&(o[u]=!0);return o}const Uc=Vs("area,br,col,hr,img,wbr"),T0=Vs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Hc=Vs("rp,rt"),zp=Rl(Uc,Rl(T0,Vs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rl(Hc,Vs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rl(Hc,T0)),hd=Vs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),w=Vs("srcset"),E=Rl(hd,w,Vs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),F=Vs("script,style,template");class ${constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let c=o.firstChild,u=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?u=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,u&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let h=this.checkClobberedElement(c,c.nextSibling);if(h){c=h;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(o){const c=o.nodeName.toLowerCase();if(!zp.hasOwnProperty(c))return this.sanitizedSomething=!0,!F.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const u=o.attributes;for(let h=0;h<u.length;h++){const p=u.item(h),_=p.name,v=_.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;hd[v]&&(C=Wa(C)),w[v]&&(C=Wh(C)),this.buf.push(" ",_,'="',ft(C),'"')}return this.buf.push(">"),!0}endElement(o){const c=o.nodeName.toLowerCase();zp.hasOwnProperty(c)&&!Uc.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(o){this.buf.push(ft(o))}checkClobberedElement(o,c){if(c&&(o.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return c}}const ye=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ge=/([^\#-~ |!])/g;function ft(s){return s.replace(/&/g,"&amp;").replace(ye,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ge,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let et;function Tt(s,o){let c=null;try{et=et||jh(s);let u=o?String(o):"";c=et.getInertBodyElement(u);let h=5,p=u;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,u=p,p=c.innerHTML,c=et.getInertBodyElement(u)}while(u!==p);return na((new $).sanitizeChildren(In(c)||c))}finally{if(c){const u=In(c)||c;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function In(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Cn=(()=>((Cn=Cn||{})[Cn.NONE=0]="NONE",Cn[Cn.HTML=1]="HTML",Cn[Cn.STYLE=2]="STYLE",Cn[Cn.SCRIPT=3]="SCRIPT",Cn[Cn.URL=4]="URL",Cn[Cn.RESOURCE_URL=5]="RESOURCE_URL",Cn))();function pd(s){const o=function(){const s=Ze();return s&&s[12]}();return o?o.sanitize(Cn.URL,s)||"":Vc(s,"URL")?ra(s):Wa(H(s))}const zh="__ngContext__";function Gi(s,o){s[zh]=o}function Fv(s){const o=function(s){return s[zh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function gd(s){return s.ngOriginalError}function GA(s,...o){s.error(...o)}class Qh{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o),u=this._findContext(o),h=(s=o)&&s.ngErrorLogger||GA;var s;h(this._console,"ERROR",o),c&&h(this._console,"ORIGINAL ERROR",c),u&&h(this._console,"ERROR CONTEXT",u)}_findContext(o){return o?o.ngDebugContext||this._findContext(gd(o)):null}_findOriginalError(o){let c=o&&gd(o);for(;c&&gd(c);)c=gd(c);return c||null}}const ZA=/^>|^->|<!--|-->|--!>|<!-$/g,Hv=/(<|>)/;const sE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(St))();function qa(s){return s instanceof Function?s():s}var Za=(()=>((Za=Za||{})[Za.Important=1]="Important",Za[Za.DashCase=2]="DashCase",Za))();let $v;function R0(s,o){return $v(s,o)}function ng(s){const o=s[3];return Xi(o)?o[3]:o}function k0(s){return jv(s[13])}function uE(s){return jv(s[4])}function jv(s){for(;null!==s&&!Xi(s);)s=s[4];return s}function md(s,o,c,u,h){if(null!=u){let p,_=!1;Xi(u)?p=u:jn(u)&&(_=!0,u=u[0]);const v=Fn(u);0===s&&null!==c?null==h?gE(o,c,v):jc(o,c,v,h||null,!0):1===s&&null!==c?jc(o,c,v,h||null,!0):2===s?Yv(o,v,_):3===s&&o.destroyNode(v),null!=p&&function(s,o,c,u,h){const p=c[7];p!==Fn(c)&&md(o,s,u,p,h);for(let v=10;v<c.length;v++){const C=c[v];yd(C[1],C,s,o,u,p)}}(o,s,p,c,h)}}function P0(s,o){return Gn(s)?s.createText(o):s.createTextNode(o)}function dE(s,o,c){Gn(s)?s.setValue(o,c):o.textContent=c}function eS(s,o){return s.createComment(function(s){return s.replace(ZA,o=>o.replace(Hv,"\u200b$1\u200b"))}(o))}function Gv(s,o,c){return Gn(s)?s.createElement(o,c):null===c?s.createElement(o):s.createElementNS(c,o)}function O0(s,o){const c=s[9],u=c.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,yc(h,-1)),c.splice(u,1)}function F0(s,o){if(s.length<=10)return;const c=10+o,u=s[c];if(u){const h=u[17];null!==h&&h!==s&&O0(h,u),o>0&&(s[c-1][4]=u[4]);const p=Ro(s,10+o);!function(s,o){yd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(u[1],u);const _=p[19];null!==_&&_.detachView(p[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function hE(s,o){if(!(256&o[2])){const c=o[11];Gn(c)&&c.destroyNode&&yd(s,o,c,3,null,null),function(s){let o=s[13];if(!o)return $c(s[1],s);for(;o;){let c=null;if(jn(o))c=o[13];else{const u=o[10];u&&(c=u)}if(!c){for(;o&&!o[4]&&o!==s;)jn(o)&&$c(o[1],o),o=o[3];null===o&&(o=s),jn(o)&&$c(o[1],o),c=o&&o[4]}o=c}}(o)}}function $c(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let u=0;u<c.length;u+=2){const h=o[c[u]];if(!(h instanceof Do)){const p=c[u+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const v=h[p[_]],C=p[_+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const c=s.cleanup,u=o[7];let h=-1;if(null!==c)for(let p=0;p<c.length-1;p+=2)if("string"==typeof c[p]){const _=c[p+1],v="function"==typeof _?_(o):Fn(o[_]),C=u[h=c[p+2]],T=c[p+3];"boolean"==typeof T?v.removeEventListener(c[p],C,T):T>=0?u[h=T]():u[h=-T].unsubscribe(),p+=2}else{const _=u[h=c[p+1]];c[p].call(_)}if(null!==u){for(let p=h+1;p<u.length;p++)u[p]();o[7]=null}}(s,o),1===o[1].type&&Gn(o[11])&&o[11].destroy();const c=o[17];if(null!==c&&Xi(o[3])){c!==o[3]&&O0(c,o);const u=o[19];null!==u&&u.detachView(s)}}}function fE(s,o,c){return pE(s,o.parent,c)}function pE(s,o,c){let u=o;for(;null!==u&&40&u.type;)u=(o=u).parent;if(null===u)return c[0];if(2&u.flags){const h=s.data[u.directiveStart].encapsulation;if(h===it.None||h===it.Emulated)return null}return Ln(u,c)}function jc(s,o,c,u,h){Gn(s)?s.insertBefore(o,c,u,h):o.insertBefore(c,u,h)}function gE(s,o,c){Gn(s)?s.appendChild(o,c):o.appendChild(c)}function mE(s,o,c,u,h){null!==u?jc(s,o,c,u,h):gE(s,o,c)}function L0(s,o){return Gn(s)?s.parentNode(o):o.parentNode}function B0(s,o,c){return _d(s,o,c)}function U0(s,o,c){return 40&s.type?Ln(s,c):null}let qv,_d=U0;function _E(s,o){_d=s,qv=o}function rg(s,o,c,u){const h=fE(s,u,o),p=o[11],v=B0(u.parent||o[6],u,o);if(null!=h)if(Array.isArray(c))for(let C=0;C<c.length;C++)mE(p,h,c[C],v,!1);else mE(p,h,c,v,!1);void 0!==qv&&qv(p,u,o,c,h)}function H0(s,o){if(null!==o){const c=o.type;if(3&c)return Ln(o,s);if(4&c)return zv(-1,s[o.index]);if(8&c){const u=o.child;if(null!==u)return H0(s,u);{const h=s[o.index];return Xi(h)?zv(-1,h):Fn(h)}}if(32&c)return R0(o,s)()||Fn(s[o.index]);{const u=Zv(s,o);return null!==u?Array.isArray(u)?u[0]:H0(ng(s[16]),u):H0(s,o.next)}}return null}function Zv(s,o){return null!==o?s[16][6].projection[o.projection]:null}function zv(s,o){const c=10+s+1;if(c<o.length){const u=o[c],h=u[1].firstChild;if(null!==h)return H0(u,h)}return o[7]}function Yv(s,o,c){const u=L0(s,o);u&&function(s,o,c,u){Gn(s)?s.removeChild(o,c,u):o.removeChild(c)}(s,u,o,c)}function $0(s,o,c,u,h,p,_){for(;null!=c;){const v=u[c.index],C=c.type;if(_&&0===o&&(v&&Gi(Fn(v),u),c.flags|=4),64!=(64&c.flags))if(8&C)$0(s,o,c.child,u,h,p,!1),md(o,s,h,v,p);else if(32&C){const T=R0(c,u);let R;for(;R=T();)md(o,s,h,R,p);md(o,s,h,v,p)}else 16&C?Gc(s,o,u,c,h,p):md(o,s,h,v,p);c=_?c.projectionNext:c.next}}function yd(s,o,c,u,h,p){$0(c,u,s.firstChild,o,h,p,!1)}function Gc(s,o,c,u,h,p){const _=c[16],C=_[6].projection[u.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)md(o,s,h,C[T],p);else $0(s,o,C,_[3],h,p,!0)}function vE(s,o,c){Gn(s)?s.setAttribute(o,"style",c):o.style.cssText=c}function Kv(s,o,c){Gn(s)?""===c?s.removeAttribute(o,"class"):s.setAttribute(o,"class",c):o.className=c}function Qv(s,o,c){let u=s.length;for(;;){const h=s.indexOf(o,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===u||s.charCodeAt(h+p)<=32)return h}c=h+1}}const bE="ng-template";function cS(s,o,c){let u=0;for(;u<s.length;){let h=s[u++];if(c&&"class"===h){if(h=s[u],-1!==Qv(h.toLowerCase(),o,0))return!0}else if(1===h){for(;u<s.length&&"string"==typeof(h=s[u++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Jv(s){return 4===s.type&&s.value!==bE}function uS(s,o,c){return o===(4!==s.type||c?s.value:bE)}function dS(s,o,c){let u=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(kp(s[o]))return o;return s.length}(h);let _=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!_)if(4&u){if(u=2|1&u,""!==C&&!uS(s,C,c)||""===C&&1===o.length){if(aa(u))return!1;_=!0}}else{const T=8&u?C:o[++v];if(8&u&&null!==s.attrs){if(!cS(s.attrs,T,c)){if(aa(u))return!1;_=!0}continue}const j=Xv(8&u?"class":C,h,Jv(s),c);if(-1===j){if(aa(u))return!1;_=!0;continue}if(""!==T){let K;K=j>p?"":h[j+1].toLowerCase();const le=8&u?K:null;if(le&&-1!==Qv(le,T,0)||2&u&&T!==K){if(aa(u))return!1;_=!0}}}}else{if(!_&&!aa(u)&&!aa(C))return!1;if(_&&aa(C))continue;_=!1,u=C|1&u}}return aa(u)||_}function aa(s){return 0==(1&s)}function Xv(s,o,c,u){if(null===o)return-1;let h=0;if(u||!c){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const u=s[c];if("number"==typeof u)return-1;if(u===o)return c;c++}return-1}(o,s)}function wE(s,o,c=!1){for(let u=0;u<o.length;u++)if(dS(s,o[u],c))return!0;return!1}function ZO(s,o){e:for(let c=0;c<o.length;c++){const u=o[c];if(s.length===u.length){for(let h=0;h<s.length;h++)if(s[h]!==u[h])continue e;return!0}}return!1}function EE(s,o){return s?":not("+o.trim()+")":o}function pS(s){let o=s[0],c=1,u=2,h="",p=!1;for(;c<s.length;){let _=s[c];if("string"==typeof _)if(2&u){const v=s[++c];h+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?h+="."+_:4&u&&(h+=" "+_);else""!==h&&!aa(_)&&(o+=EE(p,h),h=""),u=_,p=p||!aa(u);c++}return""!==h&&(o+=EE(p,h)),o}const Qt={};function qc(s){j0(rn(),Ze(),zr()+s,Eo())}function j0(s,o,c,u){if(!u)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Ys(o,p,c)}else{const p=s.preOrderHooks;null!==p&&Dr(o,p,0,c)}Ma(c)}function G0(s,o){return s<<17|o<<2}function la(s){return s>>17&32767}function W0(s){return 2|s}function Ol(s){return(131068&s)>>2}function vd(s,o){return-131069&s|o<<2}function bd(s){return 1|s}function Zc(s,o){const c=s.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const h=c[u],p=c[u+1];if(-1!==p){const _=s.data[p];xo(h),_.contentQueries(2,o[p],p)}}}function wd(s,o,c,u,h,p,_,v,C,T){const R=o.blueprint.slice();return R[0]=h,R[2]=140|u,_l(R),R[3]=R[15]=s,R[8]=c,R[10]=_||s&&s[10],R[11]=v||s&&s[11],R[12]=C||s&&s[12]||null,R[9]=T||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function Cd(s,o,c,u,h){let p=s.data[o];if(null===p)p=ni(s,o,c,u,h),Pt.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=c,p.value=u,p.attrs=h;const _=zs();p.injectorIndex=null===_?-1:_.injectorIndex}return pi(p,!0),p}function ni(s,o,c,u,h){const p=vl(),_=Aa(),C=s.data[o]=function(s,o,c,u,h,p){return{type:c,index:u,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,c,o,u,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function Ed(s,o,c,u){if(0===c)return-1;const h=o.length;for(let p=0;p<c;p++)o.push(u),s.blueprint.push(u),s.data.push(null);return h}function ag(s,o,c){Na(o);try{const u=s.viewQuery;null!==u&&mb(1,u,c);const h=s.template;null!==h&&NE(s,o,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Zc(s,o),s.staticViewQueries&&mb(2,s.viewQuery,c);const p=s.components;null!==p&&function(s,o){for(let c=0;c<o.length;c++)RS(s,o[c])}(o,p)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{o[2]&=-5,Yo()}}function tf(s,o,c,u){const h=o[2];if(256==(256&h))return;Na(o);const p=Eo();try{_l(o),function(s){Pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&NE(s,o,c,2,u);const _=3==(3&h);if(!p)if(_){const T=s.preOrderCheckHooks;null!==T&&Ys(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Dr(o,T,0,null),Ra(o,0)}if(function(s){for(let o=k0(s);null!==o;o=uE(o)){if(!o[2])continue;const c=o[9];for(let u=0;u<c.length;u++){const h=c[u],p=h[3];0==(1024&h[2])&&yc(p,1),h[2]|=1024}}}(o),function(s){for(let o=k0(s);null!==o;o=uE(o))for(let c=10;c<o.length;c++){const u=o[c],h=u[1];ml(u)&&tf(h,u,h.template,u[8])}}(o),null!==s.contentQueries&&Zc(s,o),!p)if(_){const T=s.contentCheckHooks;null!==T&&Ys(o,T)}else{const T=s.contentHooks;null!==T&&Dr(o,T,1),Ra(o,1)}!function(s,o){const c=s.hostBindingOpCodes;if(null!==c)try{for(let u=0;u<c.length;u++){const h=c[u];if(h<0)Ma(~h);else{const p=h,_=c[++u],v=c[++u];Sa(_,p),v(2,o[p])}}}finally{Ma(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let c=0;c<o.length;c++)MS(s,o[c])}(o,v);const C=s.viewQuery;if(null!==C&&mb(2,C,u),!p)if(_){const T=s.viewCheckHooks;null!==T&&Ys(o,T)}else{const T=s.viewHooks;null!==T&&Dr(o,T,2),Ra(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,yc(o[3],-1))}finally{Yo()}}function CS(s,o,c,u){const h=o[10],p=!Eo(),_=Ih(o);try{p&&!_&&h.begin&&h.begin(),_&&ag(s,o,u),tf(s,o,c,u)}finally{p&&!_&&h.end&&h.end()}}function NE(s,o,c,u,h){const p=zr(),_=2&u;try{Ma(-1),_&&o.length>20&&j0(s,o,20,Eo()),c(u,h)}finally{Ma(p)}}function sb(s,o,c){if(Nu(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,c[p],p)}}}function lg(s,o,c){!Hu()||(function(s,o,c,u){const h=c.directiveStart,p=c.directiveEnd;s.firstCreatePass||Ko(c,o),Gi(u,o);const _=c.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],T=us(C);T&&HE(o,c,C);const R=ir(o,s,v,c);Gi(R,o),null!==_&&SS(0,v-h,R,C,0,_),T&&(Lr(c.index,o)[8]=R)}}(s,o,c,Ln(c,o)),128==(128&c.flags)&&function(s,o,c){const u=c.directiveStart,h=c.directiveEnd,_=c.index,v=Pt.lFrame.currentDirectiveIndex;try{Ma(_);for(let C=u;C<h;C++){const T=s.data[C],R=o[C];zo(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&BE(T,R)}}finally{Ma(-1),zo(v)}}(s,o,c))}function nf(s,o,c=Ln){const u=o.localNames;if(null!==u){let h=o.index+1;for(let p=0;p<u.length;p+=2){const _=u[p+1],v=-1===_?c(o,s):s[_];s[h++]=v}}}function xd(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=K0(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function K0(s,o,c,u,h,p,_,v,C,T){const R=20+u,j=R+h,K=function(s,o){const c=[];for(let u=0;u<o;u++)c.push(u<s?null:Qt);return c}(R,j),le="function"==typeof T?T():T;return K[1]={type:s,blueprint:K,template:c,queries:null,viewQuery:v,declTNode:o,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:le,incompleteFirstPass:!1}}function ug(s,o,c,u){const h=yb(o);null===c?h.push(u):(h.push(c),s.firstCreatePass&&WE(s).push(u,h.length-1))}function ob(s,o,c){for(let u in s)if(s.hasOwnProperty(u)){const h=s[u];(c=null===c?{}:c).hasOwnProperty(u)?c[u].push(o,h):c[u]=[o,h]}return c}function Bs(s,o,c,u,h,p,_,v){const C=Ln(o,c);let R,T=o.inputs;!v&&null!=T&&(R=T[u])?(bb(s,c,R,u,h),dl(o)&&function(s,o){const c=Lr(o,s);16&c[2]||(c[2]|=64)}(c,o.index)):3&o.type&&(u=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),h=null!=_?_(h,o.value||"",u):h,Gn(p)?p.setProperty(C,u,h):Rs(u)||(C.setProperty?C.setProperty(u,h):C[u]=h))}function Q0(s,o,c,u){let h=!1;if(Hu()){const p=function(s,o,c){const u=s.directiveRegistry;let h=null;if(u)for(let p=0;p<u.length;p++){const _=u[p];wE(c,_.selectors,!1)&&(h||(h=[]),Mn(Ko(c,o),s,_.type),us(_)?(db(s,c),h.unshift(_)):h.push(_))}return h}(s,o,c),_=null===u?null:{"":-1};if(null!==p){h=!0,UE(c,s.data.length,p.length);for(let R=0;R<p.length;R++){const j=p[R];j.providersResolver&&j.providersResolver(j)}let v=!1,C=!1,T=Ed(s,o,p.length,null);for(let R=0;R<p.length;R++){const j=p[R];c.mergedAttrs=Xu(c.mergedAttrs,j.hostAttrs),hb(s,c,o,T,j),AS(T,j,_),null!==j.contentQueries&&(c.flags|=8),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(c.flags|=128);const K=j.type.prototype;!v&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),v=!0),!C&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),C=!0),T++}!function(s,o){const u=o.directiveEnd,h=s.data,p=o.attrs,_=[];let v=null,C=null;for(let T=o.directiveStart;T<u;T++){const R=h[T],j=R.inputs,K=null===p||Jv(o)?null:NS(j,p);_.push(K),v=ob(j,T,v),C=ob(R.outputs,T,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=C}(s,c)}_&&function(s,o,c){if(o){const u=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=c[o[h+1]];if(null==p)throw new J("301",`Export of name '${o[h+1]}' not found!`);u.push(o[h],p)}}}(c,u,_)}return c.mergedAttrs=Xu(c.mergedAttrs,c.attrs),h}function VE(s,o,c,u,h,p){const _=p.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const c=s[--o];if("number"==typeof c&&c<0)return c}return 0})(v)!=C&&v.push(C),v.push(u,h,_)}}function BE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function db(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function AS(s,o,c){if(c){if(o.exportAs)for(let u=0;u<o.exportAs.length;u++)c[o.exportAs[u]]=s;us(o)&&(c[""]=s)}}function UE(s,o,c){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+c,s.providerIndexes=o}function hb(s,o,c,u,h){s.data[u]=h;const p=h.factory||(h.factory=Zs(h.type)),_=new Do(p,us(h),null);s.blueprint[u]=_,c[u]=_,VE(s,o,0,u,Ed(s,c,h.hostVars,Qt),h)}function HE(s,o,c){const u=Ln(o,s),h=xd(c),p=s[10],_=af(s,wd(s,h,null,c.onPush?64:16,u,o,p,p.createRenderer(u,c),null,null));s[o.index]=_}function fb(s,o,c,u,h,p,_){if(null==p)Gn(s)?s.removeAttribute(o,h,c):o.removeAttribute(h);else{const v=null==_?H(p):_(p,u||"",h);Gn(s)?s.setAttribute(o,h,v,c):c?o.setAttributeNS(c,h,v):o.setAttribute(h,v)}}function SS(s,o,c,u,h,p){const _=p[o];if(null!==_){const v=u.setInput;for(let C=0;C<_.length;){const T=_[C++],R=_[C++],j=_[C++];null!==v?u.setInput(c,j,T,R):c[R]=j}}}function NS(s,o){let c=null,u=0;for(;u<o.length;){const h=o[u];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,s[h],o[u+1])),u+=2}else u+=2;else u+=4}return c}function $E(s,o,c,u){return new Array(s,!0,!1,o,null,0,u,c,null,null)}function MS(s,o){const c=Lr(o,s);if(ml(c)){const u=c[1];80&c[2]?tf(u,c,u.template,c[8]):c[5]>0&&pb(c)}}function pb(s){for(let u=k0(s);null!==u;u=uE(u))for(let h=10;h<u.length;h++){const p=u[h];if(1024&p[2]){const _=p[1];tf(_,p,_.template,p[8])}else p[5]>0&&pb(p)}const c=s[1].components;if(null!==c)for(let u=0;u<c.length;u++){const h=Lr(c[u],s);ml(h)&&h[5]>0&&pb(h)}}function RS(s,o){const c=Lr(o,s),u=c[1];(function(s,o){for(let c=o.length;c<s.blueprint.length;c++)o.push(s.blueprint[c])})(u,c),ag(u,c,c[8])}function af(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function gb(s){for(;s;){s[2]|=64;const o=ng(s);if(ds(s)&&!o)return s;s=o}return null}function Td(s,o,c){const u=o[10];u.begin&&u.begin();try{tf(s,o,s.template,c)}catch(h){throw qE(o,h),h}finally{u.end&&u.end()}}function J0(s){!function(s){for(let o=0;o<s.components.length;o++){const c=s.components[o],u=Fv(c),h=u[1];CS(h,u,h.template,c)}}(s[8])}function mb(s,o,c){xo(0),o(s,c)}const _b=(()=>Promise.resolve(null))();function yb(s){return s[7]||(s[7]=[])}function WE(s){return s.cleanup||(s.cleanup=[])}function qE(s,o){const c=s[9],u=c?c.get(Qh,null):null;u&&u.handleError(o)}function bb(s,o,c,u,h){for(let p=0;p<c.length;){const _=c[p++],v=c[p++],C=o[_],T=s.data[_];null!==T.setInput?T.setInput(C,h,u,v):C[v]=h}}function Qa(s,o,c){const u=_c(o,s);dE(s[11],u,c)}function dg(s,o,c){let u=c?s.styles:null,h=c?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?p=v:1==p?h=U(h,v):2==p&&(u=U(u,v+": "+o[++_]+";"))}c?s.styles=u:s.stylesWithoutHost=u,c?s.classes=h:s.classesWithoutHost=h}const Id=new Jn("INJECTOR",-1);class wb{get(o,c=pn){if(c===pn){const u=new Error(`NullInjectorError: No provider for ${L(o)}!`);throw u.name="NullInjectorError",u}return c}}const zc=new Jn("Set Injector scope."),lf={},zE={};let Vn;function Rn(){return void 0===Vn&&(Vn=new wb),Vn}function Vl(s,o=null,c=null,u){return new dr(s,c,o||Rn(),u)}class dr{constructor(o,c,u,h=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];c&&Os(c,v=>this.processProvider(v,o,c)),Os([o],v=>this.processInjectorType(v,[],p)),this.records.set(Id,Xn(void 0,this));const _=this.records.get(zc);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:L(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,c=pn,u=pt.Default){this.assertNotDestroyed();const h=Gt(this),p=ln(void 0);try{if(!(u&pt.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof Jn)&&qt(o);v=C&&this.injectableDefInScope(C)?Xn(hg(o),lf):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(u&pt.Self?Rn():this.parent).get(o,c=u&pt.Optional&&c===pn?null:c)}catch(_){if("NullInjectorError"===_.name){if((_[Mr]=_[Mr]||[]).unshift(L(o)),h)throw _;return ps(_,o,"R3InjectorError",this.source)}throw _}finally{ln(p),Gt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((u,h)=>o.push(L(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,c,u){if(!(o=S(o)))return!1;let h=Nn(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,v=-1!==u.indexOf(_);if(void 0!==p&&(h=Nn(p)),null==h)return!1;if(null!=h.imports&&!v){let R;u.push(_);try{Os(h.imports,j=>{this.processInjectorType(j,c,u)&&(void 0===R&&(R=[]),R.push(j))})}finally{}if(void 0!==R)for(let j=0;j<R.length;j++){const{ngModule:K,providers:le}=R[j];Os(le,he=>this.processProvider(he,K,le||At))}}this.injectorDefTypes.add(_);const C=Zs(_)||(()=>new _);this.records.set(_,Xn(C,lf));const T=h.providers;if(null!=T&&!v){const R=o;Os(T,j=>this.processProvider(j,R,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,c,u){let h=Yc(o=S(o))?o:S(o&&o.provide);const p=gn(s=o)?Xn(void 0,s.useValue):Xn(Cb(s),lf);var s;if(Yc(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=Xn(void 0,lf,!0),_.factory=()=>Al(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,c){return c.value===lf&&(c.value=zE,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(s=c.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const c=S(o.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function hg(s){const o=qt(s),c=null!==o?o.factory:Zs(s);if(null!==c)return c;if(s instanceof Jn)throw new Error(`Token ${L(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const u=ko(o,"?");throw new Error(`Can't resolve all parameters for ${L(s)}: (${u.join(", ")}).`)}const c=function(s){const o=s&&(s[Zn]||s[zn]);if(o){const c=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),o}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new Error("unreachable")}function Cb(s,o,c){let u;if(Yc(s)){const h=S(s);return Zs(h)||hg(h)}if(gn(s))u=()=>S(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(...Al(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))u=()=>ur(S(s.useExisting));else{const h=S(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return Zs(h)||hg(h);u=()=>new h(...Al(s.deps))}return u}function Xn(s,o,c=!1){return{factory:s,value:o,multi:c?[]:void 0}}function gn(s){return null!==s&&"object"==typeof s&&Ls in s}function Yc(s){return"function"==typeof s}const X0=function(s,o,c){return function(s,o=null,c=null,u){const h=Vl(s,o,c,u);return h._resolveInjectorDefTypes(),h}({name:c},o,s,c)};let or=(()=>{class s{static create(c,u){return Array.isArray(c)?X0(c,u,""):X0(c.providers,c.parent,c.name||"")}}return s.THROW_IF_NOT_FOUND=pn,s.NULL=new wb,s.\u0275prov=yt({token:s,providedIn:"any",factory:()=>ur(Id)}),s.__NG_ELEMENT_ID__=-1,s})();function Nb(s,o){xc(Fv(s)[1],Kn())}function Kc(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const u=[s];for(;o;){let h;if(us(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(c){u.push(h);const _=s;_.inputs=o_(s.inputs),_.declaredInputs=o_(s.declaredInputs),_.outputs=o_(s.outputs);const v=h.hostBindings;v&&nx(s,v);const C=h.viewQuery,T=h.contentQueries;if(C&&tx(s,C),T&&YS(s,T),ee(s.inputs,h.inputs),ee(s.declaredInputs,h.declaredInputs),ee(s.outputs,h.outputs),us(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const v=p[_];v&&v.ngInherit&&v(s),v===Kc&&(c=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,c=null;for(let u=s.length-1;u>=0;u--){const h=s[u];h.hostVars=o+=h.hostVars,h.hostAttrs=Xu(h.hostAttrs,c=Xu(c,h.hostAttrs))}}(u)}function o_(s){return s===cn?{}:s===At?[]:s}function tx(s,o){const c=s.viewQuery;s.viewQuery=c?(u,h)=>{o(u,h),c(u,h)}:o}function YS(s,o){const c=s.contentQueries;s.contentQueries=c?(u,h,p)=>{o(u,h,p),c(u,h,p)}:o}function nx(s,o){const c=s.hostBindings;s.hostBindings=c?(u,h)=>{o(u,h),c(u,h)}:o}let Qc=null;function el(){if(!Qc){const s=St.Symbol;if(s&&s.iterator)Qc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<o.length;++c){const u=o[c];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Qc=u)}}}return Qc}class no{constructor(o){this.wrapped=o}static wrap(o){return new no(o)}static unwrap(o){return no.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof no}}function Bl(s){return!!Rb(s)&&(Array.isArray(s)||!(s instanceof Map)&&el()in s)}function Rb(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function tl(s,o,c){return s[o]=c}function Ei(s,o,c){return!Object.is(s[o],c)&&(s[o]=c,!0)}function Md(s,o,c,u){const h=Ei(s,o,c);return Ei(s,o+1,u)||h}function hf(s,o,c,u){const h=Ze();return Ei(h,Ui(),o)&&(rn(),function(s,o,c,u,h,p){const _=Ln(s,o);fb(o[11],_,p,s.value,c,u,h)}(Qn(),h,s,o,c,u)),hf}function kd(s,o,c,u){return Ei(s,Ui(),c)?o+H(c)+u:Qt}function Hl(s,o,c,u,h,p,_,v,C,T){const j=function(s,o,c,u,h,p){const _=Md(s,o,c,u);return Md(s,o+2,h,p)||_}(s,Bi(),c,h,_,C);return Hi(4),j?o+H(c)+u+H(h)+p+H(_)+v+H(C)+T:Qt}function gf(s,o,c,u,h,p,_,v){const C=Ze(),T=rn(),R=s+20,j=T.firstCreatePass?function(s,o,c,u,h,p,_,v,C){const T=o.consts,R=Cd(o,s,4,_||null,xr(T,v));Q0(o,c,R,xr(T,C)),xc(o,R);const j=R.tViews=K0(2,R,u,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,R),j.queries=o.queries.embeddedTView(R)),R}(R,T,C,o,c,u,h,p,_):T.data[R];pi(j,!1);const K=C[11].createComment("");rg(T,C,K,j),Gi(K,C),af(C,C[R]=$E(K,C,K,j)),bi(j)&&lg(T,C,j),null!=_&&nf(C,j,v)}function Od(s){return Ta(Pt.lFrame.contextLView,20+s)}function _f(s,o=pt.Default){const c=Ze();return null===c?ur(s,o):ks(Kn(),c,S(s),o)}function Vb(s,o,c){const u=Ze();return Ei(u,Ui(),o)&&Bs(rn(),Qn(),u,s,o,u[11],c,!1),Vb}function Bb(s,o,c,u,h){const _=h?"class":"style";bb(s,c,o.inputs[_],_,u)}function Ub(s,o,c,u){const h=Ze(),p=rn(),_=20+s,v=h[11],C=h[_]=Gv(v,o,Pt.lFrame.currentNamespace),T=p.firstCreatePass?function(s,o,c,u,h,p,_){const v=o.consts,T=Cd(o,s,2,h,xr(v,p));return Q0(o,c,T,xr(v,_)),null!==T.attrs&&dg(T,T.attrs,!1),null!==T.mergedAttrs&&dg(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,h,0,o,c,u):p.data[_];pi(T,!0);const R=T.mergedAttrs;null!==R&&Mh(v,C,R);const j=T.classes;null!==j&&Kv(v,C,j);const K=T.styles;null!==K&&vE(v,C,K),64!=(64&T.flags)&&rg(p,h,C,T),0===Pt.lFrame.elementDepthCount&&Gi(C,h),Pt.lFrame.elementDepthCount++,bi(T)&&(lg(p,h,T),sb(p,T,h)),null!==u&&nf(h,T)}function y_(){let s=Kn();Aa()?bl():(s=s.parent,pi(s,!1));const o=s;Pt.lFrame.elementDepthCount--;const c=rn();c.firstCreatePass&&(xc(c,s),Nu(s)&&c.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Bb(c,o,Ze(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Bb(c,o,Ze(),o.stylesWithoutHost,!1)}function Ig(s,o,c,u){Ub(s,o,c,u),y_()}function Hb(s,o,c){const u=Ze(),h=rn(),p=s+20,_=h.firstCreatePass?function(s,o,c,u,h){const p=o.consts,_=xr(p,u),v=Cd(o,s,8,"ng-container",_);return null!==_&&dg(v,_,!0),Q0(o,c,v,xr(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,u,o,c):h.data[p];pi(_,!0);const v=u[p]=u[11].createComment("");rg(h,u,v,_),Gi(v,u),bi(_)&&(lg(h,u,_),sb(h,_,u)),null!=c&&nf(u,_)}function v_(){let s=Kn();const o=rn();Aa()?bl():(s=s.parent,pi(s,!1)),o.firstCreatePass&&(xc(o,s),Nu(s)&&o.queries.elementEnd(s))}function Cx(){return Ze()}function jb(s){return!!s&&"function"==typeof s.then}function Ex(s){return!!s&&"function"==typeof s.subscribe}const Gb=Ex;function Wb(s,o,c,u){const h=Ze(),p=rn(),_=Kn();return function(s,o,c,u,h,p,_,v){const C=bi(u),R=s.firstCreatePass&&WE(s),j=o[8],K=yb(o);let le=!0;if(3&u.type||v){const Te=Ln(u,o),Je=v?v(Te):Te,He=K.length,It=v?Ft=>v(Fn(Ft[u.index])):u.index;if(Gn(c)){let Ft=null;if(!v&&C&&(Ft=function(s,o,c,u){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===c&&h[p+1]===u){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,u.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=p,Ft.__ngLastListenerFn__=p,le=!1;else{p=b_(u,o,j,p,!1);const hn=c.listen(Je,h,p);K.push(p,hn),R&&R.push(h,It,He,He+1)}}else p=b_(u,o,j,p,!0),Je.addEventListener(h,p,_),K.push(p),R&&R.push(h,It,He,_)}else p=b_(u,o,j,p,!1);const he=u.outputs;let ke;if(le&&null!==he&&(ke=he[h])){const Te=ke.length;if(Te)for(let Je=0;Je<Te;Je+=2){const vi=o[ke[Je]][ke[Je+1]].subscribe(p),$o=K.length;K.push(p,vi),R&&R.push(h,u.index,$o,-($o+1))}}}(p,h,h[11],_,s,o,!!c,u),Wb}function Dx(s,o,c,u){try{return!1!==c(u)}catch(h){return qE(s,h),!1}}function b_(s,o,c,u,h){return function p(_){if(_===Function)return u;const v=2&s.flags?Lr(s.index,o):o;0==(32&o[2])&&gb(v);let C=Dx(o,0,u,_),T=p.__ngNextListenerFn__;for(;T;)C=Dx(o,0,T,_)&&C,T=T.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Zb(s=1){return function(s){return(Pt.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,Pt.lFrame.contextLView))[8]}(s)}function hN(s,o){let c=null;const u=function(s){const o=s.attrs;if(null!=o){const c=o.indexOf(5);if(0==(1&c))return o[c+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===u?wE(s,p,!0):ZO(u,p))return h}else c=h}return c}function zb(s){const o=Ze()[16][6];if(!o.projection){const u=o.projection=ko(s?s.length:1,null),h=u.slice();let p=o.child;for(;null!==p;){const _=s?hN(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:u[_]=p,h[_]=p),p=p.next}}}function Ag(s,o=0,c){const u=Ze(),h=rn(),p=Cd(h,20+s,16,null,c||null);null===p.projection&&(p.projection=o),bl(),64!=(64&p.flags)&&function(s,o,c){Gc(o[11],0,o,c,fE(s,c,o),B0(c.parent||o[6],c,o))}(h,u,p)}function w_(s,o,c){return C_(s,"",o,"",c),w_}function C_(s,o,c,u,h){const p=Ze(),_=kd(p,o,c,u);return _!==Qt&&Bs(rn(),Qn(),p,s,_,p[11],h,!1),C_}function Sg(s,o,c,u,h){const p=s[c+1],_=null===o;let v=u?la(p):Ol(p),C=!1;for(;0!==v&&(!1===C||_);){const R=s[v+1];x_(s[v],o)&&(C=!0,s[v+1]=u?bd(R):W0(R)),v=u?la(R):Ol(R)}C&&(s[c+1]=u?W0(p):bd(p))}function x_(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ba(s,o)>=0}const _i={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Mx(s){return s.substring(_i.key,_i.keyEnd)}function D_(s,o){const c=_i.textEnd;return c===o?-1:(o=_i.keyEnd=function(s,o,c){for(;o<c&&s.charCodeAt(o)>32;)o++;return o}(s,_i.key=o,c),vf(s,o,c))}function vf(s,o,c){for(;o<c&&s.charCodeAt(o)<=32;)o++;return o}function bf(s,o,c){return Us(s,o,c,!1),bf}function Qb(s,o){return Us(s,o,null,!0),Qb}function Jb(s){Hs(Ir,fa,s,!0)}function fa(s,o){for(let c=function(s){return function(s){_i.key=0,_i.keyEnd=0,_i.value=0,_i.valueEnd=0,_i.textEnd=s.length}(s),D_(s,vf(s,0,_i.textEnd))}(o);c>=0;c=D_(o,c))Ir(s,Mx(o),!0)}function Us(s,o,c,u){const h=Ze(),p=rn(),_=Hi(2);p.firstUpdatePass&&A_(p,s,_,u),o!==Qt&&Ei(h,_,o)&&n1(p,p.data[zr()],h,h[11],s,h[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=L(ra(s)))),s}(o,c),u,_)}function Hs(s,o,c,u){const h=rn(),p=Hi(2);h.firstUpdatePass&&A_(h,null,p,u);const _=Ze();if(c!==Qt&&Ei(_,p,c)){const v=h.data[zr()];if(M_(v,u)&&!I_(h,p)){let C=u?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(c=U(C,c||"")),Bb(h,v,_,c,u)}else!function(s,o,c,u,h,p,_,v){h===Qt&&(h=At);let C=0,T=0,R=0<h.length?h[0]:null,j=0<p.length?p[0]:null;for(;null!==R||null!==j;){const K=C<h.length?h[C+1]:void 0,le=T<p.length?p[T+1]:void 0;let ke,he=null;R===j?(C+=2,T+=2,K!==le&&(he=j,ke=le)):null===j||null!==R&&R<j?(C+=2,he=R):(T+=2,he=j,ke=le),null!==he&&n1(s,o,c,u,he,ke,_,v),R=C<h.length?h[C]:null,j=T<p.length?p[T]:null}}(h,v,_,_[11],_[p+1],_[p+1]=function(s,o,c){if(null==c||""===c)return At;const u=[],h=ra(c);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(u,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(u,p,h[p]);else"string"==typeof h&&o(u,h);return u}(s,o,c),u,p)}}function I_(s,o){return o>=s.expandoStartIndex}function A_(s,o,c,u){const h=s.data;if(null===h[c+1]){const p=h[zr()],_=I_(s,c);M_(p,u)&&null===o&&!_&&(o=!1),o=function(s,o,c,u){const h=function(s){const o=Pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=u?o.residualClasses:o.residualStyles;if(null===h)0===(u?o.classBindings:o.styleBindings)&&(c=Mg(c=e1(null,s,o,c,u),o.attrs,u),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(c=e1(h,s,o,c,u),null===p){let C=function(s,o,c){const u=c?o.classBindings:o.styleBindings;if(0!==Ol(u))return s[la(u)]}(s,o,u);void 0!==C&&Array.isArray(C)&&(C=e1(null,s,o,C[1],u),C=Mg(C,o.attrs,u),function(s,o,c,u){s[la(c?o.classBindings:o.styleBindings)]=u}(s,o,u,C))}else p=function(s,o,c){let u;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)u=Mg(u,s[p].hostAttrs,c);return Mg(u,o.attrs,c)}(s,o,u)}return void 0!==p&&(u?o.residualClasses=p:o.residualStyles=p),c}(h,p,o,u),function(s,o,c,u,h,p){let _=p?o.classBindings:o.styleBindings,v=la(_),C=Ol(_);s[u]=c;let R,T=!1;if(Array.isArray(c)){const j=c;R=j[1],(null===R||Ba(j,R)>0)&&(T=!0)}else R=c;if(h)if(0!==C){const K=la(s[v+1]);s[u+1]=G0(K,v),0!==K&&(s[K+1]=vd(s[K+1],u)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],u)}else s[u+1]=G0(v,0),0!==v&&(s[v+1]=vd(s[v+1],u)),v=u;else s[u+1]=G0(C,0),0===v?v=u:s[C+1]=vd(s[C+1],u),C=u;T&&(s[u+1]=W0(s[u+1])),Sg(s,R,u,!0),Sg(s,R,u,!1),function(s,o,c,u,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ba(p,o)>=0&&(c[u+1]=bd(c[u+1]))}(o,R,s,u,p),_=G0(v,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,c,_,u)}}function e1(s,o,c,u,h){let p=null;const _=c.directiveEnd;let v=c.directiveStylingLast;for(-1===v?v=c.directiveStart:v++;v<_&&(p=o[v],u=Mg(u,p.hostAttrs,h),p!==s);)v++;return null!==s&&(c.directiveStylingLast=v),u}function Mg(s,o,c){const u=c?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ir(s,_,!!c||o[++p]))}return void 0===s?null:s}function n1(s,o,c,u,h,p,_,v){if(!(3&o.type))return;const C=s.data,T=C[v+1];N_(function(s){return 1==(1&s)}(T)?Ox(C,o,c,h,Ol(T),_):void 0)||(N_(p)||function(s){return 2==(2&s)}(T)&&(p=Ox(C,null,c,h,v,_)),function(s,o,c,u,h){const p=Gn(s);if(o)h?p?s.addClass(c,u):c.classList.add(u):p?s.removeClass(c,u):c.classList.remove(u);else{let _=-1===u.indexOf("-")?void 0:Za.DashCase;if(null==h)p?s.removeStyle(c,u,_):c.style.removeProperty(u);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),_|=Za.Important),p?s.setStyle(c,u,h,_):c.style.setProperty(u,h,v?"important":"")}}}(u,_,_c(zr(),c),h,p))}function Ox(s,o,c,u,h,p){const _=null===o;let v;for(;h>0;){const C=s[h],T=Array.isArray(C),R=T?C[1]:C,j=null===R;let K=c[h+1];K===Qt&&(K=j?At:void 0);let le=j?br(K,u):R===u?K:void 0;if(T&&!N_(le)&&(le=br(C,u)),N_(le)&&(v=le,_))return v;const he=s[h+1];h=_?la(he):Ol(he)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=br(C,u))}return v}function N_(s){return void 0!==s}function M_(s,o){return 0!=(s.flags&(o?16:32))}function R_(s,o=""){const c=Ze(),u=rn(),h=s+20,p=u.firstCreatePass?Cd(u,h,1,o,null):u.data[h],_=c[h]=P0(c[11],o);rg(u,c,_,p),pi(p,!1)}function Rg(s){return Ld("",s,""),Rg}function Ld(s,o,c){const u=Ze(),h=kd(u,s,o,c);return h!==Qt&&Qa(u,zr(),h),Ld}function ql(s,o,c,u,h){const p=Ze(),_=function(s,o,c,u,h,p){const v=Md(s,Bi(),c,h);return Hi(2),v?o+H(c)+u+H(h)+p:Qt}(p,s,o,c,u,h);return _!==Qt&&Qa(p,zr(),_),ql}function Bx(s,o,c,u,h,p,_,v,C){Hs(Ir,fa,Hl(Ze(),s,o,c,u,h,p,_,v,C),!0)}function d1(s,o,c){const u=Ze();return Ei(u,Ui(),o)&&Bs(rn(),Qn(),u,s,o,u[11],c,!0),d1}const nu=void 0;var qx=["en",[["a","p"],["AM","PM"],nu],[["AM","PM"],nu,nu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nu,"{1} 'at' {0}",nu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let Vd={};function Ug(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=F_(o);if(c)return c;const u=o.split("-")[0];if(c=F_(u),c)return c;if("en"===u)return qx;throw new Error(`Missing locale data for the locale "${s}".`)}function Zx(s){return Ug(s)[Ot.PluralCase]}function F_(s){return s in Vd||(Vd[s]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[s]),Vd[s]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const zx=["zero","one","two","few","many"],L_="en-US",Cf={marker:"element"},Hg={marker:"ICU"};var Hr=(()=>((Hr=Hr||{})[Hr.SHIFT=2]="SHIFT",Hr[Hr.APPEND_EAGERLY=1]="APPEND_EAGERLY",Hr[Hr.COMMENT=2]="COMMENT",Hr))();let Zl=L_;function f1(s){(function(s,o){null==s&&Re(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(Zl=s.toLowerCase().replace(/_/g,"-"))}function jg(s,o,c){const u=o.insertBeforeIndex,h=Array.isArray(u)?u[0]:u;return null===h?U0(s,0,c):Fn(c[h])}function Yx(s,o,c,u,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let _=u,v=null;if(3&o.type||(v=_,_=h),null!==_&&0==(2&o.flags))for(let C=1;C<p.length;C++)jc(s,_,c[p[C]],v,!1)}}function Bd(s,o){if(s.push(o),s.length>1)for(let c=s.length-2;c>=0;c--){const u=s[c];Kx(u)||Qx(u,o)&&null===Jx(u)&&Xx(u,o.index)}}function Kx(s){return!(64&s.type)}function Qx(s,o){return Kx(o)||s.index>o.index}function Jx(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function Xx(s,o){const c=s.insertBeforeIndex;Array.isArray(c)?c[0]=o:(_E(jg,Yx),s.insertBeforeIndex=o)}function ru(s,o){const c=s.data[o];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function MN(s,o,c){const u=ni(s,c,64,null,null);return Bd(o,u),u}function V_(s,o){const c=o[s.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function B_(s){return s>>>17}function eD(s){return(131070&s)>>>1}let Ef=0,xf=0;function Gg(s,o,c,u){const h=c[11];let _,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const T=o[++v];null===c[T]&&(c[T]=P0(h,C))}else if("number"==typeof C)switch(1&C){case 0:const T=B_(C);let R,j;if(null===p&&(p=T,_=L0(h,u)),T===p?(R=u,j=_):(R=null,j=Fn(c[T])),null!==j){const ke=eD(C);jc(h,j,c[ke],R,!1);const Je=ru(s,ke);if(null!==Je&&"object"==typeof Je){const He=V_(Je,c);null!==He&&Gg(s,Je.create[He],c,c[Je.anchorIdx])}}break;case 1:const le=o[++v],he=o[++v];fb(h,_c(C>>>1,c),null,null,le,he,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case Hg:const T=o[++v],R=o[++v];null===c[R]&&Gi(c[R]=eS(h,T),c);break;case Cf:const j=o[++v],K=o[++v];null===c[K]&&Gi(c[K]=Gv(h,j,null),c)}}}function so(s,o,c,u,h){for(let p=0;p<c.length;p++){const _=c[p],v=c[++p];if(_&h){let C="";for(let T=p+1;T<=p+v;T++){const R=c[T];if("string"==typeof R)C+=R;else if("number"==typeof R)if(R<0)C+=H(o[u-R]);else{const j=R>>>2;switch(3&R){case 1:const K=c[++T],le=c[++T],he=s.data[j];"string"==typeof he?fb(o[11],o[j],null,he,K,C,le):Bs(s,he,o,K,C,o[11],le,!1);break;case 0:const ke=o[j];null!==ke&&dE(o[11],ke,C);break;case 2:nD(s,ru(s,j),o,C);break;case 3:su(s,ru(s,j),u,o)}}}}else{const C=c[p+1];if(C>0&&3==(3&C)){const R=ru(s,C>>>2);o[R.currentCaseLViewIndex]<0&&su(s,R,u,o)}}p+=v}}function su(s,o,c,u){let h=u[o.currentCaseLViewIndex];if(null!==h){let p=Ef;h<0&&(h=u[o.currentCaseLViewIndex]=~h,p=-1),so(s,u,o.update[h],c,p)}}function nD(s,o,c,u){const h=function(s,o){let c=s.cases.indexOf(o);if(-1===c)switch(s.type){case 1:{const u=function(s,o){const c=Zx(o)(parseInt(s,10)),u=zx[c];return void 0!==u?u:"other"}(o,Zl);c=s.cases.indexOf(u),-1===c&&"other"!==u&&(c=s.cases.indexOf("other"));break}case 0:c=s.cases.indexOf("other")}return-1===c?null:c}(o,u);if(V_(o,c)!==h&&(y1(s,o,c),c[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const _=c[o.anchorIdx];_&&Gg(s,o.create[h],c,_)}}function y1(s,o,c){let u=V_(o,c);if(null!==u){const h=o.remove[u];for(let p=0;p<h.length;p++){const _=h[p];if(_>0){const v=_c(_,c);null!==v&&Yv(c[11],v)}else y1(s,ru(s,~_),c)}}}function f2(){const s=[];let c,u,o=-1;function p(v,C){o=0;const T=V_(v,C);u=null!==T?v.remove[T]:At}function _(){if(o<u.length){const v=u[o++];return v>0?c[v]:(s.push(o,u),p(c[1].data[~v],c),_())}return 0===s.length?null:(u=s.pop(),o=s.pop(),_())}return function(v,C){for(c=C;s.length;)s.pop();return p(v.value,C),_}}const H_=/\ufffd(\d+):?\d*\ufffd/gi,$_=/\ufffd(\d+)\ufffd/,Wg=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,v1=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,sD=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,oD=/\uE500/g;function b1(s,o,c,u,h,p,_){const v=Ed(s,u,1,null);let C=v<<Hr.SHIFT,T=zs();o===T&&(T=null),null===T&&(C|=Hr.APPEND_EAGERLY),_&&(C|=Hr.COMMENT,function(s){void 0===$v&&($v=s())}(f2)),h.push(C,null===p?"":p);const R=ni(s,v,_?32:1,null===p?"":p,null);Bd(c,R);const j=R.index;return pi(R,!1),null!==T&&o!==T&&function(s,o){let c=s.insertBeforeIndex;null===c?(_E(jg,Yx),c=s.insertBeforeIndex=[null,o]):(function(s,o,c){s!=o&&Re(c,s,o,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(o))}(T,j),R}function pa(s,o,c,u,h,p,_){const v=_.match(H_),C=b1(s,o,c,p,u,v?null:_,!1);v&&Df(h,_,C.index,null,0,null)}function Df(s,o,c,u,h,p){const _=s.length,v=_+1;s.push(null,null);const C=_+2,T=o.split(H_);let R=0;for(let j=0;j<T.length;j++){const K=T[j];if(1&j){const le=h+parseInt(K,10);s.push(-1-le),R|=uD(le)}else""!==K&&s.push(K)}return s.push(c<<2|(u?1:0)),u&&s.push(u,p),s[_]=R,s[v]=s.length-C,R}function uD(s){return 1<<Math.min(s,31)}function hD(s){let o,p,c="",u=0,h=!1;for(;null!==(o=v1.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(u=o.index,h=!1):(c+=s.substring(u,o.index+o[0].length),p=o[1],h=!0);return c+=s.substr(u),c}function fD(s,o,c,u,h,p){let _=0;const v={type:h.type,currentCaseLViewIndex:Ed(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,c){s.push(uD(o.mainBinding),2,-1-o.mainBinding,c<<2|2)})(c,h,p),function(s,o,c){const u=s.data[o];null===u?s.data[o]=c:u.value=c}(s,p,v);const C=h.values;for(let T=0;T<C.length;T++){const R=C[T],j=[];for(let K=0;K<R.length;K++){const le=R[K];if("string"!=typeof le){const he=j.push(le)-1;R[K]=`\x3c!--\ufffd${he}\ufffd--\x3e`}}_=FN(s,v,o,c,u,h.cases[T],R.join(""),j)|_}_&&function(s,o,c){s.push(o,1,c<<2|3)}(c,_,p)}function ON(s){const o=[],c=[];let u=1,h=0;const p=w1(s=s.replace(Wg,function(_,v,C){return u="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let _=0;_<p.length;){let v=p[_++].trim();1===u&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=w1(p[_++]);o.length>c.length&&c.push(C)}return{type:u,mainBinding:h,cases:o,values:c}}function w1(s){if(!s)return[];let o=0;const c=[],u=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(c.pop(),0==c.length){const C=s.substring(o,v);Wg.test(C)?u.push(ON(C)):u.push(C),o=v+1}}else{if(0==c.length){const C=s.substring(o,v);u.push(C),o=v+1}c.push("{")}}const _=s.substring(o);return u.push(_),u}function FN(s,o,c,u,h,p,_,v){const C=[],T=[],R=[];o.cases.push(p),o.create.push(C),o.remove.push(T),o.update.push(R);const K=jh(mc()).getInertBodyElement(_),le=In(K)||K;return le?pD(s,o,c,u,C,T,R,le,h,v,0):0}function pD(s,o,c,u,h,p,_,v,C,T,R){let j=0,K=v.firstChild;for(;K;){const le=Ed(s,c,1,null);switch(K.nodeType){case Node.ELEMENT_NODE:const he=K,ke=he.tagName.toLowerCase();if(zp.hasOwnProperty(ke)){C1(h,Cf,ke,C,le),s.data[le]=ke;const It=he.attributes;for(let Ft=0;Ft<It.length;Ft++){const hn=It.item(Ft),vi=hn.name.toLowerCase();hn.value.match(H_)?E.hasOwnProperty(vi)&&Df(_,hn.value,le,hn.name,0,hd[vi]?Wa:w[vi]?Wh:null):UN(h,le,hn)}j=pD(s,o,c,u,h,p,_,K,le,T,R+1)|j,gD(p,le,R)}break;case Node.TEXT_NODE:const Te=K.textContent||"",Je=Te.match(H_);C1(h,null,Je?"":Te,C,le),gD(p,le,R),Je&&(j=Df(_,Te,le,null,0,null)|j);break;case Node.COMMENT_NODE:const He=$_.exec(K.textContent||"");if(He){const Ft=T[parseInt(He[1],10)];C1(h,Hg,"",C,le),fD(s,c,u,C,Ft,le),LN(p,le,R)}}K=K.nextSibling}return j}function gD(s,o,c){0===c&&s.push(o)}function LN(s,o,c){0===c&&(s.push(~o),s.push(o))}function C1(s,o,c,u,h){null!==o&&s.push(o),s.push(c,h,function(s,o,c){return 0|o<<17|c<<1}(0,u,h))}function UN(s,o,c){s.push(o<<1|1,c.name,c.value)}function x1(s,o,c=-1){const u=rn(),h=Ze(),p=20+s,_=xr(u.consts,o),v=zs();u.firstCreatePass&&function(s,o,c,u,h,p){const _=zs(),v=[],C=[],T=[[]],R=function(s){return s.replace(oD," ")}(h=function(s,o){if(function(s){return-1===s}(o))return hD(s);{const c=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,u=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return hD(s.substring(c,u))}}(h,p)).split(sD);for(let j=0;j<R.length;j++){let K=R[j];if(0==(1&j)){const le=w1(K);for(let he=0;he<le.length;he++){let ke=le[he];if(0==(1&he)){const Te=ke;""!==Te&&pa(s,_,T[0],v,C,c,Te)}else{const Te=ke;if("object"!=typeof Te)throw new Error(`Unable to parse ICU expression in "${h}" message.`);fD(s,c,C,o,Te,b1(s,_,T[0],c,v,"",!0).index)}}}else{const le=47===K.charCodeAt(0),ke=(K.charCodeAt(le?1:0),20+Number.parseInt(K.substring(le?2:1)));if(le)T.shift(),pi(zs(),!1);else{const Te=MN(s,T[0],ke);T.unshift([]),pi(Te,!0)}}}s.data[u]={create:v,update:C}}(u,null===v?0:v.index,h,p,_,c);const C=u.data[p],R=pE(u,v===h[6]?null:v,h);(function(s,o,c,u){const h=s[11];for(let p=0;p<o.length;p++){const _=o[p++],v=o[p],C=(_&Hr.COMMENT)===Hr.COMMENT,T=(_&Hr.APPEND_EAGERLY)===Hr.APPEND_EAGERLY,R=_>>>Hr.SHIFT;let j=s[R];null===j&&(j=s[R]=C?h.createComment(v):P0(h,v)),T&&null!==c&&jc(h,c,j,u,!1)}})(h,C.create,R,v&&8&v.type?h[v.index]:null),Gu(!0)}function vD(s,o,c){x1(s,o,c),Gu(!1)}function D1(s){return function(s){s&&(Ef|=1<<Math.min(xf,31)),xf++}(Ei(Ze(),Ui(),s)),D1}function ZN(s){!function(s,o,c){if(xf>0){const u=s.data[c];so(s,o,Array.isArray(u)?u:u.update,Bi()-xf-1,Ef)}Ef=0,xf=0}(rn(),Ze(),s+20)}function T1(s,o,c,u,h){if(s=S(s),Array.isArray(s))for(let p=0;p<s.length;p++)T1(s[p],o,c,u,h);else{const p=rn(),_=Ze();let v=Yc(s)?s:S(s.provide),C=Cb(s);const T=Kn(),R=1048575&T.providerIndexes,j=T.directiveStart,K=T.providerIndexes>>20;if(Yc(s)||!s.multi){const le=new Do(C,h,_f),he=A1(v,o,h?R:R+K,j);-1===he?(Mn(Ko(T,_),p,v),I1(p,s,o.length),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(le),_.push(le)):(c[he]=le,_[he]=le)}else{const le=A1(v,o,R+K,j),he=A1(v,o,R,R+K),ke=le>=0&&c[le],Te=he>=0&&c[he];if(h&&!Te||!h&&!ke){Mn(Ko(T,_),p,v);const Je=function(s,o,c,u,h){const p=new Do(s,c,_f);return p.multi=[],p.index=o,p.componentProviders=0,bD(p,h,u&&!c),p}(h?QN:KN,c.length,h,u,C);!h&&Te&&(c[he].providerFactory=Je),I1(p,s,o.length,0),o.push(v),T.directiveStart++,T.directiveEnd++,h&&(T.providerIndexes+=1048576),c.push(Je),_.push(Je)}else I1(p,s,le>-1?le:he,bD(c[h?he:le],C,!h&&u));!h&&u&&Te&&c[he].componentProviders++}}}function I1(s,o,c,u){const h=Yc(o);if(h||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(c);-1===C?v.push(c,[u,_]):v[C+1].push(u,_)}else v.push(c,_)}}}function bD(s,o,c){return c&&s.componentProviders++,s.multi.push(o)-1}function A1(s,o,c,u){for(let h=c;h<u;h++)if(o[h]===s)return h;return-1}function KN(s,o,c,u){return S1(this.multi,[])}function QN(s,o,c,u){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=ir(c,c[1],this.providerFactory.index,u);p=v.slice(0,_),S1(h,p);for(let C=_;C<v.length;C++)p.push(v[C])}else p=[],S1(h,p);return p}function S1(s,o){for(let c=0;c<s.length;c++)o.push((0,s[c])());return o}function XN(s,o=[]){return c=>{c.providersResolver=(u,h)=>function(s,o,c){const u=rn();if(u.firstCreatePass){const h=us(s);T1(c,u.data,u.blueprint,h,!0),T1(o,u.data,u.blueprint,h,!1)}}(u,h?h(s):s,o)}}class wD{}const ED="ngComponent";class tM{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${L(s)}. Did you add it to @NgModule.entryComponents?`);return o[ED]=s,o}(o)}}let Tf=(()=>{class s{}return s.NULL=new tM,s})();function ma(...s){}function xi(s,o){return new il(Ln(s,o))}const nM=function(){return xi(Kn(),Ze())};let il=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=nM,s})();function xD(s){return s instanceof il?s.nativeElement:s}class G_{}let rM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>DD(),s})();const DD=function(){const s=Ze(),c=Lr(Kn().index,s);return function(s){return s[11]}(jn(c)?c:s)};let Zg=(()=>{class s{}return s.\u0275prov=yt({token:s,providedIn:"root",factory:()=>null}),s})();class M1{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const If=new M1("12.2.16");class ID{constructor(){}supports(o){return Bl(o)}create(o){return new R1(o)}}const w2=(s,o)=>o;class R1{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||w2}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,u=this._removalsHead,h=0,p=null;for(;c||u;){const _=!u||c&&c.currentIndex<SD(u,h,p)?c:u,v=SD(_,h,p),C=_.currentIndex;if(_===u)h--,u=u._nextRemoved;else if(c=c._next,null==_.previousIndex)h++;else{p||(p=[]);const T=v-h,R=C-h;if(T!=R){for(let K=0;K<T;K++){const le=K<p.length?p[K]:p[K]=0,he=le+K;R<=he&&he<T&&(p[K]=le+1)}p[_.previousIndex]=R-T}}v!==C&&o(_,v,C)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!Bl(o))throw new Error(`Error trying to diff '${L(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,c=this._itHead,u=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],_=this._trackByFn(v,p),null!==c&&Object.is(c.trackById,_)?(u&&(c=this._verifyReinsertion(c,p,_,v)),Object.is(c.item,p)||this._addIdentityChange(c,p)):(c=this._mismatch(c,p,_,v),u=!0),c=c._next}else h=0,function(s,o){if(Array.isArray(s))for(let c=0;c<s.length;c++)o(s[c]);else{const c=s[el()]();let u;for(;!(u=c.next()).done;)o(u.value)}}(o,v=>{_=this._trackByFn(h,v),null!==c&&Object.is(c.trackById,_)?(u&&(c=this._verifyReinsertion(c,v,_,h)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,_,h),u=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,u,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,p,h)):o=this._addAfter(new E2(c,u),p,h),o}_verifyReinsertion(o,c,u,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,c,u),this._addToMoves(o,u),o}_moveAfter(o,c,u){return this._unlink(o),this._insertAfter(o,c,u),this._addToMoves(o,u),o}_addAfter(o,c,u){return this._insertAfter(o,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,u){const h=null===c?this._itHead:c._next;return o._next=h,o._prev=c,null===h?this._itTail=o:h._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new AD),this._linkedRecords.put(o),o.currentIndex=u,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,u=o._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class E2{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class x2{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,o))return u;return null}remove(o){const c=o._prevDup,u=o._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class AD{constructor(){this.map=new Map}put(o){const c=o.trackById;let u=this.map.get(c);u||(u=new x2,this.map.set(c,u)),u.add(o)}get(o,c){const h=this.map.get(o);return h?h.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function SD(s,o,c){const u=s.previousIndex;if(null===u)return u;let h=0;return c&&u<c.length&&(h=c[u]),u+o+h}class oM{constructor(){}supports(o){return o instanceof Map||Rb(o)}create(){return new D2}}class D2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||Rb(o)))throw new Error(`Error trying to diff '${L(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(u,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const p=this._getOrCreateRecordForKey(h,u);c=this._insertBeforeOrAppend(c,p)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const u=o._prev;return c._next=o,c._prev=u,o._prev=c,u&&(u._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,c);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const u=new T2(o);return this._records.set(o,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(u=>c(o[u],u))}}class T2{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aM(){return new k1([new ID])}let k1=(()=>{class s{constructor(c){this.factories=c}static create(c,u){if(null!=u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||aM()),deps:[[s,new Yr,new $a]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(s){return s.name||typeof s}(c)}'`)}}return s.\u0275prov=yt({token:s,providedIn:"root",factory:aM}),s})();function lM(){return new P1([new oM])}let P1=(()=>{class s{constructor(c){this.factories=c}static create(c,u){if(u){const h=u.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:u=>s.create(c,u||lM()),deps:[[s,new Yr,new $a]]}}find(c){const u=this.factories.find(h=>h.supports(c));if(u)return u;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return s.\u0275prov=yt({token:s,providedIn:"root",factory:lM}),s})();function zg(s,o,c,u,h=!1){for(;null!==c;){const p=o[c.index];if(null!==p&&u.push(Fn(p)),Xi(p))for(let v=10;v<p.length;v++){const C=p[v],T=C[1].firstChild;null!==T&&zg(C[1],C,T,u)}const _=c.type;if(8&_)zg(s,o,c.child,u);else if(32&_){const v=R0(c,o);let C;for(;C=v();)u.push(C)}else if(16&_){const v=Zv(o,c);if(Array.isArray(v))u.push(...v);else{const C=ng(o[16]);zg(C[1],C,v,u,!0)}}c=h?c.projectionNext:c.next}return u}class Yg{constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,c=o[1];return zg(c,o,c.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Xi(o)){const c=o[8],u=c?c.indexOf(this):-1;u>-1&&(F0(o,u),Ro(c,u))}this._attachedToViewContainer=!1}hE(this._lView[1],this._lView)}onDestroy(o){ug(this._lView[1],this._lView,null,o)}markForCheck(){gb(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Td(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,c){wc(!0);try{Td(s,o,c)}finally{wc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,yd(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class cM extends Yg{constructor(o){super(o),this._view=o}detectChanges(){J0(this._view)}checkNoChanges(){!function(s){wc(!0);try{J0(s)}finally{wc(!1)}}(this._view)}get context(){return null}}const W_=function(s){return function(s,o,c){if(dl(s)&&!c){const u=Lr(s.index,o);return new Yg(u,u)}return 47&s.type?new Yg(o[16],o):null}(Kn(),Ze(),16==(16&s))};let O1=(()=>{class s{}return s.__NG_ELEMENT_ID__=W_,s})();const hM=[new oM],fM=new k1([new ID]),pM=new P1(hM),ws=function(){return Hd(Kn(),Ze())};let ou=(()=>{class s{}return s.__NG_ELEMENT_ID__=ws,s})();const MD=ou,mM=class extends MD{constructor(o,c,u){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=u}createEmbeddedView(o){const c=this._declarationTContainer.tViews,u=wd(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(u[19]=p.createEmbeddedView(c)),ag(c,u,o),new Yg(u)}};function Hd(s,o){return 4&s.type?new mM(o,s,xi(s,o)):null}class Yl{}class q_{}const yM=function(){return RD(Kn(),Ze())};let Z_=(()=>{class s{}return s.__NG_ELEMENT_ID__=yM,s})();const Kg=Z_,L1=class extends Kg{constructor(o,c,u){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=u}get element(){return xi(this._hostTNode,this._hostLView)}get injector(){return new Ao(this._hostTNode,this._hostLView)}get parentInjector(){const o=xt(this._hostTNode,this._hostLView);if(xl(o)){const c=ts(o,this._hostLView),u=Pa(o);return new Ao(c[1].data[u+8],c)}return new Ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=Qg(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,c,u){const h=o.createEmbeddedView(c||{});return this.insert(h,u),h}createComponent(o,c,u,h,p){const _=u||this.parentInjector;if(!p&&null==o.ngModule&&_){const C=_.get(Yl,null);C&&(p=C)}const v=o.create(_,h,void 0,p);return this.insert(v.hostView,c),v}insert(o,c){const u=o._lView,h=u[1];if(Xi(u[3])){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const j=u[3],K=new L1(j,j[6],j[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(c),_=this._lContainer;!function(s,o,c,u){const h=10+u,p=c.length;u>0&&(c[h-1][4]=o),u<p-10?(o[4]=c[h],Fs(c,10+u,o)):(c.push(o),o[4]=null),o[3]=c;const _=o[17];null!==_&&c!==_&&function(s,o){const c=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===c?s[9]=[o]:c.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,u,_,p);const v=zv(p,_),C=u[11],T=L0(C,_[7]);return null!==T&&function(s,o,c,u,h,p){u[0]=h,u[6]=o,yd(s,u,c,1,h,p)}(h,_[6],C,u,T,v),o.attachToViewContainerRef(),Fs(z_(_),p,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=Qg(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),u=F0(this._lContainer,c);u&&(Ro(z_(this._lContainer),c),hE(u[1],u))}detach(o){const c=this._adjustIndex(o,-1),u=F0(this._lContainer,c);return u&&null!=Ro(z_(this._lContainer),c)?new Yg(u):null}_adjustIndex(o,c=0){return null==o?this.length+c:o}};function Qg(s){return s[8]}function z_(s){return s[8]||(s[8]=[])}function RD(s,o){let c;const u=o[s.index];if(Xi(u))c=u;else{let h;if(8&s.type)h=Fn(u);else{const p=o[11];h=p.createComment("");const _=Ln(s,o);jc(p,L0(p,_),h,function(s,o){return Gn(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=c=$E(u,o,h,s),af(o,c)}return new L1(c,s,o)}const Of={};class ty extends Tf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=at(o);return new rT(c,this.ngModule)}}function Kt(s){const o=[];for(let c in s)s.hasOwnProperty(c)&&o.push({propName:s[c],templateName:c});return o}const iw=new Jn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>sE});class rT extends wD{constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=o.selectors.map(pS).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return Kt(this.componentDef.inputs)}get outputs(){return Kt(this.componentDef.outputs)}create(o,c,u,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(c,u,h)=>{const p=s.get(c,Of,h);return p!==Of||u===Of?p:o.get(c,u,h)}}}(o,h.injector):o,_=p.get(G_,Ns),v=p.get(Zg,null),C=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",R=u?function(s,o,c){if(Gn(s))return s.selectRootElement(o,c===it.ShadowDom);let u="string"==typeof o?s.querySelector(o):o;return u.textContent="",u}(C,u,this.componentDef.encapsulation):Gv(_.createRenderer(null,this.componentDef),T,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(T)),j=this.componentDef.onPush?576:528,K=function(s,o){return{components:[],scheduler:s||sE,clean:_b,playerHandler:o||null,flags:0}}(),le=K0(0,null,null,1,0,null,null,null,null,null),he=wd(null,le,K,j,null,null,_,C,v,p);let ke,Te;Na(he);try{const Je=function(s,o,c,u,h,p){const _=c[1];c[20]=s;const C=Cd(_,20,2,"#host",null),T=C.mergedAttrs=o.hostAttrs;null!==T&&(dg(C,T,!0),null!==s&&(Mh(h,s,T),null!==C.classes&&Kv(h,s,C.classes),null!==C.styles&&vE(h,s,C.styles)));const R=u.createRenderer(s,o),j=wd(c,xd(o),null,o.onPush?64:16,c[20],C,u,R,p||null,null);return _.firstCreatePass&&(Mn(Ko(C,c),_,o.type),db(_,C),UE(C,c.length,1)),af(c,j),c[20]=j}(R,this.componentDef,he,_,C);if(R)if(u)Mh(C,R,["ng-version",If.full]);else{const{attrs:He,classes:It}=function(s){const o=[],c=[];let u=1,h=2;for(;u<s.length;){let p=s[u];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++u]):8===h&&c.push(p);else{if(!aa(h))break;h=p}u++}return{attrs:o,classes:c}}(this.componentDef.selectors[0]);He&&Mh(C,R,He),It&&It.length>0&&Kv(C,R,It.join(" "))}if(Te=Ms(le,20),void 0!==c){const He=Te.projection=[];for(let It=0;It<this.ngContentSelectors.length;It++){const Ft=c[It];He.push(null!=Ft?Array.from(Ft):null)}}ke=function(s,o,c,u,h){const p=c[1],_=function(s,o,c){const u=Kn();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),hb(s,u,o,Ed(s,o,1,null),c));const h=ir(o,s,u.directiveStart,u);Gi(h,o);const p=Ln(u,o);return p&&Gi(p,o),h}(p,c,o);if(u.components.push(_),s[8]=_,h&&h.forEach(C=>C(_,o)),o.contentQueries){const C=Kn();o.contentQueries(1,_,C.directiveStart)}const v=Kn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ma(v.index),VE(c[1],v,0,v.directiveStart,v.directiveEnd,o),BE(o,_)),_}(Je,this.componentDef,he,K,[Nb]),ag(le,he,null)}finally{Yo()}return new GM(this.componentType,ke,xi(Te,he),he,Te)}}class GM extends class{}{constructor(o,c,u,h,p){super(),this.location=u,this._rootLView=h,this._tNode=p,this.instance=c,this.hostView=this.changeDetectorRef=new cM(h),this.componentType=o}get injector(){return new Ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const $r=new Map;class sT extends Yl{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ty(this);const u=On(o),h=o[Nt]||null;h&&f1(h),this._bootstrapComponents=qa(u.bootstrap),this._r3Injector=Vl(o,c,[{provide:Yl,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver}],L(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,c=or.THROW_IF_NOT_FOUND,u=pt.Default){return o===or||o===Yl||o===Id?this:this._r3Injector.get(o,c,u)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ry extends q_{constructor(o){super(),this.moduleType=o,null!==On(o)&&function(s){const o=new Set;!function c(u){const h=On(u,!0),p=h.id;null!==p&&(function(s,o,c){if(o&&o!==c)throw new Error(`Duplicate module registered for ${s} - ${L(o)} vs ${L(o.name)}`)}(p,$r.get(p),u),$r.set(p,u));const _=qa(h.imports);for(const v of _)o.has(v)||(o.add(v),c(v))}(s)}(o)}create(o){return new sT(this.moduleType,o)}}function aw(s,o,c,u){return cw(Ze(),_r(),s,o,c,u)}function iy(s,o,c,u,h){return uw(Ze(),_r(),s,o,c,u,h)}function am(s,o,c,u,h,p){return function(s,o,c,u,h,p,_,v){const C=o+c;return function(s,o,c,u,h){const p=Md(s,o,c,u);return Ei(s,o+2,h)||p}(s,C,h,p,_)?tl(s,C+3,v?u.call(v,h,p,_):u(h,p,_)):Wd(s,C+3)}(Ze(),_r(),s,o,c,u,h,p)}function Wd(s,o){const c=s[o];return c===Qt?void 0:c}function cw(s,o,c,u,h,p){const _=o+c;return Ei(s,_,h)?tl(s,_+1,p?u.call(p,h):u(h)):Wd(s,_+1)}function uw(s,o,c,u,h,p,_){const v=o+c;return Md(s,v,h,p)?tl(s,v+2,_?u.call(_,h,p):u(h,p)):Wd(s,v+2)}function uT(s,o){const c=rn();let u;const h=s+20;c.firstCreatePass?(u=function(s,o){if(o)for(let c=o.length-1;c>=0;c--){const u=o[c];if(s===u.name)return u}throw new J("302",`The pipe '${s}' could not be found!`)}(o,c.pipeRegistry),c.data[h]=u,u.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(h,u.onDestroy)):u=c.data[h];const p=u.factory||(u.factory=Zs(u.type)),_=ln(_f);try{const v=Tc(!1),C=p();return Tc(v),function(s,o,c,u){c>=s.data.length&&(s.data[c]=null,s.blueprint[c]=null),o[c]=u}(c,Ze(),h,C),C}finally{ln(_)}}function hw(s,o,c){const u=s+20,h=Ze(),p=Ta(h,u);return qd(h,lu(h,u)?cw(h,_r(),o,p.transform,c,p):p.transform(c))}function oy(s,o,c,u){const h=s+20,p=Ze(),_=Ta(p,h);return qd(p,lu(p,h)?uw(p,_r(),o,_.transform,c,u,_):_.transform(c,u))}function lu(s,o){return s[1].data[o].pure}function qd(s,o){return no.isWrapped(o)&&(o=no.unwrap(o),s[Bi()]=Qt),o}function lm(s){return o=>{setTimeout(s,void 0,o)}}const ol=class extends a.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,u){var h,p,_;let v=o,C=c||(()=>null),T=u;if(o&&"object"==typeof o){const j=o;v=null===(h=j.next)||void 0===h?void 0:h.bind(j),C=null===(p=j.error)||void 0===p?void 0:p.bind(j),T=null===(_=j.complete)||void 0===_?void 0:_.bind(j)}this.__isAsync&&(C=lm(C),v&&(v=lm(v)),T&&(T=lm(T)));const R=super.subscribe({next:v,error:C,complete:T});return o instanceof M.w&&o.add(R),R}};function zM(){return this._results[el()]()}class Lf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=el(),u=Lf.prototype;u[c]||(u[c]=zM)}get changes(){return this._changes||(this._changes=new ol)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const u=this;u.dirty=!1;const h=Ci(o);(this._changesDetected=!function(s,o,c){if(s.length!==o.length)return!1;for(let u=0;u<s.length;u++){let h=s[u],p=o[u];if(c&&(h=c(h),p=c(p)),p!==h)return!1}return!0}(u._results,h,c))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Si{constructor(o){this.queryList=o,this.matches=null}clone(){return new Si(this.queryList)}setDirty(){this.queryList.setDirty()}}class Zd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const u=null!==o.contentQueries?o.contentQueries[0]:c.length,h=[];for(let p=0;p<u;p++){const _=c.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new Zd(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==yT(o,c).matches&&this.queries[c].setDirty()}}class pT{constructor(o,c,u=null){this.predicate=o,this.flags=c,this.read=u}}class zd{constructor(o=[]){this.queries=o}elementStart(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let u=0;u<this.length;u++){const h=null!==c?c.length:0,p=this.getByIndex(u).embeddedTView(o,h);p&&(p.indexInDeclarationView=u,null!==c?c.push(p):c=[p])}return null!==c?new zd(c):null}template(o,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class pw{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new pw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=o.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const p=u[h];this.matchTNodeWithReadOption(o,c,KM(c,p)),this.matchTNodeWithReadOption(o,c,Io(c,o,p,!1,!1))}else u===ou?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Io(c,o,u,!1,!1))}matchTNodeWithReadOption(o,c,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===il||h===Z_||h===ou&&4&c.type)this.addMatch(c.index,-2);else{const p=Io(c,o,h,!1,!1);null!==p&&this.addMatch(c.index,p)}else this.addMatch(c.index,u)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function KM(s,o){const c=s.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===o)return c[u+1];return null}function ly(s,o,c,u){return-1===c?function(s,o){return 11&s.type?xi(s,o):4&s.type?Hd(s,o):null}(o,s):-2===c?function(s,o,c){return c===il?xi(o,s):c===ou?Hd(o,s):c===Z_?RD(o,s):void 0}(s,o,u):ir(s,s[1],c,o)}function cy(s,o,c,u){const h=o[19].queries[u];if(null===h.matches){const p=s.data,_=c.matches,v=[];for(let C=0;C<_.length;C+=2){const T=_[C];v.push(T<0?null:ly(o,p[T],_[C+1],c.metadata.read))}h.matches=v}return h.matches}function cm(s,o,c,u){const h=s.queries.getByIndex(c),p=h.matches;if(null!==p){const _=cy(s,o,h,c);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)u.push(_[v/2]);else{const T=p[v+1],R=o[-C];for(let j=10;j<R.length;j++){const K=R[j];K[17]===K[3]&&cm(K[1],K,T,u)}if(null!==R[9]){const j=R[9];for(let K=0;K<j.length;K++){const le=j[K];cm(le[1],le,T,u)}}}}}return u}function uy(s){const o=Ze(),c=rn(),u=Cc();xo(u+1);const h=yT(c,u);if(s.dirty&&Ih(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?cm(c,o,u,[]):cy(c,o,h,u);s.reset(p,xD),s.notifyOnChanges()}return!0}return!1}function mw(s,o,c){const u=rn();u.firstCreatePass&&(dy(u,new pT(s,o,c),-1),2==(2&o)&&(u.staticViewQueries=!0)),yw(u,Ze(),o)}function _w(s,o,c,u){const h=rn();if(h.firstCreatePass){const p=Kn();dy(h,new pT(o,c,u),p.index),function(s,o){const c=s.contentQueries||(s.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,o)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}yw(h,Ze(),c)}function gT(){return s=Ze(),o=Cc(),s[19].queries[o].queryList;var s,o}function yw(s,o,c){const u=new Lf(4==(4&c));ug(s,o,u,u.destroy),null===o[19]&&(o[19]=new Zd),o[19].queries.push(new Si(u))}function dy(s,o,c){null===s.queries&&(s.queries=new zd),s.queries.track(new pw(o,c))}function yT(s,o){return s.queries.getByIndex(o)}function hy(s,o){return Hd(s,o)}const mr=new Jn("Application Initializer");let Xl=(()=>{class s{constructor(c){this.appInits=c,this.resolve=ma,this.reject=ma,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(jb(p))c.push(p);else if(Gb(p)){const _=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});c.push(_)}}Promise.all(c).then(()=>{u()}).catch(h=>{this.reject(h)}),0===c.length&&u(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(ur(mr,8))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();const BT=new Jn("AppId"),mm={provide:BT,useFactory:function(){return`${Xd()}${Xd()}${Xd()}`},deps:[]};function Xd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const UT=new Jn("Platform Initializer"),Fw=new Jn("Platform ID"),HT=new Jn("appBootstrapListener");let $T=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();const Cy=new Jn("LocaleId"),jf=new Jn("DefaultCurrencyCode");class cR{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}const xy=function(s){return new ry(s)},GT=xy,ZT=function(s){return Promise.resolve(xy(s))},Dy=function(s){const o=xy(s),u=qa(On(s).declarations).reduce((h,p)=>{const _=at(p);return _&&h.push(new rT(_)),h},[]);return new cR(o,u)},hR=Dy,Ty=function(s){return Promise.resolve(Dy(s))};let ec=(()=>{class s{constructor(){this.compileModuleSync=GT,this.compileModuleAsync=ZT,this.compileModuleAndAllComponentsSync=hR,this.compileModuleAndAllComponentsAsync=Ty}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();const zT=(()=>Promise.resolve(0))();function th(s){"undefined"==typeof Zone?zT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class oo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ol(!1),this.onMicrotaskEmpty=new ol(!1),this.onStable=new ol(!1),this.onError=new ol(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&c,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=St.requestAnimationFrame,o=St.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(St,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Vw(s),s.isCheckStableRunning=!0,Ay(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Vw(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,h,p,_,v)=>{try{return YT(s),c.invokeTask(h,p,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Bw(s)}},onInvoke:(c,u,h,p,_,v,C)=>{try{return YT(s),c.invoke(h,p,_,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Bw(s)}},onHasTask:(c,u,h,p)=>{c.hasTask(h,p),u===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Vw(s),Ay(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(c,u,h,p)=>(c.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(oo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,c,u){return this._inner.run(o,c,u)}runTask(o,c,u,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,ri,ma,ma);try{return p.runTask(_,c,u)}finally{p.cancelTask(_)}}runGuarded(o,c,u){return this._inner.runGuarded(o,c,u)}runOutsideAngular(o){return this._outer.run(o)}}const ri={};function Ay(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Vw(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function YT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Bw(s){s._nesting--,Ay(s)}class KT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ol,this.onMicrotaskEmpty=new ol,this.onStable=new ol,this.onError=new ol}run(o,c,u){return o.apply(c,u)}runGuarded(o,c,u){return o.apply(c,u)}runOutsideAngular(o){return o()}runTask(o,c,u,h){return o.apply(c,u)}}let Uw=(()=>{class s{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oo.assertNotInAngularZone(),th(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())th(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(c)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,u,h){let p=-1;u&&u>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),c(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:c,timeoutId:p,updateCb:h})}whenStable(c,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,u,h){return[]}}return s.\u0275fac=function(c){return new(c||s)(ur(oo))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})(),vm=(()=>{class s{constructor(){this._applications=new Map,Sy.addToWindow(this)}registerApplication(c,u){this._applications.set(c,u)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,u=!0){return Sy.findTestabilityInTree(this,c,u)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();class QT{addToWindow(o){}findTestabilityInTree(o,c,u){return null}}function tc(s){Sy=s}let Sy=new QT,JT=!0,Ny=!1;function nh(){return Ny=!0,JT}function XT(){if(Ny)throw new Error("Cannot enable prod mode after platform setup.");JT=!1}let ao;const Ry=new Jn("AllowMultipleToken");class jw{constructor(o,c){this.name=o,this.token=c}}function wm(s,o,c=[]){const u=`Platform: ${o}`,h=new Jn(u);return(p=[])=>{let _=du();if(!_||_.injector.get(Ry,!1))if(s)s(c.concat(p).concat({provide:h,useValue:!0}));else{const v=c.concat(p).concat({provide:h,useValue:!0},{provide:zc,useValue:"platform"});!function(s){if(ao&&!ao.destroyed&&!ao.injector.get(Ry,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ao=s.get(Gw);const o=s.get(UT,null);o&&o.forEach(c=>c())}(or.create({providers:v,name:u}))}return function(s){const o=du();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function du(){return ao&&!ao.destroyed?ao:null}let Gw=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,u){const v=function(s,o){let c;return c="noop"===s?new KT:("zone.js"===s?void 0:s)||new oo({enableLongStackTrace:nh(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),c}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),C=[{provide:oo,useValue:v}];return v.run(()=>{const T=or.create({providers:C,parent:this.injector,name:c.moduleType.name}),R=c.create(T),j=R.injector.get(Qh,null);if(!j)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const K=v.onError.subscribe({next:le=>{j.handleError(le)}});R.onDestroy(()=>{Ds(this._modules,R),K.unsubscribe()})}),function(s,o,c){try{const u=c();return jb(u)?u.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):u}catch(u){throw o.runOutsideAngular(()=>s.handleError(u)),u}}(j,v,()=>{const K=R.injector.get(Xl);return K.runInitializers(),K.donePromise.then(()=>(f1(R.injector.get(Cy,L_)||L_),this._moduleDoBootstrap(R),R))})})}bootstrapModule(c,u=[]){const h=Ww({},u);return function(s,o,c){const u=new ry(c);return Promise.resolve(u)}(0,0,c).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(c){const u=c.injector.get(hu);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>u.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new Error(`The module ${L(c.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);c.instance.ngDoBootstrap(u)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(ur(or))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();function Ww(s,o){return Array.isArray(o)?o.reduce(Ww,s):Object.assign(Object.assign({},s),o)}let hu=(()=>{class s{constructor(c,u,h,p,_){this._zone=c,this._injector=u,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new k.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new k.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{oo.assertNotInAngularZone(),th(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const j=this._zone.onUnstable.subscribe(()=>{oo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),j.unsubscribe()}});this.isStable=(0,Q.T)(v,C.pipe((0,ie.B)()))}bootstrap(c,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=c instanceof wD?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Yl),v=h.create(or.NULL,[],u||h.selector,p),C=v.location.nativeElement,T=v.injector.get(Uw,null),R=T&&v.injector.get(vm);return T&&R&&R.registerApplication(C,T),v.onDestroy(()=>{this.detachView(v.hostView),Ds(this.components,v),R&&R.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const u=c;this._views.push(u),u.attachToAppRef(this)}detachView(c){const u=c;Ds(this._views,u),u.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(HT,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(c){return new(c||s)(ur(oo),ur(or),ur(Qh),ur(Tf),ur(Xl))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();function Ds(s,o){const c=s.indexOf(o);c>-1&&s.splice(c,1)}class Gf{}class vR{}const ky={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let bR=(()=>{class s{constructor(c,u){this._compiler=c,this._config=u||ky}load(c){return this.loadAndCompile(c)}loadAndCompile(c){let[u,h]=c.split("#");return void 0===h&&(h="default"),O(8255)(u).then(p=>p[h]).then(p=>Zw(p,u,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(c){let[u,h]=c.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),O(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(_=>_[h+p]).then(_=>Zw(_,u,h))}}return s.\u0275fac=function(c){return new(c||s)(ur(ec),ur(vR,8))},s.\u0275prov=yt({token:s,factory:s.\u0275fac}),s})();function Zw(s,o,c){if(!s)throw new Error(`Cannot find '${c}' in '${o}'`);return s}const lo=function(s){return null},Bt=wm(null,"core",[{provide:Fw,useValue:"unknown"},{provide:Gw,deps:[or]},{provide:vm,deps:[]},{provide:$T,deps:[]}]),DR=[{provide:hu,useClass:hu,deps:[oo,or,Qh,Tf,Xl]},{provide:iw,deps:[oo],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(c){o.push(c)}}},{provide:Xl,useClass:Xl,deps:[[new $a,mr]]},{provide:ec,useClass:ec,deps:[]},mm,{provide:k1,useFactory:function(){return fM},deps:[]},{provide:P1,useFactory:function(){return pM},deps:[]},{provide:Cy,useFactory:function(s){return f1(s=s||"undefined"!=typeof $localize&&$localize.locale||L_),s},deps:[[new Ha(Cy),new $a,new Yr]]},{provide:jf,useValue:"USD"}];let qf=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(ur(hu))},s.\u0275mod=se({type:s}),s.\u0275inj=Xt({providers:DR}),s})()},8939:(Ve,me,O)=>{"use strict";O.d(me,{hO:()=>V,xv:()=>U,Dh:()=>L,GT:()=>W,cc:()=>z,on:()=>P,pX:()=>ie});var a=O(7716),M=O(7841),k=O(8971);Ve=O.hmd(Ve);const Q=["ngOnDestroy"],ie=(H,q,de,pe={})=>new Proxy(H,{get:(Ce,ve)=>de.runOutsideAngular(()=>{var Ue;if(H[ve])return(null===(Ue=null==pe?void 0:pe.spy)||void 0===Ue?void 0:Ue.get)&&pe.spy.get(ve,H[ve]),H[ve];if(Q.indexOf(ve)>-1)return()=>{};const Me=q.toPromise().then(Ae=>{const be=Ae&&Ae[ve];return"function"==typeof be?be.bind(Ae):be&&be.then?be.then(ue=>de.run(()=>ue)):de.run(()=>be)});return new Proxy(()=>{},{get:(Ae,be)=>Me[be],apply:(Ae,be,ue)=>Me.then(Ee=>{var _e;const xe=Ee&&Ee(...ue);return(null===(_e=null==pe?void 0:pe.spy)||void 0===_e?void 0:_e.apply)&&pe.spy.apply(ve,ue,xe),xe})})})}),W=(H,q)=>{q.forEach(de=>{Object.getOwnPropertyNames(de.prototype||de).forEach(pe=>{Object.defineProperty(H.prototype,pe,Object.getOwnPropertyDescriptor(de.prototype||de,pe))})})};class ee{constructor(q){return q}}const L=new a.OlP("angularfire2.app.options"),U=new a.OlP("angularfire2.app.name");function P(H,q,de){const Ce="object"==typeof de&&de||{};Ce.name=Ce.name||"string"==typeof de&&de||"[DEFAULT]";const Ue=M.Z.apps.filter(Me=>Me&&Me.name===Ce.name)[0]||q.runOutsideAngular(()=>M.Z.initializeApp(H,Ce));try{JSON.stringify(H)!==JSON.stringify(Ue.options)&&N("error",`${Ue.name} Firebase App already initialized with different options${Ve.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Me){}return new ee(Ue)}const N=(H,...q)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[H](...q)},S={provide:ee,useFactory:P,deps:[L,a.R0b,[new a.FiY,U]]};let V=(()=>{class H{constructor(de){M.Z.registerVersion("angularfire",k.q4.full,"core"),M.Z.registerVersion("angularfire",k.q4.full,"app-compat"),M.Z.registerVersion("angular",a.q4F.full,de.toString())}static initializeApp(de,pe){return{ngModule:H,providers:[{provide:L,useValue:de},{provide:U,useValue:pe}]}}}return H.\u0275fac=function(de){return new(de||H)(a.LFG(a.Lbi))},H.\u0275mod=a.oAB({type:H}),H.\u0275inj=a.cJS({providers:[S]}),H})();function z(H,q,de,pe,Ce){const[,ve,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Me=>Me[0]===H)||[];if(ve)return function(H,q){try{return H.toString()===q.toString()}catch(de){return H===q}}(Ce,Ue)||(ce("error",`${q} was already initialized on the ${de} Firebase App with different settings.${re?" You may need to reload as Firebase is not HMR aware.":""}`),ce("warn",{is:Ce,was:Ue})),ve;{const Me=pe();return globalThis.\u0275AngularfireInstanceCache.push([H,Me,Ce]),Me}}const re=!!Ve.hot,ce=(H,...q)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[H](...q)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(Ve,me,O)=>{"use strict";O.d(me,{q4:()=>g0,iC:()=>Ir,fc:()=>Up,HU:()=>Lh,vb:()=>Os,JM:()=>Ci});var a=O(7716),M=O(2329),k=O(8239),Q=O(8026),ie=O(3854),W=O(3910),ee=O(5422);const L="@firebase/installations",U="0.5.8",N=`w:${U}`,S="FIS_v2",H=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function q(D){return D instanceof ie.ZR&&D.code.includes("request-failed")}function de({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function pe(D){return{token:D.token,requestStatus:2,expiresIn:ue(D.expiresIn),creationTime:Date.now()}}function Ce(D,A){return ve.apply(this,arguments)}function ve(){return(ve=(0,k.Z)(function*(D,A){const oe=(yield A.json()).error;return H.create("request-failed",{requestName:D,serverCode:oe.code,serverMessage:oe.message,serverStatus:oe.status})})).apply(this,arguments)}function Ue({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function Me(D,{refreshToken:A}){const G=Ue(D);return G.append("Authorization",function(D){return`${S} ${D}`}(A)),G}function Ae(D){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(D){const A=yield D();return A.status>=500&&A.status<600?D():A})).apply(this,arguments)}function ue(D){return Number(D.replace("s","000"))}function _e(D,A){return xe.apply(this,arguments)}function xe(){return(xe=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:A},{fid:G}){const oe=de(D),De=Ue(D),Ne=A.getImmediate({optional:!0});if(Ne){const Ut=yield Ne.getHeartbeatsHeader();Ut&&De.append("x-firebase-client",Ut)}const ut={method:"POST",headers:De,body:JSON.stringify({fid:G,authVersion:S,appId:D.appId,sdkVersion:N})},kt=yield Ae(()=>fetch(oe,ut));if(kt.ok){const Ut=yield kt.json();return{fid:Ut.fid||G,registrationStatus:2,refreshToken:Ut.refreshToken,authToken:pe(Ut.authToken)}}throw yield Ce("Create Installation",kt)})).apply(this,arguments)}function Ie(D){return new Promise(A=>{setTimeout(A,D)})}const ht=/^[cdef][\w-]{21}$/;function Oe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const G=function(D){return function(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return ht.test(G)?G:""}catch(D){return""}}function Re(D){return`${D.appName}!${D.appId}`}const We=new Map;function Jt(D,A){const G=Re(D);Ct(G,A),function(D,A){const G=(!qt&&"BroadcastChannel"in self&&(qt=new BroadcastChannel("[Firebase] FID Change"),qt.onmessage=D=>{Ct(D.data.key,D.data.fid)}),qt);G&&G.postMessage({key:D,fid:A}),0===We.size&&qt&&(qt.close(),qt=null)}(G,A)}function Ct(D,A){const G=We.get(D);if(G)for(const oe of G)oe(A)}let qt=null;const Zn="firebase-installations-store";let ze=null;function zn(){return ze||(ze=(0,ie.X3)("firebase-installations-database",1,(D,A)=>{switch(A){case 0:D.createObjectStore(Zn)}})),ze}function Un(D,A){return pt.apply(this,arguments)}function pt(){return(pt=(0,k.Z)(function*(D,A){const G=Re(D),De=(yield zn()).transaction(Zn,"readwrite"),Ne=De.objectStore(Zn),Ke=yield Ne.get(G);return yield Ne.put(A,G),yield De.complete,(!Ke||Ke.fid!==A.fid)&&Jt(D,A.fid),A})).apply(this,arguments)}function fn(D){return mn.apply(this,arguments)}function mn(){return(mn=(0,k.Z)(function*(D){const A=Re(D),oe=(yield zn()).transaction(Zn,"readwrite");yield oe.objectStore(Zn).delete(A),yield oe.complete})).apply(this,arguments)}function ln(D,A){return tr.apply(this,arguments)}function tr(){return(tr=(0,k.Z)(function*(D,A){const G=Re(D),De=(yield zn()).transaction(Zn,"readwrite"),Ne=De.objectStore(Zn),Ke=yield Ne.get(G),ut=A(Ke);return void 0===ut?yield Ne.delete(G):yield Ne.put(ut,G),yield De.complete,ut&&(!Ke||Ke.fid!==ut.fid)&&Jt(D,ut.fid),ut})).apply(this,arguments)}function fr(D){return ar.apply(this,arguments)}function ar(){return(ar=(0,k.Z)(function*(D){let A;const G=yield ln(D.appConfig,oe=>{const De=Dn(oe),Ne=Qi(D,De);return A=Ne.registrationPromise,Ne.installationEntry});return""===G.fid?{installationEntry:yield A}:{installationEntry:G,registrationPromise:A}})).apply(this,arguments)}function Dn(D){return _n(D||{fid:Oe(),registrationStatus:0})}function Qi(D,A){if(0===A.registrationStatus){if(!navigator.onLine)return{installationEntry:A,registrationPromise:Promise.reject(H.create("app-offline"))};const G={fid:A.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:G,registrationPromise:function(D,A){return it.apply(this,arguments)}(D,G)}}return 1===A.registrationStatus?{installationEntry:A,registrationPromise:Dt(D)}:{installationEntry:A}}function it(){return(it=(0,k.Z)(function*(D,A){try{const G=yield _e(D,A);return Un(D.appConfig,G)}catch(G){throw q(G)&&409===G.customData.serverCode?yield fn(D.appConfig):yield Un(D.appConfig,{fid:A.fid,registrationStatus:0}),G}})).apply(this,arguments)}function Dt(D){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,k.Z)(function*(D){let A=yield qr(D.appConfig);for(;1===A.registrationStatus;)yield Ie(100),A=yield qr(D.appConfig);if(0===A.registrationStatus){const{installationEntry:G,registrationPromise:oe}=yield fr(D);return oe||G}return A})).apply(this,arguments)}function qr(D){return ln(D,A=>{if(!A)throw H.create("installation-not-found");return _n(A)})}function _n(D){return function(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function pr(D,A){return nr.apply(this,arguments)}function nr(){return(nr=(0,k.Z)(function*({appConfig:D,heartbeatServiceProvider:A},G){const oe=cn(D,G),De=Me(D,G),Ne=A.getImmediate({optional:!0});if(Ne){const Ut=yield Ne.getHeartbeatsHeader();Ut&&De.append("x-firebase-client",Ut)}const ut={method:"POST",headers:De,body:JSON.stringify({installation:{sdkVersion:N,appId:D.appId}})},kt=yield Ae(()=>fetch(oe,ut));if(kt.ok)return pe(yield kt.json());throw yield Ce("Generate Auth Token",kt)})).apply(this,arguments)}function cn(D,{fid:A}){return`${de(D)}/${A}/authTokens:generate`}function At(D){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,k.Z)(function*(D,A=!1){let G;const oe=yield ln(D.appConfig,Ne=>{if(!en(Ne))throw H.create("not-registered");const Ke=Ne.authToken;if(!A&&fe(Ke))return Ne;if(1===Ke.requestStatus)return G=rt(D,A),Ne;{if(!navigator.onLine)throw H.create("app-offline");const ut=ge(Ne);return G=Nt(D,ut),ut}});return G?yield G:oe.authToken})).apply(this,arguments)}function rt(D,A){return qe.apply(this,arguments)}function qe(){return(qe=(0,k.Z)(function*(D,A){let G=yield mt(D.appConfig);for(;1===G.authToken.requestStatus;)yield Ie(100),G=yield mt(D.appConfig);const oe=G.authToken;return 0===oe.requestStatus?At(D,A):oe})).apply(this,arguments)}function mt(D){return ln(D,A=>{if(!en(A))throw H.create("not-registered");return function(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(A.authToken)?Object.assign(Object.assign({},A),{authToken:{requestStatus:0}}):A})}function Nt(D,A){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,k.Z)(function*(D,A){try{const G=yield pr(D,A),oe=Object.assign(Object.assign({},A),{authToken:G});return yield Un(D.appConfig,oe),G}catch(G){if(!q(G)||401!==G.customData.serverCode&&404!==G.customData.serverCode){const oe=Object.assign(Object.assign({},A),{authToken:{requestStatus:0}});yield Un(D.appConfig,oe)}else yield fn(D.appConfig);throw G}})).apply(this,arguments)}function en(D){return void 0!==D&&2===D.registrationStatus}function fe(D){return 2===D.requestStatus&&!function(D){const A=Date.now();return A<D.creationTime||D.creationTime+D.expiresIn<A+36e5}(D)}function ge(D){const A={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:A})}function te(){return(te=(0,k.Z)(function*(D){const A=D,{installationEntry:G,registrationPromise:oe}=yield fr(A);return oe?oe.catch(console.error):At(A).catch(console.error),G.fid})).apply(this,arguments)}function Se(){return(Se=(0,k.Z)(function*(D,A=!1){const G=D;return yield Xe(G),(yield At(G,A)).token})).apply(this,arguments)}function Xe(D){return Et.apply(this,arguments)}function Et(){return(Et=(0,k.Z)(function*(D){const{registrationPromise:A}=yield fr(D);A&&(yield A)})).apply(this,arguments)}function zt(D){return H.create("missing-app-config-values",{valueName:D})}const $n="installations";(0,Q._registerComponent)(new W.wA($n,D=>{const A=D.getProvider("app").getImmediate();return{app:A,appConfig:function(D){if(!D||!D.options)throw zt("App Configuration");if(!D.name)throw zt("App Name");const A=["projectId","apiKey","appId"];for(const G of A)if(!D.options[G])throw zt(G);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(A),heartbeatServiceProvider:(0,Q._getProvider)(A,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,Q._registerComponent)(new W.wA("installations-internal",D=>{const A=D.getProvider("app").getImmediate(),G=(0,Q._getProvider)(A,$n).getImmediate();return{getId:()=>function(D){return te.apply(this,arguments)}(G),getToken:De=>function(D){return Se.apply(this,arguments)}(G,De)}},"PRIVATE")),(0,Q.registerVersion)(L,U),(0,Q.registerVersion)(L,U,"esm2017");const An="@firebase/remote-config",Yn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class dl{constructor(A,G,oe,De){this.client=A,this.storage=G,this.storageCache=oe,this.logger=De}isCachedDataFresh(A,G){if(!G)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const oe=Date.now()-G,De=oe<=A;return this.logger.debug(`Config fetch cache check. Cache age millis: ${oe}. Cache max age millis (minimumFetchIntervalMillis setting): ${A}. Is cache hit: ${De}.`),De}fetch(A){var G=this;return(0,k.Z)(function*(){const[oe,De]=yield Promise.all([G.storage.getLastSuccessfulFetchTimestampMillis(),G.storage.getLastSuccessfulFetchResponse()]);if(De&&G.isCachedDataFresh(A.cacheMaxAgeMillis,oe))return De;A.eTag=De&&De.eTag;const Ne=yield G.client.fetch(A),Ke=[G.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ne.status&&Ke.push(G.storage.setLastSuccessfulFetchResponse(Ne)),yield Promise.all(Ke),Ne})()}}function bi(D=navigator){return D.languages&&D.languages[0]||D.language}class us{constructor(A,G,oe,De,Ne,Ke){this.firebaseInstallations=A,this.sdkVersion=G,this.namespace=oe,this.projectId=De,this.apiKey=Ne,this.appId=Ke}fetch(A){var G=this;return(0,k.Z)(function*(){const[oe,De]=yield Promise.all([G.firebaseInstallations.getId(),G.firebaseInstallations.getToken()]),Ke=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${G.projectId}/namespaces/${G.namespace}:fetch?key=${G.apiKey}`,ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":A.eTag||"*"},kt={sdk_version:G.sdkVersion,app_instance_id:oe,app_instance_id_token:De,app_id:G.appId,language_code:bi()},Ut={method:"POST",headers:ut,body:JSON.stringify(kt)},pn=fetch(Ke,Ut),Ht=new Promise((Ua,Ls)=>{A.signal.addEventListener(()=>{const ea=new Error("The operation was aborted.");ea.name="AbortError",Ls(ea)})});let Mr;try{yield Promise.race([pn,Ht]),Mr=yield pn}catch(Ua){let Ls="fetch-client-network";throw"AbortError"===Ua.name&&(Ls="fetch-timeout"),Yn.create(Ls,{originalErrorMessage:Ua.message})}let Rr=Mr.status;const Il=Mr.headers.get("ETag")||void 0;let id,eo;if(200===Mr.status){let Ua;try{Ua=yield Mr.json()}catch(Ls){throw Yn.create("fetch-client-parse",{originalErrorMessage:Ls.message})}id=Ua.entries,eo=Ua.state}if("INSTANCE_STATE_UNSPECIFIED"===eo?Rr=500:"NO_CHANGE"===eo?Rr=304:("NO_TEMPLATE"===eo||"EMPTY_CONFIG"===eo)&&(id={}),304!==Rr&&200!==Rr)throw Yn.create("fetch-status",{httpStatus:Rr});return{status:Rr,eTag:Il,config:id}})()}}class yh{constructor(A,G){this.client=A,this.storage=G}fetch(A){var G=this;return(0,k.Z)(function*(){const oe=(yield G.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return G.attemptFetch(A,oe)})()}attemptFetch(A,{throttleEndTimeMillis:G,backoffCount:oe}){var De=this;return(0,k.Z)(function*(){yield function(D,A){return new Promise((G,oe)=>{const De=Math.max(A-Date.now(),0),Ne=setTimeout(G,De);D.addEventListener(()=>{clearTimeout(Ne),oe(Yn.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}(A.signal,G);try{const Ne=yield De.client.fetch(A);return yield De.storage.deleteThrottleMetadata(),Ne}catch(Ne){if(!function(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const A=Number(D.customData.httpStatus);return 429===A||500===A||503===A||504===A}(Ne))throw Ne;const Ke={throttleEndTimeMillis:Date.now()+(0,ie.$s)(oe),backoffCount:oe+1};return yield De.storage.setThrottleMetadata(Ke),De.attemptFetch(A,Ke)}})()}}class vh{constructor(A,G,oe,De,Ne){this.app=A,this._client=G,this._storageCache=oe,this._storage=De,this._logger=Ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ru(D,A){const G=D.target.error||void 0;return Yn.create(A,{originalErrorMessage:G&&G.message})}const bo="app_namespace_store";class wh{constructor(A,G,oe,De=function(){return new Promise((D,A)=>{try{const G=indexedDB.open("firebase_remote_config",1);G.onerror=oe=>{A(Ru(oe,"storage-open"))},G.onsuccess=oe=>{D(oe.target.result)},G.onupgradeneeded=oe=>{const De=oe.target.result;switch(oe.oldVersion){case 0:De.createObjectStore(bo,{keyPath:"compositeKey"})}}}catch(G){A(Yn.create("storage-open",{originalErrorMessage:G}))}})}()){this.appId=A,this.appName=G,this.namespace=oe,this.openDbPromise=De}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(A){return this.set("last_fetch_status",A)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(A){return this.set("last_successful_fetch_timestamp_millis",A)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(A){return this.set("last_successful_fetch_response",A)}getActiveConfig(){return this.get("active_config")}setActiveConfig(A){return this.set("active_config",A)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(A){return this.set("active_config_etag",A)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(A){return this.set("throttle_metadata",A)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(A){var G=this;return(0,k.Z)(function*(){const oe=yield G.openDbPromise;return new Promise((De,Ne)=>{const ut=oe.transaction([bo],"readonly").objectStore(bo),kt=G.createCompositeKey(A);try{const Ut=ut.get(kt);Ut.onerror=pn=>{Ne(Ru(pn,"storage-get"))},Ut.onsuccess=pn=>{const Ht=pn.target.result;De(Ht?Ht.value:void 0)}}catch(Ut){Ne(Yn.create("storage-get",{originalErrorMessage:Ut&&Ut.message}))}})})()}set(A,G){var oe=this;return(0,k.Z)(function*(){const De=yield oe.openDbPromise;return new Promise((Ne,Ke)=>{const kt=De.transaction([bo],"readwrite").objectStore(bo),Ut=oe.createCompositeKey(A);try{const pn=kt.put({compositeKey:Ut,value:G});pn.onerror=Ht=>{Ke(Ru(Ht,"storage-set"))},pn.onsuccess=()=>{Ne()}}catch(pn){Ke(Yn.create("storage-set",{originalErrorMessage:pn&&pn.message}))}})})()}delete(A){var G=this;return(0,k.Z)(function*(){const oe=yield G.openDbPromise;return new Promise((De,Ne)=>{const ut=oe.transaction([bo],"readwrite").objectStore(bo),kt=G.createCompositeKey(A);try{const Ut=ut.delete(kt);Ut.onerror=pn=>{Ne(Ru(pn,"storage-delete"))},Ut.onsuccess=()=>{De()}}catch(Ut){Ne(Yn.create("storage-delete",{originalErrorMessage:Ut&&Ut.message}))}})})()}createCompositeKey(A){return[this.appId,this.appName,this.namespace,A].join()}}class u0{constructor(A){this.storage=A}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var A=this;return(0,k.Z)(function*(){const G=A.storage.getLastFetchStatus(),oe=A.storage.getLastSuccessfulFetchTimestampMillis(),De=A.storage.getActiveConfig(),Ne=yield G;Ne&&(A.lastFetchStatus=Ne);const Ke=yield oe;Ke&&(A.lastSuccessfulFetchTimestampMillis=Ke);const ut=yield De;ut&&(A.activeConfig=ut)})()}setLastFetchStatus(A){return this.lastFetchStatus=A,this.storage.setLastFetchStatus(A)}setLastSuccessfulFetchTimestampMillis(A){return this.lastSuccessfulFetchTimestampMillis=A,this.storage.setLastSuccessfulFetchTimestampMillis(A)}setActiveConfig(A){return this.activeConfig=A,this.storage.setActiveConfig(A)}}function d0(){return fl.apply(this,arguments)}function fl(){return(fl=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}(0,Q._registerComponent)(new W.wA("remote-config",function(A,{instanceIdentifier:G}){const oe=A.getProvider("app").getImmediate(),De=A.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Yn.create("registration-window");if(!(0,ie.hl)())throw Yn.create("indexed-db-unavailable");const{projectId:Ne,apiKey:Ke,appId:ut}=oe.options;if(!Ne)throw Yn.create("registration-project-id");if(!Ke)throw Yn.create("registration-api-key");if(!ut)throw Yn.create("registration-app-id");const kt=new wh(ut,oe.name,G=G||"firebase"),Ut=new u0(kt),pn=new ee.Yd(An);pn.logLevel=ee.in.ERROR;const Ht=new us(De,Q.SDK_VERSION,G,Ne,Ke,ut),Mr=new yh(Ht,kt),Rr=new dl(Mr,kt,Ut,pn),Il=new vh(oe,Rr,Ut,kt,pn);return function(D){const A=(0,ie.m9)(D);A._initializePromise||(A._initializePromise=A._storageCache.loadFromStorage().then(()=>{A._isInitializationComplete=!0}))}(Il),Il},"PUBLIC").setMultipleInstances(!0)),(0,Q.registerVersion)(An,"0.3.7"),(0,Q.registerVersion)(An,"0.3.7","esm2017");const Eh="/firebase-messaging-sw.js",Ca="/firebase-cloud-messaging-push-scope",Tp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ku="google.c.a.c_id",Zs="google.c.a.c_l",pl="google.c.a.ts",lr="google.c.a.e";var Ea=(()=>{return(D=Ea||(Ea={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Ea;var D})();function Fr(D){const A=new Uint8Array(D);return btoa(String.fromCharCode(...A)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xh(D){const G=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),oe=atob(G),De=new Uint8Array(oe.length);for(let Ne=0;Ne<oe.length;++Ne)De[Ne]=oe.charCodeAt(Ne);return De}const xa="fcm_token_details_db",gl="fcm_token_object_Store";function h0(D){return fi.apply(this,arguments)}function fi(){return(fi=(0,k.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ne=>Ne.name).includes(xa))return null;let A=null;return(yield(0,ie.X3)(xa,5,function(){var oe=(0,k.Z)(function*(De,Ne,Ke,ut){var kt;if(Ne<2||!De.objectStoreNames.contains(gl))return;const Ut=ut.objectStore(gl),pn=yield Ut.index("fcmSenderId").get(D);if(yield Ut.clear(),pn)if(2===Ne){const Ht=pn;if(!Ht.auth||!Ht.p256dh||!Ht.endpoint)return;A={token:Ht.fcmToken,createTime:null!==(kt=Ht.createTime)&&void 0!==kt?kt:Date.now(),subscriptionOptions:{auth:Ht.auth,p256dh:Ht.p256dh,endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:"string"==typeof Ht.vapidKey?Ht.vapidKey:Fr(Ht.vapidKey)}}}else if(3===Ne){const Ht=pn;A={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Fr(Ht.auth),p256dh:Fr(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Fr(Ht.vapidKey)}}}else if(4===Ne){const Ht=pn;A={token:Ht.fcmToken,createTime:Ht.createTime,subscriptionOptions:{auth:Fr(Ht.auth),p256dh:Fr(Ht.p256dh),endpoint:Ht.endpoint,swScope:Ht.swScope,vapidKey:Fr(Ht.vapidKey)}}}});return function(De,Ne,Ke,ut){return oe.apply(this,arguments)}}())).close(),yield(0,ie.Lj)(xa),yield(0,ie.Lj)("fcm_vapid_details_db"),yield(0,ie.Lj)("undefined"),Pu(A)?A:null})).apply(this,arguments)}function Pu(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:A}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof A.auth&&A.auth.length>0&&"string"==typeof A.p256dh&&A.p256dh.length>0&&"string"==typeof A.endpoint&&A.endpoint.length>0&&"string"==typeof A.swScope&&A.swScope.length>0&&"string"==typeof A.vapidKey&&A.vapidKey.length>0}const Vi="firebase-messaging-store";let mc=null;function Ou(){return mc||(mc=(0,ie.X3)("firebase-messaging-database",1,(D,A)=>{switch(A){case 0:D.createObjectStore(Vi)}})),mc}function Gn(D){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,k.Z)(function*(D){const A=Lu(D),oe=yield(yield Ou()).transaction(Vi).objectStore(Vi).get(A);if(oe)return oe;{const De=yield h0(D.appConfig.senderId);if(De)return yield Ns(D,De),De}})).apply(this,arguments)}function Ns(D,A){return hs.apply(this,arguments)}function hs(){return(hs=(0,k.Z)(function*(D,A){const G=Lu(D),De=(yield Ou()).transaction(Vi,"readwrite");return yield De.objectStore(Vi).put(A,G),yield De.complete,A})).apply(this,arguments)}function Fn(D){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,k.Z)(function*(D){const A=Lu(D),oe=(yield Ou()).transaction(Vi,"readwrite");yield oe.objectStore(Vi).delete(A),yield oe.complete})).apply(this,arguments)}function Lu({appConfig:D}){return D.appId}const Ln=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vu(D,A){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,k.Z)(function*(D,A){const G=yield xr(D),oe=yc(A),De={method:"POST",headers:G,body:JSON.stringify(oe)};let Ne;try{Ne=yield(yield fetch(wo(D.appConfig),De)).json()}catch(Ke){throw Ln.create("token-subscribe-failed",{errorInfo:Ke})}if(Ne.error)throw Ln.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Ln.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function Ta(D,A){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,k.Z)(function*(D,A){const G=yield xr(D),oe=yc(A.subscriptionOptions),De={method:"PATCH",headers:G,body:JSON.stringify(oe)};let Ne;try{Ne=yield(yield fetch(`${wo(D.appConfig)}/${A.token}`,De)).json()}catch(Ke){throw Ln.create("token-update-failed",{errorInfo:Ke})}if(Ne.error)throw Ln.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw Ln.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Ih(D,A){return ml.apply(this,arguments)}function ml(){return(ml=(0,k.Z)(function*(D,A){const oe={method:"DELETE",headers:yield xr(D)};try{const Ne=yield(yield fetch(`${wo(D.appConfig)}/${A}`,oe)).json();if(Ne.error)throw Ln.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(De){throw Ln.create("token-unsubscribe-failed",{errorInfo:De})}})).apply(this,arguments)}function wo({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function xr(D){return _l.apply(this,arguments)}function _l(){return(_l=(0,k.Z)(function*({appConfig:D,installations:A}){const G=yield A.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${G}`})})).apply(this,arguments)}function yc({p256dh:D,auth:A,endpoint:G,vapidKey:oe}){const De={web:{endpoint:G,auth:A,p256dh:D}};return oe!==Tp&&(De.web.applicationPubKey=oe),De}const Pt=6048e5;function vc(D){return bc.apply(this,arguments)}function bc(){return(bc=(0,k.Z)(function*(D){const A=yield rn(D.swRegistration,D.vapidKey),G={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:A.endpoint,auth:Fr(A.getKey("auth")),p256dh:Fr(A.getKey("p256dh"))},oe=yield Gn(D.firebaseDependencies);if(oe){if(Kn(oe.subscriptionOptions,G))return Date.now()>=oe.createTime+Pt?Hu(D,{token:oe.token,createTime:Date.now(),subscriptionOptions:G}):oe.token;try{yield Ih(D.firebaseDependencies,oe.token)}catch(De){console.warn(De)}return Co(D.firebaseDependencies,G)}return Co(D.firebaseDependencies,G)})).apply(this,arguments)}function Bu(D){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,k.Z)(function*(D){const A=yield Gn(D.firebaseDependencies);A&&(yield Ih(D.firebaseDependencies,A.token),yield Fn(D.firebaseDependencies));const G=yield D.swRegistration.pushManager.getSubscription();return!G||G.unsubscribe()})).apply(this,arguments)}function Hu(D,A){return yl.apply(this,arguments)}function yl(){return(yl=(0,k.Z)(function*(D,A){try{const G=yield Ta(D.firebaseDependencies,A),oe=Object.assign(Object.assign({},A),{token:G,createTime:Date.now()});return yield Ns(D.firebaseDependencies,oe),G}catch(G){throw yield Bu(D),G}})).apply(this,arguments)}function Co(D,A){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,k.Z)(function*(D,A){const oe={token:yield Vu(D,A),createTime:Date.now(),subscriptionOptions:A};return yield Ns(D,oe),oe.token})).apply(this,arguments)}function rn(D,A){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,k.Z)(function*(D,A){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xh(A)})})).apply(this,arguments)}function Kn(D,A){return A.vapidKey===D.vapidKey&&A.endpoint===D.endpoint&&A.auth===D.auth&&A.p256dh===D.p256dh}function vl(D){const A={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function(D,A){if(!A.notification)return;D.notification={};const G=A.notification.title;G&&(D.notification.title=G);const oe=A.notification.body;oe&&(D.notification.body=oe);const De=A.notification.image;De&&(D.notification.image=De)}(A,D),function(D,A){!A.data||(D.data=A.data)}(A,D),function(D,A){if(!A.fcmOptions)return;D.fcmOptions={};const G=A.fcmOptions.link;G&&(D.fcmOptions.link=G);const oe=A.fcmOptions.analytics_label;oe&&(D.fcmOptions.analyticsLabel=oe)}(A,D),A}function bl(D){return"object"==typeof D&&!!D&&ku in D}function $u(D,A){const G=[];for(let oe=0;oe<D.length;oe++)G.push(D.charAt(oe)),oe<A.length&&G.push(A.charAt(oe));return G.join("")}function Eo(D){return Ln.create("missing-app-config-values",{valueName:D})}$u("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$u("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wc{constructor(A,G,oe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const De=function(D){if(!D||!D.options)throw Eo("App Configuration Object");if(!D.name)throw Eo("App Name");const A=["projectId","apiKey","appId","messagingSenderId"],{options:G}=D;for(const oe of A)if(!G[oe])throw Eo(oe);return{appName:D.name,projectId:G.projectId,apiKey:G.apiKey,appId:G.appId,senderId:G.messagingSenderId}}(A);this.firebaseDependencies={app:A,appConfig:De,installations:G,analyticsProvider:oe}}_delete(){return Promise.resolve()}}function _r(D){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,k.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Eh,{scope:Ca}),D.swRegistration.update().catch(()=>{})}catch(A){throw Ln.create("failed-service-worker-registration",{browserErrorMessage:A.message})}})).apply(this,arguments)}function ju(D,A){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,k.Z)(function*(D,A){if(!A&&!D.swRegistration&&(yield _r(D)),A||!D.swRegistration){if(!(A instanceof ServiceWorkerRegistration))throw Ln.create("invalid-sw-registration");D.swRegistration=A}})).apply(this,arguments)}function Hi(D,A){return wl.apply(this,arguments)}function wl(){return(wl=(0,k.Z)(function*(D,A){A?D.vapidKey=A:D.vapidKey||(D.vapidKey=Tp)})).apply(this,arguments)}function Sa(){return(Sa=(0,k.Z)(function*(D,A){if(!navigator)throw Ln.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ln.create("permission-blocked");return yield Hi(D,null==A?void 0:A.vapidKey),yield ju(D,null==A?void 0:A.serviceWorkerRegistration),vc(D)})).apply(this,arguments)}function Ip(D,A,G){return zo.apply(this,arguments)}function zo(){return(zo=(0,k.Z)(function*(D,A,G){const oe=Wu(A);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(oe,{message_id:G[ku],message_name:G[Zs],message_time:G[pl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wu(D){switch(D){case Ea.NOTIFICATION_CLICKED:return"notification_open";case Ea.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xo(){return(xo=(0,k.Z)(function*(D,A){const G=A.data;if(!G.isFirebaseMessaging)return;D.onMessageHandler&&G.messageType===Ea.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(vl(G)):D.onMessageHandler.next(vl(G)));const oe=G.data;bl(oe)&&"1"===oe[lr]&&(yield Ip(D,G.messageType,oe))})).apply(this,arguments)}const Cl="@firebase/messaging";function zu(){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,Q._registerComponent)(new W.wA("messaging",D=>{const A=new wc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",G=>function(D,A){return xo.apply(this,arguments)}(A,G)),A},"PUBLIC")),(0,Q._registerComponent)(new W.wA("messaging-internal",D=>{const A=D.getProvider("messaging").getImmediate();return{getToken:oe=>function(D,A){return Sa.apply(this,arguments)}(A,oe)}},"PRIVATE")),(0,Q.registerVersion)(Cl,"0.9.12"),(0,Q.registerVersion)(Cl,"0.9.12","esm2017");const Ec="analytics",Qu="firebase_id",xc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ys="https://www.googletagmanager.com/gtag/js",Dr=new ee.Yd("@firebase/analytics");function Ra(D){return Promise.all(D.map(A=>A.catch(G=>G)))}function Nh(D,A){const G=document.createElement("script");G.src=`${Ys}?l=${D}&id=${A}`,G.async=!0,document.head.appendChild(G)}function Ks(D,A,G,oe,De,Ne){return Do.apply(this,arguments)}function Do(){return(Do=(0,k.Z)(function*(D,A,G,oe,De,Ne){const Ke=oe[De];try{if(Ke)yield A[Ke];else{const kt=(yield Ra(G)).find(Ut=>Ut.measurementId===De);kt&&(yield A[kt.appId])}}catch(ut){Dr.error(ut)}D("config",De,Ne)})).apply(this,arguments)}function f0(D,A,G,oe,De){return To.apply(this,arguments)}function To(){return(To=(0,k.Z)(function*(D,A,G,oe,De){try{let Ne=[];if(De&&De.send_to){let Ke=De.send_to;Array.isArray(Ke)||(Ke=[Ke]);const ut=yield Ra(G);for(const kt of Ke){const Ut=ut.find(Ht=>Ht.measurementId===kt),pn=Ut&&A[Ut.appId];if(!pn){Ne=[];break}Ne.push(pn)}}0===Ne.length&&(Ne=Object.values(A)),yield Promise.all(Ne),D("event",oe,De||{})}catch(Ne){Dr.error(Ne)}})).apply(this,arguments)}function Rp(){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(Ys))return A;return null}const es=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Rs=new class{constructor(A={},G=1e3){this.throttleMetadata=A,this.intervalMillis=G}getThrottleMetadata(A){return this.throttleMetadata[A]}setThrottleMetadata(A,G){this.throttleMetadata[A]=G}deleteThrottleMetadata(A){delete this.throttleMetadata[A]}};function Xu(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Pp(D){return xl.apply(this,arguments)}function xl(){return(xl=(0,k.Z)(function*(D){var A;const{appId:G,apiKey:oe}=D,De={method:"GET",headers:Xu(oe)},Ne=xc.replace("{app-id}",G),Ke=yield fetch(Ne,De);if(200!==Ke.status&&304!==Ke.status){let ut="";try{const kt=yield Ke.json();(null===(A=kt.error)||void 0===A?void 0:A.message)&&(ut=kt.error.message)}catch(kt){}throw es.create("config-fetch-failed",{httpStatus:Ke.status,responseMessage:ut})}return Ke.json()})).apply(this,arguments)}function Pa(D){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,k.Z)(function*(D,A=Rs,G){const{appId:oe,apiKey:De,measurementId:Ne}=D.options;if(!oe)throw es.create("no-app-id");if(!De){if(Ne)return{measurementId:Ne,appId:oe};throw es.create("no-api-key")}const Ke=A.getThrottleMetadata(oe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ut=new Rh;return setTimeout((0,k.Z)(function*(){ut.abort()}),void 0!==G?G:6e4),ts({appId:oe,apiKey:De,measurementId:Ne},Ke,ut,A)})).apply(this,arguments)}function ts(D,A,G){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,k.Z)(function*(D,{throttleEndTimeMillis:A,backoffCount:G},oe,De=Rs){const{appId:Ne,measurementId:Ke}=D;try{yield Tc(oe,A)}catch(ut){if(Ke)return Dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${ut.message}]`),{appId:Ne,measurementId:Ke};throw ut}try{const ut=yield Pp(D);return De.deleteThrottleMetadata(Ne),ut}catch(ut){if(!xv(ut)){if(De.deleteThrottleMetadata(Ne),Ke)return Dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ke} provided in the "measurementId" field in the local Firebase config. [${ut.message}]`),{appId:Ne,measurementId:Ke};throw ut}const kt=503===Number(ut.customData.httpStatus)?(0,ie.$s)(G,De.intervalMillis,30):(0,ie.$s)(G,De.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+kt,backoffCount:G+1};return De.setThrottleMetadata(Ne,Ut),Dr.debug(`Calling attemptFetch again in ${kt} millis`),ts(D,Ut,oe,De)}})).apply(this,arguments)}function Tc(D,A){return new Promise((G,oe)=>{const De=Math.max(A-Date.now(),0),Ne=setTimeout(G,De);D.addEventListener(()=>{clearTimeout(Ne),oe(es.create("fetch-throttle",{throttleEndTimeMillis:A}))})})}function xv(D){if(!(D instanceof ie.ZR&&D.customData))return!1;const A=Number(D.customData.httpStatus);return 429===A||500===A||503===A||504===A}class Rh{constructor(){this.listeners=[]}addEventListener(A){this.listeners.push(A)}abort(){this.listeners.forEach(A=>A())}}function Op(){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,k.Z)(function*(){if(!(0,ie.hl)())return Dr.warn(es.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(D){return Dr.warn(es.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Ko(){return(Ko=(0,k.Z)(function*(D,A,G,oe,De,Ne,Ke){var ut;const kt=Pa(D);kt.then(Rr=>{G[Rr.measurementId]=Rr.appId,D.options.measurementId&&Rr.measurementId!==D.options.measurementId&&Dr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Rr=>Dr.error(Rr)),A.push(kt);const Ut=Op().then(Rr=>{if(Rr)return oe.getId()}),[pn,Ht]=yield Promise.all([kt,Ut]);Rp()||Nh(Ne,pn.measurementId),De("js",new Date);const Mr=null!==(ut=null==Ke?void 0:Ke.config)&&void 0!==ut?ut:{};return Mr.origin="firebase",Mr.update=!0,null!=Ht&&(Mr[Qu]=Ht),De("config",pn.measurementId,Mr),pn.measurementId})).apply(this,arguments)}class Dl{constructor(A){this.app=A}_delete(){return delete un[this.app.options.appId],Promise.resolve()}}let un={},xt=[];const Mn={};let Qo,ks,Tl="dataLayer",yr=!1;function Io(D,A,G){!function(){const D=[];if((0,ie.ru)()&&D.push("This is a browser extension environment."),(0,ie.zI)()||D.push("Cookies are not available."),D.length>0){const A=D.map((oe,De)=>`(${De+1}) ${oe}`).join(" "),G=es.create("invalid-analytics-context",{errorInfo:A});Dr.warn(G.message)}}();const oe=D.options.appId;if(!oe)throw es.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw es.create("no-api-key");Dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=un[oe])throw es.create("already-exists",{id:oe});if(!yr){!function(D){let A=[];Array.isArray(window[D])?A=window[D]:window[D]=A}(Tl);const{wrappedGtag:Ne,gtagCore:Ke}=function(D,A,G,oe,De){let Ne=function(...Ke){window[oe].push(arguments)};return window[De]&&"function"==typeof window[De]&&(Ne=window[De]),window[De]=function(D,A,G,oe){function Ne(){return(Ne=(0,k.Z)(function*(Ke,ut,kt){try{"event"===Ke?yield f0(D,A,G,ut,kt):"config"===Ke?yield Ks(D,A,G,oe,ut,kt):D("set",ut)}catch(Ut){Dr.error(Ut)}})).apply(this,arguments)}return function(Ke,ut,kt){return Ne.apply(this,arguments)}}(Ne,D,A,G),{gtagCore:Ne,wrappedGtag:window[De]}}(un,xt,Mn,Tl,"gtag");ks=Ne,Qo=Ke,yr=!0}return un[oe]=function(D,A,G,oe,De,Ne,Ke){return Ko.apply(this,arguments)}(D,xt,Mn,A,Qo,Tl,G),new Dl(D)}function cr(){return(cr=(0,k.Z)(function*(D,A,G,oe,De){if(De&&De.global)D("event",G,oe);else{const Ne=yield A;D("event",G,Object.assign(Object.assign({},oe),{send_to:Ne}))}})).apply(this,arguments)}function gi(){return $i.apply(this,arguments)}function $i(){return($i=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(D){return!1}})).apply(this,arguments)}const Jn="@firebase/analytics";(0,Q._registerComponent)(new W.wA(Ec,(A,{options:G})=>Io(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),G),"PUBLIC")),(0,Q._registerComponent)(new W.wA("analytics-internal",function(A){try{const G=A.getProvider(Ec).getImmediate();return{logEvent:(oe,De,Ne)=>function(D,A,G,oe){D=(0,ie.m9)(D),function(D,A,G,oe,De){return cr.apply(this,arguments)}(ks,un[D.app.options.appId],A,G,oe).catch(De=>Dr.error(De))}(G,oe,De,Ne)}}catch(G){throw es.create("interop-component-reg-failed",{reason:G})}},"PRIVATE")),(0,Q.registerVersion)(Jn,"0.7.8"),(0,Q.registerVersion)(Jn,"0.7.8","esm2017");var wi=O(7771),Tv=O(3637),Vp=O(8307),Xo=O(9746),La=O(2639);const g0=new a.GfV("7.3.0"),Nc="__angularfire_symbol__analyticsIsSupportedValue",sr="__angularfire_symbol__analyticsIsSupported",nd="__angularfire_symbol__remoteConfigIsSupportedValue",No="__angularfire_symbol__remoteConfigIsSupported",Mo="__angularfire_symbol__messagingIsSupportedValue",vr="__angularfire_symbol__messagingIsSupported";function Ci(D,A,G){if(A){if(1===A.length)return A[0];const Ne=A.filter(Ke=>Ke.app===G);if(1===Ne.length)return Ne[0]}return G.container.getProvider(D).getImmediate({optional:!0})}globalThis[sr]||(globalThis[sr]=gi().then(D=>globalThis[Nc]=D).catch(()=>globalThis[Nc]=!1)),globalThis[vr]||(globalThis[vr]=zu().then(D=>globalThis[Mo]=D).catch(()=>globalThis[Mo]=!1)),globalThis[No]||(globalThis[No]=d0().then(D=>globalThis[nd]=D).catch(()=>globalThis[nd]=!1));const Os=(D,A)=>{const G=A?[A]:(0,M.C6)(),oe=[];return G.forEach(De=>{De.container.getProvider(D).instances.forEach(Ke=>{oe.includes(Ke)||oe.push(Ke)})}),oe};function Fs(){}class Ro{constructor(A,G=wi.N){this.zone=A,this.delegate=G}now(){return this.delegate.now()}schedule(A,G,oe){const De=this.zone;return this.delegate.schedule(function(Ke){De.runGuarded(()=>{A.apply(this,[Ke])})},G,oe)}}class ko{constructor(A){this.zone=A,this.task=null}call(A,G){const oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fs,{},Fs,Fs)),G.pipe((0,Vp.b)({next:oe,complete:oe,error:oe})).subscribe(A).add(oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Lh=(()=>{class D{constructor(G){this.ngZone=G,this.outsideAngular=G.runOutsideAngular(()=>new Ro(Zone.current)),this.insideAngular=G.run(()=>new Ro(Zone.current,Tv.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(G){return new(G||D)(a.LFG(a.R0b))},D.\u0275prov=a.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Xs(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Up(D){return D.pipe((0,Xo.QV)(Xs().outsideAngular))}function Ir(D){return Xs(),function(D){return function(G){return(G=G.lift(new ko(D.ngZone))).pipe((0,La.R)(D.outsideAngular),(0,Xo.QV)(D.insideAngular))}}(Xs())(D)}},982:(Ve,me,O)=>{"use strict";O.d(me,{$:()=>Gu,A:()=>Fe,E:()=>Nu,G:()=>hl,I:()=>Fr,K:()=>Vt,L:()=>Ns,M:()=>Lu,N:()=>_c,P:()=>Ke,Q:()=>Ln,R:()=>Va,T:()=>Zo,U:()=>Lr,V:()=>Ih,W:()=>yc,X:()=>pi,Y:()=>bl,Z:()=>Ah,_:()=>Bi,a:()=>yr,a0:()=>Ip,a1:()=>Wu,a2:()=>xo,a3:()=>qu,a4:()=>Sh,a5:()=>zu,a6:()=>Yu,a7:()=>Ku,a8:()=>Ap,a9:()=>Cv,aA:()=>ja,aB:()=>jp,aC:()=>jn,aG:()=>Io,aJ:()=>Ms,aa:()=>Ec,ab:()=>Np,ae:()=>Dr,af:()=>Nh,ag:()=>Mp,aj:()=>Uu,ak:()=>Ev,am:()=>Tc,an:()=>Ko,ao:()=>Or,ap:()=>Un,aq:()=>qo,ar:()=>hi,as:()=>an,at:()=>D0,au:()=>Oc,av:()=>Tn,aw:()=>ze,ax:()=>fn,ay:()=>cs,az:()=>Sv,b:()=>Qo,c:()=>id,d:()=>ea,e:()=>Ua,f:()=>$a,g:()=>sd,h:()=>Iv,i:()=>Vp,j:()=>Av,k:()=>Vs,l:()=>Ba,m:()=>T0,o:()=>ht,r:()=>D,s:()=>Ir,u:()=>De,z:()=>Jt});var a=O(8239),M=O(3854),k=O(8026);function ee(w,g){var y={};for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&g.indexOf(E)<0&&(y[E]=w[E]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var F=0;for(E=Object.getOwnPropertySymbols(w);F<E.length;F++)g.indexOf(E[F])<0&&Object.prototype.propertyIsEnumerable.call(w,E[F])&&(y[E[F]]=w[E[F]])}return y}var xe=O(5422),Ie=O(3910);const ht={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Fe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Jt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Mt=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},yt=new M.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xt=new xe.Yd("@firebase/auth");function qt(w,...g){Xt.logLevel<=xe.in.ERROR&&Xt.error(`Auth (${k.SDK_VERSION}): ${w}`,...g)}function an(w,...g){throw Zn(w,...g)}function Tn(w,...g){return Zn(w,...g)}function er(w,g,y){const E=Object.assign(Object.assign({},Mt()),{[g]:y});return new M.LL("auth","Firebase",E).create(g,{appName:w.name})}function Nn(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&an(w,"argument-error"),er(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zn(w,...g){if("string"!=typeof w){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return yt.create(w,...g)}function ze(w,g,...y){if(!w)throw Zn(g,...y)}function zn(w){const g="INTERNAL ASSERTION FAILED: "+w;throw qt(g),new Error(g)}function Un(w,g){w||zn(g)}const pt=new Map;function fn(w){Un(w instanceof Function,"Expected a class definition");let g=pt.get(w);return g?(Un(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,pt.set(w,g),g)}function tr(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function fr(){return"http:"===ar()||"https:"===ar()}function ar(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class En{constructor(g,y){this.shortDelay=g,this.longDelay=y,Un(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,M.uI)()||(0,M.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(fr()||(0,M.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function it(w,g){Un(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Dt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Nr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qr=new En(3e4,6e4);function _n(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function St(w,g,y,E){return pr.apply(this,arguments)}function pr(){return(pr=(0,a.Z)(function*(w,g,y,E,F={}){return nr(w,F,(0,a.Z)(function*(){let $={},ye={};E&&("GET"===g?ye=E:$={body:JSON.stringify(E)});const Ge=(0,M.xO)(Object.assign({key:w.config.apiKey},ye)).slice(1),ft=yield w._getAdditionalHeaders();return ft["Content-Type"]="application/json",w.languageCode&&(ft["X-Firebase-Locale"]=w.languageCode),Dt.fetch()(rt(w,w.config.apiHost,y,Ge),Object.assign({method:g,headers:ft,referrerPolicy:"no-referrer"},$))}))})).apply(this,arguments)}function nr(w,g,y){return cn.apply(this,arguments)}function cn(){return(cn=(0,a.Z)(function*(w,g,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},Nr),g);try{const F=new qe(w),$=yield Promise.race([y(),F.promise]);F.clearNetworkTimeout();const ye=yield $.json();if("needConfirmation"in ye)throw mt(w,"account-exists-with-different-credential",ye);if($.ok&&!("errorMessage"in ye))return ye;{const Ge=$.ok?ye.errorMessage:ye.error.message,[ft,et]=Ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ft)throw mt(w,"credential-already-in-use",ye);if("EMAIL_EXISTS"===ft)throw mt(w,"email-already-in-use",ye);const Tt=E[ft]||ft.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw er(w,Tt,et);an(w,Tt)}}catch(F){if(F instanceof M.ZR)throw F;an(w,"network-request-failed")}})).apply(this,arguments)}function At(w,g,y,E){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,a.Z)(function*(w,g,y,E,F={}){const $=yield St(w,g,y,E,F);return"mfaPendingCredential"in $&&an(w,"multi-factor-auth-required",{_serverResponse:$}),$})).apply(this,arguments)}function rt(w,g,y,E){const F=`${g}${y}?${E}`;return w.config.emulator?it(w.config,F):`${w.config.apiScheme}://${F}`}class qe{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Tn(this.auth,"network-request-failed")),qr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mt(w,g,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const F=Tn(w,g,E);return F.customData._tokenResponse=y,F}function Lt(){return(Lt=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function en(w,g){return fe.apply(this,arguments)}function fe(){return(fe=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ae(w,g){return ge.apply(this,arguments)}function ge(){return(ge=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Le(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function se(){return(se=(0,a.Z)(function*(w,g=!1){const y=(0,M.m9)(w),E=yield y.getIdToken(g),F=Xe(E);ze(F&&F.exp&&F.auth_time&&F.iat,y.auth,"internal-error");const $="object"==typeof F.firebase?F.firebase:void 0,ye=null==$?void 0:$.sign_in_provider;return{claims:F,token:E,authTime:Le(Se(F.auth_time)),issuedAtTime:Le(Se(F.iat)),expirationTime:Le(Se(F.exp)),signInProvider:ye||null,signInSecondFactor:(null==$?void 0:$.sign_in_second_factor)||null}})).apply(this,arguments)}function Se(w){return 1e3*Number(w)}function Xe(w){const[g,y,E]=w.split(".");if(void 0===g||void 0===y||void 0===E)return qt("JWT malformed, contained fewer than 3 sections"),null;try{const F=(0,M.tV)(y);return F?JSON.parse(F):(qt("Failed to decode base64 JWT payload"),null)}catch(F){return qt("Caught error parsing JWT payload as JSON",F),null}}function Rt(w,g){return at.apply(this,arguments)}function at(){return(at=(0,a.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof M.ZR&&tn(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function tn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Hn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const F=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,F)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,a.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class On{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Le(this.lastLoginAt),this.creationTime=Le(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yn(w){return rr.apply(this,arguments)}function rr(){return(rr=(0,a.Z)(function*(w){var g;const y=w.auth,E=yield w.getIdToken(),F=yield Rt(w,ae(y,{idToken:E}));ze(null==F?void 0:F.users.length,y,"internal-error");const $=F.users[0];w._notifyReloadListener($);const ye=(null===(g=$.providerUserInfo)||void 0===g?void 0:g.length)?Fi($.providerUserInfo):[],Ge=$n(w.providerData,ye),Tt=!!w.isAnonymous&&!(w.email&&$.passwordHash||(null==Ge?void 0:Ge.length)),In={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:Ge,metadata:new On($.createdAt,$.lastLoginAt),isAnonymous:Tt};Object.assign(w,In)})).apply(this,arguments)}function zt(){return(zt=(0,a.Z)(function*(w){const g=(0,M.m9)(w);yield yn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function $n(w,g){return[...w.filter(E=>!g.some(F=>F.providerId===E.providerId)),...g]}function Fi(w){return w.map(g=>{var{providerId:y}=g,E=ee(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Er(){return(Er=(0,a.Z)(function*(w,g){const y=yield nr(w,{},(0,a.Z)(function*(){const E=(0,M.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:F,apiKey:$}=w.config,ye=rt(w,F,"/v1/token",`key=${$}`),Ge=yield w._getAdditionalHeaders();return Ge["Content-Type"]="application/x-www-form-urlencoded",Dt.fetch()(ye,{method:"POST",headers:Ge,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Li{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ze(g.idToken,"internal-error"),ze(void 0!==g.idToken,"internal-error"),ze(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=Xe(w);return ze(g,"internal-error"),ze(void 0!==g.exp,"internal-error"),ze(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,a.Z)(function*(){return ze(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,a.Z)(function*(){const{accessToken:F,refreshToken:$,expiresIn:ye}=yield function(w,g){return Er.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(F,$,Number(ye))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:F,expirationTime:$}=y,ye=new Li;return E&&(ze("string"==typeof E,"internal-error",{appName:g}),ye.refreshToken=E),F&&(ze("string"==typeof F,"internal-error",{appName:g}),ye.accessToken=F),$&&(ze("number"==typeof $,"internal-error",{appName:g}),ye.expirationTime=$),ye}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Li,this.toJSON())}_performRefresh(){return zn("not implemented")}}function An(w,g){ze("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Ji{constructor(g){var{uid:y,auth:E,stsTokenManager:F}=g,$=ee(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=F,this.accessToken=F.accessToken,this.displayName=$.displayName||null,this.email=$.email||null,this.emailVerified=$.emailVerified||!1,this.phoneNumber=$.phoneNumber||null,this.photoURL=$.photoURL||null,this.isAnonymous=$.isAnonymous||!1,this.tenantId=$.tenantId||null,this.providerData=$.providerData?[...$.providerData]:[],this.metadata=new On($.createdAt||void 0,$.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,a.Z)(function*(){const E=yield Rt(y,y.stsTokenManager.getToken(y.auth,g));return ze(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function(w){return se.apply(this,arguments)}(this,g)}reload(){return function(w){return zt.apply(this,arguments)}(this)}_assign(g){this!==g&&(ze(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ji(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,a.Z)(function*(){let F=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),F=!0),y&&(yield yn(E)),yield E.auth._persistUserIfCurrent(E),F&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,a.Z)(function*(){const y=yield g.getIdToken();return yield Rt(g,function(w,g){return Lt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,F,$,ye,Ge,ft,et,Tt;const In=null!==(E=y.displayName)&&void 0!==E?E:void 0,Wn=null!==(F=y.email)&&void 0!==F?F:void 0,Cn=null!==($=y.phoneNumber)&&void 0!==$?$:void 0,sa=null!==(ye=y.photoURL)&&void 0!==ye?ye:void 0,fd=null!==(Ge=y.tenantId)&&void 0!==Ge?Ge:void 0,pd=null!==(ft=y._redirectEventId)&&void 0!==ft?ft:void 0,Yp=null!==(et=y.createdAt)&&void 0!==et?et:void 0,Kp=null!==(Tt=y.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Qp,emailVerified:qh,isAnonymous:oa,providerData:Jp,stsTokenManager:kl}=y;ze(Qp&&kl,g,"internal-error");const JC=Li.fromJSON(this.name,kl);ze("string"==typeof Qp,g,"internal-error"),An(In,g.name),An(Wn,g.name),ze("boolean"==typeof qh,g,"internal-error"),ze("boolean"==typeof oa,g,"internal-error"),An(Cn,g.name),An(sa,g.name),An(fd,g.name),An(pd,g.name),An(Yp,g.name),An(Kp,g.name);const Pl=new Ji({uid:Qp,auth:g,email:Wn,emailVerified:qh,displayName:In,isAnonymous:oa,photoURL:sa,phoneNumber:Cn,tenantId:fd,stsTokenManager:JC,createdAt:Yp,lastLoginAt:Kp});return Jp&&Array.isArray(Jp)&&(Pl.providerData=Jp.map(ji=>Object.assign({},ji))),pd&&(Pl._redirectEventId=pd),Pl}static _fromIdTokenResponse(g,y,E=!1){return(0,a.Z)(function*(){const F=new Li;F.updateFromServerResponse(y);const $=new Ji({uid:y.localId,auth:g,stsTokenManager:F,isAnonymous:E});return yield yn($),$})()}}const Vt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(y,E){var F=this;return(0,a.Z)(function*(){F.storage[y]=E})()}_get(y){var E=this;return(0,a.Z)(function*(){const F=E.storage[y];return void 0===F?null:F})()}_remove(y){var E=this;return(0,a.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function cs(w,g,y){return`firebase:${w}:${g}:${y}`}class Yn{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:F,name:$}=this.auth;this.fullUserKey=cs(this.userKey,F.apiKey,$),this.fullPersistenceKey=cs("persistence",F.apiKey,$),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Ji._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,a.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,a.Z)(function*(){if(!y.length)return new Yn(fn(Vt),g,E);const F=(yield Promise.all(y.map(function(){var et=(0,a.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return et.apply(this,arguments)}}()))).filter(et=>et);let $=F[0]||fn(Vt);const ye=cs(E,g.config.apiKey,g.name);let Ge=null;for(const et of y)try{const Tt=yield et._get(ye);if(Tt){const In=Ji._fromJSON(g,Tt);et!==$&&(Ge=In),$=et;break}}catch(Tt){}const ft=F.filter(et=>et._shouldAllowMigration);return $._shouldAllowMigration&&ft.length?($=ft[0],Ge&&(yield $._set(ye,Ge.toJSON())),yield Promise.all(y.map(function(){var et=(0,a.Z)(function*(Tt){if(Tt!==$)try{yield Tt._remove(ye)}catch(In){}});return function(Tt){return et.apply(this,arguments)}}())),new Yn($,g,E)):new Yn($,g,E)})()}}function dc(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Wo(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ba(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(nn(g))return"Blackberry";if(Au(g))return"Webos";if(Zr(g))return"Safari";if((g.includes("chrome/")||_o(g))&&!g.includes("edge/"))return"Chrome";if(hi(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function ba(w=(0,M.z$)()){return/firefox\//i.test(w)}function Zr(w=(0,M.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function _o(w=(0,M.z$)()){return/crios\//i.test(w)}function Wo(w=(0,M.z$)()){return/iemobile/i.test(w)}function hi(w=(0,M.z$)()){return/android/i.test(w)}function nn(w=(0,M.z$)()){return/blackberry/i.test(w)}function Au(w=(0,M.z$)()){return/webos/i.test(w)}function qo(w=(0,M.z$)()){return/iphone|ipad|ipod/i.test(w)}function Or(w=(0,M.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function wa(w=(0,M.z$)()){return qo(w)||hi(w)||Au(w)||nn(w)||/windows phone/i.test(w)||Wo(w)}function Xr(w,g=[]){let y;switch(w){case"Browser":y=dc((0,M.z$)());break;case"Worker":y=`${dc((0,M.z$)())}-${w}`;break;default:y=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${k.SDK_VERSION}/${E}`}class l0{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xi(this),this.idTokenSubscription=new Xi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=fn(y)),this._initializationPromise=this.queue((0,a.Z)(function*(){var F,$;if(!E._deleted&&(E.persistenceManager=yield Yn.create(E,g),!E._deleted)){if(null===(F=E._popupRedirectResolver)||void 0===F?void 0:F._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(ye){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===($=E.currentUser)||void 0===$?void 0:$.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,a.Z)(function*(){var E;let F=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const $=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,ye=null==F?void 0:F._redirectEventId,Ge=yield y.tryRedirectSignIn(g);(!$||$===ye)&&(null==Ge?void 0:Ge.user)&&(F=Ge.user)}return F?F._redirectEventId?(ze(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===F._redirectEventId?y.directlySetCurrentUser(F):y.reloadAndSetCurrentUserOrClear(F)):y.reloadAndSetCurrentUserOrClear(F):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,a.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(F){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,a.Z)(function*(){try{yield yn(g)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){const E=g?(0,M.m9)(g):null;return E&&ze(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){if(!y._deleted)return g&&ze(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,a.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,a.Z)(function*(){yield y.assertedPersistence.setPersistence(fn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new M.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,a.Z)(function*(){const F=yield E.getOrInitRedirectPersistenceManager(y);return null===g?F.removeCurrentUser():F.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,a.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&fn(g)||y._popupRedirectResolver;ze(E,y,"argument-error"),y.redirectPersistenceManager=yield Yn.create(y,[fn(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,a.Z)(function*(){var E,F;return y._isInitialized&&(yield y.queue((0,a.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(F=y.redirectUser)||void 0===F?void 0:F._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,a.Z)(function*(){if(g===y.currentUser)return y.queue((0,a.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,F){if(this._deleted)return()=>{};const $="function"==typeof y?y:y.next.bind(y),ye=this._isInitialized?Promise.resolve():this._initializationPromise;return ze(ye,this,"internal-error"),ye.then(()=>$(this.currentUser)),"function"==typeof y?g.addObserver(y,E,F):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,a.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Xr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,a.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const F=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return F&&(E["X-Firebase-Client"]=F),E})()}}function jn(w){return(0,M.m9)(w)}class Xi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,M.ne)(y=>this.observer=y)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Nu(w,g,y){const E=jn(w);ze(E._canInitEmulator,E,"emulator-config-failed"),ze(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const F=!!(null==y?void 0:y.disableWarnings),$=dl(g),{host:ye,port:Ge}=function(w){const g=dl(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",F=/^(\[[^\]]+\])(:|$)/.exec(E);if(F){const $=F[1];return{host:$,port:us(E.substr($.length+1))}}{const[$,ye]=E.split(":");return{host:$,port:us(ye)}}}(g);E.config.emulator={url:`${$}//${ye}${null===Ge?"":`:${Ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ye,port:Ge,protocol:$.replace(":",""),options:Object.freeze({disableWarnings:F})}),F||function(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function dl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function us(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class hl{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return zn("not implemented")}_getIdTokenResponse(g){return zn("not implemented")}_linkToIdToken(g,y){return zn("not implemented")}_getReauthenticationResolver(g){return zn("not implemented")}}function yh(w,g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:resetPassword",_n(w,g))})).apply(this,arguments)}function Dp(w,g){return vh.apply(this,arguments)}function vh(){return(vh=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ru(w,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:update",_n(w,g))})).apply(this,arguments)}function bh(){return(bh=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signInWithPassword",_n(w,g))})).apply(this,arguments)}function hc(w,g){return wh.apply(this,arguments)}function wh(){return(wh=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:sendOobCode",_n(w,g))})).apply(this,arguments)}function u0(w,g){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,a.Z)(function*(w,g){return hc(w,g)})).apply(this,arguments)}function wv(w,g){return fc.apply(this,arguments)}function fc(){return(fc=(0,a.Z)(function*(w,g){return hc(w,g)})).apply(this,arguments)}function d0(w,g){return fl.apply(this,arguments)}function fl(){return(fl=(0,a.Z)(function*(w,g){return hc(w,g)})).apply(this,arguments)}function Eh(w,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,a.Z)(function*(w,g){return hc(w,g)})).apply(this,arguments)}function pc(){return(pc=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signInWithEmailLink",_n(w,g))})).apply(this,arguments)}function Zs(){return(Zs=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signInWithEmailLink",_n(w,g))})).apply(this,arguments)}class pl extends hl{constructor(g,y,E,F=null){super("password",E),this._email=g,this._password=y,this._tenantId=F}static _fromEmailAndPassword(g,y){return new pl(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new pl(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,a.Z)(function*(){switch(y.signInMethod){case"password":return function(w,g){return bh.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,g){return pc.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:an(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,a.Z)(function*(){switch(E.signInMethod){case"password":return Dp(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(w,g){return Zs.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:an(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function lr(w,g){return gc.apply(this,arguments)}function gc(){return(gc=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signInWithIdp",_n(w,g))})).apply(this,arguments)}class Fr extends hl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Fr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):an("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:F}=y,$=ee(y,["providerId","signInMethod"]);if(!E||!F)return null;const ye=new Fr(E,F);return ye.idToken=$.idToken||void 0,ye.accessToken=$.accessToken||void 0,ye.secret=$.secret,ye.nonce=$.nonce,ye.pendingToken=$.pendingToken||null,ye}_getIdTokenResponse(g){return lr(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,lr(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,lr(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,M.xO)(y)}return g}}function xh(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:sendVerificationCode",_n(w,g))})).apply(this,arguments)}function gl(){return(gl=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signInWithPhoneNumber",_n(w,g))})).apply(this,arguments)}function fi(){return(fi=(0,a.Z)(function*(w,g){const y=yield At(w,"POST","/v1/accounts:signInWithPhoneNumber",_n(w,g));if(y.temporaryProof)throw mt(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Pu={USER_NOT_FOUND:"user-not-found"};function Da(){return(Da=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signInWithPhoneNumber",_n(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Pu)})).apply(this,arguments)}class Vi extends hl{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Vi({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Vi({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(w,g){return gl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(w,g){return fi.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return Da.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:F}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:F}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:F,temporaryProof:$}=g;return E||y||F||$?new Vi({verificationId:y,verificationCode:E,phoneNumber:F,temporaryProof:$}):null}}class Gn{constructor(g){var y,E,F,$,ye,Ge;const ft=(0,M.zd)((0,M.pd)(g)),et=null!==(y=ft.apiKey)&&void 0!==y?y:null,Tt=null!==(E=ft.oobCode)&&void 0!==E?E:null,In=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(F=ft.mode)&&void 0!==F?F:null);ze(et&&Tt&&In,"argument-error"),this.apiKey=et,this.operation=In,this.code=Tt,this.continueUrl=null!==($=ft.continueUrl)&&void 0!==$?$:null,this.languageCode=null!==(ye=ft.languageCode)&&void 0!==ye?ye:null,this.tenantId=null!==(Ge=ft.tenantId)&&void 0!==Ge?Ge:null}static parseLink(g){const y=function(w){const g=(0,M.zd)((0,M.pd)(w)).link,y=g?(0,M.zd)((0,M.pd)(g)).deep_link_id:null,E=(0,M.zd)((0,M.pd)(w)).deep_link_id;return(E?(0,M.zd)((0,M.pd)(E)).link:null)||E||y||g||w}(g);try{return new Gn(y)}catch(E){return null}}}let Ns=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return pl._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const F=Gn.parseLink(E);return ze(F,"argument-error"),pl._fromEmailAndCode(y,F.code,F.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class hs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Fn extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Zo extends Fn{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return ze("providerId"in y&&"signInMethod"in y,"argument-error"),Fr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ze(g.idToken||g.accessToken,"argument-error"),Fr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Zo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Zo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:F,pendingToken:$,nonce:ye,providerId:Ge}=g;if(!E&&!F&&!y&&!$||!Ge)return null;try{return new Zo(Ge)._credential({idToken:y,accessToken:E,nonce:ye,pendingToken:$})}catch(ft){return null}}}let Lu=(()=>{class w extends Fn{constructor(){super("facebook.com")}static credential(y){return Fr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),_c=(()=>{class w extends Fn{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return Fr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:F}=y;if(!E&&!F)return null;try{return w.credential(E,F)}catch($){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Ln=(()=>{class w extends Fn{constructor(){super("github.com")}static credential(y){return Fr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Ms extends hl{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return lr(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,lr(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,lr(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:F,pendingToken:$}=y;return E&&F&&$&&E===F?new Ms(E,$):null}static _create(g,y){return new Ms(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Lr extends hs{constructor(g){ze(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Lr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Lr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Ms.fromJSON(g);return ze(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return Ms._create(E,y)}catch(F){return null}}}let Ih=(()=>{class w extends Fn{constructor(){super("twitter.com")}static credential(y,E){return Fr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:F}=y;if(!E||!F)return null;try{return w.credential(E,F)}catch($){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ml(w,g){return wo.apply(this,arguments)}function wo(){return(wo=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signUp",_n(w,g))})).apply(this,arguments)}class xr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,F=!1){return(0,a.Z)(function*(){const $=yield Ji._fromIdTokenResponse(g,E,F),ye=_l(E);return new xr({user:$,providerId:ye,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const F=_l(E);return new xr({user:g,providerId:F,_tokenResponse:E,operationType:y})})()}}function _l(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function yc(w){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,a.Z)(function*(w){var g;const y=jn(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new xr({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield ml(y,{returnSecureToken:!0}),F=yield xr._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(F.user),F})).apply(this,arguments)}class vc extends M.ZR{constructor(g,y,E,F){var $;super(y.code,y.message),this.operationType=E,this.user=F,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:g.name,tenantId:null!==($=g.tenantId)&&void 0!==$?$:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,F){return new vc(g,y,E,F)}}function bc(w,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch($=>{throw"auth/multi-factor-auth-required"===$.code?vc._fromErrorAndOperation(w,$,g,E):$})}function Bu(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Uu(w,g){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,a.Z)(function*(w,g){const y=(0,M.m9)(w);yield Ze(!0,y,g);const{providerUserInfo:E}=yield en(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),F=Bu(E||[]);return y.providerData=y.providerData.filter($=>F.has($.providerId)),F.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function yl(w,g){return Co.apply(this,arguments)}function Co(){return(Co=(0,a.Z)(function*(w,g,y=!1){const E=yield Rt(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return xr._forOperation(w,"link",E)})).apply(this,arguments)}function Ze(w,g,y){return rn.apply(this,arguments)}function rn(){return(rn=(0,a.Z)(function*(w,g,y){yield yn(g);const F=!1===w?"provider-already-linked":"no-such-provider";ze(Bu(g.providerData).has(y)===w,g.auth,F)})).apply(this,arguments)}function Ia(w,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,a.Z)(function*(w,g,y=!1){const{auth:E}=w,F="reauthenticate";try{const $=yield Rt(w,bc(E,F,g,w),y);ze($.idToken,E,"internal-error");const ye=Xe($.idToken);ze(ye,E,"internal-error");const{sub:Ge}=ye;return ze(w.uid===Ge,E,"user-mismatch"),xr._forOperation(w,F,$)}catch($){throw"auth/user-not-found"===(null==$?void 0:$.code)&&an(E,"user-mismatch"),$}})).apply(this,arguments)}function vl(w,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,a.Z)(function*(w,g,y=!1){const E="signIn",F=yield bc(w,E,g),$=yield xr._fromIdTokenResponse(w,E,F);return y||(yield w._updateCurrentUser($.user)),$})).apply(this,arguments)}function pi(w,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,a.Z)(function*(w,g){return vl(jn(w),g)})).apply(this,arguments)}function bl(w,g){return $u.apply(this,arguments)}function $u(){return($u=(0,a.Z)(function*(w,g){const y=(0,M.m9)(w);return yield Ze(!1,y,g.providerId),yl(y,g)})).apply(this,arguments)}function Ah(w,g){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,a.Z)(function*(w,g){return Ia((0,M.m9)(w),g)})).apply(this,arguments)}function wc(w,g){return _r.apply(this,arguments)}function _r(){return(_r=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:signInWithCustomToken",_n(w,g))})).apply(this,arguments)}function Bi(w,g){return ju.apply(this,arguments)}function ju(){return(ju=(0,a.Z)(function*(w,g){const y=jn(w),E=yield wc(y,{token:g,returnSecureToken:!0}),F=yield xr._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(F.user),F})).apply(this,arguments)}class Ui{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Hi._fromServerResponse(g,y):an(g,"internal-error")}}class Hi extends Ui{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Hi(y)}}function wl(w,g,y){var E;ze((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),ze(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ze(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(ze(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Gu(w,g,y){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w),F={requestType:"PASSWORD_RESET",email:g};y&&wl(E,F,y),yield wv(E,F)})).apply(this,arguments)}function Ip(w,g,y){return zo.apply(this,arguments)}function zo(){return(zo=(0,a.Z)(function*(w,g,y){yield yh((0,M.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function Wu(w,g){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,a.Z)(function*(w,g){yield Ru((0,M.m9)(w),{oobCode:g})})).apply(this,arguments)}function xo(w,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,a.Z)(function*(w,g){const y=(0,M.m9)(w),E=yield yh(y,{oobCode:g}),F=E.requestType;switch(ze(F,y,"internal-error"),F){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ze(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ze(E.mfaInfo,y,"internal-error");default:ze(E.email,y,"internal-error")}let $=null;return E.mfaInfo&&($=Ui._fromServerResponse(jn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:$},operation:F}})).apply(this,arguments)}function qu(w,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,a.Z)(function*(w,g){const{data:y}=yield xo((0,M.m9)(w),g);return y.email})).apply(this,arguments)}function Sh(w,g,y){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,a.Z)(function*(w,g,y){const E=jn(w),F=yield ml(E,{returnSecureToken:!0,email:g,password:y}),$=yield xr._fromIdTokenResponse(E,"signIn",F);return yield E._updateCurrentUser($.user),$})).apply(this,arguments)}function zu(w,g,y){return pi((0,M.m9)(w),Ns.credential(g,y))}function Yu(w,g,y){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w),F={requestType:"EMAIL_SIGNIN",email:g};ze(y.handleCodeInApp,E,"argument-error"),y&&wl(E,F,y),yield d0(E,F)})).apply(this,arguments)}function Ku(w,g){const y=Gn.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function Ap(w,g,y){return zr.apply(this,arguments)}function zr(){return(zr=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w),F=Ns.credentialWithLink(g,y||tr());return ze(F._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),pi(E,F)})).apply(this,arguments)}function Ma(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:createAuthUri",_n(w,g))})).apply(this,arguments)}function Cv(w,g){return Sp.apply(this,arguments)}function Sp(){return(Sp=(0,a.Z)(function*(w,g){const E={identifier:g,continueUri:fr()?tr():"http://localhost"},{signinMethods:F}=yield Ma((0,M.m9)(w),E);return F||[]})).apply(this,arguments)}function Ec(w,g){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,a.Z)(function*(w,g){const y=(0,M.m9)(w),F={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&wl(y.auth,F,g);const{email:$}=yield u0(y.auth,F);$!==w.email&&(yield w.reload())})).apply(this,arguments)}function Np(w,g,y){return El.apply(this,arguments)}function El(){return(El=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w),$={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&wl(E.auth,$,y);const{email:ye}=yield Eh(E.auth,$);ye!==w.email&&(yield w.reload())})).apply(this,arguments)}function xc(w,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,a.Z)(function*(w,g){return St(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Dr(w,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,a.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,M.m9)(w),$={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},ye=yield Rt(E,xc(E.auth,$));E.displayName=ye.displayName||null,E.photoURL=ye.photoUrl||null;const Ge=E.providerData.find(({providerId:ft})=>"password"===ft);Ge&&(Ge.displayName=E.displayName,Ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ye)})).apply(this,arguments)}function Nh(w,g){return Ks((0,M.m9)(w),g,null)}function Mp(w,g){return Ks((0,M.m9)(w),null,g)}function Ks(w,g,y){return Do.apply(this,arguments)}function Do(){return(Do=(0,a.Z)(function*(w,g,y){const{auth:E}=w,$={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&($.email=g),y&&($.password=y);const ye=yield Rt(w,Dp(E,$));yield w._updateTokensIfNecessary(ye,!0)})).apply(this,arguments)}class To{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class ka extends To{constructor(g,y,E,F){super(g,y,E),this.username=F}}class Ju extends To{constructor(g,y){super(g,"facebook.com",y)}}class Rp extends ka{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class p0 extends To{constructor(g,y){super(g,"google.com",y)}}class es extends ka{constructor(g,y,E){super(g,"twitter.com",y,E)}}function Ev(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,y;if(!w)return null;const{providerId:E}=w,F=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},$=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const ye=null===(y=null===(g=Xe(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(ye)return new To($,"anonymous"!==ye&&"custom"!==ye?ye:null)}if(!E)return null;switch(E){case"facebook.com":return new Ju($,F);case"github.com":return new Rp($,F);case"google.com":return new p0($,F);case"twitter.com":return new es($,F,w.screenName||null);case"custom":case"anonymous":return new To($,null);default:return new To($,E,F)}}(y)}class ts{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new ts("enroll",g)}static _fromMfaPendingCredential(g){return new ts("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return ts._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return ts._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Oa{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=jn(g),F=y.customData._serverResponse,$=(F.mfaInfo||[]).map(Ge=>Ui._fromServerResponse(E,Ge));ze(F.mfaPendingCredential,E,"internal-error");const ye=ts._fromMfaPendingCredential(F.mfaPendingCredential);return new Oa(ye,$,function(){var Ge=(0,a.Z)(function*(ft){const et=yield ft._process(E,ye);delete F.mfaInfo,delete F.mfaPendingCredential;const Tt=Object.assign(Object.assign({},F),{idToken:et.idToken,refreshToken:et.refreshToken});switch(y.operationType){case"signIn":const In=yield xr._fromIdTokenResponse(E,y.operationType,Tt);return yield E._updateCurrentUser(In.user),In;case"reauthenticate":return ze(y.user,E,"internal-error"),xr._forOperation(y.user,y.operationType,Tt);default:an(E,"internal-error")}});return function(ft){return Ge.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,a.Z)(function*(){return y.signInResolver(g)})()}}function Tc(w,g){var y;const E=(0,M.m9)(w),F=g;return ze(g.customData.operationType,E,"argument-error"),ze(null===(y=F.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Oa._fromError(E,F)}function xv(w,g){return St(w,"POST","/v2/accounts/mfaEnrollment:start",_n(w,g))}class Ic{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>Ui._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new Ic(g)}getSession(){var g=this;return(0,a.Z)(function*(){return ts._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,a.Z)(function*(){const F=g,$=yield E.getSession(),ye=yield Rt(E.user,F._process(E.user.auth,$,y));return yield E.user._updateTokensIfNecessary(ye),E.user.reload()})()}unenroll(g){var y=this;return(0,a.Z)(function*(){const E="string"==typeof g?g:g.uid,F=yield y.user.getIdToken(),$=yield Rt(y.user,function(w,g){return St(w,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(w,g))}(y.user.auth,{idToken:F,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ye})=>ye!==E),yield y.user._updateTokensIfNecessary($);try{yield y.user.reload()}catch(ye){if("auth/user-token-expired"!==ye.code)throw ye}})()}}const kh=new WeakMap;function Ko(w){const g=(0,M.m9)(w);return kh.has(g)||kh.set(g,Ic._fromUser(g)),kh.get(g)}const Dl="__sak";class un{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qo=(()=>{class w extends un{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,M.z$)();return Zr(w)||qo(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=wa(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const F=this.storage.getItem(E),$=this.localCache[E];F!==$&&y(E,$,F)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Ge,ft,et)=>{this.notifyListeners(Ge,et)});const F=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ge=this.storage.getItem(F);if(y.newValue!==Ge)null!==y.newValue?this.storage.setItem(F,y.newValue):this.storage.removeItem(F);else if(this.localCache[F]===y.newValue&&!E)return}const $=()=>{const Ge=this.storage.getItem(F);!E&&this.localCache[F]===Ge||this.notifyListeners(F,Ge)},ye=this.storage.getItem(F);(0,M.w1)()&&10===document.documentMode&&ye!==y.newValue&&y.newValue!==y.oldValue?setTimeout($,10):$()}notifyListeners(y,E){this.localCache[y]=E;const F=this.listeners[y];if(F)for(const $ of Array.from(F))$(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,F)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:F}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var F=()=>super._set,$=this;return(0,a.Z)(function*(){yield F().call($,y,E),$.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,F=this;return(0,a.Z)(function*(){const $=yield E().call(F,y);return F.localCache[y]=JSON.stringify($),$})()}_remove(y){var E=()=>super._remove,F=this;return(0,a.Z)(function*(){yield E().call(F,y),delete F.localCache[y]})()}}return w.type="LOCAL",w})(),yr=(()=>{class w extends un{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Fp=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find($=>$.isListeningto(y));if(E)return E;const F=new w(y);return this.receivers.push(F),F}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,a.Z)(function*(){const F=y,{eventId:$,eventType:ye,data:Ge}=F.data,ft=E.handlersMap[ye];if(!(null==ft?void 0:ft.size))return;F.ports[0].postMessage({status:"ack",eventId:$,eventType:ye});const et=Array.from(ft).map(function(){var In=(0,a.Z)(function*(Wn){return Wn(F.origin,Ge)});return function(Wn){return In.apply(this,arguments)}}()),Tt=yield function(w){return Promise.all(w.map(function(){var g=(0,a.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(et);F.ports[0].postMessage({status:"done",eventId:$,eventType:ye,response:Tt})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Io(w="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return w+y}class ir{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var F=this;return(0,a.Z)(function*(){const $="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!$)throw new Error("connection_unavailable");let ye,Ge;return new Promise((ft,et)=>{const Tt=Io("",20);$.port1.start();const In=setTimeout(()=>{et(new Error("unsupported_event"))},E);Ge={messageChannel:$,onMessage(Wn){const Cn=Wn;if(Cn.data.eventId===Tt)switch(Cn.data.status){case"ack":clearTimeout(In),ye=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(ye),ft(Cn.data.response);break;default:clearTimeout(In),clearTimeout(ye),et(new Error("invalid_response"))}}},F.handlers.add(Ge),$.port1.addEventListener("message",Ge.onMessage),F.target.postMessage({eventType:g,eventId:Tt,data:y},[$.port2])}).finally(()=>{Ge&&F.removeMessageHandler(Ge)})})()}}function cr(){return window}function Jo(){return void 0!==cr().WorkerGlobalScope&&"function"==typeof cr().importScripts}function Fa(){return(Fa=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Ps="firebaseLocalStorageDb",So="firebaseLocalStorage",Qs="fbase_key";class gi{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function $i(w,g){return w.transaction([So],g?"readwrite":"readonly").objectStore(So)}function wt(){const w=indexedDB.open(Ps,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(So,{keyPath:Qs})}catch(F){y(F)}}),w.addEventListener("success",(0,a.Z)(function*(){const E=w.result;E.objectStoreNames.contains(So)?g(E):(E.close(),yield function(){const w=indexedDB.deleteDatabase(Ps);return new gi(w).toPromise()}(),g(yield wt()))}))})}function ns(w,g,y){return gr.apply(this,arguments)}function gr(){return(gr=(0,a.Z)(function*(w,g,y){const E=$i(w,!0).put({[Qs]:g,value:y});return new gi(E).toPromise()})).apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(w,g){const y=$i(w,!1).get(g),E=yield new gi(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Oh(w,g){const y=$i(w,!0).delete(g);return new gi(y).toPromise()}const Vp=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,a.Z)(function*(){return y.db||(y.db=yield wt()),y.db})()}_withRetries(y){var E=this;return(0,a.Z)(function*(){let F=0;for(;;)try{const $=yield E._openDb();return yield y($)}catch($){if(F++>3)throw $;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,a.Z)(function*(){return Jo()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,a.Z)(function*(){y.receiver=Fp._getInstance(Jo()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,a.Z)(function*(F,$){return{keyProcessed:(yield y._poll()).includes($.key)}});return function(F,$){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,a.Z)(function*(F,$){return["keyChanged"]});return function(F,$){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,a.Z)(function*(){var E,F;if(y.activeServiceWorker=yield function(){return Fa.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ir(y.activeServiceWorker);const $=yield y.sender._send("ping",{},800);!$||(null===(E=$[0])||void 0===E?void 0:E.fulfilled)&&(null===(F=$[0])||void 0===F?void 0:F.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,a.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(F){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const y=yield wt();return yield ns(y,Dl,"1"),yield Oh(y,Dl),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,a.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var F=this;return(0,a.Z)(function*(){return F._withPendingWrite((0,a.Z)(function*(){return yield F._withRetries($=>ns($,y,E)),F.localCache[y]=E,F.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,a.Z)(function*(){const F=yield E._withRetries($=>function(w,g){return Jn.apply(this,arguments)}($,y));return E.localCache[y]=F,F})()}_remove(y){var E=this;return(0,a.Z)(function*(){return E._withPendingWrite((0,a.Z)(function*(){return yield E._withRetries(F=>Oh(F,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,a.Z)(function*(){const E=yield y._withRetries(ye=>{const Ge=$i(ye,!1).getAll();return new gi(Ge).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const F=[],$=new Set;for(const{fbase_key:ye,value:Ge}of E)$.add(ye),JSON.stringify(y.localCache[ye])!==JSON.stringify(Ge)&&(y.notifyListeners(ye,Ge),F.push(ye));for(const ye of Object.keys(y.localCache))y.localCache[ye]&&!$.has(ye)&&(y.notifyListeners(ye,null),F.push(ye));return F})()}notifyListeners(y,E){this.localCache[y]=E;const F=this.listeners[y];if(F)for(const $ of Array.from(F))$(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Xo(w,g){return St(w,"POST","/v2/accounts/mfaSignIn:start",_n(w,g))}function Nc(){return(Nc=(0,a.Z)(function*(w){return(yield St(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function nd(w){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=F=>{const $=Tn("internal-error");$.customData=F,y($)},E.type="text/javascript",E.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function No(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Js=1e12;class Vr{constructor(g){this.auth=g,this.counter=Js,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Mc(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||Js;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Js))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,a.Z)(function*(){var E;return null===(E=y._widgets.get(g||Js))||void 0===E||E.execute(),""})()}}class Mc{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const F="string"==typeof g?document.getElementById(g):g;ze(F,"argument-error",{appName:y}),this.container=F,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ci=No("rcb"),Os=new En(3e4,6e4);class Ro{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!cr().grecaptcha}load(g,y=""){return ze((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(cr().grecaptcha):new Promise((E,F)=>{const $=cr().setTimeout(()=>{F(Tn(g,"network-request-failed"))},Os.get());cr()[Ci]=()=>{cr().clearTimeout($),delete cr()[Ci];const Ge=cr().grecaptcha;if(!Ge)return void F(Tn(g,"internal-error"));const ft=Ge.render;Ge.render=(et,Tt)=>{const In=ft(et,Tt);return this.counter++,In},this.hostLanguage=y,E(Ge)},nd(`https://www.google.com/recaptcha/api.js??${(0,M.xO)({onload:Ci,render:"explicit",hl:y})}`).catch(()=>{clearTimeout($),F(Tn(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!cr().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Lh{load(g){return(0,a.Z)(function*(){return new Vr(g)})()}clearedOneInstance(){}}const Xs="recaptcha",Bp={theme:"light",type:"image"};class Va{constructor(g,y=Object.assign({},Bp),E){this.parameters=y,this.type=Xs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jn(E),this.isInvisible="invisible"===this.parameters.size,ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const F="string"==typeof g?document.getElementById(g):g;ze(F,this.auth,"argument-error"),this.container=F,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Lh:new Ro,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise($=>{const ye=Ge=>{!Ge||(g.tokenChangeListeners.delete(ye),$(Ge))};g.tokenChangeListeners.add(ye),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ze(!this.parameters.sitekey,this.auth,"argument-error"),ze(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ze("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=cr()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){ze(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){ze(fr()&&!Jo(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(w){return Nc.apply(this,arguments)}(g.auth);ze(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return ze(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rd{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Vi._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Ir(w,g,y){return br.apply(this,arguments)}function br(){return(br=(0,a.Z)(function*(w,g,y){const E=jn(w),F=yield G(E,g,(0,M.m9)(y));return new rd(F,$=>pi(E,$))})).apply(this,arguments)}function Ba(w,g,y){return Vh.apply(this,arguments)}function Vh(){return(Vh=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w);yield Ze(!1,E,"phone");const F=yield G(E.auth,g,(0,M.m9)(y));return new rd(F,$=>bl(E,$))})).apply(this,arguments)}function D(w,g,y){return A.apply(this,arguments)}function A(){return(A=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w),F=yield G(E.auth,g,(0,M.m9)(y));return new rd(F,$=>Ah(E,$))})).apply(this,arguments)}function G(w,g,y){return oe.apply(this,arguments)}function oe(){return(oe=(0,a.Z)(function*(w,g,y){var E;const F=yield y.verify();try{let $;if(ze("string"==typeof F,w,"argument-error"),ze(y.type===Xs,w,"argument-error"),$="string"==typeof g?{phoneNumber:g}:g,"session"in $){const ye=$.session;if("phoneNumber"in $)return ze("enroll"===ye.type,w,"internal-error"),(yield xv(w,{idToken:ye.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:F}})).phoneSessionInfo.sessionInfo;{ze("signin"===ye.type,w,"internal-error");const Ge=(null===(E=$.multiFactorHint)||void 0===E?void 0:E.uid)||$.multiFactorUid;return ze(Ge,w,"missing-multi-factor-info"),(yield Xo(w,{mfaPendingCredential:ye.credential,mfaEnrollmentId:Ge,phoneSignInInfo:{recaptchaToken:F}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ye}=yield xh(w,{phoneNumber:$.phoneNumber,recaptchaToken:F});return ye}}finally{y._reset()}})).apply(this,arguments)}function De(w,g){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,a.Z)(function*(w,g){yield yl((0,M.m9)(w),g)})).apply(this,arguments)}let Ke=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=jn(y)}verifyPhoneNumber(y,E){return G(this.auth,y,(0,M.m9)(E))}static credential(y,E){return Vi._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:F}=y;return E&&F?Vi._fromTokenResponse(E,F):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ut(w,g){return g?fn(g):(ze(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class kt extends hl{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return lr(g,this._buildIdpRequest())}_linkToIdToken(g,y){return lr(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return lr(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Ut(w){return vl(w.auth,new kt(w),w.bypassAuthState)}function pn(w){const{auth:g,user:y}=w;return ze(y,g,"internal-error"),Ia(y,new kt(w),w.bypassAuthState)}function Ht(w){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,a.Z)(function*(w){const{auth:g,user:y}=w;return ze(y,g,"internal-error"),yl(y,new kt(w),w.bypassAuthState)})).apply(this,arguments)}class Rr{constructor(g,y,E,F,$=!1){this.auth=g,this.resolver=E,this.user=F,this.bypassAuthState=$,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,a.Z)(function*(E,F){g.pendingPromise={resolve:E,reject:F};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch($){g.reject($)}});return function(E,F){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,a.Z)(function*(){const{urlResponse:E,sessionId:F,postBody:$,tenantId:ye,error:Ge,type:ft}=g;if(Ge)return void y.reject(Ge);const et={auth:y.auth,requestUri:E,sessionId:F,tenantId:ye||void 0,postBody:$||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(ft)(et))}catch(Tt){y.reject(Tt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ut;case"linkViaPopup":case"linkViaRedirect":return Ht;case"reauthViaPopup":case"reauthViaRedirect":return pn;default:an(this.auth,"internal-error")}}resolve(g){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Un(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Il=new En(2e3,1e4);function id(w,g,y){return eo.apply(this,arguments)}function eo(){return(eo=(0,a.Z)(function*(w,g,y){const E=jn(w);Nn(w,g,hs);const F=ut(E,y);return new Hp(E,"signInViaPopup",g,F).executeNotNull()})).apply(this,arguments)}function Ua(w,g,y){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w);Nn(E.auth,g,hs);const F=ut(E.auth,y);return new Hp(E.auth,"reauthViaPopup",g,F,E).executeNotNull()})).apply(this,arguments)}function ea(w,g,y){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w);Nn(E.auth,g,hs);const F=ut(E.auth,y);return new Hp(E.auth,"linkViaPopup",g,F,E).executeNotNull()})).apply(this,arguments)}let Hp=(()=>{class w extends Rr{constructor(y,E,F,$,ye){super(y,E,$,ye),this.provider=F,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,a.Z)(function*(){const E=yield y.execute();return ze(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,a.Z)(function*(){Un(1===y.filter.length,"Popup operations only handle one event");const E=Io();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(F=>{y.reject(F)}),y.resolver._isIframeWebStorageSupported(y.auth,F=>{F||y.reject(Tn(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,F;this.pollId=(null===(F=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===F?void 0:F.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Il.get())};y()}}return w.currentPopupAction=null,w})();const Rc=new Map;class m0 extends Rr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,a.Z)(function*(){let E=Rc.get(y.auth._key());if(!E){try{const $=(yield function(w,g){return Sl.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve($)}catch(F){E=()=>Promise.reject(F)}Rc.set(y.auth._key(),E)}return y.bypassAuthState||Rc.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const F=yield E.auth._redirectUserForId(g.eventId);if(F)return E.user=F,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Sl(){return(Sl=(0,a.Z)(function*(w,g){const y=Ha(g),E=_0(w);if(!(yield E._isAvailable()))return!1;const F="true"===(yield E._get(y));return yield E._remove(y),F})).apply(this,arguments)}function $p(w,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,a.Z)(function*(w,g){return _0(w)._set(Ha(g),"true")})).apply(this,arguments)}function jp(){Rc.clear()}function _0(w){return fn(w._redirectPersistence)}function Ha(w){return cs("pendingRedirect",w.config.apiKey,w.name)}function $a(w,g,y){return function(w,g,y){return Yr.apply(this,arguments)}(w,g,y)}function Yr(){return(Yr=(0,a.Z)(function*(w,g,y){const E=jn(w);Nn(w,g,hs);const F=ut(E,y);return yield $p(F,E),F._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function Iv(w,g,y){return function(w,g,y){return kc.apply(this,arguments)}(w,g,y)}function kc(){return(kc=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w);Nn(E.auth,g,hs);const F=ut(E.auth,y);yield $p(F,E.auth);const $=yield Nl(E);return F._openRedirect(E.auth,g,"reauthViaRedirect",$)})).apply(this,arguments)}function sd(w,g,y){return function(w,g,y){return Bh.apply(this,arguments)}(w,g,y)}function Bh(){return(Bh=(0,a.Z)(function*(w,g,y){const E=(0,M.m9)(w);Nn(E.auth,g,hs);const F=ut(E.auth,y);yield Ze(!1,E,g.providerId),yield $p(F,E.auth);const $=yield Nl(E);return F._openRedirect(E.auth,g,"linkViaRedirect",$)})).apply(this,arguments)}function Av(w,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,a.Z)(function*(w,g){return yield jn(w)._initializationPromise,ja(w,g,!1)})).apply(this,arguments)}function ja(w,g){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,a.Z)(function*(w,g,y=!1){const E=jn(w),F=ut(E,g),ye=yield new m0(E,F,y).execute();return ye&&!y&&(delete ye.user._redirectEventId,yield E._persistUserIfCurrent(ye.user),yield E._setRedirectUser(null,g)),ye})).apply(this,arguments)}function Nl(w){return dn.apply(this,arguments)}function dn(){return(dn=(0,a.Z)(function*(w){const g=Io(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Sv{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b0(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!b0(g)){const F=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Tn(this.auth,F))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ga(g))}saveEventToCache(g){this.cachedEventUids.add(Ga(g)),this.lastProcessedEventTime=Date.now()}}function Ga(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function b0({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Oc(w){return ad.apply(this,arguments)}function ad(){return(ad=(0,a.Z)(function*(w,g={}){return St(w,"GET","/v1/projects",g)})).apply(this,arguments)}const na=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ld=/^https?/;function cd(){return(cd=(0,a.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Oc(w);for(const y of g)try{if(Uh(y))return}catch(E){}an(w,"unauthorized-domain")})).apply(this,arguments)}function Uh(w){const g=tr(),{protocol:y,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const ye=new URL(w);return""===ye.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&ye.hostname===E}if(!ld.test(y))return!1;if(na.test(w))return E===w;const F=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+F+"|"+F+")$","i").test(E)}const ud=new En(3e4,6e4);function Fc(){const w=cr().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Lc=null;function Ml(w){return Lc=Lc||function(w){return new Promise((g,y)=>{var E,F,$;function ye(){Fc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Fc(),y(Tn(w,"network-request-failed"))},timeout:ud.get()})}if(null===(F=null===(E=cr().gapi)||void 0===E?void 0:E.iframes)||void 0===F?void 0:F.Iframe)g(gapi.iframes.getContext());else{if(!(null===($=cr().gapi)||void 0===$?void 0:$.load)){const Ge=No("iframefcb");return cr()[Ge]=()=>{gapi.load?ye():y(Tn(w,"network-request-failed"))},nd(`https://apis.google.com/js/api.js?onload=${Ge}`).catch(ft=>y(ft))}ye()}}).catch(g=>{throw Lc=null,g})}(w),Lc}const Nv=new En(5e3,15e3),Rv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ra(w){const g=w.config;ze(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?it(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:k.SDK_VERSION},F=kv.get(w.config.apiHost);F&&(E.eid=F);const $=w._getFrameworks();return $.length&&(E.fw=$.join(",")),`${y}?${(0,M.xO)(E).slice(1)}`}function $h(){return($h=(0,a.Z)(function*(w){const g=yield Ml(w),y=cr().gapi;return ze(y,w,"internal-error"),g.open({where:document.body,url:ra(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rv,dontclear:!0},E=>new Promise(function(){var F=(0,a.Z)(function*($,ye){yield E.restyle({setHideOnLeave:!1});const Ge=Tn(w,"network-request-failed"),ft=cr().setTimeout(()=>{ye(Ge)},Nv.get());function et(){cr().clearTimeout(ft),$(E)}E.ping(et).then(et,()=>{ye(Ge)})});return function($,ye){return F.apply(this,arguments)}}()))})).apply(this,arguments)}const C0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function D0(w,g,y,E,F,$){ze(w.config.authDomain,w,"auth-domain-config-required"),ze(w.config.apiKey,w,"invalid-api-key");const ye={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:k.SDK_VERSION,eventId:F};if(g instanceof hs){g.setDefaultLanguage(w.languageCode),ye.providerId=g.providerId||"",(0,M.xb)(g.getCustomParameters())||(ye.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ft,et]of Object.entries($||{}))ye[ft]=et}if(g instanceof Fn){const ft=g.getScopes().filter(et=>""!==et);ft.length>0&&(ye.scopes=ft.join(","))}w.tenantId&&(ye.tid=w.tenantId);const Ge=ye;for(const ft of Object.keys(Ge))void 0===Ge[ft]&&delete Ge[ft];return`${function({config:w}){return w.emulator?it(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,M.xO)(Ge).slice(1)}`}const Wa="webStorageSupport",Vs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yr,this._completeRedirectFn=ja}_openPopup(g,y,E,F){var $=this;return(0,a.Z)(function*(){var ye;Un(null===(ye=$.eventManagers[g._key()])||void 0===ye?void 0:ye.manager,"_initialize() not called before _openPopup()");const Ge=D0(g,y,E,tr(),F);return function(w,g,y,E=500,F=600){const $=Math.max((window.screen.availHeight-F)/2,0).toString(),ye=Math.max((window.screen.availWidth-E)/2,0).toString();let Ge="";const ft=Object.assign(Object.assign({},C0),{width:E.toString(),height:F.toString(),top:$,left:ye}),et=(0,M.z$)().toLowerCase();y&&(Ge=_o(et)?"_blank":y),ba(et)&&(g=g||"http://localhost",ft.scrollbars="yes");const Tt=Object.entries(ft).reduce((Wn,[Cn,sa])=>`${Wn}${Cn}=${sa},`,"");if(function(w=(0,M.z$)()){var g;return qo(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(et)&&"_self"!==Ge)return function(w,g){const y=document.createElement("a");y.href=w,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",Ge),new jh(null);const In=window.open(g||"",Ge,Tt);ze(In,w,"popup-blocked");try{In.focus()}catch(Wn){}return new jh(In)}(g,Ge,Io())})()}_openRedirect(g,y,E,F){var $=this;return(0,a.Z)(function*(){return yield $._originValidation(g),w=D0(g,y,E,tr(),F),cr().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:F,promise:$}=this.eventManagers[y];return F?Promise.resolve(F):(Un($,"If manager is not set, promise should be"),$)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,a.Z)(function*(){const E=yield function(w){return $h.apply(this,arguments)}(g),F=new Sv(g);return E.register("authEvent",$=>(ze(null==$?void 0:$.authEvent,g,"invalid-auth-event"),{status:F.onEvent($.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:F},y.iframes[g._key()]=E,F})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Wa,{type:Wa},F=>{var $;const ye=null===($=null==F?void 0:F[0])||void 0===$?void 0:$[Wa];void 0!==ye&&y(!!ye),an(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return cd.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return wa()||Zr()||qo()}};class Uc extends class{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return zn("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Uc(g)}_finalizeEnroll(g,y,E){return function(w,g){return St(w,"POST","/v2/accounts/mfaEnrollment:finalize",_n(w,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(w,g){return St(w,"POST","/v2/accounts/mfaSignIn:finalize",_n(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let T0=(()=>{class w{constructor(){}static assertion(y){return Uc._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w,Hc="@firebase/auth",I0="0.19.12";class KC{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,a.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var F;g((null===(F=E)||void 0===F?void 0:F.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}w="Browser",(0,k._registerComponent)(new Ie.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),F=g.getProvider("heartbeat"),{apiKey:$,authDomain:ye}=E.options;return((Ge,ft)=>{ze($&&!$.includes(":"),"invalid-api-key",{appName:Ge.name}),ze(!(null==ye?void 0:ye.includes(":")),"argument-error",{appName:Ge.name});const et={apiKey:$,authDomain:ye,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xr(w)},Tt=new l0(Ge,ft,et);return function(w,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(fn);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(Tt,y),Tt})(E,F)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new Ie.wA("auth-internal",g=>{const y=jn(g.getProvider("auth").getImmediate());return new KC(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Hc,I0,void 0),(0,k.registerVersion)(Hc,I0,"esm2017")},3854:(Ve,me,O)=>{"use strict";O.d(me,{BH:()=>z,LL:()=>Qe,ZR:()=>Ie,gQ:()=>zn,zI:()=>Ee,hu:()=>k,g5:()=>Q,US:()=>ee,tV:()=>P,h$:()=>L,L:()=>U,$s:()=>St,r3:()=>Ct,Sg:()=>J,ne:()=>Un,p$:()=>N,vZ:()=>Tn,ZB:()=>S,Lj:()=>Lt,gK:()=>fr,pd:()=>ze,m9:()=>cn,z$:()=>re,GJ:()=>yt,jU:()=>q,ru:()=>de,d:()=>Ce,xb:()=>qt,w1:()=>ve,hl:()=>be,uI:()=>ce,UG:()=>H,Yr:()=>Me,b$:()=>pe,G6:()=>Ae,Mn:()=>Ue,w9:()=>Mt,cI:()=>Oe,UI:()=>an,X3:()=>Nt,xO:()=>Nn,zd:()=>Zn,DV:()=>Xt,ug:()=>it,dS:()=>En,Pz:()=>Fe,Dv:()=>tr,Wj:()=>Dn,lb:()=>Qi,eu:()=>ue});var a=O(8239);const k=function(fe,ae){if(!fe)throw Q(ae)},Q=function(fe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+fe)},ie=function(fe){const ae=[];let ge=0;for(let Le=0;Le<fe.length;Le++){let X=fe.charCodeAt(Le);X<128?ae[ge++]=X:X<2048?(ae[ge++]=X>>6|192,ae[ge++]=63&X|128):55296==(64512&X)&&Le+1<fe.length&&56320==(64512&fe.charCodeAt(Le+1))?(X=65536+((1023&X)<<10)+(1023&fe.charCodeAt(++Le)),ae[ge++]=X>>18|240,ae[ge++]=X>>12&63|128,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128):(ae[ge++]=X>>12|224,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128)}return ae},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(fe,ae){if(!Array.isArray(fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ge=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,Le=[];for(let X=0;X<fe.length;X+=3){const te=fe[X],se=X+1<fe.length,Se=se?fe[X+1]:0,Xe=X+2<fe.length,Et=Xe?fe[X+2]:0;let tn=(15&Se)<<2|Et>>6,Hn=63&Et;Xe||(Hn=64,se||(tn=64)),Le.push(ge[te>>2],ge[(3&te)<<4|Se>>4],ge[tn],ge[Hn])}return Le.join("")},encodeString(fe,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(fe):this.encodeByteArray(ie(fe),ae)},decodeString(fe,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(fe):function(fe){const ae=[];let ge=0,Le=0;for(;ge<fe.length;){const X=fe[ge++];if(X<128)ae[Le++]=String.fromCharCode(X);else if(X>191&&X<224){const te=fe[ge++];ae[Le++]=String.fromCharCode((31&X)<<6|63&te)}else if(X>239&&X<365){const Xe=((7&X)<<18|(63&fe[ge++])<<12|(63&fe[ge++])<<6|63&fe[ge++])-65536;ae[Le++]=String.fromCharCode(55296+(Xe>>10)),ae[Le++]=String.fromCharCode(56320+(1023&Xe))}else{const te=fe[ge++],se=fe[ge++];ae[Le++]=String.fromCharCode((15&X)<<12|(63&te)<<6|63&se)}}return ae.join("")}(this.decodeStringToByteArray(fe,ae))},decodeStringToByteArray(fe,ae){this.init_();const ge=ae?this.charToByteMapWebSafe_:this.charToByteMap_,Le=[];for(let X=0;X<fe.length;){const te=ge[fe.charAt(X++)],Se=X<fe.length?ge[fe.charAt(X)]:0;++X;const Et=X<fe.length?ge[fe.charAt(X)]:64;++X;const at=X<fe.length?ge[fe.charAt(X)]:64;if(++X,null==te||null==Se||null==Et||null==at)throw Error();Le.push(te<<2|Se>>4),64!==Et&&(Le.push(Se<<4&240|Et>>2),64!==at&&Le.push(Et<<6&192|at))}return Le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let fe=0;fe<this.ENCODED_VALS.length;fe++)this.byteToCharMap_[fe]=this.ENCODED_VALS.charAt(fe),this.charToByteMap_[this.byteToCharMap_[fe]]=fe,this.byteToCharMapWebSafe_[fe]=this.ENCODED_VALS_WEBSAFE.charAt(fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[fe]]=fe,fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(fe)]=fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(fe)]=fe)}}},L=function(fe){const ae=ie(fe);return ee.encodeByteArray(ae,!0)},U=function(fe){return L(fe).replace(/\./g,"")},P=function(fe){try{return ee.decodeString(fe,!0)}catch(ae){console.error("base64Decode failed: ",ae)}return null};function N(fe){return S(void 0,fe)}function S(fe,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===fe&&(fe={});break;case Array:fe=[];break;default:return ae}for(const ge in ae)!ae.hasOwnProperty(ge)||!V(ge)||(fe[ge]=S(fe[ge],ae[ge]));return fe}function V(fe){return"__proto__"!==fe}class z{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ae,ge)=>{this.resolve=ae,this.reject=ge})}wrapCallback(ae){return(ge,Le)=>{ge?this.reject(ge):this.resolve(Le),"function"==typeof ae&&(this.promise.catch(()=>{}),1===ae.length?ae(ge):ae(ge,Le))}}}function J(fe,ae){if(fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Le=ae||"demo-project",X=fe.iat||0,te=fe.sub||fe.user_id;if(!te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${Le}`,aud:Le,iat:X,exp:X+3600,auth_time:X,sub:te,user_id:te,firebase:{sign_in_provider:"custom",identities:{}}},fe);return[U(JSON.stringify({alg:"none",type:"JWT"})),U(JSON.stringify(se)),""].join(".")}function re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ce(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(re())}function H(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(fe){return!1}}function q(){return"object"==typeof self&&self.self===self}function de(){const fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof fe&&void 0!==fe.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ce(){return re().indexOf("Electron/")>=0}function ve(){const fe=re();return fe.indexOf("MSIE ")>=0||fe.indexOf("Trident/")>=0}function Ue(){return re().indexOf("MSAppHost/")>=0}function Me(){return!1}function Ae(){return!H()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function be(){return"object"==typeof indexedDB}function ue(){return new Promise((fe,ae)=>{try{let ge=!0;const Le="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(Le);X.onsuccess=()=>{X.result.close(),ge||self.indexedDB.deleteDatabase(Le),fe(!0)},X.onupgradeneeded=()=>{ge=!1},X.onerror=()=>{var te;ae((null===(te=X.error)||void 0===te?void 0:te.message)||"")}}catch(ge){ae(ge)}})}function Ee(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ie extends Error{constructor(ae,ge,Le){super(ge),this.code=ae,this.customData=Le,this.name="FirebaseError",Object.setPrototypeOf(this,Ie.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(ae,ge,Le){this.service=ae,this.serviceName=ge,this.errors=Le}create(ae,...ge){const Le=ge[0]||{},X=`${this.service}/${ae}`,te=this.errors[ae],se=te?function(fe,ae){return fe.replace(ct,(ge,Le)=>{const X=ae[Le];return null!=X?String(X):`<${Le}?>`})}(te,Le):"Error";return new Ie(X,`${this.serviceName}: ${se} (${X}).`,Le)}}const ct=/\{\$([^}]+)}/g;function Oe(fe){return JSON.parse(fe)}function Fe(fe){return JSON.stringify(fe)}const Re=function(fe){let ae={},ge={},Le={},X="";try{const te=fe.split(".");ae=Oe(P(te[0])||""),ge=Oe(P(te[1])||""),X=te[2],Le=ge.d||{},delete ge.d}catch(te){}return{header:ae,claims:ge,data:Le,signature:X}},Mt=function(fe){const ge=Re(fe).claims;return!!ge&&"object"==typeof ge&&ge.hasOwnProperty("iat")},yt=function(fe){const ae=Re(fe).claims;return"object"==typeof ae&&!0===ae.admin};function Ct(fe,ae){return Object.prototype.hasOwnProperty.call(fe,ae)}function Xt(fe,ae){if(Object.prototype.hasOwnProperty.call(fe,ae))return fe[ae]}function qt(fe){for(const ae in fe)if(Object.prototype.hasOwnProperty.call(fe,ae))return!1;return!0}function an(fe,ae,ge){const Le={};for(const X in fe)Object.prototype.hasOwnProperty.call(fe,X)&&(Le[X]=ae.call(ge,fe[X],X,fe));return Le}function Tn(fe,ae){if(fe===ae)return!0;const ge=Object.keys(fe),Le=Object.keys(ae);for(const X of ge){if(!Le.includes(X))return!1;const te=fe[X],se=ae[X];if(er(te)&&er(se)){if(!Tn(te,se))return!1}else if(te!==se)return!1}for(const X of Le)if(!ge.includes(X))return!1;return!0}function er(fe){return null!==fe&&"object"==typeof fe}function Nn(fe){const ae=[];for(const[ge,Le]of Object.entries(fe))Array.isArray(Le)?Le.forEach(X=>{ae.push(encodeURIComponent(ge)+"="+encodeURIComponent(X))}):ae.push(encodeURIComponent(ge)+"="+encodeURIComponent(Le));return ae.length?"&"+ae.join("&"):""}function Zn(fe){const ae={};return fe.replace(/^\?/,"").split("&").forEach(Le=>{if(Le){const[X,te]=Le.split("=");ae[decodeURIComponent(X)]=decodeURIComponent(te)}}),ae}function ze(fe){const ae=fe.indexOf("?");if(!ae)return"";const ge=fe.indexOf("#",ae);return fe.substring(ae,ge>0?ge:void 0)}class zn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ae=1;ae<this.blockSize;++ae)this.pad_[ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ae,ge){ge||(ge=0);const Le=this.W_;if("string"==typeof ae)for(let at=0;at<16;at++)Le[at]=ae.charCodeAt(ge)<<24|ae.charCodeAt(ge+1)<<16|ae.charCodeAt(ge+2)<<8|ae.charCodeAt(ge+3),ge+=4;else for(let at=0;at<16;at++)Le[at]=ae[ge]<<24|ae[ge+1]<<16|ae[ge+2]<<8|ae[ge+3],ge+=4;for(let at=16;at<80;at++){const tn=Le[at-3]^Le[at-8]^Le[at-14]^Le[at-16];Le[at]=4294967295&(tn<<1|tn>>>31)}let Et,Rt,X=this.chain_[0],te=this.chain_[1],se=this.chain_[2],Se=this.chain_[3],Xe=this.chain_[4];for(let at=0;at<80;at++){at<40?at<20?(Et=Se^te&(se^Se),Rt=1518500249):(Et=te^se^Se,Rt=1859775393):at<60?(Et=te&se|Se&(te|se),Rt=2400959708):(Et=te^se^Se,Rt=3395469782);const tn=(X<<5|X>>>27)+Et+Xe+Rt+Le[at]&4294967295;Xe=Se,Se=se,se=4294967295&(te<<30|te>>>2),te=X,X=tn}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+te&4294967295,this.chain_[2]=this.chain_[2]+se&4294967295,this.chain_[3]=this.chain_[3]+Se&4294967295,this.chain_[4]=this.chain_[4]+Xe&4294967295}update(ae,ge){if(null==ae)return;void 0===ge&&(ge=ae.length);const Le=ge-this.blockSize;let X=0;const te=this.buf_;let se=this.inbuf_;for(;X<ge;){if(0===se)for(;X<=Le;)this.compress_(ae,X),X+=this.blockSize;if("string"==typeof ae){for(;X<ge;)if(te[se]=ae.charCodeAt(X),++se,++X,se===this.blockSize){this.compress_(te),se=0;break}}else for(;X<ge;)if(te[se]=ae[X],++se,++X,se===this.blockSize){this.compress_(te),se=0;break}}this.inbuf_=se,this.total_+=ge}digest(){const ae=[];let ge=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&ge,ge/=256;this.compress_(this.buf_);let Le=0;for(let X=0;X<5;X++)for(let te=24;te>=0;te-=8)ae[Le]=this.chain_[X]>>te&255,++Le;return ae}}function Un(fe,ae){const ge=new pt(fe,ae);return ge.subscribe.bind(ge)}class pt{constructor(ae,ge){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ge,this.task.then(()=>{ae(this)}).catch(Le=>{this.error(Le)})}next(ae){this.forEachObserver(ge=>{ge.next(ae)})}error(ae){this.forEachObserver(ge=>{ge.error(ae)}),this.close(ae)}complete(){this.forEachObserver(ae=>{ae.complete()}),this.close()}subscribe(ae,ge,Le){let X;if(void 0===ae&&void 0===ge&&void 0===Le)throw new Error("Missing Observer.");X=function(fe,ae){if("object"!=typeof fe||null===fe)return!1;for(const ge of["next","error","complete"])if(ge in fe&&"function"==typeof fe[ge])return!0;return!1}(ae)?ae:{next:ae,error:ge,complete:Le},void 0===X.next&&(X.next=ln),void 0===X.error&&(X.error=ln),void 0===X.complete&&(X.complete=ln);const te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch(se){}}),this.observers.push(X),te}unsubscribeOne(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ae){if(!this.finalized)for(let ge=0;ge<this.observers.length;ge++)this.sendOne(ge,ae)}sendOne(ae,ge){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ae])try{ge(this.observers[ae])}catch(Le){"undefined"!=typeof console&&console.error&&console.error(Le)}})}close(ae){this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ln(){}const tr=function(fe,ae,ge,Le){let X;if(Le<ae?X="at least "+ae:Le>ge&&(X=0===ge?"none":"no more than "+ge),X)throw new Error(fe+" failed: Was called with "+Le+(1===Le?" argument.":" arguments.")+" Expects "+X+".")};function fr(fe,ae){return`${fe} failed: ${ae} argument `}function Dn(fe,ae,ge,Le){if((!Le||ge)&&"function"!=typeof ge)throw new Error(fr(fe,ae)+"must be a valid function.")}function Qi(fe,ae,ge,Le){if((!Le||ge)&&("object"!=typeof ge||null===ge))throw new Error(fr(fe,ae)+"must be a valid context object.")}const En=function(fe){const ae=[];let ge=0;for(let Le=0;Le<fe.length;Le++){let X=fe.charCodeAt(Le);if(X>=55296&&X<=56319){const te=X-55296;Le++,k(Le<fe.length,"Surrogate pair missing trail surrogate."),X=65536+(te<<10)+(fe.charCodeAt(Le)-56320)}X<128?ae[ge++]=X:X<2048?(ae[ge++]=X>>6|192,ae[ge++]=63&X|128):X<65536?(ae[ge++]=X>>12|224,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128):(ae[ge++]=X>>18|240,ae[ge++]=X>>12&63|128,ae[ge++]=X>>6&63|128,ae[ge++]=63&X|128)}return ae},it=function(fe){let ae=0;for(let ge=0;ge<fe.length;ge++){const Le=fe.charCodeAt(ge);Le<128?ae++:Le<2048?ae+=2:Le>=55296&&Le<=56319?(ae+=4,ge++):ae+=3}return ae};function St(fe,ae=1e3,ge=2){const Le=ae*Math.pow(ge,fe),X=Math.round(.5*Le*(Math.random()-.5)*2);return Math.min(144e5,Le+X)}function cn(fe){return fe&&fe._delegate?fe._delegate:fe}function At(fe,ae){return new Promise((ge,Le)=>{fe.onsuccess=X=>{ge(X.target.result)},fe.onerror=X=>{var te;Le(`${ae}: ${null===(te=X.target.error)||void 0===te?void 0:te.message}`)}})}class Zt{constructor(ae){this._db=ae,this.objectStoreNames=this._db.objectStoreNames}transaction(ae,ge="readonly"){return new rt(this._db.transaction.call(this._db,ae,ge))}createObjectStore(ae,ge){return new qe(this._db.createObjectStore(ae,ge))}close(){this._db.close()}}class rt{constructor(ae){this._transaction=ae,this.complete=new Promise((ge,Le)=>{this._transaction.oncomplete=function(){ge()},this._transaction.onerror=()=>{Le(this._transaction.error)},this._transaction.onabort=()=>{Le(this._transaction.error)}})}objectStore(ae){return new qe(this._transaction.objectStore(ae))}}class qe{constructor(ae){this._store=ae}index(ae){return new mt(this._store.index(ae))}createIndex(ae,ge,Le){return new mt(this._store.createIndex(ae,ge,Le))}get(ae){return At(this._store.get(ae),"Error reading from IndexedDB")}put(ae,ge){return At(this._store.put(ae,ge),"Error writing to IndexedDB")}delete(ae){return At(this._store.delete(ae),"Error deleting from IndexedDB")}clear(){return At(this._store.clear(),"Error clearing IndexedDB object store")}}class mt{constructor(ae){this._index=ae}get(ae){return At(this._index.get(ae),"Error reading from IndexedDB")}}function Nt(fe,ae,ge){return new Promise((Le,X)=>{try{const te=indexedDB.open(fe,ae);te.onsuccess=se=>{Le(new Zt(se.target.result))},te.onerror=se=>{var Se;X(`Error opening indexedDB: ${null===(Se=se.target.error)||void 0===Se?void 0:Se.message}`)},te.onupgradeneeded=se=>{ge(new Zt(te.result),se.oldVersion,se.newVersion,new rt(te.transaction))}}catch(te){X(`Error opening indexedDB: ${te.message}`)}})}function Lt(fe){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*(fe){return new Promise((ae,ge)=>{try{const Le=indexedDB.deleteDatabase(fe);Le.onsuccess=()=>{ae()},Le.onerror=X=>{var te;ge(`Error deleting indexedDB database "${fe}": ${null===(te=X.target.error)||void 0===te?void 0:te.message}`)}}catch(Le){ge(`Error deleting indexedDB database "${fe}": ${Le.message}`)}})})).apply(this,arguments)}},7832:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,Q=M.lib.BlockCipher,ie=M.algo,W=[],ee=[],L=[],U=[],P=[],N=[],S=[],V=[],z=[],J=[];!function(){for(var H=[],q=0;q<256;q++)H[q]=q<128?q<<1:q<<1^283;var de=0,pe=0;for(q=0;q<256;q++){var Ce=pe^pe<<1^pe<<2^pe<<3^pe<<4;W[de]=Ce=Ce>>>8^255&Ce^99,ee[Ce]=de;var Ae,ve=H[de],Ue=H[ve],Me=H[Ue];L[de]=(Ae=257*H[Ce]^16843008*Ce)<<24|Ae>>>8,U[de]=Ae<<16|Ae>>>16,P[de]=Ae<<8|Ae>>>24,N[de]=Ae,S[Ce]=(Ae=16843009*Me^65537*Ue^257*ve^16843008*de)<<24|Ae>>>8,V[Ce]=Ae<<16|Ae>>>16,z[Ce]=Ae<<8|Ae>>>24,J[Ce]=Ae,de?(de=ve^H[H[H[Me^ve]]],pe^=H[H[pe]]):de=pe=1}}();var re=[0,1,2,4,8,16,32,64,128,27,54],ce=ie.AES=Q.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var q=this._keyPriorReset=this._key,de=q.words,pe=q.sigBytes/4,ve=4*((this._nRounds=pe+6)+1),Ue=this._keySchedule=[],Me=0;Me<ve;Me++)Me<pe?Ue[Me]=de[Me]:(H=Ue[Me-1],Me%pe?pe>6&&Me%pe==4&&(H=W[H>>>24]<<24|W[H>>>16&255]<<16|W[H>>>8&255]<<8|W[255&H]):(H=W[(H=H<<8|H>>>24)>>>24]<<24|W[H>>>16&255]<<16|W[H>>>8&255]<<8|W[255&H],H^=re[Me/pe|0]<<24),Ue[Me]=Ue[Me-pe]^H);for(var Ae=this._invKeySchedule=[],be=0;be<ve;be++){if(Me=ve-be,be%4)var H=Ue[Me];else H=Ue[Me-4];Ae[be]=be<4||Me<=4?H:S[W[H>>>24]]^V[W[H>>>16&255]]^z[W[H>>>8&255]]^J[W[255&H]]}}},encryptBlock:function(H,q){this._doCryptBlock(H,q,this._keySchedule,L,U,P,N,W)},decryptBlock:function(H,q){var de=H[q+1];H[q+1]=H[q+3],H[q+3]=de,this._doCryptBlock(H,q,this._invKeySchedule,S,V,z,J,ee),de=H[q+1],H[q+1]=H[q+3],H[q+3]=de},_doCryptBlock:function(H,q,de,pe,Ce,ve,Ue,Me){for(var Ae=this._nRounds,be=H[q]^de[0],ue=H[q+1]^de[1],Ee=H[q+2]^de[2],_e=H[q+3]^de[3],xe=4,Ie=1;Ie<Ae;Ie++){var Qe=pe[be>>>24]^Ce[ue>>>16&255]^ve[Ee>>>8&255]^Ue[255&_e]^de[xe++],ht=pe[ue>>>24]^Ce[Ee>>>16&255]^ve[_e>>>8&255]^Ue[255&be]^de[xe++],ct=pe[Ee>>>24]^Ce[_e>>>16&255]^ve[be>>>8&255]^Ue[255&ue]^de[xe++],Oe=pe[_e>>>24]^Ce[be>>>16&255]^ve[ue>>>8&255]^Ue[255&Ee]^de[xe++];be=Qe,ue=ht,Ee=ct,_e=Oe}Qe=(Me[be>>>24]<<24|Me[ue>>>16&255]<<16|Me[Ee>>>8&255]<<8|Me[255&_e])^de[xe++],ht=(Me[ue>>>24]<<24|Me[Ee>>>16&255]<<16|Me[_e>>>8&255]<<8|Me[255&be])^de[xe++],ct=(Me[Ee>>>24]<<24|Me[_e>>>16&255]<<16|Me[be>>>8&255]<<8|Me[255&ue])^de[xe++],Oe=(Me[_e>>>24]<<24|Me[be>>>16&255]<<16|Me[ue>>>8&255]<<8|Me[255&Ee])^de[xe++],H[q]=Qe,H[q+1]=ht,H[q+2]=ct,H[q+3]=Oe},keySize:8});M.AES=Q._createHelper(ce)}(),a.AES)},8822:function(Ve,me,O){var k,Q,ie,W,ee,L,P,S,V,J,re,ce,q,pe,ve,Ue,Ae,be,a;Ve.exports=(a=O(1823),O(4369),void(a.lib.Cipher||(k=a,Q=k.lib,ie=Q.Base,W=Q.WordArray,ee=Q.BufferedBlockAlgorithm,L=k.enc,P=L.Base64,S=k.algo.EvpKDF,V=Q.Cipher=ee.extend({cfg:ie.extend(),createEncryptor:function(ue,Ee){return this.create(this._ENC_XFORM_MODE,ue,Ee)},createDecryptor:function(ue,Ee){return this.create(this._DEC_XFORM_MODE,ue,Ee)},init:function(ue,Ee,_e){this.cfg=this.cfg.extend(_e),this._xformMode=ue,this._key=Ee,this.reset()},reset:function(){ee.reset.call(this),this._doReset()},process:function(ue){return this._append(ue),this._process()},finalize:function(ue){return ue&&this._append(ue),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function ue(Ee){return"string"==typeof Ee?be:Ue}return function(Ee){return{encrypt:function(_e,xe,Ie){return ue(xe).encrypt(Ee,_e,xe,Ie)},decrypt:function(_e,xe,Ie){return ue(xe).decrypt(Ee,_e,xe,Ie)}}}}()}),Q.StreamCipher=V.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),J=k.mode={},re=Q.BlockCipherMode=ie.extend({createEncryptor:function(ue,Ee){return this.Encryptor.create(ue,Ee)},createDecryptor:function(ue,Ee){return this.Decryptor.create(ue,Ee)},init:function(ue,Ee){this._cipher=ue,this._iv=Ee}}),ce=J.CBC=function(){var ue=re.extend();function Ee(_e,xe,Ie){var Qe,ht=this._iv;ht?(Qe=ht,this._iv=undefined):Qe=this._prevBlock;for(var ct=0;ct<Ie;ct++)_e[xe+ct]^=Qe[ct]}return ue.Encryptor=ue.extend({processBlock:function(_e,xe){var Ie=this._cipher,Qe=Ie.blockSize;Ee.call(this,_e,xe,Qe),Ie.encryptBlock(_e,xe),this._prevBlock=_e.slice(xe,xe+Qe)}}),ue.Decryptor=ue.extend({processBlock:function(_e,xe){var Ie=this._cipher,Qe=Ie.blockSize,ht=_e.slice(xe,xe+Qe);Ie.decryptBlock(_e,xe),Ee.call(this,_e,xe,Qe),this._prevBlock=ht}}),ue}(),q=(k.pad={}).Pkcs7={pad:function(ue,Ee){for(var _e=4*Ee,xe=_e-ue.sigBytes%_e,Ie=xe<<24|xe<<16|xe<<8|xe,Qe=[],ht=0;ht<xe;ht+=4)Qe.push(Ie);var ct=W.create(Qe,xe);ue.concat(ct)},unpad:function(ue){ue.sigBytes-=255&ue.words[ue.sigBytes-1>>>2]}},Q.BlockCipher=V.extend({cfg:V.cfg.extend({mode:ce,padding:q}),reset:function(){var ue;V.reset.call(this);var Ee=this.cfg,_e=Ee.iv,xe=Ee.mode;this._xformMode==this._ENC_XFORM_MODE?ue=xe.createEncryptor:(ue=xe.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==ue?this._mode.init(this,_e&&_e.words):(this._mode=ue.call(xe,this,_e&&_e.words),this._mode.__creator=ue)},_doProcessBlock:function(ue,Ee){this._mode.processBlock(ue,Ee)},_doFinalize:function(){var ue,Ee=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(Ee.pad(this._data,this.blockSize),ue=this._process(!0)):(ue=this._process(!0),Ee.unpad(ue)),ue},blockSize:4}),pe=Q.CipherParams=ie.extend({init:function(ue){this.mixIn(ue)},toString:function(ue){return(ue||this.formatter).stringify(this)}}),ve=(k.format={}).OpenSSL={stringify:function(ue){var _e=ue.ciphertext,xe=ue.salt;return(xe?W.create([1398893684,1701076831]).concat(xe).concat(_e):_e).toString(P)},parse:function(ue){var Ee,_e=P.parse(ue),xe=_e.words;return 1398893684==xe[0]&&1701076831==xe[1]&&(Ee=W.create(xe.slice(2,4)),xe.splice(0,4),_e.sigBytes-=16),pe.create({ciphertext:_e,salt:Ee})}},Ue=Q.SerializableCipher=ie.extend({cfg:ie.extend({format:ve}),encrypt:function(ue,Ee,_e,xe){xe=this.cfg.extend(xe);var Ie=ue.createEncryptor(_e,xe),Qe=Ie.finalize(Ee),ht=Ie.cfg;return pe.create({ciphertext:Qe,key:_e,iv:ht.iv,algorithm:ue,mode:ht.mode,padding:ht.padding,blockSize:ue.blockSize,formatter:xe.format})},decrypt:function(ue,Ee,_e,xe){return xe=this.cfg.extend(xe),Ee=this._parse(Ee,xe.format),ue.createDecryptor(_e,xe).finalize(Ee.ciphertext)},_parse:function(ue,Ee){return"string"==typeof ue?Ee.parse(ue,this):ue}}),Ae=(k.kdf={}).OpenSSL={execute:function(ue,Ee,_e,xe){xe||(xe=W.random(8));var Ie=S.create({keySize:Ee+_e}).compute(ue,xe),Qe=W.create(Ie.words.slice(Ee),4*_e);return Ie.sigBytes=4*Ee,pe.create({key:Ie,iv:Qe,salt:xe})}},be=Q.PasswordBasedCipher=Ue.extend({cfg:Ue.cfg.extend({kdf:Ae}),encrypt:function(ue,Ee,_e,xe){var Ie=(xe=this.cfg.extend(xe)).kdf.execute(_e,ue.keySize,ue.ivSize);xe.iv=Ie.iv;var Qe=Ue.encrypt.call(this,ue,Ee,Ie.key,xe);return Qe.mixIn(Ie),Qe},decrypt:function(ue,Ee,_e,xe){xe=this.cfg.extend(xe),Ee=this._parse(Ee,xe.format);var Ie=xe.kdf.execute(_e,ue.keySize,ue.ivSize,Ee.salt);return xe.iv=Ie.iv,Ue.decrypt.call(this,ue,Ee,Ie.key,xe)}}))))},1823:function(Ve,me,O){var a;Ve.exports=a=a||function(M,k){var Q;if("undefined"!=typeof window&&window.crypto&&(Q=window.crypto),"undefined"!=typeof self&&self.crypto&&(Q=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(Q=globalThis.crypto),!Q&&"undefined"!=typeof window&&window.msCrypto&&(Q=window.msCrypto),!Q&&"undefined"!=typeof global&&global.crypto&&(Q=global.crypto),!Q)try{Q=O(2480)}catch(H){}var ie=function(){if(Q){if("function"==typeof Q.getRandomValues)try{return Q.getRandomValues(new Uint32Array(1))[0]}catch(H){}if("function"==typeof Q.randomBytes)try{return Q.randomBytes(4).readInt32LE()}catch(H){}}throw new Error("Native crypto module could not be used to get secure random number.")},W=Object.create||function(){function H(){}return function(q){var de;return H.prototype=q,de=new H,H.prototype=null,de}}(),ee={},L=ee.lib={},U=L.Base={extend:function(H){var q=W(this);return H&&q.mixIn(H),(!q.hasOwnProperty("init")||this.init===q.init)&&(q.init=function(){q.$super.init.apply(this,arguments)}),q.init.prototype=q,q.$super=this,q},create:function(){var H=this.extend();return H.init.apply(H,arguments),H},init:function(){},mixIn:function(H){for(var q in H)H.hasOwnProperty(q)&&(this[q]=H[q]);H.hasOwnProperty("toString")&&(this.toString=H.toString)},clone:function(){return this.init.prototype.extend(this)}},P=L.WordArray=U.extend({init:function(H,q){H=this.words=H||[],this.sigBytes=null!=q?q:4*H.length},toString:function(H){return(H||S).stringify(this)},concat:function(H){var q=this.words,de=H.words,pe=this.sigBytes,Ce=H.sigBytes;if(this.clamp(),pe%4)for(var ve=0;ve<Ce;ve++)q[pe+ve>>>2]|=(de[ve>>>2]>>>24-ve%4*8&255)<<24-(pe+ve)%4*8;else for(var Me=0;Me<Ce;Me+=4)q[pe+Me>>>2]=de[Me>>>2];return this.sigBytes+=Ce,this},clamp:function(){var H=this.words,q=this.sigBytes;H[q>>>2]&=4294967295<<32-q%4*8,H.length=M.ceil(q/4)},clone:function(){var H=U.clone.call(this);return H.words=this.words.slice(0),H},random:function(H){for(var q=[],de=0;de<H;de+=4)q.push(ie());return new P.init(q,H)}}),N=ee.enc={},S=N.Hex={stringify:function(H){for(var q=H.words,de=H.sigBytes,pe=[],Ce=0;Ce<de;Ce++){var ve=q[Ce>>>2]>>>24-Ce%4*8&255;pe.push((ve>>>4).toString(16)),pe.push((15&ve).toString(16))}return pe.join("")},parse:function(H){for(var q=H.length,de=[],pe=0;pe<q;pe+=2)de[pe>>>3]|=parseInt(H.substr(pe,2),16)<<24-pe%8*4;return new P.init(de,q/2)}},V=N.Latin1={stringify:function(H){for(var q=H.words,de=H.sigBytes,pe=[],Ce=0;Ce<de;Ce++)pe.push(String.fromCharCode(q[Ce>>>2]>>>24-Ce%4*8&255));return pe.join("")},parse:function(H){for(var q=H.length,de=[],pe=0;pe<q;pe++)de[pe>>>2]|=(255&H.charCodeAt(pe))<<24-pe%4*8;return new P.init(de,q)}},z=N.Utf8={stringify:function(H){try{return decodeURIComponent(escape(V.stringify(H)))}catch(q){throw new Error("Malformed UTF-8 data")}},parse:function(H){return V.parse(unescape(encodeURIComponent(H)))}},J=L.BufferedBlockAlgorithm=U.extend({reset:function(){this._data=new P.init,this._nDataBytes=0},_append:function(H){"string"==typeof H&&(H=z.parse(H)),this._data.concat(H),this._nDataBytes+=H.sigBytes},_process:function(H){var q,de=this._data,pe=de.words,Ce=de.sigBytes,ve=this.blockSize,Me=Ce/(4*ve),Ae=(Me=H?M.ceil(Me):M.max((0|Me)-this._minBufferSize,0))*ve,be=M.min(4*Ae,Ce);if(Ae){for(var ue=0;ue<Ae;ue+=ve)this._doProcessBlock(pe,ue);q=pe.splice(0,Ae),de.sigBytes-=be}return new P.init(q,be)},clone:function(){var H=U.clone.call(this);return H._data=this._data.clone(),H},_minBufferSize:0}),ce=(L.Hasher=J.extend({cfg:U.extend(),init:function(H){this.cfg=this.cfg.extend(H),this.reset()},reset:function(){J.reset.call(this),this._doReset()},update:function(H){return this._append(H),this._process(),this},finalize:function(H){return H&&this._append(H),this._doFinalize()},blockSize:16,_createHelper:function(H){return function(q,de){return new H.init(de).finalize(q)}},_createHmacHelper:function(H){return function(q,de){return new ce.HMAC.init(H,de).finalize(q)}}}),ee.algo={});return ee}(Math)},8341:function(Ve,me,O){var a,Q;Ve.exports=(a=O(1823),Q=a.lib.WordArray,a.enc.Base64={stringify:function(L){var U=L.words,P=L.sigBytes,N=this._map;L.clamp();for(var S=[],V=0;V<P;V+=3)for(var ce=(U[V>>>2]>>>24-V%4*8&255)<<16|(U[V+1>>>2]>>>24-(V+1)%4*8&255)<<8|U[V+2>>>2]>>>24-(V+2)%4*8&255,H=0;H<4&&V+.75*H<P;H++)S.push(N.charAt(ce>>>6*(3-H)&63));var q=N.charAt(64);if(q)for(;S.length%4;)S.push(q);return S.join("")},parse:function(L){var U=L.length,P=this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var S=0;S<P.length;S++)N[P.charCodeAt(S)]=S}var V=P.charAt(64);if(V){var z=L.indexOf(V);-1!==z&&(U=z)}return function(L,U,P){for(var N=[],S=0,V=0;V<U;V++)if(V%4){var z=P[L.charCodeAt(V-1)]<<V%4*2,J=P[L.charCodeAt(V)]>>>6-V%4*2;N[S>>>2]|=(z|J)<<24-S%4*8,S++}return Q.create(N,S)}(L,U,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},a.enc.Base64)},9237:function(Ve,me,O){var a,Q;Ve.exports=(a=O(1823),Q=a.lib.WordArray,a.enc.Base64url={stringify:function(L,U=!0){var P=L.words,N=L.sigBytes,S=U?this._safe_map:this._map;L.clamp();for(var V=[],z=0;z<N;z+=3)for(var H=(P[z>>>2]>>>24-z%4*8&255)<<16|(P[z+1>>>2]>>>24-(z+1)%4*8&255)<<8|P[z+2>>>2]>>>24-(z+2)%4*8&255,q=0;q<4&&z+.75*q<N;q++)V.push(S.charAt(H>>>6*(3-q)&63));var de=S.charAt(64);if(de)for(;V.length%4;)V.push(de);return V.join("")},parse:function(L,U=!0){var P=L.length,N=U?this._safe_map:this._map,S=this._reverseMap;if(!S){S=this._reverseMap=[];for(var V=0;V<N.length;V++)S[N.charCodeAt(V)]=V}var z=N.charAt(64);if(z){var J=L.indexOf(z);-1!==J&&(P=J)}return function(L,U,P){for(var N=[],S=0,V=0;V<U;V++)if(V%4){var z=P[L.charCodeAt(V-1)]<<V%4*2,J=P[L.charCodeAt(V)]>>>6-V%4*2;N[S>>>2]|=(z|J)<<24-S%4*8,S++}return Q.create(N,S)}(L,P,S)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},a.enc.Base64url)},4153:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(){var Q=a.lib.WordArray,ie=a.enc;function ee(L){return L<<8&4278255360|L>>>8&16711935}ie.Utf16=ie.Utf16BE={stringify:function(L){for(var U=L.words,P=L.sigBytes,N=[],S=0;S<P;S+=2)N.push(String.fromCharCode(U[S>>>2]>>>16-S%4*8&65535));return N.join("")},parse:function(L){for(var U=L.length,P=[],N=0;N<U;N++)P[N>>>1]|=L.charCodeAt(N)<<16-N%2*16;return Q.create(P,2*U)}},ie.Utf16LE={stringify:function(L){for(var U=L.words,P=L.sigBytes,N=[],S=0;S<P;S+=2){var V=ee(U[S>>>2]>>>16-S%4*8&65535);N.push(String.fromCharCode(V))}return N.join("")},parse:function(L){for(var U=L.length,P=[],N=0;N<U;N++)P[N>>>1]|=ee(L.charCodeAt(N)<<16-N%2*16);return Q.create(P,2*U)}}}(),a.enc.Utf16)},4369:function(Ve,me,O){var M,k,Q,ie,W,L,a;Ve.exports=(a=O(1823),O(6496),O(3331),ie=(k=(M=a).lib).WordArray,L=(W=M.algo).EvpKDF=(Q=k.Base).extend({cfg:Q.extend({keySize:4,hasher:W.MD5,iterations:1}),init:function(U){this.cfg=this.cfg.extend(U)},compute:function(U,P){for(var N,S=this.cfg,V=S.hasher.create(),z=ie.create(),J=z.words,re=S.keySize,ce=S.iterations;J.length<re;){N&&V.update(N),N=V.update(U).finalize(P),V.reset();for(var H=1;H<ce;H++)N=V.finalize(N),V.reset();z.concat(N)}return z.sigBytes=4*re,z}}),M.EvpKDF=function(U,P,N){return L.create(N).compute(U,P)},a.EvpKDF)},5383:function(Ve,me,O){var a,ie,ee;Ve.exports=(a=O(1823),O(8822),ie=a.lib.CipherParams,ee=a.enc.Hex,a.format.Hex={stringify:function(P){return P.ciphertext.toString(ee)},parse:function(P){var N=ee.parse(P);return ie.create({ciphertext:N})}},a.format.Hex)},3331:function(Ve,me,O){var a,W;Ve.exports=(a=O(1823),W=a.enc.Utf8,void(a.algo.HMAC=a.lib.Base.extend({init:function(U,P){U=this._hasher=new U.init,"string"==typeof P&&(P=W.parse(P));var N=U.blockSize,S=4*N;P.sigBytes>S&&(P=U.finalize(P)),P.clamp();for(var V=this._oKey=P.clone(),z=this._iKey=P.clone(),J=V.words,re=z.words,ce=0;ce<N;ce++)J[ce]^=1549556828,re[ce]^=909522486;V.sigBytes=z.sigBytes=S,this.reset()},reset:function(){var U=this._hasher;U.reset(),U.update(this._iKey)},update:function(U){return this._hasher.update(U),this},finalize:function(U){var P=this._hasher,N=P.finalize(U);return P.reset(),P.finalize(this._oKey.clone().concat(N))}})))},2527:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(4615),O(4194),O(4153),O(8341),O(9237),O(916),O(6496),O(6946),O(6538),O(1206),O(7098),O(2633),O(5508),O(3331),O(3096),O(4369),O(8822),O(8915),O(9913),O(1981),O(7163),O(6447),O(3199),O(9049),O(2812),O(5355),O(1247),O(5383),O(7832),O(4994),O(1093),O(7076),O(5625),a)},4194:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(){if("function"==typeof ArrayBuffer){var Q=a.lib.WordArray,ie=Q.init;(Q.init=function(ee){if(ee instanceof ArrayBuffer&&(ee=new Uint8Array(ee)),(ee instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array)&&(ee=new Uint8Array(ee.buffer,ee.byteOffset,ee.byteLength)),ee instanceof Uint8Array){for(var L=ee.byteLength,U=[],P=0;P<L;P++)U[P>>>2]|=ee[P]<<24-P%4*8;ie.call(this,U,L)}else ie.apply(this,arguments)}).prototype=Q}}(),a.lib.WordArray)},916:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(M){var k=a,Q=k.lib,ie=Q.WordArray,W=Q.Hasher,ee=k.algo,L=[];!function(){for(var z=0;z<64;z++)L[z]=4294967296*M.abs(M.sin(z+1))|0}();var U=ee.MD5=W.extend({_doReset:function(){this._hash=new ie.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(z,J){for(var re=0;re<16;re++){var ce=J+re,H=z[ce];z[ce]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8)}var q=this._hash.words,de=z[J+0],pe=z[J+1],Ce=z[J+2],ve=z[J+3],Ue=z[J+4],Me=z[J+5],Ae=z[J+6],be=z[J+7],ue=z[J+8],Ee=z[J+9],_e=z[J+10],xe=z[J+11],Ie=z[J+12],Qe=z[J+13],ht=z[J+14],ct=z[J+15],Oe=q[0],Fe=q[1],Re=q[2],We=q[3];Oe=P(Oe,Fe,Re,We,de,7,L[0]),We=P(We,Oe,Fe,Re,pe,12,L[1]),Re=P(Re,We,Oe,Fe,Ce,17,L[2]),Fe=P(Fe,Re,We,Oe,ve,22,L[3]),Oe=P(Oe,Fe,Re,We,Ue,7,L[4]),We=P(We,Oe,Fe,Re,Me,12,L[5]),Re=P(Re,We,Oe,Fe,Ae,17,L[6]),Fe=P(Fe,Re,We,Oe,be,22,L[7]),Oe=P(Oe,Fe,Re,We,ue,7,L[8]),We=P(We,Oe,Fe,Re,Ee,12,L[9]),Re=P(Re,We,Oe,Fe,_e,17,L[10]),Fe=P(Fe,Re,We,Oe,xe,22,L[11]),Oe=P(Oe,Fe,Re,We,Ie,7,L[12]),We=P(We,Oe,Fe,Re,Qe,12,L[13]),Re=P(Re,We,Oe,Fe,ht,17,L[14]),Oe=N(Oe,Fe=P(Fe,Re,We,Oe,ct,22,L[15]),Re,We,pe,5,L[16]),We=N(We,Oe,Fe,Re,Ae,9,L[17]),Re=N(Re,We,Oe,Fe,xe,14,L[18]),Fe=N(Fe,Re,We,Oe,de,20,L[19]),Oe=N(Oe,Fe,Re,We,Me,5,L[20]),We=N(We,Oe,Fe,Re,_e,9,L[21]),Re=N(Re,We,Oe,Fe,ct,14,L[22]),Fe=N(Fe,Re,We,Oe,Ue,20,L[23]),Oe=N(Oe,Fe,Re,We,Ee,5,L[24]),We=N(We,Oe,Fe,Re,ht,9,L[25]),Re=N(Re,We,Oe,Fe,ve,14,L[26]),Fe=N(Fe,Re,We,Oe,ue,20,L[27]),Oe=N(Oe,Fe,Re,We,Qe,5,L[28]),We=N(We,Oe,Fe,Re,Ce,9,L[29]),Re=N(Re,We,Oe,Fe,be,14,L[30]),Oe=S(Oe,Fe=N(Fe,Re,We,Oe,Ie,20,L[31]),Re,We,Me,4,L[32]),We=S(We,Oe,Fe,Re,ue,11,L[33]),Re=S(Re,We,Oe,Fe,xe,16,L[34]),Fe=S(Fe,Re,We,Oe,ht,23,L[35]),Oe=S(Oe,Fe,Re,We,pe,4,L[36]),We=S(We,Oe,Fe,Re,Ue,11,L[37]),Re=S(Re,We,Oe,Fe,be,16,L[38]),Fe=S(Fe,Re,We,Oe,_e,23,L[39]),Oe=S(Oe,Fe,Re,We,Qe,4,L[40]),We=S(We,Oe,Fe,Re,de,11,L[41]),Re=S(Re,We,Oe,Fe,ve,16,L[42]),Fe=S(Fe,Re,We,Oe,Ae,23,L[43]),Oe=S(Oe,Fe,Re,We,Ee,4,L[44]),We=S(We,Oe,Fe,Re,Ie,11,L[45]),Re=S(Re,We,Oe,Fe,ct,16,L[46]),Oe=V(Oe,Fe=S(Fe,Re,We,Oe,Ce,23,L[47]),Re,We,de,6,L[48]),We=V(We,Oe,Fe,Re,be,10,L[49]),Re=V(Re,We,Oe,Fe,ht,15,L[50]),Fe=V(Fe,Re,We,Oe,Me,21,L[51]),Oe=V(Oe,Fe,Re,We,Ie,6,L[52]),We=V(We,Oe,Fe,Re,ve,10,L[53]),Re=V(Re,We,Oe,Fe,_e,15,L[54]),Fe=V(Fe,Re,We,Oe,pe,21,L[55]),Oe=V(Oe,Fe,Re,We,ue,6,L[56]),We=V(We,Oe,Fe,Re,ct,10,L[57]),Re=V(Re,We,Oe,Fe,Ae,15,L[58]),Fe=V(Fe,Re,We,Oe,Qe,21,L[59]),Oe=V(Oe,Fe,Re,We,Ue,6,L[60]),We=V(We,Oe,Fe,Re,xe,10,L[61]),Re=V(Re,We,Oe,Fe,Ce,15,L[62]),Fe=V(Fe,Re,We,Oe,Ee,21,L[63]),q[0]=q[0]+Oe|0,q[1]=q[1]+Fe|0,q[2]=q[2]+Re|0,q[3]=q[3]+We|0},_doFinalize:function(){var z=this._data,J=z.words,re=8*this._nDataBytes,ce=8*z.sigBytes;J[ce>>>5]|=128<<24-ce%32;var H=M.floor(re/4294967296),q=re;J[15+(ce+64>>>9<<4)]=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),J[14+(ce+64>>>9<<4)]=16711935&(q<<8|q>>>24)|4278255360&(q<<24|q>>>8),z.sigBytes=4*(J.length+1),this._process();for(var de=this._hash,pe=de.words,Ce=0;Ce<4;Ce++){var ve=pe[Ce];pe[Ce]=16711935&(ve<<8|ve>>>24)|4278255360&(ve<<24|ve>>>8)}return de},clone:function(){var z=W.clone.call(this);return z._hash=this._hash.clone(),z}});function P(z,J,re,ce,H,q,de){var pe=z+(J&re|~J&ce)+H+de;return(pe<<q|pe>>>32-q)+J}function N(z,J,re,ce,H,q,de){var pe=z+(J&ce|re&~ce)+H+de;return(pe<<q|pe>>>32-q)+J}function S(z,J,re,ce,H,q,de){var pe=z+(J^re^ce)+H+de;return(pe<<q|pe>>>32-q)+J}function V(z,J,re,ce,H,q,de){var pe=z+(re^(J|~ce))+H+de;return(pe<<q|pe>>>32-q)+J}k.MD5=W._createHelper(U),k.HmacMD5=W._createHmacHelper(U)}(Math),a.MD5)},8915:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.mode.CFB=function(){var M=a.lib.BlockCipherMode.extend();function k(Q,ie,W,ee){var L,U=this._iv;U?(L=U.slice(0),this._iv=void 0):L=this._prevBlock,ee.encryptBlock(L,0);for(var P=0;P<W;P++)Q[ie+P]^=L[P]}return M.Encryptor=M.extend({processBlock:function(Q,ie){var W=this._cipher,ee=W.blockSize;k.call(this,Q,ie,ee,W),this._prevBlock=Q.slice(ie,ie+ee)}}),M.Decryptor=M.extend({processBlock:function(Q,ie){var W=this._cipher,ee=W.blockSize,L=Q.slice(ie,ie+ee);k.call(this,Q,ie,ee,W),this._prevBlock=L}}),M}(),a.mode.CFB)},1981:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.mode.CTRGladman=function(){var M=a.lib.BlockCipherMode.extend();function k(W){if(255==(W>>24&255)){var ee=W>>16&255,L=W>>8&255,U=255&W;255===ee?(ee=0,255===L?(L=0,255===U?U=0:++U):++L):++ee,W=0,W+=ee<<16,W+=L<<8,W+=U}else W+=1<<24;return W}var ie=M.Encryptor=M.extend({processBlock:function(W,ee){var L=this._cipher,U=L.blockSize,P=this._iv,N=this._counter;P&&(N=this._counter=P.slice(0),this._iv=void 0),function(W){0===(W[0]=k(W[0]))&&(W[1]=k(W[1]))}(N);var S=N.slice(0);L.encryptBlock(S,0);for(var V=0;V<U;V++)W[ee+V]^=S[V]}});return M.Decryptor=ie,M}(),a.mode.CTRGladman)},9913:function(Ve,me,O){var M,k,a;Ve.exports=(a=O(1823),O(8822),a.mode.CTR=(k=(M=a.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(Q,ie){var W=this._cipher,ee=W.blockSize,L=this._iv,U=this._counter;L&&(U=this._counter=L.slice(0),this._iv=void 0);var P=U.slice(0);W.encryptBlock(P,0),U[ee-1]=U[ee-1]+1|0;for(var N=0;N<ee;N++)Q[ie+N]^=P[N]}}),M.Decryptor=k,M),a.mode.CTR)},6447:function(Ve,me,O){var M,a;Ve.exports=(a=O(1823),O(8822),a.mode.ECB=((M=a.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(k,Q){this._cipher.encryptBlock(k,Q)}}),M.Decryptor=M.extend({processBlock:function(k,Q){this._cipher.decryptBlock(k,Q)}}),M),a.mode.ECB)},7163:function(Ve,me,O){var M,k,a;Ve.exports=(a=O(1823),O(8822),a.mode.OFB=(k=(M=a.lib.BlockCipherMode.extend()).Encryptor=M.extend({processBlock:function(Q,ie){var W=this._cipher,ee=W.blockSize,L=this._iv,U=this._keystream;L&&(U=this._keystream=L.slice(0),this._iv=void 0),W.encryptBlock(U,0);for(var P=0;P<ee;P++)Q[ie+P]^=U[P]}}),M.Decryptor=k,M),a.mode.OFB)},3199:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.AnsiX923={pad:function(M,k){var Q=M.sigBytes,ie=4*k,W=ie-Q%ie,ee=Q+W-1;M.clamp(),M.words[ee>>>2]|=W<<24-ee%4*8,M.sigBytes+=W},unpad:function(M){M.sigBytes-=255&M.words[M.sigBytes-1>>>2]}},a.pad.Ansix923)},9049:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.Iso10126={pad:function(M,k){var Q=4*k,ie=Q-M.sigBytes%Q;M.concat(a.lib.WordArray.random(ie-1)).concat(a.lib.WordArray.create([ie<<24],1))},unpad:function(M){M.sigBytes-=255&M.words[M.sigBytes-1>>>2]}},a.pad.Iso10126)},2812:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.Iso97971={pad:function(M,k){M.concat(a.lib.WordArray.create([2147483648],1)),a.pad.ZeroPadding.pad(M,k)},unpad:function(M){a.pad.ZeroPadding.unpad(M),M.sigBytes--}},a.pad.Iso97971)},1247:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.NoPadding={pad:function(){},unpad:function(){}},a.pad.NoPadding)},5355:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8822),a.pad.ZeroPadding={pad:function(M,k){var Q=4*k;M.clamp(),M.sigBytes+=Q-(M.sigBytes%Q||Q)},unpad:function(M){var k=M.words,Q=M.sigBytes-1;for(Q=M.sigBytes-1;Q>=0;Q--)if(k[Q>>>2]>>>24-Q%4*8&255){M.sigBytes=Q+1;break}}},a.pad.ZeroPadding)},3096:function(Ve,me,O){var M,k,Q,ie,W,L,U,a;Ve.exports=(a=O(1823),O(6496),O(3331),ie=(k=(M=a).lib).WordArray,L=(W=M.algo).HMAC,U=W.PBKDF2=(Q=k.Base).extend({cfg:Q.extend({keySize:4,hasher:W.SHA1,iterations:1}),init:function(P){this.cfg=this.cfg.extend(P)},compute:function(P,N){for(var S=this.cfg,V=L.create(S.hasher,P),z=ie.create(),J=ie.create([1]),re=z.words,ce=J.words,H=S.keySize,q=S.iterations;re.length<H;){var de=V.update(N).finalize(J);V.reset();for(var pe=de.words,Ce=pe.length,ve=de,Ue=1;Ue<q;Ue++){ve=V.finalize(ve),V.reset();for(var Me=ve.words,Ae=0;Ae<Ce;Ae++)pe[Ae]^=Me[Ae]}z.concat(de),ce[0]++}return z.sigBytes=4*H,z}}),M.PBKDF2=function(P,N,S){return U.create(S).compute(P,N)},a.PBKDF2)},5625:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,Q=M.lib.StreamCipher,W=[],ee=[],L=[],U=M.algo.RabbitLegacy=Q.extend({_doReset:function(){var N=this._key.words,S=this.cfg.iv,V=this._X=[N[0],N[3]<<16|N[2]>>>16,N[1],N[0]<<16|N[3]>>>16,N[2],N[1]<<16|N[0]>>>16,N[3],N[2]<<16|N[1]>>>16],z=this._C=[N[2]<<16|N[2]>>>16,4294901760&N[0]|65535&N[1],N[3]<<16|N[3]>>>16,4294901760&N[1]|65535&N[2],N[0]<<16|N[0]>>>16,4294901760&N[2]|65535&N[3],N[1]<<16|N[1]>>>16,4294901760&N[3]|65535&N[0]];this._b=0;for(var J=0;J<4;J++)P.call(this);for(J=0;J<8;J++)z[J]^=V[J+4&7];if(S){var re=S.words,ce=re[0],H=re[1],q=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8),de=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),pe=q>>>16|4294901760&de,Ce=de<<16|65535&q;for(z[0]^=q,z[1]^=pe,z[2]^=de,z[3]^=Ce,z[4]^=q,z[5]^=pe,z[6]^=de,z[7]^=Ce,J=0;J<4;J++)P.call(this)}},_doProcessBlock:function(N,S){var V=this._X;P.call(this),W[0]=V[0]^V[5]>>>16^V[3]<<16,W[1]=V[2]^V[7]>>>16^V[5]<<16,W[2]=V[4]^V[1]>>>16^V[7]<<16,W[3]=V[6]^V[3]>>>16^V[1]<<16;for(var z=0;z<4;z++)W[z]=16711935&(W[z]<<8|W[z]>>>24)|4278255360&(W[z]<<24|W[z]>>>8),N[S+z]^=W[z]},blockSize:4,ivSize:2});function P(){for(var N=this._X,S=this._C,V=0;V<8;V++)ee[V]=S[V];for(S[0]=S[0]+1295307597+this._b|0,S[1]=S[1]+3545052371+(S[0]>>>0<ee[0]>>>0?1:0)|0,S[2]=S[2]+886263092+(S[1]>>>0<ee[1]>>>0?1:0)|0,S[3]=S[3]+1295307597+(S[2]>>>0<ee[2]>>>0?1:0)|0,S[4]=S[4]+3545052371+(S[3]>>>0<ee[3]>>>0?1:0)|0,S[5]=S[5]+886263092+(S[4]>>>0<ee[4]>>>0?1:0)|0,S[6]=S[6]+1295307597+(S[5]>>>0<ee[5]>>>0?1:0)|0,S[7]=S[7]+3545052371+(S[6]>>>0<ee[6]>>>0?1:0)|0,this._b=S[7]>>>0<ee[7]>>>0?1:0,V=0;V<8;V++){var z=N[V]+S[V],J=65535&z,re=z>>>16;L[V]=((J*J>>>17)+J*re>>>15)+re*re^((4294901760&z)*z|0)+((65535&z)*z|0)}N[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,N[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,N[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,N[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,N[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,N[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,N[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,N[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}M.RabbitLegacy=Q._createHelper(U)}(),a.RabbitLegacy)},7076:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,Q=M.lib.StreamCipher,W=[],ee=[],L=[],U=M.algo.Rabbit=Q.extend({_doReset:function(){for(var N=this._key.words,S=this.cfg.iv,V=0;V<4;V++)N[V]=16711935&(N[V]<<8|N[V]>>>24)|4278255360&(N[V]<<24|N[V]>>>8);var z=this._X=[N[0],N[3]<<16|N[2]>>>16,N[1],N[0]<<16|N[3]>>>16,N[2],N[1]<<16|N[0]>>>16,N[3],N[2]<<16|N[1]>>>16],J=this._C=[N[2]<<16|N[2]>>>16,4294901760&N[0]|65535&N[1],N[3]<<16|N[3]>>>16,4294901760&N[1]|65535&N[2],N[0]<<16|N[0]>>>16,4294901760&N[2]|65535&N[3],N[1]<<16|N[1]>>>16,4294901760&N[3]|65535&N[0]];for(this._b=0,V=0;V<4;V++)P.call(this);for(V=0;V<8;V++)J[V]^=z[V+4&7];if(S){var re=S.words,ce=re[0],H=re[1],q=16711935&(ce<<8|ce>>>24)|4278255360&(ce<<24|ce>>>8),de=16711935&(H<<8|H>>>24)|4278255360&(H<<24|H>>>8),pe=q>>>16|4294901760&de,Ce=de<<16|65535&q;for(J[0]^=q,J[1]^=pe,J[2]^=de,J[3]^=Ce,J[4]^=q,J[5]^=pe,J[6]^=de,J[7]^=Ce,V=0;V<4;V++)P.call(this)}},_doProcessBlock:function(N,S){var V=this._X;P.call(this),W[0]=V[0]^V[5]>>>16^V[3]<<16,W[1]=V[2]^V[7]>>>16^V[5]<<16,W[2]=V[4]^V[1]>>>16^V[7]<<16,W[3]=V[6]^V[3]>>>16^V[1]<<16;for(var z=0;z<4;z++)W[z]=16711935&(W[z]<<8|W[z]>>>24)|4278255360&(W[z]<<24|W[z]>>>8),N[S+z]^=W[z]},blockSize:4,ivSize:2});function P(){for(var N=this._X,S=this._C,V=0;V<8;V++)ee[V]=S[V];for(S[0]=S[0]+1295307597+this._b|0,S[1]=S[1]+3545052371+(S[0]>>>0<ee[0]>>>0?1:0)|0,S[2]=S[2]+886263092+(S[1]>>>0<ee[1]>>>0?1:0)|0,S[3]=S[3]+1295307597+(S[2]>>>0<ee[2]>>>0?1:0)|0,S[4]=S[4]+3545052371+(S[3]>>>0<ee[3]>>>0?1:0)|0,S[5]=S[5]+886263092+(S[4]>>>0<ee[4]>>>0?1:0)|0,S[6]=S[6]+1295307597+(S[5]>>>0<ee[5]>>>0?1:0)|0,S[7]=S[7]+3545052371+(S[6]>>>0<ee[6]>>>0?1:0)|0,this._b=S[7]>>>0<ee[7]>>>0?1:0,V=0;V<8;V++){var z=N[V]+S[V],J=65535&z,re=z>>>16;L[V]=((J*J>>>17)+J*re>>>15)+re*re^((4294901760&z)*z|0)+((65535&z)*z|0)}N[0]=L[0]+(L[7]<<16|L[7]>>>16)+(L[6]<<16|L[6]>>>16)|0,N[1]=L[1]+(L[0]<<8|L[0]>>>24)+L[7]|0,N[2]=L[2]+(L[1]<<16|L[1]>>>16)+(L[0]<<16|L[0]>>>16)|0,N[3]=L[3]+(L[2]<<8|L[2]>>>24)+L[1]|0,N[4]=L[4]+(L[3]<<16|L[3]>>>16)+(L[2]<<16|L[2]>>>16)|0,N[5]=L[5]+(L[4]<<8|L[4]>>>24)+L[3]|0,N[6]=L[6]+(L[5]<<16|L[5]>>>16)+(L[4]<<16|L[4]>>>16)|0,N[7]=L[7]+(L[6]<<8|L[6]>>>24)+L[5]|0}M.Rabbit=Q._createHelper(U)}(),a.Rabbit)},1093:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,Q=M.lib.StreamCipher,ie=M.algo,W=ie.RC4=Q.extend({_doReset:function(){for(var U=this._key,P=U.words,N=U.sigBytes,S=this._S=[],V=0;V<256;V++)S[V]=V;V=0;for(var z=0;V<256;V++){var J=V%N,ce=S[V];S[V]=S[z=(z+S[V]+(P[J>>>2]>>>24-J%4*8&255))%256],S[z]=ce}this._i=this._j=0},_doProcessBlock:function(U,P){U[P]^=ee.call(this)},keySize:8,ivSize:0});function ee(){for(var U=this._S,P=this._i,N=this._j,S=0,V=0;V<4;V++){var z=U[P=(P+1)%256];U[P]=U[N=(N+U[P])%256],U[N]=z,S|=U[(U[P]+U[N])%256]<<24-8*V}return this._i=P,this._j=N,S}M.RC4=Q._createHelper(W);var L=ie.RC4Drop=W.extend({cfg:W.cfg.extend({drop:192}),_doReset:function(){W._doReset.call(this);for(var U=this.cfg.drop;U>0;U--)ee.call(this)}});M.RC4Drop=Q._createHelper(L)}(),a.RC4)},5508:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(M){var k=a,Q=k.lib,ie=Q.WordArray,W=Q.Hasher,ee=k.algo,L=ie.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),U=ie.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),P=ie.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),N=ie.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),S=ie.create([0,1518500249,1859775393,2400959708,2840853838]),V=ie.create([1352829926,1548603684,1836072691,2053994217,0]),z=ee.RIPEMD160=W.extend({_doReset:function(){this._hash=ie.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(pe,Ce){for(var ve=0;ve<16;ve++){var Ue=Ce+ve,Me=pe[Ue];pe[Ue]=16711935&(Me<<8|Me>>>24)|4278255360&(Me<<24|Me>>>8)}var Qe,ht,ct,Oe,Fe,Re,We,Jt,Mt,yt,Ct,Ae=this._hash.words,be=S.words,ue=V.words,Ee=L.words,_e=U.words,xe=P.words,Ie=N.words;for(Re=Qe=Ae[0],We=ht=Ae[1],Jt=ct=Ae[2],Mt=Oe=Ae[3],yt=Fe=Ae[4],ve=0;ve<80;ve+=1)Ct=Qe+pe[Ce+Ee[ve]]|0,Ct+=ve<16?J(ht,ct,Oe)+be[0]:ve<32?re(ht,ct,Oe)+be[1]:ve<48?ce(ht,ct,Oe)+be[2]:ve<64?H(ht,ct,Oe)+be[3]:q(ht,ct,Oe)+be[4],Ct=(Ct=de(Ct|=0,xe[ve]))+Fe|0,Qe=Fe,Fe=Oe,Oe=de(ct,10),ct=ht,ht=Ct,Ct=Re+pe[Ce+_e[ve]]|0,Ct+=ve<16?q(We,Jt,Mt)+ue[0]:ve<32?H(We,Jt,Mt)+ue[1]:ve<48?ce(We,Jt,Mt)+ue[2]:ve<64?re(We,Jt,Mt)+ue[3]:J(We,Jt,Mt)+ue[4],Ct=(Ct=de(Ct|=0,Ie[ve]))+yt|0,Re=yt,yt=Mt,Mt=de(Jt,10),Jt=We,We=Ct;Ct=Ae[1]+ct+Mt|0,Ae[1]=Ae[2]+Oe+yt|0,Ae[2]=Ae[3]+Fe+Re|0,Ae[3]=Ae[4]+Qe+We|0,Ae[4]=Ae[0]+ht+Jt|0,Ae[0]=Ct},_doFinalize:function(){var pe=this._data,Ce=pe.words,ve=8*this._nDataBytes,Ue=8*pe.sigBytes;Ce[Ue>>>5]|=128<<24-Ue%32,Ce[14+(Ue+64>>>9<<4)]=16711935&(ve<<8|ve>>>24)|4278255360&(ve<<24|ve>>>8),pe.sigBytes=4*(Ce.length+1),this._process();for(var Me=this._hash,Ae=Me.words,be=0;be<5;be++){var ue=Ae[be];Ae[be]=16711935&(ue<<8|ue>>>24)|4278255360&(ue<<24|ue>>>8)}return Me},clone:function(){var pe=W.clone.call(this);return pe._hash=this._hash.clone(),pe}});function J(pe,Ce,ve){return pe^Ce^ve}function re(pe,Ce,ve){return pe&Ce|~pe&ve}function ce(pe,Ce,ve){return(pe|~Ce)^ve}function H(pe,Ce,ve){return pe&ve|Ce&~ve}function q(pe,Ce,ve){return pe^(Ce|~ve)}function de(pe,Ce){return pe<<Ce|pe>>>32-Ce}k.RIPEMD160=W._createHelper(z),k.HmacRIPEMD160=W._createHmacHelper(z)}(Math),a.RIPEMD160)},6496:function(Ve,me,O){var M,k,Q,ie,ee,L,a;Ve.exports=(a=O(1823),Q=(k=(M=a).lib).WordArray,ee=[],L=M.algo.SHA1=(ie=k.Hasher).extend({_doReset:function(){this._hash=new Q.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(U,P){for(var N=this._hash.words,S=N[0],V=N[1],z=N[2],J=N[3],re=N[4],ce=0;ce<80;ce++){if(ce<16)ee[ce]=0|U[P+ce];else{var H=ee[ce-3]^ee[ce-8]^ee[ce-14]^ee[ce-16];ee[ce]=H<<1|H>>>31}var q=(S<<5|S>>>27)+re+ee[ce];q+=ce<20?1518500249+(V&z|~V&J):ce<40?1859775393+(V^z^J):ce<60?(V&z|V&J|z&J)-1894007588:(V^z^J)-899497514,re=J,J=z,z=V<<30|V>>>2,V=S,S=q}N[0]=N[0]+S|0,N[1]=N[1]+V|0,N[2]=N[2]+z|0,N[3]=N[3]+J|0,N[4]=N[4]+re|0},_doFinalize:function(){var U=this._data,P=U.words,N=8*this._nDataBytes,S=8*U.sigBytes;return P[S>>>5]|=128<<24-S%32,P[14+(S+64>>>9<<4)]=Math.floor(N/4294967296),P[15+(S+64>>>9<<4)]=N,U.sigBytes=4*P.length,this._process(),this._hash},clone:function(){var U=ie.clone.call(this);return U._hash=this._hash.clone(),U}}),M.SHA1=ie._createHelper(L),M.HmacSHA1=ie._createHmacHelper(L),a.SHA1)},6538:function(Ve,me,O){var M,Q,ie,W,ee,a;Ve.exports=(a=O(1823),O(6946),Q=(M=a).lib.WordArray,ee=(ie=M.algo).SHA224=(W=ie.SHA256).extend({_doReset:function(){this._hash=new Q.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var L=W._doFinalize.call(this);return L.sigBytes-=4,L}}),M.SHA224=W._createHelper(ee),M.HmacSHA224=W._createHmacHelper(ee),a.SHA224)},6946:function(Ve,me,O){var a;Ve.exports=(a=O(1823),function(M){var k=a,Q=k.lib,ie=Q.WordArray,W=Q.Hasher,ee=k.algo,L=[],U=[];!function(){function S(re){for(var ce=M.sqrt(re),H=2;H<=ce;H++)if(!(re%H))return!1;return!0}function V(re){return 4294967296*(re-(0|re))|0}for(var z=2,J=0;J<64;)S(z)&&(J<8&&(L[J]=V(M.pow(z,.5))),U[J]=V(M.pow(z,1/3)),J++),z++}();var P=[],N=ee.SHA256=W.extend({_doReset:function(){this._hash=new ie.init(L.slice(0))},_doProcessBlock:function(S,V){for(var z=this._hash.words,J=z[0],re=z[1],ce=z[2],H=z[3],q=z[4],de=z[5],pe=z[6],Ce=z[7],ve=0;ve<64;ve++){if(ve<16)P[ve]=0|S[V+ve];else{var Ue=P[ve-15],Ae=P[ve-2];P[ve]=((Ue<<25|Ue>>>7)^(Ue<<14|Ue>>>18)^Ue>>>3)+P[ve-7]+((Ae<<15|Ae>>>17)^(Ae<<13|Ae>>>19)^Ae>>>10)+P[ve-16]}var Ee=J&re^J&ce^re&ce,Ie=Ce+((q<<26|q>>>6)^(q<<21|q>>>11)^(q<<7|q>>>25))+(q&de^~q&pe)+U[ve]+P[ve];Ce=pe,pe=de,de=q,q=H+Ie|0,H=ce,ce=re,re=J,J=Ie+(((J<<30|J>>>2)^(J<<19|J>>>13)^(J<<10|J>>>22))+Ee)|0}z[0]=z[0]+J|0,z[1]=z[1]+re|0,z[2]=z[2]+ce|0,z[3]=z[3]+H|0,z[4]=z[4]+q|0,z[5]=z[5]+de|0,z[6]=z[6]+pe|0,z[7]=z[7]+Ce|0},_doFinalize:function(){var S=this._data,V=S.words,z=8*this._nDataBytes,J=8*S.sigBytes;return V[J>>>5]|=128<<24-J%32,V[14+(J+64>>>9<<4)]=M.floor(z/4294967296),V[15+(J+64>>>9<<4)]=z,S.sigBytes=4*V.length,this._process(),this._hash},clone:function(){var S=W.clone.call(this);return S._hash=this._hash.clone(),S}});k.SHA256=W._createHelper(N),k.HmacSHA256=W._createHmacHelper(N)}(Math),a.SHA256)},2633:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(4615),function(M){var k=a,Q=k.lib,ie=Q.WordArray,W=Q.Hasher,L=k.x64.Word,U=k.algo,P=[],N=[],S=[];!function(){for(var J=1,re=0,ce=0;ce<24;ce++){P[J+5*re]=(ce+1)*(ce+2)/2%64;var q=(2*J+3*re)%5;J=re%5,re=q}for(J=0;J<5;J++)for(re=0;re<5;re++)N[J+5*re]=re+(2*J+3*re)%5*5;for(var de=1,pe=0;pe<24;pe++){for(var Ce=0,ve=0,Ue=0;Ue<7;Ue++){if(1&de){var Me=(1<<Ue)-1;Me<32?ve^=1<<Me:Ce^=1<<Me-32}128&de?de=de<<1^113:de<<=1}S[pe]=L.create(Ce,ve)}}();var V=[];!function(){for(var J=0;J<25;J++)V[J]=L.create()}();var z=U.SHA3=W.extend({cfg:W.cfg.extend({outputLength:512}),_doReset:function(){for(var J=this._state=[],re=0;re<25;re++)J[re]=new L.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(J,re){for(var ce=this._state,H=this.blockSize/2,q=0;q<H;q++){var de=J[re+2*q],pe=J[re+2*q+1];de=16711935&(de<<8|de>>>24)|4278255360&(de<<24|de>>>8),(Ce=ce[q]).high^=pe=16711935&(pe<<8|pe>>>24)|4278255360&(pe<<24|pe>>>8),Ce.low^=de}for(var ve=0;ve<24;ve++){for(var Ue=0;Ue<5;Ue++){for(var Me=0,Ae=0,be=0;be<5;be++)Me^=(Ce=ce[Ue+5*be]).high,Ae^=Ce.low;var ue=V[Ue];ue.high=Me,ue.low=Ae}for(Ue=0;Ue<5;Ue++){var Ee=V[(Ue+4)%5],_e=V[(Ue+1)%5],xe=_e.high,Ie=_e.low;for(Me=Ee.high^(xe<<1|Ie>>>31),Ae=Ee.low^(Ie<<1|xe>>>31),be=0;be<5;be++)(Ce=ce[Ue+5*be]).high^=Me,Ce.low^=Ae}for(var Qe=1;Qe<25;Qe++){var ht=(Ce=ce[Qe]).high,ct=Ce.low,Oe=P[Qe];Oe<32?(Me=ht<<Oe|ct>>>32-Oe,Ae=ct<<Oe|ht>>>32-Oe):(Me=ct<<Oe-32|ht>>>64-Oe,Ae=ht<<Oe-32|ct>>>64-Oe);var Fe=V[N[Qe]];Fe.high=Me,Fe.low=Ae}var Re=V[0],We=ce[0];for(Re.high=We.high,Re.low=We.low,Ue=0;Ue<5;Ue++)for(be=0;be<5;be++){var Jt=V[Qe=Ue+5*be],Mt=V[(Ue+1)%5+5*be],yt=V[(Ue+2)%5+5*be];(Ce=ce[Qe]).high=Jt.high^~Mt.high&yt.high,Ce.low=Jt.low^~Mt.low&yt.low}var Ce,Ct=S[ve];(Ce=ce[0]).high^=Ct.high,Ce.low^=Ct.low}},_doFinalize:function(){var J=this._data,re=J.words,H=8*J.sigBytes,q=32*this.blockSize;re[H>>>5]|=1<<24-H%32,re[(M.ceil((H+1)/q)*q>>>5)-1]|=128,J.sigBytes=4*re.length,this._process();for(var de=this._state,pe=this.cfg.outputLength/8,Ce=pe/8,ve=[],Ue=0;Ue<Ce;Ue++){var Me=de[Ue],Ae=Me.high,be=Me.low;Ae=16711935&(Ae<<8|Ae>>>24)|4278255360&(Ae<<24|Ae>>>8),ve.push(be=16711935&(be<<8|be>>>24)|4278255360&(be<<24|be>>>8)),ve.push(Ae)}return new ie.init(ve,pe)},clone:function(){for(var J=W.clone.call(this),re=J._state=this._state.slice(0),ce=0;ce<25;ce++)re[ce]=re[ce].clone();return J}});k.SHA3=W._createHelper(z),k.HmacSHA3=W._createHmacHelper(z)}(Math),a.SHA3)},7098:function(Ve,me,O){var M,k,Q,ie,W,ee,L,a;Ve.exports=(a=O(1823),O(4615),O(1206),Q=(k=(M=a).x64).Word,ie=k.WordArray,L=(W=M.algo).SHA384=(ee=W.SHA512).extend({_doReset:function(){this._hash=new ie.init([new Q.init(3418070365,3238371032),new Q.init(1654270250,914150663),new Q.init(2438529370,812702999),new Q.init(355462360,4144912697),new Q.init(1731405415,4290775857),new Q.init(2394180231,1750603025),new Q.init(3675008525,1694076839),new Q.init(1203062813,3204075428)])},_doFinalize:function(){var U=ee._doFinalize.call(this);return U.sigBytes-=16,U}}),M.SHA384=ee._createHelper(L),M.HmacSHA384=ee._createHmacHelper(L),a.SHA384)},1206:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(4615),function(){var M=a,Q=M.lib.Hasher,ie=M.x64,W=ie.Word,ee=ie.WordArray,L=M.algo;function U(){return W.create.apply(W,arguments)}var P=[U(1116352408,3609767458),U(1899447441,602891725),U(3049323471,3964484399),U(3921009573,2173295548),U(961987163,4081628472),U(1508970993,3053834265),U(2453635748,2937671579),U(2870763221,3664609560),U(3624381080,2734883394),U(310598401,1164996542),U(607225278,1323610764),U(1426881987,3590304994),U(1925078388,4068182383),U(2162078206,991336113),U(2614888103,633803317),U(3248222580,3479774868),U(3835390401,2666613458),U(4022224774,944711139),U(264347078,2341262773),U(604807628,2007800933),U(770255983,1495990901),U(1249150122,1856431235),U(1555081692,3175218132),U(1996064986,2198950837),U(2554220882,3999719339),U(2821834349,766784016),U(2952996808,2566594879),U(3210313671,3203337956),U(3336571891,1034457026),U(3584528711,2466948901),U(113926993,3758326383),U(338241895,168717936),U(666307205,1188179964),U(773529912,1546045734),U(1294757372,1522805485),U(1396182291,2643833823),U(1695183700,2343527390),U(1986661051,1014477480),U(2177026350,1206759142),U(2456956037,344077627),U(2730485921,1290863460),U(2820302411,3158454273),U(3259730800,3505952657),U(3345764771,106217008),U(3516065817,3606008344),U(3600352804,1432725776),U(4094571909,1467031594),U(275423344,851169720),U(430227734,3100823752),U(506948616,1363258195),U(659060556,3750685593),U(883997877,3785050280),U(958139571,3318307427),U(1322822218,3812723403),U(1537002063,2003034995),U(1747873779,3602036899),U(1955562222,1575990012),U(2024104815,1125592928),U(2227730452,2716904306),U(2361852424,442776044),U(2428436474,593698344),U(2756734187,3733110249),U(3204031479,2999351573),U(3329325298,3815920427),U(3391569614,3928383900),U(3515267271,566280711),U(3940187606,3454069534),U(4118630271,4000239992),U(116418474,1914138554),U(174292421,2731055270),U(289380356,3203993006),U(460393269,320620315),U(685471733,587496836),U(852142971,1086792851),U(1017036298,365543100),U(1126000580,2618297676),U(1288033470,3409855158),U(1501505948,4234509866),U(1607167915,987167468),U(1816402316,1246189591)],N=[];!function(){for(var V=0;V<80;V++)N[V]=U()}();var S=L.SHA512=Q.extend({_doReset:function(){this._hash=new ee.init([new W.init(1779033703,4089235720),new W.init(3144134277,2227873595),new W.init(1013904242,4271175723),new W.init(2773480762,1595750129),new W.init(1359893119,2917565137),new W.init(2600822924,725511199),new W.init(528734635,4215389547),new W.init(1541459225,327033209)])},_doProcessBlock:function(V,z){for(var J=this._hash.words,re=J[0],ce=J[1],H=J[2],q=J[3],de=J[4],pe=J[5],Ce=J[6],ve=J[7],Ue=re.high,Me=re.low,Ae=ce.high,be=ce.low,ue=H.high,Ee=H.low,_e=q.high,xe=q.low,Ie=de.high,Qe=de.low,ht=pe.high,ct=pe.low,Oe=Ce.high,Fe=Ce.low,Re=ve.high,We=ve.low,Jt=Ue,Mt=Me,yt=Ae,Ct=be,Xt=ue,qt=Ee,an=_e,Tn=xe,er=Ie,Nn=Qe,Zn=ht,ze=ct,zn=Oe,Un=Fe,pt=Re,fn=We,mn=0;mn<80;mn++){var ln,tr,fr=N[mn];if(mn<16)tr=fr.high=0|V[z+2*mn],ln=fr.low=0|V[z+2*mn+1];else{var ar=N[mn-15],Dn=ar.high,Qi=ar.low,it=(Qi>>>1|Dn<<31)^(Qi>>>8|Dn<<24)^(Qi>>>7|Dn<<25),Dt=N[mn-2],Nr=Dt.high,qr=Dt.low,St=(qr>>>19|Nr<<13)^(qr<<3|Nr>>>29)^(qr>>>6|Nr<<26),pr=N[mn-7],At=N[mn-16],rt=At.low;fr.high=tr=(tr=(tr=((Dn>>>1|Qi<<31)^(Dn>>>8|Qi<<24)^Dn>>>7)+pr.high+((ln=it+pr.low)>>>0<it>>>0?1:0))+((Nr>>>19|qr<<13)^(Nr<<3|qr>>>29)^Nr>>>6)+((ln+=St)>>>0<St>>>0?1:0))+At.high+((ln+=rt)>>>0<rt>>>0?1:0),fr.low=ln}var se,qe=er&Zn^~er&zn,mt=Nn&ze^~Nn&Un,Nt=Jt&yt^Jt&Xt^yt&Xt,fe=(Mt>>>28|Jt<<4)^(Mt<<30|Jt>>>2)^(Mt<<25|Jt>>>7),Le=P[mn],te=Le.low,Se=pt+((er>>>14|Nn<<18)^(er>>>18|Nn<<14)^(er<<23|Nn>>>9))+((se=fn+((Nn>>>14|er<<18)^(Nn>>>18|er<<14)^(Nn<<23|er>>>9)))>>>0<fn>>>0?1:0),Xe=fe+(Mt&Ct^Mt&qt^Ct&qt);pt=zn,fn=Un,zn=Zn,Un=ze,Zn=er,ze=Nn,er=an+(Se=(Se=(Se=Se+qe+((se+=mt)>>>0<mt>>>0?1:0))+Le.high+((se+=te)>>>0<te>>>0?1:0))+tr+((se+=ln)>>>0<ln>>>0?1:0))+((Nn=Tn+se|0)>>>0<Tn>>>0?1:0)|0,an=Xt,Tn=qt,Xt=yt,qt=Ct,yt=Jt,Ct=Mt,Jt=Se+(((Jt>>>28|Mt<<4)^(Jt<<30|Mt>>>2)^(Jt<<25|Mt>>>7))+Nt+(Xe>>>0<fe>>>0?1:0))+((Mt=se+Xe|0)>>>0<se>>>0?1:0)|0}Me=re.low=Me+Mt,re.high=Ue+Jt+(Me>>>0<Mt>>>0?1:0),be=ce.low=be+Ct,ce.high=Ae+yt+(be>>>0<Ct>>>0?1:0),Ee=H.low=Ee+qt,H.high=ue+Xt+(Ee>>>0<qt>>>0?1:0),xe=q.low=xe+Tn,q.high=_e+an+(xe>>>0<Tn>>>0?1:0),Qe=de.low=Qe+Nn,de.high=Ie+er+(Qe>>>0<Nn>>>0?1:0),ct=pe.low=ct+ze,pe.high=ht+Zn+(ct>>>0<ze>>>0?1:0),Fe=Ce.low=Fe+Un,Ce.high=Oe+zn+(Fe>>>0<Un>>>0?1:0),We=ve.low=We+fn,ve.high=Re+pt+(We>>>0<fn>>>0?1:0)},_doFinalize:function(){var V=this._data,z=V.words,J=8*this._nDataBytes,re=8*V.sigBytes;return z[re>>>5]|=128<<24-re%32,z[30+(re+128>>>10<<5)]=Math.floor(J/4294967296),z[31+(re+128>>>10<<5)]=J,V.sigBytes=4*z.length,this._process(),this._hash.toX32()},clone:function(){var V=Q.clone.call(this);return V._hash=this._hash.clone(),V},blockSize:32});M.SHA512=Q._createHelper(S),M.HmacSHA512=Q._createHmacHelper(S)}(),a.SHA512)},4994:function(Ve,me,O){var a;Ve.exports=(a=O(1823),O(8341),O(916),O(4369),O(8822),function(){var M=a,k=M.lib,Q=k.WordArray,ie=k.BlockCipher,W=M.algo,ee=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],L=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],U=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],P=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],N=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],S=W.DES=ie.extend({_doReset:function(){for(var ce=this._key.words,H=[],q=0;q<56;q++){var de=ee[q]-1;H[q]=ce[de>>>5]>>>31-de%32&1}for(var pe=this._subKeys=[],Ce=0;Ce<16;Ce++){var ve=pe[Ce]=[],Ue=U[Ce];for(q=0;q<24;q++)ve[q/6|0]|=H[(L[q]-1+Ue)%28]<<31-q%6,ve[4+(q/6|0)]|=H[28+(L[q+24]-1+Ue)%28]<<31-q%6;for(ve[0]=ve[0]<<1|ve[0]>>>31,q=1;q<7;q++)ve[q]=ve[q]>>>4*(q-1)+3;ve[7]=ve[7]<<5|ve[7]>>>27}var Me=this._invSubKeys=[];for(q=0;q<16;q++)Me[q]=pe[15-q]},encryptBlock:function(re,ce){this._doCryptBlock(re,ce,this._subKeys)},decryptBlock:function(re,ce){this._doCryptBlock(re,ce,this._invSubKeys)},_doCryptBlock:function(re,ce,H){this._lBlock=re[ce],this._rBlock=re[ce+1],V.call(this,4,252645135),V.call(this,16,65535),z.call(this,2,858993459),z.call(this,8,16711935),V.call(this,1,1431655765);for(var q=0;q<16;q++){for(var de=H[q],pe=this._lBlock,Ce=this._rBlock,ve=0,Ue=0;Ue<8;Ue++)ve|=P[Ue][((Ce^de[Ue])&N[Ue])>>>0];this._lBlock=Ce,this._rBlock=pe^ve}var Me=this._lBlock;this._lBlock=this._rBlock,this._rBlock=Me,V.call(this,1,1431655765),z.call(this,8,16711935),z.call(this,2,858993459),V.call(this,16,65535),V.call(this,4,252645135),re[ce]=this._lBlock,re[ce+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function V(re,ce){var H=(this._lBlock>>>re^this._rBlock)&ce;this._rBlock^=H,this._lBlock^=H<<re}function z(re,ce){var H=(this._rBlock>>>re^this._lBlock)&ce;this._lBlock^=H,this._rBlock^=H<<re}M.DES=ie._createHelper(S);var J=W.TripleDES=ie.extend({_doReset:function(){var ce=this._key.words;if(2!==ce.length&&4!==ce.length&&ce.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var H=ce.slice(0,2),q=ce.length<4?ce.slice(0,2):ce.slice(2,4),de=ce.length<6?ce.slice(0,2):ce.slice(4,6);this._des1=S.createEncryptor(Q.create(H)),this._des2=S.createEncryptor(Q.create(q)),this._des3=S.createEncryptor(Q.create(de))},encryptBlock:function(re,ce){this._des1.encryptBlock(re,ce),this._des2.decryptBlock(re,ce),this._des3.encryptBlock(re,ce)},decryptBlock:function(re,ce){this._des3.decryptBlock(re,ce),this._des2.encryptBlock(re,ce),this._des1.decryptBlock(re,ce)},keySize:6,ivSize:2,blockSize:2});M.TripleDES=ie._createHelper(J)}(),a.TripleDES)},4615:function(Ve,me,O){var Q,ie,W,ee,a;Ve.exports=(a=O(1823),ie=(Q=a.lib).Base,W=Q.WordArray,(ee=a.x64={}).Word=ie.extend({init:function(P,N){this.high=P,this.low=N}}),ee.WordArray=ie.extend({init:function(P,N){P=this.words=P||[],this.sigBytes=null!=N?N:8*P.length},toX32:function(){for(var P=this.words,N=P.length,S=[],V=0;V<N;V++){var z=P[V];S.push(z.high),S.push(z.low)}return W.create(S,this.sigBytes)},clone:function(){for(var P=ie.clone.call(this),N=P.words=this.words.slice(0),S=N.length,V=0;V<S;V++)N[V]=N[V].clone();return P}}),a)},8873:function(Ve){Ve.exports=function(){"use strict";var O=6e4,a=36e5,M="millisecond",k="second",Q="minute",ie="hour",W="day",ee="week",L="month",U="quarter",P="year",N="date",S="Invalid Date",V=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,z=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,J={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},re=function(Ae,be,ue){var Ee=String(Ae);return!Ee||Ee.length>=be?Ae:""+Array(be+1-Ee.length).join(ue)+Ae},ce={s:re,z:function(Ae){var be=-Ae.utcOffset(),ue=Math.abs(be),Ee=Math.floor(ue/60),_e=ue%60;return(be<=0?"+":"-")+re(Ee,2,"0")+":"+re(_e,2,"0")},m:function Ae(be,ue){if(be.date()<ue.date())return-Ae(ue,be);var Ee=12*(ue.year()-be.year())+(ue.month()-be.month()),_e=be.clone().add(Ee,L),xe=ue-_e<0,Ie=be.clone().add(Ee+(xe?-1:1),L);return+(-(Ee+(ue-_e)/(xe?_e-Ie:Ie-_e))||0)},a:function(Ae){return Ae<0?Math.ceil(Ae)||0:Math.floor(Ae)},p:function(Ae){return{M:L,y:P,w:ee,d:W,D:N,h:ie,m:Q,s:k,ms:M,Q:U}[Ae]||String(Ae||"").toLowerCase().replace(/s$/,"")},u:function(Ae){return void 0===Ae}},H="en",q={};q[H]=J;var de=function(Ae){return Ae instanceof Ue},pe=function Ae(be,ue,Ee){var _e;if(!be)return H;if("string"==typeof be){var xe=be.toLowerCase();q[xe]&&(_e=xe),ue&&(q[xe]=ue,_e=xe);var Ie=be.split("-");if(!_e&&Ie.length>1)return Ae(Ie[0])}else{var Qe=be.name;q[Qe]=be,_e=Qe}return!Ee&&_e&&(H=_e),_e||!Ee&&H},Ce=function(Ae,be){if(de(Ae))return Ae.clone();var ue="object"==typeof be?be:{};return ue.date=Ae,ue.args=arguments,new Ue(ue)},ve=ce;ve.l=pe,ve.i=de,ve.w=function(Ae,be){return Ce(Ae,{locale:be.$L,utc:be.$u,x:be.$x,$offset:be.$offset})};var Ue=function(){function Ae(ue){this.$L=pe(ue.locale,null,!0),this.parse(ue)}var be=Ae.prototype;return be.parse=function(ue){this.$d=function(Ee){var _e=Ee.date,xe=Ee.utc;if(null===_e)return new Date(NaN);if(ve.u(_e))return new Date;if(_e instanceof Date)return new Date(_e);if("string"==typeof _e&&!/Z$/i.test(_e)){var Ie=_e.match(V);if(Ie){var Qe=Ie[2]-1||0,ht=(Ie[7]||"0").substring(0,3);return xe?new Date(Date.UTC(Ie[1],Qe,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,ht)):new Date(Ie[1],Qe,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,ht)}}return new Date(_e)}(ue),this.$x=ue.x||{},this.init()},be.init=function(){var ue=this.$d;this.$y=ue.getFullYear(),this.$M=ue.getMonth(),this.$D=ue.getDate(),this.$W=ue.getDay(),this.$H=ue.getHours(),this.$m=ue.getMinutes(),this.$s=ue.getSeconds(),this.$ms=ue.getMilliseconds()},be.$utils=function(){return ve},be.isValid=function(){return this.$d.toString()!==S},be.isSame=function(ue,Ee){var _e=Ce(ue);return this.startOf(Ee)<=_e&&_e<=this.endOf(Ee)},be.isAfter=function(ue,Ee){return Ce(ue)<this.startOf(Ee)},be.isBefore=function(ue,Ee){return this.endOf(Ee)<Ce(ue)},be.$g=function(ue,Ee,_e){return ve.u(ue)?this[Ee]:this.set(_e,ue)},be.unix=function(){return Math.floor(this.valueOf()/1e3)},be.valueOf=function(){return this.$d.getTime()},be.startOf=function(ue,Ee){var _e=this,xe=!!ve.u(Ee)||Ee,Ie=ve.p(ue),Qe=function(Mt,yt){var Ct=ve.w(_e.$u?Date.UTC(_e.$y,yt,Mt):new Date(_e.$y,yt,Mt),_e);return xe?Ct:Ct.endOf(W)},ht=function(Mt,yt){return ve.w(_e.toDate()[Mt].apply(_e.toDate("s"),(xe?[0,0,0,0]:[23,59,59,999]).slice(yt)),_e)},ct=this.$W,Oe=this.$M,Fe=this.$D,Re="set"+(this.$u?"UTC":"");switch(Ie){case P:return xe?Qe(1,0):Qe(31,11);case L:return xe?Qe(1,Oe):Qe(0,Oe+1);case ee:var We=this.$locale().weekStart||0,Jt=(ct<We?ct+7:ct)-We;return Qe(xe?Fe-Jt:Fe+(6-Jt),Oe);case W:case N:return ht(Re+"Hours",0);case ie:return ht(Re+"Minutes",1);case Q:return ht(Re+"Seconds",2);case k:return ht(Re+"Milliseconds",3);default:return this.clone()}},be.endOf=function(ue){return this.startOf(ue,!1)},be.$set=function(ue,Ee){var _e,xe=ve.p(ue),Ie="set"+(this.$u?"UTC":""),Qe=(_e={},_e[W]=Ie+"Date",_e[N]=Ie+"Date",_e[L]=Ie+"Month",_e[P]=Ie+"FullYear",_e[ie]=Ie+"Hours",_e[Q]=Ie+"Minutes",_e[k]=Ie+"Seconds",_e[M]=Ie+"Milliseconds",_e)[xe],ht=xe===W?this.$D+(Ee-this.$W):Ee;if(xe===L||xe===P){var ct=this.clone().set(N,1);ct.$d[Qe](ht),ct.init(),this.$d=ct.set(N,Math.min(this.$D,ct.daysInMonth())).$d}else Qe&&this.$d[Qe](ht);return this.init(),this},be.set=function(ue,Ee){return this.clone().$set(ue,Ee)},be.get=function(ue){return this[ve.p(ue)]()},be.add=function(ue,Ee){var _e,xe=this;ue=Number(ue);var Ie=ve.p(Ee),Qe=function(Oe){var Fe=Ce(xe);return ve.w(Fe.date(Fe.date()+Math.round(Oe*ue)),xe)};if(Ie===L)return this.set(L,this.$M+ue);if(Ie===P)return this.set(P,this.$y+ue);if(Ie===W)return Qe(1);if(Ie===ee)return Qe(7);var ht=(_e={},_e[Q]=O,_e[ie]=a,_e[k]=1e3,_e)[Ie]||1,ct=this.$d.getTime()+ue*ht;return ve.w(ct,this)},be.subtract=function(ue,Ee){return this.add(-1*ue,Ee)},be.format=function(ue){var Ee=this,_e=this.$locale();if(!this.isValid())return _e.invalidDate||S;var xe=ue||"YYYY-MM-DDTHH:mm:ssZ",Ie=ve.z(this),Qe=this.$H,ht=this.$m,ct=this.$M,Oe=_e.weekdays,Fe=_e.months,Re=function(yt,Ct,Xt,qt){return yt&&(yt[Ct]||yt(Ee,xe))||Xt[Ct].slice(0,qt)},We=function(yt){return ve.s(Qe%12||12,yt,"0")},Jt=_e.meridiem||function(yt,Ct,Xt){var qt=yt<12?"AM":"PM";return Xt?qt.toLowerCase():qt},Mt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ct+1,MM:ve.s(ct+1,2,"0"),MMM:Re(_e.monthsShort,ct,Fe,3),MMMM:Re(Fe,ct),D:this.$D,DD:ve.s(this.$D,2,"0"),d:String(this.$W),dd:Re(_e.weekdaysMin,this.$W,Oe,2),ddd:Re(_e.weekdaysShort,this.$W,Oe,3),dddd:Oe[this.$W],H:String(Qe),HH:ve.s(Qe,2,"0"),h:We(1),hh:We(2),a:Jt(Qe,ht,!0),A:Jt(Qe,ht,!1),m:String(ht),mm:ve.s(ht,2,"0"),s:String(this.$s),ss:ve.s(this.$s,2,"0"),SSS:ve.s(this.$ms,3,"0"),Z:Ie};return xe.replace(z,function(yt,Ct){return Ct||Mt[yt]||Ie.replace(":","")})},be.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},be.diff=function(ue,Ee,_e){var xe,Ie=ve.p(Ee),Qe=Ce(ue),ht=(Qe.utcOffset()-this.utcOffset())*O,ct=this-Qe,Oe=ve.m(this,Qe);return Oe=(xe={},xe[P]=Oe/12,xe[L]=Oe,xe[U]=Oe/3,xe[ee]=(ct-ht)/6048e5,xe[W]=(ct-ht)/864e5,xe[ie]=ct/a,xe[Q]=ct/O,xe[k]=ct/1e3,xe)[Ie]||ct,_e?Oe:ve.a(Oe)},be.daysInMonth=function(){return this.endOf(L).$D},be.$locale=function(){return q[this.$L]},be.locale=function(ue,Ee){if(!ue)return this.$L;var _e=this.clone(),xe=pe(ue,Ee,!0);return xe&&(_e.$L=xe),_e},be.clone=function(){return ve.w(this.$d,this)},be.toDate=function(){return new Date(this.valueOf())},be.toJSON=function(){return this.isValid()?this.toISOString():null},be.toISOString=function(){return this.$d.toISOString()},be.toString=function(){return this.$d.toUTCString()},Ae}(),Me=Ue.prototype;return Ce.prototype=Me,[["$ms",M],["$s",k],["$m",Q],["$H",ie],["$W",W],["$M",L],["$y",P],["$D",N]].forEach(function(Ae){Me[Ae[1]]=function(be){return this.$g(be,Ae[0],Ae[1])}}),Ce.extend=function(Ae,be){return Ae.$i||(Ae(be,Ue,Ce),Ae.$i=!0),Ce},Ce.locale=pe,Ce.isDayjs=de,Ce.unix=function(Ae){return Ce(1e3*Ae)},Ce.en=q[H],Ce.Ls=q,Ce.p={},Ce}()},4292:function(Ve){Ve.exports=function(){"use strict";var me={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},O=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,M=/\d\d?/,k=/\d*[^\s\d-_:/()]+/,Q={},ie=function(S){return(S=+S)+(S>68?1900:2e3)},W=function(S){return function(V){this[S]=+V}},ee=[/[+-]\d\d:?(\d\d)?|Z/,function(S){(this.zone||(this.zone={})).offset=function(V){if(!V||"Z"===V)return 0;var z=V.match(/([+-]|\d\d)/g),J=60*z[1]+(+z[2]||0);return 0===J?0:"+"===z[0]?-J:J}(S)}],L=function(S){var V=Q[S];return V&&(V.indexOf?V:V.s.concat(V.f))},U=function(S,V){var z,J=Q.meridiem;if(J){for(var re=1;re<=24;re+=1)if(S.indexOf(J(re,0,V))>-1){z=re>12;break}}else z=S===(V?"pm":"PM");return z},P={A:[k,function(S){this.afternoon=U(S,!1)}],a:[k,function(S){this.afternoon=U(S,!0)}],S:[/\d/,function(S){this.milliseconds=100*+S}],SS:[a,function(S){this.milliseconds=10*+S}],SSS:[/\d{3}/,function(S){this.milliseconds=+S}],s:[M,W("seconds")],ss:[M,W("seconds")],m:[M,W("minutes")],mm:[M,W("minutes")],H:[M,W("hours")],h:[M,W("hours")],HH:[M,W("hours")],hh:[M,W("hours")],D:[M,W("day")],DD:[a,W("day")],Do:[k,function(S){var V=Q.ordinal,z=S.match(/\d+/);if(this.day=z[0],V)for(var J=1;J<=31;J+=1)V(J).replace(/\[|\]/g,"")===S&&(this.day=J)}],M:[M,W("month")],MM:[a,W("month")],MMM:[k,function(S){var V=L("months"),z=(L("monthsShort")||V.map(function(J){return J.slice(0,3)})).indexOf(S)+1;if(z<1)throw new Error;this.month=z%12||z}],MMMM:[k,function(S){var V=L("months").indexOf(S)+1;if(V<1)throw new Error;this.month=V%12||V}],Y:[/[+-]?\d+/,W("year")],YY:[a,function(S){this.year=ie(S)}],YYYY:[/\d{4}/,W("year")],Z:ee,ZZ:ee};return function(S,V,z){z.p.customParseFormat=!0,S&&S.parseTwoDigitYear&&(ie=S.parseTwoDigitYear);var J=V.prototype,re=J.parse;J.parse=function(ce){var H=ce.date,q=ce.utc,de=ce.args;this.$u=q;var pe=de[1];if("string"==typeof pe){var Ce=!0===de[2],ve=!0===de[3],Ue=Ce||ve,Me=de[2];ve&&(Me=de[2]),Q=this.$locale(),!Ce&&Me&&(Q=z.Ls[Me]),this.$d=function(Ee,_e,xe){try{if(["x","X"].indexOf(_e)>-1)return new Date(("X"===_e?1e3:1)*Ee);var Ie=function(S){var z;z=Q&&Q.formats;for(var J=(S=S.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Ce,ve,Ue){var Me=Ue&&Ue.toUpperCase();return ve||z[Ue]||me[Ue]||z[Me].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Ae,be,ue){return be||ue.slice(1)})})).match(O),re=J.length,ce=0;ce<re;ce+=1){var H=J[ce],q=P[H],pe=q&&q[1];J[ce]=pe?{regex:q&&q[0],parser:pe}:H.replace(/^\[|\]$/g,"")}return function(Ce){for(var ve={},Ue=0,Me=0;Ue<re;Ue+=1){var Ae=J[Ue];if("string"==typeof Ae)Me+=Ae.length;else{var be=Ae.regex,ue=Ae.parser,Ee=Ce.slice(Me),_e=be.exec(Ee)[0];ue.call(ve,_e),Ce=Ce.replace(_e,"")}}return function(xe){var Ie=xe.afternoon;if(void 0!==Ie){var Qe=xe.hours;Ie?Qe<12&&(xe.hours+=12):12===Qe&&(xe.hours=0),delete xe.afternoon}}(ve),ve}}(_e)(Ee),Qe=Ie.year,ht=Ie.month,ct=Ie.day,Oe=Ie.hours,Fe=Ie.minutes,Re=Ie.seconds,We=Ie.milliseconds,Jt=Ie.zone,Mt=new Date,yt=ct||(Qe||ht?1:Mt.getDate()),Ct=Qe||Mt.getFullYear(),Xt=0;Qe&&!ht||(Xt=ht>0?ht-1:Mt.getMonth());var qt=Oe||0,an=Fe||0,Tn=Re||0,er=We||0;return Jt?new Date(Date.UTC(Ct,Xt,yt,qt,an,Tn,er+60*Jt.offset*1e3)):xe?new Date(Date.UTC(Ct,Xt,yt,qt,an,Tn,er)):new Date(Ct,Xt,yt,qt,an,Tn,er)}catch(Nn){return new Date("")}}(H,pe,q),this.init(),Me&&!0!==Me&&(this.$L=this.locale(Me).$L),Ue&&H!=this.format(pe)&&(this.$d=new Date("")),Q={}}else if(pe instanceof Array)for(var Ae=pe.length,be=1;be<=Ae;be+=1){de[1]=pe[be-1];var ue=z.apply(this,de);if(ue.isValid()){this.$d=ue.$d,this.$L=ue.$L,this.init();break}be===Ae&&(this.$d=new Date(""))}else re.call(this,ce)}}}()},2329:(Ve,me,O)=>{"use strict";O.d(me,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=O(8026);(0,a.registerVersion)("firebase","9.6.11","app")},7841:(Ve,me,O)=>{"use strict";O.d(me,{Z:()=>a.Z});var a=O(3394);a.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(Ve,me,O)=>{"use strict";O.r(me);var a=O(8239),M=O(3394),k=O(982),Q=O(3854),ee=(O(8026),O(5422),O(3910));function L(){return window}function N(){return(N=(0,a.Z)(function*(X,te,se){var Se;const{BuildInfo:Xe}=L();(0,k.ap)(te.sessionId,"AuthEvent did not contain a session ID");const Et=yield H(te.sessionId),Rt={};return(0,k.aq)()?Rt.ibi=Xe.packageName:(0,k.ar)()?Rt.apn=Xe.packageName:(0,k.as)(X,"operation-not-supported-in-this-environment"),Xe.displayName&&(Rt.appDisplayName=Xe.displayName),Rt.sessionId=Et,(0,k.at)(X,se,te.type,void 0,null!==(Se=te.eventId)&&void 0!==Se?Se:void 0,Rt)})).apply(this,arguments)}function V(){return(V=(0,a.Z)(function*(X){const{BuildInfo:te}=L(),se={};(0,k.aq)()?se.iosBundleId=te.packageName:(0,k.ar)()?se.androidPackageName=te.packageName:(0,k.as)(X,"operation-not-supported-in-this-environment"),yield(0,k.au)(X,se)})).apply(this,arguments)}function re(){return(re=(0,a.Z)(function*(X,te,se){const{cordova:Se}=L();let Xe=()=>{};try{yield new Promise((Et,Rt)=>{let at=null;function tn(){var yn;Et();const rr=null===(yn=Se.plugins.browsertab)||void 0===yn?void 0:yn.close;"function"==typeof rr&&rr(),"function"==typeof(null==se?void 0:se.close)&&se.close()}function Hn(){at||(at=window.setTimeout(()=>{Rt((0,k.av)(X,"redirect-cancelled-by-user"))},2e3))}function On(){"visible"===(null==document?void 0:document.visibilityState)&&Hn()}te.addPassiveListener(tn),document.addEventListener("resume",Hn,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",On,!1),Xe=()=>{te.removePassiveListener(tn),document.removeEventListener("resume",Hn,!1),document.removeEventListener("visibilitychange",On,!1),at&&window.clearTimeout(at)}})}finally{Xe()}})).apply(this,arguments)}function H(X){return q.apply(this,arguments)}function q(){return(q=(0,a.Z)(function*(X){const te=de(X),se=yield crypto.subtle.digest("SHA-256",te);return Array.from(new Uint8Array(se)).map(Xe=>Xe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function de(X){if((0,k.ap)(/[0-9a-zA-Z]+/.test(X),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(X);const te=new ArrayBuffer(X.length),se=new Uint8Array(te);for(let Se=0;Se<X.length;Se++)se[Se]=X.charCodeAt(Se);return se}class Ce extends k.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(te=>{this.resolveInialized=te})}addPassiveListener(te){this.passiveListeners.add(te)}removePassiveListener(te){this.passiveListeners.delete(te)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(te){return this.resolveInialized(),this.passiveListeners.forEach(se=>se(te)),super.onEvent(te)}initialized(){var te=this;return(0,a.Z)(function*(){yield te.initPromise})()}}function Me(X){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,a.Z)(function*(X){const te=yield Ee()._get(_e(X));return te&&(yield Ee()._remove(_e(X))),te})).apply(this,arguments)}function ue(){const X=[],te="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let se=0;se<20;se++){const Se=Math.floor(Math.random()*te.length);X.push(te.charAt(Se))}return X.join("")}function Ee(){return(0,k.ax)(k.b)}function _e(X){return(0,k.ay)("authEvent",X.config.apiKey,X.name)}function Qe(X){if(!(null==X?void 0:X.includes("?")))return{};const[te,...se]=X.split("?");return(0,Q.zd)(se.join("?"))}function Fe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.av)("no-auth-event")}}function yt(){var X;return(null===(X=null==self?void 0:self.location)||void 0===X?void 0:X.protocol)||null}function Xt(X=(0,Q.z$)()){return!("file:"!==yt()&&"ionic:"!==yt()||!X.toLowerCase().match(/iphone|ipad|ipod|android/))}function Nn(){try{const X=self.localStorage,te=k.aG();if(X)return X.setItem(te,"1"),X.removeItem(te),!function(X=(0,Q.z$)()){return(0,Q.w1)()&&11===(null==document?void 0:document.documentMode)||function(X=(0,Q.z$)()){return/Edge\/\d+/.test(X)}(X)}()||(0,Q.hl)()}catch(X){return Zn()&&(0,Q.hl)()}return!1}function Zn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ze(){return("http:"===yt()||"https:"===yt()||(0,Q.ru)()||Xt())&&!((0,Q.b$)()||(0,Q.UG)())&&Nn()&&!Zn()}function zn(){return Xt()&&"undefined"!=typeof document}function pt(){return(pt=(0,a.Z)(function*(){return!!zn()&&new Promise(X=>{const te=setTimeout(()=>{X(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(te),X(!0)})})})).apply(this,arguments)}const mn={LOCAL:"local",NONE:"none",SESSION:"session"},ln=k.aw,tr="persistence";function ar(X){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,a.Z)(function*(X){yield X._initializationPromise;const te=En(),se=k.ay(tr,X.config.apiKey,X.name);te&&te.setItem(se,X._getPersistence())})).apply(this,arguments)}function En(){var X;try{return(null===(X="undefined"!=typeof window?window:null)||void 0===X?void 0:X.sessionStorage)||null}catch(te){return null}}const it=k.aw;class Dt{constructor(){this.browserResolver=k.ax(k.k),this.cordovaResolver=k.ax(class{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aA}_initialize(te){var se=this;return(0,a.Z)(function*(){const Se=te._key();let Xe=se.eventManagers.get(Se);return Xe||(Xe=new Ce(te),se.eventManagers.set(Se,Xe),se.attachCallbackListeners(te,Xe)),Xe})()}_openPopup(te){(0,k.as)(te,"operation-not-supported-in-this-environment")}_openRedirect(te,se,Se,Xe){var Et=this;return(0,a.Z)(function*(){!function(X){var te,se,Se,Xe,Et,Rt,at,tn,Hn,On;const yn=L();(0,k.aw)("function"==typeof(null===(te=null==yn?void 0:yn.universalLinks)||void 0===te?void 0:te.subscribe),X,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aw)(void 0!==(null===(se=null==yn?void 0:yn.BuildInfo)||void 0===se?void 0:se.packageName),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aw)("function"==typeof(null===(Et=null===(Xe=null===(Se=null==yn?void 0:yn.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===Et?void 0:Et.openUrl),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(tn=null===(at=null===(Rt=null==yn?void 0:yn.cordova)||void 0===Rt?void 0:Rt.plugins)||void 0===at?void 0:at.browsertab)||void 0===tn?void 0:tn.isAvailable),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(On=null===(Hn=null==yn?void 0:yn.cordova)||void 0===Hn?void 0:Hn.InAppBrowser)||void 0===On?void 0:On.open),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(te);const Rt=yield Et._initialize(te);yield Rt.initialized(),Rt.resetRedirect(),(0,k.aB)(),yield Et._originValidation(te);const at=function(X,te,se=null){return{type:te,eventId:se,urlResponse:null,sessionId:ue(),postBody:null,tenantId:X.tenantId,error:(0,k.av)(X,"no-auth-event")}}(te,Se,Xe);yield function(X,te){return Ee()._set(_e(X),te)}(te,at);const tn=yield function(X,te,se){return N.apply(this,arguments)}(te,at,se),Hn=yield function(X){const{cordova:te}=L();return new Promise(se=>{te.plugins.browsertab.isAvailable(Se=>{let Xe=null;Se?te.plugins.browsertab.openUrl(X):Xe=te.InAppBrowser.open(X,(0,k.ao)()?"_blank":"_system","location=yes"),se(Xe)})})}(tn);return function(X,te,se){return re.apply(this,arguments)}(te,Rt,Hn)})()}_isIframeWebStorageSupported(te,se){throw new Error("Method not implemented.")}_originValidation(te){const se=te._key();return this.originValidationPromises[se]||(this.originValidationPromises[se]=function(X){return V.apply(this,arguments)}(te)),this.originValidationPromises[se]}attachCallbackListeners(te,se){const{universalLinks:Se,handleOpenURL:Xe,BuildInfo:Et}=L(),Rt=setTimeout((0,a.Z)(function*(){yield Me(te),se.onEvent(Fe())}),500),at=function(){var On=(0,a.Z)(function*(yn){clearTimeout(Rt);const rr=yield Me(te);let ot=null;rr&&(null==yn?void 0:yn.url)&&(ot=function(X,te){var se,Se;const Xe=function(X){const te=Qe(X),se=te.link?decodeURIComponent(te.link):void 0,Se=Qe(se).link,Xe=te.deep_link_id?decodeURIComponent(te.deep_link_id):void 0;return Qe(Xe).link||Xe||Se||se||X}(te);if(Xe.includes("/__/auth/callback")){const Et=Qe(Xe),Rt=Et.firebaseError?function(X){try{return JSON.parse(X)}catch(te){return null}}(decodeURIComponent(Et.firebaseError)):null,at=null===(Se=null===(se=null==Rt?void 0:Rt.code)||void 0===se?void 0:se.split("auth/"))||void 0===Se?void 0:Se[1],tn=at?(0,k.av)(at):null;return tn?{type:X.type,eventId:X.eventId,tenantId:X.tenantId,error:tn,urlResponse:null,sessionId:null,postBody:null}:{type:X.type,eventId:X.eventId,tenantId:X.tenantId,sessionId:X.sessionId,urlResponse:Xe,postBody:null}}return null}(rr,yn.url)),se.onEvent(ot||Fe())});return function(rr){return On.apply(this,arguments)}}();void 0!==Se&&"function"==typeof Se.subscribe&&Se.subscribe(null,at);const tn=Xe,Hn=`${Et.packageName.toLowerCase()}://`;L().handleOpenURL=function(){var On=(0,a.Z)(function*(yn){if(yn.toLowerCase().startsWith(Hn)&&at({url:yn}),"function"==typeof tn)try{tn(yn)}catch(rr){console.error(rr)}});return function(yn){return On.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aA}_initialize(te){var se=this;return(0,a.Z)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._initialize(te)})()}_openPopup(te,se,Se,Xe){var Et=this;return(0,a.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openPopup(te,se,Se,Xe)})()}_openRedirect(te,se,Se,Xe){var Et=this;return(0,a.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openRedirect(te,se,Se,Xe)})()}_isIframeWebStorageSupported(te,se){this.assertedUnderlyingResolver._isIframeWebStorageSupported(te,se)}_originValidation(te){return this.assertedUnderlyingResolver._originValidation(te)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return it(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var te=this;return(0,a.Z)(function*(){if(te.underlyingResolver)return;const se=yield function(){return pt.apply(this,arguments)}();te.underlyingResolver=se?te.cordovaResolver:te.browserResolver})()}}function Nr(X){return X.unwrap()}function _n(X){return pr(X)}function pr(X){const{_tokenResponse:te}=X instanceof Q.ZR?X.customData:X;if(!te)return null;if(!(X instanceof Q.ZR)&&"temporaryProof"in te&&"phoneNumber"in te)return k.P.credentialFromResult(X);const se=te.providerId;if(!se||se===k.o.PASSWORD)return null;let Se;switch(se){case k.o.GOOGLE:Se=k.N;break;case k.o.FACEBOOK:Se=k.M;break;case k.o.GITHUB:Se=k.Q;break;case k.o.TWITTER:Se=k.V;break;default:const{oauthIdToken:Xe,oauthAccessToken:Et,oauthTokenSecret:Rt,pendingToken:at,nonce:tn}=te;return Et||Rt||Xe||at?at?se.startsWith("saml.")?k.aJ._create(se,at):k.I._fromParams({providerId:se,signInMethod:se,pendingToken:at,idToken:Xe,accessToken:Et}):new k.T(se).credential({idToken:Xe,accessToken:Et,rawNonce:tn}):null}return X instanceof Q.ZR?Se.credentialFromError(X):Se.credentialFromResult(X)}function nr(X,te){return te.catch(se=>{throw se instanceof Q.ZR&&function(X,te){var se;const Se=null===(se=te.customData)||void 0===se?void 0:se._tokenResponse;if("auth/multi-factor-auth-required"===te.code)te.resolver=new Zt(X,k.am(X,te));else if(Se){const Xe=pr(te),Et=te;Xe&&(Et.credential=Xe,Et.tenantId=Se.tenantId||void 0,Et.email=Se.email||void 0,Et.phoneNumber=Se.phoneNumber||void 0)}}(X,se),se}).then(se=>{const Xe=se.user;return{operationType:se.operationType,credential:_n(se),additionalUserInfo:k.ak(se),user:rt.getOrCreate(Xe)}})}function cn(X,te){return At.apply(this,arguments)}function At(){return(At=(0,a.Z)(function*(X,te){const se=yield te;return{verificationId:se.verificationId,confirm:Se=>nr(X,se.confirm(Se))}})).apply(this,arguments)}class Zt{constructor(te,se){this.resolver=se,this.auth=te.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(te){return nr(Nr(this.auth),this.resolver.resolveSignIn(te))}}class rt{constructor(te){this._delegate=te,this.multiFactor=k.an(te)}static getOrCreate(te){return rt.USER_MAP.has(te)||rt.USER_MAP.set(te,new rt(te)),rt.USER_MAP.get(te)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(te){return this._delegate.getIdTokenResult(te)}getIdToken(te){return this._delegate.getIdToken(te)}linkAndRetrieveDataWithCredential(te){return this.linkWithCredential(te)}linkWithCredential(te){var se=this;return(0,a.Z)(function*(){return nr(se.auth,k.Y(se._delegate,te))})()}linkWithPhoneNumber(te,se){var Se=this;return(0,a.Z)(function*(){return cn(Se.auth,k.l(Se._delegate,te,se))})()}linkWithPopup(te){var se=this;return(0,a.Z)(function*(){return nr(se.auth,k.d(se._delegate,te,Dt))})()}linkWithRedirect(te){var se=this;return(0,a.Z)(function*(){return yield ar(k.aC(se.auth)),k.g(se._delegate,te,Dt)})()}reauthenticateAndRetrieveDataWithCredential(te){return this.reauthenticateWithCredential(te)}reauthenticateWithCredential(te){var se=this;return(0,a.Z)(function*(){return nr(se.auth,k.Z(se._delegate,te))})()}reauthenticateWithPhoneNumber(te,se){return cn(this.auth,k.r(this._delegate,te,se))}reauthenticateWithPopup(te){return nr(this.auth,k.e(this._delegate,te,Dt))}reauthenticateWithRedirect(te){var se=this;return(0,a.Z)(function*(){return yield ar(k.aC(se.auth)),k.h(se._delegate,te,Dt)})()}sendEmailVerification(te){return k.aa(this._delegate,te)}unlink(te){var se=this;return(0,a.Z)(function*(){return yield k.aj(se._delegate,te),se})()}updateEmail(te){return k.af(this._delegate,te)}updatePassword(te){return k.ag(this._delegate,te)}updatePhoneNumber(te){return k.u(this._delegate,te)}updateProfile(te){return k.ae(this._delegate,te)}verifyBeforeUpdateEmail(te,se){return k.ab(this._delegate,te,se)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rt.USER_MAP=new WeakMap;const qe=k.aw;let mt=(()=>{class X{constructor(se,Se){if(this.app=se,Se.isInitialized())return this._delegate=Se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Xe}=se.options;qe(Xe,"invalid-api-key",{appName:se.name}),qe(Xe,"invalid-api-key",{appName:se.name});const Et="undefined"!=typeof window?Dt:void 0;this._delegate=Se.initialize({options:{persistence:Lt(Xe,se.name),popupRedirectResolver:Et}}),this._delegate._updateErrorMap(k.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(se){this._delegate.languageCode=se}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(se){this._delegate.tenantId=se}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(se,Se){k.E(this._delegate,se,Se)}applyActionCode(se){return k.a1(this._delegate,se)}checkActionCode(se){return k.a2(this._delegate,se)}confirmPasswordReset(se,Se){return k.a0(this._delegate,se,Se)}createUserWithEmailAndPassword(se,Se){var Xe=this;return(0,a.Z)(function*(){return nr(Xe._delegate,k.a4(Xe._delegate,se,Se))})()}fetchProvidersForEmail(se){return this.fetchSignInMethodsForEmail(se)}fetchSignInMethodsForEmail(se){return k.a9(this._delegate,se)}isSignInWithEmailLink(se){return k.a7(this._delegate,se)}getRedirectResult(){var se=this;return(0,a.Z)(function*(){qe(ze(),se._delegate,"operation-not-supported-in-this-environment");const Se=yield k.j(se._delegate,Dt);return Se?nr(se._delegate,Promise.resolve(Se)):{credential:null,user:null}})()}addFrameworkForLogging(se){!function(X,te){(0,k.aC)(X)._logFramework(te)}(this._delegate,se)}onAuthStateChanged(se,Se,Xe){const{next:Et,error:Rt,complete:at}=Nt(se,Se,Xe);return this._delegate.onAuthStateChanged(Et,Rt,at)}onIdTokenChanged(se,Se,Xe){const{next:Et,error:Rt,complete:at}=Nt(se,Se,Xe);return this._delegate.onIdTokenChanged(Et,Rt,at)}sendSignInLinkToEmail(se,Se){return k.a6(this._delegate,se,Se)}sendPasswordResetEmail(se,Se){return k.$(this._delegate,se,Se||void 0)}setPersistence(se){var Se=this;return(0,a.Z)(function*(){let Xe;switch(function(X,te){ln(Object.values(mn).includes(te),X,"invalid-persistence-type"),(0,Q.b$)()?ln(te!==mn.SESSION,X,"unsupported-persistence-type"):(0,Q.UG)()?ln(te===mn.NONE,X,"unsupported-persistence-type"):Zn()?ln(te===mn.NONE||te===mn.LOCAL&&(0,Q.hl)(),X,"unsupported-persistence-type"):ln(te===mn.NONE||Nn(),X,"unsupported-persistence-type")}(Se._delegate,se),se){case mn.SESSION:Xe=k.a;break;case mn.LOCAL:Xe=(yield k.ax(k.i)._isAvailable())?k.i:k.b;break;case mn.NONE:Xe=k.K;break;default:return k.as("argument-error",{appName:Se._delegate.name})}return Se._delegate.setPersistence(Xe)})()}signInAndRetrieveDataWithCredential(se){return this.signInWithCredential(se)}signInAnonymously(){return nr(this._delegate,k.W(this._delegate))}signInWithCredential(se){return nr(this._delegate,k.X(this._delegate,se))}signInWithCustomToken(se){return nr(this._delegate,k._(this._delegate,se))}signInWithEmailAndPassword(se,Se){return nr(this._delegate,k.a5(this._delegate,se,Se))}signInWithEmailLink(se,Se){return nr(this._delegate,k.a8(this._delegate,se,Se))}signInWithPhoneNumber(se,Se){return cn(this._delegate,k.s(this._delegate,se,Se))}signInWithPopup(se){var Se=this;return(0,a.Z)(function*(){return qe(ze(),Se._delegate,"operation-not-supported-in-this-environment"),nr(Se._delegate,k.c(Se._delegate,se,Dt))})()}signInWithRedirect(se){var Se=this;return(0,a.Z)(function*(){return qe(ze(),Se._delegate,"operation-not-supported-in-this-environment"),yield ar(Se._delegate),k.f(Se._delegate,se,Dt)})()}updateCurrentUser(se){return this._delegate.updateCurrentUser(se)}verifyPasswordResetCode(se){return k.a3(this._delegate,se)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return X.Persistence=mn,X})();function Nt(X,te,se){let Se=X;"function"!=typeof X&&({next:Se,error:te,complete:se}=X);const Xe=Se;return{next:Rt=>Xe(Rt&&rt.getOrCreate(Rt)),error:te,complete:se}}function Lt(X,te){const se=function(X,te){const se=En();if(!se)return[];const Se=k.ay(tr,X,te);switch(se.getItem(Se)){case mn.NONE:return[k.K];case mn.LOCAL:return[k.i,k.a];case mn.SESSION:return[k.a];default:return[]}}(X,te);if("undefined"!=typeof self&&!se.includes(k.i)&&se.push(k.i),"undefined"!=typeof window)for(const Se of[k.b,k.a])se.includes(Se)||se.push(Se);return se.includes(k.K)||se.push(k.K),se}class en{constructor(){this.providerId="phone",this._delegate=new k.P(Nr(M.Z.auth()))}static credential(te,se){return k.P.credential(te,se)}verifyPhoneNumber(te,se){return this._delegate.verifyPhoneNumber(te,se)}unwrap(){return this._delegate}}en.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,en.PROVIDER_ID=k.P.PROVIDER_ID;const fe=k.aw;var X;(X=M.Z).INTERNAL.registerComponent(new ee.wA("auth-compat",te=>{const se=te.getProvider("app-compat").getImmediate(),Se=te.getProvider("auth");return new mt(se,Se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.L,FacebookAuthProvider:k.M,GithubAuthProvider:k.Q,GoogleAuthProvider:k.N,OAuthProvider:k.T,SAMLAuthProvider:k.U,PhoneAuthProvider:en,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:class{constructor(te,se,Se=M.Z.app()){var Xe;fe(null===(Xe=Se.options)||void 0===Xe?void 0:Xe.apiKey,"invalid-api-key",{appName:Se.name}),this._delegate=new k.R(te,se,Se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:k.V,Auth:mt,AuthCredential:k.G,Error:Q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),X.registerVersion("@firebase/auth-compat","0.2.12")},1593:(Ve,me,O)=>{"use strict";O.d(me,{P:()=>ee});var a=O(9193),M=O(5917),k=O(7574);class ee{constructor(U,P,N){this.kind=U,this.value=P,this.error=N,this.hasValue="N"===U}observe(U){switch(this.kind){case"N":return U.next&&U.next(this.value);case"E":return U.error&&U.error(this.error);case"C":return U.complete&&U.complete()}}do(U,P,N){switch(this.kind){case"N":return U&&U(this.value);case"E":return P&&P(this.error);case"C":return N&&N()}}accept(U,P,N){return U&&"function"==typeof U.next?this.observe(U):this.do(U,P,N)}toObservable(){switch(this.kind){case"N":return(0,M.of)(this.value);case"E":return L=this.error,new k.y(P=>P.error(L));case"C":return(0,a.c)()}var L;throw new Error("unexpected notification kind value")}static createNext(U){return void 0!==U?new ee("N",U):ee.undefinedValueNotification}static createError(U){return new ee("E",void 0,U)}static createComplete(){return ee.completeNotification}}ee.completeNotification=new ee("C"),ee.undefinedValueNotification=new ee("N",void 0)},7574:(Ve,me,O)=>{"use strict";O.d(me,{y:()=>N});var a=O(7393),k=O(9181),Q=O(6490),W=O(6554),ee=O(4487);var P=O(2494);let N=(()=>{class V{constructor(J){this._isScalar=!1,J&&(this._subscribe=J)}lift(J){const re=new V;return re.source=this,re.operator=J,re}subscribe(J,re,ce){const{operator:H}=this,q=function(V,z,J){if(V){if(V instanceof a.L)return V;if(V[k.b])return V[k.b]()}return V||z||J?new a.L(V,z,J):new a.L(Q.c)}(J,re,ce);if(q.add(H?H.call(q,this.source):this.source||P.v.useDeprecatedSynchronousErrorHandling&&!q.syncErrorThrowable?this._subscribe(q):this._trySubscribe(q)),P.v.useDeprecatedSynchronousErrorHandling&&q.syncErrorThrowable&&(q.syncErrorThrowable=!1,q.syncErrorThrown))throw q.syncErrorValue;return q}_trySubscribe(J){try{return this._subscribe(J)}catch(re){P.v.useDeprecatedSynchronousErrorHandling&&(J.syncErrorThrown=!0,J.syncErrorValue=re),function(V){for(;V;){const{closed:z,destination:J,isStopped:re}=V;if(z||re)return!1;V=J&&J instanceof a.L?J:null}return!0}(J)?J.error(re):console.warn(re)}}forEach(J,re){return new(re=S(re))((ce,H)=>{let q;q=this.subscribe(de=>{try{J(de)}catch(pe){H(pe),q&&q.unsubscribe()}},H,ce)})}_subscribe(J){const{source:re}=this;return re&&re.subscribe(J)}[W.L](){return this}pipe(...J){return 0===J.length?this:function(V){return 0===V.length?ee.y:1===V.length?V[0]:function(J){return V.reduce((re,ce)=>ce(re),J)}}(J)(this)}toPromise(J){return new(J=S(J))((re,ce)=>{let H;this.subscribe(q=>H=q,q=>ce(q),()=>re(H))})}}return V.create=z=>new V(z),V})();function S(V){if(V||(V=P.v.Promise||Promise),!V)throw new Error("no Promise impl found");return V}},6490:(Ve,me,O)=>{"use strict";O.d(me,{c:()=>k});var a=O(2494),M=O(4449);const k={closed:!0,next(Q){},error(Q){if(a.v.useDeprecatedSynchronousErrorHandling)throw Q;(0,M.z)(Q)},complete(){}}},9765:(Ve,me,O)=>{"use strict";O.d(me,{Yc:()=>ee,xQ:()=>L});var a=O(7574),M=O(7393),k=O(5319),Q=O(7971),ie=O(8858),W=O(9181);class ee extends M.L{constructor(N){super(N),this.destination=N}}let L=(()=>{class P extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[W.b](){return new ee(this)}lift(S){const V=new U(this,this);return V.operator=S,V}next(S){if(this.closed)throw new Q.N;if(!this.isStopped){const{observers:V}=this,z=V.length,J=V.slice();for(let re=0;re<z;re++)J[re].next(S)}}error(S){if(this.closed)throw new Q.N;this.hasError=!0,this.thrownError=S,this.isStopped=!0;const{observers:V}=this,z=V.length,J=V.slice();for(let re=0;re<z;re++)J[re].error(S);this.observers.length=0}complete(){if(this.closed)throw new Q.N;this.isStopped=!0;const{observers:S}=this,V=S.length,z=S.slice();for(let J=0;J<V;J++)z[J].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(S){if(this.closed)throw new Q.N;return super._trySubscribe(S)}_subscribe(S){if(this.closed)throw new Q.N;return this.hasError?(S.error(this.thrownError),k.w.EMPTY):this.isStopped?(S.complete(),k.w.EMPTY):(this.observers.push(S),new ie.W(this,S))}asObservable(){const S=new a.y;return S.source=this,S}}return P.create=(N,S)=>new U(N,S),P})();class U extends L{constructor(N,S){super(),this.destination=N,this.source=S}next(N){const{destination:S}=this;S&&S.next&&S.next(N)}error(N){const{destination:S}=this;S&&S.error&&this.destination.error(N)}complete(){const{destination:N}=this;N&&N.complete&&this.destination.complete()}_subscribe(N){const{source:S}=this;return S?this.source.subscribe(N):k.w.EMPTY}}},8858:(Ve,me,O)=>{"use strict";O.d(me,{W:()=>M});var a=O(5319);class M extends a.w{constructor(Q,ie){super(),this.subject=Q,this.subscriber=ie,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Q=this.subject,ie=Q.observers;if(this.subject=null,!ie||0===ie.length||Q.isStopped||Q.closed)return;const W=ie.indexOf(this.subscriber);-1!==W&&ie.splice(W,1)}}},7393:(Ve,me,O)=>{"use strict";O.d(me,{L:()=>ee});var a=O(9105),M=O(6490),k=O(5319),Q=O(9181),ie=O(2494),W=O(4449);class ee extends k.w{constructor(P,N,S){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=M.c;break;case 1:if(!P){this.destination=M.c;break}if("object"==typeof P){P instanceof ee?(this.syncErrorThrowable=P.syncErrorThrowable,this.destination=P,P.add(this)):(this.syncErrorThrowable=!0,this.destination=new L(this,P));break}default:this.syncErrorThrowable=!0,this.destination=new L(this,P,N,S)}}[Q.b](){return this}static create(P,N,S){const V=new ee(P,N,S);return V.syncErrorThrowable=!1,V}next(P){this.isStopped||this._next(P)}error(P){this.isStopped||(this.isStopped=!0,this._error(P))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(P){this.destination.next(P)}_error(P){this.destination.error(P),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:P}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=P,this}}class L extends ee{constructor(P,N,S,V){super(),this._parentSubscriber=P;let z,J=this;(0,a.m)(N)?z=N:N&&(z=N.next,S=N.error,V=N.complete,N!==M.c&&(J=Object.create(N),(0,a.m)(J.unsubscribe)&&this.add(J.unsubscribe.bind(J)),J.unsubscribe=this.unsubscribe.bind(this))),this._context=J,this._next=z,this._error=S,this._complete=V}next(P){if(!this.isStopped&&this._next){const{_parentSubscriber:N}=this;ie.v.useDeprecatedSynchronousErrorHandling&&N.syncErrorThrowable?this.__tryOrSetError(N,this._next,P)&&this.unsubscribe():this.__tryOrUnsub(this._next,P)}}error(P){if(!this.isStopped){const{_parentSubscriber:N}=this,{useDeprecatedSynchronousErrorHandling:S}=ie.v;if(this._error)S&&N.syncErrorThrowable?(this.__tryOrSetError(N,this._error,P),this.unsubscribe()):(this.__tryOrUnsub(this._error,P),this.unsubscribe());else if(N.syncErrorThrowable)S?(N.syncErrorValue=P,N.syncErrorThrown=!0):(0,W.z)(P),this.unsubscribe();else{if(this.unsubscribe(),S)throw P;(0,W.z)(P)}}}complete(){if(!this.isStopped){const{_parentSubscriber:P}=this;if(this._complete){const N=()=>this._complete.call(this._context);ie.v.useDeprecatedSynchronousErrorHandling&&P.syncErrorThrowable?(this.__tryOrSetError(P,N),this.unsubscribe()):(this.__tryOrUnsub(N),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(P,N){try{P.call(this._context,N)}catch(S){if(this.unsubscribe(),ie.v.useDeprecatedSynchronousErrorHandling)throw S;(0,W.z)(S)}}__tryOrSetError(P,N,S){if(!ie.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{N.call(this._context,S)}catch(V){return ie.v.useDeprecatedSynchronousErrorHandling?(P.syncErrorValue=V,P.syncErrorThrown=!0,!0):((0,W.z)(V),!0)}return!1}_unsubscribe(){const{_parentSubscriber:P}=this;this._context=null,this._parentSubscriber=null,P.unsubscribe()}}},5319:(Ve,me,O)=>{"use strict";O.d(me,{w:()=>W});var a=O(9796),M=O(1555),k=O(9105);const ie=(()=>{function L(U){return Error.call(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((P,N)=>`${N+1}) ${P.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U,this}return L.prototype=Object.create(Error.prototype),L})();class W{constructor(U){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,U&&(this._ctorUnsubscribe=!0,this._unsubscribe=U)}unsubscribe(){let U;if(this.closed)return;let{_parentOrParents:P,_ctorUnsubscribe:N,_unsubscribe:S,_subscriptions:V}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,P instanceof W)P.remove(this);else if(null!==P)for(let z=0;z<P.length;++z)P[z].remove(this);if((0,k.m)(S)){N&&(this._unsubscribe=void 0);try{S.call(this)}catch(z){U=z instanceof ie?ee(z.errors):[z]}}if((0,a.k)(V)){let z=-1,J=V.length;for(;++z<J;){const re=V[z];if((0,M.K)(re))try{re.unsubscribe()}catch(ce){U=U||[],ce instanceof ie?U=U.concat(ee(ce.errors)):U.push(ce)}}}if(U)throw new ie(U)}add(U){let P=U;if(!U)return W.EMPTY;switch(typeof U){case"function":P=new W(U);case"object":if(P===this||P.closed||"function"!=typeof P.unsubscribe)return P;if(this.closed)return P.unsubscribe(),P;if(!(P instanceof W)){const V=P;P=new W,P._subscriptions=[V]}break;default:throw new Error("unrecognized teardown "+U+" added to Subscription.")}let{_parentOrParents:N}=P;if(null===N)P._parentOrParents=this;else if(N instanceof W){if(N===this)return P;P._parentOrParents=[N,this]}else{if(-1!==N.indexOf(this))return P;N.push(this)}const S=this._subscriptions;return null===S?this._subscriptions=[P]:S.push(P),P}remove(U){const P=this._subscriptions;if(P){const N=P.indexOf(U);-1!==N&&P.splice(N,1)}}}var L;function ee(L){return L.reduce((U,P)=>U.concat(P instanceof ie?P.errors:P),[])}W.EMPTY=((L=new W).closed=!0,L)},2494:(Ve,me,O)=>{"use strict";O.d(me,{v:()=>M});let a=!1;const M={Promise:void 0,set useDeprecatedSynchronousErrorHandling(k){if(k){const Q=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Q.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=k},get useDeprecatedSynchronousErrorHandling(){return a}}},5345:(Ve,me,O)=>{"use strict";O.d(me,{IY:()=>Q,Ds:()=>W,ft:()=>L});var a=O(7393),M=O(7574),k=O(7444);class Q extends a.L{constructor(P){super(),this.parent=P}_next(P){this.parent.notifyNext(P)}_error(P){this.parent.notifyError(P),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class W extends a.L{notifyNext(P){this.destination.next(P)}notifyError(P){this.destination.error(P)}notifyComplete(){this.destination.complete()}}function L(U,P){if(P.closed)return;if(U instanceof M.y)return U.subscribe(P);let N;try{N=(0,k.s)(U)(P)}catch(S){P.error(S)}return N}},2441:(Ve,me,O)=>{"use strict";O.d(me,{c:()=>ie,N:()=>W});var a=O(9765),M=O(7574),k=O(5319),Q=O(1307);class ie extends M.y{constructor(N,S){super(),this.source=N,this.subjectFactory=S,this._refCount=0,this._isComplete=!1}_subscribe(N){return this.getSubject().subscribe(N)}getSubject(){const N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let N=this._connection;return N||(this._isComplete=!1,N=this._connection=new k.w,N.add(this.source.subscribe(new ee(this.getSubject(),this))),N.closed&&(this._connection=null,N=k.w.EMPTY)),N}refCount(){return(0,Q.x)()(this)}}const W=(()=>{const P=ie.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:P._subscribe},_isComplete:{value:P._isComplete,writable:!0},getSubject:{value:P.getSubject},connect:{value:P.connect},refCount:{value:P.refCount}}})();class ee extends a.Yc{constructor(N,S){super(N),this.connectable=S}_error(N){this._unsubscribe(),super._error(N)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const N=this.connectable;if(N){this.connectable=null;const S=N._connection;N._refCount=0,N._subject=null,N._connection=null,S&&S.unsubscribe()}}}},9193:(Ve,me,O)=>{"use strict";O.d(me,{E:()=>M,c:()=>k});var a=O(7574);const M=new a.y(ie=>ie.complete());function k(ie){return ie?function(ie){return new a.y(W=>ie.schedule(()=>W.complete()))}(ie):M}},4402:(Ve,me,O)=>{"use strict";O.d(me,{D:()=>J});var a=O(7574),M=O(7444),k=O(5319),Q=O(6554),ee=O(4087),L=O(377),N=O(4072),S=O(9489);function J(re,ce){return ce?function(re,ce){if(null!=re){if(function(re){return re&&"function"==typeof re[Q.L]}(re))return function(re,ce){return new a.y(H=>{const q=new k.w;return q.add(ce.schedule(()=>{const de=re[Q.L]();q.add(de.subscribe({next(pe){q.add(ce.schedule(()=>H.next(pe)))},error(pe){q.add(ce.schedule(()=>H.error(pe)))},complete(){q.add(ce.schedule(()=>H.complete()))}}))})),q})}(re,ce);if((0,N.t)(re))return function(re,ce){return new a.y(H=>{const q=new k.w;return q.add(ce.schedule(()=>re.then(de=>{q.add(ce.schedule(()=>{H.next(de),q.add(ce.schedule(()=>H.complete()))}))},de=>{q.add(ce.schedule(()=>H.error(de)))}))),q})}(re,ce);if((0,S.z)(re))return(0,ee.r)(re,ce);if(function(re){return re&&"function"==typeof re[L.hZ]}(re)||"string"==typeof re)return function(re,ce){if(!re)throw new Error("Iterable cannot be null");return new a.y(H=>{const q=new k.w;let de;return q.add(()=>{de&&"function"==typeof de.return&&de.return()}),q.add(ce.schedule(()=>{de=re[L.hZ](),q.add(ce.schedule(function(){if(H.closed)return;let pe,Ce;try{const ve=de.next();pe=ve.value,Ce=ve.done}catch(ve){return void H.error(ve)}Ce?H.complete():(H.next(pe),this.schedule())}))})),q})}(re,ce)}throw new TypeError((null!==re&&typeof re||re)+" is not observable")}(re,ce):re instanceof a.y?re:new a.y((0,M.s)(re))}},6693:(Ve,me,O)=>{"use strict";O.d(me,{n:()=>Q});var a=O(7574),M=O(5015),k=O(4087);function Q(ie,W){return W?(0,k.r)(ie,W):new a.y((0,M.V)(ie))}},6682:(Ve,me,O)=>{"use strict";O.d(me,{T:()=>ie});var a=O(7574),M=O(4869),k=O(3282),Q=O(6693);function ie(...W){let ee=Number.POSITIVE_INFINITY,L=null,U=W[W.length-1];return(0,M.K)(U)?(L=W.pop(),W.length>1&&"number"==typeof W[W.length-1]&&(ee=W.pop())):"number"==typeof U&&(ee=W.pop()),null===L&&1===W.length&&W[0]instanceof a.y?W[0]:(0,k.J)(ee)((0,Q.n)(W,L))}},5917:(Ve,me,O)=>{"use strict";O.d(me,{of:()=>Q});var a=O(4869),M=O(6693),k=O(4087);function Q(...ie){let W=ie[ie.length-1];return(0,a.K)(W)?(ie.pop(),(0,k.r)(ie,W)):(0,M.n)(ie)}},8002:(Ve,me,O)=>{"use strict";O.d(me,{U:()=>M});var a=O(7393);function M(ie,W){return function(L){if("function"!=typeof ie)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return L.lift(new k(ie,W))}}class k{constructor(W,ee){this.project=W,this.thisArg=ee}call(W,ee){return ee.subscribe(new Q(W,this.project,this.thisArg))}}class Q extends a.L{constructor(W,ee,L){super(W),this.project=ee,this.count=0,this.thisArg=L||this}_next(W){let ee;try{ee=this.project.call(this.thisArg,W,this.count++)}catch(L){return void this.destination.error(L)}this.destination.next(ee)}}},3282:(Ve,me,O)=>{"use strict";O.d(me,{J:()=>k});var a=O(9773),M=O(4487);function k(Q=Number.POSITIVE_INFINITY){return(0,a.zg)(M.y,Q)}},9773:(Ve,me,O)=>{"use strict";O.d(me,{zg:()=>Q});var a=O(8002),M=O(4402),k=O(5345);function Q(L,U,P=Number.POSITIVE_INFINITY){return"function"==typeof U?N=>N.pipe(Q((S,V)=>(0,M.D)(L(S,V)).pipe((0,a.U)((z,J)=>U(S,z,V,J))),P)):("number"==typeof U&&(P=U),N=>N.lift(new ie(L,P)))}class ie{constructor(U,P=Number.POSITIVE_INFINITY){this.project=U,this.concurrent=P}call(U,P){return P.subscribe(new W(U,this.project,this.concurrent))}}class W extends k.Ds{constructor(U,P,N=Number.POSITIVE_INFINITY){super(U),this.project=P,this.concurrent=N,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(U){this.active<this.concurrent?this._tryNext(U):this.buffer.push(U)}_tryNext(U){let P;const N=this.index++;try{P=this.project(U,N)}catch(S){return void this.destination.error(S)}this.active++,this._innerSub(P)}_innerSub(U){const P=new k.IY(this),N=this.destination;N.add(P);const S=(0,k.ft)(U,P);S!==P&&N.add(S)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(U){this.destination.next(U)}notifyComplete(){const U=this.buffer;this.active--,U.length>0?this._next(U.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(Ve,me,O)=>{"use strict";O.d(me,{QV:()=>k,ht:()=>ie});var a=O(7393),M=O(1593);function k(ee,L=0){return function(P){return P.lift(new Q(ee,L))}}class Q{constructor(L,U=0){this.scheduler=L,this.delay=U}call(L,U){return U.subscribe(new ie(L,this.scheduler,this.delay))}}class ie extends a.L{constructor(L,U,P=0){super(L),this.scheduler=U,this.delay=P}static dispatch(L){const{notification:U,destination:P}=L;U.observe(P),this.unsubscribe()}scheduleMessage(L){this.destination.add(this.scheduler.schedule(ie.dispatch,this.delay,new W(L,this.destination)))}_next(L){this.scheduleMessage(M.P.createNext(L))}_error(L){this.scheduleMessage(M.P.createError(L)),this.unsubscribe()}_complete(){this.scheduleMessage(M.P.createComplete()),this.unsubscribe()}}class W{constructor(L,U){this.notification=L,this.destination=U}}},1307:(Ve,me,O)=>{"use strict";O.d(me,{x:()=>M});var a=O(7393);function M(){return function(W){return W.lift(new k(W))}}class k{constructor(W){this.connectable=W}call(W,ee){const{connectable:L}=this;L._refCount++;const U=new Q(W,L),P=ee.subscribe(U);return U.closed||(U.connection=L.connect()),P}}class Q extends a.L{constructor(W,ee){super(W),this.connectable=ee}_unsubscribe(){const{connectable:W}=this;if(!W)return void(this.connection=null);this.connectable=null;const ee=W._refCount;if(ee<=0)return void(this.connection=null);if(W._refCount=ee-1,ee>1)return void(this.connection=null);const{connection:L}=this,U=W._connection;this.connection=null,U&&(!L||U===L)&&U.unsubscribe()}}},8819:(Ve,me,O)=>{"use strict";O.d(me,{B:()=>ee});var a=O(2441);var Q=O(1307),ie=O(9765);function W(){return new ie.xQ}function ee(){return L=>(0,Q.x)()(function(L,U){return function(N){let S;S="function"==typeof L?L:function(){return L};const V=Object.create(N,a.N);return V.source=N,V.subjectFactory=S,V}}(W)(L))}},2639:(Ve,me,O)=>{"use strict";O.d(me,{R:()=>re});var a=O(7574);let M=1;const k=Promise.resolve(),Q={};function ie(H){return H in Q&&(delete Q[H],!0)}const W={setImmediate(H){const q=M++;return Q[q]=!0,k.then(()=>ie(q)&&H()),q},clearImmediate(H){ie(H)}};var L=O(6465),P=O(6102);const V=new class extends P.v{flush(q){this.active=!0,this.scheduled=void 0;const{actions:de}=this;let pe,Ce=-1,ve=de.length;q=q||de.shift();do{if(pe=q.execute(q.state,q.delay))break}while(++Ce<ve&&(q=de.shift()));if(this.active=!1,pe){for(;++Ce<ve&&(q=de.shift());)q.unsubscribe();throw pe}}}(class extends L.o{constructor(q,de){super(q,de),this.scheduler=q,this.work=de}requestAsyncId(q,de,pe=0){return null!==pe&&pe>0?super.requestAsyncId(q,de,pe):(q.actions.push(this),q.scheduled||(q.scheduled=W.setImmediate(q.flush.bind(q,null))))}recycleAsyncId(q,de,pe=0){if(null!==pe&&pe>0||null===pe&&this.delay>0)return super.recycleAsyncId(q,de,pe);0===q.actions.length&&(W.clearImmediate(de),q.scheduled=void 0)}});var z=O(6561);class J extends a.y{constructor(q,de=0,pe=V){super(),this.source=q,this.delayTime=de,this.scheduler=pe,(!(0,z.k)(de)||de<0)&&(this.delayTime=0),(!pe||"function"!=typeof pe.schedule)&&(this.scheduler=V)}static create(q,de=0,pe=V){return new J(q,de,pe)}static dispatch(q){const{source:de,subscriber:pe}=q;return this.add(de.subscribe(pe))}_subscribe(q){return this.scheduler.schedule(J.dispatch,this.delayTime,{source:this.source,subscriber:q})}}function re(H,q=0){return function(pe){return pe.lift(new ce(H,q))}}class ce{constructor(q,de){this.scheduler=q,this.delay=de}call(q,de){return new J(de,this.delay,this.scheduler).subscribe(q)}}},8307:(Ve,me,O)=>{"use strict";O.d(me,{b:()=>Q});var a=O(7393),M=O(8640),k=O(9105);function Q(ee,L,U){return function(N){return N.lift(new ie(ee,L,U))}}class ie{constructor(L,U,P){this.nextOrObserver=L,this.error=U,this.complete=P}call(L,U){return U.subscribe(new W(L,this.nextOrObserver,this.error,this.complete))}}class W extends a.L{constructor(L,U,P,N){super(L),this._tapNext=M.Z,this._tapError=M.Z,this._tapComplete=M.Z,this._tapError=P||M.Z,this._tapComplete=N||M.Z,(0,k.m)(U)?(this._context=this,this._tapNext=U):U&&(this._context=U,this._tapNext=U.next||M.Z,this._tapError=U.error||M.Z,this._tapComplete=U.complete||M.Z)}_next(L){try{this._tapNext.call(this._context,L)}catch(U){return void this.destination.error(U)}this.destination.next(L)}_error(L){try{this._tapError.call(this._context,L)}catch(U){return void this.destination.error(U)}this.destination.error(L)}_complete(){try{this._tapComplete.call(this._context)}catch(L){return void this.destination.error(L)}return this.destination.complete()}}},4087:(Ve,me,O)=>{"use strict";O.d(me,{r:()=>k});var a=O(7574),M=O(5319);function k(Q,ie){return new a.y(W=>{const ee=new M.w;let L=0;return ee.add(ie.schedule(function(){L!==Q.length?(W.next(Q[L++]),W.closed||ee.add(this.schedule())):W.complete()})),ee})}},6465:(Ve,me,O)=>{"use strict";O.d(me,{o:()=>k});var a=O(5319);class M extends a.w{constructor(ie,W){super()}schedule(ie,W=0){return this}}class k extends M{constructor(ie,W){super(ie,W),this.scheduler=ie,this.work=W,this.pending=!1}schedule(ie,W=0){if(this.closed)return this;this.state=ie;const ee=this.id,L=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(L,ee,W)),this.pending=!0,this.delay=W,this.id=this.id||this.requestAsyncId(L,this.id,W),this}requestAsyncId(ie,W,ee=0){return setInterval(ie.flush.bind(ie,this),ee)}recycleAsyncId(ie,W,ee=0){if(null!==ee&&this.delay===ee&&!1===this.pending)return W;clearInterval(W)}execute(ie,W){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ee=this._execute(ie,W);if(ee)return ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,W){let L,ee=!1;try{this.work(ie)}catch(U){ee=!0,L=!!U&&U||new Error(U)}if(ee)return this.unsubscribe(),L}_unsubscribe(){const ie=this.id,W=this.scheduler,ee=W.actions,L=ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==L&&ee.splice(L,1),null!=ie&&(this.id=this.recycleAsyncId(W,ie,null)),this.delay=null}}},6102:(Ve,me,O)=>{"use strict";O.d(me,{v:()=>M});let a=(()=>{class k{constructor(ie,W=k.now){this.SchedulerAction=ie,this.now=W}schedule(ie,W=0,ee){return new this.SchedulerAction(this,ie).schedule(ee,W)}}return k.now=()=>Date.now(),k})();class M extends a{constructor(Q,ie=a.now){super(Q,()=>M.delegate&&M.delegate!==this?M.delegate.now():ie()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Q,ie=0,W){return M.delegate&&M.delegate!==this?M.delegate.schedule(Q,ie,W):super.schedule(Q,ie,W)}flush(Q){const{actions:ie}=this;if(this.active)return void ie.push(Q);let W;this.active=!0;do{if(W=Q.execute(Q.state,Q.delay))break}while(Q=ie.shift());if(this.active=!1,W){for(;Q=ie.shift();)Q.unsubscribe();throw W}}}},3637:(Ve,me,O)=>{"use strict";O.d(me,{z:()=>k,P:()=>Q});var a=O(6465);const k=new(O(6102).v)(a.o),Q=k},7771:(Ve,me,O)=>{"use strict";O.d(me,{c:()=>W,N:()=>ie});var a=O(6465),k=O(6102);const ie=new class extends k.v{}(class extends a.o{constructor(L,U){super(L,U),this.scheduler=L,this.work=U}schedule(L,U=0){return U>0?super.schedule(L,U):(this.delay=U,this.state=L,this.scheduler.flush(this),this)}execute(L,U){return U>0||this.closed?super.execute(L,U):this._execute(L,U)}requestAsyncId(L,U,P=0){return null!==P&&P>0||null===P&&this.delay>0?super.requestAsyncId(L,U,P):L.flush(this)}}),W=ie},377:(Ve,me,O)=>{"use strict";O.d(me,{hZ:()=>M});const M="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Ve,me,O)=>{"use strict";O.d(me,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Ve,me,O)=>{"use strict";O.d(me,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Ve,me,O)=>{"use strict";O.d(me,{N:()=>M});const M=(()=>{function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return k.prototype=Object.create(Error.prototype),k})()},4449:(Ve,me,O)=>{"use strict";function a(M){setTimeout(()=>{throw M},0)}O.d(me,{z:()=>a})},4487:(Ve,me,O)=>{"use strict";function a(M){return M}O.d(me,{y:()=>a})},9796:(Ve,me,O)=>{"use strict";O.d(me,{k:()=>a});const a=Array.isArray||(M=>M&&"number"==typeof M.length)},9489:(Ve,me,O)=>{"use strict";O.d(me,{z:()=>a});const a=M=>M&&"number"==typeof M.length&&"function"!=typeof M},9105:(Ve,me,O)=>{"use strict";function a(M){return"function"==typeof M}O.d(me,{m:()=>a})},6561:(Ve,me,O)=>{"use strict";O.d(me,{k:()=>M});var a=O(9796);function M(k){return!(0,a.k)(k)&&k-parseFloat(k)+1>=0}},1555:(Ve,me,O)=>{"use strict";function a(M){return null!==M&&"object"==typeof M}O.d(me,{K:()=>a})},4072:(Ve,me,O)=>{"use strict";function a(M){return!!M&&"function"!=typeof M.subscribe&&"function"==typeof M.then}O.d(me,{t:()=>a})},4869:(Ve,me,O)=>{"use strict";function a(M){return M&&"function"==typeof M.schedule}O.d(me,{K:()=>a})},8640:(Ve,me,O)=>{"use strict";function a(){}O.d(me,{Z:()=>a})},7444:(Ve,me,O)=>{"use strict";O.d(me,{s:()=>N});var a=O(5015),M=O(4449),Q=O(377),W=O(6554),L=O(9489),U=O(4072),P=O(1555);const N=S=>{if(S&&"function"==typeof S[W.L])return(S=>V=>{const z=S[W.L]();if("function"!=typeof z.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return z.subscribe(V)})(S);if((0,L.z)(S))return(0,a.V)(S);if((0,U.t)(S))return(S=>V=>(S.then(z=>{V.closed||(V.next(z),V.complete())},z=>V.error(z)).then(null,M.z),V))(S);if(S&&"function"==typeof S[Q.hZ])return(S=>V=>{const z=S[Q.hZ]();for(;;){let J;try{J=z.next()}catch(re){return V.error(re),V}if(J.done){V.complete();break}if(V.next(J.value),V.closed)break}return"function"==typeof z.return&&V.add(()=>{z.return&&z.return()}),V})(S);{const z=`You provided ${(0,P.K)(S)?"an invalid object":`'${S}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(z)}}},5015:(Ve,me,O)=>{"use strict";O.d(me,{V:()=>a});const a=M=>k=>{for(let Q=0,ie=M.length;Q<ie&&!k.closed;Q++)k.next(M[Q]);k.complete()}},6355:function(Ve,me){!function(O){"use strict";const a=("Number",S=>"[object Number]"===Object.prototype.toString.call(S)),M=S=>a(S)&&!Number.isNaN(S);const Q=(S,V)=>S+V;function W(S){if(S.length)return S.slice(-1)[0]}function U(S,V,z){const J=2/(V+1);return[z].concat(function(S,V,...z){return function(J){const re=Math.min(...J.map(H=>H.length)),ce=[];for(let H=0;H<re;H++){const q=[];for(const de of J)q.push(de[H]);ce.push(q)}return ce}(z).map(J=>V=S(V,...J))}((re,ce)=>M(re)?J*ce+(1-J)*re:ce,z,S))}function P(S,V,z=1){let J=S.findIndex(M);J<0&&(J=S.length);const re=Math.min(J+z-1,S.length);J=Math.max(J,re);const ce=function(S){return new Array(Math.max(S,0)).fill(NaN)}(J),H=(q=S.slice(J+1-z,J+1).filter(M)).length<=0?NaN:function(...S){return(V=S,V.filter(z=>"number"==typeof z).map(z=>z).filter(z=>!Number.isNaN(z))).reduce(Q,0);var V}(...q)/q.length;var q;return ce.concat(U(S.slice(J+1),V,H)).slice(0,S.length)}function N(S,V=12,z=26,J=9,re=!1){const ce=(pe,Ce)=>P(pe,Ce,re?Ce:1),H=ce(S,V),q=ce(S,z),de=H.map((pe,Ce)=>pe-q[Ce]);return{line:de,signal:ce(de,J)}}O.ema=P,O.emaCore=U,O.macd=N,O.macdGetOneResult=function(S,V=12,z=26,J=9,re=!1){const ce=N(S,V,z,J,re);return{line:W(ce.line)||NaN,signal:W(ce.signal)||NaN}},Object.defineProperty(O,"__esModule",{value:!0})}(me)},7645:(Ve,me,O)=>{"use strict";var a=O(7716);let M=null;function k(){return M}const ee=new a.OlP("DocumentToken");let L=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:U,token:n,providedIn:"platform"}),n})();function U(){return(0,a.LFG)(N)}const P=new a.OlP("Location Initialized");let N=(()=>{class n extends L{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(e){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){S()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){S()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=(0,a.Yz7)({factory:V,token:n,providedIn:"platform"}),n})();function S(){return!!window.history.pushState}function V(){return new N((0,a.LFG)(ee))}function z(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function J(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function re(n){return n&&"?"!==n[0]?"?"+n:n}let ce=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:H,token:n,providedIn:"root"}),n})();function H(n){const t=(0,a.LFG)(ee).location;return new de((0,a.LFG)(L),t&&t.origin||"")}const q=new a.OlP("appBaseHref");let de=(()=>{class n extends ce{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return z(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+re(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,l){const d=this.prepareExternalUrl(i+re(l));this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){const d=this.prepareExternalUrl(i+re(l));this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(L),a.LFG(q,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),pe=(()=>{class n extends ce{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=z(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,l){let d=this.prepareExternalUrl(i+re(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){let d=this.prepareExternalUrl(i+re(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(L),a.LFG(q,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(e,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=J(Me(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+re(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Me(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+re(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+re(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ce),a.LFG(L))},n.normalizeQueryParams=re,n.joinWithSlash=z,n.stripTrailingSlash=J,n.\u0275prov=(0,a.Yz7)({factory:ve,token:n,providedIn:"root"}),n})();function ve(){return new Ce((0,a.LFG)(ce),(0,a.LFG)(L))}function Me(n){return n.replace(/\/index.html$/,"")}var ue=(()=>((ue=ue||{})[ue.Zero=0]="Zero",ue[ue.One=1]="One",ue[ue.Two=2]="Two",ue[ue.Few=3]="Few",ue[ue.Many=4]="Many",ue[ue.Other=5]="Other",ue))(),Ee=(()=>((Ee=Ee||{})[Ee.Format=0]="Format",Ee[Ee.Standalone=1]="Standalone",Ee))(),_e=(()=>((_e=_e||{})[_e.Narrow=0]="Narrow",_e[_e.Abbreviated=1]="Abbreviated",_e[_e.Wide=2]="Wide",_e[_e.Short=3]="Short",_e))(),xe=(()=>((xe=xe||{})[xe.Short=0]="Short",xe[xe.Medium=1]="Medium",xe[xe.Long=2]="Long",xe[xe.Full=3]="Full",xe))(),Ie=(()=>((Ie=Ie||{})[Ie.Decimal=0]="Decimal",Ie[Ie.Group=1]="Group",Ie[Ie.List=2]="List",Ie[Ie.PercentSign=3]="PercentSign",Ie[Ie.PlusSign=4]="PlusSign",Ie[Ie.MinusSign=5]="MinusSign",Ie[Ie.Exponential=6]="Exponential",Ie[Ie.SuperscriptingExponent=7]="SuperscriptingExponent",Ie[Ie.PerMille=8]="PerMille",Ie[Ie.Infinity=9]="Infinity",Ie[Ie.NaN=10]="NaN",Ie[Ie.TimeSeparator=11]="TimeSeparator",Ie[Ie.CurrencyDecimal=12]="CurrencyDecimal",Ie[Ie.CurrencyGroup=13]="CurrencyGroup",Ie))();function Mt(n,t){return fn((0,a.cg1)(n)[a.wAp.DateFormat],t)}function yt(n,t){return fn((0,a.cg1)(n)[a.wAp.TimeFormat],t)}function Ct(n,t){return fn((0,a.cg1)(n)[a.wAp.DateTimeFormat],t)}function Xt(n,t){const e=(0,a.cg1)(n),r=e[a.wAp.NumberSymbols][t];if(void 0===r){if(t===Ie.CurrencyDecimal)return e[a.wAp.NumberSymbols][Ie.Decimal];if(t===Ie.CurrencyGroup)return e[a.wAp.NumberSymbols][Ie.Group]}return r}const Zn=a.kL8;function ze(n){if(!n[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fn(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function mn(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const ar=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dn={},Qi=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var En=(()=>((En=En||{})[En.Short=0]="Short",En[En.ShortGMT=1]="ShortGMT",En[En.Long=2]="Long",En[En.Extended=3]="Extended",En))(),it=(()=>((it=it||{})[it.FullYear=0]="FullYear",it[it.Month=1]="Month",it[it.Date=2]="Date",it[it.Hours=3]="Hours",it[it.Minutes=4]="Minutes",it[it.Seconds=5]="Seconds",it[it.FractionalSeconds=6]="FractionalSeconds",it[it.Day=7]="Day",it))(),Dt=(()=>((Dt=Dt||{})[Dt.DayPeriods=0]="DayPeriods",Dt[Dt.Days=1]="Days",Dt[Dt.Months=2]="Months",Dt[Dt.Eras=3]="Eras",Dt))();function Nr(n,t,e,r){let i=function(n){if(Et(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,l=1,d=1]=n.split("-").map(f=>+f);return qr(i,l-1,d)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(ar))return function(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,l=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-e,f=Number(n[5]||0)-r,m=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(t,d,f,m,b),t}(r)}const t=new Date(n);if(!Et(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=_n(e,t)||t;let f,d=[];for(;t;){if(f=Qi.exec(t),!f){d.push(t);break}{d=d.concat(f.slice(1));const x=d.pop();if(!x)break;t=x}}let m=i.getTimezoneOffset();r&&(m=X(r,m),i=function(n,t,e){const i=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*(X(t,i)-i))}(i,r));let b="";return d.forEach(x=>{const I=function(n){if(ge[n])return ge[n];let t;switch(n){case"G":case"GG":case"GGG":t=Zt(Dt.Eras,_e.Abbreviated);break;case"GGGG":t=Zt(Dt.Eras,_e.Wide);break;case"GGGGG":t=Zt(Dt.Eras,_e.Narrow);break;case"y":t=cn(it.FullYear,1,0,!1,!0);break;case"yy":t=cn(it.FullYear,2,0,!0,!0);break;case"yyy":t=cn(it.FullYear,3,0,!1,!0);break;case"yyyy":t=cn(it.FullYear,4,0,!1,!0);break;case"Y":t=ae(1);break;case"YY":t=ae(2,!0);break;case"YYY":t=ae(3);break;case"YYYY":t=ae(4);break;case"M":case"L":t=cn(it.Month,1,1);break;case"MM":case"LL":t=cn(it.Month,2,1);break;case"MMM":t=Zt(Dt.Months,_e.Abbreviated);break;case"MMMM":t=Zt(Dt.Months,_e.Wide);break;case"MMMMM":t=Zt(Dt.Months,_e.Narrow);break;case"LLL":t=Zt(Dt.Months,_e.Abbreviated,Ee.Standalone);break;case"LLLL":t=Zt(Dt.Months,_e.Wide,Ee.Standalone);break;case"LLLLL":t=Zt(Dt.Months,_e.Narrow,Ee.Standalone);break;case"w":t=fe(1);break;case"ww":t=fe(2);break;case"W":t=fe(1,!0);break;case"d":t=cn(it.Date,1);break;case"dd":t=cn(it.Date,2);break;case"c":case"cc":t=cn(it.Day,1);break;case"ccc":t=Zt(Dt.Days,_e.Abbreviated,Ee.Standalone);break;case"cccc":t=Zt(Dt.Days,_e.Wide,Ee.Standalone);break;case"ccccc":t=Zt(Dt.Days,_e.Narrow,Ee.Standalone);break;case"cccccc":t=Zt(Dt.Days,_e.Short,Ee.Standalone);break;case"E":case"EE":case"EEE":t=Zt(Dt.Days,_e.Abbreviated);break;case"EEEE":t=Zt(Dt.Days,_e.Wide);break;case"EEEEE":t=Zt(Dt.Days,_e.Narrow);break;case"EEEEEE":t=Zt(Dt.Days,_e.Short);break;case"a":case"aa":case"aaa":t=Zt(Dt.DayPeriods,_e.Abbreviated);break;case"aaaa":t=Zt(Dt.DayPeriods,_e.Wide);break;case"aaaaa":t=Zt(Dt.DayPeriods,_e.Narrow);break;case"b":case"bb":case"bbb":t=Zt(Dt.DayPeriods,_e.Abbreviated,Ee.Standalone,!0);break;case"bbbb":t=Zt(Dt.DayPeriods,_e.Wide,Ee.Standalone,!0);break;case"bbbbb":t=Zt(Dt.DayPeriods,_e.Narrow,Ee.Standalone,!0);break;case"B":case"BB":case"BBB":t=Zt(Dt.DayPeriods,_e.Abbreviated,Ee.Format,!0);break;case"BBBB":t=Zt(Dt.DayPeriods,_e.Wide,Ee.Format,!0);break;case"BBBBB":t=Zt(Dt.DayPeriods,_e.Narrow,Ee.Format,!0);break;case"h":t=cn(it.Hours,1,-12);break;case"hh":t=cn(it.Hours,2,-12);break;case"H":t=cn(it.Hours,1);break;case"HH":t=cn(it.Hours,2);break;case"m":t=cn(it.Minutes,1);break;case"mm":t=cn(it.Minutes,2);break;case"s":t=cn(it.Seconds,1);break;case"ss":t=cn(it.Seconds,2);break;case"S":t=cn(it.FractionalSeconds,1);break;case"SS":t=cn(it.FractionalSeconds,2);break;case"SSS":t=cn(it.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=qe(En.Short);break;case"ZZZZZ":t=qe(En.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=qe(En.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=qe(En.Long);break;default:return null}return ge[n]=t,t}(x);b+=I?I(i,e,m):"''"===x?"'":x.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function qr(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function _n(n,t){const e=function(n){return(0,a.cg1)(n)[a.wAp.LocaleId]}(n);if(Dn[e]=Dn[e]||{},Dn[e][t])return Dn[e][t];let r="";switch(t){case"shortDate":r=Mt(n,xe.Short);break;case"mediumDate":r=Mt(n,xe.Medium);break;case"longDate":r=Mt(n,xe.Long);break;case"fullDate":r=Mt(n,xe.Full);break;case"shortTime":r=yt(n,xe.Short);break;case"mediumTime":r=yt(n,xe.Medium);break;case"longTime":r=yt(n,xe.Long);break;case"fullTime":r=yt(n,xe.Full);break;case"short":const i=_n(n,"shortTime"),l=_n(n,"shortDate");r=St(Ct(n,xe.Short),[i,l]);break;case"medium":const d=_n(n,"mediumTime"),f=_n(n,"mediumDate");r=St(Ct(n,xe.Medium),[d,f]);break;case"long":const m=_n(n,"longTime"),b=_n(n,"longDate");r=St(Ct(n,xe.Long),[m,b]);break;case"full":const x=_n(n,"fullTime"),I=_n(n,"fullDate");r=St(Ct(n,xe.Full),[x,I])}return r&&(Dn[e][t]=r),r}function St(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function pr(n,t,e="-",r,i){let l="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,l=e));let d=String(n);for(;d.length<t;)d="0"+d;return r&&(d=d.substr(d.length-t)),l+d}function cn(n,t,e=0,r=!1,i=!1){return function(l,d){let f=function(n,t){switch(n){case it.FullYear:return t.getFullYear();case it.Month:return t.getMonth();case it.Date:return t.getDate();case it.Hours:return t.getHours();case it.Minutes:return t.getMinutes();case it.Seconds:return t.getSeconds();case it.FractionalSeconds:return t.getMilliseconds();case it.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((e>0||f>-e)&&(f+=e),n===it.Hours)0===f&&-12===e&&(f=12);else if(n===it.FractionalSeconds)return function(n,t){return pr(n,3).substr(0,t)}(f,t);const m=Xt(d,Ie.MinusSign);return pr(f,t,m,r,i)}}function Zt(n,t,e=Ee.Format,r=!1){return function(i,l){return function(n,t,e,r,i,l){switch(e){case Dt.Months:return function(n,t,e){const r=(0,a.cg1)(n),l=fn([r[a.wAp.MonthsFormat],r[a.wAp.MonthsStandalone]],t);return fn(l,e)}(t,i,r)[n.getMonth()];case Dt.Days:return function(n,t,e){const r=(0,a.cg1)(n),l=fn([r[a.wAp.DaysFormat],r[a.wAp.DaysStandalone]],t);return fn(l,e)}(t,i,r)[n.getDay()];case Dt.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(l){const b=function(n){const t=(0,a.cg1)(n);return ze(t),(t[a.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?mn(r):[mn(r[0]),mn(r[1])])}(t),x=function(n,t,e){const r=(0,a.cg1)(n);ze(r);const l=fn([r[a.wAp.ExtraData][0],r[a.wAp.ExtraData][1]],t)||[];return fn(l,e)||[]}(t,i,r),I=b.findIndex(B=>{if(Array.isArray(B)){const[Z,ne]=B,we=d>=Z.hours&&f>=Z.minutes,Be=d<ne.hours||d===ne.hours&&f<ne.minutes;if(Z.hours<ne.hours){if(we&&Be)return!0}else if(we||Be)return!0}else if(B.hours===d&&B.minutes===f)return!0;return!1});if(-1!==I)return x[I]}return function(n,t,e){const r=(0,a.cg1)(n),l=fn([r[a.wAp.DayPeriodsFormat],r[a.wAp.DayPeriodsStandalone]],t);return fn(l,e)}(t,i,r)[d<12?0:1];case Dt.Eras:return function(n,t){return fn((0,a.cg1)(n)[a.wAp.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,l,n,t,e,r)}}function qe(n){return function(t,e,r){const i=-1*r,l=Xt(e,Ie.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case En.Short:return(i>=0?"+":"")+pr(d,2,l)+pr(Math.abs(i%60),2,l);case En.ShortGMT:return"GMT"+(i>=0?"+":"")+pr(d,1,l);case En.Long:return"GMT"+(i>=0?"+":"")+pr(d,2,l)+":"+pr(Math.abs(i%60),2,l);case En.Extended:return 0===r?"Z":(i>=0?"+":"")+pr(d,2,l)+":"+pr(Math.abs(i%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function en(n){return qr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function fe(n,t=!1){return function(e,r){let i;if(t){const l=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();i=1+Math.floor((d+l)/7)}else{const l=en(e),d=function(n){const t=qr(n,0,1).getDay();return qr(n,0,1+(t<=4?4:11)-t)}(l.getFullYear()),f=l.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return pr(i,n,Xt(r,Ie.MinusSign))}}function ae(n,t=!1){return function(e,r){return pr(en(e).getFullYear(),n,Xt(r,Ie.MinusSign),t)}}const ge={};function X(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function Et(n){return n instanceof Date&&!isNaN(n.valueOf())}class cs{}let dc=(()=>{class n extends cs{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(Zn(r||this.locale)(e)){case ue.Zero:return"zero";case ue.One:return"one";case ue.Two:return"two";case ue.Few:return"few";case ue.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Zr(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,l]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(l)}return null}let _o=(()=>{class n{constructor(e,r,i,l){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,a.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,a.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class hi{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let nn=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,l,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new hi(null,this._ngForOf,-1,-1),null===d?void 0:d),m=new Au(i,f);r.push(m)}else if(null==d)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const f=this._viewContainer.get(l);this._viewContainer.move(f,d);const m=new Au(i,f);r.push(m)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,l=this._viewContainer.length;i<l;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=l,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class Au{constructor(t,e){this.record=t,this.view=e}}let Or=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new Su,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){yo("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){yo("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Su{constructor(){this.$implicit=null,this.ngIf=null}}function yo(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(t)}'.`)}let hc=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",i,l){if(null==e||""===e||e!=e)return null;try{return Nr(e,r,l||this.locale,i)}catch(d){throw function(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,a.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.soG,16))},n.\u0275pipe=a.Yjl({name:"date",type:n,pure:!0}),n})(),lr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:cs,useClass:dc}]}),n})();function Dh(n){return"server"===n}let Pu=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new Th((0,a.LFG)(ee),window)}),n})();class Th{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const d=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Da(this.window.history)||Da(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Da(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ou{}class Fu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Fu,M||(M=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ns=Ns||document.querySelector("base"),Ns?Ns.getAttribute("href"):null);return null==e?null:function(n){Fn=Fn||document.createElement("a"),Fn.setAttribute("href",n);const t=Fn.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Ns=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Zr(document.cookie,t)}}let Fn,Ns=null;const Lu=new a.OlP("TRANSITION_ID"),Ln=[{provide:a.ip1,useFactory:function(n,t,e){return()=>{e.get(a.CZH).donePromise.then(()=>{const r=k(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[Lu,ee,a.zs3],multi:!0}];class Vu{static init(){(0,a.VLi)(new Vu)}addToWindow(t){a.dqk.getAngularTestability=(r,i=!0)=>{const l=t.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let l=i.length,d=!1;const f=function(m){d=d||m,l--,0==l&&r(d)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?k().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Ms=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Co=new a.OlP("EventManagerPlugins");let Ze=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const d=i[l];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Co),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class rn{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=k().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Ia=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Kn=(()=>{class n extends Ia{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,i.push(r.appendChild(d))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(vl),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(vl))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function vl(n){k().remove(n)}const zs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pi=/%COMP%/g;function _r(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?_r(n,i,e):(i=i.replace(pi,n),e.push(i))}return e}function Bi(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ui=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Hi(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ip(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case a.ifc.ShadowDom:return new zo(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=_r(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Ze),a.LFG(Kn),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Hi{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(zs[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const l=zs[i];l?t.setAttributeNS(l,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=zs[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,r,i&a.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Bi(r)):this.eventManager.addEventListener(t,e,Bi(r))}}class Ip extends Hi{constructor(t,e,r,i){super(t),this.component=r;const l=_r(i+"-"+r.id,r.styles,[]);e.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(pi,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(pi,i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class zo extends Hi{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=_r(i.id,i.styles,[]);for(let d=0;d<l.length;d++){const f=document.createElement("style");f.textContent=l[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Wu=(()=>{class n extends rn{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Yo=["alt","control","meta","shift"],Ap={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ec={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qu=(()=>{class n extends rn{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(e,l.domEventName,d))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let d="";if(Yo.forEach(m=>{const b=r.indexOf(m);b>-1&&(r.splice(b,1),d+=m+".")}),d+=l,0!=r.length||0===l.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&zr.hasOwnProperty(t)&&(t=zr[t]))}return Ap[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Yo.forEach(l=>{l!=i&&Ec[l](e)&&(r+=l+".")}),r+=i,r}static eventCallback(e,r,i){return l=>{n.getEventFullKey(l)===e&&i.runGuarded(()=>r(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const ka=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){Fu.makeCurrent(),Vu.init()},multi:!0},{provide:ee,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Ju=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:Co,useClass:Wu,multi:!0,deps:[ee,a.R0b,a.Lbi]},{provide:Co,useClass:Qu,multi:!0,deps:[ee]},[],{provide:Ui,useClass:Ui,deps:[Ze,Kn,a.AFp]},{provide:a.FYo,useExisting:Ui},{provide:Ia,useExisting:Kn},{provide:Kn,useClass:Kn,deps:[ee]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:Ze,useClass:Ze,deps:[Co,a.R0b]},{provide:Ou,useClass:Ms,deps:[]},[]];let Rp=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:a.AFp,useValue:e.appId},{provide:Lu,useExisting:a.AFp},Ln]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:Ju,imports:[lr,a.hGG]}),n})();"undefined"!=typeof window&&window;var un=O(4402),xt=O(5917),Mn=O(9765),Tl=O(7971);class Tr extends Mn.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Tl.N;return this._value}next(t){super.next(this._value=t)}}var Qo=O(4869),ks=O(9796),yr=O(7393);class Ph extends yr.L{notifyNext(t,e,r,i,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Fp extends yr.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Io=O(7444),ir=O(7574);function cr(n,t,e,r,i=new Fp(n,e,r)){if(!i.closed)return t instanceof ir.y?t.subscribe(i):(0,Io.s)(t)(i)}var Ac=O(6693);const Jo={};class Fa{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ed(t,this.resultSelector))}}class ed extends Ph{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Jo),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(cr(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,d=this.toRespond?i[r]===Jo?--this.toRespond:this.toRespond:0;i[r]=e,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const Ps=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var fs=O(3282);function Qs(...n){return(0,fs.J)(1)((0,xt.of)(...n))}var gi=O(9193);function $i(n){return new ir.y(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?(0,un.D)(e):(0,gi.c)()).subscribe(t)})}var Dv=O(2441),wt=O(8002),ns=O(5345);function gr(n,t){return"function"==typeof t?e=>e.pipe(gr((r,i)=>(0,un.D)(n(r,i)).pipe((0,wt.U)((l,d)=>t(r,l,i,d))))):e=>e.lift(new Lp(n))}class Lp{constructor(t){this.project=t}call(t,e){return e.subscribe(new Jn(t,this.project))}}class Jn extends ns.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new ns.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,ns.ft)(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const td=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function wi(n){return t=>0===n?(0,gi.c)():t.lift(new Tv(n))}class Tv{constructor(t){if(this.total=t,this.total<0)throw new td}call(t,e){return e.subscribe(new Vp(t,this.total))}}class Vp extends yr.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function Xo(...n){const t=n[n.length-1];return(0,Qo.K)(t)?(n.pop(),e=>Qs(n,e,t)):e=>Qs(n,e)}function La(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new g0(n,t,e))}}class g0{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Nc(t,this.accumulator,this.seed,this.hasSeed))}}class Nc extends yr.L{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function sr(n,t){return function(r){return r.lift(new nd(n,t))}}class nd{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new No(t,this.predicate,this.thisArg))}}class No extends yr.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Mo(n){return function(e){const r=new vr(n),i=e.lift(r);return r.caught=i}}class vr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Js(t,this.selector,this.caught))}}class Js extends ns.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new ns.IY(this);this.add(r);const i=(0,ns.ft)(e,r);i!==r&&this.add(i)}}}var Vr=O(9773);function Mc(n,t){return(0,Vr.zg)(n,t,1)}function Fh(n){return function(e){return 0===n?(0,gi.c)():e.lift(new Ci(n))}}class Ci{constructor(t){if(this.total=t,this.total<0)throw new td}call(t,e){return e.subscribe(new Os(t,this.total))}}class Os extends yr.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let l=0;l<r;l++){const d=e++%r;t.next(i[d])}}t.complete()}}function Fs(n=Lh){return t=>t.lift(new Ro(n))}class Ro{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new ko(t,this.errorFactory))}}class ko extends yr.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Lh(){return new Ps}function Xs(n=null){return t=>t.lift(new Bp(n))}class Bp{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Va(t,this.defaultValue))}}class Va extends yr.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Up=O(4487);function Ir(n,t){const e=arguments.length>=2;return r=>r.pipe(n?sr((i,l)=>n(i,l,r)):Up.y,wi(1),e?Xs(t):Fs(()=>new Ps))}var br=O(8307),Ba=O(1307),Vh=O(5319);class A{constructor(t){this.callback=t}call(t,e){return e.subscribe(new G(t,this.callback))}}class G extends yr.L{constructor(t,e){super(t),this.add(new Vh.w(e))}}class oe{constructor(t,e){this.id=t,this.url=e}}class De extends oe{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ne extends oe{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ke extends oe{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ut extends oe{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kt extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pn extends oe{constructor(t,e,r,i,l){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ht extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr extends oe{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Il{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class id{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eo{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ua{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ls{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ea{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class Hp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function ur(n){return new Hp(n)}const Rc="ngNavigationCancelingError";function m0(n){const t=Error("NavigationCancelingError: "+n);return t[Rc]=!0,t}function Sl(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const d=r[l],f=n[l];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ps(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let l=0;l<e.length;l++)if(i=e[l],!jp(n[i],t[i]))return!1;return!0}function jp(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,l)=>r[l]===i)}return n===t}function _0(n){return Array.prototype.concat.apply([],n)}function Ha(n){return n.length>0?n[n.length-1]:null}function Br(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Yr(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,un.D)(Promise.resolve(n)):(0,xt.of)(n)}const y0={exact:function Bh(n,t,e){if(!Ga(n.segments,t.segments)||!Pc(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!Bh(n.children[r],t.children[r],e))return!1;return!0},subset:ta},kc={exact:function(n,t){return ps(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>jp(n[e],t[e]))},ignored:()=>!0};function sd(n,t,e){return y0[e.paths](n.root,t.root,e.matrixParams)&&kc[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function ta(n,t,e){return ja(n,t,t.segments,e)}function ja(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!Ga(i,e)||t.hasChildren()||!Pc(i,e,r))}if(n.segments.length===e.length){if(!Ga(n.segments,e)||!Pc(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!ta(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),l=e.slice(n.segments.length);return!!(Ga(n.segments,i)&&Pc(n.segments,i,r)&&n.children[Gt])&&ja(n.children[Gt],t,l,r)}}function Pc(n,t,e){return t.every((r,i)=>kc[e](n[i].parameters,r.parameters))}class Nl{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ur(this.queryParams)),this._queryParamMap}toString(){return ad.serialize(this)}}class dn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Br(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return na(this)}}class od{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=ur(this.parameters)),this._parameterMap}toString(){return Lc(this)}}function Ga(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class Gp{}class Oc{parse(t){const e=new $h(t);return new Nl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${ld(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${cd(e)}=${cd(i)}`).join("&"):`${cd(e)}=${cd(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const ad=new Oc;function na(n){return n.segments.map(t=>Lc(t)).join("/")}function ld(n,t){if(!n.hasChildren())return na(n);if(t){const e=n.children[Gt]?ld(n.children[Gt],!1):"",r=[];return Br(n.children,(i,l)=>{l!==Gt&&r.push(`${l}:${ld(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Br(n.children,(r,i)=>{i===Gt&&(e=e.concat(t(r,i)))}),Br(n.children,(r,i)=>{i!==Gt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Gt?[ld(n.children[Gt],!1)]:[`${i}:${ld(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Gt]?`${na(n)}/${e[0]}`:`${na(n)}/(${e.join("//")})`}}function w0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cd(n){return w0(n).replace(/%3B/gi,";")}function ud(n){return w0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fc(n){return decodeURIComponent(n)}function Wp(n){return Fc(n.replace(/\+/g,"%20"))}function Lc(n){return`${ud(n.path)}${function(n){return Object.keys(n).map(t=>`;${ud(t)}=${ud(n[t])}`).join("")}(n.parameters)}`}const Mv=/^[^\/()?;=#]+/;function Hh(n){const t=n.match(Mv);return t?t[0]:""}const Rv=/^[^=?&#]+/,ra=/^[^?&#]+/;class $h{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Gt]=new dn(t,e)),r}parseSegment(){const t=Hh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new od(Fc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Hh(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=Hh(this.remaining);i&&(r=i,this.capture(r))}t[Fc(e)]=Fc(r)}parseQueryParam(t){const e=function(n){const t=n.match(Rv);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const d=function(n){const t=n.match(ra);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Wp(e),l=Wp(r);if(t.hasOwnProperty(i)){let d=t[i];Array.isArray(d)||(d=[d],t[i]=d),d.push(l)}else t[i]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Hh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=Gt);const d=this.parseChildren();e[l]=1===Object.keys(d).length?d[Gt]:new dn([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class C0{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=qp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=qp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Zp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Zp(t,this._root).map(e=>e.value)}}function qp(n,t){if(n===t.value)return t;for(const e of t.children){const r=qp(n,e);if(r)return r}return null}function Zp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Zp(n,e);if(r.length)return r.unshift(t),r}return[]}class ia{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function dd(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class jh extends C0{constructor(t,e){super(t),this.snapshot=e,Wh(this,t)}toString(){return this.snapshot.toString()}}function E0(n,t){const e=function(n,t){const d=new Gh([],{},{},"",{},Gt,t,null,n.root,-1,{});return new Wa("",new ia(d,[]))}(n,t),r=new Tr([new od("",{})]),i=new Tr({}),l=new Tr({}),d=new Tr({}),f=new Tr(""),m=new Bc(r,i,d,f,l,Gt,t,e.root);return m.snapshot=e.root,new jh(new ia(m,[]),e)}class Bc{constructor(t,e,r,i,l,d,f,m){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(t=>ur(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(t=>ur(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function x0(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],l=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class Gh{constructor(t,e,r,i,l,d,f,m,b,x,I){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this.routeConfig=m,this._urlSegment=b,this._lastPathIndex=x,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ur(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ur(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wa extends C0{constructor(t,e){super(e),this.url=t,Wh(this,e)}toString(){return Vs(this._root)}}function Wh(n,t){t.value._routerState=n,t.children.forEach(e=>Wh(n,e))}function Vs(n){const t=n.children.length>0?` { ${n.children.map(Vs).join(", ")} } `:"";return`${n.value}${t}`}function Rl(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ps(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ps(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ps(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ps(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Uc(n,t){return ps(n.params,t.params)&&function(n,t){return Ga(n,t)&&n.every((e,r)=>ps(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||Uc(n.parent,t.parent))}function Hc(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Hc(n,r,i);return Hc(n,r)})}(n,t,e);return new ia(r,i)}{if(n.shouldAttach(t.value)){const l=n.retrieve(t.value);if(null!==l){const d=l.route;return I0(t,d),d}}const r=function(n){return new Bc(new Tr(n.url),new Tr(n.params),new Tr(n.queryParams),new Tr(n.fragment),new Tr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(l=>Hc(n,l));return new ia(r,i)}}function I0(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)I0(n.children[e],t.children[e])}function hd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function w(n){return"object"==typeof n&&null!=n&&n.outlets}function g(n,t,e,r,i){let l={};return r&&Br(r,(d,f)=>{l[f]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),new Nl(e.root===n?t:y(e.root,n,t),l,i)}function y(n,t,e){const r={};return Br(n.children,(i,l)=>{r[l]=i===t?e:y(i,t,e)}),new dn(n.segments,r)}class E{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&hd(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(w);if(i&&i!==Ha(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ${constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function et(n,t,e){if(n||(n=new dn([],{})),0===n.segments.length&&n.hasChildren())return Tt(n,t,e);const r=function(n,t,e){let r=0,i=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return l;const d=n.segments[i],f=e[r];if(w(f))break;const m=`${f}`,b=r<e.length-1?e[r+1]:null;if(i>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!fd(m,b,d))return l;r+=2}else{if(!fd(m,{},d))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new dn(n.segments.slice(0,r.pathIndex),{});return l.children[Gt]=new dn(n.segments.slice(r.pathIndex),n.children),Tt(l,0,i)}return r.match&&0===i.length?new dn(n.segments,{}):r.match&&!n.hasChildren()?Wn(n,t,e):r.match?Tt(n,0,i):Wn(n,t,e)}function Tt(n,t,e){if(0===e.length)return new dn(n.segments,{});{const r=function(n){return w(n[0])?n[0].outlets:{[Gt]:n}}(e),i={};return Br(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[d]=et(n.children[d],t,l))}),Br(n.children,(l,d)=>{void 0===r[d]&&(i[d]=l)}),new dn(n.segments,i)}}function Wn(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const l=e[i];if(w(l)){const m=Cn(l.outlets);return new dn(r,m)}if(0===i&&hd(e[0])){r.push(new od(n.segments[t].path,sa(e[0]))),i++;continue}const d=w(l)?l.outlets[Gt]:`${l}`,f=i<e.length-1?e[i+1]:null;d&&f&&hd(f)?(r.push(new od(d,sa(f))),i+=2):(r.push(new od(d,{})),i++)}return new dn(r,{})}function Cn(n){const t={};return Br(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Wn(new dn([],{}),0,e))}),t}function sa(n){const t={};return Br(n,(e,r)=>t[r]=`${e}`),t}function fd(n,t,e){return n==e.path&&ps(t,e.parameters)}class Yp{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Rl(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=dd(e);t.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,i[d],r),delete i[d]}),Br(i,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(i===l)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,r);else l&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,l=dd(t);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=dd(e);t.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new Ls(l.value.snapshot))}),t.children.length&&this.forwardEvent(new eo(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(Rl(i),i===l)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Kp(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=m,d.outlet&&d.outlet.activateWith(i,m),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}function Kp(n){Rl(n.value),n.children.forEach(Kp)}class qh{constructor(t,e){this.routes=t,this.module=e}}function oa(n){return"function"==typeof n}function kl(n){return n instanceof Nl}const Zh=Symbol("INITIAL_VALUE");function zh(){return gr(n=>function(...n){let t,e;return(0,Qo.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,ks.k)(n[0])&&(n=n[0]),(0,Ac.n)(n,e).lift(new Fa(t))}(n.map(t=>t.pipe(wi(1),Xo(Zh)))).pipe(La((t,e)=>{let r=!1;return e.reduce((i,l,d)=>i!==Zh?i:(l===Zh&&(r=!0),r||!1!==l&&d!==e.length-1&&!kl(l)?i:l),t)},Zh),sr(t=>t!==Zh),(0,wt.U)(t=>kl(t)?t:!0===t),wi(1)))}let Gi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[rg]},encapsulation:2}),n})();function Yh(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];Fv(r,UA(t,r))}}function Fv(n,t){n.children&&Yh(n.children,t)}function UA(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function Lv(n){const t=n.children&&n.children.map(Lv),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Gt&&(e.component=Gi),e}function to(n){return n.outlet||Gt}function XC(n,t){const e=n.filter(r=>to(r)===t);return e.push(...n.filter(r=>to(r)!==t)),e}const Vv={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function A0(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},Vv):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||Sl)(e,n,t);if(!l)return Object.assign({},Vv);const d={};Br(l.posParams,(m,b)=>{d[b]=m.path});const f=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:f,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function Xp(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Kh(n,t,r)&&to(r)!==Gt)}(n,e,r)){const d=new dn(t,function(n,t,e,r){const i={};i[Gt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&to(l)!==Gt){const d=new dn([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,i[to(l)]=d}return i}(n,t,r,new dn(e,n.children)));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Kh(n,t,r))}(n,e,r)){const d=new dn(n.segments,function(n,t,e,r,i,l){const d={};for(const f of r)if(Kh(n,e,f)&&!i[to(f)]){const m=new dn([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===l?n.segments.length:t.length,d[to(f)]=m}return Object.assign(Object.assign({},i),d)}(n,t,e,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const l=new dn(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function Kh(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function Bv(n,t,e,r){return!!(to(n)===r||r!==Gt&&Kh(t,e,n))&&("**"===n.path||A0(t,n,e).matched)}function tE(n,t,e){return 0===t.length&&!n.children[e]}class S0{constructor(t){this.segmentGroup=t||null}}class Uv{constructor(t){this.urlTree=t}}function gd(n){return new ir.y(t=>t.error(new S0(n)))}function nE(n){return new ir.y(t=>t.error(new Uv(n)))}function GA(n){return new ir.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class qA{constructor(t,e,r,i,l){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}apply(){const t=Xp(this.urlTree.root,[],[],this.config).segmentGroup,e=new dn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Gt).pipe((0,wt.U)(l=>this.createUrlTree(Hv(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Mo(l=>{if(l instanceof Uv)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof S0?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Gt).pipe((0,wt.U)(i=>this.createUrlTree(Hv(i),t.queryParams,t.fragment))).pipe(Mo(i=>{throw i instanceof S0?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new dn([],{[Gt]:t}):t;return new Nl(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,wt.U)(l=>new dn([],l))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,un.D)(i).pipe(Mc(l=>{const d=r.children[l],f=XC(e,l);return this.expandSegmentGroup(t,f,d,l).pipe((0,wt.U)(m=>({segment:m,outlet:l})))}),La((l,d)=>(l[d.outlet]=d.segment,l),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?sr((i,l)=>n(i,l,r)):Up.y,Fh(1),e?Xs(t):Fs(()=>new Ps))}())}expandSegment(t,e,r,i,l,d){return(0,un.D)(r).pipe(Mc(f=>this.expandSegmentAgainstRoute(t,e,r,f,i,l,d).pipe(Mo(b=>{if(b instanceof S0)return(0,xt.of)(null);throw b}))),Ir(f=>!!f),Mo((f,m)=>{if(f instanceof Ps||"EmptyError"===f.name){if(tE(e,i,l))return(0,xt.of)(new dn([],{}));throw new S0(e)}throw f}))}expandSegmentAgainstRoute(t,e,r,i,l,d,f){return Bv(i,e,l,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,l,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d):gd(e):gd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?nE(l):this.lineralizeSegments(r,l).pipe((0,Vr.zg)(d=>{const f=new dn(d,{});return this.expandSegment(t,f,e,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){const{matched:f,consumedSegments:m,lastChild:b,positionalParamSegments:x}=A0(e,i,l);if(!f)return gd(e);const I=this.applyRedirectCommands(m,i.redirectTo,x);return i.redirectTo.startsWith("/")?nE(I):this.lineralizeSegments(i,I).pipe((0,Vr.zg)(B=>this.expandSegment(t,e,r,B.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(t,e,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,xt.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,wt.U)(B=>(r._loadedConfig=B,new dn(i,{})))):(0,xt.of)(new dn(i,{}));const{matched:d,consumedSegments:f,lastChild:m}=A0(e,r,i);if(!d)return gd(e);const b=i.slice(m);return this.getChildConfig(t,r,i).pipe((0,Vr.zg)(I=>{const B=I.module,Z=I.routes,{segmentGroup:ne,slicedSegments:we}=Xp(e,f,b,Z),Be=new dn(ne.segments,ne.children);if(0===we.length&&Be.hasChildren())return this.expandChildren(B,Z,Be).pipe((0,wt.U)(_t=>new dn(f,_t)));if(0===Z.length&&0===we.length)return(0,xt.of)(new dn(f,{}));const tt=to(r)===l;return this.expandSegment(B,Be,Z,we,tt?Gt:l,!0).pipe((0,wt.U)(gt=>new dn(f.concat(gt.segments),gt.children)))}))}getChildConfig(t,e,r){return e.children?(0,xt.of)(new qh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,xt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Vr.zg)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,wt.U)(l=>(e._loadedConfig=l,l))):(n=e,new ir.y(t=>t.error(m0(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,xt.of)(new qh([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;if(!i||0===i.length)return(0,xt.of)(!0);const l=i.map(d=>{const f=t.get(d);let m;if((n=f)&&oa(n.canLoad))m=f.canLoad(e,r);else{if(!oa(f))throw new Error("Invalid CanLoad guard");m=f(e,r)}var n;return Yr(m)});return(0,xt.of)(l).pipe(zh(),(0,br.b)(d=>{if(!kl(d))return;const f=m0(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,wt.U)(d=>!0===d))}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,xt.of)(r);if(i.numberOfChildren>1||!i.children[Gt])return GA(t.redirectTo);i=i.children[Gt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const l=this.createSegmentGroup(t,e.root,r,i);return new Nl(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Br(t,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=e[f]}else r[l]=i}),r}createSegmentGroup(t,e,r,i){const l=this.createSegments(t,e.segments,r,i);let d={};return Br(e.children,(f,m)=>{d[m]=this.createSegmentGroup(t,f,r,i)}),new dn(l,d)}createSegments(t,e,r,i){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,i):this.findOrReturn(l,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function Hv(n){const t={};for(const r of Object.keys(n.children)){const l=Hv(n.children[r]);(l.segments.length>0||l.hasChildren())&&(t[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Gt]){const t=n.children[Gt];return new dn(n.segments.concat(t.segments),t.children)}return n}(new dn(n.segments,t))}class eg{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gs{constructor(t,e){this.component=t,this.route=e}}function rE(n,t,e){const r=n._root;return M0(r,t?t._root:null,e,[r.value])}function N0(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function M0(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=dd(t);return n.children.forEach(d=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const m=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Ga(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Ga(n.url,t.url)||!ps(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uc(n,t)||!ps(n.queryParams,t.queryParams);case"paramsChange":default:return!Uc(n,t)}}(d,l,l.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new eg(r)):(l.data=d.data,l._resolvedData=d._resolvedData),M0(n,t,l.component?f?f.children:null:e,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new gs(f.outlet.component,d))}else d&&tg(t,f,i),i.canActivateChecks.push(new eg(r)),M0(n,null,l.component?f?f.children:null:e,r,i)})(d,l[d.value.outlet],e,r.concat([d.value]),i),delete l[d.value.outlet]}),Br(l,(d,f)=>tg(d,e.getContext(f),i)),i}function tg(n,t,e){const r=dd(n),i=n.value;Br(r,(l,d)=>{tg(l,i.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new gs(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class $v{}function R0(n){return new ir.y(t=>t.error(n))}class aE{constructor(t,e,r,i,l,d){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const t=Xp(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Gt);if(null===e)return null;const r=new Gh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ia(r,e),l=new Wa(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,r=x0(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const l of Object.keys(e.children)){const d=e.children[l],f=XC(t,l),m=this.processSegmentGroup(f,d,l);if(null===m)return null;r.push(...m)}const i=k0(r);return i.sort((t,e)=>t.value.outlet===Gt?-1:e.value.outlet===Gt?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const l of t){const d=this.processSegmentAgainstRoute(l,e,r,i);if(null!==d)return d}return tE(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!Bv(t,e,r,i))return null;let l,d=[],f=[];if("**"===t.path){const Z=r.length>0?Ha(r).parameters:{};l=new Gh(r,Z,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,md(t),to(t),t.component,t,jv(e),XA(e)+r.length,P0(t))}else{const Z=A0(e,t,r);if(!Z.matched)return null;d=Z.consumedSegments,f=r.slice(Z.lastChild),l=new Gh(d,Z.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,md(t),to(t),t.component,t,jv(e),XA(e)+d.length,P0(t))}const m=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:x}=Xp(e,d,f,m.filter(Z=>void 0===Z.redirectTo),this.relativeLinkResolution);var n;if(0===x.length&&b.hasChildren()){const Z=this.processChildren(m,b);return null===Z?null:[new ia(l,Z)]}if(0===m.length&&0===x.length)return[new ia(l,[])];const I=to(t)===i,B=this.processSegment(m,b,x,I?Gt:i);return null===B?null:[new ia(l,B)]}}function cE(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function k0(n){const t=[],e=new Set;for(const r of n){if(!cE(r)){t.push(r);continue}const i=t.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=k0(r.children);t.push(new ia(r.value,i))}return t.filter(r=>!e.has(r))}function jv(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function XA(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function md(n){return n.data||{}}function P0(n){return n.resolve||{}}function Wv(n){return gr(t=>{const e=n(t);return e?(0,un.D)(e).pipe((0,wt.U)(()=>t)):(0,xt.of)(t)})}class sS extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const O0=new a.OlP("ROUTES");class F0{constructor(t,e,r,i){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,wt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=l.create(t);return new qh(_0(d.injector.get(O0,void 0,a.XFs.Self|a.XFs.Optional)).map(Lv),d)}),Mo(l=>{throw e._loader$=void 0,l}));return e._loader$=new Dv.c(i,()=>new Mn.xQ).pipe((0,Ba.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,un.D)(this.loader.load(t)):Yr(t()).pipe((0,Vr.zg)(e=>e instanceof a.YKP?(0,xt.of)(e):(0,un.D)(this.compiler.compileModuleAsync(e))))}}class hE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new $c,this.attachRef=null}}class $c{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new hE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class aS{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function fE(n){throw n}function pE(n,t,e){return t.parse("/")}function jc(n,t){return(0,xt.of)(null)}const gE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ms=(()=>{class n{constructor(e,r,i,l,d,f,m,b){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mn.xQ,this.errorHandler=fE,this.malformedUriErrorHandler=pE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:jc,afterPreactivation:jc},this.urlHandlingStrategy=new aS,this.routeReuseStrategy=new sS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(a.h0i),this.console=d.get(a.c2e);const B=d.get(a.R0b);this.isNgZoneEnabled=B instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new Nl(new dn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new F0(f,m,Z=>this.triggerEvent(new Rr(Z)),Z=>this.triggerEvent(new Il(Z))),this.routerState=E0(this.currentUrlTree,this.rootComponentType),this.transitions=new Tr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(sr(i=>0!==i.id),(0,wt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),gr(i=>{let l=!1,d=!1;return(0,xt.of)(i).pipe((0,br.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gr(f=>{const m=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return V0(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,xt.of)(f).pipe(gr(I=>{const B=this.transitions.getValue();return r.next(new De(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),B!==this.transitions.getValue()?gi.E:Promise.resolve(I)}),function(n,t,e,r){return gr(i=>function(n,t,e,r,i){return new qA(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,wt.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,br.b)(I=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:I.urlAfterRedirects})}),function(n,t,e,r,i){return(0,Vr.zg)(l=>function(n,t,e,r,i="emptyOnly",l="legacy"){try{const d=new aE(n,t,e,r,i,l).recognize();return null===d?R0(new $v):(0,xt.of)(d)}catch(d){return R0(d)}}(n,t,l.urlAfterRedirects,e(l.urlAfterRedirects),r,i).pipe((0,wt.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,I=>this.serializeUrl(I),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,br.b)(I=>{"eager"===this.urlUpdateStrategy&&(I.extras.skipLocationChange||this.setBrowserUrl(I.urlAfterRedirects,I),this.browserUrlTree=I.urlAfterRedirects);const B=new kt(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);r.next(B)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:B,extractedUrl:Z,source:ne,restoredState:we,extras:Be}=f,tt=new De(B,this.serializeUrl(Z),ne,we);r.next(tt);const st=E0(Z,this.rootComponentType).snapshot;return(0,xt.of)(Object.assign(Object.assign({},f),{targetSnapshot:st,urlAfterRedirects:Z,extras:Object.assign(Object.assign({},Be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),gi.E}),Wv(f=>{const{targetSnapshot:m,id:b,extractedUrl:x,rawUrl:I,extras:{skipLocationChange:B,replaceUrl:Z}}=f;return this.hooks.beforePreactivation(m,{navigationId:b,appliedUrlTree:x,rawUrlTree:I,skipLocationChange:!!B,replaceUrl:!!Z})}),(0,br.b)(f=>{const m=new Ut(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,wt.U)(f=>Object.assign(Object.assign({},f),{guards:rE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,Vr.zg)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:d}}=e;return 0===d.length&&0===l.length?(0,xt.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,un.D)(n).pipe((0,Vr.zg)(i=>function(n,t,e,r,i){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,xt.of)(!0);const d=l.map(f=>{const m=N0(f,t,i);let b;if(function(n){return n&&oa(n.canDeactivate)}(m))b=Yr(m.canDeactivate(n,t,e,r));else{if(!oa(m))throw new Error("Invalid CanDeactivate guard");b=Yr(m(n,t,e,r))}return b.pipe(Ir())});return(0,xt.of)(d).pipe(zh())}(i.component,i.route,e,t,r)),Ir(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Vr.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,r){return(0,un.D)(t).pipe(Mc(i=>Qs(function(n,t){return null!==n&&t&&t(new id(n)),(0,xt.of)(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new Ua(n)),(0,xt.of)(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(d=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(d)).filter(d=>null!==d).map(d=>$i(()=>{const f=d.guards.map(m=>{const b=N0(m,d.node,e);let x;if(function(n){return n&&oa(n.canActivateChild)}(b))x=Yr(b.canActivateChild(r,n));else{if(!oa(b))throw new Error("Invalid CanActivateChild guard");x=Yr(b(r,n))}return x.pipe(Ir())});return(0,xt.of)(f).pipe(zh())}));return(0,xt.of)(l).pipe(zh())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,xt.of)(!0);const i=r.map(l=>$i(()=>{const d=N0(l,t,e);let f;if(function(n){return n&&oa(n.canActivate)}(d))f=Yr(d.canActivate(t,n));else{if(!oa(d))throw new Error("Invalid CanActivate guard");f=Yr(d(t,n))}return f.pipe(Ir())}));return(0,xt.of)(i).pipe(zh())}(n,i.route,e))),Ir(i=>!0!==i,!0))}(r,l,n,t):(0,xt.of)(f)),(0,wt.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,br.b)(f=>{if(kl(f.guardsResult)){const b=m0(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const m=new pn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),sr(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Wv(f=>{if(f.guards.canActivateChecks.length)return(0,xt.of)(f).pipe((0,br.b)(m=>{const b=new Ht(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}),gr(m=>{let b=!1;return(0,xt.of)(m).pipe(function(n,t){return(0,Vr.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,xt.of)(e);let l=0;return(0,un.D)(i).pipe(Mc(d=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return(0,xt.of)({});const l={};return(0,un.D)(i).pipe((0,Vr.zg)(d=>function(n,t,e,r){const i=N0(n,t,r);return Yr(i.resolve?i.resolve(t,e):i(t,e))}(n[d],t,e,r).pipe((0,br.b)(f=>{l[d]=f}))),Fh(1),(0,Vr.zg)(()=>Object.keys(l).length===i.length?(0,xt.of)(l):gi.E))}(n._resolve,n,t,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),x0(n,e).resolve),null)))}(d.route,r,n,t)),(0,br.b)(()=>l++),Fh(1),(0,Vr.zg)(d=>l===i.length?(0,xt.of)(e):gi.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,br.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,br.b)(m=>{const b=new Mr(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}))}),Wv(f=>{const{targetSnapshot:m,id:b,extractedUrl:x,rawUrl:I,extras:{skipLocationChange:B,replaceUrl:Z}}=f;return this.hooks.afterPreactivation(m,{navigationId:b,appliedUrlTree:x,rawUrlTree:I,skipLocationChange:!!B,replaceUrl:!!Z})}),(0,wt.U)(f=>{const m=function(n,t,e){const r=Hc(n,t._root,e?e._root:void 0);return new jh(r,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,br.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,wt.U)(r=>(new Yp(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,br.b)({next(){l=!0},complete(){l=!0}}),function(n){return t=>t.lift(new A(n))}(()=>{var f;if(!l&&!d){const m=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,m)):this.cancelNavigationTransition(i,m)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Mo(f=>{if(d=!0,function(n){return n&&n[Rc]}(f)){const m=kl(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Ke(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),m?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),I={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||V0(i.source)};this.scheduleNavigation(x,"imperative",null,I,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new ut(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return gi.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:l,urlTree:d}=r,f={replaceUrl:!0};if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}this.scheduleNavigation(d,i,l,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const i=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!i||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Yh(e),this.config=e.map(Lv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:l,fragment:d,queryParamsHandling:f,preserveFragment:m}=r,b=i||this.routerState.root,x=m?this.currentUrlTree.fragment:d;let I=null;switch(f){case"merge":I=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=l||null}return null!==I&&(I=this.removeEmptyProps(I)),function(n,t,e,r,i){if(0===e.length)return g(t.root,t.root,t,r,i);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new E(!0,0,n);let t=0,e=!1;const r=n.reduce((i,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return Br(l.outlets,(m,b)=>{f[b]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===d?(l.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?e=!0:".."===f?t++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new E(e,t,r)}(e);if(l.toRoot())return g(t.root,new dn([],{}),t,r,i);const d=function(n,t,e){if(n.isAbsolute)return new $(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new $(l,l===t.root,0)}const r=hd(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,l=e;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new $(r,!1,i-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,t,n),f=d.processChildren?Tt(d.segmentGroup,d.index,l.commands):et(d.segmentGroup,d.index,l.commands);return g(d.segmentGroup,f,t,r,i)}(b,this.currentUrlTree,e,I,null!=x?x:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=kl(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},gE):!1===r?Object.assign({},mE):r,kl(e))return sd(this.currentUrlTree,e,i);const l=this.parseUrl(e);return sd(this.currentUrlTree,l,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const l=e[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Ne(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,l,d){var f,m;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),x=V0(r)&&b&&!V0(b.source),Z=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===e.toString();if(x&&Z)return Promise.resolve(!0);let ne,we,Be;d?(ne=d.resolve,we=d.reject,Be=d.promise):Be=new Promise((gt,_t)=>{ne=gt,we=_t});const tt=++this.navigationId;let st;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),st=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):st=0,this.setTransition({id:tt,targetPageId:st,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:ne,reject:we,promise:Be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Be.catch(gt=>Promise.reject(gt))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(e,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Ke(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.DyG),a.LFG(Gp),a.LFG($c),a.LFG(Ce),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function V0(n){return"imperative"!==n}let rg=(()=>{class n{constructor(e,r,i,l,d){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=l||Gt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new H0(e,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36($c),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class H0{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Bc?this.route:t===$c?this.childContexts:this.parent.get(t,e)}}class Zv{}class Yv{preload(t,e){return(0,xt.of)(null)}}let $0=(()=>{class n{constructor(e,r,i,l,d){this.router=e,this.injector=l,this.preloadingStrategy=d,this.loader=new F0(r,i,b=>e.triggerEvent(new Rr(b)),b=>e.triggerEvent(new Il(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(sr(e=>e instanceof Ne),Mc(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(e,l)):l.children&&i.push(this.processRoutes(e,l.children));return(0,un.D)(i).pipe((0,fs.J)(),(0,wt.U)(l=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,xt.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Vr.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ms),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(Zv))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),yd=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof De?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ne&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ea&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new ea(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ms),a.LFG(Pu),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Gc=new a.OlP("ROUTER_CONFIGURATION"),yE=new a.OlP("ROUTER_FORROOT_GUARD"),vE=[Ce,{provide:Gp,useClass:Oc},{provide:ms,useFactory:function(n,t,e,r,i,l,d,f={},m,b){const x=new ms(null,n,t,e,r,i,l,_0(d));return m&&(x.urlHandlingStrategy=m),b&&(x.routeReuseStrategy=b),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,x),f.enableTracing&&x.events.subscribe(I=>{var B,Z;null===(B=console.group)||void 0===B||B.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(Z=console.groupEnd)||void 0===Z||Z.call(console)}),x},deps:[Gp,$c,Ce,a.zs3,a.v3s,a.Sil,O0,Gc,[class{},new a.FiY],[class{},new a.FiY]]},$c,{provide:Bc,useFactory:function(n){return n.routerState.root},deps:[ms]},{provide:a.v3s,useClass:a.EAV},$0,Yv,class{preload(t,e){return e().pipe(Mo(()=>(0,xt.of)(null)))}},{provide:Gc,useValue:{enableTracing:!1}}];function Kv(){return new a.PXZ("Router",ms)}let Qv=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[vE,Jv(e),{provide:yE,useFactory:cS,deps:[[ms,new a.FiY,new a.tp0]]},{provide:Gc,useValue:r||{}},{provide:ce,useFactory:bE,deps:[L,[new a.tBr(q),new a.FiY],Gc]},{provide:yd,useFactory:qO,deps:[ms,Pu,Gc]},{provide:Zv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Yv},{provide:a.PXZ,multi:!0,useFactory:Kv},[Xv,{provide:a.ip1,multi:!0,useFactory:wE,deps:[Xv]},{provide:CE,useFactory:hS,deps:[Xv]},{provide:a.tb,multi:!0,useExisting:CE}]]}}static forChild(e){return{ngModule:n,providers:[Jv(e)]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(yE,8),a.LFG(ms,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function qO(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new yd(n,t,e)}function bE(n,t,e={}){return e.useHash?new pe(n,t):new de(n,t)}function cS(n){return"guarded"}function Jv(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:O0,multi:!0,useValue:n}]}let Xv=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mn.xQ}appInitializer(){return this.injector.get(P,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),l=this.injector.get(ms),d=this.injector.get(Gc);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,xt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(Gc),i=this.injector.get($0),l=this.injector.get(yd),d=this.injector.get(ms),f=this.injector.get(a.z2F);e===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),l.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function wE(n){return n.appInitializer.bind(n)}function hS(n){return n.bootstrapListener.bind(n)}const CE=new a.OlP("Router Initializer"),EE=[];let pS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[Qv.forRoot(EE)],Qv]}),n})();var $e=O(8239),Wc=O(8873),Qt=O(4292),qc=O(3637),j0=O(6561);function la(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}var xE=O(6355);class gS{constructor(t,e){this.http=t,this.appComponent=e,this._1second=1e3,this._5seconds=5*this._1second,this.getMovingAverage=(r=[])=>{const i=[];let l=0,d=0;for(let f=0;f<r.length;f++)l+=r[f],d++,i[f]=l/d;return i}}stop(){}loadCandleList(t){this.sinal=t,this.http.get(`https://api.binance.com/api/v3/klines?symbol=${t.moeda}&interval=5m&limit=26`).subscribe(r=>{let l=this.verificarCruzamentoMACD(r);l.canBuy&&(l.sinal=this.sinal,l.id=this.sinal.moeda+this.sinal.tipo,l.dataHora=Wc().format("DD/MM/YYYY HH:mm:ss"),this.appComponent.acionarAlerta(l))},r=>console.error(r))}getMACD(t=[]){let l=this.appComponent.sinaisMap[this.sinal.id].priceCoin.toString(),d=l.indexOf("."),f=l.substr(d+1).length,m=(0,xE.macd)(t,5,12,9);return m.line.forEach((b,x)=>{b&&(m.line[x]=parseFloat(b.toFixed(d+f+1)))}),m.signal.forEach((b,x)=>{b&&(m.signal[x]=parseFloat(b.toFixed(d+f+1)))}),{MACD:m.line,signal:m.signal}}verificarCruzamentoMACD(t){let e=t.map(st=>parseFloat(st[4]));const r=this.mapCandleResult(t);this.fillMA5(r),this.fillM26(r),this.fillMA12(r);let i=r[r.length-1],l=r[r.length-2],x=this.getMACD(e),I={canBuy:!1,stopLossPrice:""},ne=x.MACD[x.MACD.length-2],we=x.signal[x.signal.length-2],Be=x.MACD[x.MACD.length-3],tt=x.signal[x.signal.length-3];return"LONG"===this.sinal.tipo&&i.M5>i.M26&&i.M26>i.M12&&l.M12>l.M5&&l.M5>l.M26&&(I.canBuy=!0),"SHORT"===this.sinal.tipo&&ne<we&&Be>tt&&(I.canBuy=!0),I.stopLossPrice=this.calculateStopLoss(t),I}verificarCompra(t){const e=this.mapCandleResult(t);this.fillMA5(e),this.fillM26(e),this.fillMA12(e);let r=e[e.length-1],i=e[e.length-2],l=e[e.length-3],d=t[t.length-1],f=t[t.length-2],m=t[t.length-3];console.log(`Moeda ${this.sinal.moeda}-${this.sinal.tipo} ${this.sinal.priceCoinPercentage}% `);let b=!1;"LONG"===this.sinal.tipo&&(r.MA5>r.MA12&&m.MA5<m.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26||this.sinal.priceCoin>r.MA12&&this.isGreenCandle(d)&&this.isGreenCandle(f)&&this.isGreenCandle(m)&&r.MA5<r.MA12&&i.MA5<i.MA12&&l.MA5<l.MA12)&&(b=!0);let x=!1;"SHORT"===this.sinal.tipo&&r.MA5<r.MA26&&l.MA5>l.MA26&&r.MA12>r.MA26&&r.MA12>r.MA5&&(x=!0);let I=b||x;console.log("Resultado: "+I);let B={canBuy:I,stopLossPrice:""};return I&&(B.stopLossPrice=this.calculateStopLoss(t)),B}calculateStopLoss(t){let e=t.length-1,r=parseFloat(t[e][2]),i=parseFloat(t[e][4]),l=parseFloat(t[--e][2]),d=parseFloat(t[--e][4]),f=parseFloat(t[--e][2]),m=parseFloat(t[--e][4]),b=0;return b="LONG"===this.sinal.tipo?[i,d,m].sort((x,I)=>x-I)[0]:[r,l,f].sort((x,I)=>I-x)[0],b.toString()}mapCandleResult(t=[]){let e=[];return t.forEach(r=>{let i=(parseFloat(r[1])+parseFloat(r[4]))/2;e.push({data:Wc(r[0]).add(3,"hours").format("HH:mm:ss"),mediana:parseFloat(String(i)),MA5:0,MA12:0,MA26:0})}),e}fillMA5(t=[]){let e=[];for(let i=t.length-5;i<t.length;i++)e.push(t[i]);let r=this.sinal.priceCoin.toString().length;e=this.getMovingAverage(e.map(i=>i.mediana));for(let i=t.length-5;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA5=l}}fillMA12(t=[]){let e=[];for(let i=t.length-12;i<t.length;i++)e.push(t[i]);e=this.getMovingAverage(e.map(i=>i.mediana));let r=this.sinal.priceCoin.toString().length;for(let i=t.length-12;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA12=l}}fillM26(t=[]){let e=t.map(l=>l.mediana),r=this.getMovingAverage(e),i=this.sinal.priceCoin.toString().length;t.forEach((l,d)=>{let f=r[d];f=parseFloat(f.toString().substr(0,i)),l.MA26=f})}checkCandleSinal(t){let e=t[t.length-1],r=t[t.length-2],i=t[t.length-3],l=parseFloat(e[1]),d=parseFloat(e[4]),m=(parseFloat(e[2]),parseFloat(e[3])),I=(parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[2])),B=parseFloat(r[3]),we=(parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[2])),Be=parseFloat(i[3]),tt=!1;return tt="LONG"===this.sinal.tipo?l<d&&d>I&&d>we&&m>B&&m>Be:l>d&&d<B&&d<Be&&d<I&&d<we,tt}checkDiffMAIsValid(t,e){let i=0,l=0,d=0,f=0;for(let b=e.length-3;b<e.length;b++){let x=e[b],I=e[b+1];if(b===e.length-1){"LONG"===t?(x.MA5>x.MA12&&l++,x.MA5>x.MA26&&d++,x.MA12>x.MA26&&f++):(x.MA5<x.MA12&&l--,x.MA5<x.MA26&&d--,x.MA12<x.MA26&&f--);break}"LONG"===t?(x.MA5<I.MA5&&i++,x.MA5>x.MA12&&l++,x.MA5>x.MA26&&d++,x.MA12>x.MA26&&f++):(x.MA5>I.MA5&&i--,x.MA5<x.MA12&&l--,x.MA5<x.MA26&&d--,x.MA12<x.MA26&&f--)}let m=!1;return("LONG"===t&&2===i&&3===l&&3===d&&3===f||"SHORT"===t&&-2===i&&-3===l&&-3===d&&-3===f)&&(m=!0),m}calculate_MA5_MA26_MA12(t,e){let r=t[t.length-1],i=this.checkCandleSinal(e[e.length-1]),l=!1,d=!1,f=!1;"LONG"===this.sinal.tipo?(l=r.MA5>r.MA26&&r.MA26>r.MA12,d=this.sinal.priceCoin>r.MA5):(l=r.MA5<r.MA26&&r.MA26<r.MA12,d=this.sinal.priceCoin<r.MA5);let m=0,b=0;for(let I=t.length-3;I<t.length;I++){let B=t[I],Z=t[I+1];if(!Z)break;"LONG"===this.sinal.tipo?(B.MA5<Z.MA5&&m++,B.MA26<Z.MA26&&b++):(B.MA5>Z.MA5&&m--,B.MA26>Z.MA26&&b--)}return("LONG"===this.sinal.tipo&&2===m&&2===b||"SHORT"===this.sinal.tipo&&-2===m&&-2===b)&&(f=!0),f&&i&&l&&d}calculate_MA5_MA12(t,e){let r=t[t.length-1],i=this.checkDiffMAIsValid(this.sinal.tipo,t),l=this.checkCandleSinal(e),d=!1,f=!1;return"LONG"===this.sinal.tipo?(d=r.MA5>r.MA12&&r.MA5>r.MA26&&r.MA12>r.MA26,f=this.sinal.priceCoin>r.MA5):(d=r.MA5<r.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26,f=this.sinal.priceCoin<r.MA5),i&&l&&d&&f}isGreenCandle(t){return parseFloat(t[1])<parseFloat(t[4])}isRedCandle(t){return parseFloat(t[1])>parseFloat(t[4])}}var W0=O(2527);class Ol{constructor(t,e){this.sinal=t,this.confRobo=e,this.umPorCento=0,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com",this.ENPOINT_ORDER="/fapi/v1/order",this.umPorCento="LONG"===t.tipo?(parseFloat(t.entradas[t.entradas.length-1].valor)-parseFloat(t.entradas[0].valor))/100:(parseFloat(t.entradas[0].valor)-parseFloat(t.entradas[t.entradas.length-1].valor))/100,this.makeRequestBuyOrder()}converterUSDT2MOEDA(t,e){let i=parseFloat((t/e*20).toFixed(0));return i<=0?1:i}objectToURLQuery(t){var e=[];for(var r in t)null!=t[r]&&e.push(r+"="+t[r]);return e.join("&")}makeRequestBuyOrder(){let t=parseFloat(this.sinal.priceCoin),e=this.converterUSDT2MOEDA(this.confRobo.valorEntradaUsdt,t);var r=1e3*Wc().unix(),l={symbol:this.sinal.moeda,side:"LONG"===this.sinal.tipo?"BUY":"SELL",type:"MARKET",timestamp:r,recvWindow:6e4,quantity:e};let d=window.localStorage.getItem("apiKey"),f=window.localStorage.getItem("apiSecret"),m=this.objectToURLQuery(l);var b=W0.HmacSHA256(m,f).toString(W0.enc.Hex);fetch(this.BINANCE_FUTURE_ENDPOINT+this.ENPOINT_ORDER+"?"+m+"&signature="+b,{method:"POST",headers:{"X-MBX-APIKEY":d}}).then(Z=>{if(Z.ok)return Z.json();throw Z.text()}).then(Z=>{}).catch(Z=>{Z.then(ne=>{let we=Wc();console.error(we,ne),console.log(we,`Erro ao comprar moeda ${this.sinal.moeda}, moeda foi bloqueada!`)})})}}var vd=O(6682),eb=O(8819);function bd(n,t){return e=>e.lift(new zO(n,t))}class zO{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new DE(t,this.compare,this.keySelector))}}class DE extends yr.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function tb(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new Fl(n,e))}}class Fl{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new q0(t,this.observables,this.project))}}class q0 extends Ph{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let l=0;l<i;l++)this.toRespond.push(l);for(let l=0;l<i;l++)this.add(cr(this,e[l],void 0,l))}notifyNext(t,e,r){this.values[r]=e;const i=this.toRespond;if(i.length>0){const l=i.indexOf(r);-1!==l&&i.splice(l,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class nb{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new YO(t,this.predicate))}}class YO extends yr.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var qn=O(8971),ei=O(8939),rb=(O(4828),O(3394)),za=O(3910),rs=O(8026),Y=O(3854),ca=O(5422);const z0="@firebase/database";let TE="";function _S(n){TE=n}class KO{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,Y.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,Y.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class QO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,Y.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const yS=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new KO(t)}}catch(t){}return new QO},Xh=yS("localStorage"),IE=yS("sessionStorage"),ig=new ca.Yd("@firebase/database"),vS=function(){let n=1;return function(){return n++}}(),bS=function(n){const t=(0,Y.dS)(n),e=new Y.gQ;e.update(t);const r=e.digest();return Y.US.encodeByteArray(r)},Po=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=Po.apply(null,r):t+="object"==typeof r?(0,Y.Pz)(r):r,t+=" "}return t};let Ll=null,AE=!0;const ib=function(n,t){(0,Y.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ig.logLevel=ca.in.VERBOSE,Ll=ig.log.bind(ig),t&&IE.set("logging_enabled",!0)):"function"==typeof n?Ll=n:(Ll=null,IE.remove("logging_enabled"))},ti=function(...n){if(!0===AE&&(AE=!1,null===Ll&&!0===IE.get("logging_enabled")&&ib(!0)),Ll){const t=Po.apply(null,n);Ll(t)}},ef=function(n){return function(...t){ti(n,...t)}},sg=function(...n){const t="FIREBASE INTERNAL ERROR: "+Po(...n);ig.error(t)},Ya=function(...n){const t=`FIREBASE FATAL ERROR: ${Po(...n)}`;throw ig.error(t),new Error(t)},Ur=function(...n){const t="FIREBASE WARNING: "+Po(...n);ig.warn(t)},Y0=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ua="[MIN_NAME]",Ka="[MAX_NAME]",Zc=function(n,t){if(n===t)return 0;if(n===ua||t===Ka)return-1;if(t===ua||n===Ka)return 1;{const e=nf(n),r=nf(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},wS=function(n,t){return n===t?0:n<t?-1:1},og=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,Y.Pz)(t))},wd=function(n){if("object"!=typeof n||null===n)return(0,Y.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,Y.Pz)(t[r]),e+=":",e+=wd(n[t[r]]);return e+="}",e},Cd=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function ni(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Ed=function(n){(0,Y.hu)(!Y0(n),"Invalid JSON number");const r=1023;let i,l,d,f,m;0===n?(l=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(m=52;m;m-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(m=11;m;m-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(i?1:0),b.reverse();const x=b.join("");let I="";for(m=0;m<64;m+=8){let B=parseInt(x.substr(m,8),2).toString(16);1===B.length&&(B="0"+B),I+=B}return I.toLowerCase()},NE=new RegExp("^-?(0*)\\d{1,10}$"),sb=-2147483648,lg=2147483647,nf=function(n){if(NE.test(n)){const t=Number(n);if(t>=sb&&t<=lg)return t}return null},xd=function(n){try{n()}catch(t){setTimeout(()=>{throw Ur("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},cg=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class ME{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Ur(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class XO{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(ti("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ur(t)}}let rf=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const Bs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xS="websocket",ab="long_polling";class LE{constructor(t,e,r,i,l=!1,d="",f=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xh.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Xh.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Q0(n,t,e){let r;if((0,Y.hu)("string"==typeof t,"typeof type must == string"),(0,Y.hu)("object"==typeof e,"typeof params must == object"),t===xS)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==ab)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return ni(e,(l,d)=>{i.push(l+"="+d)}),r+i.join("&")}class VE{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,Y.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,Y.p$)(this.counters_)}}const lb={},cb={};function ub(n){const t=n.toString();return lb[t]||(lb[t]=new VE),lb[t]}class TS{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&xd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class sf{constructor(t,e,r,i,l,d,f){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ef(t),this.stats_=ub(e),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),Q0(e,ab,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new TS(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Y.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new af((...l)=>{const[d,f,m,b,x]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=m;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Bs.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sf.forceAllow_=!0}static forceDisallow(){sf.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!sf.forceAllow_&&(sf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,Y.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,Y.h$)(e),i=Cd(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,Y.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class af{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=vS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=af.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){ti("frame writing exception"),f.stack&&ti(f.stack),ti(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||ti("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,Y.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{ti("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Dd=null;"undefined"!=typeof MozWebSocket?Dd=MozWebSocket:"undefined"!=typeof WebSocket&&(Dd=WebSocket);let Td=(()=>{class n{constructor(e,r,i,l,d,f,m){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ef(this.connId),this.stats_=ub(r),this.connURL=n.connectionURL_(r,f,m,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,l){const d={v:"5"};return!(0,Y.Yr)()&&"undefined"!=typeof location&&location.hostname&&Bs.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),l&&(d.ac=l),Q0(e,xS,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xh.set("previous_websocket_failure",!0);try{if((0,Y.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${TE}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new Dd(this.connURL,[],l)}else this.mySock=new Dd(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==Dd&&!n.forceDisallow_}static previouslyFailed(){return Xh.isInMemoryStorage||!0===Xh.get("previous_websocket_failure")}markConnectionHealthy(){Xh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,Y.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,Y.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=Cd(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class J0{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[sf,Td]}initTransports_(t){const e=Td&&Td.isAvailable();let r=e&&!Td.previouslyFailed();if(t.webSocketOnly&&(e||Ur("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Td];else{const i=this.transports_=[];for(const l of J0.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class LS{constructor(t,e,r,i,l,d,f,m,b,x){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=b,this.lastSessionId=x,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ef("c:"+this.id+":"),this.transportManager_=new J0(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=cg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=og("t",t),r=og("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=og("t",t),r=og("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=og("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?sg("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sg("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&Ur("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),cg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Id{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class wb{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,Y.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let l=0;l<i.length;l++)if(i[l].callback===e&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(t){(0,Y.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class zc extends wb{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zc}getInitialEvent(t){return(0,Y.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Vn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Rn(){return new Vn("")}function vn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Vl(n){return n.pieces_.length-n.pieceNum_}function dr(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Vn(n.pieces_,t)}function hg(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function fg(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Cb(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Vn(t,0)}function Xn(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Vn)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Vn(e,0)}function gn(n){return n.pieceNum_>=n.pieces_.length}function _s(n,t){const e=vn(n),r=vn(t);if(null===e)return t;if(e===r)return _s(dr(n),dr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function BS(n,t){const e=fg(n,0),r=fg(t,0);for(let i=0;i<e.length&&i<r.length;i++){const l=Zc(e[i],r[i]);if(0!==l)return l}return e.length===r.length?0:e.length<r.length?-1:1}function Yc(n,t){if(Vl(n)!==Vl(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function Oo(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(Vl(n)>Vl(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class US{constructor(t,e){this.errorPrefix_=e,this.parts_=fg(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Y.ug)(this.parts_[r]);jS(this)}}function jS(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ad(n))}function Ad(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class X0 extends wb{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new X0}getInitialEvent(t){return(0,Y.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const or=1e3;let gg,Sd=(()=>{class n extends Id{constructor(e,r,i,l,d,f,m,b){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=ef("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=or,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");X0.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&zc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const l=++this.requestNumber_,d={r:l,a:e,b:r};this.log_((0,Y.Pz)(d)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const r=new Y.BH,i={p:e._path.toString(),q:e._queryObject},l={action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||l!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(e,r,i,l){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,Y.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:r,query:e,tag:i};this.listens.get(f).set(d,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const d={p:i};e.tag&&(d.q=r._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest("q",d,m=>{const b=m.d,x=m.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",m),"ok"!==x&&this.removeListen_(i,l),e.onComplete&&e.onComplete(x,b))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,Y.r3)(e,"w")){const i=(0,Y.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Ur(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,Y.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,Y.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const d=l.s,f=l.d||"error";this.authToken_===e&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,Y.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,r)}sendUnlisten_(e,r,i,l){this.log_("Unlisten on "+e+" for "+r);const d={p:e};l&&(d.q=i,d.t=l),this.sendRequest("n",d)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,l){const d={p:r,d:i};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(e,r,i,l){this.putInternal("p",e,r,i,l)}merge(e,r,i,l){this.putInternal("m",e,r,i,l)}putInternal(e,r,i,l,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,Y.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):sg("Unrecognized action received from server: "+(0,Y.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=or,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=or,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=or),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,$e.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),l=e.onRealtimeDisconnect_.bind(e),d=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let m=!1,b=null;const x=function(){b?b.close():(m=!0,l())};e.realtime_={close:x,sendRequest:function(Z){(0,Y.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(Z)}};const B=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[Z,ne]=yield Promise.all([e.authTokenProvider_.getToken(B),e.appCheckTokenProvider_.getToken(B)]);m?ti("getToken() completed but was canceled"):(ti("getToken() completed. Creating connection."),e.authToken_=Z&&Z.accessToken,e.appCheckToken_=ne&&ne.token,b=new LS(d,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,l,we=>{Ur(we+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch(Z){e.log_("Failed to get token: "+Z),m||(e.repoInfo_.nodeAdmin&&Ur(Z),x())}}})()}interrupt(e){ti("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ti("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=or,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(d=>wd(d)).join("$"):"default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const i=new Vn(e).toString();let l;if(this.listens.has(i)){const d=this.listens.get(i);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,r){ti("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){ti("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,Y.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+TE.replace(/\./g,"-")]=1,(0,Y.uI)()?e["framework.cordova"]=1:(0,Y.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=zc.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class bn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new bn(t,e)}}class pg{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new bn(ua,t),i=new bn(ua,e);return 0!==this.compare(r,i)}minPost(){return bn.MIN}}class Tb extends pg{static get __EMPTY_NODE(){return gg}static set __EMPTY_NODE(t){gg=t}compare(t,e){return Zc(t.name,e.name)}isDefinedOn(t){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return bn.MIN}maxPost(){return new bn(Ka,gg)}makePost(t,e){return(0,Y.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new bn(t,gg)}toString(){return".key"}}const Xa=new Tb;class e_{constructor(t,e,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=e?r(t.key,e):1,i&&(d*=-1),d<0)t=this.isReverse_?t.left:t.right;else{if(0===d){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let n_,ys=(()=>{class n{constructor(e,r,i,l,d){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=l?l:vs.EMPTY_NODE,this.right=null!=d?d:vs.EMPTY_NODE}copy(e,r,i,l,d){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let l=this;const d=i(e,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(e,r,i),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return vs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,l;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return vs.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class vs{constructor(t,e=vs.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new vs(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ys.BLACK,null,null))}remove(t){return new vs(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ys.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new e_(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new e_(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new e_(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new e_(this.root_,null,this.comparator_,!0,t)}}function KE(n,t){return Zc(n.name,t.name)}function t_(n,t){return Zc(n,t)}vs.EMPTY_NODE=new class{copy(t,e,r,i,l){return this}insert(t,e,r){return new ys(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const QE=function(n){return"number"==typeof n?"number:"+Ed(n):"string:"+n},JE=function(n){if(n.isLeafNode()){const t=n.val();(0,Y.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,Y.r3)(t,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(n===n_||n.isEmpty(),"priority of unexpected type.");(0,Y.hu)(n===n_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let XE,WS,Ab,Nd=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),JE(this.priorityNode_)}static set __childrenNodeConstructor(e){XE=e}static get __childrenNodeConstructor(){return XE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return gn(e)?this:".priority"===vn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=vn(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,Y.hu)(".priority"!==i||1===Vl(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(dr(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+QE(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?Ed(this.value_):this.value_,this.lazyHash_=bS(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,Y.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,Y.hu)(l>=0,"Unknown leaf type: "+r),(0,Y.hu)(d>=0,"Unknown leaf type: "+i),l===d?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const wr=new class extends pg{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),l=r.compareTo(i);return 0===l?Zc(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return bn.MIN}maxPost(){return new bn(Ka,new Nd("[PRIORITY-POST]",Ab))}makePost(t,e){const r=WS(t);return new bn(e,new Nd("[PRIORITY-POST]",r))}toString(){return".priority"}},Sb=Math.log(2);class zS{constructor(t){this.count=parseInt(Math.log(t+1)/Sb,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const mg=function(n,t,e,r){n.sort(t);const i=function(m,b){const x=b-m;let I,B;if(0===x)return null;if(1===x)return I=n[m],B=e?e(I):I,new ys(B,I.node,ys.BLACK,null,null);{const Z=parseInt(x/2,10)+m,ne=i(m,Z),we=i(Z+1,b);return I=n[Z],B=e?e(I):I,new ys(B,I.node,ys.BLACK,ne,we)}},f=function(m){let b=null,x=null,I=n.length;const B=function(ne,we){const Be=I-ne,tt=I;I-=ne;const st=i(Be+1,tt),gt=n[Be],_t=e?e(gt):gt;Z(new ys(_t,gt.node,we,null,st))},Z=function(ne){b?(b.left=ne,b=ne):(x=ne,b=ne)};for(let ne=0;ne<m.count;++ne){const we=m.nextBitIsOne(),Be=Math.pow(2,m.count-(ne+1));we?B(Be,ys.BLACK):(B(Be,ys.BLACK),B(Be,ys.RED))}return x}(new zS(n.length));return new vs(r||t,f)};let r_;const _g={};class mi{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,Y.hu)(_g&&wr,"ChildrenNode.ts has not been loaded"),r_=r_||new mi({".priority":_g},{".priority":wr}),r_}get(t){const e=(0,Y.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof vs?e:null}hasIndex(t){return(0,Y.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,Y.hu)(t!==Xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=e.getIterator(bn.Wrap);let f,d=l.getNext();for(;d;)i=i||t.isDefinedOn(d.node),r.push(d),d=l.getNext();f=i?mg(r,t.getCompare()):_g;const m=t.toString(),b=Object.assign({},this.indexSet_);b[m]=t;const x=Object.assign({},this.indexes_);return x[m]=f,new mi(x,b)}addToIndexes(t,e){const r=(0,Y.UI)(this.indexes_,(i,l)=>{const d=(0,Y.DV)(this.indexSet_,l);if((0,Y.hu)(d,"Missing index implementation for "+l),i===_g){if(d.isDefinedOn(t.node)){const f=[],m=e.getIterator(bn.Wrap);let b=m.getNext();for(;b;)b.name!==t.name&&f.push(b),b=m.getNext();return f.push(t),mg(f,d.getCompare())}return _g}{const f=e.get(t.name);let m=i;return f&&(m=m.remove(new bn(t.name,f))),m.insert(t,t.node)}});return new mi(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,Y.UI)(this.indexes_,i=>{if(i===_g)return i;{const l=e.get(t.name);return l?i.remove(new bn(t.name,l)):i}});return new mi(r,this.indexSet_)}}let i_,sn=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&JE(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return i_||(i_=new n(new vs(t_),null,mi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||i_}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?i_:r}}getChild(e){const r=vn(e);return null===r?this:this.getImmediateChild(r).getChild(dr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,Y.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new bn(e,r);let l,d;r.isEmpty()?(l=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?i_:this.priorityNode_;return new n(l,f,d)}}updateChild(e,r){const i=vn(e);if(null===i)return r;{(0,Y.hu)(".priority"!==vn(e)||1===Vl(e),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(dr(e),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,l=0,d=!0;if(this.forEachChild(wr,(f,m)=>{r[f]=m.val(e),i++,d&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):d=!1}),!e&&d&&l<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+QE(this.getPriority().val())+":"),this.forEachChild(wr,(r,i)=>{const l=i.hash();""!==l&&(e+=":"+r+":"+l)}),this.lazyHash_=""===e?"":bS(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const l=this.resolveIndex_(i);if(l){const d=l.getPredecessorKey(new bn(e,r));return d?d.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new bn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new bn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,bn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,bn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)>0;)l.getNext(),d=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cf?-1:0}withIndex(e){if(e===Xa||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===Xa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(wr),l=r.getIterator(wr);let d=i.getNext(),f=l.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=l.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(e){return e===Xa?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const cf=new class extends sn{constructor(){super(new vs(t_),sn.EMPTY_NODE,mi.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return sn.EMPTY_NODE}isEmpty(){return!1}};function Ar(n,t=null){if(null===n)return sn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,Y.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Nd(n,Ar(t));if(n instanceof Array){let e=sn.EMPTY_NODE;return ni(n,(r,i)=>{if((0,Y.r3)(n,r)&&"."!==r.substring(0,1)){const l=Ar(i);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(r,l))}}),e.updatePriority(Ar(t))}{const e=[];let r=!1;if(ni(n,(d,f)=>{if("."!==d.substring(0,1)){const m=Ar(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),e.push(new bn(d,m)))}}),0===e.length)return sn.EMPTY_NODE;const l=mg(e,KE,d=>d.name,t_);if(r){const d=mg(e,wr.getCompare());return new sn(l,Ar(t),new mi({".priority":d},{".priority":wr}))}return new sn(l,Ar(t),mi.Default)}}Object.defineProperties(bn,{MIN:{value:new bn(ua,sn.EMPTY_NODE)},MAX:{value:new bn(Ka,cf)}}),Tb.__EMPTY_NODE=sn.EMPTY_NODE,Nd.__childrenNodeConstructor=sn,n_=cf,Ab=cf,function(n){WS=n}(Ar);class Nb extends pg{constructor(t){super(),this.indexPath_=t,(0,Y.hu)(!gn(t)&&".priority"!==vn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),l=r.compareTo(i);return 0===l?Zc(t.name,e.name):l}makePost(t,e){const r=Ar(t),i=sn.EMPTY_NODE.updateChild(this.indexPath_,r);return new bn(e,i)}maxPost(){const t=sn.EMPTY_NODE.updateChild(this.indexPath_,cf);return new bn(Ka,t)}toString(){return fg(this.indexPath_,0).join("/")}}const s_=new class extends pg{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?Zc(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return bn.MIN}maxPost(){return bn.MAX}makePost(t,e){const r=Ar(t);return new bn(e,r)}toString(){return".value"}},Kc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",YS=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const l=new Array(8);for(i=7;i>=0;i--)l[i]=Kc.charAt(e%64),e=Math.floor(e/64);(0,Y.hu)(0===e,"Cannot push at time == 0");let d=l.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=Kc.charAt(t[i]);return(0,Y.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),nx=function(n){if(n===""+lg)return"-";const t=nf(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let d=0;d<e.length;d++)e[d]=n.charAt(d);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return Ka;const l=Kc.charAt(Kc.indexOf(e[r])+1);return e[r]=l,e.slice(0,r+1).join("")},rx=function(n){if(n===""+sb)return ua;const t=nf(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+lg:(delete e[e.length-1],e.join("")):(e[e.length-1]=Kc.charAt(Kc.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function ix(n){return{type:"value",snapshotNode:n}}function uf(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Qc(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function el(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class no{constructor(t){this.index_=t}updateChild(t,e,r,i,l,d){(0,Y.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?t.hasChild(e)?d.trackChildChange(Qc(e,f)):(0,Y.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(uf(e,r)):d.trackChildChange(el(e,r,f))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(wr,(i,l)=>{e.hasChild(i)||r.trackChildChange(Qc(i,l))}),e.isLeafNode()||e.forEachChild(wr,(i,l)=>{if(t.hasChild(i)){const d=t.getImmediateChild(i);d.equals(l)||r.trackChildChange(el(i,l,d))}else r.trackChildChange(uf(i,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?sn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Bl{constructor(t){this.indexedFilter_=new no(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Bl.getStartPost_(t),this.endPost_=Bl.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,l,d){return this.matches(new bn(e,r))||(r=sn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,l,d)}updateFullNode(t,e,r){e.isLeafNode()&&(e=sn.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(sn.EMPTY_NODE);const l=this;return e.forEachChild(wr,(d,f)=>{l.matches(new bn(d,f))||(i=i.updateImmediateChild(d,sn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class KS{constructor(t){this.rangedFilter_=new Bl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,l,d){return this.rangedFilter_.matches(new bn(e,r))||(r=sn.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,l,d):this.fullLimitUpdateChild_(t,e,r,l,d)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=sn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let l;i=sn.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const f=l.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let l,d,f,m;if(i=e.withIndex(this.index_),i=i.updatePriority(sn.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const I=this.index_.getCompare();f=(B,Z)=>I(Z,B)}else m=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let b=0,x=!1;for(;m.hasNext();){const I=m.getNext();!x&&f(l,I)<=0&&(x=!0),x&&b<this.limit_&&f(I,d)<=0?b++:i=i.updateImmediateChild(I.name,sn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,l){let d;if(this.reverse_){const I=this.index_.getCompare();d=(B,Z)=>I(Z,B)}else d=this.index_.getCompare();const f=t;(0,Y.hu)(f.numChildren()===this.limit_,"");const m=new bn(e,r),b=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),x=this.rangedFilter_.matches(m);if(f.hasChild(e)){const I=f.getImmediateChild(e);let B=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=B&&(B.name===e||f.hasChild(B.name));)B=i.getChildAfterChild(this.index_,B,this.reverse_);const Z=null==B?1:d(B,m);if(x&&!r.isEmpty()&&Z>=0)return null!=l&&l.trackChildChange(el(e,r,I)),f.updateImmediateChild(e,r);{null!=l&&l.trackChildChange(Qc(e,I));const we=f.updateImmediateChild(e,sn.EMPTY_NODE);return null!=B&&this.rangedFilter_.matches(B)?(null!=l&&l.trackChildChange(uf(B.name,B.node)),we.updateImmediateChild(B.name,B.node)):we}}return r.isEmpty()?t:x&&d(b,m)>=0?(null!=l&&(l.trackChildChange(Qc(b.name,b.node)),l.trackChildChange(uf(e,r))),f.updateImmediateChild(e,r).updateImmediateChild(b.name,sn.EMPTY_NODE)):t}}class a_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=wr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ua}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ka}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===wr}copy(){const t=new a_;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Ei(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function df(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function hf(n,t){const e=n.copy();return e.index_=t,e}function Rd(n){const t={};if(n.isDefault())return t;let e;return n.index_===wr?e="$priority":n.index_===s_?e="$value":n.index_===Xa?e="$key":((0,Y.hu)(n.index_ instanceof Nb,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,Y.Pz)(e),n.startSet_&&(t.startAt=(0,Y.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,Y.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,Y.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,Y.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function kd(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==wr&&(t.i=n.index_.toString()),t}class Ul extends Id{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ef("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,Y.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const d=Ul.getListenId_(t,r),f={};this.listens_[d]=f;const m=Rd(t._queryParams);this.restRequest_(l+".json",m,(b,x)=>{let I=x;if(404===b&&(I=null,b=null),null===b&&this.onDataUpdate_(l,I,!1,r),(0,Y.DV)(this.listens_,d)===f){let B;B=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(B,null)}})}unlisten(t,e){const r=Ul.getListenId_(t,e);delete this.listens_[r]}get(t){const e=Rd(t._queryParams),r=t._path.toString(),i=new Y.BH;return this.restRequest_(r+".json",e,(l,d)=>{let f=d;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(e.auth=i.accessToken),l&&l.token&&(e.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(e);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,Y.cI)(f.responseText)}catch(b){Ur("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&Ur("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class ff{constructor(){this.rootNode_=sn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Hl(){return{value:null,children:new Map}}function ha(n,t,e){if(gn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=vn(t);n.children.has(r)||n.children.set(r,Hl()),ha(n.children.get(r),t=dr(t),e)}}function Jc(n,t){if(gn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(wr,(r,i)=>{ha(n,new Vn(r),i)}),Jc(n,t)}}if(n.children.size>0){const e=vn(t);return t=dr(t),n.children.has(e)&&Jc(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function Xc(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{Xc(i,new Vn(t.toString()+"/"+r),e)})}class ox{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ni(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class cx{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new ox(t);const r=1e4+2e4*Math.random();cg(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;ni(t,(i,l)=>{l>0&&(0,Y.r3)(this.statsToReport_,i)&&(e[i]=l,r=!0)}),r&&this.server_.reportStats(e),cg(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ro=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ro||(ro={})),ro))();function u_(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class d_{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=ro.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(gn(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Vn(t));return new d_(Rn(),e,this.revert)}}return(0,Y.hu)(vn(this.path)===t,"operationForChild called for unrelated child."),new d_(dr(this.path),this.affectedTree,this.revert)}}class gf{constructor(t,e){this.source=t,this.path=e,this.type=ro.LISTEN_COMPLETE}operationForChild(t){return gn(this.path)?new gf(this.source,Rn()):new gf(this.source,dr(this.path))}}class Pd{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=ro.OVERWRITE}operationForChild(t){return gn(this.path)?new Pd(this.source,Rn(),this.snap.getImmediateChild(t)):new Pd(this.source,dr(this.path),this.snap)}}class Od{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=ro.MERGE}operationForChild(t){if(gn(this.path)){const e=this.children.subtree(new Vn(t));return e.isEmpty()?null:e.value?new Pd(this.source,Rn(),e.value):new Od(this.source,Rn(),e)}return(0,Y.hu)(vn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Od(this.source,dr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $l{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(gn(t))return this.isFullyInitialized()&&!this.filtered_;const e=vn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class QS{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function vg(n,t,e,r,i,l){const d=r.filter(f=>f.type===e);d.sort((f,m)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,Y.g5)("Should only compare child_ events.");const r=new bn(t.childName,t.snapshotNode),i=new bn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),d.forEach(f=>{const m=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,l);i.forEach(b=>{b.respondsTo(f.type)&&t.push(b.createEvent(m,n.query_))})})}function bg(n,t){return{eventCache:n,serverCache:t}}function wg(n,t,e,r){return bg(new $l(t,e,r),n.serverCache)}function dx(n,t,e,r){return bg(n.eventCache,new $l(t,e,r))}function Pb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let h_;class Cr{constructor(t,e=(()=>(h_||(h_=new vs(wS)),h_))()){this.value=t,this.children=e}static fromObject(t){let e=new Cr(null);return ni(t,(r,i)=>{e=e.set(new Vn(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Rn(),value:this.value};if(gn(t))return null;{const r=vn(t),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(dr(t),e);return null!=l?{path:Xn(new Vn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(gn(t))return this;{const e=vn(t),r=this.children.get(e);return null!==r?r.subtree(dr(t)):new Cr(null)}}set(t,e){if(gn(t))return new Cr(e,this.children);{const r=vn(t),l=(this.children.get(r)||new Cr(null)).set(dr(t),e),d=this.children.insert(r,l);return new Cr(this.value,d)}}remove(t){if(gn(t))return this.children.isEmpty()?new Cr(null):new Cr(null,this.children);{const e=vn(t),r=this.children.get(e);if(r){const i=r.remove(dr(t));let l;return l=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&l.isEmpty()?new Cr(null):new Cr(this.value,l)}return this}}get(t){if(gn(t))return this.value;{const e=vn(t),r=this.children.get(e);return r?r.get(dr(t)):null}}setTree(t,e){if(gn(t))return e;{const r=vn(t),l=(this.children.get(r)||new Cr(null)).setTree(dr(t),e);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Cr(this.value,d)}}fold(t){return this.fold_(Rn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(Xn(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,Rn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(gn(t))return null;{const l=vn(t),d=this.children.get(l);return d?d.findOnPath_(dr(t),Xn(e,l),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Rn(),e)}foreachOnPath_(t,e,r){if(gn(t))return this;{this.value&&r(e,this.value);const i=vn(t),l=this.children.get(i);return l?l.foreachOnPath_(dr(t),Xn(e,i),r):new Cr(null)}}foreach(t){this.foreach_(Rn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(Xn(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class nl{constructor(t){this.writeTree_=t}static empty(){return new nl(new Cr(null))}}function Cg(n,t,e){if(gn(t))return new nl(new Cr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let l=r.value;const d=_s(i,t);return l=l.updateChild(d,e),new nl(n.writeTree_.set(i,l))}{const i=new Cr(e),l=n.writeTree_.setTree(t,i);return new nl(l)}}}function hx(n,t,e){let r=n;return ni(e,(i,l)=>{r=Cg(r,Xn(t,i),l)}),r}function fx(n,t){if(gn(t))return nl.empty();{const e=n.writeTree_.setTree(t,new Cr(null));return new nl(e)}}function Ob(n,t){return null!=jl(n,t)}function jl(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(_s(e.path,t)):null}function f_(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(wr,(r,i)=>{t.push(new bn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new bn(r,i.value))}),t}function eu(n,t){if(gn(t))return n;{const e=jl(n,t);return new nl(null!=e?new Cr(e):n.writeTree_.subtree(t))}}function px(n){return n.writeTree_.isEmpty()}function Eg(n,t){return XS(Rn(),n.writeTree_,t)}function XS(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,l)=>{".priority"===i?((0,Y.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):e=XS(Xn(n,i),l,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(Xn(n,".priority"),r)),e}}function p_(n,t){return __(t,n)}function tN(n,t){if(n.snap)return Oo(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&Oo(Xn(n.path,e),t))return!0;return!1}function nN(n){return n.visible}function Fb(n,t,e){let r=nl.empty();for(let i=0;i<n.length;++i){const l=n[i];if(t(l)){const d=l.path;let f;if(l.snap)Oo(e,d)?(f=_s(e,d),r=Cg(r,f,l.snap)):Oo(d,e)&&(f=_s(d,e),r=Cg(r,Rn(),l.snap.getChild(f)));else{if(!l.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(Oo(e,d))f=_s(e,d),r=hx(r,f,l.children);else if(Oo(d,e))if(f=_s(d,e),gn(f))r=hx(r,Rn(),l.children);else{const m=(0,Y.DV)(l.children,vn(f));if(m){const b=m.getChild(dr(f));r=Cg(r,Rn(),b)}}}}}return r}function xg(n,t,e,r,i){if(r||i){const l=eu(n.visibleWrites,t);return!i&&px(l)?e:i||null!=e||Ob(l,Rn())?Eg(Fb(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(Oo(b.path,t)||Oo(t,b.path))},t),e||sn.EMPTY_NODE):null}{const l=jl(n.visibleWrites,t);if(null!=l)return l;{const d=eu(n.visibleWrites,t);return px(d)?e:null!=e||Ob(d,Rn())?Eg(d,e||sn.EMPTY_NODE):null}}}function g_(n,t,e,r){return xg(n.writeTree,n.treePath,t,e,r)}function m_(n,t){return function(n,t,e){let r=sn.EMPTY_NODE;const i=jl(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(wr,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(e){const l=eu(n.visibleWrites,t);return e.forEachChild(wr,(d,f)=>{const m=Eg(eu(l,new Vn(d)),f);r=r.updateImmediateChild(d,m)}),f_(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return f_(eu(n.visibleWrites,t)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,t)}function yx(n,t,e,r){return function(n,t,e,r,i){(0,Y.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=Xn(t,e);if(Ob(n.visibleWrites,l))return null;{const d=eu(n.visibleWrites,l);return px(d)?i.getChild(e):Eg(d,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function Dg(n,t){return function(n,t){return jl(n.visibleWrites,t)}(n.writeTree,Xn(n.treePath,t))}function Tg(n,t,e){return function(n,t,e,r){const i=Xn(t,e),l=jl(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(e)?Eg(eu(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function lN(n,t){return __(Xn(n.treePath,t),n.writeTree)}function __(n,t){return{treePath:n,writeTree:t}}class cN{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,Y.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===e&&"child_removed"===l)this.changeMap.set(r,el(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===l)this.changeMap.set(r,Qc(r,i.oldSnap));else if("child_changed"===e&&"child_added"===l)this.changeMap.set(r,uf(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==l)throw(0,Y.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,el(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const _f=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class Lb{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new $l(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tg(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fd(this.viewCache_),l=function(n,t,e,r,i,l){return function(n,t,e,r,i,l,d){let f;const m=eu(n.visibleWrites,t),b=jl(m,Rn());if(null!=b)f=b;else{if(null==e)return[];f=Eg(m,e)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const x=[],I=d.getCompare(),B=l?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let Z=B.getNext();for(;Z&&x.length<i;)0!==I(Z,r)&&x.push(Z),Z=B.getNext();return x}}(n.writeTree,n.treePath,t,e,r,i,l)}(this.writes_,i,e,1,r,t);return 0===l.length?null:l[0]}}function y_(n,t,e,r,i,l){const d=t.eventCache;if(null!=Dg(r,e))return t;{let f,m;if(gn(e))if((0,Y.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const b=Fd(t),I=m_(r,b instanceof sn?b:sn.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),I,l)}else{const b=g_(r,Fd(t));f=n.filter.updateFullNode(t.eventCache.getNode(),b,l)}else{const b=vn(e);if(".priority"===b){(0,Y.hu)(1===Vl(e),"Can't have a priority with additional path components");const x=d.getNode();m=t.serverCache.getNode();const I=yx(r,e,x,m);f=null!=I?n.filter.updatePriority(x,I):d.getNode()}else{const x=dr(e);let I;if(d.isCompleteForChild(b)){m=t.serverCache.getNode();const B=yx(r,e,d.getNode(),m);I=null!=B?d.getNode().getImmediateChild(b).updateChild(x,B):d.getNode().getImmediateChild(b)}else I=Tg(r,b,t.serverCache);f=null!=I?n.filter.updateChild(d.getNode(),b,I,x,i,l):d.getNode()}}return wg(t,f,d.isFullyInitialized()||gn(e),n.filter.filtersNodes())}}function Ig(n,t,e,r,i,l,d,f){const m=t.serverCache;let b;const x=d?n.filter:n.filter.getIndexedFilter();if(gn(e))b=x.updateFullNode(m.getNode(),r,null);else if(x.filtersNodes()&&!m.isFiltered()){const Z=m.getNode().updateChild(e,r);b=x.updateFullNode(m.getNode(),Z,null)}else{const Z=vn(e);if(!m.isCompleteForPath(e)&&Vl(e)>1)return t;const ne=dr(e),Be=m.getNode().getImmediateChild(Z).updateChild(ne,r);b=".priority"===Z?x.updatePriority(m.getNode(),Be):x.updateChild(m.getNode(),Z,Be,ne,_f,null)}const I=dx(t,b,m.isFullyInitialized()||gn(e),x.filtersNodes());return y_(n,I,e,i,new Lb(i,I,l),f)}function bx(n,t,e,r,i,l,d){const f=t.eventCache;let m,b;const x=new Lb(i,t,l);if(gn(e))b=n.filter.updateFullNode(t.eventCache.getNode(),r,d),m=wg(t,b,!0,n.filter.filtersNodes());else{const I=vn(e);if(".priority"===I)b=n.filter.updatePriority(t.eventCache.getNode(),r),m=wg(t,b,f.isFullyInitialized(),f.isFiltered());else{const B=dr(e),Z=f.getNode().getImmediateChild(I);let ne;if(gn(B))ne=r;else{const we=x.getCompleteChild(I);ne=null!=we?".priority"===hg(B)&&we.getChild(Cb(B)).isEmpty()?we:we.updateChild(B,r):sn.EMPTY_NODE}m=Z.equals(ne)?t:wg(t,n.filter.updateChild(f.getNode(),I,ne,B,x,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function wx(n,t){return n.eventCache.isCompleteForChild(t)}function v_(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function $b(n,t,e,r,i,l,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let b,m=t;b=gn(e)?r:new Cr(null).setTree(e,r);const x=t.serverCache.getNode();return b.children.inorderTraversal((I,B)=>{if(x.hasChild(I)){const ne=v_(0,t.serverCache.getNode().getImmediateChild(I),B);m=Ig(n,m,new Vn(I),ne,i,l,d,f)}}),b.children.inorderTraversal((I,B)=>{const Z=!t.serverCache.isCompleteForChild(I)&&void 0===B.value;if(!x.hasChild(I)&&!Z){const we=v_(0,t.serverCache.getNode().getImmediateChild(I),B);m=Ig(n,m,new Vn(I),we,i,l,d,f)}}),m}class Gb{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new no(r.getIndex()),l=function(n){return n.loadsAllData()?new no(n.getIndex()):n.hasLimit()?new KS(n):new Bl(n)}(r);this.processor_=function(n){return{filter:n}}(l);const d=e.serverCache,f=e.eventCache,m=i.updateFullNode(sn.EMPTY_NODE,d.getNode(),null),b=l.updateFullNode(sn.EMPTY_NODE,f.getNode(),null),x=new $l(m,d.isFullyInitialized(),i.filtersNodes()),I=new $l(b,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=bg(I,x),this.eventGenerator_=new QS(this.query_)}get query(){return this.query_}}function dN(n,t){const e=Fd(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!gn(t)&&!e.getImmediateChild(vn(t)).isEmpty())?e.getChild(t):null}function qb(n){return 0===n.eventRegistrations_.length}function b_(n,t,e){const r=[];if(e){(0,Y.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(e,i);d&&r.push(d)})}if(t){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Zb(n,t,e,r){t.type===ro.MERGE&&null!==t.source.queryId&&((0,Y.hu)(Fd(n.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(Pb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function(n,t,e,r,i){const l=new cN;let d,f;if(e.type===ro.OVERWRITE){const b=e;b.source.fromUser?d=bx(n,t,b.path,b.snap,r,i,l):((0,Y.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered()&&!gn(b.path),d=Ig(n,t,b.path,b.snap,r,i,f,l))}else if(e.type===ro.MERGE){const b=e;b.source.fromUser?d=function(n,t,e,r,i,l,d){let f=t;return r.foreach((m,b)=>{const x=Xn(e,m);wx(t,vn(x))&&(f=bx(n,f,x,b,i,l,d))}),r.foreach((m,b)=>{const x=Xn(e,m);wx(t,vn(x))||(f=bx(n,f,x,b,i,l,d))}),f}(n,t,b.path,b.children,r,i,l):((0,Y.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered(),d=$b(n,t,b.path,b.children,r,i,f,l))}else if(e.type===ro.ACK_USER_WRITE){const b=e;d=b.revert?function(n,t,e,r,i,l){let d;if(null!=Dg(r,e))return t;{const f=new Lb(r,t,i),m=t.eventCache.getNode();let b;if(gn(e)||".priority"===vn(e)){let x;if(t.serverCache.isFullyInitialized())x=g_(r,Fd(t));else{const I=t.serverCache.getNode();(0,Y.hu)(I instanceof sn,"serverChildren would be complete if leaf node"),x=m_(r,I)}x=x,b=n.filter.updateFullNode(m,x,l)}else{const x=vn(e);let I=Tg(r,x,t.serverCache);null==I&&t.serverCache.isCompleteForChild(x)&&(I=m.getImmediateChild(x)),b=null!=I?n.filter.updateChild(m,x,I,dr(e),f,l):t.eventCache.getNode().hasChild(x)?n.filter.updateChild(m,x,sn.EMPTY_NODE,dr(e),f,l):m,b.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=g_(r,Fd(t)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,l)))}return d=t.serverCache.isFullyInitialized()||null!=Dg(r,Rn()),wg(t,b,d,n.filter.filtersNodes())}}(n,t,b.path,r,i,l):function(n,t,e,r,i,l,d){if(null!=Dg(i,e))return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(null!=r.value){if(gn(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return Ig(n,t,e,m.getNode().getChild(e),i,l,f,d);if(gn(e)){let b=new Cr(null);return m.getNode().forEachChild(Xa,(x,I)=>{b=b.set(new Vn(x),I)}),$b(n,t,e,b,i,l,f,d)}return t}{let b=new Cr(null);return r.foreach((x,I)=>{const B=Xn(e,x);m.isCompleteForPath(B)&&(b=b.set(x,m.getNode().getChild(B)))}),$b(n,t,e,b,i,l,f,d)}}(n,t,b.path,b.affectedTree,r,i,l)}else{if(e.type!==ro.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+e.type);d=function(n,t,e,r,i){const l=t.serverCache;return y_(n,dx(t,l.getNode(),l.isFullyInitialized()||gn(e),l.isFiltered()),e,r,_f,i)}(n,t,e.path,r,l)}const m=l.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=Pb(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&e.push(ix(Pb(t)))}}(t,d,m),{viewCache:d,changes:m}}(n.processor_,i,t,e,r);return function(n,t){(0,Y.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,Y.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,zb(n,l.changes,l.viewCache.eventCache.getNode(),null)}function zb(n,t,e,r){return function(n,t,e,r){const i=[],l=[];return t.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(d.childName,d.snapshotNode))}),vg(n,i,"child_removed",t,r,e),vg(n,i,"child_added",t,r,e),vg(n,i,"child_moved",l,r,e),vg(n,i,"child_changed",t,r,e),vg(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let Ag,x_;class w_{constructor(){this.views=new Map}}function E_(n,t,e,r){const i=t.source.queryId;if(null!==i){const l=n.views.get(i);return(0,Y.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Zb(l,t,e,r)}{let l=[];for(const d of n.views.values())l=l.concat(Zb(d,t,e,r));return l}}function Yb(n,t,e,r,i){const d=n.views.get(t._queryIdentifier);if(!d){let f=g_(e,i?r:null),m=!1;f?m=!0:r instanceof sn?(f=m_(e,r),m=!1):(f=sn.EMPTY_NODE,m=!1);const b=bg(new $l(f,m,!1),new $l(r,i,!1));return new Gb(t,b)}return d}function Kb(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Gl(n,t){let e=null;for(const r of n.views.values())e=e||dN(r,t);return e}function fN(n,t){return t._queryParams.loadsAllData()?Sg(n):n.views.get(t._queryIdentifier)}function Nx(n,t){return null!=fN(n,t)}function tu(n){return null!=Sg(n)}function Sg(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let pN=1;class Rx{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Cr(null),this.pendingWriteTree_={visibleWrites:nl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function D_(n,t,e,r,i){return function(n,t,e,r,i){(0,Y.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=Cg(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?bs(n,new Pd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Wl(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,Y.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,l=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=e&&tN(f,r.path)?i=!1:Oo(r.path,f.path)&&(l=!0)),d--}return!!i&&(l?(function(n){n.visibleWrites=Fb(n.allWrites,nN,Rn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=fx(n.visibleWrites,r.path):ni(r.children,m=>{n.visibleWrites=fx(n.visibleWrites,Xn(r.path,m))}),!0))}(n.pendingWriteTree_,t)){let l=new Cr(null);return null!=r.snap?l=l.set(Rn(),!0):ni(r.children,d=>{l=l.set(new Vn(d),!0)}),bs(n,new d_(r.path,l,e))}return[]}function yf(n,t,e){return bs(n,new Pd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function T_(n,t,e,r){const i=t._path,l=n.syncPointTree_.get(i);let d=[];if(l&&("default"===t._queryIdentifier||Nx(l,t))){const f=function(n,t,e,r){const i=t._queryIdentifier,l=[];let d=[];const f=tu(n);if("default"===i)for(const[m,b]of n.views.entries())d=d.concat(b_(b,e,r)),qb(b)&&(n.views.delete(m),b.query._queryParams.loadsAllData()||l.push(b.query));else{const m=n.views.get(i);m&&(d=d.concat(b_(m,e,r)),qb(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!tu(n)&&l.push(new((0,Y.hu)(Ag,"Reference.ts has not been loaded"),Ag)(t._repo,t._path)),{removed:l,events:d}}(l,t,e,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;d=f.events;const b=-1!==m.findIndex(I=>I._queryParams.loadsAllData()),x=n.syncPointTree_.findOnPath(i,(I,B)=>tu(B));if(b&&!x){const I=n.syncPointTree_.subtree(i);if(!I.isEmpty()){const B=function(n){return n.fold((t,e,r)=>{if(e&&tu(e))return[Sg(e)];{let i=[];return e&&(i=Kb(e)),ni(r,(l,d)=>{i=i.concat(d)}),i}})}(I);for(let Z=0;Z<B.length;++Z){const ne=B[Z],we=ne.query,Be=fa(n,ne);n.listenProvider_.startListening(Ng(we),Us(n,we),Be.hashFn,Be.onComplete)}}}if(!x&&m.length>0&&!r)if(b){const I=null;n.listenProvider_.stopListening(Ng(t),I)}else m.forEach(I=>{const B=n.queryToTagMap.get(Hs(I));n.listenProvider_.stopListening(Ng(I),B)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=Hs(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,m)}return d}function vN(n,t,e){const r=t._path;let i=null,l=!1;n.syncPointTree_.foreachOnPath(r,(I,B)=>{const Z=_s(I,r);i=i||Gl(B,Z),l=l||tu(B)});let f,d=n.syncPointTree_.get(r);d?(l=l||tu(d),i=i||Gl(d,Rn())):(d=new w_,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=sn.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((B,Z)=>{const ne=Gl(Z,Rn());ne&&(i=i.updateImmediateChild(B,ne))}));const m=Nx(d,t);if(!m&&!t._queryParams.loadsAllData()){const I=Hs(t);(0,Y.hu)(!n.queryToTagMap.has(I),"View does not exist, but we have a tag");const B=pN++;n.queryToTagMap.set(I,B),n.tagToQueryMap.set(B,I)}let x=function(n,t,e,r,i,l){const d=Yb(n,t,r,i,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,d),function(n,t){n.eventRegistrations_.push(t)}(d,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(wr,(l,d)=>{r.push(uf(l,d))}),e.isFullyInitialized()&&r.push(ix(e.getNode())),zb(n,r,e.getNode(),t)}(d,e)}(d,t,e,p_(n.pendingWriteTree_,r),i,f);if(!m&&!l){const I=fN(d,t);x=x.concat(function(n,t,e){const r=t._path,i=Us(n,t),l=fa(n,e),d=n.listenProvider_.startListening(Ng(t),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,Y.hu)(!tu(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((b,x,I)=>{if(!gn(b)&&x&&tu(x))return[Sg(x).query];{let B=[];return x&&(B=B.concat(Kb(x).map(Z=>Z.query))),ni(I,(Z,ne)=>{B=B.concat(ne)}),B}});for(let b=0;b<m.length;++b){const x=m[b];n.listenProvider_.stopListening(Ng(x),Us(n,x))}}return d}(n,t,I))}return x}function bf(n,t,e){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(d,f)=>{const b=Gl(f,_s(d,t));if(b)return b});return xg(i,t,l,e,!0)}function bs(n,t){return Px(t,n.syncPointTree_,null,p_(n.pendingWriteTree_,Rn()))}function Px(n,t,e,r){if(gn(n.path))return Jb(n,t,e,r);{const i=t.get(Rn());null==e&&null!=i&&(e=Gl(i,Rn()));let l=[];const d=vn(n.path),f=n.operationForChild(d),m=t.children.get(d);if(m&&f){const b=e?e.getImmediateChild(d):null,x=lN(r,d);l=l.concat(Px(f,m,b,x))}return i&&(l=l.concat(E_(i,n,r,e))),l}}function Jb(n,t,e,r){const i=t.get(Rn());null==e&&null!=i&&(e=Gl(i,Rn()));let l=[];return t.children.inorderTraversal((d,f)=>{const m=e?e.getImmediateChild(d):null,b=lN(r,d),x=n.operationForChild(d);x&&(l=l.concat(Jb(x,f,m,b)))}),i&&(l=l.concat(E_(i,n,r,e))),l}function fa(n,t){const e=t.query,r=Us(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||sn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=I_(n,e);if(r){const i=A_(r),l=i.path,d=i.queryId,f=_s(l,t);return Xb(n,l,new gf(u_(d),f))}return[]}(n,e._path,r):function(n,t){return bs(n,new gf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const l=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return T_(n,e,null,l)}}}}function Us(n,t){const e=Hs(t);return n.queryToTagMap.get(e)}function Hs(n){return n._path.toString()+"$"+n._queryIdentifier}function I_(n,t){return n.tagToQueryMap.get(t)}function A_(n){const t=n.indexOf("$");return(0,Y.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Vn(n.substr(0,t))}}function Xb(n,t,e){const r=n.syncPointTree_.get(t);return(0,Y.hu)(r,"Missing sync point for query tag that we're tracking"),E_(r,e,p_(n.pendingWriteTree_,t),null)}function Ng(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,Y.hu)(x_,"Reference.ts has not been loaded"),x_)(n._repo,n._path):n}class t1{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new t1(e)}node(){return this.node_}}class S_{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Xn(this.path_,t);return new S_(this.syncTree_,e)}node(){return bf(this.syncTree_,this.path_)}}const n1=function(n,t,e){return n&&"object"==typeof n?((0,Y.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ox(n[".sv"],t,e):"object"==typeof n[".sv"]?N_(n[".sv"],t):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ox=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,Y.hu)(!1,"Unexpected server value: "+n)}},N_=function(n,t,e){n.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Y.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,Y.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},Fx=function(n,t,e,r){return R_(t,new S_(e,n),r)},M_=function(n,t,e){return R_(n,new t1(t),e)};function R_(n,t,e){const r=n.getPriority().val(),i=n1(r,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const d=n,f=n1(d.getValue(),t,e);return f!==d.getValue()||i!==d.getPriority().val()?new Nd(f,Ar(i)):n}{const d=n;return l=d,i!==d.getPriority().val()&&(l=l.updatePriority(new Nd(i))),d.forEachChild(wr,(f,m)=>{const b=R_(m,t.getImmediateChild(f),e);b!==m&&(l=l.updateImmediateChild(f,b))}),l}}class Rg{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function Ld(n,t){let e=t instanceof Vn?t:new Vn(t),r=n,i=vn(e);for(;null!==i;){const l=(0,Y.DV)(r.node.children,i)||{children:{},childCount:0};r=new Rg(i,r,l),e=dr(e),i=vn(e)}return r}function ql(n){return n.node.value}function k_(n,t){n.node.value=t,s1(n)}function r1(n){return n.node.childCount>0}function kg(n,t){ni(n.node.children,(e,r)=>{t(new Rg(e,n,r))})}function i1(n,t,e,r){e&&!r&&t(n),kg(n,i=>{i1(i,t,!0,r)}),e&&r&&t(n)}function wf(n){return new Vn(null===n.parent?n.name:wf(n.parent)+"/"+n.name)}function s1(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===ql(n)&&!r1(n)}(e),i=(0,Y.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,s1(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,s1(n))}(n.parent,n.name,n)}const xN=/[\[\].#$\/\u0000-\u001F\u007F]/,Bx=/[\[\].#$\u0000-\u001F\u007F]/,o1=10485760,P_=function(n){return"string"==typeof n&&0!==n.length&&!xN.test(n)},Ux=function(n){return"string"==typeof n&&0!==n.length&&!Bx.test(n)},Pg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Y0(n)||n&&"object"==typeof n&&(0,Y.r3)(n,".sv")},rl=function(n,t,e,r){r&&void 0===t||Og((0,Y.gK)(n,"value"),t,e)},Og=function(n,t,e){const r=e instanceof Vn?new US(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Ad(r));if("function"==typeof t)throw new Error(n+"contains a function "+Ad(r)+" with contents = "+t.toString());if(Y0(t))throw new Error(n+"contains "+t.toString()+" "+Ad(r));if("string"==typeof t&&t.length>o1/3&&(0,Y.ug)(t)>o1)throw new Error(n+"contains a string greater than "+o1+" utf8 bytes "+Ad(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,l=!1;if(ni(t,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!P_(d)))throw new Error(n+" contains an invalid key ("+d+") "+Ad(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,Y.ug)(t),jS(n)})(r,d),Og(n,f,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,Y.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+Ad(r)+" in addition to actual children.")}},Hx=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,Y.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const l=[];ni(t,(d,f)=>{const m=new Vn(d);if(Og(i,f,Xn(e,m)),".priority"===hg(m)&&!Pg(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const l=fg(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!P_(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(BS);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&Oo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},a1=function(n,t,e){if(!e||void 0!==t){if(Y0(t))throw new Error((0,Y.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pg(t))throw new Error((0,Y.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Fg=function(n,t,e,r){if(!(r&&void 0===e||P_(e)))throw new Error((0,Y.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lg=function(n,t,e,r){if(!(r&&void 0===e||Ux(e)))throw new Error((0,Y.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Lo=function(n,t){if(".info"===vn(t))throw new Error(n+" failed = Can't modify data under /.info/")},l1=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!P_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ux(n)}(e))throw new Error((0,Y.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $x{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vg(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],l=i.getPath();null!==e&&!Yc(l,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:l}),e.events.push(i)}e&&n.eventLists_.push(e)}function O_(n,t,e){Vg(n,e),c1(n,r=>Yc(r,t))}function io(n,t,e){Vg(n,e),c1(n,r=>Oo(r,t)||Oo(t,r))}function c1(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(jx(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function jx(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();Ll&&ti("event: "+e.toString()),xd(r)}}}const u1="repo_interrupt";class d1{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $x,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hl(),this.transactionQueueTree_=new Rg,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nu(n){const e=n.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Bg(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:nu(n)})}function qx(n,t,e,r,i){n.dataUpdateCount++;const l=new Vn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let d=[];if(i)if(r){const m=(0,Y.UI)(e,b=>Ar(b));d=function(n,t,e,r){const i=I_(n,r);if(i){const l=A_(i),d=l.path,f=l.queryId,m=_s(d,t),b=Cr.fromObject(e);return Xb(n,d,new Od(u_(f),m,b))}return[]}(n.serverSyncTree_,l,m,i)}else{const m=Ar(e);d=function(n,t,e,r){const i=I_(n,r);if(null!=i){const l=A_(i),d=l.path,f=l.queryId,m=_s(d,t);return Xb(n,d,new Pd(u_(f),m,e))}return[]}(n.serverSyncTree_,l,m,i)}else if(r){const m=(0,Y.UI)(e,b=>Ar(b));d=function(n,t,e){const r=Cr.fromObject(e);return bs(n,new Od({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,l,m)}else{const m=Ar(e);d=yf(n.serverSyncTree_,l,m)}let f=l;d.length>0&&(f=Bd(n,l)),io(n.eventQueue_,f,d)}function Vd(n,t){Ug(n,"connected",t),!1===t&&function(n){$g(n,"onDisconnectEvents");const t=Bg(n),e=Hl();Xc(n.onDisconnect_,Rn(),(i,l)=>{const d=Fx(i,l,n.serverSyncTree_,t);ha(e,i,d)});let r=[];Xc(e,Rn(),(i,l)=>{r=r.concat(yf(n.serverSyncTree_,i,l));const d=g1(n,i);Bd(n,d)}),n.onDisconnect_=Hl(),io(n.eventQueue_,Rn(),r)}(n)}function Ug(n,t,e){const r=new Vn("/.info/"+t),i=Ar(e);n.infoData_.updateSnapshot(r,i);const l=yf(n.infoSyncTree_,r,i);io(n.eventQueue_,r,l)}function h1(n){return n.nextWriteId_++}function F_(n,t,e,r,i){$g(n,"set",{path:t.toString(),value:e,priority:r});const l=Bg(n),d=Ar(e,r),f=bf(n.serverSyncTree_,t),m=M_(d,f,l),b=h1(n),x=D_(n.serverSyncTree_,t,m,b,!0);Vg(n.eventQueue_,x),n.server_.put(t.toString(),d.val(!0),(B,Z)=>{const ne="ok"===B;ne||Ur("set at "+t+" failed: "+B);const we=Wl(n.serverSyncTree_,b,!ne);io(n.eventQueue_,t,we),Zl(0,i,B,Z)});const I=g1(n,t);Bd(n,I),io(n.eventQueue_,I,[])}function AN(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&Jc(n.onDisconnect_,t),Zl(0,e,r,i)})}function zx(n,t,e,r){const i=Ar(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(l,d)=>{"ok"===l&&ha(n.onDisconnect_,t,i),Zl(0,r,l,d)})}function Cf(n,t,e){let r;r=".info"===vn(t._path)?T_(n.infoSyncTree_,t,e):T_(n.serverSyncTree_,t,e),O_(n.eventQueue_,t._path,r)}function Hg(n){n.persistentConnection_&&n.persistentConnection_.interrupt(u1)}function $g(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),ti(e,...t)}function Zl(n,t,e,r){t&&xd(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let l=i;r&&(l+=": "+r);const d=new Error(l);d.code=i,t(d)}})}function p1(n,t,e){return bf(n.serverSyncTree_,t,e)||sn.EMPTY_NODE}function jg(n,t=n.transactionQueueTree_){if(t||ru(n,t),ql(t)){const e=Jx(n,t);(0,Y.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(b=>b.currentWriteId),i=p1(n,t,r);let l=i;const d=i.hash();for(let b=0;b<e.length;b++){const x=e[b];(0,Y.hu)(0===x.status,"tryToSendTransactionQueue_: items in queue should all be run."),x.status=1,x.retryCount++;const I=_s(t,x.path);l=l.updateChild(I,x.currentOutputSnapshotRaw)}const f=l.val(!0),m=t;n.server_.put(m.toString(),f,b=>{$g(n,"transaction put response",{path:m.toString(),status:b});let x=[];if("ok"===b){const I=[];for(let B=0;B<e.length;B++)e[B].status=2,x=x.concat(Wl(n.serverSyncTree_,e[B].currentWriteId)),e[B].onComplete&&I.push(()=>e[B].onComplete(null,!0,e[B].currentOutputSnapshotResolved)),e[B].unwatcher();ru(n,Ld(n.transactionQueueTree_,t)),jg(n,n.transactionQueueTree_),io(n.eventQueue_,t,x);for(let B=0;B<I.length;B++)xd(I[B])}else{if("datastale"===b)for(let I=0;I<e.length;I++)e[I].status=3===e[I].status?4:0;else{Ur("transaction at "+m.toString()+" failed: "+b);for(let I=0;I<e.length;I++)e[I].status=4,e[I].abortReason=b}Bd(n,t)}},d)}(n,wf(t),e)}else r1(t)&&kg(t,e=>{jg(n,e)})}function Bd(n,t){const e=Qx(n,t),r=wf(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const d=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],b=_s(e,m.path);let I,x=!1;if((0,Y.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)x=!0,I=m.abortReason,i=i.concat(Wl(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)x=!0,I="maxretry",i=i.concat(Wl(n.serverSyncTree_,m.currentWriteId,!0));else{const B=p1(n,m.path,d);m.currentInputSnapshot=B;const Z=t[f].update(B.val());if(void 0!==Z){Og("transaction failed: Data returned ",Z,m.path);let ne=Ar(Z);"object"==typeof Z&&null!=Z&&(0,Y.r3)(Z,".priority")||(ne=ne.updatePriority(B.getPriority()));const Be=m.currentWriteId,tt=Bg(n),st=M_(ne,B,tt);m.currentOutputSnapshotRaw=ne,m.currentOutputSnapshotResolved=st,m.currentWriteId=h1(n),d.splice(d.indexOf(Be),1),i=i.concat(D_(n.serverSyncTree_,m.path,st,m.currentWriteId,m.applyLocally)),i=i.concat(Wl(n.serverSyncTree_,Be,!0))}else x=!0,I="nodata",i=i.concat(Wl(n.serverSyncTree_,m.currentWriteId,!0))}io(n.eventQueue_,e,i),i=[],x&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&r.push("nodata"===I?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(I),!1,null)))}ru(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)xd(r[f]);jg(n,n.transactionQueueTree_)}(n,Jx(n,e),r),r}function Qx(n,t){let e,r=n.transactionQueueTree_;for(e=vn(t);null!==e&&void 0===ql(r);)r=Ld(r,e),e=vn(t=dr(t));return r}function Jx(n,t){const e=[];return Xx(n,t,e),e.sort((r,i)=>r.order-i.order),e}function Xx(n,t,e){const r=ql(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);kg(t,i=>{Xx(n,i,e)})}function ru(n,t){const e=ql(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,k_(t,e.length>0?e:void 0)}kg(t,r=>{ru(n,r)})}function g1(n,t){const e=wf(Qx(n,t)),r=Ld(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{m1(n,i)}),m1(n,r),i1(r,i=>{m1(n,i)}),e}function m1(n,t){const e=ql(t);if(e){const r=[];let i=[],l=-1;for(let d=0;d<e.length;d++)3===e[d].status||(1===e[d].status?((0,Y.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,e[d].status=3,e[d].abortReason="set"):((0,Y.hu)(0===e[d].status,"Unexpected transaction status in abort"),e[d].unwatcher(),i=i.concat(Wl(n.serverSyncTree_,e[d].currentWriteId,!0)),e[d].onComplete&&r.push(e[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?k_(t,void 0):e.length=l+1,io(n.eventQueue_,wf(t),i);for(let d=0;d<r.length;d++)xd(r[d])}}const B_=function(n,t){const e=eD(n),r=e.namespace;return"firebase.com"===e.domain&&Ya(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&Ya("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ur("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new LE(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Vn(e.pathString)}},eD=function(n){let t="",e="",r="",i="",l="",d=!0,f="https",m=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(f=n.substring(0,b-1),n=n.substring(b+2));let x=n.indexOf("/");-1===x&&(x=n.length);let I=n.indexOf("?");-1===I&&(I=n.length),t=n.substring(0,Math.min(x,I)),x<I&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(l){}t+="/"+i}return t}(n.substring(x,I)));const B=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ur(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,I)));b=t.indexOf(":"),b>=0?(d="https"===f||"wss"===f,m=parseInt(t.substring(b+1),10)):b=t.length;const Z=t.slice(0,b);if("localhost"===Z.toLowerCase())e="localhost";else if(Z.split(".").length<=2)e=Z;else{const ne=t.indexOf(".");r=t.substring(0,ne).toLowerCase(),e=t.substring(ne+1),l=r}"ns"in B&&(l=B.ns)}return{host:t,port:m,domain:e,subdomain:r,secure:d,scheme:f,pathString:i,namespace:l}};class _1{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Pz)(this.snapshot.exportVal())}}class tD{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Ef{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class xf{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new Y.BH;return AN(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Lo("OnDisconnect.remove",this._path);const t=new Y.BH;return zx(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Lo("OnDisconnect.set",this._path),rl("OnDisconnect.set",t,this._path,!1);const e=new Y.BH;return zx(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Lo("OnDisconnect.setWithPriority",this._path),rl("OnDisconnect.setWithPriority",t,this._path,!1),a1("OnDisconnect.setWithPriority",e,!1);const r=new Y.BH;return function(n,t,e,r,i){const l=Ar(e,r);n.server_.onDisconnectPut(t.toString(),l.val(!0),(d,f)=>{"ok"===d&&ha(n.onDisconnect_,t,l),Zl(0,i,d,f)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){Lo("OnDisconnect.update",this._path),Hx("OnDisconnect.update",t,this._path,!1);const e=new Y.BH;return function(n,t,e,r){if((0,Y.xb)(e))return ti("onDisconnect().update() called with empty data.  Don't do anything."),void Zl(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,l)=>{"ok"===i&&ni(e,(d,f)=>{const m=Ar(f);ha(n.onDisconnect_,Xn(t,d),m)}),Zl(0,r,i,l)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class $s{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return gn(this._path)?null:hg(this._path)}get ref(){return new so(this._repo,this._path)}get _queryIdentifier(){const t=kd(this._queryParams),e=wd(t);return"{}"===e?"default":e}get _queryObject(){return kd(this._queryParams)}isEqual(t){if(!((t=(0,Y.m9)(t))instanceof $s))return!1;const e=this._repo===t._repo,r=Yc(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function U_(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function iu(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Xa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ua)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ka)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===wr){if(null!=t&&!Pg(t)||null!=e&&!Pg(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(n.getIndex()instanceof Nb||n.getIndex()===s_,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Gg(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class so extends $s{constructor(t,e){super(t,e,new a_,!1)}get parent(){const t=Cb(this._path);return null===t?null:new so(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class su{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Vn(t),r=Ud(this.ref,t);return new su(this._node.getChild(e),r,wr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new su(i,Ud(this.ref,r),wr)))}hasChild(t){const e=new Vn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nD(n,t){return(n=(0,Y.m9)(n))._checkNotDeleted("ref"),void 0!==t?Ud(n._root,t):n._root}function y1(n,t){(n=(0,Y.m9)(n))._checkNotDeleted("refFromURL");const e=B_(t,n._repo.repoInfo_.nodeAdmin);l1("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ya("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),nD(n,e.path.toString())}function Ud(n,t){return null===vn((n=(0,Y.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Lg("child","path",e,!1)):Lg("child","path",t,!1),new so(n._repo,Xn(n._path,t));var e}function rD(n,t){n=(0,Y.m9)(n),Lo("set",n._path),rl("set",t,n._path,!1);const e=new Y.BH;return F_(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function H_(n,t){Hx("update",t,n._path,!1);const e=new Y.BH;return function(n,t,e,r){$g(n,"update",{path:t.toString(),value:e});let i=!0;const l=Bg(n),d={};if(ni(e,(f,m)=>{i=!1,d[f]=Fx(Xn(t,f),Ar(m),n.serverSyncTree_,l)}),i)ti("update() called with empty data.  Don't do anything."),Zl(0,r,"ok",void 0);else{const f=h1(n),m=function(n,t,e,r){!function(n,t,e,r){(0,Y.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=hx(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=Cr.fromObject(e);return bs(n,new Od({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,d,f);Vg(n.eventQueue_,m),n.server_.merge(t.toString(),e,(b,x)=>{const I="ok"===b;I||Ur("update at "+t+" failed: "+b);const B=Wl(n.serverSyncTree_,f,!I),Z=B.length>0?Bd(n,t):t;io(n.eventQueue_,Z,B),Zl(0,r,b,x)}),ni(e,b=>{const x=g1(n,Xn(t,b));Bd(n,x)}),io(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function RN(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(b,x)=>{const I=_s(b,e);r=r||Gl(x,I)});let i=n.syncPointTree_.get(e);i?r=r||Gl(i,Rn()):(i=new w_,n.syncPointTree_=n.syncPointTree_.set(e,i));const l=null!=r,d=l?new $l(r,!0,!1):null;return function(n){return Pb(n.viewCache_)}(Yb(i,t,p_(n.pendingWriteTree_,t._path),l?d.getNode():sn.EMPTY_NODE,l))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Ar(r).withIndex(t._queryParams.getIndex()),l=yf(n.serverSyncTree_,t._path,i);return O_(n.eventQueue_,t._path,l),Promise.resolve(i)},r=>($g(n,"get for query "+(0,Y.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,Y.m9)(n))._repo,n).then(t=>new su(t,new so(n._repo,n._path),n._queryParams.getIndex()))}class $_{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new _1("value",this,new su(t.snapshotNode,new so(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new tD(this,t,e):null}matches(t){return t instanceof $_&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Wg{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new tD(this,t,e):null}createEvent(t,e){(0,Y.hu)(null!=t.childName,"Child events should have a childName.");const r=Ud(new so(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new _1(t.type,this,new su(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Wg&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function zl(n,t,e,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const m=e,b=(x,I)=>{Cf(n._repo,n,f),m(x,I)};b.userCallback=e.userCallback,b.context=e.context,e=b}const d=new Ef(e,l||void 0),f="value"===t?new $_(d):new Wg(t,d);return function(n,t,e){let r;r=".info"===vn(t._path)?vN(n.infoSyncTree_,t,e):vN(n.serverSyncTree_,t,e),O_(n.eventQueue_,t._path,r)}(n._repo,n,f),()=>Cf(n._repo,n,f)}function v1(n,t,e,r){return zl(n,"value",t,e,r)}function sD(n,t,e,r){return zl(n,"child_added",t,e,r)}function oD(n,t,e,r){return zl(n,"child_changed",t,e,r)}function aD(n,t,e,r){return zl(n,"child_moved",t,e,r)}function lD(n,t,e,r){return zl(n,"child_removed",t,e,r)}function b1(n,t,e){let r=null;const i=e?new Ef(e):null;"value"===t?r=new $_(i):t&&(r=new Wg(t,i)),Cf(n._repo,n,r)}class pa{}class cD extends pa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){rl("endAt",this._value,t._path,!0);const e=df(t._queryParams,this._value,this._key);if(Gg(e),iu(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $s(t._repo,t._path,e,t._orderByCalled)}}class kN extends pa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){rl("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===Xa?("string"==typeof t&&(t=rx(t)),i=df(n,t,e)):(r=null==e?ua:rx(e),i=df(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Gg(e),iu(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $s(t._repo,t._path,e,t._orderByCalled)}}class dD extends pa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){rl("startAt",this._value,t._path,!0);const e=Ei(t._queryParams,this._value,this._key);if(Gg(e),iu(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $s(t._repo,t._path,e,t._orderByCalled)}}class PN extends pa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){rl("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===Xa)"string"==typeof t&&(t=nx(t)),r=Ei(n,t,e);else{let i;i=null==e?Ka:nx(e),r=Ei(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Gg(e),iu(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $s(t._repo,t._path,e,t._orderByCalled)}}class ON extends pa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $s(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class FN extends pa{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $s(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class gD extends pa{constructor(t){super(),this._path=t}_apply(t){U_(t,"orderByChild");const e=new Vn(this._path);if(gn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Nb(e),i=hf(t._queryParams,r);return iu(i),new $s(t._repo,t._path,i,!0)}}class VN extends pa{_apply(t){U_(t,"orderByKey");const e=hf(t._queryParams,Xa);return iu(e),new $s(t._repo,t._path,e,!0)}}class C1 extends pa{_apply(t){U_(t,"orderByPriority");const e=hf(t._queryParams,wr);return iu(e),new $s(t._repo,t._path,e,!0)}}class mD extends pa{_apply(t){U_(t,"orderByValue");const e=hf(t._queryParams,s_);return iu(e),new $s(t._repo,t._path,e,!0)}}class $N extends pa{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(rl("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cD(this._value,this._key)._apply(new dD(this._value,this._key)._apply(t))}}function ga(n,...t){let e=(0,Y.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,Y.hu)(!Ag,"__referenceConstructor has already been defined"),Ag=n})(so),function(n){(0,Y.hu)(!x_,"__referenceConstructor has already been defined"),x_=n}(so);const E1={};function x1(n,t,e,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Ya("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ti("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,b,d=B_(l,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(m=!0,l=`http://${b}?ns=${f.namespace}`,d=B_(l,i),f=d.repoInfo):m=!d.repoInfo.secure;const x=i&&m?new rf(rf.OWNER):new XO(n.name,n.options,t);l1("Invalid Firebase Database URL",d),gn(d.path)||Ya("Database URL must point to the root of a Firebase Database (not including a child path).");const I=function(n,t,e,r){let i=E1[t.name];i||(i={},E1[t.name]=i);let l=i[n.toURLString()];return l&&Ya("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new d1(n,false,e,r),i[n.toURLString()]=l,l}(f,n,x,new ME(n.name,e));return new D1(I,n)}class D1{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=ub(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Ul(n.repoInfo_,(r,i,l,d)=>{qx(n,r,i,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Vd(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Sd(n.repoInfo_,t,(r,i,l,d)=>{qx(n,r,i,l,d)},r=>{Vd(n,r)},r=>{!function(n,t){ni(t,(e,r)=>{Ug(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return cb[e]||(cb[e]=t()),cb[e]}(n.repoInfo_,()=>new cx(n.stats_,n.server_)),n.infoData_=new ff,n.infoSyncTree_=new Rx({startListening:(r,i,l,d)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=yf(n.infoSyncTree_,r._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),Ug(n,"connected",!1),n.serverSyncTree_=new Rx({startListening:(r,i,l,d)=>(n.server_.listen(r,l,i,(f,m)=>{const b=d(f,m);io(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new so(this._repo,Rn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=E1[t];(!e||e[n.key]!==n)&&Ya(`Database ${t}(${n.repoInfo_}) has already been deleted.`),Hg(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Ya("Cannot call "+t+" on a deleted database.")}}function I1(n,t){ib(n,t)}class S1{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Sd.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Sd.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},_S(rs.SDK_VERSION),(0,rs._registerComponent)(new za.wA("database",(t,{instanceIdentifier:e})=>x1(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,rs.registerVersion)(z0,"0.12.8",void 0),(0,rs.registerVersion)(z0,"0.12.8","esm2017");const ED=new ca.Yd("@firebase/database-compat"),eM=function(n){ED.warn("FIREBASE WARNING: "+n)};class y2{constructor(t){this._delegate=t}cancel(t){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),l=>r(l)),i}update(t,e){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,eM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class N1{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ma{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),Lg("DataSnapshot.child","path",t,!1),new ma(this._database,this._delegate.child(t))}hasChild(t){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Lg("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new ma(this._database,e)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new xi(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Wi{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var l;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",e,!1);const d=Wi.getCancelAndContextArgs_("Query.on",r,i),f=(b,x)=>{e.call(d.context,new ma(this.database,b),x)};f.userCallback=e,f.context=d.context;const m=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(t){case"value":return v1(this._delegate,f,m),e;case"child_added":return sD(this._delegate,f,m),e;case"child_removed":return lD(this._delegate,f,m),e;case"child_changed":return oD(this._delegate,f,m),e;case"child_moved":return aD(this._delegate,f,m),e;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,Y.Wj)("Query.off","callback",e,!0),(0,Y.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,b1(this._delegate,t,i)}else b1(this._delegate,t)}get(){return RN(this._delegate).then(t=>new ma(this.database,t))}once(t,e,r,i){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",e,!0);const l=Wi.getCancelAndContextArgs_("Query.once",r,i),d=new Y.BH,f=(b,x)=>{const I=new ma(this.database,b);e&&e.call(l.context,I,x),d.resolve(I)};f.userCallback=e,f.context=l.context;const m=b=>{l.cancel&&l.cancel.call(l.context,b),d.reject(b)};switch(t){case"value":v1(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":sD(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":lD(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":oD(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":aD(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(t){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new Wi(this.database,ga(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ON(n)}(t)))}limitToLast(t){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new Wi(this.database,ga(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new FN(n)}(t)))}orderByChild(t){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new Wi(this.database,ga(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Lg("orderByChild","path",n,!1),new gD(n)}(t)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new Wi(this.database,ga(this._delegate,new VN))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new Wi(this.database,ga(this._delegate,new C1))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new Wi(this.database,ga(this._delegate,new mD))}startAt(t=null,e){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new Wi(this.database,ga(this._delegate,function(n=null,t){return Fg("startAt","key",t,!0),new dD(n,t)}(t,e)))}startAfter(t=null,e){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new Wi(this.database,ga(this._delegate,function(n,t){return Fg("startAfter","key",t,!0),new PN(n,t)}(t,e)))}endAt(t=null,e){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new Wi(this.database,ga(this._delegate,function(n,t){return Fg("endAt","key",t,!0),new cD(n,t)}(t,e)))}endBefore(t=null,e){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new Wi(this.database,ga(this._delegate,function(n,t){return Fg("endBefore","key",t,!0),new kN(n,t)}(t,e)))}equalTo(t,e){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new Wi(this.database,ga(this._delegate,function(n,t){return Fg("equalTo","key",t,!0),new $N(n,t)}(t,e)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof Wi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,Y.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,Y.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,Y.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new xi(this.database,new so(this._delegate._repo,this._delegate._path))}}class xi extends Wi{constructor(t,e){super(t,new $s(e._repo,e._path,new a_,!1)),this.database=t,this._delegate=e}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new xi(this.database,Ud(this._delegate,t))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new xi(this.database,t):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new xi(this.database,this._delegate.root)}set(t,e){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",e,!0);const r=rD(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,eM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Lo("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",e,!0);const r=H_(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(Lo("setWithPriority",n._path),rl("setWithPriority",t,n._path,!1),a1("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Y.BH;return F_(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),l=>r(l)),i}remove(t){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return Lo("remove",n._path),rD(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,Y.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,Y.m9)(n),Lo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,l=new Y.BH,f=v1(n,()=>{});return function(n,t,e,r,i,l){$g(n,"transaction on "+t);const d={path:t,update:e,onComplete:r,status:null,order:vS(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=p1(n,t,void 0);d.currentInputSnapshot=f;const m=d.update(f.val());if(void 0===m)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{Og("transaction failed: Data returned ",m,d.path),d.status=0;const b=Ld(n.transactionQueueTree_,t),x=ql(b)||[];let I;x.push(d),k_(b,x),"object"==typeof m&&null!==m&&(0,Y.r3)(m,".priority")?(I=(0,Y.DV)(m,".priority"),(0,Y.hu)(Pg(I),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):I=(bf(n.serverSyncTree_,t)||sn.EMPTY_NODE).getPriority().val();const B=Bg(n),Z=Ar(m,I),ne=M_(Z,f,B);d.currentOutputSnapshotRaw=Z,d.currentOutputSnapshotResolved=ne,d.currentWriteId=h1(n);const we=D_(n.serverSyncTree_,t,ne,d.currentWriteId,d.applyLocally);io(n.eventQueue_,t,we),jg(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(m,b,x)=>{let I=null;m?l.reject(m):(I=new su(x,new so(n._repo,n._path),wr),l.resolve(new S1(b,I)))},f,i),l.promise}(this._delegate,t,{applyLocally:r}).then(l=>new N1(l.committed,new ma(this.database,l.snapshot)));return e&&i.then(l=>e(null,l.committed,l.snapshot),l=>e(l,!1,null)),i}setPriority(t,e){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,Y.m9)(n),Lo("setPriority",n._path),a1("setPriority",t,!1);const e=new Y.BH;return F_(n._repo,Xn(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,Y.m9)(n),Lo("push",n._path),rl("push",t,n._path,!0);const e=nu(n._repo),r=YS(e),i=Ud(n,r),l=Ud(n,r);let d;return d=null!=t?rD(l,t).then(()=>l):Promise.resolve(l),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,t),i=r.then(d=>new xi(this.database,d));e&&i.then(()=>e(null),d=>e(d));const l=new xi(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return Lo("Reference.onDisconnect",this._delegate._path),new y2(new xf(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class qg{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,Y.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ya("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ya('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new rf(rf.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,Y.Sg)(r.mockUserToken,n.app.options.projectId);l=new rf(d)}!function(n,t,e,r){n.repoInfo_=new LE(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,l)}(this._delegate,t,e,r)}ref(t){if((0,Y.Dv)("database.ref",0,1,arguments.length),t instanceof xi){const e=y1(this._delegate,t.toString());return new xi(this,e)}{const e=nD(this._delegate,t);return new xi(this,e)}}refFromURL(t){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const r=y1(this._delegate,t);return new xi(this,r)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,Y.m9)(n))._checkNotDeleted("goOffline"),Hg(n._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,Y.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(u1)}(n._repo)}(this._delegate)}}qg.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var nM=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){_S(e);const d=new za.zt("auth-internal",new za.H0("database-standalone"));return d.setComponent(new za.wA("auth-internal",()=>r,"PRIVATE")),{instance:new qg(x1(n,d,void 0,t,l),n),namespace:i}}});const il=qg.ServerValue;!function(n){n.INTERNAL.registerComponent(new za.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new qg(i,r)},"PUBLIC").setServiceProps({Reference:xi,Query:Wi,Database:qg,DataSnapshot:ma,enableLogging:I1,INTERNAL:nM,ServerValue:il}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(rb.Z);var j_=O(9746),G_=O(7771),rM=O(8858);class iM extends Mn.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new b2(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,l=r.length;let d;if(this.closed)throw new Tl.N;if(this.isStopped||this.hasError?d=Vh.w.EMPTY:(this.observers.push(t),d=new rM.W(this,t)),i&&t.add(t=new j_.ht(t,i)),e)for(let f=0;f<l&&!t.closed;f++)t.next(r[f]);else for(let f=0;f<l&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||G_.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,l=i.length;let d=0;for(;d<l&&!(t-i[d].time<r);)d++;return l>e&&(d=Math.max(d,l-e)),d>0&&i.splice(0,d),i}}class b2{constructor(t,e){this.time=t,this.value=e}}function DD(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let i,d,l=0,f=!1,m=!1;return function(x){let I;l++,!i||f?(f=!1,i=new iM(n,t,r),I=i.subscribe(this),d=x.subscribe({next(B){i.next(B)},error(B){f=!0,i.error(B)},complete(){m=!0,d=void 0,i.complete()}}),m&&(d=void 0)):I=i.subscribe(this),this.add(()=>{l--,I.unsubscribe(),I=void 0,d&&!m&&e&&0===l&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function TD(n,t){return t?gr(()=>n,t):gr(()=>n)}var Zg=O(2639);O(2329);const zg=new Map,Yg={activated:!1,tokenObservers:[]},cM={initialized:!1,enabled:!1};function Di(n){return zg.get(n)||Yg}function sl(n,t){zg.set(n,t)}function W_(){return cM}class pM{constructor(t,e,r,i,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,$e.Z)(function*(){e.stop();try{e.pending=new Y.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new Y.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const ws=new Y.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function MD(n){if(!Di(n).activated)throw ws.create("use-before-activation",{appName:n.name})}function Yl(n,t){return q_.apply(this,arguments)}function q_(){return(q_=(0,$e.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const I=yield i.getHeartbeatsHeader();I&&(r["X-Firebase-Client"]=I)}const l={method:"POST",body:JSON.stringify(t),headers:r};let d,f;try{d=yield fetch(n,l)}catch(I){throw ws.create("fetch-network-error",{originalErrorMessage:I.message})}if(200!==d.status)throw ws.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(I){throw ws.create("fetch-parse-error",{originalErrorMessage:I.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(m[1]),x=Date.now();return{token:f.attestationToken,expireTimeMillis:x+b,issuedAtTimeMillis:x}})).apply(this,arguments)}function yM(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Kg="firebase-app-check-store";let Qg=null;function z_(){return Qg||(Qg=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(ws.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Kg,{keyPath:"compositeKey"})}}}catch(e){t(ws.create("storage-open",{originalErrorMessage:e.message}))}}),Qg)}function B1(){return(B1=(0,$e.Z)(function*(n,t){const r=(yield z_()).transaction(Kg,"readwrite"),l=r.objectStore(Kg).put({compositeKey:n,value:t});return new Promise((d,f)=>{l.onsuccess=m=>{d()},r.onerror=m=>{var b;f(ws.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Y_=new ca.Yd("@firebase/app-check");function Kl(n,t){return(0,Y.hl)()?function(n,t){return function(n,t){return B1.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Y_.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function CM(){return W_().enabled}function Yt(){return js.apply(this,arguments)}function js(){return(js=(0,$e.Z)(function*(){const n=W_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const jd={error:"UNKNOWN_ERROR"};function N2(n){return Y.US.encodeString(JSON.stringify(n),!1)}function em(n){return K_.apply(this,arguments)}function K_(){return(K_=(0,$e.Z)(function*(n,t=!1){const e=n.app;MD(e);const r=Di(e);let l,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Gs(m)&&(i=m)}if(!t&&i&&Gs(i))return{token:i.token};let f,d=!1;if(CM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Yl(yM(e,yield Yt()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const m=yield r.exchangeTokenPromise;return yield Kl(e,m),sl(e,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),d=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Y_.warn(m.message):Y_.error(m),l=m}return i?(f={token:i.token},sl(e,Object.assign(Object.assign({},r),{token:i})),yield Kl(e,i)):f=FD(l),d&&Sr(e,f),f})).apply(this,arguments)}function $1(n,t){const e=Di(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),sl(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function OD(n){const{app:t}=n,e=Di(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new pM((0,$e.Z)(function*(){let r;if(r=Di(t).token?yield em(n,!0):yield em(n),r.error)throw r.error}),()=>!0,()=>{const e=Di(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),sl(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function Sr(n,t){const e=Di(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function Gs(n){return n.expireTimeMillis-Date.now()>0}function FD(n){return{token:N2(jd),error:n}}class EM{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Di(this.app);for(const e of t)$1(this.app,e.next);return Promise.resolve()}}const HD="app-check-internal";(0,rs._registerComponent)(new za.wA("app-check",n=>function(n,t){return new EM(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(HD).initialize()})),(0,rs._registerComponent)(new za.wA(HD,n=>function(n){return{getToken:t=>em(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,l=Di(i),d={next:e,error:r,type:t};if(sl(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&Gs(l.token)){const f=l.token;Promise.resolve().then(()=>{e({token:f.token}),OD(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>OD(n))}(n,"INTERNAL",t),removeTokenListener:t=>$1(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,rs.registerVersion)("@firebase/app-check","0.5.6");class ey{constructor(){return(0,qn.vb)("app-check")}}"undefined"!=typeof window&&window;var im=O(7841);const qD=new a.OlP("angularfire2.auth.use-emulator"),z1=new a.OlP("angularfire2.auth.settings"),Y1=new a.OlP("angularfire2.auth.tenant-id"),K1=new a.OlP("angularfire2.auth.langugage-code"),Q1=new a.OlP("angularfire2.auth.use-device-language"),J1=new a.OlP("angularfire.auth.persistence"),X1=(n,t,e,r,i,l,d,f)=>(0,ei.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=t.runOutsideAngular(()=>n.auth());if(e&&m.useEmulator(...e),r&&(m.tenantId=r),m.languageCode=i,l&&m.useDeviceLanguage(),d)for(const[b,x]of Object.entries(d))m.settings[b]=x;return f&&m.setPersistence(f),m},[e,r,i,l,d,f]);let Ql=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I,B,Z){const ne=new Mn.xQ,we=(0,xt.of)(void 0).pipe((0,j_.QV)(d.outsideAngular),gr(()=>l.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,4828)))),(0,wt.U)(()=>(0,ei.on)(e,l,r)),(0,wt.U)(Be=>X1(Be,l,f,b,x,I,m,B)),DD({bufferSize:1,refCount:!1}));if(Dh(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,xt.of)(null);else{we.pipe(Ir()).subscribe();const tt=we.pipe(gr(_t=>_t.getRedirectResult().then(jt=>jt,()=>null)),qn.iC,DD({bufferSize:1,refCount:!1})),st=we.pipe(gr(_t=>new ir.y(jt=>({unsubscribe:l.runOutsideAngular(()=>_t.onAuthStateChanged(wn=>jt.next(wn),wn=>jt.error(wn),()=>jt.complete()))})))),gt=we.pipe(gr(_t=>new ir.y(jt=>({unsubscribe:l.runOutsideAngular(()=>_t.onIdTokenChanged(wn=>jt.next(wn),wn=>jt.error(wn),()=>jt.complete()))}))));this.authState=tt.pipe(TD(st),(0,Zg.R)(d.outsideAngular),(0,j_.QV)(d.insideAngular)),this.user=tt.pipe(TD(gt),(0,Zg.R)(d.outsideAngular),(0,j_.QV)(d.insideAngular)),this.idToken=this.user.pipe(gr(_t=>_t?(0,un.D)(_t.getIdToken()):(0,xt.of)(null))),this.idTokenResult=this.user.pipe(gr(_t=>_t?(0,un.D)(_t.getIdTokenResult()):(0,xt.of)(null))),this.credential=(0,vd.T)(tt,ne,this.authState.pipe(sr(_t=>!_t))).pipe((0,wt.U)(_t=>(null==_t?void 0:_t.user)?_t:null),(0,Zg.R)(d.outsideAngular),(0,j_.QV)(d.insideAngular))}return(0,ei.pX)(this,we,l,{spy:{apply:(Be,tt,st)=>{(Be.startsWith("signIn")||Be.startsWith("createUser"))&&st.then(gt=>ne.next(gt))}}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ei.Dh),a.LFG(ei.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(qn.HU),a.LFG(qD,8),a.LFG(z1,8),a.LFG(Y1,8),a.LFG(K1,8),a.LFG(Q1,8),a.LFG(J1,8),a.LFG(ey,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),PM=(()=>{class n{constructor(){im.Z.registerVersion("angularfire",qn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[Ql]}),n})();function Pf(n){return null==n}function FM(n){return"function"==typeof n.set}function ew(n,t){return FM(t)?t:n.ref(t)}function zD(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(FM(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function sm(n,t,e="on",r=qc.z){return new ir.y(i=>{let l=null;return l=n[e](t,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===e&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===e?{unsubscribe(){null!=l&&n.off(t,l)}}:{unsubscribe(){}}}).pipe((0,wt.U)(i=>{const{snapshot:l,prevKey:d}=i;let f=null;return l.exists()&&(f=l.key),{type:t,payload:l,prevKey:d,key:f}}),(0,eb.B)())}function YD(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function KD(n,t){const{payload:e,prevKey:r,key:i}=t,l=YD(n,i),d=function(n,t){if(Pf(t))return 0;{const e=YD(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(m=>{const b={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==e.key)).splice(d,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(d,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===i?t:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function QD(n){return(Pf(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function JD(n,t,e){return function(n,t,e){return sm(n,"value","once",e).pipe(gr(r=>{const i=[(0,xt.of)(r)];return t.forEach(l=>i.push(sm(n,l,"on",e))),(0,vd.T)(...i).pipe(La(KD,[]))}),bd())}(n,t=QD(t),e)}function BM(n,t,e){const r=(t=QD(t)).map(i=>sm(n,i,"on",e));return(0,vd.T)(...r)}function XD(n,t){return function(r,i){return zD(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function UM(n){return function(e){return e?zD(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function eT(n,t){return function(){return sm(n,"value","on",t)}}const jM=new a.OlP("angularfire2.realtimeDatabaseURL"),tT=new a.OlP("angularfire2.database.use-emulator");let nw=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I,B,Z,ne,we,Be){this.schedulers=f;const tt=m,st=(0,ei.on)(e,d,r);b&&X1(st,d,x,B,Z,ne,I,we),this.database=(0,ei.cc)(`${st.name}.database.${i}`,"AngularFireDatabase",st.name,()=>{const gt=d.runOutsideAngular(()=>st.database(i||void 0));return tt&&gt.useEmulator(...tt),gt},[tt])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ew(this.database,e));let l=i;return r&&(l=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XD(r,"update"),set:XD(r,"set"),push:i=>r.push(i),remove:UM(r),snapshotChanges:i=>JD(n,i,e).pipe(qn.iC),stateChanges:i=>BM(n,i,e).pipe(qn.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return sm(n,"value","on",t).pipe((0,wt.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(tb(t),(0,wt.U)(([i,l])=>{const d=i.lastKeyToLoad,f=l.map(m=>m.key);return{actions:l,lastKeyToLoad:d,loadedKeys:f}}),function(n){return t=>t.lift(new nb(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,wt.U)(i=>i.actions))}(n,BM(n,t).pipe(La((i,l)=>[...i,l],[])),e)}(n,i,e).pipe(qn.iC),valueChanges:(i,l)=>JD(n,i,e).pipe((0,wt.U)(f=>f.map(m=>l&&l.idField?Object.assign(Object.assign({},m.payload.val()),{[l.idField]:m.key}):m.payload.val())),qn.iC)}}(l,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>eT(n,t.schedulers.outsideAngular)().pipe(qn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>eT(n,t.schedulers.outsideAngular)().pipe(qn.iC,(0,wt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ew(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ei.Dh),a.LFG(ei.xv,8),a.LFG(jM,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(qn.HU),a.LFG(tT,8),a.LFG(Ql,8),a.LFG(qD,8),a.LFG(z1,8),a.LFG(Y1,8),a.LFG(K1,8),a.LFG(Q1,8),a.LFG(J1,8),a.LFG(ey,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var Of=O(982);function Ii(){return n=>n.lift(new nT)}class nT{call(t,e){return e.subscribe(new _a(t))}}class _a extends yr.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var vt,rw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jl={},ty=ty||{},Kt=rw||self;function ny(){}function iw(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function om(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var sw="closure_uid_"+(1e9*Math.random()>>>0),H2=0;function GM(n,t,e){return n.call.apply(n.bind,arguments)}function WM(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function $r(n,t,e){return($r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?GM:WM).apply(null,arguments)}function ow(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ai(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return t.prototype[i].apply(r,d)}}function au(){this.s=this.s,this.o=this.o}var iT={};au.prototype.s=!1,au.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,sw)&&n[sw]||(n[sw]=++H2)}(this);delete iT[n]}},au.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sT=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},ry=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&t.call(e,i[l],l,n)};function aw(n){return Array.prototype.concat.apply([],arguments)}function iy(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function am(n){return/^[\s\xa0]*$/.test(n)}var Es,oT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Cs(n,t){return-1!=n.indexOf(t)}function lw(n,t){return n<t?-1:n>t?1:0}e:{var aT=Kt.navigator;if(aT){var lT=aT.userAgent;if(lT){Es=lT;break e}}Es=""}function Wd(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function cw(n){const t={};for(const e in n)t[e]=n[e];return t}var uw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dw(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let l=0;l<uw.length;l++)e=uw[l],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function sy(n){return sy[" "](n),n}sy[" "]=ny;var lu,uT=Cs(Es,"Opera"),Ff=Cs(Es,"Trident")||Cs(Es,"MSIE"),hw=Cs(Es,"Edge"),oy=hw||Ff,dT=Cs(Es,"Gecko")&&!(Cs(Es.toLowerCase(),"webkit")&&!Cs(Es,"Edge"))&&!(Cs(Es,"Trident")||Cs(Es,"MSIE"))&&!Cs(Es,"Edge"),ZM=Cs(Es.toLowerCase(),"webkit")&&!Cs(Es,"Edge");function hT(){var n=Kt.document;return n?n.documentMode:void 0}e:{var qd="",fw=function(){var n=Es;return dT?/rv:([^\);]+)(\)|;)/.exec(n):hw?/Edge\/([\d\.]+)/.exec(n):Ff?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ZM?/WebKit\/(\S+)/.exec(n):uT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(fw&&(qd=fw?fw[1]:""),Ff){var lm=hT();if(null!=lm&&lm>parseFloat(qd)){lu=String(lm);break e}}lu=qd}var ol={};function zM(){return t=ol,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=oT(String(lu)).split("."),e=oT("9").split("."),r=Math.max(t.length,e.length);for(let d=0;0==n&&d<r;d++){var i=t[d]||"",l=e[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=lw(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||lw(0==i[2].length,0==l[2].length)||lw(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n}();var t}var YM=Kt.document&&Ff&&(hT()||parseInt(lu,10))||void 0,j2=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",ny,t),Kt.removeEventListener("test",ny,t)}catch(e){}return n}();function Si(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Zd(n,t){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(dT){e:{try{sy(t.nodeName);var i=!0;break e}catch(l){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zd.Z.h.call(this)}}Si.prototype.h=function(){this.defaultPrevented=!0},Ai(Zd,Si);var pT={2:"touch",3:"pen",4:"mouse"};Zd.prototype.h=function(){Zd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zd="closure_listenable_"+(1e6*Math.random()|0),pw=0;function KM(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++pw,this.ca=this.fa=!1}function ay(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function ly(n){this.src=n,this.g={},this.h=0}function gw(n,t){var e=t.type;if(e in n.g){var l,r=n.g[e],i=sT(r,t);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(ay(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function cy(n,t,e,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==r)return i}return-1}ly.prototype.add=function(n,t,e,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=cy(n,t,r,i);return-1<d?(t=n[d],e||(t.fa=!1)):((t=new KM(t,this.src,l,!!r,i)).fa=e,n.push(t)),t};var cm="closure_lm_"+(1e6*Math.random()|0),uy={};function mw(n,t,e,r,i){if(r&&r.once)return mT(n,t,e,r,i);if(Array.isArray(t)){for(var l=0;l<t.length;l++)mw(n,t[l],e,r,i);return null}return e=qi(e),n&&n[zd]?n.N(t,e,om(r)?!!r.capture:!!r,i):_w(n,t,e,!1,r,i)}function _w(n,t,e,r,i,l){if(!t)throw Error("Invalid event type");var d=om(i)?!!i.capture:!!i,f=hy(n);if(f||(n[cm]=f=new ly(n)),(e=f.add(t,e,r,d,l)).proxy)return e;if(r=function(){var t=yT;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)j2||(i=d),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(_T(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function mT(n,t,e,r,i){if(Array.isArray(t)){for(var l=0;l<t.length;l++)mT(n,t[l],e,r,i);return null}return e=qi(e),n&&n[zd]?n.O(t,e,om(r)?!!r.capture:!!r,i):_w(n,t,e,!0,r,i)}function yw(n,t,e,r,i){if(Array.isArray(t))for(var l=0;l<t.length;l++)yw(n,t[l],e,r,i);else r=om(r)?!!r.capture:!!r,e=qi(e),n&&n[zd]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=cy(l=n.g[t],e,r,i))&&(ay(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete n.g[t],n.h--))):n&&(n=hy(n))&&(t=n.g[t.toString()],n=-1,t&&(n=cy(t,e,r,i)),(e=-1<n?t[n]:null)&&dy(e))}function dy(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[zd])gw(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(_T(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=hy(t))?(gw(e,n),0==e.h&&(e.src=null,t[cm]=null)):ay(n)}}}function _T(n){return n in uy?uy[n]:uy[n]="on"+n}function yT(n,t){if(n.ca)n=!0;else{t=new Zd(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&dy(n),n=e.call(r,t)}return n}function hy(n){return(n=n[cm])instanceof ly?n:null}var vT="__closure_events_fn_"+(1e9*Math.random()>>>0);function qi(n){return"function"==typeof n?n:(n[vT]||(n[vT]=function(t){return n.handleEvent(t)}),n[vT])}function kr(){au.call(this),this.i=new ly(this),this.P=this,this.I=null}function Zi(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new Si(t,n);else if(t instanceof Si)t.target=t.target||n;else{var i=t;dw(t=new Si(r,n),i)}if(i=!0,e)for(var l=e.length-1;0<=l;l--){var d=t.g=e[l];i=fy(d,r,!0,t)&&i}if(i=fy(d=t.g=n,r,!0,t)&&i,i=fy(d,r,!1,t)&&i,e)for(l=0;l<e.length;l++)i=fy(d=t.g=e[l],r,!1,t)&&i}function fy(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,l=0;l<t.length;++l){var d=t[l];if(d&&!d.ca&&d.capture==e){var f=d.listener,m=d.ia||d.src;d.fa&&gw(n.i,d),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Ai(kr,au),kr.prototype[zd]=!0,kr.prototype.removeEventListener=function(n,t,e,r){yw(this,n,t,e,r)},kr.prototype.M=function(){if(kr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)ay(e[r]);delete n.g[t],n.h--}}this.I=null},kr.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},kr.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var bT=Kt.JSON.stringify;function um(){var n=Cw;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var bw,py=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new JM,n=>n.reset());class JM{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function wT(n){Kt.setTimeout(()=>{throw n},0)}function vw(n,t){bw||function(){var n=Kt.Promise.resolve(void 0);bw=function(){n.then(my)}}(),gy||(bw(),gy=!0),Cw.add(n,t)}var gy=!1,Cw=new class{constructor(){this.h=this.g=null}add(t,e){const r=py.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function my(){for(var n;n=um();){try{n.h.call(n.g)}catch(e){wT(e)}var t=py;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}gy=!1}function Vf(n,t){kr.call(this),this.h=n||1,this.g=t||Kt,this.j=$r(this.kb,this),this.l=Date.now()}function CT(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _y(n,t,e){if("function"==typeof n)e&&(n=$r(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=$r(n.handleEvent,n)}return 2147483647<Number(t)?-1:Kt.setTimeout(n,t||0)}function ET(n){n.g=_y(()=>{n.g=null,n.i&&(n.i=!1,ET(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Ai(Vf,kr),(vt=Vf.prototype).da=!1,vt.S=null,vt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zi(this,"tick"),this.da&&(CT(this),this.start()))}},vt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},vt.M=function(){Vf.Z.M.call(this),CT(this),delete this.g};class xT extends au{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ET(this)}M(){super.M(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cu(n){au.call(this),this.h=n,this.g={}}Ai(cu,au);var Ew=[];function DT(n,t,e,r){Array.isArray(e)||(e&&(Ew[0]=e.toString()),e=Ew);for(var i=0;i<e.length;i++){var l=mw(t,e[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function yy(n){Wd(n.g,function(t,e){this.g.hasOwnProperty(e)&&dy(t)},n),n.g={}}function Bf(){this.g=!0}function Yd(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<i.length;d++)i[d]=""}}}return bT(e)}catch(f){return t}}(n,e)+(r?" "+r:"")})}cu.prototype.M=function(){cu.Z.M.call(this),yy(this)},cu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Bf.prototype.Aa=function(){this.g=!1},Bf.prototype.info=function(){};var Kd={},xw=null;function dm(){return xw=xw||new kr}function AT(n){Si.call(this,Kd.Ma,n)}function hm(n){const t=dm();Zi(t,new AT(t,n))}function Dw(n,t){Si.call(this,Kd.STAT_EVENT,n),this.stat=t}function xs(n){const t=dm();Zi(t,new Dw(t,n))}function Tw(n,t){Si.call(this,Kd.Na,n),this.size=t}function Uf(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},t)}Kd.Ma="serverreachability",Ai(AT,Si),Kd.STAT_EVENT="statevent",Ai(Dw,Si),Kd.Na="timingevent",Ai(Tw,Si);var fm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Iw={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Aw(){}function NT(){}Aw.prototype.h=null;var kT,Hf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function MT(){Si.call(this,"d")}function RT(){Si.call(this,"c")}function Sw(){}function vy(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new cu(this),this.P=G2,this.W=new Vf(n=oy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tR}function tR(){this.i=null,this.g="",this.h=!1}Ai(MT,Si),Ai(RT,Si),Ai(Sw,Aw),Sw.prototype.g=function(){return new XMLHttpRequest},Sw.prototype.i=function(){return{}},kT=new Sw;var G2=45e3,PT={},Nw={};function OT(n,t,e){n.K=1,n.v=Xl(uu(t)),n.s=e,n.U=!0,nR(n,null)}function nR(n,t){n.F=Date.now(),by(n),n.A=uu(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jT(e.h,"t",r),n.C=0,e=n.l.H,n.h=new tR,n.g=sI(n.l,e?t:null,!n.s),0<n.O&&(n.L=new xT($r(n.Ia,n,n.g),n.O)),DT(n.V,n.g,"readystatechange",n.gb),t=n.H?cw(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),hm(1),function(n,t,e,r,i,l){n.info(function(){if(n.g)if(l)for(var d="",f=l.split("&"),m=0;m<f.length;m++){var b=f[m].split("=");if(1<b.length){var x=b[0];b=b[1];var I=x.split("_");d=2<=I.length&&"type"==I[1]?d+(x+"=")+b+"&":d+(x+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function rR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function iR(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=W2(n,e),i==Nw){4==t&&(n.o=4,xs(14),r=!1),Yd(n.j,n.m,null,"[Incomplete Response]");break}if(i==PT){n.o=4,xs(15),Yd(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}Yd(n.j,n.m,i,null),Rw(n,i)}rR(n)&&i!=Nw&&i!=PT&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,xs(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),jw(t),t.L=!0,xs(11))):(Yd(n.j,n.m,e,"[Invalid Chunked Response]"),Qd(n),pm(n))}function W2(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?Nw:(e=Number(t.substring(e,r)),isNaN(e)?PT:(r+=1)+e>t.length?Nw:(t=t.substr(r,e),n.C=r+e,t))}function by(n){n.Y=Date.now()+n.P,sR(n,n.P)}function sR(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uf($r(n.eb,n),t)}function Mw(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function pm(n){0==n.l.G||n.I||rI(n.l,n)}function Qd(n){Mw(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,CT(n.W),yy(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Rw(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||WT(e.i,n)))if(e.I=n.N,!n.J&&WT(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=Uf($r(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;wm(e),My(e)}Ry(e),xs(18)}if(1>=GT(e.i)&&e.ka){try{e.ka()}catch(b){}e.ka=void 0}}else du(e,11)}else if((n.J||e.g==n)&&wm(e),!am(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let b=i[t];if(e.U=b[0],b=b[1],2==e.G)if("c"==b[0]){e.J=b[1],e.la=b[2];const x=b[3];null!=x&&(e.ma=x,e.h.info("VER="+e.ma));const I=b[4];null!=I&&(e.za=I,e.h.info("SVER="+e.za));const B=b[5];null!=B&&"number"==typeof B&&0<B&&(e.K=r=1.5*B,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const Z=n.g;if(Z){const ne=Z.g?Z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var l=r.i;!l.g&&(Cs(ne,"spdy")||Cs(ne,"quic")||Cs(ne,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(qT(l,l.h),l.h=null))}if(r.D){const we=Z.g?Z.g.getResponseHeader("X-HTTP-Session-Id"):null;we&&(r.sa=we,mr(r.F,r.D,we))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var d=n;if((r=e).oa=iI(r,r.H?r.la:null,r.W),d.J){ZT(r.i,d);var f=d,m=r.K;m&&f.setTimeout(m),f.B&&(Mw(f),by(f)),r.g=d}else tI(r);0<e.l.length&&$w(e)}else"stop"!=b[0]&&"close"!=b[0]||du(e,7);else 3==e.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?du(e,7):ao(e):"noop"!=b[0]&&e.j&&e.j.wa(b),e.A=0)}hm(4)}catch(b){}}function FT(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(iw(n)||"string"==typeof n)ry(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(iw(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(iw(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var l=0;l<i;l++)t.call(void 0,r[l],e&&e[l],n)}}function gm(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof gm)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function kw(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];Jd(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)Jd(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function Jd(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(vt=vy.prototype).setTimeout=function(n){this.P=n},vt.gb=function(n){n=n.target;const t=this.L;t&&3==tc(n)?t.l():this.Ia(n)},vt.Ia=function(n){try{if(n==this.g)e:{const x=tc(this.g);var t=this.g.Da();const I=this.g.ba();if(!(3>x)&&(3!=x||oy||this.g&&(this.h.h||this.g.ga()||Sy(this.g)))){this.I||4!=x||7==t||hm(8==t||0>=I?3:2),Mw(this);var e=this.g.ba();this.N=e;t:if(rR(this)){var r=Sy(this.g);n="";var i=r.length,l=4==tc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qd(this),pm(this);var d="";break t}this.h.i=new Kt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:l&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!am(f)){var b=f;break t}}b=null}if(!(e=b)){this.i=!1,this.o=3,xs(12),Qd(this),pm(this);break e}Yd(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rw(this,e)}this.U?(iR(this,x,d),oy&&this.i&&3==x&&(DT(this.V,this.W,"tick",this.fb),this.W.start())):(Yd(this.j,this.m,d,null),Rw(this,d)),4==x&&Qd(this),this.i&&!this.I&&(4==x?rI(this.l,this):(this.i=!1,by(this)))}else 400==e&&0<d.indexOf("Unknown SID")?(this.o=3,xs(12)):(this.o=0,xs(13)),Qd(this),pm(this)}}}catch(x){}},vt.fb=function(){if(this.g){var n=tc(this.g),t=this.g.ga();this.C<t.length&&(Mw(this),iR(this,n,t),this.i&&4!=n&&by(this))}},vt.cancel=function(){this.I=!0,Qd(this)},vt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(hm(3),xs(17)),Qd(this),this.o=2,pm(this)):sR(this,this.Y-n)},(vt=gm.prototype).R=function(){kw(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},vt.T=function(){return kw(this),this.g.concat()},vt.get=function(n,t){return Jd(this.h,n)?this.h[n]:t},vt.set=function(n,t){Jd(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},vt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],l=this.get(i);n.call(t,l,i,this)}};var LT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $f(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof $f){this.g=void 0!==t?t:n.g,Pw(this,n.j),this.s=n.s,wy(this,n.i),Ow(this,n.m),this.l=n.l,t=n.h;var e=new jf;e.i=t.i,t.g&&(e.g=new gm(t.g),e.h=t.h),VT(this,e),this.o=n.o}else n&&(e=String(n).match(LT))?(this.g=!!t,Pw(this,e[1]||"",!0),this.s=mm(e[2]||""),wy(this,e[3]||"",!0),Ow(this,e[4]),this.l=mm(e[5]||"",!0),VT(this,e[6]||"",!0),this.o=mm(e[7]||"")):(this.g=!!t,this.h=new jf(null,this.g))}function uu(n){return new $f(n)}function Pw(n,t,e){n.j=e?mm(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function wy(n,t,e){n.i=e?mm(t,!0):t}function Ow(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function VT(n,t,e){t instanceof jf?(n.h=t,function(n,t){t&&!n.j&&(eh(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(aR(this,r),jT(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=Xd(t,$T)),n.h=new jf(t,n.g))}function mr(n,t,e){n.h.set(t,e)}function Xl(n){return mr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function mm(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xd(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,UT),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function UT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$f.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Xd(t,Fw,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(Xd(t,Fw,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(Xd(e,"/"==e.charAt(0)?z2:HT,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Xd(e,Cy)),n.join("")};var Fw=/[#\/\?@]/g,HT=/[#\?:]/g,z2=/[#\?]/g,$T=/[#\?@]/g,Cy=/#/g;function jf(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function eh(n){n.g||(n.g=new gm,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var l=n[e].substring(0,r);i=n[e].substring(r+1)}else l=n[e];t(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function aR(n,t){eh(n),t=_m(n,t),Jd(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Jd((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&kw(n)))}function lR(n,t){return eh(n),t=_m(n,t),Jd(n.g.h,t)}function jT(n,t,e){aR(n,t),0<e.length&&(n.i=null,n.g.set(_m(n,t),iy(e)),n.h+=e.length)}function _m(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function uR(n){this.l=n||Y2,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ea&&Kt.g.Ea()&&Kt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(vt=jf.prototype).add=function(n,t){eh(this),this.i=null,n=_m(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},vt.forEach=function(n,t){eh(this),this.g.forEach(function(e,r){ry(e,function(i){n.call(t,i,r,this)},this)},this)},vt.T=function(){eh(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],l=0;l<i.length;l++)e.push(t[r]);return e},vt.R=function(n){eh(this);var t=[];if("string"==typeof n)lR(this,n)&&(t=aw(t,this.g.get(_m(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=aw(t,n[e])}return t},vt.set=function(n,t){return eh(this),this.i=null,lR(this,n=_m(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},vt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},vt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=i;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var Y2=10;function xy(n){return!!n.h||!!n.g&&n.g.size>=n.j}function GT(n){return n.h?1:n.g?n.g.size:0}function WT(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function qT(n,t){n.g?n.g.add(t):n.h=t}function ZT(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function dR(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return iy(n.i)}function Dy(){}function hR(){this.g=new Dy}function K2(n,t,e){const r=e||"";try{FT(n,function(i,l){let d=i;om(i)&&(d=bT(i)),t.push(r+l+"="+encodeURIComponent(d))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ty(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(l){}}function ec(n){this.l=n.$b||null,this.j=n.ib||!1}function Iy(n,t){kr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Lw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}uR.prototype.cancel=function(){if(this.i=dR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Dy.prototype.stringify=function(n){return Kt.JSON.stringify(n,void 0)},Dy.prototype.parse=function(n){return Kt.JSON.parse(n,void 0)},Ai(ec,Aw),ec.prototype.g=function(){return new Iy(this.l,this.j)},ec.prototype.i=function(n){return function(){return n}}({}),Ai(Iy,kr);var Lw=0;function zT(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function th(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ym(n)}function ym(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(vt=Iy.prototype).open=function(n,t){if(this.readyState!=Lw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,ym(this)},vt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Kt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},vt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,th(this)),this.readyState=Lw},vt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ym(this)),this.g&&(this.readyState=3,ym(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Kt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;zT(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},vt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?th(this):ym(this),3==this.readyState&&zT(this)}},vt.Ua=function(n){this.g&&(this.response=this.responseText=n,th(this))},vt.Ta=function(n){this.g&&(this.response=n,th(this))},vt.ha=function(){this.g&&th(this)},vt.setRequestHeader=function(n,t){this.v.append(n,t)},vt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},vt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Iy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oo=Kt.JSON.parse;function ri(n){kr.call(this),this.headers=new gm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ay,this.K=this.L=!1}Ai(ri,kr);var Ay="",fR=/^https?$/i,pR=["POST","PUT"];function YT(n){return"content-type"==n.toLowerCase()}function Bw(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,KT(n),vm(n)}function KT(n){n.D||(n.D=!0,Zi(n,"complete"),Zi(n,"error"))}function Uw(n){if(n.h&&void 0!==ty&&(!n.C[1]||4!=tc(n)||2!=n.ba()))if(n.v&&4==tc(n))_y(n.Fa,0,n);else if(Zi(n,"readystatechange"),4==tc(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===f){var i=String(n.H).match(LT)[1]||null;if(!i&&Kt.self&&Kt.self.location){var l=Kt.self.location.protocol;i=l.substr(0,l.length-1)}r=!fR.test(i?i.toLowerCase():"")}e=r}if(e)Zi(n,"complete"),Zi(n,"success");else{n.m=6;try{var d=2<tc(n)?n.g.statusText:""}catch(m){d=""}n.j=d+" ["+n.ba()+"]",KT(n)}}finally{vm(n)}}}function vm(n,t){if(n.g){QT(n);const e=n.g,r=n.C[0]?ny:null;n.g=null,n.C=null,t||Zi(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function QT(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function tc(n){return n.g?n.g.readyState:0}function Sy(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Ay:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ny(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return Wd(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):mr(n,t,e))}function nh(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function XT(n){this.za=0,this.l=[],this.h=new Bf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=nh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=nh("baseRetryDelayMs",5e3,n),this.$a=nh("retryDelaySeedMs",1e4,n),this.Ya=nh("forwardChannelMaxRetries",2,n),this.ra=nh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new uR(n&&n.concurrentRequestLimit),this.Ca=new hR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ao(n){if(gR(n),3==n.G){var t=n.V++,e=uu(n.F);mr(e,"SID",n.J),mr(e,"RID",t),mr(e,"TYPE","terminate"),bm(n,e),(t=new vy(n,n.h,t,void 0)).K=2,t.v=Xl(uu(e)),e=!1,Kt.navigator&&Kt.navigator.sendBeacon&&(e=Kt.navigator.sendBeacon(t.v.toString(),"")),!e&&Kt.Image&&((new Image).src=t.v,e=!0),e||(t.g=sI(t.l,null),t.g.ea(t.v)),t.F=Date.now(),by(t)}Gw(n)}function My(n){n.g&&(jw(n),n.g.cancel(),n.g=null)}function gR(n){My(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),wm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function Hw(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&$w(n)}function $w(n){xy(n.i)||n.m||(n.m=!0,vw(n.Ha,n),n.C=0)}function eI(n,t){var e;e=t?t.m:n.V++;const r=uu(n.F);mr(r,"SID",n.J),mr(r,"RID",e),mr(r,"AID",n.U),bm(n,r),n.o&&n.s&&Ny(r,n.o,n.s),e=new vy(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=_R(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),qT(n.i,e),OT(e,r,t)}function bm(n,t){n.j&&FT({},function(e,r){mr(t,r,e)})}function _R(n,t,e){e=Math.min(n.l.length,e);var r=n.j?$r(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const d=["count="+e];-1==l?0<e?(l=i[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let f=!0;for(let m=0;m<e;m++){let b=i[m].h;const x=i[m].g;if(b-=l,0>b)l=Math.max(0,i[m].h-100),f=!1;else try{K2(x,d,"req"+b+"_")}catch(I){r&&r(x)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function tI(n){n.g||n.u||(n.Y=1,vw(n.Ga,n),n.A=0)}function Ry(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Uf($r(n.Ga,n),yR(n,n.A)),n.A++,0))}function jw(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function nI(n){n.g=new vy(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=uu(n.oa);mr(t,"RID","rpc"),mr(t,"SID",n.J),mr(t,"CI",n.N?"0":"1"),mr(t,"AID",n.U),bm(n,t),mr(t,"TYPE","xmlhttp"),n.o&&n.s&&Ny(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=Xl(uu(t)),e.s=null,e.U=!0,nR(e,n)}function wm(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function rI(n,t){var e=null;if(n.g==t){wm(n),jw(n),n.g=null;var r=2}else{if(!WT(n.i,t))return;e=t.D,ZT(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;Zi(r=dm(),new Tw(r,e,t,i)),$w(n)}else tI(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(GT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Uf($r(n.Ha,n,t),yR(n,n.C)),n.C++,0)))}(n,t)||2==r&&Ry(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:du(n,5);break;case 4:du(n,10);break;case 3:du(n,6);break;default:du(n,2)}}function yR(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function du(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=$r(n.jb,n);e||(e=new $f("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||Pw(e,"https"),Xl(e)),function(n,t){const e=new Bf;if(Kt.Image){const r=new Image;r.onload=ow(Ty,e,r,"TestLoadImage: loaded",!0,t),r.onerror=ow(Ty,e,r,"TestLoadImage: error",!1,t),r.onabort=ow(Ty,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=ow(Ty,e,r,"TestLoadImage: timeout",!1,t),Kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else xs(2);n.G=0,n.j&&n.j.va(t),Gw(n),gR(n)}function Gw(n){n.G=0,n.I=-1,n.j&&((0!=dR(n.i).length||0!=n.l.length)&&(n.i.i.length=0,iy(n.l),n.l.length=0),n.j.ua())}function iI(n,t,e){let r=function(n){return n instanceof $f?uu(n):new $f(n,void 0)}(e);if(""!=r.i)t&&wy(r,t+"."+r.i),Ow(r,r.m);else{const i=Kt.location;r=function(n,t,e,r){var i=new $f(null,void 0);return n&&Pw(i,n),t&&wy(i,t),e&&Ow(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&Wd(n.aa,function(i,l){mr(r,l,i)}),e=n.sa,(t=n.D)&&e&&mr(r,t,e),mr(r,"VER",n.ma),bm(n,r),r}function sI(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ri(e&&n.Ba&&!n.qa?new ec({ib:!0}):n.qa)).L=n.H,t}function Ww(){}function hu(){if(Ff&&!(10<=Number(YM)))throw Error("Environmental error: no available transport.")}function Ds(n,t){kr.call(this),this.g=new XT(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!am(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!am(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Gf(this)}function qw(n){MT.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function oI(){RT.call(this),this.status=1}function Gf(n){this.g=n}(vt=ri.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():kT.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:kT),this.g.onreadystatechange=$r(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(l){return void Bw(this,l)}n=e||"";const i=new gm(this.headers);r&&FT(r,function(l,d){i.set(d,l)}),r=function(n){e:{var t=YT;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=Kt.FormData&&n instanceof Kt.FormData,!(0<=sT(pR,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{QT(this),0<this.B&&((this.K=function(n){return Ff&&zM()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$r(this.pa,this)):this.A=_y(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Bw(this,l)}},vt.pa=function(){void 0!==ty&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zi(this,"timeout"),this.abort(8))},vt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zi(this,"complete"),Zi(this,"abort"),vm(this))},vt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vm(this,!0)),ri.Z.M.call(this)},vt.Fa=function(){this.s||(this.F||this.v||this.l?Uw(this):this.cb())},vt.cb=function(){Uw(this)},vt.ba=function(){try{return 2<tc(this)?this.g.status:-1}catch(n){return-1}},vt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},vt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),oo(t)}},vt.Da=function(){return this.m},vt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(vt=XT.prototype).ma=8,vt.G=1,vt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},vt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new vy(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=cw(l),dw(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=_R(this,i,t),mr(e=uu(this.F),"RID",n),mr(e,"CVER",22),this.D&&mr(e,"X-HTTP-Session-Id",this.D),bm(this,e),this.o&&l&&Ny(e,this.o,l),qT(this.i,i),this.Ra&&mr(e,"TYPE","init"),this.ja?(mr(e,"$req",t),mr(e,"SID","null"),i.$=!0,OT(i,e,null)):OT(i,e,t),this.G=2}}else 3==this.G&&(n?eI(this,n):0==this.l.length||xy(this.i)||eI(this))},vt.Ga=function(){if(this.u=null,nI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Uf($r(this.bb,this),n)}},vt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xs(10),My(this),nI(this))},vt.ab=function(){null!=this.v&&(this.v=null,My(this),Ry(this),xs(19))},vt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),xs(2)):(this.h.info("Failed to ping google.com"),xs(1))},(vt=Ww.prototype).xa=function(){},vt.wa=function(){},vt.va=function(){},vt.ua=function(){},vt.Oa=function(){},hu.prototype.g=function(n,t){return new Ds(n,t)},Ai(Ds,kr),Ds.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),vw($r(n.hb,n,t))),xs(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=iI(n,null,n.W),$w(n)},Ds.prototype.close=function(){ao(this.g)},Ds.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,Hw(this.g,t)}else this.v?((t={}).__data__=bT(n),Hw(this.g,t)):Hw(this.g,n)},Ds.prototype.M=function(){this.g.j=null,delete this.j,ao(this.g),delete this.g,Ds.Z.M.call(this)},Ai(qw,MT),Ai(oI,RT),Ai(Gf,Ww),Gf.prototype.xa=function(){Zi(this.g,"a")},Gf.prototype.wa=function(n){Zi(this.g,new qw(n))},Gf.prototype.va=function(n){Zi(this.g,new oI(n))},Gf.prototype.ua=function(){Zi(this.g,"b")},hu.prototype.createWebChannel=hu.prototype.g,Ds.prototype.send=Ds.prototype.u,Ds.prototype.open=Ds.prototype.m,Ds.prototype.close=Ds.prototype.close,fm.NO_ERROR=0,fm.TIMEOUT=8,fm.HTTP_ERROR=6,Iw.COMPLETE="complete",NT.EventType=Hf,Hf.OPEN="a",Hf.CLOSE="b",Hf.ERROR="c",Hf.MESSAGE="d",kr.prototype.listen=kr.prototype.N,ri.prototype.listenOnce=ri.prototype.O,ri.prototype.getLastError=ri.prototype.La,ri.prototype.getLastErrorCode=ri.prototype.Da,ri.prototype.getStatus=ri.prototype.ba,ri.prototype.getResponseJson=ri.prototype.Qa,ri.prototype.getResponseText=ri.prototype.ga,ri.prototype.send=ri.prototype.ea;var J2=Jl.createWebChannelTransport=function(){return new hu},X2=Jl.getStatEventTarget=function(){return dm()},aI=Jl.ErrorCode=fm,lI=Jl.EventType=Iw,cI=Jl.Event=Kd,uI=Jl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},vR=Jl.FetchXmlHttpFactory=ec,ky=Jl.WebChannel=NT,bR=Jl.XhrIo=ri;const Zw="@firebase/firestore";class is{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}is.UNAUTHENTICATED=new is(null),is.GOOGLE_CREDENTIALS=new is("google-credentials-uid"),is.FIRST_PARTY=new is("first-party-uid"),is.MOCK_USER=new is("mock-user");let Cm="9.6.11";const fu=new ca.Yd("@firebase/firestore");function Em(){return fu.logLevel}function nt(n,...t){if(fu.logLevel<=ca.in.DEBUG){const e=t.map(zw);fu.debug(`Firestore (${Cm}): ${n}`,...e)}}function Kr(n,...t){if(fu.logLevel<=ca.in.ERROR){const e=t.map(zw);fu.error(`Firestore (${Cm}): ${n}`,...e)}}function Wf(n,...t){if(fu.logLevel<=ca.in.WARN){const e=t.map(zw);fu.warn(`Firestore (${Cm}): ${n}`,...e)}}function zw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function bt(n="Unexpected state"){const t=`FIRESTORE (${Cm}) INTERNAL ASSERTION FAILED: `+n;throw Kr(t),new Error(t)}function Wt(n,t){n||bt()}function dt(n,t){return n}const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends Y.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Py{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class CR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(is.UNAUTHENTICATED))}shutdown(){}}class Oy{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class ER{constructor(t){this.t=t,this.currentUser=is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const l=b=>this.i!==i?(i=this.i,e(b)):Promise.resolve();let d=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new ii,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const b=d;t.enqueueRetryable((0,$e.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},m=b=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new ii)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Wt("string"==typeof r.accessToken),new Py(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Wt(null===t||"string"==typeof t),new is(t)}}class Yw{constructor(t,e,r){this.type="FirstParty",this.user=is.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class dI{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new Yw(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(is.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eF{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=l=>{null!=l.error&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,nt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const i=l=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Wt("string"==typeof e.token),this.p=e.token,new yi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class lo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function nF(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}lo.A=-1;class xm{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=nF(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<e&&(r+=t.charAt(i[l]%t.length))}return r}}function on(n,t){return n<t?-1:n>t?1:0}function Dm(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function xR(n){return n+"\0"}class si{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return si.fromMillis(Date.now())}static fromDate(t){return si.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new si(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?on(this.nanoseconds,t.nanoseconds):on(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Bt(t)}static min(){return new Bt(new si(0,0))}static max(){return new Bt(new si(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function hI(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function rh(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function fI(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Tm{constructor(t,e,r){void 0===e?e=0:e>t.length&&bt(),void 0===r?r=t.length-e:r>t.length-e&&bt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===Tm.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Tm?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const l=t.get(i),d=e.get(i);if(l<d)return-1;if(l>d)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class kn extends Tm{construct(t,e,r){return new kn(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new kn(e)}static emptyPath(){return new kn([])}}const DR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mi extends Tm{construct(t,e,r){return new Mi(t,e,r)}static isValidIdentifier(t){return DR.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mi(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let d=!1;for(;i<t.length;){const f=t[i];if("\\"===f){if(i+1===t.length)throw new Ye(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ye(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(l(),i++)}if(l(),d)throw new Ye(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Mi(e)}static emptyPath(){return new Mi([])}}class qf{constructor(t){this.fields=t,t.sort(Mi.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Dm(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class Ri{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Ri(e)}static fromUint8Array(t){const e=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(t);return new Ri(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return on(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ri.EMPTY_BYTE_STRING=new Ri("");const TR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pu(n){if(Wt(!!n),"string"==typeof n){let t=0;const e=TR.exec(n);if(Wt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:jr(n.seconds),nanos:jr(n.nanos)}}function jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ih(n){return"string"==typeof n?Ri.fromBase64String(n):Ri.fromUint8Array(n)}function Kw(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Bo(n){const t=n.mapValue.fields.__previous_value__;return Kw(t)?Bo(t):t}function Im(n){const t=pu(n.mapValue.fields.__local_write_time__.timestampValue);return new si(t.seconds,t.nanos)}class IR{constructor(t,e,r,i,l,d,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class nc{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new nc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof nc&&t.projectId===this.projectId&&t.database===this.database}}function sh(n){return null==n}function Fy(n){return 0===n&&1/n==-1/0}function pI(n){return"number"==typeof n&&Number.isInteger(n)&&!Fy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class lt{constructor(t){this.path=t}static fromPath(t){return new lt(kn.fromString(t))}static fromName(t){return new lt(kn.fromString(t).popFirst(5))}static empty(){return new lt(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===kn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return kn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new kn(t.slice()))}}const gI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Zf={nullValue:"NULL_VALUE"};function gu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kw(n)?4:Uo(n)?9:10:bt()}function rc(n,t){if(n===t)return!0;const e=gu(n);if(e!==gu(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Im(n).isEqual(Im(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=pu(r.timestampValue),d=pu(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,ih(n.bytesValue).isEqual(ih(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return jr(r.geoPointValue.latitude)===jr(i.geoPointValue.latitude)&&jr(r.geoPointValue.longitude)===jr(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jr(r.integerValue)===jr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=jr(r.doubleValue),d=jr(i.doubleValue);return l===d?Fy(l)===Fy(d):isNaN(l)&&isNaN(d)}return!1}(n,t);case 9:return Dm(n.arrayValue.values||[],t.arrayValue.values||[],rc);case 10:return function(r,i){const l=r.mapValue.fields||{},d=i.mapValue.fields||{};if(hI(l)!==hI(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===d[f]||!rc(l[f],d[f])))return!1;return!0}(n,t);default:return bt()}var i}function Am(n,t){return void 0!==(n.values||[]).find(e=>rc(e,t))}function oh(n,t){if(n===t)return 0;const e=gu(n),r=gu(t);if(e!==r)return on(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return on(n.booleanValue,t.booleanValue);case 2:return function(i,l){const d=jr(i.integerValue||i.doubleValue),f=jr(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,t);case 3:return AR(n.timestampValue,t.timestampValue);case 4:return AR(Im(n),Im(t));case 5:return on(n.stringValue,t.stringValue);case 6:return function(i,l){const d=ih(i),f=ih(l);return d.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(i,l){const d=i.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const b=on(d[m],f[m]);if(0!==b)return b}return on(d.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,l){const d=on(jr(i.latitude),jr(l.latitude));return 0!==d?d:on(jr(i.longitude),jr(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,l){const d=i.values||[],f=l.values||[];for(let m=0;m<d.length&&m<f.length;++m){const b=oh(d[m],f[m]);if(b)return b}return on(d.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,l){const d=i.fields||{},f=Object.keys(d),m=l.fields||{},b=Object.keys(m);f.sort(),b.sort();for(let x=0;x<f.length&&x<b.length;++x){const I=on(f[x],b[x]);if(0!==I)return I;const B=oh(d[f[x]],m[b[x]]);if(0!==B)return B}return on(f.length,b.length)}(n.mapValue,t.mapValue);default:throw bt()}}function AR(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return on(n,t);const e=pu(n),r=pu(t),i=on(e.seconds,r.seconds);return 0!==i?i:on(e.nanos,r.nanos)}function Sm(n){return Nm(n)}function Nm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=pu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ih(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const d of r.values||[])l?l=!1:i+=",",i+=Nm(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const f of i)d?d=!1:l+=",",l+=`${f}:${Nm(r.fields[f])}`;return l+"}"}(n.mapValue):bt();var t}function ah(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Qw(n){return!!n&&"integerValue"in n}function Mm(n){return!!n&&"arrayValue"in n}function SR(n){return!!n&&"nullValue"in n}function mI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ly(n){return!!n&&"mapValue"in n}function Rm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return rh(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Rm(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Rm(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Uo(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function iF(n){return"nullValue"in n?Zf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ah(nc.empty(),lt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:bt()}function _I(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ah(nc.empty(),lt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?gI:bt()}function yI(n,t){return void 0===n?t:void 0===t||oh(n,t)>0?n:t}function Jw(n,t){return void 0===n?t:void 0===t||oh(n,t)<0?n:t}class zi{constructor(t){this.value=t}static empty(){return new zi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!Ly(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rm(e)}setAll(t){let e=Mi.emptyPath(),r={},i=[];t.forEach((d,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,r,i),r={},i=[],e=f.popLast()}d?r[f.lastSegment()]=Rm(d):i.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,i)}delete(t){const e=this.field(t.popLast());Ly(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return rc(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];Ly(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){rh(e,(i,l)=>t[i]=l);for(const i of r)delete t[i]}clone(){return new zi(Rm(this.value))}}function Xw(n){const t=[];return rh(n.fields,(e,r)=>{const i=new Mi([e]);if(Ly(r)){const l=Xw(r.mapValue).fields;if(0===l.length)t.push(i);else for(const d of l)t.push(i.child(d))}else t.push(i)}),new qf(t)}class hr{constructor(t,e,r,i,l,d){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=l,this.documentState=d}static newInvalidDocument(t){return new hr(t,0,Bt.min(),Bt.min(),zi.empty(),0)}static newFoundDocument(t,e,r){return new hr(t,1,e,Bt.min(),r,0)}static newNoDocument(t,e){return new hr(t,2,e,Bt.min(),zi.empty(),0)}static newUnknownDocument(t,e){return new hr(t,3,e,Bt.min(),zi.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=zi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof hr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zf{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function km(n){return n.fields.find(t=>2===t.kind)}function al(n){return n.fields.filter(t=>2!==t.kind)}zf.UNKNOWN_ID=-1;class lh{constructor(t,e){this.fieldPath=t,this.kind=e}}class Yf{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Yf(0,ic.min())}}function eC(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Bt.fromTimestamp(1e9===r?new si(e+1,0):new si(e,r));return new ic(i,lt.empty(),t)}function NR(n){return new ic(n.readTime,n.key,-1)}class ic{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new ic(Bt.min(),lt.empty(),-1)}static max(){return new ic(Bt.max(),lt.empty(),-1)}}function vI(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=lt.comparator(n.documentKey,t.documentKey),0!==e?e:on(n.largestBatchId,t.largestBatchId))}class MR{constructor(t,e=null,r=[],i=[],l=null,d=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=d,this.endAt=f,this.P=null}}function bI(n,t=null,e=[],r=[],i=null,l=null,d=null){return new MR(n,t,e,r,i,l,d)}function ch(n){const t=dt(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Sm(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>Sm(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>Sm(r)).join(",")),t.P=e}return t.P}function Pm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!OR(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!rc(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Qf(n.startAt,t.startAt)&&Qf(n.endAt,t.endAt)}function ki(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mu(n,t){return n.filters.filter(e=>e instanceof oi&&e.field.isEqual(t))}function Om(n,t,e){let r,i=!0;for(const l of mu(n,t)){let d,f=!0;switch(l.op){case"<":case"<=":d=iF(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,f=!1;break;case"!=":case"not-in":d=Zf}yI(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];yI(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}function nC(n,t,e){let r,i=!0;for(const l of mu(n,t)){let d,f=!0;switch(l.op){case">=":case">":d=_I(l.value),f=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,f=!1;break;case"!=":case"not-in":d=gI}Jw(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];Jw(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}class oi extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new rC(t,e,r):"array-contains"===e?new RR(t,r):"in"===e?new kR(t,r):"not-in"===e?new PR(t,r):"array-contains-any"===e?new EI(t,r):new oi(t,e,r)}static V(t,e,r){return"in"===e?new wI(t,r):new Vy(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(oh(e,this.value)):null!==e&&gu(this.value)===gu(e)&&this.v(oh(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return bt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rC extends oi{constructor(t,e,r){super(t,e,r),this.key=lt.fromName(r.referenceValue)}matches(t){const e=lt.comparator(t.key,this.key);return this.v(e)}}class wI extends oi{constructor(t,e){super(t,"in",e),this.keys=CI(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Vy extends oi{constructor(t,e){super(t,"not-in",e),this.keys=CI(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function CI(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>lt.fromName(r.referenceValue))}class RR extends oi{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Mm(e)&&Am(e.arrayValue,this.value)}}class kR extends oi{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Am(this.value.arrayValue,e)}}class PR extends oi{constructor(t,e){super(t,"not-in",e)}matches(t){if(Am(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Am(this.value.arrayValue,e)}}class EI extends oi{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Mm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Am(this.value.arrayValue,r))}}class _u{constructor(t,e){this.position=t,this.inclusive=e}}class Kf{constructor(t,e="asc"){this.field=t,this.dir=e}}function OR(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function sc(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const l=t[i],d=n.position[i];if(r=l.field.isKeyField()?lt.comparator(lt.fromName(d.referenceValue),e.key):oh(d,e.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function Qf(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!rc(n.position[e],t.position[e]))return!1;return!0}class ya{constructor(t,e=null,r=[],i=[],l=null,d="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.D=null,this.C=null}}function xI(n,t,e,r,i,l,d,f){return new ya(n,t,e,r,i,l,d,f)}function Jf(n){return new ya(n)}function By(n){return!sh(n.limit)&&"F"===n.limitType}function Xf(n){return!sh(n.limit)&&"L"===n.limitType}function iC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Uy(n){for(const t of n.filters)if(t.S())return t.field;return null}function Hy(n){return null!==n.collectionGroup}function ep(n){const t=dt(n);if(null===t.D){t.D=[];const e=Uy(t),r=iC(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new Kf(e)),t.D.push(new Kf(Mi.keyField(),"asc"));else{let i=!1;for(const l of t.explicitOrderBy)t.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Kf(Mi.keyField(),l))}}}return t.D}function Ho(n){const t=dt(n);if(!t.C)if("F"===t.limitType)t.C=bI(t.path,t.collectionGroup,ep(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of ep(t))e.push(new Kf(l.field,"desc"===l.dir?"asc":"desc"));const r=t.endAt?new _u(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new _u(t.startAt.position,!t.startAt.inclusive):null;t.C=bI(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function DI(n,t,e){return new ya(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function co(n,t){return Pm(Ho(n),Ho(t))&&n.limitType===t.limitType}function tp(n){return`${ch(Ho(n))}|lt:${n.limitType}`}function yu(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${Sm(r.value)}`;var r}).join(", ")}]`),sh(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Sm(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Sm(e)).join(",")),`Target(${t})`}(Ho(n))}; limitType=${n.limitType})`}function np(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):lt.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,l,d){const f=sc(i,l,d);return i.inclusive?f<=0:f<0}(e.startAt,ep(e),r)||e.endAt&&!function(i,l,d){const f=sc(i,l,d);return i.inclusive?f>=0:f>0}(e.endAt,ep(e),r)));var e,r}function uh(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function TI(n){return(t,e)=>{let r=!1;for(const i of ep(n)){const l=FR(i,t,e);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function FR(n,t,e){const r=n.field.isKeyField()?lt.comparator(t.key,e.key):function(i,l,d){const f=l.data.field(i),m=d.data.field(i);return null!==f&&null!==m?oh(f,m):bt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return bt()}}function II(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fy(t)?"-0":t}}function sC(n){return{integerValue:""+n}}function oC(n,t){return pI(t)?sC(t):II(n,t)}class Fm{constructor(){this._=void 0}}function AI(n,t,e){return n instanceof rp?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(e,t):n instanceof vu?bu(n,t):n instanceof oc?NI(n,t):function(r,i){const l=SI(r,i),d=LR(l)+LR(r.k);return Qw(l)&&Qw(r.k)?sC(d):II(r.M,d)}(n,t)}function aC(n,t,e){return n instanceof vu?bu(n,t):n instanceof oc?NI(n,t):e}function SI(n,t){return n instanceof ip?Qw(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class rp extends Fm{}class vu extends Fm{constructor(t){super(),this.elements=t}}function bu(n,t){const e=VR(t);for(const r of n.elements)e.some(i=>rc(i,r))||e.push(r);return{arrayValue:{values:e}}}class oc extends Fm{constructor(t){super(),this.elements=t}}function NI(n,t){let e=VR(t);for(const r of n.elements)e=e.filter(i=>!rc(i,r));return{arrayValue:{values:e}}}class ip extends Fm{constructor(t,e){super(),this.M=t,this.k=e}}function LR(n){return jr(n.integerValue||n.doubleValue)}function VR(n){return Mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class $y{constructor(t,e){this.field=t,this.transform=e}}class BR{constructor(t,e){this.version=t,this.transformResults=e}}class ai{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ai}static exists(t){return new ai(void 0,t)}static updateTime(t){return new ai(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function lC(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class cC{}function oF(n,t,e){n instanceof jy?function(r,i,l){const d=r.value.clone(),f=o(r.fieldTransforms,i,l.transformResults);d.setAll(f),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):n instanceof sp?function(r,i,l){if(!lC(r.precondition,i))return void i.convertToUnknownDocument(l.version);const d=o(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(s(r)),f.setAll(d),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function MI(n,t,e){var i;n instanceof jy?function(r,i,l){if(!lC(r.precondition,i))return;const d=r.value.clone(),f=c(r.fieldTransforms,l,i);d.setAll(f),i.convertToFoundDocument($R(i),d).setHasLocalMutations()}(n,t,e):n instanceof sp?function(r,i,l){if(!lC(r.precondition,i))return;const d=c(r.fieldTransforms,l,i),f=i.data;f.setAll(s(r)),f.setAll(d),i.convertToFoundDocument($R(i),f).setHasLocalMutations()}(n,t,e):lC(n.precondition,i=t)&&i.convertToNoDocument(Bt.min())}function UR(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),l=SI(r.transform,i||null);null!=l&&(null==e&&(e=zi.empty()),e.set(r.field,l))}return e||null}function HR(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&Dm(e,r,(i,l)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof vu&&r instanceof vu||e instanceof oc&&r instanceof oc?Dm(e.elements,r.elements,rc):e instanceof ip&&r instanceof ip?rc(e.k,r.k):e instanceof rp&&r instanceof rp);var e,r}(i,l))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function $R(n){return n.isFoundDocument()?n.version:Bt.min()}class jy extends cC{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class sp extends cC{constructor(t,e,r,i,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function s(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function o(n,t,e){const r=new Map;Wt(n.length===e.length);for(let i=0;i<e.length;i++){const l=n[i],d=l.transform,f=t.data.field(l.field);r.set(l.field,aC(d,f,e[i]))}return r}function c(n,t,e){const r=new Map;for(const i of n){const l=i.transform,d=e.data.field(i.field);r.set(i.field,AI(l,d,t))}return r}class u extends cC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class h extends cC{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class p{constructor(t){this.count=t}}var _,v;function C(n){switch(n){default:return bt();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0}}function T(n){if(void 0===n)return Kr("GRPC error has no .code"),Pe.UNKNOWN;switch(n){case _.OK:return Pe.OK;case _.CANCELLED:return Pe.CANCELLED;case _.UNKNOWN:return Pe.UNKNOWN;case _.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case _.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case _.INTERNAL:return Pe.INTERNAL;case _.UNAVAILABLE:return Pe.UNAVAILABLE;case _.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case _.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case _.NOT_FOUND:return Pe.NOT_FOUND;case _.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case _.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case _.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case _.ABORTED:return Pe.ABORTED;case _.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case _.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case _.DATA_LOSS:return Pe.DATA_LOSS;default:return bt()}}(v=_||(_={}))[v.OK=0]="OK",v[v.CANCELLED=1]="CANCELLED",v[v.UNKNOWN=2]="UNKNOWN",v[v.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",v[v.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",v[v.NOT_FOUND=5]="NOT_FOUND",v[v.ALREADY_EXISTS=6]="ALREADY_EXISTS",v[v.PERMISSION_DENIED=7]="PERMISSION_DENIED",v[v.UNAUTHENTICATED=16]="UNAUTHENTICATED",v[v.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",v[v.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",v[v.ABORTED=10]="ABORTED",v[v.OUT_OF_RANGE=11]="OUT_OF_RANGE",v[v.UNIMPLEMENTED=12]="UNIMPLEMENTED",v[v.INTERNAL=13]="INTERNAL",v[v.UNAVAILABLE=14]="UNAVAILABLE",v[v.DATA_LOSS=15]="DATA_LOSS";class R{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){rh(this.inner,(e,r)=>{for(const[i,l]of r)t(i,l)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}class j{constructor(t,e){this.comparator=t,this.root=e||le.EMPTY}insert(t,e){return new j(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,le.BLACK,null,null))}remove(t){return new j(this.comparator,this.root.remove(t,this.comparator).copy(null,null,le.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new K(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new K(this.root,t,this.comparator,!1)}getReverseIterator(){return new K(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new K(this.root,t,this.comparator,!0)}}class K{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,e&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class le{constructor(t,e,r,i,l){this.key=t,this.value=e,this.color=null!=r?r:le.RED,this.left=null!=i?i:le.EMPTY,this.right=null!=l?l:le.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,l){return new le(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const l=r(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===l?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return le.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return le.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,le.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const t=this.left.check();if(t!==this.right.check())throw bt();return t+(this.isRed()?0:1)}}le.EMPTY=null,le.RED=!0,le.BLACK=!1,le.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(n,t,e,r,i){return this}insert(n,t,e){return new le(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class he{constructor(t){this.comparator=t,this.data=new j(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ke(this.data.getIterator())}getIteratorFrom(t){return new ke(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof he)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new he(this.comparator);return e.data=t,e}}class ke{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Te(n){return n.hasNext()?n.getNext():void 0}const Je=new j(lt.comparator);function He(){return Je}const It=new j(lt.comparator);function Ft(){return It}function hn(){return new R(n=>n.toString(),(n,t)=>n.isEqual(t))}const vi=new j(lt.comparator),$o=new he(lt.comparator);function Sn(...n){let t=$o;for(const e of n)t=t.add(e);return t}const op=new he(on);function ac(){return op}class ll{constructor(t,e,r,i,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,dh.createSynthesizedTargetChangeForCurrentChange(t,e)),new ll(Bt.min(),r,ac(),He(),Sn())}}class dh{constructor(t,e,r,i,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new dh(Ri.EMPTY_BYTE_STRING,e,Sn(),Sn(),Sn())}}class ap{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class Gy{constructor(t,e){this.targetId=t,this.$=e}}class Wy{constructor(t,e,r=Ri.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class qy{constructor(){this.B=0,this.L=lF(),this.U=Ri.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Sn(),e=Sn(),r=Sn();return this.L.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:bt()}}),new dh(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=lF()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Z4{constructor(t){this.nt=t,this.st=new Map,this.it=He(),this.rt=aF(),this.ot=new he(on)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:bt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const l=i.target;if(ki(l))if(0===r){const d=new lt(l.path);this.ct(e,d,hr.newNoDocument(d,Bt.min()))}else Wt(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((l,d)=>{const f=this.wt(d);if(f){if(l.current&&ki(f.target)){const m=new lt(f.target.path);null!==this.it.get(m)||this.It(d,m)||this.ct(d,m,hr.newNoDocument(m,t))}l.j&&(e.set(d,l.H()),l.J())}});let r=Sn();this.rt.forEach((l,d)=>{let f=!0;d.forEachWhile(m=>{const b=this.wt(m);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(t));const i=new ll(t,e,this.ot,this.it,r);return this.it=He(),this.rt=aF(),this.ot=new he(on),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new qy,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new he(on),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||nt("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new qy),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function aF(){return new j(lt.comparator)}function lF(){return new j(lt.comparator)}const z4={asc:"ASCENDING",desc:"DESCENDING"},Y4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class K4{constructor(t,e){this.databaseId=t,this.N=e}}function uC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function cF(n,t){return n.N?t.toBase64():t.toUint8Array()}function Q4(n,t){return uC(n,t.toTimestamp())}function ss(n){return Wt(!!n),Bt.fromTimestamp(function(t){const e=pu(t);return new si(e.seconds,e.nanos)}(n))}function jR(n,t){return(e=n,new kn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function uF(n){const t=kn.fromString(n);return Wt(vF(t)),t}function dC(n,t){return jR(n.databaseId,t.path)}function wu(n,t){const e=uF(t);if(e.get(1)!==n.databaseId.projectId)throw new Ye(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ye(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new lt(hF(e))}function GR(n,t){return jR(n.databaseId,t)}function dF(n){const t=uF(n);return 4===t.length?kn.emptyPath():hF(t)}function hC(n){return new kn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hF(n){return Wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function fF(n,t,e){return{name:dC(n,t),fields:e.value.mapValue.fields}}function pF(n,t,e){const r=wu(n,t.name),i=ss(t.updateTime),l=new zi({mapValue:{fields:t.fields}}),d=hr.newFoundDocument(r,i,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function fC(n,t){let e;if(t instanceof jy)e={update:fF(n,t.key,t.value)};else if(t instanceof u)e={delete:dC(n,t.key)};else if(t instanceof sp)e={update:fF(n,t.key,t.data),updateMask:o8(t.fieldMask)};else{if(!(t instanceof h))return bt();e={verify:dC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,l){const d=l.transform;if(d instanceof rp)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof vu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof oc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ip)return{fieldPath:l.field.canonicalString(),increment:d.k};throw bt()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:Q4(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:bt()),e;var i}function WR(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?ai.updateTime(ss(i.updateTime)):void 0!==i.exists?ai.exists(i.exists):ai.none():ai.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(l,d){let f=null;"setToServerValue"in d?(Wt("REQUEST_TIME"===d.setToServerValue),f=new rp):"appendMissingElements"in d?f=new vu(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new oc(d.removeAllFromArray.values||[]):"increment"in d?f=new ip(l,d.increment):bt();const m=Mi.fromServerFormat(d.fieldPath);return new $y(m,f)}(n,i)):[];var i;if(t.update){const i=wu(n,t.update.name),l=new zi({mapValue:{fields:t.update.fields}});if(t.updateMask){const d=new qf((t.updateMask.fieldPaths||[]).map(b=>Mi.fromServerFormat(b)));return new sp(i,l,d,e,r)}return new jy(i,l,e,r)}if(t.delete){const i=wu(n,t.delete);return new u(i,e)}if(t.verify){const i=wu(n,t.verify);return new h(i,e)}return bt()}function gF(n,t){return{documents:[GR(n,t.path)]}}function mF(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=GR(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=GR(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const b=m.map(x=>function(I){if("=="===I.op){if(mI(I.value))return{unaryFilter:{field:Zy(I.field),op:"IS_NAN"}};if(SR(I.value))return{unaryFilter:{field:Zy(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(mI(I.value))return{unaryFilter:{field:Zy(I.field),op:"IS_NOT_NAN"}};if(SR(I.value))return{unaryFilter:{field:Zy(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zy(I.field),op:r8(I.op),value:I.value}}}(x));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);i&&(e.structuredQuery.where=i);const l=function(m){if(0!==m.length)return m.map(b=>{return{field:Zy((x=b).field),direction:n8(x.dir)};var x})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const d=(b=t.limit,n.N||sh(b)?b:{value:b});var b,f,m;return null!==d&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt={before:(f=t.startAt).inclusive,values:f.position}),t.endAt&&(e.structuredQuery.endAt={before:!(m=t.endAt).inclusive,values:m.position}),e}function _F(n){let t=dF(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Wt(1===r);const x=e.from[0];x.allDescendants?i=x.collectionId:t=t.child(x.collectionId)}let l=[];e.where&&(l=yF(e.where));let d=[];e.orderBy&&(d=e.orderBy.map(x=>{return new Kf(zy((I=x).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let f=null;e.limit&&(f=function(x){let I;return I="object"==typeof x?x.value:x,sh(I)?null:I}(e.limit));let m=null;var x;e.startAt&&(m=new _u((x=e.startAt).values||[],!!x.before));let b=null;return e.endAt&&(b=function(x){return new _u(x.values||[],!x.before)}(e.endAt)),xI(t,i,d,l,f,"F",m,b)}function yF(n){return n?void 0!==n.unaryFilter?[s8(n)]:void 0!==n.fieldFilter?[i8(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>yF(t)).reduce((t,e)=>t.concat(e)):bt():[]}function n8(n){return z4[n]}function r8(n){return Y4[n]}function Zy(n){return{fieldPath:n.canonicalString()}}function zy(n){return Mi.fromServerFormat(n.fieldPath)}function i8(n){return oi.create(zy(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(n.fieldFilter.op),n.fieldFilter.value)}function s8(n){switch(n.unaryFilter.op){case"IS_NAN":const t=zy(n.unaryFilter.field);return oi.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=zy(n.unaryFilter.field);return oi.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zy(n.unaryFilter.field);return oi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zy(n.unaryFilter.field);return oi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}function o8(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function vF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function uo(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=bF(t)),t=a8(n.get(e),t);return bF(t)}function a8(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function bF(n){return n+"\x01\x01"}function Cu(n){const t=n.length;if(Wt(t>=2),2===t)return Wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),kn.emptyPath();const e=t-2,r=[];let i="";for(let l=0;l<t;){const d=n.indexOf("\x01",l);switch((d<0||d>e)&&bt(),n.charAt(d+1)){case"\x01":const f=n.substring(l,d);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(l,d),i+="\0";break;case"\x11":i+=n.substring(l,d+1);break;default:bt()}l=d+2}return new kn(r)}const wF=["userId","batchId"];function RI(n,t){return[n,uo(t)]}function CF(n,t,e){return[n,uo(t),e]}const l8={},c8=["prefixPath","collectionGroup","readTime","documentId"],u8=["prefixPath","collectionGroup","documentId"],d8=["collectionGroup","readTime","prefixPath","documentId"],h8=["canonicalId","targetId"],f8=["targetId","path"],p8=["path","targetId"],g8=["collectionId","parent"],m8=["indexId","uid"],_8=["uid","sequenceNumber"],y8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],v8=["indexId","uid","orderedDocumentKey"],b8=["userId","collectionPath","documentId"],w8=["userId","collectionPath","largestBatchId"],C8=["userId","collectionGroup","largestBatchId"],EF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],E8=[...EF,"documentOverlays"],xF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x8=[...xF,"indexConfiguration","indexState","indexEntries"],DF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class je{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new je((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof je?e:je.resolve(e)}catch(e){return je.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):je.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):je.reject(e)}static resolve(t){return new je((e,r)=>{e(t)})}static reject(t){return new je((e,r)=>{r(t)})}static waitFor(t){return new je((e,r)=>{let i=0,l=0,d=!1;t.forEach(f=>{++i,f.next(()=>{++l,d&&l===i&&e()},m=>r(m))}),d=!0,l===i&&e()})}static or(t){let e=je.resolve(!1);for(const r of t)e=e.next(i=>i?je.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,l)=>{r.push(e.call(this,i,l))}),this.waitFor(r)}}class kI{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new ii,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new pC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=qR(r.target.error);this.At.reject(new pC(t,i))}}static open(t,e,r,i){try{return new kI(e,t.transaction(i,r))}catch(l){throw new pC(e,l)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(nt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new T8(e)}}class lc{constructor(t,e,r){this.name=t,this.version=e,this.bt=r,12.2===lc.Vt((0,Y.z$)())&&Kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return nt("SimpleDb","Removing database:",t),Vm(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,Y.hl)())return!1;if(lc.St())return!0;const t=(0,Y.z$)(),e=lc.Vt(t),r=0<e&&e<10,i=lc.Dt(t),l=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,$e.Z)(function*(){return e.db||(nt("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{i(new pC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Ye(Pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ye(Pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new pC(t,f))},l.onupgradeneeded=d=>{nt("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',d.oldVersion),e.bt.kt(d.target.result,l.transaction,d.oldVersion,e.version).next(()=>{nt("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var l=this;return(0,$e.Z)(function*(){const d="readonly"===e;let f=0;for(;;){++f;try{l.db=yield l.Nt(t);const m=kI.open(l.db,t,d?"readonly":"readwrite",r),b=i(m).next(x=>(m.Pt(),x)).catch(x=>(m.abort(x),je.reject(x))).toPromise();return b.catch(()=>{}),yield m.Rt,b}catch(m){const b="FirebaseError"!==m.name&&f<3;if(nt("SimpleDb","Transaction failed with error:",m.message,"Retrying:",b),l.close(),!b)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class D8{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Vm(this.Ft.delete())}}class pC extends Ye{constructor(t,e){super(Pe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Lm(n){return"IndexedDbTransactionError"===n.name}class T8{constructor(t){this.store=t}put(t,e){let r;return void 0!==e?(nt("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):(nt("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Vm(r)}add(t){return nt("SimpleDb","ADD",this.store.name,t,t),Vm(this.store.add(t))}get(t){return Vm(this.store.get(t)).next(e=>(void 0===e&&(e=null),nt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return nt("SimpleDb","DELETE",this.store.name,t),Vm(this.store.delete(t))}count(){return nt("SimpleDb","COUNT",this.store.name),Vm(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(d,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new je((l,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new je((i,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(t,e){nt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,d,f)=>f.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new je((r,i)=>{e.onerror=l=>{const d=qR(l.target.error);i(d)},e.onsuccess=l=>{const d=l.target.result;d?t(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(t,e){const r=[];return new je((i,l)=>{t.onerror=d=>{l(d.target.error)},t.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const m=new D8(f),b=e(f.primaryKey,f.value,m);if(b instanceof je){const x=b.catch(I=>(m.done(),je.reject(I)));r.push(x)}m.isDone?i():null===m.Lt?f.continue():f.continue(m.Lt)}}).next(()=>je.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Vm(n){return new je((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=qR(r.target.error);e(i)}})}let IF=!1;function qR(n){const t=lc.Vt((0,Y.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Ye("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IF||(IF=!0,setTimeout(()=>{throw r},0)),r}}return n}class AF extends TF{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function os(n,t){const e=dt(n);return lc.xt(e.Ht,t)}class ZR{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&oF(l,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&MI(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&MI(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Bt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Sn())}isEqual(t){return this.batchId===t.batchId&&Dm(this.mutations,t.mutations,(e,r)=>HR(e,r))&&Dm(this.baseMutations,t.baseMutations,(e,r)=>HR(e,r))}}class zR{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Wt(t.mutations.length===r.length);let i=vi;const l=t.mutations;for(let d=0;d<l.length;d++)i=i.insert(l[d].key,r[d].version);return new zR(t,e,r,i)}}class YR{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lp{constructor(t,e,r,i,l=Bt.min(),d=Bt.min(),f=Ri.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(t){return new lp(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new lp(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new lp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class SF{constructor(t){this.Jt=t}}function NF(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:PI(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:dC(i=n.Jt,(l=t).key),fields:l.data.value.mapValue.fields,updateTime:uC(i,l.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Bm(t.version)};else{if(!t.isUnknownDocument())return bt();r.unknownDocument={path:e.path.toArray(),version:Bm(t.version)}}var i,l;return r}function PI(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Bm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Um(n){const t=new si(n.seconds,n.nanoseconds);return Bt.fromTimestamp(t)}function Yy(n,t){const e=(t.baseMutations||[]).map(l=>WR(n.Jt,l));for(let l=0;l<t.mutations.length-1;++l){const d=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(d.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const r=t.mutations.map(l=>WR(n.Jt,l)),i=si.fromMillis(t.localWriteTimeMs);return new ZR(t.batchId,i,e,r)}function gC(n){const t=Um(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Um(n.lastLimboFreeSnapshotVersion):Bt.min();let r;var i;return void 0!==n.query.documents?(Wt(1===(i=n.query).documents.length),r=Ho(Jf(dF(i.documents[0])))):r=Ho(_F(n.query)),new lp(r,n.targetId,0,n.lastListenSequenceNumber,t,e,Ri.fromBase64String(n.resumeToken))}function MF(n,t){const e=Bm(t.snapshotVersion),r=Bm(t.lastLimboFreeSnapshotVersion);let i;i=ki(t.target)?gF(n.Jt,t.target):mF(n.Jt,t.target);const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ch(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KR(n){const t=_F({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DI(t,t.limit,"L"):t}function QR(n,t){return new YR(t.largestBatchId,WR(n.Jt,t.overlayMutation))}function RF(n,t){const e=t.path.lastSegment();return[n,uo(t.path.popLast()),e]}class A8{getBundleMetadata(t,e){return kF(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Um(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return kF(t).put({bundleId:(r=e).id,createTime:Bm(ss(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return PF(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:KR(i.bundledQuery),readTime:Um(i.readTime)};var i})}saveNamedQuery(t,e){return PF(t).put({name:(r=e).name,readTime:Bm(ss(r.readTime)),bundledQuery:r.bundledQuery});var r}}function kF(n){return os(n,"bundles")}function PF(n){return os(n,"namedQueries")}class JR{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new JR(t,e.uid||"")}getOverlay(t,e){return mC(t).get(RF(this.userId,e)).next(r=>r?QR(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((l,d)=>{const f=new YR(e,d);i.push(this.Xt(t,f))}),je.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(d=>i.add(uo(d.getCollectionPath())));const l=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(mC(t).Qt("collectionPathOverlayIndex",f))}),je.waitFor(l)}getOverlaysForCollection(t,e,r){const i=hn(),l=uo(e),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return mC(t).qt("collectionPathOverlayIndex",d).next(f=>{for(const m of f){const b=QR(this.M,m);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const l=hn();let d;const f=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return mC(t).Wt({index:"collectionGroupOverlayIndex",range:f},(m,b,x)=>{const I=QR(this.M,b);l.size()<i||I.largestBatchId===d?(l.set(I.getKey(),I),d=I.largestBatchId):x.done()}).next(()=>l)}Xt(t,e){return mC(t).put(function(r,i,l){const[d,f,m]=RF(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:fC(r.Jt,l.mutation)}}(this.M,this.userId,e))}}function mC(n){return os(n,"documentOverlays")}class Hm{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(jr(t.integerValue));else if("doubleValue"in t){const r=jr(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),Fy(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(ih(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?Uo(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):bt()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),lt.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function S8(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function OF(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const l=S8(255&e[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(t/8)}Hm.fe=new Hm;class N8{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=OF(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=OF(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class M8{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class R8{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class _C{constructor(){this.De=new N8,this.Ce=new M8(this.De),this.xe=new R8(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class cp{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new cp(this.indexId,this.documentKey,this.arrayValue,r)}}function $m(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=FF(n.arrayValue,t.arrayValue),0!==e?e:(e=FF(n.directionalValue,t.directionalValue),0!==e?e:lt.comparator(n.documentKey,t.documentKey)))}function FF(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class k8{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=km(t);if(void 0!==e&&!this.Be(e))return!1;const r=al(t);let i=0,l=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class P8{constructor(){this.qe=new XR}addToCollectionParentIndex(t,e){return this.qe.add(e),je.resolve()}getCollectionParents(t,e){return je.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return je.resolve()}deleteFieldIndex(t,e){return je.resolve()}getDocumentsMatchingTarget(t,e){return je.resolve(null)}getFieldIndex(t,e){return je.resolve(null)}getFieldIndexes(t,e){return je.resolve([])}getNextCollectionGroupToUpdate(t){return je.resolve(null)}updateCollectionGroup(t,e,r){return je.resolve()}updateIndexEntries(t,e){return je.resolve()}}class XR{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new he(kn.comparator),l=!i.has(r);return this.index[e]=i.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new he(kn.comparator)).toArray()}}const Ky=new Uint8Array(0);class O8{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new XR,this.Ge=new R(r=>ch(r),(r,i)=>Pm(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const l={collectionId:r,parent:uo(i)};return LF(t).put(l)}return je.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[xR(e),""],!1,!0);return LF(t).qt(i).next(l=>{for(const d of l){if(d.collectionId!==e)break;r.push(Cu(d.parent))}return r})}addFieldIndex(t,e){const r=OI(t),i={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=OI(t),i=FI(t),l=yC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=yC(t);let i=!0;const l=new Map;return je.forEach(this.Qe(e),d=>this.getFieldIndex(t,d).next(f=>{i&&(i=!!f),l.set(d,f)})).next(()=>{if(i){let d=Sn();const f=[];return je.forEach(l,(m,b)=>{var x;nt("IndexedDbIndexManager",`Using index ${x=m,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${ch(e)}`);const I=function(gt,_t){const jt=km(_t);if(void 0===jt)return null;for(const wn of mu(gt,jt.fieldPath))switch(wn.op){case"array-contains-any":return wn.value.arrayValue.values||[];case"array-contains":return[wn.value]}return null}(b,m),B=function(gt,_t){const jt=new Map;for(const wn of al(_t))for(const Jr of mu(gt,wn.fieldPath))switch(Jr.op){case"==":case"in":jt.set(wn.fieldPath.canonicalString(),Jr.value);break;case"not-in":case"!=":return jt.set(wn.fieldPath.canonicalString(),Jr.value),Array.from(jt.values())}return null}(b,m),Z=function(gt,_t){const jt=[];let wn=!0;for(const Jr of al(_t)){const di=0===Jr.kind?Om(gt,Jr.fieldPath,gt.startAt):nC(gt,Jr.fieldPath,gt.startAt);if(!di.value)return null;jt.push(di.value),wn&&(wn=di.inclusive)}return new _u(jt,wn)}(b,m),ne=function(gt,_t){const jt=[];let wn=!0;for(const Jr of al(_t)){const di=0===Jr.kind?nC(gt,Jr.fieldPath,gt.endAt):Om(gt,Jr.fieldPath,gt.endAt);if(!di.value)return null;jt.push(di.value),wn&&(wn=di.inclusive)}return new _u(jt,wn)}(b,m),we=this.je(m,b,Z),Be=this.je(m,b,ne),tt=this.We(m,b,B),st=this.ze(m.indexId,I,we,!!Z&&Z.inclusive,Be,!!ne&&ne.inclusive,tt);return je.forEach(st,gt=>r.Gt(gt,e.limit).next(_t=>{_t.forEach(jt=>{const wn=lt.fromSegments(jt.documentKey);d.has(wn)||(d=d.add(wn),f.push(wn))})}))}).next(()=>f)}return je.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,r,i,l,d,f){const m=(null!=e?e.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),b=m/(null!=e?e.length:1),x=[];for(let I=0;I<m;++I){const B=e?this.He(e[I/b]):Ky,Z=r?this.Je(t,B,r[I%b],i):this.Ye(t),ne=l?this.Xe(t,B,l[I%b],d):this.Ye(t+1);x.push(...this.createRange(Z,ne,f.map(we=>this.Je(t,B,we,!0))))}return x}Je(t,e,r,i){const l=new cp(t,lt.empty(),e,r);return i?l:l.ke()}Xe(t,e,r,i){const l=new cp(t,lt.empty(),e,r);return i?l.ke():l}Ye(t){return new cp(t,lt.empty(),Ky,Ky)}getFieldIndex(t,e){const r=new k8(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(l=>{const d=l.filter(f=>r.$e(f));return d.sort((f,m)=>m.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(t,e){const r=new _C;for(const i of al(t)){const l=e.data.field(i.fieldPath);if(null==l)return null;const d=r.Ne(i.kind);Hm.fe.Zt(l,d)}return r.Se()}He(t){const e=new _C;return Hm.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new _C;return Hm.fe.Zt(ah(this.databaseId,e),r.Ne(function(i){const l=al(i);return 0===l.length?0:l[l.length-1].kind}(t))),r.Se()}We(t,e,r){if(null===r)return[];let i=[];i.push(new _C);let l=0;for(const d of al(t)){const f=r[l++];for(const m of i)if(this.en(e,d.fieldPath)&&Mm(f))i=this.nn(i,d,f);else{const b=m.Ne(d.kind);Hm.fe.Zt(f,b)}}return this.sn(i)}je(t,e,r){return null==r?null:this.We(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],l=[];for(const d of r.arrayValue.values||[])for(const f of i){const m=new _C;m.seed(f.Se()),Hm.fe.Zt(d,m.Ne(e.kind)),l.push(m)}return l}en(t,e){return!!t.filters.find(r=>r instanceof oi&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=OI(t),i=FI(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(l=>{const d=[];return je.forEach(l,f=>i.get([f.indexId,this.uid]).next(m=>{d.push(function(b,x){const I=x?new Yf(x.sequenceNumber,new ic(Um(x.readTime),new lt(Cu(x.documentKey)),x.largestBatchId)):Yf.empty(),B=b.fields.map(([Z,ne])=>new lh(Mi.fromServerFormat(Z),ne));return new zf(b.indexId,b.collectionGroup,B,I)}(f,m))})).next(()=>d)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:on(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=OI(t),l=FI(t);return this.rn(t).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(f=>je.forEach(f,m=>{return l.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Bm((B=r).readTime),documentKey:uo(B.documentKey.path),largestBatchId:B.largestBatchId});var B})))}updateIndexEntries(t,e){const r=new Map;return je.forEach(e,(i,l)=>{const d=r.get(i.collectionGroup);return(d?je.resolve(d):this.getFieldIndexes(t,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),je.forEach(f,m=>this.on(t,i,m).next(b=>{const x=this.un(l,m);return b.isEqual(x)?je.resolve():this.an(t,l,m,b,x)}))))})}cn(t,e,r,i){return yC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return yC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=yC(t);let l=new he($m);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(d,f)=>{l=l.add(new cp(r.indexId,e,f.arrayValue,f.directionalValue))}).next(()=>l)}un(t,e){let r=new he($m);const i=this.Ze(e,t);if(null==i)return r;const l=km(e);if(null!=l){const d=t.data.field(l.fieldPath);if(Mm(d))for(const f of d.arrayValue.values||[])r=r.add(new cp(e.indexId,t.key,this.He(f),i))}else r=r.add(new cp(e.indexId,t.key,Ky,i));return r}an(t,e,r,i,l){nt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const d=[];return function(f,m,b,x,I){const B=f.getIterator(),Z=m.getIterator();let ne=Te(B),we=Te(Z);for(;ne||we;){let Be=!1,tt=!1;if(ne&&we){const st=b(ne,we);st<0?tt=!0:st>0&&(Be=!0)}else null!=ne?tt=!0:Be=!0;Be?(x(we),we=Te(Z)):tt?(I(ne),ne=Te(B)):(ne=Te(B),we=Te(Z))}}(i,l,$m,f=>{d.push(this.cn(t,e,r,f))},f=>{d.push(this.hn(t,e,r,f))}),je.waitFor(d)}rn(t){let e=1;return FI(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((d,f)=>$m(d,f)).filter((d,f,m)=>!f||0!==$m(d,m[f-1]));const i=[];i.push(t);for(const d of r){const f=$m(d,t),m=$m(d,e);if(0===f)i[0]=t.ke();else if(f>0&&m<0)i.push(d),i.push(d.ke());else if(m>0)break}i.push(e);const l=[];for(let d=0;d<i.length;d+=2)l.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Ky,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Ky,[]]));return l}}function LF(n){return os(n,"collectionParents")}function yC(n){return os(n,"indexEntries")}function OI(n){return os(n,"indexConfiguration")}function FI(n){return os(n,"indexState")}const VF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class jo{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new jo(t,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BF(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],d=IDBKeyRange.only(e.batchId);let f=0;const m=r.Wt({range:d},(x,I,B)=>(f++,B.delete()));l.push(m.next(()=>{Wt(1===f)}));const b=[];for(const x of e.mutations){const I=CF(t,x.key.path,e.batchId);l.push(i.delete(I)),b.push(x.key)}return je.waitFor(l).next(()=>b)}function LI(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw bt();t=n.noDocument}return JSON.stringify(t).length}jo.DEFAULT_COLLECTION_PERCENTILE=10,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jo.DEFAULT=new jo(41943040,jo.DEFAULT_COLLECTION_PERCENTILE,jo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jo.DISABLED=new jo(-1,0,0);class ek{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){Wt(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new ek(l,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return up(t).Wt({index:"userMutationsIndex",range:r},(i,l,d)=>{e=!1,d.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const l=Qy(t),d=up(t);return d.add({}).next(f=>{Wt("number"==typeof f);const m=new ZR(f,e,r,i),b=function(B,Z,ne){const we=ne.baseMutations.map(tt=>fC(B.Jt,tt)),Be=ne.mutations.map(tt=>fC(B.Jt,tt));return{userId:Z,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:we,mutations:Be}}(this.M,this.userId,m),x=[];let I=new he((B,Z)=>on(B.canonicalString(),Z.canonicalString()));for(const B of i){const Z=CF(this.userId,B.key.path,f);I=I.add(B.key.path.popLast()),x.push(d.put(b)),x.push(l.put(Z,l8))}return I.forEach(B=>{x.push(this.indexManager.addToCollectionParentIndex(t,B))}),t.addOnCommittedListener(()=>{this.ln[f]=m.keys()}),je.waitFor(x).next(()=>m)})}lookupMutationBatch(t,e){return up(t).get(e).next(r=>r?(Wt(r.userId===this.userId),Yy(this.M,r)):null)}fn(t,e){return this.ln[e]?je.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return up(t).Wt({index:"userMutationsIndex",range:i},(d,f,m)=>{f.userId===this.userId&&(Wt(f.batchId>=r),l=Yy(this.M,f)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return up(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return up(t).qt("userMutationsIndex",e).next(r=>r.map(i=>Yy(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=RI(this.userId,e.path),i=IDBKeyRange.lowerBound(r),l=[];return Qy(t).Wt({range:i},(d,f,m)=>{const[b,x,I]=d,B=Cu(x);if(b===this.userId&&e.path.isEqual(B))return up(t).get(I).next(Z=>{if(!Z)throw bt();Wt(Z.userId===this.userId),l.push(Yy(this.M,Z))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new he(on);const i=[];return e.forEach(l=>{const d=RI(this.userId,l.path),f=IDBKeyRange.lowerBound(d),m=Qy(t).Wt({range:f},(b,x,I)=>{const[B,Z,ne]=b,we=Cu(Z);B===this.userId&&l.path.isEqual(we)?r=r.add(ne):I.done()});i.push(m)}),je.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,l=RI(this.userId,r),d=IDBKeyRange.lowerBound(l);let f=new he(on);return Qy(t).Wt({range:d},(m,b,x)=>{const[I,B,Z]=m,ne=Cu(B);I===this.userId&&r.isPrefixOf(ne)?ne.length===i&&(f=f.add(Z)):x.done()}).next(()=>this.dn(t,f))}dn(t,e){const r=[],i=[];return e.forEach(l=>{i.push(up(t).get(l).next(d=>{if(null===d)throw bt();Wt(d.userId===this.userId),r.push(Yy(this.M,d))}))}),je.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return BF(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),je.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return je.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qy(t).Wt({range:r},(l,d,f)=>{if(l[0]===this.userId){const m=Cu(l[1]);i.push(m)}else f.done()}).next(()=>{Wt(0===i.length)})})}containsKey(t,e){return UF(t,this.userId,e)}wn(t){return HF(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function UF(n,t,e){const r=RI(t,e.path),i=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return Qy(n).Wt({range:l,jt:!0},(f,m,b)=>{const[x,I,B]=f;x===t&&I===i&&(d=!0),b.done()}).next(()=>d)}function up(n){return os(n,"mutations")}function Qy(n){return os(n,"documentMutations")}function HF(n){return os(n,"mutationQueues")}class jm{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new jm(0)}static yn(){return new jm(-1)}}class F8{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new jm(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>Bt.fromTimestamp(new si(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Jy(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(Wt(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const l=[];return Jy(t).Wt((d,f)=>{const m=gC(f);m.sequenceNumber<=e&&null===r.get(m.targetId)&&(i++,l.push(this.removeTargetData(t,m)))}).next(()=>je.waitFor(l)).next(()=>i)}forEachTarget(t,e){return Jy(t).Wt((r,i)=>{const l=gC(i);e(l)})}pn(t){return $F(t).get("targetGlobalKey").next(e=>(Wt(null!==e),e))}In(t,e){return $F(t).put("targetGlobalKey",e)}Tn(t,e){return Jy(t).put(MF(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=ch(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Jy(t).Wt({range:i,index:"queryTargetsIndex"},(d,f,m)=>{const b=gC(f);Pm(e,b.target)&&(l=b,m.done())}).next(()=>l)}addMatchingKeys(t,e,r){const i=[],l=dp(t);return e.forEach(d=>{const f=uo(d.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(t,r,d))}),je.waitFor(i)}removeMatchingKeys(t,e,r){const i=dp(t);return je.forEach(e,l=>{const d=uo(l.path);return je.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=dp(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=dp(t);let l=Sn();return i.Wt({range:r,jt:!0},(d,f,m)=>{const b=Cu(d[1]),x=new lt(b);l=l.add(x)}).next(()=>l)}containsKey(t,e){const r=uo(e.path),i=IDBKeyRange.bound([r],[xR(r)],!1,!0);let l=0;return dp(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],m,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Et(t,e){return Jy(t).get(e).next(r=>r?gC(r):null)}}function Jy(n){return os(n,"targets")}function $F(n){return os(n,"targetGlobal")}function dp(n){return os(n,"targetDocuments")}function Gm(n){return tk.apply(this,arguments)}function tk(){return(tk=(0,$e.Z)(function*(n){if(n.code!==Pe.FAILED_PRECONDITION||n.message!==DF)throw n;nt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function jF([n,t],[e,r]){const i=on(n,e);return 0===i?on(t,r):i}class L8{constructor(t){this.An=t,this.buffer=new he(jF),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();jF(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class V8{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;nt("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,$e.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Lm(i)?nt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Gm(i)}yield e.Sn(t)}))}}class B8{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return je.resolve(lo.A);const r=new L8(e);return this.Dn.forEachTarget(t,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(VF)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VF):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,l,d,f,m,b;const x=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,d=Date.now(),this.nthSequenceNumber(t,i))).next(I=>(r=I,f=Date.now(),this.removeTargets(t,r,e))).next(I=>(l=I,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(I=>(b=Date.now(),Em()<=ca.in.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${l} targets in `+(m-f)+`ms\n\tRemoved ${I} documents in `+(b-m)+`ms\nTotal Duration: ${b-x}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:I})))}}class U8{constructor(t,e){this.db=t,this.garbageCollector=new B8(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return VI(t,r)}removeReference(t,e,r){return VI(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return VI(t,e)}On(t,e){return function(r,i){let l=!1;return HF(r).zt(d=>UF(r,d,i).next(f=>(f&&(l=!0),je.resolve(!f)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Mn(t,(d,f)=>{if(f<=e){const m=this.On(t,d).next(b=>{if(!b)return l++,r.getEntry(t,d).next(()=>(r.removeEntry(d,Bt.min()),dp(t).delete([0,uo(d.path)])))});i.push(m)}}).next(()=>je.waitFor(i)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return VI(t,e)}Mn(t,e){const r=dp(t);let i,l=lo.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:m,sequenceNumber:b})=>{0===d?(l!==lo.A&&e(new lt(Cu(i)),l),l=b,i=m):l=lo.A}).next(()=>{l!==lo.A&&e(new lt(Cu(i)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function VI(n,t){return dp(n).put((r=n.currentSequenceNumber,{targetId:0,path:uo(t.path),sequenceNumber:r}));var r}class GF{constructor(){this.changes=new R(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,hr.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?je.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class H8{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Wm(t).put(r)}removeEntry(t,e,r){return Wm(t).delete(function(i,l){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],PI(l),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=hr.newInvalidDocument(e);return Wm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vC(e))},(i,l)=>{r=this.$n(e,l)}).next(()=>r)}Bn(t,e){let r={size:0,document:hr.newInvalidDocument(e)};return Wm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vC(e))},(i,l)=>{r={document:this.$n(e,l),size:LI(l)}}).next(()=>r)}getEntries(t,e){let r=He();return this.Ln(t,e,(i,l)=>{const d=this.$n(i,l);r=r.insert(i,d)}).next(()=>r)}Un(t,e){let r=He(),i=new j(lt.comparator);return this.Ln(t,e,(l,d)=>{const f=this.$n(l,d);r=r.insert(l,f),i=i.insert(l,LI(d))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return je.resolve();let i=new he(ZF);e.forEach(m=>i=i.add(m));const l=IDBKeyRange.bound(vC(i.first()),vC(i.last())),d=i.getIterator();let f=d.getNext();return Wm(t).Wt({index:"documentKeyIndex",range:l},(m,b,x)=>{const I=lt.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&ZF(f,I)<0;)r(f,null),f=d.getNext();f&&f.isEqual(I)&&(r(f,b),f=d.hasNext()?d.getNext():null),f?x.Ut(vC(f)):x.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),PI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wm(t).qt(IDBKeyRange.bound(i,l,!0)).next(d=>{let f=He();for(const m of d){const b=this.$n(lt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(t,e,r,i){let l=He();const d=qF(e,r),f=qF(e,ic.max());return Wm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(m,b,x)=>{const I=this.$n(lt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);l=l.insert(I.key,I),l.size===i&&x.done()}).next(()=>l)}newChangeBuffer(t){return new $8(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return WF(t).get("remoteDocumentGlobalKey").next(e=>(Wt(!!e),e))}Fn(t,e){return WF(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=pF(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=lt.fromSegments(t.noDocument.path),i=Um(t.noDocument.readTime);e=hr.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return bt();{const r=lt.fromSegments(t.unknownDocument.path),i=Um(t.unknownDocument.version);e=hr.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new si(r[0],r[1]);return Bt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(Bt.min()))return r}return hr.newInvalidDocument(t)}}class $8 extends GF{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new R(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new he((l,d)=>on(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const f=this.Gn.get(l);if(e.push(this.Kn.removeEntry(t,l,f.readTime)),d.isValidDocument()){const m=NF(this.Kn.M,d);i=i.add(l.path.popLast()),r+=LI(m)-f.size,e.push(this.Kn.addEntry(t,l,m))}else if(r-=f.size,this.trackRemovals){const m=NF(this.Kn.M,d.convertToNoDocument(Bt.min()));e.push(this.Kn.addEntry(t,l,m))}}),i.forEach(l=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.Kn.updateMetadata(t,r)),je.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function WF(n){return os(n,"remoteDocumentGlobal")}function Wm(n){return os(n,"remoteDocumentsV14")}function vC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function qF(n,t){const e=t.documentKey.path.toArray();return[n,PI(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function ZF(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let l=0;l<e.length-2&&l<r.length-2;++l)if(i=on(e[l],r[l]),i)return i;return i=on(e.length,r.length),i||(i=on(e[e.length-2],r[r.length-2]),i||on(e[e.length-1],r[r.length-1]))}class j8{constructor(t){this.M=t}kt(t,e,r,i){const l=new kI("createOrUpgrade",e);var f;r<1&&i>=1&&(t.createObjectStore("owner"),(f=t).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wF,{unique:!0}),f.createObjectStore("documentMutations"),zF(t),function(f){f.createObjectStore("remoteDocuments")}(t));let d=je.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(t),zF(t)),d=d.next(()=>function(f){const m=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(l))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,m){return m.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wF,{unique:!0});const x=m.store("mutations"),I=b.map(B=>x.put(B));return je.waitFor(I)})}(t,l))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(l))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(t),this.jn(l)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(l))),r<8&&i>=8&&(d=d.next(()=>this.zn(t,l))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(l))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:b8});m.createIndex("collectionPathOverlayIndex",w8,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",C8,{unique:!1})}(t)})),r<13&&i>=13&&(d=d.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:c8});m.createIndex("documentKeyIndex",u8),m.createIndex("collectionGroupIndex",d8)}(t)).next(()=>this.Jn(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:m8}).createIndex("sequenceNumberIndex",_8,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:y8}).createIndex("documentKeyIndex",v8,{unique:!1})}(t)})),d}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=LI(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>je.forEach(i,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>je.forEach(f,m=>{Wt(m.userId===l.userId);const b=Yy(this.M,m);return BF(t,l.userId,b).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Wt((d,f)=>{const m=new kn(d),b=[0,uo(m)];l.push(e.get(b).next(x=>x?je.resolve():e.put({targetId:0,path:uo(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>je.waitFor(l))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:g8});const r=e.store("collectionParents"),i=new XR,l=d=>{if(i.add(d)){const f=d.lastSegment(),m=d.popLast();return r.put({collectionId:f,parent:uo(m)})}};return e.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const m=new kn(d);return l(m.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([d,f,m],b)=>{const x=Cu(f);return l(x.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const l=gC(i),d=MF(this.M,l);return e.put(d)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((l,d)=>{const f=e.store("remoteDocumentsV14"),m=(b=d,b.document?new lt(kn.fromString(b.document.name).popFirst(5)):b.noDocument?lt.fromSegments(b.noDocument.path):b.unknownDocument?lt.fromSegments(b.unknownDocument.path):bt()).path.toArray();var b;const x={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(x))}).next(()=>je.waitFor(i))}}function zF(n){n.createObjectStore("targetDocuments",{keyPath:f8}).createIndex("documentTargetsIndex",p8,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",h8,{unique:!0}),n.createObjectStore("targetGlobal")}const nk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rk{constructor(t,e,r,i,l,d,f,m,b,x,I=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=l,this.window=d,this.document=f,this.Xn=b,this.Zn=x,this.ts=I,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=B=>Promise.resolve(),!rk.vt())throw new Ye(Pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new U8(this,i),this.hs=e+"main",this.M=new SF(m),this.ls=new lc(this.hs,this.ts,new j8(this.M)),this.fs=new F8(this.referenceDelegate,this.M),this.ds=new H8(this.M),this._s=new A8,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ye(Pe.FAILED_PRECONDITION,nk);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new lo(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,$e.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,$e.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,$e.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>BI(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(Lm(t))return nt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return nt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return bC(t).get("owner").next(e=>je.resolve(this.bs(e)))}Vs(t){return BI(t).delete(this.clientId)}vs(){var t=this;return(0,$e.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=os(r,"clientMetadata");return i.qt().next(l=>{const d=t.Ds(l,18e5),f=l.filter(m=>-1===d.indexOf(m));return je.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?je.resolve(!0):bC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Ye(Pe.FAILED_PRECONDITION,nk);return!1}}return!(!this.networkEnabled||!this.inForeground)||BI(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&nt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,$e.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new AF(e,lo.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>BI(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return ek.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new O8(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return JR.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){nt("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",l=14===(d=this.ts)?x8:13===d?xF:12===d?E8:11===d?EF:void bt();var d;let f;return this.ls.runTransaction(t,i,l,m=>(f=new AF(m,this.es?this.es.next():lo.A),"readwrite-primary"===e?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw Kr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ye(Pe.FAILED_PRECONDITION,DF);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}$s(t){return bC(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ye(Pe.FAILED_PRECONDITION,nk)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bC(t).put("owner",e)}static vt(){return lc.vt()}Rs(t){const e=bC(t);return e.get("owner").next(r=>this.bs(r)?(nt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):je.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(Kr(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Y.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return nt("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Kr("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function bC(n){return os(n,"owner")}function BI(n){return os(n,"clientMetadata")}function ik(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class G8{constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const l of e)l.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return lt.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):Hy(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new lt(e)).next(r=>{let i=Ft();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let l=Ft();return this.indexManager.getCollectionParents(t,i).next(d=>je.forEach(d,f=>{const m=(b=e,x=f.child(i),new ya(x,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,x;return this.zs(t,m,r).next(b=>{b.forEach((x,I)=>{l=l.insert(x,I)})})}).next(()=>l))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(l=>(i=l,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(l=>{for(const d of l)for(const f of d.mutations){const m=f.key;let b=i.get(m);null==b&&(b=hr.newInvalidDocument(m),i=i.insert(m,b)),MI(f,b,d.localWriteTime),b.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((l,d)=>{np(e,d)||(i=i.remove(l))}),i))}}class sk{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=Sn(),i=Sn();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new sk(t,e.fromCache,r,i)}}class YF{Xs(t){this.Zs=t}Qs(t,e,r,i){return 0===(l=e).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Bt.min())?this.ti(t,e):this.Zs.Ks(t,i).next(l=>{const d=this.ei(e,l);return(By(e)||Xf(e))&&this.ni(e.limitType,d,i,r)?this.ti(t,e):(Em()<=ca.in.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),yu(e)),this.Zs.Qs(t,e,eC(r,-1)).next(f=>(d.forEach(m=>{f=f.insert(m.key,m)}),f)))});var l}ei(t,e){let r=new he(TI(t));return e.forEach((i,l)=>{np(t,l)&&(r=r.add(l))}),r}ni(t,e,r,i){if(r.size!==e.size)return!0;const l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ti(t,e){return Em()<=ca.in.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",yu(e)),this.Zs.Qs(t,e,ic.min())}}class W8{constructor(t,e,r,i){this.persistence=t,this.si=e,this.M=i,this.ii=new j(on),this.ri=new R(l=>ch(l),Pm),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new G8(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function KF(n,t,e,r){return new W8(n,t,e,r)}function QF(n,t){return ok.apply(this,arguments)}function ok(){return(ok=(0,$e.Z)(function*(n,t){const e=dt(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(l=>(i=l,e.ai(t),e.Bs.getAllMutationBatches(r))).next(l=>{const d=[],f=[];let m=Sn();for(const b of i){d.push(b.batchId);for(const x of b.mutations)m=m.add(x.key)}for(const b of l){f.push(b.batchId);for(const x of b.mutations)m=m.add(x.key)}return e.ci.Ks(r,m).next(b=>({hi:b,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function q8(n,t){const e=dt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),l=e.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,m,b){const x=m.batch,I=x.keys();let B=je.resolve();return I.forEach(Z=>{B=B.next(()=>b.getEntry(f,Z)).next(ne=>{const we=m.docVersions.get(Z);Wt(null!==we),ne.version.compareTo(we)<0&&(x.applyToRemoteDocument(ne,m),ne.isValidDocument()&&(ne.setReadTime(m.commitVersion),b.addEntry(ne)))})}),B.next(()=>d.Bs.removeMutationBatch(f,x))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.ci.Ks(r,i))})}function JF(n){const t=dt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function Z8(n,t){const e=dt(n),r=t.snapshotVersion;let i=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=e.ui.newChangeBuffer({trackRemovals:!0});i=e.ii;const f=[];t.targetChanges.forEach((b,x)=>{const I=i.get(x);if(!I)return;f.push(e.fs.removeMatchingKeys(l,b.removedDocuments,x).next(()=>e.fs.addMatchingKeys(l,b.addedDocuments,x)));let B=I.withSequenceNumber(l.currentSequenceNumber);var Z,ne,we;t.targetMismatches.has(x)?B=B.withResumeToken(Ri.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):b.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(b.resumeToken,r)),i=i.insert(x,B),ne=B,we=b,(0===(Z=I).resumeToken.approximateByteSize()||ne.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&f.push(e.fs.updateTargetData(l,B))});let m=He();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,b))}),f.push(XF(l,d,t.documentUpdates).next(b=>{m=b})),!r.isEqual(Bt.min())){const b=e.fs.getLastRemoteSnapshotVersion(l).next(x=>e.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(b)}return je.waitFor(f).next(()=>d.apply(l)).next(()=>e.ci.Gs(l,m)).next(()=>m)}).then(l=>(e.ii=i,l))}function XF(n,t,e){let r=Sn();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let l=He();return e.forEach((d,f)=>{const m=i.get(d);f.isNoDocument()&&f.version.isEqual(Bt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):nt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),l})}function z8(n,t){const e=dt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function Xy(n,t){const e=dt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(l=>l?(i=l,je.resolve(i)):e.fs.allocateTargetId(r).next(d=>(i=new lp(t,d,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ii=e.ii.insert(r.targetId,r),e.ri.set(t,r.targetId)),r})}function ev(n,t,e){return ak.apply(this,arguments)}function ak(){return(ak=(0,$e.Z)(function*(n,t,e){const r=dt(n),i=r.ii.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Lm(d))throw d;nt("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function UI(n,t,e){const r=dt(n);let i=Bt.min(),l=Sn();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,m,b){const x=dt(f),I=x.ri.get(b);return void 0!==I?je.resolve(x.ii.get(I)):x.fs.getTargetData(m,b)}(r,d,Ho(t)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(m=>{l=m})}).next(()=>r.si.Qs(d,t,e?i:Bt.min(),e?l:Sn())).next(f=>(nL(r,uh(t),f),{documents:f,li:l})))}function eL(n,t){const e=dt(n),r=dt(e.fs),i=e.ii.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,t).next(d=>d?d.target:null))}function tL(n,t){const e=dt(n),r=e.oi.get(t)||Bt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.ui.getAllFromCollectionGroup(i,t,eC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(nL(e,t,i),i))}function nL(n,t,e){let r=Bt.min();e.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(t,r)}function lk(){return(lk=(0,$e.Z)(function*(n,t,e,r){const i=dt(n);let l=Sn(),d=He();for(const b of e){const x=t.fi(b.metadata.name);b.document&&(l=l.add(x));const I=t.di(b);I.setReadTime(t._i(b.metadata.readTime)),d=d.insert(x,I)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),m=yield Xy(i,(b=r,Ho(Jf(kn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>XF(b,f,d).next(x=>(f.apply(b),x)).next(x=>i.fs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>i.fs.addMatchingKeys(b,l,m.targetId)).next(()=>i.ci.Gs(b,x)).next(()=>x)))})).apply(this,arguments)}function K8(n,t){return ck.apply(this,arguments)}function ck(){return(ck=(0,$e.Z)(function*(n,t,e=Sn()){const r=yield Xy(n,Ho(KR(t.bundledQuery))),i=dt(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const d=ss(t.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(l,t);const f=r.withResumeToken(Ri.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(l,f).next(()=>i.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.fs.addMatchingKeys(l,e,r.targetId)).next(()=>i._s.saveNamedQuery(l,t))})})).apply(this,arguments)}class Q8{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return je.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var r;return this.wi.set(e.id,{id:(r=e).id,version:r.version,createTime:ss(r.createTime)}),je.resolve()}getNamedQuery(t,e){return je.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(r=e).name,query:KR(r.bundledQuery),readTime:ss(r.readTime)}),je.resolve();var r}}class J8{constructor(){this.overlays=new j(lt.comparator),this.gi=new Map}getOverlay(t,e){return je.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,l)=>{this.Xt(t,e,l)}),je.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),je.resolve()}getOverlaysForCollection(t,e,r){const i=hn(),l=e.length+1,d=new lt(e.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!e.isPrefixOf(b.path))break;b.path.length===l&&m.largestBatchId>r&&i.set(m.getKey(),m)}return je.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let l=new j((b,x)=>b-x);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===e&&b.largestBatchId>r){let x=l.get(b.largestBatchId);null===x&&(x=hn(),l=l.insert(b.largestBatchId,x)),x.set(b.getKey(),b)}}const f=hn(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,x)=>f.set(b,x)),!(f.size()>=i)););return je.resolve(f)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new YR(e,r));let l=this.gi.get(e);void 0===l&&(l=Sn(),this.gi.set(e,l)),this.gi.set(e,l.add(r.key))}}class uk{constructor(){this.yi=new he(as.pi),this.Ii=new he(as.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const r=new as(t,e);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Ai(new as(t,e))}Ri(t,e){t.forEach(r=>this.removeReference(r,e))}Pi(t){const e=new lt(new kn([])),r=new as(e,t),i=new as(e,t+1),l=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new lt(new kn([])),r=new as(e,t),i=new as(e,t+1);let l=Sn();return this.Ii.forEachInRange([r,i],d=>{l=l.add(d.key)}),l}containsKey(t){const e=new as(t,0),r=this.yi.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class as{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return lt.comparator(t.key,e.key)||on(t.vi,e.vi)}static Ti(t,e){return on(t.vi,e.vi)||lt.comparator(t.key,e.key)}}class X8{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new he(as.pi)}checkEmpty(t){return je.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const l=this.Si;this.Si++;const d=new ZR(l,e,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new as(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return je.resolve(d)}lookupMutationBatch(t,e){return je.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.xi(e+1),l=i<0?0:i;return je.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return je.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new as(e,0),i=new as(e,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);l.push(f)}),je.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new he(on);return e.forEach(i=>{const l=new as(i,0),d=new as(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],f=>{r=r.add(f.vi)})}),je.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let l=r;lt.isDocumentKey(l)||(l=l.child(""));const d=new as(new lt(l),0);let f=new he(on);return this.Di.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(m.vi)),!0)},d),je.resolve(this.Ni(f))}Ni(t){const e=[];return t.forEach(r=>{const i=this.Ci(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Wt(0===this.ki(e.batchId,"removed")),this.Bs.shift();let r=this.Di;return je.forEach(e.mutations,i=>{const l=new as(i.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,e){const r=new as(e,0),i=this.Di.firstAfterOrEqual(r);return je.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return je.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class e6{constructor(t){this.Mi=t,this.docs=new j(lt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),l=i?i.size:0,d=this.Mi(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return je.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(e))}getEntries(t,e){let r=He();return e.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():hr.newInvalidDocument(i))}),je.resolve(r)}getAllFromCollection(t,e,r){let i=He();const l=new lt(e.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!e.isPrefixOf(f.path))break;f.path.length>e.length+1||vI(NR(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return je.resolve(i)}getAllFromCollectionGroup(t,e,r,i){bt()}Oi(t,e){return je.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new t6(this)}getSize(t){return je.resolve(this.size)}}class t6 extends GF{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),je.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class n6{constructor(t){this.persistence=t,this.Fi=new R(e=>ch(e),Pm),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new uk,this.targetCount=0,this.Li=jm.gn()}forEachTarget(t,e){return this.Fi.forEach((r,i)=>e(i)),je.resolve()}getLastRemoteSnapshotVersion(t){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return je.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$i&&(this.$i=e),je.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new jm(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,je.resolve()}updateTargetData(t,e){return this.Tn(e),je.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,je.resolve()}removeTargets(t,e,r){let i=0;const l=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=e&&null===r.get(f.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),i++)}),je.waitFor(l).next(()=>i)}getTargetCount(t){return je.resolve(this.targetCount)}getTargetData(t,e){const r=this.Fi.get(e)||null;return je.resolve(r)}addMatchingKeys(t,e,r){return this.Bi.Ei(e,r),je.resolve()}removeMatchingKeys(t,e,r){this.Bi.Ri(e,r);const i=this.persistence.referenceDelegate,l=[];return i&&e.forEach(d=>{l.push(i.markPotentiallyOrphaned(t,d))}),je.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),je.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Bi.Vi(e);return je.resolve(r)}containsKey(t,e){return je.resolve(this.Bi.containsKey(e))}}class r6{constructor(t,e){this.Ui={},this.overlays={},this.es=new lo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new n6(this),this.indexManager=new P8,this.ds=new e6(r=>this.referenceDelegate.qi(r)),this.M=new SF(e),this._s=new Q8(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new J8,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Ui[t.toKey()];return r||(r=new X8(e,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){nt("MemoryPersistence","Starting transaction:",t);const i=new i6(this.es.next());return this.referenceDelegate.Ki(),r(i).next(l=>this.referenceDelegate.Gi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Qi(t,e){return je.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,e)))}}class i6 extends TF{constructor(t){super(),this.currentSequenceNumber=t}}class dk{constructor(t){this.persistence=t,this.ji=new uk,this.Wi=null}static zi(t){return new dk(t)}get Hi(){if(this.Wi)return this.Wi;throw bt()}addReference(t,e,r){return this.ji.addReference(r,e),this.Hi.delete(r.toString()),je.resolve()}removeReference(t,e,r){return this.ji.removeReference(r,e),this.Hi.add(r.toString()),je.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),je.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.Hi,r=>{const i=lt.fromPath(r);return this.Ji(t,i).next(l=>{l||e.removeEntry(i,Bt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(r=>{r?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return je.or([()=>je.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function rL(n,t){return`firestore_clients_${n}_${t}`}function iL(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function hk(n,t){return`firestore_targets_${n}_${t}`}class HI{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Yi(t,e,r){const i=JSON.parse(r);let l,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(l=new Ye(i.error.code,i.error.message))),d?new HI(t,e,i.state,l):(Kr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class wC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Yi(t,e){const r=JSON.parse(e);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Ye(r.error.code,r.error.message))),l?new wC(t,r.state,i):(Kr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class $I{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=ac();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=pI(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return i?new $I(t,l):(Kr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class fk{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new fk(e.clientId,e.onlineState):(Kr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class pk{constructor(){this.activeTargetIds=ac()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class gk{constructor(t,e,r,i,l){this.window=t,this.Yn=e,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new j(on),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=rL(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new pk),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,$e.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.er)continue;const l=t.getItem(rL(t.persistenceKey,i));if(l){const d=$I.Yi(i,l);d&&(t.ir=t.ir.insert(d.clientId,d))}}t.wr();const r=t.storage.getItem(t.dr);if(r){const i=t.mr(r);i&&t.gr(i)}for(const i of t.rr)t.sr(i);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,r){this.pr(t,e,r),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(hk(this.persistenceKey,t));if(r){const i=wC.Yi(t,r);i&&(e=i.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(hk(this.persistenceKey,t))}updateQueryState(t,e,r){this.Er(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ir(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return nt("SharedClientState","READ",t,e),e}setItem(t,e){nt("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){nt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const r=t;if(r.storageArea===this.storage){if(nt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,$e.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Pr(r.key);return e.br(i,null)}{const i=e.Vr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Sr(i)}}else if(e.lr.test(r.key)){if(null!==r.newValue){const i=e.Dr(r.key,r.newValue);if(i)return e.Cr(i)}}else if(r.key===e.dr){if(null!==r.newValue){const i=e.mr(r.newValue);if(i)return e.gr(i)}}else if(r.key===e.ar){const i=function(l){let d=lo.A;if(null!=l)try{const f=JSON.parse(l);Wt("number"==typeof f),d=f}catch(f){Kr("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==lo.A&&e.sequenceNumberHandler(i)}else if(r.key===e._r){const i=e.Nr(r.newValue);yield Promise.all(i.map(l=>e.syncEngine.kr(l)))}}else e.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,r){const i=new HI(this.currentUser,t,e,r),l=iL(this.persistenceKey,this.currentUser,t);this.setItem(l,i.Xi())}Ir(t){const e=iL(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,r){const i=hk(this.persistenceKey,t),l=new wC(t,e,r);this.setItem(i,l.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const r=this.Pr(t);return $I.Yi(r,e)}vr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return HI.Yi(new is(void 0!==r[2]?r[2]:null),i,e)}Dr(t,e){const r=this.lr.exec(t),i=Number(r[1]);return wC.Yi(i,e)}mr(t){return fk.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,$e.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);nt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const r=e?this.ir.insert(t,e):this.ir.remove(t),i=this.yr(this.ir),l=this.yr(r),d=[],f=[];return l.forEach(m=>{i.has(m)||d.push(m)}),i.forEach(m=>{l.has(m)||f.push(m)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=ac();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class sL{constructor(){this.$r=new pk,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,r){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new pk,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class s6{Lr(t){}shutdown(){}}class oL{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const o6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class a6{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class l6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,r,i,l){const d=this.uo(t,e);nt("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,l),this.co(t,d,f,r).then(m=>(nt("RestConnection","Received: ",m),m),m=>{throw Wf("RestConnection",`${t} failed with error: `,m,"url: ",d,"request:",r),m})}ho(t,e,r,i,l){return this.oo(t,e,r,i,l)}ao(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+Cm,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,l)=>t[l]=i),r&&r.headers.forEach((i,l)=>t[l]=i)}uo(t,e){return`${this.io}/v1/${e}:${o6[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((l,d)=>{const f=new bR;f.listenOnce(lI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case aI.NO_ERROR:const b=f.getResponseJson();nt("Connection","XHR received:",JSON.stringify(b)),l(b);break;case aI.TIMEOUT:nt("Connection",'RPC "'+t+'" timed out'),d(new Ye(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case aI.HTTP_ERROR:const x=f.getStatus();if(nt("Connection",'RPC "'+t+'" failed with status:',x,"response text:",f.getResponseText()),x>0){const I=f.getResponseJson().error;if(I&&I.status&&I.message){const B=function(Z){const ne=Z.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(ne)>=0?ne:Pe.UNKNOWN}(I.status);d(new Ye(B,I.message))}else d(new Ye(Pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Ye(Pe.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{nt("Connection",'RPC "'+t+'" completed.')}});const m=JSON.stringify(i);f.send(e,"POST",m,r,15)})}lo(t,e,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=J2(),d=X2(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new vR({})),this.ao(f.initMessageHeaders,e,r),(0,Y.uI)()||(0,Y.b$)()||(0,Y.d)()||(0,Y.w1)()||(0,Y.Mn)()||(0,Y.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");nt("Connection","Creating WebChannel: "+m,f);const b=l.createWebChannel(m,f);let x=!1,I=!1;const B=new a6({Wr:ne=>{I?nt("Connection","Not sending because WebChannel is closed:",ne):(x||(nt("Connection","Opening WebChannel transport."),b.open(),x=!0),nt("Connection","WebChannel sending:",ne),b.send(ne))},zr:()=>b.close()}),Z=(ne,we,Be)=>{ne.listen(we,tt=>{try{Be(tt)}catch(st){setTimeout(()=>{throw st},0)}})};return Z(b,ky.EventType.OPEN,()=>{I||nt("Connection","WebChannel transport opened.")}),Z(b,ky.EventType.CLOSE,()=>{I||(I=!0,nt("Connection","WebChannel transport closed"),B.no())}),Z(b,ky.EventType.ERROR,ne=>{I||(I=!0,Wf("Connection","WebChannel transport errored:",ne),B.no(new Ye(Pe.UNAVAILABLE,"The operation could not be completed")))}),Z(b,ky.EventType.MESSAGE,ne=>{var we;if(!I){const Be=ne.data[0];Wt(!!Be);const tt=Be,st=tt.error||(null===(we=tt[0])||void 0===we?void 0:we.error);if(st){nt("Connection","WebChannel received error:",st);const gt=st.status;let _t=function(wn){const Jr=_[wn];if(void 0!==Jr)return T(Jr)}(gt),jt=st.message;void 0===_t&&(_t=Pe.INTERNAL,jt="Unknown error status: "+gt+" with message "+st.message),I=!0,B.no(new Ye(_t,jt)),b.close()}else nt("Connection","WebChannel received:",Be),B.so(Be)}}),Z(d,cI.STAT_EVENT,ne=>{ne.stat===uI.PROXY?nt("Connection","Detected buffering proxy"):ne.stat===uI.NOPROXY&&nt("Connection","Detected no buffering proxy")}),setTimeout(()=>{B.eo()},0),B}}function aL(){return"undefined"!=typeof window?window:null}function jI(){return"undefined"!=typeof document?document:null}function CC(n){return new K4(n,!0)}class mk{constructor(t,e,r=1e3,i=1.5,l=6e4){this.Yn=t,this.timerId=e,this.fo=r,this._o=i,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,e-r);i>0&&nt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class lL{constructor(t,e,r,i,l,d,f,m){this.Yn=t,this.Ro=r,this.Po=i,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new mk(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,$e.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,$e.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var r=this;return(0,$e.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==t?r.Do.reset():e&&e.code===Pe.RESOURCE_EXHAUSTED?(Kr(e.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):e&&e.code===Pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===e&&this.qo(r,i)},r=>{t(()=>{const i=new Ye(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,e){const r=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var t=this;this.state=5,this.Do.To((0,$e.Z)(function*(){t.state=0,t.start()}))}Ko(t){return nt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():(nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c6 extends lL{constructor(t,e,r,i,l,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,d),this.M=l}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(m=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:bt(),i=t.targetChange.targetIds||[],l=function(m,b){return m.N?(Wt(void 0===b||"string"==typeof b),Ri.fromBase64String(b||"")):(Wt(void 0===b||b instanceof Uint8Array),Ri.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),d=t.targetChange.cause,f=d&&function(m){const b=void 0===m.code?Pe.UNKNOWN:T(m.code);return new Ye(b,m.message||"")}(d);e=new Wy(r,i,l,f||null)}else if("documentChange"in t){const r=t.documentChange,i=wu(n,r.document.name),l=ss(r.document.updateTime),d=new zi({mapValue:{fields:r.document.fields}}),f=hr.newFoundDocument(i,l,d);e=new ap(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const r=t.documentDelete,i=wu(n,r.document),l=r.readTime?ss(r.readTime):Bt.min(),d=hr.newNoDocument(i,l);e=new ap([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){const r=t.documentRemove,i=wu(n,r.document);e=new ap([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return bt();{const r=t.filter,l=new p(r.count||0);e=new Gy(r.targetId,l)}}var m;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return Bt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Bt.min():l.readTime?ss(l.readTime):Bt.min()}(t);return this.listener.Qo(e,r)}jo(t){const e={};e.database=hC(this.M),e.addTarget=function(i,l){let d;const f=l.target;return d=ki(f)?{documents:gF(i,f)}:{query:mF(i,f)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=cF(i,l.resumeToken):l.snapshotVersion.compareTo(Bt.min())>0&&(d.readTime=uC(i,l.snapshotVersion.toTimestamp())),d}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bt()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Fo(e)}Wo(t){const e={};e.database=hC(this.M),e.removeTarget=t,this.Fo(e)}}class u6 extends lL{constructor(t,e,r,i,l,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(Wt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(n,t){return n&&n.length>0?(Wt(void 0!==t),n.map(e=>function(r,i){let l=ss(r.updateTime?r.updateTime:i);return l.isEqual(Bt.min())&&(l=ss(i)),new BR(l,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=ss(t.commitTime);return this.listener.Yo(r,e)}return Wt(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=hC(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>fC(this.M,r))};this.Fo(e)}}class d6 extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Ye(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.oo(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Pe.UNKNOWN,i.toString())})}ho(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ho(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Pe.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class h6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Kr(e),this.iu=!1):nt("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class f6{constructor(t,e,r,i,l){var d=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(f=>{r.enqueueAndForget((0,$e.Z)(function*(){var m;hp(d)&&(nt("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,$e.Z)(function*(b){const x=dt(b);x.fu.add(4),yield tv(x),x.wu.set("Unknown"),x.fu.delete(4),yield EC(x)}),function(b){return m.apply(this,arguments)})(d))}))}),this.wu=new h6(r,i)}}function EC(n){return _k.apply(this,arguments)}function _k(){return(_k=(0,$e.Z)(function*(n){if(hp(n))for(const t of n.du)yield t(!0)})).apply(this,arguments)}function tv(n){return yk.apply(this,arguments)}function yk(){return(yk=(0,$e.Z)(function*(n){for(const t of n.du)yield t(!1)})).apply(this,arguments)}function GI(n,t){const e=dt(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),wk(e)?bk(e):rv(e).xo()&&vk(e,t))}function xC(n,t){const e=dt(n),r=rv(e);e.lu.delete(t),r.xo()&&cL(e,t),0===e.lu.size&&(r.xo()?r.Mo():hp(e)&&e.wu.set("Unknown"))}function vk(n,t){n.mu.Z(t.targetId),rv(n).jo(t)}function cL(n,t){n.mu.Z(t),rv(n).Wo(t)}function bk(n){n.mu=new Z4({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),rv(n).start(),n.wu.ru()}function wk(n){return hp(n)&&!rv(n).Co()&&n.lu.size>0}function hp(n){return 0===dt(n).fu.size}function uL(n){n.mu=void 0}function p6(n){return Ck.apply(this,arguments)}function Ck(){return(Ck=(0,$e.Z)(function*(n){n.lu.forEach((t,e)=>{vk(n,t)})})).apply(this,arguments)}function g6(n,t){return Ek.apply(this,arguments)}function Ek(){return(Ek=(0,$e.Z)(function*(n,t){uL(n),wk(n)?(n.wu.au(t),bk(n)):n.wu.set("Unknown")})).apply(this,arguments)}function m6(n,t,e){return xk.apply(this,arguments)}function xk(){return(xk=(0,$e.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof Wy&&2===t.state&&t.cause)try{yield(r=(0,$e.Z)(function*(i,l){const d=l.cause;for(const f of l.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,t)}catch(r){nt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield WI(n,r)}else if(t instanceof ap?n.mu.ut(t):t instanceof Gy?n.mu._t(t):n.mu.ht(t),!e.isEqual(Bt.min()))try{const r=yield JF(n.localStore);e.compareTo(r)>=0&&(yield function(i,l){const d=i.mu.yt(l);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(m);b&&i.lu.set(m,b.withResumeToken(f.resumeToken,l))}}),d.targetMismatches.forEach(f=>{const m=i.lu.get(f);if(!m)return;i.lu.set(f,m.withResumeToken(Ri.EMPTY_BYTE_STRING,m.snapshotVersion)),cL(i,f);const b=new lp(m.target,f,1,m.sequenceNumber);vk(i,b)}),i.remoteSyncer.applyRemoteEvent(d)}(n,e))}catch(r){nt("RemoteStore","Failed to raise snapshot:",r),yield WI(n,r)}var r})).apply(this,arguments)}function WI(n,t,e){return Dk.apply(this,arguments)}function Dk(){return(Dk=(0,$e.Z)(function*(n,t,e){if(!Lm(t))throw t;n.fu.add(1),yield tv(n),n.wu.set("Offline"),e||(e=()=>JF(n.localStore)),n.asyncQueue.enqueueRetryable((0,$e.Z)(function*(){nt("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield EC(n)}))})).apply(this,arguments)}function dL(n,t){return t().catch(e=>WI(n,e,t))}function nv(n){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,$e.Z)(function*(n){const t=dt(n),e=fp(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;_6(t);)try{const i=yield z8(t.localStore,r);if(null===i){0===t.hu.length&&e.Mo();break}r=i.batchId,y6(t,i)}catch(i){yield WI(t,i)}hL(t)&&fL(t)})).apply(this,arguments)}function _6(n){return hp(n)&&n.hu.length<10}function y6(n,t){n.hu.push(t);const e=fp(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function hL(n){return hp(n)&&!fp(n).Co()&&n.hu.length>0}function fL(n){fp(n).start()}function v6(n){return Ik.apply(this,arguments)}function Ik(){return(Ik=(0,$e.Z)(function*(n){fp(n).Zo()})).apply(this,arguments)}function b6(n){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,$e.Z)(function*(n){const t=fp(n);for(const e of n.hu)t.Jo(e.mutations)})).apply(this,arguments)}function w6(n,t,e){return Sk.apply(this,arguments)}function Sk(){return(Sk=(0,$e.Z)(function*(n,t,e){const r=n.hu.shift(),i=zR.from(r,t,e);yield dL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield nv(n)})).apply(this,arguments)}function C6(n,t){return Nk.apply(this,arguments)}function Nk(){return(Nk=(0,$e.Z)(function*(n,t){var e;t&&fp(n).Ho&&(yield(e=(0,$e.Z)(function*(r,i){if(C(l=i.code)&&l!==Pe.ABORTED){const d=r.hu.shift();fp(r).ko(),yield dL(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield nv(r)}var l}),function(r,i){return e.apply(this,arguments)})(n,t)),hL(n)&&fL(n)})).apply(this,arguments)}function pL(n,t){return Mk.apply(this,arguments)}function Mk(){return(Mk=(0,$e.Z)(function*(n,t){const e=dt(n);e.asyncQueue.verifyOperationInProgress(),nt("RemoteStore","RemoteStore received new credentials");const r=hp(e);e.fu.add(3),yield tv(e),r&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield EC(e)})).apply(this,arguments)}function Rk(n,t){return kk.apply(this,arguments)}function kk(){return(kk=(0,$e.Z)(function*(n,t){const e=dt(n);t?(e.fu.delete(2),yield EC(e)):t||(e.fu.add(2),yield tv(e),e.wu.set("Unknown"))})).apply(this,arguments)}function rv(n){return n.gu||(n.gu=function(t,e,r){const i=dt(t);return i.eu(),new c6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:p6.bind(null,n),Yr:g6.bind(null,n),Qo:m6.bind(null,n)}),n.du.push(function(){var t=(0,$e.Z)(function*(e){e?(n.gu.ko(),wk(n)?bk(n):n.wu.set("Unknown")):(yield n.gu.stop(),uL(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function fp(n){return n.yu||(n.yu=function(t,e,r){const i=dt(t);return i.eu(),new u6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:v6.bind(null,n),Yr:C6.bind(null,n),Xo:b6.bind(null,n),Yo:w6.bind(null,n)}),n.du.push(function(){var t=(0,$e.Z)(function*(e){e?(n.yu.ko(),yield nv(n)):(yield n.yu.stop(),n.hu.length>0&&(nt("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class Pk{constructor(t,e,r,i,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(t,e,r,i,l){const d=Date.now()+r,f=new Pk(t,e,d,i,l);return f.start(r),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ye(Pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iv(n,t){if(Kr("AsyncQueue",`${t}: ${n}`),Lm(n))return new Ye(Pe.UNAVAILABLE,`${t}: ${n}`);throw n}class sv{constructor(t){this.comparator=t?(e,r)=>t(e,r)||lt.comparator(e.key,r.key):(e,r)=>lt.comparator(e.key,r.key),this.keyedMap=Ft(),this.sortedSet=new j(this.comparator)}static emptySet(t){return new sv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof sv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new sv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class gL{constructor(){this.pu=new j(lt.comparator)}track(t){const e=t.doc.key,r=this.pu.get(e);r?0!==t.type&&3===r.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==r.type?this.pu=this.pu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.pu=this.pu.remove(e):1===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):bt():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,r)=>{t.push(r)}),t}}class ov{constructor(t,e,r,i,l,d,f,m){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(t,e,r,i){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new ov(t,e,sv.emptySet(e),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&co(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class E6{constructor(){this.Tu=void 0,this.listeners=[]}}class x6{constructor(){this.queries=new R(t=>tp(t),co),this.onlineState="Unknown",this.Eu=new Set}}function Ok(n,t){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,$e.Z)(function*(n,t){const e=dt(n),r=t.query;let i=!1,l=e.queries.get(r);if(l||(i=!0,l=new E6),i)try{l.Tu=yield e.onListen(r)}catch(d){const f=iv(d,`Initialization of query '${yu(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,l),l.listeners.push(t),t.Au(e.onlineState),l.Tu&&t.Ru(l.Tu)&&Bk(e)})).apply(this,arguments)}function Lk(n,t){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,$e.Z)(function*(n,t){const e=dt(n),r=t.query;let i=!1;const l=e.queries.get(r);if(l){const d=l.listeners.indexOf(t);d>=0&&(l.listeners.splice(d,1),i=0===l.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function D6(n,t){const e=dt(n);let r=!1;for(const i of t){const d=e.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&Bk(e)}function T6(n,t,e){const r=dt(n),i=r.queries.get(t);if(i)for(const l of i.listeners)l.onError(e);r.queries.delete(t)}function Bk(n){n.Eu.forEach(t=>{t.next()})}class Uk{constructor(t,e,r){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new ov(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=ov.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class I6{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class mL{constructor(t){this.M=t}fi(t){return wu(this.M,t)}di(t){return t.metadata.exists?pF(this.M,t.document,!1):hr.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return ss(t)}}class A6{constructor(t,e,r){this.Nu=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_L(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=kn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,r=new mL(this.M);for(const i of t)if(i.metadata.queries){const l=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(e.get(d)||Sn()).add(l);e.set(d,f)}}return e}complete(){var t=this;return(0,$e.Z)(function*(){const e=yield function(n,t,e,r){return lk.apply(this,arguments)}(t.localStore,new mL(t.M),t.documents,t.Nu.id),r=t.Mu(t.documents);for(const i of t.queries)yield K8(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function _L(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yL{constructor(t){this.key=t}}class vL{constructor(t){this.key=t}}class bL{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=Sn(),this.mutatedKeys=Sn(),this.Uu=TI(t),this.qu=new sv(this.Uu)}get Ku(){return this.$u}Gu(t,e){const r=e?e.Qu:new gL,i=e?e.qu:this.qu;let l=e?e.mutatedKeys:this.mutatedKeys,d=i,f=!1;const m=By(this.query)&&i.size===this.query.limit?i.last():null,b=Xf(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((x,I)=>{const B=i.get(x),Z=np(this.query,I)?I:null,ne=!!B&&this.mutatedKeys.has(B.key),we=!!Z&&(Z.hasLocalMutations||this.mutatedKeys.has(Z.key)&&Z.hasCommittedMutations);let Be=!1;B&&Z?B.data.isEqual(Z.data)?ne!==we&&(r.track({type:3,doc:Z}),Be=!0):this.ju(B,Z)||(r.track({type:2,doc:Z}),Be=!0,(m&&this.Uu(Z,m)>0||b&&this.Uu(Z,b)<0)&&(f=!0)):!B&&Z?(r.track({type:0,doc:Z}),Be=!0):B&&!Z&&(r.track({type:1,doc:B}),Be=!0,(m||b)&&(f=!0)),Be&&(Z?(d=d.add(Z),l=we?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))}),By(this.query)||Xf(this.query))for(;d.size>this.query.limit;){const x=By(this.query)?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{qu:d,Qu:r,ni:f,mutatedKeys:l}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const l=t.Qu.Iu();l.sort((b,x)=>function(I,B){const Z=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return Z(I)-Z(B)}(b.type,x.type)||this.Uu(b.doc,x.doc)),this.Wu(r);const d=e?this.zu():[],f=0===this.Lu.size&&this.current?1:0,m=f!==this.Bu;return this.Bu=f,0!==l.length||m?{snapshot:new ov(this.query,t.qu,i,l,t.mutatedKeys,0===f,m,!1),Hu:d}:{Hu:d}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new gL,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=Sn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const e=[];return t.forEach(r=>{this.Lu.has(r)||e.push(new vL(r))}),this.Lu.forEach(r=>{t.has(r)||e.push(new yL(r))}),e}Yu(t){this.$u=t.li,this.Lu=Sn();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return ov.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class S6{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class N6{constructor(t){this.key=t,this.Zu=!1}}class M6{constructor(t,e,r,i,l,d){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new R(f=>tp(f),co),this.na=new Map,this.sa=new Set,this.ia=new j(lt.comparator),this.ra=new Map,this.oa=new uk,this.ua={},this.aa=new Map,this.ca=jm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function R6(n,t){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,$e.Z)(function*(n,t){const e=uP(n);let r,i;const l=e.ea.get(t);if(l)r=l.targetId,e.sharedClientState.addLocalQueryTarget(r),i=l.view.Xu();else{const d=yield Xy(e.localStore,Ho(t));e.isPrimaryClient&&GI(e.remoteStore,d);const f=e.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield $k(e,t,r,"current"===f)}return i})).apply(this,arguments)}function $k(n,t,e,r){return jk.apply(this,arguments)}function jk(){return(jk=(0,$e.Z)(function*(n,t,e,r){n.la=(x,I,B)=>{return(Z=(0,$e.Z)(function*(ne,we,Be,tt){let st=we.view.Gu(Be);st.ni&&(st=yield UI(ne.localStore,we.query,!1).then(({documents:jt})=>we.view.Gu(jt,st)));const gt=tt&&tt.targetChanges.get(we.targetId),_t=we.view.applyChanges(st,ne.isPrimaryClient,gt);return Xk(ne,we.targetId,_t.Hu),_t.snapshot}),function(ne,we,Be,tt){return Z.apply(this,arguments)})(n,x,I,B);var Z};const i=yield UI(n.localStore,t,!0),l=new bL(t,i.li),d=l.Gu(i.documents),f=dh.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),m=l.applyChanges(d,n.isPrimaryClient,f);Xk(n,e,m.Hu);const b=new S6(t,e,l);return n.ea.set(t,b),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),m.snapshot})).apply(this,arguments)}function k6(n,t){return Gk.apply(this,arguments)}function Gk(){return(Gk=(0,$e.Z)(function*(n,t){const e=dt(n),r=e.ea.get(t),i=e.na.get(r.targetId);if(i.length>1)return e.na.set(r.targetId,i.filter(l=>!co(l,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ev(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),xC(e.remoteStore,r.targetId),av(e,r.targetId)}).catch(Gm))):(av(e,r.targetId),yield ev(e.localStore,r.targetId,!0))})).apply(this,arguments)}function Wk(){return(Wk=(0,$e.Z)(function*(n,t,e){const r=dP(n);try{const i=yield function(l,d){const f=dt(l),m=si.now(),b=d.reduce((I,B)=>I.add(B.key),Sn());let x;return f.persistence.runTransaction("Locally write mutations","readwrite",I=>f.ci.Ks(I,b).next(B=>{x=B;const Z=[];for(const ne of d){const we=UR(ne,x.get(ne.key));null!=we&&Z.push(new sp(ne.key,we,Xw(we.value.mapValue),ai.exists(!0)))}return f.Bs.addMutationBatch(I,m,Z,d)})).then(I=>(I.applyToLocalDocumentSet(x),{batchId:I.batchId,changes:x}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,f){let m=l.ua[l.currentUser.toKey()];m||(m=new j(on)),m=m.insert(d,f),l.ua[l.currentUser.toKey()]=m}(r,i.batchId,e),yield hh(r,i.changes),yield nv(r.remoteStore)}catch(i){const l=iv(i,"Failed to persist write");e.reject(l)}})).apply(this,arguments)}function wL(n,t){return qk.apply(this,arguments)}function qk(){return(qk=(0,$e.Z)(function*(n,t){const e=dt(n);try{const r=yield Z8(e.localStore,t);t.targetChanges.forEach((i,l)=>{const d=e.ra.get(l);d&&(Wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?Wt(d.Zu):i.removedDocuments.size>0&&(Wt(d.Zu),d.Zu=!1))}),yield hh(e,r,t)}catch(r){yield Gm(r)}})).apply(this,arguments)}function CL(n,t,e){const r=dt(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ea.forEach((l,d)=>{const f=d.view.Au(t);f.snapshot&&i.push(f.snapshot)}),function(l,d){const f=dt(l);f.onlineState=d;let m=!1;f.queries.forEach((b,x)=>{for(const I of x.listeners)I.Au(d)&&(m=!0)}),m&&Bk(f)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function O6(n,t,e){return Zk.apply(this,arguments)}function Zk(){return(Zk=(0,$e.Z)(function*(n,t,e){const r=dt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ra.get(t),l=i&&i.key;if(l){let d=new j(lt.comparator);d=d.insert(l,hr.newNoDocument(l,Bt.min()));const f=Sn().add(l),m=new ll(Bt.min(),new Map,new he(on),d,f);yield wL(r,m),r.ia=r.ia.remove(l),r.ra.delete(t),eP(r)}else yield ev(r.localStore,t,!1).then(()=>av(r,t,e)).catch(Gm)})).apply(this,arguments)}function F6(n,t){return zk.apply(this,arguments)}function zk(){return(zk=(0,$e.Z)(function*(n,t){const e=dt(n),r=t.batch.batchId;try{const i=yield q8(e.localStore,t);Jk(e,r,null),Qk(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield hh(e,i)}catch(i){yield Gm(i)}})).apply(this,arguments)}function L6(n,t,e){return Yk.apply(this,arguments)}function Yk(){return(Yk=(0,$e.Z)(function*(n,t,e){const r=dt(n);try{const i=yield function(l,d){const f=dt(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return f.Bs.lookupMutationBatch(m,d).next(x=>(Wt(null!==x),b=x.keys(),f.Bs.removeMutationBatch(m,x))).next(()=>f.Bs.performConsistencyCheck(m)).next(()=>f.ci.Ks(m,b))})}(r.localStore,t);Jk(r,t,e),Qk(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield hh(r,i)}catch(i){yield Gm(i)}})).apply(this,arguments)}function Kk(){return(Kk=(0,$e.Z)(function*(n,t){const e=dt(n);hp(e.remoteStore)||nt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=dt(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===r)return void t.resolve();const i=e.aa.get(r)||[];i.push(t),e.aa.set(r,i)}catch(r){const i=iv(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})).apply(this,arguments)}function Qk(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function Jk(n,t,e){const r=dt(n);let i=r.ua[r.currentUser.toKey()];if(i){const l=i.get(t);l&&(e?l.reject(e):l.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function av(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),e&&n.ta.fa(r,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||EL(n,r)})}function EL(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(xC(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),eP(n))}function Xk(n,t,e){for(const r of e)r instanceof yL?(n.oa.addReference(r.key,t),B6(n,r)):r instanceof vL?(nt("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||EL(n,r.key)):bt()}function B6(n,t){const e=t.key,r=e.path.canonicalString();n.ia.get(e)||n.sa.has(r)||(nt("SyncEngine","New document in limbo: "+e),n.sa.add(r),eP(n))}function eP(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new lt(kn.fromString(t)),r=n.ca.next();n.ra.set(r,new N6(e)),n.ia=n.ia.insert(e,r),GI(n.remoteStore,new lp(Ho(Jf(e.path)),r,2,lo.A))}}function hh(n,t,e){return tP.apply(this,arguments)}function tP(){return(tP=(0,$e.Z)(function*(n,t,e){const r=dt(n),i=[],l=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,m)=>{d.push(r.la(m,t,e).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b.fromCache?"not-current":"current"),i.push(b);const x=sk.Ys(m.targetId,b);l.push(x)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,$e.Z)(function*(m,b){const x=dt(m);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>je.forEach(b,B=>je.forEach(B.Hs,Z=>x.persistence.referenceDelegate.addReference(I,B.targetId,Z)).next(()=>je.forEach(B.Js,Z=>x.persistence.referenceDelegate.removeReference(I,B.targetId,Z)))))}catch(I){if(!Lm(I))throw I;nt("LocalStore","Failed to update sequence numbers: "+I)}for(const I of b){const B=I.targetId;if(!I.fromCache){const Z=x.ii.get(B),we=Z.withLastLimboFreeSnapshotVersion(Z.snapshotVersion);x.ii=x.ii.insert(B,we)}}}),function(m,b){return f.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function U6(n,t){return nP.apply(this,arguments)}function nP(){return(nP=(0,$e.Z)(function*(n,t){const e=dt(n);if(!e.currentUser.isEqual(t)){nt("SyncEngine","User change. New user:",t.toKey());const r=yield QF(e.localStore,t);e.currentUser=t,(i=e).aa.forEach(d=>{d.forEach(f=>{f.reject(new Ye(Pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield hh(e,r.hi)}var i})).apply(this,arguments)}function H6(n,t){const e=dt(n),r=e.ra.get(t);if(r&&r.Zu)return Sn().add(r.key);{let i=Sn();const l=e.na.get(t);if(!l)return i;for(const d of l){const f=e.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function $6(n,t){return rP.apply(this,arguments)}function rP(){return(rP=(0,$e.Z)(function*(n,t){const e=dt(n),r=yield UI(e.localStore,t.query,!0),i=t.view.Yu(r);return e.isPrimaryClient&&Xk(e,t.targetId,i.Hu),i})).apply(this,arguments)}function j6(n,t){return iP.apply(this,arguments)}function iP(){return(iP=(0,$e.Z)(function*(n,t){const e=dt(n);return tL(e.localStore,t).then(r=>hh(e,r))})).apply(this,arguments)}function G6(n,t,e,r){return sP.apply(this,arguments)}function sP(){return(sP=(0,$e.Z)(function*(n,t,e,r){const i=dt(n),l=yield function(d,f){const m=dt(d),b=dt(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",x=>b.fn(x,f).next(I=>I?m.ci.Ks(x,I):je.resolve(null)))}(i.localStore,t);var f;null!==l?("pending"===e?yield nv(i.remoteStore):"acknowledged"===e||"rejected"===e?(Jk(i,t,r||null),Qk(i,t),f=t,dt(dt(i.localStore).Bs)._n(f)):bt(),yield hh(i,l)):nt("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function oP(){return(oP=(0,$e.Z)(function*(n,t){const e=dt(n);if(uP(e),dP(e),!0===t&&!0!==e.ha){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield xL(e,r.toArray());e.ha=!0,yield Rk(e.remoteStore,!0);for(const l of i)GI(e.remoteStore,l)}else if(!1===t&&!1!==e.ha){const r=[];let i=Promise.resolve();e.na.forEach((l,d)=>{e.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(av(e,d),ev(e.localStore,d,!0))),xC(e.remoteStore,d)}),yield i,yield xL(e,r),function(l){const d=dt(l);d.ra.forEach((f,m)=>{xC(d.remoteStore,m)}),d.oa.bi(),d.ra=new Map,d.ia=new j(lt.comparator)}(e),e.ha=!1,yield Rk(e.remoteStore,!1)}})).apply(this,arguments)}function xL(n,t,e){return aP.apply(this,arguments)}function aP(){return(aP=(0,$e.Z)(function*(n,t,e){const r=dt(n),i=[],l=[];for(const d of t){let f;const m=r.na.get(d);if(m&&0!==m.length){f=yield Xy(r.localStore,Ho(m[0]));for(const b of m){const x=r.ea.get(b),I=yield $6(r,x);I.snapshot&&l.push(I.snapshot)}}else{const b=yield eL(r.localStore,d);f=yield Xy(r.localStore,b),yield $k(r,DL(b),d,!1)}i.push(f)}return r.ta.Qo(l),i})).apply(this,arguments)}function DL(n){return xI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function q6(n){const t=dt(n);return dt(dt(t.localStore).persistence).Fs()}function Z6(n,t,e,r){return lP.apply(this,arguments)}function lP(){return(lP=(0,$e.Z)(function*(n,t,e,r){const i=dt(n);if(i.ha)return void nt("SyncEngine","Ignoring unexpected query state notification.");const l=i.na.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const d=yield tL(i.localStore,uh(l[0])),f=ll.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield hh(i,d,f);break}case"rejected":yield ev(i.localStore,t,!0),av(i,t,r);break;default:bt()}})).apply(this,arguments)}function z6(n,t,e){return cP.apply(this,arguments)}function cP(){return(cP=(0,$e.Z)(function*(n,t,e){const r=uP(n);if(r.ha){for(const i of t){if(r.na.has(i)){nt("SyncEngine","Adding an already active target "+i);continue}const l=yield eL(r.localStore,i),d=yield Xy(r.localStore,l);yield $k(r,DL(l),d.targetId,!1),GI(r.remoteStore,d)}for(const i of e)r.na.has(i)&&(yield ev(r.localStore,i,!1).then(()=>{xC(r.remoteStore,i),av(r,i)}).catch(Gm))}})).apply(this,arguments)}function uP(n){const t=dt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=wL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=H6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=O6.bind(null,t),t.ta.Qo=D6.bind(null,t.eventManager),t.ta.fa=T6.bind(null,t.eventManager),t}function dP(n){const t=dt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=F6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=L6.bind(null,t),t}class TL{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,$e.Z)(function*(){e.M=CC(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return KF(this.persistence,new YF,t.initialUser,this.M)}wa(t){return new r6(dk.zi,this.M)}_a(t){return new sL}terminate(){var t=this;return(0,$e.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class IL extends TL{constructor(t,e,r){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,$e.Z)(function*(){yield e().call(r,t),yield r.ya.initialize(r,t),yield dP(r.ya.syncEngine),yield nv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(t){return KF(this.persistence,new YF,t.initialUser,this.M)}ma(t){return new V8(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=ik(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?jo.withCacheSize(this.cacheSizeBytes):jo.DEFAULT;return new rk(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,aL(),jI(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new sL}}class K6 extends IL{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,$e.Z)(function*(){yield e().call(r,t);const i=r.ya.syncEngine;r.sharedClientState instanceof gk&&(r.sharedClientState.syncEngine={Mr:G6.bind(null,i),Or:Z6.bind(null,i),Fr:z6.bind(null,i),Fs:q6.bind(null,i),kr:j6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,$e.Z)(function*(d){yield function(n,t){return oP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(t){const e=aL();if(!gk.vt(e))throw new Ye(Pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ik(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new gk(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class hP{initialize(t,e){var r=this;return(0,$e.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>CL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=U6.bind(null,r.syncEngine),yield Rk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x6}createDatastore(t){const e=CC(t.databaseInfo.databaseId),r=new l6(t.databaseInfo);return new d6(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,l=f=>CL(this.syncEngine,f,0),d=oL.vt()?new oL:new s6,new f6(e,r,i,l,d);var e,r,i,l,d}createSyncEngine(t,e){return function(r,i,l,d,f,m,b){const x=new M6(r,i,l,d,f,m);return b&&(x.ha=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,$e.Z)(function*(e){const r=dt(e);nt("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield tv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function AL(n,t=10240){let e=0;return{read:()=>(0,$e.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,$e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qI{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class Q6{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new ii,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,$e.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,$e.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,$e.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const r=t.Ea.decode(e),i=Number(r);isNaN(i)&&t.Pa(`length string (${r}) is not valid number`);const l=yield t.ba(i);return new I6(JSON.parse(l),e.length+i)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,$e.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ba(t){var e=this;return(0,$e.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const r=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,$e.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class J6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,$e.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ye(Pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,$e.Z)(function*(l,d){const f=dt(l),m=hC(f.M)+"/documents",b={documents:d.map(Z=>dC(f.M,Z))},x=yield f.ho("BatchGetDocuments",m,b),I=new Map;x.forEach(Z=>{const ne=function(n,t){return"found"in t?function(e,r){Wt(!!r.found);const i=wu(e,r.found.name),l=ss(r.found.updateTime),d=new zi({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(i,l,d)}(n,t):"missing"in t?function(e,r){Wt(!!r.missing),Wt(!!r.readTime);const i=wu(e,r.missing),l=ss(r.readTime);return hr.newNoDocument(i,l)}(n,t):bt()}(f.M,Z);I.set(ne.key.toString(),ne)});const B=[];return d.forEach(Z=>{const ne=I.get(Z.toString());Wt(!!ne),B.push(ne)}),B}),function(l,d){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new u(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,$e.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const l=lt.fromPath(i);t.mutations.push(new h(l,t.precondition(l)))}),yield(r=(0,$e.Z)(function*(i,l){const d=dt(i),f=hC(d.M)+"/documents",m={writes:l.map(b=>fC(d.M,b))};yield d.oo("Commit",f,m)}),function(i,l){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw bt();e=Bt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Ye(Pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ai.updateTime(e):ai.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Bt.min()))throw new Ye(Pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ai.updateTime(e)}return ai.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class X6{constructor(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new mk(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,$e.Z)(function*(){const e=new J6(t.datastore),r=t.Ca(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(l=>{t.xa(l)}))}).catch(i=>{t.xa(i)})}))}Ca(t){try{const e=this.updateFunction(t);return!sh(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!C(e)}return!1}}class eU{constructor(t,e,r,i){var l=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=is.UNAUTHENTICATED,this.clientId=xm.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,$e.Z)(function*(f){nt("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(nt("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var t=this;return(0,$e.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ye(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,$e.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=iv(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function SL(n,t){return fP.apply(this,arguments)}function fP(){return(fP=(0,$e.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),nt("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,$e.Z)(function*(l){r.isEqual(l)||(yield QF(t.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function NL(n,t){return pP.apply(this,arguments)}function pP(){return(pP=(0,$e.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield gP(n);nt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>pL(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>pL(t.remoteStore,l)),n.onlineComponents=t})).apply(this,arguments)}function gP(n){return mP.apply(this,arguments)}function mP(){return(mP=(0,$e.Z)(function*(n){return n.offlineComponents||(nt("FirestoreClient","Using default OfflineComponentProvider"),yield SL(n,new TL)),n.offlineComponents})).apply(this,arguments)}function ZI(n){return _P.apply(this,arguments)}function _P(){return(_P=(0,$e.Z)(function*(n){return n.onlineComponents||(nt("FirestoreClient","Using default OnlineComponentProvider"),yield NL(n,new hP)),n.onlineComponents})).apply(this,arguments)}function ML(n){return gP(n).then(t=>t.persistence)}function yP(n){return gP(n).then(t=>t.localStore)}function RL(n){return ZI(n).then(t=>t.remoteStore)}function vP(n){return ZI(n).then(t=>t.syncEngine)}function lv(n){return bP.apply(this,arguments)}function bP(){return(bP=(0,$e.Z)(function*(n){const t=yield ZI(n),e=t.eventManager;return e.onListen=R6.bind(null,t.syncEngine),e.onUnlisten=k6.bind(null,t.syncEngine),e})).apply(this,arguments)}function kL(n,t,e={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(i,l,d,f,m){const b=new qI({next:I=>{l.enqueueAndForget(()=>Lk(i,x));const B=I.docs.has(d);!B&&I.fromCache?m.reject(new Ye(Pe.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&I.fromCache&&f&&"server"===f.source?m.reject(new Ye(Pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),x=new Uk(Jf(d.path),b,{includeMetadataChanges:!0,Cu:!0});return Ok(i,x)}(yield lv(n),n.asyncQueue,t,e,r)})),r.promise}function PL(n,t,e={}){const r=new ii;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(i,l,d,f,m){const b=new qI({next:I=>{l.enqueueAndForget(()=>Lk(i,x)),I.fromCache&&"server"===f.source?m.reject(new Ye(Pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),x=new Uk(d,b,{includeMetadataChanges:!0,Cu:!0});return Ok(i,x)}(yield lv(n),n.asyncQueue,t,e,r)})),r.promise}const OL=new Map;function wP(n,t,e){if(!e)throw new Ye(Pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function FL(n,t,e,r){if(!0===t&&!0===r)throw new Ye(Pe.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function LL(n){if(!lt.isDocumentKey(n))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VL(n){if(lt.isDocumentKey(n))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":bt()}function Pn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ye(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=zI(n);throw new Ye(Pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function BL(n,t){if(t<=0)throw new Ye(Pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class UL{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ye(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ye(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,FL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class DC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UL({}),this._settingsFrozen=!1,t instanceof nc?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ye(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nc(i.options.projectId)}(t))}get app(){if(!this._app)throw new Ye(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ye(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UL(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new CR;switch(e.type){case"gapi":const r=e.client;return Wt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new dI(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ye(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=OL.get(t);e&&(nt("ComponentProvider","Removing Datastore"),OL.delete(t),e.terminate())}(this),Promise.resolve()}}class Pr{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Pr(this.firestore,t,this._key)}}class Ws{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ws(this.firestore,t,this._query)}}class Eu extends Ws{constructor(t,e,r){super(t,e,Jf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Pr(this.firestore,null,new lt(t))}withConverter(t){return new Eu(this.firestore,t,this._path)}}function HL(n,t,...e){if(n=(0,Y.m9)(n),wP("collection","path",t),n instanceof DC){const r=kn.fromString(t,...e);return VL(r),new Eu(n,null,r)}{if(!(n instanceof Pr||n instanceof Eu))throw new Ye(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kn.fromString(t,...e));return VL(r),new Eu(n.firestore,null,r)}}function YI(n,t,...e){if(n=(0,Y.m9)(n),1===arguments.length&&(t=xm.R()),wP("doc","path",t),n instanceof DC){const r=kn.fromString(t,...e);return LL(r),new Pr(n,null,new lt(r))}{if(!(n instanceof Pr||n instanceof Eu))throw new Ye(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(kn.fromString(t,...e));return LL(r),new Pr(n.firestore,n instanceof Eu?n.converter:null,new lt(r))}}function $L(n,t){return n=(0,Y.m9)(n),t=(0,Y.m9)(t),(n instanceof Pr||n instanceof Eu)&&(t instanceof Pr||t instanceof Eu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function jL(n,t){return n=(0,Y.m9)(n),t=(0,Y.m9)(t),n instanceof Ws&&t instanceof Ws&&n.firestore===t.firestore&&co(n._query,t._query)&&n.converter===t.converter}class dU{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new mk(this,"async_queue_retry"),this.qa=()=>{const e=jI();e&&nt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=jI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=jI();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new ii;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,$e.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!Lm(e))throw e;nt("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{throw this.$a=r,this.Ba=!1,Kr("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=e,e}enqueueAfterDelay(t,e,r){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const i=Pk.createAndSchedule(this,t,e,r,l=>this.ja(l));return this.Fa.push(i),i}Ka(){this.$a&&bt()}verifyOperationInProgress(){}Wa(){var t=this;return(0,$e.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function CP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class hU{constructor(){this._progressObserver={},this._taskCompletionResolver=new ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Gr extends DC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new dU,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||GL(this),this._firestoreClient.terminate()}}function Pi(n){return n._firestoreClient||GL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function GL(n){var t;const e=n._freezeSettings(),r=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new IR(n._databaseId,l,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new eU(n._authCredentials,n._appCheckCredentials,n._queue,r)}function WL(n,t,e){const r=new ii;return n.asyncQueue.enqueue((0,$e.Z)(function*(){try{yield SL(n,e),yield NL(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===Pe.FAILED_PRECONDITION||l.code===Pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function qL(n){if(n._initialized||n._terminated)throw new Ye(Pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class fh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ye(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class xu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xu(Ri.fromBase64String(t))}catch(e){throw new Ye(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new xu(Ri.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class qm{constructor(t){this._methodName=t}}class KI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ye(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ye(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return on(this._lat,t._lat)||on(this._long,t._long)}}const CU=/^__.*__$/;class EU{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new sp(t,this.data,this.fieldMask,e,this.fieldTransforms):new jy(t,this.data,e,this.fieldTransforms)}}class ZL{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new sp(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function zL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class QI{constructor(t,e,r,i,l,d){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new QI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return eA(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(zL(this.Xa)&&CU.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class xU{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||CC(t)}ac(t,e,r,i=!1){return new QI({Xa:t,methodName:e,uc:r,path:Mi.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Zm(n){const t=n._freezeSettings(),e=CC(n._databaseId);return new xU(n._databaseId,!!t.ignoreUndefinedProperties,e)}function JI(n,t,e,r,i,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,t,e,i);TP("Data must be an object, but it was:",d,r);const f=QL(r,d);let m,b;if(l.merge)m=new qf(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const I of l.mergeFields){const B=IP(t,I,e);if(!d.contains(B))throw new Ye(Pe.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);XL(x,B)||x.push(B)}m=new qf(x),b=d.fieldTransforms.filter(I=>m.covers(I.field))}else m=null,b=d.fieldTransforms;return new EU(new zi(f),m,b)}class TC extends qm{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof TC}}function YL(n,t,e){return new QI({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class EP extends qm{_toFieldTransform(t){return new $y(t.path,new rp)}isEqual(t){return t instanceof EP}}class DU extends qm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=YL(this,t,!0),r=this.cc.map(l=>zm(l,e)),i=new vu(r);return new $y(t.path,i)}isEqual(t){return this===t}}class TU extends qm{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=YL(this,t,!0),r=this.cc.map(l=>zm(l,e)),i=new oc(r);return new $y(t.path,i)}isEqual(t){return this===t}}class IU extends qm{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new ip(t.M,oC(t.M,this.hc));return new $y(t.path,e)}isEqual(t){return this===t}}function xP(n,t,e,r){const i=n.ac(1,t,e);TP("Data must be an object, but it was:",i,r);const l=[],d=zi.empty();rh(r,(m,b)=>{const x=XI(t,m,e);b=(0,Y.m9)(b);const I=i.sc(x);if(b instanceof TC)l.push(x);else{const B=zm(b,I);null!=B&&(l.push(x),d.set(x,B))}});const f=new qf(l);return new ZL(d,f,i.fieldTransforms)}function DP(n,t,e,r,i,l){const d=n.ac(1,t,e),f=[IP(t,r,e)],m=[i];if(l.length%2!=0)throw new Ye(Pe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<l.length;B+=2)f.push(IP(t,l[B])),m.push(l[B+1]);const b=[],x=zi.empty();for(let B=f.length-1;B>=0;--B)if(!XL(b,f[B])){const Z=f[B];let ne=m[B];ne=(0,Y.m9)(ne);const we=d.sc(Z);if(ne instanceof TC)b.push(Z);else{const Be=zm(ne,we);null!=Be&&(b.push(Z),x.set(Z,Be))}}const I=new qf(b);return new ZL(x,I,d.fieldTransforms)}function KL(n,t,e,r=!1){return zm(e,n.ac(r?4:3,t))}function zm(n,t){if(JL(n=(0,Y.m9)(n)))return TP("Unsupported field value:",t,n),QL(n,t);if(n instanceof qm)return function(e,r){if(!zL(r.Xa))throw r.rc(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,r){const i=[];let l=0;for(const d of e){let f=zm(d,r.ic(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,Y.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return oC(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=si.fromDate(e);return{timestampValue:uC(r.M,i)}}if(e instanceof si){const i=new si(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:uC(r.M,i)}}if(e instanceof KI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof xu)return{bytesValue:cF(r.M,e._byteString)};if(e instanceof Pr){const i=r.databaseId,l=e.firestore._databaseId;if(!l.isEqual(i))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:jR(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.rc(`Unsupported field value: ${zI(e)}`)}(n,t)}function QL(n,t){const e={};return fI(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rh(n,(r,i)=>{const l=zm(i,t.tc(r));null!=l&&(e[r]=l)}),{mapValue:{fields:e}}}function JL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof si||n instanceof KI||n instanceof xu||n instanceof Pr||n instanceof qm)}function TP(n,t,e){if(!JL(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zI(e);throw t.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function IP(n,t,e){if((t=(0,Y.m9)(t))instanceof fh)return t._internalPath;if("string"==typeof t)return XI(n,t);throw eA("Field path arguments must be of type string or ",n,!1,void 0,e)}const AU=new RegExp("[~\\*/\\[\\]]");function XI(n,t,e){if(t.search(AU)>=0)throw eA(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new fh(...t.split("."))._internalPath}catch(r){throw eA(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function eA(n,t,e,r,i){const l=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${r}`),d&&(m+=` in document ${i}`),m+=")"),new Ye(Pe.INVALID_ARGUMENT,f+n+m)}function XL(n,t){return n.some(e=>e.isEqual(t))}class IC{constructor(t,e,r,i,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Pr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new SU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(tA("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class SU extends IC{data(){return super.data()}}function tA(n,t){return"string"==typeof t?XI(n,t):t instanceof fh?t._internalPath:t._delegate._internalPath}class Ym{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ph extends IC{constructor(t,e,r,i,l,d){super(t,e,r,i,d),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new AC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(tA("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class AC extends ph{data(t={}){return super.data(t)}}class pp{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Ym(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new AC(this._firestore,this._userDataWriter,r.key,r,new Ym(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ye(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new AC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ym(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new AC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ym(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==d.type&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:NU(d.type),doc:f,oldIndex:m,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function NU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}function e3(n,t){return n instanceof ph&&t instanceof ph?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof pp&&t instanceof pp&&n._firestore===t._firestore&&jL(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function t3(n){if(Xf(n)&&0===n.explicitOrderBy.length)throw new Ye(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SC{}function gp(n,...t){for(const e of t)n=e._apply(n);return n}class MU extends SC{constructor(t,e,r){super(),this.lc=t,this.fc=e,this.dc=r,this.type="where"}_apply(t){const e=Zm(t.firestore),r=function(i,l,d,f,m,b,x){let I;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){a3(x,b);const Z=[];for(const ne of x)Z.push(o3(f,i,ne));I={arrayValue:{values:Z}}}else I=o3(f,i,x)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||a3(x,b),I=KL(d,"where",x,"in"===b||"not-in"===b);const B=oi.create(m,b,I);return function(Z,ne){if(ne.S()){const Be=Uy(Z);if(null!==Be&&!Be.isEqual(ne.field))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Be.toString()}' and '${ne.field.toString()}'`);const tt=iC(Z);null!==tt&&l3(0,ne.field,tt)}const we=function(Be,tt){for(const st of Be.filters)if(tt.indexOf(st.op)>=0)return st.op;return null}(Z,function(Be){switch(Be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ne.op));if(null!==we)throw new Ye(Pe.INVALID_ARGUMENT,we===ne.op?`Invalid query. You cannot use more than one '${ne.op.toString()}' filter.`:`Invalid query. You cannot use '${ne.op.toString()}' filters with '${we.toString()}' filters.`)}(i,B),B}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new Ws(t.firestore,t.converter,function(i,l){const d=i.filters.concat([l]);return new ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class kU extends SC{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(r,i,l){if(null!==r.startAt)throw new Ye(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ye(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Kf(i,l);return function(f,m){if(null===iC(f)){const b=Uy(f);null!==b&&l3(0,b,m.field)}}(r,d),d}(t._query,this.lc,this._c);return new Ws(t.firestore,t.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new ya(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class n3 extends SC{constructor(t,e,r){super(),this.type=t,this.wc=e,this.mc=r}_apply(t){return new Ws(t.firestore,t.converter,DI(t._query,this.wc,this.mc))}}class r3 extends SC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=s3(t,this.type,this.gc,this.yc);return new Ws(t.firestore,t.converter,(i=e,new ya((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class i3 extends SC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=s3(t,this.type,this.gc,this.yc);return new Ws(t.firestore,t.converter,(i=e,new ya((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function s3(n,t,e,r){if(e[0]=(0,Y.m9)(e[0]),e[0]instanceof IC)return function(i,l,d,f,m){if(!f)throw new Ye(Pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const x of ep(i))if(x.field.isKeyField())b.push(ah(l,f.key));else{const I=f.data.field(x.field);if(Kw(I))throw new Ye(Pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const B=x.field.canonicalString();throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}b.push(I)}return new _u(b,m)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=Zm(n.firestore);return function(l,d,f,m,b,x){const I=l.explicitOrderBy;if(b.length>I.length)throw new Ye(Pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let Z=0;Z<b.length;Z++){const ne=b[Z];if(I[Z].field.isKeyField()){if("string"!=typeof ne)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof ne}`);if(!Hy(l)&&-1!==ne.indexOf("/"))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${ne}' contains a slash.`);const we=l.path.child(kn.fromString(ne));if(!lt.isDocumentKey(we))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${we}' is not because it contains an odd number of segments.`);const Be=new lt(we);B.push(ah(d,Be))}else{const we=KL(f,m,ne);B.push(we)}}return new _u(B,x)}(n._query,n.firestore._databaseId,i,t,e,r)}}function o3(n,t,e){if("string"==typeof(e=(0,Y.m9)(e))){if(""===e)throw new Ye(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hy(t)&&-1!==e.indexOf("/"))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(kn.fromString(e));if(!lt.isDocumentKey(r))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ah(n,new lt(r))}if(e instanceof Pr)return ah(n,e._key);throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zI(e)}.`)}function a3(n,t){if(!Array.isArray(n)||0===n.length)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function l3(n,t,e){if(!e.isEqual(t))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class AP{convertValue(t,e="none"){switch(gu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return jr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ih(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw bt()}}convertObject(t,e){const r={};return rh(t.fields,(i,l)=>{r[i]=this.convertValue(l,e)}),r}convertGeoPoint(t){return new KI(jr(t.latitude),jr(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=Bo(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(Im(t));default:return null}}convertTimestamp(t){const e=pu(t);return new si(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=kn.fromString(t);Wt(vF(r));const i=new nc(r.get(1),r.get(3)),l=new lt(r.popFirst(5));return i.isEqual(e)||Kr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function nA(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class HU extends AP{constructor(t){super(),this.firestore=t}convertBytes(t){return new xu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Pr(this.firestore,null,e)}}class c3{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Zm(t)}set(t,e,r){this._verifyNotCommitted();const i=mp(t,this._firestore),l=nA(i.converter,e,r),d=JI(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,ai.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const l=mp(t,this._firestore);let d;return d="string"==typeof(e=(0,Y.m9)(e))||e instanceof fh?DP(this._dataReader,"WriteBatch.update",l._key,e,r,i):xP(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(d.toMutation(l._key,ai.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=mp(t,this._firestore);return this._mutations=this._mutations.concat(new u(e._key,ai.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ye(Pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mp(n,t){if((n=(0,Y.m9)(n)).firestore!==t)throw new Ye(Pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Km extends AP{constructor(t){super(),this.firestore=t}convertBytes(t){return new xu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Pr(this.firestore,null,e)}}function u3(n,t,e){n=Pn(n,Pr);const r=Pn(n.firestore,Gr),i=nA(n.converter,t,e);return cv(r,[JI(Zm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,ai.none())])}function d3(n,t,e,...r){n=Pn(n,Pr);const i=Pn(n.firestore,Gr),l=Zm(i);let d;return d="string"==typeof(t=(0,Y.m9)(t))||t instanceof fh?DP(l,"updateDoc",n._key,t,e,r):xP(l,"updateDoc",n._key,t),cv(i,[d.toMutation(n._key,ai.exists(!0))])}function h3(n,...t){var e,r,i;n=(0,Y.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof t[d]||CP(t[d])||(l=t[d],d++);const f={includeMetadataChanges:l.includeMetadataChanges};if(CP(t[d])){const I=t[d];t[d]=null===(e=I.next)||void 0===e?void 0:e.bind(I),t[d+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),t[d+2]=null===(i=I.complete)||void 0===i?void 0:i.bind(I)}let m,b,x;if(n instanceof Pr)b=Pn(n.firestore,Gr),x=Jf(n._key.path),m={next:I=>{t[d]&&t[d](SP(b,n,I))},error:t[d+1],complete:t[d+2]};else{const I=Pn(n,Ws);b=Pn(I.firestore,Gr),x=I._query;const B=new Km(b);m={next:Z=>{t[d]&&t[d](new pp(b,B,I,Z))},error:t[d+1],complete:t[d+2]},t3(n._query)}return function(I,B,Z,ne){const we=new qI(ne),Be=new Uk(B,we,Z);return I.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return Ok(yield lv(I),Be)})),()=>{we.Ia(),I.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return Lk(yield lv(I),Be)}))}}(Pi(b),x,f,m)}function cv(n,t){return function(e,r){const i=new ii;return e.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(n,t,e){return Wk.apply(this,arguments)}(yield vP(e),r,i)})),i.promise}(Pi(n),t)}function SP(n,t,e){const r=e.docs.get(t._key),i=new Km(n);return new ph(n,i,t._key,r,new Ym(e.hasPendingWrites,e.fromCache),t.converter)}class QU extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Zm(t)}get(t){const e=mp(t,this._firestore),r=new HU(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return bt();const l=i[0];if(l.isFoundDocument())return new IC(this._firestore,r,l.key,l,e.converter);if(l.isNoDocument())return new IC(this._firestore,r,e._key,null,e.converter);throw bt()})}set(t,e,r){const i=mp(t,this._firestore),l=nA(i.converter,e,r),d=JI(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(t,e,r,...i){const l=mp(t,this._firestore);let d;return d="string"==typeof(e=(0,Y.m9)(e))||e instanceof fh?DP(this._dataReader,"Transaction.update",l._key,e,r,i):xP(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,d),this}delete(t){const e=mp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=mp(t,this._firestore),r=new Km(this._firestore);return super.get(t).then(i=>new ph(this._firestore,r,e._key,i._document,new Ym(!1,!1),e.converter))}}function NP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ye("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function p3(){if("undefined"==typeof Uint8Array)throw new Ye("unimplemented","Uint8Arrays are not available in this environment.")}function g3(){if("undefined"==typeof atob)throw new Ye("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Cm=rs.SDK_VERSION,(0,rs._registerComponent)(new za.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),l=new Gr(i,new ER(e.getProvider("auth-internal")),new eF(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC")),(0,rs.registerVersion)(Zw,"3.4.8",n),(0,rs.registerVersion)(Zw,"3.4.8","esm2017")}();class NC{constructor(t){this._delegate=t}static fromBase64String(t){return g3(),new NC(xu.fromBase64String(t))}static fromUint8Array(t){return p3(),new NC(xu.fromUint8Array(t))}toBase64(){return g3(),this._delegate.toBase64()}toUint8Array(){return p3(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function MP(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class aH{enableIndexedDbPersistence(t,e){return function(n,t){qL(n=Pn(n,Gr));const e=Pi(n),r=n._freezeSettings(),i=new hP;return WL(e,i,new IL(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){qL(n=Pn(n,Gr));const t=Pi(n),e=n._freezeSettings(),r=new hP;return WL(t,r,new K6(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Ye(Pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,$e.Z)(function*(){try{yield(e=(0,$e.Z)(function*(r){if(!lc.vt())return Promise.resolve();const i=r+"main";yield lc.delete(i)}),function(r){return e.apply(this,arguments)})(ik(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class m3{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof nc||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Wf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const l=(n=Pn(n,DC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&Wf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=is.MOCK_USER;else{d=(0,Y.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ye(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new is(m)}n._authCredentials=new Oy(new Py(d,f))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,$e.Z)(function*(){const t=yield ML(n),e=yield RL(n);return t.setNetworkEnabled(!0),function(r){const i=dt(r);return i.fu.delete(0),EC(i)}(e)}))}(Pi(n=Pn(n,Gr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,$e.Z)(function*(){const t=yield ML(n),e=yield RL(n);return t.setNetworkEnabled(!1),(r=(0,$e.Z)(function*(i){const l=dt(i);l.fu.add(0),yield tv(l),l.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(Pi(n=Pn(n,Gr)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,FL("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new ii;return t.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return function(n,t){return Kk.apply(this,arguments)}(yield vP(t),e)})),e.promise}(Pi(n=Pn(n,Gr)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new qI(t);return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return r=yield lv(n),i=e,dt(r).Eu.add(i),void i.next();var r,i})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return r=yield lv(n),i=e,void dt(r).Eu.delete(i);var r,i}))}}(Pi(n=Pn(n,Gr)),CP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ye("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new uv(this,HL(this._delegate,t))}catch(e){throw ho(e,"collection()","Firestore.collection()")}}doc(t){try{return new cl(this,YI(this._delegate,t))}catch(e){throw ho(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new fo(this,function(n,t){if(n=Pn(n,DC),wP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ws(n,null,(e=t,new ya(kn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw ho(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new ii;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){const r=yield(i=n,ZI(i).then(l=>l.datastore));var i;new X6(n.asyncQueue,r,t,e).run()})),e.promise}(Pi(n=Pn(n,Gr)),e=>t(new QU(n,e)))}(this._delegate,e=>t(new _3(this,e)))}batch(){return Pi(this._delegate),new y3(new c3(this._delegate,t=>cv(this._delegate,t)))}loadBundle(t){return function(n,t){const e=Pi(n=Pn(n,Gr)),r=new hU;return function(n,t,e,r){const i=function(l,d){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,m=function(m,b){if(m instanceof Uint8Array)return AL(m,b);if(m instanceof ArrayBuffer)return AL(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Q6(m,d);var m}(e,CC(t));n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){!function(n,t,e){const r=dt(n);var i;(i=(0,$e.Z)(function*(l,d,f){try{const m=yield d.getMetadata();if(yield function(B,Z){const ne=dt(B),we=ss(Z.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",Be=>ne._s.getBundleMetadata(Be,Z.id)).then(Be=>!!Be&&Be.createTime.compareTo(we)>=0)}(l.localStore,m))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(B=m).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);f._updateProgress(_L(m));const b=new A6(m,l.localStore,d.M);let x=yield d.da();for(;x;){const B=yield b.ku(x);B&&f._updateProgress(B),x=yield d.da()}const I=yield b.complete();return yield hh(l,I.Fu,void 0),yield function(B,Z){const ne=dt(B);return ne.persistence.runTransaction("Save bundle","readwrite",we=>ne._s.saveBundleMetadata(we,Z))}(l.localStore,m),f._completeWith(I.progress),Promise.resolve(I.Ou)}catch(m){return Wf("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var B}),function(l,d,f){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield vP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,$e.Z)(function*(){return function(e,r){const i=dt(e);return i.persistence.runTransaction("Get named query","readonly",l=>i._s.getNamedQuery(l,r))}(yield yP(n),t)}))}(Pi(n=Pn(n,Gr)),t).then(e=>e?new Ws(n,null,e.query):null)}(this._delegate,t).then(e=>e?new fo(this,e):null)}}class rA extends AP{constructor(t){super(),this.firestore=t}convertBytes(t){return new NC(new xu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return cl.forKey(e,this.firestore,null)}}class _3{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new rA(t)}get(t){const e=Jm(t);return this._delegate.get(e).then(r=>new MC(this._firestore,new ph(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=Jm(t);return r?(NP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Jm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Jm(t);return this._delegate.delete(e),this}}class y3{constructor(t){this._delegate=t}set(t,e,r){const i=Jm(t);return r?(NP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=Jm(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=Jm(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Qm{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new AC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new RC(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Qm.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let l=i.get(e);return l||(l=new Qm(t,new rA(t),e),i.set(e,l)),l}}Qm.INSTANCES=new WeakMap;class cl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new rA(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Ye("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new cl(e,new Pr(e._delegate,r,new lt(t)))}static forKey(t,e,r){return new cl(e,new Pr(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new uv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new uv(this.firestore,HL(this._delegate,t))}catch(e){throw ho(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,Y.m9)(t))instanceof Pr&&$L(this._delegate,t)}set(t,e){e=NP("DocumentReference.set",e);try{return e?u3(this._delegate,t,e):u3(this._delegate,t)}catch(r){throw ho(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?d3(this._delegate,t):d3(this._delegate,t,e,...r)}catch(i){throw ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return cv(Pn(n.firestore,Gr),[new u(n._key,ai.none())])}(this._delegate)}onSnapshot(...t){const e=v3(t),r=b3(t,i=>new MC(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return h3(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Pn(n,Pr);const t=Pn(n.firestore,Gr),e=Pi(t),r=new Km(t);return function(n,t){const e=new ii;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return(r=(0,$e.Z)(function*(i,l,d){try{const f=yield function(m,b){const x=dt(m);return x.persistence.runTransaction("read document","readonly",I=>x.ci.Ls(I,b))}(i,l);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Ye(Pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=iv(f,`Failed to get document '${l} from cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield yP(n),t,e);var r})),e.promise}(e,n._key).then(i=>new ph(t,r,n._key,i,new Ym(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Pn(n,Pr);const t=Pn(n.firestore,Gr);return kL(Pi(t),n._key,{source:"server"}).then(e=>SP(t,n,e))}(this._delegate):function(n){n=Pn(n,Pr);const t=Pn(n.firestore,Gr);return kL(Pi(t),n._key).then(e=>SP(t,n,e))}(this._delegate),e.then(r=>new MC(this.firestore,new ph(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new cl(this.firestore,this._delegate.withConverter(t?Qm.getInstance(this.firestore,t):null))}}function ho(n,t,e){return n.message=n.message.replace(t,e),n}function v3(n){for(const t of n)if("object"==typeof t&&!MP(t))return t;return{}}function b3(n,t){var e,r;let i;return i=MP(n[0])?n[0]:MP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(t(l))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class MC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new cl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return e3(this._delegate,t._delegate)}}class RC extends MC{data(t){const e=this._delegate.data(t);return function(n,t){n||bt()}(void 0!==e),e}}class fo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new rA(t)}where(t,e,r){try{return new fo(this.firestore,gp(this._delegate,function(n,t,e){const r=t,i=tA("where",n);return new MU(i,r,e)}(t,e,r)))}catch(i){throw ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new fo(this.firestore,gp(this._delegate,function(n,t="asc"){const e=t,r=tA("orderBy",n);return new kU(r,e)}(t,e)))}catch(r){throw ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new fo(this.firestore,gp(this._delegate,function(n){return BL("limit",n),new n3("limit",n,"F")}(t)))}catch(e){throw ho(e,"limit()","Query.limit()")}}limitToLast(t){try{return new fo(this.firestore,gp(this._delegate,function(n){return BL("limitToLast",n),new n3("limitToLast",n,"L")}(t)))}catch(e){throw ho(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new fo(this.firestore,gp(this._delegate,function(...n){return new r3("startAt",n,!0)}(...t)))}catch(e){throw ho(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new fo(this.firestore,gp(this._delegate,function(...n){return new r3("startAfter",n,!1)}(...t)))}catch(e){throw ho(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new fo(this.firestore,gp(this._delegate,function(...n){return new i3("endBefore",n,!1)}(...t)))}catch(e){throw ho(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new fo(this.firestore,gp(this._delegate,function(...n){return new i3("endAt",n,!0)}(...t)))}catch(e){throw ho(e,"endAt()","Query.endAt()")}}isEqual(t){return jL(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=Pn(n,Ws);const t=Pn(n.firestore,Gr),e=Pi(t),r=new Km(t);return function(n,t){const e=new ii;return n.asyncQueue.enqueueAndForget((0,$e.Z)(function*(){return(r=(0,$e.Z)(function*(i,l,d){try{const f=yield UI(i,l,!0),m=new bL(l,f.li),b=m.Gu(f.documents),x=m.applyChanges(b,!1);d.resolve(x.snapshot)}catch(f){const m=iv(f,`Failed to execute query '${l} against cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield yP(n),t,e);var r})),e.promise}(e,n._query).then(i=>new pp(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=Pn(n,Ws);const t=Pn(n.firestore,Gr),e=Pi(t),r=new Km(t);return PL(e,n._query,{source:"server"}).then(i=>new pp(t,r,n,i))}(this._delegate):function(n){n=Pn(n,Ws);const t=Pn(n.firestore,Gr),e=Pi(t),r=new Km(t);return t3(n._query),PL(e,n._query).then(i=>new pp(t,r,n,i))}(this._delegate),e.then(r=>new RP(this.firestore,new pp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=v3(t),r=b3(t,i=>new RP(this.firestore,new pp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return h3(this._delegate,e,r)}withConverter(t){return new fo(this.firestore,this._delegate.withConverter(t?Qm.getInstance(this.firestore,t):null))}}class cH{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new RC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class RP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new RC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new cH(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new RC(this._firestore,r))})}isEqual(t){return e3(this._delegate,t._delegate)}}class uv extends fo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new cl(this.firestore,t):null}doc(t){try{return new cl(this.firestore,void 0===t?YI(this._delegate):YI(this._delegate,t))}catch(e){throw ho(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=Pn(n.firestore,Gr),r=YI(n),i=nA(n.converter,t);return cv(e,[JI(Zm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ai.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new cl(this.firestore,e))}isEqual(t){return $L(this._delegate,t._delegate)}withConverter(t){return new uv(this.firestore,this._delegate.withConverter(t?Qm.getInstance(this.firestore,t):null))}}function Jm(n){return Pn(n,Pr)}class kP{constructor(...t){this._delegate=new fh(...t)}static documentId(){return new kP(Mi.keyField().canonicalString())}isEqual(t){return(t=(0,Y.m9)(t))instanceof fh&&this._delegate._internalPath.isEqual(t._internalPath)}}class Xm{constructor(t){this._delegate=t}static serverTimestamp(){const t=new EP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Xm(t)}static delete(){const t=new TC("deleteField");return t._methodName="FieldValue.delete",new Xm(t)}static arrayUnion(...t){const e=function(...n){return new DU("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Xm(e)}static arrayRemove(...t){const e=function(...n){return new TU("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Xm(e)}static increment(t){const e=function(n){return new IU("increment",n)}(t);return e._methodName="FieldValue.increment",new Xm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const uH={Firestore:m3,GeoPoint:KI,Timestamp:si,Blob:NC,Transaction:_3,WriteBatch:y3,DocumentReference:cl,DocumentSnapshot:MC,Query:fo,QueryDocumentSnapshot:RC,QuerySnapshot:RP,CollectionReference:uv,FieldPath:kP,FieldValue:Xm,setLogLevel:function(n){!function(n){fu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function w3(n,t){return function(n,t=qc.z){return new ir.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function PP(n,t){return w3(n,t).pipe((0,wt.U)(e=>({payload:e,type:"query"})))}function iA(n,t){return PP(n,t).pipe(Xo(void 0),Ii(),(0,wt.U)(([e,r])=>{const i=r.payload.docChanges(),l=i.map(d=>({type:d.type,payload:d}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const m=i.find(x=>x.doc.ref.isEqual(d.ref)),b=null==e?void 0:e.payload.docs.find(x=>x.ref.isEqual(d.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(d.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),l}))}function C3(n,t,e){return iA(n,e).pipe(La((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return OP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return OP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return OP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),t),[]),bd(),(0,wt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function OP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function E3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new za.wA("firestore-compat",e=>((t,e)=>new m3(t,e,new aH))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},uH)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(rb.Z);class x3{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=iA(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,wt.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(Xo(void 0),Ii(),sr(([r,i])=>i.length>0||!r),(0,wt.U)(([r,i])=>i),qn.iC)}auditTrail(t){return this.stateChanges(t).pipe(La((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=E3(t);return C3(this.query,e,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(t={}){return PP(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),qn.iC)}get(t){return(0,un.D)(this.query.get(t)).pipe(qn.iC)}add(t){return this.ref.add(t)}doc(t){return new D3(this.ref.doc(t),this.afs)}}class D3{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:l}=A3(r,e);return new x3(i,l,this.afs)}snapshotChanges(){return function(n,t){return w3(n,t).pipe(Xo(void 0),Ii(),(0,wt.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,un.D)(this.ref.get(t)).pipe(qn.iC)}}class _H{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?iA(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),sr(e=>e.length>0),qn.iC):iA(this.query,this.afs.schedulers.outsideAngular).pipe(qn.iC)}auditTrail(t){return this.stateChanges(t).pipe(La((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=E3(t);return C3(this.query,e,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(t={}){return PP(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),qn.iC)}get(t){return(0,un.D)(this.query.get(t)).pipe(qn.iC)}}const T3=new a.OlP("angularfire2.enableFirestorePersistence"),I3=new a.OlP("angularfire2.firestore.persistenceSettings"),yH=new a.OlP("angularfire2.firestore.settings"),vH=new a.OlP("angularfire2.firestore.use-emulator");function A3(n,t=(e=>e)){return{query:t(n),ref:n}}let S3=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I,B,Z,ne,we,Be,tt,st){this.schedulers=m;const gt=(0,ei.on)(e,f,r),_t=x;I&&X1(gt,f,B,ne,we,Be,Z,tt),[this.firestore,this.persistenceEnabled$]=(0,ei.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const jt=f.runOutsideAngular(()=>gt.firestore());if(l&&jt.settings(l),_t&&jt.useEmulator(..._t),i&&!Dh(d)){const wn=()=>{try{return(0,un.D)(jt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jr){return"undefined"!=typeof console&&console.warn(Jr),(0,xt.of)(!1)}};return[jt,f.runOutsideAngular(wn)]}return[jt,(0,xt.of)(!1)]},[l,_t,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:d}=A3(i,r),f=this.schedulers.ngZone.run(()=>l);return new x3(f,d,this)}collectionGroup(e,r){const i=r||(d=>d),l=this.firestore.collectionGroup(e);return new _H(i(l),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new D3(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ei.Dh),a.LFG(ei.xv,8),a.LFG(T3,8),a.LFG(yH,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(qn.HU),a.LFG(I3,8),a.LFG(vH,8),a.LFG(Ql,8),a.LFG(qD,8),a.LFG(z1,8),a.LFG(Y1,8),a.LFG(K1,8),a.LFG(Q1,8),a.LFG(J1,8),a.LFG(ey,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bH=(()=>{class n{constructor(){im.Z.registerVersion("angularfire",qn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:T3,useValue:!0},{provide:I3,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[S3]}),n})(),wH=(()=>{class n{constructor(e,r,i,l){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=l,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,r){return this.afAuth.signInWithEmailAndPassword(e,r)}SignUp(e,r){return this.afAuth.createUserWithEmailAndPassword(e,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=e),null!==e}GoogleAuth(){return this.AuthLogin(new Of.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(S3),a.LFG(Ql),a.LFG(ms),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var CH=O(9105);function Ts(n,t,e,r){return(0,CH.m)(e)&&(r=e,e=void 0),r?Ts(n,t,e).pipe((0,wt.U)(i=>(0,ks.k)(i)?r(...i):r(i))):new ir.y(i=>{N3(n,t,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,e)})}function N3(n,t,e,r,i){let l;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(t,e,i),l=()=>d.removeEventListener(t,e,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(t,e),l=()=>d.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(t,e),l=()=>d.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)N3(n[d],t,e,r,i)}r.add(l)}function TH(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class IH{call(t,e){return e.subscribe(new AH(t))}}class AH extends Ph{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const l=cr(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(l),this.add(l)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let l=this.subscriptions[i];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(e)}}var SH=O(8640);new ir.y(SH.Z);var sA=O(377);function oA(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,Ac.n)(n,void 0).lift(new NH(t))}class NH{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new MH(t,this.resultSelector))}}class MH extends yr.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,ks.k)(t)?e.push(new kH(t)):e.push("function"==typeof t[sA.hZ]?new RH(t[sA.hZ]()):new PH(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let d=0;d<e;d++){let f=t[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const l=[];for(let d=0;d<e;d++){let f=t[d],m=f.next();if(f.hasCompleted()&&(i=!0),m.done)return void r.complete();l.push(m.value)}this.resultSelector?this._tryresultSelector(l):r.next(l),i&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class RH{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class kH{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[sA.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class PH extends ns.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[sA.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,ns.ft)(this.observable,new ns.IY(this))}}function li(n){return t=>t.lift(new FH(n))}class FH{constructor(t){this.notifier=t}call(t,e){const r=new LH(t),i=(0,ns.ft)(this.notifier,new ns.IY(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class LH extends ns.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}O(1593);var GH=O(1555);function aA(n,t){return new ir.y(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let l=0,d=0;for(let f=0;f<r;f++){const m=(0,un.D)(n[f]);let b=!1;e.add(m.subscribe({next:x=>{b||(b=!0,d++),i[f]=x},error:x=>e.error(x),complete:()=>{l++,(l===r||!b)&&(d===r&&e.next(t?t.reduce((x,I,B)=>(x[I]=i[B],x),{}):i),e.complete())}}))}})}let F3=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),e0=(()=>{class n extends F3{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const Is=new a.OlP("NgValueAccessor"),qH={provide:Is,useExisting:(0,a.Gpc)(()=>LP),multi:!0};let LP=(()=>{class n extends e0{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[a._Bn([qH]),a.qOj]}),n})();const ZH={provide:Is,useExisting:(0,a.Gpc)(()=>lA),multi:!0},YH=new a.OlP("CompositionEventMode");let lA=(()=>{class n extends F3{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(YH,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&a.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[a._Bn([ZH]),a.qOj]}),n})();const As=new a.OlP("NgValidators"),yp=new a.OlP("NgAsyncValidators");function q3(n){return null!=n}function Z3(n){const t=(0,a.QGY)(n)?(0,un.D)(n):n;return(0,a.CqO)(t),t}function z3(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Y3(n,t){return t.map(e=>e(n))}function K3(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function VP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(q3);return 0==t.length?null:function(e){return z3(Y3(e,t))}}(K3(n)):null}function BP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(q3);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,ks.k)(t))return aA(t,null);if((0,GH.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return aA(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return aA(n=1===n.length&&(0,ks.k)(n[0])?n[0]:n,null).pipe((0,wt.U)(e=>t(...e)))}return aA(n,null)}(Y3(e,t).map(Z3)).pipe((0,wt.U)(z3))}}(K3(n)):null}function X3(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function UP(n){return n?Array.isArray(n)?n:[n]:[]}function cA(n,t){return Array.isArray(n)?n.includes(t):n===t}function nV(n,t){const e=UP(t);return UP(n).forEach(i=>{cA(e,i)||e.push(i)}),e}function rV(n,t){return UP(t).filter(e=>!cA(n,e))}let iV=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=BP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n}),n})(),po=(()=>{class n extends iV{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();class bp extends iV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let oV=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(bp,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[a.qOj]}),n})();function kC(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(X3(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(X3(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();fA(t._rawValidators,i),fA(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aV(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aV(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function fA(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function aV(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gA(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const PC="VALID",mA="INVALID",dv="PENDING",OC="DISABLED";function qP(n){return(zP(n)?n.validators:n)||null}function uV(n){return Array.isArray(n)?VP(n):n||null}function ZP(n,t){return(zP(t)?t.asyncValidators:n)||null}function dV(n){return Array.isArray(n)?BP(n):n||null}function zP(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class YP{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=uV(this._rawValidators),this._composedAsyncValidatorFn=dV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===PC}get invalid(){return this.status===mA}get pending(){return this.status==dv}get disabled(){return this.status===OC}get enabled(){return this.status!==OC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=uV(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=dV(t)}addValidators(t){this.setValidators(nV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(nV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rV(t,this._rawAsyncValidators))}hasValidator(t){return cA(this._rawValidators,t)}hasAsyncValidator(t){return cA(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=dv,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=OC,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=PC,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===PC||this.status===dv)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?OC:PC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=dv,this._hasOwnPendingAsyncValidator=!0;const e=Z3(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof KP?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof u$&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?OC:this.errors?mA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dv)?dv:this._anyControlsHaveStatus(mA)?mA:PC}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){zP(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class _A extends YP{constructor(t=null,e,r){super(qP(e),ZP(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){gA(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){gA(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class KP extends YP{constructor(t,e,r){super(qP(e),ZP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof _A?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,l)=>{r=e(r,i,l)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class u$ extends YP{constructor(t,e,r){super(qP(e),ZP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof _A?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const f$={provide:bp,useExisting:(0,a.Gpc)(()=>JP)},pV=(()=>Promise.resolve(null))();let JP=(()=>{class n extends bp{constructor(e,r,i,l){super(),this.control=new _A,this._registered=!1,this.update=new a.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(l=>{l.constructor===lA?e=l:function(n){return Object.getPrototypeOf(n.constructor)===e0}(l)?r=l:i=l}),i||r||e||null}(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kC(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){pV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;pV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(po,9),a.Y36(As,10),a.Y36(yp,10),a.Y36(Is,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([f$]),a.qOj,a.TTD]}),n})(),mV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const x$={provide:Is,useExisting:(0,a.Gpc)(()=>yA),multi:!0};function CV(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let yA=(()=>{class n extends e0{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const i=CV(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([x$]),a.qOj]}),n})(),rO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(CV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(yA,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const T$={provide:Is,useExisting:(0,a.Gpc)(()=>iO),multi:!0};function EV(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let iO=(()=>{class n extends e0{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(l=>this._getOptionId(l));r=(l,d)=>{l._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let d=0;d<l.length;d++){const f=l.item(d),m=this._getOptionValue(f.value);i.push(m)}}else{const l=r.options;for(let d=0;d<l.length;d++){const f=l.item(d);if(f.selected){const m=this._getOptionValue(f.value);i.push(m)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([T$]),a.qOj]}),n})(),sO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(EV(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(EV(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(iO,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const N$={provide:As,useExisting:(0,a.Gpc)(()=>vA),multi:!0};let vA=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&a.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[a._Bn([N$])]}),n})(),kV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[mV]]}),n})(),PV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[kV]}),n})();const hv=["*"],E5=["dialog"];function wp(n){return null!=n}function pv(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const LV={animation:!0,transitionTimerDelayMs:5};let ls=(()=>{class n{constructor(){this.animation=LV.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const Oj=()=>{},{transitionTimerDelayMs:Fj}=LV,VC=new Map,Yi=(n,t,e,r)=>{let i=r.context||{};const l=VC.get(t);if(l)switch(r.runningTransition){case"continue":return gi.E;case"stop":n.run(()=>l.transition$.complete()),i=Object.assign(l.context,i),VC.delete(t)}const d=e(t,r.animation,i)||Oj;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>d()),(0,xt.of)(void 0).pipe(function(n){return t=>new ir.y(e=>t.subscribe(d=>n.run(()=>e.next(d)),d=>n.run(()=>e.error(d)),()=>n.run(()=>e.complete())))}(n));const f=new Mn.xQ,m=new Mn.xQ,b=f.pipe(function(...n){return t=>Qs(t,(0,xt.of)(...n))}(!0));VC.set(t,{transition$:f,complete:()=>{m.next(),m.complete()},context:i});const x=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const I=Ts(t,"transitionend").pipe(li(b),sr(({target:Z})=>Z===t));(function(...n){if(1===n.length){if(!(0,ks.k)(n[0]))return n[0];n=n[0]}return(0,Ac.n)(n,void 0).lift(new IH)})(function(n=0,t,e){let r=-1;return(0,j0.k)(t)?r=Number(t)<1?1:Number(t):(0,Qo.K)(t)&&(e=t),(0,Qo.K)(e)||(e=qc.P),new ir.y(i=>{const l=(0,j0.k)(n)?n:+n-e.now();return e.schedule(TH,l,{index:0,period:r,subscriber:i})})}(x+Fj).pipe(li(b)),I,m).pipe(li(b)).subscribe(()=>{VC.delete(t),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var xn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(xn||(xn={})),xn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const eB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function tB(n){const t=Array.from(n.querySelectorAll(eB)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const l=this.offsetParent(t);r=this.offset(t,!1),l!==document.documentElement&&(i=this.offset(l,!1)),i.top+=l.clientTop,i.left+=l.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let l={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(l.height=Math.round(l.height),l.width=Math.round(l.width),l.top=Math.round(l.top),l.bottom=Math.round(l.bottom),l.left=Math.round(l.left),l.right=Math.round(l.right)),l}positionElements(t,e,r,i){const[l="top",d="center"]=r.split("-"),f=i?this.offset(t,!1):this.position(t,!1),m=this.getAllStyles(e),b=parseFloat(m.marginTop),x=parseFloat(m.marginBottom),I=parseFloat(m.marginLeft),B=parseFloat(m.marginRight);let Z=0,ne=0;switch(l){case"top":Z=f.top-(e.offsetHeight+b+x);break;case"bottom":Z=f.top+f.height;break;case"left":ne=f.left-(e.offsetWidth+I+B);break;case"right":ne=f.left+f.width}switch(d){case"top":Z=f.top;break;case"bottom":Z=f.top+f.height-e.offsetHeight;break;case"left":ne=f.left;break;case"right":ne=f.left+f.width-e.offsetWidth;break;case"center":"top"===l||"bottom"===l?ne=f.left+f.width/2-e.offsetWidth/2:Z=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(ne)}px, ${Math.round(Z)}px)`;const we=e.getBoundingClientRect(),Be=document.documentElement,tt=window.innerHeight||Be.clientHeight,st=window.innerWidth||Be.clientWidth;return we.left>=0&&we.top>=0&&we.right<=st&&we.bottom<=tt}},new Date(1882,10,12),new Date(2174,10,25);let yO=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ls))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ls))},token:n,providedIn:"root"}),n})();class o0{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const kG=()=>{};let mB=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):kG}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,l=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${l+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(ee))},token:n,providedIn:"root"}),n})(),PG=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(wi(1)).subscribe(()=>{Yi(this._zone,this._el.nativeElement,(e,r)=>{r&&pv(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Yi(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(a.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),a.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class _B{close(t){}dismiss(t){}}class OG{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Mn.xQ,this._dismissed=new Mn.xQ,this._hidden=new Mn.xQ,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,d)=>{this._resolve=l,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(li(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(li(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,xt.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),oA(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var GC=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(GC||(GC={})),GC))();let FG=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new Mn.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Mn.xQ,this.hidden=new Mn.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(wi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=oA(Yi(this._zone,e,()=>e.classList.remove("show"),r),Yi(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};oA(Yi(this._zone,this._elRef.nativeElement,(l,d)=>{d&&pv(l),l.classList.add("show")},e),Yi(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Ts(e,"keydown").pipe(li(this._closed$),sr(i=>i.which===xn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(GC.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Ts(this._dialogEl.nativeElement,"mousedown").pipe(li(this._closed$),(0,br.b)(()=>r=!1),gr(()=>Ts(e,"mouseup").pipe(li(this._closed$),wi(1))),sr(({target:i})=>e===i)).subscribe(()=>{r=!0}),Ts(e,"click").pipe(li(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(GC.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=tB(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Yi(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(ee),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&a.Gf(E5,7),2&e){let i;a.iGM(i=a.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(a.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),a.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),a.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:hv,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(a.F$t(),a.TgZ(0,"div",0,1),a.TgZ(2,"div",2),a.Hsn(3),a.qZA(),a.qZA()),2&e&&a.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),yB=(()=>{class n{constructor(e,r,i,l,d,f){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=l,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new Mn.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=Ts(t,"focusin").pipe(li(e),(0,wt.U)(l=>l.target));Ts(t,"keydown").pipe(li(e),sr(l=>l.which===xn.Tab),tb(i)).subscribe(([l,d])=>{const[f,m]=tB(t);(d===f||d===t)&&l.shiftKey&&(m.focus(),l.preventDefault()),d===m&&!l.shiftKey&&(f.focus(),l.preventDefault())}),r&&Ts(t,"click").pipe(li(e),tb(i),(0,wt.U)(l=>l[1])).subscribe(l=>l.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}open(e,r,i,l){const d=l.container instanceof HTMLElement?l.container:wp(l.container)?this._document.querySelector(l.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),m=this._scrollBar.compensate(),b=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);const x=new _B,I=this._getContentRef(e,l.injector||r,i,x,l);let B=!1!==l.backdrop?this._attachBackdrop(e,d):void 0,Z=this._attachWindowComponent(e,d,I),ne=new OG(Z,I,B,l.beforeDismiss);return this._registerModalRef(ne),this._registerWindowCmpt(Z),ne.result.then(m,m),ne.result.then(b,b),x.close=we=>{ne.close(we)},x.dismiss=we=>{ne.dismiss(we)},this._applyWindowOptions(Z.instance,l),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),B&&B.instance&&(this._applyBackdropOptions(B.instance,l),B.changeDetectorRef.detectChanges()),Z.changeDetectorRef.detectChanges(),ne}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let l=e.resolveComponentFactory(PG).create(this._injector);return this._applicationRef.attachView(l.hostView),r.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,r,i){let d=e.resolveComponentFactory(FG).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{wp(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{wp(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,l,d){return i?i instanceof a.Rgc?this._createFromTemplateRef(i,l):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,l,d):new o0([])}_createFromTemplateRef(e,r){const l=e.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(l),new o0([l.rootNodes],l)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new o0([[r]])}_createFromComponent(e,r,i,l,d){const f=e.resolveComponentFactory(i),m=a.zs3.create({providers:[{provide:_B,useValue:l}],parent:r}),b=f.create(m),x=b.location.nativeElement;return d.scrollable&&x.classList.add("component-host-scrollable"),this._applicationRef.attachView(b.hostView),new o0([[x]],b.hostView,b)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(ee),a.LFG(mB),a.LFG(a.FYo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.z2F),a.LFG(a.gxx),a.LFG(ee),a.LFG(mB),a.LFG(a.FYo),a.LFG(a.R0b))},token:n,providedIn:"root"}),n})(),vB=(()=>{class n{constructor(e,r,i,l){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=l}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(yB),a.LFG(yO))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a._Vd),a.LFG(a.gxx),a.LFG(yB),a.LFG(yO))},token:n,providedIn:"root"}),n})();new a.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});class ZB{}class zB{}class gh{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),l=i.toLowerCase(),d=e.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof gh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new gh;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof gh?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const l=t.value;if(l){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===l.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class b7{encodeKey(t){return YB(t)}encodeValue(t){return YB(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const C7=/%(\d[a-f0-9])/gi,E7={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function YB(n){return encodeURIComponent(n).replace(C7,(t,e)=>{var r;return null!==(r=E7[e])&&void 0!==r?r:t})}function KB(n){return`${n}`}class Ep{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new b7,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[d,f]=-1==l?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,l)),t.decodeValue(i.slice(l+1))],m=e.get(d)||[];m.push(f),e.set(d,m)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(l=>{e.push({param:r,value:l,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ep({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(KB(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(KB(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class x7{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function QB(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function JB(n){return"undefined"!=typeof Blob&&n instanceof Blob}function XB(n){return"undefined"!=typeof FormData&&n instanceof FormData}class WC{constructor(t,e,r,i){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new gh),this.context||(this.context=new x7),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new Ep,this.urlWithParams=e}serializeBody(){return null===this.body?null:QB(this.body)||JB(this.body)||XB(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ep?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||XB(this.body)?null:JB(this.body)?this.body.type||null:QB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ep?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,l=t.responseType||this.responseType,d=void 0!==t.body?t.body:this.body,f=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,m=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let b=t.headers||this.headers,x=t.params||this.params;const I=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(b=Object.keys(t.setHeaders).reduce((B,Z)=>B.set(Z,t.setHeaders[Z]),b)),t.setParams&&(x=Object.keys(t.setParams).reduce((B,Z)=>B.set(Z,t.setParams[Z]),x)),new WC(r,i,d,{params:x,headers:b,context:I,reportProgress:m,responseType:l,withCredentials:f})}}var Oi=(()=>((Oi=Oi||{})[Oi.Sent=0]="Sent",Oi[Oi.UploadProgress=1]="UploadProgress",Oi[Oi.ResponseHeader=2]="ResponseHeader",Oi[Oi.DownloadProgress=3]="DownloadProgress",Oi[Oi.Response=4]="Response",Oi[Oi.User=5]="User",Oi))();class EO{constructor(t,e=200,r="OK"){this.headers=t.headers||new gh,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class xO extends EO{constructor(t={}){super(t),this.type=Oi.ResponseHeader}clone(t={}){return new xO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class RA extends EO{constructor(t={}){super(t),this.type=Oi.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new RA({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class e4 extends EO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function DO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let t4=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let l;if(e instanceof WC)l=e;else{let m,b;m=i.headers instanceof gh?i.headers:new gh(i.headers),i.params&&(b=i.params instanceof Ep?i.params:new Ep({fromObject:i.params})),l=new WC(e,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=(0,xt.of)(l).pipe(Mc(m=>this.handler.handle(m)));if(e instanceof WC||"events"===i.observe)return d;const f=d.pipe(sr(m=>m instanceof RA));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe((0,wt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,wt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,wt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));case"json":default:return f.pipe((0,wt.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new Ep).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,DO(i,r))}post(e,r,i={}){return this.request("POST",e,DO(i,r))}put(e,r,i={}){return this.request("PUT",e,DO(i,r))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ZB))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class n4{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const r4=new a.OlP("HTTP_INTERCEPTORS");let I7=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const A7=/^\)\]\}',?\n/;let i4=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ir.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((Z,ne)=>i.setRequestHeader(Z,ne.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const Z=e.detectContentTypeHeader();null!==Z&&i.setRequestHeader("Content-Type",Z)}if(e.responseType){const Z=e.responseType.toLowerCase();i.responseType="json"!==Z?Z:"text"}const l=e.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const Z=1223===i.status?204:i.status,ne=i.statusText||"OK",we=new gh(i.getAllResponseHeaders()),Be=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return d=new xO({headers:we,status:Z,statusText:ne,url:Be}),d},m=()=>{let{headers:Z,status:ne,statusText:we,url:Be}=f(),tt=null;204!==ne&&(tt=void 0===i.response?i.responseText:i.response),0===ne&&(ne=tt?200:0);let st=ne>=200&&ne<300;if("json"===e.responseType&&"string"==typeof tt){const gt=tt;tt=tt.replace(A7,"");try{tt=""!==tt?JSON.parse(tt):null}catch(_t){tt=gt,st&&(st=!1,tt={error:_t,text:tt})}}st?(r.next(new RA({body:tt,headers:Z,status:ne,statusText:we,url:Be||void 0})),r.complete()):r.error(new e4({error:tt,headers:Z,status:ne,statusText:we,url:Be||void 0}))},b=Z=>{const{url:ne}=f(),we=new e4({error:Z,status:i.status||0,statusText:i.statusText||"Unknown Error",url:ne||void 0});r.error(we)};let x=!1;const I=Z=>{x||(r.next(f()),x=!0);let ne={type:Oi.DownloadProgress,loaded:Z.loaded};Z.lengthComputable&&(ne.total=Z.total),"text"===e.responseType&&!!i.responseText&&(ne.partialText=i.responseText),r.next(ne)},B=Z=>{let ne={type:Oi.UploadProgress,loaded:Z.loaded};Z.lengthComputable&&(ne.total=Z.total),r.next(ne)};return i.addEventListener("load",m),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),e.reportProgress&&(i.addEventListener("progress",I),null!==l&&i.upload&&i.upload.addEventListener("progress",B)),i.send(l),r.next({type:Oi.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",m),i.removeEventListener("timeout",b),e.reportProgress&&(i.removeEventListener("progress",I),null!==l&&i.upload&&i.upload.removeEventListener("progress",B)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Ou))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const TO=new a.OlP("XSRF_COOKIE_NAME"),IO=new a.OlP("XSRF_HEADER_NAME");class s4{}let N7=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zr(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ee),a.LFG(a.Lbi),a.LFG(TO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),AO=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(s4),a.LFG(IO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),M7=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(r4,[]);this.chain=r.reduceRight((i,l)=>new n4(i,l),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(zB),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),R7=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:AO,useClass:I7}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:TO,useValue:e.cookieName}:[],e.headerName?{provide:IO,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[AO,{provide:r4,useExisting:AO,multi:!0},{provide:s4,useClass:N7},{provide:TO,useValue:"XSRF-TOKEN"},{provide:IO,useValue:"X-XSRF-TOKEN"}]}),n})(),k7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[t4,{provide:ZB,useClass:M7},i4,{provide:zB,useExisting:i4}],imports:[[R7.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const P7=["modalLogin"],O7=["modalConfiguracaoRobo"],F7=["modalBinanceApiKey"],L7=["modalAlertaEntrada"];function V7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",13),a.TgZ(1,"button",14),a.NdJ("click",function(){return a.CHM(e),a.oxw().novoSinal()}),a._uU(2,"Novo sinal"),a.qZA(),a.qZA()}}function B7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().openModalAlertaEntrada()}),a._UZ(2,"i",16),a.qZA(),a.TgZ(3,"button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().openModalConfiguracaoRobo()}),a._UZ(4,"i",17),a.qZA(),a.TgZ(5,"button",18),a.NdJ("click",function(){return a.CHM(e),a.oxw().AuthService.SignOut()}),a._UZ(6,"i",19),a.qZA(),a.qZA()}}function U7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",31),a.TgZ(1,"div",32),a.TgZ(2,"input",33),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.valor=i})("blur",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).setNextValueEntrada(l,d)}),a.qZA(),a.qZA(),a.TgZ(3,"div",32),a.TgZ(4,"input",34),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.descricao=i}),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(2),a.Q6J("ngModel",e.valor),a.xp6(2),a.Q6J("ngModel",e.descricao)}}function H7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",20),a.TgZ(1,"div",21),a.TgZ(2,"label",22),a._uU(3,"Data"),a.qZA(),a.TgZ(4,"input",23),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.data=i}),a.qZA(),a.qZA(),a.TgZ(5,"div",21),a.TgZ(6,"label",22),a._uU(7,"Moeda"),a.qZA(),a.TgZ(8,"input",24),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.moeda=i}),a.qZA(),a.qZA(),a.TgZ(9,"div",21),a.TgZ(10,"label",22),a._uU(11,"Tipo"),a.qZA(),a.TgZ(12,"select",25),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.tipo=i}),a.TgZ(13,"option",26),a._uU(14,"LONG"),a.qZA(),a.TgZ(15,"option",27),a._uU(16,"SHORT"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",21),a.TgZ(18,"label",22),a._uU(19,"Entradas"),a.qZA(),a.YNc(20,U7,5,2,"div",28),a.qZA(),a.TgZ(21,"div",21),a.TgZ(22,"button",29),a.NdJ("click",function(){return a.CHM(e),a.oxw().salvarEntrada()}),a._uU(23,"Salvar"),a.qZA(),a.TgZ(24,"button",30),a.NdJ("click",function(){return a.CHM(e),a.oxw().showFormNovoSinal=!1}),a._uU(25,"Cancelar"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngModel",e.sinalModel.data),a.xp6(4),a.Q6J("ngModel",e.sinalModel.moeda),a.xp6(4),a.Q6J("ngModel",e.sinalModel.tipo),a.xp6(8),a.Q6J("ngForOf",e.sinalModel.entradas)}}function $7(n,t){1&n&&a._UZ(0,"i",53)}function j7(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function G7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",54),a.TgZ(1,"span",55),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function W7(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function q7(n,t){if(1&n&&(a.TgZ(0,"div",58),a._UZ(1,"i",59),a.TgZ(2,"small"),a._uU(3),a.YNc(4,W7,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function Z7(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function z7(n,t){if(1&n&&(a.TgZ(0,"div",58),a._UZ(1,"i",59),a.TgZ(2,"small"),a._uU(3),a.qZA(),a.YNc(4,Z7,2,1,"ng-container",3),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.Oqu(null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function Y7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,q7,5,2,"div",56),a.TgZ(2,"div"),a.TgZ(3,"i",57),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",55),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,z7,5,2,"div",56),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function K7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",39),a.TgZ(1,"div",40),a.TgZ(2,"span",41),a.TgZ(3,"i",42),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"h5",43),a.YNc(5,$7,1,0,"i",44),a.TgZ(6,"i",45),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"h5"),a.YNc(10,j7,2,1,"span",3),a.qZA(),a.TgZ(11,"h6",46),a._uU(12),a.ALo(13,"date"),a.qZA(),a.YNc(14,G7,4,1,"div",47),a.TgZ(15,"div"),a.TgZ(16,"ul",48),a.YNc(17,Y7,8,5,"li",49),a.qZA(),a.qZA(),a.TgZ(18,"div"),a.TgZ(19,"span",41),a.TgZ(20,"button",50),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(21,"i",51),a.qZA(),a.TgZ(22,"button",18),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(23,"i",52),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(2),a.Q6J("ngIf",r.sinaisCompradosMap[e.id]),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),a.xp6(2),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(13,11,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function Q7(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"h3",35),a._uU(2),a.TgZ(3,"button",36),a.NdJ("click",function(){return a.CHM(e),a.MAs(5).classList.toggle("hidden")}),a.qZA(),a.qZA(),a.TgZ(4,"div",31,37),a.YNc(6,K7,24,14,"div",38),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(2),a.hij("Favoritados (",e.sinaisPinnedList.length,") "),a.xp6(4),a.Q6J("ngForOf",e.sinaisPinnedList)}}function J7(n,t){1&n&&a._UZ(0,"i",53)}function X7(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function eW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",54),a.TgZ(1,"span",55),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function tW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function nW(n,t){if(1&n&&(a.TgZ(0,"div",58),a._UZ(1,"i",59),a.TgZ(2,"small"),a._uU(3),a.YNc(4,tW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij(" ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function rW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function iW(n,t){if(1&n&&(a.TgZ(0,"div",58),a._UZ(1,"i",59),a.TgZ(2,"small"),a._uU(3),a.YNc(4,rW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function sW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,nW,5,2,"div",56),a.TgZ(2,"div"),a.TgZ(3,"i",57),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",55),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,iW,5,2,"div",56),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function oW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",62),a.TgZ(1,"div",40),a.TgZ(2,"span",41),a.TgZ(3,"i",42),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"h5",43),a.YNc(5,J7,1,0,"i",44),a.TgZ(6,"i",45),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"h5"),a.YNc(10,X7,2,1,"span",3),a.qZA(),a.TgZ(11,"h6",46),a._uU(12),a.ALo(13,"date"),a.qZA(),a.YNc(14,eW,4,1,"div",47),a.TgZ(15,"div"),a.TgZ(16,"ul",48),a.YNc(17,sW,8,5,"li",49),a.qZA(),a.qZA(),a.TgZ(18,"div"),a.TgZ(19,"span",41),a.TgZ(20,"button",50),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(21,"i",51),a.qZA(),a.TgZ(22,"button",18),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(23,"i",52),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short")("id",e.id),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(2),a.Q6J("ngIf",r.sinaisCompradosMap[e.id]),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),a.xp6(2),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(13,12,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function aW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"h3",35),a._uU(2),a.TgZ(3,"button",36),a.NdJ("click",function(){return a.CHM(e),a.MAs(5).classList.toggle("hidden")}),a.qZA(),a.qZA(),a.TgZ(4,"div",31,60),a.YNc(6,oW,24,15,"div",61),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(2),a.hij("Sinais na entrada (",e.watchersEntradaList.length,") "),a.xp6(4),a.Q6J("ngForOf",e.watchersEntradaList)}}function lW(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function cW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",54),a.TgZ(1,"span",55),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function uW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function dW(n,t){if(1&n&&(a.TgZ(0,"div",58),a._UZ(1,"i",59),a.TgZ(2,"small"),a._uU(3),a.YNc(4,uW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function hW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function fW(n,t){if(1&n&&(a.TgZ(0,"div",58),a._UZ(1,"i",59),a.TgZ(2,"small"),a._uU(3),a.YNc(4,hW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function pW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,dW,5,2,"div",56),a.TgZ(2,"div"),a.TgZ(3,"i",57),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",55),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,fW,5,2,"div",56),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function gW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",39),a.TgZ(1,"div",40),a.TgZ(2,"span",41),a.TgZ(3,"i",42),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"i",45),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(5,"h5",43),a.TgZ(6,"strong"),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"h5"),a.YNc(9,lW,2,1,"span",3),a.qZA(),a.TgZ(10,"h6",46),a._uU(11),a.ALo(12,"date"),a.qZA(),a.YNc(13,cW,4,1,"div",47),a.TgZ(14,"div"),a.TgZ(15,"ul",48),a.YNc(16,pW,8,5,"li",49),a.qZA(),a.qZA(),a.TgZ(17,"div"),a.TgZ(18,"span",41),a.TgZ(19,"button",50),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(20,"i",51),a.qZA(),a.TgZ(21,"button",18),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(22,"i",52),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),a.xp6(3),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(12,10,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function mW(n,t){if(1&n&&(a.TgZ(0,"div",63),a.TgZ(1,"h3",35),a._uU(2,"Lista de Sinais"),a.qZA(),a.TgZ(3,"div",31),a.YNc(4,gW,23,13,"div",38),a.qZA(),a.qZA()),2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.sinaisList)}}function _W(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",64),a.TgZ(1,"h4",65),a._uU(2,"Sign In"),a.qZA(),a.qZA(),a.TgZ(3,"div",66),a.TgZ(4,"div",5),a.TgZ(5,"div",5),a.TgZ(6,"div",5,67),a.TgZ(8,"div",68),a._UZ(9,"input",69,70),a.qZA(),a.TgZ(11,"div",68),a.TgZ(12,"label"),a._uU(13,"Password"),a.qZA(),a.TgZ(14,"div",71),a.TgZ(15,"input",72,73),a.NdJ("keydown",function(i){const d=a.CHM(e).$implicit,f=a.MAs(10),m=a.MAs(16);return a.oxw().submitSeach(i,f.value,m.value,d)}),a.qZA(),a.TgZ(17,"div",74),a.TgZ(18,"span",75),a.NdJ("click",function(){a.CHM(e);const i=a.oxw();return i.showPassword=!i.showPassword}),a._UZ(19,"i",76),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"div",68),a.TgZ(21,"button",77),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.MAs(10),f=a.MAs(16);return a.oxw().sigin(d.value,f.value,l)}),a._uU(22,"Login"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(15),a.Q6J("type",e.showPassword?"text":"password"),a.xp6(4),a.Q6J("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function yW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",64),a.TgZ(1,"h4",78),a._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),a.qZA(),a.TgZ(3,"button",79),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",80),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",66),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,67),a.TgZ(11,"div",68),a.TgZ(12,"label"),a._uU(13,"Valor entrada em USDT"),a.qZA(),a.TgZ(14,"input",81),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.valorEntradaUsdt=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",68),a.TgZ(16,"label"),a._uU(17,"M\xe1ximo de rob\xf4s ativos"),a.qZA(),a.TgZ(18,"input",82),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.maximoRobosAtivos=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",83),a.TgZ(20,"input",84),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.ativo=i}),a.qZA(),a.TgZ(21,"label",85),a._uU(22," Ativo "),a.qZA(),a.qZA(),a.TgZ(23,"div",68),a.TgZ(24,"button",77),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().salvarConfiguracacaoRobo(l)}),a._uU(25," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),a.xp6(4),a.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),a.xp6(2),a.Q6J("ngModel",e.configuracaoRobo.ativo)}}function vW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",64),a.TgZ(1,"h4",78),a._uU(2,"Salvar Binace API KEY"),a.qZA(),a.TgZ(3,"button",79),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",80),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",66),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,67),a.TgZ(11,"div",68),a.TgZ(12,"label"),a._uU(13,"API KEY"),a.qZA(),a.TgZ(14,"input",86),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiKey=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",68),a.TgZ(16,"label"),a._uU(17,"API SECRET"),a.qZA(),a.TgZ(18,"input",86),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiSecret=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",68),a.TgZ(20,"button",77),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(21," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.binanceModel.apiKey),a.xp6(4),a.Q6J("ngModel",e.binanceModel.apiSecret)}}function bW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"div"),a.TgZ(3,"strong"),a._uU(4),a.qZA(),a.qZA(),a.TgZ(5,"div"),a.TgZ(6,"small"),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"td"),a.TgZ(9,"span",93),a.TgZ(10,"strong"),a._uU(11),a.qZA(),a.qZA(),a.qZA(),a.TgZ(12,"td"),a.TgZ(13,"button",94),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).comprarAlerta(l)}),a._uU(14," Comprar "),a.qZA(),a.TgZ(15,"button",95),a.NdJ("click",function(){const l=a.CHM(e).index;return a.oxw(2).removerAlerta(l)}),a._uU(16," excluir "),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(4),a.Oqu(e.sinal.moeda),a.xp6(3),a.Oqu(e.dataHora),a.xp6(2),a.Q6J("ngClass","LONG"===e.sinal.tipo?"text-success":"text-danger"),a.xp6(2),a.Oqu(e.sinal.tipo)}}function wW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",64),a.TgZ(1,"h4",87),a._uU(2,"Alerta de entrada"),a.qZA(),a.TgZ(3,"button",79),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",80),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",66),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,67),a.TgZ(11,"table",88),a.YNc(12,bW,17,4,"tr",89),a.qZA(),a.TgZ(13,"div",68),a.TgZ(14,"div",90),a.TgZ(15,"button",91),a.NdJ("click",function(){return a.CHM(e),a.oxw().alertaEntradasList=[]}),a._uU(16," Excluir todos"),a.qZA(),a.qZA(),a.TgZ(17,"div",41),a.TgZ(18,"button",92),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(19," Fechar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(12),a.Q6J("ngForOf",e.alertaEntradasList)}}Wc.extend(Qt);let CW=(()=>{class n{constructor(e,r,i,l,d){this.db=e,this.AuthService=r,this.modalService=i,this.config=l,this.http=d,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.sinaisList=[],this.sinaisMap={},this.coinCandleWatcherMap={},this.sinaisPinnedList=[],this.sinaisIDPinnedList=[],this.watchersEntradaList=[],this.sinaisBloqueadosList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.canSendNotification=!1,this._1second=1e3,this._5seconds=5*this._1second,this.sinaisCompradosMap={},this.editandoSinalIdx=-1,this.configuracaoRobo={id:null,valorEntradaUsdt:10,maximoRobosAtivos:10,ativo:!1,sinaisBloqueadosList:[]},this.binanceModel={apiKey:"",apiSecret:""},this.modalAberto=!1,this.alertaEntradasList=[],this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){"denied"===Notification.permission?Notification.requestPermission().then(e=>{this.canSendNotification="granted"===e}):"granted"===Notification.permission&&(this.canSendNotification=!0),setTimeout(()=>{this.AuthService.isLoggedIn?(this.startPriceWatcher(),this.loadSinaisList(),this.loadConfiguracaoRobo(),this.checkBinaceApiKey()):this.openModalLogin()},1e3)}startPriceWatcher(){const e=function(n=0,t=qc.P){return(!(0,j0.k)(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=qc.P),new ir.y(e=>(e.add(t.schedule(la,n,{subscriber:e,counter:0,period:n})),e))}(this._5seconds);this.populatePriceCoinMap(),e.subscribe(r=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let i=[];r.forEach(d=>{this.PriceCoinMap[d.symbol]={price:d.price},i.push(d.symbol)});let l=this;i.sort(),i.forEach(d=>{l.PriceCoinList.push({symbol:d,price:this.PriceCoinMap[d].price})}),this.updatePricePositionOnSinais()})}updatePricePositionOnSinais(){this.sinaisList&&this.sinaisList.length>0&&(this.sinaisList.forEach((e,r)=>{let i=0;try{i=parseFloat(this.PriceCoinMap[e.moeda].price)}catch(l){}if(i){e.priceCoin=i;let l=-1,d=0;"LONG"===e.tipo?(d=(e.entradas[e.entradas.length-1].valor-e.entradas[0].valor)/100,e.priceCoinPercentage=i>e.entradas[0].valor?((i-e.entradas[0].valor)/d).toFixed(2):0):(d=(e.entradas[0].valor-e.entradas[e.entradas.length-1].valor)/100,e.priceCoinPercentage=i<e.entradas[0].valor?(100-(i-e.entradas[e.entradas.length-1].valor)/d).toFixed(2):0);for(let f=0;f<e.entradas.length;f++){let b=parseFloat(e.entradas[f].valor);if("LONG"===e.tipo){if(0==f||f===e.entradas.length-1){if(i<=b){l=f;break}if(f===e.entradas.length-1&&i>b){l=1e3;break}continue}if(i>=parseFloat(e.entradas[f-1].valor)&&i<=b){l=f;break}}else if("SHORT"===e.tipo){if(0==f||f===e.entradas.length-1){if(i>=b){l=f;break}if(f===e.entradas.length-1&&i<b){l=1e3;break}continue}if(i<=parseFloat(e.entradas[f-1].valor)&&i>=b){l=f;break}}}this.sinaisList[r].indexPricePosition=l;try{-1===this.sinaisBloqueadosList.indexOf(e.id)&&this.coinCandleWatcherMap[e.id].loadCandleList(e)}catch(f){}}}),this.sortWatcherList(),this.sortWatcherEntradaList())}sortWatcherEntradaList(){this.watchersEntradaList=[],this.sinaisList.forEach(r=>{r.indexPricePosition>=1&&this.watchersEntradaList.push(r)}),this.watchersEntradaList.sort((r,i)=>{let l=0;return l=r.indexPricePosition>0?r.indexPricePosition-i.indexPricePosition:-1,l||r.priceCoinPercentage-i.priceCoinPercentage})}castPrice(e){return parseFloat(e)}novoSinal(){let e=Wc().format("YYYY-MM-DD");this.editandoSinalIdx=-1,this.sinalModel={data:e,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let l=Object.assign({},this.entradaModel);l.descricao=r[i],this.sinalModel.entradas.push(l)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadSinaisComprados(){this.sinaisCompradosObservable=this.db.object("/sinais-comprados/"+this.AuthService.userData.uid).valueChanges(),this.sinaisCompradosObservable.subscribe(r=>{if(r){try{for(let l in r)if(!this.sinaisCompradosMap[l]){let d=this.sinaisMap[l];new Notification("Binace watcher",{body:`Sinal comprado ${d.moeda}::${d.tipo}`,icon:"/assets/bot.png"})}}catch(l){}this.sinaisCompradosMap=r}else this.sinaisCompradosMap={}})}loadSinaisList(){this.sinaisFirebaseObservable=this.db.list("/sinais").valueChanges(),this.sinaisFirebaseObservable.subscribe(e=>{this.sinaisList=e,this.sinaisList&&this.sinaisList.length>0&&this.sinaisList.forEach(r=>{if(this.sinaisMap[r.id]=r,this.coinCandleWatcherMap[r.id]=new gS(this.http,this),r.entradas&&r.entradas.length>0){let i=parseFloat(r.entradas[0].valor),l=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?i+(l-i)/4:i-(i-l)/4,r.sugestao){let d=r.entradas[r.entradas.length-1].valor,f=d.indexOf(".")-1,m=d.substr(f).length;r.sugestao=r.sugestao.toFixed(m)}}}),this.loadSinaisFavoritos(),this.updatePricePositionOnSinais()})}sortWatcherList(){this.sinaisList.sort((e,r)=>{let i=Wc(e.data).toDate().getTime(),l=Wc(r.data).toDate().getTime(),d=-10;i==l?d=0:i>l?d=-1:i<l&&(d=1);let f=e.moeda.localeCompare(r.moeda);return d||f})}salvarEntrada(){let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase().trim(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!this.PriceCoinMap[e.moeda])return void alert("Moeda inv\xe1lida");if(!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}updateEntrada(e){this.db.object("/sinais/"+e.id).set(e).then(()=>{})}editarSinal(e,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(e,r){var i=this;return(0,$e.Z)(function*(){if(window.confirm("Realmente deseja excluir o sinal?")){try{i.coinCandleWatcherMap[e.id].stop(),delete i.coinCandleWatcherMap[e.id]}catch(l){}yield i.db.object("/sinais/"+e.id).remove()}})()}playAlert(){notificationAudio.play()}toggleAlcancado(e,r){r.alcancado=!r.alcancado||!r.alcancado,this.updateEntrada(e)}togglePinWatcher(e){var r=this;return(0,$e.Z)(function*(){let i=r.sinaisIDPinnedList.indexOf(e.id);if(i>-1){r.sinaisIDPinnedList.splice(i,1);for(let d=0;d<r.sinaisPinnedList.length;d++)if(r.sinaisPinnedList[d].id===e.id){r.sinaisPinnedList.splice(d,1);break}}else r.sinaisIDPinnedList.push(e.id),r.sinaisPinnedList.push(e);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.sinaisIDPinnedList).then(()=>{}).catch(d=>{console.error(d)})})()}loadSinaisFavoritos(){this.sinaisPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.sinaisIDPinnedList=r,this.sinaisIDPinnedList.forEach(i=>{this.sinaisList.forEach(l=>{l.id===i&&this.sinaisPinnedList.push(l)})}))})}toggleSinalBloqueado(e){var r=this;return(0,$e.Z)(function*(){r.configuracaoRobo.sinaisBloqueadosList||(r.configuracaoRobo.sinaisBloqueadosList=[]);let i=r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id);i>-1?r.configuracaoRobo.sinaisBloqueadosList.splice(i,1):r.configuracaoRobo.sinaisBloqueadosList.push(e.id),yield r.salvarConfiguracacaoRobo()})()}copyEntry(e){this.canCopyClipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Entrada ${e} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(e=>{},e=>{})}sigin(e,r,i){this.AuthService.SignIn(e.trim(),r).then(()=>{this.startPriceWatcher(),this.loadSinaisList(),this.checkBinaceApiKey(),i&&i.close()}).catch(l=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(e,r,i,l){13==e.keyCode&&this.sigin(r,i,l)}signOut(){this.AuthService.SignOut()}submitForm(e,r){13==r.keyCode&&e.submit()}loadConfiguracaoRobo(){var e;this.sinaisPinnedList=[],this.configuracaoRoboObservable=this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).valueChanges(),null===(e=this.configuracaoRoboObservable)||void 0===e||e.subscribe(r=>{r&&(this.configuracaoRobo=r,this.configuracaoRobo.sinaisBloqueadosList?this.sinaisBloqueadosList=this.configuracaoRobo.sinaisBloqueadosList:(this.configuracaoRobo.sinaisBloqueadosList=[],this.configuracaoRobo.sinaisBloqueadosList=[]))})}openModalConfiguracaoRobo(){this.modalService.open(this.modalConfiguracaoRobo,{centered:!0}).result.then(e=>{},e=>{})}salvarConfiguracacaoRobo(e){var r=this;return(0,$e.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}checkBinaceApiKey(){let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret");!e&&!r&&this.openModalBinanceApiKey()}openModalBinanceApiKey(){this.modalService.open(this.modalBinanceApiKey,{centered:!0}).result.then(e=>{e&&this.binanceModel.apiKey&&this.binanceModel.apiSecret&&(window.localStorage.setItem("apiKey",this.binanceModel.apiKey.trim()),window.localStorage.setItem("apiSecret",this.binanceModel.apiSecret.trim()),window.toastr.success("Chaves salvas!","Sucesso!"))},e=>{})}removerAlerta(e){this.alertaEntradasList.splice(e,1)}acionarAlerta(e){let r=this.sinaisBloqueadosList.indexOf(e.sinal.id)>-1,i=this.alertaEntradasList.filter(d=>d.id==e.id);i.length>0||r||(0===i.length&&this.alertaEntradasList.splice(0,0,e),this.modalAberto||this.openModalAlertaEntrada(),window.document.hasFocus())||(this.playAlert(),new Notification("Binace watcher",{body:`Poss\xedvel compra em ${e.sinal.moeda}::${e.sinal.tipo}`,icon:"/assets/bot.png"}))}openModalAlertaEntrada(){this.config.backdrop="static",this.config.keyboard=!1,this.modalAberto=!0,this.modalService.open(this.modalAlertaEntrada,{centered:!0}).result.then(e=>{this.modalAberto=!1},e=>{this.modalAberto=!1})}setNextValueEntrada(e,r){e.valor&&this.sinalModel.entradas[r+1]&&(this.sinalModel.entradas[r+1].valor=e.valor)}comprarAlerta(e){let r=window.localStorage.getItem("apiKey"),i=window.localStorage.getItem("apiSecret");r&&i?new Ol(this.sinaisMap[e.sinal.id],this.configuracaoRobo):window.toastr.error("Erro","Sem configura\xe7\xe3o da binance")}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(nw),a.Y36(wH),a.Y36(vB),a.Y36(yO),a.Y36(t4))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(1&e&&(a.Gf(P7,5),a.Gf(O7,5),a.Gf(F7,5),a.Gf(L7,5)),2&e){let i;a.iGM(i=a.CRH())&&(r.modalLogin=i.first),a.iGM(i=a.CRH())&&(r.modalConfiguracaoRobo=i.first),a.iGM(i=a.CRH())&&(r.modalBinanceApiKey=i.first),a.iGM(i=a.CRH())&&(r.modalAlertaEntrada=i.first)}},decls:19,vars:6,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,""],["class","col-md-8 col-lg-6",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["modalLogin",""],["modalConfiguracaoRobo",""],["modalBinanceApiKey",""],["modalAlertaEntrada",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-white",3,"click"],[1,"fa","fa-flag-checkered","fa-2x"],[1,"fa","fa-cogs","fa-2x"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-8","col-lg-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange","blur"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-white"],[1,"btn","bt-sm","btn-outline-secondary","fa","fa-chevron-up",3,"click"],["divPinnedList",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"float-right"],[1,"fa","clickable",3,"ngClass","click"],[1,"card-title"],["class","mr-2 fa fa-android text-success",4,"ngIf"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass","click"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],[1,"mr-2","fa","fa-android","text-success"],[1,"alert","alert-primary"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["divWatchersEntrada",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass","id",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass","id"],[1,"container","mt-4"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],[1,"fa",3,"ngClass"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"],["type","text","placeholder","","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","",1,"modal-title"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],[1,"float-left"],["value","Login",1,"btn","btn-link","text-danger",3,"click"],["type","submit","value","Login",1,"btn","btn-default",3,"click"],[3,"ngClass"],[1,"btn","btn-button","btn-sm","btn-success",3,"click"],[1,"btn","btn-button","btn-sm","btn-danger",3,"click"]],template:function(e,r){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.YNc(2,V7,3,0,"div",2),a.YNc(3,B7,7,0,"div",3),a.qZA(),a.qZA(),a.TgZ(4,"main",4),a.TgZ(5,"section",5),a.TgZ(6,"div",1),a.YNc(7,H7,26,4,"div",6),a.qZA(),a.YNc(8,Q7,7,2,"div",7),a.YNc(9,aW,7,2,"div",7),a.YNc(10,mW,5,1,"div",8),a.qZA(),a.YNc(11,_W,23,2,"ng-template",null,9,a.W1O),a.YNc(13,yW,26,3,"ng-template",null,10,a.W1O),a.YNc(15,vW,22,2,"ng-template",null,11,a.W1O),a.YNc(17,wW,20,1,"ng-template",null,12,a.W1O),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(1),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(4),a.Q6J("ngIf",r.showFormNovoSinal),a.xp6(1),a.Q6J("ngIf",r.sinaisPinnedList&&r.sinaisPinnedList.length>0),a.xp6(1),a.Q6J("ngIf",r.watchersEntradaList&&r.watchersEntradaList.length>0),a.xp6(1),a.Q6J("ngIf",r.sinaisList&&r.sinaisList.length>0))},directives:[Or,lA,oV,JP,yA,rO,sO,nn,_o,vA,LP],pipes:[hc],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.shake-element[_ngcontent-%COMP%]{animation:shake .5s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();class xW{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new DW(t,this.dueTime,this.scheduler))}}class DW extends yr.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(TW,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function TW(n){n.debouncedNext()}const o4="firebasestorage.googleapis.com",a4="storageBucket";class ui extends Y.ZR{constructor(t,e){super(SO(t),`Firebase Storage: ${e} (${SO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ui.prototype)}_codeEquals(t){return SO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function SO(n){return"storage/"+n}function NO(){return new ui("unknown","An unknown error occurred, please check the error payload for server response.")}function l4(){return new ui("canceled","User canceled the upload/download.")}function c4(){return new ui("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function yv(n){return new ui("invalid-argument",n)}function u4(){return new ui("app-deleted","The Firebase app was deleted.")}function d4(n){return new ui("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qC(n,t){return new ui("invalid-format","String does not match format '"+n+"': "+t)}function ZC(n){throw new ui("internal-error","Internal error: "+n)}class qs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=qs.makeFromUrl(t,e)}catch(i){return new qs(t,"")}if(""===r.path)return r;throw function(n){return new ui("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(_t){_t.path_=decodeURIComponent(_t.path)}const I=e.replace(/[.]/g,"\\."),gt=[{regex:f,indices:{bucket:1,path:3},postModify:function(_t){"/"===_t.path.charAt(_t.path.length-1)&&(_t.path_=_t.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${I}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${e===o4?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let _t=0;_t<gt.length;_t++){const jt=gt[_t],wn=jt.regex.exec(t);if(wn){let di=wn[jt.indices.path];di||(di=""),r=new qs(wn[jt.indices.bucket],di),jt.postModify(r);break}}if(null==r)throw function(n){return new ui("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class UW{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function kA(n){return"string"==typeof n||n instanceof String}function h4(n){return MO()&&n instanceof Blob}function MO(){return"undefined"!=typeof Blob}function RO(n,t,e,r){if(r<t)throw yv(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw yv(`Invalid value for '${n}'. Expected ${e} or less.`)}function mh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function f4(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var xp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(xp||(xp={})),xp))();class qW{constructor(t,e,r,i,l,d,f,m,b,x,I){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=x,this.connectionFactory_=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,Z)=>{this.resolve_=B,this.reject_=Z,this.start_()})}start_(){const e=(r,i)=>{const l=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(m)?l():l(m)}catch(m){d(m)}else if(null!==f){const m=NO();m.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,m):m)}else d(i.canceled?this.appDelete_?u4():l4():new ui("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new PA(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,i=null,l=null,d=!1,f=0;function m(){return 2===f}let b=!1;function x(...Be){b||(b=!0,t.apply(null,Be))}function I(Be){i=setTimeout(()=>{i=null,n(Z,m())},Be)}function B(){l&&clearTimeout(l)}function Z(Be,...tt){if(b)return void B();if(Be)return B(),void x.call(null,Be,...tt);if(m()||d)return B(),void x.call(null,Be,...tt);let gt;r<64&&(r*=2),1===f?(f=2,gt=0):gt=1e3*(r+Math.random()),I(gt)}let ne=!1;function we(Be){ne||(ne=!0,B(),!b&&(null!==i?(Be||(f=2),clearTimeout(i),I(0)):Be||(f=1)))}return I(0),l=setTimeout(()=>{d=!0,we(!0)},e),we}((r,i)=>{if(i)return void r(!1,new PA(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const f=l.getErrorCode()===xp.NO_ERROR,m=l.getStatus();if(!f||this.isRetryStatusCode_(m)){const x=l.getErrorCode()===xp.ABORT;return void r(!1,new PA(!1,null,x))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new PA(b,l))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),l=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||l}}class PA{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function XW(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(MO())return new Blob(n);throw new ui("unsupported-environment","This browser doesn't seem to support creating Blobs")}const va={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kO{constructor(t,e){this.data=t,this.contentType=e||null}}function PO(n,t){switch(n){case va.RAW:return new kO(p4(t));case va.BASE64:case va.BASE64URL:return new kO(g4(n,t));case va.DATA_URL:return new kO(function(n){const t=new m4(n);return t.base64?g4(va.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw qC(va.DATA_URL,"Malformed data URL.")}return p4(t)}(t.rest)}(t),function(n){return new m4(n).contentType}(t))}throw NO()}function p4(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function g4(n,t){switch(n){case va.BASE64:{const i=-1!==t.indexOf("-"),l=-1!==t.indexOf("_");if(i||l)throw qC(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case va.BASE64URL:{const i=-1!==t.indexOf("+"),l=-1!==t.indexOf("/");if(i||l)throw qC(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(i){throw qC(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class m4{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw qC(va.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class Du{constructor(t,e){let r=0,i="";h4(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(h4(this.data_)){const i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new Du(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new Du(r,!0)}}static getBlob(...t){if(MO()){const e=t.map(r=>r instanceof Du?r.data_:r);return new Du(XW.apply(null,e))}{const e=t.map(d=>kA(d)?PO(va.RAW,d).data:d.data_);let r=0;e.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let l=0;return e.forEach(d=>{for(let f=0;f<d.length;f++)i[l++]=d[f]}),new Du(i,!0)}}uploadData(){return this.data_}}function OO(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function _4(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function lq(n,t){return t}class go{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||lq}}let OA=null;function zC(){if(OA)return OA;const n=[];n.push(new go("bucket")),n.push(new go("generation")),n.push(new go("metageneration")),n.push(new go("name","fullPath",!0));const e=new go("name");e.xform=function(l,d){return function(n){return!kA(n)||n.length<2?n:_4(n)}(d)},n.push(e);const i=new go("size");return i.xform=function(l,d){return void 0!==d?Number(d):d},n.push(i),n.push(new go("timeCreated")),n.push(new go("updated")),n.push(new go("md5Hash",null,!0)),n.push(new go("cacheControl",null,!0)),n.push(new go("contentDisposition",null,!0)),n.push(new go("contentEncoding",null,!0)),n.push(new go("contentLanguage",null,!0)),n.push(new go("contentType",null,!0)),n.push(new go("metadata","customMetadata",!0)),OA=n,OA}function y4(n,t,e){const r=OO(t);return null===r?null:function(n,t,e){const r={type:"file"},i=e.length;for(let l=0;l<i;l++){const d=e[l];r[d.local]=d.xform(r,t[d.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const l=new qs(n.bucket,n.fullPath);return t._makeStorageReference(l)}})}(r,n),r}(n,r,e)}function FO(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const l=t[i];l.writable&&(e[l.server]=n[l.local])}return JSON.stringify(e)}const v4="prefixes";class Tu{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Iu(n){if(!n)throw NO()}function FA(n,t){return function(r,i){const l=y4(n,i,t);return Iu(null!==l),l}}function vv(n){return function(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new ui("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ui("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new ui("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new ui("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function YC(n){const t=vv(n);return function(r,i){let l=t(r,i);return 404===r.getStatus()&&(l=function(n){return new ui("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function w4(n,t,e){const i=mh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Tu(i,"GET",FA(n,e),d);return f.errorHandler=YC(t),f}function _q(n,t,e,r,i){const l={};l.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(l.delimiter=e),r&&(l.pageToken=r),i&&(l.maxResults=i);const f=mh(t.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,x=new Tu(f,"GET",function(n,t){return function(r,i){const l=function(n,t,e){const r=OO(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[v4])for(const i of e[v4]){const l=i.replace(/\/$/,""),d=n._makeStorageReference(new qs(t,l));r.prefixes.push(d)}if(e.items)for(const i of e.items){const l=n._makeStorageReference(new qs(t,i.name));r.items.push(l)}return r}(n,t,r)}(n,t,i);return Iu(null!==l),l}}(n,t.bucket),b);return x.urlParams=l,x.errorHandler=vv(t),x}function E4(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class LA{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function LO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Iu(!1)}return Iu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const Dq={STATE_CHANGED:"state_changed"},mo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VO(n){switch(n){case"running":case"pausing":case"canceling":return mo.RUNNING;case"paused":return mo.PAUSED;case"success":return mo.SUCCESS;case"canceled":return mo.CANCELED;case"error":default:return mo.ERROR}}class Tq{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function bv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class Aq extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw ZC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ZC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ZC("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw ZC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ZC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function uc(){return new Aq}class I4{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=zC(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d=E4(t,r,i),f={name:d.fullPath},m=mh(l,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},I=FO(d,e),ne=new Tu(m,"POST",function(we){let Be;LO(we);try{Be=we.getResponseHeader("X-Goog-Upload-URL")}catch(tt){Iu(!1)}return Iu(kA(Be)),Be},n.maxUploadRetryTime);return ne.urlParams=f,ne.headers=x,ne.body=I,ne.errorHandler=vv(t),ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function(n,t,e,r){const m=new Tu(e,"POST",function(b){const x=LO(b,["active","final"]);let I=null;try{I=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Z){Iu(!1)}I||Iu(!1);const B=Number(I);return Iu(!isNaN(B)),new LA(B,r.size(),"final"===x)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=vv(t),m}(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(i,uc,e,r);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new LA(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let d;try{d=function(n,t,e,r,i,l,d,f){const m=new LA(0,0);if(d?(m.current=d.current,m.total=d.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw new ui("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=m.total-m.current;let x=b;i>0&&(x=Math.min(x,i));const I=m.current,ne={"X-Goog-Upload-Command":x===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},we=r.slice(I,I+x);if(null===we)throw c4();const gt=new Tu(e,"POST",function(_t,jt){const wn=LO(_t,["active","final"]),Jr=m.current+x,di=r.size();let HO;return HO="final"===wn?FA(t,l)(_t,jt):null,new LA(Jr,di,"final"===wn,HO)},t.maxUploadRetryTime);return gt.headers=ne,gt.body=we.uploadData(),gt.progressCallback=f||null,gt.errorHandler=vv(n),gt}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(d,uc,i,l);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=w4(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,uc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},m=function(){let gt="";for(let _t=0;_t<2;_t++)gt+=Math.random().toString().slice(2);return gt}();d["Content-Type"]="multipart/related; boundary="+m;const b=E4(t,r,i),x=FO(b,e),Z=Du.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===Z)throw c4();const ne={name:b.fullPath},we=mh(l,n.host,n._protocol),tt=n.maxUploadRetryTime,st=new Tu(we,"POST",FA(n,e),tt);return st.urlParams=ne,st.headers=d,st.body=Z.uploadData(),st.errorHandler=vv(t),st}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,uc,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=l4(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=VO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const l=new Tq(e||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(VO(this._state)){case mo.SUCCESS:bv(this._resolve.bind(null,this.snapshot))();break;case mo.CANCELED:case mo.ERROR:bv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(VO(this._state)){case mo.RUNNING:case mo.PAUSED:t.next&&bv(t.next.bind(t,this.snapshot))();break;case mo.SUCCESS:t.complete&&bv(t.complete.bind(t))();break;case mo.CANCELED:case mo.ERROR:t.error&&bv(t.error.bind(t,this._error))();break;default:t.error&&bv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class a0{constructor(t,e){this._service=t,this._location=e instanceof qs?e:qs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new a0(t,e)}get root(){const t=new qs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _4(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new qs(this._location.bucket,t);return new a0(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw d4(t)}}function S4(n,t,e){return BO.apply(this,arguments)}function BO(){return(BO=(0,$e.Z)(function*(n,t,e){const i=yield N4(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield S4(n,t,i.nextPageToken))})).apply(this,arguments)}function N4(n,t){null!=t&&"number"==typeof t.maxResults&&RO("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=_q(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,uc)}function Uq(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const i=mh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new Tu(i,"GET",function(n,t){return function(r,i){const l=y4(n,i,t);return Iu(null!==l),function(n,t,e,r){const i=OO(t);if(null===i||!kA(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const d=encodeURIComponent;return l.split(",").map(b=>{const I=n.fullPath;return mh("/b/"+d(n.bucket)+"/o/"+d(I),e,r)+f4({alt:"media",token:b})})[0]}(l,i,n.host,n._protocol)}}(n,e),d);return f.errorHandler=YC(t),f}(n.storage,n._location,zC());return n.storage.makeRequestWithTokens(t,uc).then(e=>{if(null===e)throw new ui("no-download-url","The given file does not have any download URLs.");return e})}function M4(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new qs(n._location.bucket,e);return new a0(n.storage,r)}function R4(n,t){if(n instanceof UO){const e=n;if(null==e._bucket)throw new ui("no-default-bucket","No default bucket found. Did you set the '"+a4+"' property when initializing the app?");const r=new a0(e,e._bucket);return null!=t?R4(r,t):r}return void 0!==t?M4(n,t):n}function Gq(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof UO)return function(n,t){return new a0(n,t)}(n,t);throw yv("To use ref(service, url), the first argument must be a Storage instance.")}return R4(n,t)}function k4(n,t){const e=null==t?void 0:t[a4];return null==e?null:qs.makeFromBucketSpec(e,n)}class UO{constructor(t,e,r,i,l){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=o4,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?qs.makeFromBucketSpec(i,this._host):k4(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?qs.makeFromBucketSpec(this._url,t):k4(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){RO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){RO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,$e.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,$e.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new a0(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new UW(u4());{const l=function(n,t,e,r,i,l){const d=f4(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(m,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(m,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(m,l),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(m,r),new qW(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var r=this;return(0,$e.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,l).getPromise()})()}}const P4="@firebase/storage";function L4(n,t){return Gq(n=(0,Y.m9)(n),t)}(0,rs._registerComponent)(new za.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new UO(e,r,i,t,rs.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,rs.registerVersion)(P4,"0.9.5",""),(0,rs.registerVersion)(P4,"0.9.5","esm2017");class VA{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class V4{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new VA(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new VA(r,this,this._ref))},e)}on(t,e,r,i){let l;return e&&(l="function"==typeof e?d=>e(new VA(d,this,this._ref)):{next:e.next?d=>e.next(new VA(d,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,r||void 0,i||void 0)}}class B4{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new _h(t,this._service))}get items(){return this._delegate.items.map(t=>new _h(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _h{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return M4(n,t)}(this._delegate,t);return new _h(e,this.storage)}get root(){return new _h(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new _h(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new V4(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new I4(n,new Du(t),e)}(n=(0,Y.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=va.RAW,r){this._throwIfRoot("putString");const i=PO(e,t),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new V4(new I4(this._delegate,new Du(i.data,!0),l),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return S4(n,t).then(()=>t)}(n=(0,Y.m9)(n))}(this._delegate).then(t=>new B4(t,this.storage))}list(t){return function(n,t){return N4(n=(0,Y.m9)(n),t)}(this._delegate,t||void 0).then(e=>new B4(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=w4(n.storage,n._location,zC());return n.storage.makeRequestWithTokens(t,uc)}(n=(0,Y.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const l=mh(t.fullServerUrl(),n.host,n._protocol),f=FO(e,r),b=n.maxOperationRetryTime,x=new Tu(l,"PATCH",FA(n,r),b);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=f,x.errorHandler=YC(t),x}(n.storage,n._location,t,zC());return n.storage.makeRequestWithTokens(e,uc)}(n=(0,Y.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return Uq(n=(0,Y.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=mh(t.fullServerUrl(),n.host,n._protocol),f=new Tu(r,"DELETE",function(m,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=YC(t),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,uc)}(n=(0,Y.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw d4(t)}}class U4{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(H4(t))throw yv("ref() expected a child path but got a URL, use refFromURL instead.");return new _h(L4(this._delegate,t),this)}refFromURL(t){if(!H4(t))throw yv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qs.makeFromUrl(t,this._delegate.host)}catch(e){throw yv("refFromUrl() expected a valid full URL but got an invalid one.")}return new _h(L4(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Y.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function H4(n){return/^[A-Za-z]+:\/\//.test(n)}function oZ(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new U4(e,r)}function $4(n){const t=function(n){return new ir.y(t=>{const e=d=>t.next(d);e(n.snapshot);const l=n.on("state_changed",e);return n.then(d=>{e(d),t.complete()},d=>{e(n.snapshot),(d=>{t.error(d)})(d)}),function(){l()}}).pipe(function(n,t=qc.P){return e=>e.lift(new xW(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,wt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function BA(n){return{getDownloadURL:()=>(0,xt.of)(void 0).pipe(qn.fc,gr(()=>n.getDownloadURL()),qn.iC),getMetadata:()=>(0,xt.of)(void 0).pipe(qn.fc,gr(()=>n.getMetadata()),qn.iC),delete:()=>(0,un.D)(n.delete()),child:t=>BA(n.child(t)),updateMetadata:t=>(0,un.D)(n.updateMetadata(t)),put:(t,e)=>$4(n.put(t,e)),putString:(t,e,r)=>$4(n.putString(t,e,r)),list:t=>(0,un.D)(n.list(t)),listAll:()=>(0,un.D)(n.listAll())}}!function(n){const t={TaskState:mo,TaskEvent:Dq,StringFormat:va,Storage:U4,Reference:_h};n.INTERNAL.registerComponent(new za.wA("storage-compat",oZ,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(rb.Z);const cZ=new a.OlP("angularfire2.storageBucket"),uZ=new a.OlP("angularfire2.storage.maxUploadRetryTime"),dZ=new a.OlP("angularfire2.storage.maxOperationRetryTime"),hZ=new a.OlP("angularfire2.storage.use-emulator");let fZ=(()=>{class n{constructor(e,r,i,l,d,f,m,b,x,I){const B=(0,ei.on)(e,d,r);this.storage=(0,ei.cc)(`${B.name}.storage.${i}`,"AngularFireStorage",B.name,()=>{const Z=d.runOutsideAngular(()=>B.storage(i||void 0)),ne=x;return ne&&Z.useEmulator(...ne),m&&Z.setMaxUploadRetryTime(m),b&&Z.setMaxOperationRetryTime(b),Z},[m,b])}ref(e){return BA(this.storage.ref(e))}refFromURL(e){return BA(this.storage.refFromURL(e))}upload(e,r,i){return BA(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ei.Dh),a.LFG(ei.xv,8),a.LFG(cZ,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(qn.HU),a.LFG(uZ,8),a.LFG(dZ,8),a.LFG(hZ,8),a.LFG(ey,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),gZ=(()=>{class n{constructor(){im.Z.registerVersion("angularfire",qn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[fZ],imports:[pZ]}),n})();const mZ={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let _Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[CW]}),n.\u0275inj=a.cJS({providers:[],imports:[[Rp,pS,PV,k7,ei.hO.initializeApp(mZ),bH,PM,gZ]]}),n})();(0,a.G48)(),ka().bootstrapModule(_Z).catch(n=>console.error(n))},2480:()=>{},3394:(Ve,me,O)=>{"use strict";O.d(me,{Z:()=>J});var a=O(3854),M=O(3910),k=O(8026),Q=O(5422);class ie{constructor(ce,H){this._delegate=ce,this.firebase=H,(0,k._addComponent)(ce,new M.wA("app-compat",()=>this,"PUBLIC")),this.container=ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ce){this._delegate.automaticDataCollectionEnabled=ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ce=>{this._delegate.checkDestroyed(),ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(ce,H=k._DEFAULT_ENTRY_NAME){var q;this._delegate.checkDestroyed();const de=this._delegate.container.getProvider(ce);return!de.isInitialized()&&"EXPLICIT"===(null===(q=de.getComponent())||void 0===q?void 0:q.instantiationMode)&&de.initialize(),de.getImmediate({identifier:H})}_removeServiceInstance(ce,H=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ce).clearInstance(H)}_addComponent(ce){(0,k._addComponent)(this._delegate,ce)}_addOrOverwriteComponent(ce){(0,k._addOrOverwriteComponent)(this._delegate,ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ee=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),P=function U(){const re=function(re){const ce={},H={__esModule:!0,initializeApp:function(Me,Ae={}){const be=k.initializeApp(Me,Ae);if((0,a.r3)(ce,be.name))return ce[be.name];const ue=new re(be,H);return ce[be.name]=ue,ue},app:de,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function(Me){const Ae=Me.name,be=Ae.replace("-compat","");if(k._registerComponent(Me)&&"PUBLIC"===Me.type){const ue=(Ee=de())=>{if("function"!=typeof Ee[be])throw ee.create("invalid-app-argument",{appName:Ae});return Ee[be]()};void 0!==Me.serviceProps&&(0,a.ZB)(ue,Me.serviceProps),H[be]=ue,re.prototype[be]=function(...Ee){return this._getService.bind(this,Ae).apply(this,Me.multipleInstances?Ee:[])}}return"PUBLIC"===Me.type?H[be]:null},removeApp:function(Me){delete ce[Me]},useAsService:function(Me,Ae){return"serverAuth"===Ae?null:Ae},modularAPIs:k}};function de(Me){if(!(0,a.r3)(ce,Me=Me||k._DEFAULT_ENTRY_NAME))throw ee.create("no-app",{appName:Me});return ce[Me]}return H.default=H,Object.defineProperty(H,"apps",{get:function(){return Object.keys(ce).map(Me=>ce[Me])}}),de.App=re,H}(ie);return re.INTERNAL=Object.assign(Object.assign({},re.INTERNAL),{createFirebaseNamespace:U,extendNamespace:function(H){(0,a.ZB)(re,H)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),re}(),N=new Q.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){N.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const re=self.firebase.SDK_VERSION;re&&re.indexOf("LITE")>=0&&N.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const J=P;(0,k.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(Ve,me,O)=>{"use strict";O.r(me),O.d(me,{FirebaseError:()=>Q.ZR,SDK_VERSION:()=>er,_DEFAULT_ENTRY_NAME:()=>ct,_addComponent:()=>We,_addOrOverwriteComponent:()=>Jt,_apps:()=>Fe,_clearComponents:()=>Xt,_components:()=>Re,_getProvider:()=>yt,_registerComponent:()=>Mt,_removeServiceInstance:()=>Ct,deleteApp:()=>zn,getApp:()=>Zn,getApps:()=>ze,initializeApp:()=>Nn,onLog:()=>fn,registerVersion:()=>pt,setLogLevel:()=>mn});var a=O(8239),M=O(3910),k=O(5422),Q=O(3854);class ie{constructor(qe){this.container=qe}getPlatformInfoString(){return this.container.getProviders().map(mt=>{if(function(rt){const qe=rt.getComponent();return"VERSION"===(null==qe?void 0:qe.type)}(mt)){const Nt=mt.getImmediate();return`${Nt.library}/${Nt.version}`}return null}).filter(mt=>mt).join(" ")}}const ee="@firebase/app",L="0.7.21",U=new k.Yd("@firebase/app"),ct="[DEFAULT]",Oe={[ee]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Fe=new Map,Re=new Map;function We(rt,qe){try{rt.container.addComponent(qe)}catch(mt){U.debug(`Component ${qe.name} failed to register with FirebaseApp ${rt.name}`,mt)}}function Jt(rt,qe){rt.container.addOrOverwriteComponent(qe)}function Mt(rt){const qe=rt.name;if(Re.has(qe))return U.debug(`There were multiple attempts to register component ${qe}.`),!1;Re.set(qe,rt);for(const mt of Fe.values())We(mt,rt);return!0}function yt(rt,qe){const mt=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return mt&&mt.triggerHeartbeat(),rt.container.getProvider(qe)}function Ct(rt,qe,mt=ct){yt(rt,qe).clearInstance(mt)}function Xt(){Re.clear()}const an=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Tn{constructor(qe,mt,Nt){this._isDeleted=!1,this._options=Object.assign({},qe),this._config=Object.assign({},mt),this._name=mt.name,this._automaticDataCollectionEnabled=mt.automaticDataCollectionEnabled,this._container=Nt,this.container.addComponent(new M.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(qe){this.checkDestroyed(),this._automaticDataCollectionEnabled=qe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(qe){this._isDeleted=qe}checkDestroyed(){if(this.isDeleted)throw an.create("app-deleted",{appName:this._name})}}const er="9.6.11";function Nn(rt,qe={}){"object"!=typeof qe&&(qe={name:qe});const mt=Object.assign({name:ct,automaticDataCollectionEnabled:!1},qe),Nt=mt.name;if("string"!=typeof Nt||!Nt)throw an.create("bad-app-name",{appName:String(Nt)});const Lt=Fe.get(Nt);if(Lt){if((0,Q.vZ)(rt,Lt.options)&&(0,Q.vZ)(mt,Lt.config))return Lt;throw an.create("duplicate-app",{appName:Nt})}const en=new M.H0(Nt);for(const ae of Re.values())en.addComponent(ae);const fe=new Tn(rt,mt,en);return Fe.set(Nt,fe),fe}function Zn(rt=ct){const qe=Fe.get(rt);if(!qe)throw an.create("no-app",{appName:rt});return qe}function ze(){return Array.from(Fe.values())}function zn(rt){return Un.apply(this,arguments)}function Un(){return(Un=(0,a.Z)(function*(rt){const qe=rt.name;Fe.has(qe)&&(Fe.delete(qe),yield Promise.all(rt.container.getProviders().map(mt=>mt.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function pt(rt,qe,mt){var Nt;let Lt=null!==(Nt=Oe[rt])&&void 0!==Nt?Nt:rt;mt&&(Lt+=`-${mt}`);const en=Lt.match(/\s|\//),fe=qe.match(/\s|\//);if(en||fe){const ae=[`Unable to register library "${Lt}" with version "${qe}":`];return en&&ae.push(`library name "${Lt}" contains illegal characters (whitespace or "/")`),en&&fe&&ae.push("and"),fe&&ae.push(`version name "${qe}" contains illegal characters (whitespace or "/")`),void U.warn(ae.join(" "))}Mt(new M.wA(`${Lt}-version`,()=>({library:Lt,version:qe}),"VERSION"))}function fn(rt,qe){if(null!==rt&&"function"!=typeof rt)throw an.create("invalid-log-argument");(0,k.Am)(rt,qe)}function mn(rt){(0,k.Ub)(rt)}const fr="firebase-heartbeat-store";let ar=null;function Dn(){return ar||(ar=(0,Q.X3)("firebase-heartbeat-database",1,(rt,qe)=>{switch(qe){case 0:rt.createObjectStore(fr)}}).catch(rt=>{throw an.create("storage-open",{originalErrorMessage:rt.message})})),ar}function En(){return(En=(0,a.Z)(function*(rt){try{return(yield Dn()).transaction(fr).objectStore(fr).get(Nr(rt))}catch(qe){throw an.create("storage-get",{originalErrorMessage:qe.message})}})).apply(this,arguments)}function it(rt,qe){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,a.Z)(function*(rt,qe){try{const Nt=(yield Dn()).transaction(fr,"readwrite");return yield Nt.objectStore(fr).put(qe,Nr(rt)),Nt.complete}catch(mt){throw an.create("storage-set",{originalErrorMessage:mt.message})}})).apply(this,arguments)}function Nr(rt){return`${rt.name}!${rt.options.appId}`}class St{constructor(qe){this.container=qe,this._heartbeatsCache=null;const mt=this.container.getProvider("app").getImmediate();this._storage=new cn(mt),this._heartbeatsCachePromise=this._storage.read().then(Nt=>(this._heartbeatsCache=Nt,Nt))}triggerHeartbeat(){var qe=this;return(0,a.Z)(function*(){const Nt=qe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Lt=pr();if(null===qe._heartbeatsCache&&(qe._heartbeatsCache=yield qe._heartbeatsCachePromise),qe._heartbeatsCache.lastSentHeartbeatDate!==Lt&&!qe._heartbeatsCache.heartbeats.some(en=>en.date===Lt))return qe._heartbeatsCache.heartbeats.push({date:Lt,agent:Nt}),qe._heartbeatsCache.heartbeats=qe._heartbeatsCache.heartbeats.filter(en=>{const fe=new Date(en.date).valueOf();return Date.now()-fe<=2592e6}),qe._storage.overwrite(qe._heartbeatsCache)})()}getHeartbeatsHeader(){var qe=this;return(0,a.Z)(function*(){if(null===qe._heartbeatsCache&&(yield qe._heartbeatsCachePromise),null===qe._heartbeatsCache||0===qe._heartbeatsCache.heartbeats.length)return"";const mt=pr(),{heartbeatsToSend:Nt,unsentEntries:Lt}=function(rt,qe=1024){const mt=[];let Nt=rt.slice();for(const Lt of rt){const en=mt.find(fe=>fe.agent===Lt.agent);if(en){if(en.dates.push(Lt.date),At(mt)>qe){en.dates.pop();break}}else if(mt.push({agent:Lt.agent,dates:[Lt.date]}),At(mt)>qe){mt.pop();break}Nt=Nt.slice(1)}return{heartbeatsToSend:mt,unsentEntries:Nt}}(qe._heartbeatsCache.heartbeats),en=(0,Q.L)(JSON.stringify({version:2,heartbeats:Nt}));return qe._heartbeatsCache.lastSentHeartbeatDate=mt,Lt.length>0?(qe._heartbeatsCache.heartbeats=Lt,yield qe._storage.overwrite(qe._heartbeatsCache)):(qe._heartbeatsCache.heartbeats=[],qe._storage.overwrite(qe._heartbeatsCache)),en})()}}function pr(){return(new Date).toISOString().substring(0,10)}class cn{constructor(qe){this.app=qe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var qe=this;return(0,a.Z)(function*(){return(yield qe._canUseIndexedDBPromise)&&(yield function(rt){return En.apply(this,arguments)}(qe.app))||{heartbeats:[]}})()}overwrite(qe){var mt=this;return(0,a.Z)(function*(){var Nt;if(yield mt._canUseIndexedDBPromise){const en=yield mt.read();return it(mt.app,{lastSentHeartbeatDate:null!==(Nt=qe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:en.lastSentHeartbeatDate,heartbeats:qe.heartbeats})}})()}add(qe){var mt=this;return(0,a.Z)(function*(){var Nt;if(yield mt._canUseIndexedDBPromise){const en=yield mt.read();return it(mt.app,{lastSentHeartbeatDate:null!==(Nt=qe.lastSentHeartbeatDate)&&void 0!==Nt?Nt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...qe.heartbeats]})}})()}}function At(rt){return(0,Q.L)(JSON.stringify({version:2,heartbeats:rt})).length}Mt(new M.wA("platform-logger",qe=>new ie(qe),"PRIVATE")),Mt(new M.wA("heartbeat",qe=>new St(qe),"PRIVATE")),pt(ee,L,""),pt(ee,L,"esm2017"),pt("fire-js","")},3910:(Ve,me,O)=>{"use strict";O.d(me,{wA:()=>k,H0:()=>L,zt:()=>ie});var a=O(8239),M=O(3854);class k{constructor(P,N,S){this.name=P,this.instanceFactory=N,this.type=S,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(P){return this.instantiationMode=P,this}setMultipleInstances(P){return this.multipleInstances=P,this}setServiceProps(P){return this.serviceProps=P,this}setInstanceCreatedCallback(P){return this.onInstanceCreated=P,this}}const Q="[DEFAULT]";class ie{constructor(P,N){this.name=P,this.container=N,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(P){const N=this.normalizeInstanceIdentifier(P);if(!this.instancesDeferred.has(N)){const S=new M.BH;if(this.instancesDeferred.set(N,S),this.isInitialized(N)||this.shouldAutoInitialize())try{const V=this.getOrInitializeService({instanceIdentifier:N});V&&S.resolve(V)}catch(V){}}return this.instancesDeferred.get(N).promise}getImmediate(P){var N;const S=this.normalizeInstanceIdentifier(null==P?void 0:P.identifier),V=null!==(N=null==P?void 0:P.optional)&&void 0!==N&&N;if(!this.isInitialized(S)&&!this.shouldAutoInitialize()){if(V)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:S})}catch(z){if(V)return null;throw z}}getComponent(){return this.component}setComponent(P){if(P.name!==this.name)throw Error(`Mismatching Component ${P.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=P,this.shouldAutoInitialize()){if("EAGER"===P.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Q})}catch(N){}for(const[N,S]of this.instancesDeferred.entries()){const V=this.normalizeInstanceIdentifier(N);try{const z=this.getOrInitializeService({instanceIdentifier:V});S.resolve(z)}catch(z){}}}}clearInstance(P=Q){this.instancesDeferred.delete(P),this.instancesOptions.delete(P),this.instances.delete(P)}delete(){var P=this;return(0,a.Z)(function*(){const N=Array.from(P.instances.values());yield Promise.all([...N.filter(S=>"INTERNAL"in S).map(S=>S.INTERNAL.delete()),...N.filter(S=>"_delete"in S).map(S=>S._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(P=Q){return this.instances.has(P)}getOptions(P=Q){return this.instancesOptions.get(P)||{}}initialize(P={}){const{options:N={}}=P,S=this.normalizeInstanceIdentifier(P.instanceIdentifier);if(this.isInitialized(S))throw Error(`${this.name}(${S}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const V=this.getOrInitializeService({instanceIdentifier:S,options:N});for(const[z,J]of this.instancesDeferred.entries())S===this.normalizeInstanceIdentifier(z)&&J.resolve(V);return V}onInit(P,N){var S;const V=this.normalizeInstanceIdentifier(N),z=null!==(S=this.onInitCallbacks.get(V))&&void 0!==S?S:new Set;z.add(P),this.onInitCallbacks.set(V,z);const J=this.instances.get(V);return J&&P(J,V),()=>{z.delete(P)}}invokeOnInitCallbacks(P,N){const S=this.onInitCallbacks.get(N);if(S)for(const V of S)try{V(P,N)}catch(z){}}getOrInitializeService({instanceIdentifier:P,options:N={}}){let S=this.instances.get(P);if(!S&&this.component&&(S=this.component.instanceFactory(this.container,{instanceIdentifier:(U=P,U===Q?void 0:U),options:N}),this.instances.set(P,S),this.instancesOptions.set(P,N),this.invokeOnInitCallbacks(S,P),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,P,S)}catch(V){}var U;return S||null}normalizeInstanceIdentifier(P=Q){return this.component?this.component.multipleInstances?P:Q:P}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class L{constructor(P){this.name=P,this.providers=new Map}addComponent(P){const N=this.getProvider(P.name);if(N.isComponentSet())throw new Error(`Component ${P.name} has already been registered with ${this.name}`);N.setComponent(P)}addOrOverwriteComponent(P){this.getProvider(P.name).isComponentSet()&&this.providers.delete(P.name),this.addComponent(P)}getProvider(P){if(this.providers.has(P))return this.providers.get(P);const N=new ie(P,this);return this.providers.set(P,N),N}getProviders(){return Array.from(this.providers.values())}}},5422:(Ve,me,O)=>{"use strict";O.d(me,{in:()=>M,Yd:()=>ee,Ub:()=>L,Am:()=>U});const a=[];var M=(()=>{return(P=M||(M={}))[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",M;var P})();const k={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},Q=M.INFO,ie={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},W=(P,N,...S)=>{if(N<P.logLevel)return;const V=(new Date).toISOString(),z=ie[N];if(!z)throw new Error(`Attempted to log a message with an invalid logType (value: ${N})`);console[z](`[${V}]  ${P.name}:`,...S)};class ee{constructor(N){this.name=N,this._logLevel=Q,this._logHandler=W,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(N){if(!(N in M))throw new TypeError(`Invalid value "${N}" assigned to \`logLevel\``);this._logLevel=N}setLogLevel(N){this._logLevel="string"==typeof N?k[N]:N}get logHandler(){return this._logHandler}set logHandler(N){if("function"!=typeof N)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=N}get userLogHandler(){return this._userLogHandler}set userLogHandler(N){this._userLogHandler=N}debug(...N){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...N),this._logHandler(this,M.DEBUG,...N)}log(...N){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...N),this._logHandler(this,M.VERBOSE,...N)}info(...N){this._userLogHandler&&this._userLogHandler(this,M.INFO,...N),this._logHandler(this,M.INFO,...N)}warn(...N){this._userLogHandler&&this._userLogHandler(this,M.WARN,...N),this._logHandler(this,M.WARN,...N)}error(...N){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...N),this._logHandler(this,M.ERROR,...N)}}function L(P){a.forEach(N=>{N.setLogLevel(P)})}function U(P,N){for(const S of a){let V=null;N&&N.level&&(V=k[N.level]),S.userLogHandler=null===P?null:(z,J,...re)=>{const ce=re.map(H=>{if(null==H)return null;if("string"==typeof H)return H;if("number"==typeof H||"boolean"==typeof H)return H.toString();if(H instanceof Error)return H.message;try{return JSON.stringify(H)}catch(q){return null}}).filter(H=>H).join(" ");J>=(null!=V?V:z.logLevel)&&P({level:M[J].toLowerCase(),message:ce,args:re,type:z.name})}}}},8239:(Ve,me,O)=>{"use strict";function a(k,Q,ie,W,ee,L,U){try{var P=k[L](U),N=P.value}catch(S){return void ie(S)}P.done?Q(N):Promise.resolve(N).then(W,ee)}function M(k){return function(){var Q=this,ie=arguments;return new Promise(function(W,ee){var L=k.apply(Q,ie);function U(N){a(L,W,ee,U,P,"next",N)}function P(N){a(L,W,ee,U,P,"throw",N)}U(void 0)})}}O.d(me,{Z:()=>M})}},Ve=>{Ve(Ve.s=7645)}]);