(self.webpackChunkbinance_future_watcher_githubio=self.webpackChunkbinance_future_watcher_githubio||[]).push([[179],{8255:st=>{function we(B){return Promise.resolve().then(()=>{var a=new Error("Cannot find module '"+B+"'");throw a.code="MODULE_NOT_FOUND",a})}we.keys=()=>[],we.resolve=we,we.id=8255,st.exports=we},7716:(st,we,B)=>{"use strict";B.d(we,{deG:()=>Th,tb:()=>nA,AFp:()=>$f,ip1:()=>Q1,CZH:()=>Uf,hGG:()=>fi,z2F:()=>Gf,sBO:()=>wM,Sil:()=>Vd,_Vd:()=>wf,EJc:()=>X1,SBq:()=>Os,qLn:()=>Uh,vpe:()=>Po,gxx:()=>Ul,tBr:()=>Ha,XFs:()=>at,OlP:()=>Gn,zs3:()=>Cr,ZZ4:()=>Sw,aQg:()=>My,soG:()=>ga,YKP:()=>nI,v3s:()=>PR,h0i:()=>Sd,PXZ:()=>gv,R0b:()=>Fs,FiY:()=>ja,Lbi:()=>tA,g9A:()=>eA,Qsj:()=>fM,FYo:()=>xy,JOm:()=>za,Tiy:()=>Ef,q3G:()=>un,tp0:()=>Wr,EAV:()=>Vi,Rgc:()=>Lg,dDg:()=>aC,DyG:()=>Ws,q4F:()=>JD,GfV:()=>KD,s_b:()=>Ju,ifc:()=>ze,eFA:()=>fC,G48:()=>pv,Gpc:()=>z,X6Q:()=>um,_c5:()=>jd,VLi:()=>NR,c2e:()=>Hf,zSh:()=>Kh,wAp:()=>It,vHH:()=>fe,EiD:()=>_t,mCW:()=>Wa,qzn:()=>xu,JVY:()=>c_,pB0:()=>Xc,eBb:()=>Bp,L6k:()=>Vp,LAX:()=>Xo,cg1:()=>aw,Tjo:()=>mA,kL8:()=>mD,yhl:()=>Mh,dqk:()=>At,sIi:()=>$u,CqO:()=>Fb,QGY:()=>Ob,F4k:()=>WT,RDi:()=>Si,AaK:()=>X,z3N:()=>Qo,qOj:()=>X_,TTD:()=>Qn,_Bn:()=>jD,xp6:()=>Lu,uIk:()=>ty,Tol:()=>Tg,DjV:()=>Ng,ekj:()=>my,Suo:()=>D1,Xpm:()=>Y,lG2:()=>pt,Yz7:()=>wt,cJS:()=>dn,oAB:()=>Z,Yjl:()=>Ct,Y36:()=>vg,_UZ:()=>kb,BQk:()=>Pb,ynx:()=>wg,qZA:()=>bg,TgZ:()=>df,EpF:()=>qT,n5z:()=>La,Ikx:()=>Cy,SDv:()=>BD,QtT:()=>UD,pQV:()=>ww,LFG:()=>er,$8M:()=>wu,NdJ:()=>Lb,CRH:()=>I1,oxw:()=>Hb,ALo:()=>p1,lcZ:()=>m1,xi3:()=>LI,Hsn:()=>ZT,F$t:()=>jb,Q6J:()=>Mb,s9C:()=>Gb,MGl:()=>hy,VKq:()=>Zg,WLB:()=>c1,kEZ:()=>Xi,iGM:()=>T1,MAs:()=>NT,CHM:()=>Sa,LSH:()=>nd,kYT:()=>me,Udp:()=>qu,YNc:()=>yd,W1O:()=>Qy,_uU:()=>Ag,Oqu:()=>Zl,hij:()=>pf,AsE:()=>vy,Gf:()=>$I});var a=B(9765),G=B(5319),F=B(7574),se=B(6682),ae=B(8819);function ee(s){for(let o in s)if(s[o]===ee)return o;throw Error("Could not find renamed property on target object.")}function he(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function X(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(X).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function Q(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const U=ee({__forward_ref__:ee});function z(s){return s.__forward_ref__=z,s.toString=function(){return X(this())},s}function H(s){return ce(s)?s():s}function ce(s){return"function"==typeof s&&s.hasOwnProperty(U)&&s.__forward_ref__===z}class fe extends Error{constructor(o,u){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function oe(s){return"string"==typeof s?s:null==s?"":String(s)}function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():oe(s)}function Je(s,o){const u=o?` in ${o}`:"";throw new fe("201",`No provider for ${pe(s)} found${u}`)}function yt(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}function wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function dn(s){return{providers:s.providers||[],imports:s.imports||[]}}function sn(s){return hn(s,fr)||hn(s,pr)}function hn(s,o){return s.hasOwnProperty(o)?s[o]:null}function ii(s){return s&&(s.hasOwnProperty(Le)||s.hasOwnProperty(lr))?s[Le]:null}const fr=ee({\u0275prov:ee}),Le=ee({\u0275inj:ee}),pr=ee({ngInjectableDef:ee}),lr=ee({ngInjectorDef:ee});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let bn;function Wn(s){const o=bn;return bn=s,o}function si(s,o,u){const c=sn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&at.Optional?null:void 0!==o?o:void Je(X(s),"Injector")}function gr(s){return{toString:s}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),ze=(()=>((ze=ze||{})[ze.Emulated=0]="Emulated",ze[ze.None=2]="None",ze[ze.ShadowDom=3]="ShadowDom",ze))();const mt="undefined"!=typeof globalThis&&globalThis,Gi="undefined"!=typeof window&&window,ls="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,At=mt||"undefined"!=typeof global&&global||Gi||ls,on={},vt=[],Wt=ee({\u0275cmp:ee}),Ze=ee({\u0275dir:ee}),xe=ee({\u0275pipe:ee}),ut=ee({\u0275mod:ee}),Et=ee({\u0275loc:ee}),kt=ee({\u0275fac:ee}),Jt=ee({__NG_ELEMENT_ID__:ee});let J=0;function Y(s){return gr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||vt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ze.Emulated,id:"c",styles:s.styles||vt,_:null,setInput:null,schemas:s.schemas||null,tView:null},h=s.directives,p=s.features,_=s.pipes;return c.id+=J++,c.inputs=He(s.inputs,u),c.outputs=He(s.outputs),p&&p.forEach(v=>v(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(ve):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,c})}function ve(s){return Qe(s)||function(s){return s[Ze]||null}(s)}function $(s){return function(s){return s[xe]||null}(s)}const j={};function Z(s){return gr(()=>{const o={type:s.type,bootstrap:s.bootstrap||vt,declarations:s.declarations||vt,imports:s.imports||vt,exports:s.exports||vt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(j[s.id]=s.type),o})}function me(s,o){return gr(()=>{const u=An(s,!0);u.declarations=o.declarations||vt,u.imports=o.imports||vt,u.exports=o.exports||vt})}function He(s,o){if(null==s)return on;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const pt=Y;function Ct(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Qe(s){return s[Wt]||null}function An(s,o){const u=s[ut]||null;if(!u&&!0===o)throw new Error(`Type ${X(s)} does not have '\u0275mod' property.`);return u}function Pn(s){return Array.isArray(s)&&"object"==typeof s[1]}function Wi(s){return Array.isArray(s)&&!0===s[1]}function yc(s){return 0!=(8&s.flags)}function dl(s){return 2==(2&s.flags)}function mi(s){return 1==(1&s.flags)}function cs(s){return null!==s.template}function ds(s){return 0!=(512&s[2])}function $s(s,o){return s.hasOwnProperty(kt)?s[kt]:null}class pl{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Qn(){return au}function au(s){return s.type.prototype.ngOnChanges&&(s.setInput=kr),Ta}function Ta(){const s=Da(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===on)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function kr(s,o,u,c){const h=Da(s)||function(s,o){return s[fh]=o}(s,{previous:on,current:null}),p=h.current||(h.current={}),_=h.previous,v=this.declaredInputs[u],C=_[v];p[v]=new pl(C&&C.currentValue,o,_===on),s[c]=o}Qn.ngInherit=!0;const fh="__ngSimpleChanges__";function Da(s){return s[fh]||null}let Ia;function Si(s){Ia=s}function lu(){return void 0!==Ia?Ia:"undefined"!=typeof document?document:void 0}function On(s){return!!s.listen}const Is={createRenderer:(s,o)=>lu()};function Sn(s){for(;Array.isArray(s);)s=s[0];return s}function uu(s,o){return Sn(o[s])}function Nn(s,o){return Sn(o[s.index])}function As(s,o){return s.data[o]}function Aa(s,o){return s[o]}function Pr(s,o){const u=o[s];return Pn(u)?u:u[0]}function mh(s){return 4==(4&s[2])}function ml(s){return 128==(128&s[2])}function _r(s,o){return null==o?null:s[o]}function _l(s){s[18]=0}function cu(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const St={lFrame:Oc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Nc(){return St.bindingsEnabled}function Pe(){return St.lFrame.lView}function Yt(){return St.lFrame.tView}function Sa(s){return St.lFrame.contextLView=s,s[8]}function Hn(){let s=vl();for(;null!==s&&64===s.type;)s=s.parent;return s}function vl(){return St.lFrame.currentTNode}function Hs(){const s=St.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}function li(s,o){const u=St.lFrame;u.currentTNode=s,u.isParent=o}function Na(){return St.lFrame.isParent}function bl(){St.lFrame.isParent=!1}function _o(){return St.isInCheckNoChangesMode}function fu(s){St.isInCheckNoChangesMode=s}function ur(){const s=St.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Ni(){return St.lFrame.bindingIndex}function xi(){return St.lFrame.bindingIndex++}function Mi(s){const o=St.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Rc(s){St.lFrame.inI18n=s}function xa(s,o){const u=St.lFrame;u.bindingIndex=u.bindingRootIndex=s,jo(o)}function jo(s){St.lFrame.currentDirectiveIndex=s}function pu(){return St.lFrame.currentQueryIndex}function yo(s){St.lFrame.currentQueryIndex=s}function Cl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Pc(s,o,u){if(u&at.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&at.Host||(h=Cl(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=St.lFrame=yh();return c.currentTNode=o,c.lView=s,!0}function Ma(s){const o=yh(),u=s[1];St.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function yh(){const s=St.lFrame,o=null===s?null:s.child;return null===o?Oc(s):o}function Oc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Fc(){const s=St.lFrame;return St.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Lc=Fc;function Go(){const s=Fc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function qr(){return St.lFrame.selectedIndex}function Ra(s){St.lFrame.selectedIndex=s}function jn(){const s=St.lFrame;return As(s.tView,s.selectedIndex)}function mu(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:v,ngAfterViewInit:C,ngAfterViewChecked:D,ngOnDestroy:N}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),v&&((s.contentHooks||(s.contentHooks=[])).push(u,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,v)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),D&&((s.viewHooks||(s.viewHooks=[])).push(u,D),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,D)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function js(s,o,u){vh(s,o,3,u)}function yr(s,o,u,c){(3&s[2])===u&&vh(s,o,u,c)}function ka(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function vh(s,o,u,c){const p=null!=c?c:-1,_=o.length-1;let v=0;for(let C=void 0!==c?65535&s[18]:0;C<_;C++)if("number"==typeof o[C+1]){if(v=o[C],null!=c&&v>=c)break}else o[C]<0&&(s[18]+=65536),(v<p||-1==p)&&(Ep(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Ep(s,o,u,c){const h=u[c]<0,p=u[c+1],v=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(v)}finally{}}}else try{p.call(v)}finally{}}class vo{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function bh(s,o,u){const c=On(s);let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const _=u[h++],v=u[h++],C=u[h++];c?s.setAttribute(o,v,C,_):o.setAttributeNS(_,v,C)}else{const _=p,v=u[++h];Ss(_)?c&&s.setProperty(o,_,v):c?s.setAttribute(o,_,v):o.setAttribute(_,v),h++}}return h}function Dp(s){return 3===s||4===s||6===s}function Ss(s){return 64===s.charCodeAt(0)}function $c(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Ip(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Ip(s,o,u,c,h){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const v=s[p++];if("number"==typeof v){if(v===o){_=-1;break}if(v>o){_=p-1;break}}}for(;p<s.length;){const v=s[p];if("number"==typeof v)break;if(v===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function Tl(s){return-1!==s}function Oa(s){return 32767&s}function zi(s,o){let u=function(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Fa=!0;function yu(s){const o=Fa;return Fa=s,o}let vu=0;function qo(s,o){const u=Qt(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Dl(c.data,s),Dl(o,null),Dl(c.blueprint,null));const h=dt(s,o),p=s.injectorIndex;if(Tl(h)){const _=Oa(h),v=zi(h,o),C=v[1].data;for(let D=0;D<8;D++)o[p+D]=v[_+D]|C[_+D]}return o[p+8]=h,p}function Dl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Qt(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function dt(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){const p=h[1],_=p.type;if(c=2===_?p.declTNode:1===_?h[6]:null,null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function Tn(s,o,u){!function(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Jt)&&(c=u[Jt]),null==c&&(c=u[Jt]=vu++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function vr(s,o,u){if(u&at.Optional)return s;Je(o,"NodeInjector")}function Wo(s,o,u,c){if(u&at.Optional&&void 0===c&&(c=null),0==(u&(at.Self|at.Host))){const h=s[9],p=Wn(void 0);try{return h?h.get(o,c,u&at.Optional):si(o,c,u&at.Optional)}finally{Wn(p)}}return vr(c,o,u)}function Ns(s,o,u,c=at.Default,h){if(null!==s){const p=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Jt)?s[Jt]:void 0;return"number"==typeof o?o>=0?255&o:Eh:o}(u);if("function"==typeof p){if(!Pc(o,s,c))return c&at.Host?vr(h,u,c):Wo(o,u,c,h);try{const _=p(c);if(null!=_||c&at.Optional)return _;Je(u)}finally{Lc()}}else if("number"==typeof p){let _=null,v=Qt(s,o),C=-1,D=c&at.Host?o[16][6]:null;for((-1===v||c&at.SkipSelf)&&(C=-1===v?dt(s,o):o[v+8],-1!==C&&Zo(c,!1)?(_=o[1],v=Oa(C),o=zi(C,o)):v=-1);-1!==v;){const N=o[1];if(bu(p,v,N.data)){const P=Sp(v,o,u,_,c,D);if(P!==cr)return P}C=o[v+8],-1!==C&&Zo(c,o[1].data[v+8]===D)&&bu(p,v,o)?(_=N,v=Oa(C),o=zi(C,o)):v=-1}}}return Wo(o,u,c,h)}const cr={};function Eh(){return new Co(Hn(),Pe())}function Sp(s,o,u,c,h,p){const _=o[1],v=_.data[s+8],N=wo(v,_,u,null==c?dl(v)&&Fa:c!=_&&0!=(3&v.type),h&at.Host&&p===v);return null!==N?zn(o,_,N,v):cr}function wo(s,o,u,c,h){const p=s.providerIndexes,_=o.data,v=1048575&p,C=s.directiveStart,N=p>>20,L=h?v+N:s.directiveEnd;for(let K=c?v:v+N;K<L;K++){const te=_[K];if(K<C&&u===te||K>=C&&te.type===u)return K}if(h){const K=_[C];if(K&&cs(K)&&K.type===u)return C}return null}function zn(s,o,u,c){let h=s[u];const p=o.data;if(function(s){return s instanceof vo}(h)){const _=h;_.resolving&&function(s,o){throw new fe("200",`Circular dependency in DI detected for ${s}`)}(pe(p[u]));const v=yu(_.canSeeViewProviders);_.resolving=!0;const C=_.injectImpl?Wn(_.injectImpl):null;Pc(s,c,at.Default);try{h=s[u]=_.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const _=au(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&Wn(C),yu(v),_.resolving=!1,Lc()}}return h}function bu(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Zo(s,o){return!(s&at.Self||s&at.Host&&o)}class Co{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Ns(this._tNode,this._lView,o,c,u)}}function La(s){return gr(()=>{const o=s.prototype.constructor,u=o[kt]||Hc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[kt]||Hc(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Hc(s){return ce(s)?()=>{const o=Hc(H(s));return o&&o()}:$s(s)}function wu(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(Dp(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(Hn(),s)}const fs="__parameters__";function Ri(s,o,u){return gr(()=>{const c=function(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const _=new h(...p);return v.annotation=_,v;function v(C,D,N){const P=C.hasOwnProperty(fs)?C[fs]:Object.defineProperty(C,fs,{value:[]})[fs];for(;P.length<=N;)P.push(null);return(P[N]=P[N]||[]).push(_),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class Gn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Th=new Gn("AnalyzeForEntryComponents"),Ws=Function;function yi(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),yi(c,o)):o!==s&&o.push(c)}return o}function Ms(s,o){s.forEach(u=>Array.isArray(u)?Ms(u,o):o(u))}function Rs(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Io(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ao(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}function br(s,o,u){let c=Ua(s,o);return c>=0?s[1|c]=u:(c=~c,function(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function hr(s,o){const u=Ua(s,o);if(u>=0)return s[1|u]}function Ua(s,o){return function(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),_=s[p<<u];if(o===_)return p<<u;_>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const nn={},Ot="__NG_DI_FLAG__",Ar="ngTempTokenPath",Al=/\n/gm,zs="__source",ks=ee({provide:String,useValue:ee});let Yo;function Vt(s){const o=Yo;return Yo=s,o}function kp(s,o=at.Default){if(void 0===Yo)throw new Error("inject() must be called from an injection context");return null===Yo?si(s,void 0,o):Yo.get(s,o&at.Optional?null:void 0,o)}function er(s,o=at.Default){return(bn||kp)(H(s),o)}function Sl(s){const o=[];for(let u=0;u<s.length;u++){const c=H(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,p=at.Default;for(let _=0;_<c.length;_++){const v=c[_],C=Pp(v);"number"==typeof C?-1===C?h=v.token:p|=C:h=v}o.push(er(h,p))}else o.push(er(c))}return o}function Nl(s,o){return s[Ot]=o,s.prototype[Ot]=o,s}function Pp(s){return s[Ot]}function ps(s,o,u,c){const h=s[Ar];throw o[zs]&&h.unshift(o[zs]),s.message=function(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let h=X(o);if(Array.isArray(o))h=o.map(X).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let v=o[_];p.push(_+":"+("string"==typeof v?JSON.stringify(v):X(v)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Al,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Ar]=null,s}const Ha=Nl(Ri("Inject",s=>({token:s})),-1),ja=Nl(Ri("Optional"),8),Wr=Nl(Ri("SkipSelf"),4);let Au;function Jo(s){var o;return(null===(o=function(){if(void 0===Au&&(Au=null,At.trustedTypes))try{Au=At.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Au}())||void 0===o?void 0:o.createHTML(s))||s}class Ml{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class w0 extends Ml{getTypeName(){return"HTML"}}class C0 extends Ml{getTypeName(){return"Style"}}class xh extends Ml{getTypeName(){return"Script"}}class E0 extends Ml{getTypeName(){return"URL"}}class T0 extends Ml{getTypeName(){return"ResourceURL"}}function Qo(s){return s instanceof Ml?s.changingThisBreaksApplicationSecurity:s}function xu(s,o){const u=Mh(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function Mh(s){return s instanceof Ml&&s.getTypeName()||null}function c_(s){return new w0(s)}function Vp(s){return new C0(s)}function Bp(s){return new xh(s)}function Xo(s){return new E0(s)}function Xc(s){return new T0(s)}function Rh(s){const o=new D0(s);return function(){try{return!!(new window.DOMParser).parseFromString(Jo(""),"text/html")}catch(s){return!1}}()?new d_(o):o}class d_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(Jo(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class D0{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Jo(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=Jo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const _=u.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const h_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,kh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wa(s){return(s=String(s)).match(h_)||s.match(kh)?s:"unsafe:"+s}function Ph(s){return(s=String(s)).split(",").map(o=>Wa(o.trim())).join(", ")}function Ps(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function Rl(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const Ru=Ps("area,br,col,hr,img,wbr"),p_=Ps("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ku=Ps("rp,rt"),Up=Rl(Ru,Rl(p_,Ps("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rl(ku,Ps("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rl(ku,p_)),ed=Ps("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),w=Ps("srcset"),E=Rl(ed,w,Ps("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ps("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),x=Ps("script,style,template");class R{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Up.hasOwnProperty(u))return this.sanitizedSomething=!0,!x.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let h=0;h<c.length;h++){const p=c.item(h),_=p.name,v=_.toLowerCase();if(!E.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let C=p.value;ed[v]&&(C=Wa(C)),w[v]&&(C=Ph(C)),this.buf.push(" ",_,'="',nt(C),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Up.hasOwnProperty(u)&&!Ru.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(nt(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const re=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,De=/([^\#-~ |!])/g;function nt(s){return s.replace(/&/g,"&amp;").replace(re,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(De,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ue;function _t(s,o){let u=null;try{Ue=Ue||Rh(s);let c=o?String(o):"";u=Ue.getInertBodyElement(c);let h=5,p=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=p,p=u.innerHTML,u=Ue.getInertBodyElement(c)}while(c!==p);return Jo((new R).sanitizeChildren(vn(u)||u))}finally{if(u){const c=vn(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function vn(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var un=(()=>((un=un||{})[un.NONE=0]="NONE",un[un.HTML=1]="HTML",un[un.STYLE=2]="STYLE",un[un.SCRIPT=3]="SCRIPT",un[un.URL=4]="URL",un[un.RESOURCE_URL=5]="RESOURCE_URL",un))();function nd(s){const o=function(){const s=Pe();return s&&s[12]}();return o?o.sanitize(un.URL,s)||"":xu(s,"URL")?Qo(s):Wa(oe(s))}const Lh="__ngContext__";function Pi(s,o){s[Lh]=o}function A0(s){const o=function(s){return s[Lh]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function rd(s){return s.ngOriginalError}function nN(s,...o){s.error(...o)}class Uh{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=this._findContext(o),h=(s=o)&&s.ngErrorLogger||nN;var s;h(this._console,"ERROR",o),u&&h(this._console,"ORIGINAL ERROR",u),c&&h(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(rd(o)):null}_findOriginalError(o){let u=o&&rd(o);for(;u&&rd(u);)u=rd(u);return u||null}}const sN=/^>|^->|<!--|-->|--!>|<!-$/g,R0=/(<|>)/;const IE=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(At))();function Za(s){return s instanceof Function?s():s}var za=(()=>((za=za||{})[za.Important=1]="Important",za[za.DashCase=2]="DashCase",za))();let k0;function b_(s,o){return k0(s,o)}function zp(s){const o=s[3];return Wi(o)?o[3]:o}function w_(s){return P0(s[13])}function ME(s){return P0(s[4])}function P0(s){for(;null!==s&&!Wi(s);)s=s[4];return s}function id(s,o,u,c,h){if(null!=c){let p,_=!1;Wi(c)?p=c:Pn(c)&&(_=!0,c=c[0]);const v=Sn(c);0===s&&null!==u?null==h?FE(o,u,v):Ou(o,u,v,h||null,!0):1===s&&null!==u?Ou(o,u,v,h||null,!0):2===s?U0(o,v,_):3===s&&o.destroyNode(v),null!=p&&function(s,o,u,c,h){const p=u[7];p!==Sn(u)&&id(o,s,c,p,h);for(let v=10;v<u.length;v++){const C=u[v];od(C[1],C,s,o,c,p)}}(o,s,p,u,h)}}function C_(s,o){return On(s)?s.createText(o):s.createTextNode(o)}function RE(s,o,u){On(s)?s.setValue(o,u):o.textContent=u}function hN(s,o){return s.createComment(function(s){return s.replace(sN,o=>o.replace(R0,"\u200b$1\u200b"))}(o))}function O0(s,o,u){return On(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function E_(s,o){const u=s[9],c=u.indexOf(o),h=o[3];1024&o[2]&&(o[2]&=-1025,cu(h,-1)),u.splice(c,1)}function T_(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&E_(h,c),o>0&&(s[u-1][4]=c[4]);const p=Io(s,10+o);!function(s,o){od(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=p[19];null!==_&&_.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function kE(s,o){if(!(256&o[2])){const u=o[11];On(u)&&u.destroyNode&&od(s,o,u,3,null,null),function(s){let o=s[13];if(!o)return Pu(s[1],s);for(;o;){let u=null;if(Pn(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Pn(o)&&Pu(o[1],o),o=o[3];null===o&&(o=s),Pn(o)&&Pu(o[1],o),u=o&&o[4]}o=u}}(o)}}function Pu(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof vo)){const p=u[c+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const v=h[p[_]],C=p[_+1];try{C.call(v)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const _=u[p+1],v="function"==typeof _?_(o):Sn(o[_]),C=c[h=u[p+2]],D=u[p+3];"boolean"==typeof D?v.removeEventListener(u[p],C,D):D>=0?c[h=D]():c[h=-D].unsubscribe(),p+=2}else{const _=c[h=u[p+1]];u[p].call(_)}if(null!==c){for(let p=h+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&On(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Wi(o[3])){u!==o[3]&&E_(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function PE(s,o,u){return OE(s,o.parent,u)}function OE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===ze.None||h===ze.Emulated)return null}return Nn(c,u)}function Ou(s,o,u,c,h){On(s)?s.insertBefore(o,u,c,h):o.insertBefore(u,c,h)}function FE(s,o,u){On(s)?s.appendChild(o,u):o.appendChild(u)}function LE(s,o,u,c,h){null!==c?Ou(s,o,u,c,h):FE(s,o,u)}function D_(s,o){return On(s)?s.parentNode(o):o.parentNode}function A_(s,o,u){return sd(s,o,u)}function S_(s,o,u){return 40&s.type?Nn(s,u):null}let L0,sd=S_;function VE(s,o){sd=s,L0=o}function Yp(s,o,u,c){const h=PE(s,c,o),p=o[11],v=A_(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)LE(p,h,u[C],v,!1);else LE(p,h,u,v,!1);void 0!==L0&&L0(p,c,o,u,h)}function N_(s,o){if(null!==o){const u=o.type;if(3&u)return Nn(o,s);if(4&u)return B0(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return N_(s,c);{const h=s[o.index];return Wi(h)?B0(-1,h):Sn(h)}}if(32&u)return b_(o,s)()||Sn(s[o.index]);{const c=V0(s,o);return null!==c?Array.isArray(c)?c[0]:N_(zp(s[16]),c):N_(s,o.next)}}return null}function V0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function B0(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return N_(c,h)}return o[7]}function U0(s,o,u){const c=D_(s,o);c&&function(s,o,u,c){On(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}function x_(s,o,u,c,h,p,_){for(;null!=u;){const v=c[u.index],C=u.type;if(_&&0===o&&(v&&Pi(Sn(v),c),u.flags|=4),64!=(64&u.flags))if(8&C)x_(s,o,u.child,c,h,p,!1),id(o,s,h,v,p);else if(32&C){const D=b_(u,c);let N;for(;N=D();)id(o,s,h,N,p);id(o,s,h,v,p)}else 16&C?Fu(s,o,c,u,h,p):id(o,s,h,v,p);u=_?u.projectionNext:u.next}}function od(s,o,u,c,h,p){x_(u,c,s.firstChild,o,h,p,!1)}function Fu(s,o,u,c,h,p){const _=u[16],C=_[6].projection[c.projection];if(Array.isArray(C))for(let D=0;D<C.length;D++)id(o,s,h,C[D],p);else x_(s,o,C,_[3],h,p,!0)}function UE(s,o,u){On(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function $0(s,o,u){On(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function H0(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const $E="ng-template";function wN(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==H0(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function j0(s){return 4===s.type&&s.value!==$E}function CN(s,o,u){return o===(4!==s.type||u?s.value:$E)}function EN(s,o,u){let c=4;const h=s.attrs||[],p=function(s){for(let o=0;o<s.length;o++)if(Dp(s[o]))return o;return s.length}(h);let _=!1;for(let v=0;v<o.length;v++){const C=o[v];if("number"!=typeof C){if(!_)if(4&c){if(c=2|1&c,""!==C&&!CN(s,C,u)||""===C&&1===o.length){if(na(c))return!1;_=!0}}else{const D=8&c?C:o[++v];if(8&c&&null!==s.attrs){if(!wN(s.attrs,D,u)){if(na(c))return!1;_=!0}continue}const P=G0(8&c?"class":C,h,j0(s),u);if(-1===P){if(na(c))return!1;_=!0;continue}if(""!==D){let L;L=P>p?"":h[P+1].toLowerCase();const K=8&c?L:null;if(K&&-1!==H0(K,D,0)||2&c&&D!==L){if(na(c))return!1;_=!0}}}}else{if(!_&&!na(c)&&!na(C))return!1;if(_&&na(C))continue;_=!1,c=C|1&c}}return na(c)||_}function na(s){return 0==(1&s)}function G0(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)p=!0;else{if(1===_||2===_){let v=o[++h];for(;"string"==typeof v;)v=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=p?1:2}return-1}return function(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function HE(s,o,u=!1){for(let c=0;c<o.length;c++)if(EN(s,o[c],u))return!0;return!1}function sF(s,o){e:for(let u=0;u<o.length;u++){const c=o[u];if(s.length===c.length){for(let h=0;h<s.length;h++)if(s[h]!==c[h])continue e;return!0}}return!1}function GE(s,o){return s?":not("+o.trim()+")":o}function IN(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const v=s[++u];h+="["+_+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?h+="."+_:4&c&&(h+=" "+_);else""!==h&&!na(_)&&(o+=GE(p,h),h=""),c=_,p=p||!na(c);u++}return""!==h&&(o+=GE(p,h)),o}const jt={};function Lu(s){M_(Yt(),Pe(),qr()+s,_o())}function M_(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&js(o,p,u)}else{const p=s.preOrderHooks;null!==p&&yr(o,p,0,u)}Ra(u)}function R_(s,o){return s<<17|o<<2}function ra(s){return s>>17&32767}function ad(s){return 2|s}function Ya(s){return(131068&s)>>2}function ld(s,o){return-131069&s|o<<2}function q0(s){return 1|s}function qh(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const _=s.data[p];yo(h),_.contentQueries(2,o[p],p)}}}function Lr(s,o,u,c,h,p,_,v,C,D){const N=o.blueprint.slice();return N[0]=h,N[2]=140|c,_l(N),N[3]=N[15]=s,N[8]=u,N[10]=_||s&&s[10],N[11]=v||s&&s[11],N[12]=C||s&&s[12]||null,N[9]=D||s&&s[9]||null,N[6]=p,N[16]=2==o.type?s[16]:N,N}function ud(s,o,u,c,h){let p=s.data[o];if(null===p)p=Y0(s,o,u,c,h),St.lFrame.inI18n&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const _=Hs();p.injectorIndex=null===_?-1:_.injectorIndex}return li(p,!0),p}function Y0(s,o,u,c,h){const p=vl(),_=Na(),C=s.data[o]=function(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(_?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}function Wh(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function eg(s,o,u){Ma(o);try{const c=s.viewQuery;null!==c&&sg(1,c,u);const h=s.template;null!==h&&V_(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&qh(s,o),s.staticViewQueries&&sg(2,s.viewQuery,u);const p=s.components;null!==p&&function(s,o){for(let u=0;u<o.length;u++)lb(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Go()}}function Zh(s,o,u,c){const h=o[2];if(256==(256&h))return;Ma(o);const p=_o();try{_l(o),function(s){St.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&V_(s,o,u,2,c);const _=3==(3&h);if(!p)if(_){const D=s.preOrderCheckHooks;null!==D&&js(o,D,null)}else{const D=s.preOrderHooks;null!==D&&yr(o,D,0,null),ka(o,0)}if(function(s){for(let o=w_(s);null!==o;o=ME(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(1024&h[2])&&cu(p,1),h[2]|=1024}}}(o),function(s){for(let o=w_(s);null!==o;o=ME(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];ml(c)&&Zh(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&qh(s,o),!p)if(_){const D=s.contentCheckHooks;null!==D&&js(o,D)}else{const D=s.contentHooks;null!==D&&yr(o,D,1),ka(o,1)}!function(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Ra(~h);else{const p=h,_=u[++c],v=u[++c];xa(_,p),v(2,o[p])}}}finally{Ra(-1)}}(s,o);const v=s.components;null!==v&&function(s,o){for(let u=0;u<o.length;u++)zN(s,o[u])}(o,v);const C=s.viewQuery;if(null!==C&&sg(2,C,c),!p)if(_){const D=s.viewCheckHooks;null!==D&&js(o,D)}else{const D=s.viewHooks;null!==D&&yr(o,D,2),ka(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,cu(o[3],-1))}finally{Go()}}function QE(s,o,u,c){const h=o[10],p=!_o(),_=mh(o);try{p&&!_&&h.begin&&h.begin(),_&&eg(s,o,c),Zh(s,o,u,c)}finally{p&&!_&&h.end&&h.end()}}function V_(s,o,u,c,h){const p=qr(),_=2&c;try{Ra(-1),_&&o.length>20&&M_(s,o,20,_o()),u(c,h)}finally{Ra(p)}}function tg(s,o,u){if(yc(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,u[p],p)}}}function Vu(s,o,u){!Nc()||(function(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||qo(u,o),Pi(c,o);const _=u.initialInputs;for(let v=h;v<p;v++){const C=s.data[v],D=cs(C);D&&HN(o,u,C);const N=zn(o,s,v,u);Pi(N,o),null!==_&&jN(0,v-h,N,C,0,_),D&&(Pr(u.index,o)[8]=N)}}(s,o,u,Nn(u,o)),128==(128&u.flags)&&function(s,o,u){const c=u.directiveStart,h=u.directiveEnd,_=u.index,v=St.lFrame.currentDirectiveIndex;try{Ra(_);for(let C=c;C<h;C++){const D=s.data[C],N=o[C];jo(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&rb(D,N)}}finally{Ra(-1),jo(v)}}(s,o,u))}function K0(s,o,u=Nn){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const _=c[p+1],v=-1===_?u(o,s):s[_];s[h++]=v}}}function zh(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=B_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function B_(s,o,u,c,h,p,_,v,C,D){const N=20+c,P=N+h,L=function(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:jt);return u}(N,P),K="function"==typeof D?D():D;return L[1]={type:s,blueprint:L,template:u,queries:null,viewQuery:v,declTNode:o,data:L.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:C,consts:K,incompleteFirstPass:!1}}function X0(s,o,u,c){const h=cb(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&lT(s).push(c,h.length-1))}function eb(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Ks(s,o,u,c,h,p,_,v){const C=Nn(o,u);let N,D=o.inputs;!v&&null!=D&&(N=D[c])?(fb(s,u,N,c,h),dl(o)&&function(s,o){const u=Pr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=_?_(h,o.value||"",c):h,On(p)?p.setProperty(C,c,h):Ss(c)||(C.setProperty?C.setProperty(c,h):C[c]=h))}function ng(s,o,u,c){let h=!1;if(Nc()){const p=function(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const _=c[p];HE(u,_.selectors,!1)&&(h||(h=[]),Tn(qo(u,o),s,_.type),cs(_)?(sT(s,u),h.unshift(_)):h.push(_))}return h}(s,o,u),_=null===c?null:{"":-1};if(null!==p){h=!0,ib(u,s.data.length,p.length);for(let N=0;N<p.length;N++){const P=p[N];P.providersResolver&&P.providersResolver(P)}let v=!1,C=!1,D=Wh(s,o,p.length,null);for(let N=0;N<p.length;N++){const P=p[N];u.mergedAttrs=$c(u.mergedAttrs,P.hostAttrs),sb(s,u,o,D,P),oT(D,P,_),null!==P.contentQueries&&(u.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(u.flags|=128);const L=P.type.prototype;!v&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),v=!0),!C&&(L.ngOnChanges||L.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),D++}!function(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,_=[];let v=null,C=null;for(let D=o.directiveStart;D<c;D++){const N=h[D],P=N.inputs,L=null===p||j0(o)?null:GN(P,p);_.push(L),v=eb(P,D,v),C=eb(N.outputs,D,C)}null!==v&&(v.hasOwnProperty("class")&&(o.flags|=16),v.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=v,o.outputs=C}(s,u)}_&&function(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new fe("301",`Export of name '${o[h+1]}' not found!`);c.push(o[h],p)}}}(u,c,_)}return u.mergedAttrs=$c(u.mergedAttrs,u.attrs),h}function U_(s,o,u,c,h,p){const _=p.hostBindings;if(_){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const C=~o.index;(function(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(v)!=C&&v.push(C),v.push(c,h,_)}}function rb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function sT(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function oT(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;cs(o)&&(u[""]=s)}}function ib(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function sb(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=$s(h.type)),_=new vo(p,cs(h),null);s.blueprint[c]=_,u[c]=_,U_(s,o,0,c,Wh(s,u,h.hostVars,jt),h)}function HN(s,o,u){const c=Nn(o,s),h=zh(u),p=s[10],_=$_(s,Lr(s,h,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=_}function ob(s,o,u,c,h,p,_){if(null==p)On(s)?s.removeAttribute(o,h,u):o.removeAttribute(h);else{const v=null==_?oe(p):_(p,c||"",h);On(s)?s.setAttribute(o,h,v,u):u?o.setAttributeNS(u,h,v):o.setAttribute(h,v)}}function jN(s,o,u,c,h,p){const _=p[o];if(null!==_){const v=c.setInput;for(let C=0;C<_.length;){const D=_[C++],N=_[C++],P=_[C++];null!==v?c.setInput(u,P,D,N):u[N]=P}}}function GN(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function ab(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function zN(s,o){const u=Pr(o,s);if(ml(u)){const c=u[1];80&u[2]?Zh(c,u,c.template,u[8]):u[5]>0&&Bu(u)}}function Bu(s){for(let c=w_(s);null!==c;c=ME(c))for(let h=10;h<c.length;h++){const p=c[h];if(1024&p[2]){const _=p[1];Zh(_,p,_.template,p[8])}else p[5]>0&&Bu(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=Pr(u[c],s);ml(h)&&h[5]>0&&Bu(h)}}function lb(s,o){const u=Pr(o,s),c=u[1];(function(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),eg(c,u,u[8])}function $_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function cd(s){for(;s;){s[2]|=64;const o=zp(s);if(ds(s)&&!o)return s;s=o}return null}function ub(s,o,u){const c=o[10];c.begin&&c.begin();try{Zh(s,o,s.template,u)}catch(h){throw hb(o,h),h}finally{c.end&&c.end()}}function aT(s){!function(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=A0(u),h=c[1];QE(h,c,h.template,u)}}(s[8])}function sg(s,o,u){yo(0),o(s,u)}const XN=(()=>Promise.resolve(null))();function cb(s){return s[7]||(s[7]=[])}function lT(s){return s.cleanup||(s.cleanup=[])}function hb(s,o){const u=s[9],c=u?u.get(Uh,null):null;c&&c.handleError(o)}function fb(s,o,u,c,h){for(let p=0;p<u.length;){const _=u[p++],v=u[p++],C=o[_],D=s.data[_];null!==D.setInput?D.setInput(C,h,c,v):C[v]=h}}function Qa(s,o,u){const c=uu(o,s);RE(s[11],c,u)}function H_(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const v=o[_];"number"==typeof v?p=v:1==p?h=Q(h,v):2==p&&(c=Q(c,v+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}const Ul=new Gn("INJECTOR",-1);class pb{get(o,u=nn){if(u===nn){const c=new Error(`NullInjectorError: No provider for ${X(o)}!`);throw c.name="NullInjectorError",c}return u}}const Kh=new Gn("Set Injector scope."),Cn={},xn={};let en;function $l(){return void 0===en&&(en=new pb),en}function j_(s,o=null,u=null,c){return new tx(s,u,o||$l(),c)}class tx{constructor(o,u,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&Ms(u,v=>this.processProvider(v,o,u)),Ms([o],v=>this.processInjectorType(v,[],p)),this.records.set(Ul,Kr(void 0,this));const _=this.records.get(Kh);this.scope=null!=_?_.value:null,this.source=h||("object"==typeof o?null:X(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=nn,c=at.Default){this.assertNotDestroyed();const h=Vt(this),p=Wn(void 0);try{if(!(c&at.SkipSelf)){let v=this.records.get(o);if(void 0===v){const C=("function"==typeof(s=o)||"object"==typeof s&&s instanceof Gn)&&sn(o);v=C&&this.injectableDefInScope(C)?Kr(dd(o),Cn):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(c&at.Self?$l():this.parent).get(o,u=c&at.Optional&&u===nn?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[Ar]=_[Ar]||[]).unshift(X(o)),h)throw _;return ps(_,o,"R3InjectorError",this.source)}throw _}finally{Wn(p),Vt(h)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,h)=>o.push(X(h))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,c){if(!(o=H(o)))return!1;let h=ii(o);const p=null==h&&o.ngModule||void 0,_=void 0===p?o:p,v=-1!==c.indexOf(_);if(void 0!==p&&(h=ii(p)),null==h)return!1;if(null!=h.imports&&!v){let N;c.push(_);try{Ms(h.imports,P=>{this.processInjectorType(P,u,c)&&(void 0===N&&(N=[]),N.push(P))})}finally{}if(void 0!==N)for(let P=0;P<N.length;P++){const{ngModule:L,providers:K}=N[P];Ms(K,te=>this.processProvider(te,L,K||vt))}}this.injectorDefTypes.add(_);const C=$s(_)||(()=>new _);this.records.set(_,Kr(C,Cn));const D=h.providers;if(null!=D&&!v){const N=o;Ms(D,P=>this.processProvider(P,N,D))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let h=Jh(o=H(o))?o:H(o&&o.provide);const p=hT(s=o)?Kr(void 0,s.useValue):Kr(rn(s),Cn);var s;if(Jh(o)||!0!==o.multi)this.records.get(h);else{let _=this.records.get(h);_||(_=Kr(void 0,Cn,!0),_.factory=()=>Sl(_.multi),this.records.set(h,_)),h=o,_.multi.push(o)}this.records.set(h,p)}hydrate(o,u){return u.value===Cn&&(u.value=xn,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(s=u.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const u=H(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function dd(s){const o=sn(s),u=null!==o?o.factory:$s(s);if(null!==u)return u;if(s instanceof Gn)throw new Error(`Token ${X(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=Ao(o,"?");throw new Error(`Can't resolve all parameters for ${X(s)}: (${c.join(", ")}).`)}const u=function(s){const o=s&&(s[fr]||s[pr]);if(o){const u=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function rn(s,o,u){let c;if(Jh(s)){const h=H(s);return $s(h)||dd(h)}if(hT(s))c=()=>H(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Sl(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>er(H(s.useExisting));else{const h=H(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return $s(h)||dd(h);c=()=>new h(...Sl(s.deps))}return c}function Kr(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function hT(s){return null!==s&&"object"==typeof s&&ks in s}function Jh(s){return"function"==typeof s}const gT=function(s,o,u){return function(s,o=null,u=null,c){const h=j_(s,o,u,c);return h._resolveInjectorDefTypes(),h}({name:u},o,s,u)};let Cr=(()=>{class s{static create(u,c){return Array.isArray(u)?gT(u,c,""):gT(u.providers,u.parent,u.name||"")}}return s.THROW_IF_NOT_FOUND=nn,s.NULL=new pb,s.\u0275prov=wt({token:s,providedIn:"any",factory:()=>er(Ul)}),s.__NG_ELEMENT_ID__=-1,s})();function Cb(s,o){mu(A0(s)[1],Hn())}function X_(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(cs(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");h=o.\u0275dir}if(h){if(u){c.push(h);const _=s;_.inputs=Eb(s.inputs),_.declaredInputs=Eb(s.declaredInputs),_.outputs=Eb(s.outputs);const v=h.hostBindings;v&&DT(s,v);const C=h.viewQuery,D=h.contentQueries;if(C&&ET(s,C),D&&TT(s,D),he(s.inputs,h.inputs),he(s.declaredInputs,h.declaredInputs),he(s.outputs,h.outputs),cs(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let _=0;_<p.length;_++){const v=p[_];v&&v.ngInherit&&v(s),v===X_&&(u=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=$c(h.hostAttrs,u=$c(u,h.hostAttrs))}}(c)}function Eb(s){return s===on?{}:s===vt?[]:s}function ET(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function TT(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function DT(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let ey=null;function Uu(){if(!ey){const s=At.Symbol;if(s&&s.iterator)ey=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ey=c)}}}return ey}class la{constructor(o){this.wrapped=o}static wrap(o){return new la(o)}static unwrap(o){return la.isWrapped(o)?o.wrapped:o}static isWrapped(o){return o instanceof la}}function $u(s){return!!Tb(s)&&(Array.isArray(s)||!(s instanceof Map)&&Uu()in s)}function Tb(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function xo(s,o,u){return s[o]=u}function Ci(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function pd(s,o,u,c){const h=Ci(s,o,u);return Ci(s,o+1,c)||h}function ty(s,o,u,c){const h=Pe();return Ci(h,xi(),o)&&(Yt(),function(s,o,u,c,h,p){const _=Nn(s,o);ob(o[11],_,p,s.value,u,c,h)}(jn(),h,s,o,u,c)),ty}function rf(s,o,u,c){return Ci(s,xi(),u)?o+oe(u)+c:jt}function Hu(s,o,u,c,h,p,_,v,C,D){const P=function(s,o,u,c,h,p){const _=pd(s,o,u,c);return pd(s,o+2,h,p)||_}(s,Ni(),u,h,_,C);return Mi(4),P?o+oe(u)+c+oe(h)+p+oe(_)+v+oe(C)+D:jt}function yd(s,o,u,c,h,p,_,v){const C=Pe(),D=Yt(),N=s+20,P=D.firstCreatePass?function(s,o,u,c,h,p,_,v,C){const D=o.consts,N=ud(o,s,4,_||null,_r(D,v));ng(o,u,N,_r(D,C)),mu(o,N);const P=N.tViews=B_(2,N,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,D);return null!==o.queries&&(o.queries.template(o,N),P.queries=o.queries.embeddedTView(N)),N}(N,D,C,o,u,c,h,p,_):D.data[N];li(P,!1);const L=C[11].createComment("");Yp(D,C,L,P),Pi(L,C),$_(C,C[N]=ab(L,C,L,P)),mi(P)&&Vu(D,C,P),null!=_&&K0(C,P,v)}function NT(s){return Aa(St.lFrame.contextLView,20+s)}function vg(s,o=at.Default){const u=Pe();return null===u?er(s,o):Ns(Hn(),u,H(s),o)}function Mb(s,o,u){const c=Pe();return Ci(c,xi(),o)&&Ks(Yt(),jn(),c,s,o,c[11],u,!1),Mb}function Rb(s,o,u,c,h){const _=h?"class":"style";fb(s,u,o.inputs[_],_,c)}function df(s,o,u,c){const h=Pe(),p=Yt(),_=20+s,v=h[11],C=h[_]=O0(v,o,St.lFrame.currentNamespace),D=p.firstCreatePass?function(s,o,u,c,h,p,_){const v=o.consts,D=ud(o,s,2,h,_r(v,p));return ng(o,u,D,_r(v,_)),null!==D.attrs&&H_(D,D.attrs,!1),null!==D.mergedAttrs&&H_(D,D.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,D),D}(_,p,h,0,o,u,c):p.data[_];li(D,!0);const N=D.mergedAttrs;null!==N&&bh(v,C,N);const P=D.classes;null!==P&&$0(v,C,P);const L=D.styles;null!==L&&UE(v,C,L),64!=(64&D.flags)&&Yp(p,h,C,D),0===St.lFrame.elementDepthCount&&Pi(C,h),St.lFrame.elementDepthCount++,mi(D)&&(Vu(p,h,D),tg(p,D,h)),null!==c&&K0(h,D)}function bg(){let s=Hn();Na()?bl():(s=s.parent,li(s,!1));const o=s;St.lFrame.elementDepthCount--;const u=Yt();u.firstCreatePass&&(mu(u,s),yc(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&Rb(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&Rb(u,o,Pe(),o.stylesWithoutHost,!1)}function kb(s,o,u,c){df(s,o,u,c),bg()}function wg(s,o,u){const c=Pe(),h=Yt(),p=s+20,_=h.firstCreatePass?function(s,o,u,c,h){const p=o.consts,_=_r(p,c),v=ud(o,s,8,"ng-container",_);return null!==_&&H_(v,_,!0),ng(o,u,v,_r(p,h)),null!==o.queries&&o.queries.elementStart(o,v),v}(p,h,c,o,u):h.data[p];li(_,!0);const v=c[p]=c[11].createComment("");Yp(h,c,v,_),Pi(v,c),mi(_)&&(Vu(h,c,_),tg(h,_,c)),null!=u&&K0(c,_)}function Pb(){let s=Hn();const o=Yt();Na()?bl():(s=s.parent,li(s,!1)),o.firstCreatePass&&(mu(o,s),yc(s)&&o.queries.elementEnd(s))}function qT(){return Pe()}function Ob(s){return!!s&&"function"==typeof s.then}function WT(s){return!!s&&"function"==typeof s.subscribe}const Fb=WT;function Lb(s,o,u,c){const h=Pe(),p=Yt(),_=Hn();return function(s,o,u,c,h,p,_,v){const C=mi(c),N=s.firstCreatePass&&lT(s),P=o[8],L=cb(o);let K=!0;if(3&c.type||v){const ie=Nn(c,o),Be=v?v(ie):ie,Ae=L.length,gt=v?Rt=>v(Sn(Rt[c.index])):c.index;if(On(u)){let Rt=null;if(!v&&C&&(Rt=function(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const _=h[p];if(_===u&&h[p+1]===c){const v=o[7],C=h[p+2];return v.length>C?v[C]:null}"string"==typeof _&&(p+=2)}return null}(s,o,h,c.index)),null!==Rt)(Rt.__ngLastListenerFn__||Rt).__ngNextListenerFn__=p,Rt.__ngLastListenerFn__=p,K=!1;else{p=$b(c,o,P,p,!1);const gn=u.listen(Be,h,p);L.push(p,gn),N&&N.push(h,gt,Ae,Ae+1)}}else p=$b(c,o,P,p,!0),Be.addEventListener(h,p,_),L.push(p),N&&N.push(h,gt,Ae,_)}else p=$b(c,o,P,p,!1);const te=c.outputs;let _e;if(K&&null!==te&&(_e=te[h])){const ie=_e.length;if(ie)for(let Be=0;Be<ie;Be+=2){const Ft=o[_e[Be]][_e[Be+1]].subscribe(p),Lo=L.length;L.push(p,Ft),N&&N.push(h,c.index,Lo,-(Lo+1))}}}(p,h,h[11],_,s,o,!!u,c),Lb}function Ub(s,o,u,c){try{return!1!==u(c)}catch(h){return hb(s,h),!1}}function $b(s,o,u,c,h){return function p(_){if(_===Function)return c;const v=2&s.flags?Pr(s.index,o):o;0==(32&o[2])&&cd(v);let C=Ub(o,0,c,_),D=p.__ngNextListenerFn__;for(;D;)C=Ub(o,0,D,_)&&C,D=D.__ngNextListenerFn__;return h&&!1===C&&(_.preventDefault(),_.returnValue=!1),C}}function Hb(s=1){return function(s){return(St.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,St.lFrame.contextLView))[8]}(s)}function dy(s,o){let u=null;const c=function(s){const o=s.attrs;if(null!=o){const u=o.indexOf(5);if(0==(1&u))return o[u+1]}return null}(s);for(let h=0;h<o.length;h++){const p=o[h];if("*"!==p){if(null===c?HE(s,p,!0):sF(c,p))return h}else u=h}return u}function jb(s){const o=Pe()[16][6];if(!o.projection){const c=o.projection=Ao(s?s.length:1,null),h=c.slice();let p=o.child;for(;null!==p;){const _=s?dy(p,s):0;null!==_&&(h[_]?h[_].projectionNext=p:c[_]=p,h[_]=p),p=p.next}}}function ZT(s,o=0,u){const c=Pe(),h=Yt(),p=ud(h,20+s,16,null,u||null);null===p.projection&&(p.projection=o),bl(),64!=(64&p.flags)&&function(s,o,u){Fu(o[11],0,o,u,PE(s,u,o),A_(u.parent||o[6],u,o))}(h,c,p)}function Gb(s,o,u){return hy(s,"",o,"",u),Gb}function hy(s,o,u,c,h){const p=Pe(),_=rf(p,o,u,c);return _!==jt&&Ks(Yt(),jn(),p,s,_,p[11],h,!1),hy}function KT(s,o,u,c,h){const p=s[u+1],_=null===o;let v=c?ra(p):Ya(p),C=!1;for(;0!==v&&(!1===C||_);){const N=s[v+1];wx(s[v],o)&&(C=!0,s[v+1]=c?q0(N):ad(N)),v=c?ra(N):Ya(N)}C&&(s[u+1]=c?ad(p):q0(p))}function wx(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ua(s,o)>=0}const ci={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Yb(s){return s.substring(ci.key,ci.keyEnd)}function Wl(s,o){const u=ci.textEnd;return u===o?-1:(o=ci.keyEnd=function(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,ci.key=o,u),hf(s,o,u))}function hf(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function qu(s,o,u){return eo(s,o,u,!1),qu}function my(s,o){return eo(s,o,null,!0),my}function Tg(s){to(br,Xs,s,!0)}function Xs(s,o){for(let u=function(s){return function(s){ci.key=0,ci.keyEnd=0,ci.value=0,ci.valueEnd=0,ci.textEnd=s.length}(s),Wl(s,hf(s,0,ci.textEnd))}(o);u>=0;u=Wl(o,u))br(s,Yb(o),!0)}function eo(s,o,u,c){const h=Pe(),p=Yt(),_=Mi(2);p.firstUpdatePass&&nD(p,s,_,c),o!==jt&&Ci(h,_,o)&&rD(p,p.data[qr()],h,h[11],s,h[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=X(Qo(s)))),s}(o,u),c,_)}function to(s,o,u,c){const h=Yt(),p=Mi(2);h.firstUpdatePass&&nD(h,null,p,c);const _=Pe();if(u!==jt&&Ci(_,p,u)){const v=h.data[qr()];if(yy(v,c)&&!_y(h,p)){let C=c?v.classesWithoutHost:v.stylesWithoutHost;null!==C&&(u=Q(C,u||"")),Rb(h,v,_,u,c)}else!function(s,o,u,c,h,p,_,v){h===jt&&(h=vt);let C=0,D=0,N=0<h.length?h[0]:null,P=0<p.length?p[0]:null;for(;null!==N||null!==P;){const L=C<h.length?h[C+1]:void 0,K=D<p.length?p[D+1]:void 0;let _e,te=null;N===P?(C+=2,D+=2,L!==K&&(te=P,_e=K)):null===P||null!==N&&N<P?(C+=2,te=N):(D+=2,te=P,_e=K),null!==te&&rD(s,o,u,c,te,_e,_,v),N=C<h.length?h[C]:null,P=D<p.length?p[D]:null}}(h,v,_,_[11],_[p+1],_[p+1]=function(s,o,u){if(null==u||""===u)return vt;const c=[],h=Qo(u);if(Array.isArray(h))for(let p=0;p<h.length;p++)s(c,h[p],!0);else if("object"==typeof h)for(const p in h)h.hasOwnProperty(p)&&s(c,p,h[p]);else"string"==typeof h&&o(c,h);return c}(s,o,u),c,p)}}function _y(s,o){return o>=s.expandoStartIndex}function nD(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[qr()],_=_y(s,u);yy(p,c)&&null===o&&!_&&(o=!1),o=function(s,o,u,c){const h=function(s){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=Cd(u=Ig(null,s,o,u,c),o.attrs,c),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(u=Ig(h,s,o,u,c),null===p){let C=function(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Ya(c))return s[ra(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Ig(null,s,o,C[1],c),C=Cd(C,o.attrs,c),function(s,o,u,c){s[ra(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=Cd(c,s[p].hostAttrs,u);return Cd(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function(s,o,u,c,h,p){let _=p?o.classBindings:o.styleBindings,v=ra(_),C=Ya(_);s[c]=u;let N,D=!1;if(Array.isArray(u)){const P=u;N=P[1],(null===N||Ua(P,N)>0)&&(D=!0)}else N=u;if(h)if(0!==C){const L=ra(s[v+1]);s[c+1]=R_(L,v),0!==L&&(s[L+1]=ld(s[L+1],c)),s[v+1]=function(s,o){return 131071&s|o<<17}(s[v+1],c)}else s[c+1]=R_(v,0),0!==v&&(s[v+1]=ld(s[v+1],c)),v=c;else s[c+1]=R_(C,0),0===v?v=c:s[C+1]=ld(s[C+1],c),C=c;D&&(s[c+1]=ad(s[c+1])),KT(s,N,c,!0),KT(s,N,c,!1),function(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ua(p,o)>=0&&(u[c+1]=q0(u[c+1]))}(o,N,s,c,p),_=R_(v,C),p?o.classBindings=_:o.styleBindings=_}(h,p,o,u,_,c)}}function Ig(s,o,u,c,h){let p=null;const _=u.directiveEnd;let v=u.directiveStylingLast;for(-1===v?v=u.directiveStart:v++;v<_&&(p=o[v],c=Cd(c,p.hostAttrs,h),p!==s);)v++;return null!==s&&(u.directiveStylingLast=v),c}function Cd(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?h=_:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),br(s,_,!!u||o[++p]))}return void 0===s?null:s}function rD(s,o,u,c,h,p,_,v){if(!(3&o.type))return;const C=s.data,D=C[v+1];ff(function(s){return 1==(1&s)}(D)?Xb(C,o,u,h,Ya(D),_):void 0)||(ff(p)||function(s){return 2==(2&s)}(D)&&(p=Xb(C,null,u,h,v,_)),function(s,o,u,c,h){const p=On(s);if(o)h?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let _=-1===c.indexOf("-")?void 0:za.DashCase;if(null==h)p?s.removeStyle(u,c,_):u.style.removeProperty(c);else{const v="string"==typeof h&&h.endsWith("!important");v&&(h=h.slice(0,-10),_|=za.Important),p?s.setStyle(u,c,h,_):u.style.setProperty(c,h,v?"important":"")}}}(c,_,uu(qr(),u),h,p))}function Xb(s,o,u,c,h,p){const _=null===o;let v;for(;h>0;){const C=s[h],D=Array.isArray(C),N=D?C[1]:C,P=null===N;let L=u[h+1];L===jt&&(L=P?vt:void 0);let K=P?hr(L,c):N===c?L:void 0;if(D&&!ff(K)&&(K=hr(C,c)),ff(K)&&(v=K,_))return v;const te=s[h+1];h=_?ra(te):Ya(te)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(v=hr(C,c))}return v}function ff(s){return void 0!==s}function yy(s,o){return 0!=(s.flags&(o?16:32))}function Ag(s,o=""){const u=Pe(),c=Yt(),h=s+20,p=c.firstCreatePass?ud(c,h,1,o,null):c.data[h],_=u[h]=C_(u[11],o);Yp(c,u,_,p),li(p,!1)}function Zl(s){return pf("",s,""),Zl}function pf(s,o,u){const c=Pe(),h=rf(c,s,o,u);return h!==jt&&Qa(c,qr(),h),pf}function vy(s,o,u,c,h){const p=Pe(),_=function(s,o,u,c,h,p){const v=pd(s,Ni(),u,h);return Mi(2),v?o+oe(u)+c+oe(h)+p:jt}(p,s,o,u,c,h);return _!==jt&&Qa(p,qr(),_),vy}function Ng(s,o,u,c,h,p,_,v,C){to(br,Xs,Hu(Pe(),s,o,u,c,h,p,_,v,C),!0)}function Cy(s,o,u){const c=Pe();return Ci(c,xi(),o)&&Ks(Yt(),jn(),c,s,o,c[11],u,!0),Cy}const Wu=void 0;var Ox=["en",[["a","p"],["AM","PM"],Wu],[["AM","PM"],Wu,Wu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Wu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Wu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Wu,"{1} 'at' {0}",Wu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let Zu={};function aw(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=_D(o);if(u)return u;const c=o.split("-")[0];if(u=_D(c),u)return u;if("en"===c)return Ox;throw new Error(`Missing locale data for the locale "${s}".`)}function mD(s){return aw(s)[It.PluralCase]}function _D(s){return s in Zu||(Zu[s]=At.ng&&At.ng.common&&At.ng.common.locales&&At.ng.common.locales[s]),Zu[s]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Lx=["zero","one","two","few","many"],_f="en-US",Ey={marker:"element"},zl={marker:"ICU"};var qn=(()=>((qn=qn||{})[qn.SHIFT=2]="SHIFT",qn[qn.APPEND_EAGERLY=1]="APPEND_EAGERLY",qn[qn.COMMENT=2]="COMMENT",qn))();let Ty=_f;function yf(s){(function(s,o){null==s&&yt(o,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(Ty=s.toLowerCase().replace(/_/g,"-"))}function Ed(s,o,u){const c=o.insertBeforeIndex,h=Array.isArray(c)?c[0]:c;return null===h?S_(s,0,u):Sn(u[h])}function vD(s,o,u,c,h){const p=o.insertBeforeIndex;if(Array.isArray(p)){let _=c,v=null;if(3&o.type||(v=_,_=h),null!==_&&0==(2&o.flags))for(let C=1;C<p.length;C++)Ou(s,_,u[p[C]],v,!1)}}function lw(s,o){if(s.push(o),s.length>1)for(let u=s.length-2;u>=0;u--){const c=s[u];uw(c)||bD(c,o)&&null===Dy(c)&&cw(c,o.index)}}function uw(s){return!(64&s.type)}function bD(s,o){return uw(o)||s.index>o.index}function Dy(s){const o=s.insertBeforeIndex;return Array.isArray(o)?o[0]:o}function cw(s,o){const u=s.insertBeforeIndex;Array.isArray(u)?u[0]=o:(VE(Ed,vD),s.insertBeforeIndex=o)}function Td(s,o){const u=s.data[o];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function dw(s,o,u){const c=Y0(s,u,64,null,null);return lw(o,c),c}function Iy(s,o){const u=o[s.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function hw(s){return s>>>17}function fw(s){return(131070&s)>>>1}let Ei=0,zu=0;function Ku(s,o,u,c){const h=u[11];let _,p=null;for(let v=0;v<o.length;v++){const C=o[v];if("string"==typeof C){const D=o[++v];null===u[D]&&(u[D]=C_(h,C))}else if("number"==typeof C)switch(1&C){case 0:const D=hw(C);let N,P;if(null===p&&(p=D,_=D_(h,c)),D===p?(N=c,P=_):(N=null,P=Sn(u[D])),null!==P){const _e=fw(C);Ou(h,P,u[_e],N,!1);const Be=Td(s,_e);if(null!==Be&&"object"==typeof Be){const Ae=Iy(Be,u);null!==Ae&&Ku(s,Be.create[Ae],u,u[Be.anchorIdx])}}break;case 1:const K=o[++v],te=o[++v];ob(h,uu(C>>>1,u),null,null,K,te,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${C}"`)}else switch(C){case zl:const D=o[++v],N=o[++v];null===u[N]&&Pi(u[N]=hN(h,D),u);break;case Ey:const P=o[++v],L=o[++v];null===u[L]&&Pi(u[L]=O0(h,P,null),u)}}}function gw(s,o,u,c,h){for(let p=0;p<u.length;p++){const _=u[p],v=u[++p];if(_&h){let C="";for(let D=p+1;D<=p+v;D++){const N=u[D];if("string"==typeof N)C+=N;else if("number"==typeof N)if(N<0)C+=oe(o[c-N]);else{const P=N>>>2;switch(3&N){case 1:const L=u[++D],K=u[++D],te=s.data[P];"string"==typeof te?ob(o[11],o[P],null,te,L,C,K):Ks(s,te,o,L,C,o[11],K,!1);break;case 0:const _e=o[P];null!==_e&&RE(o[11],_e,C);break;case 2:Dd(s,Td(s,P),o,C);break;case 3:mw(s,Td(s,P),c,o)}}}}else{const C=u[p+1];if(C>0&&3==(3&C)){const N=Td(s,C>>>2);o[N.currentCaseLViewIndex]<0&&mw(s,N,c,o)}}p+=v}}function mw(s,o,u,c){let h=c[o.currentCaseLViewIndex];if(null!==h){let p=Ei;h<0&&(h=c[o.currentCaseLViewIndex]=~h,p=-1),gw(s,c,o.update[h],u,p)}}function Dd(s,o,u,c){const h=function(s,o){let u=s.cases.indexOf(o);if(-1===u)switch(s.type){case 1:{const c=function(s,o){const u=mD(o)(parseInt(s,10)),c=Lx[u];return void 0!==c?c:"other"}(o,Ty);u=s.cases.indexOf(c),-1===u&&"other"!==c&&(u=s.cases.indexOf("other"));break}case 0:u=s.cases.indexOf("other")}return-1===u?null:u}(o,c);if(Iy(o,u)!==h&&(Hx(s,o,u),u[o.currentCaseLViewIndex]=null===h?null:~h,null!==h)){const _=u[o.anchorIdx];_&&Ku(s,o.create[h],u,_)}}function Hx(s,o,u){let c=Iy(o,u);if(null!==c){const h=o.remove[c];for(let p=0;p<h.length;p++){const _=h[p];if(_>0){const v=uu(_,u);null!==v&&U0(u[11],v)}else Hx(s,Td(s,~_),u)}}}function Gx(){const s=[];let u,c,o=-1;function p(v,C){o=0;const D=Iy(v,C);c=null!==D?v.remove[D]:vt}function _(){if(o<c.length){const v=c[o++];return v>0?u[v]:(s.push(o,c),p(u[1].data[~v],u),_())}return 0===s.length?null:(c=s.pop(),o=s.pop(),_())}return function(v,C){for(u=C;s.length;)s.pop();return p(v.value,C),_}}const Id=/\ufffd(\d+):?\d*\ufffd/gi,Og=/\ufffd(\d+)\ufffd/,Ny=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,TD=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,DD=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ID=/\uE500/g;function _w(s,o,u,c,h,p,_){const v=Wh(s,c,1,null);let C=v<<qn.SHIFT,D=Hs();o===D&&(D=null),null===D&&(C|=qn.APPEND_EAGERLY),_&&(C|=qn.COMMENT,function(s){void 0===k0&&(k0=s())}(Gx)),h.push(C,null===p?"":p);const N=Y0(s,v,_?32:1,null===p?"":p,null);lw(u,N);const P=N.index;return li(N,!1),null!==D&&o!==D&&function(s,o){let u=s.insertBeforeIndex;null===u?(VE(Ed,vD),u=s.insertBeforeIndex=[null,o]):(function(s,o,u){s!=o&&yt(u,s,o,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(o))}(D,P),N}function qx(s,o,u,c,h,p,_){const v=_.match(Id),C=_w(s,o,u,p,c,v?null:_,!1);v&&bf(h,_,C.index,null,0,null)}function bf(s,o,u,c,h,p){const _=s.length,v=_+1;s.push(null,null);const C=_+2,D=o.split(Id);let N=0;for(let P=0;P<D.length;P++){const L=D[P];if(1&P){const K=h+parseInt(L,10);s.push(-1-K),N|=ND(K)}else""!==L&&s.push(L)}return s.push(u<<2|(c?1:0)),c&&s.push(c,p),s[_]=N,s[v]=s.length-C,N}function ND(s){return 1<<Math.min(s,31)}function xD(s){let o,p,u="",c=0,h=!1;for(;null!==(o=TD.exec(s));)h?o[0]===`\ufffd/*${p}\ufffd`&&(c=o.index,h=!1):(u+=s.substring(c,o.index+o[0].length),p=o[1],h=!0);return u+=s.substr(c),u}function MD(s,o,u,c,h,p){let _=0;const v={type:h.type,currentCaseLViewIndex:Wh(s,o,1,null),anchorIdx:p,cases:[],create:[],remove:[],update:[]};(function(s,o,u){s.push(ND(o.mainBinding),2,-1-o.mainBinding,u<<2|2)})(u,h,p),function(s,o,u){const c=s.data[o];null===c?s.data[o]=u:c.value=u}(s,p,v);const C=h.values;for(let D=0;D<C.length;D++){const N=C[D],P=[];for(let L=0;L<N.length;L++){const K=N[L];if("string"!=typeof K){const te=P.push(K)-1;N[L]=`\x3c!--\ufffd${te}\ufffd--\x3e`}}_=Kx(s,v,o,u,c,h.cases[D],N.join(""),P)|_}_&&function(s,o,u){s.push(o,1,u<<2|3)}(u,_,p)}function Yx(s){const o=[],u=[];let c=1,h=0;const p=yw(s=s.replace(Ny,function(_,v,C){return c="select"===C?0:1,h=parseInt(v.substr(1),10),""}));for(let _=0;_<p.length;){let v=p[_++].trim();1===c&&(v=v.replace(/\s*(?:=)?(\w+)\s*/,"$1")),v.length&&o.push(v);const C=yw(p[_++]);o.length>u.length&&u.push(C)}return{type:c,mainBinding:h,cases:o,values:u}}function yw(s){if(!s)return[];let o=0;const u=[],c=[],h=/[{}]/g;let p;for(h.lastIndex=0;p=h.exec(s);){const v=p.index;if("}"==p[0]){if(u.pop(),0==u.length){const C=s.substring(o,v);Ny.test(C)?c.push(Yx(C)):c.push(C),o=v+1}}else{if(0==u.length){const C=s.substring(o,v);c.push(C),o=v+1}u.push("{")}}const _=s.substring(o);return c.push(_),c}function Kx(s,o,u,c,h,p,_,v){const C=[],D=[],N=[];o.cases.push(p),o.create.push(C),o.remove.push(D),o.update.push(N);const L=Rh(lu()).getInertBodyElement(_),K=vn(L)||L;return K?RD(s,o,u,c,C,D,N,K,h,v,0):0}function RD(s,o,u,c,h,p,_,v,C,D,N){let P=0,L=v.firstChild;for(;L;){const K=Wh(s,u,1,null);switch(L.nodeType){case Node.ELEMENT_NODE:const te=L,_e=te.tagName.toLowerCase();if(Up.hasOwnProperty(_e)){vw(h,Ey,_e,C,K),s.data[K]=_e;const gt=te.attributes;for(let Rt=0;Rt<gt.length;Rt++){const gn=gt.item(Rt),Ft=gn.name.toLowerCase();gn.value.match(Id)?E.hasOwnProperty(Ft)&&bf(_,gn.value,K,gn.name,0,ed[Ft]?Wa:w[Ft]?Ph:null):eM(h,K,gn)}P=RD(s,o,u,c,h,p,_,L,K,D,N+1)|P,kD(p,K,N)}break;case Node.TEXT_NODE:const ie=L.textContent||"",Be=ie.match(Id);vw(h,null,Be?"":ie,C,K),kD(p,K,N),Be&&(P=bf(_,ie,K,null,0,null)|P);break;case Node.COMMENT_NODE:const Ae=Og.exec(L.textContent||"");if(Ae){const Rt=D[parseInt(Ae[1],10)];vw(h,zl,"",C,K),MD(s,u,c,C,Rt,K),Jx(p,K,N)}}L=L.nextSibling}return P}function kD(s,o,u){0===u&&s.push(o)}function Jx(s,o,u){0===u&&(s.push(~o),s.push(o))}function vw(s,o,u,c,h){null!==o&&s.push(o),s.push(u,h,function(s,o,u){return 0|o<<17|u<<1}(0,c,h))}function eM(s,o,u){s.push(o<<1|1,u.name,u.value)}function LD(s,o,u=-1){const c=Yt(),h=Pe(),p=20+s,_=_r(c.consts,o),v=Hs();c.firstCreatePass&&function(s,o,u,c,h,p){const _=Hs(),v=[],C=[],D=[[]],N=function(s){return s.replace(ID," ")}(h=function(s,o){if(function(s){return-1===s}(o))return xD(s);{const u=s.indexOf(`:${o}\ufffd`)+2+o.toString().length,c=s.search(new RegExp(`\ufffd\\/\\*\\d+:${o}\ufffd`));return xD(s.substring(u,c))}}(h,p)).split(DD);for(let P=0;P<N.length;P++){let L=N[P];if(0==(1&P)){const K=yw(L);for(let te=0;te<K.length;te++){let _e=K[te];if(0==(1&te)){const ie=_e;""!==ie&&qx(s,_,D[0],v,C,u,ie)}else{const ie=_e;if("object"!=typeof ie)throw new Error(`Unable to parse ICU expression in "${h}" message.`);MD(s,u,C,o,ie,_w(s,_,D[0],u,v,"",!0).index)}}}else{const K=47===L.charCodeAt(0),_e=(L.charCodeAt(K?1:0),20+Number.parseInt(L.substring(K?2:1)));if(K)D.shift(),li(Hs(),!1);else{const ie=dw(s,D[0],_e);D.unshift([]),li(ie,!0)}}}s.data[c]={create:v,update:C}}(c,null===v?0:v.index,h,p,_,u);const C=c.data[p],N=OE(c,v===h[6]?null:v,h);(function(s,o,u,c){const h=s[11];for(let p=0;p<o.length;p++){const _=o[p++],v=o[p],C=(_&qn.COMMENT)===qn.COMMENT,D=(_&qn.APPEND_EAGERLY)===qn.APPEND_EAGERLY,N=_>>>qn.SHIFT;let P=s[N];null===P&&(P=s[N]=C?h.createComment(v):C_(h,v)),D&&null!==u&&Ou(h,u,P,c,!1)}})(h,C.create,N,v&&8&v.type?h[v.index]:null),Rc(!0)}function BD(s,o,u){LD(s,o,u),Rc(!1)}function ww(s){return function(s){s&&(Ei|=1<<Math.min(zu,31)),zu++}(Ci(Pe(),xi(),s)),ww}function UD(s){!function(s,o,u){if(zu>0){const c=s.data[u];gw(s,o,Array.isArray(c)?c:c.update,Ni()-zu-1,Ei)}Ei=0,zu=0}(Yt(),Pe(),s+20)}function Cw(s,o,u,c,h){if(s=H(s),Array.isArray(s))for(let p=0;p<s.length;p++)Cw(s[p],o,u,c,h);else{const p=Yt(),_=Pe();let v=Jh(s)?s:H(s.provide),C=rn(s);const D=Hn(),N=1048575&D.providerIndexes,P=D.directiveStart,L=D.providerIndexes>>20;if(Jh(s)||!s.multi){const K=new vo(C,h,vg),te=Tw(v,o,h?N:N+L,P);-1===te?(Tn(qo(D,_),p,v),Ew(p,s,o.length),o.push(v),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(K),_.push(K)):(u[te]=K,_[te]=K)}else{const K=Tw(v,o,N+L,P),te=Tw(v,o,N,N+L),_e=K>=0&&u[K],ie=te>=0&&u[te];if(h&&!ie||!h&&!_e){Tn(qo(D,_),p,v);const Be=function(s,o,u,c,h){const p=new vo(s,u,vg);return p.multi=[],p.index=o,p.componentProviders=0,$D(p,h,c&&!u),p}(h?lM:aM,u.length,h,c,C);!h&&ie&&(u[te].providerFactory=Be),Ew(p,s,o.length,0),o.push(v),D.directiveStart++,D.directiveEnd++,h&&(D.providerIndexes+=1048576),u.push(Be),_.push(Be)}else Ew(p,s,K>-1?K:te,$D(u[h?te:K],C,!h&&c));!h&&c&&ie&&u[te].componentProviders++}}}function Ew(s,o,u,c){const h=Jh(o);if(h||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const v=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const C=v.indexOf(u);-1===C?v.push(u,[c,_]):v[C+1].push(c,_)}else v.push(u,_)}}}function $D(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Tw(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function aM(s,o,u,c){return HD(this.multi,[])}function lM(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,v=zn(u,u[1],this.providerFactory.index,c);p=v.slice(0,_),HD(h,p);for(let C=_;C<v.length;C++)p.push(v[C])}else p=[],HD(h,p);return p}function HD(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function jD(s,o=[]){return u=>{u.providersResolver=(c,h)=>function(s,o,u){const c=Yt();if(c.firstCreatePass){const h=cs(s);Cw(u,c.data,c.blueprint,h,!0),Cw(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class GD{}const qD="ngComponent";class cM{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${X(s)}. Did you add it to @NgModule.entryComponents?`);return o[qD]=s,o}(o)}}let wf=(()=>{class s{}return s.NULL=new cM,s})();function Ki(...s){}function Cf(s,o){return new Os(Nn(s,o))}const hM=function(){return Cf(Hn(),Pe())};let Os=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=hM,s})();function WD(s){return s instanceof Os?s.nativeElement:s}class xy{}let fM=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>zD(),s})();const zD=function(){const s=Pe(),u=Pr(Hn().index,s);return function(s){return s[11]}(Pn(u)?u:s)};let Ef=(()=>{class s{}return s.\u0275prov=wt({token:s,providedIn:"root",factory:()=>null}),s})();class KD{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const JD=new KD("12.2.16");class QD{constructor(){}supports(o){return $u(o)}create(o){return new kF(o)}}const Aw=(s,o)=>o;class kF{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Aw}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const _=!c||u&&u.currentIndex<_M(c,h,p)?u:c,v=_M(_,h,p),C=_.currentIndex;if(_===c)h--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)h++;else{p||(p=[]);const D=v-h,N=C-h;if(D!=N){for(let L=0;L<D;L++){const K=L<p.length?p[L]:p[L]=0,te=K+L;N<=te&&te<D&&(p[L]=K+1)}p[_.previousIndex]=N-D}}v!==C&&o(_,v,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!$u(o))throw new Error(`Error trying to diff '${X(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)p=o[v],_=this._trackByFn(v,p),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,p,_,v)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,_,v),c=!0),u=u._next}else h=0,function(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Uu()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,v=>{_=this._trackByFn(h,v),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,v,_,h)),Object.is(u.item,v)||this._addIdentityChange(u,v)):(u=this._mismatch(u,v,_,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new pM(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new mM),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mM),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class pM{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gM{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class mM{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new gM,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _M(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class yM{constructor(){}supports(o){return o instanceof Map||Tb(o)}create(){return new PF}}class PF{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Tb(o)))throw new Error(`Error trying to diff '${X(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,_=h._next;return p&&(p._next=_),_&&(_._prev=p),h._next=null,h._prev=null,h}const c=new OF(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class OF{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vM(){return new Sw([new QD])}let Sw=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||vM()),deps:[[s,new Wr,new ja]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:vM}),s})();function Nw(){return new My([new yM])}let My=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Nw()),deps:[[s,new Wr,new ja]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:Nw}),s})();function Ry(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Sn(p)),Wi(p))for(let v=10;v<p.length;v++){const C=p[v],D=C[1].firstChild;null!==D&&Ry(C[1],C,D,c)}const _=u.type;if(8&_)Ry(s,o,u.child,c);else if(32&_){const v=b_(u,o);let C;for(;C=v();)c.push(C)}else if(16&_){const v=V0(o,u);if(Array.isArray(v))c.push(...v);else{const C=zp(o[16]);Ry(C[1],C,v,c,!0)}}u=h?u.projectionNext:u.next}return c}class Vr{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Ry(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Wi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(T_(o,c),Io(u,c))}this._attachedToViewContainer=!1}kE(this._lView[1],this._lView)}onDestroy(o){X0(this._lView[1],this._lView,null,o)}markForCheck(){cd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ub(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,u){fu(!0);try{ub(s,o,u)}finally{fu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,od(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class fa extends Vr{constructor(o){super(o),this._view=o}detectChanges(){aT(this._view)}checkNoChanges(){!function(s){fu(!0);try{aT(s)}finally{fu(!1)}}(this._view)}get context(){return null}}const bM=function(s){return function(s,o,u){if(dl(s)&&!u){const c=Pr(s.index,o);return new Vr(c,c)}return 47&s.type?new Vr(o[16],o):null}(Hn(),Pe(),16==(16&s))};let wM=(()=>{class s{}return s.__NG_ELEMENT_ID__=bM,s})();const EM=[new yM],DM=new Sw([new QD]),IM=new My(EM),tI=function(){return Tf(Hn(),Pe())};let Lg=(()=>{class s{}return s.__NG_ELEMENT_ID__=tI,s})();const Mw=Lg,Py=class extends Mw{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Lr(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),eg(u,c,o),new Vr(c)}};function Tf(s,o){return 4&s.type?new Py(o,s,Cf(s,o)):null}class Sd{}class nI{}const SM=function(){return sI(Hn(),Pe())};let Ju=(()=>{class s{}return s.__NG_ELEMENT_ID__=SM,s})();const Oy=Ju,kw=class extends Oy{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Cf(this._hostTNode,this._hostLView)}get injector(){return new Co(this._hostTNode,this._hostLView)}get parentInjector(){const o=dt(this._hostTNode,this._hostLView);if(Tl(o)){const u=zi(o,this._hostLView),c=Oa(o);return new Co(u[1].data[c+8],u)}return new Co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=iI(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const h=o.createEmbeddedView(u||{});return this.insert(h,c),h}createComponent(o,u,c,h,p){const _=c||this.parentInjector;if(!p&&null==o.ngModule&&_){const C=_.get(Sd,null);C&&(p=C)}const v=o.create(_,h,void 0,p);return this.insert(v.hostView,u),v}insert(o,u){const c=o._lView,h=c[1];if(Wi(c[3])){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const P=c[3],L=new kw(P,P[6],P[3]);L.detach(L.indexOf(o))}}const p=this._adjustIndex(u),_=this._lContainer;!function(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],Rs(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const v=o[19];null!==v&&v.insertView(s),o[2]|=128}(h,c,_,p);const v=B0(p,_),C=c[11],D=D_(C,_[7]);return null!==D&&function(s,o,u,c,h,p){c[0]=h,c[6]=o,od(s,c,u,1,h,p)}(h,_[6],C,c,D,v),o.attachToViewContainerRef(),Rs(Pw(_),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=iI(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=T_(this._lContainer,u);c&&(Io(Pw(this._lContainer),u),kE(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=T_(this._lContainer,u);return c&&null!=Io(Pw(this._lContainer),u)?new Vr(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function iI(s){return s[8]}function Pw(s){return s[8]||(s[8]=[])}function sI(s,o){let u;const c=o[s.index];if(Wi(c))u=c;else{let h;if(8&s.type)h=Sn(c);else{const p=o[11];h=p.createComment("");const _=Nn(s,o);Ou(p,D_(p,_),h,function(s,o){return On(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=u=ab(c,o,h,s),$_(o,u)}return new kw(u,s,o)}const Mf={};class qg extends wf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Qe(o);return new xI(u,this.ngModule)}}function $y(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const JM=new Gn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>IE});class xI extends GD{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=o.selectors.map(IN).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return $y(this.componentDef.inputs)}get outputs(){return $y(this.componentDef.outputs)}create(o,u,c,h){const p=(h=h||this.ngModule)?function(s,o){return{get:(u,c,h)=>{const p=s.get(u,Mf,h);return p!==Mf||c===Mf?p:o.get(u,c,h)}}}(o,h.injector):o,_=p.get(xy,Is),v=p.get(Ef,null),C=_.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",N=c?function(s,o,u){if(On(s))return s.selectRootElement(o,u===ze.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):O0(_.createRenderer(null,this.componentDef),D,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(D)),P=this.componentDef.onPush?576:528,L=function(s,o){return{components:[],scheduler:s||IE,clean:XN,playerHandler:o||null,flags:0}}(),K=B_(0,null,null,1,0,null,null,null,null,null),te=Lr(null,K,L,P,null,null,_,C,v,p);let _e,ie;Ma(te);try{const Be=function(s,o,u,c,h,p){const _=u[1];u[20]=s;const C=ud(_,20,2,"#host",null),D=C.mergedAttrs=o.hostAttrs;null!==D&&(H_(C,D,!0),null!==s&&(bh(h,s,D),null!==C.classes&&$0(h,s,C.classes),null!==C.styles&&UE(h,s,C.styles)));const N=c.createRenderer(s,o),P=Lr(u,zh(o),null,o.onPush?64:16,u[20],C,c,N,p||null,null);return _.firstCreatePass&&(Tn(qo(C,u),_,o.type),sT(_,C),ib(C,u.length,1)),$_(u,P),u[20]=P}(N,this.componentDef,te,_,C);if(N)if(c)bh(C,N,["ng-version",JD.full]);else{const{attrs:Ae,classes:gt}=function(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!na(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ae&&bh(C,N,Ae),gt&&gt.length>0&&$0(C,N,gt.join(" "))}if(ie=As(K,20),void 0!==u){const Ae=ie.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const Rt=u[gt];Ae.push(null!=Rt?Array.from(Rt):null)}}_e=function(s,o,u,c,h){const p=u[1],_=function(s,o,u){const c=Hn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),sb(s,c,o,Wh(s,o,1,null),u));const h=zn(o,s,c.directiveStart,c);Pi(h,o);const p=Nn(c,o);return p&&Pi(p,o),h}(p,u,o);if(c.components.push(_),s[8]=_,h&&h.forEach(C=>C(_,o)),o.contentQueries){const C=Hn();o.contentQueries(1,_,C.directiveStart)}const v=Hn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Ra(v.index),U_(u[1],v,0,v.directiveStart,v.directiveEnd,o),rb(o,_)),_}(Be,this.componentDef,te,L,[Cb]),eg(K,te,null)}finally{Go()}return new Fi(this.componentType,_e,Cf(ie,te),te,ie)}}class Fi extends class{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new fa(h),this.componentType=o}get injector(){return new Co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const Br=new Map;class tR extends Sd{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new qg(this);const c=An(o),h=o[Et]||null;h&&yf(h),this._bootstrapComponents=Za(c.bootstrap),this._r3Injector=j_(o,u,[{provide:Sd,useValue:this},{provide:wf,useValue:this.componentFactoryResolver}],X(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=Cr.THROW_IF_NOT_FOUND,c=at.Default){return o===Cr||o===Sd||o===Ul?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jy extends nI{constructor(o){super(),this.moduleType=o,null!==An(o)&&function(s){const o=new Set;!function u(c){const h=An(c,!0),p=h.id;null!==p&&(function(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${X(o)} vs ${X(o.name)}`)}(p,Br.get(p),c),Br.set(p,c));const _=Za(h.imports);for(const v of _)o.has(v)||(o.add(v),u(v))}(s)}(o)}create(o){return new tR(this.moduleType,o)}}function Zg(s,o,u,c){return f1(Pe(),ur(),s,o,u,c)}function c1(s,o,u,c,h){return Gy(Pe(),ur(),s,o,u,c,h)}function Xi(s,o,u,c,h,p){return function(s,o,u,c,h,p,_,v){const C=o+u;return function(s,o,u,c,h){const p=pd(s,o,u,c);return Ci(s,o+2,h)||p}(s,C,h,p,_)?xo(s,C+3,v?c.call(v,h,p,_):c(h,p,_)):Rf(s,C+3)}(Pe(),ur(),s,o,u,c,h,p)}function Rf(s,o){const u=s[o];return u===jt?void 0:u}function f1(s,o,u,c,h,p){const _=o+u;return Ci(s,_,h)?xo(s,_+1,p?c.call(p,h):c(h)):Rf(s,_+1)}function Gy(s,o,u,c,h,p,_){const v=o+u;return pd(s,v,h,p)?xo(s,v+2,_?c.call(_,h,p):c(h,p)):Rf(s,v+2)}function p1(s,o){const u=Yt();let c;const h=s+20;u.firstCreatePass?(c=function(s,o){if(o)for(let u=o.length-1;u>=0;u--){const c=o[u];if(s===c.name)return c}throw new fe("302",`The pipe '${s}' could not be found!`)}(o,u.pipeRegistry),u.data[h]=c,c.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(h,c.onDestroy)):c=u.data[h];const p=c.factory||(c.factory=$s(c.type)),_=Wn(vg);try{const v=yu(!1),C=p();return yu(v),function(s,o,u,c){u>=s.data.length&&(s.data[u]=null,s.blueprint[u]=null),o[u]=c}(u,Pe(),h,C),C}finally{Wn(_)}}function m1(s,o,u){const c=s+20,h=Pe(),p=Aa(h,c);return Od(h,Pd(h,c)?f1(h,ur(),o,p.transform,u,p):p.transform(u))}function LI(s,o,u,c){const h=s+20,p=Pe(),_=Aa(p,h);return Od(p,Pd(p,h)?Gy(p,ur(),o,_.transform,u,c,_):_.transform(u,c))}function Pd(s,o){return s[1].data[o].pure}function Od(s,o){return la.isWrapped(o)&&(o=la.unwrap(o),s[Ni()]=jt),o}function y1(s){return o=>{setTimeout(s,void 0,o)}}const Po=class extends a.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var h,p,_;let v=o,C=u||(()=>null),D=c;if(o&&"object"==typeof o){const P=o;v=null===(h=P.next)||void 0===h?void 0:h.bind(P),C=null===(p=P.error)||void 0===p?void 0:p.bind(P),D=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(C=y1(C),v&&(v=y1(v)),D&&(D=y1(D)));const N=super.subscribe({next:v,error:C,complete:D});return o instanceof G.w&&o.add(N),N}};function BI(){return this._results[Uu()]()}class Wy{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Uu(),c=Wy.prototype;c[u]||(c[u]=BI)}get changes(){return this._changes||(this._changes=new Po)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=yi(o);(this._changesDetected=!function(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class v1{constructor(o){this.queryList=o,this.matches=null}clone(){return new v1(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fd{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const _=u.getByIndex(p);h.push(this.queries[_.indexInDeclarationView].clone())}return new Fd(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Jy(o,u).matches&&this.queries[u].setDirty()}}class UI{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class b1{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new b1(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class kf{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new kf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,zy(u,p)),this.matchTNodeWithReadOption(o,u,wo(u,o,p,!1,!1))}else c===Lg?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,wo(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Os||h===Ju||h===Lg&&4&u.type)this.addMatch(u.index,-2);else{const p=wo(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function zy(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function C1(s,o,u,c){return-1===u?function(s,o){return 11&s.type?Cf(s,o):4&s.type?Tf(s,o):null}(o,s):-2===u?function(s,o,u){return u===Os?Cf(o,s):u===Lg?Tf(o,s):u===Ju?sI(o,s):void 0}(s,o,c):zn(s,s[1],u,o)}function Yy(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,_=u.matches,v=[];for(let C=0;C<_.length;C+=2){const D=_[C];v.push(D<0?null:C1(o,p[D],_[C+1],u.metadata.read))}h.matches=v}return h.matches}function Ky(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const _=Yy(s,o,h,u);for(let v=0;v<p.length;v+=2){const C=p[v];if(C>0)c.push(_[v/2]);else{const D=p[v+1],N=o[-C];for(let P=10;P<N.length;P++){const L=N[P];L[17]===L[3]&&Ky(L[1],L,D,c)}if(null!==N[9]){const P=N[9];for(let L=0;L<P.length;L++){const K=P[L];Ky(K[1],K,D,c)}}}}}return c}function T1(s){const o=Pe(),u=Yt(),c=pu();yo(c+1);const h=Jy(u,c);if(s.dirty&&mh(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?Ky(u,o,c,[]):Yy(u,o,h,c);s.reset(p,WD),s.notifyOnChanges()}return!0}return!1}function $I(s,o,u){const c=Yt();c.firstCreatePass&&(HI(c,new UI(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),S1(c,Pe(),o)}function D1(s,o,u,c){const h=Yt();if(h.firstCreatePass){const p=Hn();HI(h,new UI(o,u,c),p.index),function(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}S1(h,Pe(),u)}function I1(){return s=Pe(),o=pu(),s[19].queries[o].queryList;var s,o}function S1(s,o,u){const c=new Wy(4==(4&u));X0(s,o,c,c.destroy),null===o[19]&&(o[19]=new Fd),o[19].queries.push(new v1(c))}function HI(s,o,u){null===s.queries&&(s.queries=new b1),s.queries.track(new kf(o,u))}function Jy(s,o){return s.queries.getByIndex(o)}function Qy(s,o){return Tf(s,o)}const Q1=new Gn("Application Initializer");let Uf=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Ki,this.reject=Ki,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(Ob(p))u.push(p);else if(Fb(p)){const _=new Promise((v,C)=>{p.subscribe({complete:v,error:C})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(er(Q1,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const $f=new Gn("AppId"),mR={provide:$f,useFactory:function(){return`${uv()}${uv()}${uv()}`},deps:[]};function uv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const eA=new Gn("Platform Initializer"),tA=new Gn("Platform ID"),nA=new Gn("appBootstrapListener");let Hf=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const ga=new Gn("LocaleId"),X1=new Gn("DefaultCurrencyCode");class bR{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}const sm=function(s){return new jy(s)},eC=sm,tC=function(s){return Promise.resolve(sm(s))},rA=function(s){const o=sm(s),c=Za(An(s).declarations).reduce((h,p)=>{const _=Qe(p);return _&&h.push(new xI(_)),h},[]);return new bR(o,c)},DR=rA,dv=function(s){return Promise.resolve(rA(s))};let Vd=(()=>{class s{constructor(){this.compileModuleSync=eC,this.compileModuleAsync=tC,this.compileModuleAndAllComponentsSync=DR,this.compileModuleAndAllComponentsAsync=dv}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();const am=(()=>Promise.resolve(0))();function rC(s){"undefined"==typeof Zone?am.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Fs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Po(!1),this.onMicrotaskEmpty=new Po(!1),this.onStable=new Po(!1),this.onError=new Po(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let s=At.requestAnimationFrame,o=At.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(At,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,hv(s),s.isCheckStableRunning=!0,iC(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),hv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,_,v)=>{try{return sC(s),u.invokeTask(h,p,_,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),oC(s)}},onInvoke:(u,c,h,p,_,v,C)=>{try{return sC(s),u.invoke(h,p,_,v,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),oC(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,hv(s),iC(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Fs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+h,o,IR,Ki,Ki);try{return p.runTask(_,u,c)}finally{p.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const IR={};function iC(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function hv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sC(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function oC(s){s._nesting--,iC(s)}class fv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Po,this.onMicrotaskEmpty=new Po,this.onStable=new Po,this.onError=new Po}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}let aC=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fs.assertNotInAngularZone(),rC(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())rC(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(er(Fs))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})(),sl=(()=>{class s{constructor(){this._applications=new Map,lm.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return lm.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();class sA{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function NR(s){lm=s}let lm=new sA,jf=!0,lC=!1;function um(){return lC=!0,jf}function pv(){if(lC)throw new Error("Cannot enable prod mode after platform setup.");jf=!1}let Oo;const hC=new Gn("AllowMultipleToken");class gv{constructor(o,u){this.name=o,this.token=u}}function fC(s,o,u=[]){const c=`Platform: ${o}`,h=new Gn(c);return(p=[])=>{let _=pC();if(!_||_.injector.get(hC,!1))if(s)s(u.concat(p).concat({provide:h,useValue:!0}));else{const v=u.concat(p).concat({provide:h,useValue:!0},{provide:Kh,useValue:"platform"});!function(s){if(Oo&&!Oo.destroyed&&!Oo.injector.get(hC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Oo=s.get(gC);const o=s.get(eA,null);o&&o.forEach(u=>u())}(Cr.create({providers:v,name:c}))}return function(s){const o=pC();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(h)}}function pC(){return Oo&&!Oo.destroyed?Oo:null}let gC=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const v=function(s,o){let u;return u="noop"===s?new fv:("zone.js"===s?void 0:s)||new Fs({enableLongStackTrace:um(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:Fs,useValue:v}];return v.run(()=>{const D=Cr.create({providers:C,parent:this.injector,name:u.moduleType.name}),N=u.create(D),P=N.injector.get(Uh,null);if(!P)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const L=v.onError.subscribe({next:K=>{P.handleError(K)}});N.onDestroy(()=>{_v(this._modules,N),L.unsubscribe()})}),function(s,o,u){try{const c=u();return Ob(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(P,v,()=>{const L=N.injector.get(Uf);return L.runInitializers(),L.donePromise.then(()=>(yf(N.injector.get(ga,_f)||_f),this._moduleDoBootstrap(N),N))})})}bootstrapModule(u,c=[]){const h=Ls({},c);return function(s,o,u){const c=new jy(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(Gf);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${X(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(er(Cr))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function Ls(s,o){return Array.isArray(o)?o.reduce(Ls,s):Object.assign(Object.assign({},s),o)}let Gf=(()=>{class s{constructor(u,c,h,p,_){this._zone=u,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new F.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),C=new F.y(D=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{Fs.assertNotInAngularZone(),rC(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{N.unsubscribe(),P.unsubscribe()}});this.isStable=(0,se.T)(v,C.pipe((0,ae.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let h;h=u instanceof GD?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(h.componentType);const p=function(s){return s.isBoundToModule}(h)?void 0:this._injector.get(Sd),v=h.create(Cr.NULL,[],c||h.selector,p),C=v.location.nativeElement,D=v.injector.get(aC,null),N=D&&v.injector.get(sl);return D&&N&&N.registerApplication(C,D),v.onDestroy(()=>{this.detachView(v.hostView),_v(this.components,v),N&&N.unregisterApplication(C)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;_v(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(nA,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(er(Fs),er(Cr),er(Uh),er(wf),er(Uf))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function _v(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}class PR{}class OR{}const fA={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Vi=(()=>{class s{constructor(u,c){this._compiler=u,this._config=c||fA}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,h]=u.split("#");return void 0===h&&(h="default"),B(8255)(c).then(p=>p[h]).then(p=>$d(p,c,h)).then(p=>this._compiler.compileModuleAsync(p))}loadFactory(u){let[c,h]=u.split("#"),p="NgFactory";return void 0===h&&(h="default",p=""),B(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(_=>_[h+p]).then(_=>$d(_,c,h))}}return s.\u0275fac=function(u){return new(u||s)(er(Vd),er(OR,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})();function $d(s,o,u){if(!s)throw new Error(`Cannot find '${u}' in '${o}'`);return s}const mA=function(s){return null},jd=fC(null,"core",[{provide:tA,useValue:"unknown"},{provide:gC,deps:[Cr]},{provide:sl,deps:[]},{provide:Hf,deps:[]}]),qf=[{provide:Gf,useClass:Gf,deps:[Fs,Cr,Uh,wf,Uf]},{provide:JM,deps:[Fs],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:Uf,useClass:Uf,deps:[[new ja,Q1]]},{provide:Vd,useClass:Vd,deps:[]},mR,{provide:Sw,useFactory:function(){return DM},deps:[]},{provide:My,useFactory:function(){return IM},deps:[]},{provide:ga,useFactory:function(s){return yf(s=s||"undefined"!=typeof $localize&&$localize.locale||_f),s},deps:[[new Ha(ga),new ja,new Wr]]},{provide:X1,useValue:"USD"}];let fi=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(er(Gf))},s.\u0275mod=Z({type:s}),s.\u0275inj=dn({providers:qf}),s})()},8939:(st,we,B)=>{"use strict";B.d(we,{hO:()=>ce,xv:()=>Q,Dh:()=>X,GT:()=>ee,cc:()=>Me,on:()=>U,pX:()=>ae});var a=B(7716),G=B(7841),F=B(8971);st=B.hmd(st);const se=["ngOnDestroy"],ae=(oe,pe,Se,Ve={})=>new Proxy(oe,{get:(We,Je)=>Se.runOutsideAngular(()=>{var bt;if(oe[Je])return(null===(bt=null==Ve?void 0:Ve.spy)||void 0===bt?void 0:bt.get)&&Ve.spy.get(Je,oe[Je]),oe[Je];if(se.indexOf(Je)>-1)return()=>{};const ft=pe.toPromise().then(Xe=>{const ke=Xe&&Xe[Je];return"function"==typeof ke?ke.bind(Xe):ke&&ke.then?ke.then(Ie=>Se.run(()=>Ie)):Se.run(()=>ke)});return new Proxy(()=>{},{get:(Xe,ke)=>ft[ke],apply:(Xe,ke,Ie)=>ft.then(je=>{var Ce;const qe=je&&je(...Ie);return(null===(Ce=null==Ve?void 0:Ve.spy)||void 0===Ce?void 0:Ce.apply)&&Ve.spy.apply(Je,Ie,qe),qe})})})}),ee=(oe,pe)=>{pe.forEach(Se=>{Object.getOwnPropertyNames(Se.prototype||Se).forEach(Ve=>{Object.defineProperty(oe.prototype,Ve,Object.getOwnPropertyDescriptor(Se.prototype||Se,Ve))})})};class he{constructor(pe){return pe}}const X=new a.OlP("angularfire2.app.options"),Q=new a.OlP("angularfire2.app.name");function U(oe,pe,Se){const We="object"==typeof Se&&Se||{};We.name=We.name||"string"==typeof Se&&Se||"[DEFAULT]";const bt=G.Z.apps.filter(ft=>ft&&ft.name===We.name)[0]||pe.runOutsideAngular(()=>G.Z.initializeApp(oe,We));try{JSON.stringify(oe)!==JSON.stringify(bt.options)&&z("error",`${bt.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ft){}return new he(bt)}const z=(oe,...pe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[oe](...pe)},H={provide:he,useFactory:U,deps:[X,a.R0b,[new a.FiY,Q]]};let ce=(()=>{class oe{constructor(Se){G.Z.registerVersion("angularfire",F.q4.full,"core"),G.Z.registerVersion("angularfire",F.q4.full,"app-compat"),G.Z.registerVersion("angular",a.q4F.full,Se.toString())}static initializeApp(Se,Ve){return{ngModule:oe,providers:[{provide:X,useValue:Se},{provide:Q,useValue:Ve}]}}}return oe.\u0275fac=function(Se){return new(Se||oe)(a.LFG(a.Lbi))},oe.\u0275mod=a.oAB({type:oe}),oe.\u0275inj=a.cJS({providers:[H]}),oe})();function Me(oe,pe,Se,Ve,We){const[,Je,bt]=globalThis.\u0275AngularfireInstanceCache.find(ft=>ft[0]===oe)||[];if(Je)return function(oe,pe){try{return oe.toString()===pe.toString()}catch(Se){return oe===pe}}(We,bt)||(Re("error",`${pe} was already initialized on the ${Se} Firebase App with different settings.${de?" You may need to reload as Firebase is not HMR aware.":""}`),Re("warn",{is:We,was:bt})),Je;{const ft=Ve();return globalThis.\u0275AngularfireInstanceCache.push([oe,ft,We]),ft}}const de=!!st.hot,Re=(oe,...pe)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[oe](...pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8971:(st,we,B)=>{"use strict";B.d(we,{q4:()=>r_,iC:()=>br,fc:()=>Rp,HU:()=>Ih,vb:()=>Ms,JM:()=>yi});var a=B(7716),G=B(2329),F=B(8239),se=B(8026),ae=B(3854),ee=B(3910),he=B(5422);const X="@firebase/installations",Q="0.5.8",z=`w:${Q}`,H="FIS_v2",oe=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function pe(I){return I instanceof ae.ZR&&I.code.includes("request-failed")}function Se({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ve(I){return{token:I.token,requestStatus:2,expiresIn:Ie(I.expiresIn),creationTime:Date.now()}}function We(I,S){return Je.apply(this,arguments)}function Je(){return(Je=(0,F.Z)(function*(I,S){const W=(yield S.json()).error;return oe.create("request-failed",{requestName:I,serverCode:W.code,serverMessage:W.message,serverStatus:W.status})})).apply(this,arguments)}function bt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ft(I,{refreshToken:S}){const k=bt(I);return k.append("Authorization",function(I){return`${H} ${I}`}(S)),k}function Xe(I){return ke.apply(this,arguments)}function ke(){return(ke=(0,F.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function Ie(I){return Number(I.replace("s","000"))}function Ce(I,S){return qe.apply(this,arguments)}function qe(){return(qe=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:k}){const W=Se(I),le=bt(I),ge=S.getImmediate({optional:!0});if(ge){const Pt=yield ge.getHeartbeatsHeader();Pt&&le.append("x-firebase-client",Pt)}const tt={method:"POST",headers:le,body:JSON.stringify({fid:k,authVersion:H,appId:I.appId,sdkVersion:z})},Tt=yield Xe(()=>fetch(W,tt));if(Tt.ok){const Pt=yield Tt.json();return{fid:Pt.fid||k,registrationStatus:2,refreshToken:Pt.refreshToken,authToken:Ve(Pt.authToken)}}throw yield We("Create Installation",Tt)})).apply(this,arguments)}function Ne(I){return new Promise(S=>{setTimeout(S,I)})}const _n=/^[cdef][\w-]{21}$/;function Mn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const k=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return _n.test(k)?k:""}catch(I){return""}}function yt(I){return`${I.appName}!${I.appId}`}const Dr=new Map;function gi(I,S){const k=yt(I);rr(k,S),function(I,S){const k=(!sn&&"BroadcastChannel"in self&&(sn=new BroadcastChannel("[Firebase] FID Change"),sn.onmessage=I=>{rr(I.data.key,I.data.fid)}),sn);k&&k.postMessage({key:I,fid:S}),0===Dr.size&&sn&&(sn.close(),sn=null)}(k,S)}function rr(I,S){const k=Dr.get(I);if(k)for(const W of k)W(S)}let sn=null;const fr="firebase-installations-store";let Le=null;function pr(){return Le||(Le=(0,ae.X3)("firebase-installations-database",1,(I,S)=>{switch(S){case 0:I.createObjectStore(fr)}})),Le}function lr(I,S){return at.apply(this,arguments)}function at(){return(at=(0,F.Z)(function*(I,S){const k=yt(I),le=(yield pr()).transaction(fr,"readwrite"),ge=le.objectStore(fr),Fe=yield ge.get(k);return yield ge.put(S,k),yield le.complete,(!Fe||Fe.fid!==S.fid)&&gi(I,S.fid),S})).apply(this,arguments)}function bn(I){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,F.Z)(function*(I){const S=yt(I),W=(yield pr()).transaction(fr,"readwrite");yield W.objectStore(fr).delete(S),yield W.complete})).apply(this,arguments)}function Wn(I,S){return si.apply(this,arguments)}function si(){return(si=(0,F.Z)(function*(I,S){const k=yt(I),le=(yield pr()).transaction(fr,"readwrite"),ge=le.objectStore(fr),Fe=yield ge.get(k),tt=S(Fe);return void 0===tt?yield ge.delete(k):yield ge.put(tt,k),yield le.complete,tt&&(!Fe||Fe.fid!==tt.fid)&&gi(I,tt.fid),tt})).apply(this,arguments)}function jr(I){return gr.apply(this,arguments)}function gr(){return(gr=(0,F.Z)(function*(I){let S;const k=yield Wn(I.appConfig,W=>{const le=Un(W),ge=ba(I,le);return S=ge.registrationPromise,ge.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function Un(I){return fn(I||{fid:Mn(),registrationStatus:0})}function ba(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(oe.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:k,registrationPromise:function(I,S){return ze.apply(this,arguments)}(I,k)}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:mt(I)}:{installationEntry:S}}function ze(){return(ze=(0,F.Z)(function*(I,S){try{const k=yield Ce(I,S);return lr(I.appConfig,k)}catch(k){throw pe(k)&&409===k.customData.serverCode?yield bn(I.appConfig):yield lr(I.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function mt(I){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,F.Z)(function*(I){let S=yield ls(I.appConfig);for(;1===S.registrationStatus;)yield Ne(100),S=yield ls(I.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:W}=yield jr(I);return W||k}return S})).apply(this,arguments)}function ls(I){return Wn(I,S=>{if(!S)throw oe.create("installation-not-found");return fn(S)})}function fn(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ir(I,S){return ir.apply(this,arguments)}function ir(){return(ir=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:S},k){const W=on(I,k),le=ft(I,k),ge=S.getImmediate({optional:!0});if(ge){const Pt=yield ge.getHeartbeatsHeader();Pt&&le.append("x-firebase-client",Pt)}const tt={method:"POST",headers:le,body:JSON.stringify({installation:{sdkVersion:z,appId:I.appId}})},Tt=yield Xe(()=>fetch(W,tt));if(Tt.ok)return Ve(yield Tt.json());throw yield We("Generate Auth Token",Tt)})).apply(this,arguments)}function on(I,{fid:S}){return`${Se(I)}/${S}/authTokens:generate`}function vt(I){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,F.Z)(function*(I,S=!1){let k;const W=yield Wn(I.appConfig,ge=>{if(!Jt(ge))throw oe.create("not-registered");const Fe=ge.authToken;if(!S&&J(Fe))return ge;if(1===Fe.requestStatus)return k=Ze(I,S),ge;{if(!navigator.onLine)throw oe.create("app-offline");const tt=ne(ge);return k=Et(I,tt),tt}});return k?yield k:W.authToken})).apply(this,arguments)}function Ze(I,S){return xe.apply(this,arguments)}function xe(){return(xe=(0,F.Z)(function*(I,S){let k=yield ut(I.appConfig);for(;1===k.authToken.requestStatus;)yield Ne(100),k=yield ut(I.appConfig);const W=k.authToken;return 0===W.requestStatus?vt(I,S):W})).apply(this,arguments)}function ut(I){return Wn(I,S=>{if(!Jt(S))throw oe.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Et(I,S){return kt.apply(this,arguments)}function kt(){return(kt=(0,F.Z)(function*(I,S){try{const k=yield Ir(I,S),W=Object.assign(Object.assign({},S),{authToken:k});return yield lr(I.appConfig,W),k}catch(k){if(!pe(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const W=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield lr(I.appConfig,W)}else yield bn(I.appConfig);throw k}})).apply(this,arguments)}function Jt(I){return void 0!==I&&2===I.registrationStatus}function J(I){return 2===I.requestStatus&&!function(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+36e5}(I)}function ne(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}function j(){return(j=(0,F.Z)(function*(I){const S=I,{installationEntry:k,registrationPromise:W}=yield jr(S);return W?W.catch(console.error):vt(S).catch(console.error),k.fid})).apply(this,arguments)}function me(){return(me=(0,F.Z)(function*(I,S=!1){const k=I;return yield He(k),(yield vt(k,S)).token})).apply(this,arguments)}function He(I){return pt.apply(this,arguments)}function pt(){return(pt=(0,F.Z)(function*(I){const{registrationPromise:S}=yield jr(I);S&&(yield S)})).apply(this,arguments)}function Ut(I){return oe.create("missing-app-config-values",{valueName:I})}const kn="installations";(0,se._registerComponent)(new ee.wA(kn,I=>{const S=I.getProvider("app").getImmediate();return{app:S,appConfig:function(I){if(!I||!I.options)throw Ut("App Configuration");if(!I.name)throw Ut("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!I.options[k])throw Ut(k);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S),heartbeatServiceProvider:(0,se._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,se._registerComponent)(new ee.wA("installations-internal",I=>{const S=I.getProvider("app").getImmediate(),k=(0,se._getProvider)(S,kn).getImmediate();return{getId:()=>function(I){return j.apply(this,arguments)}(k),getToken:le=>function(I){return me.apply(this,arguments)}(k,le)}},"PRIVATE")),(0,se.registerVersion)(X,Q),(0,se.registerVersion)(X,Q,"esm2017");const wn="@firebase/remote-config",$n=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class dl{constructor(S,k,W,le){this.client=S,this.storage=k,this.storageCache=W,this.logger=le}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const W=Date.now()-k,le=W<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${W}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${le}.`),le}fetch(S){var k=this;return(0,F.Z)(function*(){const[W,le]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(le&&k.isCachedDataFresh(S.cacheMaxAgeMillis,W))return le;S.eTag=le&&le.eTag;const ge=yield k.client.fetch(S),Fe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ge.status&&Fe.push(k.storage.setLastSuccessfulFetchResponse(ge)),yield Promise.all(Fe),ge})()}}function mi(I=navigator){return I.languages&&I.languages[0]||I.language}class cs{constructor(S,k,W,le,ge,Fe){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=W,this.projectId=le,this.apiKey=ge,this.appId=Fe}fetch(S){var k=this;return(0,F.Z)(function*(){const[W,le]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},Tt={sdk_version:k.sdkVersion,app_instance_id:W,app_instance_id_token:le,app_id:k.appId,language_code:mi()},Pt={method:"POST",headers:tt,body:JSON.stringify(Tt)},nn=fetch(Fe,Pt),Ot=new Promise(($a,ks)=>{S.signal.addEventListener(()=>{const Yo=new Error("The operation was aborted.");Yo.name="AbortError",ks(Yo)})});let Ar;try{yield Promise.race([nn,Ot]),Ar=yield nn}catch($a){let ks="fetch-client-network";throw"AbortError"===$a.name&&(ks="fetch-timeout"),$n.create(ks,{originalErrorMessage:$a.message})}let Sr=Ar.status;const Al=Ar.headers.get("ETag")||void 0;let Wc,zs;if(200===Ar.status){let $a;try{$a=yield Ar.json()}catch(ks){throw $n.create("fetch-client-parse",{originalErrorMessage:ks.message})}Wc=$a.entries,zs=$a.state}if("INSTANCE_STATE_UNSPECIFIED"===zs?Sr=500:"NO_CHANGE"===zs?Sr=304:("NO_TEMPLATE"===zs||"EMPTY_CONFIG"===zs)&&(Wc={}),304!==Sr&&200!==Sr)throw $n.create("fetch-status",{httpStatus:Sr});return{status:Sr,eTag:Al,config:Wc}})()}}class ah{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,F.Z)(function*(){const W=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,W)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:W}){var le=this;return(0,F.Z)(function*(){yield function(I,S){return new Promise((k,W)=>{const le=Math.max(S-Date.now(),0),ge=setTimeout(k,le);I.addEventListener(()=>{clearTimeout(ge),W($n.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const ge=yield le.client.fetch(S);return yield le.storage.deleteThrottleMetadata(),ge}catch(ge){if(!function(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ge))throw ge;const Fe={throttleEndTimeMillis:Date.now()+(0,ae.$s)(W),backoffCount:W+1};return yield le.storage.setThrottleMetadata(Fe),le.attemptFetch(S,Fe)}})()}}class lh{constructor(S,k,W,le,ge){this.app=S,this._client=k,this._storageCache=W,this._storage=le,this._logger=ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bc(I,S){const k=I.target.error||void 0;return $n.create(S,{originalErrorMessage:k&&k.message})}const po="app_namespace_store";class ch{constructor(S,k,W,le=function(){return new Promise((I,S)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=W=>{S(bc(W,"storage-open"))},k.onsuccess=W=>{I(W.target.result)},k.onupgradeneeded=W=>{const le=W.target.result;switch(W.oldVersion){case 0:le.createObjectStore(po,{keyPath:"compositeKey"})}}}catch(k){S($n.create("storage-open",{originalErrorMessage:k}))}})}()){this.appId=S,this.appName=k,this.namespace=W,this.openDbPromise=le}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,F.Z)(function*(){const W=yield k.openDbPromise;return new Promise((le,ge)=>{const tt=W.transaction([po],"readonly").objectStore(po),Tt=k.createCompositeKey(S);try{const Pt=tt.get(Tt);Pt.onerror=nn=>{ge(bc(nn,"storage-get"))},Pt.onsuccess=nn=>{const Ot=nn.target.result;le(Ot?Ot.value:void 0)}}catch(Pt){ge($n.create("storage-get",{originalErrorMessage:Pt&&Pt.message}))}})})()}set(S,k){var W=this;return(0,F.Z)(function*(){const le=yield W.openDbPromise;return new Promise((ge,Fe)=>{const Tt=le.transaction([po],"readwrite").objectStore(po),Pt=W.createCompositeKey(S);try{const nn=Tt.put({compositeKey:Pt,value:k});nn.onerror=Ot=>{Fe(bc(Ot,"storage-set"))},nn.onsuccess=()=>{ge()}}catch(nn){Fe($n.create("storage-set",{originalErrorMessage:nn&&nn.message}))}})})()}delete(S){var k=this;return(0,F.Z)(function*(){const W=yield k.openDbPromise;return new Promise((le,ge)=>{const tt=W.transaction([po],"readwrite").objectStore(po),Tt=k.createCompositeKey(S);try{const Pt=tt.delete(Tt);Pt.onerror=nn=>{ge(bc(nn,"storage-delete"))},Pt.onsuccess=()=>{le()}}catch(Pt){ge($n.create("storage-delete",{originalErrorMessage:Pt&&Pt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Qm{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,F.Z)(function*(){const k=S.storage.getLastFetchStatus(),W=S.storage.getLastSuccessfulFetchTimestampMillis(),le=S.storage.getActiveConfig(),ge=yield k;ge&&(S.lastFetchStatus=ge);const Fe=yield W;Fe&&(S.lastSuccessfulFetchTimestampMillis=Fe);const tt=yield le;tt&&(S.activeConfig=tt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Xm(){return fl.apply(this,arguments)}function fl(){return(fl=(0,F.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,se._registerComponent)(new ee.wA("remote-config",function(S,{instanceIdentifier:k}){const W=S.getProvider("app").getImmediate(),le=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw $n.create("registration-window");if(!(0,ae.hl)())throw $n.create("indexed-db-unavailable");const{projectId:ge,apiKey:Fe,appId:tt}=W.options;if(!ge)throw $n.create("registration-project-id");if(!Fe)throw $n.create("registration-api-key");if(!tt)throw $n.create("registration-app-id");const Tt=new ch(tt,W.name,k=k||"firebase"),Pt=new Qm(Tt),nn=new he.Yd(wn);nn.logLevel=he.in.ERROR;const Ot=new cs(le,se.SDK_VERSION,k,ge,Fe,tt),Ar=new ah(Ot,Tt),Sr=new dl(Ar,Tt,Pt,nn),Al=new lh(W,Sr,Pt,Tt,nn);return function(I){const S=(0,ae.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Al),Al},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(wn,"0.3.7"),(0,se.registerVersion)(wn,"0.3.7","esm2017");const hh="/firebase-messaging-sw.js",Ea="/firebase-cloud-messaging-push-scope",yp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wc="google.c.a.c_id",$s="google.c.a.c_l",pl="google.c.a.ts",Qn="google.c.a.e";var Ta=(()=>{return(I=Ta||(Ta={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ta;var I})();function kr(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fh(I){const k=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),W=atob(k),le=new Uint8Array(W.length);for(let ge=0;ge<W.length;++ge)le[ge]=W.charCodeAt(ge);return le}const Da="fcm_token_details_db",gl="fcm_token_object_Store";function e_(I){return ai.apply(this,arguments)}function ai(){return(ai=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ge=>ge.name).includes(Da))return null;let S=null;return(yield(0,ae.X3)(Da,5,function(){var W=(0,F.Z)(function*(le,ge,Fe,tt){var Tt;if(ge<2||!le.objectStoreNames.contains(gl))return;const Pt=tt.objectStore(gl),nn=yield Pt.index("fcmSenderId").get(I);if(yield Pt.clear(),nn)if(2===ge){const Ot=nn;if(!Ot.auth||!Ot.p256dh||!Ot.endpoint)return;S={token:Ot.fcmToken,createTime:null!==(Tt=Ot.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:Ot.auth,p256dh:Ot.p256dh,endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:"string"==typeof Ot.vapidKey?Ot.vapidKey:kr(Ot.vapidKey)}}}else if(3===ge){const Ot=nn;S={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:kr(Ot.auth),p256dh:kr(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:kr(Ot.vapidKey)}}}else if(4===ge){const Ot=nn;S={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:kr(Ot.auth),p256dh:kr(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:kr(Ot.vapidKey)}}}});return function(le,ge,Fe,tt){return W.apply(this,arguments)}}())).close(),yield(0,ae.Lj)(Da),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Cc(S)?S:null})).apply(this,arguments)}function Cc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Si="firebase-messaging-store";let lu=null;function Ec(){return lu||(lu=(0,ae.X3)("firebase-messaging-database",1,(I,S)=>{switch(S){case 0:I.createObjectStore(Si)}})),lu}function On(I){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,F.Z)(function*(I){const S=Dc(I),W=yield(yield Ec()).transaction(Si).objectStore(Si).get(S);if(W)return W;{const le=yield e_(I.appConfig.senderId);if(le)return yield Is(I,le),le}})).apply(this,arguments)}function Is(I,S){return hs.apply(this,arguments)}function hs(){return(hs=(0,F.Z)(function*(I,S){const k=Dc(I),le=(yield Ec()).transaction(Si,"readwrite");return yield le.objectStore(Si).put(S,k),yield le.complete,S})).apply(this,arguments)}function Sn(I){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,F.Z)(function*(I){const S=Dc(I),W=(yield Ec()).transaction(Si,"readwrite");yield W.objectStore(Si).delete(S),yield W.complete})).apply(this,arguments)}function Dc({appConfig:I}){return I.appId}const Nn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ic(I,S){return As.apply(this,arguments)}function As(){return(As=(0,F.Z)(function*(I,S){const k=yield _r(I),W=cu(S),le={method:"POST",headers:k,body:JSON.stringify(W)};let ge;try{ge=yield(yield fetch(go(I.appConfig),le)).json()}catch(Fe){throw Nn.create("token-subscribe-failed",{errorInfo:Fe})}if(ge.error)throw Nn.create("token-subscribe-failed",{errorInfo:ge.error.message});if(!ge.token)throw Nn.create("token-subscribe-no-token");return ge.token})).apply(this,arguments)}function Aa(I,S){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,F.Z)(function*(I,S){const k=yield _r(I),W=cu(S.subscriptionOptions),le={method:"PATCH",headers:k,body:JSON.stringify(W)};let ge;try{ge=yield(yield fetch(`${go(I.appConfig)}/${S.token}`,le)).json()}catch(Fe){throw Nn.create("token-update-failed",{errorInfo:Fe})}if(ge.error)throw Nn.create("token-update-failed",{errorInfo:ge.error.message});if(!ge.token)throw Nn.create("token-update-no-token");return ge.token})).apply(this,arguments)}function mh(I,S){return ml.apply(this,arguments)}function ml(){return(ml=(0,F.Z)(function*(I,S){const W={method:"DELETE",headers:yield _r(I)};try{const ge=yield(yield fetch(`${go(I.appConfig)}/${S}`,W)).json();if(ge.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:ge.error.message})}catch(le){throw Nn.create("token-unsubscribe-failed",{errorInfo:le})}})).apply(this,arguments)}function go({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function _r(I){return _l.apply(this,arguments)}function _l(){return(_l=(0,F.Z)(function*({appConfig:I,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function cu({p256dh:I,auth:S,endpoint:k,vapidKey:W}){const le={web:{endpoint:k,auth:S,p256dh:I}};return W!==yp&&(le.web.applicationPubKey=W),le}const St=6048e5;function du(I){return hu.apply(this,arguments)}function hu(){return(hu=(0,F.Z)(function*(I){const S=yield Yt(I.swRegistration,I.vapidKey),k={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:kr(S.getKey("auth")),p256dh:kr(S.getKey("p256dh"))},W=yield On(I.firebaseDependencies);if(W){if(Hn(W.subscriptionOptions,k))return Date.now()>=W.createTime+St?Nc(I,{token:W.token,createTime:Date.now(),subscriptionOptions:k}):W.token;try{yield mh(I.firebaseDependencies,W.token)}catch(le){console.warn(le)}return mo(I.firebaseDependencies,k)}return mo(I.firebaseDependencies,k)})).apply(this,arguments)}function Ac(I){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,F.Z)(function*(I){const S=yield On(I.firebaseDependencies);S&&(yield mh(I.firebaseDependencies,S.token),yield Sn(I.firebaseDependencies));const k=yield I.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Nc(I,S){return yl.apply(this,arguments)}function yl(){return(yl=(0,F.Z)(function*(I,S){try{const k=yield Aa(I.firebaseDependencies,S),W=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield Is(I.firebaseDependencies,W),k}catch(k){throw yield Ac(I),k}})).apply(this,arguments)}function mo(I,S){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,F.Z)(function*(I,S){const W={token:yield Ic(I,S),createTime:Date.now(),subscriptionOptions:S};return yield Is(I,W),W.token})).apply(this,arguments)}function Yt(I,S){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,F.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fh(S)})})).apply(this,arguments)}function Hn(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}function vl(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function(I,S){if(!S.notification)return;I.notification={};const k=S.notification.title;k&&(I.notification.title=k);const W=S.notification.body;W&&(I.notification.body=W);const le=S.notification.image;le&&(I.notification.image=le)}(S,I),function(I,S){!S.data||(I.data=S.data)}(S,I),function(I,S){if(!S.fcmOptions)return;I.fcmOptions={};const k=S.fcmOptions.link;k&&(I.fcmOptions.link=k);const W=S.fcmOptions.analytics_label;W&&(I.fcmOptions.analyticsLabel=W)}(S,I),S}function bl(I){return"object"==typeof I&&!!I&&wc in I}function xc(I,S){const k=[];for(let W=0;W<I.length;W++)k.push(I.charAt(W)),W<S.length&&k.push(S.charAt(W));return k.join("")}function _o(I){return Nn.create("missing-app-config-values",{valueName:I})}xc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class fu{constructor(S,k,W){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const le=function(I){if(!I||!I.options)throw _o("App Configuration Object");if(!I.name)throw _o("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=I;for(const W of S)if(!k[W])throw _o(W);return{appName:I.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:le,installations:k,analyticsProvider:W}}_delete(){return Promise.resolve()}}function ur(I){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(hh,{scope:Ea}),I.swRegistration.update().catch(()=>{})}catch(S){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Mc(I,S){return xi.apply(this,arguments)}function xi(){return(xi=(0,F.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield ur(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function Mi(I,S){return wl.apply(this,arguments)}function wl(){return(wl=(0,F.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=yp)})).apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(I,S){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield Mi(I,null==S?void 0:S.vapidKey),yield Mc(I,null==S?void 0:S.serviceWorkerRegistration),du(I)})).apply(this,arguments)}function vp(I,S,k){return jo.apply(this,arguments)}function jo(){return(jo=(0,F.Z)(function*(I,S,k){const W=kc(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(W,{message_id:k[wc],message_name:k[$s],message_time:k[pl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function kc(I){switch(I){case Ta.NOTIFICATION_CLICKED:return"notification_open";case Ta.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yo(){return(yo=(0,F.Z)(function*(I,S){const k=S.data;if(!k.isFirebaseMessaging)return;I.onMessageHandler&&k.messageType===Ta.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(vl(k)):I.onMessageHandler.next(vl(k)));const W=k.data;bl(W)&&"1"===W[Qn]&&(yield vp(I,k.messageType,W))})).apply(this,arguments)}const Cl="@firebase/messaging";function Fc(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,F.Z)(function*(){try{yield(0,ae.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,se._registerComponent)(new ee.wA("messaging",I=>{const S=new fu(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function(I,S){return yo.apply(this,arguments)}(S,k)),S},"PUBLIC")),(0,se._registerComponent)(new ee.wA("messaging-internal",I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:W=>function(I,S){return xa.apply(this,arguments)}(S,W)}},"PRIVATE")),(0,se.registerVersion)(Cl,"0.9.12"),(0,se.registerVersion)(Cl,"0.9.12","esm2017");const gu="analytics",Bc="firebase_id",mu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",js="https://www.googletagmanager.com/gtag/js",yr=new he.Yd("@firebase/analytics");function ka(I){return Promise.all(I.map(S=>S.catch(k=>k)))}function vh(I,S){const k=document.createElement("script");k.src=`${js}?l=${I}&id=${S}`,k.async=!0,document.head.appendChild(k)}function Gs(I,S,k,W,le,ge){return vo.apply(this,arguments)}function vo(){return(vo=(0,F.Z)(function*(I,S,k,W,le,ge){const Fe=W[le];try{if(Fe)yield S[Fe];else{const Tt=(yield ka(k)).find(Pt=>Pt.measurementId===le);Tt&&(yield S[Tt.appId])}}catch(tt){yr.error(tt)}I("config",le,ge)})).apply(this,arguments)}function t_(I,S,k,W,le){return bo.apply(this,arguments)}function bo(){return(bo=(0,F.Z)(function*(I,S,k,W,le){try{let ge=[];if(le&&le.send_to){let Fe=le.send_to;Array.isArray(Fe)||(Fe=[Fe]);const tt=yield ka(k);for(const Tt of Fe){const Pt=tt.find(Ot=>Ot.measurementId===Tt),nn=Pt&&S[Pt.appId];if(!nn){ge=[];break}ge.push(nn)}}0===ge.length&&(ge=Object.values(S)),yield Promise.all(ge),I("event",W,le||{})}catch(ge){yr.error(ge)}})).apply(this,arguments)}function Tp(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(js))return S;return null}const Zi=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ss=new class{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function $c(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Ip(I){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,F.Z)(function*(I){var S;const{appId:k,apiKey:W}=I,le={method:"GET",headers:$c(W)},ge=mu.replace("{app-id}",k),Fe=yield fetch(ge,le);if(200!==Fe.status&&304!==Fe.status){let tt="";try{const Tt=yield Fe.json();(null===(S=Tt.error)||void 0===S?void 0:S.message)&&(tt=Tt.error.message)}catch(Tt){}throw Zi.create("config-fetch-failed",{httpStatus:Fe.status,responseMessage:tt})}return Fe.json()})).apply(this,arguments)}function Oa(I){return _u.apply(this,arguments)}function _u(){return(_u=(0,F.Z)(function*(I,S=Ss,k){const{appId:W,apiKey:le,measurementId:ge}=I.options;if(!W)throw Zi.create("no-app-id");if(!le){if(ge)return{measurementId:ge,appId:W};throw Zi.create("no-api-key")}const Fe=S.getThrottleMetadata(W)||{backoffCount:0,throttleEndTimeMillis:Date.now()},tt=new wh;return setTimeout((0,F.Z)(function*(){tt.abort()}),void 0!==k?k:6e4),zi({appId:W,apiKey:le,measurementId:ge},Fe,tt,S)})).apply(this,arguments)}function zi(I,S,k){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,F.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:k},W,le=Ss){const{appId:ge,measurementId:Fe}=I;try{yield yu(W,S)}catch(tt){if(Fe)return yr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:ge,measurementId:Fe};throw tt}try{const tt=yield Ip(I);return le.deleteThrottleMetadata(ge),tt}catch(tt){if(!g0(tt)){if(le.deleteThrottleMetadata(ge),Fe)return yr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${tt.message}]`),{appId:ge,measurementId:Fe};throw tt}const Tt=503===Number(tt.customData.httpStatus)?(0,ae.$s)(k,le.intervalMillis,30):(0,ae.$s)(k,le.intervalMillis),Pt={throttleEndTimeMillis:Date.now()+Tt,backoffCount:k+1};return le.setThrottleMetadata(ge,Pt),yr.debug(`Calling attemptFetch again in ${Tt} millis`),zi(I,Pt,W,le)}})).apply(this,arguments)}function yu(I,S){return new Promise((k,W)=>{const le=Math.max(S-Date.now(),0),ge=setTimeout(k,le);I.addEventListener(()=>{clearTimeout(ge),W(Zi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function g0(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}class wh{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Ap(){return vu.apply(this,arguments)}function vu(){return(vu=(0,F.Z)(function*(){if(!(0,ae.hl)())return yr.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(I){return yr.warn(Zi.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function qo(){return(qo=(0,F.Z)(function*(I,S,k,W,le,ge,Fe){var tt;const Tt=Oa(I);Tt.then(Sr=>{k[Sr.measurementId]=Sr.appId,I.options.measurementId&&Sr.measurementId!==I.options.measurementId&&yr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Sr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sr=>yr.error(Sr)),S.push(Tt);const Pt=Ap().then(Sr=>{if(Sr)return W.getId()}),[nn,Ot]=yield Promise.all([Tt,Pt]);Tp()||vh(ge,nn.measurementId),le("js",new Date);const Ar=null!==(tt=null==Fe?void 0:Fe.config)&&void 0!==tt?tt:{};return Ar.origin="firebase",Ar.update=!0,null!=Ot&&(Ar[Bc]=Ot),le("config",nn.measurementId,Ar),nn.measurementId})).apply(this,arguments)}class Dl{constructor(S){this.app=S}_delete(){return delete Qt[this.app.options.appId],Promise.resolve()}}let Qt={},dt=[];const Tn={};let Wo,Ns,Il="dataLayer",cr=!1;function wo(I,S,k){!function(){const I=[];if((0,ae.ru)()&&I.push("This is a browser extension environment."),(0,ae.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((W,le)=>`(${le+1}) ${W}`).join(" "),k=Zi.create("invalid-analytics-context",{errorInfo:S});yr.warn(k.message)}}();const W=I.options.appId;if(!W)throw Zi.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Zi.create("no-api-key");yr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qt[W])throw Zi.create("already-exists",{id:W});if(!cr){!function(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(Il);const{wrappedGtag:ge,gtagCore:Fe}=function(I,S,k,W,le){let ge=function(...Fe){window[W].push(arguments)};return window[le]&&"function"==typeof window[le]&&(ge=window[le]),window[le]=function(I,S,k,W){function ge(){return(ge=(0,F.Z)(function*(Fe,tt,Tt){try{"event"===Fe?yield t_(I,S,k,tt,Tt):"config"===Fe?yield Gs(I,S,k,W,tt,Tt):I("set",tt)}catch(Pt){yr.error(Pt)}})).apply(this,arguments)}return function(Fe,tt,Tt){return ge.apply(this,arguments)}}(ge,I,S,k),{gtagCore:ge,wrappedGtag:window[le]}}(Qt,dt,Tn,Il,"gtag");Ns=ge,Wo=Fe,cr=!0}return Qt[W]=function(I,S,k,W,le,ge,Fe){return qo.apply(this,arguments)}(I,dt,Tn,S,Wo,Il,k),new Dl(I)}function Xn(){return(Xn=(0,F.Z)(function*(I,S,k,W,le){if(le&&le.global)I("event",k,W);else{const ge=yield S;I("event",k,Object.assign(Object.assign({},W),{send_to:ge}))}})).apply(this,arguments)}function ui(){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,F.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(I){return!1}})).apply(this,arguments)}const Gn="@firebase/analytics";(0,se._registerComponent)(new ee.wA(gu,(S,{options:k})=>wo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,se._registerComponent)(new ee.wA("analytics-internal",function(S){try{const k=S.getProvider(gu).getImmediate();return{logEvent:(W,le,ge)=>function(I,S,k,W){I=(0,ae.m9)(I),function(I,S,k,W,le){return Xn.apply(this,arguments)}(Ns,Qt[I.app.options.appId],S,k,W).catch(le=>yr.error(le))}(k,W,le,ge)}}catch(k){throw Zi.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,se.registerVersion)(Gn,"0.7.8"),(0,se.registerVersion)(Gn,"0.7.8","esm2017");var _i=B(7771),_0=B(3637),xp=B(8307),zo=B(9746),Va=B(2639);const r_=new a.GfV("7.3.0"),Cu="__angularfire_symbol__analyticsIsSupportedValue",Yn="__angularfire_symbol__analyticsIsSupported",Gc="__angularfire_symbol__remoteConfigIsSupportedValue",To="__angularfire_symbol__remoteConfigIsSupported",Do="__angularfire_symbol__messagingIsSupportedValue",dr="__angularfire_symbol__messagingIsSupported";function yi(I,S,k){if(S){if(1===S.length)return S[0];const ge=S.filter(Fe=>Fe.app===k);if(1===ge.length)return ge[0]}return k.container.getProvider(I).getImmediate({optional:!0})}globalThis[Yn]||(globalThis[Yn]=ui().then(I=>globalThis[Cu]=I).catch(()=>globalThis[Cu]=!1)),globalThis[dr]||(globalThis[dr]=Fc().then(I=>globalThis[Do]=I).catch(()=>globalThis[Do]=!1)),globalThis[To]||(globalThis[To]=Xm().then(I=>globalThis[Gc]=I).catch(()=>globalThis[Gc]=!1));const Ms=(I,S)=>{const k=S?[S]:(0,G.C6)(),W=[];return k.forEach(le=>{le.container.getProvider(I).instances.forEach(Fe=>{W.includes(Fe)||W.push(Fe)})}),W};function Rs(){}class Io{constructor(S,k=_i.N){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,W){const le=this.zone;return this.delegate.schedule(function(Fe){le.runGuarded(()=>{S.apply(this,[Fe])})},k,W)}}class Ao{constructor(S){this.zone=S,this.task=null}call(S,k){const W=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)),k.pipe((0,xp.b)({next:W,complete:W,error:W})).subscribe(S).add(W)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ih=(()=>{class I{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Io(Zone.current)),this.insideAngular=k.run(()=>new Io(Zone.current,_0.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(k){return new(k||I)(a.LFG(a.R0b))},I.\u0275prov=a.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Zs(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Rp(I){return I.pipe((0,zo.QV)(Zs().outsideAngular))}function br(I){return Zs(),function(I){return function(k){return(k=k.lift(new Ao(I.ngZone))).pipe((0,Va.R)(I.outsideAngular),(0,zo.QV)(I.insideAngular))}}(Zs())(I)}},982:(st,we,B)=>{"use strict";B.d(we,{$:()=>Rc,A:()=>qt,E:()=>yc,G:()=>hl,I:()=>kr,K:()=>Nt,L:()=>Is,M:()=>Dc,N:()=>uu,P:()=>Fe,Q:()=>Nn,R:()=>Ba,T:()=>Ho,U:()=>Pr,V:()=>mh,W:()=>cu,X:()=>li,Y:()=>bl,Z:()=>_h,_:()=>Ni,a:()=>cr,a0:()=>vp,a1:()=>kc,a2:()=>yo,a3:()=>Pc,a4:()=>yh,a5:()=>Fc,a6:()=>Lc,a7:()=>Vc,a8:()=>bp,a9:()=>f0,aA:()=>Ga,aB:()=>Op,aC:()=>Pn,aG:()=>wo,aJ:()=>As,aa:()=>gu,ab:()=>Cp,ae:()=>yr,af:()=>vh,ag:()=>Ep,aj:()=>Sc,ak:()=>p0,am:()=>yu,an:()=>qo,ao:()=>Rr,ap:()=>lr,aq:()=>$o,ar:()=>oi,as:()=>hn,at:()=>f_,au:()=>Au,av:()=>Bn,aw:()=>Le,ax:()=>bn,ay:()=>us,az:()=>b0,b:()=>Wo,c:()=>Wc,d:()=>Yo,e:()=>$a,f:()=>ja,g:()=>Zc,h:()=>y0,i:()=>xp,j:()=>v0,k:()=>Ps,l:()=>Ua,m:()=>p_,o:()=>_n,r:()=>I,s:()=>br,u:()=>le,z:()=>gi});var a=B(8239),G=B(3854),F=B(8026);function he(w,g){var y={};for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&g.indexOf(E)<0&&(y[E]=w[E]);if(null!=w&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(E=Object.getOwnPropertySymbols(w);x<E.length;x++)g.indexOf(E[x])<0&&Object.prototype.propertyIsEnumerable.call(w,E[x])&&(y[E[x]]=w[E[x]])}return y}var qe=B(5422),Ne=B(3910);const _n={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},qt={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const gi=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Kn=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new G.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dn=new qe.Yd("@firebase/auth");function sn(w,...g){dn.logLevel<=qe.in.ERROR&&dn.error(`Auth (${F.SDK_VERSION}): ${w}`,...g)}function hn(w,...g){throw fr(w,...g)}function Bn(w,...g){return fr(w,...g)}function ji(w,g,y){const E=Object.assign(Object.assign({},Kn()),{[g]:y});return new G.LL("auth","Firebase",E).create(g,{appName:w.name})}function ii(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&hn(w,"argument-error"),ji(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fr(w,...g){if("string"!=typeof w){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=w.name),w._errorFactory.create(y,...E)}return wt.create(w,...g)}function Le(w,g,...y){if(!w)throw fr(g,...y)}function pr(w){const g="INTERNAL ASSERTION FAILED: "+w;throw sn(g),new Error(g)}function lr(w,g){w||pr(g)}const at=new Map;function bn(w){lr(w instanceof Function,"Expected a class definition");let g=at.get(w);return g?(lr(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,at.set(w,g),g)}function si(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function jr(){return"http:"===gr()||"https:"===gr()}function gr(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class yn{constructor(g,y){this.shortDelay=g,this.longDelay=y,lr(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,G.uI)()||(0,G.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jr()||(0,G.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ze(w,g){lr(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class mt{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Gi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ls=new yn(3e4,6e4);function fn(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function At(w,g,y,E){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,a.Z)(function*(w,g,y,E,x={}){return ir(w,x,(0,a.Z)(function*(){let R={},re={};E&&("GET"===g?re=E:R={body:JSON.stringify(E)});const De=(0,G.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),mt.fetch()(Ze(w,w.config.apiHost,y,De),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ir(w,g,y){return on.apply(this,arguments)}function on(){return(on=(0,a.Z)(function*(w,g,y){w._canInitEmulator=!1;const E=Object.assign(Object.assign({},Gi),g);try{const x=new xe(w),R=yield Promise.race([y(),x.promise]);x.clearNetworkTimeout();const re=yield R.json();if("needConfirmation"in re)throw ut(w,"account-exists-with-different-credential",re);if(R.ok&&!("errorMessage"in re))return re;{const De=R.ok?re.errorMessage:re.error.message,[nt,Ue]=De.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw ut(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===nt)throw ut(w,"email-already-in-use",re);const _t=E[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(Ue)throw ji(w,_t,Ue);hn(w,_t)}}catch(x){if(x instanceof G.ZR)throw x;hn(w,"network-request-failed")}})).apply(this,arguments)}function vt(w,g,y,E){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,a.Z)(function*(w,g,y,E,x={}){const R=yield At(w,g,y,E,x);return"mfaPendingCredential"in R&&hn(w,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Ze(w,g,y,E){const x=`${g}${y}?${E}`;return w.config.emulator?ze(w.config,x):`${w.config.apiScheme}://${x}`}class xe{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Bn(this.auth,"network-request-failed")),ls.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ut(w,g,y){const E={appName:w.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const x=Bn(w,g,E);return x.customData._tokenResponse=y,x}function kt(){return(kt=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Jt(w,g){return J.apply(this,arguments)}function J(){return(J=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Y(w,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ve(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Z(){return(Z=(0,a.Z)(function*(w,g=!1){const y=(0,G.m9)(w),E=yield y.getIdToken(g),x=He(E);Le(x&&x.exp&&x.auth_time&&x.iat,y.auth,"internal-error");const R="object"==typeof x.firebase?x.firebase:void 0,re=null==R?void 0:R.sign_in_provider;return{claims:x,token:E,authTime:ve(me(x.auth_time)),issuedAtTime:ve(me(x.iat)),expirationTime:ve(me(x.exp)),signInProvider:re||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function me(w){return 1e3*Number(w)}function He(w){const[g,y,E]=w.split(".");if(void 0===g||void 0===y||void 0===E)return sn("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,G.tV)(y);return x?JSON.parse(x):(sn("Failed to decode base64 JWT payload"),null)}catch(x){return sn("Caught error parsing JWT payload as JSON",x),null}}function Ct(w,g){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,a.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof G.ZR&&Zt(E)&&w.auth.currentUser===w&&(yield w.auth.signOut()),E}})).apply(this,arguments)}function Zt({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Rn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,a.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,a.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class An{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ve(this.lastLoginAt),this.creationTime=ve(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(w){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,a.Z)(function*(w){var g;const y=w.auth,E=yield w.getIdToken(),x=yield Ct(w,Y(y,{idToken:E}));Le(null==x?void 0:x.users.length,y,"internal-error");const R=x.users[0];w._notifyReloadListener(R);const re=(null===(g=R.providerUserInfo)||void 0===g?void 0:g.length)?Ii(R.providerUserInfo):[],De=kn(w.providerData,re),_t=!!w.isAnonymous&&!(w.email&&R.passwordHash||(null==De?void 0:De.length)),vn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:De,metadata:new An(R.createdAt,R.lastLoginAt),isAnonymous:_t};Object.assign(w,vn)})).apply(this,arguments)}function Ut(){return(Ut=(0,a.Z)(function*(w){const g=(0,G.m9)(w);yield an(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function kn(w,g){return[...w.filter(E=>!g.some(x=>x.providerId===E.providerId)),...g]}function Ii(w){return w.map(g=>{var{providerId:y}=g,E=he(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function mr(){return(mr=(0,a.Z)(function*(w,g){const y=yield ir(w,{},(0,a.Z)(function*(){const E=(0,G.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:R}=w.config,re=Ze(w,x,"/v1/token",`key=${R}`),De=yield w._getAdditionalHeaders();return De["Content-Type"]="application/x-www-form-urlencoded",mt.fetch()(re,{method:"POST",headers:De,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Le(g.idToken,"internal-error"),Le(void 0!==g.idToken,"internal-error"),Le(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=He(w);return Le(g,"internal-error"),Le(void 0!==g.exp,"internal-error"),Le(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,a.Z)(function*(){return Le(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,a.Z)(function*(){const{accessToken:x,refreshToken:R,expiresIn:re}=yield function(w,g){return mr.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(x,R,Number(re))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:x,expirationTime:R}=y,re=new Ai;return E&&(Le("string"==typeof E,"internal-error",{appName:g}),re.refreshToken=E),x&&(Le("string"==typeof x,"internal-error",{appName:g}),re.accessToken=x),R&&(Le("number"==typeof R,"internal-error",{appName:g}),re.expirationTime=R),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return pr("not implemented")}}function wn(w,g){Le("string"==typeof w||void 0===w,"internal-error",{appName:g})}class qi{constructor(g){var{uid:y,auth:E,stsTokenManager:x}=g,R=he(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new An(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,a.Z)(function*(){const E=yield Ct(y,y.stsTokenManager.getToken(y.auth,g));return Le(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function(w){return Z.apply(this,arguments)}(this,g)}reload(){return function(w){return Ut.apply(this,arguments)}(this)}_assign(g){this!==g&&(Le(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qi(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,a.Z)(function*(){let x=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),x=!0),y&&(yield an(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,a.Z)(function*(){const y=yield g.getIdToken();return yield Ct(g,function(w,g){return kt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,x,R,re,De,nt,Ue,_t;const vn=null!==(E=y.displayName)&&void 0!==E?E:void 0,Fn=null!==(x=y.email)&&void 0!==x?x:void 0,un=null!==(R=y.phoneNumber)&&void 0!==R?R:void 0,ea=null!==(re=y.photoURL)&&void 0!==re?re:void 0,td=null!==(De=y.tenantId)&&void 0!==De?De:void 0,nd=null!==(nt=y._redirectEventId)&&void 0!==nt?nt:void 0,$p=null!==(Ue=y.createdAt)&&void 0!==Ue?Ue:void 0,Hp=null!==(_t=y.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:jp,emailVerified:Oh,isAnonymous:ta,providerData:Gp,stsTokenManager:kl}=y;Le(jp&&kl,g,"internal-error");const vE=Ai.fromJSON(this.name,kl);Le("string"==typeof jp,g,"internal-error"),wn(vn,g.name),wn(Fn,g.name),Le("boolean"==typeof Oh,g,"internal-error"),Le("boolean"==typeof ta,g,"internal-error"),wn(un,g.name),wn(ea,g.name),wn(td,g.name),wn(nd,g.name),wn($p,g.name),wn(Hp,g.name);const Pl=new qi({uid:jp,auth:g,email:Fn,emailVerified:Oh,displayName:vn,isAnonymous:ta,photoURL:ea,phoneNumber:un,tenantId:td,stsTokenManager:vE,createdAt:$p,lastLoginAt:Hp});return Gp&&Array.isArray(Gp)&&(Pl.providerData=Gp.map(ki=>Object.assign({},ki))),nd&&(Pl._redirectEventId=nd),Pl}static _fromIdTokenResponse(g,y,E=!1){return(0,a.Z)(function*(){const x=new Ai;x.updateFromServerResponse(y);const R=new qi({uid:y.localId,auth:g,stsTokenManager:x,isAnonymous:E});return yield an(R),R})()}}const Nt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(y,E){var x=this;return(0,a.Z)(function*(){x.storage[y]=E})()}_get(y){var E=this;return(0,a.Z)(function*(){const x=E.storage[y];return void 0===x?null:x})()}_remove(y){var E=this;return(0,a.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return w.type="NONE",w})();function us(w,g,y){return`firebase:${w}:${g}:${y}`}class $n{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:x,name:R}=this.auth;this.fullUserKey=us(this.userKey,x.apiKey,R),this.fullPersistenceKey=us("persistence",x.apiKey,R),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,a.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?qi._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,a.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,a.Z)(function*(){if(!y.length)return new $n(bn(Nt),g,E);const x=(yield Promise.all(y.map(function(){var Ue=(0,a.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Ue.apply(this,arguments)}}()))).filter(Ue=>Ue);let R=x[0]||bn(Nt);const re=us(E,g.config.apiKey,g.name);let De=null;for(const Ue of y)try{const _t=yield Ue._get(re);if(_t){const vn=qi._fromJSON(g,_t);Ue!==R&&(De=vn),R=Ue;break}}catch(_t){}const nt=x.filter(Ue=>Ue._shouldAllowMigration);return R._shouldAllowMigration&&nt.length?(R=nt[0],De&&(yield R._set(re,De.toJSON())),yield Promise.all(y.map(function(){var Ue=(0,a.Z)(function*(_t){if(_t!==R)try{yield _t._remove(re)}catch(vn){}});return function(_t){return Ue.apply(this,arguments)}}())),new $n(R,g,E)):new $n(R,g,E)})()}}function ru(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Uo(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(wa(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(zt(g))return"Blackberry";if(mc(g))return"Webos";if(Gr(g))return"Safari";if((g.includes("chrome/")||co(g))&&!g.includes("edge/"))return"Chrome";if(oi(g))return"Android";{const E=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function wa(w=(0,G.z$)()){return/firefox\//i.test(w)}function Gr(w=(0,G.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function co(w=(0,G.z$)()){return/crios\//i.test(w)}function Uo(w=(0,G.z$)()){return/iemobile/i.test(w)}function oi(w=(0,G.z$)()){return/android/i.test(w)}function zt(w=(0,G.z$)()){return/blackberry/i.test(w)}function mc(w=(0,G.z$)()){return/webos/i.test(w)}function $o(w=(0,G.z$)()){return/iphone|ipad|ipod/i.test(w)}function Rr(w=(0,G.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Ca(w=(0,G.z$)()){return $o(w)||oi(w)||mc(w)||zt(w)||/windows phone/i.test(w)||Uo(w)}function Yr(w,g=[]){let y;switch(w){case"Browser":y=ru((0,G.z$)());break;case"Worker":y=`${ru((0,G.z$)())}-${w}`;break;default:y=w}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${F.SDK_VERSION}/${E}`}class Km{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wi(this),this.idTokenSubscription=new Wi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=bn(y)),this._initializationPromise=this.queue((0,a.Z)(function*(){var x,R;if(!E._deleted&&(E.persistenceManager=yield $n.create(E,g),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(re){}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,a.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,a.Z)(function*(){var E;let x=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const R=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,re=null==x?void 0:x._redirectEventId,De=yield y.tryRedirectSignIn(g);(!R||R===re)&&(null==De?void 0:De.user)&&(x=De.user)}return x?x._redirectEventId?(Le(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===x._redirectEventId?y.directlySetCurrentUser(x):y.reloadAndSetCurrentUserOrClear(x)):y.reloadAndSetCurrentUserOrClear(x):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,a.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(x){yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,a.Z)(function*(){try{yield an(g)}catch(E){if("auth/network-request-failed"!==E.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,a.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){const E=g?(0,G.m9)(g):null;return E&&Le(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,a.Z)(function*(){if(!y._deleted)return g&&Le(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,a.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,a.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,a.Z)(function*(){yield y.assertedPersistence.setPersistence(bn(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new G.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,a.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(y);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,a.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&bn(g)||y._popupRedirectResolver;Le(E,y,"argument-error"),y.redirectPersistenceManager=yield $n.create(y,[bn(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,a.Z)(function*(){var E,x;return y._isInitialized&&(yield y.queue((0,a.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,a.Z)(function*(){if(g===y.currentUser)return y.queue((0,a.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,x){if(this._deleted)return()=>{};const R="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return Le(re,this,"internal-error"),re.then(()=>R(this.currentUser)),"function"==typeof y?g.addObserver(y,E,x):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,a.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,a.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function Pn(w){return(0,G.m9)(w)}class Wi{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,G.ne)(y=>this.observer=y)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yc(w,g,y){const E=Pn(w);Le(E._canInitEmulator,E,"emulator-config-failed"),Le(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const x=!!(null==y?void 0:y.disableWarnings),R=dl(g),{host:re,port:De}=function(w){const g=dl(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const R=x[1];return{host:R,port:cs(E.substr(R.length+1))}}{const[R,re]=E.split(":");return{host:R,port:cs(re)}}}(g);E.config.emulator={url:`${R}//${re}${null===De?"":`:${De}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:re,port:De,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function w(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function dl(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function cs(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class hl{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return pr("not implemented")}_getIdTokenResponse(g){return pr("not implemented")}_linkToIdToken(g,y){return pr("not implemented")}_getReauthenticationResolver(g){return pr("not implemented")}}function ah(w,g){return vc.apply(this,arguments)}function vc(){return(vc=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:resetPassword",fn(w,g))})).apply(this,arguments)}function _p(w,g){return lh.apply(this,arguments)}function lh(){return(lh=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function bc(w,g){return po.apply(this,arguments)}function po(){return(po=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:update",fn(w,g))})).apply(this,arguments)}function uh(){return(uh=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signInWithPassword",fn(w,g))})).apply(this,arguments)}function iu(w,g){return ch.apply(this,arguments)}function ch(){return(ch=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:sendOobCode",fn(w,g))})).apply(this,arguments)}function Qm(w,g){return dh.apply(this,arguments)}function dh(){return(dh=(0,a.Z)(function*(w,g){return iu(w,g)})).apply(this,arguments)}function h0(w,g){return su.apply(this,arguments)}function su(){return(su=(0,a.Z)(function*(w,g){return iu(w,g)})).apply(this,arguments)}function Xm(w,g){return fl.apply(this,arguments)}function fl(){return(fl=(0,a.Z)(function*(w,g){return iu(w,g)})).apply(this,arguments)}function hh(w,g){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,a.Z)(function*(w,g){return iu(w,g)})).apply(this,arguments)}function ou(){return(ou=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signInWithEmailLink",fn(w,g))})).apply(this,arguments)}function $s(){return($s=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signInWithEmailLink",fn(w,g))})).apply(this,arguments)}class pl extends hl{constructor(g,y,E,x=null){super("password",E),this._email=g,this._password=y,this._tenantId=x}static _fromEmailAndPassword(g,y){return new pl(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new pl(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,a.Z)(function*(){switch(y.signInMethod){case"password":return function(w,g){return uh.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,g){return ou.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:hn(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,a.Z)(function*(){switch(E.signInMethod){case"password":return _p(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function(w,g){return $s.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:hn(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Qn(w,g){return au.apply(this,arguments)}function au(){return(au=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signInWithIdp",fn(w,g))})).apply(this,arguments)}class kr extends hl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new kr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):hn("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x}=y,R=he(y,["providerId","signInMethod"]);if(!E||!x)return null;const re=new kr(E,x);return re.idToken=R.idToken||void 0,re.accessToken=R.accessToken||void 0,re.secret=R.secret,re.nonce=R.nonce,re.pendingToken=R.pendingToken||null,re}_getIdTokenResponse(g){return Qn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Qn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Qn(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,G.xO)(y)}return g}}function fh(w,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:sendVerificationCode",fn(w,g))})).apply(this,arguments)}function gl(){return(gl=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signInWithPhoneNumber",fn(w,g))})).apply(this,arguments)}function ai(){return(ai=(0,a.Z)(function*(w,g){const y=yield vt(w,"POST","/v1/accounts:signInWithPhoneNumber",fn(w,g));if(y.temporaryProof)throw ut(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Cc={USER_NOT_FOUND:"user-not-found"};function Ia(){return(Ia=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signInWithPhoneNumber",fn(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Cc)})).apply(this,arguments)}class Si extends hl{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Si({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Si({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(w,g){return gl.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(w,g){return ai.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return Ia.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:x}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}=g;return E||y||x||R?new Si({verificationId:y,verificationCode:E,phoneNumber:x,temporaryProof:R}):null}}class On{constructor(g){var y,E,x,R,re,De;const nt=(0,G.zd)((0,G.pd)(g)),Ue=null!==(y=nt.apiKey)&&void 0!==y?y:null,_t=null!==(E=nt.oobCode)&&void 0!==E?E:null,vn=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);Le(Ue&&_t&&vn,"argument-error"),this.apiKey=Ue,this.operation=vn,this.code=_t,this.continueUrl=null!==(R=nt.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(re=nt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(De=nt.tenantId)&&void 0!==De?De:null}static parseLink(g){const y=function(w){const g=(0,G.zd)((0,G.pd)(w)).link,y=g?(0,G.zd)((0,G.pd)(g)).deep_link_id:null,E=(0,G.zd)((0,G.pd)(w)).deep_link_id;return(E?(0,G.zd)((0,G.pd)(E)).link:null)||E||y||g||w}(g);try{return new On(y)}catch(E){return null}}}let Is=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,E){return pl._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const x=On.parseLink(E);return Le(x,"argument-error"),pl._fromEmailAndCode(y,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class hs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Sn extends hs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ho extends Sn{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Le("providerId"in y&&"signInMethod"in y,"argument-error"),kr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Le(g.idToken||g.accessToken,"argument-error"),kr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ho.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ho.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:R,nonce:re,providerId:De}=g;if(!E&&!x&&!y&&!R||!De)return null;try{return new Ho(De)._credential({idToken:y,accessToken:E,nonce:re,pendingToken:R})}catch(nt){return null}}}let Dc=(()=>{class w extends Sn{constructor(){super("facebook.com")}static credential(y){return kr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),uu=(()=>{class w extends Sn{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return kr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:x}=y;if(!E&&!x)return null;try{return w.credential(E,x)}catch(R){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Nn=(()=>{class w extends Sn{constructor(){super("github.com")}static credential(y){return kr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(E){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class As extends hl{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Qn(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,Qn(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Qn(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:x,pendingToken:R}=y;return E&&x&&R&&E===x?new As(E,R):null}static _create(g,y){return new As(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends hs{constructor(g){Le(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Pr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Pr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=As.fromJSON(g);return Le(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return As._create(E,y)}catch(x){return null}}}let mh=(()=>{class w extends Sn{constructor(){super("twitter.com")}static credential(y,E){return kr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=y;if(!E||!x)return null;try{return w.credential(E,x)}catch(R){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ml(w,g){return go.apply(this,arguments)}function go(){return(go=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signUp",fn(w,g))})).apply(this,arguments)}class _r{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,x=!1){return(0,a.Z)(function*(){const R=yield qi._fromIdTokenResponse(g,E,x),re=_l(E);return new _r({user:R,providerId:re,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,a.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const x=_l(E);return new _r({user:g,providerId:x,_tokenResponse:E,operationType:y})})()}}function _l(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function cu(w){return St.apply(this,arguments)}function St(){return(St=(0,a.Z)(function*(w){var g;const y=Pn(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new _r({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield ml(y,{returnSecureToken:!0}),x=yield _r._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class du extends G.ZR{constructor(g,y,E,x){var R;super(y.code,y.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,du.prototype),this.customData={appName:g.name,tenantId:null!==(R=g.tenantId)&&void 0!==R?R:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,x){return new du(g,y,E,x)}}function hu(w,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?du._fromErrorAndOperation(w,R,g,E):R})}function Ac(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Sc(w,g){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,a.Z)(function*(w,g){const y=(0,G.m9)(w);yield Pe(!0,y,g);const{providerUserInfo:E}=yield Jt(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),x=Ac(E||[]);return y.providerData=y.providerData.filter(R=>x.has(R.providerId)),x.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function yl(w,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,a.Z)(function*(w,g,y=!1){const E=yield Ct(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return _r._forOperation(w,"link",E)})).apply(this,arguments)}function Pe(w,g,y){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,a.Z)(function*(w,g,y){yield an(g);const x=!1===w?"provider-already-linked":"no-such-provider";Le(Ac(g.providerData).has(y)===w,g.auth,x)})).apply(this,arguments)}function Sa(w,g){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,a.Z)(function*(w,g,y=!1){const{auth:E}=w,x="reauthenticate";try{const R=yield Ct(w,hu(E,x,g,w),y);Le(R.idToken,E,"internal-error");const re=He(R.idToken);Le(re,E,"internal-error");const{sub:De}=re;return Le(w.uid===De,E,"user-mismatch"),_r._forOperation(w,x,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&hn(E,"user-mismatch"),R}})).apply(this,arguments)}function vl(w,g){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,a.Z)(function*(w,g,y=!1){const E="signIn",x=yield hu(w,E,g),R=yield _r._fromIdTokenResponse(w,E,x);return y||(yield w._updateCurrentUser(R.user)),R})).apply(this,arguments)}function li(w,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,a.Z)(function*(w,g){return vl(Pn(w),g)})).apply(this,arguments)}function bl(w,g){return xc.apply(this,arguments)}function xc(){return(xc=(0,a.Z)(function*(w,g){const y=(0,G.m9)(w);return yield Pe(!1,y,g.providerId),yl(y,g)})).apply(this,arguments)}function _h(w,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,a.Z)(function*(w,g){return Sa((0,G.m9)(w),g)})).apply(this,arguments)}function fu(w,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,a.Z)(function*(w,g){return vt(w,"POST","/v1/accounts:signInWithCustomToken",fn(w,g))})).apply(this,arguments)}function Ni(w,g){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,a.Z)(function*(w,g){const y=Pn(w),E=yield fu(y,{token:g,returnSecureToken:!0}),x=yield _r._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(x.user),x})).apply(this,arguments)}class xi{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Mi._fromServerResponse(g,y):hn(g,"internal-error")}}class Mi extends xi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Mi(y)}}function wl(w,g,y){var E;Le((null===(E=y.url)||void 0===E?void 0:E.length)>0,w,"invalid-continue-uri"),Le(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Le(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Le(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Rc(w,g,y){return xa.apply(this,arguments)}function xa(){return(xa=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w),x={requestType:"PASSWORD_RESET",email:g};y&&wl(E,x,y),yield h0(E,x)})).apply(this,arguments)}function vp(w,g,y){return jo.apply(this,arguments)}function jo(){return(jo=(0,a.Z)(function*(w,g,y){yield ah((0,G.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function kc(w,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,a.Z)(function*(w,g){yield bc((0,G.m9)(w),{oobCode:g})})).apply(this,arguments)}function yo(w,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,a.Z)(function*(w,g){const y=(0,G.m9)(w),E=yield ah(y,{oobCode:g}),x=E.requestType;switch(Le(x,y,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(E.mfaInfo,y,"internal-error");default:Le(E.email,y,"internal-error")}let R=null;return E.mfaInfo&&(R=xi._fromServerResponse(Pn(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:x}})).apply(this,arguments)}function Pc(w,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,a.Z)(function*(w,g){const{data:y}=yield yo((0,G.m9)(w),g);return y.email})).apply(this,arguments)}function yh(w,g,y){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,a.Z)(function*(w,g,y){const E=Pn(w),x=yield ml(E,{returnSecureToken:!0,email:g,password:y}),R=yield _r._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function Fc(w,g,y){return li((0,G.m9)(w),Is.credential(g,y))}function Lc(w,g,y){return Go.apply(this,arguments)}function Go(){return(Go=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};Le(y.handleCodeInApp,E,"argument-error"),y&&wl(E,x,y),yield Xm(E,x)})).apply(this,arguments)}function Vc(w,g){const y=On.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function bp(w,g,y){return qr.apply(this,arguments)}function qr(){return(qr=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w),x=Is.credentialWithLink(g,y||si());return Le(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),li(E,x)})).apply(this,arguments)}function Ra(w,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:createAuthUri",fn(w,g))})).apply(this,arguments)}function f0(w,g){return wp.apply(this,arguments)}function wp(){return(wp=(0,a.Z)(function*(w,g){const E={identifier:g,continueUri:jr()?si():"http://localhost"},{signinMethods:x}=yield Ra((0,G.m9)(w),E);return x||[]})).apply(this,arguments)}function gu(w,g){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,a.Z)(function*(w,g){const y=(0,G.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&wl(y.auth,x,g);const{email:R}=yield Qm(y.auth,x);R!==w.email&&(yield w.reload())})).apply(this,arguments)}function Cp(w,g,y){return El.apply(this,arguments)}function El(){return(El=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&wl(E.auth,R,y);const{email:re}=yield hh(E.auth,R);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function mu(w,g){return js.apply(this,arguments)}function js(){return(js=(0,a.Z)(function*(w,g){return At(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yr(w,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,a.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,G.m9)(w),R={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},re=yield Ct(E,mu(E.auth,R));E.displayName=re.displayName||null,E.photoURL=re.photoUrl||null;const De=E.providerData.find(({providerId:nt})=>"password"===nt);De&&(De.displayName=E.displayName,De.photoURL=E.photoURL),yield E._updateTokensIfNecessary(re)})).apply(this,arguments)}function vh(w,g){return Gs((0,G.m9)(w),g,null)}function Ep(w,g){return Gs((0,G.m9)(w),null,g)}function Gs(w,g,y){return vo.apply(this,arguments)}function vo(){return(vo=(0,a.Z)(function*(w,g,y){const{auth:E}=w,R={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(R.email=g),y&&(R.password=y);const re=yield Ct(w,_p(E,R));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class bo{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class Pa extends bo{constructor(g,y,E,x){super(g,y,E),this.username=x}}class Uc extends bo{constructor(g,y){super(g,"facebook.com",y)}}class Tp extends Pa{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class n_ extends bo{constructor(g,y){super(g,"google.com",y)}}class Zi extends Pa{constructor(g,y,E){super(g,"twitter.com",y,E)}}function p0(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,y;if(!w)return null;const{providerId:E}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},R=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!E&&(null==w?void 0:w.idToken)){const re=null===(y=null===(g=He(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new bo(R,"anonymous"!==re&&"custom"!==re?re:null)}if(!E)return null;switch(E){case"facebook.com":return new Uc(R,x);case"github.com":return new Tp(R,x);case"google.com":return new n_(R,x);case"twitter.com":return new Zi(R,x,w.screenName||null);case"custom":case"anonymous":return new bo(R,null);default:return new bo(R,E,x)}}(y)}class zi{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new zi("enroll",g)}static _fromMfaPendingCredential(g){return new zi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return zi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return zi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Fa{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=Pn(g),x=y.customData._serverResponse,R=(x.mfaInfo||[]).map(De=>xi._fromServerResponse(E,De));Le(x.mfaPendingCredential,E,"internal-error");const re=zi._fromMfaPendingCredential(x.mfaPendingCredential);return new Fa(re,R,function(){var De=(0,a.Z)(function*(nt){const Ue=yield nt._process(E,re);delete x.mfaInfo,delete x.mfaPendingCredential;const _t=Object.assign(Object.assign({},x),{idToken:Ue.idToken,refreshToken:Ue.refreshToken});switch(y.operationType){case"signIn":const vn=yield _r._fromIdTokenResponse(E,y.operationType,_t);return yield E._updateCurrentUser(vn.user),vn;case"reauthenticate":return Le(y.user,E,"internal-error"),_r._forOperation(y.user,y.operationType,_t);default:hn(E,"internal-error")}});return function(nt){return De.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,a.Z)(function*(){return y.signInResolver(g)})()}}function yu(w,g){var y;const E=(0,G.m9)(w),x=g;return Le(g.customData.operationType,E,"argument-error"),Le(null===(y=x.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Fa._fromError(E,x)}function g0(w,g){return At(w,"POST","/v2/accounts/mfaEnrollment:start",fn(w,g))}class vu{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>xi._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new vu(g)}getSession(){var g=this;return(0,a.Z)(function*(){return zi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,a.Z)(function*(){const x=g,R=yield E.getSession(),re=yield Ct(E.user,x._process(E.user.auth,R,y));return yield E.user._updateTokensIfNecessary(re),E.user.reload()})()}unenroll(g){var y=this;return(0,a.Z)(function*(){const E="string"==typeof g?g:g.uid,x=yield y.user.getIdToken(),R=yield Ct(y.user,function(w,g){return At(w,"POST","/v2/accounts/mfaEnrollment:withdraw",fn(w,g))}(y.user.auth,{idToken:x,mfaEnrollmentId:E}));y.enrolledFactors=y.enrolledFactors.filter(({uid:re})=>re!==E),yield y.user._updateTokensIfNecessary(R);try{yield y.user.reload()}catch(re){if("auth/user-token-expired"!==re.code)throw re}})()}}const Ch=new WeakMap;function qo(w){const g=(0,G.m9)(w);return Ch.has(g)||Ch.set(g,vu._fromUser(g)),Ch.get(g)}const Dl="__sak";class Qt{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Dl,"1"),this.storage.removeItem(Dl),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Wo=(()=>{class w extends Qt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,G.z$)();return Gr(w)||$o(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Ca(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),R=this.localCache[E];x!==R&&y(E,R,x)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((De,nt,Ue)=>{this.notifyListeners(De,Ue)});const x=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const De=this.storage.getItem(x);if(y.newValue!==De)null!==y.newValue?this.storage.setItem(x,y.newValue):this.storage.removeItem(x);else if(this.localCache[x]===y.newValue&&!E)return}const R=()=>{const De=this.storage.getItem(x);!E&&this.localCache[x]===De||this.notifyListeners(x,De)},re=this.storage.getItem(x);(0,G.w1)()&&10===document.documentMode&&re!==y.newValue&&y.newValue!==y.oldValue?setTimeout(R,10):R()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var x=()=>super._set,R=this;return(0,a.Z)(function*(){yield x().call(R,y,E),R.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,x=this;return(0,a.Z)(function*(){const R=yield E().call(x,y);return x.localCache[y]=JSON.stringify(R),R})()}_remove(y){var E=()=>super._remove,x=this;return(0,a.Z)(function*(){yield E().call(x,y),delete x.localCache[y]})()}}return w.type="LOCAL",w})(),cr=(()=>{class w extends Qt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return w.type="SESSION",w})();let Sp=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(R=>R.isListeningto(y));if(E)return E;const x=new w(y);return this.receivers.push(x),x}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,a.Z)(function*(){const x=y,{eventId:R,eventType:re,data:De}=x.data,nt=E.handlersMap[re];if(!(null==nt?void 0:nt.size))return;x.ports[0].postMessage({status:"ack",eventId:R,eventType:re});const Ue=Array.from(nt).map(function(){var vn=(0,a.Z)(function*(Fn){return Fn(x.origin,De)});return function(Fn){return vn.apply(this,arguments)}}()),_t=yield function(w){return Promise.all(w.map(function(){var g=(0,a.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(Ue);x.ports[0].postMessage({status:"done",eventId:R,eventType:re,response:_t})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function wo(w="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return w+y}class zn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var x=this;return(0,a.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let re,De;return new Promise((nt,Ue)=>{const _t=wo("",20);R.port1.start();const vn=setTimeout(()=>{Ue(new Error("unsupported_event"))},E);De={messageChannel:R,onMessage(Fn){const un=Fn;if(un.data.eventId===_t)switch(un.data.status){case"ack":clearTimeout(vn),re=setTimeout(()=>{Ue(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),nt(un.data.response);break;default:clearTimeout(vn),clearTimeout(re),Ue(new Error("invalid_response"))}}},x.handlers.add(De),R.port1.addEventListener("message",De.onMessage),x.target.postMessage({eventType:g,eventId:_t,data:y},[R.port2])}).finally(()=>{De&&x.removeMessageHandler(De)})})()}}function Xn(){return window}function Zo(){return void 0!==Xn().WorkerGlobalScope&&"function"==typeof Xn().importScripts}function La(){return(La=(0,a.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const xs="firebaseLocalStorageDb",Eo="firebaseLocalStorage",qs="fbase_key";class ui{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Ri(w,g){return w.transaction([Eo],g?"readwrite":"readonly").objectStore(Eo)}function ct(){const w=indexedDB.open(xs,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const E=w.result;try{E.createObjectStore(Eo,{keyPath:qs})}catch(x){y(x)}}),w.addEventListener("success",(0,a.Z)(function*(){const E=w.result;E.objectStoreNames.contains(Eo)?g(E):(E.close(),yield function(){const w=indexedDB.deleteDatabase(xs);return new ui(w).toPromise()}(),g(yield ct()))}))})}function Yi(w,g,y){return sr.apply(this,arguments)}function sr(){return(sr=(0,a.Z)(function*(w,g,y){const E=Ri(w,!0).put({[qs]:g,value:y});return new ui(E).toPromise()})).apply(this,arguments)}function Gn(){return(Gn=(0,a.Z)(function*(w,g){const y=Ri(w,!1).get(g),E=yield new ui(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Th(w,g){const y=Ri(w,!0).delete(g);return new ui(y).toPromise()}const xp=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,a.Z)(function*(){return y.db||(y.db=yield ct()),y.db})()}_withRetries(y){var E=this;return(0,a.Z)(function*(){let x=0;for(;;)try{const R=yield E._openDb();return yield y(R)}catch(R){if(x++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,a.Z)(function*(){return Zo()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,a.Z)(function*(){y.receiver=Sp._getInstance(Zo()?self:null),y.receiver._subscribe("keyChanged",function(){var E=(0,a.Z)(function*(x,R){return{keyProcessed:(yield y._poll()).includes(R.key)}});return function(x,R){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,a.Z)(function*(x,R){return["keyChanged"]});return function(x,R){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,a.Z)(function*(){var E,x;if(y.activeServiceWorker=yield function(){return La.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new zn(y.activeServiceWorker);const R=yield y.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=R[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,a.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ct();return yield Yi(y,Dl,"1"),yield Th(y,Dl),!0}catch(y){}return!1})()}_withPendingWrite(y){var E=this;return(0,a.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var x=this;return(0,a.Z)(function*(){return x._withPendingWrite((0,a.Z)(function*(){return yield x._withRetries(R=>Yi(R,y,E)),x.localCache[y]=E,x.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,a.Z)(function*(){const x=yield E._withRetries(R=>function(w,g){return Gn.apply(this,arguments)}(R,y));return E.localCache[y]=x,x})()}_remove(y){var E=this;return(0,a.Z)(function*(){return E._withPendingWrite((0,a.Z)(function*(){return yield E._withRetries(x=>Th(x,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,a.Z)(function*(){const E=yield y._withRetries(re=>{const De=Ri(re,!1).getAll();return new ui(De).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const x=[],R=new Set;for(const{fbase_key:re,value:De}of E)R.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(De)&&(y.notifyListeners(re,De),x.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!R.has(re)&&(y.notifyListeners(re,null),x.push(re));return x})()}notifyListeners(y,E){this.localCache[y]=E;const x=this.listeners[y];if(x)for(const R of Array.from(x))R(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function zo(w,g){return At(w,"POST","/v2/accounts/mfaSignIn:start",fn(w,g))}function Cu(){return(Cu=(0,a.Z)(function*(w){return(yield At(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gc(w){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",w),E.onload=g,E.onerror=x=>{const R=Bn("internal-error");R.customData=x,y(R)},E.type="text/javascript",E.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(E)})}function To(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Ws=1e12;class Or{constructor(g){this.auth=g,this.counter=Ws,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new Eu(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||Ws;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Ws))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,a.Z)(function*(){var E;return null===(E=y._widgets.get(g||Ws))||void 0===E||E.execute(),""})()}}class Eu{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;Le(x,"argument-error",{appName:y}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<50;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const yi=To("rcb"),Ms=new yn(3e4,6e4);class Io{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Xn().grecaptcha}load(g,y=""){return Le((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Xn().grecaptcha):new Promise((E,x)=>{const R=Xn().setTimeout(()=>{x(Bn(g,"network-request-failed"))},Ms.get());Xn()[yi]=()=>{Xn().clearTimeout(R),delete Xn()[yi];const De=Xn().grecaptcha;if(!De)return void x(Bn(g,"internal-error"));const nt=De.render;De.render=(Ue,_t)=>{const vn=nt(Ue,_t);return this.counter++,vn},this.hostLanguage=y,E(De)},Gc(`https://www.google.com/recaptcha/api.js??${(0,G.xO)({onload:yi,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(R),x(Bn(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Xn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ih{load(g){return(0,a.Z)(function*(){return new Or(g)})()}clearedOneInstance(){}}const Zs="recaptcha",Mp={theme:"light",type:"image"};class Ba{constructor(g,y=Object.assign({},Mp),E){this.parameters=y,this.type=Zs,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pn(E),this.isInvisible="invisible"===this.parameters.size,Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;Le(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ih:new Io,this.validateStartingState()}verify(){var g=this;return(0,a.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(R=>{const re=De=>{!De||(g.tokenChangeListeners.delete(re),R(De))};g.tokenChangeListeners.add(re),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Le(!this.parameters.sitekey,this.auth,"argument-error"),Le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Xn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){Le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,a.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,a.Z)(function*(){Le(jr()&&!Zo(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(w){return Cu.apply(this,arguments)}(g.auth);Le(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qc{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Si._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function br(w,g,y){return hr.apply(this,arguments)}function hr(){return(hr=(0,a.Z)(function*(w,g,y){const E=Pn(w),x=yield k(E,g,(0,G.m9)(y));return new qc(x,R=>li(E,R))})).apply(this,arguments)}function Ua(w,g,y){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w);yield Pe(!1,E,"phone");const x=yield k(E.auth,g,(0,G.m9)(y));return new qc(x,R=>bl(E,R))})).apply(this,arguments)}function I(w,g,y){return S.apply(this,arguments)}function S(){return(S=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w),x=yield k(E.auth,g,(0,G.m9)(y));return new qc(x,R=>_h(E,R))})).apply(this,arguments)}function k(w,g,y){return W.apply(this,arguments)}function W(){return(W=(0,a.Z)(function*(w,g,y){var E;const x=yield y.verify();try{let R;if(Le("string"==typeof x,w,"argument-error"),Le(y.type===Zs,w,"argument-error"),R="string"==typeof g?{phoneNumber:g}:g,"session"in R){const re=R.session;if("phoneNumber"in R)return Le("enroll"===re.type,w,"internal-error"),(yield g0(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Le("signin"===re.type,w,"internal-error");const De=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return Le(De,w,"missing-multi-factor-info"),(yield zo(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:De,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield fh(w,{phoneNumber:R.phoneNumber,recaptchaToken:x});return re}}finally{y._reset()}})).apply(this,arguments)}function le(w,g){return ge.apply(this,arguments)}function ge(){return(ge=(0,a.Z)(function*(w,g){yield yl((0,G.m9)(w),g)})).apply(this,arguments)}let Fe=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=Pn(y)}verifyPhoneNumber(y,E){return k(this.auth,y,(0,G.m9)(E))}static credential(y,E){return Si._fromVerification(y,E)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:x}=y;return E&&x?Si._fromTokenResponse(E,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function tt(w,g){return g?bn(g):(Le(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Tt extends hl{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Qn(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Qn(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Qn(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Pt(w){return vl(w.auth,new Tt(w),w.bypassAuthState)}function nn(w){const{auth:g,user:y}=w;return Le(y,g,"internal-error"),Sa(y,new Tt(w),w.bypassAuthState)}function Ot(w){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,a.Z)(function*(w){const{auth:g,user:y}=w;return Le(y,g,"internal-error"),yl(y,new Tt(w),w.bypassAuthState)})).apply(this,arguments)}class Sr{constructor(g,y,E,x,R=!1){this.auth=g,this.resolver=E,this.user=x,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,a.Z)(function*(E,x){g.pendingPromise={resolve:E,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(R){g.reject(R)}});return function(E,x){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,a.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:R,tenantId:re,error:De,type:nt}=g;if(De)return void y.reject(De);const Ue={auth:y.auth,requestUri:E,sessionId:x,tenantId:re||void 0,postBody:R||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(nt)(Ue))}catch(_t){y.reject(_t)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Pt;case"linkViaPopup":case"linkViaRedirect":return Ot;case"reauthViaPopup":case"reauthViaRedirect":return nn;default:hn(this.auth,"internal-error")}}resolve(g){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Al=new yn(2e3,1e4);function Wc(w,g,y){return zs.apply(this,arguments)}function zs(){return(zs=(0,a.Z)(function*(w,g,y){const E=Pn(w);ii(w,g,hs);const x=tt(E,y);return new kp(E,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function $a(w,g,y){return ks.apply(this,arguments)}function ks(){return(ks=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w);ii(E.auth,g,hs);const x=tt(E.auth,y);return new kp(E.auth,"reauthViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}function Yo(w,g,y){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w);ii(E.auth,g,hs);const x=tt(E.auth,y);return new kp(E.auth,"linkViaPopup",g,x,E).executeNotNull()})).apply(this,arguments)}let kp=(()=>{class w extends Sr{constructor(y,E,x,R,re){super(y,E,R,re),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,a.Z)(function*(){const E=yield y.execute();return Le(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,a.Z)(function*(){lr(1===y.filter.length,"Popup operations only handle one event");const E=wo();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(x=>{y.reject(x)}),y.resolver._isIframeWebStorageSupported(y.auth,x=>{x||y.reject(Bn(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Bn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Al.get())};y()}}return w.currentPopupAction=null,w})();const Tu=new Map;class i_ extends Sr{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,a.Z)(function*(){let E=Tu.get(y.auth._key());if(!E){try{const R=(yield function(w,g){return Nl.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(R)}catch(x){E=()=>Promise.reject(x)}Tu.set(y.auth._key(),E)}return y.bypassAuthState||Tu.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,a.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const x=yield E.auth._redirectUserForId(g.eventId);if(x)return E.user=x,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function Nl(){return(Nl=(0,a.Z)(function*(w,g){const y=Ha(g),E=s_(w);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(y));return yield E._remove(y),x})).apply(this,arguments)}function Pp(w,g){return ps.apply(this,arguments)}function ps(){return(ps=(0,a.Z)(function*(w,g){return s_(w)._set(Ha(g),"true")})).apply(this,arguments)}function Op(){Tu.clear()}function s_(w){return bn(w._redirectPersistence)}function Ha(w){return us("pendingRedirect",w.config.apiKey,w.name)}function ja(w,g,y){return function(w,g,y){return Wr.apply(this,arguments)}(w,g,y)}function Wr(){return(Wr=(0,a.Z)(function*(w,g,y){const E=Pn(w);ii(w,g,hs);const x=tt(E,y);return yield Pp(x,E),x._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function y0(w,g,y){return function(w,g,y){return Du.apply(this,arguments)}(w,g,y)}function Du(){return(Du=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w);ii(E.auth,g,hs);const x=tt(E.auth,y);yield Pp(x,E.auth);const R=yield xl(E);return x._openRedirect(E.auth,g,"reauthViaRedirect",R)})).apply(this,arguments)}function Zc(w,g,y){return function(w,g,y){return Sh.apply(this,arguments)}(w,g,y)}function Sh(){return(Sh=(0,a.Z)(function*(w,g,y){const E=(0,G.m9)(w);ii(E.auth,g,hs);const x=tt(E.auth,y);yield Pe(!1,E,g.providerId),yield Pp(x,E.auth);const R=yield xl(E);return x._openRedirect(E.auth,g,"linkViaRedirect",R)})).apply(this,arguments)}function v0(w,g){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,a.Z)(function*(w,g){return yield Pn(w)._initializationPromise,Ga(w,g,!1)})).apply(this,arguments)}function Ga(w,g){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,a.Z)(function*(w,g,y=!1){const E=Pn(w),x=tt(E,g),re=yield new i_(E,x,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield E._persistUserIfCurrent(re.user),yield E._setRedirectUser(null,g)),re})).apply(this,arguments)}function xl(w){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,a.Z)(function*(w){const g=wo(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class b0{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l_(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!l_(g)){const x=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Bn(this.auth,x))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qa(g))}saveEventToCache(g){this.cachedEventUids.add(qa(g)),this.lastProcessedEventTime=Date.now()}}function qa(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function l_({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Au(w){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,a.Z)(function*(w,g={}){return At(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Jo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kc=/^https?/;function Jc(){return(Jc=(0,a.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Au(w);for(const y of g)try{if(Nh(y))return}catch(E){}hn(w,"unauthorized-domain")})).apply(this,arguments)}function Nh(w){const g=si(),{protocol:y,hostname:E}=new URL(g);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===E?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===E}if(!Kc.test(y))return!1;if(Jo.test(w))return E===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const Qc=new yn(3e4,6e4);function Su(){const w=Xn().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Nu=null;function Ml(w){return Nu=Nu||function(w){return new Promise((g,y)=>{var E,x,R;function re(){Su(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Su(),y(Bn(w,"network-request-failed"))},timeout:Qc.get()})}if(null===(x=null===(E=Xn().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(R=Xn().gapi)||void 0===R?void 0:R.load)){const De=To("iframefcb");return Xn()[De]=()=>{gapi.load?re():y(Bn(w,"network-request-failed"))},Gc(`https://apis.google.com/js/api.js?onload=${De}`).catch(nt=>y(nt))}re()}}).catch(g=>{throw Nu=null,g})}(w),Nu}const w0=new yn(5e3,15e3),E0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qo(w){const g=w.config;Le(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?ze(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:w.name,v:F.SDK_VERSION},x=T0.get(w.config.apiHost);x&&(E.eid=x);const R=w._getFrameworks();return R.length&&(E.fw=R.join(",")),`${y}?${(0,G.xO)(E).slice(1)}`}function Mh(){return(Mh=(0,a.Z)(function*(w){const g=yield Ml(w),y=Xn().gapi;return Le(y,w,"internal-error"),g.open({where:document.body,url:Qo(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E0,dontclear:!0},E=>new Promise(function(){var x=(0,a.Z)(function*(R,re){yield E.restyle({setHideOnLeave:!1});const De=Bn(w,"network-request-failed"),nt=Xn().setTimeout(()=>{re(De)},w0.get());function Ue(){Xn().clearTimeout(nt),R(E)}E.ping(Ue).then(Ue,()=>{re(De)})});return function(R,re){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const c_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Rh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function f_(w,g,y,E,x,R){Le(w.config.authDomain,w,"auth-domain-config-required"),Le(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:E,v:F.SDK_VERSION,eventId:x};if(g instanceof hs){g.setDefaultLanguage(w.languageCode),re.providerId=g.providerId||"",(0,G.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,Ue]of Object.entries(R||{}))re[nt]=Ue}if(g instanceof Sn){const nt=g.getScopes().filter(Ue=>""!==Ue);nt.length>0&&(re.scopes=nt.join(","))}w.tenantId&&(re.tid=w.tenantId);const De=re;for(const nt of Object.keys(De))void 0===De[nt]&&delete De[nt];return`${function({config:w}){return w.emulator?ze(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,G.xO)(De).slice(1)}`}const Wa="webStorageSupport",Ps=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cr,this._completeRedirectFn=Ga}_openPopup(g,y,E,x){var R=this;return(0,a.Z)(function*(){var re;lr(null===(re=R.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const De=f_(g,y,E,si(),x);return function(w,g,y,E=500,x=600){const R=Math.max((window.screen.availHeight-x)/2,0).toString(),re=Math.max((window.screen.availWidth-E)/2,0).toString();let De="";const nt=Object.assign(Object.assign({},c_),{width:E.toString(),height:x.toString(),top:R,left:re}),Ue=(0,G.z$)().toLowerCase();y&&(De=co(Ue)?"_blank":y),wa(Ue)&&(g=g||"http://localhost",nt.scrollbars="yes");const _t=Object.entries(nt).reduce((Fn,[un,ea])=>`${Fn}${un}=${ea},`,"");if(function(w=(0,G.z$)()){var g;return $o(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Ue)&&"_self"!==De)return function(w,g){const y=document.createElement("a");y.href=w,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",De),new Rh(null);const vn=window.open(g||"",De,_t);Le(vn,w,"popup-blocked");try{vn.focus()}catch(Fn){}return new Rh(vn)}(g,De,wo())})()}_openRedirect(g,y,E,x){var R=this;return(0,a.Z)(function*(){return yield R._originValidation(g),w=f_(g,y,E,si(),x),Xn().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:x,promise:R}=this.eventManagers[y];return x?Promise.resolve(x):(lr(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,a.Z)(function*(){const E=yield function(w){return Mh.apply(this,arguments)}(g),x=new b0(g);return E.register("authEvent",R=>(Le(null==R?void 0:R.authEvent,g,"invalid-auth-event"),{status:x.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:x},y.iframes[g._key()]=E,x})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Wa,{type:Wa},x=>{var R;const re=null===(R=null==x?void 0:x[0])||void 0===R?void 0:R[Wa];void 0!==re&&y(!!re),hn(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return Jc.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Ca()||Gr()||$o()}};class Ru extends class{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return pr("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Ru(g)}_finalizeEnroll(g,y,E){return function(w,g){return At(w,"POST","/v2/accounts/mfaEnrollment:finalize",fn(w,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(w,g){return At(w,"POST","/v2/accounts/mfaSignIn:finalize",fn(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let p_=(()=>{class w{constructor(){}static assertion(y){return Ru._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w,ku="@firebase/auth",g_="0.19.12";class _E{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,a.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var x;g((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}w="Browser",(0,F._registerComponent)(new Ne.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:R,authDomain:re}=E.options;return((De,nt)=>{Le(R&&!R.includes(":"),"invalid-api-key",{appName:De.name}),Le(!(null==re?void 0:re.includes(":")),"argument-error",{appName:De.name});const Ue={apiKey:R,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yr(w)},_t=new Km(De,nt,Ue);return function(w,g){const y=(null==g?void 0:g.persistence)||[],E=(Array.isArray(y)?y:[y]).map(bn);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(_t,y),_t})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,F._registerComponent)(new Ne.wA("auth-internal",g=>{const y=Pn(g.getProvider("auth").getImmediate());return new _E(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,F.registerVersion)(ku,g_,void 0),(0,F.registerVersion)(ku,g_,"esm2017")},3854:(st,we,B)=>{"use strict";B.d(we,{BH:()=>Me,LL:()=>xt,ZR:()=>Ne,gQ:()=>pr,zI:()=>je,hu:()=>F,g5:()=>se,US:()=>he,tV:()=>U,h$:()=>X,L:()=>Q,$s:()=>At,r3:()=>rr,Sg:()=>fe,ne:()=>lr,p$:()=>z,vZ:()=>Bn,ZB:()=>H,Lj:()=>kt,gK:()=>jr,pd:()=>Le,m9:()=>on,z$:()=>de,GJ:()=>wt,jU:()=>pe,ru:()=>Se,d:()=>We,xb:()=>sn,w1:()=>Je,hl:()=>ke,uI:()=>Re,UG:()=>oe,Yr:()=>ft,b$:()=>Ve,G6:()=>Xe,Mn:()=>bt,w9:()=>Kn,cI:()=>Mn,UI:()=>hn,X3:()=>Et,xO:()=>ii,zd:()=>fr,DV:()=>dn,ug:()=>ze,dS:()=>yn,Pz:()=>qt,Dv:()=>si,Wj:()=>Un,lb:()=>ba,eu:()=>Ie});var a=B(8239);const F=function(J,Y){if(!J)throw se(Y)},se=function(J){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+J)},ae=function(J){const Y=[];let ne=0;for(let ve=0;ve<J.length;ve++){let $=J.charCodeAt(ve);$<128?Y[ne++]=$:$<2048?(Y[ne++]=$>>6|192,Y[ne++]=63&$|128):55296==(64512&$)&&ve+1<J.length&&56320==(64512&J.charCodeAt(ve+1))?($=65536+((1023&$)<<10)+(1023&J.charCodeAt(++ve)),Y[ne++]=$>>18|240,Y[ne++]=$>>12&63|128,Y[ne++]=$>>6&63|128,Y[ne++]=63&$|128):(Y[ne++]=$>>12|224,Y[ne++]=$>>6&63|128,Y[ne++]=63&$|128)}return Y},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,Y){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ne=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let $=0;$<J.length;$+=3){const j=J[$],Z=$+1<J.length,me=Z?J[$+1]:0,He=$+2<J.length,pt=He?J[$+2]:0;let Zt=(15&me)<<2|pt>>6,Rn=63&pt;He||(Rn=64,Z||(Zt=64)),ve.push(ne[j>>2],ne[(3&j)<<4|me>>4],ne[Zt],ne[Rn])}return ve.join("")},encodeString(J,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(J):this.encodeByteArray(ae(J),Y)},decodeString(J,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(J):function(J){const Y=[];let ne=0,ve=0;for(;ne<J.length;){const $=J[ne++];if($<128)Y[ve++]=String.fromCharCode($);else if($>191&&$<224){const j=J[ne++];Y[ve++]=String.fromCharCode((31&$)<<6|63&j)}else if($>239&&$<365){const He=((7&$)<<18|(63&J[ne++])<<12|(63&J[ne++])<<6|63&J[ne++])-65536;Y[ve++]=String.fromCharCode(55296+(He>>10)),Y[ve++]=String.fromCharCode(56320+(1023&He))}else{const j=J[ne++],Z=J[ne++];Y[ve++]=String.fromCharCode((15&$)<<12|(63&j)<<6|63&Z)}}return Y.join("")}(this.decodeStringToByteArray(J,Y))},decodeStringToByteArray(J,Y){this.init_();const ne=Y?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let $=0;$<J.length;){const j=ne[J.charAt($++)],me=$<J.length?ne[J.charAt($)]:0;++$;const pt=$<J.length?ne[J.charAt($)]:64;++$;const Qe=$<J.length?ne[J.charAt($)]:64;if(++$,null==j||null==me||null==pt||null==Qe)throw Error();ve.push(j<<2|me>>4),64!==pt&&(ve.push(me<<4&240|pt>>2),64!==Qe&&ve.push(pt<<6&192|Qe))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},X=function(J){const Y=ae(J);return he.encodeByteArray(Y,!0)},Q=function(J){return X(J).replace(/\./g,"")},U=function(J){try{return he.decodeString(J,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function z(J){return H(void 0,J)}function H(J,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return Y}for(const ne in Y)!Y.hasOwnProperty(ne)||!ce(ne)||(J[ne]=H(J[ne],Y[ne]));return J}function ce(J){return"__proto__"!==J}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,ne)=>{this.resolve=Y,this.reject=ne})}wrapCallback(Y){return(ne,ve)=>{ne?this.reject(ne):this.resolve(ve),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(ne):Y(ne,ve))}}}function fe(J,Y){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=Y||"demo-project",$=J.iat||0,j=J.sub||J.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Z=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:$,exp:$+3600,auth_time:$,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},J);return[Q(JSON.stringify({alg:"none",type:"JWT"})),Q(JSON.stringify(Z)),""].join(".")}function de(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(de())}function oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(J){return!1}}function pe(){return"object"==typeof self&&self.self===self}function Se(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function Ve(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function We(){return de().indexOf("Electron/")>=0}function Je(){const J=de();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function bt(){return de().indexOf("MSAppHost/")>=0}function ft(){return!1}function Xe(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ke(){return"object"==typeof indexedDB}function Ie(){return new Promise((J,Y)=>{try{let ne=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(ve);$.onsuccess=()=>{$.result.close(),ne||self.indexedDB.deleteDatabase(ve),J(!0)},$.onupgradeneeded=()=>{ne=!1},$.onerror=()=>{var j;Y((null===(j=$.error)||void 0===j?void 0:j.message)||"")}}catch(ne){Y(ne)}})}function je(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(Y,ne,ve){super(ne),this.code=Y,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xt.prototype.create)}}class xt{constructor(Y,ne,ve){this.service=Y,this.serviceName=ne,this.errors=ve}create(Y,...ne){const ve=ne[0]||{},$=`${this.service}/${Y}`,j=this.errors[Y],Z=j?function(J,Y){return J.replace(Kt,(ne,ve)=>{const $=Y[ve];return null!=$?String($):`<${ve}?>`})}(j,ve):"Error";return new Ne($,`${this.serviceName}: ${Z} (${$}).`,ve)}}const Kt=/\{\$([^}]+)}/g;function Mn(J){return JSON.parse(J)}function qt(J){return JSON.stringify(J)}const yt=function(J){let Y={},ne={},ve={},$="";try{const j=J.split(".");Y=Mn(U(j[0])||""),ne=Mn(U(j[1])||""),$=j[2],ve=ne.d||{},delete ne.d}catch(j){}return{header:Y,claims:ne,data:ve,signature:$}},Kn=function(J){const ne=yt(J).claims;return!!ne&&"object"==typeof ne&&ne.hasOwnProperty("iat")},wt=function(J){const Y=yt(J).claims;return"object"==typeof Y&&!0===Y.admin};function rr(J,Y){return Object.prototype.hasOwnProperty.call(J,Y)}function dn(J,Y){if(Object.prototype.hasOwnProperty.call(J,Y))return J[Y]}function sn(J){for(const Y in J)if(Object.prototype.hasOwnProperty.call(J,Y))return!1;return!0}function hn(J,Y,ne){const ve={};for(const $ in J)Object.prototype.hasOwnProperty.call(J,$)&&(ve[$]=Y.call(ne,J[$],$,J));return ve}function Bn(J,Y){if(J===Y)return!0;const ne=Object.keys(J),ve=Object.keys(Y);for(const $ of ne){if(!ve.includes($))return!1;const j=J[$],Z=Y[$];if(ji(j)&&ji(Z)){if(!Bn(j,Z))return!1}else if(j!==Z)return!1}for(const $ of ve)if(!ne.includes($))return!1;return!0}function ji(J){return null!==J&&"object"==typeof J}function ii(J){const Y=[];for(const[ne,ve]of Object.entries(J))Array.isArray(ve)?ve.forEach($=>{Y.push(encodeURIComponent(ne)+"="+encodeURIComponent($))}):Y.push(encodeURIComponent(ne)+"="+encodeURIComponent(ve));return Y.length?"&"+Y.join("&"):""}function fr(J){const Y={};return J.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[$,j]=ve.split("=");Y[decodeURIComponent($)]=decodeURIComponent(j)}}),Y}function Le(J){const Y=J.indexOf("?");if(!Y)return"";const ne=J.indexOf("#",Y);return J.substring(Y,ne>0?ne:void 0)}class pr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,ne){ne||(ne=0);const ve=this.W_;if("string"==typeof Y)for(let Qe=0;Qe<16;Qe++)ve[Qe]=Y.charCodeAt(ne)<<24|Y.charCodeAt(ne+1)<<16|Y.charCodeAt(ne+2)<<8|Y.charCodeAt(ne+3),ne+=4;else for(let Qe=0;Qe<16;Qe++)ve[Qe]=Y[ne]<<24|Y[ne+1]<<16|Y[ne+2]<<8|Y[ne+3],ne+=4;for(let Qe=16;Qe<80;Qe++){const Zt=ve[Qe-3]^ve[Qe-8]^ve[Qe-14]^ve[Qe-16];ve[Qe]=4294967295&(Zt<<1|Zt>>>31)}let pt,Ct,$=this.chain_[0],j=this.chain_[1],Z=this.chain_[2],me=this.chain_[3],He=this.chain_[4];for(let Qe=0;Qe<80;Qe++){Qe<40?Qe<20?(pt=me^j&(Z^me),Ct=1518500249):(pt=j^Z^me,Ct=1859775393):Qe<60?(pt=j&Z|me&(j|Z),Ct=2400959708):(pt=j^Z^me,Ct=3395469782);const Zt=($<<5|$>>>27)+pt+He+Ct+ve[Qe]&4294967295;He=me,me=Z,Z=4294967295&(j<<30|j>>>2),j=$,$=Zt}this.chain_[0]=this.chain_[0]+$&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+Z&4294967295,this.chain_[3]=this.chain_[3]+me&4294967295,this.chain_[4]=this.chain_[4]+He&4294967295}update(Y,ne){if(null==Y)return;void 0===ne&&(ne=Y.length);const ve=ne-this.blockSize;let $=0;const j=this.buf_;let Z=this.inbuf_;for(;$<ne;){if(0===Z)for(;$<=ve;)this.compress_(Y,$),$+=this.blockSize;if("string"==typeof Y){for(;$<ne;)if(j[Z]=Y.charCodeAt($),++Z,++$,Z===this.blockSize){this.compress_(j),Z=0;break}}else for(;$<ne;)if(j[Z]=Y[$],++Z,++$,Z===this.blockSize){this.compress_(j),Z=0;break}}this.inbuf_=Z,this.total_+=ne}digest(){const Y=[];let ne=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $=this.blockSize-1;$>=56;$--)this.buf_[$]=255&ne,ne/=256;this.compress_(this.buf_);let ve=0;for(let $=0;$<5;$++)for(let j=24;j>=0;j-=8)Y[ve]=this.chain_[$]>>j&255,++ve;return Y}}function lr(J,Y){const ne=new at(J,Y);return ne.subscribe.bind(ne)}class at{constructor(Y,ne){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ne,this.task.then(()=>{Y(this)}).catch(ve=>{this.error(ve)})}next(Y){this.forEachObserver(ne=>{ne.next(Y)})}error(Y){this.forEachObserver(ne=>{ne.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,ne,ve){let $;if(void 0===Y&&void 0===ne&&void 0===ve)throw new Error("Missing Observer.");$=function(J,Y){if("object"!=typeof J||null===J)return!1;for(const ne of["next","error","complete"])if(ne in J&&"function"==typeof J[ne])return!0;return!1}(Y)?Y:{next:Y,error:ne,complete:ve},void 0===$.next&&($.next=Wn),void 0===$.error&&($.error=Wn),void 0===$.complete&&($.complete=Wn);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Z){}}),this.observers.push($),j}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let ne=0;ne<this.observers.length;ne++)this.sendOne(ne,Y)}sendOne(Y,ne){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{ne(this.observers[Y])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wn(){}const si=function(J,Y,ne,ve){let $;if(ve<Y?$="at least "+Y:ve>ne&&($=0===ne?"none":"no more than "+ne),$)throw new Error(J+" failed: Was called with "+ve+(1===ve?" argument.":" arguments.")+" Expects "+$+".")};function jr(J,Y){return`${J} failed: ${Y} argument `}function Un(J,Y,ne,ve){if((!ve||ne)&&"function"!=typeof ne)throw new Error(jr(J,Y)+"must be a valid function.")}function ba(J,Y,ne,ve){if((!ve||ne)&&("object"!=typeof ne||null===ne))throw new Error(jr(J,Y)+"must be a valid context object.")}const yn=function(J){const Y=[];let ne=0;for(let ve=0;ve<J.length;ve++){let $=J.charCodeAt(ve);if($>=55296&&$<=56319){const j=$-55296;ve++,F(ve<J.length,"Surrogate pair missing trail surrogate."),$=65536+(j<<10)+(J.charCodeAt(ve)-56320)}$<128?Y[ne++]=$:$<2048?(Y[ne++]=$>>6|192,Y[ne++]=63&$|128):$<65536?(Y[ne++]=$>>12|224,Y[ne++]=$>>6&63|128,Y[ne++]=63&$|128):(Y[ne++]=$>>18|240,Y[ne++]=$>>12&63|128,Y[ne++]=$>>6&63|128,Y[ne++]=63&$|128)}return Y},ze=function(J){let Y=0;for(let ne=0;ne<J.length;ne++){const ve=J.charCodeAt(ne);ve<128?Y++:ve<2048?Y+=2:ve>=55296&&ve<=56319?(Y+=4,ne++):Y+=3}return Y};function At(J,Y=1e3,ne=2){const ve=Y*Math.pow(ne,J),$=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+$)}function on(J){return J&&J._delegate?J._delegate:J}function vt(J,Y){return new Promise((ne,ve)=>{J.onsuccess=$=>{ne($.target.result)},J.onerror=$=>{var j;ve(`${Y}: ${null===(j=$.target.error)||void 0===j?void 0:j.message}`)}})}class Wt{constructor(Y){this._db=Y,this.objectStoreNames=this._db.objectStoreNames}transaction(Y,ne="readonly"){return new Ze(this._db.transaction.call(this._db,Y,ne))}createObjectStore(Y,ne){return new xe(this._db.createObjectStore(Y,ne))}close(){this._db.close()}}class Ze{constructor(Y){this._transaction=Y,this.complete=new Promise((ne,ve)=>{this._transaction.oncomplete=function(){ne()},this._transaction.onerror=()=>{ve(this._transaction.error)},this._transaction.onabort=()=>{ve(this._transaction.error)}})}objectStore(Y){return new xe(this._transaction.objectStore(Y))}}class xe{constructor(Y){this._store=Y}index(Y){return new ut(this._store.index(Y))}createIndex(Y,ne,ve){return new ut(this._store.createIndex(Y,ne,ve))}get(Y){return vt(this._store.get(Y),"Error reading from IndexedDB")}put(Y,ne){return vt(this._store.put(Y,ne),"Error writing to IndexedDB")}delete(Y){return vt(this._store.delete(Y),"Error deleting from IndexedDB")}clear(){return vt(this._store.clear(),"Error clearing IndexedDB object store")}}class ut{constructor(Y){this._index=Y}get(Y){return vt(this._index.get(Y),"Error reading from IndexedDB")}}function Et(J,Y,ne){return new Promise((ve,$)=>{try{const j=indexedDB.open(J,Y);j.onsuccess=Z=>{ve(new Wt(Z.target.result))},j.onerror=Z=>{var me;$(`Error opening indexedDB: ${null===(me=Z.target.error)||void 0===me?void 0:me.message}`)},j.onupgradeneeded=Z=>{ne(new Wt(j.result),Z.oldVersion,Z.newVersion,new Ze(j.transaction))}}catch(j){$(`Error opening indexedDB: ${j.message}`)}})}function kt(J){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,a.Z)(function*(J){return new Promise((Y,ne)=>{try{const ve=indexedDB.deleteDatabase(J);ve.onsuccess=()=>{Y()},ve.onerror=$=>{var j;ne(`Error deleting indexedDB database "${J}": ${null===(j=$.target.error)||void 0===j?void 0:j.message}`)}}catch(ve){ne(`Error deleting indexedDB database "${J}": ${ve.message}`)}})})).apply(this,arguments)}},8873:function(st){st.exports=function(){"use strict";var B=6e4,a=36e5,G="millisecond",F="second",se="minute",ae="hour",ee="day",he="week",X="month",Q="quarter",U="year",z="date",H="Invalid Date",ce=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Me=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},de=function(Xe,ke,Ie){var je=String(Xe);return!je||je.length>=ke?Xe:""+Array(ke+1-je.length).join(Ie)+Xe},Re={s:de,z:function(Xe){var ke=-Xe.utcOffset(),Ie=Math.abs(ke),je=Math.floor(Ie/60),Ce=Ie%60;return(ke<=0?"+":"-")+de(je,2,"0")+":"+de(Ce,2,"0")},m:function Xe(ke,Ie){if(ke.date()<Ie.date())return-Xe(Ie,ke);var je=12*(Ie.year()-ke.year())+(Ie.month()-ke.month()),Ce=ke.clone().add(je,X),qe=Ie-Ce<0,Ne=ke.clone().add(je+(qe?-1:1),X);return+(-(je+(Ie-Ce)/(qe?Ce-Ne:Ne-Ce))||0)},a:function(Xe){return Xe<0?Math.ceil(Xe)||0:Math.floor(Xe)},p:function(Xe){return{M:X,y:U,w:he,d:ee,D:z,h:ae,m:se,s:F,ms:G,Q}[Xe]||String(Xe||"").toLowerCase().replace(/s$/,"")},u:function(Xe){return void 0===Xe}},oe="en",pe={};pe[oe]=fe;var Se=function(Xe){return Xe instanceof bt},Ve=function Xe(ke,Ie,je){var Ce;if(!ke)return oe;if("string"==typeof ke){var qe=ke.toLowerCase();pe[qe]&&(Ce=qe),Ie&&(pe[qe]=Ie,Ce=qe);var Ne=ke.split("-");if(!Ce&&Ne.length>1)return Xe(Ne[0])}else{var xt=ke.name;pe[xt]=ke,Ce=xt}return!je&&Ce&&(oe=Ce),Ce||!je&&oe},We=function(Xe,ke){if(Se(Xe))return Xe.clone();var Ie="object"==typeof ke?ke:{};return Ie.date=Xe,Ie.args=arguments,new bt(Ie)},Je=Re;Je.l=Ve,Je.i=Se,Je.w=function(Xe,ke){return We(Xe,{locale:ke.$L,utc:ke.$u,x:ke.$x,$offset:ke.$offset})};var bt=function(){function Xe(Ie){this.$L=Ve(Ie.locale,null,!0),this.parse(Ie)}var ke=Xe.prototype;return ke.parse=function(Ie){this.$d=function(je){var Ce=je.date,qe=je.utc;if(null===Ce)return new Date(NaN);if(Je.u(Ce))return new Date;if(Ce instanceof Date)return new Date(Ce);if("string"==typeof Ce&&!/Z$/i.test(Ce)){var Ne=Ce.match(ce);if(Ne){var xt=Ne[2]-1||0,_n=(Ne[7]||"0").substring(0,3);return qe?new Date(Date.UTC(Ne[1],xt,Ne[3]||1,Ne[4]||0,Ne[5]||0,Ne[6]||0,_n)):new Date(Ne[1],xt,Ne[3]||1,Ne[4]||0,Ne[5]||0,Ne[6]||0,_n)}}return new Date(Ce)}(Ie),this.$x=Ie.x||{},this.init()},ke.init=function(){var Ie=this.$d;this.$y=Ie.getFullYear(),this.$M=Ie.getMonth(),this.$D=Ie.getDate(),this.$W=Ie.getDay(),this.$H=Ie.getHours(),this.$m=Ie.getMinutes(),this.$s=Ie.getSeconds(),this.$ms=Ie.getMilliseconds()},ke.$utils=function(){return Je},ke.isValid=function(){return this.$d.toString()!==H},ke.isSame=function(Ie,je){var Ce=We(Ie);return this.startOf(je)<=Ce&&Ce<=this.endOf(je)},ke.isAfter=function(Ie,je){return We(Ie)<this.startOf(je)},ke.isBefore=function(Ie,je){return this.endOf(je)<We(Ie)},ke.$g=function(Ie,je,Ce){return Je.u(Ie)?this[je]:this.set(Ce,Ie)},ke.unix=function(){return Math.floor(this.valueOf()/1e3)},ke.valueOf=function(){return this.$d.getTime()},ke.startOf=function(Ie,je){var Ce=this,qe=!!Je.u(je)||je,Ne=Je.p(Ie),xt=function(Kn,wt){var rr=Je.w(Ce.$u?Date.UTC(Ce.$y,wt,Kn):new Date(Ce.$y,wt,Kn),Ce);return qe?rr:rr.endOf(ee)},_n=function(Kn,wt){return Je.w(Ce.toDate()[Kn].apply(Ce.toDate("s"),(qe?[0,0,0,0]:[23,59,59,999]).slice(wt)),Ce)},Kt=this.$W,Mn=this.$M,qt=this.$D,yt="set"+(this.$u?"UTC":"");switch(Ne){case U:return qe?xt(1,0):xt(31,11);case X:return qe?xt(1,Mn):xt(0,Mn+1);case he:var Dr=this.$locale().weekStart||0,gi=(Kt<Dr?Kt+7:Kt)-Dr;return xt(qe?qt-gi:qt+(6-gi),Mn);case ee:case z:return _n(yt+"Hours",0);case ae:return _n(yt+"Minutes",1);case se:return _n(yt+"Seconds",2);case F:return _n(yt+"Milliseconds",3);default:return this.clone()}},ke.endOf=function(Ie){return this.startOf(Ie,!1)},ke.$set=function(Ie,je){var Ce,qe=Je.p(Ie),Ne="set"+(this.$u?"UTC":""),xt=(Ce={},Ce[ee]=Ne+"Date",Ce[z]=Ne+"Date",Ce[X]=Ne+"Month",Ce[U]=Ne+"FullYear",Ce[ae]=Ne+"Hours",Ce[se]=Ne+"Minutes",Ce[F]=Ne+"Seconds",Ce[G]=Ne+"Milliseconds",Ce)[qe],_n=qe===ee?this.$D+(je-this.$W):je;if(qe===X||qe===U){var Kt=this.clone().set(z,1);Kt.$d[xt](_n),Kt.init(),this.$d=Kt.set(z,Math.min(this.$D,Kt.daysInMonth())).$d}else xt&&this.$d[xt](_n);return this.init(),this},ke.set=function(Ie,je){return this.clone().$set(Ie,je)},ke.get=function(Ie){return this[Je.p(Ie)]()},ke.add=function(Ie,je){var Ce,qe=this;Ie=Number(Ie);var Ne=Je.p(je),xt=function(Mn){var qt=We(qe);return Je.w(qt.date(qt.date()+Math.round(Mn*Ie)),qe)};if(Ne===X)return this.set(X,this.$M+Ie);if(Ne===U)return this.set(U,this.$y+Ie);if(Ne===ee)return xt(1);if(Ne===he)return xt(7);var _n=(Ce={},Ce[se]=B,Ce[ae]=a,Ce[F]=1e3,Ce)[Ne]||1,Kt=this.$d.getTime()+Ie*_n;return Je.w(Kt,this)},ke.subtract=function(Ie,je){return this.add(-1*Ie,je)},ke.format=function(Ie){var je=this,Ce=this.$locale();if(!this.isValid())return Ce.invalidDate||H;var qe=Ie||"YYYY-MM-DDTHH:mm:ssZ",Ne=Je.z(this),xt=this.$H,_n=this.$m,Kt=this.$M,Mn=Ce.weekdays,qt=Ce.months,yt=function(wt,rr,dn,sn){return wt&&(wt[rr]||wt(je,qe))||dn[rr].slice(0,sn)},Dr=function(wt){return Je.s(xt%12||12,wt,"0")},gi=Ce.meridiem||function(wt,rr,dn){var sn=wt<12?"AM":"PM";return dn?sn.toLowerCase():sn},Kn={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Kt+1,MM:Je.s(Kt+1,2,"0"),MMM:yt(Ce.monthsShort,Kt,qt,3),MMMM:yt(qt,Kt),D:this.$D,DD:Je.s(this.$D,2,"0"),d:String(this.$W),dd:yt(Ce.weekdaysMin,this.$W,Mn,2),ddd:yt(Ce.weekdaysShort,this.$W,Mn,3),dddd:Mn[this.$W],H:String(xt),HH:Je.s(xt,2,"0"),h:Dr(1),hh:Dr(2),a:gi(xt,_n,!0),A:gi(xt,_n,!1),m:String(_n),mm:Je.s(_n,2,"0"),s:String(this.$s),ss:Je.s(this.$s,2,"0"),SSS:Je.s(this.$ms,3,"0"),Z:Ne};return qe.replace(Me,function(wt,rr){return rr||Kn[wt]||Ne.replace(":","")})},ke.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ke.diff=function(Ie,je,Ce){var qe,Ne=Je.p(je),xt=We(Ie),_n=(xt.utcOffset()-this.utcOffset())*B,Kt=this-xt,Mn=Je.m(this,xt);return Mn=(qe={},qe[U]=Mn/12,qe[X]=Mn,qe[Q]=Mn/3,qe[he]=(Kt-_n)/6048e5,qe[ee]=(Kt-_n)/864e5,qe[ae]=Kt/a,qe[se]=Kt/B,qe[F]=Kt/1e3,qe)[Ne]||Kt,Ce?Mn:Je.a(Mn)},ke.daysInMonth=function(){return this.endOf(X).$D},ke.$locale=function(){return pe[this.$L]},ke.locale=function(Ie,je){if(!Ie)return this.$L;var Ce=this.clone(),qe=Ve(Ie,je,!0);return qe&&(Ce.$L=qe),Ce},ke.clone=function(){return Je.w(this.$d,this)},ke.toDate=function(){return new Date(this.valueOf())},ke.toJSON=function(){return this.isValid()?this.toISOString():null},ke.toISOString=function(){return this.$d.toISOString()},ke.toString=function(){return this.$d.toUTCString()},Xe}(),ft=bt.prototype;return We.prototype=ft,[["$ms",G],["$s",F],["$m",se],["$H",ae],["$W",ee],["$M",X],["$y",U],["$D",z]].forEach(function(Xe){ft[Xe[1]]=function(ke){return this.$g(ke,Xe[0],Xe[1])}}),We.extend=function(Xe,ke){return Xe.$i||(Xe(ke,bt,We),Xe.$i=!0),We},We.locale=Ve,We.isDayjs=Se,We.unix=function(Xe){return We(1e3*Xe)},We.en=pe[oe],We.Ls=pe,We.p={},We}()},4292:function(st){st.exports=function(){"use strict";var we={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},B=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d\d/,G=/\d\d?/,F=/\d*[^\s\d-_:/()]+/,se={},ae=function(H){return(H=+H)+(H>68?1900:2e3)},ee=function(H){return function(ce){this[H]=+ce}},he=[/[+-]\d\d:?(\d\d)?|Z/,function(H){(this.zone||(this.zone={})).offset=function(ce){if(!ce||"Z"===ce)return 0;var Me=ce.match(/([+-]|\d\d)/g),fe=60*Me[1]+(+Me[2]||0);return 0===fe?0:"+"===Me[0]?-fe:fe}(H)}],X=function(H){var ce=se[H];return ce&&(ce.indexOf?ce:ce.s.concat(ce.f))},Q=function(H,ce){var Me,fe=se.meridiem;if(fe){for(var de=1;de<=24;de+=1)if(H.indexOf(fe(de,0,ce))>-1){Me=de>12;break}}else Me=H===(ce?"pm":"PM");return Me},U={A:[F,function(H){this.afternoon=Q(H,!1)}],a:[F,function(H){this.afternoon=Q(H,!0)}],S:[/\d/,function(H){this.milliseconds=100*+H}],SS:[a,function(H){this.milliseconds=10*+H}],SSS:[/\d{3}/,function(H){this.milliseconds=+H}],s:[G,ee("seconds")],ss:[G,ee("seconds")],m:[G,ee("minutes")],mm:[G,ee("minutes")],H:[G,ee("hours")],h:[G,ee("hours")],HH:[G,ee("hours")],hh:[G,ee("hours")],D:[G,ee("day")],DD:[a,ee("day")],Do:[F,function(H){var ce=se.ordinal,Me=H.match(/\d+/);if(this.day=Me[0],ce)for(var fe=1;fe<=31;fe+=1)ce(fe).replace(/\[|\]/g,"")===H&&(this.day=fe)}],M:[G,ee("month")],MM:[a,ee("month")],MMM:[F,function(H){var ce=X("months"),Me=(X("monthsShort")||ce.map(function(fe){return fe.slice(0,3)})).indexOf(H)+1;if(Me<1)throw new Error;this.month=Me%12||Me}],MMMM:[F,function(H){var ce=X("months").indexOf(H)+1;if(ce<1)throw new Error;this.month=ce%12||ce}],Y:[/[+-]?\d+/,ee("year")],YY:[a,function(H){this.year=ae(H)}],YYYY:[/\d{4}/,ee("year")],Z:he,ZZ:he};return function(H,ce,Me){Me.p.customParseFormat=!0,H&&H.parseTwoDigitYear&&(ae=H.parseTwoDigitYear);var fe=ce.prototype,de=fe.parse;fe.parse=function(Re){var oe=Re.date,pe=Re.utc,Se=Re.args;this.$u=pe;var Ve=Se[1];if("string"==typeof Ve){var We=!0===Se[2],Je=!0===Se[3],bt=We||Je,ft=Se[2];Je&&(ft=Se[2]),se=this.$locale(),!We&&ft&&(se=Me.Ls[ft]),this.$d=function(je,Ce,qe){try{if(["x","X"].indexOf(Ce)>-1)return new Date(("X"===Ce?1e3:1)*je);var Ne=function(H){var Me;Me=se&&se.formats;for(var fe=(H=H.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(We,Je,bt){var ft=bt&&bt.toUpperCase();return Je||Me[bt]||we[bt]||Me[ft].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(Xe,ke,Ie){return ke||Ie.slice(1)})})).match(B),de=fe.length,Re=0;Re<de;Re+=1){var oe=fe[Re],pe=U[oe],Ve=pe&&pe[1];fe[Re]=Ve?{regex:pe&&pe[0],parser:Ve}:oe.replace(/^\[|\]$/g,"")}return function(We){for(var Je={},bt=0,ft=0;bt<de;bt+=1){var Xe=fe[bt];if("string"==typeof Xe)ft+=Xe.length;else{var ke=Xe.regex,Ie=Xe.parser,je=We.slice(ft),Ce=ke.exec(je)[0];Ie.call(Je,Ce),We=We.replace(Ce,"")}}return function(qe){var Ne=qe.afternoon;if(void 0!==Ne){var xt=qe.hours;Ne?xt<12&&(qe.hours+=12):12===xt&&(qe.hours=0),delete qe.afternoon}}(Je),Je}}(Ce)(je),xt=Ne.year,_n=Ne.month,Kt=Ne.day,Mn=Ne.hours,qt=Ne.minutes,yt=Ne.seconds,Dr=Ne.milliseconds,gi=Ne.zone,Kn=new Date,wt=Kt||(xt||_n?1:Kn.getDate()),rr=xt||Kn.getFullYear(),dn=0;xt&&!_n||(dn=_n>0?_n-1:Kn.getMonth());var sn=Mn||0,hn=qt||0,Bn=yt||0,ji=Dr||0;return gi?new Date(Date.UTC(rr,dn,wt,sn,hn,Bn,ji+60*gi.offset*1e3)):qe?new Date(Date.UTC(rr,dn,wt,sn,hn,Bn,ji)):new Date(rr,dn,wt,sn,hn,Bn,ji)}catch(ii){return new Date("")}}(oe,Ve,pe),this.init(),ft&&!0!==ft&&(this.$L=this.locale(ft).$L),bt&&oe!=this.format(Ve)&&(this.$d=new Date("")),se={}}else if(Ve instanceof Array)for(var Xe=Ve.length,ke=1;ke<=Xe;ke+=1){Se[1]=Ve[ke-1];var Ie=Me.apply(this,Se);if(Ie.isValid()){this.$d=Ie.$d,this.$L=Ie.$L,this.init();break}ke===Xe&&(this.$d=new Date(""))}else de.call(this,Re)}}}()},2329:(st,we,B)=>{"use strict";B.d(we,{Mq:()=>a.getApp,C6:()=>a.getApps});var a=B(8026);(0,a.registerVersion)("firebase","9.6.11","app")},7841:(st,we,B)=>{"use strict";B.d(we,{Z:()=>a.Z});var a=B(3394);a.Z.registerVersion("firebase","9.6.11","app-compat")},4828:(st,we,B)=>{"use strict";B.r(we);var a=B(8239),G=B(3394),F=B(982),se=B(3854),he=(B(8026),B(5422),B(3910));function X(){return window}function z(){return(z=(0,a.Z)(function*($,j,Z){var me;const{BuildInfo:He}=X();(0,F.ap)(j.sessionId,"AuthEvent did not contain a session ID");const pt=yield oe(j.sessionId),Ct={};return(0,F.aq)()?Ct.ibi=He.packageName:(0,F.ar)()?Ct.apn=He.packageName:(0,F.as)($,"operation-not-supported-in-this-environment"),He.displayName&&(Ct.appDisplayName=He.displayName),Ct.sessionId=pt,(0,F.at)($,Z,j.type,void 0,null!==(me=j.eventId)&&void 0!==me?me:void 0,Ct)})).apply(this,arguments)}function ce(){return(ce=(0,a.Z)(function*($){const{BuildInfo:j}=X(),Z={};(0,F.aq)()?Z.iosBundleId=j.packageName:(0,F.ar)()?Z.androidPackageName=j.packageName:(0,F.as)($,"operation-not-supported-in-this-environment"),yield(0,F.au)($,Z)})).apply(this,arguments)}function de(){return(de=(0,a.Z)(function*($,j,Z){const{cordova:me}=X();let He=()=>{};try{yield new Promise((pt,Ct)=>{let Qe=null;function Zt(){var an;pt();const Zn=null===(an=me.plugins.browsertab)||void 0===an?void 0:an.close;"function"==typeof Zn&&Zn(),"function"==typeof(null==Z?void 0:Z.close)&&Z.close()}function Rn(){Qe||(Qe=window.setTimeout(()=>{Ct((0,F.av)($,"redirect-cancelled-by-user"))},2e3))}function An(){"visible"===(null==document?void 0:document.visibilityState)&&Rn()}j.addPassiveListener(Zt),document.addEventListener("resume",Rn,!1),(0,F.ar)()&&document.addEventListener("visibilitychange",An,!1),He=()=>{j.removePassiveListener(Zt),document.removeEventListener("resume",Rn,!1),document.removeEventListener("visibilitychange",An,!1),Qe&&window.clearTimeout(Qe)}})}finally{He()}})).apply(this,arguments)}function oe($){return pe.apply(this,arguments)}function pe(){return(pe=(0,a.Z)(function*($){const j=Se($),Z=yield crypto.subtle.digest("SHA-256",j);return Array.from(new Uint8Array(Z)).map(He=>He.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Se($){if((0,F.ap)(/[0-9a-zA-Z]+/.test($),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode($);const j=new ArrayBuffer($.length),Z=new Uint8Array(j);for(let me=0;me<$.length;me++)Z[me]=$.charCodeAt(me);return Z}class We extends F.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(j=>{this.resolveInialized=j})}addPassiveListener(j){this.passiveListeners.add(j)}removePassiveListener(j){this.passiveListeners.delete(j)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(j){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(j)),super.onEvent(j)}initialized(){var j=this;return(0,a.Z)(function*(){yield j.initPromise})()}}function ft($){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,a.Z)(function*($){const j=yield je()._get(Ce($));return j&&(yield je()._remove(Ce($))),j})).apply(this,arguments)}function Ie(){const $=[],j="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const me=Math.floor(Math.random()*j.length);$.push(j.charAt(me))}return $.join("")}function je(){return(0,F.ax)(F.b)}function Ce($){return(0,F.ay)("authEvent",$.config.apiKey,$.name)}function xt($){if(!(null==$?void 0:$.includes("?")))return{};const[j,...Z]=$.split("?");return(0,se.zd)(Z.join("?"))}function qt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,F.av)("no-auth-event")}}function wt(){var $;return(null===($=null==self?void 0:self.location)||void 0===$?void 0:$.protocol)||null}function dn($=(0,se.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()||!$.toLowerCase().match(/iphone|ipad|ipod|android/))}function ii(){try{const $=self.localStorage,j=F.aG();if($)return $.setItem(j,"1"),$.removeItem(j),!function($=(0,se.z$)()){return(0,se.w1)()&&11===(null==document?void 0:document.documentMode)||function($=(0,se.z$)()){return/Edge\/\d+/.test($)}($)}()||(0,se.hl)()}catch($){return fr()&&(0,se.hl)()}return!1}function fr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Le(){return("http:"===wt()||"https:"===wt()||(0,se.ru)()||dn())&&!((0,se.b$)()||(0,se.UG)())&&ii()&&!fr()}function pr(){return dn()&&"undefined"!=typeof document}function at(){return(at=(0,a.Z)(function*(){return!!pr()&&new Promise($=>{const j=setTimeout(()=>{$(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(j),$(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},Wn=F.aw,si="persistence";function gr($){return Un.apply(this,arguments)}function Un(){return(Un=(0,a.Z)(function*($){yield $._initializationPromise;const j=yn(),Z=F.ay(si,$.config.apiKey,$.name);j&&j.setItem(Z,$._getPersistence())})).apply(this,arguments)}function yn(){var $;try{return(null===($="undefined"!=typeof window?window:null)||void 0===$?void 0:$.sessionStorage)||null}catch(j){return null}}const ze=F.aw;class mt{constructor(){this.browserResolver=F.ax(F.k),this.cordovaResolver=F.ax(class{constructor(){this._redirectPersistence=F.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=F.aA}_initialize(j){var Z=this;return(0,a.Z)(function*(){const me=j._key();let He=Z.eventManagers.get(me);return He||(He=new We(j),Z.eventManagers.set(me,He),Z.attachCallbackListeners(j,He)),He})()}_openPopup(j){(0,F.as)(j,"operation-not-supported-in-this-environment")}_openRedirect(j,Z,me,He){var pt=this;return(0,a.Z)(function*(){!function($){var j,Z,me,He,pt,Ct,Qe,Zt,Rn,An;const an=X();(0,F.aw)("function"==typeof(null===(j=null==an?void 0:an.universalLinks)||void 0===j?void 0:j.subscribe),$,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,F.aw)(void 0!==(null===(Z=null==an?void 0:an.BuildInfo)||void 0===Z?void 0:Z.packageName),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,F.aw)("function"==typeof(null===(pt=null===(He=null===(me=null==an?void 0:an.cordova)||void 0===me?void 0:me.plugins)||void 0===He?void 0:He.browsertab)||void 0===pt?void 0:pt.openUrl),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===(Zt=null===(Qe=null===(Ct=null==an?void 0:an.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===Zt?void 0:Zt.isAvailable),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,F.aw)("function"==typeof(null===(An=null===(Rn=null==an?void 0:an.cordova)||void 0===Rn?void 0:Rn.InAppBrowser)||void 0===An?void 0:An.open),$,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(j);const Ct=yield pt._initialize(j);yield Ct.initialized(),Ct.resetRedirect(),(0,F.aB)(),yield pt._originValidation(j);const Qe=function($,j,Z=null){return{type:j,eventId:Z,urlResponse:null,sessionId:Ie(),postBody:null,tenantId:$.tenantId,error:(0,F.av)($,"no-auth-event")}}(j,me,He);yield function($,j){return je()._set(Ce($),j)}(j,Qe);const Zt=yield function($,j,Z){return z.apply(this,arguments)}(j,Qe,Z),Rn=yield function($){const{cordova:j}=X();return new Promise(Z=>{j.plugins.browsertab.isAvailable(me=>{let He=null;me?j.plugins.browsertab.openUrl($):He=j.InAppBrowser.open($,(0,F.ao)()?"_blank":"_system","location=yes"),Z(He)})})}(Zt);return function($,j,Z){return de.apply(this,arguments)}(j,Ct,Rn)})()}_isIframeWebStorageSupported(j,Z){throw new Error("Method not implemented.")}_originValidation(j){const Z=j._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function($){return ce.apply(this,arguments)}(j)),this.originValidationPromises[Z]}attachCallbackListeners(j,Z){const{universalLinks:me,handleOpenURL:He,BuildInfo:pt}=X(),Ct=setTimeout((0,a.Z)(function*(){yield ft(j),Z.onEvent(qt())}),500),Qe=function(){var An=(0,a.Z)(function*(an){clearTimeout(Ct);const Zn=yield ft(j);let Ye=null;Zn&&(null==an?void 0:an.url)&&(Ye=function($,j){var Z,me;const He=function($){const j=xt($),Z=j.link?decodeURIComponent(j.link):void 0,me=xt(Z).link,He=j.deep_link_id?decodeURIComponent(j.deep_link_id):void 0;return xt(He).link||He||me||Z||$}(j);if(He.includes("/__/auth/callback")){const pt=xt(He),Ct=pt.firebaseError?function($){try{return JSON.parse($)}catch(j){return null}}(decodeURIComponent(pt.firebaseError)):null,Qe=null===(me=null===(Z=null==Ct?void 0:Ct.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===me?void 0:me[1],Zt=Qe?(0,F.av)(Qe):null;return Zt?{type:$.type,eventId:$.eventId,tenantId:$.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:$.type,eventId:$.eventId,tenantId:$.tenantId,sessionId:$.sessionId,urlResponse:He,postBody:null}}return null}(Zn,an.url)),Z.onEvent(Ye||qt())});return function(Zn){return An.apply(this,arguments)}}();void 0!==me&&"function"==typeof me.subscribe&&me.subscribe(null,Qe);const Zt=He,Rn=`${pt.packageName.toLowerCase()}://`;X().handleOpenURL=function(){var An=(0,a.Z)(function*(an){if(an.toLowerCase().startsWith(Rn)&&Qe({url:an}),"function"==typeof Zt)try{Zt(an)}catch(Zn){console.error(Zn)}});return function(an){return An.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=F.a,this._completeRedirectFn=F.aA}_initialize(j){var Z=this;return(0,a.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(j)})()}_openPopup(j,Z,me,He){var pt=this;return(0,a.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openPopup(j,Z,me,He)})()}_openRedirect(j,Z,me,He){var pt=this;return(0,a.Z)(function*(){return yield pt.selectUnderlyingResolver(),pt.assertedUnderlyingResolver._openRedirect(j,Z,me,He)})()}_isIframeWebStorageSupported(j,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(j,Z)}_originValidation(j){return this.assertedUnderlyingResolver._originValidation(j)}get _shouldInitProactively(){return pr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ze(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var j=this;return(0,a.Z)(function*(){if(j.underlyingResolver)return;const Z=yield function(){return at.apply(this,arguments)}();j.underlyingResolver=Z?j.cordovaResolver:j.browserResolver})()}}function Gi($){return $.unwrap()}function fn($){return Ir($)}function Ir($){const{_tokenResponse:j}=$ instanceof se.ZR?$.customData:$;if(!j)return null;if(!($ instanceof se.ZR)&&"temporaryProof"in j&&"phoneNumber"in j)return F.P.credentialFromResult($);const Z=j.providerId;if(!Z||Z===F.o.PASSWORD)return null;let me;switch(Z){case F.o.GOOGLE:me=F.N;break;case F.o.FACEBOOK:me=F.M;break;case F.o.GITHUB:me=F.Q;break;case F.o.TWITTER:me=F.V;break;default:const{oauthIdToken:He,oauthAccessToken:pt,oauthTokenSecret:Ct,pendingToken:Qe,nonce:Zt}=j;return pt||Ct||He||Qe?Qe?Z.startsWith("saml.")?F.aJ._create(Z,Qe):F.I._fromParams({providerId:Z,signInMethod:Z,pendingToken:Qe,idToken:He,accessToken:pt}):new F.T(Z).credential({idToken:He,accessToken:pt,rawNonce:Zt}):null}return $ instanceof se.ZR?me.credentialFromError($):me.credentialFromResult($)}function ir($,j){return j.catch(Z=>{throw Z instanceof se.ZR&&function($,j){var Z;const me=null===(Z=j.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===j.code)j.resolver=new Wt($,F.am($,j));else if(me){const He=Ir(j),pt=j;He&&(pt.credential=He,pt.tenantId=me.tenantId||void 0,pt.email=me.email||void 0,pt.phoneNumber=me.phoneNumber||void 0)}}($,Z),Z}).then(Z=>{const He=Z.user;return{operationType:Z.operationType,credential:fn(Z),additionalUserInfo:F.ak(Z),user:Ze.getOrCreate(He)}})}function on($,j){return vt.apply(this,arguments)}function vt(){return(vt=(0,a.Z)(function*($,j){const Z=yield j;return{verificationId:Z.verificationId,confirm:me=>ir($,Z.confirm(me))}})).apply(this,arguments)}class Wt{constructor(j,Z){this.resolver=Z,this.auth=j.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(j){return ir(Gi(this.auth),this.resolver.resolveSignIn(j))}}class Ze{constructor(j){this._delegate=j,this.multiFactor=F.an(j)}static getOrCreate(j){return Ze.USER_MAP.has(j)||Ze.USER_MAP.set(j,new Ze(j)),Ze.USER_MAP.get(j)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(j){return this._delegate.getIdTokenResult(j)}getIdToken(j){return this._delegate.getIdToken(j)}linkAndRetrieveDataWithCredential(j){return this.linkWithCredential(j)}linkWithCredential(j){var Z=this;return(0,a.Z)(function*(){return ir(Z.auth,F.Y(Z._delegate,j))})()}linkWithPhoneNumber(j,Z){var me=this;return(0,a.Z)(function*(){return on(me.auth,F.l(me._delegate,j,Z))})()}linkWithPopup(j){var Z=this;return(0,a.Z)(function*(){return ir(Z.auth,F.d(Z._delegate,j,mt))})()}linkWithRedirect(j){var Z=this;return(0,a.Z)(function*(){return yield gr(F.aC(Z.auth)),F.g(Z._delegate,j,mt)})()}reauthenticateAndRetrieveDataWithCredential(j){return this.reauthenticateWithCredential(j)}reauthenticateWithCredential(j){var Z=this;return(0,a.Z)(function*(){return ir(Z.auth,F.Z(Z._delegate,j))})()}reauthenticateWithPhoneNumber(j,Z){return on(this.auth,F.r(this._delegate,j,Z))}reauthenticateWithPopup(j){return ir(this.auth,F.e(this._delegate,j,mt))}reauthenticateWithRedirect(j){var Z=this;return(0,a.Z)(function*(){return yield gr(F.aC(Z.auth)),F.h(Z._delegate,j,mt)})()}sendEmailVerification(j){return F.aa(this._delegate,j)}unlink(j){var Z=this;return(0,a.Z)(function*(){return yield F.aj(Z._delegate,j),Z})()}updateEmail(j){return F.af(this._delegate,j)}updatePassword(j){return F.ag(this._delegate,j)}updatePhoneNumber(j){return F.u(this._delegate,j)}updateProfile(j){return F.ae(this._delegate,j)}verifyBeforeUpdateEmail(j,Z){return F.ab(this._delegate,j,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ze.USER_MAP=new WeakMap;const xe=F.aw;let ut=(()=>{class ${constructor(Z,me){if(this.app=Z,me.isInitialized())return this._delegate=me.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:He}=Z.options;xe(He,"invalid-api-key",{appName:Z.name}),xe(He,"invalid-api-key",{appName:Z.name});const pt="undefined"!=typeof window?mt:void 0;this._delegate=me.initialize({options:{persistence:kt(He,Z.name),popupRedirectResolver:pt}}),this._delegate._updateErrorMap(F.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ze.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,me){F.E(this._delegate,Z,me)}applyActionCode(Z){return F.a1(this._delegate,Z)}checkActionCode(Z){return F.a2(this._delegate,Z)}confirmPasswordReset(Z,me){return F.a0(this._delegate,Z,me)}createUserWithEmailAndPassword(Z,me){var He=this;return(0,a.Z)(function*(){return ir(He._delegate,F.a4(He._delegate,Z,me))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return F.a9(this._delegate,Z)}isSignInWithEmailLink(Z){return F.a7(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,a.Z)(function*(){xe(Le(),Z._delegate,"operation-not-supported-in-this-environment");const me=yield F.j(Z._delegate,mt);return me?ir(Z._delegate,Promise.resolve(me)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function($,j){(0,F.aC)($)._logFramework(j)}(this._delegate,Z)}onAuthStateChanged(Z,me,He){const{next:pt,error:Ct,complete:Qe}=Et(Z,me,He);return this._delegate.onAuthStateChanged(pt,Ct,Qe)}onIdTokenChanged(Z,me,He){const{next:pt,error:Ct,complete:Qe}=Et(Z,me,He);return this._delegate.onIdTokenChanged(pt,Ct,Qe)}sendSignInLinkToEmail(Z,me){return F.a6(this._delegate,Z,me)}sendPasswordResetEmail(Z,me){return F.$(this._delegate,Z,me||void 0)}setPersistence(Z){var me=this;return(0,a.Z)(function*(){let He;switch(function($,j){Wn(Object.values(Jn).includes(j),$,"invalid-persistence-type"),(0,se.b$)()?Wn(j!==Jn.SESSION,$,"unsupported-persistence-type"):(0,se.UG)()?Wn(j===Jn.NONE,$,"unsupported-persistence-type"):fr()?Wn(j===Jn.NONE||j===Jn.LOCAL&&(0,se.hl)(),$,"unsupported-persistence-type"):Wn(j===Jn.NONE||ii(),$,"unsupported-persistence-type")}(me._delegate,Z),Z){case Jn.SESSION:He=F.a;break;case Jn.LOCAL:He=(yield F.ax(F.i)._isAvailable())?F.i:F.b;break;case Jn.NONE:He=F.K;break;default:return F.as("argument-error",{appName:me._delegate.name})}return me._delegate.setPersistence(He)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return ir(this._delegate,F.W(this._delegate))}signInWithCredential(Z){return ir(this._delegate,F.X(this._delegate,Z))}signInWithCustomToken(Z){return ir(this._delegate,F._(this._delegate,Z))}signInWithEmailAndPassword(Z,me){return ir(this._delegate,F.a5(this._delegate,Z,me))}signInWithEmailLink(Z,me){return ir(this._delegate,F.a8(this._delegate,Z,me))}signInWithPhoneNumber(Z,me){return on(this._delegate,F.s(this._delegate,Z,me))}signInWithPopup(Z){var me=this;return(0,a.Z)(function*(){return xe(Le(),me._delegate,"operation-not-supported-in-this-environment"),ir(me._delegate,F.c(me._delegate,Z,mt))})()}signInWithRedirect(Z){var me=this;return(0,a.Z)(function*(){return xe(Le(),me._delegate,"operation-not-supported-in-this-environment"),yield gr(me._delegate),F.f(me._delegate,Z,mt)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return F.a3(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return $.Persistence=Jn,$})();function Et($,j,Z){let me=$;"function"!=typeof $&&({next:me,error:j,complete:Z}=$);const He=me;return{next:Ct=>He(Ct&&Ze.getOrCreate(Ct)),error:j,complete:Z}}function kt($,j){const Z=function($,j){const Z=yn();if(!Z)return[];const me=F.ay(si,$,j);switch(Z.getItem(me)){case Jn.NONE:return[F.K];case Jn.LOCAL:return[F.i,F.a];case Jn.SESSION:return[F.a];default:return[]}}($,j);if("undefined"!=typeof self&&!Z.includes(F.i)&&Z.push(F.i),"undefined"!=typeof window)for(const me of[F.b,F.a])Z.includes(me)||Z.push(me);return Z.includes(F.K)||Z.push(F.K),Z}class Jt{constructor(){this.providerId="phone",this._delegate=new F.P(Gi(G.Z.auth()))}static credential(j,Z){return F.P.credential(j,Z)}verifyPhoneNumber(j,Z){return this._delegate.verifyPhoneNumber(j,Z)}unwrap(){return this._delegate}}Jt.PHONE_SIGN_IN_METHOD=F.P.PHONE_SIGN_IN_METHOD,Jt.PROVIDER_ID=F.P.PROVIDER_ID;const J=F.aw;var $;($=G.Z).INTERNAL.registerComponent(new he.wA("auth-compat",j=>{const Z=j.getProvider("app-compat").getImmediate(),me=j.getProvider("auth");return new ut(Z,me)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:F.A.EMAIL_SIGNIN,PASSWORD_RESET:F.A.PASSWORD_RESET,RECOVER_EMAIL:F.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:F.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:F.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:F.A.VERIFY_EMAIL}},EmailAuthProvider:F.L,FacebookAuthProvider:F.M,GithubAuthProvider:F.Q,GoogleAuthProvider:F.N,OAuthProvider:F.T,SAMLAuthProvider:F.U,PhoneAuthProvider:Jt,PhoneMultiFactorGenerator:F.m,RecaptchaVerifier:class{constructor(j,Z,me=G.Z.app()){var He;J(null===(He=me.options)||void 0===He?void 0:He.apiKey,"invalid-api-key",{appName:me.name}),this._delegate=new F.R(j,Z,me.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:F.V,Auth:ut,AuthCredential:F.G,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),$.registerVersion("@firebase/auth-compat","0.2.12")},4994:st=>{"use strict";const we=fe=>"number"==typeof fe,B=Array.isArray;var G=(fe,de)=>((fe,de,Re)=>{const oe=fe.length;if(de>1)return Array(oe);if(1===de)return fe.slice();const pe=!B(de),Se=[];let Ve,We=0,Je=0;for(;We<oe;We++)if(Ve=fe[We],we(Ve)&&(pe||we(Ve))){Se[We]=Ve,Je=Ve,We++;break}if(!pe){for(;We<oe;We++)Ve=fe[We],we(Ve)&&we(de[We])?Je=Se[We]=de[We]*Ve+(1-de[We])*Je:Se[We]=Se[We-1];return Se}const bt=1-de;for(;We<oe;We++)Ve=fe[We],we(Ve)?Je=Se[We]=de*Ve+bt*Je:Se[We]=Se[We-1];return Se})(fe,2/(de+1));const F=fe=>{throw new Error(fe)},se=(fe,de,Re)=>(fe.length!==de.length&&F("the length of arrays not match"),fe.map((oe,pe)=>Re(oe,de[pe]))),ae=(fe,de,Re)=>fe.map(oe=>Re(oe,de)),ee=(fe,de)=>[fe,de].map(Array.isArray),he=fe=>{fe.forEach((de,Re)=>{de!=de&&delete fe[Re]})},U=(fe,de)=>fe-de;var z=(fe,de,Re)=>((fe,de,Re,oe)=>{const[pe,Se]=ee(fe,de),Ve=pe?Se?se(fe,de,Re):ae(fe,de,Re):F("the first argument must be an array");return oe&&he(Ve),Ve})(fe,de,U,Re);const H=(fe,de)=>fe*de;var ce=(fe,de,Re)=>((fe,de,Re,oe,pe)=>{const[Se,Ve]=ee(fe,de),We=Se?Ve?se(fe,de,Re):ae(fe,de,Re):Ve?ae(de,fe,oe):F("at least one array is required");return pe&&he(We),We})(fe,de,H,H,Re);st.exports=(fe,de=26,Re=12,oe=9)=>{const pe=z(G(fe,Re),G(fe,de),1),Se=G(pe,oe);return{MACD:pe,signal:Se,histogram:ce(2,z(pe,Se),1)}}},1593:(st,we,B)=>{"use strict";B.d(we,{P:()=>he});var a=B(9193),G=B(5917),F=B(7574);class he{constructor(Q,U,z){this.kind=Q,this.value=U,this.error=z,this.hasValue="N"===Q}observe(Q){switch(this.kind){case"N":return Q.next&&Q.next(this.value);case"E":return Q.error&&Q.error(this.error);case"C":return Q.complete&&Q.complete()}}do(Q,U,z){switch(this.kind){case"N":return Q&&Q(this.value);case"E":return U&&U(this.error);case"C":return z&&z()}}accept(Q,U,z){return Q&&"function"==typeof Q.next?this.observe(Q):this.do(Q,U,z)}toObservable(){switch(this.kind){case"N":return(0,G.of)(this.value);case"E":return X=this.error,new F.y(U=>U.error(X));case"C":return(0,a.c)()}var X;throw new Error("unexpected notification kind value")}static createNext(Q){return void 0!==Q?new he("N",Q):he.undefinedValueNotification}static createError(Q){return new he("E",void 0,Q)}static createComplete(){return he.completeNotification}}he.completeNotification=new he("C"),he.undefinedValueNotification=new he("N",void 0)},7574:(st,we,B)=>{"use strict";B.d(we,{y:()=>z});var a=B(7393),F=B(9181),se=B(6490),ee=B(6554),he=B(4487);var U=B(2494);let z=(()=>{class ce{constructor(fe){this._isScalar=!1,fe&&(this._subscribe=fe)}lift(fe){const de=new ce;return de.source=this,de.operator=fe,de}subscribe(fe,de,Re){const{operator:oe}=this,pe=function(ce,Me,fe){if(ce){if(ce instanceof a.L)return ce;if(ce[F.b])return ce[F.b]()}return ce||Me||fe?new a.L(ce,Me,fe):new a.L(se.c)}(fe,de,Re);if(pe.add(oe?oe.call(pe,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!pe.syncErrorThrowable?this._subscribe(pe):this._trySubscribe(pe)),U.v.useDeprecatedSynchronousErrorHandling&&pe.syncErrorThrowable&&(pe.syncErrorThrowable=!1,pe.syncErrorThrown))throw pe.syncErrorValue;return pe}_trySubscribe(fe){try{return this._subscribe(fe)}catch(de){U.v.useDeprecatedSynchronousErrorHandling&&(fe.syncErrorThrown=!0,fe.syncErrorValue=de),function(ce){for(;ce;){const{closed:Me,destination:fe,isStopped:de}=ce;if(Me||de)return!1;ce=fe&&fe instanceof a.L?fe:null}return!0}(fe)?fe.error(de):console.warn(de)}}forEach(fe,de){return new(de=H(de))((Re,oe)=>{let pe;pe=this.subscribe(Se=>{try{fe(Se)}catch(Ve){oe(Ve),pe&&pe.unsubscribe()}},oe,Re)})}_subscribe(fe){const{source:de}=this;return de&&de.subscribe(fe)}[ee.L](){return this}pipe(...fe){return 0===fe.length?this:function(ce){return 0===ce.length?he.y:1===ce.length?ce[0]:function(fe){return ce.reduce((de,Re)=>Re(de),fe)}}(fe)(this)}toPromise(fe){return new(fe=H(fe))((de,Re)=>{let oe;this.subscribe(pe=>oe=pe,pe=>Re(pe),()=>de(oe))})}}return ce.create=Me=>new ce(Me),ce})();function H(ce){if(ce||(ce=U.v.Promise||Promise),!ce)throw new Error("no Promise impl found");return ce}},6490:(st,we,B)=>{"use strict";B.d(we,{c:()=>F});var a=B(2494),G=B(4449);const F={closed:!0,next(se){},error(se){if(a.v.useDeprecatedSynchronousErrorHandling)throw se;(0,G.z)(se)},complete(){}}},9765:(st,we,B)=>{"use strict";B.d(we,{Yc:()=>he,xQ:()=>X});var a=B(7574),G=B(7393),F=B(5319),se=B(7971),ae=B(8858),ee=B(9181);class he extends G.L{constructor(z){super(z),this.destination=z}}let X=(()=>{class U extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new he(this)}lift(H){const ce=new Q(this,this);return ce.operator=H,ce}next(H){if(this.closed)throw new se.N;if(!this.isStopped){const{observers:ce}=this,Me=ce.length,fe=ce.slice();for(let de=0;de<Me;de++)fe[de].next(H)}}error(H){if(this.closed)throw new se.N;this.hasError=!0,this.thrownError=H,this.isStopped=!0;const{observers:ce}=this,Me=ce.length,fe=ce.slice();for(let de=0;de<Me;de++)fe[de].error(H);this.observers.length=0}complete(){if(this.closed)throw new se.N;this.isStopped=!0;const{observers:H}=this,ce=H.length,Me=H.slice();for(let fe=0;fe<ce;fe++)Me[fe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(H){if(this.closed)throw new se.N;return super._trySubscribe(H)}_subscribe(H){if(this.closed)throw new se.N;return this.hasError?(H.error(this.thrownError),F.w.EMPTY):this.isStopped?(H.complete(),F.w.EMPTY):(this.observers.push(H),new ae.W(this,H))}asObservable(){const H=new a.y;return H.source=this,H}}return U.create=(z,H)=>new Q(z,H),U})();class Q extends X{constructor(z,H){super(),this.destination=z,this.source=H}next(z){const{destination:H}=this;H&&H.next&&H.next(z)}error(z){const{destination:H}=this;H&&H.error&&this.destination.error(z)}complete(){const{destination:z}=this;z&&z.complete&&this.destination.complete()}_subscribe(z){const{source:H}=this;return H?this.source.subscribe(z):F.w.EMPTY}}},8858:(st,we,B)=>{"use strict";B.d(we,{W:()=>G});var a=B(5319);class G extends a.w{constructor(se,ae){super(),this.subject=se,this.subscriber=ae,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const se=this.subject,ae=se.observers;if(this.subject=null,!ae||0===ae.length||se.isStopped||se.closed)return;const ee=ae.indexOf(this.subscriber);-1!==ee&&ae.splice(ee,1)}}},7393:(st,we,B)=>{"use strict";B.d(we,{L:()=>he});var a=B(9105),G=B(6490),F=B(5319),se=B(9181),ae=B(2494),ee=B(4449);class he extends F.w{constructor(U,z,H){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=G.c;break;case 1:if(!U){this.destination=G.c;break}if("object"==typeof U){U instanceof he?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new X(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new X(this,U,z,H)}}[se.b](){return this}static create(U,z,H){const ce=new he(U,z,H);return ce.syncErrorThrowable=!1,ce}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class X extends he{constructor(U,z,H,ce){super(),this._parentSubscriber=U;let Me,fe=this;(0,a.m)(z)?Me=z:z&&(Me=z.next,H=z.error,ce=z.complete,z!==G.c&&(fe=Object.create(z),(0,a.m)(fe.unsubscribe)&&this.add(fe.unsubscribe.bind(fe)),fe.unsubscribe=this.unsubscribe.bind(this))),this._context=fe,this._next=Me,this._error=H,this._complete=ce}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:z}=this;ae.v.useDeprecatedSynchronousErrorHandling&&z.syncErrorThrowable?this.__tryOrSetError(z,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:z}=this,{useDeprecatedSynchronousErrorHandling:H}=ae.v;if(this._error)H&&z.syncErrorThrowable?(this.__tryOrSetError(z,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if(z.syncErrorThrowable)H?(z.syncErrorValue=U,z.syncErrorThrown=!0):(0,ee.z)(U),this.unsubscribe();else{if(this.unsubscribe(),H)throw U;(0,ee.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const z=()=>this._complete.call(this._context);ae.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,z),this.unsubscribe()):(this.__tryOrUnsub(z),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,z){try{U.call(this._context,z)}catch(H){if(this.unsubscribe(),ae.v.useDeprecatedSynchronousErrorHandling)throw H;(0,ee.z)(H)}}__tryOrSetError(U,z,H){if(!ae.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{z.call(this._context,H)}catch(ce){return ae.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=ce,U.syncErrorThrown=!0,!0):((0,ee.z)(ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(st,we,B)=>{"use strict";B.d(we,{w:()=>ee});var a=B(9796),G=B(1555),F=B(9105);const ae=(()=>{function X(Q){return Error.call(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((U,z)=>`${z+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q,this}return X.prototype=Object.create(Error.prototype),X})();class ee{constructor(Q){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,Q&&(this._ctorUnsubscribe=!0,this._unsubscribe=Q)}unsubscribe(){let Q;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:z,_unsubscribe:H,_subscriptions:ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof ee)U.remove(this);else if(null!==U)for(let Me=0;Me<U.length;++Me)U[Me].remove(this);if((0,F.m)(H)){z&&(this._unsubscribe=void 0);try{H.call(this)}catch(Me){Q=Me instanceof ae?he(Me.errors):[Me]}}if((0,a.k)(ce)){let Me=-1,fe=ce.length;for(;++Me<fe;){const de=ce[Me];if((0,G.K)(de))try{de.unsubscribe()}catch(Re){Q=Q||[],Re instanceof ae?Q=Q.concat(he(Re.errors)):Q.push(Re)}}}if(Q)throw new ae(Q)}add(Q){let U=Q;if(!Q)return ee.EMPTY;switch(typeof Q){case"function":U=new ee(Q);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof ee)){const ce=U;U=new ee,U._subscriptions=[ce]}break;default:throw new Error("unrecognized teardown "+Q+" added to Subscription.")}let{_parentOrParents:z}=U;if(null===z)U._parentOrParents=this;else if(z instanceof ee){if(z===this)return U;U._parentOrParents=[z,this]}else{if(-1!==z.indexOf(this))return U;z.push(this)}const H=this._subscriptions;return null===H?this._subscriptions=[U]:H.push(U),U}remove(Q){const U=this._subscriptions;if(U){const z=U.indexOf(Q);-1!==z&&U.splice(z,1)}}}var X;function he(X){return X.reduce((Q,U)=>Q.concat(U instanceof ae?U.errors:U),[])}ee.EMPTY=((X=new ee).closed=!0,X)},2494:(st,we,B)=>{"use strict";B.d(we,{v:()=>G});let a=!1;const G={Promise:void 0,set useDeprecatedSynchronousErrorHandling(F){if(F){const se=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+se.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=F},get useDeprecatedSynchronousErrorHandling(){return a}}},5345:(st,we,B)=>{"use strict";B.d(we,{IY:()=>se,Ds:()=>ee,ft:()=>X});var a=B(7393),G=B(7574),F=B(7444);class se extends a.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends a.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function X(Q,U){if(U.closed)return;if(Q instanceof G.y)return Q.subscribe(U);let z;try{z=(0,F.s)(Q)(U)}catch(H){U.error(H)}return z}},2441:(st,we,B)=>{"use strict";B.d(we,{c:()=>ae,N:()=>ee});var a=B(9765),G=B(7574),F=B(5319),se=B(1307);class ae extends G.y{constructor(z,H){super(),this.source=z,this.subjectFactory=H,this._refCount=0,this._isComplete=!1}_subscribe(z){return this.getSubject().subscribe(z)}getSubject(){const z=this._subject;return(!z||z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let z=this._connection;return z||(this._isComplete=!1,z=this._connection=new F.w,z.add(this.source.subscribe(new he(this.getSubject(),this))),z.closed&&(this._connection=null,z=F.w.EMPTY)),z}refCount(){return(0,se.x)()(this)}}const ee=(()=>{const U=ae.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class he extends a.Yc{constructor(z,H){super(z),this.connectable=H}_error(z){this._unsubscribe(),super._error(z)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const z=this.connectable;if(z){this.connectable=null;const H=z._connection;z._refCount=0,z._subject=null,z._connection=null,H&&H.unsubscribe()}}}},9193:(st,we,B)=>{"use strict";B.d(we,{E:()=>G,c:()=>F});var a=B(7574);const G=new a.y(ae=>ae.complete());function F(ae){return ae?function(ae){return new a.y(ee=>ae.schedule(()=>ee.complete()))}(ae):G}},4402:(st,we,B)=>{"use strict";B.d(we,{D:()=>fe});var a=B(7574),G=B(7444),F=B(5319),se=B(6554),he=B(4087),X=B(377),z=B(4072),H=B(9489);function fe(de,Re){return Re?function(de,Re){if(null!=de){if(function(de){return de&&"function"==typeof de[se.L]}(de))return function(de,Re){return new a.y(oe=>{const pe=new F.w;return pe.add(Re.schedule(()=>{const Se=de[se.L]();pe.add(Se.subscribe({next(Ve){pe.add(Re.schedule(()=>oe.next(Ve)))},error(Ve){pe.add(Re.schedule(()=>oe.error(Ve)))},complete(){pe.add(Re.schedule(()=>oe.complete()))}}))})),pe})}(de,Re);if((0,z.t)(de))return function(de,Re){return new a.y(oe=>{const pe=new F.w;return pe.add(Re.schedule(()=>de.then(Se=>{pe.add(Re.schedule(()=>{oe.next(Se),pe.add(Re.schedule(()=>oe.complete()))}))},Se=>{pe.add(Re.schedule(()=>oe.error(Se)))}))),pe})}(de,Re);if((0,H.z)(de))return(0,he.r)(de,Re);if(function(de){return de&&"function"==typeof de[X.hZ]}(de)||"string"==typeof de)return function(de,Re){if(!de)throw new Error("Iterable cannot be null");return new a.y(oe=>{const pe=new F.w;let Se;return pe.add(()=>{Se&&"function"==typeof Se.return&&Se.return()}),pe.add(Re.schedule(()=>{Se=de[X.hZ](),pe.add(Re.schedule(function(){if(oe.closed)return;let Ve,We;try{const Je=Se.next();Ve=Je.value,We=Je.done}catch(Je){return void oe.error(Je)}We?oe.complete():(oe.next(Ve),this.schedule())}))})),pe})}(de,Re)}throw new TypeError((null!==de&&typeof de||de)+" is not observable")}(de,Re):de instanceof a.y?de:new a.y((0,G.s)(de))}},6693:(st,we,B)=>{"use strict";B.d(we,{n:()=>se});var a=B(7574),G=B(5015),F=B(4087);function se(ae,ee){return ee?(0,F.r)(ae,ee):new a.y((0,G.V)(ae))}},6682:(st,we,B)=>{"use strict";B.d(we,{T:()=>ae});var a=B(7574),G=B(4869),F=B(3282),se=B(6693);function ae(...ee){let he=Number.POSITIVE_INFINITY,X=null,Q=ee[ee.length-1];return(0,G.K)(Q)?(X=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(he=ee.pop())):"number"==typeof Q&&(he=ee.pop()),null===X&&1===ee.length&&ee[0]instanceof a.y?ee[0]:(0,F.J)(he)((0,se.n)(ee,X))}},5917:(st,we,B)=>{"use strict";B.d(we,{of:()=>se});var a=B(4869),G=B(6693),F=B(4087);function se(...ae){let ee=ae[ae.length-1];return(0,a.K)(ee)?(ae.pop(),(0,F.r)(ae,ee)):(0,G.n)(ae)}},8002:(st,we,B)=>{"use strict";B.d(we,{U:()=>G});var a=B(7393);function G(ae,ee){return function(X){if("function"!=typeof ae)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return X.lift(new F(ae,ee))}}class F{constructor(ee,he){this.project=ee,this.thisArg=he}call(ee,he){return he.subscribe(new se(ee,this.project,this.thisArg))}}class se extends a.L{constructor(ee,he,X){super(ee),this.project=he,this.count=0,this.thisArg=X||this}_next(ee){let he;try{he=this.project.call(this.thisArg,ee,this.count++)}catch(X){return void this.destination.error(X)}this.destination.next(he)}}},3282:(st,we,B)=>{"use strict";B.d(we,{J:()=>F});var a=B(9773),G=B(4487);function F(se=Number.POSITIVE_INFINITY){return(0,a.zg)(G.y,se)}},9773:(st,we,B)=>{"use strict";B.d(we,{zg:()=>se});var a=B(8002),G=B(4402),F=B(5345);function se(X,Q,U=Number.POSITIVE_INFINITY){return"function"==typeof Q?z=>z.pipe(se((H,ce)=>(0,G.D)(X(H,ce)).pipe((0,a.U)((Me,fe)=>Q(H,Me,ce,fe))),U)):("number"==typeof Q&&(U=Q),z=>z.lift(new ae(X,U)))}class ae{constructor(Q,U=Number.POSITIVE_INFINITY){this.project=Q,this.concurrent=U}call(Q,U){return U.subscribe(new ee(Q,this.project,this.concurrent))}}class ee extends F.Ds{constructor(Q,U,z=Number.POSITIVE_INFINITY){super(Q),this.project=U,this.concurrent=z,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(Q){this.active<this.concurrent?this._tryNext(Q):this.buffer.push(Q)}_tryNext(Q){let U;const z=this.index++;try{U=this.project(Q,z)}catch(H){return void this.destination.error(H)}this.active++,this._innerSub(U)}_innerSub(Q){const U=new F.IY(this),z=this.destination;z.add(U);const H=(0,F.ft)(Q,U);H!==U&&z.add(H)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(Q){this.destination.next(Q)}notifyComplete(){const Q=this.buffer;this.active--,Q.length>0?this._next(Q.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:(st,we,B)=>{"use strict";B.d(we,{QV:()=>F,ht:()=>ae});var a=B(7393),G=B(1593);function F(he,X=0){return function(U){return U.lift(new se(he,X))}}class se{constructor(X,Q=0){this.scheduler=X,this.delay=Q}call(X,Q){return Q.subscribe(new ae(X,this.scheduler,this.delay))}}class ae extends a.L{constructor(X,Q,U=0){super(X),this.scheduler=Q,this.delay=U}static dispatch(X){const{notification:Q,destination:U}=X;Q.observe(U),this.unsubscribe()}scheduleMessage(X){this.destination.add(this.scheduler.schedule(ae.dispatch,this.delay,new ee(X,this.destination)))}_next(X){this.scheduleMessage(G.P.createNext(X))}_error(X){this.scheduleMessage(G.P.createError(X)),this.unsubscribe()}_complete(){this.scheduleMessage(G.P.createComplete()),this.unsubscribe()}}class ee{constructor(X,Q){this.notification=X,this.destination=Q}}},1307:(st,we,B)=>{"use strict";B.d(we,{x:()=>G});var a=B(7393);function G(){return function(ee){return ee.lift(new F(ee))}}class F{constructor(ee){this.connectable=ee}call(ee,he){const{connectable:X}=this;X._refCount++;const Q=new se(ee,X),U=he.subscribe(Q);return Q.closed||(Q.connection=X.connect()),U}}class se extends a.L{constructor(ee,he){super(ee),this.connectable=he}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const he=ee._refCount;if(he<=0)return void(this.connection=null);if(ee._refCount=he-1,he>1)return void(this.connection=null);const{connection:X}=this,Q=ee._connection;this.connection=null,Q&&(!X||Q===X)&&Q.unsubscribe()}}},8819:(st,we,B)=>{"use strict";B.d(we,{B:()=>he});var a=B(2441);var se=B(1307),ae=B(9765);function ee(){return new ae.xQ}function he(){return X=>(0,se.x)()(function(X,Q){return function(z){let H;H="function"==typeof X?X:function(){return X};const ce=Object.create(z,a.N);return ce.source=z,ce.subjectFactory=H,ce}}(ee)(X))}},2639:(st,we,B)=>{"use strict";B.d(we,{R:()=>de});var a=B(7574);let G=1;const F=Promise.resolve(),se={};function ae(oe){return oe in se&&(delete se[oe],!0)}const ee={setImmediate(oe){const pe=G++;return se[pe]=!0,F.then(()=>ae(pe)&&oe()),pe},clearImmediate(oe){ae(oe)}};var X=B(6465),U=B(6102);const ce=new class extends U.v{flush(pe){this.active=!0,this.scheduled=void 0;const{actions:Se}=this;let Ve,We=-1,Je=Se.length;pe=pe||Se.shift();do{if(Ve=pe.execute(pe.state,pe.delay))break}while(++We<Je&&(pe=Se.shift()));if(this.active=!1,Ve){for(;++We<Je&&(pe=Se.shift());)pe.unsubscribe();throw Ve}}}(class extends X.o{constructor(pe,Se){super(pe,Se),this.scheduler=pe,this.work=Se}requestAsyncId(pe,Se,Ve=0){return null!==Ve&&Ve>0?super.requestAsyncId(pe,Se,Ve):(pe.actions.push(this),pe.scheduled||(pe.scheduled=ee.setImmediate(pe.flush.bind(pe,null))))}recycleAsyncId(pe,Se,Ve=0){if(null!==Ve&&Ve>0||null===Ve&&this.delay>0)return super.recycleAsyncId(pe,Se,Ve);0===pe.actions.length&&(ee.clearImmediate(Se),pe.scheduled=void 0)}});var Me=B(6561);class fe extends a.y{constructor(pe,Se=0,Ve=ce){super(),this.source=pe,this.delayTime=Se,this.scheduler=Ve,(!(0,Me.k)(Se)||Se<0)&&(this.delayTime=0),(!Ve||"function"!=typeof Ve.schedule)&&(this.scheduler=ce)}static create(pe,Se=0,Ve=ce){return new fe(pe,Se,Ve)}static dispatch(pe){const{source:Se,subscriber:Ve}=pe;return this.add(Se.subscribe(Ve))}_subscribe(pe){return this.scheduler.schedule(fe.dispatch,this.delayTime,{source:this.source,subscriber:pe})}}function de(oe,pe=0){return function(Ve){return Ve.lift(new Re(oe,pe))}}class Re{constructor(pe,Se){this.scheduler=pe,this.delay=Se}call(pe,Se){return new fe(Se,this.delay,this.scheduler).subscribe(pe)}}},8307:(st,we,B)=>{"use strict";B.d(we,{b:()=>se});var a=B(7393),G=B(8640),F=B(9105);function se(he,X,Q){return function(z){return z.lift(new ae(he,X,Q))}}class ae{constructor(X,Q,U){this.nextOrObserver=X,this.error=Q,this.complete=U}call(X,Q){return Q.subscribe(new ee(X,this.nextOrObserver,this.error,this.complete))}}class ee extends a.L{constructor(X,Q,U,z){super(X),this._tapNext=G.Z,this._tapError=G.Z,this._tapComplete=G.Z,this._tapError=U||G.Z,this._tapComplete=z||G.Z,(0,F.m)(Q)?(this._context=this,this._tapNext=Q):Q&&(this._context=Q,this._tapNext=Q.next||G.Z,this._tapError=Q.error||G.Z,this._tapComplete=Q.complete||G.Z)}_next(X){try{this._tapNext.call(this._context,X)}catch(Q){return void this.destination.error(Q)}this.destination.next(X)}_error(X){try{this._tapError.call(this._context,X)}catch(Q){return void this.destination.error(Q)}this.destination.error(X)}_complete(){try{this._tapComplete.call(this._context)}catch(X){return void this.destination.error(X)}return this.destination.complete()}}},4087:(st,we,B)=>{"use strict";B.d(we,{r:()=>F});var a=B(7574),G=B(5319);function F(se,ae){return new a.y(ee=>{const he=new G.w;let X=0;return he.add(ae.schedule(function(){X!==se.length?(ee.next(se[X++]),ee.closed||he.add(this.schedule())):ee.complete()})),he})}},6465:(st,we,B)=>{"use strict";B.d(we,{o:()=>F});var a=B(5319);class G extends a.w{constructor(ae,ee){super()}schedule(ae,ee=0){return this}}class F extends G{constructor(ae,ee){super(ae,ee),this.scheduler=ae,this.work=ee,this.pending=!1}schedule(ae,ee=0){if(this.closed)return this;this.state=ae;const he=this.id,X=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(X,he,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(X,this.id,ee),this}requestAsyncId(ae,ee,he=0){return setInterval(ae.flush.bind(ae,this),he)}recycleAsyncId(ae,ee,he=0){if(null!==he&&this.delay===he&&!1===this.pending)return ee;clearInterval(ee)}execute(ae,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ae,ee);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ae,ee){let X,he=!1;try{this.work(ae)}catch(Q){he=!0,X=!!Q&&Q||new Error(Q)}if(he)return this.unsubscribe(),X}_unsubscribe(){const ae=this.id,ee=this.scheduler,he=ee.actions,X=he.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==X&&he.splice(X,1),null!=ae&&(this.id=this.recycleAsyncId(ee,ae,null)),this.delay=null}}},6102:(st,we,B)=>{"use strict";B.d(we,{v:()=>G});let a=(()=>{class F{constructor(ae,ee=F.now){this.SchedulerAction=ae,this.now=ee}schedule(ae,ee=0,he){return new this.SchedulerAction(this,ae).schedule(he,ee)}}return F.now=()=>Date.now(),F})();class G extends a{constructor(se,ae=a.now){super(se,()=>G.delegate&&G.delegate!==this?G.delegate.now():ae()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(se,ae=0,ee){return G.delegate&&G.delegate!==this?G.delegate.schedule(se,ae,ee):super.schedule(se,ae,ee)}flush(se){const{actions:ae}=this;if(this.active)return void ae.push(se);let ee;this.active=!0;do{if(ee=se.execute(se.state,se.delay))break}while(se=ae.shift());if(this.active=!1,ee){for(;se=ae.shift();)se.unsubscribe();throw ee}}}},3637:(st,we,B)=>{"use strict";B.d(we,{z:()=>F,P:()=>se});var a=B(6465);const F=new(B(6102).v)(a.o),se=F},7771:(st,we,B)=>{"use strict";B.d(we,{c:()=>ee,N:()=>ae});var a=B(6465),F=B(6102);const ae=new class extends F.v{}(class extends a.o{constructor(X,Q){super(X,Q),this.scheduler=X,this.work=Q}schedule(X,Q=0){return Q>0?super.schedule(X,Q):(this.delay=Q,this.state=X,this.scheduler.flush(this),this)}execute(X,Q){return Q>0||this.closed?super.execute(X,Q):this._execute(X,Q)}requestAsyncId(X,Q,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(X,Q,U):X.flush(this)}}),ee=ae},377:(st,we,B)=>{"use strict";B.d(we,{hZ:()=>G});const G="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(st,we,B)=>{"use strict";B.d(we,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(st,we,B)=>{"use strict";B.d(we,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(st,we,B)=>{"use strict";B.d(we,{N:()=>G});const G=(()=>{function F(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return F.prototype=Object.create(Error.prototype),F})()},4449:(st,we,B)=>{"use strict";function a(G){setTimeout(()=>{throw G},0)}B.d(we,{z:()=>a})},4487:(st,we,B)=>{"use strict";function a(G){return G}B.d(we,{y:()=>a})},9796:(st,we,B)=>{"use strict";B.d(we,{k:()=>a});const a=Array.isArray||(G=>G&&"number"==typeof G.length)},9489:(st,we,B)=>{"use strict";B.d(we,{z:()=>a});const a=G=>G&&"number"==typeof G.length&&"function"!=typeof G},9105:(st,we,B)=>{"use strict";function a(G){return"function"==typeof G}B.d(we,{m:()=>a})},6561:(st,we,B)=>{"use strict";B.d(we,{k:()=>G});var a=B(9796);function G(F){return!(0,a.k)(F)&&F-parseFloat(F)+1>=0}},1555:(st,we,B)=>{"use strict";function a(G){return null!==G&&"object"==typeof G}B.d(we,{K:()=>a})},4072:(st,we,B)=>{"use strict";function a(G){return!!G&&"function"!=typeof G.subscribe&&"function"==typeof G.then}B.d(we,{t:()=>a})},4869:(st,we,B)=>{"use strict";function a(G){return G&&"function"==typeof G.schedule}B.d(we,{K:()=>a})},8640:(st,we,B)=>{"use strict";function a(){}B.d(we,{Z:()=>a})},7444:(st,we,B)=>{"use strict";B.d(we,{s:()=>z});var a=B(5015),G=B(4449),se=B(377),ee=B(6554),X=B(9489),Q=B(4072),U=B(1555);const z=H=>{if(H&&"function"==typeof H[ee.L])return(H=>ce=>{const Me=H[ee.L]();if("function"!=typeof Me.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Me.subscribe(ce)})(H);if((0,X.z)(H))return(0,a.V)(H);if((0,Q.t)(H))return(H=>ce=>(H.then(Me=>{ce.closed||(ce.next(Me),ce.complete())},Me=>ce.error(Me)).then(null,G.z),ce))(H);if(H&&"function"==typeof H[se.hZ])return(H=>ce=>{const Me=H[se.hZ]();for(;;){let fe;try{fe=Me.next()}catch(de){return ce.error(de),ce}if(fe.done){ce.complete();break}if(ce.next(fe.value),ce.closed)break}return"function"==typeof Me.return&&ce.add(()=>{Me.return&&Me.return()}),ce})(H);{const Me=`You provided ${(0,U.K)(H)?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Me)}}},5015:(st,we,B)=>{"use strict";B.d(we,{V:()=>a});const a=G=>F=>{for(let se=0,ae=G.length;se<ae&&!F.closed;se++)F.next(G[se]);F.complete()}},1437:(st,we,B)=>{"use strict";var a=B(7716);let G=null;function F(){return G}const he=new a.OlP("DocumentToken");let X=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:Q,token:n,providedIn:"platform"}),n})();function Q(){return(0,a.LFG)(z)}const U=new a.OlP("Location Initialized");let z=(()=>{class n extends X{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(e){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,i){H()?this._history.pushState(e,r,i):this.location.hash=i}replaceState(e,r,i){H()?this._history.replaceState(e,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(he))},n.\u0275prov=(0,a.Yz7)({factory:ce,token:n,providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function ce(){return new z((0,a.LFG)(he))}function Me(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function fe(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function de(n){return n&&"?"!==n[0]?"?"+n:n}let Re=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=(0,a.Yz7)({factory:oe,token:n,providedIn:"root"}),n})();function oe(n){const t=(0,a.LFG)(he).location;return new Se((0,a.LFG)(X),t&&t.origin||"")}const pe=new a.OlP("appBaseHref");let Se=(()=>{class n extends Re{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Me(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+de(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,l){const d=this.prepareExternalUrl(i+de(l));this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){const d=this.prepareExternalUrl(i+de(l));this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(X),a.LFG(pe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Ve=(()=>{class n extends Re{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=Me(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,l){let d=this.prepareExternalUrl(i+de(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(e,r,d)}replaceState(e,r,i,l){let d=this.prepareExternalUrl(i+de(l));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(X),a.LFG(pe,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),We=(()=>{class n{constructor(e,r){this._subject=new a.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=fe(ft(i)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+de(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,ft(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._platformStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+de(r)),i)}replaceState(e,r="",i=null){this._platformStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+de(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r,complete:i})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Re),a.LFG(X))},n.normalizeQueryParams=de,n.joinWithSlash=Me,n.stripTrailingSlash=fe,n.\u0275prov=(0,a.Yz7)({factory:Je,token:n,providedIn:"root"}),n})();function Je(){return new We((0,a.LFG)(Re),(0,a.LFG)(X))}function ft(n){return n.replace(/\/index.html$/,"")}var Ie=(()=>((Ie=Ie||{})[Ie.Zero=0]="Zero",Ie[Ie.One=1]="One",Ie[Ie.Two=2]="Two",Ie[Ie.Few=3]="Few",Ie[Ie.Many=4]="Many",Ie[Ie.Other=5]="Other",Ie))(),je=(()=>((je=je||{})[je.Format=0]="Format",je[je.Standalone=1]="Standalone",je))(),Ce=(()=>((Ce=Ce||{})[Ce.Narrow=0]="Narrow",Ce[Ce.Abbreviated=1]="Abbreviated",Ce[Ce.Wide=2]="Wide",Ce[Ce.Short=3]="Short",Ce))(),qe=(()=>((qe=qe||{})[qe.Short=0]="Short",qe[qe.Medium=1]="Medium",qe[qe.Long=2]="Long",qe[qe.Full=3]="Full",qe))(),Ne=(()=>((Ne=Ne||{})[Ne.Decimal=0]="Decimal",Ne[Ne.Group=1]="Group",Ne[Ne.List=2]="List",Ne[Ne.PercentSign=3]="PercentSign",Ne[Ne.PlusSign=4]="PlusSign",Ne[Ne.MinusSign=5]="MinusSign",Ne[Ne.Exponential=6]="Exponential",Ne[Ne.SuperscriptingExponent=7]="SuperscriptingExponent",Ne[Ne.PerMille=8]="PerMille",Ne[Ne.Infinity=9]="Infinity",Ne[Ne.NaN=10]="NaN",Ne[Ne.TimeSeparator=11]="TimeSeparator",Ne[Ne.CurrencyDecimal=12]="CurrencyDecimal",Ne[Ne.CurrencyGroup=13]="CurrencyGroup",Ne))();function Kn(n,t){return bn((0,a.cg1)(n)[a.wAp.DateFormat],t)}function wt(n,t){return bn((0,a.cg1)(n)[a.wAp.TimeFormat],t)}function rr(n,t){return bn((0,a.cg1)(n)[a.wAp.DateTimeFormat],t)}function dn(n,t){const e=(0,a.cg1)(n),r=e[a.wAp.NumberSymbols][t];if(void 0===r){if(t===Ne.CurrencyDecimal)return e[a.wAp.NumberSymbols][Ne.Decimal];if(t===Ne.CurrencyGroup)return e[a.wAp.NumberSymbols][Ne.Group]}return r}const fr=a.kL8;function Le(n){if(!n[a.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[a.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bn(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function Jn(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const gr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Un={},ba=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var yn=(()=>((yn=yn||{})[yn.Short=0]="Short",yn[yn.ShortGMT=1]="ShortGMT",yn[yn.Long=2]="Long",yn[yn.Extended=3]="Extended",yn))(),ze=(()=>((ze=ze||{})[ze.FullYear=0]="FullYear",ze[ze.Month=1]="Month",ze[ze.Date=2]="Date",ze[ze.Hours=3]="Hours",ze[ze.Minutes=4]="Minutes",ze[ze.Seconds=5]="Seconds",ze[ze.FractionalSeconds=6]="FractionalSeconds",ze[ze.Day=7]="Day",ze))(),mt=(()=>((mt=mt||{})[mt.DayPeriods=0]="DayPeriods",mt[mt.Days=1]="Days",mt[mt.Months=2]="Months",mt[mt.Eras=3]="Eras",mt))();function Gi(n,t,e,r){let i=function(n){if(pt(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,l=1,d=1]=n.split("-").map(f=>+f);return ls(i,l-1,d)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(gr))return function(n){const t=new Date(0);let e=0,r=0;const i=n[8]?t.setUTCFullYear:t.setFullYear,l=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const d=Number(n[4]||0)-e,f=Number(n[5]||0)-r,m=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return l.call(t,d,f,m,b),t}(r)}const t=new Date(n);if(!pt(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=fn(e,t)||t;let f,d=[];for(;t;){if(f=ba.exec(t),!f){d.push(t);break}{d=d.concat(f.slice(1));const T=d.pop();if(!T)break;t=T}}let m=i.getTimezoneOffset();r&&(m=$(r,m),i=function(n,t,e){const i=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*($(t,i)-i))}(i,r));let b="";return d.forEach(T=>{const A=function(n){if(ne[n])return ne[n];let t;switch(n){case"G":case"GG":case"GGG":t=Wt(mt.Eras,Ce.Abbreviated);break;case"GGGG":t=Wt(mt.Eras,Ce.Wide);break;case"GGGGG":t=Wt(mt.Eras,Ce.Narrow);break;case"y":t=on(ze.FullYear,1,0,!1,!0);break;case"yy":t=on(ze.FullYear,2,0,!0,!0);break;case"yyy":t=on(ze.FullYear,3,0,!1,!0);break;case"yyyy":t=on(ze.FullYear,4,0,!1,!0);break;case"Y":t=Y(1);break;case"YY":t=Y(2,!0);break;case"YYY":t=Y(3);break;case"YYYY":t=Y(4);break;case"M":case"L":t=on(ze.Month,1,1);break;case"MM":case"LL":t=on(ze.Month,2,1);break;case"MMM":t=Wt(mt.Months,Ce.Abbreviated);break;case"MMMM":t=Wt(mt.Months,Ce.Wide);break;case"MMMMM":t=Wt(mt.Months,Ce.Narrow);break;case"LLL":t=Wt(mt.Months,Ce.Abbreviated,je.Standalone);break;case"LLLL":t=Wt(mt.Months,Ce.Wide,je.Standalone);break;case"LLLLL":t=Wt(mt.Months,Ce.Narrow,je.Standalone);break;case"w":t=J(1);break;case"ww":t=J(2);break;case"W":t=J(1,!0);break;case"d":t=on(ze.Date,1);break;case"dd":t=on(ze.Date,2);break;case"c":case"cc":t=on(ze.Day,1);break;case"ccc":t=Wt(mt.Days,Ce.Abbreviated,je.Standalone);break;case"cccc":t=Wt(mt.Days,Ce.Wide,je.Standalone);break;case"ccccc":t=Wt(mt.Days,Ce.Narrow,je.Standalone);break;case"cccccc":t=Wt(mt.Days,Ce.Short,je.Standalone);break;case"E":case"EE":case"EEE":t=Wt(mt.Days,Ce.Abbreviated);break;case"EEEE":t=Wt(mt.Days,Ce.Wide);break;case"EEEEE":t=Wt(mt.Days,Ce.Narrow);break;case"EEEEEE":t=Wt(mt.Days,Ce.Short);break;case"a":case"aa":case"aaa":t=Wt(mt.DayPeriods,Ce.Abbreviated);break;case"aaaa":t=Wt(mt.DayPeriods,Ce.Wide);break;case"aaaaa":t=Wt(mt.DayPeriods,Ce.Narrow);break;case"b":case"bb":case"bbb":t=Wt(mt.DayPeriods,Ce.Abbreviated,je.Standalone,!0);break;case"bbbb":t=Wt(mt.DayPeriods,Ce.Wide,je.Standalone,!0);break;case"bbbbb":t=Wt(mt.DayPeriods,Ce.Narrow,je.Standalone,!0);break;case"B":case"BB":case"BBB":t=Wt(mt.DayPeriods,Ce.Abbreviated,je.Format,!0);break;case"BBBB":t=Wt(mt.DayPeriods,Ce.Wide,je.Format,!0);break;case"BBBBB":t=Wt(mt.DayPeriods,Ce.Narrow,je.Format,!0);break;case"h":t=on(ze.Hours,1,-12);break;case"hh":t=on(ze.Hours,2,-12);break;case"H":t=on(ze.Hours,1);break;case"HH":t=on(ze.Hours,2);break;case"m":t=on(ze.Minutes,1);break;case"mm":t=on(ze.Minutes,2);break;case"s":t=on(ze.Seconds,1);break;case"ss":t=on(ze.Seconds,2);break;case"S":t=on(ze.FractionalSeconds,1);break;case"SS":t=on(ze.FractionalSeconds,2);break;case"SSS":t=on(ze.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=xe(yn.Short);break;case"ZZZZZ":t=xe(yn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=xe(yn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=xe(yn.Long);break;default:return null}return ne[n]=t,t}(T);b+=A?A(i,e,m):"''"===T?"'":T.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function ls(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function fn(n,t){const e=function(n){return(0,a.cg1)(n)[a.wAp.LocaleId]}(n);if(Un[e]=Un[e]||{},Un[e][t])return Un[e][t];let r="";switch(t){case"shortDate":r=Kn(n,qe.Short);break;case"mediumDate":r=Kn(n,qe.Medium);break;case"longDate":r=Kn(n,qe.Long);break;case"fullDate":r=Kn(n,qe.Full);break;case"shortTime":r=wt(n,qe.Short);break;case"mediumTime":r=wt(n,qe.Medium);break;case"longTime":r=wt(n,qe.Long);break;case"fullTime":r=wt(n,qe.Full);break;case"short":const i=fn(n,"shortTime"),l=fn(n,"shortDate");r=At(rr(n,qe.Short),[i,l]);break;case"medium":const d=fn(n,"mediumTime"),f=fn(n,"mediumDate");r=At(rr(n,qe.Medium),[d,f]);break;case"long":const m=fn(n,"longTime"),b=fn(n,"longDate");r=At(rr(n,qe.Long),[m,b]);break;case"full":const T=fn(n,"fullTime"),A=fn(n,"fullDate");r=At(rr(n,qe.Full),[T,A])}return r&&(Un[e][t]=r),r}function At(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function Ir(n,t,e="-",r,i){let l="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,l=e));let d=String(n);for(;d.length<t;)d="0"+d;return r&&(d=d.substr(d.length-t)),l+d}function on(n,t,e=0,r=!1,i=!1){return function(l,d){let f=function(n,t){switch(n){case ze.FullYear:return t.getFullYear();case ze.Month:return t.getMonth();case ze.Date:return t.getDate();case ze.Hours:return t.getHours();case ze.Minutes:return t.getMinutes();case ze.Seconds:return t.getSeconds();case ze.FractionalSeconds:return t.getMilliseconds();case ze.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,l);if((e>0||f>-e)&&(f+=e),n===ze.Hours)0===f&&-12===e&&(f=12);else if(n===ze.FractionalSeconds)return function(n,t){return Ir(n,3).substr(0,t)}(f,t);const m=dn(d,Ne.MinusSign);return Ir(f,t,m,r,i)}}function Wt(n,t,e=je.Format,r=!1){return function(i,l){return function(n,t,e,r,i,l){switch(e){case mt.Months:return function(n,t,e){const r=(0,a.cg1)(n),l=bn([r[a.wAp.MonthsFormat],r[a.wAp.MonthsStandalone]],t);return bn(l,e)}(t,i,r)[n.getMonth()];case mt.Days:return function(n,t,e){const r=(0,a.cg1)(n),l=bn([r[a.wAp.DaysFormat],r[a.wAp.DaysStandalone]],t);return bn(l,e)}(t,i,r)[n.getDay()];case mt.DayPeriods:const d=n.getHours(),f=n.getMinutes();if(l){const b=function(n){const t=(0,a.cg1)(n);return Le(t),(t[a.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?Jn(r):[Jn(r[0]),Jn(r[1])])}(t),T=function(n,t,e){const r=(0,a.cg1)(n);Le(r);const l=bn([r[a.wAp.ExtraData][0],r[a.wAp.ExtraData][1]],t)||[];return bn(l,e)||[]}(t,i,r),A=b.findIndex(M=>{if(Array.isArray(M)){const[O,q]=M,ue=d>=O.hours&&f>=O.minutes,be=d<q.hours||d===q.hours&&f<q.minutes;if(O.hours<q.hours){if(ue&&be)return!0}else if(ue||be)return!0}else if(M.hours===d&&M.minutes===f)return!0;return!1});if(-1!==A)return T[A]}return function(n,t,e){const r=(0,a.cg1)(n),l=bn([r[a.wAp.DayPeriodsFormat],r[a.wAp.DayPeriodsStandalone]],t);return bn(l,e)}(t,i,r)[d<12?0:1];case mt.Eras:return function(n,t){return bn((0,a.cg1)(n)[a.wAp.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(i,l,n,t,e,r)}}function xe(n){return function(t,e,r){const i=-1*r,l=dn(e,Ne.MinusSign),d=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case yn.Short:return(i>=0?"+":"")+Ir(d,2,l)+Ir(Math.abs(i%60),2,l);case yn.ShortGMT:return"GMT"+(i>=0?"+":"")+Ir(d,1,l);case yn.Long:return"GMT"+(i>=0?"+":"")+Ir(d,2,l)+":"+Ir(Math.abs(i%60),2,l);case yn.Extended:return 0===r?"Z":(i>=0?"+":"")+Ir(d,2,l)+":"+Ir(Math.abs(i%60),2,l);default:throw new Error(`Unknown zone width "${n}"`)}}}function Jt(n){return ls(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function J(n,t=!1){return function(e,r){let i;if(t){const l=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,d=e.getDate();i=1+Math.floor((d+l)/7)}else{const l=Jt(e),d=function(n){const t=ls(n,0,1).getDay();return ls(n,0,1+(t<=4?4:11)-t)}(l.getFullYear()),f=l.getTime()-d.getTime();i=1+Math.round(f/6048e5)}return Ir(i,n,dn(r,Ne.MinusSign))}}function Y(n,t=!1){return function(e,r){return Ir(Jt(e).getFullYear(),n,dn(r,Ne.MinusSign),t)}}const ne={};function $(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function pt(n){return n instanceof Date&&!isNaN(n.valueOf())}class us{}let ru=(()=>{class n extends us{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(fr(r||this.locale)(e)){case Ie.Zero:return"zero";case Ie.One:return"one";case Ie.Two:return"two";case Ie.Few:return"few";case Ie.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.soG))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function Gr(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[i,l]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(l)}return null}let co=(()=>{class n{constructor(e,r,i,l){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=i,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,a.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,a.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.ZZ4),a.Y36(a.aQg),a.Y36(a.SBq),a.Y36(a.Qsj))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class oi{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zt=(()=>{class n{constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((i,l,d)=>{if(null==i.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new oi(null,this._ngForOf,-1,-1),null===d?void 0:d),m=new mc(i,f);r.push(m)}else if(null==d)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const f=this._viewContainer.get(l);this._viewContainer.move(f,d);const m=new mc(i,f);r.push(m)}});for(let i=0;i<r.length;i++)this._perViewChange(r[i].view,r[i].record);for(let i=0,l=this._viewContainer.length;i<l;i++){const d=this._viewContainer.get(i);d.context.index=i,d.context.count=l,d.context.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{this._viewContainer.get(i.currentIndex).context.$implicit=i.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class mc{constructor(t,e){this.record=t,this.view=e}}let Rr=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new _c,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ho("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ho("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.s_b),a.Y36(a.Rgc))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class _c{constructor(){this.$implicit=null,this.ngIf=null}}function ho(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,a.AaK)(t)}'.`)}let iu=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",i,l){if(null==e||""===e||e!=e)return null;try{return Gi(e,r,l||this.locale,i)}catch(d){throw function(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${(0,a.AaK)(n)}'`)}(n,d.message)}}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.soG,16))},n.\u0275pipe=a.Yjl({name:"date",type:n,pure:!0}),n})(),Qn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[{provide:us,useClass:ru}]}),n})();function ph(n){return"server"===n}let Cc=(()=>{class n{}return n.\u0275prov=(0,a.Yz7)({token:n,providedIn:"root",factory:()=>new gh((0,a.LFG)(he),window)}),n})();class gh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const d=l.getElementById(t)||l.querySelector(`[name="${t}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Ia(this.window.history)||Ia(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Ia(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ec{}class Tc extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Tc,G||(G=n)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Is=Is||document.querySelector("base"),Is?Is.getAttribute("href"):null);return null==e?null:function(n){Sn=Sn||document.createElement("a"),Sn.setAttribute("href",n);const t=Sn.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Is=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Gr(document.cookie,t)}}let Sn,Is=null;const Dc=new a.OlP("TRANSITION_ID"),Nn=[{provide:a.ip1,useFactory:function(n,t,e){return()=>{e.get(a.CZH).donePromise.then(()=>{const r=F(),i=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[Dc,he,a.zs3],multi:!0}];class Ic{static init(){(0,a.VLi)(new Ic)}addToWindow(t){a.dqk.getAngularTestability=(r,i=!0)=>{const l=t.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},a.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),a.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),a.dqk.frameworkStabilizers||(a.dqk.frameworkStabilizers=[]),a.dqk.frameworkStabilizers.push(r=>{const i=a.dqk.getAllAngularTestabilities();let l=i.length,d=!1;const f=function(m){d=d||m,l--,0==l&&r(d)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:r?F().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let As=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const mo=new a.OlP("EventManagerPlugins");let Pe=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(i=>i.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,i){return this._findPluginFor(r).addEventListener(e,r,i)}addGlobalEventListener(e,r,i){return this._findPluginFor(r).addGlobalEventListener(e,r,i)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const d=i[l];if(d.supports(e))return this._eventNameToPlugin.set(e,d),d}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(mo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Yt{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const i=F().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,r)}}let Sa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Hn=(()=>{class n extends Sa{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,i){e.forEach(l=>{const d=this._doc.createElement("style");d.textContent=l,i.push(r.appendChild(d))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(vl),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(e,i,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(vl))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(he))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function vl(n){F().remove(n)}const Hs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},li=/%COMP%/g;function ur(n,t,e){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?ur(n,i,e):(i=i.replace(li,n),e.push(i))}return e}function Ni(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let xi=(()=>{class n{constructor(e,r,i){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Mi(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case a.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new vp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(e),i}case 1:case a.ifc.ShadowDom:return new jo(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const i=ur(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Pe),a.LFG(Hn),a.LFG(a.AFp))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class Mi{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Hs[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;const l=Hs[i];l?t.setAttributeNS(l,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const i=Hs[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(a.JOm.DashCase|a.JOm.Important)?t.style.setProperty(e,r,i&a.JOm.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&a.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ni(r)):this.eventManager.addEventListener(t,e,Ni(r))}}class vp extends Mi{constructor(t,e,r,i){super(t),this.component=r;const l=ur(i+"-"+r.id,r.styles,[]);e.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(li,i+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(li,i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class jo extends Mi{constructor(t,e,r,i){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ur(i.id,i.styles,[]);for(let d=0;d<l.length;d++){const f=document.createElement("style");f.textContent=l[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let kc=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i){return e.addEventListener(r,i,!1),()=>this.removeEventListener(e,r,i)}removeEventListener(e,r,i){return e.removeEventListener(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(he))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Go=["alt","control","meta","shift"],bp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Bc=(()=>{class n extends Yt{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,i){const l=n.parseEventName(r),d=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(e,l.domEventName,d))}static parseEventName(e){const r=e.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let d="";if(Go.forEach(m=>{const b=r.indexOf(m);b>-1&&(r.splice(b,1),d+=m+".")}),d+=l,0!=r.length||0===l.length)return null;const f={};return f.domEventName=i,f.fullKey=d,f}static getEventFullKey(e){let r="",i=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&qr.hasOwnProperty(t)&&(t=qr[t]))}return bp[t]||t}(e);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Go.forEach(l=>{l!=i&&gu[l](e)&&(r+=l+".")}),r+=i,r}static eventCallback(e,r,i){return l=>{n.getEventFullKey(l)===e&&i.runGuarded(()=>r(l))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(he))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Pa=(0,a.eFA)(a._c5,"browser",[{provide:a.Lbi,useValue:"browser"},{provide:a.g9A,useValue:function(){Tc.makeCurrent(),Ic.init()},multi:!0},{provide:he,useFactory:function(){return(0,a.RDi)(document),document},deps:[]}]),Uc=[[],{provide:a.zSh,useValue:"root"},{provide:a.qLn,useFactory:function(){return new a.qLn},deps:[]},{provide:mo,useClass:kc,multi:!0,deps:[he,a.R0b,a.Lbi]},{provide:mo,useClass:Bc,multi:!0,deps:[he]},[],{provide:xi,useClass:xi,deps:[Pe,Hn,a.AFp]},{provide:a.FYo,useExisting:xi},{provide:Sa,useExisting:Hn},{provide:Hn,useClass:Hn,deps:[he]},{provide:a.dDg,useClass:a.dDg,deps:[a.R0b]},{provide:Pe,useClass:Pe,deps:[mo,a.R0b]},{provide:Ec,useClass:As,deps:[]},[]];let Tp=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:a.AFp,useValue:e.appId},{provide:Dc,useExisting:a.AFp},Nn]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(n,12))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:Uc,imports:[Qn,a.hGG]}),n})();"undefined"!=typeof window&&window;var Qt=B(4402),dt=B(5917),Tn=B(9765),Il=B(7971);class vr extends Tn.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Il.N;return this._value}next(t){super.next(this._value=t)}}var Wo=B(4869),Ns=B(9796),cr=B(7393);class Eh extends cr.L{notifyNext(t,e,r,i,l){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Sp extends cr.L{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var wo=B(7444),zn=B(7574);function Xn(n,t,e,r,i=new Sp(n,e,r)){if(!i.closed)return t instanceof zn.y?t.subscribe(i):(0,wo.s)(t)(i)}var bu=B(6693);const Zo={};class La{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Hc(t,this.resultSelector))}}class Hc extends Eh{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Zo),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(Xn(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const i=this.values,d=this.toRespond?i[r]===Zo?--this.toRespond:this.toRespond:0;i[r]=e,0===d&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const xs=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var fs=B(3282);function qs(...n){return(0,fs.J)(1)((0,dt.of)(...n))}var ui=B(9193);function Ri(n){return new zn.y(t=>{let e;try{e=n()}catch(i){return void t.error(i)}return(e?(0,Qt.D)(e):(0,ui.c)()).subscribe(t)})}var m0=B(2441),ct=B(8002),Yi=B(5345);function sr(n,t){return"function"==typeof t?e=>e.pipe(sr((r,i)=>(0,Qt.D)(n(r,i)).pipe((0,ct.U)((l,d)=>t(r,l,i,d))))):e=>e.lift(new Np(n))}class Np{constructor(t){this.project=t}call(t,e){return e.subscribe(new Gn(t,this.project))}}class Gn extends Yi.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new Yi.IY(this),i=this.destination;i.add(r),this.innerSubscription=(0,Yi.ft)(t,r),this.innerSubscription!==r&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const jc=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function _i(n){return t=>0===n?(0,ui.c)():t.lift(new _0(n))}class _0{constructor(t){if(this.total=t,this.total<0)throw new jc}call(t,e){return e.subscribe(new xp(t,this.total))}}class xp extends cr.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}function zo(...n){const t=n[n.length-1];return(0,Wo.K)(t)?(n.pop(),e=>qs(n,e,t)):e=>qs(n,e)}function Va(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(i){return i.lift(new r_(n,t,e))}}class r_{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Cu(t,this.accumulator,this.seed,this.hasSeed))}}class Cu extends cr.L{constructor(t,e,r,i){super(t),this.accumulator=e,this._seed=r,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=r,this.destination.next(r)}}function Yn(n,t){return function(r){return r.lift(new Gc(n,t))}}class Gc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new To(t,this.predicate,this.thisArg))}}class To extends cr.L{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}function Do(n){return function(e){const r=new dr(n),i=e.lift(r);return r.caught=i}}class dr{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Ws(t,this.selector,this.caught))}}class Ws extends Yi.Ds{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new Yi.IY(this);this.add(r);const i=(0,Yi.ft)(e,r);i!==r&&this.add(i)}}}var Or=B(9773);function Eu(n,t){return(0,Or.zg)(n,t,1)}function Dh(n){return function(e){return 0===n?(0,ui.c)():e.lift(new yi(n))}}class yi{constructor(t){if(this.total=t,this.total<0)throw new jc}call(t,e){return e.subscribe(new Ms(t,this.total))}}class Ms extends cr.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,i=this.count++;e.length<r?e.push(t):e[i%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,i=this.ring;for(let l=0;l<r;l++){const d=e++%r;t.next(i[d])}}t.complete()}}function Rs(n=Ih){return t=>t.lift(new Io(n))}class Io{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ao(t,this.errorFactory))}}class Ao extends cr.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Ih(){return new xs}function Zs(n=null){return t=>t.lift(new Mp(n))}class Mp{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ba(t,this.defaultValue))}}class Ba extends cr.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Rp=B(4487);function br(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Yn((i,l)=>n(i,l,r)):Rp.y,_i(1),e?Zs(t):Rs(()=>new xs))}var hr=B(8307),Ua=B(1307),Ah=B(5319);class S{constructor(t){this.callback=t}call(t,e){return e.subscribe(new k(t,this.callback))}}class k extends cr.L{constructor(t,e){super(t),this.add(new Ah.w(e))}}class W{constructor(t,e){this.id=t,this.url=e}}class le extends W{constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ge extends W{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fe extends W{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tt extends W{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tt extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pt extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nn extends W{constructor(t,e,r,i,l){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ot extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar extends W{constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Al{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wc{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ks{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yo{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class kp{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function er(n){return new kp(n)}const Tu="ngNavigationCancelingError";function i_(n){const t=Error("NavigationCancelingError: "+n);return t[Tu]=!0,t}function Nl(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const d=r[l],f=n[l];if(d.startsWith(":"))i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ps(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let l=0;l<e.length;l++)if(i=e[l],!Op(n[i],t[i]))return!1;return!0}function Op(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((i,l)=>r[l]===i)}return n===t}function s_(n){return Array.prototype.concat.apply([],n)}function Ha(n){return n.length>0?n[n.length-1]:null}function Fr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Wr(n){return(0,a.CqO)(n)?n:(0,a.QGY)(n)?(0,Qt.D)(Promise.resolve(n)):(0,dt.of)(n)}const o_={exact:function Sh(n,t,e){if(!qa(n.segments,t.segments)||!Iu(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!Sh(n.children[r],t.children[r],e))return!1;return!0},subset:Ko},Du={exact:function(n,t){return ps(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Op(n[e],t[e]))},ignored:()=>!0};function Zc(n,t,e){return o_[e.paths](n.root,t.root,e.matrixParams)&&Du[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Ko(n,t,e){return Ga(n,t,t.segments,e)}function Ga(n,t,e,r){if(n.segments.length>e.length){const i=n.segments.slice(0,e.length);return!(!qa(i,e)||t.hasChildren()||!Iu(i,e,r))}if(n.segments.length===e.length){if(!qa(n.segments,e)||!Iu(n.segments,e,r))return!1;for(const i in t.children)if(!n.children[i]||!Ko(n.children[i],t.children[i],r))return!1;return!0}{const i=e.slice(0,n.segments.length),l=e.slice(n.segments.length);return!!(qa(n.segments,i)&&Iu(n.segments,i,r)&&n.children[Vt])&&Ga(n.children[Vt],t,l,r)}}function Iu(n,t,e){return t.every((r,i)=>Du[e](n[i].parameters,r.parameters))}class xl{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=er(this.queryParams)),this._queryParamMap}toString(){return Yc.serialize(this)}}class Xt{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Fr(e,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jo(this)}}class zc{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=er(this.parameters)),this._parameterMap}toString(){return Nu(this)}}function qa(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class Fp{}class Au{parse(t){const e=new Mh(t);return new xl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var n;return`${`/${Kc(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(i=>`${Jc(e)}=${Jc(i)}`).join("&"):`${Jc(e)}=${Jc(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${n=t.fragment,encodeURI(n)}`:""}`}}const Yc=new Au;function Jo(n){return n.segments.map(t=>Nu(t)).join("/")}function Kc(n,t){if(!n.hasChildren())return Jo(n);if(t){const e=n.children[Vt]?Kc(n.children[Vt],!1):"",r=[];return Fr(n.children,(i,l)=>{l!==Vt&&r.push(`${l}:${Kc(i,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Fr(n.children,(r,i)=>{i===Vt&&(e=e.concat(t(r,i)))}),Fr(n.children,(r,i)=>{i!==Vt&&(e=e.concat(t(r,i)))}),e}(n,(r,i)=>i===Vt?[Kc(n.children[Vt],!1)]:[`${i}:${Kc(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${Jo(n)}/${e[0]}`:`${Jo(n)}/(${e.join("//")})`}}function u_(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jc(n){return u_(n).replace(/%3B/gi,";")}function Qc(n){return u_(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Su(n){return decodeURIComponent(n)}function Lp(n){return Su(n.replace(/\+/g,"%20"))}function Nu(n){return`${Qc(n.path)}${function(n){return Object.keys(n).map(t=>`;${Qc(t)}=${Qc(n[t])}`).join("")}(n.parameters)}`}const C0=/^[^\/()?;=#]+/;function xh(n){const t=n.match(C0);return t?t[0]:""}const E0=/^[^=?&#]+/,Qo=/^[^?&#]+/;class Mh{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Vt]=new Xt(t,e)),r}parseSegment(){const t=xh(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new zc(Su(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=xh(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const i=xh(this.remaining);i&&(r=i,this.capture(r))}t[Su(e)]=Su(r)}parseQueryParam(t){const e=function(n){const t=n.match(E0);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const d=function(n){const t=n.match(Qo);return t?t[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=Lp(e),l=Lp(r);if(t.hasOwnProperty(i)){let d=t[i];Array.isArray(d)||(d=[d],t[i]=d),d.push(l)}else t[i]=l}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):t&&(l=Vt);const d=this.parseChildren();e[l]=1===Object.keys(d).length?d[Vt]:new Xt([],d),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class c_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Vp(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=Vp(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Bp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Bp(t,this._root).map(e=>e.value)}}function Vp(n,t){if(n===t.value)return t;for(const e of t.children){const r=Vp(n,e);if(r)return r}return null}function Bp(n,t){if(n===t.value)return[t];for(const e of t.children){const r=Bp(n,e);if(r.length)return r.unshift(t),r}return[]}class Xo{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Xc(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Rh extends c_{constructor(t,e){super(t),this.snapshot=e,Ph(this,t)}toString(){return this.snapshot.toString()}}function d_(n,t){const e=function(n,t){const d=new kh([],{},{},"",{},Vt,t,null,n.root,-1,{});return new Wa("",new Xo(d,[]))}(n,t),r=new vr([new zc("",{})]),i=new vr({}),l=new vr({}),d=new vr({}),f=new vr(""),m=new Mu(r,i,d,f,l,Vt,t,e.root);return m.snapshot=e.root,new Rh(new Xo(m,[]),e)}class Mu{constructor(t,e,r,i,l,d,f,m){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ct.U)(t=>er(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ct.U)(t=>er(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function h_(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const i=e[r],l=e[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class kh{constructor(t,e,r,i,l,d,f,m,b,T,A){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=d,this.component=f,this.routeConfig=m,this._urlSegment=b,this._lastPathIndex=T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=er(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=er(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wa extends c_{constructor(t,e){super(e),this.url=t,Ph(this,e)}toString(){return Ps(this._root)}}function Ph(n,t){t.value._routerState=n,t.children.forEach(e=>Ph(n,e))}function Ps(n){const t=n.children.length>0?` { ${n.children.map(Ps).join(", ")} } `:"";return`${n.value}${t}`}function Rl(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ps(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ps(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ps(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ps(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ru(n,t){return ps(n.params,t.params)&&function(n,t){return qa(n,t)&&n.every((e,r)=>ps(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||Ru(n.parent,t.parent))}function ku(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const i=function(n,t,e){return t.children.map(r=>{for(const i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ku(n,r,i);return ku(n,r)})}(n,t,e);return new Xo(r,i)}{if(n.shouldAttach(t.value)){const l=n.retrieve(t.value);if(null!==l){const d=l.route;return g_(t,d),d}}const r=function(n){return new Mu(new vr(n.url),new vr(n.params),new vr(n.queryParams),new vr(n.fragment),new vr(n.data),n.outlet,n.component,n)}(t.value),i=t.children.map(l=>ku(n,l));return new Xo(r,i)}}function g_(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)g_(n.children[e],t.children[e])}function ed(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function w(n){return"object"==typeof n&&null!=n&&n.outlets}function g(n,t,e,r,i){let l={};return r&&Fr(r,(d,f)=>{l[f]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),new xl(e.root===n?t:y(e.root,n,t),l,i)}function y(n,t,e){const r={};return Fr(n.children,(i,l)=>{r[l]=i===t?e:y(i,t,e)}),new Xt(n.segments,r)}class E{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&ed(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(w);if(i&&i!==Ha(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class R{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function Ue(n,t,e){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return _t(n,t,e);const r=function(n,t,e){let r=0,i=t;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return l;const d=n.segments[i],f=e[r];if(w(f))break;const m=`${f}`,b=r<e.length-1?e[r+1]:null;if(i>0&&void 0===m)break;if(m&&b&&"object"==typeof b&&void 0===b.outlets){if(!td(m,b,d))return l;r+=2}else{if(!td(m,{},d))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Xt(n.segments.slice(0,r.pathIndex),{});return l.children[Vt]=new Xt(n.segments.slice(r.pathIndex),n.children),_t(l,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?Fn(n,t,e):r.match?_t(n,0,i):Fn(n,t,e)}function _t(n,t,e){if(0===e.length)return new Xt(n.segments,{});{const r=function(n){return w(n[0])?n[0].outlets:{[Vt]:n}}(e),i={};return Fr(r,(l,d)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[d]=Ue(n.children[d],t,l))}),Fr(n.children,(l,d)=>{void 0===r[d]&&(i[d]=l)}),new Xt(n.segments,i)}}function Fn(n,t,e){const r=n.segments.slice(0,t);let i=0;for(;i<e.length;){const l=e[i];if(w(l)){const m=un(l.outlets);return new Xt(r,m)}if(0===i&&ed(e[0])){r.push(new zc(n.segments[t].path,ea(e[0]))),i++;continue}const d=w(l)?l.outlets[Vt]:`${l}`,f=i<e.length-1?e[i+1]:null;d&&f&&ed(f)?(r.push(new zc(d,ea(f))),i+=2):(r.push(new zc(d,{})),i++)}return new Xt(r,{})}function un(n){const t={};return Fr(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=Fn(new Xt([],{}),0,e))}),t}function ea(n){const t={};return Fr(n,(e,r)=>t[r]=`${e}`),t}function td(n,t,e){return n==e.path&&ps(t,e.parameters)}class $p{constructor(t,e,r,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),Rl(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const i=Xc(e);t.children.forEach(l=>{const d=l.value.outlet;this.deactivateRoutes(l,i[d],r),delete i[d]}),Fr(i,(l,d)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(i===l)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(t,e,d.children)}else this.deactivateChildRoutes(t,e,r);else l&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const i=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:i,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,l=Xc(t);for(const d of Object.keys(l))this.deactivateRouteAndItsChildren(l[d],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const i=Xc(e);t.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new ks(l.value.snapshot))}),t.children.length&&this.forwardEvent(new zs(t.value.snapshot))}activateRoutes(t,e,r){const i=t.value,l=e?e.value:null;if(Rl(i),i===l)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,d.children)}else this.activateChildRoutes(t,e,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Hp(f.route)}else{const f=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(i.snapshot),m=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=i,d.resolver=m,d.outlet&&d.outlet.activateWith(i,m),this.activateChildRoutes(t,null,d.children)}}else this.activateChildRoutes(t,null,r)}}function Hp(n){Rl(n.value),n.children.forEach(Hp)}class Oh{constructor(t,e){this.routes=t,this.module=e}}function ta(n){return"function"==typeof n}function kl(n){return n instanceof xl}const Fh=Symbol("INITIAL_VALUE");function Lh(){return sr(n=>function(...n){let t,e;return(0,Wo.K)(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&(0,Ns.k)(n[0])&&(n=n[0]),(0,bu.n)(n,e).lift(new La(t))}(n.map(t=>t.pipe(_i(1),zo(Fh)))).pipe(Va((t,e)=>{let r=!1;return e.reduce((i,l,d)=>i!==Fh?i:(l===Fh&&(r=!0),r||!1!==l&&d!==e.length-1&&!kl(l)?i:l),t)},Fh),Yn(t=>t!==Fh),(0,ct.U)(t=>kl(t)?t:!0===t),_i(1)))}let Pi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&a._UZ(0,"router-outlet")},directives:function(){return[Yp]},encapsulation:2}),n})();function Vh(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];A0(r,QS(t,r))}}function A0(n,t){n.children&&Vh(n.children,t)}function QS(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function S0(n){const t=n.children&&n.children.map(S0),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Vt&&(e.component=Pi),e}function Ys(n){return n.outlet||Vt}function bE(n,t){const e=n.filter(r=>Ys(r)===t);return e.push(...n.filter(r=>Ys(r)!==t)),e}const N0={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function m_(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},N0):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(t.matcher||Nl)(e,n,t);if(!l)return Object.assign({},N0);const d={};Fr(l.posParams,(m,b)=>{d[b]=m.path});const f=l.consumed.length>0?Object.assign(Object.assign({},d),l.consumed[l.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:f,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function qp(n,t,e,r,i="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>Bh(n,t,r)&&Ys(r)!==Vt)}(n,e,r)){const d=new Xt(t,function(n,t,e,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const l of e)if(""===l.path&&Ys(l)!==Vt){const d=new Xt([],{});d._sourceSegment=n,d._segmentIndexShift=t.length,i[Ys(l)]=d}return i}(n,t,r,new Xt(e,n.children)));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>Bh(n,t,r))}(n,e,r)){const d=new Xt(n.segments,function(n,t,e,r,i,l){const d={};for(const f of r)if(Bh(n,e,f)&&!i[Ys(f)]){const m=new Xt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===l?n.segments.length:t.length,d[Ys(f)]=m}return Object.assign(Object.assign({},i),d)}(n,t,e,r,n.children,i));return d._sourceSegment=n,d._segmentIndexShift=t.length,{segmentGroup:d,slicedSegments:e}}const l=new Xt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=t.length,{segmentGroup:l,slicedSegments:e}}function Bh(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function x0(n,t,e,r){return!!(Ys(n)===r||r!==Vt&&Bh(t,e,n))&&("**"===n.path||m_(t,n,e).matched)}function CE(n,t,e){return 0===t.length&&!n.children[e]}class __{constructor(t){this.segmentGroup=t||null}}class M0{constructor(t){this.urlTree=t}}function rd(n){return new zn.y(t=>t.error(new __(n)))}function EE(n){return new zn.y(t=>t.error(new M0(n)))}function nN(n){return new zn.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class iN{constructor(t,e,r,i,l){this.configLoader=e,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0,this.ngModule=t.get(a.h0i)}apply(){const t=qp(this.urlTree.root,[],[],this.config).segmentGroup,e=new Xt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Vt).pipe((0,ct.U)(l=>this.createUrlTree(R0(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Do(l=>{if(l instanceof M0)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof __?this.noMatchError(l):l}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Vt).pipe((0,ct.U)(i=>this.createUrlTree(R0(i),t.queryParams,t.fragment))).pipe(Do(i=>{throw i instanceof __?this.noMatchError(i):i}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const i=t.segments.length>0?new Xt([],{[Vt]:t}):t;return new xl(i,e,r)}expandSegmentGroup(t,e,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe((0,ct.U)(l=>new Xt([],l))):this.expandSegment(t,r,e,r.segments,i,!0)}expandChildren(t,e,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,Qt.D)(i).pipe(Eu(l=>{const d=r.children[l],f=bE(e,l);return this.expandSegmentGroup(t,f,d,l).pipe((0,ct.U)(m=>({segment:m,outlet:l})))}),Va((l,d)=>(l[d.outlet]=d.segment,l),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Yn((i,l)=>n(i,l,r)):Rp.y,Dh(1),e?Zs(t):Rs(()=>new xs))}())}expandSegment(t,e,r,i,l,d){return(0,Qt.D)(r).pipe(Eu(f=>this.expandSegmentAgainstRoute(t,e,r,f,i,l,d).pipe(Do(b=>{if(b instanceof __)return(0,dt.of)(null);throw b}))),br(f=>!!f),Do((f,m)=>{if(f instanceof xs||"EmptyError"===f.name){if(CE(e,i,l))return(0,dt.of)(new Xt([],{}));throw new __(e)}throw f}))}expandSegmentAgainstRoute(t,e,r,i,l,d,f){return x0(i,e,l,d)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,l,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d):rd(e):rd(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,d):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?EE(l):this.lineralizeSegments(r,l).pipe((0,Or.zg)(d=>{const f=new Xt(d,{});return this.expandSegment(t,f,e,d,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,i,l,d){const{matched:f,consumedSegments:m,lastChild:b,positionalParamSegments:T}=m_(e,i,l);if(!f)return rd(e);const A=this.applyRedirectCommands(m,i.redirectTo,T);return i.redirectTo.startsWith("/")?EE(A):this.lineralizeSegments(i,A).pipe((0,Or.zg)(M=>this.expandSegment(t,e,r,M.concat(l.slice(b)),d,!1)))}matchSegmentAgainstRoute(t,e,r,i,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,dt.of)(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe((0,ct.U)(M=>(r._loadedConfig=M,new Xt(i,{})))):(0,dt.of)(new Xt(i,{}));const{matched:d,consumedSegments:f,lastChild:m}=m_(e,r,i);if(!d)return rd(e);const b=i.slice(m);return this.getChildConfig(t,r,i).pipe((0,Or.zg)(A=>{const M=A.module,O=A.routes,{segmentGroup:q,slicedSegments:ue}=qp(e,f,b,O),be=new Xt(q.segments,q.children);if(0===ue.length&&be.hasChildren())return this.expandChildren(M,O,be).pipe((0,ct.U)(ot=>new Xt(f,ot)));if(0===O.length&&0===ue.length)return(0,dt.of)(new Xt(f,{}));const Ge=Ys(r)===l;return this.expandSegment(M,be,O,ue,Ge?Vt:l,!0).pipe((0,ct.U)(it=>new Xt(f.concat(it.segments),it.children)))}))}getChildConfig(t,e,r){return e.children?(0,dt.of)(new Oh(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,dt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe((0,Or.zg)(i=>{return i?this.configLoader.load(t.injector,e).pipe((0,ct.U)(l=>(e._loadedConfig=l,l))):(n=e,new zn.y(t=>t.error(i_(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,dt.of)(new Oh([],t))}runCanLoadGuards(t,e,r){const i=e.canLoad;if(!i||0===i.length)return(0,dt.of)(!0);const l=i.map(d=>{const f=t.get(d);let m;if((n=f)&&ta(n.canLoad))m=f.canLoad(e,r);else{if(!ta(f))throw new Error("Invalid CanLoad guard");m=f(e,r)}var n;return Wr(m)});return(0,dt.of)(l).pipe(Lh(),(0,hr.b)(d=>{if(!kl(d))return;const f=i_(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),(0,ct.U)(d=>!0===d))}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return(0,dt.of)(r);if(i.numberOfChildren>1||!i.children[Vt])return nN(t.redirectTo);i=i.children[Vt]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,i){const l=this.createSegmentGroup(t,e.root,r,i);return new xl(l,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Fr(t,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=e[f]}else r[l]=i}),r}createSegmentGroup(t,e,r,i){const l=this.createSegments(t,e.segments,r,i);let d={};return Fr(e.children,(f,m)=>{d[m]=this.createSegmentGroup(t,f,r,i)}),new Xt(l,d)}createSegments(t,e,r,i){return e.map(l=>l.path.startsWith(":")?this.findPosParam(t,l,i):this.findOrReturn(l,r))}findPosParam(t,e,r){const i=r[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let r=0;for(const i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}}function R0(n){const t={};for(const r of Object.keys(n.children)){const l=R0(n.children[r]);(l.segments.length>0||l.hasChildren())&&(t[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[Vt]){const t=n.children[Vt];return new Xt(n.segments.concat(t.segments),t.children)}return n}(new Xt(n.segments,t))}class Wp{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gs{constructor(t,e){this.component=t,this.route=e}}function TE(n,t,e){const r=n._root;return v_(r,t?t._root:null,e,[r.value])}function y_(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function v_(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=Xc(t);return n.children.forEach(d=>{(function(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,d=t?t.value:null,f=e?e.getContext(n.value.outlet):null;if(d&&l.routeConfig===d.routeConfig){const m=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!qa(n.url,t.url);case"pathParamsOrQueryParamsChange":return!qa(n.url,t.url)||!ps(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ru(n,t)||!ps(n.queryParams,t.queryParams);case"paramsChange":default:return!Ru(n,t)}}(d,l,l.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Wp(r)):(l.data=d.data,l._resolvedData=d._resolvedData),v_(n,t,l.component?f?f.children:null:e,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new gs(f.outlet.component,d))}else d&&Zp(t,f,i),i.canActivateChecks.push(new Wp(r)),v_(n,null,l.component?f?f.children:null:e,r,i)})(d,l[d.value.outlet],e,r.concat([d.value]),i),delete l[d.value.outlet]}),Fr(l,(d,f)=>Zp(d,e.getContext(f),i)),i}function Zp(n,t,e){const r=Xc(n),i=n.value;Fr(r,(l,d)=>{Zp(l,i.component?t?t.children.getContext(d):null:t,e)}),e.canDeactivateChecks.push(new gs(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class k0{}function b_(n){return new zn.y(t=>t.error(n))}class SE{constructor(t,e,r,i,l,d){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d}recognize(){const t=qp(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Vt);if(null===e)return null;const r=new kh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Xo(r,e),l=new Wa(this.url,i);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(t){const e=t.value,r=h_(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const l of Object.keys(e.children)){const d=e.children[l],f=bE(t,l),m=this.processSegmentGroup(f,d,l);if(null===m)return null;r.push(...m)}const i=w_(r);return i.sort((t,e)=>t.value.outlet===Vt?-1:e.value.outlet===Vt?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,r,i){for(const l of t){const d=this.processSegmentAgainstRoute(l,e,r,i);if(null!==d)return d}return CE(e,r,i)?[]:null}processSegmentAgainstRoute(t,e,r,i){if(t.redirectTo||!x0(t,e,r,i))return null;let l,d=[],f=[];if("**"===t.path){const O=r.length>0?Ha(r).parameters:{};l=new kh(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,id(t),Ys(t),t.component,t,P0(e),dN(e)+r.length,C_(t))}else{const O=m_(e,t,r);if(!O.matched)return null;d=O.consumedSegments,f=r.slice(O.lastChild),l=new kh(d,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,id(t),Ys(t),t.component,t,P0(e),dN(e)+d.length,C_(t))}const m=(n=t).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:T}=qp(e,d,f,m.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);var n;if(0===T.length&&b.hasChildren()){const O=this.processChildren(m,b);return null===O?null:[new Xo(l,O)]}if(0===m.length&&0===T.length)return[new Xo(l,[])];const A=Ys(t)===i,M=this.processSegment(m,b,T,A?Vt:i);return null===M?null:[new Xo(l,M)]}}function xE(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function w_(n){const t=[],e=new Set;for(const r of n){if(!xE(r)){t.push(r);continue}const i=t.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),e.add(i)):t.push(r)}for(const r of e){const i=w_(r.children);t.push(new Xo(r.value,i))}return t.filter(r=>!e.has(r))}function P0(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function dN(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function id(n){return n.data||{}}function C_(n){return n.resolve||{}}function F0(n){return sr(t=>{const e=n(t);return e?(0,Qt.D)(e).pipe((0,ct.U)(()=>t)):(0,dt.of)(t)})}class _N extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const E_=new a.OlP("ROUTES");class T_{constructor(t,e,r,i){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const i=this.loadModuleFactory(e.loadChildren).pipe((0,ct.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(e);const d=l.create(t);return new Oh(s_(d.injector.get(E_,void 0,a.XFs.Self|a.XFs.Optional)).map(S0),d)}),Do(l=>{throw e._loader$=void 0,l}));return e._loader$=new m0.c(i,()=>new Tn.xQ).pipe((0,Ua.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,Qt.D)(this.loader.load(t)):Wr(t()).pipe((0,Or.zg)(e=>e instanceof a.YKP?(0,dt.of)(e):(0,Qt.D)(this.compiler.compileModuleAsync(e))))}}class kE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pu,this.attachRef=null}}class Pu{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new kE,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class vN{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function PE(n){throw n}function OE(n,t,e){return t.parse("/")}function Ou(n,t){return(0,dt.of)(null)}const FE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ms=(()=>{class n{constructor(e,r,i,l,d,f,m,b){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Tn.xQ,this.errorHandler=PE,this.malformedUriErrorHandler=OE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ou,afterPreactivation:Ou},this.urlHandlingStrategy=new vN,this.routeReuseStrategy=new _N,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(a.h0i),this.console=d.get(a.c2e);const M=d.get(a.R0b);this.isNgZoneEnabled=M instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new xl(new Xt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new T_(f,m,O=>this.triggerEvent(new Sr(O)),O=>this.triggerEvent(new Al(O))),this.routerState=d_(this.currentUrlTree,this.rootComponentType),this.transitions=new vr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(Yn(i=>0!==i.id),(0,ct.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),sr(i=>{let l=!1,d=!1;return(0,dt.of)(i).pipe((0,hr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),sr(f=>{const m=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return I_(f.source)&&(this.browserUrlTree=f.extractedUrl),(0,dt.of)(f).pipe(sr(A=>{const M=this.transitions.getValue();return r.next(new le(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),M!==this.transitions.getValue()?ui.E:Promise.resolve(A)}),function(n,t,e,r){return sr(i=>function(n,t,e,r,i){return new iN(n,t,e,r,i).apply()}(n,t,e,i.extractedUrl,r).pipe((0,ct.U)(l=>Object.assign(Object.assign({},i),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,hr.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(n,t,e,r,i){return(0,Or.zg)(l=>function(n,t,e,r,i="emptyOnly",l="legacy"){try{const d=new SE(n,t,e,r,i,l).recognize();return null===d?b_(new k0):(0,dt.of)(d)}catch(d){return b_(d)}}(n,t,l.urlAfterRedirects,e(l.urlAfterRedirects),r,i).pipe((0,ct.U)(d=>Object.assign(Object.assign({},l),{targetSnapshot:d}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,hr.b)(A=>{"eager"===this.urlUpdateStrategy&&(A.extras.skipLocationChange||this.setBrowserUrl(A.urlAfterRedirects,A),this.browserUrlTree=A.urlAfterRedirects);const M=new Tt(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(M)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:O,source:q,restoredState:ue,extras:be}=f,Ge=new le(M,this.serializeUrl(O),q,ue);r.next(Ge);const Ke=d_(O,this.rootComponentType).snapshot;return(0,dt.of)(Object.assign(Object.assign({},f),{targetSnapshot:Ke,urlAfterRedirects:O,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),ui.E}),F0(f=>{const{targetSnapshot:m,id:b,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:O}}=f;return this.hooks.beforePreactivation(m,{navigationId:b,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!O})}),(0,hr.b)(f=>{const m=new Pt(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,ct.U)(f=>Object.assign(Object.assign({},f),{guards:TE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(n,t){return(0,Or.zg)(e=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:d}}=e;return 0===d.length&&0===l.length?(0,dt.of)(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return(0,Qt.D)(n).pipe((0,Or.zg)(i=>function(n,t,e,r,i){const l=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,dt.of)(!0);const d=l.map(f=>{const m=y_(f,t,i);let b;if(function(n){return n&&ta(n.canDeactivate)}(m))b=Wr(m.canDeactivate(n,t,e,r));else{if(!ta(m))throw new Error("Invalid CanDeactivate guard");b=Wr(m(n,t,e,r))}return b.pipe(br())});return(0,dt.of)(d).pipe(Lh())}(i.component,i.route,e,t,r)),br(i=>!0!==i,!0))}(d,r,i,n).pipe((0,Or.zg)(f=>f&&function(n){return"boolean"==typeof n}(f)?function(n,t,e,r){return(0,Qt.D)(t).pipe(Eu(i=>qs(function(n,t){return null!==n&&t&&t(new Wc(n)),(0,dt.of)(!0)}(i.route.parent,r),function(n,t){return null!==n&&t&&t(new $a(n)),(0,dt.of)(!0)}(i.route,r),function(n,t,e){const r=t[t.length-1],l=t.slice(0,t.length-1).reverse().map(d=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(d)).filter(d=>null!==d).map(d=>Ri(()=>{const f=d.guards.map(m=>{const b=y_(m,d.node,e);let T;if(function(n){return n&&ta(n.canActivateChild)}(b))T=Wr(b.canActivateChild(r,n));else{if(!ta(b))throw new Error("Invalid CanActivateChild guard");T=Wr(b(r,n))}return T.pipe(br())});return(0,dt.of)(f).pipe(Lh())}));return(0,dt.of)(l).pipe(Lh())}(n,i.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,dt.of)(!0);const i=r.map(l=>Ri(()=>{const d=y_(l,t,e);let f;if(function(n){return n&&ta(n.canActivate)}(d))f=Wr(d.canActivate(t,n));else{if(!ta(d))throw new Error("Invalid CanActivate guard");f=Wr(d(t,n))}return f.pipe(br())}));return(0,dt.of)(i).pipe(Lh())}(n,i.route,e))),br(i=>!0!==i,!0))}(r,l,n,t):(0,dt.of)(f)),(0,ct.U)(f=>Object.assign(Object.assign({},e),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,hr.b)(f=>{if(kl(f.guardsResult)){const b=i_(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const m=new nn(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),Yn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),F0(f=>{if(f.guards.canActivateChecks.length)return(0,dt.of)(f).pipe((0,hr.b)(m=>{const b=new Ot(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}),sr(m=>{let b=!1;return(0,dt.of)(m).pipe(function(n,t){return(0,Or.zg)(e=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,dt.of)(e);let l=0;return(0,Qt.D)(i).pipe(Eu(d=>function(n,t,e,r){return function(n,t,e,r){const i=Object.keys(n);if(0===i.length)return(0,dt.of)({});const l={};return(0,Qt.D)(i).pipe((0,Or.zg)(d=>function(n,t,e,r){const i=y_(n,t,r);return Wr(i.resolve?i.resolve(t,e):i(t,e))}(n[d],t,e,r).pipe((0,hr.b)(f=>{l[d]=f}))),Dh(1),(0,Or.zg)(()=>Object.keys(l).length===i.length?(0,dt.of)(l):ui.E))}(n._resolve,n,t,r).pipe((0,ct.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),h_(n,e).resolve),null)))}(d.route,r,n,t)),(0,hr.b)(()=>l++),Dh(1),(0,Or.zg)(d=>l===i.length?(0,dt.of)(e):ui.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,hr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,hr.b)(m=>{const b=new Ar(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(b)}))}),F0(f=>{const{targetSnapshot:m,id:b,extractedUrl:T,rawUrl:A,extras:{skipLocationChange:M,replaceUrl:O}}=f;return this.hooks.afterPreactivation(m,{navigationId:b,appliedUrlTree:T,rawUrlTree:A,skipLocationChange:!!M,replaceUrl:!!O})}),(0,ct.U)(f=>{const m=function(n,t,e){const r=ku(n,t._root,e?e._root:void 0);return new Rh(r,t)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),(0,hr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,t,e)=>(0,ct.U)(r=>(new $p(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,hr.b)({next(){l=!0},complete(){l=!0}}),function(n){return t=>t.lift(new S(n))}(()=>{var f;if(!l&&!d){const m=`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(i),this.cancelNavigationTransition(i,m)):this.cancelNavigationTransition(i,m)}(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Do(f=>{if(d=!0,function(n){return n&&n[Tu]}(f)){const m=kl(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Fe(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),m?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),A={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||I_(i.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new tt(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return ui.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:i,state:l,urlTree:d}=r,f={replaceUrl:!0};if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}this.scheduleNavigation(d,i,l,f)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const i=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!i||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Vh(e),this.config=e.map(S0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:i,queryParams:l,fragment:d,queryParamsHandling:f,preserveFragment:m}=r,b=i||this.routerState.root,T=m?this.currentUrlTree.fragment:d;let A=null;switch(f){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=l||null}return null!==A&&(A=this.removeEmptyProps(A)),function(n,t,e,r,i){if(0===e.length)return g(t.root,t.root,t,r,i);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new E(!0,0,n);let t=0,e=!1;const r=n.reduce((i,l,d)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return Fr(l.outlets,(m,b)=>{f[b]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===d?(l.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?e=!0:".."===f?t++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new E(e,t,r)}(e);if(l.toRoot())return g(t.root,new Xt([],{}),t,r,i);const d=function(n,t,e){if(n.isAbsolute)return new R(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const l=e.snapshot._urlSegment;return new R(l,l===t.root,0)}const r=ed(n.commands[0])?0:1;return function(n,t,e){let r=n,i=t,l=e;for(;l>i;){if(l-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new R(r,!1,i-l)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,t,n),f=d.processChildren?_t(d.segmentGroup,d.index,l.commands):Ue(d.segmentGroup,d.index,l.commands);return g(d.segmentGroup,f,t,r,i)}(b,this.currentUrlTree,e,A,null!=T?T:null)}navigateByUrl(e,r={skipLocationChange:!1}){const i=kl(e)?e:this.parseUrl(e),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,e)}return r}isActive(e,r){let i;if(i=!0===r?Object.assign({},FE):!1===r?Object.assign({},LE):r,kl(e))return Zc(this.currentUrlTree,e,i);const l=this.parseUrl(e);return Zc(this.currentUrlTree,l,i)}removeEmptyProps(e){return Object.keys(e).reduce((r,i)=>{const l=e[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ge(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,i,l,d){var f,m;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),T=I_(r)&&b&&!I_(b.source),O=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===e.toString();if(T&&O)return Promise.resolve(!0);let q,ue,be;d?(q=d.resolve,ue=d.reject,be=d.promise):be=new Promise((it,ot)=>{q=it,ue=ot});const Ge=++this.navigationId;let Ke;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Ke=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):Ke=0,this.setTransition({id:Ge,targetPageId:Ke,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:l,resolve:q,reject:ue,promise:be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),be.catch(it=>Promise.reject(it))}setBrowserUrl(e,r){const i=this.urlSerializer.serialize(e),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(e,r=!1){var i,l;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===d?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===d&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const i=new Fe(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(i),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.DyG),a.LFG(Fp),a.LFG(Pu),a.LFG(We),a.LFG(a.zs3),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function I_(n){return"imperative"!==n}let Yp=(()=>{class n{constructor(e,r,i,l,d){this.parentContexts=e,this.location=r,this.resolver=i,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.name=l||Vt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const d=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new N_(e,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(Pu),a.Y36(a.s_b),a.Y36(a._Vd),a.$8M("name"),a.Y36(a.sBO))},n.\u0275dir=a.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class N_{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===Mu?this.route:t===Pu?this.childContexts:this.parent.get(t,e)}}class V0{}class U0{preload(t,e){return(0,dt.of)(null)}}let x_=(()=>{class n{constructor(e,r,i,l,d){this.router=e,this.injector=l,this.preloadingStrategy=d,this.loader=new T_(r,i,b=>e.triggerEvent(new Sr(b)),b=>e.triggerEvent(new Al(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Yn(e=>e instanceof ge),Eu(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(a.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const i=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const d=l._loadedConfig;i.push(this.processRoutes(d.module,d.routes))}else l.loadChildren&&!l.canLoad?i.push(this.preloadConfig(e,l)):l.children&&i.push(this.processRoutes(e,l.children));return(0,Qt.D)(i).pipe((0,fs.J)(),(0,ct.U)(l=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,dt.of)(r._loadedConfig):this.loader.load(e.injector,r)).pipe((0,Or.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ms),a.LFG(a.v3s),a.LFG(a.Sil),a.LFG(a.zs3),a.LFG(V0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),od=(()=>{class n{constructor(e,r,i={}){this.router=e,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof le?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ge&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Yo&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new Yo(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ms),a.LFG(Cc),a.LFG(void 0))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=new a.OlP("ROUTER_CONFIGURATION"),BE=new a.OlP("ROUTER_FORROOT_GUARD"),UE=[We,{provide:Fp,useClass:Au},{provide:ms,useFactory:function(n,t,e,r,i,l,d,f={},m,b){const T=new ms(null,n,t,e,r,i,l,s_(d));return m&&(T.urlHandlingStrategy=m),b&&(T.routeReuseStrategy=b),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(f,T),f.enableTracing&&T.events.subscribe(A=>{var M,O;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(O=console.groupEnd)||void 0===O||O.call(console)}),T},deps:[Fp,Pu,We,a.zs3,a.v3s,a.Sil,E_,Fu,[class{},new a.FiY],[class{},new a.FiY]]},Pu,{provide:Mu,useFactory:function(n){return n.routerState.root},deps:[ms]},{provide:a.v3s,useClass:a.EAV},x_,U0,class{preload(t,e){return e().pipe(Do(()=>(0,dt.of)(null)))}},{provide:Fu,useValue:{enableTracing:!1}}];function $0(){return new a.PXZ("Router",ms)}let H0=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[UE,j0(e),{provide:BE,useFactory:wN,deps:[[ms,new a.FiY,new a.tp0]]},{provide:Fu,useValue:r||{}},{provide:Re,useFactory:$E,deps:[X,[new a.tBr(pe),new a.FiY],Fu]},{provide:od,useFactory:iF,deps:[ms,Cc,Fu]},{provide:V0,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:U0},{provide:a.PXZ,multi:!0,useFactory:$0},[G0,{provide:a.ip1,multi:!0,useFactory:HE,deps:[G0]},{provide:jE,useFactory:TN,deps:[G0]},{provide:a.tb,multi:!0,useExisting:jE}]]}}static forChild(e){return{ngModule:n,providers:[j0(e)]}}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(BE,8),a.LFG(ms,8))},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();function iF(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new od(n,t,e)}function $E(n,t,e={}){return e.useHash?new Ve(n,t):new Se(n,t)}function wN(n){return"guarded"}function j0(n){return[{provide:a.deG,multi:!0,useValue:n},{provide:E_,multi:!0,useValue:n}]}let G0=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Tn.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),l=this.injector.get(ms),d=this.injector.get(Fu);return"disabled"===d.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,dt.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),i})}bootstrapListener(e){const r=this.injector.get(Fu),i=this.injector.get(x_),l=this.injector.get(od),d=this.injector.get(ms),f=this.injector.get(a.z2F);e===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),i.setUpPreloading(),l.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();function HE(n){return n.appInitializer.bind(n)}function TN(n){return n.bootstrapListener.bind(n)}const jE=new a.OlP("Router Initializer"),GE=[];let IN=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[H0.forRoot(GE)],H0]}),n})();var Ee=B(8239),Kp=B(8873),jt=B(4292),Lu=B(3637),M_=B(6561);function ra(n){const{subscriber:t,counter:e,period:r}=n;t.next(e),this.schedule({subscriber:t,counter:e+1,period:r},r)}var qE=B(4994);class AN{constructor(t,e){this.http=t,this.appComponent=e,this.robo=null,this._1second=1e3,this._5seconds=5*this._1second,this.getMovingAverage=(r=[])=>{const i=[];let l=0,d=0;for(let f=0;f<r.length;f++)l+=r[f],d++,i[f]=l/d;return i}}stop(){}loadCandleList(t){this.sinal=t,null==this.robo&&this.http.get(`https://api.binance.com/api/v3/klines?symbol=${t.moeda}&interval=5m&limit=26`).subscribe(r=>{let l=this.verificarCruzamentoMACD(r);l.canBuy&&(l.sinal=this.sinal,l.id=this.sinal.moeda+this.sinal.tipo,this.appComponent.acionarAlerta(l))},r=>console.error(r))}verificarCruzamentoMACD(t){let e=t.map(b=>parseFloat(b[4])),r=qE(e,12,5,9),i={canBuy:!1,stopLossPrice:""},l=r.MACD[r.MACD.length-1],d=r.MACD[r.signal.length-1],f=r.MACD[r.MACD.length-2],m=r.MACD[r.signal.length-2];return"LONG"===this.sinal.tipo&&(l>d&&f<m&&l>0&&d<0&&(i.canBuy=!0),l>d&&f<m&&l>0&&d>0&&(i.canBuy=!0)),"SHORT"===this.sinal.tipo&&l<d&&f>m&&(i.canBuy=!0),i.stopLossPrice=this.calculateStopLoss(t),i}verificarCompra(t){const e=this.mapCandleResult(t);this.fillMA5(e),this.fillM26(e),this.fillMA12(e);let r=e[e.length-1],i=e[e.length-2],l=e[e.length-3],d=t[t.length-1],f=t[t.length-2],m=t[t.length-3];console.log(`Moeda ${this.sinal.moeda}-${this.sinal.tipo} ${this.sinal.priceCoinPercentage}% `);let b=!1;"LONG"===this.sinal.tipo&&(r.MA5>r.MA12&&m.MA5<m.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26||this.sinal.priceCoin>r.MA12&&this.isGreenCandle(d)&&this.isGreenCandle(f)&&this.isGreenCandle(m)&&r.MA5<r.MA12&&i.MA5<i.MA12&&l.MA5<l.MA12)&&(b=!0);let T=!1;"SHORT"===this.sinal.tipo&&r.MA5<r.MA26&&l.MA5>l.MA26&&r.MA12>r.MA26&&r.MA12>r.MA5&&(T=!0);let A=b||T;console.log("Resultado: "+A);let M={canBuy:A,stopLossPrice:""};return A&&(M.stopLossPrice=this.calculateStopLoss(t)),M}calculateStopLoss(t){let e=t.length-1,r=parseFloat(t[e][2]),i=parseFloat(t[e][4]),l=parseFloat(t[--e][2]),d=parseFloat(t[--e][4]),f=parseFloat(t[--e][2]),m=parseFloat(t[--e][4]),b=0;return b="LONG"===this.sinal.tipo?[i,d,m].sort((T,A)=>T-A)[0]:[r,l,f].sort((T,A)=>A-T)[0],b.toString()}mapCandleResult(t=[]){let e=[];return t.forEach(r=>{let i=(parseFloat(r[1])+parseFloat(r[4]))/2;e.push({data:Kp(r[0]).add(3,"hours").format("HH:mm:ss"),mediana:parseFloat(String(i)),MA5:0,MA12:0,MA26:0})}),e}fillMA5(t=[]){let e=[];for(let i=t.length-5;i<t.length;i++)e.push(t[i]);let r=this.sinal.priceCoin.toString().length;e=this.getMovingAverage(e.map(i=>i.mediana));for(let i=t.length-5;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA5=l}}fillMA12(t=[]){let e=[];for(let i=t.length-12;i<t.length;i++)e.push(t[i]);e=this.getMovingAverage(e.map(i=>i.mediana));let r=this.sinal.priceCoin.toString().length;for(let i=t.length-12;i<t.length;i++){let l=e.shift();l=parseFloat(l.toString().substr(0,r)),t[i].MA12=l}}fillM26(t=[]){let e=t.map(l=>l.mediana),r=this.getMovingAverage(e),i=this.sinal.priceCoin.toString().length;t.forEach((l,d)=>{let f=r[d];f=parseFloat(f.toString().substr(0,i)),l.MA26=f})}checkCandleSinal(t){let e=t[t.length-1],r=t[t.length-2],i=t[t.length-3],l=parseFloat(e[1]),d=parseFloat(e[4]),m=(parseFloat(e[2]),parseFloat(e[3])),A=(parseFloat(r[1]),parseFloat(r[4]),parseFloat(r[2])),M=parseFloat(r[3]),ue=(parseFloat(i[1]),parseFloat(i[4]),parseFloat(i[2])),be=parseFloat(i[3]),Ge=!1;return Ge="LONG"===this.sinal.tipo?l<d&&d>A&&d>ue&&m>M&&m>be:l>d&&d<M&&d<be&&d<A&&d<ue,Ge}checkDiffMAIsValid(t,e){let i=0,l=0,d=0,f=0;for(let b=e.length-3;b<e.length;b++){let T=e[b],A=e[b+1];if(b===e.length-1){"LONG"===t?(T.MA5>T.MA12&&l++,T.MA5>T.MA26&&d++,T.MA12>T.MA26&&f++):(T.MA5<T.MA12&&l--,T.MA5<T.MA26&&d--,T.MA12<T.MA26&&f--);break}"LONG"===t?(T.MA5<A.MA5&&i++,T.MA5>T.MA12&&l++,T.MA5>T.MA26&&d++,T.MA12>T.MA26&&f++):(T.MA5>A.MA5&&i--,T.MA5<T.MA12&&l--,T.MA5<T.MA26&&d--,T.MA12<T.MA26&&f--)}let m=!1;return("LONG"===t&&2===i&&3===l&&3===d&&3===f||"SHORT"===t&&-2===i&&-3===l&&-3===d&&-3===f)&&(m=!0),m}calculate_MA5_MA26_MA12(t,e){let r=t[t.length-1],i=this.checkCandleSinal(e[e.length-1]),l=!1,d=!1,f=!1;"LONG"===this.sinal.tipo?(l=r.MA5>r.MA26&&r.MA26>r.MA12,d=this.sinal.priceCoin>r.MA5):(l=r.MA5<r.MA26&&r.MA26<r.MA12,d=this.sinal.priceCoin<r.MA5);let m=0,b=0;for(let A=t.length-3;A<t.length;A++){let M=t[A],O=t[A+1];if(!O)break;"LONG"===this.sinal.tipo?(M.MA5<O.MA5&&m++,M.MA26<O.MA26&&b++):(M.MA5>O.MA5&&m--,M.MA26>O.MA26&&b--)}return("LONG"===this.sinal.tipo&&2===m&&2===b||"SHORT"===this.sinal.tipo&&-2===m&&-2===b)&&(f=!0),f&&i&&l&&d}calculate_MA5_MA12(t,e){let r=t[t.length-1],i=this.checkDiffMAIsValid(this.sinal.tipo,t),l=this.checkCandleSinal(e),d=!1,f=!1;return"LONG"===this.sinal.tipo?(d=r.MA5>r.MA12&&r.MA5>r.MA26&&r.MA12>r.MA26,f=this.sinal.priceCoin>r.MA5):(d=r.MA5<r.MA12&&r.MA5<r.MA26&&r.MA12<r.MA26,f=this.sinal.priceCoin<r.MA5),i&&l&&d&&f}isGreenCandle(t){return parseFloat(t[1])<parseFloat(t[4])}isRedCandle(t){return parseFloat(t[1])>parseFloat(t[4])}}var ad=B(6682),Ya=B(8819);function ld(n,t){return e=>e.lift(new WE(n,t))}class WE{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new q0(t,this.compare,this.keySelector))}}class q0 extends cr.L{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:i}=this;e=i?i(t):t}catch(i){return this.destination.error(i)}let r=!1;if(this.hasKey)try{const{compare:i}=this;r=i(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}function W0(...n){return t=>{let e;return"function"==typeof n[n.length-1]&&(e=n.pop()),t.lift(new ZE(n,e))}}class ZE{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new oF(t,this.observables,this.project))}}class oF extends Eh{constructor(t,e,r){super(t),this.observables=e,this.project=r,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let l=0;l<i;l++)this.toRespond.push(l);for(let l=0;l<i;l++)this.add(Xn(this,e[l],void 0,l))}notifyNext(t,e,r){this.values[r]=e;const i=this.toRespond;if(i.length>0){const l=i.indexOf(r);-1!==l&&i.splice(l,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class k_{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new P_(t,this.predicate))}}class P_ extends cr.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Dn=B(8971),vi=B(8939),O_=(B(4828),B(3394)),Ka=B(3910),_s=B(8026),V=B(3854),So=B(5422);const Z0="@firebase/database";let Jp="";function SN(n){Jp=n}class lF{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,V.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,V.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class uF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,V.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const NN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new lF(t)}}catch(t){}return new uF},Hh=NN("localStorage"),YE=NN("sessionStorage"),Qp=new So.Yd("@firebase/database"),xN=function(){let n=1;return function(){return n++}}(),MN=function(n){const t=(0,V.dS)(n),e=new V.gQ;e.update(t);const r=e.digest();return V.US.encodeByteArray(r)},F_=function(...n){let t="";for(let e=0;e<n.length;e++){const r=n[e];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=F_.apply(null,r):t+="object"==typeof r?(0,V.Pz)(r):r,t+=" "}return t};let jh=null,Fl=!0;const L_=function(n,t){(0,V.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Qp.logLevel=So.in.VERBOSE,jh=Qp.log.bind(Qp),t&&YE.set("logging_enabled",!0)):"function"==typeof n?jh=n:(jh=null,YE.remove("logging_enabled"))},bi=function(...n){if(!0===Fl&&(Fl=!1,null===jh&&!0===YE.get("logging_enabled")&&L_(!0)),jh){const t=F_.apply(null,n);jh(t)}},Gh=function(n){return function(...t){bi(n,...t)}},Xp=function(...n){const t="FIREBASE INTERNAL ERROR: "+F_(...n);Qp.error(t)},ia=function(...n){const t=`FIREBASE FATAL ERROR: ${F_(...n)}`;throw Qp.error(t),new Error(t)},Oi=function(...n){const t="FIREBASE WARNING: "+F_(...n);Qp.warn(t)},sa=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ll="[MIN_NAME]",Vl="[MAX_NAME]",Bl=function(n,t){if(n===t)return 0;if(n===Ll||t===Vl)return-1;if(t===Ll||n===Vl)return 1;{const e=tg(n),r=tg(t);return null!==e?null!==r?e-r==0?n.length-t.length:e-r:-1:null!==r?1:n<t?-1:1}},kN=function(n,t){return n===t?0:n<t?-1:1},qh=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,V.Pz)(t))},z0=function(n){if("object"!=typeof n||null===n)return(0,V.Pz)(n);const t=[];for(const r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)0!==r&&(e+=","),e+=(0,V.Pz)(t[r]),e+=":",e+=z0(n[t[r]]);return e+="}",e},JE=function(n,t){const e=n.length;if(e<=t)return[n];const r=[];for(let i=0;i<e;i+=t)r.push(n.substring(i,i+t>e?e:i+t));return r};function Lr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const ud=function(n){(0,V.hu)(!sa(n),"Invalid JSON number");const r=1023;let i,l,d,f,m;0===n?(l=0,d=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=f+r,d=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(l=0,d=Math.round(n/Math.pow(2,-1074))));const b=[];for(m=52;m;m-=1)b.push(d%2?1:0),d=Math.floor(d/2);for(m=11;m;m-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(i?1:0),b.reverse();const T=b.join("");let A="";for(m=0;m<64;m+=8){let M=parseInt(T.substr(m,8),2).toString(16);1===M.length&&(M="0"+M),A+=M}return A.toLowerCase()},Zh=new RegExp("^-?(0*)\\d{1,10}$"),QE=-2147483648,V_=2147483647,tg=function(n){if(Zh.test(n)){const t=Number(n);if(t>=QE&&t<=V_)return t}return null},Vu=function(n){try{n()}catch(t){setTimeout(()=>{throw Oi("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},zh=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class B_{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Oi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class PN{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(bi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oi(t)}}let Yh=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const eT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nT="websocket",ON="long_polling";class rT{constructor(t,e,r,i,l=!1,d="",f=!1){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=l,this.persistenceKey=d,this.includeNamespaceInQueryParams=f,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hh.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Hh.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function FN(n,t,e){let r;if((0,V.hu)("string"==typeof t,"typeof type must == string"),(0,V.hu)("object"==typeof e,"typeof params must == object"),t===nT)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==ON)throw new Error("Unknown connection type: "+t);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const i=[];return Lr(e,(l,d)=>{i.push(l+"="+d)}),r+i.join("&")}class LN{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,V.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,V.p$)(this.counters_)}}const ng={},U_={};function nb(n){const t=n.toString();return ng[t]||(ng[t]=new LN),ng[t]}class BN{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Vu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bu{constructor(t,e,r,i,l,d,f){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=l,this.transportSessionId=d,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gh(t),this.stats_=nb(e),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),FN(e,ON,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new BN(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,V.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lb((...l)=>{const[d,f,m,b,T]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===d)this.id=f,this.password=m;else{if("close"!==d)throw new Error("Unrecognized command received: "+d);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[d,f]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(d,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&eT.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bu.forceAllow_=!0}static forceDisallow(){Bu.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!Bu.forceAllow_&&(Bu.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,V.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const r=(0,V.h$)(e),i=JE(r,1840);for(let l=0;l<i.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,V.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class lb{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=xN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=lb.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(f){bi("frame writing exception"),f.stack&&bi(f.stack),bi(f)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||bi("No IE domain setting required")}catch(e){const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const d=this.pendingSegs.shift();r=r+"&seg"+i+"="+d.seg+"&ts"+i+"="+d.ts+"&d"+i+"="+d.d,i++}return e+=r,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,e){(0,V.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{bi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let cd=null;"undefined"!=typeof MozWebSocket?cd=MozWebSocket:"undefined"!=typeof WebSocket&&(cd=WebSocket);let rg=(()=>{class n{constructor(e,r,i,l,d,f,m){this.connId=e,this.applicationId=i,this.appCheckToken=l,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gh(this.connId),this.stats_=nb(r),this.connURL=n.connectionURL_(r,f,m,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,l){const d={v:"5"};return!(0,V.Yr)()&&"undefined"!=typeof location&&location.hostname&&eT.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),l&&(d.ac=l),FN(e,nT,d)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hh.set("previous_websocket_failure",!0);try{if((0,V.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${Jp}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,f=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;f&&(l.proxy={origin:f}),this.mySock=new cd(this.connURL,[],l)}else this.mySock=new cd(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const l=i.message||i.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const l=i.message||i.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&null!==cd&&!n.forceDisallow_}static previouslyFailed(){return Hh.isInMemoryStorage||!0===Hh.get("previous_websocket_failure")}markConnectionHealthy(){Hh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,V.cI)(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const r=(0,V.Pz)(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=JE(r,16384);i.length>1&&this.sendString_(String(i.length));for(let l=0;l<i.length;l++)this.sendString_(i[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class ig{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bu,rg]}initTransports_(t){const e=rg&&rg.isAvailable();let r=e&&!rg.previouslyFailed();if(t.webSocketOnly&&(e||Oi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[rg];else{const i=this.transports_=[];for(const l of ig.ALL_TRANSPORTS)l&&l.isAvailable()&&i.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class uT{constructor(t,e,r,i,l,d,f,m,b,T){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=l,this.onMessage_=d,this.onReady_=f,this.onDisconnect_=m,this.onKill_=b,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gh("c:"+this.id+":"),this.transportManager_=new ig(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=zh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=qh("t",t),r=qh("d",t);if("c"===e)this.onSecondaryControl_(r);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=qh("t",t),r=qh("d",t);"c"===e?this.onControl_(r):"d"===e&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=qh("t",t);if("d"in t){const r=t.d;if("h"===e)this.onHandshake_(r);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(r):"r"===e?this.onReset_(r):"e"===e?Xp("Server Error: "+r):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xp("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==r&&Oi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),zh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class cT{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}}class ex{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,V.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});const i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let l=0;l<i.length;l++)if(i[l].callback===e&&(!r||r===i[l].context))return void i.splice(l,1)}validateEventType_(t){(0,V.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class Ul extends ex{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ul}getInitialEvent(t){return(0,V.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function xn(){return new Cn("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $l(n){return n.pieces_.length-n.pieceNum_}function tr(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Cn(n.pieces_,t)}function j_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function dd(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function dT(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Cn(t,0)}function wr(n,t){const e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Cn)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Cn(e,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function Kr(n,t){const e=en(n),r=en(t);if(null===e)return t;if(e===r)return Kr(tr(n),tr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function hT(n,t){const e=dd(n,0),r=dd(t,0);for(let i=0;i<e.length&&i<r.length;i++){const l=Bl(e[i],r[i]);if(0!==l)return l}return e.length===r.length?0:e.length<r.length?-1:1}function gb(n,t){if($l(n)!==$l(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function No(n,t){let e=n.pieceNum_,r=t.pieceNum_;if($l(n)>$l(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}class Jh{constructor(t,e){this.errorPrefix_=e,this.parts_=dd(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,V.ug)(this.parts_[r]);fT(this)}}function fT(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+hd(n))}function hd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pT extends ex{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pT}getInitialEvent(t){return(0,V.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const og=1e3;let ag,Qh=(()=>{class n extends cT{constructor(e,r,i,l,d,f,m,b){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=l,this.onServerInfoUpdate_=d,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=Gh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=og,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pT.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ul.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){const l=++this.requestNumber_,d={r:l,a:e,b:r};this.log_((0,V.Pz)(d)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),i&&(this.requestCBHash_[l]=i)}get(e){this.initConnection_();const r=new V.BH,i={p:e._path.toString(),q:e._queryObject},l={action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const f=this.outstandingGets_[d];void 0===f||l!==f||(delete this.outstandingGets_[d],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+d+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(d),r.promise}listen(e,r,i,l){this.initConnection_();const d=e._queryIdentifier,f=e._path.toString();this.log_("Listen called for "+f+" "+d),this.listens.has(f)||this.listens.set(f,new Map),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(f).has(d),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:r,query:e,tag:i};this.listens.get(f).set(d,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){const r=e.query,i=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+i+" for "+l);const d={p:i};e.tag&&(d.q=r._queryObject,d.t=e.tag),d.h=e.hashFn(),this.sendRequest("q",d,m=>{const b=m.d,T=m.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(l))===e&&(this.log_("listen response",m),"ok"!==T&&this.removeListen_(i,l),e.onComplete&&e.onComplete(T,b))})}static warnOnListenWarnings_(e,r){if(e&&"object"==typeof e&&(0,V.r3)(e,"w")){const i=(0,V.DV)(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',d=r._path.toString();Oi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,V.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,r=(0,V.w9)(e)?"auth":"gauth",i={cred:e};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,l=>{const d=l.s,f=l.d||"error";this.authToken_===e&&("ok"===d?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const r=e.s,i=e.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){const i=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+l),(0,V.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,l)&&this.connected_&&this.sendUnlisten_(i,l,e._queryObject,r)}sendUnlisten_(e,r,i,l){this.log_("Unlisten on "+e+" for "+r);const d={p:e};l&&(d.q=i,d.t=l),this.sendRequest("n",d)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,l){const d={p:r,d:i};this.log_("onDisconnect "+e,d),this.sendRequest(e,d,f=>{l&&setTimeout(()=>{l(f.s,f.d)},Math.floor(0))})}put(e,r,i,l){this.putInternal("p",e,r,i,l)}merge(e,r,i,l){this.putInternal("m",e,r,i,l)}putInternal(e,r,i,l,d){this.initConnection_();const f={p:r,d:i};void 0!==d&&(f.h=d),this.outstandingPuts_.push({action:e,request:f,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(e){const r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,d=>{this.log_(r+" response",d),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(d.s,d.d)})}reportStats(e){if(this.connected_){const r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,V.Pz)(e));const r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),"d"===e?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===e?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===e?this.onListenRevoked_(r.p,r.q):"ac"===e?this.onAuthRevoked_(r.s,r.d):"apc"===e?this.onAppCheckRevoked_(r.s,r.d):"sd"===e?this.onSecurityDebugPacket_(r):Xp("Unrecognized action received from server: "+(0,V.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=og,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=og,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=og),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ee.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const r=e.onDataMessage_.bind(e),i=e.onReady_.bind(e),l=e.onRealtimeDisconnect_.bind(e),d=e.id+":"+n.nextConnectionId_++,f=e.lastSessionId;let m=!1,b=null;const T=function(){b?b.close():(m=!0,l())};e.realtime_={close:T,sendRequest:function(O){(0,V.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(O)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[O,q]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);m?bi("getToken() completed but was canceled"):(bi("getToken() completed. Creating connection."),e.authToken_=O&&O.accessToken,e.appCheckToken_=q&&q.token,b=new uT(d,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,r,i,l,ue=>{Oi(ue+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},f))}catch(O){e.log_("Failed to get token: "+O),m||(e.repoInfo_.nodeAdmin&&Oi(O),T())}}})()}interrupt(e){bi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=og,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const r=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;i=r?r.map(d=>z0(d)).join("$"):"default";const l=this.removeListen_(e,i);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,r){const i=new Cn(e).toString();let l;if(this.listens.has(i)){const d=this.listens.get(i);l=d.get(r),d.delete(r),0===d.size&&this.listens.delete(i)}else l=void 0;return l}onAuthRevoked_(e,r){bi("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){bi("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let r="js";(0,V.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+r+"."+Jp.replace(/\./g,"-")]=1,(0,V.uI)()?e["framework.cordova"]=1:(0,V.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ul.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new cn(t,e)}}class W_{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const r=new cn(Ll,t),i=new cn(Ll,e);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class _b extends W_{static get __EMPTY_NODE(){return ag}static set __EMPTY_NODE(t){ag=t}compare(t,e){return Bl(t.name,e.name)}isDefinedOn(t){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return cn.MIN}maxPost(){return new cn(Vl,ag)}makePost(t,e){return(0,V.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new cn(t,ag)}toString(){return".key"}}const oa=new _b;class lg{constructor(t,e,r,i,l=null){this.isReverse_=i,this.resultGenerator_=l,this.nodeStack_=[];let d=1;for(;!t.isEmpty();)if(t=t,d=e?r(t.key,e):1,i&&(d*=-1),d<0)t=this.isReverse_?t.left:t.right;else{if(0===d){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let z_,aa=(()=>{class n{constructor(e,r,i,l,d){this.key=e,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=l?l:wi.EMPTY_NODE,this.right=null!=d?d:wi.EMPTY_NODE}copy(e,r,i,l,d){return new n(null!=e?e:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=l?l:this.left,null!=d?d:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let l=this;const d=i(e,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(e,r,i),null):0===d?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(e,r,i)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return wi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,l;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(e,i.key)){if(i.right.isEmpty())return wi.EMPTY_NODE;l=i.right.min_(),i=i.copy(l.key,l.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class wi{constructor(t,e=wi.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new wi(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,aa.BLACK,null,null))}remove(t){return new wi(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,aa.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),0===e){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}e<0?r=r.left:e>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new lg(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new lg(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new lg(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new lg(this.root_,null,this.comparator_,!0,t)}}function yb(n,t){return Bl(n.name,t.name)}function Z_(n,t){return Bl(n,t)}wi.EMPTY_NODE=new class{copy(t,e,r,i,l){return this}insert(t,e,r){return new aa(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const vb=function(n){return"number"==typeof n?"number:"+ud(n):"string:"+n},_T=function(n){if(n.isLeafNode()){const t=n.val();(0,V.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,V.r3)(t,".sv"),"Priority must be a string or number.")}else(0,V.hu)(n===z_||n.isEmpty(),"priority of unexpected type.");(0,V.hu)(n===z_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yT,vT,bb,Xh=(()=>{class n{constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),_T(this.priorityNode_)}static set __childrenNodeConstructor(e){yT=e}static get __childrenNodeConstructor(){return yT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rn(e)?this:".priority"===en(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return".priority"===e?this.updatePriority(r):r.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){const i=en(e);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,V.hu)(".priority"!==i||1===$l(e),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(tr(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+vb(this.priorityNode_.val())+":");const r=typeof this.value_;e+=r+":",e+="number"===r?ud(this.value_):this.value_,this.lazyHash_=MN(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,V.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const r=typeof e.value_,i=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),d=n.VALUE_TYPE_ORDER.indexOf(i);return(0,V.hu)(l>=0,"Unknown leaf type: "+r),(0,V.hu)(d>=0,"Unknown leaf type: "+i),l===d?"object"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:d-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const or=new class extends W_{compare(t,e){const r=t.node.getPriority(),i=e.node.getPriority(),l=r.compareTo(i);return 0===l?Bl(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(Vl,new Xh("[PRIORITY-POST]",bb))}makePost(t,e){const r=vT(t);return new cn(e,new Xh("[PRIORITY-POST]",r))}toString(){return".priority"}},hF=Math.log(2);class fF{constructor(t){this.count=parseInt(Math.log(t+1)/hF,10),this.current_=this.count-1;const i=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const ef=function(n,t,e,r){n.sort(t);const i=function(m,b){const T=b-m;let A,M;if(0===T)return null;if(1===T)return A=n[m],M=e?e(A):A,new aa(M,A.node,aa.BLACK,null,null);{const O=parseInt(T/2,10)+m,q=i(m,O),ue=i(O+1,b);return A=n[O],M=e?e(A):A,new aa(M,A.node,aa.BLACK,q,ue)}},f=function(m){let b=null,T=null,A=n.length;const M=function(q,ue){const be=A-q,Ge=A;A-=q;const Ke=i(be+1,Ge),it=n[be],ot=e?e(it):it;O(new aa(ot,it.node,ue,null,Ke))},O=function(q){b?(b.left=q,b=q):(T=q,b=q)};for(let q=0;q<m.count;++q){const ue=m.nextBitIsOne(),be=Math.pow(2,m.count-(q+1));ue?M(be,aa.BLACK):(M(be,aa.BLACK),M(be,aa.RED))}return T}(new fF(n.length));return new wi(r||t,f)};let wb;const fd={};class Xa{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,V.hu)(fd&&or,"ChildrenNode.ts has not been loaded"),wb=wb||new Xa({".priority":fd},{".priority":or}),wb}get(t){const e=(0,V.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof wi?e:null}hasIndex(t){return(0,V.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,V.hu)(t!==oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const l=e.getIterator(cn.Wrap);let f,d=l.getNext();for(;d;)i=i||t.isDefinedOn(d.node),r.push(d),d=l.getNext();f=i?ef(r,t.getCompare()):fd;const m=t.toString(),b=Object.assign({},this.indexSet_);b[m]=t;const T=Object.assign({},this.indexes_);return T[m]=f,new Xa(T,b)}addToIndexes(t,e){const r=(0,V.UI)(this.indexes_,(i,l)=>{const d=(0,V.DV)(this.indexSet_,l);if((0,V.hu)(d,"Missing index implementation for "+l),i===fd){if(d.isDefinedOn(t.node)){const f=[],m=e.getIterator(cn.Wrap);let b=m.getNext();for(;b;)b.name!==t.name&&f.push(b),b=m.getNext();return f.push(t),ef(f,d.getCompare())}return fd}{const f=e.get(t.name);let m=i;return f&&(m=m.remove(new cn(t.name,f))),m.insert(t,t.node)}});return new Xa(r,this.indexSet_)}removeFromIndexes(t,e){const r=(0,V.UI)(this.indexes_,i=>{if(i===fd)return i;{const l=e.get(t.name);return l?i.remove(new cn(t.name,l)):i}});return new Xa(r,this.indexSet_)}}let Y_,Dt=(()=>{class n{constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_T(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Y_||(Y_=new n(new wi(Z_),null,Xa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Y_}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const r=this.children_.get(e);return null===r?Y_:r}}getChild(e){const r=en(e);return null===r?this:this.getImmediateChild(r).getChild(tr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,r){if((0,V.hu)(r,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(r);{const i=new cn(e,r);let l,d;r.isEmpty()?(l=this.children_.remove(e),d=this.indexMap_.removeFromIndexes(i,this.children_)):(l=this.children_.insert(e,r),d=this.indexMap_.addToIndexes(i,this.children_));const f=l.isEmpty()?Y_:this.priorityNode_;return new n(l,f,d)}}updateChild(e,r){const i=en(e);if(null===i)return r;{(0,V.hu)(".priority"!==en(e)||1===$l(e),".priority must be the last token in a path");const l=this.getImmediateChild(i).updateChild(tr(e),r);return this.updateImmediateChild(i,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const r={};let i=0,l=0,d=!0;if(this.forEachChild(or,(f,m)=>{r[f]=m.val(e),i++,d&&n.INTEGER_REGEXP_.test(f)?l=Math.max(l,Number(f)):d=!1}),!e&&d&&l<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+vb(this.getPriority().val())+":"),this.forEachChild(or,(r,i)=>{const l=i.hash();""!==l&&(e+=":"+r+":"+l)}),this.lazyHash_=""===e?"":MN(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){const l=this.resolveIndex_(i);if(l){const d=l.getPredecessorKey(new cn(e,r));return d?d.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(e){const r=this.getFirstChildName(e);return r?new cn(r,this.children_.get(r)):null}getLastChildName(e){const r=this.resolveIndex_(e);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(e){const r=this.getLastChildName(e);return r?new cn(r,this.children_.get(r)):null}forEachChild(e,r){const i=this.resolveIndex_(e);return i?i.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,cn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)<0;)l.getNext(),d=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,cn.Wrap);let d=l.peek();for(;null!=d&&r.compare(d,e)>0;)l.getNext(),d=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===K_?-1:0}withIndex(e){if(e===oa||this.indexMap_.hasIndex(e))return this;{const r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===oa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const r=e;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(or),l=r.getIterator(or);let d=i.getNext(),f=l.getNext();for(;d&&f;){if(d.name!==f.name||!d.node.equals(f.node))return!1;d=i.getNext(),f=l.getNext()}return null===d&&null===f}return!1}return!1}}resolveIndex_(e){return e===oa?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const K_=new class extends Dt{constructor(){super(new wi(Z_),Dt.EMPTY_NODE,Xa.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Dt.EMPTY_NODE}isEmpty(){return!1}};function Er(n,t=null){if(null===n)return Dt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,V.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Xh(n,Er(t));if(n instanceof Array){let e=Dt.EMPTY_NODE;return Lr(n,(r,i)=>{if((0,V.r3)(n,r)&&"."!==r.substring(0,1)){const l=Er(i);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(r,l))}}),e.updatePriority(Er(t))}{const e=[];let r=!1;if(Lr(n,(d,f)=>{if("."!==d.substring(0,1)){const m=Er(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),e.push(new cn(d,m)))}}),0===e.length)return Dt.EMPTY_NODE;const l=ef(e,yb,d=>d.name,Z_);if(r){const d=ef(e,or.getCompare());return new Dt(l,Er(t),new Xa({".priority":d},{".priority":or}))}return new Dt(l,Er(t),Xa.Default)}}Object.defineProperties(cn,{MIN:{value:new cn(Ll,Dt.EMPTY_NODE)},MAX:{value:new cn(Vl,K_)}}),_b.__EMPTY_NODE=Dt.EMPTY_NODE,Xh.__childrenNodeConstructor=Dt,z_=K_,bb=K_,function(n){vT=n}(Er);class J_ extends W_{constructor(t){super(),this.indexPath_=t,(0,V.hu)(!rn(t)&&".priority"!==en(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const r=this.extractChild(t.node),i=this.extractChild(e.node),l=r.compareTo(i);return 0===l?Bl(t.name,e.name):l}makePost(t,e){const r=Er(t),i=Dt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(e,i)}maxPost(){const t=Dt.EMPTY_NODE.updateChild(this.indexPath_,K_);return new cn(Vl,t)}toString(){return dd(this.indexPath_,0).join("/")}}const Cb=new class extends W_{compare(t,e){const r=t.node.compareTo(e.node);return 0===r?Bl(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(t,e){const r=Er(t);return new cn(e,r)}toString(){return".value"}},ug="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Eb=function(){let n=0;const t=[];return function(e){const r=e===n;let i;n=e;const l=new Array(8);for(i=7;i>=0;i--)l[i]=ug.charAt(e%64),e=Math.floor(e/64);(0,V.hu)(0===e,"Cannot push at time == 0");let d=l.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)d+=ug.charAt(t[i]);return(0,V.hu)(20===d.length,"nextPushId: Length should be 20."),d}}(),ET=function(n){if(n===""+V_)return"-";const t=tg(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let d=0;d<e.length;d++)e[d]=n.charAt(d);if(e.length<786)return e.push("-"),e.join("");let r=e.length-1;for(;r>=0&&"z"===e[r];)r--;if(-1===r)return Vl;const l=ug.charAt(ug.indexOf(e[r])+1);return e[r]=l,e.slice(0,r+1).join("")},TT=function(n){if(n===""+QE)return Ll;const t=tg(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let r=0;r<e.length;r++)e[r]=n.charAt(r);return"-"===e[e.length-1]?1===e.length?""+V_:(delete e[e.length-1],e.join("")):(e[e.length-1]=ug.charAt(ug.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function DT(n){return{type:"value",snapshotNode:n}}function tf(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function cg(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function dg(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class Uu{constructor(t){this.index_=t}updateChild(t,e,r,i,l,d){(0,V.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=t.getImmediateChild(e);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=d&&(r.isEmpty()?t.hasChild(e)?d.trackChildChange(cg(e,f)):(0,V.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?d.trackChildChange(tf(e,r)):d.trackChildChange(dg(e,r,f))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return null!=r&&(t.isLeafNode()||t.forEachChild(or,(i,l)=>{e.hasChild(i)||r.trackChildChange(cg(i,l))}),e.isLeafNode()||e.forEachChild(or,(i,l)=>{if(t.hasChild(i)){const d=t.getImmediateChild(i);d.equals(l)||r.trackChildChange(dg(i,l,d))}else r.trackChildChange(tf(i,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Dt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class nf{constructor(t){this.indexedFilter_=new Uu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=nf.getStartPost_(t),this.endPost_=nf.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,r,i,l,d){return this.matches(new cn(e,r))||(r=Dt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,l,d)}updateFullNode(t,e,r){e.isLeafNode()&&(e=Dt.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Dt.EMPTY_NODE);const l=this;return e.forEachChild(or,(d,f)=>{l.matches(new cn(d,f))||(i=i.updateImmediateChild(d,Dt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class la{constructor(t){this.rangedFilter_=new nf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,r,i,l,d){return this.rangedFilter_.matches(new cn(e,r))||(r=Dt.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,l,d):this.fullLimitUpdateChild_(t,e,r,l,d)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=Dt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let l;i=Dt.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;l.hasNext()&&d<this.limit_;){const f=l.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),d++}}else{let l,d,f,m;if(i=e.withIndex(this.index_),i=i.updatePriority(Dt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),d=this.rangedFilter_.getStartPost();const A=this.index_.getCompare();f=(M,O)=>A(O,M)}else m=i.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),d=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let b=0,T=!1;for(;m.hasNext();){const A=m.getNext();!T&&f(l,A)<=0&&(T=!0),T&&b<this.limit_&&f(A,d)<=0?b++:i=i.updateImmediateChild(A.name,Dt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,l){let d;if(this.reverse_){const A=this.index_.getCompare();d=(M,O)=>A(O,M)}else d=this.index_.getCompare();const f=t;(0,V.hu)(f.numChildren()===this.limit_,"");const m=new cn(e,r),b=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),T=this.rangedFilter_.matches(m);if(f.hasChild(e)){const A=f.getImmediateChild(e);let M=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=M&&(M.name===e||f.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const O=null==M?1:d(M,m);if(T&&!r.isEmpty()&&O>=0)return null!=l&&l.trackChildChange(dg(e,r,A)),f.updateImmediateChild(e,r);{null!=l&&l.trackChildChange(cg(e,A));const ue=f.updateImmediateChild(e,Dt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=l&&l.trackChildChange(tf(M.name,M.node)),ue.updateImmediateChild(M.name,M.node)):ue}}return r.isEmpty()?t:T&&d(b,m)>=0?(null!=l&&(l.trackChildChange(cg(b.name,b.node)),l.trackChildChange(tf(e,r))),f.updateImmediateChild(e,r).updateImmediateChild(b.name,Dt.EMPTY_NODE)):t}}class $u{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=or}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ll}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===or}copy(){const t=new $u;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function xo(n,t,e){const r=n.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=e?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ci(n,t,e){const r=n.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==e?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function gd(n,t){const e=n.copy();return e.index_=t,e}function Js(n){const t={};if(n.isDefault())return t;let e;return n.index_===or?e="$priority":n.index_===Cb?e="$value":n.index_===oa?e="$key":((0,V.hu)(n.index_ instanceof J_,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,V.Pz)(e),n.startSet_&&(t.startAt=(0,V.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,V.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,V.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,V.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function ty(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==or&&(t.i=n.index_.toString()),t}class jl extends cT{constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gh("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,V.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,r,i){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const d=jl.getListenId_(t,r),f={};this.listens_[d]=f;const m=Js(t._queryParams);this.restRequest_(l+".json",m,(b,T)=>{let A=T;if(404===b&&(A=null,b=null),null===b&&this.onDataUpdate_(l,A,!1,r),(0,V.DV)(this.listens_,d)===f){let M;M=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(M,null)}})}unlisten(t,e){const r=jl.getListenId_(t,e);delete this.listens_[r]}get(t){const e=Js(t._queryParams),r=t._path.toString(),i=new V.BH;return this.restRequest_(r+".json",e,(l,d)=>{let f=d;404===l&&(f=null,l=null),null===l?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,l])=>{i&&i.accessToken&&(e.auth=i.accessToken),l&&l.token&&(e.ac=l.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,V.xO)(e);this.log_("Sending REST request for "+d);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+d+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,V.cI)(f.responseText)}catch(b){Oi("Failed to parse JSON response for "+d+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&Oi("Got unsuccessful REST response for "+d+" Status: "+f.status),r(f.status);r=null}},f.open("GET",d,!0),f.send()})}}class rf{constructor(){this.rootNode_=Dt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Gl(){return{value:null,children:new Map}}function ua(n,t,e){if(rn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const r=en(t);n.children.has(r)||n.children.set(r,Gl()),ua(n.children.get(r),t=tr(t),e)}}function Hu(n,t){if(rn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(or,(r,i)=>{ua(n,new Cn(r),i)}),Hu(n,t)}}if(n.children.size>0){const e=en(t);return t=tr(t),n.children.has(e)&&Hu(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function ju(n,t,e){null!==n.value?e(t,n.value):function(n,t){n.children.forEach((e,r)=>{t(r,e)})}(n,(r,i)=>{ju(i,new Cn(t.toString()+"/"+r),e)})}class af{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Lr(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}}class ST{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new af(t);const r=1e4+2e4*Math.random();zh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),e={};let r=!1;Lr(t,(i,l)=>{l>0&&(0,V.r3)(this.statsToReport_,i)&&(e[i]=l,r=!0)}),r&&this.server_.reportStats(e),zh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qs=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Qs||(Qs={})),Qs))();function iy(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class fg{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Qs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Cn(t));return new fg(xn(),e,this.revert)}}return(0,V.hu)(en(this.path)===t,"operationForChild called for unrelated child."),new fg(tr(this.path),this.affectedTree,this.revert)}}class lf{constructor(t,e){this.source=t,this.path=e,this.type=Qs.LISTEN_COMPLETE}operationForChild(t){return rn(this.path)?new lf(this.source,xn()):new lf(this.source,tr(this.path))}}class _d{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Qs.OVERWRITE}operationForChild(t){return rn(this.path)?new _d(this.source,xn(),this.snap.getImmediateChild(t)):new _d(this.source,tr(this.path),this.snap)}}class yd{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Qs.MERGE}operationForChild(t){if(rn(this.path)){const e=this.children.subtree(new Cn(t));return e.isEmpty()?null:e.value?new _d(this.source,xn(),e.value):new yd(this.source,xn(),e)}return(0,V.hu)(en(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new yd(this.source,tr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Gu{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(rn(t))return this.isFullyInitialized()&&!this.filtered_;const e=en(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class NT{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function pg(n,t,e,r,i,l){const d=r.filter(f=>f.type===e);d.sort((f,m)=>function(n,t,e){if(null==t.childName||null==e.childName)throw(0,V.g5)("Should only compare child_ events.");const r=new cn(t.childName,t.snapshotNode),i=new cn(e.childName,e.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),d.forEach(f=>{const m=function(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,f,l);i.forEach(b=>{b.respondsTo(f.type)&&t.push(b.createEvent(m,n.query_))})})}function gg(n,t){return{eventCache:n,serverCache:t}}function mg(n,t,e,r){return gg(new Gu(t,e,r),n.serverCache)}function Db(n,t,e,r){return gg(n.eventCache,new Gu(t,e,r))}function sy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function vd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let MT;class nr{constructor(t,e=(()=>(MT||(MT=new wi(kN)),MT))()){this.value=t,this.children=e}static fromObject(t){let e=new nr(null);return Lr(t,(r,i)=>{e=e.set(new Cn(r),i)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:xn(),value:this.value};if(rn(t))return null;{const r=en(t),i=this.children.get(r);if(null!==i){const l=i.findRootMostMatchingPathAndValue(tr(t),e);return null!=l?{path:wr(new Cn(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(rn(t))return this;{const e=en(t),r=this.children.get(e);return null!==r?r.subtree(tr(t)):new nr(null)}}set(t,e){if(rn(t))return new nr(e,this.children);{const r=en(t),l=(this.children.get(r)||new nr(null)).set(tr(t),e),d=this.children.insert(r,l);return new nr(this.value,d)}}remove(t){if(rn(t))return this.children.isEmpty()?new nr(null):new nr(null,this.children);{const e=en(t),r=this.children.get(e);if(r){const i=r.remove(tr(t));let l;return l=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&l.isEmpty()?new nr(null):new nr(this.value,l)}return this}}get(t){if(rn(t))return this.value;{const e=en(t),r=this.children.get(e);return r?r.get(tr(t)):null}}setTree(t,e){if(rn(t))return e;{const r=en(t),l=(this.children.get(r)||new nr(null)).setTree(tr(t),e);let d;return d=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new nr(this.value,d)}}fold(t){return this.fold_(xn(),t)}fold_(t,e){const r={};return this.children.inorderTraversal((i,l)=>{r[i]=l.fold_(wr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,xn(),e)}findOnPath_(t,e,r){const i=!!this.value&&r(e,this.value);if(i)return i;if(rn(t))return null;{const l=en(t),d=this.children.get(l);return d?d.findOnPath_(tr(t),wr(e,l),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,xn(),e)}foreachOnPath_(t,e,r){if(rn(t))return this;{this.value&&r(e,this.value);const i=en(t),l=this.children.get(i);return l?l.foreachOnPath_(tr(t),wr(e,i),r):new nr(null)}}foreach(t){this.foreach_(xn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(wr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}}class el{constructor(t){this.writeTree_=t}static empty(){return new el(new nr(null))}}function oy(n,t,e){if(rn(t))return new el(new nr(e));{const r=n.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let l=r.value;const d=Kr(i,t);return l=l.updateChild(d,e),new el(n.writeTree_.set(i,l))}{const i=new nr(e),l=n.writeTree_.setTree(t,i);return new el(l)}}}function RT(n,t,e){let r=n;return Lr(e,(i,l)=>{r=oy(r,wr(t,i),l)}),r}function kT(n,t){if(rn(t))return el.empty();{const e=n.writeTree_.setTree(t,new nr(null));return new el(e)}}function PT(n,t){return null!=bd(n,t)}function bd(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(Kr(e.path,t)):null}function OT(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(or,(r,i)=>{t.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new cn(r,i.value))}),t}function tl(n,t){if(rn(t))return n;{const e=bd(n,t);return new el(null!=e?new nr(e):n.writeTree_.subtree(t))}}function _g(n){return n.writeTree_.isEmpty()}function uf(n,t){return cx(xn(),n.writeTree_,t)}function cx(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,l)=>{".priority"===i?((0,V.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):e=cx(wr(n,i),l,e)}),!e.getChild(n).isEmpty()&&null!==r&&(e=e.updateChild(wr(n,".priority"),r)),e}}function Ib(n,t){return cy(t,n)}function hx(n,t){if(n.snap)return No(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&No(wr(n.path,e),t))return!0;return!1}function fx(n){return n.visible}function Ab(n,t,e){let r=el.empty();for(let i=0;i<n.length;++i){const l=n[i];if(t(l)){const d=l.path;let f;if(l.snap)No(e,d)?(f=Kr(e,d),r=oy(r,f,l.snap)):No(d,e)&&(f=Kr(d,e),r=oy(r,xn(),l.snap.getChild(f)));else{if(!l.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(No(e,d))f=Kr(e,d),r=RT(r,f,l.children);else if(No(d,e))if(f=Kr(d,e),rn(f))r=RT(r,xn(),l.children);else{const m=(0,V.DV)(l.children,en(f));if(m){const b=m.getChild(tr(f));r=oy(r,xn(),b)}}}}}return r}function LT(n,t,e,r,i){if(r||i){const l=tl(n.visibleWrites,t);return!i&&_g(l)?e:i||null!=e||PT(l,xn())?uf(Ab(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(No(b.path,t)||No(t,b.path))},t),e||Dt.EMPTY_NODE):null}{const l=bd(n.visibleWrites,t);if(null!=l)return l;{const d=tl(n.visibleWrites,t);return _g(d)?e:null!=e||PT(d,xn())?uf(d,e||Dt.EMPTY_NODE):null}}}function ly(n,t,e,r){return LT(n.writeTree,n.treePath,t,e,r)}function Sb(n,t){return function(n,t,e){let r=Dt.EMPTY_NODE;const i=bd(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(or,(l,d)=>{r=r.updateImmediateChild(l,d)}),r;if(e){const l=tl(n.visibleWrites,t);return e.forEachChild(or,(d,f)=>{const m=uf(tl(l,new Cn(d)),f);r=r.updateImmediateChild(d,m)}),OT(l).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}return OT(tl(n.visibleWrites,t)).forEach(d=>{r=r.updateImmediateChild(d.name,d.node)}),r}(n.writeTree,n.treePath,t)}function UT(n,t,e,r){return function(n,t,e,r,i){(0,V.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const l=wr(t,e);if(PT(n.visibleWrites,l))return null;{const d=tl(n.visibleWrites,l);return _g(d)?i.getChild(e):uf(d,i.getChild(e))}}(n.writeTree,n.treePath,t,e,r)}function yg(n,t){return function(n,t){return bd(n.visibleWrites,t)}(n.writeTree,wr(n.treePath,t))}function uy(n,t,e){return function(n,t,e,r){const i=wr(t,e),l=bd(n.visibleWrites,i);return null!=l?l:r.isCompleteForChild(e)?uf(tl(n.visibleWrites,i),r.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function Nb(n,t){return cy(wr(n.treePath,t),n.writeTree)}function cy(n,t){return{treePath:n,writeTree:t}}class vF{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,r=t.childName;(0,V.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const l=i.type;if("child_added"===e&&"child_removed"===l)this.changeMap.set(r,dg(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===e&&"child_changed"===l)this.changeMap.set(r,cg(r,i.oldSnap));else if("child_changed"===e&&"child_added"===l)this.changeMap.set(r,tf(r,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==l)throw(0,V.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,dg(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const $T=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}};class HT{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new Gu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return uy(this.writes_,t,r)}}getChildAfterChild(t,e,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:vd(this.viewCache_),l=function(n,t,e,r,i,l){return function(n,t,e,r,i,l,d){let f;const m=tl(n.visibleWrites,t),b=bd(m,xn());if(null!=b)f=b;else{if(null==e)return[];f=uf(m,e)}if(f=f.withIndex(d),f.isEmpty()||f.isLeafNode())return[];{const T=[],A=d.getCompare(),M=l?f.getReverseIteratorFrom(r,d):f.getIteratorFrom(r,d);let O=M.getNext();for(;O&&T.length<i;)0!==A(O,r)&&T.push(O),O=M.getNext();return T}}(n.writeTree,n.treePath,t,e,r,i,l)}(this.writes_,i,e,1,r,t);return 0===l.length?null:l[0]}}function jT(n,t,e,r,i,l){const d=t.eventCache;if(null!=yg(r,e))return t;{let f,m;if(rn(e))if((0,V.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const b=vd(t),A=Sb(r,b instanceof Dt?b:Dt.EMPTY_NODE);f=n.filter.updateFullNode(t.eventCache.getNode(),A,l)}else{const b=ly(r,vd(t));f=n.filter.updateFullNode(t.eventCache.getNode(),b,l)}else{const b=en(e);if(".priority"===b){(0,V.hu)(1===$l(e),"Can't have a priority with additional path components");const T=d.getNode();m=t.serverCache.getNode();const A=UT(r,e,T,m);f=null!=A?n.filter.updatePriority(T,A):d.getNode()}else{const T=tr(e);let A;if(d.isCompleteForChild(b)){m=t.serverCache.getNode();const M=UT(r,e,d.getNode(),m);A=null!=M?d.getNode().getImmediateChild(b).updateChild(T,M):d.getNode().getImmediateChild(b)}else A=uy(r,b,t.serverCache);f=null!=A?n.filter.updateChild(d.getNode(),b,A,T,i,l):d.getNode()}}return mg(t,f,d.isFullyInitialized()||rn(e),n.filter.filtersNodes())}}function df(n,t,e,r,i,l,d,f){const m=t.serverCache;let b;const T=d?n.filter:n.filter.getIndexedFilter();if(rn(e))b=T.updateFullNode(m.getNode(),r,null);else if(T.filtersNodes()&&!m.isFiltered()){const O=m.getNode().updateChild(e,r);b=T.updateFullNode(m.getNode(),O,null)}else{const O=en(e);if(!m.isCompleteForPath(e)&&$l(e)>1)return t;const q=tr(e),be=m.getNode().getImmediateChild(O).updateChild(q,r);b=".priority"===O?T.updatePriority(m.getNode(),be):T.updateChild(m.getNode(),O,be,q,$T,null)}const A=Db(t,b,m.isFullyInitialized()||rn(e),T.filtersNodes());return jT(n,A,e,i,new HT(i,A,l),f)}function bg(n,t,e,r,i,l,d){const f=t.eventCache;let m,b;const T=new HT(i,t,l);if(rn(e))b=n.filter.updateFullNode(t.eventCache.getNode(),r,d),m=mg(t,b,!0,n.filter.filtersNodes());else{const A=en(e);if(".priority"===A)b=n.filter.updatePriority(t.eventCache.getNode(),r),m=mg(t,b,f.isFullyInitialized(),f.isFiltered());else{const M=tr(e),O=f.getNode().getImmediateChild(A);let q;if(rn(M))q=r;else{const ue=T.getCompleteChild(A);q=null!=ue?".priority"===j_(M)&&ue.getChild(dT(M)).isEmpty()?ue:ue.updateChild(M,r):Dt.EMPTY_NODE}m=O.equals(q)?t:mg(t,n.filter.updateChild(f.getNode(),A,q,M,T,d),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function kb(n,t){return n.eventCache.isCompleteForChild(t)}function GT(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function wg(n,t,e,r,i,l,d,f){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let b,m=t;b=rn(e)?r:new nr(null).setTree(e,r);const T=t.serverCache.getNode();return b.children.inorderTraversal((A,M)=>{if(T.hasChild(A)){const q=GT(0,t.serverCache.getNode().getImmediateChild(A),M);m=df(n,m,new Cn(A),q,i,l,d,f)}}),b.children.inorderTraversal((A,M)=>{const O=!t.serverCache.isCompleteForChild(A)&&void 0===M.value;if(!T.hasChild(A)&&!O){const ue=GT(0,t.serverCache.getNode().getImmediateChild(A),M);m=df(n,m,new Cn(A),ue,i,l,d,f)}}),m}class Ob{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Uu(r.getIndex()),l=function(n){return n.loadsAllData()?new Uu(n.getIndex()):n.hasLimit()?new la(n):new nf(n)}(r);this.processor_=function(n){return{filter:n}}(l);const d=e.serverCache,f=e.eventCache,m=i.updateFullNode(Dt.EMPTY_NODE,d.getNode(),null),b=l.updateFullNode(Dt.EMPTY_NODE,f.getNode(),null),T=new Gu(m,d.isFullyInitialized(),i.filtersNodes()),A=new Gu(b,f.isFullyInitialized(),l.filtersNodes());this.viewCache_=gg(A,T),this.eventGenerator_=new NT(this.query_)}get query(){return this.query_}}function Lb(n,t){const e=vd(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!rn(t)&&!e.getImmediateChild(en(t)).isEmpty())?e.getChild(t):null}function Vb(n){return 0===n.eventRegistrations_.length}function Bb(n,t,e){const r=[];if(e){(0,V.hu)(null==t,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(l=>{const d=l.createCancelEvent(e,i);d&&r.push(d)})}if(t){let i=[];for(let l=0;l<n.eventRegistrations_.length;++l){const d=n.eventRegistrations_[l];if(d.matches(t)){if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(l+1));break}}else i.push(d)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function Ub(n,t,e,r){t.type===Qs.MERGE&&null!==t.source.queryId&&((0,V.hu)(vd(n.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(sy(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,l=function(n,t,e,r,i){const l=new vF;let d,f;if(e.type===Qs.OVERWRITE){const b=e;b.source.fromUser?d=bg(n,t,b.path,b.snap,r,i,l):((0,V.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered()&&!rn(b.path),d=df(n,t,b.path,b.snap,r,i,f,l))}else if(e.type===Qs.MERGE){const b=e;b.source.fromUser?d=function(n,t,e,r,i,l,d){let f=t;return r.foreach((m,b)=>{const T=wr(e,m);kb(t,en(T))&&(f=bg(n,f,T,b,i,l,d))}),r.foreach((m,b)=>{const T=wr(e,m);kb(t,en(T))||(f=bg(n,f,T,b,i,l,d))}),f}(n,t,b.path,b.children,r,i,l):((0,V.hu)(b.source.fromServer,"Unknown source."),f=b.source.tagged||t.serverCache.isFiltered(),d=wg(n,t,b.path,b.children,r,i,f,l))}else if(e.type===Qs.ACK_USER_WRITE){const b=e;d=b.revert?function(n,t,e,r,i,l){let d;if(null!=yg(r,e))return t;{const f=new HT(r,t,i),m=t.eventCache.getNode();let b;if(rn(e)||".priority"===en(e)){let T;if(t.serverCache.isFullyInitialized())T=ly(r,vd(t));else{const A=t.serverCache.getNode();(0,V.hu)(A instanceof Dt,"serverChildren would be complete if leaf node"),T=Sb(r,A)}T=T,b=n.filter.updateFullNode(m,T,l)}else{const T=en(e);let A=uy(r,T,t.serverCache);null==A&&t.serverCache.isCompleteForChild(T)&&(A=m.getImmediateChild(T)),b=null!=A?n.filter.updateChild(m,T,A,tr(e),f,l):t.eventCache.getNode().hasChild(T)?n.filter.updateChild(m,T,Dt.EMPTY_NODE,tr(e),f,l):m,b.isEmpty()&&t.serverCache.isFullyInitialized()&&(d=ly(r,vd(t)),d.isLeafNode()&&(b=n.filter.updateFullNode(b,d,l)))}return d=t.serverCache.isFullyInitialized()||null!=yg(r,xn()),mg(t,b,d,n.filter.filtersNodes())}}(n,t,b.path,r,i,l):function(n,t,e,r,i,l,d){if(null!=yg(i,e))return t;const f=t.serverCache.isFiltered(),m=t.serverCache;if(null!=r.value){if(rn(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return df(n,t,e,m.getNode().getChild(e),i,l,f,d);if(rn(e)){let b=new nr(null);return m.getNode().forEachChild(oa,(T,A)=>{b=b.set(new Cn(T),A)}),wg(n,t,e,b,i,l,f,d)}return t}{let b=new nr(null);return r.foreach((T,A)=>{const M=wr(e,T);m.isCompleteForPath(M)&&(b=b.set(T,m.getNode().getChild(M)))}),wg(n,t,e,b,i,l,f,d)}}(n,t,b.path,b.affectedTree,r,i,l)}else{if(e.type!==Qs.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+e.type);d=function(n,t,e,r,i){const l=t.serverCache;return jT(n,Db(t,l.getNode(),l.isFullyInitialized()||rn(e),l.isFiltered()),e,r,$T,i)}(n,t,e.path,r,l)}const m=l.getChanges();return function(n,t,e){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=sy(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&e.push(DT(sy(t)))}}(t,d,m),{viewCache:d,changes:m}}(n.processor_,i,t,e,r);return function(n,t){(0,V.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,V.hu)(l.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,Hb(n,l.changes,l.viewCache.eventCache.getNode(),null)}function Hb(n,t,e,r){return function(n,t,e,r){const i=[],l=[];return t.forEach(d=>{"child_changed"===d.type&&n.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&l.push(function(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(d.childName,d.snapshotNode))}),pg(n,i,"child_removed",t,r,e),pg(n,i,"child_added",t,r,e),pg(n,i,"child_moved",l,r,e),pg(n,i,"child_changed",t,r,e),pg(n,i,"value",t,r,e),i}(n.eventGenerator_,t,e,r?[r]:n.eventRegistrations_)}let dy,gy;class jb{constructor(){this.views=new Map}}function fy(n,t,e,r){const i=t.source.queryId;if(null!==i){const l=n.views.get(i);return(0,V.hu)(null!=l,"SyncTree gave us an op for an invalid query."),Ub(l,t,e,r)}{let l=[];for(const d of n.views.values())l=l.concat(Ub(d,t,e,r));return l}}function qb(n,t,e,r,i){const d=n.views.get(t._queryIdentifier);if(!d){let f=ly(e,i?r:null),m=!1;f?m=!0:r instanceof Dt?(f=Sb(e,r),m=!1):(f=Dt.EMPTY_NODE,m=!1);const b=gg(new Gu(f,m,!1),new Gu(r,i,!1));return new Ob(t,b)}return d}function Wb(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function ql(n,t){let e=null;for(const r of n.views.values())e=e||Lb(r,t);return e}function Zb(n,t){return t._queryParams.loadsAllData()?py(n):n.views.get(t._queryIdentifier)}function zb(n,t){return null!=Zb(n,t)}function wd(n){return null!=py(n)}function py(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ci=1;class Yb{constructor(t){this.listenProvider_=t,this.syncPointTree_=new nr(null),this.pendingWriteTree_={visibleWrites:el.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Kb(n,t,e,r,i){return function(n,t,e,r,i){(0,V.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=oy(n.visibleWrites,t,e)),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r,i),i?qu(n,new _d({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Wl(n,t,e=!1){const r=function(n,t){for(let e=0;e<n.allWrites.length;e++){const r=n.allWrites[e];if(r.writeId===t)return r}return null}(n.pendingWriteTree_,t);if(function(n,t){const e=n.allWrites.findIndex(f=>f.writeId===t);(0,V.hu)(e>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,l=!1,d=n.allWrites.length-1;for(;i&&d>=0;){const f=n.allWrites[d];f.visible&&(d>=e&&hx(f,r.path)?i=!1:No(r.path,f.path)&&(l=!0)),d--}return!!i&&(l?(function(n){n.visibleWrites=Ab(n.allWrites,fx,xn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=kT(n.visibleWrites,r.path):Lr(r.children,m=>{n.visibleWrites=kT(n.visibleWrites,wr(r.path,m))}),!0))}(n.pendingWriteTree_,t)){let l=new nr(null);return null!=r.snap?l=l.set(xn(),!0):Lr(r.children,d=>{l=l.set(new Cn(d),!0)}),qu(n,new fg(r.path,l,e))}return[]}function Cg(n,t,e){return qu(n,new _d({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function Jb(n,t,e,r){const i=t._path,l=n.syncPointTree_.get(i);let d=[];if(l&&("default"===t._queryIdentifier||zb(l,t))){const f=function(n,t,e,r){const i=t._queryIdentifier,l=[];let d=[];const f=wd(n);if("default"===i)for(const[m,b]of n.views.entries())d=d.concat(Bb(b,e,r)),Vb(b)&&(n.views.delete(m),b.query._queryParams.loadsAllData()||l.push(b.query));else{const m=n.views.get(i);m&&(d=d.concat(Bb(m,e,r)),Vb(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||l.push(m.query)))}return f&&!wd(n)&&l.push(new((0,V.hu)(dy,"Reference.ts has not been loaded"),dy)(t._repo,t._path)),{removed:l,events:d}}(l,t,e,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;d=f.events;const b=-1!==m.findIndex(A=>A._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(A,M)=>wd(M));if(b&&!T){const A=n.syncPointTree_.subtree(i);if(!A.isEmpty()){const M=function(n){return n.fold((t,e,r)=>{if(e&&wd(e))return[py(e)];{let i=[];return e&&(i=Wb(e)),Lr(r,(l,d)=>{i=i.concat(d)}),i}})}(A);for(let O=0;O<M.length;++O){const q=M[O],ue=q.query,be=tD(n,q);n.listenProvider_.startListening(Dg(ue),Tg(n,ue),be.hashFn,be.onComplete)}}}if(!T&&m.length>0&&!r)if(b){const A=null;n.listenProvider_.stopListening(Dg(t),A)}else m.forEach(A=>{const M=n.queryToTagMap.get(Xs(A));n.listenProvider_.stopListening(Dg(A),M)});!function(n,t){for(let e=0;e<t.length;++e){const r=t[e];if(!r._queryParams.loadsAllData()){const i=Xs(r),l=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(l)}}}(n,m)}return d}function eD(n,t,e){const r=t._path;let i=null,l=!1;n.syncPointTree_.foreachOnPath(r,(A,M)=>{const O=Kr(A,r);i=i||ql(M,O),l=l||wd(M)});let f,d=n.syncPointTree_.get(r);d?(l=l||wd(d),i=i||ql(d,xn())):(d=new jb,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=i?f=!0:(f=!1,i=Dt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((M,O)=>{const q=ql(O,xn());q&&(i=i.updateImmediateChild(M,q))}));const m=zb(d,t);if(!m&&!t._queryParams.loadsAllData()){const A=Xs(t);(0,V.hu)(!n.queryToTagMap.has(A),"View does not exist, but we have a tag");const M=ci++;n.queryToTagMap.set(A,M),n.tagToQueryMap.set(M,A)}let T=function(n,t,e,r,i,l){const d=qb(n,t,r,i,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,d),function(n,t){n.eventRegistrations_.push(t)}(d,e),function(n,t){const e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(or,(l,d)=>{r.push(tf(l,d))}),e.isFullyInitialized()&&r.push(DT(e.getNode())),Hb(n,r,e.getNode(),t)}(d,e)}(d,t,e,Ib(n.pendingWriteTree_,r),i,f);if(!m&&!l){const A=Zb(d,t);T=T.concat(function(n,t,e){const r=t._path,i=Tg(n,t),l=tD(n,e),d=n.listenProvider_.startListening(Dg(t),i,l.hashFn,l.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,V.hu)(!wd(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((b,T,A)=>{if(!rn(b)&&T&&wd(T))return[py(T).query];{let M=[];return T&&(M=M.concat(Wb(T).map(O=>O.query))),Lr(A,(O,q)=>{M=M.concat(q)}),M}});for(let b=0;b<m.length;++b){const T=m[b];n.listenProvider_.stopListening(Dg(T),Tg(n,T))}}return d}(n,t,A))}return T}function Eg(n,t,e){const i=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(d,f)=>{const b=ql(f,Kr(d,t));if(b)return b});return LT(i,t,l,e,!0)}function qu(n,t){return my(t,n.syncPointTree_,null,Ib(n.pendingWriteTree_,xn()))}function my(n,t,e,r){if(rn(n.path))return ca(n,t,e,r);{const i=t.get(xn());null==e&&null!=i&&(e=ql(i,xn()));let l=[];const d=en(n.path),f=n.operationForChild(d),m=t.children.get(d);if(m&&f){const b=e?e.getImmediateChild(d):null,T=Nb(r,d);l=l.concat(my(f,m,b,T))}return i&&(l=l.concat(fy(i,n,r,e))),l}}function ca(n,t,e,r){const i=t.get(xn());null==e&&null!=i&&(e=ql(i,xn()));let l=[];return t.children.inorderTraversal((d,f)=>{const m=e?e.getImmediateChild(d):null,b=Nb(r,d),T=n.operationForChild(d);T&&(l=l.concat(ca(T,f,m,b)))}),i&&(l=l.concat(fy(i,n,r,e))),l}function tD(n,t){const e=t.query,r=Tg(n,e);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(t)||Dt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function(n,t,e){const r=eo(n,e);if(r){const i=to(r),l=i.path,d=i.queryId,f=Kr(l,t);return _y(n,l,new lf(iy(d),f))}return[]}(n,e._path,r):function(n,t){return qu(n,new lf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const l=function(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}(i,e);return Jb(n,e,null,l)}}}}function Tg(n,t){const e=Xs(t);return n.queryToTagMap.get(e)}function Xs(n){return n._path.toString()+"$"+n._queryIdentifier}function eo(n,t){return n.tagToQueryMap.get(t)}function to(n){const t=n.indexOf("$");return(0,V.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Cn(n.substr(0,t))}}function _y(n,t,e){const r=n.syncPointTree_.get(t);return(0,V.hu)(r,"Missing sync point for query tag that we're tracking"),fy(r,e,Ib(n.pendingWriteTree_,t),null)}function Dg(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,V.hu)(gy,"Reference.ts has not been loaded"),gy)(n._repo,n._path):n}class Ig{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Ig(e)}node(){return this.node_}}class Cd{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=wr(this.path_,t);return new Cd(this.syncTree_,e)}node(){return Eg(this.syncTree_,this.path_)}}const Qb=function(n,t,e){return n&&"object"==typeof n?((0,V.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Sx(n[".sv"],t,e):"object"==typeof n[".sv"]?rD(n[".sv"],t):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Sx=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:(0,V.hu)(!1,"Unexpected server value: "+n)}},rD=function(n,t,e){n.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,V.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,V.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const d=i.getValue();return"number"!=typeof d?r:d+r},Xb=function(n,t,e,r){return ew(t,new Cd(e,n),r)},ff=function(n,t,e){return ew(n,new Ig(t),e)};function ew(n,t,e){const r=n.getPriority().val(),i=Qb(r,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const d=n,f=Qb(d.getValue(),t,e);return f!==d.getValue()||i!==d.getPriority().val()?new Xh(f,Er(i)):n}{const d=n;return l=d,i!==d.getPriority().val()&&(l=l.updatePriority(new Xh(i))),d.forEachChild(or,(f,m)=>{const b=ew(m,t.getImmediateChild(f),e);b!==m&&(l=l.updateImmediateChild(f,b))}),l}}class yy{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}}function Ag(n,t){let e=t instanceof Cn?t:new Cn(t),r=n,i=en(e);for(;null!==i;){const l=(0,V.DV)(r.node.children,i)||{children:{},childCount:0};r=new yy(i,r,l),e=tr(e),i=en(e)}return r}function Zl(n){return n.node.value}function pf(n,t){n.node.value=t,by(n)}function vy(n){return n.node.childCount>0}function Sg(n,t){Lr(n.node.children,(e,r)=>{t(new yy(e,n,r))})}function tw(n,t,e,r){e&&!r&&t(n),Sg(n,i=>{tw(i,t,!0,r)}),e&&r&&t(n)}function gf(n){return new Cn(null===n.parent?n.name:gf(n.parent)+"/"+n.name)}function by(n){null!==n.parent&&function(n,t,e){const r=function(n){return void 0===Zl(n)&&!vy(n)}(e),i=(0,V.r3)(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,by(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,by(n))}(n.parent,n.name,n)}const Nx=/[\[\].#$\/\u0000-\u001F\u007F]/,xx=/[\[\].#$\u0000-\u001F\u007F]/,nw=10485760,Ng=function(n){return"string"==typeof n&&0!==n.length&&!Nx.test(n)},aD=function(n){return"string"==typeof n&&0!==n.length&&!xx.test(n)},xg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!sa(n)||n&&"object"==typeof n&&(0,V.r3)(n,".sv")},nl=function(n,t,e,r){r&&void 0===t||Mg((0,V.gK)(n,"value"),t,e)},Mg=function(n,t,e){const r=e instanceof Cn?new Jh(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+hd(r));if("function"==typeof t)throw new Error(n+"contains a function "+hd(r)+" with contents = "+t.toString());if(sa(t))throw new Error(n+"contains "+t.toString()+" "+hd(r));if("string"==typeof t&&t.length>nw/3&&(0,V.ug)(t)>nw)throw new Error(n+"contains a string greater than "+nw+" utf8 bytes "+hd(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,l=!1;if(Lr(t,(d,f)=>{if(".value"===d)i=!0;else if(".priority"!==d&&".sv"!==d&&(l=!0,!Ng(d)))throw new Error(n+" contains an invalid key ("+d+") "+hd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,V.ug)(t),fT(n)})(r,d),Mg(n,f,r),function(n){const t=n.parts_.pop();n.byteLength_-=(0,V.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&l)throw new Error(n+' contains ".value" child '+hd(r)+" in addition to actual children.")}},lD=function(n,t,e,r){if(r&&void 0===t)return;const i=(0,V.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const l=[];Lr(t,(d,f)=>{const m=new Cn(d);if(Mg(i,f,wr(e,m)),".priority"===j_(m)&&!xg(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(m)}),function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];const l=dd(r);for(let d=0;d<l.length;d++)if((".priority"!==l[d]||d!==l.length-1)&&!Ng(l[d]))throw new Error(n+"contains an invalid key ("+l[d]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(hT);let i=null;for(e=0;e<t.length;e++){if(r=t[e],null!==i&&No(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,l)},rw=function(n,t,e){if(!e||void 0!==t){if(sa(t))throw new Error((0,V.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xg(t))throw new Error((0,V.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Rg=function(n,t,e,r){if(!(r&&void 0===e||Ng(e)))throw new Error((0,V.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kg=function(n,t,e,r){if(!(r&&void 0===e||aD(e)))throw new Error((0,V.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mo=function(n,t){if(".info"===en(t))throw new Error(n+" failed = Can't modify data under /.info/")},uD=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ng(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),aD(n)}(e))throw new Error((0,V.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Px{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Pg(n,t){let e=null;for(let r=0;r<t.length;r++){const i=t[r],l=i.getPath();null!==e&&!gb(l,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:l}),e.events.push(i)}e&&n.eventLists_.push(e)}function wy(n,t,e){Pg(n,e),iw(n,r=>gb(r,t))}function no(n,t,e){Pg(n,e),iw(n,r=>No(r,t)||No(t,r))}function iw(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(t(i.path)?(cD(n.eventLists_[r]),n.eventLists_[r]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function cD(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const r=e.getEventRunner();jh&&bi("event: "+e.toString()),Vu(r)}}}const sw="repo_interrupt";class hD{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Px,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Gl(),this.transactionQueueTree_=new yy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Cy(n){const e=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function mf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Cy(n)})}function Wu(n,t,e,r,i){n.dataUpdateCount++;const l=new Cn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let d=[];if(i)if(r){const m=(0,V.UI)(e,b=>Er(b));d=function(n,t,e,r){const i=eo(n,r);if(i){const l=to(i),d=l.path,f=l.queryId,m=Kr(d,t),b=nr.fromObject(e);return _y(n,d,new yd(iy(f),m,b))}return[]}(n.serverSyncTree_,l,m,i)}else{const m=Er(e);d=function(n,t,e,r){const i=eo(n,r);if(null!=i){const l=to(i),d=l.path,f=l.queryId,m=Kr(d,t);return _y(n,d,new _d(iy(f),m,e))}return[]}(n.serverSyncTree_,l,m,i)}else if(r){const m=(0,V.UI)(e,b=>Er(b));d=function(n,t,e){const r=nr.fromObject(e);return qu(n,new yd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,l,m)}else{const m=Er(e);d=Cg(n.serverSyncTree_,l,m)}let f=l;d.length>0&&(f=Ed(n,l)),no(n.eventQueue_,f,d)}function pD(n,t){Zu(n,"connected",t),!1===t&&function(n){zl(n,"onDisconnectEvents");const t=mf(n),e=Gl();ju(n.onDisconnect_,xn(),(i,l)=>{const d=Xb(i,l,n.serverSyncTree_,t);ua(e,i,d)});let r=[];ju(e,xn(),(i,l)=>{r=r.concat(Cg(n.serverSyncTree_,i,l));const d=cw(n,i);Ed(n,d)}),n.onDisconnect_=Gl(),no(n.eventQueue_,xn(),r)}(n)}function Zu(n,t,e){const r=new Cn("/.info/"+t),i=Er(e);n.infoData_.updateSnapshot(r,i);const l=Cg(n.infoSyncTree_,r,i);no(n.eventQueue_,r,l)}function ow(n){return n.nextWriteId_++}function gD(n,t,e,r,i){zl(n,"set",{path:t.toString(),value:e,priority:r});const l=mf(n),d=Er(e,r),f=Eg(n.serverSyncTree_,t),m=ff(d,f,l),b=ow(n),T=Kb(n.serverSyncTree_,t,m,b,!0);Pg(n.eventQueue_,T),n.server_.put(t.toString(),d.val(!0),(M,O)=>{const q="ok"===M;q||Oi("set at "+t+" failed: "+M);const ue=Wl(n.serverSyncTree_,b,!q);no(n.eventQueue_,t,ue),qn(0,i,M,O)});const A=cw(n,t);Ed(n,A),no(n.eventQueue_,A,[])}function CF(n,t,e){n.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&Hu(n.onDisconnect_,t),qn(0,e,r,i)})}function It(n,t,e,r){const i=Er(e);n.server_.onDisconnectPut(t.toString(),i.val(!0),(l,d)=>{"ok"===l&&ua(n.onDisconnect_,t,i),qn(0,r,l,d)})}function _f(n,t,e){let r;r=".info"===en(t._path)?Jb(n.infoSyncTree_,t,e):Jb(n.serverSyncTree_,t,e),wy(n.eventQueue_,t._path,r)}function yD(n){n.persistentConnection_&&n.persistentConnection_.interrupt(sw)}function zl(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),bi(e,...t)}function qn(n,t,e,r){t&&Vu(()=>{if("ok"===e)t(null);else{const i=(e||"error").toUpperCase();let l=i;r&&(l+=": "+r);const d=new Error(l);d.code=i,t(d)}})}function Ty(n,t,e){return Eg(n.serverSyncTree_,t,e)||Dt.EMPTY_NODE}function yf(n,t=n.transactionQueueTree_){if(t||Dy(n,t),Zl(t)){const e=uw(n,t);(0,V.hu)(e.length>0,"Sending zero length transaction queue"),e.every(i=>0===i.status)&&function(n,t,e){const r=e.map(b=>b.currentWriteId),i=Ty(n,t,r);let l=i;const d=i.hash();for(let b=0;b<e.length;b++){const T=e[b];(0,V.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const A=Kr(t,T.path);l=l.updateChild(A,T.currentOutputSnapshotRaw)}const f=l.val(!0),m=t;n.server_.put(m.toString(),f,b=>{zl(n,"transaction put response",{path:m.toString(),status:b});let T=[];if("ok"===b){const A=[];for(let M=0;M<e.length;M++)e[M].status=2,T=T.concat(Wl(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&A.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();Dy(n,Ag(n.transactionQueueTree_,t)),yf(n,n.transactionQueueTree_),no(n.eventQueue_,t,T);for(let M=0;M<A.length;M++)Vu(A[M])}else{if("datastale"===b)for(let A=0;A<e.length;A++)e[A].status=3===e[A].status?4:0;else{Oi("transaction at "+m.toString()+" failed: "+b);for(let A=0;A<e.length;A++)e[A].status=4,e[A].abortReason=b}Ed(n,t)}},d)}(n,gf(t),e)}else vy(t)&&Sg(t,e=>{yf(n,e)})}function Ed(n,t){const e=lw(n,t),r=gf(e);return function(n,t,e){if(0===t.length)return;const r=[];let i=[];const d=t.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<t.length;f++){const m=t[f],b=Kr(e,m.path);let A,T=!1;if((0,V.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)T=!0,A=m.abortReason,i=i.concat(Wl(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)T=!0,A="maxretry",i=i.concat(Wl(n.serverSyncTree_,m.currentWriteId,!0));else{const M=Ty(n,m.path,d);m.currentInputSnapshot=M;const O=t[f].update(M.val());if(void 0!==O){Mg("transaction failed: Data returned ",O,m.path);let q=Er(O);"object"==typeof O&&null!=O&&(0,V.r3)(O,".priority")||(q=q.updatePriority(M.getPriority()));const be=m.currentWriteId,Ge=mf(n),Ke=ff(q,M,Ge);m.currentOutputSnapshotRaw=q,m.currentOutputSnapshotResolved=Ke,m.currentWriteId=ow(n),d.splice(d.indexOf(be),1),i=i.concat(Kb(n.serverSyncTree_,m.path,Ke,m.currentWriteId,m.applyLocally)),i=i.concat(Wl(n.serverSyncTree_,be,!0))}else T=!0,A="nodata",i=i.concat(Wl(n.serverSyncTree_,m.currentWriteId,!0))}no(n.eventQueue_,e,i),i=[],T&&(t[f].status=2,setTimeout(t[f].unwatcher,Math.floor(0)),t[f].onComplete&&r.push("nodata"===A?()=>t[f].onComplete(null,!1,t[f].currentInputSnapshot):()=>t[f].onComplete(new Error(A),!1,null)))}Dy(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)Vu(r[f]);yf(n,n.transactionQueueTree_)}(n,uw(n,e),r),r}function lw(n,t){let e,r=n.transactionQueueTree_;for(e=en(t);null!==e&&void 0===Zl(r);)r=Ag(r,e),e=en(t=tr(t));return r}function uw(n,t){const e=[];return bD(n,t,e),e.sort((r,i)=>r.order-i.order),e}function bD(n,t,e){const r=Zl(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);Sg(t,i=>{bD(n,i,e)})}function Dy(n,t){const e=Zl(t);if(e){let r=0;for(let i=0;i<e.length;i++)2!==e[i].status&&(e[r]=e[i],r++);e.length=r,pf(t,e.length>0?e:void 0)}Sg(t,r=>{Dy(n,r)})}function cw(n,t){const e=gf(lw(n,t)),r=Ag(n.transactionQueueTree_,t);return function(n,t,e){let r=n.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{Td(n,i)}),Td(n,r),tw(r,i=>{Td(n,i)}),e}function Td(n,t){const e=Zl(t);if(e){const r=[];let i=[],l=-1;for(let d=0;d<e.length;d++)3===e[d].status||(1===e[d].status?((0,V.hu)(l===d-1,"All SENT items should be at beginning of queue."),l=d,e[d].status=3,e[d].abortReason="set"):((0,V.hu)(0===e[d].status,"Unexpected transaction status in abort"),e[d].unwatcher(),i=i.concat(Wl(n.serverSyncTree_,e[d].currentWriteId,!0)),e[d].onComplete&&r.push(e[d].onComplete.bind(null,new Error("set"),!1,null))));-1===l?pf(t,void 0):e.length=l+1,no(n.eventQueue_,gf(t),i);for(let d=0;d<r.length;d++)Vu(r[d])}}const dw=function(n,t){const e=Iy(n),r=e.namespace;return"firebase.com"===e.domain&&ia(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==e.domain&&ia("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rT(e.host,e.secure,r,"ws"===e.scheme||"wss"===e.scheme,t,"",r!==e.subdomain),path:new Cn(e.pathString)}},Iy=function(n){let t="",e="",r="",i="",l="",d=!0,f="https",m=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(f=n.substring(0,b-1),n=n.substring(b+2));let T=n.indexOf("/");-1===T&&(T=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),t=n.substring(0,Math.min(T,A)),T<A&&(i=function(n){let t="";const e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(l){}t+="/"+i}return t}(n.substring(T,A)));const M=function(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const r=e.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oi(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,A)));b=t.indexOf(":"),b>=0?(d="https"===f||"wss"===f,m=parseInt(t.substring(b+1),10)):b=t.length;const O=t.slice(0,b);if("localhost"===O.toLowerCase())e="localhost";else if(O.split(".").length<=2)e=O;else{const q=t.indexOf(".");r=t.substring(0,q).toLowerCase(),e=t.substring(q+1),l=r}"ns"in M&&(l=M.ns)}return{host:t,port:m,domain:e,subdomain:r,secure:d,scheme:f,pathString:i,namespace:l}};class hw{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Pz)(this.snapshot.exportVal())}}class fw{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pw{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class wD{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new V.BH;return CF(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Mo("OnDisconnect.remove",this._path);const t=new V.BH;return It(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Mo("OnDisconnect.set",this._path),nl("OnDisconnect.set",t,this._path,!1);const e=new V.BH;return It(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Mo("OnDisconnect.setWithPriority",this._path),nl("OnDisconnect.setWithPriority",t,this._path,!1),rw("OnDisconnect.setWithPriority",e,!1);const r=new V.BH;return function(n,t,e,r,i){const l=Er(e,r);n.server_.onDisconnectPut(t.toString(),l.val(!0),(d,f)=>{"ok"===d&&ua(n.onDisconnect_,t,l),qn(0,i,d,f)})}(this._repo,this._path,t,e,r.wrapCallback(()=>{})),r.promise}update(t){Mo("OnDisconnect.update",this._path),lD("OnDisconnect.update",t,this._path,!1);const e=new V.BH;return function(n,t,e,r){if((0,V.xb)(e))return bi("onDisconnect().update() called with empty data.  Don't do anything."),void qn(0,r,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(i,l)=>{"ok"===i&&Lr(e,(d,f)=>{const m=Er(f);ua(n.onDisconnect_,wr(t,d),m)}),qn(0,r,i,l)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Ei{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return rn(this._path)?null:j_(this._path)}get ref(){return new Ro(this._repo,this._path)}get _queryIdentifier(){const t=ty(this._queryParams),e=z0(t);return"{}"===e?"default":e}get _queryObject(){return ty(this._queryParams)}isEqual(t){if(!((t=(0,V.m9)(t))instanceof Ei))return!1;const e=this._repo===t._repo,r=gb(this._path,t._path);return e&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function zu(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Yu(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===oa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ll)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Vl)throw new Error(r);if("string"!=typeof e)throw new Error(i)}}else if(n.getIndex()===or){if(null!=t&&!xg(t)||null!=e&&!xg(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,V.hu)(n.getIndex()instanceof J_||n.getIndex()===Cb,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ay(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ro extends Ei{constructor(t,e){super(t,e,new $u,!1)}get parent(){const t=dT(this._path);return null===t?null:new Ro(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Ku{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Cn(t),r=Dd(this.ref,t);return new Ku(this._node.getChild(e),r,or)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new Ku(i,Dd(this.ref,r),or)))}hasChild(t){const e=new Cn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gw(n,t){return(n=(0,V.m9)(n))._checkNotDeleted("ref"),void 0!==t?Dd(n._root,t):n._root}function mw(n,t){(n=(0,V.m9)(n))._checkNotDeleted("refFromURL");const e=dw(t,n._repo.repoInfo_.nodeAdmin);uD("refFromURL",e);const r=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&ia("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),gw(n,e.path.toString())}function Dd(n,t){return null===en((n=(0,V.m9)(n))._path)?((e=t)&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),kg("child","path",e,!1)):kg("child","path",t,!1),new Ro(n._repo,wr(n._path,t));var e}function CD(n,t){n=(0,V.m9)(n),Mo("set",n._path),nl("set",t,n._path,!1);const e=new V.BH;return gD(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function IF(n,t){lD("update",t,n._path,!1);const e=new V.BH;return function(n,t,e,r){zl(n,"update",{path:t.toString(),value:e});let i=!0;const l=mf(n),d={};if(Lr(e,(f,m)=>{i=!1,d[f]=Xb(wr(t,f),Er(m),n.serverSyncTree_,l)}),i)bi("update() called with empty data.  Don't do anything."),qn(0,r,"ok",void 0);else{const f=ow(n),m=function(n,t,e,r){!function(n,t,e,r){(0,V.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=RT(n.visibleWrites,t,e),n.lastWriteId=r}(n.pendingWriteTree_,t,e,r);const i=nr.fromObject(e);return qu(n,new yd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,t,d,f);Pg(n.eventQueue_,m),n.server_.merge(t.toString(),e,(b,T)=>{const A="ok"===b;A||Oi("update at "+t+" failed: "+b);const M=Wl(n.serverSyncTree_,f,!A),O=M.length>0?Ed(n,t):t;no(n.eventQueue_,O,M),qn(0,r,b,T)}),Lr(e,b=>{const T=cw(n,wr(t,b));Ed(n,T)}),no(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function ED(n){return function(n,t){const e=function(n,t){const e=t._path;let r=null;n.syncPointTree_.foreachOnPath(e,(b,T)=>{const A=Kr(b,e);r=r||ql(T,A)});let i=n.syncPointTree_.get(e);i?r=r||ql(i,xn()):(i=new jb,n.syncPointTree_=n.syncPointTree_.set(e,i));const l=null!=r,d=l?new Gu(r,!0,!1):null;return function(n){return sy(n.viewCache_)}(qb(i,t,Ib(n.pendingWriteTree_,t._path),l?d.getNode():Dt.EMPTY_NODE,l))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(r=>{const i=Er(r).withIndex(t._queryParams.getIndex()),l=Cg(n.serverSyncTree_,t._path,i);return wy(n.eventQueue_,t._path,l),Promise.resolve(i)},r=>(zl(n,"get for query "+(0,V.Pz)(t)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,V.m9)(n))._repo,n).then(t=>new Ku(t,new Ro(n._repo,n._path),n._queryParams.getIndex()))}class Id{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const r=e._queryParams.getIndex();return new hw("value",this,new Ku(t.snapshotNode,new Ro(e._repo,e._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new fw(this,t,e):null}matches(t){return t instanceof Id&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Sy{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new fw(this,t,e):null}createEvent(t,e){(0,V.hu)(null!=t.childName,"Child events should have a childName.");const r=Dd(new Ro(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new hw(t.type,this,new Ku(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Sy&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Og(n,t,e,r,i){let l;if("object"==typeof r&&(l=void 0,i=r),"function"==typeof r&&(l=r),i&&i.onlyOnce){const m=e,b=(T,A)=>{_f(n._repo,n,f),m(T,A)};b.userCallback=e.userCallback,b.context=e.context,e=b}const d=new pw(e,l||void 0),f="value"===t?new Id(d):new Sy(t,d);return function(n,t,e){let r;r=".info"===en(t._path)?eD(n.infoSyncTree_,t,e):eD(n.serverSyncTree_,t,e),wy(n.eventQueue_,t._path,r)}(n._repo,n,f),()=>_f(n._repo,n,f)}function Ny(n,t,e,r){return Og(n,"value",t,e,r)}function vf(n,t,e,r){return Og(n,"child_added",t,e,r)}function TD(n,t,e,r){return Og(n,"child_changed",t,e,r)}function DD(n,t,e,r){return Og(n,"child_moved",t,e,r)}function ID(n,t,e,r){return Og(n,"child_removed",t,e,r)}function AD(n,t,e){let r=null;const i=e?new pw(e):null;"value"===t?r=new Id(i):t&&(r=new Sy(t,i)),_f(n._repo,n,r)}class da{}class _w extends da{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){nl("endAt",this._value,t._path,!0);const e=Ci(t._queryParams,this._value,this._key);if(Ay(e),Yu(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ei(t._repo,t._path,e,t._orderByCalled)}}class Wx extends da{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){nl("endBefore",this._value,t._path,!1);const e=function(n,t,e){let r,i;return n.index_===oa?("string"==typeof t&&(t=TT(t)),i=Ci(n,t,e)):(r=null==e?Ll:TT(e),i=Ci(n,t,r)),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(Ay(e),Yu(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ei(t._repo,t._path,e,t._orderByCalled)}}class SD extends da{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){nl("startAt",this._value,t._path,!0);const e=xo(t._queryParams,this._value,this._key);if(Ay(e),Yu(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ei(t._repo,t._path,e,t._orderByCalled)}}class Zx extends da{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){nl("startAfter",this._value,t._path,!1);const e=function(n,t,e){let r;if(n.index_===oa)"string"==typeof t&&(t=ET(t)),r=xo(n,t,e);else{let i;i=null==e?Vl:ET(e),r=xo(n,t,i)}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Ay(e),Yu(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ei(t._repo,t._path,e,t._orderByCalled)}}class zx extends da{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ei(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class Yx extends da{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ei(t._repo,t._path,function(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class Kx extends da{constructor(t){super(),this._path=t}_apply(t){zu(t,"orderByChild");const e=new Cn(this._path);if(rn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new J_(e),i=gd(t._queryParams,r);return Yu(i),new Ei(t._repo,t._path,i,!0)}}class kD extends da{_apply(t){zu(t,"orderByKey");const e=gd(t._queryParams,oa);return Yu(e),new Ei(t._repo,t._path,e,!0)}}class Qx extends da{_apply(t){zu(t,"orderByPriority");const e=gd(t._queryParams,or);return Yu(e),new Ei(t._repo,t._path,e,!0)}}class vw extends da{_apply(t){zu(t,"orderByValue");const e=gd(t._queryParams,Cb);return Yu(e),new Ei(t._repo,t._path,e,!0)}}class PD extends da{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(nl("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _w(this._value,this._key)._apply(new SD(this._value,this._key)._apply(t))}}function ha(n,...t){let e=(0,V.m9)(n);for(const r of t)e=r._apply(e);return e}(function(n){(0,V.hu)(!dy,"__referenceConstructor has already been defined"),dy=n})(Ro),function(n){(0,V.hu)(!gy,"__referenceConstructor has already been defined"),gy=n}(Ro);const bw={};function FD(n,t,e,r,i){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||ia("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bi("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,b,d=dw(l,i),f=d.repoInfo;"undefined"!=typeof process&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(m=!0,l=`http://${b}?ns=${f.namespace}`,d=dw(l,i),f=d.repoInfo):m=!d.repoInfo.secure;const T=i&&m?new Yh(Yh.OWNER):new PN(n.name,n.options,t);uD("Invalid Firebase Database URL",d),rn(d.path)||ia("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function(n,t,e,r){let i=bw[t.name];i||(i={},bw[t.name]=i);let l=i[n.toURLString()];return l&&ia("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new hD(n,false,e,r),i[n.toURLString()]=l,l}(f,n,T,new B_(n.name,e));return new BD(A,n)}class BD{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,t,e){if(n.stats_=nb(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jl(n.repoInfo_,(r,i,l,d)=>{Wu(n,r,i,l,d)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pD(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Pz)(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Qh(n.repoInfo_,t,(r,i,l,d)=>{Wu(n,r,i,l,d)},r=>{pD(n,r)},r=>{!function(n,t){Lr(t,(e,r)=>{Zu(n,e,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,t){const e=n.toString();return U_[e]||(U_[e]=t()),U_[e]}(n.repoInfo_,()=>new ST(n.stats_,n.server_)),n.infoData_=new rf,n.infoSyncTree_=new Yb({startListening:(r,i,l,d)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Cg(n.infoSyncTree_,r._path,m),setTimeout(()=>{d("ok")},0)),f},stopListening:()=>{}}),Zu(n,"connected",!1),n.serverSyncTree_=new Yb({startListening:(r,i,l,d)=>(n.server_.listen(r,l,i,(f,m)=>{const b=d(f,m);no(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ro(this._repo,xn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,t){const e=bw[t];(!e||e[n.key]!==n)&&ia(`Database ${t}(${n.repoInfo_}) has already been deleted.`),yD(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ia("Cannot call "+t+" on a deleted database.")}}function oM(n,t){L_(n,t)}class aM{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Qh.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Qh.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},SN(_s.SDK_VERSION),(0,_s._registerComponent)(new Ka.wA("database",(t,{instanceIdentifier:e})=>FD(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,_s.registerVersion)(Z0,"0.12.8",void 0),(0,_s.registerVersion)(Z0,"0.12.8","esm2017");const GD=new So.Yd("@firebase/database-compat"),Dw=function(n){GD.warn("FIREBASE WARNING: "+n)};class cM{constructor(t){this._delegate=t}cancel(t){(0,V.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,V.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),r=>t(r)),e}remove(t){(0,V.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,V.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),r=>t(r)),e}set(t,e){(0,V.Dv)("OnDisconnect.set",1,2,arguments.length),(0,V.Wj)("OnDisconnect.set","onComplete",e,!0);const r=this._delegate.set(t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,V.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,V.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(t,e);return r&&i.then(()=>r(null),l=>r(l)),i}update(t,e){if((0,V.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,Dw("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,V.Wj)("OnDisconnect.update","onComplete",e,!0);const r=this._delegate.update(t);return e&&r.then(()=>e(null),i=>e(i)),r}}class wf{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,V.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ad{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,V.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,V.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,V.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,V.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,V.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),kg("DataSnapshot.child","path",t,!1),new Ad(this._database,this._delegate.child(t))}hasChild(t){return(0,V.Dv)("DataSnapshot.hasChild",1,1,arguments.length),kg("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,V.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,V.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,V.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Ad(this._database,e)))}hasChildren(){return(0,V.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,V.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,V.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ki(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class di{constructor(t,e){this.database=t,this._delegate=e}on(t,e,r,i){var l;(0,V.Dv)("Query.on",2,4,arguments.length),(0,V.Wj)("Query.on","callback",e,!1);const d=di.getCancelAndContextArgs_("Query.on",r,i),f=(b,T)=>{e.call(d.context,new Ad(this.database,b),T)};f.userCallback=e,f.context=d.context;const m=null===(l=d.cancel)||void 0===l?void 0:l.bind(d.context);switch(t){case"value":return Ny(this._delegate,f,m),e;case"child_added":return vf(this._delegate,f,m),e;case"child_removed":return ID(this._delegate,f,m),e;case"child_changed":return TD(this._delegate,f,m),e;case"child_moved":return DD(this._delegate,f,m),e;default:throw new Error((0,V.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,r){if((0,V.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,V.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,V.Wj)("Query.off","callback",e,!0),(0,V.lb)("Query.off","context",r,!0),e){const i=()=>{};i.userCallback=e,i.context=r,AD(this._delegate,t,i)}else AD(this._delegate,t)}get(){return ED(this._delegate).then(t=>new Ad(this.database,t))}once(t,e,r,i){(0,V.Dv)("Query.once",1,4,arguments.length),(0,V.Wj)("Query.once","callback",e,!0);const l=di.getCancelAndContextArgs_("Query.once",r,i),d=new V.BH,f=(b,T)=>{const A=new Ad(this.database,b);e&&e.call(l.context,A,T),d.resolve(A)};f.userCallback=e,f.context=l.context;const m=b=>{l.cancel&&l.cancel.call(l.context,b),d.reject(b)};switch(t){case"value":Ny(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":vf(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":ID(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":TD(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":DD(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,V.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return d.promise}limitToFirst(t){return(0,V.Dv)("Query.limitToFirst",1,1,arguments.length),new di(this.database,ha(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new zx(n)}(t)))}limitToLast(t){return(0,V.Dv)("Query.limitToLast",1,1,arguments.length),new di(this.database,ha(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Yx(n)}(t)))}orderByChild(t){return(0,V.Dv)("Query.orderByChild",1,1,arguments.length),new di(this.database,ha(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kg("orderByChild","path",n,!1),new Kx(n)}(t)))}orderByKey(){return(0,V.Dv)("Query.orderByKey",0,0,arguments.length),new di(this.database,ha(this._delegate,new kD))}orderByPriority(){return(0,V.Dv)("Query.orderByPriority",0,0,arguments.length),new di(this.database,ha(this._delegate,new Qx))}orderByValue(){return(0,V.Dv)("Query.orderByValue",0,0,arguments.length),new di(this.database,ha(this._delegate,new vw))}startAt(t=null,e){return(0,V.Dv)("Query.startAt",0,2,arguments.length),new di(this.database,ha(this._delegate,function(n=null,t){return Rg("startAt","key",t,!0),new SD(n,t)}(t,e)))}startAfter(t=null,e){return(0,V.Dv)("Query.startAfter",0,2,arguments.length),new di(this.database,ha(this._delegate,function(n,t){return Rg("startAfter","key",t,!0),new Zx(n,t)}(t,e)))}endAt(t=null,e){return(0,V.Dv)("Query.endAt",0,2,arguments.length),new di(this.database,ha(this._delegate,function(n,t){return Rg("endAt","key",t,!0),new _w(n,t)}(t,e)))}endBefore(t=null,e){return(0,V.Dv)("Query.endBefore",0,2,arguments.length),new di(this.database,ha(this._delegate,function(n,t){return Rg("endBefore","key",t,!0),new Wx(n,t)}(t,e)))}equalTo(t,e){return(0,V.Dv)("Query.equalTo",1,2,arguments.length),new di(this.database,ha(this._delegate,function(n,t){return Rg("equalTo","key",t,!0),new PD(n,t)}(t,e)))}toString(){return(0,V.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,V.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,V.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof di))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,r){const i={cancel:void 0,context:void 0};if(e&&r)i.cancel=e,(0,V.Wj)(t,"cancel",i.cancel,!0),i.context=r,(0,V.lb)(t,"context",i.context,!0);else if(e)if("object"==typeof e&&null!==e)i.context=e;else{if("function"!=typeof e)throw new Error((0,V.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=e}return i}get ref(){return new Ki(this.database,new Ro(this._delegate._repo,this._delegate._path))}}class Ki extends di{constructor(t,e){super(t,new Ei(e._repo,e._path,new $u,!1)),this.database=t,this._delegate=e}getKey(){return(0,V.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,V.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Ki(this.database,Dd(this._delegate,t))}getParent(){(0,V.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Ki(this.database,t):null}getRoot(){return(0,V.Dv)("Reference.root",0,0,arguments.length),new Ki(this.database,this._delegate.root)}set(t,e){(0,V.Dv)("Reference.set",1,2,arguments.length),(0,V.Wj)("Reference.set","onComplete",e,!0);const r=CD(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}update(t,e){if((0,V.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const i={};for(let l=0;l<t.length;++l)i[""+l]=t[l];t=i,Dw("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Mo("Reference.update",this._delegate._path),(0,V.Wj)("Reference.update","onComplete",e,!0);const r=IF(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}setWithPriority(t,e,r){(0,V.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,V.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function(n,t,e){if(Mo("setWithPriority",n._path),nl("setWithPriority",t,n._path,!1),rw("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new V.BH;return gD(n._repo,n._path,t,e,r.wrapCallback(()=>{})),r.promise}(this._delegate,t,e);return r&&i.then(()=>r(null),l=>r(l)),i}remove(t){(0,V.Dv)("Reference.remove",0,1,arguments.length),(0,V.Wj)("Reference.remove","onComplete",t,!0);const e=function(n){return Mo("remove",n._path),CD(n,null)}(this._delegate);return t&&e.then(()=>t(null),r=>t(r)),e}transaction(t,e,r){(0,V.Dv)("Reference.transaction",1,3,arguments.length),(0,V.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,V.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,r){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,V.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function(n,t,e){var r;if(n=(0,V.m9)(n),Mo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==e?void 0:e.applyLocally)||void 0===r||r,l=new V.BH,f=Ny(n,()=>{});return function(n,t,e,r,i,l){zl(n,"transaction on "+t);const d={path:t,update:e,onComplete:r,status:null,order:xN(),applyLocally:l,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=Ty(n,t,void 0);d.currentInputSnapshot=f;const m=d.update(f.val());if(void 0===m)d.unwatcher(),d.currentOutputSnapshotRaw=null,d.currentOutputSnapshotResolved=null,d.onComplete&&d.onComplete(null,!1,d.currentInputSnapshot);else{Mg("transaction failed: Data returned ",m,d.path),d.status=0;const b=Ag(n.transactionQueueTree_,t),T=Zl(b)||[];let A;T.push(d),pf(b,T),"object"==typeof m&&null!==m&&(0,V.r3)(m,".priority")?(A=(0,V.DV)(m,".priority"),(0,V.hu)(xg(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(Eg(n.serverSyncTree_,t)||Dt.EMPTY_NODE).getPriority().val();const M=mf(n),O=Er(m,A),q=ff(O,f,M);d.currentOutputSnapshotRaw=O,d.currentOutputSnapshotResolved=q,d.currentWriteId=ow(n);const ue=Kb(n.serverSyncTree_,t,q,d.currentWriteId,d.applyLocally);no(n.eventQueue_,t,ue),yf(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(m,b,T)=>{let A=null;m?l.reject(m):(A=new Ku(T,new Ro(n._repo,n._path),or),l.resolve(new aM(b,A)))},f,i),l.promise}(this._delegate,t,{applyLocally:r}).then(l=>new wf(l.committed,new Ad(this.database,l.snapshot)));return e&&i.then(l=>e(null,l.committed,l.snapshot),l=>e(l,!1,null)),i}setPriority(t,e){(0,V.Dv)("Reference.setPriority",1,2,arguments.length),(0,V.Wj)("Reference.setPriority","onComplete",e,!0);const r=function(n,t){n=(0,V.m9)(n),Mo("setPriority",n._path),rw("setPriority",t,!1);const e=new V.BH;return gD(n._repo,wr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&r.then(()=>e(null),i=>e(i)),r}push(t,e){(0,V.Dv)("Reference.push",0,2,arguments.length),(0,V.Wj)("Reference.push","onComplete",e,!0);const r=function(n,t){n=(0,V.m9)(n),Mo("push",n._path),nl("push",t,n._path,!0);const e=Cy(n._repo),r=Eb(e),i=Dd(n,r),l=Dd(n,r);let d;return d=null!=t?CD(l,t).then(()=>l):Promise.resolve(l),i.then=d.then.bind(d),i.catch=d.then.bind(d,void 0),i}(this._delegate,t),i=r.then(d=>new Ki(this.database,d));e&&i.then(()=>e(null),d=>e(d));const l=new Ki(this.database,r);return l.then=i.then.bind(i),l.catch=i.catch.bind(i,void 0),l}onDisconnect(){return Mo("Reference.onDisconnect",this._delegate._path),new cM(new wD(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Fg{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(t,e,r={}){!function(n,t,e,r={}){(n=(0,V.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&ia("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let l;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ia('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Yh(Yh.OWNER);else if(r.mockUserToken){const d="string"==typeof r.mockUserToken?r.mockUserToken:(0,V.Sg)(r.mockUserToken,n.app.options.projectId);l=new Yh(d)}!function(n,t,e,r){n.repoInfo_=new rT(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,t,e,l)}(this._delegate,t,e,r)}ref(t){if((0,V.Dv)("database.ref",0,1,arguments.length),t instanceof Ki){const e=mw(this._delegate,t.toString());return new Ki(this,e)}{const e=gw(this._delegate,t);return new Ki(this,e)}}refFromURL(t){(0,V.Dv)("database.refFromURL",1,1,arguments.length);const r=mw(this._delegate,t);return new Ki(this,r)}goOffline(){return(0,V.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,V.m9)(n))._checkNotDeleted("goOffline"),yD(n._repo)}(this._delegate)}goOnline(){return(0,V.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,V.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(sw)}(n._repo)}(this._delegate)}}Fg.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var dM=Object.freeze({__proto__:null,initStandalone:function({app:n,url:t,version:e,customAuthImpl:r,namespace:i,nodeAdmin:l=!1}){SN(e);const d=new Ka.zt("auth-internal",new Ka.H0("database-standalone"));return d.setComponent(new Ka.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Fg(FD(n,d,void 0,t,l),n),namespace:i}}});const xF=Fg.ServerValue;!function(n){n.INTERNAL.registerComponent(new Ka.wA("database-compat",(t,{instanceIdentifier:e})=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("database").getImmediate({identifier:e});return new Fg(i,r)},"PUBLIC").setServiceProps({Reference:Ki,Query:di,Database:Fg,DataSnapshot:Ad,enableLogging:oM,INTERNAL:dM,ServerValue:xF}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.8")}(O_.Z);var Os=B(9746),WD=B(7771),MF=B(8858);class xy extends Tn.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new fM(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,l=r.length;let d;if(this.closed)throw new Il.N;if(this.isStopped||this.hasError?d=Ah.w.EMPTY:(this.observers.push(t),d=new MF.W(this,t)),i&&t.add(t=new Os.ht(t,i)),e)for(let f=0;f<l&&!t.closed;f++)t.next(r[f]);else for(let f=0;f<l&&!t.closed;f++)t.next(r[f].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),d}_getNow(){return(this.scheduler||WD.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,i=this._events,l=i.length;let d=0;for(;d<l&&!(t-i[d].time<r);)d++;return l>e&&(d=Math.max(d,l-e)),d>0&&i.splice(0,d),i}}class fM{constructor(t,e){this.time=t,this.value=e}}function ZD(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},i=>i.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let i,d,l=0,f=!1,m=!1;return function(T){let A;l++,!i||f?(f=!1,i=new xy(n,t,r),A=i.subscribe(this),d=T.subscribe({next(M){i.next(M)},error(M){f=!0,i.error(M)},complete(){m=!0,d=void 0,i.complete()}}),m&&(d=void 0)):A=i.subscribe(this),this.add(()=>{l--,A.unsubscribe(),A=void 0,d&&!m&&e&&0===l&&(d.unsubscribe(),d=void 0,i=void 0)})}}(r))}function zD(n,t){return t?sr(()=>n,t):sr(()=>n)}var Iw=B(2639);B(2329);const Nw=new Map,My={activated:!1,tokenObservers:[]},Ry={initialized:!1,enabled:!1};function Vr(n){return Nw.get(n)||My}function fa(n,t){Nw.set(n,t)}function ky(){return Ry}class TM{constructor(t,e,r,i,l){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ee.Z)(function*(){e.stop();try{e.pending=new V.BH,yield function(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new V.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(r){e.retryPolicy(r)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const ys=new V.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function tI(n){if(!Vr(n).activated)throw ys.create("use-before-activation",{appName:n.name})}function Rw(n,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,Ee.Z)(function*({url:n,body:t},e){const r={"Content-Type":"application/json"},i=e.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const l={method:"POST",body:JSON.stringify(t),headers:r};let d,f;try{d=yield fetch(n,l)}catch(A){throw ys.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==d.status)throw ys.create("fetch-status-error",{httpStatus:d.status});try{f=yield d.json()}catch(A){throw ys.create("fetch-parse-error",{originalErrorMessage:A.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(m[1]),T=Date.now();return{token:f.attestationToken,expireTimeMillis:T+b,issuedAtTimeMillis:T}})).apply(this,arguments)}function AM(n,t){const{projectId:e,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${e}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Ju="firebase-app-check-store";let Oy=null;function kw(){return Oy||(Oy=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(ys.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},e.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ju,{keyPath:"compositeKey"})}}}catch(e){t(ys.create("storage-open",{originalErrorMessage:e.message}))}}),Oy)}function Ow(){return(Ow=(0,Ee.Z)(function*(n,t){const r=(yield kw()).transaction(Ju,"readwrite"),l=r.objectStore(Ju).put({compositeKey:n,value:t});return new Promise((d,f)=>{l.onsuccess=m=>{d()},r.onerror=m=>{var b;f(ys.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Qu=new So.Yd("@firebase/app-check");function Df(n,t){return(0,V.hl)()?function(n,t){return function(n,t){return Ow.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{Qu.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Nd(){return ky().enabled}function If(){return uI.apply(this,arguments)}function uI(){return(uI=(0,Ee.Z)(function*(){const n=ky();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ko={error:"UNKNOWN_ERROR"};function Bw(n){return V.US.encodeString(JSON.stringify(n),!1)}function il(n){return cI.apply(this,arguments)}function cI(){return(cI=(0,Ee.Z)(function*(n,t=!1){const e=n.app;tI(e);const r=Vr(e);let l,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&vs(m)&&(i=m)}if(!t&&i&&vs(i))return{token:i.token};let f,d=!1;if(Nd()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Rw(AM(e,yield If()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),d=!0);const m=yield r.exchangeTokenPromise;return yield Df(e,m),fa(e,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),d=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Qu.warn(m.message):Qu.error(m),l=m}return i?(f={token:i.token},fa(e,Object.assign(Object.assign({},r),{token:i})),yield Df(e,i)):f=Nr(l),d&&dI(e,f),f})).apply(this,arguments)}function Vy(n,t){const e=Vr(n),r=e.tokenObservers.filter(i=>i.next!==t);0===r.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),fa(n,Object.assign(Object.assign({},e),{tokenObservers:r}))}function NM(n){const{app:t}=n,e=Vr(t);let r=e.tokenRefresher;r||(r=function(n){const{app:t}=n;return new TM((0,Ee.Z)(function*(){let r;if(r=Vr(t).token?yield il(n,!0):yield il(n),r.error)throw r.error}),()=>!0,()=>{const e=Vr(t);if(e.token){let r=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,e.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),fa(t,Object.assign(Object.assign({},e),{tokenRefresher:r}))),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function dI(n,t){const e=Vr(n).tokenObservers;for(const r of e)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(i){}}function vs(n){return n.expireTimeMillis-Date.now()>0}function Nr(n){return{token:Bw(ko),error:n}}class pa{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Vr(this.app);for(const e of t)Vy(this.app,e.next);return Promise.resolve()}}const PM="app-check-internal";(0,_s._registerComponent)(new Ka.wA("app-check",n=>function(n,t){return new pa(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(PM).initialize()})),(0,_s._registerComponent)(new Ka.wA(PM,n=>function(n){return{getToken:t=>il(n,t),addTokenListener:t=>function(n,t,e,r){const{app:i}=n,l=Vr(i),d={next:e,error:r,type:t};if(fa(i,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,d]})),l.token&&vs(l.token)){const f=l.token;Promise.resolve().then(()=>{e({token:f.token}),NM(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>NM(n))}(n,"INTERNAL",t),removeTokenListener:t=>Vy(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_s.registerVersion)("@firebase/app-check","0.5.6");class $g{constructor(){return(0,Dn.vb)("app-check")}}"undefined"!=typeof window&&window;var Yw=B(7841);const Hg=new a.OlP("angularfire2.auth.use-emulator"),Kw=new a.OlP("angularfire2.auth.settings"),EI=new a.OlP("angularfire2.auth.tenant-id"),Jw=new a.OlP("angularfire2.auth.langugage-code"),Qw=new a.OlP("angularfire2.auth.use-device-language"),Xw=new a.OlP("angularfire.auth.persistence"),e1=(n,t,e,r,i,l,d,f)=>(0,vi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=t.runOutsideAngular(()=>n.auth());if(e&&m.useEmulator(...e),r&&(m.tenantId=r),m.languageCode=i,l&&m.useDeviceLanguage(),d)for(const[b,T]of Object.entries(d))m.settings[b]=T;return f&&m.setPersistence(f),m},[e,r,i,l,d,f]);let jg=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A,M,O){const q=new Tn.xQ,ue=(0,dt.of)(void 0).pipe((0,Os.QV)(d.outsideAngular),sr(()=>l.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,4828)))),(0,ct.U)(()=>(0,vi.on)(e,l,r)),(0,ct.U)(be=>e1(be,l,f,b,T,A,m,M)),ZD({bufferSize:1,refCount:!1}));if(ph(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,dt.of)(null);else{ue.pipe(br()).subscribe();const Ge=ue.pipe(sr(ot=>ot.getRedirectResult().then(Lt=>Lt,()=>null)),Dn.iC,ZD({bufferSize:1,refCount:!1})),Ke=ue.pipe(sr(ot=>new zn.y(Lt=>({unsubscribe:l.runOutsideAngular(()=>ot.onAuthStateChanged(ln=>Lt.next(ln),ln=>Lt.error(ln),()=>Lt.complete()))})))),it=ue.pipe(sr(ot=>new zn.y(Lt=>({unsubscribe:l.runOutsideAngular(()=>ot.onIdTokenChanged(ln=>Lt.next(ln),ln=>Lt.error(ln),()=>Lt.complete()))}))));this.authState=Ge.pipe(zD(Ke),(0,Iw.R)(d.outsideAngular),(0,Os.QV)(d.insideAngular)),this.user=Ge.pipe(zD(it),(0,Iw.R)(d.outsideAngular),(0,Os.QV)(d.insideAngular)),this.idToken=this.user.pipe(sr(ot=>ot?(0,Qt.D)(ot.getIdToken()):(0,dt.of)(null))),this.idTokenResult=this.user.pipe(sr(ot=>ot?(0,Qt.D)(ot.getIdTokenResult()):(0,dt.of)(null))),this.credential=(0,ad.T)(Ge,q,this.authState.pipe(Yn(ot=>!ot))).pipe((0,ct.U)(ot=>(null==ot?void 0:ot.user)?ot:null),(0,Iw.R)(d.outsideAngular),(0,Os.QV)(d.insideAngular))}return(0,vi.pX)(this,ue,l,{spy:{apply:(be,Ge,Ke)=>{(be.startsWith("signIn")||be.startsWith("createUser"))&&Ke.then(it=>q.next(it))}}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Dn.HU),a.LFG(Hg,8),a.LFG(Kw,8),a.LFG(EI,8),a.LFG(Jw,8),a.LFG(Qw,8),a.LFG(Xw,8),a.LFG($g,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),LM=(()=>{class n{constructor(){Yw.Z.registerVersion("angularfire",Dn.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[jg]}),n})();function TI(n){return null==n}function t1(n){return"function"==typeof n.set}function Nf(n,t){return t1(t)?t:n.ref(t)}function BM(n,t){if(function(n){return"string"==typeof n}(n))return t.stringCase();if(t1(n))return t.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function xf(n,t,e="on",r=Lu.z){return new zn.y(i=>{let l=null;return l=n[e](t,(d,f)=>{r.schedule(()=>{i.next({snapshot:d,prevKey:f})}),"once"===e&&r.schedule(()=>i.complete())},d=>{r.schedule(()=>i.error(d))}),"on"===e?{unsubscribe(){null!=l&&n.off(t,l)}}:{unsubscribe(){}}}).pipe((0,ct.U)(i=>{const{snapshot:l,prevKey:d}=i;let f=null;return l.exists()&&(f=l.key),{type:t,payload:l,prevKey:d,key:f}}),(0,Ya.B)())}function DI(n,t){const e=n.length;for(let r=0;r<e;r++)if(n[r].payload.key===t)return r;return-1}function HM(n,t){const{payload:e,prevKey:r,key:i}=t,l=DI(n,i),d=function(n,t){if(TI(t))return 0;{const e=DI(n,t);return-1===e?n.length:e+1}}(n,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let f=null;t.payload.forEach(m=>{const b={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const f=n[l-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==e.key)).splice(d,0,t)}else{if(null==r)return[t,...n];(n=n.slice()).splice(d,0,t)}return n;case"child_removed":return n.filter(f=>f.payload.key!==e.key);case"child_changed":return n.map(f=>f.payload.key===i?t:f);case"child_moved":if(l>-1){const f=n.splice(l,1)[0];return(n=n.slice()).splice(d,0,f),n}return n;default:return n}}function II(n){return(TI(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function n1(n,t,e){return function(n,t,e){return xf(n,"value","once",e).pipe(sr(r=>{const i=[(0,dt.of)(r)];return t.forEach(l=>i.push(xf(n,l,"on",e))),(0,ad.T)(...i).pipe(Va(HM,[]))}),ld())}(n,t=II(t),e)}function AI(n,t,e){const r=(t=II(t)).map(i=>xf(n,i,"on",e));return(0,ad.T)(...r)}function GM(n,t){return function(r,i){return BM(r,{stringCase:()=>n.child(r)[t](i),firebaseCase:()=>r[t](i),snapshotCase:()=>r.ref[t](i)})}}function r1(n){return function(e){return e?BM(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function SI(n,t){return function(){return xf(n,"value","on",t)}}const ZM=new a.OlP("angularfire2.realtimeDatabaseURL"),zM=new a.OlP("angularfire2.database.use-emulator");let YM=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A,M,O,q,ue,be){this.schedulers=f;const Ge=m,Ke=(0,vi.on)(e,d,r);b&&e1(Ke,d,T,M,O,q,A,ue),this.database=(0,vi.cc)(`${Ke.name}.database.${i}`,"AngularFireDatabase",Ke.name,()=>{const it=d.runOutsideAngular(()=>Ke.database(i||void 0));return Ge&&it.useEmulator(...Ge),it},[Ge])}list(e,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Nf(this.database,e));let l=i;return r&&(l=r(i)),function(n,t){const e=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:GM(r,"update"),set:GM(r,"set"),push:i=>r.push(i),remove:r1(r),snapshotChanges:i=>n1(n,i,e).pipe(Dn.iC),stateChanges:i=>AI(n,i,e).pipe(Dn.iC),auditTrail:i=>function(n,t,e){return function(n,t,e){return function(n,t){return xf(n,"value","on",t).pipe((0,ct.U)(e=>{let r;return e.payload.forEach(i=>(r=i.key,!1)),{data:e,lastKeyToLoad:r}}))}(n,e).pipe(W0(t),(0,ct.U)(([i,l])=>{const d=i.lastKeyToLoad,f=l.map(m=>m.key);return{actions:l,lastKeyToLoad:d,loadedKeys:f}}),function(n){return t=>t.lift(new k_(n))}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ct.U)(i=>i.actions))}(n,AI(n,t).pipe(Va((i,l)=>[...i,l],[])),e)}(n,i,e).pipe(Dn.iC),valueChanges:(i,l)=>n1(n,i,e).pipe((0,ct.U)(f=>f.map(m=>l&&l.idField?Object.assign(Object.assign({},m.payload.val()),{[l.idField]:m.key}):m.payload.val())),Dn.iC)}}(l,this)}object(e){return function(n,t){return{query:n,snapshotChanges:()=>SI(n,t.schedulers.outsideAngular)().pipe(Dn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>SI(n,t.schedulers.outsideAngular)().pipe(Dn.iC,(0,ct.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Nf(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(ZM,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Dn.HU),a.LFG(zM,8),a.LFG(jg,8),a.LFG(Hg,8),a.LFG(Kw,8),a.LFG(EI,8),a.LFG(Jw,8),a.LFG(Qw,8),a.LFG(Xw,8),a.LFG($g,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var i1=B(982);function s1(){return n=>n.lift(new Mf)}class Mf{call(t,e){return e.subscribe(new Qi(t))}}class Qi extends cr.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var lt,NI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},hi={},o1=o1||{},Ht=NI||self;function qg(){}function $y(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function Wg(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var a1="closure_uid_"+(1e9*Math.random()>>>0),xI=0;function QM(n,t,e){return n.call.apply(n.bind,arguments)}function zF(n,t,e){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function Fi(n,t,e){return(Fi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?QM:zF).apply(null,arguments)}function Hy(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var r=e.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Br(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(r,i,l){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return t.prototype[i].apply(r,d)}}function Rd(){this.s=this.s,this.o=this.o}var XM={};Rd.prototype.s=!1,Rd.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,a1)&&n[a1]||(n[a1]=++xI)}(this);delete XM[n]}},Rd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const eR=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},l1=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const r=n.length,i="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in i&&t.call(e,i[l],l,n)};function jy(n){return Array.prototype.concat.apply([],arguments)}function u1(n){const t=n.length;if(0<t){const e=Array(t);for(let r=0;r<t;r++)e[r]=n[r];return e}return[]}function Zg(n){return/^[\s\xa0]*$/.test(n)}var bs,c1=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xi(n,t){return-1!=n.indexOf(t)}function d1(n,t){return n<t?-1:n>t?1:0}e:{var RI=Ht.navigator;if(RI){var kI=RI.userAgent;if(kI){bs=kI;break e}}bs=""}function h1(n,t,e){for(const r in n)t.call(e,n[r],r,n)}function PI(n){const t={};for(const e in n)t[e]=n[e];return t}var Rf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function f1(n,t){let e,r;for(let i=1;i<arguments.length;i++){for(e in r=arguments[i],r)n[e]=r[e];for(let l=0;l<Rf.length;l++)e=Rf[l],Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}}function Gy(n){return Gy[" "](n),n}Gy[" "]=qg;var qy,FI=Xi(bs,"Opera"),kd=Xi(bs,"Trident")||Xi(bs,"MSIE"),p1=Xi(bs,"Edge"),g1=p1||kd,m1=Xi(bs,"Gecko")&&!(Xi(bs.toLowerCase(),"webkit")&&!Xi(bs,"Edge"))&&!(Xi(bs,"Trident")||Xi(bs,"MSIE"))&&!Xi(bs,"Edge"),LI=Xi(bs.toLowerCase(),"webkit")&&!Xi(bs,"Edge");function VI(){var n=Ht.document;return n?n.documentMode:void 0}e:{var _1="",Pd=function(){var n=bs;return m1?/rv:([^\);]+)(\)|;)/.exec(n):p1?/Edge\/([\d\.]+)/.exec(n):kd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):LI?/WebKit\/(\S+)/.exec(n):FI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Pd&&(_1=Pd?Pd[1]:""),kd){var Od=VI();if(null!=Od&&Od>parseFloat(_1)){qy=String(Od);break e}}qy=_1}var nR={};function y1(){return t=nR,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let n=0;const t=c1(String(qy)).split("."),e=c1("9").split("."),r=Math.max(t.length,e.length);for(let d=0;0==n&&d<r;d++){var i=t[d]||"",l=e[d]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==i[0].length&&0==l[0].length)break;n=d1(0==i[1].length?0:parseInt(i[1],10),0==l[1].length?0:parseInt(l[1],10))||d1(0==i[2].length,0==l[2].length)||d1(i[2],l[2]),i=i[3],l=l[3]}while(0==n)}return 0<=n}();var t}var Wy=Ht.document&&kd&&(VI()||parseInt(qy,10))||void 0,rR=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",qg,t),Ht.removeEventListener("test",qg,t)}catch(e){}return n}();function es(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Zy(n,t){if(es.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(m1){e:{try{Gy(t.nodeName);var i=!0;break e}catch(l){}i=!1}i||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:v1[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zy.Z.h.call(this)}}es.prototype.h=function(){this.defaultPrevented=!0},Br(Zy,es);var v1={2:"touch",3:"pen",4:"mouse"};Zy.prototype.h=function(){Zy.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fd="closure_listenable_"+(1e6*Math.random()|0),UI=0;function b1(n,t,e,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!r,this.ia=i,this.key=++UI,this.ca=this.fa=!1}function kf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function zy(n){this.src=n,this.g={},this.h=0}function w1(n,t){var e=t.type;if(e in n.g){var l,r=n.g[e],i=eR(r,t);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(kf(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function C1(n,t,e,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.ca&&l.listener==t&&l.capture==!!e&&l.ia==r)return i}return-1}zy.prototype.add=function(n,t,e,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var d=C1(n,t,r,i);return-1<d?(t=n[d],e||(t.fa=!1)):((t=new b1(t,this.src,l,!!r,i)).fa=e,n.push(t)),t};var E1="closure_lm_"+(1e6*Math.random()|0),Yy={};function Ky(n,t,e,r,i){if(r&&r.once)return D1(n,t,e,r,i);if(Array.isArray(t)){for(var l=0;l<t.length;l++)Ky(n,t[l],e,r,i);return null}return e=Qy(e),n&&n[Fd]?n.N(t,e,Wg(r)?!!r.capture:!!r,i):T1(n,t,e,!1,r,i)}function T1(n,t,e,r,i,l){if(!t)throw Error("Invalid event type");var d=Wg(i)?!!i.capture:!!i,f=N1(n);if(f||(n[E1]=f=new zy(n)),(e=f.add(t,e,r,d,l)).proxy)return e;if(r=function(){var t=HI;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=r,r.src=n,r.listener=e,n.addEventListener)rR||(i=d),void 0===i&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(S1(t.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return e}function D1(n,t,e,r,i){if(Array.isArray(t)){for(var l=0;l<t.length;l++)D1(n,t[l],e,r,i);return null}return e=Qy(e),n&&n[Fd]?n.O(t,e,Wg(r)?!!r.capture:!!r,i):T1(n,t,e,!0,r,i)}function I1(n,t,e,r,i){if(Array.isArray(t))for(var l=0;l<t.length;l++)I1(n,t[l],e,r,i);else r=Wg(r)?!!r.capture:!!r,e=Qy(e),n&&n[Fd]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=C1(l=n.g[t],e,r,i))&&(kf(l[e]),Array.prototype.splice.call(l,e,1),0==l.length&&(delete n.g[t],n.h--))):n&&(n=N1(n))&&(t=n.g[t.toString()],n=-1,t&&(n=C1(t,e,r,i)),(e=-1<n?t[n]:null)&&A1(e))}function A1(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[Fd])w1(t.i,n);else{var e=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(e,r,n.capture):t.detachEvent?t.detachEvent(S1(e),r):t.addListener&&t.removeListener&&t.removeListener(r),(e=N1(t))?(w1(e,n),0==e.h&&(e.src=null,t[E1]=null)):kf(n)}}}function S1(n){return n in Yy?Yy[n]:Yy[n]="on"+n}function HI(n,t){if(n.ca)n=!0;else{t=new Zy(t,this);var e=n.listener,r=n.ia||n.src;n.fa&&A1(n),n=e.call(r,t)}return n}function N1(n){return(n=n[E1])instanceof zy?n:null}var Jy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qy(n){return"function"==typeof n?n:(n[Jy]||(n[Jy]=function(t){return n.handleEvent(t)}),n[Jy])}function Li(){Rd.call(this),this.i=new zy(this),this.P=this,this.I=null}function Ln(n,t){var e,r=n.I;if(r)for(e=[];r;r=r.I)e.push(r);if(n=n.P,r=t.type||t,"string"==typeof t)t=new es(t,n);else if(t instanceof es)t.target=t.target||n;else{var i=t;f1(t=new es(r,n),i)}if(i=!0,e)for(var l=e.length-1;0<=l;l--){var d=t.g=e[l];i=Yl(d,r,!0,t)&&i}if(i=Yl(d=t.g=n,r,!0,t)&&i,i=Yl(d,r,!1,t)&&i,e)for(l=0;l<e.length;l++)i=Yl(d=t.g=e[l],r,!1,t)&&i}function Yl(n,t,e,r){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,l=0;l<t.length;++l){var d=t[l];if(d&&!d.ca&&d.capture==e){var f=d.listener,m=d.ia||d.src;d.fa&&w1(n.i,d),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Br(Li,Rd),Li.prototype[Fd]=!0,Li.prototype.removeEventListener=function(n,t,e,r){I1(this,n,t,e,r)},Li.prototype.M=function(){if(Li.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],r=0;r<e.length;r++)kf(e[r]);delete n.g[t],n.h--}}this.I=null},Li.prototype.N=function(n,t,e,r){return this.i.add(String(n),t,!1,e,r)},Li.prototype.O=function(n,t,e,r){return this.i.add(String(n),t,!0,e,r)};var x1=Ht.JSON.stringify;function iR(){var n=ev;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var Xy,Pf=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new sR,n=>n.reset());class sR{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function M1(n){Ht.setTimeout(()=>{throw n},0)}function R1(n,t){Xy||function(){var n=Ht.Promise.resolve(void 0);Xy=function(){n.then(jI)}}(),k1||(Xy(),k1=!0),ev.add(n,t)}var k1=!1,ev=new class{constructor(){this.h=this.g=null}add(t,e){const r=Pf.get();r.set(t,e),this.h?this.h.next=r:this.g=r,this.h=r}};function jI(){for(var n;n=iR();){try{n.h.call(n.g)}catch(e){M1(e)}var t=Pf;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}k1=!1}function zg(n,t){Li.call(this),this.h=n||1,this.g=t||Ht,this.j=Fi(this.kb,this),this.l=Date.now()}function Of(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Yg(n,t,e){if("function"==typeof n)e&&(n=Fi(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fi(n.handleEvent,n)}return 2147483647<Number(t)?-1:Ht.setTimeout(n,t||0)}function aR(n){n.g=Yg(()=>{n.g=null,n.i&&(n.i=!1,aR(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Br(zg,Li),(lt=zg.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ln(this,"tick"),this.da&&(Of(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){zg.Z.M.call(this),Of(this),delete this.g};class GI extends Rd{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:aR(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kg(n){Rd.call(this),this.h=n,this.g={}}Br(Kg,Rd);var P1=[];function Jg(n,t,e,r){Array.isArray(e)||(e&&(P1[0]=e.toString()),e=P1);for(var i=0;i<e.length;i++){var l=Ky(t,e[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function O1(n){h1(n.g,function(t,e){this.g.hasOwnProperty(e)&&A1(t)},n),n.g={}}function tv(){this.g=!0}function Ff(n,t,e,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var r=e[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var d=1;d<i.length;d++)i[d]=""}}}return x1(e)}catch(f){return t}}(n,e)+(r?" "+r:"")})}Kg.prototype.M=function(){Kg.Z.M.call(this),O1(this)},Kg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tv.prototype.Aa=function(){this.g=!1},tv.prototype.info=function(){};var Xu={},V1=null;function nv(){return V1=V1||new Li}function B1(n){es.call(this,Xu.Ma,n)}function Lf(n){const t=nv();Ln(t,new B1(t,n))}function WI(n,t){es.call(this,Xu.STAT_EVENT,n),this.stat=t}function ws(n){const t=nv();Ln(t,new WI(t,n))}function U1(n,t){es.call(this,Xu.Na,n),this.size=t}function Qg(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},t)}Xu.Ma="serverreachability",Br(B1,es),Xu.STAT_EVENT="statevent",Br(WI,es),Xu.Na="timingevent",Br(U1,es);var Xg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$1={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rv(){}function ZI(){}rv.prototype.h=null;var zI,em={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function j1(){es.call(this,"d")}function iv(){es.call(this,"c")}function G1(){}function sv(n,t,e,r){this.l=n,this.j=t,this.m=e,this.X=r||1,this.V=new Kg(this),this.P=KF,this.W=new zg(n=g1?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new uR}function uR(){this.i=null,this.g="",this.h=!1}Br(j1,es),Br(iv,es),Br(G1,rv),G1.prototype.g=function(){return new XMLHttpRequest},G1.prototype.i=function(){return{}},zI=new G1;var KF=45e3,YI={},q1={};function KI(n,t,e){n.K=1,n.v=lv(ec(t)),n.s=e,n.U=!0,cR(n,null)}function cR(n,t){n.F=Date.now(),ov(n),n.A=ec(n.v);var e=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),yR(e.h,"t",r),n.C=0,e=n.l.H,n.h=new uR,n.g=gC(n.l,e?t:null,!n.s),0<n.O&&(n.L=new GI(Fi(n.Ia,n,n.g),n.O)),Jg(n.V,n.g,"readystatechange",n.gb),t=n.H?PI(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Lf(1),function(n,t,e,r,i,l){n.info(function(){if(n.g)if(l)for(var d="",f=l.split("&"),m=0;m<f.length;m++){var b=f[m].split("=");if(1<b.length){var T=b[0];b=b[1];var A=T.split("_");d=2<=A.length&&"type"==A[1]?d+(T+"=")+b+"&":d+(T+"=redacted&")}}else d=null;else d=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+e+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function dR(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function hR(n,t,e){let i,r=!0;for(;!n.I&&n.C<e.length;){if(i=JF(n,e),i==q1){4==t&&(n.o=4,ws(14),r=!1),Ff(n.j,n.m,null,"[Incomplete Response]");break}if(i==YI){n.o=4,ws(15),Ff(n.j,n.m,e,"[Invalid Chunk]"),r=!1;break}Ff(n.j,n.m,i,null),Z1(n,i)}dR(n)&&i!=q1&&i!=YI&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,ws(16),r=!1),n.i=n.i&&r,r?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),dC(t),t.L=!0,ws(11))):(Ff(n.j,n.m,e,"[Invalid Chunked Response]"),Vf(n),av(n))}function JF(n,t){var e=n.C,r=t.indexOf("\n",e);return-1==r?q1:(e=Number(t.substring(e,r)),isNaN(e)?YI:(r+=1)+e>t.length?q1:(t=t.substr(r,e),n.C=r+e,t))}function ov(n){n.Y=Date.now()+n.P,fR(n,n.P)}function fR(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Qg(Fi(n.eb,n),t)}function W1(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function av(n){0==n.l.G||n.I||uA(n.l,n)}function Vf(n){W1(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,Of(n.W),O1(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Z1(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||sm(e.i,n)))if(e.I=n.N,!n.J&&sm(e.i,n)&&3==e.G){try{var r=e.Ca.g.parse(t)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(e.u)e.ta=i[1],0<e.ta-e.U&&37500>i[2]&&e.N&&0==e.A&&!e.v&&(e.v=Qg(Fi(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;gv(e),pv(e)}lA(e),ws(18)}if(1>=CR(e.i)&&e.ka){try{e.ka()}catch(b){}e.ka=void 0}}else Bd(e,11)}else if((n.J||e.g==n)&&gv(e),!Zg(t))for(i=e.Ca.g.parse(t),t=0;t<i.length;t++){let b=i[t];if(e.U=b[0],b=b[1],2==e.G)if("c"==b[0]){e.J=b[1],e.la=b[2];const T=b[3];null!=T&&(e.ma=T,e.h.info("VER="+e.ma));const A=b[4];null!=A&&(e.za=A,e.h.info("SVER="+e.za));const M=b[5];null!=M&&"number"==typeof M&&0<M&&(e.K=r=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+r)),r=e;const O=n.g;if(O){const q=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var l=r.i;!l.g&&(Xi(q,"spdy")||Xi(q,"quic")||Xi(q,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(eC(l,l.h),l.h=null))}if(r.D){const ue=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,xr(r.F,r.D,ue))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var d=n;if((r=e).oa=pC(r,r.H?r.la:null,r.W),d.J){ER(r.i,d);var f=d,m=r.K;m&&f.setTimeout(m),f.B&&(W1(f),ov(f)),r.g=d}else aA(r);0<e.l.length&&cC(e)}else"stop"!=b[0]&&"close"!=b[0]||Bd(e,7);else 3==e.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Bd(e,7):um(e):"noop"!=b[0]&&e.j&&e.j.wa(b),e.A=0)}Lf(4)}catch(b){}}function z1(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if($y(n)||"string"==typeof n)l1(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if($y(n)||"string"==typeof n){e=[];for(var r=n.length,i=0;i<r;i++)e.push(i)}else for(i in e=[],r=0,n)e[r++]=i;i=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if($y(n)){for(var t=[],e=n.length,r=0;r<e;r++)t.push(n[r]);return t}for(r in t=[],e=0,n)t[e++]=n[r];return t}(n)).length;for(var l=0;l<i;l++)t.call(void 0,r[l],e&&e[l],n)}}function tm(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var r=0;r<e;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof tm)for(e=n.T(),r=0;r<e.length;r++)this.set(e[r],n.get(e[r]));else for(r in n)this.set(r,n[r])}function JI(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var r=n.g[t];Bf(n.h,r)&&(n.g[e++]=r),t++}n.g.length=e}if(n.i!=n.g.length){var i={};for(e=t=0;t<n.g.length;)Bf(i,r=n.g[t])||(n.g[e++]=r,i[r]=1),t++;n.g.length=e}}function Bf(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(lt=sv.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const t=this.L;t&&3==sl(n)?t.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const T=sl(this.g);var t=this.g.Da();const A=this.g.ba();if(!(3>T)&&(3!=T||g1||this.g&&(this.h.h||this.g.ga()||sA(this.g)))){this.I||4!=T||7==t||Lf(8==t||0>=A?3:2),W1(this);var e=this.g.ba();this.N=e;t:if(dR(this)){var r=sA(this.g);n="";var i=r.length,l=4==sl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Vf(this),av(this);var d="";break t}this.h.i=new Ht.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:l&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==e,function(n,t,e,r,i,l,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+e+"\n"+l+" "+d})}(this.j,this.u,this.A,this.m,this.X,T,e),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zg(f)){var b=f;break t}}b=null}if(!(e=b)){this.i=!1,this.o=3,ws(12),Vf(this),av(this);break e}Ff(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Z1(this,e)}this.U?(hR(this,T,d),g1&&this.i&&3==T&&(Jg(this.V,this.W,"tick",this.fb),this.W.start())):(Ff(this.j,this.m,d,null),Z1(this,d)),4==T&&Vf(this),this.i&&!this.I&&(4==T?uA(this.l,this):(this.i=!1,ov(this)))}else 400==e&&0<d.indexOf("Unknown SID")?(this.o=3,ws(12)):(this.o=0,ws(13)),Vf(this),av(this)}}}catch(T){}},lt.fb=function(){if(this.g){var n=sl(this.g),t=this.g.ga();this.C<t.length&&(W1(this),hR(this,n,t),this.i&&4!=n&&ov(this))}},lt.cancel=function(){this.I=!0,Vf(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Lf(3),ws(17)),Vf(this),this.o=2,av(this)):fR(this,this.Y-n)},(lt=tm.prototype).R=function(){JI(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},lt.T=function(){return JI(this),this.g.concat()},lt.get=function(n,t){return Bf(this.h,n)?this.h[n]:t},lt.set=function(n,t){Bf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},lt.forEach=function(n,t){for(var e=this.T(),r=0;r<e.length;r++){var i=e[r],l=this.get(i);n.call(t,l,i,this)}};var QI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ld(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ld){this.g=void 0!==t?t:n.g,Y1(this,n.j),this.s=n.s,K1(this,n.i),J1(this,n.m),this.l=n.l,t=n.h;var e=new Hf;e.i=t.i,t.g&&(e.g=new tm(t.g),e.h=t.h),XI(this,e),this.o=n.o}else n&&(e=String(n).match(QI))?(this.g=!!t,Y1(this,e[1]||"",!0),this.s=$f(e[2]||""),K1(this,e[3]||"",!0),J1(this,e[4]),this.l=$f(e[5]||"",!0),XI(this,e[6]||"",!0),this.o=$f(e[7]||"")):(this.g=!!t,this.h=new Hf(null,this.g))}function ec(n){return new Ld(n)}function Y1(n,t,e){n.j=e?$f(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function K1(n,t,e){n.i=e?$f(t,!0):t}function J1(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function XI(n,t,e){t instanceof Hf?(n.h=t,function(n,t){t&&!n.j&&(ga(n),n.i=null,n.g.forEach(function(e,r){var i=r.toLowerCase();r!=i&&(X1(this,r),yR(this,i,e))},n)),n.j=t}(n.h,n.g)):(e||(t=nm(t,nA)),n.h=new Hf(t,n.g))}function xr(n,t,e){n.h.set(t,e)}function lv(n){return xr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $f(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function nm(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,mR),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function mR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ld.prototype.toString=function(){var n=[],t=this.j;t&&n.push(nm(t,uv,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(nm(t,uv,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(nm(e,"/"==e.charAt(0)?tA:eA,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",nm(e,QF)),n.join("")};var uv=/[#\/\?@]/g,eA=/[#\?:]/g,tA=/[#\?]/g,nA=/[#\?@]/g,QF=/#/g;function Hf(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function ga(n){n.g||(n.g=new tm,n.h=0,n.i&&function(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var r=n[e].indexOf("="),i=null;if(0<=r){var l=n[e].substring(0,r);i=n[e].substring(r+1)}else l=n[e];t(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function X1(n,t){ga(n),t=rm(n,t),Bf(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Bf((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&JI(n)))}function _R(n,t){return ga(n),t=rm(n,t),Bf(n.g.h,t)}function yR(n,t,e){X1(n,t),0<e.length&&(n.i=null,n.g.set(rm(n,t),u1(e)),n.h+=e.length)}function rm(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function im(n){this.l=n||bR,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ea&&Ht.g.Ea()&&Ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=Hf.prototype).add=function(n,t){ga(this),this.i=null,n=rm(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},lt.forEach=function(n,t){ga(this),this.g.forEach(function(e,r){l1(e,function(i){n.call(t,i,r,this)},this)},this)},lt.T=function(){ga(this);for(var n=this.g.R(),t=this.g.T(),e=[],r=0;r<t.length;r++)for(var i=n[r],l=0;l<i.length;l++)e.push(t[r]);return e},lt.R=function(n){ga(this);var t=[];if("string"==typeof n)_R(this,n)&&(t=jy(t,this.g.get(rm(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=jy(t,n[e])}return t},lt.set=function(n,t){return ga(this),this.i=null,_R(this,n=rm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},lt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var r=t[e],i=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var d=i;""!==r[l]&&(d+="="+encodeURIComponent(String(r[l]))),n.push(d)}}return this.i=n.join("&")};var bR=10;function wR(n){return!!n.h||!!n.g&&n.g.size>=n.j}function CR(n){return n.h?1:n.g?n.g.size:0}function sm(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function eC(n,t){n.g?n.g.add(t):n.h=t}function ER(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function TR(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return u1(n.i)}function tC(){}function eL(){this.g=new tC}function rA(n,t,e){const r=e||"";try{z1(n,function(i,l){let d=i;Wg(i)&&(d=x1(i)),t.push(r+l+"="+encodeURIComponent(d))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function nC(n,t,e,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(l){}}function cv(n){this.l=n.$b||null,this.j=n.ib||!1}function dv(n,t){Li.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=Vd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}im.prototype.cancel=function(){if(this.i=TR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},tC.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},tC.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},Br(cv,rv),cv.prototype.g=function(){return new dv(this.l,this.j)},cv.prototype.i=function(n){return function(){return n}}({}),Br(dv,Li);var Vd=0;function iA(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function om(n){n.readyState=4,n.l=null,n.j=null,n.A=null,am(n)}function am(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=dv.prototype).open=function(n,t){if(this.readyState!=Vd)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,am(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Ht).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,om(this)),this.readyState=Vd},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,am(this)),this.g&&(this.readyState=3,am(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iA(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?om(this):am(this),3==this.readyState&&iA(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,om(this))},lt.Ta=function(n){this.g&&(this.response=n,om(this))},lt.ha=function(){this.g&&om(this)},lt.setRequestHeader=function(n,t){this.v.append(n,t)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(dv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var rC=Ht.JSON.parse;function Jr(n){Li.call(this),this.headers=new tm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fs,this.K=this.L=!1}Br(Jr,Li);var Fs="",IR=/^https?$/i,iC=["POST","PUT"];function SR(n){return"content-type"==n.toLowerCase()}function hv(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,sC(n),fv(n)}function sC(n){n.D||(n.D=!0,Ln(n,"complete"),Ln(n,"error"))}function oC(n){if(n.h&&void 0!==o1&&(!n.C[1]||4!=sl(n)||2!=n.ba()))if(n.v&&4==sl(n))Yg(n.Fa,0,n);else if(Ln(n,"readystatechange"),4==sl(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var r;if(r=0===f){var i=String(n.H).match(QI)[1]||null;if(!i&&Ht.self&&Ht.self.location){var l=Ht.self.location.protocol;i=l.substr(0,l.length-1)}r=!IR.test(i?i.toLowerCase():"")}e=r}if(e)Ln(n,"complete"),Ln(n,"success");else{n.m=6;try{var d=2<sl(n)?n.g.statusText:""}catch(m){d=""}n.j=d+" ["+n.ba()+"]",sC(n)}}finally{fv(n)}}}function fv(n,t){if(n.g){aC(n);const e=n.g,r=n.C[0]?qg:null;n.g=null,n.C=null,t||Ln(n,"ready");try{e.onreadystatechange=r}catch(i){}}}function aC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function sl(n){return n.g?n.g.readyState:0}function sA(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Fs:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function lm(n,t,e){e:{for(r in e){var r=!1;break e}r=!0}r||(e=function(n){let t="";return h1(n,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):xr(n,t,e))}function jf(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function lC(n){this.za=0,this.l=[],this.h=new tv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=jf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=jf("baseRetryDelayMs",5e3,n),this.$a=jf("retryDelaySeedMs",1e4,n),this.Ya=jf("forwardChannelMaxRetries",2,n),this.ra=jf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new im(n&&n.concurrentRequestLimit),this.Ca=new eL,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function um(n){if(Oo(n),3==n.G){var t=n.V++,e=ec(n.F);xr(e,"SID",n.J),xr(e,"RID",t),xr(e,"TYPE","terminate"),cm(n,e),(t=new sv(n,n.h,t,void 0)).K=2,t.v=lv(ec(e)),e=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(e=Ht.navigator.sendBeacon(t.v.toString(),"")),!e&&Ht.Image&&((new Image).src=t.v,e=!0),e||(t.g=gC(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ov(t)}RR(n)}function pv(n){n.g&&(dC(n),n.g.cancel(),n.g=null)}function Oo(n){pv(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),gv(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function uC(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&cC(n)}function cC(n){wR(n.i)||n.m||(n.m=!0,R1(n.Ha,n),n.C=0)}function MR(n,t){var e;e=t?t.m:n.V++;const r=ec(n.F);xr(r,"SID",n.J),xr(r,"RID",e),xr(r,"AID",n.U),cm(n,r),n.o&&n.s&&lm(r,n.o,n.s),e=new sv(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=oA(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),eC(n.i,e),KI(e,r,t)}function cm(n,t){n.j&&z1({},function(e,r){xr(t,r,e)})}function oA(n,t,e){e=Math.min(n.l.length,e);var r=n.j?Fi(n.j.Oa,n.j,n):null;e:{var i=n.l;let l=-1;for(;;){const d=["count="+e];-1==l?0<e?(l=i[0].h,d.push("ofs="+l)):l=0:d.push("ofs="+l);let f=!0;for(let m=0;m<e;m++){let b=i[m].h;const T=i[m].g;if(b-=l,0>b)l=Math.max(0,i[m].h-100),f=!1;else try{rA(T,d,"req"+b+"_")}catch(A){r&&r(T)}}if(f){r=d.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,r}function aA(n){n.g||n.u||(n.Y=1,R1(n.Ga,n),n.A=0)}function lA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Qg(Fi(n.Ga,n),fC(n,n.A)),n.A++,0))}function dC(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function hC(n){n.g=new sv(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=ec(n.oa);xr(t,"RID","rpc"),xr(t,"SID",n.J),xr(t,"CI",n.N?"0":"1"),xr(t,"AID",n.U),cm(n,t),xr(t,"TYPE","xmlhttp"),n.o&&n.s&&lm(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=lv(ec(t)),e.s=null,e.U=!0,cR(e,n)}function gv(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function uA(n,t){var e=null;if(n.g==t){gv(n),dC(n),n.g=null;var r=2}else{if(!sm(n.i,t))return;e=t.D,ER(n.i,t),r=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==r){e=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;Ln(r=nv(),new U1(r,e,t,i)),cC(n)}else aA(n);else if(3==(i=t.o)||0==i&&0<n.I||!(1==r&&function(n,t){return!(CR(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Qg(Fi(n.Ha,n,t),fC(n,n.C)),n.C++,0)))}(n,t)||2==r&&lA(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),i){case 1:Bd(n,5);break;case 4:Bd(n,10);break;case 3:Bd(n,6);break;default:Bd(n,2)}}function fC(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function Bd(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var r=Fi(n.jb,n);e||(e=new Ld("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||Y1(e,"https"),lv(e)),function(n,t){const e=new tv;if(Ht.Image){const r=new Image;r.onload=Hy(nC,e,r,"TestLoadImage: loaded",!0,t),r.onerror=Hy(nC,e,r,"TestLoadImage: error",!1,t),r.onabort=Hy(nC,e,r,"TestLoadImage: abort",!1,t),r.ontimeout=Hy(nC,e,r,"TestLoadImage: timeout",!1,t),Ht.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}(e.toString(),r)}else ws(2);n.G=0,n.j&&n.j.va(t),RR(n),Oo(n)}function RR(n){n.G=0,n.I=-1,n.j&&((0!=TR(n.i).length||0!=n.l.length)&&(n.i.i.length=0,u1(n.l),n.l.length=0),n.j.ua())}function pC(n,t,e){let r=function(n){return n instanceof Ld?ec(n):new Ld(n,void 0)}(e);if(""!=r.i)t&&K1(r,t+"."+r.i),J1(r,r.m);else{const i=Ht.location;r=function(n,t,e,r){var i=new Ld(null,void 0);return n&&Y1(i,n),t&&K1(i,t),e&&J1(i,e),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,e)}return n.aa&&h1(n.aa,function(i,l){xr(r,l,i)}),e=n.sa,(t=n.D)&&e&&xr(r,t,e),xr(r,"VER",n.ma),cm(n,r),r}function gC(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Jr(e&&n.Ba&&!n.qa?new cv({ib:!0}):n.qa)).L=n.H,t}function cA(){}function mv(){if(kd&&!(10<=Number(Wy)))throw Error("Environmental error: no available transport.")}function Ls(n,t){Li.call(this),this.g=new lC(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!Zg(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Zg(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Ud(this)}function Gf(n){j1.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function _v(){iv.call(this),this.status=1}function Ud(n){this.g=n}(lt=Jr.prototype).ea=function(n,t,e,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zI.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:zI),this.g.onreadystatechange=Fi(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(l){return void hv(this,l)}n=e||"";const i=new tm(this.headers);r&&z1(r,function(l,d){i.set(d,l)}),r=function(n){e:{var t=SR;const e=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<e;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(i.T()),e=Ht.FormData&&n instanceof Ht.FormData,!(0<=eR(iC,t))||r||e||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(l,d){this.g.setRequestHeader(d,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aC(this),0<this.B&&((this.K=function(n){return kd&&y1()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fi(this.pa,this)):this.A=Yg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){hv(this,l)}},lt.pa=function(){void 0!==o1&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ln(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ln(this,"complete"),Ln(this,"abort"),fv(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fv(this,!0)),Jr.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?oC(this):this.cb())},lt.cb=function(){oC(this)},lt.ba=function(){try{return 2<sl(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),rC(t)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=lC.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new sv(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=PI(l),f1(l,this.P)):l=this.P),null===this.o&&(i.H=l),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var r=this.l[e];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=oA(this,i,t),xr(e=ec(this.F),"RID",n),xr(e,"CVER",22),this.D&&xr(e,"X-HTTP-Session-Id",this.D),cm(this,e),this.o&&l&&lm(e,this.o,l),eC(this.i,i),this.Ra&&xr(e,"TYPE","init"),this.ja?(xr(e,"$req",t),xr(e,"SID","null"),i.$=!0,KI(i,e,null)):KI(i,e,t),this.G=2}}else 3==this.G&&(n?MR(this,n):0==this.l.length||wR(this.i)||MR(this))},lt.Ga=function(){if(this.u=null,hC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Qg(Fi(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ws(10),pv(this),hC(this))},lt.ab=function(){null!=this.v&&(this.v=null,pv(this),lA(this),ws(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ws(2)):(this.h.info("Failed to ping google.com"),ws(1))},(lt=cA.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},mv.prototype.g=function(n,t){return new Ls(n,t)},Br(Ls,Li),Ls.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),R1(Fi(n.hb,n,t))),ws(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=pC(n,null,n.W),cC(n)},Ls.prototype.close=function(){um(this.g)},Ls.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,uC(this.g,t)}else this.v?((t={}).__data__=x1(n),uC(this.g,t)):uC(this.g,n)},Ls.prototype.M=function(){this.g.j=null,delete this.j,um(this.g),delete this.g,Ls.Z.M.call(this)},Br(Gf,j1),Br(_v,iv),Br(Ud,cA),Ud.prototype.xa=function(){Ln(this.g,"a")},Ud.prototype.wa=function(n){Ln(this.g,new Gf(n))},Ud.prototype.va=function(n){Ln(this.g,new _v(n))},Ud.prototype.ua=function(){Ln(this.g,"b")},mv.prototype.createWebChannel=mv.prototype.g,Ls.prototype.send=Ls.prototype.u,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,Xg.NO_ERROR=0,Xg.TIMEOUT=8,Xg.HTTP_ERROR=6,$1.COMPLETE="complete",ZI.EventType=em,em.OPEN="a",em.CLOSE="b",em.ERROR="c",em.MESSAGE="d",Li.prototype.listen=Li.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var kR=hi.createWebChannelTransport=function(){return new mv},PR=hi.getStatEventTarget=function(){return nv()},dA=hi.ErrorCode=Xg,tL=hi.EventType=$1,nL=hi.Event=Xu,mC=hi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},hA=hi.FetchXmlHttpFactory=cv,yv=hi.WebChannel=ZI,OR=hi.XhrIo=Jr;const fA="@firebase/firestore";class Vi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let $d="9.6.11";const Hd=new So.Yd("@firebase/firestore");function pA(){return Hd.logLevel}function $e(n,...t){if(Hd.logLevel<=So.in.DEBUG){const e=t.map(bv);Hd.debug(`Firestore (${$d}): ${n}`,...e)}}function pn(n,...t){if(Hd.logLevel<=So.in.ERROR){const e=t.map(bv);Hd.error(`Firestore (${$d}): ${n}`,...e)}}function vv(n,...t){if(Hd.logLevel<=So.in.WARN){const e=t.map(bv);Hd.warn(`Firestore (${$d}): ${n}`,...e)}}function bv(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function ht(n="Unexpected state"){const t=`FIRESTORE (${$d}) INTERNAL ASSERTION FAILED: `+n;throw pn(t),new Error(t)}function Bt(n,t){n||ht()}function rt(n,t){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends V.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Tr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class _C{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Vi.UNAUTHENTICATED))}shutdown(){}}class vC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class LR{constructor(t){this.t=t,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var r=this;let i=this.i;const l=b=>this.i!==i?(i=this.i,e(b)):Promise.resolve();let d=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Tr,t.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const b=d;t.enqueueRetryable((0,Ee.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},m=b=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Tr)}},0),f()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt("string"==typeof r.accessToken),new _C(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Bt(null===t||"string"==typeof t),new Vi(t)}}class Cv{constructor(t,e,r){this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class VR{constructor(t,e,r){this.h=t,this.l=e,this.m=r}getToken(){return Promise.resolve(new Cv(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ev{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gA{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const r=l=>{null!=l.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.p;return this.p=l.token,$e("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>r(l))};const i=l=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?i(l):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Bt("string"==typeof e.token),this.p=e.token,new Ev(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fo{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.I(r),this.T=r=>e.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function BR(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}Fo.A=-1;class mA{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=BR(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<e&&(r+=t.charAt(i[l]%t.length))}return r}}function tn(n,t){return n<t?-1:n>t?1:0}function Kl(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}function _A(n){return n+"\0"}class Qr{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Oe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Qr.fromMillis(Date.now())}static fromDate(t){return Qr.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Qr(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?tn(this.nanoseconds,t.nanoseconds):tn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Mt(t)}static min(){return new Mt(new Qr(0,0))}static max(){return new Mt(new Qr(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function UR(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function jd(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yA(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class dm{constructor(t,e,r){void 0===e?e=0:e>t.length&&ht(),void 0===r?r=t.length-e:r>t.length-e&&ht(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return 0===dm.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof dm?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const l=t.get(i),d=e.get(i);if(l<d)return-1;if(l>d)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class En extends dm{construct(t,e,r){return new En(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new En(e)}static emptyPath(){return new En([])}}const $R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ui extends dm{construct(t,e,r){return new Ui(t,e,r)}static isValidIdentifier(t){return $R.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ui.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ui(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Oe(ye.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let d=!1;for(;i<t.length;){const f=t[i];if("\\"===f){if(i+1===t.length)throw new Oe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Oe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=m,i+=2}else"`"===f?(d=!d,i++):"."!==f||d?(r+=f,i++):(l(),i++)}if(l(),d)throw new Oe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ui(e)}static emptyPath(){return new Ui([])}}class qf{constructor(t){this.fields=t,t.sort(Ui.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Kl(this.fields,t.fields,(e,r)=>e.isEqual(r))}}class fi{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new fi(e)}static fromUint8Array(t){const e=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(t);return new fi(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return tn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const rL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gd(n){if(Bt(!!n),"string"==typeof n){let t=0;const e=rL.exec(n);if(Bt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ur(n.seconds),nanos:Ur(n.nanos)}}function Ur(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function qd(n){return"string"==typeof n?fi.fromBase64String(n):fi.fromUint8Array(n)}function bC(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function vA(n){const t=n.mapValue.fields.__previous_value__;return bC(t)?vA(t):t}function hm(n){const t=Gd(n.mapValue.fields.__local_write_time__.timestampValue);return new Qr(t.seconds,t.nanos)}class ma{constructor(t,e,r,i,l,d,f,m){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class Jl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Jl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Jl&&t.projectId===this.projectId&&t.database===this.database}}function Wd(n){return null==n}function fm(n){return 0===n&&1/n==-1/0}function bA(n){return"number"==typeof n&&Number.isInteger(n)&&!fm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class et{constructor(t){this.path=t}static fromPath(t){return new et(En.fromString(t))}static fromName(t){return new et(En.fromString(t).popFirst(5))}static empty(){return new et(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===En.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return En.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new En(t.slice()))}}const wA={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CA={nullValue:"NULL_VALUE"};function Zd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bC(n)?4:AA(n)?9:10:ht()}function Vs(n,t){if(n===t)return!0;const e=Zd(n);if(e!==Zd(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return hm(n).isEqual(hm(t));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Gd(r.timestampValue),d=Gd(i.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return i=t,qd(n.bytesValue).isEqual(qd(i.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Ur(r.geoPointValue.latitude)===Ur(i.geoPointValue.latitude)&&Ur(r.geoPointValue.longitude)===Ur(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ur(r.integerValue)===Ur(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=Ur(r.doubleValue),d=Ur(i.doubleValue);return l===d?fm(l)===fm(d):isNaN(l)&&isNaN(d)}return!1}(n,t);case 9:return Kl(n.arrayValue.values||[],t.arrayValue.values||[],Vs);case 10:return function(r,i){const l=r.mapValue.fields||{},d=i.mapValue.fields||{};if(UR(l)!==UR(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===d[f]||!Vs(l[f],d[f])))return!1;return!0}(n,t);default:return ht()}var i}function Wf(n,t){return void 0!==(n.values||[]).find(e=>Vs(e,t))}function zd(n,t){if(n===t)return 0;const e=Zd(n),r=Zd(t);if(e!==r)return tn(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return tn(n.booleanValue,t.booleanValue);case 2:return function(i,l){const d=Ur(i.integerValue||i.doubleValue),f=Ur(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1}(n,t);case 3:return EA(n.timestampValue,t.timestampValue);case 4:return EA(hm(n),hm(t));case 5:return tn(n.stringValue,t.stringValue);case 6:return function(i,l){const d=qd(i),f=qd(l);return d.compareTo(f)}(n.bytesValue,t.bytesValue);case 7:return function(i,l){const d=i.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const b=tn(d[m],f[m]);if(0!==b)return b}return tn(d.length,f.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,l){const d=tn(Ur(i.latitude),Ur(l.latitude));return 0!==d?d:tn(Ur(i.longitude),Ur(l.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,l){const d=i.values||[],f=l.values||[];for(let m=0;m<d.length&&m<f.length;++m){const b=zd(d[m],f[m]);if(b)return b}return tn(d.length,f.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,l){const d=i.fields||{},f=Object.keys(d),m=l.fields||{},b=Object.keys(m);f.sort(),b.sort();for(let T=0;T<f.length&&T<b.length;++T){const A=tn(f[T],b[T]);if(0!==A)return A;const M=zd(d[f[T]],m[b[T]]);if(0!==M)return M}return tn(f.length,b.length)}(n.mapValue,t.mapValue);default:throw ht()}}function EA(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return tn(n,t);const e=Gd(n),r=Gd(t),i=tn(e.seconds,r.seconds);return 0!==i?i:tn(e.nanos,r.nanos)}function pm(n){return TA(n)}function TA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Gd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?qd(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const d of r.values||[])l?l=!1:i+=",",i+=TA(d);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",d=!0;for(const f of i)d?d=!1:l+=",",l+=`${f}:${TA(r.fields[f])}`;return l+"}"}(n.mapValue):ht();var t}function Zf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function gm(n){return!!n&&"integerValue"in n}function mm(n){return!!n&&"arrayValue"in n}function DA(n){return!!n&&"nullValue"in n}function IA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wC(n){return!!n&&"mapValue"in n}function _m(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return jd(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=_m(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=_m(n.arrayValue.values[e]);return t}return Object.assign({},n)}function AA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function jR(n){return"nullValue"in n?CA:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Zf(Jl.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function _a(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Zf(Jl.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?wA:ht()}function GR(n,t){return void 0===n?t:void 0===t||zd(n,t)>0?n:t}function CC(n,t){return void 0===n?t:void 0===t||zd(n,t)<0?n:t}class ts{constructor(t){this.value=t}static empty(){return new ts({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!wC(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=_m(e)}setAll(t){let e=Ui.emptyPath(),r={},i=[];t.forEach((d,f)=>{if(!e.isImmediateParentOf(f)){const m=this.getFieldsMap(e);this.applyChanges(m,r,i),r={},i=[],e=f.popLast()}d?r[f.lastSegment()]=_m(d):i.push(f.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,r,i)}delete(t){const e=this.field(t.popLast());wC(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Vs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];wC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){jd(e,(i,l)=>t[i]=l);for(const i of r)delete t[i]}clone(){return new ts(_m(this.value))}}function EC(n){const t=[];return jd(n.fields,(e,r)=>{const i=new Ui([e]);if(wC(r)){const l=EC(r.mapValue).fields;if(0===l.length)t.push(i);else for(const d of l)t.push(i.child(d))}else t.push(i)}),new qf(t)}class ar{constructor(t,e,r,i,l,d){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.data=l,this.documentState=d}static newInvalidDocument(t){return new ar(t,0,Mt.min(),Mt.min(),ts.empty(),0)}static newFoundDocument(t,e,r){return new ar(t,1,e,Mt.min(),r,0)}static newNoDocument(t,e){return new ar(t,2,e,Mt.min(),ts.empty(),0)}static newUnknownDocument(t,e){return new ar(t,3,e,Mt.min(),ts.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ar&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ym{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}}function vm(n){return n.fields.find(t=>2===t.kind)}function Ql(n){return n.fields.filter(t=>2!==t.kind)}ym.UNKNOWN_ID=-1;class zf{constructor(t,e){this.fieldPath=t,this.kind=e}}class tc{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new tc(0,ol.min())}}function bm(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new Qr(e+1,0):new Qr(e,r));return new ol(i,et.empty(),t)}function SA(n){return new ol(n.readTime,n.key,-1)}class ol{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new ol(Mt.min(),et.empty(),-1)}static max(){return new ol(Mt.max(),et.empty(),-1)}}function qR(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=et.comparator(n.documentKey,t.documentKey),0!==e?e:tn(n.largestBatchId,t.largestBatchId))}class WR{constructor(t,e=null,r=[],i=[],l=null,d=null,f=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=d,this.endAt=f,this.P=null}}function TC(n,t=null,e=[],r=[],i=null,l=null,d=null){return new WR(n,t,e,r,i,l,d)}function Yd(n){const t=rt(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+pm(i.value);var i}).join(","),e+="|ob:",e+=t.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Wd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>pm(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>pm(r)).join(",")),t.P=e}return t.P}function wm(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!JR(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((e=n.filters[i]).op!==(r=t.filters[i]).op||!e.field.isEqual(r.field)||!Vs(e.value,r.value))return!1;var e,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!MA(n.startAt,t.startAt)&&MA(n.endAt,t.endAt)}function Yf(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Tv(n,t){return n.filters.filter(e=>e instanceof Xr&&e.field.isEqual(t))}function ns(n,t,e){let r,i=!0;for(const l of Tv(n,t)){let d,f=!0;switch(l.op){case"<":case"<=":d=jR(l.value);break;case"==":case"in":case">=":d=l.value;break;case">":d=l.value,f=!1;break;case"!=":case"not-in":d=CA}GR(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];GR(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}function Kf(n,t,e){let r,i=!0;for(const l of Tv(n,t)){let d,f=!0;switch(l.op){case">=":case">":d=_a(l.value),f=!1;break;case"==":case"in":case"<=":d=l.value;break;case"<":d=l.value,f=!1;break;case"!=":case"not-in":d=wA}CC(r,d)===d&&(r=d,i=f)}if(null!==e)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(t)){const d=e.position[l];CC(r,d)===d&&(r=d,i=e.inclusive);break}return{value:r,inclusive:i}}class Xr extends class{}{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,r):new NA(t,e,r):"array-contains"===e?new Iv(t,r):"in"===e?new zR(t,r):"not-in"===e?new YR(t,r):"array-contains-any"===e?new KR(t,r):new Xr(t,e,r)}static V(t,e,r){return"in"===e?new Dv(t,r):new DC(t,r)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(zd(e,this.value)):null!==e&&Zd(this.value)===Zd(e)&&this.v(zd(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class NA extends Xr{constructor(t,e,r){super(t,e,r),this.key=et.fromName(r.referenceValue)}matches(t){const e=et.comparator(t.key,this.key);return this.v(e)}}class Dv extends Xr{constructor(t,e){super(t,"in",e),this.keys=IC(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class DC extends Xr{constructor(t,e){super(t,"not-in",e),this.keys=IC(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function IC(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(r=>et.fromName(r.referenceValue))}class Iv extends Xr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return mm(e)&&Wf(e.arrayValue,this.value)}}class zR extends Xr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Wf(this.value.arrayValue,e)}}class YR extends Xr{constructor(t,e){super(t,"not-in",e)}matches(t){if(Wf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Wf(this.value.arrayValue,e)}}class KR extends Xr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!mm(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Wf(this.value.arrayValue,r))}}class nc{constructor(t,e){this.position=t,this.inclusive=e}}class Kd{constructor(t,e="asc"){this.field=t,this.dir=e}}function JR(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function xA(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const l=t[i],d=n.position[i];if(r=l.field.isKeyField()?et.comparator(et.fromName(d.referenceValue),e.key):zd(d,e.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function MA(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Vs(n.position[e],t.position[e]))return!1;return!0}class rs{constructor(t,e=null,r=[],i=[],l=null,d="F",f=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=d,this.startAt=f,this.endAt=m,this.D=null,this.C=null}}function Jf(n,t,e,r,i,l,d,f){return new rs(n,t,e,r,i,l,d,f)}function rc(n){return new rs(n)}function Av(n){return!Wd(n.limit)&&"F"===n.limitType}function Sv(n){return!Wd(n.limit)&&"L"===n.limitType}function AC(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Cm(n){for(const t of n.filters)if(t.S())return t.field;return null}function SC(n){return null!==n.collectionGroup}function Jd(n){const t=rt(n);if(null===t.D){t.D=[];const e=Cm(t),r=AC(t);if(null!==e&&null===r)e.isKeyField()||t.D.push(new Kd(e)),t.D.push(new Kd(Ui.keyField(),"asc"));else{let i=!1;for(const l of t.explicitOrderBy)t.D.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Kd(Ui.keyField(),l))}}}return t.D}function ro(n){const t=rt(n);if(!t.C)if("F"===t.limitType)t.C=TC(t.path,t.collectionGroup,Jd(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const l of Jd(t))e.push(new Kd(l.field,"desc"===l.dir?"asc":"desc"));const r=t.endAt?new nc(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new nc(t.startAt.position,!t.startAt.inclusive):null;t.C=TC(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}return t.C}function RA(n,t,e){return new rs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Em(n,t){return wm(ro(n),ro(t))&&n.limitType===t.limitType}function kA(n){return`${Yd(ro(n))}|lt:${n.limitType}`}function ya(n){return`Query(target=${function(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(r=e).field.canonicalString()} ${r.op} ${pm(r.value)}`;var r}).join(", ")}]`),Wd(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(r=e).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>pm(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>pm(e)).join(",")),`Target(${t})`}(ro(n))}; limitType=${n.limitType})`}function Qd(n,t){return t.isFoundDocument()&&function(e,r){const i=r.key.path;return null!==e.collectionGroup?r.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(i):et.isDocumentKey(e.path)?e.path.isEqual(i):e.path.isImmediateParentOf(i)}(n,t)&&function(e,r){for(const i of e.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,t)&&function(e,r){for(const i of e.filters)if(!i.matches(r))return!1;return!0}(n,t)&&(r=t,!((e=n).startAt&&!function(i,l,d){const f=xA(i,l,d);return i.inclusive?f<=0:f<0}(e.startAt,Jd(e),r)||e.endAt&&!function(i,l,d){const f=xA(i,l,d);return i.inclusive?f>=0:f>0}(e.endAt,Jd(e),r)));var e,r}function Xd(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Tm(n){return(t,e)=>{let r=!1;for(const i of Jd(n)){const l=Qf(i,t,e);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function Qf(n,t,e){const r=n.field.isKeyField()?et.comparator(t.key,e.key):function(i,l,d){const f=l.data.field(i),m=d.data.field(i);return null!==f&&null!==m?zd(f,m):ht()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function PA(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fm(t)?"-0":t}}function OA(n){return{integerValue:""+n}}function FA(n,t){return bA(t)?OA(t):PA(n,t)}class Dm{constructor(){this._=void 0}}function LA(n,t,e){return n instanceof ic?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(l.fields.__previous_value__=i),{mapValue:l}}(e,t):n instanceof eh?BA(n,t):n instanceof sc?oc(n,t):function(r,i){const l=NC(r,i),d=UA(l)+UA(r.k);return gm(l)&&gm(r.k)?OA(d):PA(r.M,d)}(n,t)}function VA(n,t,e){return n instanceof eh?BA(n,t):n instanceof sc?oc(n,t):e}function NC(n,t){return n instanceof ac?gm(e=t)||(r=e)&&"doubleValue"in r?t:{integerValue:0}:null;var r,e}class ic extends Dm{}class eh extends Dm{constructor(t){super(),this.elements=t}}function BA(n,t){const e=$A(t);for(const r of n.elements)e.some(i=>Vs(i,r))||e.push(r);return{arrayValue:{values:e}}}class sc extends Dm{constructor(t){super(),this.elements=t}}function oc(n,t){let e=$A(t);for(const r of n.elements)e=e.filter(i=>!Vs(i,r));return{arrayValue:{values:e}}}class ac extends Dm{constructor(t,e){super(),this.M=t,this.k=e}}function UA(n){return Ur(n.integerValue||n.doubleValue)}function $A(n){return mm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Nv{constructor(t,e){this.field=t,this.transform=e}}class sL{constructor(t,e){this.version=t,this.transformResults=e}}class pi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new pi}static exists(t){return new pi(void 0,t)}static updateTime(t){return new pi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xv(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class Mv{}function oL(n,t,e){n instanceof Rv?function(r,i,l){const d=r.value.clone(),f=ek(r.fieldTransforms,i,l.transformResults);d.setAll(f),i.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,t,e):n instanceof Xf?function(r,i,l){if(!xv(r.precondition,i))return void i.convertToUnknownDocument(l.version);const d=ek(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(XR(r)),f.setAll(d),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function HA(n,t,e){var i;n instanceof Rv?function(r,i,l){if(!xv(r.precondition,i))return;const d=r.value.clone(),f=s(r.fieldTransforms,l,i);d.setAll(f),i.convertToFoundDocument(jA(i),d).setHasLocalMutations()}(n,t,e):n instanceof Xf?function(r,i,l){if(!xv(r.precondition,i))return;const d=s(r.fieldTransforms,l,i),f=i.data;f.setAll(XR(r)),f.setAll(d),i.convertToFoundDocument(jA(i),f).setHasLocalMutations()}(n,t,e):xv(n.precondition,i=t)&&i.convertToNoDocument(Mt.min())}function aL(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),l=NC(r.transform,i||null);null!=l&&(null==e&&(e=ts.empty()),e.set(r.field,l))}return e||null}function QR(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===r||e&&r&&Kl(e,r,(i,l)=>function(n,t){return n.field.isEqual(t.field)&&(r=t.transform,(e=n.transform)instanceof eh&&r instanceof eh||e instanceof sc&&r instanceof sc?Kl(e.elements,r.elements,Vs):e instanceof ac&&r instanceof ac?Vs(e.k,r.k):e instanceof ic&&r instanceof ic);var e,r}(i,l))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,r}function jA(n){return n.isFoundDocument()?n.version:Mt.min()}class Rv extends Mv{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Xf extends Mv{constructor(t,e,r,i,l=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}}function XR(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function ek(n,t,e){const r=new Map;Bt(n.length===e.length);for(let i=0;i<e.length;i++){const l=n[i],d=l.transform,f=t.data.field(l.field);r.set(l.field,VA(d,f,e[i]))}return r}function s(n,t,e){const r=new Map;for(const i of n){const l=i.transform,d=e.data.field(i.field);r.set(i.field,LA(l,d,t))}return r}class o extends Mv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class u extends Mv{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class c{constructor(t){this.count=t}}var h,p;function _(n){switch(n){default:return ht();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function v(n){if(void 0===n)return pn("GRPC error has no .code"),ye.UNKNOWN;switch(n){case h.OK:return ye.OK;case h.CANCELLED:return ye.CANCELLED;case h.UNKNOWN:return ye.UNKNOWN;case h.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case h.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case h.INTERNAL:return ye.INTERNAL;case h.UNAVAILABLE:return ye.UNAVAILABLE;case h.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case h.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case h.NOT_FOUND:return ye.NOT_FOUND;case h.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case h.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case h.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case h.ABORTED:return ye.ABORTED;case h.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case h.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case h.DATA_LOSS:return ye.DATA_LOSS;default:return ht()}}(p=h||(h={}))[p.OK=0]="OK",p[p.CANCELLED=1]="CANCELLED",p[p.UNKNOWN=2]="UNKNOWN",p[p.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",p[p.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",p[p.NOT_FOUND=5]="NOT_FOUND",p[p.ALREADY_EXISTS=6]="ALREADY_EXISTS",p[p.PERMISSION_DENIED=7]="PERMISSION_DENIED",p[p.UNAUTHENTICATED=16]="UNAUTHENTICATED",p[p.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",p[p.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",p[p.ABORTED=10]="ABORTED",p[p.OUT_OF_RANGE=11]="OUT_OF_RANGE",p[p.UNIMPLEMENTED=12]="UNIMPLEMENTED",p[p.INTERNAL=13]="INTERNAL",p[p.UNAVAILABLE=14]="UNAVAILABLE",p[p.DATA_LOSS=15]="DATA_LOSS";class C{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,t))return l}has(t){return void 0!==this.get(t)}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(void 0===i)return this.inner[r]=[[t,e]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return 1===r.length?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){jd(this.inner,(e,r)=>{for(const[i,l]of r)t(i,l)})}isEmpty(){return yA(this.inner)}size(){return this.innerSize}}class D{constructor(t,e){this.comparator=t,this.root=e||P.EMPTY}insert(t,e){return new D(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,P.BLACK,null,null))}remove(t){return new D(this.comparator,this.root.remove(t,this.comparator).copy(null,null,P.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(0===r)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(0===i)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new N(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new N(this.root,t,this.comparator,!1)}getReverseIterator(){return new N(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new N(this.root,t,this.comparator,!0)}}class N{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?r(t.key,e):1,e&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(0===l){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class P{constructor(t,e,r,i,l){this.key=t,this.value=e,this.color=null!=r?r:P.RED,this.left=null!=i?i:P.EMPTY,this.right=null!=l?l:P.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,l){return new P(null!=t?t:this.key,null!=e?e:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const l=r(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,e,r),null):0===l?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return P.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return P.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,P.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,P.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const t=this.left.check();if(t!==this.right.check())throw ht();return t+(this.isRed()?0:1)}}P.EMPTY=null,P.RED=!0,P.BLACK=!1,P.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,t,e,r,i){return this}insert(n,t,e){return new P(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class L{constructor(t){this.comparator=t,this.data=new D(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new K(this.data.getIterator())}getIteratorFrom(t){return new K(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof L)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new L(this.comparator);return e.data=t,e}}class K{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function te(n){return n.hasNext()?n.getNext():void 0}const _e=new D(et.comparator);function ie(){return _e}const Be=new D(et.comparator);function Ae(){return Be}function gt(){return new C(n=>n.toString(),(n,t)=>n.isEqual(t))}const Rt=new D(et.comparator),gn=new L(et.comparator);function Ft(...n){let t=gn;for(const e of n)t=t.add(e);return t}const Lo=new L(tn);function lc(){return Lo}class al{constructor(t,e,r,i,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e){const r=new Map;return r.set(t,ll.createSynthesizedTargetChangeForCurrentChange(t,e)),new al(Mt.min(),r,lc(),ie(),Ft())}}class ll{constructor(t,e,r,i,l){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e){return new ll(fi.EMPTY_BYTE_STRING,e,Ft(),Ft(),Ft())}}class Xl{constructor(t,e,r,i){this.O=t,this.removedTargetIds=e,this.key=r,this.F=i}}class kv{constructor(t,e){this.targetId=t,this.$=e}}class Pv{constructor(t,e,r=fi.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class Ov{constructor(){this.B=0,this.L=lL(),this.U=fi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Ft(),e=Ft(),r=Ft();return this.L.forEach((i,l)=>{switch(l){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new ll(this.U,this.q,t,e,r)}J(){this.K=!1,this.L=lL()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class xC{constructor(t){this.nt=t,this.st=new Map,this.it=ie(),this.rt=Fv(),this.ot=new L(tn)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const r=this.lt(e);switch(t.state){case 0:this.ft(e)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(e);break;case 3:this.ft(e)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),r.W(t.resumeToken));break;default:ht()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((r,i)=>{this.ft(i)&&e(i)})}_t(t){const e=t.targetId,r=t.$.count,i=this.wt(e);if(i){const l=i.target;if(Yf(l))if(0===r){const d=new et(l.path);this.ct(e,d,ar.newNoDocument(d,Mt.min()))}else Bt(1===r);else this.gt(e)!==r&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((l,d)=>{const f=this.wt(d);if(f){if(l.current&&Yf(f.target)){const m=new et(f.target.path);null!==this.it.get(m)||this.It(d,m)||this.ct(d,m,ar.newNoDocument(m,t))}l.j&&(e.set(d,l.H()),l.J())}});let r=Ft();this.rt.forEach((l,d)=>{let f=!0;d.forEachWhile(m=>{const b=this.wt(m);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.it.forEach((l,d)=>d.setReadTime(t));const i=new al(t,e,this.ot,this.it,r);return this.it=ie(),this.rt=Fv(),this.ot=new L(tn),i}at(t,e){if(!this.ft(t))return;const r=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,r),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,e)?i.Y(e,1):i.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),r&&(this.it=this.it.insert(e,r))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new Ov,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new L(tn),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||$e("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new Ov),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function Fv(){return new D(et.comparator)}function lL(){return new D(et.comparator)}const W3={asc:"ASCENDING",desc:"DESCENDING"},Z3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class z3{constructor(t,e){this.databaseId=t,this.N=e}}function MC(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function uL(n,t){return n.N?t.toBase64():t.toUint8Array()}function Y3(n,t){return MC(n,t.toTimestamp())}function is(n){return Bt(!!n),Mt.fromTimestamp(function(t){const e=Gd(t);return new Qr(e.seconds,e.nanos)}(n))}function tk(n,t){return(e=n,new En(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function cL(n){const t=En.fromString(n);return Bt(vL(t)),t}function RC(n,t){return tk(n.databaseId,t.path)}function uc(n,t){const e=cL(t);if(e.get(1)!==n.databaseId.projectId)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Oe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new et(hL(e))}function nk(n,t){return tk(n.databaseId,t)}function dL(n){const t=cL(n);return 4===t.length?En.emptyPath():hL(t)}function kC(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hL(n){return Bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function fL(n,t,e){return{name:RC(n,t),fields:e.value.mapValue.fields}}function pL(n,t,e){const r=uc(n,t.name),i=is(t.updateTime),l=new ts({mapValue:{fields:t.fields}}),d=ar.newFoundDocument(r,i,l);return e&&d.setHasCommittedMutations(),e?d.setHasCommittedMutations():d}function PC(n,t){let e;if(t instanceof Rv)e={update:fL(n,t.key,t.value)};else if(t instanceof o)e={delete:RC(n,t.key)};else if(t instanceof Xf)e={update:fL(n,t.key,t.data),updateMask:i$(t.fieldMask)};else{if(!(t instanceof u))return ht();e={verify:RC(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(i,l){const d=l.transform;if(d instanceof ic)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof eh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof sc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ac)return{fieldPath:l.field.canonicalString(),increment:d.k};throw ht()}(0,r))),t.precondition.isNone||(e.currentDocument=void 0!==(i=t.precondition).updateTime?{updateTime:Y3(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),e;var i}function rk(n,t){const e=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?pi.updateTime(is(i.updateTime)):void 0!==i.exists?pi.exists(i.exists):pi.none():pi.none(),r=t.updateTransforms?t.updateTransforms.map(i=>function(l,d){let f=null;"setToServerValue"in d?(Bt("REQUEST_TIME"===d.setToServerValue),f=new ic):"appendMissingElements"in d?f=new eh(d.appendMissingElements.values||[]):"removeAllFromArray"in d?f=new sc(d.removeAllFromArray.values||[]):"increment"in d?f=new ac(l,d.increment):ht();const m=Ui.fromServerFormat(d.fieldPath);return new Nv(m,f)}(n,i)):[];var i;if(t.update){const i=uc(n,t.update.name),l=new ts({mapValue:{fields:t.update.fields}});if(t.updateMask){const d=new qf((t.updateMask.fieldPaths||[]).map(b=>Ui.fromServerFormat(b)));return new Xf(i,l,d,e,r)}return new Rv(i,l,e,r)}if(t.delete){const i=uc(n,t.delete);return new o(i,e)}if(t.verify){const i=uc(n,t.verify);return new u(i,e)}return ht()}function gL(n,t){return{documents:[nk(n,t.path)]}}function mL(n,t){const e={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(e.parent=nk(n,r),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=nk(n,r.popLast()),e.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const b=m.map(T=>function(A){if("=="===A.op){if(IA(A.value))return{unaryFilter:{field:Lv(A.field),op:"IS_NAN"}};if(DA(A.value))return{unaryFilter:{field:Lv(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(IA(A.value))return{unaryFilter:{field:Lv(A.field),op:"IS_NOT_NAN"}};if(DA(A.value))return{unaryFilter:{field:Lv(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lv(A.field),op:t$(A.op),value:A.value}}}(T));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(t.filters);i&&(e.structuredQuery.where=i);const l=function(m){if(0!==m.length)return m.map(b=>{return{field:Lv((T=b).field),direction:e$(T.dir)};var T})}(t.orderBy);l&&(e.structuredQuery.orderBy=l);const d=(b=t.limit,n.N||Wd(b)?b:{value:b});var b,f,m;return null!==d&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt={before:(f=t.startAt).inclusive,values:f.position}),t.endAt&&(e.structuredQuery.endAt={before:!(m=t.endAt).inclusive,values:m.position}),e}function _L(n){let t=dL(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Bt(1===r);const T=e.from[0];T.allDescendants?i=T.collectionId:t=t.child(T.collectionId)}let l=[];e.where&&(l=yL(e.where));let d=[];e.orderBy&&(d=e.orderBy.map(T=>{return new Kd(Vv((A=T).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;e.limit&&(f=function(T){let A;return A="object"==typeof T?T.value:T,Wd(A)?null:A}(e.limit));let m=null;var T;e.startAt&&(m=new nc((T=e.startAt).values||[],!!T.before));let b=null;return e.endAt&&(b=function(T){return new nc(T.values||[],!T.before)}(e.endAt)),Jf(t,i,d,l,f,"F",m,b)}function yL(n){return n?void 0!==n.unaryFilter?[r$(n)]:void 0!==n.fieldFilter?[n$(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>yL(t)).reduce((t,e)=>t.concat(e)):ht():[]}function e$(n){return W3[n]}function t$(n){return Z3[n]}function Lv(n){return{fieldPath:n.canonicalString()}}function Vv(n){return Ui.fromServerFormat(n.fieldPath)}function n$(n){return Xr.create(Vv(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function r$(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Vv(n.unaryFilter.field);return Xr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Vv(n.unaryFilter.field);return Xr.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vv(n.unaryFilter.field);return Xr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vv(n.unaryFilter.field);return Xr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function i$(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function vL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function io(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=bL(t)),t=s$(n.get(e),t);return bL(t)}function s$(n,t){let e=t;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=l}}return e}function bL(n){return n+"\x01\x01"}function cc(n){const t=n.length;if(Bt(t>=2),2===t)return Bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const e=t-2,r=[];let i="";for(let l=0;l<t;){const d=n.indexOf("\x01",l);switch((d<0||d>e)&&ht(),n.charAt(d+1)){case"\x01":const f=n.substring(l,d);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(l,d),i+="\0";break;case"\x11":i+=n.substring(l,d+1);break;default:ht()}l=d+2}return new En(r)}const wL=["userId","batchId"];function GA(n,t){return[n,io(t)]}function CL(n,t,e){return[n,io(t),e]}const o$={},a$=["prefixPath","collectionGroup","readTime","documentId"],l$=["prefixPath","collectionGroup","documentId"],u$=["collectionGroup","readTime","prefixPath","documentId"],c$=["canonicalId","targetId"],d$=["targetId","path"],h$=["path","targetId"],f$=["collectionId","parent"],p$=["indexId","uid"],g$=["uid","sequenceNumber"],m$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_$=["indexId","uid","orderedDocumentKey"],y$=["userId","collectionPath","documentId"],v$=["userId","collectionPath","largestBatchId"],b$=["userId","collectionGroup","largestBatchId"],EL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],w$=[...EL,"documentOverlays"],TL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C$=[...TL,"indexConfiguration","indexState","indexEntries"],DL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Te{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Te((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(e,l).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Te?e:Te.resolve(e)}catch(e){return Te.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Te.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Te.reject(e)}static resolve(t){return new Te((e,r)=>{e(t)})}static reject(t){return new Te((e,r)=>{r(t)})}static waitFor(t){return new Te((e,r)=>{let i=0,l=0,d=!1;t.forEach(f=>{++i,f.next(()=>{++l,d&&l===i&&e()},m=>r(m))}),d=!0,l===i&&e()})}static or(t){let e=Te.resolve(!1);for(const r of t)e=e.next(i=>i?Te.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,l)=>{r.push(e.call(this,i,l))}),this.waitFor(r)}}class qA{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Tr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new OC(t,e.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=ik(r.target.error);this.At.reject(new OC(t,i))}}static open(t,e,r,i){try{return new qA(e,t.transaction(i,r))}catch(l){throw new OC(e,l)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||($e("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new T$(e)}}class eu{constructor(t,e,r){this.name=t,this.version=e,this.bt=r,12.2===eu.Vt((0,V.z$)())&&pn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $e("SimpleDb","Removing database:",t),Am(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,V.hl)())return!1;if(eu.St())return!0;const t=(0,V.z$)(),e=eu.Vt(t),r=0<e&&e<10,i=eu.Dt(t),l=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||l)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(t){var e=this;return(0,Ee.Z)(function*(){return e.db||($e("SimpleDb","Opening database:",e.name),e.db=yield new Promise((r,i)=>{const l=indexedDB.open(e.name,e.version);l.onsuccess=d=>{r(d.target.result)},l.onblocked=()=>{i(new OC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=d=>{const f=d.target.error;i("VersionError"===f.name?new Oe(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Oe(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new OC(t,f))},l.onupgradeneeded=d=>{$e("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',d.oldVersion),e.bt.kt(d.target.result,l.transaction,d.oldVersion,e.version).next(()=>{$e("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=r=>e.Mt(r)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,r,i){var l=this;return(0,Ee.Z)(function*(){const d="readonly"===e;let f=0;for(;;){++f;try{l.db=yield l.Nt(t);const m=qA.open(l.db,t,d?"readonly":"readwrite",r),b=i(m).next(T=>(m.Pt(),T)).catch(T=>(m.abort(T),Te.reject(T))).toPromise();return b.catch(()=>{}),yield m.Rt,b}catch(m){const b="FirebaseError"!==m.name&&f<3;if($e("SimpleDb","Transaction failed with error:",m.message,"Retrying:",b),l.close(),!b)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class E${constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return Am(this.Ft.delete())}}class OC extends Oe{constructor(t,e){super(ye.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Im(n){return"IndexedDbTransactionError"===n.name}class T${constructor(t){this.store=t}put(t,e){let r;return void 0!==e?($e("SimpleDb","PUT",this.store.name,t,e),r=this.store.put(e,t)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),Am(r)}add(t){return $e("SimpleDb","ADD",this.store.name,t,t),Am(this.store.add(t))}get(t){return Am(this.store.get(t)).next(e=>(void 0===e&&(e=null),$e("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $e("SimpleDb","DELETE",this.store.name,t),Am(this.store.delete(t))}count(){return $e("SimpleDb","COUNT",this.store.name),Am(this.store.count())}qt(t,e){const r=this.options(t,e);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.Kt(i,(d,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new Te((l,d)=>{i.onerror=f=>{d(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}Gt(t,e){const r=this.store.getAll(t,null===e?void 0:e);return new Te((i,l)=>{r.onerror=d=>{l(d.target.error)},r.onsuccess=d=>{i(d.target.result)}})}Qt(t,e){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(t,e);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(l,d,f)=>f.delete())}Wt(t,e){let r;e?r=t:(r={},e=t);const i=this.cursor(r);return this.Kt(i,e)}zt(t){const e=this.cursor({});return new Te((r,i)=>{e.onerror=l=>{const d=ik(l.target.error);i(d)},e.onsuccess=l=>{const d=l.target.result;d?t(d.primaryKey,d.value).next(f=>{f?d.continue():r()}):r()}})}Kt(t,e){const r=[];return new Te((i,l)=>{t.onerror=d=>{l(d.target.error)},t.onsuccess=d=>{const f=d.target.result;if(!f)return void i();const m=new E$(f),b=e(f.primaryKey,f.value,m);if(b instanceof Te){const T=b.catch(A=>(m.done(),Te.reject(A)));r.push(T)}m.isDone?i():null===m.Lt?f.continue():f.continue(m.Lt)}}).next(()=>Te.waitFor(r))}options(t,e){let r;return void 0!==t&&("string"==typeof t?r=t:e=t),{index:r,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const r=this.store.index(t.index);return t.jt?r.openKeyCursor(t.range,e):r.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Am(n){return new Te((t,e)=>{n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{const i=ik(r.target.error);e(i)}})}let AL=!1;function ik(n){const t=eu.Vt((0,V.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AL||(AL=!0,setTimeout(()=>{throw r},0)),r}}return n}class SL extends IL{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function ss(n,t){const e=rt(n);return eu.xt(e.Ht,t)}class sk{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&oL(l,t,r[i])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&HA(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&HA(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const r=t.get(e.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Mt.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ft())}isEqual(t){return this.batchId===t.batchId&&Kl(this.mutations,t.mutations,(e,r)=>QR(e,r))&&Kl(this.baseMutations,t.baseMutations,(e,r)=>QR(e,r))}}class ok{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Bt(t.mutations.length===r.length);let i=Rt;const l=t.mutations;for(let d=0;d<l.length;d++)i=i.insert(l[d].key,r[d].version);return new ok(t,e,r,i)}}class ak{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ep{constructor(t,e,r,i,l=Mt.min(),d=Mt.min(),f=fi.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f}withSequenceNumber(t){return new ep(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new ep(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class NL{constructor(t){this.Jt=t}}function xL(n,t){const e=t.key,r={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:WA(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document={name:RC(i=n.Jt,(l=t).key),fields:l.data.value.mapValue.fields,updateTime:MC(i,l.version.toTimestamp())};else if(t.isNoDocument())r.noDocument={path:e.path.toArray(),readTime:Sm(t.version)};else{if(!t.isUnknownDocument())return ht();r.unknownDocument={path:e.path.toArray(),version:Sm(t.version)}}var i,l;return r}function WA(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Sm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Nm(n){const t=new Qr(n.seconds,n.nanoseconds);return Mt.fromTimestamp(t)}function Bv(n,t){const e=(t.baseMutations||[]).map(l=>rk(n.Jt,l));for(let l=0;l<t.mutations.length-1;++l){const d=t.mutations[l];l+1<t.mutations.length&&void 0!==t.mutations[l+1].transform&&(d.updateTransforms=t.mutations[l+1].transform.fieldTransforms,t.mutations.splice(l+1,1),++l)}const r=t.mutations.map(l=>rk(n.Jt,l)),i=Qr.fromMillis(t.localWriteTimeMs);return new sk(t.batchId,i,e,r)}function FC(n){const t=Nm(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Nm(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Bt(1===(i=n.query).documents.length),r=ro(rc(dL(i.documents[0])))):r=ro(_L(n.query)),new ep(r,n.targetId,0,n.lastListenSequenceNumber,t,e,fi.fromBase64String(n.resumeToken))}function ML(n,t){const e=Sm(t.snapshotVersion),r=Sm(t.lastLimboFreeSnapshotVersion);let i;i=Yf(t.target)?gL(n.Jt,t.target):mL(n.Jt,t.target);const l=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Yd(t.target),readTime:e,resumeToken:l,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lk(n){const t=_L({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?RA(t,t.limit,"L"):t}function uk(n,t){return new ak(t.largestBatchId,rk(n.Jt,t.overlayMutation))}function RL(n,t){const e=t.path.lastSegment();return[n,io(t.path.popLast()),e]}class I${getBundleMetadata(t,e){return kL(t).get(e).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Nm(i.createTime),version:i.version};var i})}saveBundleMetadata(t,e){return kL(t).put({bundleId:(r=e).id,createTime:Sm(is(r.createTime)),version:r.version});var r}getNamedQuery(t,e){return PL(t).get(e).next(r=>{if(r)return{name:(i=r).name,query:lk(i.bundledQuery),readTime:Nm(i.readTime)};var i})}saveNamedQuery(t,e){return PL(t).put({name:(r=e).name,readTime:Sm(is(r.readTime)),bundledQuery:r.bundledQuery});var r}}function kL(n){return ss(n,"bundles")}function PL(n){return ss(n,"namedQueries")}class ck{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new ck(t,e.uid||"")}getOverlay(t,e){return LC(t).get(RL(this.userId,e)).next(r=>r?uk(this.M,r):null)}saveOverlays(t,e,r){const i=[];return r.forEach((l,d)=>{const f=new ak(e,d);i.push(this.Xt(t,f))}),Te.waitFor(i)}removeOverlaysForBatchId(t,e,r){const i=new Set;e.forEach(d=>i.add(io(d.getCollectionPath())));const l=[];return i.forEach(d=>{const f=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);l.push(LC(t).Qt("collectionPathOverlayIndex",f))}),Te.waitFor(l)}getOverlaysForCollection(t,e,r){const i=gt(),l=io(e),d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return LC(t).qt("collectionPathOverlayIndex",d).next(f=>{for(const m of f){const b=uk(this.M,m);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(t,e,r,i){const l=gt();let d;const f=IDBKeyRange.bound([this.userId,e,r],[this.userId,e,Number.POSITIVE_INFINITY],!0);return LC(t).Wt({index:"collectionGroupOverlayIndex",range:f},(m,b,T)=>{const A=uk(this.M,b);l.size()<i||A.largestBatchId===d?(l.set(A.getKey(),A),d=A.largestBatchId):T.done()}).next(()=>l)}Xt(t,e){return LC(t).put(function(r,i,l){const[d,f,m]=RL(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:PC(r.Jt,l.mutation)}}(this.M,this.userId,e))}}function LC(n){return ss(n,"documentOverlays")}class xm{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Ur(t.integerValue));else if("doubleValue"in t){const r=Ur(t.doubleValue);isNaN(r)?this.ne(e,13):(this.ne(e,15),fm(r)?e.se(0):e.se(r))}else if("timestampValue"in t){const r=t.timestampValue;this.ne(e,20),"string"==typeof r?e.ie(r):(e.ie(`${r.seconds||""}`),e.se(r.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(qd(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const r=t.geoPointValue;this.ne(e,45),e.se(r.latitude||0),e.se(r.longitude||0)}else"mapValue"in t?AA(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):ht()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const r=t.fields||{};this.ne(e,55);for(const i of Object.keys(r))this.re(i,e),this.te(r[i],e)}he(t,e){const r=t.values||[];this.ne(e,50);for(const i of r)this.te(i,e)}ae(t,e){this.ne(e,37),et.fromName(t).path.forEach(r=>{this.ne(e,60),this.le(r,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function A$(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function OL(n){const t=64-function(e){let r=0;for(let i=0;i<8;++i){const l=A$(255&e[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(t/8)}xm.fe=new xm;class S${constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this._e(r.value),r=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let r=e.next();for(;!r.done;)this.ge(r.value),r=e.next();this.ye()}pe(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(e<"\ud800"||"\udbff"<e)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=e.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(t){for(const e of t){const r=e.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(e<"\ud800"||"\udbff"<e)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=e.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(t){const e=this.Ee(t),r=OL(e);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=255&e[i]}Re(t){const e=this.Ee(t),r=OL(e);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=e.length-r;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(t),r=0!=(128&e[0]);e[0]^=r?255:128;for(let i=1;i<e.length;++i)e[i]^=r?255:0;return e}_e(t){const e=255&t;0===e?(this.be(0),this.be(255)):255===e?(this.be(255),this.be(0)):this.be(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let r=2*this.buffer.length;r<e&&(r=e);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class N${constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class x${constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class VC{constructor(){this.De=new S$,this.Ce=new N$(this.De),this.xe=new x$(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class tp{constructor(t,e,r,i){this.indexId=t,this.documentKey=e,this.arrayValue=r,this.directionalValue=i}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(e);return r.set(this.directionalValue,0),e!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new tp(this.indexId,this.documentKey,this.arrayValue,r)}}function Mm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=FL(n.arrayValue,t.arrayValue),0!==e?e:(e=FL(n.directionalValue,t.directionalValue),0!==e?e:et.comparator(n.documentKey,t.documentKey)))}function FL(n,t){for(let e=0;e<n.length&&e<t.length;++e){const r=n[e]-t[e];if(0!==r)return r}return n.length-t.length}class M${constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const r=e;r.S()?this.Fe=r:this.Oe.push(r)}}$e(t){const e=vm(t);if(void 0!==e&&!this.Be(e))return!1;const r=Ql(t);let i=0,l=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const d=r[i];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[l++],d))return!1;++i}for(;i<r.length;++i){const d=r[i];if(l>=this.Me.length||!this.Ue(this.Me[l++],d))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class R${constructor(){this.qe=new dk}addToCollectionParentIndex(t,e){return this.qe.add(e),Te.resolve()}getCollectionParents(t,e){return Te.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return Te.resolve()}deleteFieldIndex(t,e){return Te.resolve()}getDocumentsMatchingTarget(t,e){return Te.resolve(null)}getFieldIndex(t,e){return Te.resolve(null)}getFieldIndexes(t,e){return Te.resolve([])}getNextCollectionGroupToUpdate(t){return Te.resolve(null)}updateCollectionGroup(t,e,r){return Te.resolve()}updateIndexEntries(t,e){return Te.resolve()}}class dk{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new L(En.comparator),l=!i.has(r);return this.index[e]=i.add(r),l}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new L(En.comparator)).toArray()}}const Uv=new Uint8Array(0);class k${constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new dk,this.Ge=new C(r=>Yd(r),(r,i)=>wm(r,i)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const l={collectionId:r,parent:io(i)};return LL(t).put(l)}return Te.resolve()}getCollectionParents(t,e){const r=[],i=IDBKeyRange.bound([e,""],[_A(e),""],!1,!0);return LL(t).qt(i).next(l=>{for(const d of l){if(d.collectionId!==e)break;r.push(cc(d.parent))}return r})}addFieldIndex(t,e){const r=ZA(t),i={indexId:(l=e).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;return delete i.indexId,r.add(i).next()}deleteFieldIndex(t,e){const r=ZA(t),i=zA(t),l=BC(t);return r.delete(e.indexId).next(()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const r=BC(t);let i=!0;const l=new Map;return Te.forEach(this.Qe(e),d=>this.getFieldIndex(t,d).next(f=>{i&&(i=!!f),l.set(d,f)})).next(()=>{if(i){let d=Ft();const f=[];return Te.forEach(l,(m,b)=>{var T;$e("IndexedDbIndexManager",`Using index ${T=m,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(it=>`${it.fieldPath}:${it.kind}`).join(",")}`} to execute ${Yd(e)}`);const A=function(it,ot){const Lt=vm(ot);if(void 0===Lt)return null;for(const ln of Tv(it,Lt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(b,m),M=function(it,ot){const Lt=new Map;for(const ln of Ql(ot))for(const zr of Tv(it,ln.fieldPath))switch(zr.op){case"==":case"in":Lt.set(ln.fieldPath.canonicalString(),zr.value);break;case"not-in":case"!=":return Lt.set(ln.fieldPath.canonicalString(),zr.value),Array.from(Lt.values())}return null}(b,m),O=function(it,ot){const Lt=[];let ln=!0;for(const zr of Ql(ot)){const ri=0===zr.kind?ns(it,zr.fieldPath,it.startAt):Kf(it,zr.fieldPath,it.startAt);if(!ri.value)return null;Lt.push(ri.value),ln&&(ln=ri.inclusive)}return new nc(Lt,ln)}(b,m),q=function(it,ot){const Lt=[];let ln=!0;for(const zr of Ql(ot)){const ri=0===zr.kind?Kf(it,zr.fieldPath,it.endAt):ns(it,zr.fieldPath,it.endAt);if(!ri.value)return null;Lt.push(ri.value),ln&&(ln=ri.inclusive)}return new nc(Lt,ln)}(b,m),ue=this.je(m,b,O),be=this.je(m,b,q),Ge=this.We(m,b,M),Ke=this.ze(m.indexId,A,ue,!!O&&O.inclusive,be,!!q&&q.inclusive,Ge);return Te.forEach(Ke,it=>r.Gt(it,e.limit).next(ot=>{ot.forEach(Lt=>{const ln=et.fromSegments(Lt.documentKey);d.has(ln)||(d=d.add(ln),f.push(ln))})}))}).next(()=>f)}return Te.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}ze(t,e,r,i,l,d,f){const m=(null!=e?e.length:1)*Math.max(null!=r?r.length:1,null!=l?l.length:1),b=m/(null!=e?e.length:1),T=[];for(let A=0;A<m;++A){const M=e?this.He(e[A/b]):Uv,O=r?this.Je(t,M,r[A%b],i):this.Ye(t),q=l?this.Xe(t,M,l[A%b],d):this.Ye(t+1);T.push(...this.createRange(O,q,f.map(ue=>this.Je(t,M,ue,!0))))}return T}Je(t,e,r,i){const l=new tp(t,et.empty(),e,r);return i?l:l.ke()}Xe(t,e,r,i){const l=new tp(t,et.empty(),e,r);return i?l.ke():l}Ye(t){return new tp(t,et.empty(),Uv,Uv)}getFieldIndex(t,e){const r=new M$(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next(l=>{const d=l.filter(f=>r.$e(f));return d.sort((f,m)=>m.fields.length-f.fields.length),d.length>0?d[0]:null})}Ze(t,e){const r=new VC;for(const i of Ql(t)){const l=e.data.field(i.fieldPath);if(null==l)return null;const d=r.Ne(i.kind);xm.fe.Zt(l,d)}return r.Se()}He(t){const e=new VC;return xm.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const r=new VC;return xm.fe.Zt(Zf(this.databaseId,e),r.Ne(function(i){const l=Ql(i);return 0===l.length?0:l[l.length-1].kind}(t))),r.Se()}We(t,e,r){if(null===r)return[];let i=[];i.push(new VC);let l=0;for(const d of Ql(t)){const f=r[l++];for(const m of i)if(this.en(e,d.fieldPath)&&mm(f))i=this.nn(i,d,f);else{const b=m.Ne(d.kind);xm.fe.Zt(f,b)}}return this.sn(i)}je(t,e,r){return null==r?null:this.We(t,e,r.position)}sn(t){const e=[];for(let r=0;r<t.length;++r)e[r]=t[r].Se();return e}nn(t,e,r){const i=[...t],l=[];for(const d of r.arrayValue.values||[])for(const f of i){const m=new VC;m.seed(f.Se()),xm.fe.Zt(d,m.Ne(e.kind)),l.push(m)}return l}en(t,e){return!!t.filters.find(r=>r instanceof Xr&&r.field.isEqual(e)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(t,e){const r=ZA(t),i=zA(t);return(e?r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):r.qt()).next(l=>{const d=[];return Te.forEach(l,f=>i.get([f.indexId,this.uid]).next(m=>{d.push(function(b,T){const A=T?new tc(T.sequenceNumber,new ol(Nm(T.readTime),new et(cc(T.documentKey)),T.largestBatchId)):tc.empty(),M=b.fields.map(([O,q])=>new zf(Ui.fromServerFormat(O),q));return new ym(b.indexId,b.collectionGroup,M,A)}(f,m))})).next(()=>d)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:tn(r.collectionGroup,i.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,r){const i=ZA(t),l=zA(t);return this.rn(t).next(d=>i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(f=>Te.forEach(f,m=>{return l.put({indexId:m.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:Sm((M=r).readTime),documentKey:io(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(t,e){const r=new Map;return Te.forEach(e,(i,l)=>{const d=r.get(i.collectionGroup);return(d?Te.resolve(d):this.getFieldIndexes(t,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),Te.forEach(f,m=>this.on(t,i,m).next(b=>{const T=this.un(l,m);return b.isEqual(T)?Te.resolve():this.an(t,l,m,b,T)}))))})}cn(t,e,r,i){return BC(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,e.key),documentKey:e.key.path.toArray()})}hn(t,e,r,i){return BC(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,e.key),e.key.path.toArray()])}on(t,e,r){const i=BC(t);let l=new L(Mm);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,e)])},(d,f)=>{l=l.add(new tp(r.indexId,e,f.arrayValue,f.directionalValue))}).next(()=>l)}un(t,e){let r=new L(Mm);const i=this.Ze(e,t);if(null==i)return r;const l=vm(e);if(null!=l){const d=t.data.field(l.fieldPath);if(mm(d))for(const f of d.arrayValue.values||[])r=r.add(new tp(e.indexId,t.key,this.He(f),i))}else r=r.add(new tp(e.indexId,t.key,Uv,i));return r}an(t,e,r,i,l){$e("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const d=[];return function(f,m,b,T,A){const M=f.getIterator(),O=m.getIterator();let q=te(M),ue=te(O);for(;q||ue;){let be=!1,Ge=!1;if(q&&ue){const Ke=b(q,ue);Ke<0?Ge=!0:Ke>0&&(be=!0)}else null!=q?Ge=!0:be=!0;be?(T(ue),ue=te(O)):Ge?(A(q),q=te(M)):(q=te(M),ue=te(O))}}(i,l,Mm,f=>{d.push(this.cn(t,e,r,f))},f=>{d.push(this.hn(t,e,r,f))}),Te.waitFor(d)}rn(t){let e=1;return zA(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),e=i.sequenceNumber+1}).next(()=>e)}createRange(t,e,r){r=r.sort((d,f)=>Mm(d,f)).filter((d,f,m)=>!f||0!==Mm(d,m[f-1]));const i=[];i.push(t);for(const d of r){const f=Mm(d,t),m=Mm(d,e);if(0===f)i[0]=t.ke();else if(f>0&&m<0)i.push(d),i.push(d.ke());else if(m>0)break}i.push(e);const l=[];for(let d=0;d<i.length;d+=2)l.push(IDBKeyRange.bound([i[d].indexId,this.uid,i[d].arrayValue,i[d].directionalValue,Uv,[]],[i[d+1].indexId,this.uid,i[d+1].arrayValue,i[d+1].directionalValue,Uv,[]]));return l}}function LL(n){return ss(n,"collectionParents")}function BC(n){return ss(n,"indexEntries")}function ZA(n){return ss(n,"indexConfiguration")}function zA(n){return ss(n,"indexState")}const VL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vo{constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}static withCacheSize(t){return new Vo(t,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function BL(n,t,e){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],d=IDBKeyRange.only(e.batchId);let f=0;const m=r.Wt({range:d},(T,A,M)=>(f++,M.delete()));l.push(m.next(()=>{Bt(1===f)}));const b=[];for(const T of e.mutations){const A=CL(t,T.key.path,e.batchId);l.push(i.delete(A)),b.push(T.key)}return Te.waitFor(l).next(()=>b)}function YA(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ht();t=n.noDocument}return JSON.stringify(t).length}Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(41943040,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);class hk{constructor(t,e,r,i){this.userId=t,this.M=e,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(t,e,r,i){Bt(""!==t.uid);const l=t.isAuthenticated()?t.uid:"";return new hk(l,e,r,i)}checkEmpty(t){let e=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return np(t).Wt({index:"userMutationsIndex",range:r},(i,l,d)=>{e=!1,d.done()}).next(()=>e)}addMutationBatch(t,e,r,i){const l=$v(t),d=np(t);return d.add({}).next(f=>{Bt("number"==typeof f);const m=new sk(f,e,r,i),b=function(M,O,q){const ue=q.baseMutations.map(Ge=>PC(M.Jt,Ge)),be=q.mutations.map(Ge=>PC(M.Jt,Ge));return{userId:O,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:ue,mutations:be}}(this.M,this.userId,m),T=[];let A=new L((M,O)=>tn(M.canonicalString(),O.canonicalString()));for(const M of i){const O=CL(this.userId,M.key.path,f);A=A.add(M.key.path.popLast()),T.push(d.put(b)),T.push(l.put(O,o$))}return A.forEach(M=>{T.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.ln[f]=m.keys()}),Te.waitFor(T).next(()=>m)})}lookupMutationBatch(t,e){return np(t).get(e).next(r=>r?(Bt(r.userId===this.userId),Bv(this.M,r)):null)}fn(t,e){return this.ln[e]?Te.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(r=>{if(r){const i=r.keys();return this.ln[e]=i,i}return null})}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return np(t).Wt({index:"userMutationsIndex",range:i},(d,f,m)=>{f.userId===this.userId&&(Bt(f.batchId>=r),l=Bv(this.M,f)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return np(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(i,l,d)=>{r=l.batchId,d.done()}).next(()=>r)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return np(t).qt("userMutationsIndex",e).next(r=>r.map(i=>Bv(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(t,e){const r=GA(this.userId,e.path),i=IDBKeyRange.lowerBound(r),l=[];return $v(t).Wt({range:i},(d,f,m)=>{const[b,T,A]=d,M=cc(T);if(b===this.userId&&e.path.isEqual(M))return np(t).get(A).next(O=>{if(!O)throw ht();Bt(O.userId===this.userId),l.push(Bv(this.M,O))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new L(tn);const i=[];return e.forEach(l=>{const d=GA(this.userId,l.path),f=IDBKeyRange.lowerBound(d),m=$v(t).Wt({range:f},(b,T,A)=>{const[M,O,q]=b,ue=cc(O);M===this.userId&&l.path.isEqual(ue)?r=r.add(q):A.done()});i.push(m)}),Te.waitFor(i).next(()=>this.dn(t,r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1,l=GA(this.userId,r),d=IDBKeyRange.lowerBound(l);let f=new L(tn);return $v(t).Wt({range:d},(m,b,T)=>{const[A,M,O]=m,q=cc(M);A===this.userId&&r.isPrefixOf(q)?q.length===i&&(f=f.add(O)):T.done()}).next(()=>this.dn(t,f))}dn(t,e){const r=[],i=[];return e.forEach(l=>{i.push(np(t).get(l).next(d=>{if(null===d)throw ht();Bt(d.userId===this.userId),r.push(Bv(this.M,d))}))}),Te.waitFor(i).next(()=>r)}removeMutationBatch(t,e){return BL(t.Ht,this.userId,e).next(r=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),Te.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(t,i))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return $v(t).Wt({range:r},(l,d,f)=>{if(l[0]===this.userId){const m=cc(l[1]);i.push(m)}else f.done()}).next(()=>{Bt(0===i.length)})})}containsKey(t,e){return UL(t,this.userId,e)}wn(t){return $L(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function UL(n,t,e){const r=GA(t,e.path),i=r[1],l=IDBKeyRange.lowerBound(r);let d=!1;return $v(n).Wt({range:l,jt:!0},(f,m,b)=>{const[T,A,M]=f;T===t&&A===i&&(d=!0),b.done()}).next(()=>d)}function np(n){return ss(n,"mutations")}function $v(n){return ss(n,"documentMutations")}function $L(n){return ss(n,"mutationQueues")}class Rm{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Rm(0)}static yn(){return new Rm(-1)}}class P${constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const r=new Rm(e.highestTargetId);return e.highestTargetId=r.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>Mt.fromTimestamp(new Qr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,r){return this.pn(t).next(i=>(i.highestListenSequenceNumber=e,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.In(t,i)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(r=>(r.targetCount+=1,this.En(e,r),this.In(t,r))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Hv(t).delete(e.targetId)).next(()=>this.pn(t)).next(r=>(Bt(r.targetCount>0),r.targetCount-=1,this.In(t,r)))}removeTargets(t,e,r){let i=0;const l=[];return Hv(t).Wt((d,f)=>{const m=FC(f);m.sequenceNumber<=e&&null===r.get(m.targetId)&&(i++,l.push(this.removeTargetData(t,m)))}).next(()=>Te.waitFor(l)).next(()=>i)}forEachTarget(t,e){return Hv(t).Wt((r,i)=>{const l=FC(i);e(l)})}pn(t){return HL(t).get("targetGlobalKey").next(e=>(Bt(null!==e),e))}In(t,e){return HL(t).put("targetGlobalKey",e)}Tn(t,e){return Hv(t).put(ML(this.M,e))}En(t,e){let r=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,r=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const r=Yd(e),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Hv(t).Wt({range:i,index:"queryTargetsIndex"},(d,f,m)=>{const b=FC(f);wm(e,b.target)&&(l=b,m.done())}).next(()=>l)}addMatchingKeys(t,e,r){const i=[],l=rp(t);return e.forEach(d=>{const f=io(d.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(t,r,d))}),Te.waitFor(i)}removeMatchingKeys(t,e,r){const i=rp(t);return Te.forEach(e,l=>{const d=io(l.path);return Te.waitFor([i.delete([r,d]),this.referenceDelegate.removeReference(t,r,l)])})}removeMatchingKeysForTargetId(t,e){const r=rp(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(t,e){const r=IDBKeyRange.bound([e],[e+1],!1,!0),i=rp(t);let l=Ft();return i.Wt({range:r,jt:!0},(d,f,m)=>{const b=cc(d[1]),T=new et(b);l=l.add(T)}).next(()=>l)}containsKey(t,e){const r=io(e.path),i=IDBKeyRange.bound([r],[_A(r)],!1,!0);let l=0;return rp(t).Wt({index:"documentTargetsIndex",jt:!0,range:i},([d,f],m,b)=>{0!==d&&(l++,b.done())}).next(()=>l>0)}Et(t,e){return Hv(t).get(e).next(r=>r?FC(r):null)}}function Hv(n){return ss(n,"targets")}function HL(n){return ss(n,"targetGlobal")}function rp(n){return ss(n,"targetDocuments")}function km(n){return fk.apply(this,arguments)}function fk(){return(fk=(0,Ee.Z)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==DL)throw n;$e("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function jL([n,t],[e,r]){const i=tn(n,e);return 0===i?tn(t,r):i}class O${constructor(t){this.An=t,this.buffer=new L(jL),this.Rn=0}Pn(){return++this.Rn}bn(t){const e=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const r=this.buffer.last();jL(e,r)<0&&(this.buffer=this.buffer.delete(r).add(e))}}get maxValue(){return this.buffer.last()[0]}}class F${constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const r=this.Vn?3e5:6e4;$e("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(i){Im(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield km(i)}yield e.Sn(t)}))}}class L${constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(r=>Math.floor(e/100*r))}nthSequenceNumber(t,e){if(0===e)return Te.resolve(Fo.A);const r=new O$(e);return this.Dn.forEachTarget(t,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(t,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(t,e,r){return this.Dn.removeTargets(t,e,r)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(VL)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VL):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let r,i,l,d,f,m,b;const T=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,d=Date.now(),this.nthSequenceNumber(t,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(t,r,e))).next(A=>(l=A,m=Date.now(),this.removeOrphanedDocuments(t,r))).next(A=>(b=Date.now(),pA()<=So.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-T}ms\n\tDetermined least recently used ${i} in `+(f-d)+`ms\n\tRemoved ${l} targets in `+(m-f)+`ms\n\tRemoved ${A} documents in `+(b-m)+`ms\nTotal Duration: ${b-T}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:A})))}}class V${constructor(t,e){this.db=t,this.garbageCollector=new L$(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(i=>r+i))}kn(t){let e=0;return this.xn(t,r=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(r,i)=>e(i))}addReference(t,e,r){return KA(t,r)}removeReference(t,e,r){return KA(t,r)}removeTargets(t,e,r){return this.db.getTargetCache().removeTargets(t,e,r)}markPotentiallyOrphaned(t,e){return KA(t,e)}On(t,e){return function(r,i){let l=!1;return $L(r).zt(d=>UL(r,d,i).next(f=>(f&&(l=!0),Te.resolve(!f)))).next(()=>l)}(t,e)}removeOrphanedDocuments(t,e){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Mn(t,(d,f)=>{if(f<=e){const m=this.On(t,d).next(b=>{if(!b)return l++,r.getEntry(t,d).next(()=>(r.removeEntry(d,Mt.min()),rp(t).delete([0,io(d.path)])))});i.push(m)}}).next(()=>Te.waitFor(i)).next(()=>r.apply(t)).next(()=>l)}removeTarget(t,e){const r=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,e){return KA(t,e)}Mn(t,e){const r=rp(t);let i,l=Fo.A;return r.Wt({index:"documentTargetsIndex"},([d,f],{path:m,sequenceNumber:b})=>{0===d?(l!==Fo.A&&e(new et(cc(i)),l),l=b,i=m):l=Fo.A}).next(()=>{l!==Fo.A&&e(new et(cc(i)),l)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function KA(n,t){return rp(n).put((r=n.currentSequenceNumber,{targetId:0,path:io(t.path),sequenceNumber:r}));var r}class GL{constructor(){this.changes=new C(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ar.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return void 0!==r?Te.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class B${constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,r){return Pm(t).put(r)}removeEntry(t,e,r){return Pm(t).delete(function(i,l){const d=i.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],WA(l),d[d.length-1]]}(e,r))}updateMetadata(t,e){return this.getMetadata(t).next(r=>(r.byteSize+=e,this.Fn(t,r)))}getEntry(t,e){let r=ar.newInvalidDocument(e);return Pm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(UC(e))},(i,l)=>{r=this.$n(e,l)}).next(()=>r)}Bn(t,e){let r={size:0,document:ar.newInvalidDocument(e)};return Pm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(UC(e))},(i,l)=>{r={document:this.$n(e,l),size:YA(l)}}).next(()=>r)}getEntries(t,e){let r=ie();return this.Ln(t,e,(i,l)=>{const d=this.$n(i,l);r=r.insert(i,d)}).next(()=>r)}Un(t,e){let r=ie(),i=new D(et.comparator);return this.Ln(t,e,(l,d)=>{const f=this.$n(l,d);r=r.insert(l,f),i=i.insert(l,YA(d))}).next(()=>({documents:r,qn:i}))}Ln(t,e,r){if(e.isEmpty())return Te.resolve();let i=new L(ZL);e.forEach(m=>i=i.add(m));const l=IDBKeyRange.bound(UC(i.first()),UC(i.last())),d=i.getIterator();let f=d.getNext();return Pm(t).Wt({index:"documentKeyIndex",range:l},(m,b,T)=>{const A=et.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&ZL(f,A)<0;)r(f,null),f=d.getNext();f&&f.isEqual(A)&&(r(f,b),f=d.hasNext()?d.getNext():null),f?T.Ut(UC(f)):T.done()}).next(()=>{for(;f;)r(f,null),f=d.hasNext()?d.getNext():null})}getAllFromCollection(t,e,r){const i=[e.popLast().toArray(),e.lastSegment(),WA(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pm(t).qt(IDBKeyRange.bound(i,l,!0)).next(d=>{let f=ie();for(const m of d){const b=this.$n(et.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(t,e,r,i){let l=ie();const d=WL(e,r),f=WL(e,ol.max());return Pm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,f,!0)},(m,b,T)=>{const A=this.$n(et.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);l=l.insert(A.key,A),l.size===i&&T.done()}).next(()=>l)}newChangeBuffer(t){return new U$(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return qL(t).get("remoteDocumentGlobalKey").next(e=>(Bt(!!e),e))}Fn(t,e){return qL(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const r=function(n,t){let e;if(t.document)e=pL(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=et.fromSegments(t.noDocument.path),i=Nm(t.noDocument.readTime);e=ar.newNoDocument(r,i),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ht();{const r=et.fromSegments(t.unknownDocument.path),i=Nm(t.unknownDocument.version);e=ar.newUnknownDocument(r,i)}}return t.readTime&&e.setReadTime(function(r){const i=new Qr(r[0],r[1]);return Mt.fromTimestamp(i)}(t.readTime)),e}(this.M,e);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return ar.newInvalidDocument(t)}}class U$ extends GL{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new C(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(t){const e=[];let r=0,i=new L((l,d)=>tn(l.canonicalString(),d.canonicalString()));return this.changes.forEach((l,d)=>{const f=this.Gn.get(l);if(e.push(this.Kn.removeEntry(t,l,f.readTime)),d.isValidDocument()){const m=xL(this.Kn.M,d);i=i.add(l.path.popLast()),r+=YA(m)-f.size,e.push(this.Kn.addEntry(t,l,m))}else if(r-=f.size,this.trackRemovals){const m=xL(this.Kn.M,d.convertToNoDocument(Mt.min()));e.push(this.Kn.addEntry(t,l,m))}}),i.forEach(l=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,l))}),e.push(this.Kn.updateMetadata(t,r)),Te.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(r=>(this.Gn.set(e,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:r,qn:i})=>(i.forEach((l,d)=>{this.Gn.set(l,{size:d,readTime:r.get(l).readTime})}),r))}}function qL(n){return ss(n,"remoteDocumentGlobal")}function Pm(n){return ss(n,"remoteDocumentsV14")}function UC(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function WL(n,t){const e=t.documentKey.path.toArray();return[n,WA(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function ZL(n,t){const e=n.path.toArray(),r=t.path.toArray();let i=0;for(let l=0;l<e.length-2&&l<r.length-2;++l)if(i=tn(e[l],r[l]),i)return i;return i=tn(e.length,r.length),i||(i=tn(e[e.length-2],r[r.length-2]),i||tn(e[e.length-1],r[r.length-1]))}class $${constructor(t){this.M=t}kt(t,e,r,i){const l=new qA("createOrUpgrade",e);var f;r<1&&i>=1&&(t.createObjectStore("owner"),(f=t).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wL,{unique:!0}),f.createObjectStore("documentMutations"),zL(t),function(f){f.createObjectStore("remoteDocuments")}(t));let d=Te.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(t),zL(t)),d=d.next(()=>function(f){const m=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(l))),r<4&&i>=4&&(0!==r&&(d=d.next(()=>function(f,m){return m.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wL,{unique:!0});const T=m.store("mutations"),A=b.map(M=>T.put(M));return Te.waitFor(A)})}(t,l))),d=d.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),r<5&&i>=5&&(d=d.next(()=>this.Qn(l))),r<6&&i>=6&&(d=d.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(t),this.jn(l)))),r<7&&i>=7&&(d=d.next(()=>this.Wn(l))),r<8&&i>=8&&(d=d.next(()=>this.zn(t,l))),r<9&&i>=9&&(d=d.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(t)})),r<10&&i>=10&&(d=d.next(()=>this.Hn(l))),r<11&&i>=11&&(d=d.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),r<12&&i>=12&&(d=d.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:y$});m.createIndex("collectionPathOverlayIndex",v$,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",b$,{unique:!1})}(t)})),r<13&&i>=13&&(d=d.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:a$});m.createIndex("documentKeyIndex",l$),m.createIndex("collectionGroupIndex",u$)}(t)).next(()=>this.Jn(t,l)).next(()=>t.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(d=d.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:p$}).createIndex("sequenceNumberIndex",g$,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:m$}).createIndex("documentKeyIndex",_$,{unique:!1})}(t)})),d}jn(t){let e=0;return t.store("remoteDocuments").Wt((r,i)=>{e+=YA(i)}).next(()=>{const r={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(t){const e=t.store("mutationQueues"),r=t.store("mutations");return e.qt().next(i=>Te.forEach(i,l=>{const d=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(f=>Te.forEach(f,m=>{Bt(m.userId===l.userId);const b=Bv(this.M,m);return BL(t,l.userId,b).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),r=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.Wt((d,f)=>{const m=new En(d),b=[0,io(m)];l.push(e.get(b).next(T=>T?Te.resolve():e.put({targetId:0,path:io(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>Te.waitFor(l))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:f$});const r=e.store("collectionParents"),i=new dk,l=d=>{if(i.add(d)){const f=d.lastSegment(),m=d.popLast();return r.put({collectionId:f,parent:io(m)})}};return e.store("remoteDocuments").Wt({jt:!0},(d,f)=>{const m=new En(d);return l(m.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([d,f,m],b)=>{const T=cc(f);return l(T.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((r,i)=>{const l=FC(i),d=ML(this.M,l);return e.put(d)})}Jn(t,e){const r=e.store("remoteDocuments"),i=[];return r.Wt((l,d)=>{const f=e.store("remoteDocumentsV14"),m=(b=d,b.document?new et(En.fromString(b.document.name).popFirst(5)):b.noDocument?et.fromSegments(b.noDocument.path):b.unknownDocument?et.fromSegments(b.unknownDocument.path):ht()).path.toArray();var b;const T={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};i.push(f.put(T))}).next(()=>Te.waitFor(i))}}function zL(n){n.createObjectStore("targetDocuments",{keyPath:d$}).createIndex("documentTargetsIndex",h$,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",c$,{unique:!0}),n.createObjectStore("targetGlobal")}const pk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gk{constructor(t,e,r,i,l,d,f,m,b,T,A=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=r,this.Yn=l,this.window=d,this.document=f,this.Xn=b,this.Zn=T,this.ts=A,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!gk.vt())throw new Oe(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V$(this,i),this.hs=e+"main",this.M=new NL(m),this.ls=new eu(this.hs,this.ts,new $$(this.M)),this.fs=new P$(this.referenceDelegate,this.M),this.ds=new B$(this.M),this._s=new I$,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&pn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(ye.FAILED_PRECONDITION,pk);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Fo(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var r=(0,Ee.Z)(function*(i){if(e.started)return t(i)});return function(i){return r.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield t())});return function(r){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,Ee.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>JA(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.Ps(t).next(()=>!0))).catch(t=>{if(Im(t))return $e("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return $C(t).get("owner").next(e=>Te.resolve(this.bs(e)))}Vs(t){return JA(t).delete(this.clientId)}vs(){var t=this;return(0,Ee.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ss(r,"clientMetadata");return i.qt().next(l=>{const d=t.Ds(l,18e5),f=l.filter(m=>-1===d.indexOf(m));return Te.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(t.ws)for(const r of e)t.ws.removeItem(t.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?Te.resolve(!0):$C(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.bs(e)&&this.networkEnabled)return!0;if(!this.bs(e)){if(!e.allowTabSynchronization)throw new Oe(ye.FAILED_PRECONDITION,pk);return!1}}return!(!this.networkEnabled||!this.inForeground)||JA(t).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const d=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||d&&f)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$e("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ee.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const r=new SL(e,Fo.A);return t.Rs(r).next(()=>t.Vs(r))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(r=>this.Ss(r.updateTimeMs,e)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>JA(t).qt().next(e=>this.Ds(e,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return hk.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new k$(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return ck.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,r){$e("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",l=14===(d=this.ts)?C$:13===d?TL:12===d?w$:11===d?EL:void ht();var d;let f;return this.ls.runTransaction(t,i,l,m=>(f=new SL(m,this.es?this.es.next():Fo.A),"readwrite-primary"===e?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw pn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Oe(ye.FAILED_PRECONDITION,DL);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}$s(t){return $C(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.bs(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Oe(ye.FAILED_PRECONDITION,pk)})}Ps(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $C(t).put("owner",e)}static vt(){return eu.vt()}Rs(t){const e=$C(t);return e.get("owner").next(r=>this.bs(r)?($e("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Te.resolve())}Ss(t,e){const r=Date.now();return!(t<r-e||t>r&&(pn(`Detected an update time that is in the future: ${t} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,V.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const r=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return $e("IndexedDbPersistence",`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){pn("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function $C(n){return ss(n,"owner")}function JA(n){return ss(n,"clientMetadata")}function mk(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class H${constructor(t,e,r){this.ds=t,this.Bs=e,this.indexManager=r}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(r=>this.Us(t,e,r))}Us(t,e,r){return this.ds.getEntry(t,e).next(i=>{for(const l of r)l.applyToLocalView(i);return i})}qs(t,e){t.forEach((r,i)=>{for(const l of e)l.applyToLocalView(i)})}Ks(t,e){return this.ds.getEntries(t,e).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(r=>this.qs(e,r))}Qs(t,e,r){return et.isDocumentKey((i=e).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(t,e.path):SC(e)?this.Ws(t,e,r):this.zs(t,e,r);var i}js(t,e){return this.Ls(t,new et(e)).next(r=>{let i=Ae();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,e,r){const i=e.collectionGroup;let l=Ae();return this.indexManager.getCollectionParents(t,i).next(d=>Te.forEach(d,f=>{const m=(b=e,T=f.child(i),new rs(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,T;return this.zs(t,m,r).next(b=>{b.forEach((T,A)=>{l=l.insert(T,A)})})}).next(()=>l))}zs(t,e,r){let i;return this.ds.getAllFromCollection(t,e.path,r).next(l=>(i=l,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(l=>{for(const d of l)for(const f of d.mutations){const m=f.key;let b=i.get(m);null==b&&(b=ar.newInvalidDocument(m),i=i.insert(m,b)),HA(f,b,d.localWriteTime),b.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((l,d)=>{Qd(e,d)||(i=i.remove(l))}),i))}}class _k{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.Hs=r,this.Js=i}static Ys(t,e){let r=Ft(),i=Ft();for(const l of e.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new _k(t,e.fromCache,r,i)}}class YL{Xs(t){this.Zs=t}Qs(t,e,r,i){return 0===(l=e).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Mt.min())?this.ti(t,e):this.Zs.Ks(t,i).next(l=>{const d=this.ei(e,l);return(Av(e)||Sv(e))&&this.ni(e.limitType,d,i,r)?this.ti(t,e):(pA()<=So.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ya(e)),this.Zs.Qs(t,e,bm(r,-1)).next(f=>(d.forEach(m=>{f=f.insert(m.key,m)}),f)))});var l}ei(t,e){let r=new L(Tm(t));return e.forEach((i,l)=>{Qd(t,l)&&(r=r.add(l))}),r}ni(t,e,r,i){if(r.size!==e.size)return!0;const l="F"===t?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}ti(t,e){return pA()<=So.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",ya(e)),this.Zs.Qs(t,e,ol.min())}}class j${constructor(t,e,r,i){this.persistence=t,this.si=e,this.M=i,this.ii=new D(tn),this.ri=new C(l=>Yd(l),wm),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new H$(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ii))}}function KL(n,t,e,r){return new j$(n,t,e,r)}function JL(n,t){return yk.apply(this,arguments)}function yk(){return(yk=(0,Ee.Z)(function*(n,t){const e=rt(n);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.Bs.getAllMutationBatches(r).next(l=>(i=l,e.ai(t),e.Bs.getAllMutationBatches(r))).next(l=>{const d=[],f=[];let m=Ft();for(const b of i){d.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}for(const b of l){f.push(b.batchId);for(const T of b.mutations)m=m.add(T.key)}return e.ci.Ks(r,m).next(b=>({hi:b,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function G$(n,t){const e=rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),l=e.ui.newChangeBuffer({trackRemovals:!0});return function(d,f,m,b){const T=m.batch,A=T.keys();let M=Te.resolve();return A.forEach(O=>{M=M.next(()=>b.getEntry(f,O)).next(q=>{const ue=m.docVersions.get(O);Bt(null!==ue),q.version.compareTo(ue)<0&&(T.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),b.addEntry(q)))})}),M.next(()=>d.Bs.removeMutationBatch(f,T))}(e,r,t,l).next(()=>l.apply(r)).next(()=>e.Bs.performConsistencyCheck(r)).next(()=>e.ci.Ks(r,i))})}function QL(n){const t=rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function q$(n,t){const e=rt(n),r=t.snapshotVersion;let i=e.ii;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const d=e.ui.newChangeBuffer({trackRemovals:!0});i=e.ii;const f=[];t.targetChanges.forEach((b,T)=>{const A=i.get(T);if(!A)return;f.push(e.fs.removeMatchingKeys(l,b.removedDocuments,T).next(()=>e.fs.addMatchingKeys(l,b.addedDocuments,T)));let M=A.withSequenceNumber(l.currentSequenceNumber);var O,q,ue;t.targetMismatches.has(T)?M=M.withResumeToken(fi.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):b.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(b.resumeToken,r)),i=i.insert(T,M),q=M,ue=b,(0===(O=A).resumeToken.approximateByteSize()||q.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0)&&f.push(e.fs.updateTargetData(l,M))});let m=ie();if(t.documentUpdates.forEach(b=>{t.resolvedLimboDocuments.has(b)&&f.push(e.persistence.referenceDelegate.updateLimboDocument(l,b))}),f.push(XL(l,d,t.documentUpdates).next(b=>{m=b})),!r.isEqual(Mt.min())){const b=e.fs.getLastRemoteSnapshotVersion(l).next(T=>e.fs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(b)}return Te.waitFor(f).next(()=>d.apply(l)).next(()=>e.ci.Gs(l,m)).next(()=>m)}).then(l=>(e.ii=i,l))}function XL(n,t,e){let r=Ft();return e.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let l=ie();return e.forEach((d,f)=>{const m=i.get(d);f.isNoDocument()&&f.version.isEqual(Mt.min())?(t.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||0===f.version.compareTo(m.version)&&m.hasPendingWrites?(t.addEntry(f),l=l.insert(d,f)):$e("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)}),l})}function W$(n,t){const e=rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(r,t)))}function jv(n,t){const e=rt(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.fs.getTargetData(r,t).next(l=>l?(i=l,Te.resolve(i)):e.fs.allocateTargetId(r).next(d=>(i=new ep(t,d,0,r.currentSequenceNumber),e.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.ii=e.ii.insert(r.targetId,r),e.ri.set(t,r.targetId)),r})}function Gv(n,t,e){return vk.apply(this,arguments)}function vk(){return(vk=(0,Ee.Z)(function*(n,t,e){const r=rt(n),i=r.ii.get(t),l=e?"readwrite":"readwrite-primary";try{e||(yield r.persistence.runTransaction("Release target",l,d=>r.persistence.referenceDelegate.removeTarget(d,i)))}catch(d){if(!Im(d))throw d;$e("LocalStore",`Failed to update sequence numbers for target ${t}: ${d}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)})).apply(this,arguments)}function QA(n,t,e){const r=rt(n);let i=Mt.min(),l=Ft();return r.persistence.runTransaction("Execute query","readonly",d=>function(f,m,b){const T=rt(f),A=T.ri.get(b);return void 0!==A?Te.resolve(T.ii.get(A)):T.fs.getTargetData(m,b)}(r,d,ro(t)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,f.targetId).next(m=>{l=m})}).next(()=>r.si.Qs(d,t,e?i:Mt.min(),e?l:Ft())).next(f=>(n2(r,Xd(t),f),{documents:f,li:l})))}function e2(n,t){const e=rt(n),r=rt(e.fs),i=e.ii.get(t);return i?Promise.resolve(i.target):e.persistence.runTransaction("Get target data","readonly",l=>r.Et(l,t).next(d=>d?d.target:null))}function t2(n,t){const e=rt(n),r=e.oi.get(t)||Mt.min();return e.persistence.runTransaction("Get new document changes","readonly",i=>e.ui.getAllFromCollectionGroup(i,t,bm(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(n2(e,t,i),i))}function n2(n,t,e){let r=Mt.min();e.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.oi.set(t,r)}function bk(){return(bk=(0,Ee.Z)(function*(n,t,e,r){const i=rt(n);let l=Ft(),d=ie();for(const b of e){const T=t.fi(b.metadata.name);b.document&&(l=l.add(T));const A=t.di(b);A.setReadTime(t._i(b.metadata.readTime)),d=d.insert(T,A)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),m=yield jv(i,(b=r,ro(rc(En.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>XL(b,f,d).next(T=>(f.apply(b),T)).next(T=>i.fs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>i.fs.addMatchingKeys(b,l,m.targetId)).next(()=>i.ci.Gs(b,T)).next(()=>T)))})).apply(this,arguments)}function z$(n,t){return wk.apply(this,arguments)}function wk(){return(wk=(0,Ee.Z)(function*(n,t,e=Ft()){const r=yield jv(n,ro(lk(t.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const d=is(t.readTime);if(r.snapshotVersion.compareTo(d)>=0)return i._s.saveNamedQuery(l,t);const f=r.withResumeToken(fi.EMPTY_BYTE_STRING,d);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(l,f).next(()=>i.fs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.fs.addMatchingKeys(l,e,r.targetId)).next(()=>i._s.saveNamedQuery(l,t))})})).apply(this,arguments)}class Y${constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,e){return Te.resolve(this.wi.get(e))}saveBundleMetadata(t,e){var r;return this.wi.set(e.id,{id:(r=e).id,version:r.version,createTime:is(r.createTime)}),Te.resolve()}getNamedQuery(t,e){return Te.resolve(this.mi.get(e))}saveNamedQuery(t,e){return this.mi.set(e.name,{name:(r=e).name,query:lk(r.bundledQuery),readTime:is(r.readTime)}),Te.resolve();var r}}class K${constructor(){this.overlays=new D(et.comparator),this.gi=new Map}getOverlay(t,e){return Te.resolve(this.overlays.get(e))}saveOverlays(t,e,r){return r.forEach((i,l)=>{this.Xt(t,e,l)}),Te.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.gi.delete(r)),Te.resolve()}getOverlaysForCollection(t,e,r){const i=gt(),l=e.length+1,d=new et(e.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const m=f.getNext().value,b=m.getKey();if(!e.isPrefixOf(b.path))break;b.path.length===l&&m.largestBatchId>r&&i.set(m.getKey(),m)}return Te.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let l=new D((b,T)=>b-T);const d=this.overlays.getIterator();for(;d.hasNext();){const b=d.getNext().value;if(b.getKey().getCollectionGroup()===e&&b.largestBatchId>r){let T=l.get(b.largestBatchId);null===T&&(T=gt(),l=l.insert(b.largestBatchId,T)),T.set(b.getKey(),b)}}const f=gt(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,T)=>f.set(b,T)),!(f.size()>=i)););return Te.resolve(f)}Xt(t,e,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const d=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new ak(e,r));let l=this.gi.get(e);void 0===l&&(l=Ft(),this.gi.set(e,l)),this.gi.set(e,l.add(r.key))}}class Ck{constructor(){this.yi=new L(os.pi),this.Ii=new L(os.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,e){const r=new os(t,e);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Ai(new os(t,e))}Ri(t,e){t.forEach(r=>this.removeReference(r,e))}Pi(t){const e=new et(new En([])),r=new os(e,t),i=new os(e,t+1),l=[];return this.Ii.forEachInRange([r,i],d=>{this.Ai(d),l.push(d.key)}),l}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const e=new et(new En([])),r=new os(e,t),i=new os(e,t+1);let l=Ft();return this.Ii.forEachInRange([r,i],d=>{l=l.add(d.key)}),l}containsKey(t){const e=new os(t,0),r=this.yi.firstAfterOrEqual(e);return null!==r&&t.isEqual(r.key)}}class os{constructor(t,e){this.key=t,this.vi=e}static pi(t,e){return et.comparator(t.key,e.key)||tn(t.vi,e.vi)}static Ti(t,e){return tn(t.vi,e.vi)||et.comparator(t.key,e.key)}}class J${constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.Si=1,this.Di=new L(os.pi)}checkEmpty(t){return Te.resolve(0===this.Bs.length)}addMutationBatch(t,e,r,i){const l=this.Si;this.Si++;const d=new sk(l,e,r,i);this.Bs.push(d);for(const f of i)this.Di=this.Di.add(new os(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return Te.resolve(d)}lookupMutationBatch(t,e){return Te.resolve(this.Ci(e))}getNextMutationBatchAfterBatchId(t,e){const i=this.xi(e+1),l=i<0?0:i;return Te.resolve(this.Bs.length>l?this.Bs[l]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return Te.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new os(e,0),i=new os(e,Number.POSITIVE_INFINITY),l=[];return this.Di.forEachInRange([r,i],d=>{const f=this.Ci(d.vi);l.push(f)}),Te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new L(tn);return e.forEach(i=>{const l=new os(i,0),d=new os(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([l,d],f=>{r=r.add(f.vi)})}),Te.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let l=r;et.isDocumentKey(l)||(l=l.child(""));const d=new os(new et(l),0);let f=new L(tn);return this.Di.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(m.vi)),!0)},d),Te.resolve(this.Ni(f))}Ni(t){const e=[];return t.forEach(r=>{const i=this.Ci(r);null!==i&&e.push(i)}),e}removeMutationBatch(t,e){Bt(0===this.ki(e.batchId,"removed")),this.Bs.shift();let r=this.Di;return Te.forEach(e.mutations,i=>{const l=new os(i.key,e.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,e){const r=new os(e,0),i=this.Di.firstAfterOrEqual(r);return Te.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return Te.resolve()}ki(t,e){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const e=this.xi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class Q${constructor(t){this.Mi=t,this.docs=new D(et.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),l=i?i.size:0,d=this.Mi(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return Te.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(e))}getEntries(t,e){let r=ie();return e.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():ar.newInvalidDocument(i))}),Te.resolve(r)}getAllFromCollection(t,e,r){let i=ie();const l=new et(e.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!e.isPrefixOf(f.path))break;f.path.length>e.length+1||qR(SA(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return Te.resolve(i)}getAllFromCollectionGroup(t,e,r,i){ht()}Oi(t,e){return Te.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new X$(this)}getSize(t){return Te.resolve(this.size)}}class X$ extends GL{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),Te.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class e6{constructor(t){this.persistence=t,this.Fi=new C(e=>Yd(e),wm),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Ck,this.targetCount=0,this.Li=Rm.gn()}forEachTarget(t,e){return this.Fi.forEach((r,i)=>e(i)),Te.resolve()}getLastRemoteSnapshotVersion(t){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Te.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.$i&&(this.$i=e),Te.resolve()}Tn(t){this.Fi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Li=new Rm(e),this.highestTargetId=e),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,Te.resolve()}updateTargetData(t,e){return this.Tn(e),Te.resolve()}removeTargetData(t,e){return this.Fi.delete(e.target),this.Bi.Pi(e.targetId),this.targetCount-=1,Te.resolve()}removeTargets(t,e,r){let i=0;const l=[];return this.Fi.forEach((d,f)=>{f.sequenceNumber<=e&&null===r.get(f.targetId)&&(this.Fi.delete(d),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),i++)}),Te.waitFor(l).next(()=>i)}getTargetCount(t){return Te.resolve(this.targetCount)}getTargetData(t,e){const r=this.Fi.get(e)||null;return Te.resolve(r)}addMatchingKeys(t,e,r){return this.Bi.Ei(e,r),Te.resolve()}removeMatchingKeys(t,e,r){this.Bi.Ri(e,r);const i=this.persistence.referenceDelegate,l=[];return i&&e.forEach(d=>{l.push(i.markPotentiallyOrphaned(t,d))}),Te.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Bi.Pi(e),Te.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Bi.Vi(e);return Te.resolve(r)}containsKey(t,e){return Te.resolve(this.Bi.containsKey(e))}}class t6{constructor(t,e){this.Ui={},this.overlays={},this.es=new Fo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new e6(this),this.indexManager=new R$,this.ds=new Q$(r=>this.referenceDelegate.qi(r)),this.M=new NL(e),this._s=new Y$(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new K$,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.Ui[t.toKey()];return r||(r=new J$(e,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,r){$e("MemoryPersistence","Starting transaction:",t);const i=new n6(this.es.next());return this.referenceDelegate.Ki(),r(i).next(l=>this.referenceDelegate.Gi(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Qi(t,e){return Te.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,e)))}}class n6 extends IL{constructor(t){super(),this.currentSequenceNumber=t}}class Ek{constructor(t){this.persistence=t,this.ji=new Ck,this.Wi=null}static zi(t){return new Ek(t)}get Hi(){if(this.Wi)return this.Wi;throw ht()}addReference(t,e,r){return this.ji.addReference(r,e),this.Hi.delete(r.toString()),Te.resolve()}removeReference(t,e,r){return this.ji.removeReference(r,e),this.Hi.add(r.toString()),Te.resolve()}markPotentiallyOrphaned(t,e){return this.Hi.add(e.toString()),Te.resolve()}removeTarget(t,e){this.ji.Pi(e.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(l=>this.Hi.add(l.toString()))}).next(()=>r.removeTargetData(t,e))}Ki(){this.Wi=new Set}Gi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Hi,r=>{const i=et.fromPath(r);return this.Ji(t,i).next(l=>{l||e.removeEntry(i,Mt.min())})}).next(()=>(this.Wi=null,e.apply(t)))}updateLimboDocument(t,e){return this.Ji(t,e).next(r=>{r?this.Hi.delete(e.toString()):this.Hi.add(e.toString())})}qi(t){return 0}Ji(t,e){return Te.or([()=>Te.resolve(this.ji.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Qi(t,e)])}}function r2(n,t){return`firestore_clients_${n}_${t}`}function i2(n,t,e){let r=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Tk(n,t){return`firestore_targets_${n}_${t}`}class XA{constructor(t,e,r,i){this.user=t,this.batchId=e,this.state=r,this.error=i}static Yi(t,e,r){const i=JSON.parse(r);let l,d="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return d&&i.error&&(d="string"==typeof i.error.message&&"string"==typeof i.error.code,d&&(l=new Oe(i.error.code,i.error.message))),d?new XA(t,e,i.state,l):(pn("SharedClientState",`Failed to parse mutation state for ID '${e}': ${r}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class HC{constructor(t,e,r){this.targetId=t,this.state=e,this.error=r}static Yi(t,e){const r=JSON.parse(e);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Oe(r.error.code,r.error.message))),l?new HC(t,r.state,i):(pn("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Xi(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class eS{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Yi(t,e){const r=JSON.parse(e);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=lc();for(let d=0;i&&d<r.activeTargetIds.length;++d)i=bA(r.activeTargetIds[d]),l=l.add(r.activeTargetIds[d]);return i?new eS(t,l):(pn("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Dk{constructor(t,e){this.clientId=t,this.onlineState=e}static Yi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Dk(e.clientId,e.onlineState):(pn("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ik{constructor(){this.activeTargetIds=lc()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ak{constructor(t,e,r,i,l){this.window=t,this.Yn=e,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new D(tn),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.ur=r2(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new Ik),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.syncEngine.Fs();for(const i of e){if(i===t.er)continue;const l=t.getItem(r2(t.persistenceKey,i));if(l){const d=eS.Yi(i,l);d&&(t.ir=t.ir.insert(d.clientId,d))}}t.wr();const r=t.storage.getItem(t.dr);if(r){const i=t.mr(r);i&&t.gr(i)}for(const i of t.rr)t.sr(i);t.rr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.ar,JSON.stringify(t))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(t){let e=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.pr(t,"pending")}updateMutationState(t,e,r){this.pr(t,e,r),this.Ir(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const r=this.storage.getItem(Tk(this.persistenceKey,t));if(r){const i=HC.Yi(t,r);i&&(e=i.state)}}return this.Tr.Zi(t),this.wr(),e}removeLocalQueryTarget(t){this.Tr.tr(t),this.wr()}isLocalQueryTarget(t){return this.Tr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Tk(this.persistenceKey,t))}updateQueryState(t,e,r){this.Er(t,e,r)}handleUserChange(t,e,r){e.forEach(i=>{this.Ir(i)}),this.currentUser=t,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(t){this.Ar(t)}notifyBundleLoaded(t){this.Rr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $e("SharedClientState","READ",t,e),e}setItem(t,e){$e("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$e("SharedClientState","REMOVE",t),this.storage.removeItem(t)}sr(t){var e=this;const r=t;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void pn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ee.Z)(function*(){if(e.started){if(null!==r.key)if(e.cr.test(r.key)){if(null==r.newValue){const i=e.Pr(r.key);return e.br(i,null)}{const i=e.Vr(r.key,r.newValue);if(i)return e.br(i.clientId,i)}}else if(e.hr.test(r.key)){if(null!==r.newValue){const i=e.vr(r.key,r.newValue);if(i)return e.Sr(i)}}else if(e.lr.test(r.key)){if(null!==r.newValue){const i=e.Dr(r.key,r.newValue);if(i)return e.Cr(i)}}else if(r.key===e.dr){if(null!==r.newValue){const i=e.mr(r.newValue);if(i)return e.gr(i)}}else if(r.key===e.ar){const i=function(l){let d=Fo.A;if(null!=l)try{const f=JSON.parse(l);Bt("number"==typeof f),d=f}catch(f){pn("SharedClientState","Failed to read sequence number from WebStorage",f)}return d}(r.newValue);i!==Fo.A&&e.sequenceNumberHandler(i)}else if(r.key===e._r){const i=e.Nr(r.newValue);yield Promise.all(i.map(l=>e.syncEngine.kr(l)))}}else e.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(t,e,r){const i=new XA(this.currentUser,t,e,r),l=i2(this.persistenceKey,this.currentUser,t);this.setItem(l,i.Xi())}Ir(t){const e=i2(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Ar(t){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:t}))}Er(t,e,r){const i=Tk(this.persistenceKey,t),l=new HC(t,e,r);this.setItem(i,l.Xi())}Rr(t){const e=JSON.stringify(Array.from(t));this.setItem(this._r,e)}Pr(t){const e=this.cr.exec(t);return e?e[1]:null}Vr(t,e){const r=this.Pr(t);return eS.Yi(r,e)}vr(t,e){const r=this.hr.exec(t),i=Number(r[1]);return XA.Yi(new Vi(void 0!==r[2]?r[2]:null),i,e)}Dr(t,e){const r=this.lr.exec(t),i=Number(r[1]);return HC.Yi(i,e)}mr(t){return Dk.Yi(t)}Nr(t){return JSON.parse(t)}Sr(t){var e=this;return(0,Ee.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Mr(t.batchId,t.state,t.error);$e("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Cr(t){return this.syncEngine.Or(t.targetId,t.state,t.error)}br(t,e){const r=e?this.ir.insert(t,e):this.ir.remove(t),i=this.yr(this.ir),l=this.yr(r),d=[],f=[];return l.forEach(m=>{i.has(m)||d.push(m)}),i.forEach(m=>{l.has(m)||f.push(m)}),this.syncEngine.Fr(d,f).then(()=>{this.ir=r})}gr(t){this.ir.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}yr(t){let e=lc();return t.forEach((r,i)=>{e=e.unionWith(i.activeTargetIds)}),e}}class s2{constructor(){this.$r=new Ik,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,e,r){this.Br[t]=e}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new Ik,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class r6{Lr(t){}shutdown(){}}class o2{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const i6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class s6{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}class o6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,e,r,i,l){const d=this.uo(t,e);$e("RestConnection","Sending: ",d,r);const f={};return this.ao(f,i,l),this.co(t,d,f,r).then(m=>($e("RestConnection","Received: ",m),m),m=>{throw vv("RestConnection",`${t} failed with error: `,m,"url: ",d,"request:",r),m})}ho(t,e,r,i,l){return this.oo(t,e,r,i,l)}ao(t,e,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+$d,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((i,l)=>t[l]=i),r&&r.headers.forEach((i,l)=>t[l]=i)}uo(t,e){return`${this.io}/v1/${e}:${i6[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,e,r,i){return new Promise((l,d)=>{const f=new OR;f.listenOnce(tL.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case dA.NO_ERROR:const b=f.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),l(b);break;case dA.TIMEOUT:$e("Connection",'RPC "'+t+'" timed out'),d(new Oe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case dA.HTTP_ERROR:const T=f.getStatus();if($e("Connection",'RPC "'+t+'" failed with status:',T,"response text:",f.getResponseText()),T>0){const A=f.getResponseJson().error;if(A&&A.status&&A.message){const M=function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(q)>=0?q:ye.UNKNOWN}(A.status);d(new Oe(M,A.message))}else d(new Oe(ye.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Oe(ye.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{$e("Connection",'RPC "'+t+'" completed.')}});const m=JSON.stringify(i);f.send(e,"POST",m,r,15)})}lo(t,e,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],l=kR(),d=PR(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new hA({})),this.ao(f.initMessageHeaders,e,r),(0,V.uI)()||(0,V.b$)()||(0,V.d)()||(0,V.w1)()||(0,V.Mn)()||(0,V.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");$e("Connection","Creating WebChannel: "+m,f);const b=l.createWebChannel(m,f);let T=!1,A=!1;const M=new s6({Wr:q=>{A?$e("Connection","Not sending because WebChannel is closed:",q):(T||($e("Connection","Opening WebChannel transport."),b.open(),T=!0),$e("Connection","WebChannel sending:",q),b.send(q))},zr:()=>b.close()}),O=(q,ue,be)=>{q.listen(ue,Ge=>{try{be(Ge)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return O(b,yv.EventType.OPEN,()=>{A||$e("Connection","WebChannel transport opened.")}),O(b,yv.EventType.CLOSE,()=>{A||(A=!0,$e("Connection","WebChannel transport closed"),M.no())}),O(b,yv.EventType.ERROR,q=>{A||(A=!0,vv("Connection","WebChannel transport errored:",q),M.no(new Oe(ye.UNAVAILABLE,"The operation could not be completed")))}),O(b,yv.EventType.MESSAGE,q=>{var ue;if(!A){const be=q.data[0];Bt(!!be);const Ge=be,Ke=Ge.error||(null===(ue=Ge[0])||void 0===ue?void 0:ue.error);if(Ke){$e("Connection","WebChannel received error:",Ke);const it=Ke.status;let ot=function(ln){const zr=h[ln];if(void 0!==zr)return v(zr)}(it),Lt=Ke.message;void 0===ot&&(ot=ye.INTERNAL,Lt="Unknown error status: "+it+" with message "+Ke.message),A=!0,M.no(new Oe(ot,Lt)),b.close()}else $e("Connection","WebChannel received:",be),M.so(be)}}),O(d,nL.STAT_EVENT,q=>{q.stat===mC.PROXY?$e("Connection","Detected buffering proxy"):q.stat===mC.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.eo()},0),M}}function a2(){return"undefined"!=typeof window?window:null}function tS(){return"undefined"!=typeof document?document:null}function jC(n){return new z3(n,!0)}class Sk{constructor(t,e,r=1e3,i=1.5,l=6e4){this.Yn=t,this.timerId=e,this.fo=r,this._o=i,this.wo=l,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const e=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,e-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class l2{constructor(t,e,r,i,l,d,f,m){this.Yn=t,this.Ro=r,this.Po=i,this.bo=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Sk(t,e)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var t=this;return(0,Ee.Z)(function*(){t.Co()&&(yield t.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}Oo(){var t=this;return(0,Ee.Z)(function*(){if(t.xo())return t.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(t,e){var r=this;return(0,Ee.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==t?r.Do.reset():e&&e.code===ye.RESOURCE_EXHAUSTED?(pn(e.toString()),pn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):e&&e.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=t,yield r.listener.Yr(e)})()}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),e=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===e&&this.qo(r,i)},r=>{t(()=>{const i=new Oe(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,e){const r=this.Uo(this.Vo);this.stream=this.Go(t,e),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var t=this;this.state=5,this.Do.To((0,Ee.Z)(function*(){t.state=0,t.start()}))}Ko(t){return $e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return e=>{this.Yn.enqueueAndForget(()=>this.Vo===t?e():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a6 extends l2{constructor(t,e,r,i,l,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,d),this.M=l}Go(t,e){return this.bo.lo("Listen",t,e)}onMessage(t){this.Do.reset();const e=function(n,t){let e;if("targetChange"in t){const r="NO_CHANGE"===(m=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ht(),i=t.targetChange.targetIds||[],l=function(m,b){return m.N?(Bt(void 0===b||"string"==typeof b),fi.fromBase64String(b||"")):(Bt(void 0===b||b instanceof Uint8Array),fi.fromUint8Array(b||new Uint8Array))}(n,t.targetChange.resumeToken),d=t.targetChange.cause,f=d&&function(m){const b=void 0===m.code?ye.UNKNOWN:v(m.code);return new Oe(b,m.message||"")}(d);e=new Pv(r,i,l,f||null)}else if("documentChange"in t){const r=t.documentChange,i=uc(n,r.document.name),l=is(r.document.updateTime),d=new ts({mapValue:{fields:r.document.fields}}),f=ar.newFoundDocument(i,l,d);e=new Xl(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in t){const r=t.documentDelete,i=uc(n,r.document),l=r.readTime?is(r.readTime):Mt.min(),d=ar.newNoDocument(i,l);e=new Xl([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in t){const r=t.documentRemove,i=uc(n,r.document);e=new Xl([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return ht();{const r=t.filter,l=new c(r.count||0);e=new kv(r.targetId,l)}}var m;return e}(this.M,t),r=function(i){if(!("targetChange"in i))return Mt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Mt.min():l.readTime?is(l.readTime):Mt.min()}(t);return this.listener.Qo(e,r)}jo(t){const e={};e.database=kC(this.M),e.addTarget=function(i,l){let d;const f=l.target;return d=Yf(f)?{documents:gL(i,f)}:{query:mL(i,f)},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?d.resumeToken=uL(i,l.resumeToken):l.snapshotVersion.compareTo(Mt.min())>0&&(d.readTime=MC(i,l.snapshotVersion.toTimestamp())),d}(this.M,t);const r=function(n,t){const e=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);r&&(e.labels=r),this.Fo(e)}Wo(t){const e={};e.database=kC(this.M),e.removeTarget=t,this.Fo(e)}}class l6 extends l2{constructor(t,e,r,i,l,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,d),this.M=l,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,e){return this.bo.lo("Write",t,e)}onMessage(t){if(Bt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const e=function(n,t){return n&&n.length>0?(Bt(void 0!==t),n.map(e=>function(r,i){let l=is(r.updateTime?r.updateTime:i);return l.isEqual(Mt.min())&&(l=is(i)),new sL(l,r.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),r=is(t.commitTime);return this.listener.Yo(r,e)}return Bt(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=kC(this.M),this.Fo(t)}Jo(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>PC(this.M,r))};this.Fo(e)}}class u6 extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.oo(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(ye.UNKNOWN,i.toString())})}ho(t,e,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.bo.ho(t,e,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(ye.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class c6{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(pn(e),this.iu=!1):$e("OnlineStateTracker",e)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class d6{constructor(t,e,r,i,l){var d=this;this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=l,this._u.Lr(f=>{r.enqueueAndForget((0,Ee.Z)(function*(){var m;ip(d)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ee.Z)(function*(b){const T=rt(b);T.fu.add(4),yield qv(T),T.wu.set("Unknown"),T.fu.delete(4),yield GC(T)}),function(b){return m.apply(this,arguments)})(d))}))}),this.wu=new c6(r,i)}}function GC(n){return Nk.apply(this,arguments)}function Nk(){return(Nk=(0,Ee.Z)(function*(n){if(ip(n))for(const t of n.du)yield t(!0)})).apply(this,arguments)}function qv(n){return xk.apply(this,arguments)}function xk(){return(xk=(0,Ee.Z)(function*(n){for(const t of n.du)yield t(!1)})).apply(this,arguments)}function nS(n,t){const e=rt(n);e.lu.has(t.targetId)||(e.lu.set(t.targetId,t),kk(e)?Rk(e):Zv(e).xo()&&Mk(e,t))}function qC(n,t){const e=rt(n),r=Zv(e);e.lu.delete(t),r.xo()&&u2(e,t),0===e.lu.size&&(r.xo()?r.Mo():ip(e)&&e.wu.set("Unknown"))}function Mk(n,t){n.mu.Z(t.targetId),Zv(n).jo(t)}function u2(n,t){n.mu.Z(t),Zv(n).Wo(t)}function Rk(n){n.mu=new xC({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),Zv(n).start(),n.wu.ru()}function kk(n){return ip(n)&&!Zv(n).Co()&&n.lu.size>0}function ip(n){return 0===rt(n).fu.size}function c2(n){n.mu=void 0}function h6(n){return Pk.apply(this,arguments)}function Pk(){return(Pk=(0,Ee.Z)(function*(n){n.lu.forEach((t,e)=>{Mk(n,t)})})).apply(this,arguments)}function f6(n,t){return Ok.apply(this,arguments)}function Ok(){return(Ok=(0,Ee.Z)(function*(n,t){c2(n),kk(n)?(n.wu.au(t),Rk(n)):n.wu.set("Unknown")})).apply(this,arguments)}function p6(n,t,e){return Fk.apply(this,arguments)}function Fk(){return(Fk=(0,Ee.Z)(function*(n,t,e){if(n.wu.set("Online"),t instanceof Pv&&2===t.state&&t.cause)try{yield(r=(0,Ee.Z)(function*(i,l){const d=l.cause;for(const f of l.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,d),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,t)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield rS(n,r)}else if(t instanceof Xl?n.mu.ut(t):t instanceof kv?n.mu._t(t):n.mu.ht(t),!e.isEqual(Mt.min()))try{const r=yield QL(n.localStore);e.compareTo(r)>=0&&(yield function(i,l){const d=i.mu.yt(l);return d.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(m);b&&i.lu.set(m,b.withResumeToken(f.resumeToken,l))}}),d.targetMismatches.forEach(f=>{const m=i.lu.get(f);if(!m)return;i.lu.set(f,m.withResumeToken(fi.EMPTY_BYTE_STRING,m.snapshotVersion)),u2(i,f);const b=new ep(m.target,f,1,m.sequenceNumber);Mk(i,b)}),i.remoteSyncer.applyRemoteEvent(d)}(n,e))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield rS(n,r)}var r})).apply(this,arguments)}function rS(n,t,e){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,Ee.Z)(function*(n,t,e){if(!Im(t))throw t;n.fu.add(1),yield qv(n),n.wu.set("Offline"),e||(e=()=>QL(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield e(),n.fu.delete(1),yield GC(n)}))})).apply(this,arguments)}function d2(n,t){return t().catch(e=>rS(n,e,t))}function Wv(n){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,Ee.Z)(function*(n){const t=rt(n),e=sp(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;g6(t);)try{const i=yield W$(t.localStore,r);if(null===i){0===t.hu.length&&e.Mo();break}r=i.batchId,m6(t,i)}catch(i){yield rS(t,i)}h2(t)&&f2(t)})).apply(this,arguments)}function g6(n){return ip(n)&&n.hu.length<10}function m6(n,t){n.hu.push(t);const e=sp(n);e.xo()&&e.Ho&&e.Jo(t.mutations)}function h2(n){return ip(n)&&!sp(n).Co()&&n.hu.length>0}function f2(n){sp(n).start()}function _6(n){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,Ee.Z)(function*(n){sp(n).Zo()})).apply(this,arguments)}function y6(n){return Uk.apply(this,arguments)}function Uk(){return(Uk=(0,Ee.Z)(function*(n){const t=sp(n);for(const e of n.hu)t.Jo(e.mutations)})).apply(this,arguments)}function v6(n,t,e){return $k.apply(this,arguments)}function $k(){return($k=(0,Ee.Z)(function*(n,t,e){const r=n.hu.shift(),i=ok.from(r,t,e);yield d2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wv(n)})).apply(this,arguments)}function b6(n,t){return Hk.apply(this,arguments)}function Hk(){return(Hk=(0,Ee.Z)(function*(n,t){var e;t&&sp(n).Ho&&(yield(e=(0,Ee.Z)(function*(r,i){if(_(l=i.code)&&l!==ye.ABORTED){const d=r.hu.shift();sp(r).ko(),yield d2(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,i)),yield Wv(r)}var l}),function(r,i){return e.apply(this,arguments)})(n,t)),h2(n)&&f2(n)})).apply(this,arguments)}function p2(n,t){return jk.apply(this,arguments)}function jk(){return(jk=(0,Ee.Z)(function*(n,t){const e=rt(n);e.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=ip(e);e.fu.add(3),yield qv(e),r&&e.wu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.fu.delete(3),yield GC(e)})).apply(this,arguments)}function Gk(n,t){return qk.apply(this,arguments)}function qk(){return(qk=(0,Ee.Z)(function*(n,t){const e=rt(n);t?(e.fu.delete(2),yield GC(e)):t||(e.fu.add(2),yield qv(e),e.wu.set("Unknown"))})).apply(this,arguments)}function Zv(n){return n.gu||(n.gu=function(t,e,r){const i=rt(t);return i.eu(),new a6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:h6.bind(null,n),Yr:f6.bind(null,n),Qo:p6.bind(null,n)}),n.du.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.gu.ko(),kk(n)?Rk(n):n.wu.set("Unknown")):(yield n.gu.stop(),c2(n))});return function(e){return t.apply(this,arguments)}}())),n.gu}function sp(n){return n.yu||(n.yu=function(t,e,r){const i=rt(t);return i.eu(),new l6(e,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:_6.bind(null,n),Yr:b6.bind(null,n),Xo:y6.bind(null,n),Yo:v6.bind(null,n)}),n.du.push(function(){var t=(0,Ee.Z)(function*(e){e?(n.yu.ko(),yield Wv(n)):(yield n.yu.stop(),n.hu.length>0&&($e("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(e){return t.apply(this,arguments)}}())),n.yu}class Wk{constructor(t,e,r,i,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(t,e,r,i,l){const d=Date.now()+r,f=new Wk(t,e,d,i,l);return f.start(r),f}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(ye.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zv(n,t){if(pn("AsyncQueue",`${t}: ${n}`),Im(n))return new Oe(ye.UNAVAILABLE,`${t}: ${n}`);throw n}class Yv{constructor(t){this.comparator=t?(e,r)=>t(e,r)||et.comparator(e.key,r.key):(e,r)=>et.comparator(e.key,r.key),this.keyedMap=Ae(),this.sortedSet=new D(this.comparator)}static emptySet(t){return new Yv(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Yv)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const r=new Yv;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}class g2{constructor(){this.pu=new D(et.comparator)}track(t){const e=t.doc.key,r=this.pu.get(e);r?0!==t.type&&3===r.type?this.pu=this.pu.insert(e,t):3===t.type&&1!==r.type?this.pu=this.pu.insert(e,{type:r.type,doc:t.doc}):2===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===r.type?this.pu=this.pu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===r.type?this.pu=this.pu.remove(e):1===t.type&&2===r.type?this.pu=this.pu.insert(e,{type:1,doc:r.doc}):0===t.type&&1===r.type?this.pu=this.pu.insert(e,{type:2,doc:t.doc}):ht():this.pu=this.pu.insert(e,t)}Iu(){const t=[];return this.pu.inorderTraversal((e,r)=>{t.push(r)}),t}}class Kv{constructor(t,e,r,i,l,d,f,m){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(t,e,r,i){const l=[];return e.forEach(d=>{l.push({type:0,doc:d})}),new Kv(t,e,Yv.emptySet(e),l,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Em(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}class w6{constructor(){this.Tu=void 0,this.listeners=[]}}class C6{constructor(){this.queries=new C(t=>kA(t),Em),this.onlineState="Unknown",this.Eu=new Set}}function Zk(n,t){return zk.apply(this,arguments)}function zk(){return(zk=(0,Ee.Z)(function*(n,t){const e=rt(n),r=t.query;let i=!1,l=e.queries.get(r);if(l||(i=!0,l=new w6),i)try{l.Tu=yield e.onListen(r)}catch(d){const f=zv(d,`Initialization of query '${ya(t.query)}' failed`);return void t.onError(f)}e.queries.set(r,l),l.listeners.push(t),t.Au(e.onlineState),l.Tu&&t.Ru(l.Tu)&&Jk(e)})).apply(this,arguments)}function Yk(n,t){return Kk.apply(this,arguments)}function Kk(){return(Kk=(0,Ee.Z)(function*(n,t){const e=rt(n),r=t.query;let i=!1;const l=e.queries.get(r);if(l){const d=l.listeners.indexOf(t);d>=0&&(l.listeners.splice(d,1),i=0===l.listeners.length)}if(i)return e.queries.delete(r),e.onUnlisten(r)})).apply(this,arguments)}function E6(n,t){const e=rt(n);let r=!1;for(const i of t){const d=e.queries.get(i.query);if(d){for(const f of d.listeners)f.Ru(i)&&(r=!0);d.Tu=i}}r&&Jk(e)}function T6(n,t,e){const r=rt(n),i=r.queries.get(t);if(i)for(const l of i.listeners)l.onError(e);r.queries.delete(t)}function Jk(n){n.Eu.forEach(t=>{t.next()})}class Qk{constructor(t,e,r){this.query=t,this.Pu=e,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)3!==i.type&&r.push(i);t=new Kv(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),e=!0):this.Su(t,this.onlineState)&&(this.Du(t),e=!0),this.Vu=t,e}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let e=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),e=!0),e}Su(t,e){return!t.fromCache||!(this.options.Cu&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=Kv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}class D6{constructor(t,e){this.payload=t,this.byteLength=e}xu(){return"metadata"in this.payload}}class m2{constructor(t){this.M=t}fi(t){return uc(this.M,t)}di(t){return t.metadata.exists?pL(this.M,t.document,!1):ar.newNoDocument(this.fi(t.metadata.name),this._i(t.metadata.readTime))}_i(t){return is(t)}}class I6{constructor(t,e,r){this.Nu=t,this.localStore=e,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_2(t)}ku(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const r=En.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}Mu(t){const e=new Map,r=new m2(this.M);for(const i of t)if(i.metadata.queries){const l=r.fi(i.metadata.name);for(const d of i.metadata.queries){const f=(e.get(d)||Ft()).add(l);e.set(d,f)}}return e}complete(){var t=this;return(0,Ee.Z)(function*(){const e=yield function(n,t,e,r){return bk.apply(this,arguments)}(t.localStore,new m2(t.M),t.documents,t.Nu.id),r=t.Mu(t.documents);for(const i of t.queries)yield z$(t.localStore,i,r.get(i.name));return t.progress.taskState="Success",{progress:t.progress,Ou:t.collectionGroups,Fu:e}})()}}function _2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class y2{constructor(t){this.key=t}}class v2{constructor(t){this.key=t}}class b2{constructor(t,e){this.query=t,this.$u=e,this.Bu=null,this.current=!1,this.Lu=Ft(),this.mutatedKeys=Ft(),this.Uu=Tm(t),this.qu=new Yv(this.Uu)}get Ku(){return this.$u}Gu(t,e){const r=e?e.Qu:new g2,i=e?e.qu:this.qu;let l=e?e.mutatedKeys:this.mutatedKeys,d=i,f=!1;const m=Av(this.query)&&i.size===this.query.limit?i.last():null,b=Sv(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((T,A)=>{const M=i.get(T),O=Qd(this.query,A)?A:null,q=!!M&&this.mutatedKeys.has(M.key),ue=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let be=!1;M&&O?M.data.isEqual(O.data)?q!==ue&&(r.track({type:3,doc:O}),be=!0):this.ju(M,O)||(r.track({type:2,doc:O}),be=!0,(m&&this.Uu(O,m)>0||b&&this.Uu(O,b)<0)&&(f=!0)):!M&&O?(r.track({type:0,doc:O}),be=!0):M&&!O&&(r.track({type:1,doc:M}),be=!0,(m||b)&&(f=!0)),be&&(O?(d=d.add(O),l=ue?l.add(T):l.delete(T)):(d=d.delete(T),l=l.delete(T)))}),Av(this.query)||Sv(this.query))for(;d.size>this.query.limit;){const T=Av(this.query)?d.last():d.first();d=d.delete(T.key),l=l.delete(T.key),r.track({type:1,doc:T})}return{qu:d,Qu:r,ni:f,mutatedKeys:l}}ju(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const l=t.Qu.Iu();l.sort((b,T)=>function(A,M){const O=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return O(A)-O(M)}(b.type,T.type)||this.Uu(b.doc,T.doc)),this.Wu(r);const d=e?this.zu():[],f=0===this.Lu.size&&this.current?1:0,m=f!==this.Bu;return this.Bu=f,0!==l.length||m?{snapshot:new Kv(this.query,t.qu,i,l,t.mutatedKeys,0===f,m,!1),Hu:d}:{Hu:d}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new g2,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(e=>this.$u=this.$u.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.$u=this.$u.delete(e)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=Ft(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const e=[];return t.forEach(r=>{this.Lu.has(r)||e.push(new v2(r))}),this.Lu.forEach(r=>{t.has(r)||e.push(new y2(r))}),e}Yu(t){this.$u=t.li,this.Lu=Ft();const e=this.Gu(t.documents);return this.applyChanges(e,!0)}Xu(){return Kv.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class A6{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class S6{constructor(t){this.key=t,this.Zu=!1}}class N6{constructor(t,e,r,i,l,d){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new C(f=>kA(f),Em),this.na=new Map,this.sa=new Set,this.ia=new D(et.comparator),this.ra=new Map,this.oa=new Ck,this.ua={},this.aa=new Map,this.ca=Rm.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function x6(n,t){return Xk.apply(this,arguments)}function Xk(){return(Xk=(0,Ee.Z)(function*(n,t){const e=CP(n);let r,i;const l=e.ea.get(t);if(l)r=l.targetId,e.sharedClientState.addLocalQueryTarget(r),i=l.view.Xu();else{const d=yield jv(e.localStore,ro(t));e.isPrimaryClient&&nS(e.remoteStore,d);const f=e.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,i=yield eP(e,t,r,"current"===f)}return i})).apply(this,arguments)}function eP(n,t,e,r){return tP.apply(this,arguments)}function tP(){return(tP=(0,Ee.Z)(function*(n,t,e,r){n.la=(T,A,M)=>{return(O=(0,Ee.Z)(function*(q,ue,be,Ge){let Ke=ue.view.Gu(be);Ke.ni&&(Ke=yield QA(q.localStore,ue.query,!1).then(({documents:Lt})=>ue.view.Gu(Lt,Ke)));const it=Ge&&Ge.targetChanges.get(ue.targetId),ot=ue.view.applyChanges(Ke,q.isPrimaryClient,it);return dP(q,ue.targetId,ot.Hu),ot.snapshot}),function(q,ue,be,Ge){return O.apply(this,arguments)})(n,T,A,M);var O};const i=yield QA(n.localStore,t,!0),l=new b2(t,i.li),d=l.Gu(i.documents),f=ll.createSynthesizedTargetChangeForCurrentChange(e,r&&"Offline"!==n.onlineState),m=l.applyChanges(d,n.isPrimaryClient,f);dP(n,e,m.Hu);const b=new A6(t,e,l);return n.ea.set(t,b),n.na.has(e)?n.na.get(e).push(t):n.na.set(e,[t]),m.snapshot})).apply(this,arguments)}function M6(n,t){return nP.apply(this,arguments)}function nP(){return(nP=(0,Ee.Z)(function*(n,t){const e=rt(n),r=e.ea.get(t),i=e.na.get(r.targetId);if(i.length>1)return e.na.set(r.targetId,i.filter(l=>!Em(l,t))),void e.ea.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(r.targetId),e.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gv(e.localStore,r.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(r.targetId),qC(e.remoteStore,r.targetId),Jv(e,r.targetId)}).catch(km))):(Jv(e,r.targetId),yield Gv(e.localStore,r.targetId,!0))})).apply(this,arguments)}function rP(){return(rP=(0,Ee.Z)(function*(n,t,e){const r=EP(n);try{const i=yield function(l,d){const f=rt(l),m=Qr.now(),b=d.reduce((A,M)=>A.add(M.key),Ft());let T;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>f.ci.Ks(A,b).next(M=>{T=M;const O=[];for(const q of d){const ue=aL(q,T.get(q.key));null!=ue&&O.push(new Xf(q.key,ue,EC(ue.value.mapValue),pi.exists(!0)))}return f.Bs.addMutationBatch(A,m,O,d)})).then(A=>(A.applyToLocalDocumentSet(T),{batchId:A.batchId,changes:T}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,f){let m=l.ua[l.currentUser.toKey()];m||(m=new D(tn)),m=m.insert(d,f),l.ua[l.currentUser.toKey()]=m}(r,i.batchId,e),yield th(r,i.changes),yield Wv(r.remoteStore)}catch(i){const l=zv(i,"Failed to persist write");e.reject(l)}})).apply(this,arguments)}function w2(n,t){return iP.apply(this,arguments)}function iP(){return(iP=(0,Ee.Z)(function*(n,t){const e=rt(n);try{const r=yield q$(e.localStore,t);t.targetChanges.forEach((i,l)=>{const d=e.ra.get(l);d&&(Bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?d.Zu=!0:i.modifiedDocuments.size>0?Bt(d.Zu):i.removedDocuments.size>0&&(Bt(d.Zu),d.Zu=!1))}),yield th(e,r,t)}catch(r){yield km(r)}})).apply(this,arguments)}function C2(n,t,e){const r=rt(n);if(r.isPrimaryClient&&0===e||!r.isPrimaryClient&&1===e){const i=[];r.ea.forEach((l,d)=>{const f=d.view.Au(t);f.snapshot&&i.push(f.snapshot)}),function(l,d){const f=rt(l);f.onlineState=d;let m=!1;f.queries.forEach((b,T)=>{for(const A of T.listeners)A.Au(d)&&(m=!0)}),m&&Jk(f)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function k6(n,t,e){return sP.apply(this,arguments)}function sP(){return(sP=(0,Ee.Z)(function*(n,t,e){const r=rt(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.ra.get(t),l=i&&i.key;if(l){let d=new D(et.comparator);d=d.insert(l,ar.newNoDocument(l,Mt.min()));const f=Ft().add(l),m=new al(Mt.min(),new Map,new L(tn),d,f);yield w2(r,m),r.ia=r.ia.remove(l),r.ra.delete(t),hP(r)}else yield Gv(r.localStore,t,!1).then(()=>Jv(r,t,e)).catch(km)})).apply(this,arguments)}function P6(n,t){return oP.apply(this,arguments)}function oP(){return(oP=(0,Ee.Z)(function*(n,t){const e=rt(n),r=t.batch.batchId;try{const i=yield G$(e.localStore,t);cP(e,r,null),uP(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),yield th(e,i)}catch(i){yield km(i)}})).apply(this,arguments)}function O6(n,t,e){return aP.apply(this,arguments)}function aP(){return(aP=(0,Ee.Z)(function*(n,t,e){const r=rt(n);try{const i=yield function(l,d){const f=rt(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return f.Bs.lookupMutationBatch(m,d).next(T=>(Bt(null!==T),b=T.keys(),f.Bs.removeMutationBatch(m,T))).next(()=>f.Bs.performConsistencyCheck(m)).next(()=>f.ci.Ks(m,b))})}(r.localStore,t);cP(r,t,e),uP(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),yield th(r,i)}catch(i){yield km(i)}})).apply(this,arguments)}function lP(){return(lP=(0,Ee.Z)(function*(n,t){const e=rt(n);ip(e.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=rt(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>d.Bs.getHighestUnacknowledgedBatchId(f))}(e.localStore);if(-1===r)return void t.resolve();const i=e.aa.get(r)||[];i.push(t),e.aa.set(r,i)}catch(r){const i=zv(r,"Initialization of waitForPendingWrites() operation failed");t.reject(i)}})).apply(this,arguments)}function uP(n,t){(n.aa.get(t)||[]).forEach(e=>{e.resolve()}),n.aa.delete(t)}function cP(n,t,e){const r=rt(n);let i=r.ua[r.currentUser.toKey()];if(i){const l=i.get(t);l&&(e?l.reject(e):l.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function Jv(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),e&&n.ta.fa(r,e);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||E2(n,r)})}function E2(n,t){n.sa.delete(t.path.canonicalString());const e=n.ia.get(t);null!==e&&(qC(n.remoteStore,e),n.ia=n.ia.remove(t),n.ra.delete(e),hP(n))}function dP(n,t,e){for(const r of e)r instanceof y2?(n.oa.addReference(r.key,t),L6(n,r)):r instanceof v2?($e("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||E2(n,r.key)):ht()}function L6(n,t){const e=t.key,r=e.path.canonicalString();n.ia.get(e)||n.sa.has(r)||($e("SyncEngine","New document in limbo: "+e),n.sa.add(r),hP(n))}function hP(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const e=new et(En.fromString(t)),r=n.ca.next();n.ra.set(r,new S6(e)),n.ia=n.ia.insert(e,r),nS(n.remoteStore,new ep(ro(rc(e.path)),r,2,Fo.A))}}function th(n,t,e){return fP.apply(this,arguments)}function fP(){return(fP=(0,Ee.Z)(function*(n,t,e){const r=rt(n),i=[],l=[],d=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,m)=>{d.push(r.la(m,t,e).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b.fromCache?"not-current":"current"),i.push(b);const T=_k.Ys(m.targetId,b);l.push(T)}}))}),yield Promise.all(d),r.ta.Qo(i),yield(f=(0,Ee.Z)(function*(m,b){const T=rt(m);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Te.forEach(b,M=>Te.forEach(M.Hs,O=>T.persistence.referenceDelegate.addReference(A,M.targetId,O)).next(()=>Te.forEach(M.Js,O=>T.persistence.referenceDelegate.removeReference(A,M.targetId,O)))))}catch(A){if(!Im(A))throw A;$e("LocalStore","Failed to update sequence numbers: "+A)}for(const A of b){const M=A.targetId;if(!A.fromCache){const O=T.ii.get(M),ue=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);T.ii=T.ii.insert(M,ue)}}}),function(m,b){return f.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function V6(n,t){return pP.apply(this,arguments)}function pP(){return(pP=(0,Ee.Z)(function*(n,t){const e=rt(n);if(!e.currentUser.isEqual(t)){$e("SyncEngine","User change. New user:",t.toKey());const r=yield JL(e.localStore,t);e.currentUser=t,(i=e).aa.forEach(d=>{d.forEach(f=>{f.reject(new Oe(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield th(e,r.hi)}var i})).apply(this,arguments)}function B6(n,t){const e=rt(n),r=e.ra.get(t);if(r&&r.Zu)return Ft().add(r.key);{let i=Ft();const l=e.na.get(t);if(!l)return i;for(const d of l){const f=e.ea.get(d);i=i.unionWith(f.view.Ku)}return i}}function U6(n,t){return gP.apply(this,arguments)}function gP(){return(gP=(0,Ee.Z)(function*(n,t){const e=rt(n),r=yield QA(e.localStore,t.query,!0),i=t.view.Yu(r);return e.isPrimaryClient&&dP(e,t.targetId,i.Hu),i})).apply(this,arguments)}function $6(n,t){return mP.apply(this,arguments)}function mP(){return(mP=(0,Ee.Z)(function*(n,t){const e=rt(n);return t2(e.localStore,t).then(r=>th(e,r))})).apply(this,arguments)}function H6(n,t,e,r){return _P.apply(this,arguments)}function _P(){return(_P=(0,Ee.Z)(function*(n,t,e,r){const i=rt(n),l=yield function(d,f){const m=rt(d),b=rt(m.Bs);return m.persistence.runTransaction("Lookup mutation documents","readonly",T=>b.fn(T,f).next(A=>A?m.ci.Ks(T,A):Te.resolve(null)))}(i.localStore,t);var f;null!==l?("pending"===e?yield Wv(i.remoteStore):"acknowledged"===e||"rejected"===e?(cP(i,t,r||null),uP(i,t),f=t,rt(rt(i.localStore).Bs)._n(f)):ht(),yield th(i,l)):$e("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function yP(){return(yP=(0,Ee.Z)(function*(n,t){const e=rt(n);if(CP(e),EP(e),!0===t&&!0!==e.ha){const r=e.sharedClientState.getAllActiveQueryTargets(),i=yield T2(e,r.toArray());e.ha=!0,yield Gk(e.remoteStore,!0);for(const l of i)nS(e.remoteStore,l)}else if(!1===t&&!1!==e.ha){const r=[];let i=Promise.resolve();e.na.forEach((l,d)=>{e.sharedClientState.isLocalQueryTarget(d)?r.push(d):i=i.then(()=>(Jv(e,d),Gv(e.localStore,d,!0))),qC(e.remoteStore,d)}),yield i,yield T2(e,r),function(l){const d=rt(l);d.ra.forEach((f,m)=>{qC(d.remoteStore,m)}),d.oa.bi(),d.ra=new Map,d.ia=new D(et.comparator)}(e),e.ha=!1,yield Gk(e.remoteStore,!1)}})).apply(this,arguments)}function T2(n,t,e){return vP.apply(this,arguments)}function vP(){return(vP=(0,Ee.Z)(function*(n,t,e){const r=rt(n),i=[],l=[];for(const d of t){let f;const m=r.na.get(d);if(m&&0!==m.length){f=yield jv(r.localStore,ro(m[0]));for(const b of m){const T=r.ea.get(b),A=yield U6(r,T);A.snapshot&&l.push(A.snapshot)}}else{const b=yield e2(r.localStore,d);f=yield jv(r.localStore,b),yield eP(r,D2(b),d,!1)}i.push(f)}return r.ta.Qo(l),i})).apply(this,arguments)}function D2(n){return Jf(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function G6(n){const t=rt(n);return rt(rt(t.localStore).persistence).Fs()}function q6(n,t,e,r){return bP.apply(this,arguments)}function bP(){return(bP=(0,Ee.Z)(function*(n,t,e,r){const i=rt(n);if(i.ha)return void $e("SyncEngine","Ignoring unexpected query state notification.");const l=i.na.get(t);if(l&&l.length>0)switch(e){case"current":case"not-current":{const d=yield t2(i.localStore,Xd(l[0])),f=al.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield th(i,d,f);break}case"rejected":yield Gv(i.localStore,t,!0),Jv(i,t,r);break;default:ht()}})).apply(this,arguments)}function W6(n,t,e){return wP.apply(this,arguments)}function wP(){return(wP=(0,Ee.Z)(function*(n,t,e){const r=CP(n);if(r.ha){for(const i of t){if(r.na.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const l=yield e2(r.localStore,i),d=yield jv(r.localStore,l);yield eP(r,D2(l),d.targetId,!1),nS(r.remoteStore,d)}for(const i of e)r.na.has(i)&&(yield Gv(r.localStore,i,!1).then(()=>{qC(r.remoteStore,i),Jv(r,i)}).catch(km))}})).apply(this,arguments)}function CP(n){const t=rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=w2.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=B6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=k6.bind(null,t),t.ta.Qo=E6.bind(null,t.eventManager),t.ta.fa=T6.bind(null,t.eventManager),t}function EP(n){const t=rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=P6.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=O6.bind(null,t),t}class I2{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ee.Z)(function*(){e.M=jC(t.databaseInfo.databaseId),e.sharedClientState=e._a(t),e.persistence=e.wa(t),yield e.persistence.start(),e.gcScheduler=e.ma(t),e.localStore=e.ga(t)})()}ma(t){return null}ga(t){return KL(this.persistence,new YL,t.initialUser,this.M)}wa(t){return new t6(Ek.zi,this.M)}_a(t){return new s2}terminate(){var t=this;return(0,Ee.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class A2 extends I2{constructor(t,e,r){super(),this.ya=t,this.cacheSizeBytes=e,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield e().call(r,t),yield r.ya.initialize(r,t),yield EP(r.ya.syncEngine),yield Wv(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(t){return KL(this.persistence,new YL,t.initialUser,this.M)}ma(t){return new F$(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const e=mk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new gk(this.synchronizeTabs,e,t.clientId,r,t.asyncQueue,a2(),tS(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new s2}}class z6 extends A2{constructor(t,e){super(t,e,!1),this.ya=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield e().call(r,t);const i=r.ya.syncEngine;r.sharedClientState instanceof Ak&&(r.sharedClientState.syncEngine={Mr:H6.bind(null,i),Or:q6.bind(null,i),Fr:W6.bind(null,i),Fs:G6.bind(null,i),kr:$6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var l=(0,Ee.Z)(function*(d){yield function(n,t){return yP.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return l.apply(this,arguments)}}())})()}_a(t){const e=a2();if(!Ak.vt(e))throw new Oe(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mk(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ak(e,t.asyncQueue,r,t.clientId,t.initialUser)}}class TP{initialize(t,e){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(e),r.remoteStore=r.createRemoteStore(e),r.eventManager=r.createEventManager(e),r.syncEngine=r.createSyncEngine(e,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>C2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=V6.bind(null,r.syncEngine),yield Gk(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(t){return new C6}createDatastore(t){const e=jC(t.databaseInfo.databaseId),r=new o6(t.databaseInfo);return new u6(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return e=this.localStore,r=this.datastore,i=t.asyncQueue,l=f=>C2(this.syncEngine,f,0),d=o2.vt()?new o2:new r6,new d6(e,r,i,l,d);var e,r,i,l,d}createSyncEngine(t,e){return function(r,i,l,d,f,m,b){const T=new N6(r,i,l,d,f,m);return b&&(T.ha=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ee.Z)(function*(e){const r=rt(e);$e("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield qv(r),r._u.shutdown(),r.wu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function S2(n,t=10240){let e=0;return{read:()=>(0,Ee.Z)(function*(){if(e<n.byteLength){const r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class iS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class Y6{constructor(t,e){this.Ta=t,this.M=e,this.metadata=new Tr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var t=this;return(0,Ee.Z)(function*(){return t.metadata.promise})()}da(){var t=this;return(0,Ee.Z)(function*(){return yield t.getMetadata(),t.Aa()})()}Aa(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.Ra();if(null===e)return null;const r=t.Ea.decode(e),i=Number(r);isNaN(i)&&t.Pa(`length string (${r}) is not valid number`);const l=yield t.ba(i);return new D6(JSON.parse(l),e.length+i)})()}Va(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Ra(){var t=this;return(0,Ee.Z)(function*(){for(;t.Va()<0&&!(yield t.va()););if(0===t.buffer.length)return null;const e=t.Va();e<0&&t.Pa("Reached the end of bundle when a length string is expected.");const r=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),r})()}ba(t){var e=this;return(0,Ee.Z)(function*(){for(;e.buffer.length<t;)(yield e.va())&&e.Pa("Reached the end of bundle when more is expected.");const r=e.Ea.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),r})()}Pa(t){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${t}`)}va(){var t=this;return(0,Ee.Z)(function*(){const e=yield t.Ta.read();if(!e.done){const r=new Uint8Array(t.buffer.length+e.value.length);r.set(t.buffer),r.set(e.value,t.buffer.length),t.buffer=r}return e.done})()}}class K6{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Oe(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(l,d){const f=rt(l),m=kC(f.M)+"/documents",b={documents:d.map(O=>RC(f.M,O))},T=yield f.ho("BatchGetDocuments",m,b),A=new Map;T.forEach(O=>{const q=function(n,t){return"found"in t?function(e,r){Bt(!!r.found);const i=uc(e,r.found.name),l=is(r.found.updateTime),d=new ts({mapValue:{fields:r.found.fields}});return ar.newFoundDocument(i,l,d)}(n,t):"missing"in t?function(e,r){Bt(!!r.missing),Bt(!!r.readTime);const i=uc(e,r.missing),l=is(r.readTime);return ar.newNoDocument(i,l)}(n,t):ht()}(f.M,O);A.set(q.key.toString(),q)});const M=[];return d.forEach(O=>{const q=A.get(O.toString());Bt(!!q),M.push(q)}),M}),function(l,d){return i.apply(this,arguments)})(e.datastore,t);var i;return r.forEach(i=>e.recordVersion(i)),r})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(t.toString())}delete(t){this.write(new o(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var r;t.mutations.forEach(r=>{e.delete(r.key.toString())}),e.forEach((r,i)=>{const l=et.fromPath(i);t.mutations.push(new u(l,t.precondition(l)))}),yield(r=(0,Ee.Z)(function*(i,l){const d=rt(i),f=kC(d.M)+"/documents",m={writes:l.map(b=>PC(d.M,b))};yield d.oo("Commit",f,m)}),function(i,l){return r.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ht();e=Mt.min()}const r=this.readVersions.get(t.key.toString());if(r){if(!e.isEqual(r))throw new Oe(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?pi.updateTime(e):pi.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Mt.min()))throw new Oe(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pi.updateTime(e)}return pi.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class J6{constructor(t,e,r,i){this.asyncQueue=t,this.datastore=e,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Sk(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var t=this;this.Do.To((0,Ee.Z)(function*(){const e=new K6(t.datastore),r=t.Ca(e);r&&r.then(i=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(i)}).catch(l=>{t.xa(l)}))}).catch(i=>{t.xa(i)})}))}Ca(t){try{const e=this.updateFunction(t);return!Wd(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}xa(t){this.Sa>0&&this.Na(t)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(t)}Na(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!_(e)}return!1}}class Q6{constructor(t,e,r,i){var l=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=Vi.UNAUTHENTICATED,this.clientId=mA.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ee.Z)(function*(f){$e("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>($e("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var t=this;return(0,Ee.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=zv(r,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}function N2(n,t){return DP.apply(this,arguments)}function DP(){return(DP=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(l){r.isEqual(l)||(yield JL(t.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t})).apply(this,arguments)}function x2(n,t){return IP.apply(this,arguments)}function IP(){return(IP=(0,Ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield AP(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield t.initialize(e,r),n.setCredentialChangeListener(i=>p2(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>p2(t.remoteStore,l)),n.onlineComponents=t})).apply(this,arguments)}function AP(n){return SP.apply(this,arguments)}function SP(){return(SP=(0,Ee.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield N2(n,new I2)),n.offlineComponents})).apply(this,arguments)}function sS(n){return NP.apply(this,arguments)}function NP(){return(NP=(0,Ee.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield x2(n,new TP)),n.onlineComponents})).apply(this,arguments)}function M2(n){return AP(n).then(t=>t.persistence)}function xP(n){return AP(n).then(t=>t.localStore)}function R2(n){return sS(n).then(t=>t.remoteStore)}function MP(n){return sS(n).then(t=>t.syncEngine)}function Qv(n){return RP.apply(this,arguments)}function RP(){return(RP=(0,Ee.Z)(function*(n){const t=yield sS(n),e=t.eventManager;return e.onListen=x6.bind(null,t.syncEngine),e.onUnlisten=M6.bind(null,t.syncEngine),e})).apply(this,arguments)}function k2(n,t,e={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,l,d,f,m){const b=new iS({next:A=>{l.enqueueAndForget(()=>Yk(i,T));const M=A.docs.has(d);!M&&A.fromCache?m.reject(new Oe(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&A.fromCache&&f&&"server"===f.source?m.reject(new Oe(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new Qk(rc(d.path),b,{includeMetadataChanges:!0,Cu:!0});return Zk(i,T)}(yield Qv(n),n.asyncQueue,t,e,r)})),r.promise}function P2(n,t,e={}){const r=new Tr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,l,d,f,m){const b=new iS({next:A=>{l.enqueueAndForget(()=>Yk(i,T)),A.fromCache&&"server"===f.source?m.reject(new Oe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),T=new Qk(d,b,{includeMetadataChanges:!0,Cu:!0});return Zk(i,T)}(yield Qv(n),n.asyncQueue,t,e,r)})),r.promise}const O2=new Map;function kP(n,t,e){if(!e)throw new Oe(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function F2(n,t,e,r){if(!0===t&&!0===r)throw new Oe(ye.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function L2(n){if(!et.isDocumentKey(n))throw new Oe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function V2(n){if(et.isDocumentKey(n))throw new Oe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ht()}function In(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Oe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=oS(n);throw new Oe(ye.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function B2(n,t){if(t<=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class U2{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Oe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Oe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,F2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class WC{constructor(t,e,r){this._authCredentials=e,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U2({}),this._settingsFrozen=!1,t instanceof Jl?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Oe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jl(i.options.projectId)}(t))}get app(){if(!this._app)throw new Oe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Oe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U2(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new yC;switch(e.type){case"gapi":const r=e.client;return Bt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new VR(r,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Oe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=O2.get(t);e&&($e("ComponentProvider","Removing Datastore"),O2.delete(t),e.terminate())}(this),Promise.resolve()}}class Mr{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Mr(this.firestore,t,this._key)}}class Bs{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Bs(this.firestore,t,this._query)}}class dc extends Bs{constructor(t,e,r){super(t,e,rc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Mr(this.firestore,null,new et(t))}withConverter(t){return new dc(this.firestore,t,this._path)}}function $2(n,t,...e){if(n=(0,V.m9)(n),kP("collection","path",t),n instanceof WC){const r=En.fromString(t,...e);return V2(r),new dc(n,null,r)}{if(!(n instanceof Mr||n instanceof dc))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(t,...e));return V2(r),new dc(n.firestore,null,r)}}function aS(n,t,...e){if(n=(0,V.m9)(n),1===arguments.length&&(t=mA.R()),kP("doc","path",t),n instanceof WC){const r=En.fromString(t,...e);return L2(r),new Mr(n,null,new et(r))}{if(!(n instanceof Mr||n instanceof dc))throw new Oe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(t,...e));return L2(r),new Mr(n.firestore,n instanceof dc?n.converter:null,new et(r))}}function H2(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),(n instanceof Mr||n instanceof dc)&&(t instanceof Mr||t instanceof dc)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function j2(n,t){return n=(0,V.m9)(n),t=(0,V.m9)(t),n instanceof Bs&&t instanceof Bs&&n.firestore===t.firestore&&Em(n._query,t._query)&&n.converter===t.converter}class uH{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Sk(this,"async_queue_retry"),this.qa=()=>{const e=tS();e&&$e("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Do.Ao()};const t=tS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const e=tS();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const e=new Tr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}Qa(){var t=this;return(0,Ee.Z)(function*(){if(0!==t.Ma.length){try{yield t.Ma[0](),t.Ma.shift(),t.Do.reset()}catch(e){if(!Im(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}t.Ma.length>0&&t.Do.To(()=>t.Qa())}})()}Ga(t){const e=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{throw this.$a=r,this.Ba=!1,pn("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=e,e}enqueueAfterDelay(t,e,r){this.Ka(),this.Ua.indexOf(t)>-1&&(e=0);const i=Wk.createAndSchedule(this,t,e,r,l=>this.ja(l));return this.Fa.push(i),i}Ka(){this.$a&&ht()}verifyOperationInProgress(){}Wa(){var t=this;return(0,Ee.Z)(function*(){let e;do{e=t.ka,yield e}while(e!==t.ka)})()}za(t){for(const e of this.Fa)if(e.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.Fa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const e=this.Fa.indexOf(t);this.Fa.splice(e,1)}}function PP(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const r=t;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class cH{constructor(){this._progressObserver={},this._taskCompletionResolver=new Tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,r){this._progressObserver={next:t,error:e,complete:r}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class $r extends WC{constructor(t,e,r){super(t,e,r),this.type="firestore",this._queue=new uH,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||G2(this),this._firestoreClient.terminate()}}function Ti(n){return n._firestoreClient||G2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function G2(n){var t;const e=n._freezeSettings(),r=(l=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new ma(n._databaseId,l,n._persistenceKey,(f=e).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var l,f;n._firestoreClient=new Q6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function q2(n,t,e){const r=new Tr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield N2(n,e),yield x2(n,t),r.resolve()}catch(i){if(!("FirebaseError"===(l=i).name?l.code===ye.FAILED_PRECONDITION||l.code===ye.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var l})).then(()=>r.promise)}function W2(n){if(n._initialized||n._terminated)throw new Oe(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nh{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Oe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ui(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class hc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hc(fi.fromBase64String(t))}catch(e){throw new Oe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new hc(fi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Om{constructor(t){this._methodName=t}}class lS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Oe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Oe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return tn(this._lat,t._lat)||tn(this._long,t._long)}}const bH=/^__.*__$/;class wH{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return null!==this.fieldMask?new Xf(t,this.data,this.fieldMask,e,this.fieldTransforms):new Rv(t,this.data,e,this.fieldTransforms)}}class Z2{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return new Xf(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function z2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class uS{constructor(t,e,r,i,l,d){this.settings=t,this.databaseId=e,this.M=r,this.ignoreUndefinedProperties=i,void 0===l&&this.Ya(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new uS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var e;const r=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return hS(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(z2(this.Xa)&&bH.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class CH{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=r||jC(t)}ac(t,e,r,i=!1){return new uS({Xa:t,methodName:e,uc:r,path:Ui.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Fm(n){const t=n._freezeSettings(),e=jC(n._databaseId);return new CH(n._databaseId,!!t.ignoreUndefinedProperties,e)}function cS(n,t,e,r,i,l={}){const d=n.ac(l.merge||l.mergeFields?2:0,t,e,i);VP("Data must be an object, but it was:",d,r);const f=J2(r,d);let m,b;if(l.merge)m=new qf(d.fieldMask),b=d.fieldTransforms;else if(l.mergeFields){const T=[];for(const A of l.mergeFields){const M=BP(t,A,e);if(!d.contains(M))throw new Oe(ye.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);X2(T,M)||T.push(M)}m=new qf(T),b=d.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,b=d.fieldTransforms;return new wH(new ts(f),m,b)}class ZC extends Om{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof ZC}}function Y2(n,t,e){return new uS({Xa:3,uc:t.settings.uc,methodName:n._methodName,ec:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class OP extends Om{_toFieldTransform(t){return new Nv(t.path,new ic)}isEqual(t){return t instanceof OP}}class EH extends Om{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=Y2(this,t,!0),r=this.cc.map(l=>Lm(l,e)),i=new eh(r);return new Nv(t.path,i)}isEqual(t){return this===t}}class TH extends Om{constructor(t,e){super(t),this.cc=e}_toFieldTransform(t){const e=Y2(this,t,!0),r=this.cc.map(l=>Lm(l,e)),i=new sc(r);return new Nv(t.path,i)}isEqual(t){return this===t}}class DH extends Om{constructor(t,e){super(t),this.hc=e}_toFieldTransform(t){const e=new ac(t.M,FA(t.M,this.hc));return new Nv(t.path,e)}isEqual(t){return this===t}}function FP(n,t,e,r){const i=n.ac(1,t,e);VP("Data must be an object, but it was:",i,r);const l=[],d=ts.empty();jd(r,(m,b)=>{const T=dS(t,m,e);b=(0,V.m9)(b);const A=i.sc(T);if(b instanceof ZC)l.push(T);else{const M=Lm(b,A);null!=M&&(l.push(T),d.set(T,M))}});const f=new qf(l);return new Z2(d,f,i.fieldTransforms)}function LP(n,t,e,r,i,l){const d=n.ac(1,t,e),f=[BP(t,r,e)],m=[i];if(l.length%2!=0)throw new Oe(ye.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<l.length;M+=2)f.push(BP(t,l[M])),m.push(l[M+1]);const b=[],T=ts.empty();for(let M=f.length-1;M>=0;--M)if(!X2(b,f[M])){const O=f[M];let q=m[M];q=(0,V.m9)(q);const ue=d.sc(O);if(q instanceof ZC)b.push(O);else{const be=Lm(q,ue);null!=be&&(b.push(O),T.set(O,be))}}const A=new qf(b);return new Z2(T,A,d.fieldTransforms)}function K2(n,t,e,r=!1){return Lm(e,n.ac(r?4:3,t))}function Lm(n,t){if(Q2(n=(0,V.m9)(n)))return VP("Unsupported field value:",t,n),J2(n,t);if(n instanceof Om)return function(e,r){if(!z2(r.Xa))throw r.rc(`${e._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${e._methodName}() is not currently supported inside arrays`);const i=e._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,r){const i=[];let l=0;for(const d of e){let f=Lm(d,r.ic(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,t)}return function(e,r){if(null===(e=(0,V.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return FA(r.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const i=Qr.fromDate(e);return{timestampValue:MC(r.M,i)}}if(e instanceof Qr){const i=new Qr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:MC(r.M,i)}}if(e instanceof lS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hc)return{bytesValue:uL(r.M,e._byteString)};if(e instanceof Mr){const i=r.databaseId,l=e.firestore._databaseId;if(!l.isEqual(i))throw r.rc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:tk(e.firestore._databaseId||r.databaseId,e._key.path)}}throw r.rc(`Unsupported field value: ${oS(e)}`)}(n,t)}function J2(n,t){const e={};return yA(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):jd(n,(r,i)=>{const l=Lm(i,t.tc(r));null!=l&&(e[r]=l)}),{mapValue:{fields:e}}}function Q2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qr||n instanceof lS||n instanceof hc||n instanceof Mr||n instanceof Om)}function VP(n,t,e){if(!Q2(e)||"object"!=typeof(r=e)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=oS(e);throw t.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function BP(n,t,e){if((t=(0,V.m9)(t))instanceof nh)return t._internalPath;if("string"==typeof t)return dS(n,t);throw hS("Field path arguments must be of type string or ",n,!1,void 0,e)}const IH=new RegExp("[~\\*/\\[\\]]");function dS(n,t,e){if(t.search(IH)>=0)throw hS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new nh(...t.split("."))._internalPath}catch(r){throw hS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function hS(n,t,e,r,i){const l=r&&!r.isEmpty(),d=void 0!==i;let f=`Function ${t}() called with invalid data`;e&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||d)&&(m+=" (found",l&&(m+=` in field ${r}`),d&&(m+=` in document ${i}`),m+=")"),new Oe(ye.INVALID_ARGUMENT,f+n+m)}function X2(n,t){return n.some(e=>e.isEqual(t))}class zC{constructor(t,e,r,i,l){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new AH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(fS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class AH extends zC{data(){return super.data()}}function fS(n,t){return"string"==typeof t?dS(n,t):t instanceof nh?t._internalPath:t._delegate._internalPath}class Vm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class rh extends zC{constructor(t,e,r,i,l,d){super(t,e,r,i,d),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new YC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(fS("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class YC extends rh{data(t={}){return super.data(t)}}class op{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new Vm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new YC(this._firestore,this._userDataWriter,r.key,r,new Vm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Oe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new YC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Vm(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>i||3!==d.type).map(d=>{const f=new YC(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Vm(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==d.type&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:SH(d.type),doc:f,oldIndex:m,newIndex:b}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function SH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function eV(n,t){return n instanceof rh&&t instanceof rh?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof op&&t instanceof op&&n._firestore===t._firestore&&j2(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function tV(n){if(Sv(n)&&0===n.explicitOrderBy.length)throw new Oe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KC{}function ap(n,...t){for(const e of t)n=e._apply(n);return n}class NH extends KC{constructor(t,e,r){super(),this.lc=t,this.fc=e,this.dc=r,this.type="where"}_apply(t){const e=Fm(t.firestore),r=function(i,l,d,f,m,b,T){let A;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){aV(T,b);const O=[];for(const q of T)O.push(oV(f,i,q));A={arrayValue:{values:O}}}else A=oV(f,i,T)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||aV(T,b),A=K2(d,"where",T,"in"===b||"not-in"===b);const M=Xr.create(m,b,A);return function(O,q){if(q.S()){const be=Cm(O);if(null!==be&&!be.isEqual(q.field))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${be.toString()}' and '${q.field.toString()}'`);const Ge=AC(O);null!==Ge&&lV(0,q.field,Ge)}const ue=function(be,Ge){for(const Ke of be.filters)if(Ge.indexOf(Ke.op)>=0)return Ke.op;return null}(O,function(be){switch(be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==ue)throw new Oe(ye.INVALID_ARGUMENT,ue===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,M),M}(t._query,0,e,t.firestore._databaseId,this.lc,this.fc,this.dc);return new Bs(t.firestore,t.converter,function(i,l){const d=i.filters.concat([l]);return new rs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),d,i.limit,i.limitType,i.startAt,i.endAt)}(t._query,r))}}class MH extends KC{constructor(t,e){super(),this.lc=t,this._c=e,this.type="orderBy"}_apply(t){const e=function(r,i,l){if(null!==r.startAt)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Kd(i,l);return function(f,m){if(null===AC(f)){const b=Cm(f);null!==b&&lV(0,b,m.field)}}(r,d),d}(t._query,this.lc,this._c);return new Bs(t.firestore,t.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new rs(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}}class nV extends KC{constructor(t,e,r){super(),this.type=t,this.wc=e,this.mc=r}_apply(t){return new Bs(t.firestore,t.converter,RA(t._query,this.wc,this.mc))}}class rV extends KC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=sV(t,this.type,this.gc,this.yc);return new Bs(t.firestore,t.converter,(i=e,new rs((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class iV extends KC{constructor(t,e,r){super(),this.type=t,this.gc=e,this.yc=r}_apply(t){const e=sV(t,this.type,this.gc,this.yc);return new Bs(t.firestore,t.converter,(i=e,new rs((r=t._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function sV(n,t,e,r){if(e[0]=(0,V.m9)(e[0]),e[0]instanceof zC)return function(i,l,d,f,m){if(!f)throw new Oe(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const b=[];for(const T of Jd(i))if(T.field.isKeyField())b.push(Zf(l,f.key));else{const A=f.data.field(T.field);if(bC(A))throw new Oe(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const M=T.field.canonicalString();throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}b.push(A)}return new nc(b,m)}(n._query,n.firestore._databaseId,t,e[0]._document,r);{const i=Fm(n.firestore);return function(l,d,f,m,b,T){const A=l.explicitOrderBy;if(b.length>A.length)throw new Oe(ye.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let O=0;O<b.length;O++){const q=b[O];if(A[O].field.isKeyField()){if("string"!=typeof q)throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof q}`);if(!SC(l)&&-1!==q.indexOf("/"))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${q}' contains a slash.`);const ue=l.path.child(En.fromString(q));if(!et.isDocumentKey(ue))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const be=new et(ue);M.push(Zf(d,be))}else{const ue=K2(f,m,q);M.push(ue)}}return new nc(M,T)}(n._query,n.firestore._databaseId,i,t,e,r)}}function oV(n,t,e){if("string"==typeof(e=(0,V.m9)(e))){if(""===e)throw new Oe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SC(t)&&-1!==e.indexOf("/"))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const r=t.path.child(En.fromString(e));if(!et.isDocumentKey(r))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zf(n,new et(r))}if(e instanceof Mr)return Zf(n,e._key);throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oS(e)}.`)}function aV(n,t){if(!Array.isArray(n)||0===n.length)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Oe(ye.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function lV(n,t,e){if(!e.isEqual(t))throw new Oe(ye.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class UP{convertValue(t,e="none"){switch(Zd(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ur(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(qd(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ht()}}convertObject(t,e){const r={};return jd(t.fields,(i,l)=>{r[i]=this.convertValue(l,e)}),r}convertGeoPoint(t){return new lS(Ur(t.latitude),Ur(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=vA(t);return null==r?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(hm(t));default:return null}}convertTimestamp(t){const e=Gd(t);return new Qr(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=En.fromString(t);Bt(vL(r));const i=new Jl(r.get(1),r.get(3)),l=new et(r.popFirst(5));return i.isEqual(e)||pn(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}function pS(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}class BH extends UP{constructor(t){super(),this.firestore=t}convertBytes(t){return new hc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Mr(this.firestore,null,e)}}class uV{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Fm(t)}set(t,e,r){this._verifyNotCommitted();const i=lp(t,this._firestore),l=pS(i.converter,e,r),d=cS(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(d.toMutation(i._key,pi.none())),this}update(t,e,r,...i){this._verifyNotCommitted();const l=lp(t,this._firestore);let d;return d="string"==typeof(e=(0,V.m9)(e))||e instanceof nh?LP(this._dataReader,"WriteBatch.update",l._key,e,r,i):FP(this._dataReader,"WriteBatch.update",l._key,e),this._mutations.push(d.toMutation(l._key,pi.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=lp(t,this._firestore);return this._mutations=this._mutations.concat(new o(e._key,pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lp(n,t){if((n=(0,V.m9)(n)).firestore!==t)throw new Oe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Bm extends UP{constructor(t){super(),this.firestore=t}convertBytes(t){return new hc(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Mr(this.firestore,null,e)}}function cV(n,t,e){n=In(n,Mr);const r=In(n.firestore,$r),i=pS(n.converter,t,e);return Xv(r,[cS(Fm(r),"setDoc",n._key,i,null!==n.converter,e).toMutation(n._key,pi.none())])}function dV(n,t,e,...r){n=In(n,Mr);const i=In(n.firestore,$r),l=Fm(i);let d;return d="string"==typeof(t=(0,V.m9)(t))||t instanceof nh?LP(l,"updateDoc",n._key,t,e,r):FP(l,"updateDoc",n._key,t),Xv(i,[d.toMutation(n._key,pi.exists(!0))])}function hV(n,...t){var e,r,i;n=(0,V.m9)(n);let l={includeMetadataChanges:!1},d=0;"object"!=typeof t[d]||PP(t[d])||(l=t[d],d++);const f={includeMetadataChanges:l.includeMetadataChanges};if(PP(t[d])){const A=t[d];t[d]=null===(e=A.next)||void 0===e?void 0:e.bind(A),t[d+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),t[d+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,b,T;if(n instanceof Mr)b=In(n.firestore,$r),T=rc(n._key.path),m={next:A=>{t[d]&&t[d]($P(b,n,A))},error:t[d+1],complete:t[d+2]};else{const A=In(n,Bs);b=In(A.firestore,$r),T=A._query;const M=new Bm(b);m={next:O=>{t[d]&&t[d](new op(b,M,A,O))},error:t[d+1],complete:t[d+2]},tV(n._query)}return function(A,M,O,q){const ue=new iS(q),be=new Qk(M,ue,O);return A.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Zk(yield Qv(A),be)})),()=>{ue.Ia(),A.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Yk(yield Qv(A),be)}))}}(Ti(b),T,f,m)}function Xv(n,t){return function(e,r){const i=new Tr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,t,e){return rP.apply(this,arguments)}(yield MP(e),r,i)})),i.promise}(Ti(n),t)}function $P(n,t,e){const r=e.docs.get(t._key),i=new Bm(n);return new rh(n,i,t._key,r,new Vm(e.hasPendingWrites,e.fromCache),t.converter)}class YH extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Fm(t)}get(t){const e=lp(t,this._firestore),r=new BH(this._firestore);return this._transaction.lookup([e._key]).then(i=>{if(!i||1!==i.length)return ht();const l=i[0];if(l.isFoundDocument())return new zC(this._firestore,r,l.key,l,e.converter);if(l.isNoDocument())return new zC(this._firestore,r,e._key,null,e.converter);throw ht()})}set(t,e,r){const i=lp(t,this._firestore),l=pS(i.converter,e,r),d=cS(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,d),this}update(t,e,r,...i){const l=lp(t,this._firestore);let d;return d="string"==typeof(e=(0,V.m9)(e))||e instanceof nh?LP(this._dataReader,"Transaction.update",l._key,e,r,i):FP(this._dataReader,"Transaction.update",l._key,e),this._transaction.update(l._key,d),this}delete(t){const e=lp(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=lp(t,this._firestore),r=new Bm(this._firestore);return super.get(t).then(i=>new rh(this._firestore,r,e._key,i._document,new Vm(!1,!1),e.converter))}}function HP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function pV(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function gV(){if("undefined"==typeof atob)throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){$d=_s.SDK_VERSION,(0,_s._registerComponent)(new Ka.wA("firestore",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),l=new $r(i,new LR(e.getProvider("auth-internal")),new gA(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),l._setSettings(r),l},"PUBLIC")),(0,_s.registerVersion)(fA,"3.4.8",n),(0,_s.registerVersion)(fA,"3.4.8","esm2017")}();class JC{constructor(t){this._delegate=t}static fromBase64String(t){return gV(),new JC(hc.fromBase64String(t))}static fromUint8Array(t){return pV(),new JC(hc.fromUint8Array(t))}toBase64(){return gV(),this._delegate.toBase64()}toUint8Array(){return pV(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function jP(n){return function(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const r of["next","error","complete"])if(r in e&&"function"==typeof e[r])return!0;return!1}(n)}class sj{enableIndexedDbPersistence(t,e){return function(n,t){W2(n=In(n,$r));const e=Ti(n),r=n._freezeSettings(),i=new TP;return q2(e,i,new A2(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(n){W2(n=In(n,$r));const t=Ti(n),e=n._freezeSettings(),r=new TP;return q2(t,r,new z6(r,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(n){if(n._initialized&&!n._terminated)throw new Oe(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Tr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(e=(0,Ee.Z)(function*(r){if(!eu.vt())return Promise.resolve();const i=r+"main";yield eu.delete(i)}),function(r){return e.apply(this,arguments)})(mk(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class mV{constructor(t,e,r){this._delegate=e,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},t instanceof Jl||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&vv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,r={}){!function(n,t,e,r={}){var i;const l=(n=In(n,WC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==t&&vv("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${t}:${e}`,ssl:!1})),r.mockUserToken){let d,f;if("string"==typeof r.mockUserToken)d=r.mockUserToken,f=Vi.MOCK_USER;else{d=(0,V.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Oe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vi(m)}n._authCredentials=new vC(new _C(d,f))}}(this._delegate,t,e,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield M2(n),e=yield R2(n);return t.setNetworkEnabled(!0),function(r){const i=rt(r);return i.fu.delete(0),GC(i)}(e)}))}(Ti(n=In(n,$r)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const t=yield M2(n),e=yield R2(n);return t.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const l=rt(i);l.fu.add(0),yield qv(l),l.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(e);var r}))}(Ti(n=In(n,$r)))}(this._delegate)}enablePersistence(t){let e=!1,r=!1;return t&&(e=!!t.synchronizeTabs,r=!!t.experimentalForceOwningTab,F2("synchronizeTabs",e,"experimentalForceOwningTab",r)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(t){const e=new Tr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(n,t){return lP.apply(this,arguments)}(yield MP(t),e)})),e.promise}(Ti(n=In(n,$r)))}(this._delegate)}onSnapshotsInSync(t){return function(n,t){return function(n,t){const e=new iS(t);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Qv(n),i=e,rt(r).Eu.add(i),void i.next();var r,i})),()=>{e.Ia(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Qv(n),i=e,void rt(r).Eu.delete(i);var r,i}))}}(Ti(n=In(n,$r)),PP(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new e0(this,$2(this._delegate,t))}catch(e){throw so(e,"collection()","Firestore.collection()")}}doc(t){try{return new ul(this,aS(this._delegate,t))}catch(e){throw so(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new oo(this,function(n,t){if(n=In(n,WC),kP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Oe(ye.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bs(n,null,(e=t,new rs(En.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw so(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(n,t){return function(n,t){const e=new Tr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(i=n,sS(i).then(l=>l.datastore));var i;new J6(n.asyncQueue,r,t,e).run()})),e.promise}(Ti(n=In(n,$r)),e=>t(new YH(n,e)))}(this._delegate,e=>t(new _V(this,e)))}batch(){return Ti(this._delegate),new yV(new uV(this._delegate,t=>Xv(this._delegate,t)))}loadBundle(t){return function(n,t){const e=Ti(n=In(n,$r)),r=new cH;return function(n,t,e,r){const i=function(l,d){let f;return f="string"==typeof l?(new TextEncoder).encode(l):l,m=function(m,b){if(m instanceof Uint8Array)return S2(m,b);if(m instanceof ArrayBuffer)return S2(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Y6(m,d);var m}(e,jC(t));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function(n,t,e){const r=rt(n);var i;(i=(0,Ee.Z)(function*(l,d,f){try{const m=yield d.getMetadata();if(yield function(M,O){const q=rt(M),ue=is(O.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",be=>q._s.getBundleMetadata(be,O.id)).then(be=>!!be&&be.createTime.compareTo(ue)>=0)}(l.localStore,m))return yield d.close(),f._completeWith({taskState:"Success",documentsLoaded:(M=m).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);f._updateProgress(_2(m));const b=new I6(m,l.localStore,d.M);let T=yield d.da();for(;T;){const M=yield b.ku(T);M&&f._updateProgress(M),T=yield d.da()}const A=yield b.complete();return yield th(l,A.Fu,void 0),yield function(M,O){const q=rt(M);return q.persistence.runTransaction("Save bundle","readwrite",ue=>q._s.saveBundleMetadata(ue,O))}(l.localStore,m),f._completeWith(A.progress),Promise.resolve(A.Ou)}catch(m){return vv("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var M}),function(l,d,f){return i.apply(this,arguments)})(r,t,e).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MP(n),i,r)}))}(e,n._databaseId,t,r),r}(this._delegate,t)}namedQuery(t){return function(n,t){return function(n,t){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(e,r){const i=rt(e);return i.persistence.runTransaction("Get named query","readonly",l=>i._s.getNamedQuery(l,r))}(yield xP(n),t)}))}(Ti(n=In(n,$r)),t).then(e=>e?new Bs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new oo(this,e):null)}}class gS extends UP{constructor(t){super(),this.firestore=t}convertBytes(t){return new JC(new hc(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return ul.forKey(e,this.firestore,null)}}class _V{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new gS(t)}get(t){const e=$m(t);return this._delegate.get(e).then(r=>new QC(this._firestore,new rh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,e.converter)))}set(t,e,r){const i=$m(t);return r?(HP("Transaction.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=$m(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=$m(t);return this._delegate.delete(e),this}}class yV{constructor(t){this._delegate=t}set(t,e,r){const i=$m(t);return r?(HP("WriteBatch.set",r),this._delegate.set(i,e,r)):this._delegate.set(i,e),this}update(t,e,r,...i){const l=$m(t);return 2===arguments.length?this._delegate.update(l,e):this._delegate.update(l,e,r,...i),this}delete(t){const e=$m(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Um{constructor(t,e,r){this._firestore=t,this._userDataWriter=e,this._delegate=r}fromFirestore(t,e){const r=new YC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new XC(this._firestore,r),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const r=Um.INSTANCES;let i=r.get(t);i||(i=new WeakMap,r.set(t,i));let l=i.get(e);return l||(l=new Um(t,new gS(t),e),i.set(e,l)),l}}Um.INSTANCES=new WeakMap;class ul{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gS(t)}static forPath(t,e,r){if(t.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ul(e,new Mr(e._delegate,r,new et(t)))}static forKey(t,e,r){return new ul(e,new Mr(e._delegate,r,t))}get id(){return this._delegate.id}get parent(){return new e0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new e0(this.firestore,$2(this._delegate,t))}catch(e){throw so(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,V.m9)(t))instanceof Mr&&H2(this._delegate,t)}set(t,e){e=HP("DocumentReference.set",e);try{return e?cV(this._delegate,t,e):cV(this._delegate,t)}catch(r){throw so(r,"setDoc()","DocumentReference.set()")}}update(t,e,...r){try{return 1===arguments.length?dV(this._delegate,t):dV(this._delegate,t,e,...r)}catch(i){throw so(i,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return Xv(In(n.firestore,$r),[new o(n._key,pi.none())])}(this._delegate)}onSnapshot(...t){const e=vV(t),r=bV(t,i=>new QC(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return hV(this._delegate,e,r)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=In(n,Mr);const t=In(n.firestore,$r),e=Ti(t),r=new Bm(t);return function(n,t){const e=new Tr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,l,d){try{const f=yield function(m,b){const T=rt(m);return T.persistence.runTransaction("read document","readonly",A=>T.ci.Ls(A,b))}(i,l);f.isFoundDocument()?d.resolve(f):f.isNoDocument()?d.resolve(null):d.reject(new Oe(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=zv(f,`Failed to get document '${l} from cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield xP(n),t,e);var r})),e.promise}(e,n._key).then(i=>new rh(t,r,n._key,i,new Vm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=In(n,Mr);const t=In(n.firestore,$r);return k2(Ti(t),n._key,{source:"server"}).then(e=>$P(t,n,e))}(this._delegate):function(n){n=In(n,Mr);const t=In(n.firestore,$r);return k2(Ti(t),n._key).then(e=>$P(t,n,e))}(this._delegate),e.then(r=>new QC(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(t){return new ul(this.firestore,this._delegate.withConverter(t?Um.getInstance(this.firestore,t):null))}}function so(n,t,e){return n.message=n.message.replace(t,e),n}function vV(n){for(const t of n)if("object"==typeof t&&!jP(t))return t;return{}}function bV(n,t){var e,r;let i;return i=jP(n[0])?n[0]:jP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(t(l))},error:null===(e=i.error)||void 0===e?void 0:e.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class QC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new ul(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return eV(this._delegate,t._delegate)}}class XC extends QC{data(t){const e=this._delegate.data(t);return function(n,t){n||ht()}(void 0!==e),e}}class oo{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new gS(t)}where(t,e,r){try{return new oo(this.firestore,ap(this._delegate,function(n,t,e){const r=t,i=fS("where",n);return new NH(i,r,e)}(t,e,r)))}catch(i){throw so(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new oo(this.firestore,ap(this._delegate,function(n,t="asc"){const e=t,r=fS("orderBy",n);return new MH(r,e)}(t,e)))}catch(r){throw so(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new oo(this.firestore,ap(this._delegate,function(n){return B2("limit",n),new nV("limit",n,"F")}(t)))}catch(e){throw so(e,"limit()","Query.limit()")}}limitToLast(t){try{return new oo(this.firestore,ap(this._delegate,function(n){return B2("limitToLast",n),new nV("limitToLast",n,"L")}(t)))}catch(e){throw so(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new oo(this.firestore,ap(this._delegate,function(...n){return new rV("startAt",n,!0)}(...t)))}catch(e){throw so(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new oo(this.firestore,ap(this._delegate,function(...n){return new rV("startAfter",n,!1)}(...t)))}catch(e){throw so(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new oo(this.firestore,ap(this._delegate,function(...n){return new iV("endBefore",n,!1)}(...t)))}catch(e){throw so(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new oo(this.firestore,ap(this._delegate,function(...n){return new iV("endAt",n,!0)}(...t)))}catch(e){throw so(e,"endAt()","Query.endAt()")}}isEqual(t){return j2(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(n){n=In(n,Bs);const t=In(n.firestore,$r),e=Ti(t),r=new Bm(t);return function(n,t){const e=new Tr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,l,d){try{const f=yield QA(i,l,!0),m=new b2(l,f.li),b=m.Gu(f.documents),T=m.applyChanges(b,!1);d.resolve(T.snapshot)}catch(f){const m=zv(f,`Failed to execute query '${l} against cache`);d.reject(m)}}),function(i,l,d){return r.apply(this,arguments)})(yield xP(n),t,e);var r})),e.promise}(e,n._query).then(i=>new op(t,r,n,i))}(this._delegate):"server"===(null==t?void 0:t.source)?function(n){n=In(n,Bs);const t=In(n.firestore,$r),e=Ti(t),r=new Bm(t);return P2(e,n._query,{source:"server"}).then(i=>new op(t,r,n,i))}(this._delegate):function(n){n=In(n,Bs);const t=In(n.firestore,$r),e=Ti(t),r=new Bm(t);return tV(n._query),P2(e,n._query).then(i=>new op(t,r,n,i))}(this._delegate),e.then(r=>new GP(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...t){const e=vV(t),r=bV(t,i=>new GP(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return hV(this._delegate,e,r)}withConverter(t){return new oo(this.firestore,this._delegate.withConverter(t?Um.getInstance(this.firestore,t):null))}}class aj{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new XC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new XC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new aj(this._firestore,e))}forEach(t,e){this._delegate.forEach(r=>{t.call(e,new XC(this._firestore,r))})}isEqual(t){return eV(this._delegate,t._delegate)}}class e0 extends oo{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ul(this.firestore,t):null}doc(t){try{return new ul(this.firestore,void 0===t?aS(this._delegate):aS(this._delegate,t))}catch(e){throw so(e,"doc()","CollectionReference.doc()")}}add(t){return function(n,t){const e=In(n.firestore,$r),r=aS(n),i=pS(n.converter,t);return Xv(e,[cS(Fm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,pi.exists(!1))]).then(()=>r)}(this._delegate,t).then(e=>new ul(this.firestore,e))}isEqual(t){return H2(this._delegate,t._delegate)}withConverter(t){return new e0(this.firestore,this._delegate.withConverter(t?Um.getInstance(this.firestore,t):null))}}function $m(n){return In(n,Mr)}class qP{constructor(...t){this._delegate=new nh(...t)}static documentId(){return new qP(Ui.keyField().canonicalString())}isEqual(t){return(t=(0,V.m9)(t))instanceof nh&&this._delegate._internalPath.isEqual(t._internalPath)}}class Hm{constructor(t){this._delegate=t}static serverTimestamp(){const t=new OP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Hm(t)}static delete(){const t=new ZC("deleteField");return t._methodName="FieldValue.delete",new Hm(t)}static arrayUnion(...t){const e=function(...n){return new EH("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Hm(e)}static arrayRemove(...t){const e=function(...n){return new TH("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Hm(e)}static increment(t){const e=function(n){return new DH("increment",n)}(t);return e._methodName="FieldValue.increment",new Hm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const lj={Firestore:mV,GeoPoint:lS,Timestamp:Qr,Blob:JC,Transaction:_V,WriteBatch:yV,DocumentReference:ul,DocumentSnapshot:QC,Query:oo,QueryDocumentSnapshot:XC,QuerySnapshot:GP,CollectionReference:e0,FieldPath:qP,FieldValue:Hm,setLogLevel:function(n){!function(n){Hd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function wV(n,t){return function(n,t=Lu.z){return new zn.y(e=>{let r;return null!=t?t.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},e)}):r=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=r&&r()}})}(n,t)}function WP(n,t){return wV(n,t).pipe((0,ct.U)(e=>({payload:e,type:"query"})))}function mS(n,t){return WP(n,t).pipe(zo(void 0),s1(),(0,ct.U)(([e,r])=>{const i=r.payload.docChanges(),l=i.map(d=>({type:d.type,payload:d}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,f)=>{const m=i.find(T=>T.doc.ref.isEqual(d.ref)),b=null==e?void 0:e.payload.docs.find(T=>T.ref.isEqual(d.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(d.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(d.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:d}})}),l}))}function CV(n,t,e){return mS(n,e).pipe(Va((r,i)=>function(n,t,e){return t.forEach(r=>{e.indexOf(r.type)>-1&&(n=function(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return ZP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return ZP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return ZP(n,t.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),t),[]),ld(),(0,ct.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ZP(n,t,e,...r){const i=n.slice();return i.splice(t,e,...r),i}function EV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,t){n.INTERNAL.registerComponent(new Ka.wA("firestore-compat",e=>((t,e)=>new mV(t,e,new sj))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},lj)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.17")}(O_.Z);class TV{constructor(t,e,r){this.ref=t,this.query=e,this.afs=r}stateChanges(t){let e=mS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,ct.U)(r=>r.filter(i=>t.indexOf(i.type)>-1)))),e.pipe(zo(void 0),s1(),Yn(([r,i])=>i.length>0||!r),(0,ct.U)(([r,i])=>i),Dn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Va((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=EV(t);return CV(this.query,e,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(t={}){return WP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.payload.docs.map(r=>t.idField?Object.assign(Object.assign({},r.data()),{[t.idField]:r.id}):r.data())),Dn.iC)}get(t){return(0,Qt.D)(this.query.get(t)).pipe(Dn.iC)}add(t){return this.ref.add(t)}doc(t){return new DV(this.ref.doc(t),this.afs)}}class DV{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const r=this.ref.collection(t),{ref:i,query:l}=SV(r,e);return new TV(i,l,this.afs)}snapshotChanges(){return function(n,t){return wV(n,t).pipe(zo(void 0),s1(),(0,ct.U)(([e,r])=>r.exists?(null==e?void 0:e.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,ct.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Qt.D)(this.ref.get(t)).pipe(Dn.iC)}}class gj{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?mS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(e=>e.filter(r=>t.indexOf(r.type)>-1)),Yn(e=>e.length>0),Dn.iC):mS(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(t){return this.stateChanges(t).pipe(Va((e,r)=>[...e,...r],[]))}snapshotChanges(t){const e=EV(t);return CV(this.query,e,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(t={}){return WP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ct.U)(r=>r.payload.docs.map(i=>t.idField?Object.assign({[t.idField]:i.id},i.data()):i.data())),Dn.iC)}get(t){return(0,Qt.D)(this.query.get(t)).pipe(Dn.iC)}}const IV=new a.OlP("angularfire2.enableFirestorePersistence"),AV=new a.OlP("angularfire2.firestore.persistenceSettings"),mj=new a.OlP("angularfire2.firestore.settings"),_j=new a.OlP("angularfire2.firestore.use-emulator");function SV(n,t=(e=>e)){return{query:t(n),ref:n}}let NV=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A,M,O,q,ue,be,Ge,Ke){this.schedulers=m;const it=(0,vi.on)(e,f,r),ot=T;A&&e1(it,f,M,q,ue,be,O,Ge),[this.firestore,this.persistenceEnabled$]=(0,vi.cc)(`${it.name}.firestore`,"AngularFirestore",it.name,()=>{const Lt=f.runOutsideAngular(()=>it.firestore());if(l&&Lt.settings(l),ot&&Lt.useEmulator(...ot),i&&!ph(d)){const ln=()=>{try{return(0,Qt.D)(Lt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(zr){return"undefined"!=typeof console&&console.warn(zr),(0,dt.of)(!1)}};return[Lt,f.runOutsideAngular(ln)]}return[Lt,(0,dt.of)(!1)]},[l,ot,i])}collection(e,r){let i;i="string"==typeof e?this.firestore.collection(e):e;const{ref:l,query:d}=SV(i,r),f=this.schedulers.ngZone.run(()=>l);return new TV(f,d,this)}collectionGroup(e,r){const i=r||(d=>d),l=this.firestore.collectionGroup(e);return new gj(i(l),this)}doc(e){let r;r="string"==typeof e?this.firestore.doc(e):e;const i=this.schedulers.ngZone.run(()=>r);return new DV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(IV,8),a.LFG(mj,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Dn.HU),a.LFG(AV,8),a.LFG(_j,8),a.LFG(jg,8),a.LFG(Hg,8),a.LFG(Kw,8),a.LFG(EI,8),a.LFG(Jw,8),a.LFG(Qw,8),a.LFG(Xw,8),a.LFG($g,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yj=(()=>{class n{constructor(){Yw.Z.registerVersion("angularfire",Dn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:IV,useValue:!0},{provide:AV,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[NV]}),n})(),vj=(()=>{class n{constructor(e,r,i,l){this.afs=e,this.afAuth=r,this.router=i,this.ngZone=l,this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,r){return this.afAuth.signInWithEmailAndPassword(e,r)}SignUp(e,r){return this.afAuth.createUserWithEmailAndPassword(e,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null==this.userData&&(this.userData=e),null!==e}GoogleAuth(){return this.AuthLogin(new i1.N).then(e=>{e&&this.router.navigate(["dashboard"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),window.location.reload()})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(NV),a.LFG(jg),a.LFG(ms),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var bj=B(9105);function Cs(n,t,e,r){return(0,bj.m)(e)&&(r=e,e=void 0),r?Cs(n,t,e).pipe((0,ct.U)(i=>(0,Ns.k)(i)?r(...i):r(i))):new zn.y(i=>{xV(n,t,function(d){i.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},i,e)})}function xV(n,t,e,r,i){let l;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const d=n;n.addEventListener(t,e,i),l=()=>d.removeEventListener(t,e,i)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const d=n;n.on(t,e),l=()=>d.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const d=n;n.addListener(t,e),l=()=>d.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let d=0,f=n.length;d<f;d++)xV(n[d],t,e,r,i)}r.add(l)}function Tj(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}class Dj{call(t,e){return e.subscribe(new Ij(t))}}class Ij extends Eh{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let r=0;r<e&&!this.hasFirst;r++){const l=Xn(this,t[r],void 0,r);this.subscriptions&&this.subscriptions.push(l),this.add(l)}this.observables=null}}notifyNext(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(let i=0;i<this.subscriptions.length;i++)if(i!==r){let l=this.subscriptions[i];l.unsubscribe(),this.remove(l)}this.subscriptions=null}this.destination.next(e)}}var Aj=B(8640);new zn.y(Aj.Z);var _S=B(377);function yS(...n){const t=n[n.length-1];return"function"==typeof t&&n.pop(),(0,bu.n)(n,void 0).lift(new Sj(t))}class Sj{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Nj(t,this.resultSelector))}}class Nj extends cr.L{constructor(t,e,r=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;(0,Ns.k)(t)?e.push(new Mj(t)):e.push("function"==typeof t[_S.hZ]?new xj(t[_S.hZ]()):new Rj(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let r=0;r<e;r++){let i=t[r];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,r=this.destination;for(let d=0;d<e;d++){let f=t[d];if("function"==typeof f.hasValue&&!f.hasValue())return}let i=!1;const l=[];for(let d=0;d<e;d++){let f=t[d],m=f.next();if(f.hasCompleted()&&(i=!0),m.done)return void r.complete();l.push(m.value)}this.resultSelector?this._tryresultSelector(l):r.next(l),i&&r.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}class xj{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class Mj{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[_S.hZ](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Rj extends Yi.Ds{constructor(t,e,r){super(t),this.parent=e,this.observable=r,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[_S.hZ](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return(0,Yi.ft)(this.observable,new Yi.IY(this))}}function ei(n){return t=>t.lift(new Pj(n))}class Pj{constructor(t){this.notifier=t}call(t,e){const r=new Oj(t),i=(0,Yi.ft)(this.notifier,new Yi.IY(r));return i&&!r.seenValue?(r.add(i),e.subscribe(r)):r}}class Oj extends Yi.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}B(1593);var Hj=B(1555);function vS(n,t){return new zn.y(e=>{const r=n.length;if(0===r)return void e.complete();const i=new Array(r);let l=0,d=0;for(let f=0;f<r;f++){const m=(0,Qt.D)(n[f]);let b=!1;e.add(m.subscribe({next:T=>{b||(b=!0,d++),i[f]=T},error:T=>e.error(T),complete:()=>{l++,(l===r||!b)&&(d===r&&e.next(t?t.reduce((T,A,M)=>(T[A]=i[M],T),{}):i),e.complete())}}))}})}let FV=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq))},n.\u0275dir=a.lG2({type:n}),n})(),jm=(()=>{class n extends FV{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();const Es=new a.OlP("NgValueAccessor"),Gj={provide:Es,useExisting:(0,a.Gpc)(()=>YP),multi:!0};let YP=(()=>{class n extends jm{writeValue(e){this.setProperty("checked",e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.checked)})("blur",function(){return r.onTouched()})},features:[a._Bn([Gj]),a.qOj]}),n})();const qj={provide:Es,useExisting:(0,a.Gpc)(()=>bS),multi:!0},Zj=new a.OlP("CompositionEventMode");let bS=(()=>{class n extends FV{constructor(e,r,i){super(e,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(Zj,8))},n.\u0275dir=a.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&a.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[a._Bn([qj]),a.qOj]}),n})();const Ts=new a.OlP("NgValidators"),cp=new a.OlP("NgAsyncValidators");function WV(n){return null!=n}function ZV(n){const t=(0,a.QGY)(n)?(0,Qt.D)(n):n;return(0,a.CqO)(t),t}function zV(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function YV(n,t){return t.map(e=>e(n))}function KV(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function KP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(WV);return 0==t.length?null:function(e){return zV(YV(e,t))}}(KV(n)):null}function JP(n){return null!=n?function(n){if(!n)return null;const t=n.filter(WV);return 0==t.length?null:function(e){return function(...n){if(1===n.length){const t=n[0];if((0,Ns.k)(t))return vS(t,null);if((0,Hj.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return vS(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return vS(n=1===n.length&&(0,Ns.k)(n[0])?n[0]:n,null).pipe((0,ct.U)(e=>t(...e)))}return vS(n,null)}(YV(e,t).map(ZV)).pipe((0,ct.U)(zV))}}(KV(n)):null}function XV(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function QP(n){return n?Array.isArray(n)?n:[n]:[]}function wS(n,t){return Array.isArray(n)?n.includes(t):n===t}function nB(n,t){const e=QP(t);return QP(n).forEach(i=>{wS(e,i)||e.push(i)}),e}function rB(n,t){return QP(t).filter(e=>!wS(n,e))}let iB=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=KP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=JP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n}),n})(),ao=(()=>{class n extends iB{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,features:[a.qOj]}),n})();class hp extends iB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let oB=(()=>{class n extends class{constructor(t){this._cd=t}is(t){var e,r,i;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[t])}}{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(hp,2))},n.\u0275dir=a.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&a.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[a.qOj]}),n})();function eE(n,t){(function(n,t){const e=function(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(XV(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(XV(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();DS(t._rawValidators,i),DS(t._rawAsyncValidators,i)})(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aB(n,t)})}(n,t),function(n,t){const e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aB(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function DS(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function aB(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function AS(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const tE="VALID",SS="INVALID",t0="PENDING",nE="DISABLED";function iO(n){return(oO(n)?n.validators:n)||null}function cB(n){return Array.isArray(n)?KP(n):n||null}function sO(n,t){return(oO(t)?t.asyncValidators:n)||null}function dB(n){return Array.isArray(n)?JP(n):n||null}function oO(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class aO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=cB(this._rawValidators),this._composedAsyncValidatorFn=dB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===tE}get invalid(){return this.status===SS}get pending(){return this.status==t0}get disabled(){return this.status===nE}get enabled(){return this.status!==nE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=cB(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=dB(t)}addValidators(t){this.setValidators(nB(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(nB(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rB(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rB(t,this._rawAsyncValidators))}hasValidator(t){return wS(this._rawValidators,t)}hasAsyncValidator(t){return wS(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=t0,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=nE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=tE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===tE||this.status===t0)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nE:tE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=t0,this._hasOwnPendingAsyncValidator=!0;const e=ZV(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(i=>{r=r instanceof lO?r.controls.hasOwnProperty(i)?r.controls[i]:null:r instanceof lG&&r.at(i)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?nE:this.errors?SS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(t0)?t0:this._anyControlsHaveStatus(SS)?SS:tE}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){oO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class NS extends aO{constructor(t=null,e,r){super(iO(e),sO(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){AS(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){AS(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class lO extends aO{constructor(t,e,r){super(iO(e),sO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof NS?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,l)=>{r=e(r,i,l)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class lG extends aO{constructor(t,e,r){super(iO(e),sO(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,i)=>{this._throwIfControlMissing(i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof NS?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const dG={provide:hp,useExisting:(0,a.Gpc)(()=>cO)},pB=(()=>Promise.resolve(null))();let cO=(()=>{class n extends hp{constructor(e,r,i,l){super(),this.control=new NS,this._registered=!1,this.update=new a.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function(n,t){if(!t)return null;let e,r,i;return Array.isArray(t),t.forEach(l=>{l.constructor===bS?e=l:function(n){return Object.getPrototypeOf(n.constructor)===jm}(l)?r=l:i=l}),i||r||e||null}(0,l)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),function(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,t){return[...t.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){eE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){pB.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,i=""===r||r&&"false"!==r;pB.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(ao,9),a.Y36(Ts,10),a.Y36(cp,10),a.Y36(Es,10))},n.\u0275dir=a.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([dG]),a.qOj,a.TTD]}),n})(),mB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})();const CG={provide:Es,useExisting:(0,a.Gpc)(()=>xS),multi:!0};function CB(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let xS=(()=>{class n extends jm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=this._getOptionId(e);null==r&&this.setProperty("selectedIndex",-1);const i=CB(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([CG]),a.qOj]}),n})(),gO=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(CB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(xS,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const TG={provide:Es,useExisting:(0,a.Gpc)(()=>mO),multi:!0};function EB(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let mO=(()=>{class n extends jm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const i=e.map(l=>this._getOptionId(l));r=(l,d)=>{l._setSelected(i.indexOf(d.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const i=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let d=0;d<l.length;d++){const f=l.item(d),m=this._getOptionValue(f.value);i.push(m)}}else{const l=r.options;for(let d=0;d<l.length;d++){const f=l.item(d);if(f.selected){const m=this._getOptionValue(f.value);i.push(m)}}}this.value=i,e(i)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=a.n5z(n)))(r||n)}}(),n.\u0275dir=a.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,r){1&e&&a.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[a._Bn([TG]),a.qOj]}),n})(),_O=(()=>{class n{constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(EB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(EB(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.Qsj),a.Y36(mO,9))},n.\u0275dir=a.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const SG={provide:Ts,useExisting:(0,a.Gpc)(()=>MS),multi:!0};let MS=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(e){this._required=null!=e&&!1!==e&&"false"!=`${e}`,this._onChange&&this._onChange()}validate(e){return this.required?function(n){return function(n){return null==n||0===n.length}(n.value)?{required:!0}:null}(e):null}registerOnValidatorChange(e){this._onChange=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=a.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(e,r){2&e&&a.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[a._Bn([SG])]}),n})(),kB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[mB]]}),n})(),PB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[kB]}),n})();const n0=["*"],w4=["dialog"];function fp(n){return null!=n}function s0(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(n){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(n))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const LB={animation:!0,transitionTimerDelayMs:5};let as=(()=>{class n{constructor(){this.animation=LB.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})();const k8=()=>{},{transitionTimerDelayMs:P8}=LB,sE=new Map,$i=(n,t,e,r)=>{let i=r.context||{};const l=sE.get(t);if(l)switch(r.runningTransition){case"continue":return ui.E;case"stop":n.run(()=>l.transition$.complete()),i=Object.assign(l.context,i),sE.delete(t)}const d=e(t,r.animation,i)||k8;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>d()),(0,dt.of)(void 0).pipe(function(n){return t=>new zn.y(e=>t.subscribe(d=>n.run(()=>e.next(d)),d=>n.run(()=>e.error(d)),()=>n.run(()=>e.complete())))}(n));const f=new Tn.xQ,m=new Tn.xQ,b=f.pipe(function(...n){return t=>qs(t,(0,dt.of)(...n))}(!0));sE.set(t,{transition$:f,complete:()=>{m.next(),m.complete()},context:i});const T=function(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const A=Cs(t,"transitionend").pipe(ei(b),Yn(({target:O})=>O===t));(function(...n){if(1===n.length){if(!(0,Ns.k)(n[0]))return n[0];n=n[0]}return(0,bu.n)(n,void 0).lift(new Dj)})(function(n=0,t,e){let r=-1;return(0,M_.k)(t)?r=Number(t)<1?1:Number(t):(0,Wo.K)(t)&&(e=t),(0,Wo.K)(e)||(e=Lu.P),new zn.y(i=>{const l=(0,M_.k)(n)?n:+n-e.now();return e.schedule(Tj,l,{index:0,period:r,subscriber:i})})}(T+P8).pipe(ei(b)),A,m).pipe(ei(b)).subscribe(()=>{sE.delete(t),n.run(()=>{d(),f.next(),f.complete()})})}),f.asObservable()};var mn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(mn||(mn={})),mn))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const eU=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function tU(n){const t=Array.from(n.querySelectorAll(eU)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let r,i={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))r=t.getBoundingClientRect(),r={top:r.top,bottom:r.bottom,left:r.left,right:r.right,height:r.height,width:r.width};else{const l=this.offsetParent(t);r=this.offset(t,!1),l!==document.documentElement&&(i=this.offset(l,!1)),i.top+=l.clientTop,i.left+=l.clientLeft}return r.top-=i.top,r.bottom-=i.top,r.left-=i.left,r.right-=i.left,e&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),r}offset(t,e=!0){const r=t.getBoundingClientRect(),i_top=window.pageYOffset-document.documentElement.clientTop,i_left=window.pageXOffset-document.documentElement.clientLeft;let l={height:r.height||t.offsetHeight,width:r.width||t.offsetWidth,top:r.top+i_top,bottom:r.bottom+i_top,left:r.left+i_left,right:r.right+i_left};return e&&(l.height=Math.round(l.height),l.width=Math.round(l.width),l.top=Math.round(l.top),l.bottom=Math.round(l.bottom),l.left=Math.round(l.left),l.right=Math.round(l.right)),l}positionElements(t,e,r,i){const[l="top",d="center"]=r.split("-"),f=i?this.offset(t,!1):this.position(t,!1),m=this.getAllStyles(e),b=parseFloat(m.marginTop),T=parseFloat(m.marginBottom),A=parseFloat(m.marginLeft),M=parseFloat(m.marginRight);let O=0,q=0;switch(l){case"top":O=f.top-(e.offsetHeight+b+T);break;case"bottom":O=f.top+f.height;break;case"left":q=f.left-(e.offsetWidth+A+M);break;case"right":q=f.left+f.width}switch(d){case"top":O=f.top;break;case"bottom":O=f.top+f.height-e.offsetHeight;break;case"left":q=f.left;break;case"right":q=f.left+f.width-e.offsetWidth;break;case"center":"top"===l||"bottom"===l?q=f.left+f.width/2-e.offsetWidth/2:O=f.top+f.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(q)}px, ${Math.round(O)}px)`;const ue=e.getBoundingClientRect(),be=document.documentElement,Ge=window.innerHeight||be.clientHeight,Ke=window.innerWidth||be.clientWidth;return ue.left>=0&&ue.top>=0&&ue.right<=Ke&&ue.bottom<=Ge}},new Date(1882,10,12),new Date(2174,10,25);let xO=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(as))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(as))},token:n,providedIn:"root"}),n})();class zm{constructor(t,e,r){this.nodes=t,this.viewRef=e,this.componentRef=r}}const M5=()=>{};let mU=(()=>{class n{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):M5}_adjustBody(e){const r=this._document.body,i=r.style.paddingRight,l=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${l+e}px`,()=>r.style["padding-right"]=i}_isPresent(e){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(e);const i=e.getBoundingClientRect().width-e.clientWidth;return r.removeChild(e),i}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(he))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(he))},token:n,providedIn:"root"}),n})(),R5=(()=>{class n{constructor(e,r){this._el=e,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{$i(this._zone,this._el.nativeElement,(e,r)=>{r&&s0(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return $i(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,r){2&e&&(a.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),a.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,r){},encapsulation:2}),n})();class _U{close(t){}dismiss(t){}}class k5{constructor(t,e,r,i){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Tn.xQ,this._dismissed=new Tn.xQ,this._hidden=new Tn.xQ,t.instance.dismissEvent.subscribe(l=>{this.dismiss(l)}),this.result=new Promise((l,d)=>{this._resolve=l,this._reject=d}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ei(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ei(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(r=>{!1!==r&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,dt.of)(void 0);t.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),yS(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var dE=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(dE||(dE={})),dE))();let P5=(()=>{class n{constructor(e,r,i){this._document=e,this._elRef=r,this._zone=i,this._closed$=new Tn.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new a.vpe,this.shown=new Tn.xQ,this.hidden=new Tn.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(_i(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,r={animation:this.animation,runningTransition:"stop"},d=yS($i(this._zone,e,()=>e.classList.remove("show"),r),$i(this._zone,this._dialogEl.nativeElement,()=>{},r));return d.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),d}_show(){const e={animation:this.animation,runningTransition:"continue"};yS($i(this._zone,this._elRef.nativeElement,(l,d)=>{d&&s0(l),l.classList.add("show")},e),$i(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{Cs(e,"keydown").pipe(ei(this._closed$),Yn(i=>i.which===mn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(dE.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Cs(this._dialogEl.nativeElement,"mousedown").pipe(ei(this._closed$),(0,hr.b)(()=>r=!1),sr(()=>Cs(e,"mouseup").pipe(ei(this._closed$),_i(1))),Yn(({target:i})=>e===i)).subscribe(()=>{r=!0}),Cs(e,"click").pipe(ei(this._closed$)).subscribe(({target:i})=>{e===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(dE.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const r=e.querySelector("[ngbAutofocus]"),i=tU(e)[0];(r||i||e).focus()}}_restoreFocus(){const e=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&e.contains(r)?r:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&$i(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(he),a.Y36(a.SBq),a.Y36(a.R0b))},n.\u0275cmp=a.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,r){if(1&e&&a.Gf(w4,7),2&e){let i;a.iGM(i=a.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,r){2&e&&(a.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),a.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),a.ekj("fade",r.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:n0,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,r){1&e&&(a.F$t(),a.TgZ(0,"div",0,1),a.TgZ(2,"div",2),a.Hsn(3),a.qZA(),a.qZA()),2&e&&a.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),n})(),yU=(()=>{class n{constructor(e,r,i,l,d,f){this._applicationRef=e,this._injector=r,this._document=i,this._scrollBar=l,this._rendererFactory=d,this._ngZone=f,this._activeWindowCmptHasChanged=new Tn.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new a.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const m=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,r=!1)=>{n.runOutsideAngular(()=>{const i=Cs(t,"focusin").pipe(ei(e),(0,ct.U)(l=>l.target));Cs(t,"keydown").pipe(ei(e),Yn(l=>l.which===mn.Tab),W0(i)).subscribe(([l,d])=>{const[f,m]=tU(t);(d===f||d===t)&&l.shiftKey&&(m.focus(),l.preventDefault()),d===m&&!l.shiftKey&&(f.focus(),l.preventDefault())}),r&&Cs(t,"click").pipe(ei(e),W0(i),(0,ct.U)(l=>l[1])).subscribe(l=>l.focus())})})(this._ngZone,m.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(m.location.nativeElement)}})}open(e,r,i,l){const d=l.container instanceof HTMLElement?l.container:fp(l.container)?this._document.querySelector(l.container):this._document.body,f=this._rendererFactory.createRenderer(null,null),m=this._scrollBar.compensate(),b=()=>{this._modalRefs.length||(f.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!d)throw new Error(`The specified modal container "${l.container||"body"}" was not found in the DOM.`);const T=new _U,A=this._getContentRef(e,l.injector||r,i,T,l);let M=!1!==l.backdrop?this._attachBackdrop(e,d):void 0,O=this._attachWindowComponent(e,d,A),q=new k5(O,A,M,l.beforeDismiss);return this._registerModalRef(q),this._registerWindowCmpt(O),q.result.then(m,m),q.result.then(b,b),T.close=ue=>{q.close(ue)},T.dismiss=ue=>{q.dismiss(ue)},this._applyWindowOptions(O.instance,l),1===this._modalRefs.length&&f.addClass(this._document.body,"modal-open"),M&&M.instance&&(this._applyBackdropOptions(M.instance,l),M.changeDetectorRef.detectChanges()),O.changeDetectorRef.detectChanges(),q}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(r=>r.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,r){let l=e.resolveComponentFactory(R5).create(this._injector);return this._applicationRef.attachView(l.hostView),r.appendChild(l.location.nativeElement),l}_attachWindowComponent(e,r,i){let d=e.resolveComponentFactory(P5).create(this._injector,i.nodes);return this._applicationRef.attachView(d.hostView),r.appendChild(d.location.nativeElement),d}_applyWindowOptions(e,r){this._windowAttributes.forEach(i=>{fp(r[i])&&(e[i]=r[i])})}_applyBackdropOptions(e,r){this._backdropAttributes.forEach(i=>{fp(r[i])&&(e[i]=r[i])})}_getContentRef(e,r,i,l,d){return i?i instanceof a.Rgc?this._createFromTemplateRef(i,l):function(n){return"string"==typeof n}(i)?this._createFromString(i):this._createFromComponent(e,r,i,l,d):new zm([])}_createFromTemplateRef(e,r){const l=e.createEmbeddedView({$implicit:r,close(d){r.close(d)},dismiss(d){r.dismiss(d)}});return this._applicationRef.attachView(l),new zm([l.rootNodes],l)}_createFromString(e){const r=this._document.createTextNode(`${e}`);return new zm([[r]])}_createFromComponent(e,r,i,l,d){const f=e.resolveComponentFactory(i),m=a.zs3.create({providers:[{provide:_U,useValue:l}],parent:r}),b=f.create(m),T=b.location.nativeElement;return d.scrollable&&T.classList.add("component-host-scrollable"),this._applicationRef.attachView(b.hostView),new zm([[T]],b.hostView,b)}_setAriaHidden(e){const r=e.parentElement;r&&e!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==e&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,r)=>{e?r.setAttribute("aria-hidden",e):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const r=()=>{const i=this._modalRefs.indexOf(e);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(r,r)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const r=this._windowCmpts.indexOf(e);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a.z2F),a.LFG(a.zs3),a.LFG(he),a.LFG(mU),a.LFG(a.FYo),a.LFG(a.R0b))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a.z2F),a.LFG(a.gxx),a.LFG(he),a.LFG(mU),a.LFG(a.FYo),a.LFG(a.R0b))},token:n,providedIn:"root"}),n})(),vU=(()=>{class n{constructor(e,r,i,l){this._moduleCFR=e,this._injector=r,this._modalStack=i,this._config=l}open(e,r={}){const i=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,e,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(yU),a.LFG(xO))},n.\u0275prov=a.Yz7({factory:function(){return new n(a.LFG(a._Vd),a.LFG(a.gxx),a.LFG(yU),a.LFG(xO))},token:n,providedIn:"root"}),n})();new a.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});class ZU{}class zU{}class ih{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const i=e.slice(0,r),l=i.toLowerCase(),d=e.slice(r+1).trim();this.maybeSetNormalizedName(i,l),this.headers.has(l)?this.headers.get(l).push(d):this.headers.set(l,[d])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ih?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ih;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ih?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":const l=t.value;if(l){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===l.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class yq{encodeKey(t){return YU(t)}encodeValue(t){return YU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const bq=/%(\d[a-f0-9])/gi,wq={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function YU(n){return encodeURIComponent(n).replace(bq,(t,e)=>{var r;return null!==(r=wq[e])&&void 0!==r?r:t})}function KU(n){return`${n}`}class gp{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new yq,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const l=i.indexOf("="),[d,f]=-1==l?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,l)),t.decodeValue(i.slice(l+1))],m=e.get(d)||[];m.push(f),e.set(d,m)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(l=>{e.push({param:r,value:l,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gp({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(KU(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(KU(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Cq{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function JU(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function QU(n){return"undefined"!=typeof Blob&&n instanceof Blob}function XU(n){return"undefined"!=typeof FormData&&n instanceof FormData}class hE{constructor(t,e,r,i){let l;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,l=i):l=r,l&&(this.reportProgress=!!l.reportProgress,this.withCredentials=!!l.withCredentials,l.responseType&&(this.responseType=l.responseType),l.headers&&(this.headers=l.headers),l.context&&(this.context=l.context),l.params&&(this.params=l.params)),this.headers||(this.headers=new ih),this.context||(this.context=new Cq),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new gp,this.urlWithParams=e}serializeBody(){return null===this.body?null:JU(this.body)||QU(this.body)||XU(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||XU(this.body)?null:QU(this.body)?this.body.type||null:JU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,i=t.url||this.url,l=t.responseType||this.responseType,d=void 0!==t.body?t.body:this.body,f=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,m=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let b=t.headers||this.headers,T=t.params||this.params;const A=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(b=Object.keys(t.setHeaders).reduce((M,O)=>M.set(O,t.setHeaders[O]),b)),t.setParams&&(T=Object.keys(t.setParams).reduce((M,O)=>M.set(O,t.setParams[O]),T)),new hE(r,i,d,{params:T,headers:b,context:A,reportProgress:m,responseType:l,withCredentials:f})}}var Di=(()=>((Di=Di||{})[Di.Sent=0]="Sent",Di[Di.UploadProgress=1]="UploadProgress",Di[Di.ResponseHeader=2]="ResponseHeader",Di[Di.DownloadProgress=3]="DownloadProgress",Di[Di.Response=4]="Response",Di[Di.User=5]="User",Di))();class OO{constructor(t,e=200,r="OK"){this.headers=t.headers||new ih,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class FO extends OO{constructor(t={}){super(t),this.type=Di.ResponseHeader}clone(t={}){return new FO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class GS extends OO{constructor(t={}){super(t),this.type=Di.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new GS({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class e3 extends OO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function LO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let t3=(()=>{class n{constructor(e){this.handler=e}request(e,r,i={}){let l;if(e instanceof hE)l=e;else{let m,b;m=i.headers instanceof ih?i.headers:new ih(i.headers),i.params&&(b=i.params instanceof gp?i.params:new gp({fromObject:i.params})),l=new hE(e,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const d=(0,dt.of)(l).pipe(Eu(m=>this.handler.handle(m)));if(e instanceof hE||"events"===i.observe)return d;const f=d.pipe(Yn(m=>m instanceof GS));switch(i.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return f.pipe((0,ct.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,ct.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,ct.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));case"json":default:return f.pipe((0,ct.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new gp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,LO(i,r))}post(e,r,i={}){return this.request("POST",e,LO(i,r))}put(e,r,i={}){return this.request("PUT",e,LO(i,r))}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(ZU))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();class n3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const r3=new a.OlP("HTTP_INTERCEPTORS");let Dq=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const Iq=/^\)\]\}',?\n/;let i3=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new zn.y(r=>{const i=this.xhrFactory.build();if(i.open(e.method,e.urlWithParams),e.withCredentials&&(i.withCredentials=!0),e.headers.forEach((O,q)=>i.setRequestHeader(O,q.join(","))),e.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const O=e.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(e.responseType){const O=e.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const l=e.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const O=1223===i.status?204:i.status,q=i.statusText||"OK",ue=new ih(i.getAllResponseHeaders()),be=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||e.url;return d=new FO({headers:ue,status:O,statusText:q,url:be}),d},m=()=>{let{headers:O,status:q,statusText:ue,url:be}=f(),Ge=null;204!==q&&(Ge=void 0===i.response?i.responseText:i.response),0===q&&(q=Ge?200:0);let Ke=q>=200&&q<300;if("json"===e.responseType&&"string"==typeof Ge){const it=Ge;Ge=Ge.replace(Iq,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(ot){Ge=it,Ke&&(Ke=!1,Ge={error:ot,text:Ge})}}Ke?(r.next(new GS({body:Ge,headers:O,status:q,statusText:ue,url:be||void 0})),r.complete()):r.error(new e3({error:Ge,headers:O,status:q,statusText:ue,url:be||void 0}))},b=O=>{const{url:q}=f(),ue=new e3({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:q||void 0});r.error(ue)};let T=!1;const A=O=>{T||(r.next(f()),T=!0);let q={type:Di.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(q.total=O.total),"text"===e.responseType&&!!i.responseText&&(q.partialText=i.responseText),r.next(q)},M=O=>{let q={type:Di.UploadProgress,loaded:O.loaded};O.lengthComputable&&(q.total=O.total),r.next(q)};return i.addEventListener("load",m),i.addEventListener("error",b),i.addEventListener("timeout",b),i.addEventListener("abort",b),e.reportProgress&&(i.addEventListener("progress",A),null!==l&&i.upload&&i.upload.addEventListener("progress",M)),i.send(l),r.next({type:Di.Sent}),()=>{i.removeEventListener("error",b),i.removeEventListener("abort",b),i.removeEventListener("load",m),i.removeEventListener("timeout",b),e.reportProgress&&(i.removeEventListener("progress",A),null!==l&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(Ec))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})();const VO=new a.OlP("XSRF_COOKIE_NAME"),BO=new a.OlP("XSRF_HEADER_NAME");class s3{}let Sq=(()=>{class n{constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gr(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(he),a.LFG(a.Lbi),a.LFG(VO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),UO=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const i=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(e);const l=this.tokenService.getToken();return null!==l&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,l)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(s3),a.LFG(BO))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),Nq=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(r3,[]);this.chain=r.reduceRight((i,l)=>new n3(i,l),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(zU),a.LFG(a.zs3))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac}),n})(),xq=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:UO,useClass:Dq}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:VO,useValue:e.cookieName}:[],e.headerName?{provide:BO,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[UO,{provide:r3,useExisting:UO,multi:!0},{provide:s3,useClass:Sq},{provide:VO,useValue:"XSRF-TOKEN"},{provide:BO,useValue:"X-XSRF-TOKEN"}]}),n})(),Mq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[t3,{provide:ZU,useClass:Nq},i3,{provide:zU,useExisting:i3}],imports:[[xq.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const Rq=["modalLogin"],kq=["modalConfiguracaoRobo"],Pq=["modalBinanceApiKey"],Oq=["modalAlertaEntrada"];function Fq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",13),a.TgZ(1,"button",14),a.NdJ("click",function(){return a.CHM(e),a.oxw().novoSinal()}),a._uU(2,"Novo sinal"),a.qZA(),a.qZA()}}function Lq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div"),a.TgZ(1,"button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().openModalConfiguracaoRobo()}),a._UZ(2,"i",16),a.qZA(),a.TgZ(3,"button",17),a.NdJ("click",function(){return a.CHM(e),a.oxw().AuthService.SignOut()}),a._UZ(4,"i",18),a.qZA(),a.qZA()}}function Vq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",30),a.TgZ(1,"div",31),a.TgZ(2,"input",32),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.valor=i}),a.qZA(),a.qZA(),a.TgZ(3,"div",31),a.TgZ(4,"input",33),a.NdJ("ngModelChange",function(i){return a.CHM(e).$implicit.descricao=i}),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(2),a.Q6J("ngModel",e.valor),a.xp6(2),a.Q6J("ngModel",e.descricao)}}function Bq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",19),a.TgZ(1,"div",20),a.TgZ(2,"label",21),a._uU(3,"Data"),a.qZA(),a.TgZ(4,"input",22),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.data=i}),a.qZA(),a.qZA(),a.TgZ(5,"div",20),a.TgZ(6,"label",21),a._uU(7,"Moeda"),a.qZA(),a.TgZ(8,"input",23),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.moeda=i}),a.qZA(),a.qZA(),a.TgZ(9,"div",20),a.TgZ(10,"label",21),a._uU(11,"Tipo"),a.qZA(),a.TgZ(12,"select",24),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().sinalModel.tipo=i}),a.TgZ(13,"option",25),a._uU(14,"LONG"),a.qZA(),a.TgZ(15,"option",26),a._uU(16,"SHORT"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",20),a.TgZ(18,"label",21),a._uU(19,"Entradas"),a.qZA(),a.YNc(20,Vq,5,2,"div",27),a.qZA(),a.TgZ(21,"div",20),a.TgZ(22,"button",28),a.NdJ("click",function(){return a.CHM(e),a.oxw().salvarEntrada()}),a._uU(23,"Salvar"),a.qZA(),a.TgZ(24,"button",29),a.NdJ("click",function(){return a.CHM(e),a.oxw().showFormNovoSinal=!1}),a._uU(25,"Cancelar"),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngModel",e.sinalModel.data),a.xp6(4),a.Q6J("ngModel",e.sinalModel.moeda),a.xp6(4),a.Q6J("ngModel",e.sinalModel.tipo),a.xp6(8),a.Q6J("ngForOf",e.sinalModel.entradas)}}function Uq(n,t){1&n&&a._UZ(0,"i",52)}function $q(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function Hq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",53),a.TgZ(1,"span",54),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function jq(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function Gq(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,jq,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function qq(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function Wq(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.qZA(),a.YNc(4,qq,2,1,"ng-container",3),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.Oqu(null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function Zq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,Gq,5,2,"div",55),a.TgZ(2,"div"),a.TgZ(3,"i",56),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,Wq,5,2,"div",55),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function zq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",38),a.TgZ(1,"div",39),a.TgZ(2,"span",40),a.TgZ(3,"i",41),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"h5",42),a.YNc(5,Uq,1,0,"i",43),a.TgZ(6,"i",44),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"h5"),a.YNc(10,$q,2,1,"span",3),a.qZA(),a.TgZ(11,"h6",45),a._uU(12),a.ALo(13,"date"),a.qZA(),a.YNc(14,Hq,4,1,"div",46),a.TgZ(15,"div"),a.TgZ(16,"ul",47),a.YNc(17,Zq,8,5,"li",48),a.qZA(),a.qZA(),a.TgZ(18,"div"),a.TgZ(19,"span",40),a.TgZ(20,"button",49),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(21,"i",50),a.qZA(),a.TgZ(22,"button",17),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(23,"i",51),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(2),a.Q6J("ngIf",r.sinaisCompradosMap[e.id]),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),a.xp6(2),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(13,11,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function Yq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"h3",34),a._uU(2),a.TgZ(3,"button",35),a.NdJ("click",function(){return a.CHM(e),a.MAs(5).classList.toggle("hidden")}),a.qZA(),a.qZA(),a.TgZ(4,"div",30,36),a.YNc(6,zq,24,14,"div",37),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(2),a.hij("Favoritados (",e.sinaisPinnedList.length,") "),a.xp6(4),a.Q6J("ngForOf",e.sinaisPinnedList)}}function Kq(n,t){1&n&&a._UZ(0,"i",52)}function Jq(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function Qq(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",53),a.TgZ(1,"span",54),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function Xq(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function eW(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,Xq,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij(" ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function tW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function nW(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,tW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function rW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,eW,5,2,"div",55),a.TgZ(2,"div"),a.TgZ(3,"i",56),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,nW,5,2,"div",55),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function iW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",61),a.TgZ(1,"div",39),a.TgZ(2,"span",40),a.TgZ(3,"i",41),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"h5",42),a.YNc(5,Kq,1,0,"i",43),a.TgZ(6,"i",44),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(7,"strong"),a._uU(8),a.qZA(),a.qZA(),a.TgZ(9,"h5"),a.YNc(10,Jq,2,1,"span",3),a.qZA(),a.TgZ(11,"h6",45),a._uU(12),a.ALo(13,"date"),a.qZA(),a.YNc(14,Qq,4,1,"div",46),a.TgZ(15,"div"),a.TgZ(16,"ul",47),a.YNc(17,rW,8,5,"li",48),a.qZA(),a.qZA(),a.TgZ(18,"div"),a.TgZ(19,"span",40),a.TgZ(20,"button",49),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(21,"i",50),a.qZA(),a.TgZ(22,"button",17),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(23,"i",51),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short")("id",e.id),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(2),a.Q6J("ngIf",r.sinaisCompradosMap[e.id]),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock text-danger":"fa-unlock"),a.xp6(2),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(13,12,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function sW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"h3",34),a._uU(2),a.TgZ(3,"button",35),a.NdJ("click",function(){return a.CHM(e),a.MAs(5).classList.toggle("hidden")}),a.qZA(),a.qZA(),a.TgZ(4,"div",30,59),a.YNc(6,iW,24,15,"div",60),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(2),a.hij("Sinais na entrada (",e.watchersEntradaList.length,") "),a.xp6(4),a.Q6J("ngForOf",e.watchersEntradaList)}}function oW(n,t){if(1&n&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&n){const e=a.oxw().$implicit,r=a.oxw(2);a.xp6(1),a.hij("$: ",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price,"")}}function aW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",53),a.TgZ(1,"span",54),a.NdJ("click",function(){a.CHM(e);const i=a.oxw().$implicit;return a.oxw(2).copyEntry(i.sugestao)}),a._uU(2),a.qZA(),a._UZ(3,"br"),a.qZA()}if(2&n){const e=a.oxw().$implicit;a.xp6(2),a.hij(" Sugest\xe3o entrada ",e.sugestao,"")}}function lW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function uW(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,lW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function cW(n,t){if(1&n&&(a.ynx(0),a._uU(1),a.BQk()),2&n){const e=a.oxw(3).$implicit;a.xp6(1),a.hij(" ",":: "+e.priceCoinPercentage+"%"," ")}}function dW(n,t){if(1&n&&(a.TgZ(0,"div",57),a._UZ(1,"i",58),a.TgZ(2,"small"),a._uU(3),a.YNc(4,cW,2,1,"ng-container",3),a.qZA(),a.qZA()),2&n){const e=a.oxw(2).$implicit,r=a.oxw(2);a.xp6(3),a.hij("",null==r.PriceCoinMap[e.moeda]?null:r.PriceCoinMap[e.moeda].price," "),a.xp6(1),a.Q6J("ngIf",e.priceCoinPercentage)}}function hW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"li"),a.YNc(1,uW,5,2,"div",55),a.TgZ(2,"div"),a.TgZ(3,"i",56),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.oxw().$implicit;return a.oxw(2).toggleAlcancado(d,l)}),a.qZA(),a.TgZ(4,"span",54),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(3).copyEntry(l.valor)}),a._uU(5),a.qZA(),a.qZA(),a.YNc(6,dW,5,2,"div",55),a._UZ(7,"div"),a.qZA()}if(2&n){const e=t.$implicit,r=t.index,i=a.oxw().$implicit,l=a.oxw(2);a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&i.indexPricePosition===r),a.xp6(2),a.Q6J("ngClass",e.alcancado?"fa-flag text-success":"fa-caret-right"),a.xp6(2),a.AsE(" ",e.valor," - ",e.descricao," "),a.xp6(1),a.Q6J("ngIf",l.PriceCoinMap[i.moeda]&&r==i.entradas.length-1&&("LONG"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)>l.castPrice(e.valor)||"SHORT"===i.tipo&&l.castPrice(null==l.PriceCoinMap[i.moeda]?null:l.PriceCoinMap[i.moeda].price)<l.castPrice(e.valor)))}}function fW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",38),a.TgZ(1,"div",39),a.TgZ(2,"span",40),a.TgZ(3,"i",41),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).togglePinWatcher(l)}),a.qZA(),a.qZA(),a.TgZ(4,"i",44),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw(2).toggleSinalBloqueado(l)}),a.qZA(),a.TgZ(5,"h5",42),a.TgZ(6,"strong"),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"h5"),a.YNc(9,oW,2,1,"span",3),a.qZA(),a.TgZ(10,"h6",45),a._uU(11),a.ALo(12,"date"),a.qZA(),a.YNc(13,aW,4,1,"div",46),a.TgZ(14,"div"),a.TgZ(15,"ul",47),a.YNc(16,hW,8,5,"li",48),a.qZA(),a.qZA(),a.TgZ(17,"div"),a.TgZ(18,"span",40),a.TgZ(19,"button",49),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).editarSinal(l,d)}),a._UZ(20,"i",50),a.qZA(),a.TgZ(21,"button",17),a.NdJ("click",function(){const i=a.CHM(e),l=i.$implicit,d=i.index;return a.oxw(2).excluirSinal(l,d)}),a._UZ(22,"i",51),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit,r=a.oxw(2);a.Q6J("ngClass","LONG"===e.tipo?"border-long":"border-short"),a.xp6(3),a.Q6J("ngClass",r.sinaisIDPinnedList.indexOf(e.id)>-1?"fa-star text-info":"fa-star-o"),a.xp6(1),a.Q6J("ngClass",r.configuracaoRobo.sinaisBloqueadosList&&r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id)>-1?"fa-lock":"fa-unlock"),a.xp6(3),a.Oqu(e.moeda),a.xp6(2),a.Q6J("ngIf",r.PriceCoinMap[e.moeda]),a.xp6(1),a.Q6J("ngClass","LONG"===e.tipo?"text-success":"text-danger"),a.xp6(1),a.AsE(" ",e.tipo," - ",a.xi3(12,10,e.data,"dd/MM/yyyy")," "),a.xp6(2),a.Q6J("ngIf",e.sugestao),a.xp6(3),a.Q6J("ngForOf",e.entradas)}}function pW(n,t){if(1&n&&(a.TgZ(0,"div",62),a.TgZ(1,"h3",34),a._uU(2,"Lista de Sinais"),a.qZA(),a.TgZ(3,"div",30),a.YNc(4,fW,23,13,"div",37),a.qZA(),a.qZA()),2&n){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.sinaisList)}}function gW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",64),a._uU(2,"Sign In"),a.qZA(),a.qZA(),a.TgZ(3,"div",65),a.TgZ(4,"div",5),a.TgZ(5,"div",5),a.TgZ(6,"div",5,66),a.TgZ(8,"div",67),a._UZ(9,"input",68,69),a.qZA(),a.TgZ(11,"div",67),a.TgZ(12,"label"),a._uU(13,"Password"),a.qZA(),a.TgZ(14,"div",70),a.TgZ(15,"input",71,72),a.NdJ("keydown",function(i){const d=a.CHM(e).$implicit,f=a.MAs(10),m=a.MAs(16);return a.oxw().submitSeach(i,f.value,m.value,d)}),a.qZA(),a.TgZ(17,"div",73),a.TgZ(18,"span",74),a.NdJ("click",function(){a.CHM(e);const i=a.oxw();return i.showPassword=!i.showPassword}),a._UZ(19,"i",75),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"div",67),a.TgZ(21,"button",76),a.NdJ("click",function(){const l=a.CHM(e).$implicit,d=a.MAs(10),f=a.MAs(16);return a.oxw().sigin(d.value,f.value,l)}),a._uU(22,"Login"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(15),a.Q6J("type",e.showPassword?"text":"password"),a.xp6(4),a.Q6J("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function mW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",77),a._uU(2,"Configura\xe7\xe3o dos rob\xf4s"),a.qZA(),a.TgZ(3,"button",78),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",79),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",65),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,66),a.TgZ(11,"div",67),a.TgZ(12,"label"),a._uU(13,"Valor entrada em USDT"),a.qZA(),a.TgZ(14,"input",80),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.valorEntradaUsdt=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",67),a.TgZ(16,"label"),a._uU(17,"M\xe1ximo de rob\xf4s ativos"),a.qZA(),a.TgZ(18,"input",81),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.maximoRobosAtivos=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",82),a.TgZ(20,"input",83),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().configuracaoRobo.ativo=i}),a.qZA(),a.TgZ(21,"label",84),a._uU(22," Ativo "),a.qZA(),a.qZA(),a.TgZ(23,"div",67),a.TgZ(24,"button",76),a.NdJ("click",function(){const l=a.CHM(e).$implicit;return a.oxw().salvarConfiguracacaoRobo(l)}),a._uU(25," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.configuracaoRobo.valorEntradaUsdt),a.xp6(4),a.Q6J("ngModel",e.configuracaoRobo.maximoRobosAtivos),a.xp6(2),a.Q6J("ngModel",e.configuracaoRobo.ativo)}}function _W(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",77),a._uU(2,"Salvar Binace API KEY"),a.qZA(),a.TgZ(3,"button",78),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",79),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",65),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,66),a.TgZ(11,"div",67),a.TgZ(12,"label"),a._uU(13,"API KEY"),a.qZA(),a.TgZ(14,"input",85),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiKey=i}),a.qZA(),a.qZA(),a.TgZ(15,"div",67),a.TgZ(16,"label"),a._uU(17,"API SECRET"),a.qZA(),a.TgZ(18,"input",85),a.NdJ("ngModelChange",function(i){return a.CHM(e),a.oxw().binanceModel.apiSecret=i}),a.qZA(),a.qZA(),a.TgZ(19,"div",67),a.TgZ(20,"button",76),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(21," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(14),a.Q6J("ngModel",e.binanceModel.apiKey),a.xp6(4),a.Q6J("ngModel",e.binanceModel.apiSecret)}}function yW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"strong"),a._uU(3),a.qZA(),a.qZA(),a.TgZ(4,"td"),a.TgZ(5,"span",89),a.TgZ(6,"strong"),a._uU(7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(8,"td"),a.TgZ(9,"button",90),a._uU(10," Comprar "),a.qZA(),a.TgZ(11,"button",91),a.NdJ("click",function(){const l=a.CHM(e).index;return a.oxw(2).removerAlerta(l)}),a._uU(12," excluir "),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=t.$implicit;a.xp6(3),a.Oqu(e.sinal.moeda),a.xp6(2),a.Q6J("ngClass","LONG"===e.sinal.tipo?"text-success":"text-danger"),a.xp6(2),a.Oqu(e.sinal.tipo)}}function vW(n,t){if(1&n){const e=a.EpF();a.TgZ(0,"div",63),a.TgZ(1,"h4",86),a._uU(2,"Alerta de entrada"),a.qZA(),a.TgZ(3,"button",78),a.NdJ("click",function(){return a.CHM(e).$implicit.dismiss("Cross click")}),a.TgZ(4,"span",79),a._uU(5,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(6,"div",65),a.TgZ(7,"div",5),a.TgZ(8,"div",5),a.TgZ(9,"div",5,66),a.TgZ(11,"table",87),a.YNc(12,yW,13,3,"tr",88),a.qZA(),a.TgZ(13,"div",67),a.TgZ(14,"button",76),a.NdJ("click",function(){return a.CHM(e).$implicit.close(!0)}),a._uU(15," salvar"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&n){const e=a.oxw();a.xp6(12),a.Q6J("ngForOf",e.alertaEntradasList)}}Kp.extend(jt);let bW=(()=>{class n{constructor(e,r,i,l,d){this.db=e,this.AuthService=r,this.modalService=i,this.config=l,this.http=d,this.title="binance-future-watcher-githubio",this.showPassword=!1,this.loading=!1,this.showFormNovoSinal=!1,this.BINANCE_FUTURE_ENDPOINT="https://fapi.binance.com/fapi/v1",this.PriceCoinMap={},this.PriceCoinList=[],this.storage=window.localStorage,this.canCopyClipboard=window.navigator.clipboard,this.sinaisList=[],this.sinaisMap={},this.coinCandleWatcherMap={},this.sinaisPinnedList=[],this.sinaisIDPinnedList=[],this.watchersEntradaList=[],this.sinaisBloqueadosList=[],this.myHeaders=new Headers,this.myInit=null,this.sinalModel={data:null,moeda:null,tipo:null,entradas:[],alert:!1,indexPricePosition:-1},this.entradaModel={valor:0,descricao:null,alcancado:!1,dataAlcancado:null},this.canSendNotification=!1,this._1second=1e3,this._5seconds=5*this._1second,this.sinaisCompradosMap={},this.editandoSinalIdx=-1,this.configuracaoRobo={id:null,valorEntradaUsdt:10,maximoRobosAtivos:10,ativo:!1,sinaisBloqueadosList:[]},this.binanceModel={apiKey:"",apiSecret:""},this.modalAberto=!1,this.alertaEntradasList=[],this.myHeaders.append("content-type","application/json"),this.myInit={method:"GET",headers:this.myHeaders}}ngOnInit(){"denied"===Notification.permission?Notification.requestPermission().then(e=>{this.canSendNotification="granted"===e}):"granted"===Notification.permission&&(this.canSendNotification=!0),setTimeout(()=>{this.AuthService.isLoggedIn?(this.startPriceWatcher(),this.loadSinaisList(),this.loadConfiguracaoRobo(),this.checkBinaceApiKey()):this.openModalLogin()},1e3)}startPriceWatcher(){const e=function(n=0,t=Lu.P){return(!(0,M_.k)(n)||n<0)&&(n=0),(!t||"function"!=typeof t.schedule)&&(t=Lu.P),new zn.y(e=>(e.add(t.schedule(ra,n,{subscriber:e,counter:0,period:n})),e))}(this._5seconds);this.populatePriceCoinMap(),e.subscribe(r=>this.populatePriceCoinMap())}populatePriceCoinMap(){this.BINANCE_FUTURE_ENDPOINT&&fetch(`${this.BINANCE_FUTURE_ENDPOINT}/ticker/price`,this.myInit).then(r=>{if(r.ok)return r.json()}).then(r=>{this.PriceCoinList=[];let i=[];r.forEach(d=>{this.PriceCoinMap[d.symbol]={price:d.price},i.push(d.symbol)});let l=this;i.sort(),i.forEach(d=>{l.PriceCoinList.push({symbol:d,price:this.PriceCoinMap[d].price})}),this.updatePricePositionOnSinais()})}updatePricePositionOnSinais(){this.sinaisList&&this.sinaisList.length>0&&(this.sinaisList.forEach((e,r)=>{let i=0;try{i=parseFloat(this.PriceCoinMap[e.moeda].price)}catch(l){}if(i){e.priceCoin=i;let l=-1,d=0;"LONG"===e.tipo?(d=(e.entradas[e.entradas.length-1].valor-e.entradas[0].valor)/100,e.priceCoinPercentage=i>e.entradas[0].valor?((i-e.entradas[0].valor)/d).toFixed(2):0):(d=(e.entradas[0].valor-e.entradas[e.entradas.length-1].valor)/100,e.priceCoinPercentage=i<e.entradas[0].valor?(100-(i-e.entradas[e.entradas.length-1].valor)/d).toFixed(2):0);for(let f=0;f<e.entradas.length;f++){let b=parseFloat(e.entradas[f].valor);if("LONG"===e.tipo){if(0==f||f===e.entradas.length-1){if(i<=b){l=f;break}if(f===e.entradas.length-1&&i>b){l=1e3;break}continue}if(i>=parseFloat(e.entradas[f-1].valor)&&i<=b){l=f;break}}else if("SHORT"===e.tipo){if(0==f||f===e.entradas.length-1){if(i>=b){l=f;break}if(f===e.entradas.length-1&&i<b){l=1e3;break}continue}if(i<=parseFloat(e.entradas[f-1].valor)&&i>=b){l=f;break}}}this.sinaisList[r].indexPricePosition=l;try{-1===this.sinaisBloqueadosList.indexOf(e.id)&&this.coinCandleWatcherMap[e.id].loadCandleList(e)}catch(f){}}}),this.sortWatcherList(),this.sortWatcherEntradaList())}sortWatcherEntradaList(){this.watchersEntradaList=[],this.sinaisList.forEach(r=>{r.indexPricePosition>=1&&this.watchersEntradaList.push(r)}),this.watchersEntradaList.sort((r,i)=>{let l=0;return l=r.indexPricePosition>0?r.indexPricePosition-i.indexPricePosition:-1,l||r.priceCoinPercentage-i.priceCoinPercentage})}castPrice(e){return parseFloat(e)}novoSinal(){let e=Kp().format("YYYY-MM-DD");this.editandoSinalIdx=-1,this.sinalModel={data:e,tipo:null,entradas:[]};let r=["Entrada","40%","60%","80%","100%"];for(let i=0;i<5;i++){let l=Object.assign({},this.entradaModel);l.descricao=r[i],this.sinalModel.entradas.push(l)}this.showFormNovoSinal=!0,window.scrollTo(0,0)}loadSinaisComprados(){this.sinaisCompradosObservable=this.db.object("/sinais-comprados/"+this.AuthService.userData.uid).valueChanges(),this.sinaisCompradosObservable.subscribe(r=>{if(r){try{for(let l in r)if(!this.sinaisCompradosMap[l]){let d=this.sinaisMap[l];new Notification("Binace watcher",{body:`Sinal comprado ${d.moeda}::${d.tipo}`,icon:"/assets/bot.png"})}}catch(l){}this.sinaisCompradosMap=r}else this.sinaisCompradosMap={}})}loadSinaisList(){this.sinaisFirebaseObservable=this.db.list("/sinais").valueChanges(),this.sinaisFirebaseObservable.subscribe(e=>{this.sinaisList=e,this.sinaisList&&this.sinaisList.length>0&&this.sinaisList.forEach(r=>{if(this.sinaisMap[r.id]=r,this.coinCandleWatcherMap[r.id]=new AN(this.http,this),r.entradas&&r.entradas.length>0){let i=parseFloat(r.entradas[0].valor),l=parseFloat(r.entradas[1].valor);if(r.sugestao="LONG"===r.tipo?i+(l-i)/4:i-(i-l)/4,r.sugestao){let d=r.entradas[r.entradas.length-1].valor,f=d.indexOf(".")-1,m=d.substr(f).length;r.sugestao=r.sugestao.toFixed(m)}}}),this.loadSinaisFavoritos(),this.updatePricePositionOnSinais()})}sortWatcherList(){this.sinaisList.sort((e,r)=>{let i=Kp(e.data).toDate().getTime(),l=Kp(r.data).toDate().getTime(),d=-10;i==l?d=0:i>l?d=-1:i<l&&(d=1);let f=e.moeda.localeCompare(r.moeda);return d||f})}salvarEntrada(){let e=Object.assign({},this.sinalModel);if(!e.moeda)return void alert("Moeda inv\xe1lida");if(e.moeda=e.moeda.toUpperCase().trim(),-1==e.moeda.indexOf("USDT")&&(e.moeda+="USDT"),!this.PriceCoinMap[e.moeda])return void alert("Moeda inv\xe1lida");if(!e.tipo)return void alert("Tipo inv\xe1lido");e.entradas.length>0&&e.entradas.forEach(i=>{i.valor=i.valor.trim()});let r=e.id?e.id:"_"+Math.random().toString().replace(".","");e.id=r,this.db.object("/sinais/"+r).set(e).then(()=>{this.showFormNovoSinal=!1})}updateEntrada(e){this.db.object("/sinais/"+e.id).set(e).then(()=>{})}editarSinal(e,r){this.editandoSinalIdx=r,this.sinalModel=Object.assign({},e),this.showFormNovoSinal=!0,window.scrollTo(0,0)}excluirSinal(e,r){var i=this;return(0,Ee.Z)(function*(){if(window.confirm("Realmente deseja excluir o sinal?")){try{i.coinCandleWatcherMap[e.id].stop(),delete i.coinCandleWatcherMap[e.id]}catch(l){}yield i.db.object("/sinais/"+e.id).remove()}})()}playAlert(){notificationAudio.play()}toggleAlcancado(e,r){r.alcancado=!r.alcancado||!r.alcancado,this.updateEntrada(e)}togglePinWatcher(e){var r=this;return(0,Ee.Z)(function*(){let i=r.sinaisIDPinnedList.indexOf(e.id);if(i>-1){r.sinaisIDPinnedList.splice(i,1);for(let d=0;d<r.sinaisPinnedList.length;d++)if(r.sinaisPinnedList[d].id===e.id){r.sinaisPinnedList.splice(d,1);break}}else r.sinaisIDPinnedList.push(e.id),r.sinaisPinnedList.push(e);r.db.list("/favoritos").set(r.AuthService.userData.uid,r.sinaisIDPinnedList).then(()=>{}).catch(d=>{console.error(d)})})()}loadSinaisFavoritos(){this.sinaisPinnedList=[],this.db.list("/favoritos/"+this.AuthService.userData.uid).query.once("value").then(e=>{let r=e.val();r&&(this.sinaisIDPinnedList=r,this.sinaisIDPinnedList.forEach(i=>{this.sinaisList.forEach(l=>{l.id===i&&this.sinaisPinnedList.push(l)})}))})}toggleSinalBloqueado(e){var r=this;return(0,Ee.Z)(function*(){r.configuracaoRobo.sinaisBloqueadosList||(r.configuracaoRobo.sinaisBloqueadosList=[]);let i=r.configuracaoRobo.sinaisBloqueadosList.indexOf(e.id);i>-1?r.configuracaoRobo.sinaisBloqueadosList.splice(i,1):r.configuracaoRobo.sinaisBloqueadosList.push(e.id),yield r.salvarConfiguracacaoRobo()})()}copyEntry(e){this.canCopyClipboard?window.navigator.clipboard.writeText(e.toString()).then(function(){window.toastr.success(":D",`Entrada ${e} copiada!`)},function(r){window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}):window.toastr.error("Erro","N\xe3o \xe9 poss\xedvel copiar a entrada")}openModalLogin(){this.config.backdrop="static",this.config.keyboard=!1,this.modalService.open(this.modalLogin,{centered:!0}).result.then(e=>{},e=>{})}sigin(e,r,i){this.AuthService.SignIn(e.trim(),r).then(()=>{this.startPriceWatcher(),this.loadSinaisList(),this.checkBinaceApiKey(),i&&i.close()}).catch(l=>{alert("Usu\xe1rio ou senha inv\xe1lido")})}submitSeach(e,r,i,l){13==e.keyCode&&this.sigin(r,i,l)}signOut(){this.AuthService.SignOut()}submitForm(e,r){13==r.keyCode&&e.submit()}loadConfiguracaoRobo(){var e;this.sinaisPinnedList=[],this.configuracaoRoboObservable=this.db.object("/configuracao-robo/"+this.AuthService.userData.uid).valueChanges(),null===(e=this.configuracaoRoboObservable)||void 0===e||e.subscribe(r=>{r&&(this.configuracaoRobo=r,this.configuracaoRobo.sinaisBloqueadosList?this.sinaisBloqueadosList=this.configuracaoRobo.sinaisBloqueadosList:(this.configuracaoRobo.sinaisBloqueadosList=[],this.configuracaoRobo.sinaisBloqueadosList=[]))})}openModalConfiguracaoRobo(){this.modalService.open(this.modalConfiguracaoRobo,{centered:!0}).result.then(e=>{},e=>{})}salvarConfiguracacaoRobo(e){var r=this;return(0,Ee.Z)(function*(){let i=Object.assign({},r.configuracaoRobo);i.valorEntradaUsdt=parseFloat(i.valorEntradaUsdt),i.maximoRobosAtivos=parseInt(i.maximoRobosAtivos),i.id=r.AuthService.userData.uid,yield r.db.object("/configuracao-robo/"+r.AuthService.userData.uid).set(i),e&&(window.toastr.success(":D","Configura\xe7\xe3o salva!"),e&&e.close())})()}checkBinaceApiKey(){let e=window.localStorage.getItem("apiKey"),r=window.localStorage.getItem("apiSecret");!e&&!r&&this.openModalBinanceApiKey()}openModalBinanceApiKey(){this.modalService.open(this.modalBinanceApiKey,{centered:!0}).result.then(e=>{e&&this.binanceModel.apiKey&&this.binanceModel.apiSecret&&(window.localStorage.setItem("apiKey",this.binanceModel.apiKey.trim()),window.localStorage.setItem("apiSecret",this.binanceModel.apiSecret.trim()),window.toastr.success("Chaves salvas!","Sucesso!"))},e=>{})}removerAlerta(e){this.alertaEntradasList.splice(e,1)}acionarAlerta(e){0===this.alertaEntradasList.filter(l=>l.id==e.id).length&&this.alertaEntradasList.splice(0,0,e),this.modalAberto||this.openModalAlertaEntrada(),this.playAlert(),window.document.hasFocus()||new Notification("Binace watcher",{body:`Poss\xedvel compra em ${e.sinal.moeda}::${e.sinal.tipo}`,icon:"/assets/bot.png"})}openModalAlertaEntrada(){this.config.backdrop="static",this.config.keyboard=!1,this.modalAberto=!0,this.modalService.open(this.modalAlertaEntrada,{centered:!0}).result.then(e=>{this.modalAberto=!1},e=>{})}}return n.\u0275fac=function(e){return new(e||n)(a.Y36(YM),a.Y36(vj),a.Y36(vU),a.Y36(xO),a.Y36(t3))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-root"]],viewQuery:function(e,r){if(1&e&&(a.Gf(Rq,5),a.Gf(kq,5),a.Gf(Pq,5),a.Gf(Oq,5)),2&e){let i;a.iGM(i=a.CRH())&&(r.modalLogin=i.first),a.iGM(i=a.CRH())&&(r.modalConfiguracaoRobo=i.first),a.iGM(i=a.CRH())&&(r.modalBinanceApiKey=i.first),a.iGM(i=a.CRH())&&(r.modalAlertaEntrada=i.first)}},decls:19,vars:6,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],[1,"container"],["class","text-center",4,"ngIf"],[4,"ngIf"],["role","main",1,"",2,"margin-top","100px"],[1,""],["class","col-md-8 col-lg-6",4,"ngIf"],["class","container",4,"ngIf"],["class","container mt-4",4,"ngIf"],["modalLogin",""],["modalConfiguracaoRobo",""],["modalBinanceApiKey",""],["modalAlertaEntrada",""],[1,"text-center"],[1,"btn","btn-success","my-2",3,"click"],[1,"btn","btn-link","text-white",3,"click"],[1,"fa","fa-cogs","fa-2x"],[1,"btn","btn-link","text-danger",3,"click"],[1,"fa","fa-sign-out","fa-2x"],[1,"col-md-8","col-lg-6"],[1,"mb-3"],["for","",1,"form-label","text-white"],["type","date","placeholder","First name","aria-label","First name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","","aria-label","First name",1,"form-control","text-uppercase",3,"ngModel","ngModelChange"],["aria-label","Default select example",1,"form-control","form-select",3,"ngModel","ngModelChange"],["value","LONG"],["value","SHORT"],["class","row",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"row"],[1,"col"],["type","text","placeholder","Valor","aria-label","Valor",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Descri\xe7\xe3o","aria-label","descri\xe7\xe3o",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-white"],[1,"btn","bt-sm","btn-outline-secondary","fa","fa-chevron-up",3,"click"],["divPinnedList",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass"],[1,"card-body"],[1,"float-right"],[1,"fa","clickable",3,"ngClass","click"],[1,"card-title"],["class","mr-2 fa fa-android text-success",4,"ngIf"],["title","Rob\xf4 bloqueado",1,"mr-2","clickable","fa",2,"color","gray",3,"ngClass","click"],[1,"card-subtitle","mb-2",3,"ngClass"],["class","alert alert-primary",4,"ngIf"],[1,"price-list"],["style"," ",4,"ngFor","ngForOf"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash"],[1,"mr-2","fa","fa-android","text-success"],[1,"alert","alert-primary"],[1,"clickable",3,"click"],["class","ml-4",4,"ngIf"],[1,"clickable","fa",3,"ngClass","click"],[1,"ml-4"],[1,"fa","fa-caret-right","text-success"],["divWatchersEntrada",""],["class","card m-1 col-md-4 col-lg-3 col-xl-3",3,"ngClass","id",4,"ngFor","ngForOf"],[1,"card","m-1","col-md-4","col-lg-3","col-xl-3",3,"ngClass","id"],[1,"container","mt-4"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],["formLogin",""],[1,"form-group"],["type","text","placeholder","Username","required","",1,"form-control"],["email",""],[1,"input-group"],["placeholder","Password","required","",1,"form-control",3,"type","keydown"],["userPassword",""],[1,"input-group-append"],[1,"input-group-text","clickable",3,"click"],[1,"fa",3,"ngClass"],["type","submit","value","Login",1,"btn","btn-primary",3,"click"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","text","placeholder","valorEntradaUsdt","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","maximoRobosAtivos","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-check","mt-3","mb-3"],["type","checkbox","value","","id","defaultCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","defaultCheck1",1,"form-check-label"],["type","text","placeholder","","required","",1,"form-control",3,"ngModel","ngModelChange"],["id","",1,"modal-title"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"btn","btn-button","btn-sm","btn-success"],[1,"btn","btn-button","btn-sm","btn-danger",3,"click"]],template:function(e,r){1&e&&(a.TgZ(0,"nav",0),a.TgZ(1,"div",1),a.YNc(2,Fq,3,0,"div",2),a.YNc(3,Lq,5,0,"div",3),a.qZA(),a.qZA(),a.TgZ(4,"main",4),a.TgZ(5,"section",5),a.TgZ(6,"div",1),a.YNc(7,Bq,26,4,"div",6),a.qZA(),a.YNc(8,Yq,7,2,"div",7),a.YNc(9,sW,7,2,"div",7),a.YNc(10,pW,5,1,"div",8),a.qZA(),a.YNc(11,gW,23,2,"ng-template",null,9,a.W1O),a.YNc(13,mW,26,3,"ng-template",null,10,a.W1O),a.YNc(15,_W,22,2,"ng-template",null,11,a.W1O),a.YNc(17,vW,16,1,"ng-template",null,12,a.W1O),a.qZA()),2&e&&(a.xp6(2),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(1),a.Q6J("ngIf",r.AuthService.isLoggedIn),a.xp6(4),a.Q6J("ngIf",r.showFormNovoSinal),a.xp6(1),a.Q6J("ngIf",r.sinaisPinnedList&&r.sinaisPinnedList.length>0),a.xp6(1),a.Q6J("ngIf",r.watchersEntradaList&&r.watchersEntradaList.length>0),a.xp6(1),a.Q6J("ngIf",r.sinaisList&&r.sinaisList.length>0))},directives:[Rr,bS,oB,cO,xS,gO,_O,zt,co,MS,YP],pipes:[iu],styles:[".text-white[_ngcontent-%COMP%]{color:#fff}.hidden[_ngcontent-%COMP%]{display:none}.text-red[_ngcontent-%COMP%]{color:#fff}.text-yellow[_ngcontent-%COMP%]{color:#ff0}.border-long[_ngcontent-%COMP%]{border-color:#28a745!important;border-width:10px}.clickable[_ngcontent-%COMP%]{cursor:pointer}.border-short[_ngcontent-%COMP%]{border-color:red;border-width:10px}.price-list[_ngcontent-%COMP%]{list-style:none;padding-left:10px}.shake-element[_ngcontent-%COMP%]{animation:shake .5s;animation-iteration-count:infinite}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,-2px) rotate(-1deg)}20%{transform:translate(-3px) rotate(1deg)}30%{transform:translate(3px,2px) rotate(0)}40%{transform:translate(1px,-1px) rotate(1deg)}50%{transform:translate(-1px,2px) rotate(-1deg)}60%{transform:translate(-3px,1px) rotate(0)}70%{transform:translate(3px,1px) rotate(-1deg)}80%{transform:translate(-1px,-1px) rotate(1deg)}90%{transform:translate(1px,2px) rotate(0)}to{transform:translate(1px,-2px) rotate(-1deg)}}.slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;width:100%;height:25px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s}.slider[_ngcontent-%COMP%]:hover{opacity:1}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:25px;height:25px;background:#04AA6D;cursor:pointer}.slider-square[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:24px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .15s ease-in-out}"]}),n})();class CW{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new EW(t,this.dueTime,this.scheduler))}}class EW extends cr.L{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(TW,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function TW(n){n.debouncedNext()}const o3="firebasestorage.googleapis.com",a3="storageBucket";class ni extends V.ZR{constructor(t,e){super($O(t),`Firebase Storage: ${e} (${$O(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ni.prototype)}_codeEquals(t){return $O(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function $O(n){return"storage/"+n}function HO(){return new ni("unknown","An unknown error occurred, please check the error payload for server response.")}function l3(){return new ni("canceled","User canceled the upload/download.")}function u3(){return new ni("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function u0(n){return new ni("invalid-argument",n)}function c3(){return new ni("app-deleted","The Firebase app was deleted.")}function d3(n){return new ni("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fE(n,t){return new ni("invalid-format","String does not match format '"+n+"': "+t)}function pE(n){throw new ni("internal-error","Internal error: "+n)}class Us{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=Us.makeFromUrl(t,e)}catch(i){return new Us(t,"")}if(""===r.path)return r;throw function(n){return new ni("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(ot){ot.path_=decodeURIComponent(ot.path)}const A=e.replace(/[.]/g,"\\."),it=[{regex:f,indices:{bucket:1,path:3},postModify:function(ot){"/"===ot.path.charAt(ot.path.length-1)&&(ot.path_=ot.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${e===o3?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let ot=0;ot<it.length;ot++){const Lt=it[ot],ln=Lt.regex.exec(t);if(ln){let ri=ln[Lt.indices.path];ri||(ri=""),r=new Us(ln[Lt.indices.bucket],ri),Lt.postModify(r);break}}if(null==r)throw function(n){return new ni("invalid-url","Invalid URL '"+n+"'.")}(t);return r}}class VW{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function qS(n){return"string"==typeof n||n instanceof String}function h3(n){return jO()&&n instanceof Blob}function jO(){return"undefined"!=typeof Blob}function GO(n,t,e,r){if(r<t)throw u0(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw u0(`Invalid value for '${n}'. Expected ${e} or less.`)}function sh(n,t,e){let r=t;return null==e&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function f3(n){const t=encodeURIComponent;let e="?";for(const r in n)n.hasOwnProperty(r)&&(e=e+(t(r)+"=")+t(n[r])+"&");return e=e.slice(0,-1),e}var mp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(mp||(mp={})),mp))();class GW{constructor(t,e,r,i,l,d,f,m,b,T,A){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=T,this.connectionFactory_=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,O)=>{this.resolve_=M,this.reject_=O,this.start_()})}start_(){const e=(r,i)=>{const l=this.resolve_,d=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function(n){return void 0!==n}(m)?l():l(m)}catch(m){d(m)}else if(null!==f){const m=HO();m.serverResponse=f.getErrorText(),d(this.errorCallback_?this.errorCallback_(f,m):m)}else d(i.canceled?this.appDelete_?c3():l3():new ni("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new WS(!1,null,!0)):this.backoffId_=function(n,t,e){let r=1,i=null,l=null,d=!1,f=0;function m(){return 2===f}let b=!1;function T(...be){b||(b=!0,t.apply(null,be))}function A(be){i=setTimeout(()=>{i=null,n(O,m())},be)}function M(){l&&clearTimeout(l)}function O(be,...Ge){if(b)return void M();if(be)return M(),void T.call(null,be,...Ge);if(m()||d)return M(),void T.call(null,be,...Ge);let it;r<64&&(r*=2),1===f?(f=2,it=0):it=1e3*(r+Math.random()),A(it)}let q=!1;function ue(be){q||(q=!0,M(),!b&&(null!==i?(be||(f=2),clearTimeout(i),A(0)):be||(f=1)))}return A(0),l=setTimeout(()=>{d=!0,ue(!0)},e),ue}((r,i)=>{if(i)return void r(!1,new WS(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const d=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const f=l.getErrorCode()===mp.NO_ERROR,m=l.getStatus();if(!f||this.isRetryStatusCode_(m)){const T=l.getErrorCode()===mp.ABORT;return void r(!1,new WS(!1,null,T))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new WS(b,l))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,i=-1!==[408,429].indexOf(t),l=-1!==this.additionalRetryCodes_.indexOf(t);return e||i||l}}class WS{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function JW(...n){const t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}if(jO())return new Blob(n);throw new ni("unsupported-environment","This browser doesn't seem to support creating Blobs")}const va={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qO{constructor(t,e){this.data=t,this.contentType=e||null}}function WO(n,t){switch(n){case va.RAW:return new qO(p3(t));case va.BASE64:case va.BASE64URL:return new qO(g3(n,t));case va.DATA_URL:return new qO(function(n){const t=new m3(n);return t.base64?g3(va.BASE64,t.rest):function(n){let t;try{t=decodeURIComponent(n)}catch(e){throw fE(va.DATA_URL,"Malformed data URL.")}return p3(t)}(t.rest)}(t),function(n){return new m3(n).contentType}(t))}throw HO()}function p3(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++e),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function g3(n,t){switch(n){case va.BASE64:{const i=-1!==t.indexOf("-"),l=-1!==t.indexOf("_");if(i||l)throw fE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case va.BASE64URL:{const i=-1!==t.indexOf("+"),l=-1!==t.indexOf("/");if(i||l)throw fE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function(n){return atob(n)}(t)}catch(i){throw fE(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class m3{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw fE(va.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;null!=r&&(this.base64=function(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}class fc{constructor(t,e){let r=0,i="";h3(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(h3(this.data_)){const i=function(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===i?null:new fc(i)}{const r=new Uint8Array(this.data_.buffer,t,e-t);return new fc(r,!0)}}static getBlob(...t){if(jO()){const e=t.map(r=>r instanceof fc?r.data_:r);return new fc(JW.apply(null,e))}{const e=t.map(d=>qS(d)?WO(va.RAW,d).data:d.data_);let r=0;e.forEach(d=>{r+=d.byteLength});const i=new Uint8Array(r);let l=0;return e.forEach(d=>{for(let f=0;f<d.length;f++)i[l++]=d[f]}),new fc(i,!0)}}uploadData(){return this.data_}}function ZO(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function _3(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function oZ(n,t){return t}class lo{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||oZ}}let ZS=null;function gE(){if(ZS)return ZS;const n=[];n.push(new lo("bucket")),n.push(new lo("generation")),n.push(new lo("metageneration")),n.push(new lo("name","fullPath",!0));const e=new lo("name");e.xform=function(l,d){return function(n){return!qS(n)||n.length<2?n:_3(n)}(d)},n.push(e);const i=new lo("size");return i.xform=function(l,d){return void 0!==d?Number(d):d},n.push(i),n.push(new lo("timeCreated")),n.push(new lo("updated")),n.push(new lo("md5Hash",null,!0)),n.push(new lo("cacheControl",null,!0)),n.push(new lo("contentDisposition",null,!0)),n.push(new lo("contentEncoding",null,!0)),n.push(new lo("contentLanguage",null,!0)),n.push(new lo("contentType",null,!0)),n.push(new lo("metadata","customMetadata",!0)),ZS=n,ZS}function y3(n,t,e){const r=ZO(t);return null===r?null:function(n,t,e){const r={type:"file"},i=e.length;for(let l=0;l<i;l++){const d=e[l];r[d.local]=d.xform(r,t[d.server])}return function(n,t){Object.defineProperty(n,"ref",{get:function(){const l=new Us(n.bucket,n.fullPath);return t._makeStorageReference(l)}})}(r,n),r}(n,r,e)}function zO(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const l=t[i];l.writable&&(e[l.server]=n[l.local])}return JSON.stringify(e)}const v3="prefixes";class pc{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function gc(n){if(!n)throw HO()}function zS(n,t){return function(r,i){const l=y3(n,i,t);return gc(null!==l),l}}function c0(n){return function(e,r){let i;return i=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?new ni("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ni("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(n){return new ni("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function(n){return new ni("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function mE(n){const t=c0(n);return function(r,i){let l=t(r,i);return 404===r.getStatus()&&(l=function(n){return new ni("object-not-found","Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function w3(n,t,e){const i=sh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new pc(i,"GET",zS(n,e),d);return f.errorHandler=mE(t),f}function gZ(n,t,e,r,i){const l={};l.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(l.delimiter=e),r&&(l.pageToken=r),i&&(l.maxResults=i);const f=sh(t.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,T=new pc(f,"GET",function(n,t){return function(r,i){const l=function(n,t,e){const r=ZO(e);return null===r?null:function(n,t,e){const r={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[v3])for(const i of e[v3]){const l=i.replace(/\/$/,""),d=n._makeStorageReference(new Us(t,l));r.prefixes.push(d)}if(e.items)for(const i of e.items){const l=n._makeStorageReference(new Us(t,i.name));r.items.push(l)}return r}(n,t,r)}(n,t,i);return gc(null!==l),l}}(n,t.bucket),b);return T.urlParams=l,T.errorHandler=c0(t),T}function E3(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=function(n,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class YS{constructor(t,e,r,i){this.current=t,this.total=e,this.finalized=!!r,this.metadata=i||null}}function YO(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){gc(!1)}return gc(!!e&&-1!==(t||["active"]).indexOf(e)),e}const EZ={STATE_CHANGED:"state_changed"},uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function KO(n){switch(n){case"running":case"pausing":case"canceling":return uo.RUNNING;case"paused":return uo.PAUSED;case"success":return uo.SUCCESS;case"canceled":return uo.CANCELED;case"error":default:return uo.ERROR}}class TZ{constructor(t,e,r){if(function(n){return"function"==typeof n}(t)||null!=e||null!=r)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=r?r:void 0;else{const l=t;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function d0(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class IZ extends class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=mp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=mp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw pE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw pE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function nu(){return new IZ}class A3{constructor(t,e,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=r,this._mappings=gE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,r])=>{switch(this._state){case"running":t(e,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d=E3(t,r,i),f={name:d.fullPath},m=sh(l,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":d.contentType,"Content-Type":"application/json; charset=utf-8"},A=zO(d,e),q=new pc(m,"POST",function(ue){let be;YO(ue);try{be=ue.getResponseHeader("X-Goog-Upload-URL")}catch(Ge){gc(!1)}return gc(qS(be)),be},n.maxUploadRetryTime);return q.urlParams=f,q.headers=T,q.body=A,q.errorHandler=c0(t),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,nu,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,r)=>{const i=function(n,t,e,r){const m=new pc(e,"POST",function(b){const T=YO(b,["active","final"]);let A=null;try{A=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){gc(!1)}A||gc(!1);const M=Number(A);return gc(!isNaN(M)),new YS(M,r.size(),"final"===T)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=c0(t),m}(this._ref.storage,this._ref._location,t,this._blob),l=this._ref.storage._makeRequest(i,nu,e,r);this._request=l,l.getPromise().then(d=>{d=d,this._request=void 0,this._updateProgress(d.current),this._needToFetchStatus=!1,d.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new YS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let d;try{d=function(n,t,e,r,i,l,d,f){const m=new YS(0,0);if(d?(m.current=d.current,m.total=d.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw new ni("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const b=m.total-m.current;let T=b;i>0&&(T=Math.min(T,i));const A=m.current,q={"X-Goog-Upload-Command":T===b?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},ue=r.slice(A,A+T);if(null===ue)throw u3();const it=new pc(e,"POST",function(ot,Lt){const ln=YO(ot,["active","final"]),zr=m.current+T,ri=r.size();let XO;return XO="final"===ln?zS(t,l)(ot,Lt):null,new YS(zr,ri,"final"===ln,XO)},t.maxUploadRetryTime);return it.headers=q,it.body=ue.uploadData(),it.progressCallback=f||null,it.errorHandler=c0(n),it}(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(d,nu,i,l);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const r=w3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,nu,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const r=function(n,t,e,r,i){const l=t.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"},m=function(){let it="";for(let ot=0;ot<2;ot++)it+=Math.random().toString().slice(2);return it}();d["Content-Type"]="multipart/related; boundary="+m;const b=E3(t,r,i),T=zO(b,e),O=fc.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===O)throw u3();const q={name:b.fullPath},ue=sh(l,n.host,n._protocol),Ge=n.maxUploadRetryTime,Ke=new pc(ue,"POST",zS(n,e),Ge);return Ke.urlParams=q,Ke.headers=d,Ke.body=O.uploadData(),Ke.errorHandler=c0(t),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,nu,t,e);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=l3(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=KO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,r,i){const l=new TZ(e||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(KO(this._state)){case uo.SUCCESS:d0(this._resolve.bind(null,this.snapshot))();break;case uo.CANCELED:case uo.ERROR:d0(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(KO(this._state)){case uo.RUNNING:case uo.PAUSED:t.next&&d0(t.next.bind(t,this.snapshot))();break;case uo.SUCCESS:t.complete&&d0(t.complete.bind(t))();break;case uo.CANCELED:case uo.ERROR:t.error&&d0(t.error.bind(t,this._error))();break;default:t.error&&d0(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Ym{constructor(t,e){this._service=t,this._location=e instanceof Us?e:Us.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Ym(t,e)}get root(){const t=new Us(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _3(this._location.path)}get storage(){return this._service}get parent(){const t=function(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Us(this._location.bucket,t);return new Ym(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw d3(t)}}function N3(n,t,e){return JO.apply(this,arguments)}function JO(){return(JO=(0,Ee.Z)(function*(n,t,e){const i=yield x3(n,{pageToken:e});t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&(yield N3(n,t,i.nextPageToken))})).apply(this,arguments)}function x3(n,t){null!=t&&"number"==typeof t.maxResults&&GO("options.maxResults",1,1e3,t.maxResults);const e=t||{},r=gZ(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(r,nu)}function VZ(n){n._throwIfRoot("getDownloadURL");const t=function(n,t,e){const i=sh(t.fullServerUrl(),n.host,n._protocol),d=n.maxOperationRetryTime,f=new pc(i,"GET",function(n,t){return function(r,i){const l=y3(n,i,t);return gc(null!==l),function(n,t,e,r){const i=ZO(t);if(null===i||!qS(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const d=encodeURIComponent;return l.split(",").map(b=>{const A=n.fullPath;return sh("/b/"+d(n.bucket)+"/o/"+d(A),e,r)+f3({alt:"media",token:b})})[0]}(l,i,n.host,n._protocol)}}(n,e),d);return f.errorHandler=mE(t),f}(n.storage,n._location,gE());return n.storage.makeRequestWithTokens(t,nu).then(e=>{if(null===e)throw new ni("no-download-url","The given file does not have any download URLs.");return e})}function M3(n,t){const e=function(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),r=new Us(n._location.bucket,e);return new Ym(n.storage,r)}function R3(n,t){if(n instanceof QO){const e=n;if(null==e._bucket)throw new ni("no-default-bucket","No default bucket found. Did you set the '"+a3+"' property when initializing the app?");const r=new Ym(e,e._bucket);return null!=t?R3(r,t):r}return void 0!==t?M3(n,t):n}function HZ(n,t){if(t&&function(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof QO)return function(n,t){return new Ym(n,t)}(n,t);throw u0("To use ref(service, url), the first argument must be a Storage instance.")}return R3(n,t)}function k3(n,t){const e=null==t?void 0:t[a3];return null==e?null:Us.makeFromBucketSpec(e,n)}class QO{constructor(t,e,r,i,l){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=o3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Us.makeFromBucketSpec(i,this._host):k3(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Us.makeFromBucketSpec(this._url,t):k3(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){GO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){GO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ee.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const r=yield e.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ee.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Ym(this,t)}_makeRequest(t,e,r,i){if(this._deleted)return new VW(c3());{const l=function(n,t,e,r,i,l){const d=f3(n.urlParams),f=n.url+d,m=Object.assign({},n.headers);return function(n,t){t&&(n["X-Firebase-GMPID"]=t)}(m,t),function(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(m,e),function(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(m,l),function(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(m,r),new GW(f,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(t,this._appId,r,i,e,this._firebaseVersion);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(t,e){var r=this;return(0,Ee.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(t,e,i,l).getPromise()})()}}const P3="@firebase/storage";function L3(n,t){return HZ(n=(0,V.m9)(n),t)}(0,_s._registerComponent)(new Ka.wA("storage",function(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new QO(e,r,i,t,_s.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,_s.registerVersion)(P3,"0.9.5",""),(0,_s.registerVersion)(P3,"0.9.5","esm2017");class KS{constructor(t,e,r){this._delegate=t,this.task=e,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class V3{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new KS(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(r=>{if(t)return t(new KS(r,this,this._ref))},e)}on(t,e,r,i){let l;return e&&(l="function"==typeof e?d=>e(new KS(d,this,this._ref)):{next:e.next?d=>e.next(new KS(d,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,l,r||void 0,i||void 0)}}class B3{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new oh(t,this._service))}get items(){return this._delegate.items.map(t=>new oh(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class oh{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function(n,t){return M3(n,t)}(this._delegate,t);return new oh(e,this.storage)}get root(){return new oh(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new oh(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new V3(function(n,t,e){return function(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new A3(n,new fc(t),e)}(n=(0,V.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=va.RAW,r){this._throwIfRoot("putString");const i=WO(e,t),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new V3(new A3(this._delegate,new fc(i.data,!0),l),this)}listAll(){return function(n){return function(n){const t={prefixes:[],items:[]};return N3(n,t).then(()=>t)}(n=(0,V.m9)(n))}(this._delegate).then(t=>new B3(t,this.storage))}list(t){return function(n,t){return x3(n=(0,V.m9)(n),t)}(this._delegate,t||void 0).then(e=>new B3(e,this.storage))}getMetadata(){return function(n){return function(n){n._throwIfRoot("getMetadata");const t=w3(n.storage,n._location,gE());return n.storage.makeRequestWithTokens(t,nu)}(n=(0,V.m9)(n))}(this._delegate)}updateMetadata(t){return function(n,t){return function(n,t){n._throwIfRoot("updateMetadata");const e=function(n,t,e,r){const l=sh(t.fullServerUrl(),n.host,n._protocol),f=zO(e,r),b=n.maxOperationRetryTime,T=new pc(l,"PATCH",zS(n,r),b);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=f,T.errorHandler=mE(t),T}(n.storage,n._location,t,gE());return n.storage.makeRequestWithTokens(e,nu)}(n=(0,V.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function(n){return VZ(n=(0,V.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(n){return function(n){n._throwIfRoot("deleteObject");const t=function(n,t){const r=sh(t.fullServerUrl(),n.host,n._protocol),f=new pc(r,"DELETE",function(m,b){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=mE(t),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,nu)}(n=(0,V.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw d3(t)}}class U3{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if($3(t))throw u0("ref() expected a child path but got a URL, use refFromURL instead.");return new oh(L3(this._delegate,t),this)}refFromURL(t){if(!$3(t))throw u0("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Us.makeFromUrl(t,this._delegate.host)}catch(e){throw u0("refFromUrl() expected a valid full URL but got an invalid one.")}return new oh(L3(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,r={}){!function(n,t,e,r={}){!function(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,V.Sg)(i,n.app.options.projectId))}(n,t,e,r)}(this._delegate,t,e,r)}}function $3(n){return/^[A-Za-z]+:\/\//.test(n)}function i7(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:t});return new U3(e,r)}function H3(n){const t=function(n){return new zn.y(t=>{const e=d=>t.next(d);e(n.snapshot);const l=n.on("state_changed",e);return n.then(d=>{e(d),t.complete()},d=>{e(n.snapshot),(d=>{t.error(d)})(d)}),function(){l()}}).pipe(function(n,t=Lu.P){return e=>e.lift(new CW(n,t))}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,ct.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function JS(n){return{getDownloadURL:()=>(0,dt.of)(void 0).pipe(Dn.fc,sr(()=>n.getDownloadURL()),Dn.iC),getMetadata:()=>(0,dt.of)(void 0).pipe(Dn.fc,sr(()=>n.getMetadata()),Dn.iC),delete:()=>(0,Qt.D)(n.delete()),child:t=>JS(n.child(t)),updateMetadata:t=>(0,Qt.D)(n.updateMetadata(t)),put:(t,e)=>H3(n.put(t,e)),putString:(t,e,r)=>H3(n.putString(t,e,r)),list:t=>(0,Qt.D)(n.list(t)),listAll:()=>(0,Qt.D)(n.listAll())}}!function(n){const t={TaskState:uo,TaskEvent:EZ,StringFormat:va,Storage:U3,Reference:oh};n.INTERNAL.registerComponent(new Ka.wA("storage-compat",i7,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.13")}(O_.Z);const a7=new a.OlP("angularfire2.storageBucket"),l7=new a.OlP("angularfire2.storage.maxUploadRetryTime"),u7=new a.OlP("angularfire2.storage.maxOperationRetryTime"),c7=new a.OlP("angularfire2.storage.use-emulator");let d7=(()=>{class n{constructor(e,r,i,l,d,f,m,b,T,A){const M=(0,vi.on)(e,d,r);this.storage=(0,vi.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const O=d.runOutsideAngular(()=>M.storage(i||void 0)),q=T;return q&&O.useEmulator(...q),m&&O.setMaxUploadRetryTime(m),b&&O.setMaxOperationRetryTime(b),O},[m,b])}ref(e){return JS(this.storage.ref(e))}refFromURL(e){return JS(this.storage.refFromURL(e))}upload(e,r,i){return JS(this.storage.ref(e)).put(r,i)}}return n.\u0275fac=function(e){return new(e||n)(a.LFG(vi.Dh),a.LFG(vi.xv,8),a.LFG(a7,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(Dn.HU),a.LFG(l7,8),a.LFG(u7,8),a.LFG(c7,8),a.LFG($g,8))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),h7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({}),n})(),f7=(()=>{class n{constructor(){Yw.Z.registerVersion("angularfire",Dn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({providers:[d7],imports:[h7]}),n})();const p7={apiKey:"AIzaSyBtM7cE86rnFziMJRWOgI6Btf2WbOFj5vE",authDomain:"binance-watcher-4ca0e.firebaseapp.com",databaseURl:"https://binance-watcher-4ca0e-default-rtdb.firebaseio.com/",projectId:"binance-watcher-4ca0e",storageBucket:"binance-watcher-4ca0e.appspot.com",messagingSenderId:"585627053132",appId:"1:585627053132:web:273c98cb792fe3e2d818e9"};let g7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=a.oAB({type:n,bootstrap:[bW]}),n.\u0275inj=a.cJS({providers:[],imports:[[Tp,IN,PB,Mq,vi.hO.initializeApp(p7),yj,LM,f7]]}),n})();(0,a.G48)(),Pa().bootstrapModule(g7).catch(n=>console.error(n))},3394:(st,we,B)=>{"use strict";B.d(we,{Z:()=>fe});var a=B(3854),G=B(3910),F=B(8026),se=B(5422);class ae{constructor(Re,oe){this._delegate=Re,this.firebase=oe,(0,F._addComponent)(Re,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=Re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this._delegate.automaticDataCollectionEnabled=Re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Re=>{this._delegate.checkDestroyed(),Re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Re,oe=F._DEFAULT_ENTRY_NAME){var pe;this._delegate.checkDestroyed();const Se=this._delegate.container.getProvider(Re);return!Se.isInitialized()&&"EXPLICIT"===(null===(pe=Se.getComponent())||void 0===pe?void 0:pe.instantiationMode)&&Se.initialize(),Se.getImmediate({identifier:oe})}_removeServiceInstance(Re,oe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Re).clearInstance(oe)}_addComponent(Re){(0,F._addComponent)(this._delegate,Re)}_addOrOverwriteComponent(Re){(0,F._addOrOverwriteComponent)(this._delegate,Re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function Q(){const de=function(de){const Re={},oe={__esModule:!0,initializeApp:function(ft,Xe={}){const ke=F.initializeApp(ft,Xe);if((0,a.r3)(Re,ke.name))return Re[ke.name];const Ie=new de(ke,oe);return Re[ke.name]=Ie,Ie},app:Se,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function(ft){const Xe=ft.name,ke=Xe.replace("-compat","");if(F._registerComponent(ft)&&"PUBLIC"===ft.type){const Ie=(je=Se())=>{if("function"!=typeof je[ke])throw he.create("invalid-app-argument",{appName:Xe});return je[ke]()};void 0!==ft.serviceProps&&(0,a.ZB)(Ie,ft.serviceProps),oe[ke]=Ie,de.prototype[ke]=function(...je){return this._getService.bind(this,Xe).apply(this,ft.multipleInstances?je:[])}}return"PUBLIC"===ft.type?oe[ke]:null},removeApp:function(ft){delete Re[ft]},useAsService:function(ft,Xe){return"serverAuth"===Xe?null:Xe},modularAPIs:F}};function Se(ft){if(!(0,a.r3)(Re,ft=ft||F._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:ft});return Re[ft]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(Re).map(ft=>Re[ft])}}),Se.App=de,oe}(ae);return de.INTERNAL=Object.assign(Object.assign({},de.INTERNAL),{createFirebaseNamespace:Q,extendNamespace:function(oe){(0,a.ZB)(de,oe)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),de}(),z=new se.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const de=self.firebase.SDK_VERSION;de&&de.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const fe=U;(0,F.registerVersion)("@firebase/app-compat","0.1.22",undefined)},8026:(st,we,B)=>{"use strict";B.r(we),B.d(we,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>ji,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>Dr,_addOrOverwriteComponent:()=>gi,_apps:()=>qt,_clearComponents:()=>dn,_components:()=>yt,_getProvider:()=>wt,_registerComponent:()=>Kn,_removeServiceInstance:()=>rr,deleteApp:()=>pr,getApp:()=>fr,getApps:()=>Le,initializeApp:()=>ii,onLog:()=>bn,registerVersion:()=>at,setLogLevel:()=>Jn});var a=B(8239),G=B(3910),F=B(5422),se=B(3854);class ae{constructor(xe){this.container=xe}getPlatformInfoString(){return this.container.getProviders().map(ut=>{if(function(Ze){const xe=Ze.getComponent();return"VERSION"===(null==xe?void 0:xe.type)}(ut)){const Et=ut.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(ut=>ut).join(" ")}}const he="@firebase/app",X="0.7.21",Q=new F.Yd("@firebase/app"),Kt="[DEFAULT]",Mn={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},qt=new Map,yt=new Map;function Dr(Ze,xe){try{Ze.container.addComponent(xe)}catch(ut){Q.debug(`Component ${xe.name} failed to register with FirebaseApp ${Ze.name}`,ut)}}function gi(Ze,xe){Ze.container.addOrOverwriteComponent(xe)}function Kn(Ze){const xe=Ze.name;if(yt.has(xe))return Q.debug(`There were multiple attempts to register component ${xe}.`),!1;yt.set(xe,Ze);for(const ut of qt.values())Dr(ut,Ze);return!0}function wt(Ze,xe){const ut=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return ut&&ut.triggerHeartbeat(),Ze.container.getProvider(xe)}function rr(Ze,xe,ut=Kt){wt(Ze,xe).clearInstance(ut)}function dn(){yt.clear()}const hn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Bn{constructor(xe,ut,Et){this._isDeleted=!1,this._options=Object.assign({},xe),this._config=Object.assign({},ut),this._name=ut.name,this._automaticDataCollectionEnabled=ut.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(xe){this._isDeleted=xe}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const ji="9.6.11";function ii(Ze,xe={}){"object"!=typeof xe&&(xe={name:xe});const ut=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},xe),Et=ut.name;if("string"!=typeof Et||!Et)throw hn.create("bad-app-name",{appName:String(Et)});const kt=qt.get(Et);if(kt){if((0,se.vZ)(Ze,kt.options)&&(0,se.vZ)(ut,kt.config))return kt;throw hn.create("duplicate-app",{appName:Et})}const Jt=new G.H0(Et);for(const Y of yt.values())Jt.addComponent(Y);const J=new Bn(Ze,ut,Jt);return qt.set(Et,J),J}function fr(Ze=Kt){const xe=qt.get(Ze);if(!xe)throw hn.create("no-app",{appName:Ze});return xe}function Le(){return Array.from(qt.values())}function pr(Ze){return lr.apply(this,arguments)}function lr(){return(lr=(0,a.Z)(function*(Ze){const xe=Ze.name;qt.has(xe)&&(qt.delete(xe),yield Promise.all(Ze.container.getProviders().map(ut=>ut.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function at(Ze,xe,ut){var Et;let kt=null!==(Et=Mn[Ze])&&void 0!==Et?Et:Ze;ut&&(kt+=`-${ut}`);const Jt=kt.match(/\s|\//),J=xe.match(/\s|\//);if(Jt||J){const Y=[`Unable to register library "${kt}" with version "${xe}":`];return Jt&&Y.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),Jt&&J&&Y.push("and"),J&&Y.push(`version name "${xe}" contains illegal characters (whitespace or "/")`),void Q.warn(Y.join(" "))}Kn(new G.wA(`${kt}-version`,()=>({library:kt,version:xe}),"VERSION"))}function bn(Ze,xe){if(null!==Ze&&"function"!=typeof Ze)throw hn.create("invalid-log-argument");(0,F.Am)(Ze,xe)}function Jn(Ze){(0,F.Ub)(Ze)}const jr="firebase-heartbeat-store";let gr=null;function Un(){return gr||(gr=(0,se.X3)("firebase-heartbeat-database",1,(Ze,xe)=>{switch(xe){case 0:Ze.createObjectStore(jr)}}).catch(Ze=>{throw hn.create("storage-open",{originalErrorMessage:Ze.message})})),gr}function yn(){return(yn=(0,a.Z)(function*(Ze){try{return(yield Un()).transaction(jr).objectStore(jr).get(Gi(Ze))}catch(xe){throw hn.create("storage-get",{originalErrorMessage:xe.message})}})).apply(this,arguments)}function ze(Ze,xe){return mt.apply(this,arguments)}function mt(){return(mt=(0,a.Z)(function*(Ze,xe){try{const Et=(yield Un()).transaction(jr,"readwrite");return yield Et.objectStore(jr).put(xe,Gi(Ze)),Et.complete}catch(ut){throw hn.create("storage-set",{originalErrorMessage:ut.message})}})).apply(this,arguments)}function Gi(Ze){return`${Ze.name}!${Ze.options.appId}`}class At{constructor(xe){this.container=xe,this._heartbeatsCache=null;const ut=this.container.getProvider("app").getImmediate();this._storage=new on(ut),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var xe=this;return(0,a.Z)(function*(){const Et=xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=Ir();if(null===xe._heartbeatsCache&&(xe._heartbeatsCache=yield xe._heartbeatsCachePromise),xe._heartbeatsCache.lastSentHeartbeatDate!==kt&&!xe._heartbeatsCache.heartbeats.some(Jt=>Jt.date===kt))return xe._heartbeatsCache.heartbeats.push({date:kt,agent:Et}),xe._heartbeatsCache.heartbeats=xe._heartbeatsCache.heartbeats.filter(Jt=>{const J=new Date(Jt.date).valueOf();return Date.now()-J<=2592e6}),xe._storage.overwrite(xe._heartbeatsCache)})()}getHeartbeatsHeader(){var xe=this;return(0,a.Z)(function*(){if(null===xe._heartbeatsCache&&(yield xe._heartbeatsCachePromise),null===xe._heartbeatsCache||0===xe._heartbeatsCache.heartbeats.length)return"";const ut=Ir(),{heartbeatsToSend:Et,unsentEntries:kt}=function(Ze,xe=1024){const ut=[];let Et=Ze.slice();for(const kt of Ze){const Jt=ut.find(J=>J.agent===kt.agent);if(Jt){if(Jt.dates.push(kt.date),vt(ut)>xe){Jt.dates.pop();break}}else if(ut.push({agent:kt.agent,dates:[kt.date]}),vt(ut)>xe){ut.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:ut,unsentEntries:Et}}(xe._heartbeatsCache.heartbeats),Jt=(0,se.L)(JSON.stringify({version:2,heartbeats:Et}));return xe._heartbeatsCache.lastSentHeartbeatDate=ut,kt.length>0?(xe._heartbeatsCache.heartbeats=kt,yield xe._storage.overwrite(xe._heartbeatsCache)):(xe._heartbeatsCache.heartbeats=[],xe._storage.overwrite(xe._heartbeatsCache)),Jt})()}}function Ir(){return(new Date).toISOString().substring(0,10)}class on{constructor(xe){this.app=xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var xe=this;return(0,a.Z)(function*(){return(yield xe._canUseIndexedDBPromise)&&(yield function(Ze){return yn.apply(this,arguments)}(xe.app))||{heartbeats:[]}})()}overwrite(xe){var ut=this;return(0,a.Z)(function*(){var Et;if(yield ut._canUseIndexedDBPromise){const Jt=yield ut.read();return ze(ut.app,{lastSentHeartbeatDate:null!==(Et=xe.lastSentHeartbeatDate)&&void 0!==Et?Et:Jt.lastSentHeartbeatDate,heartbeats:xe.heartbeats})}})()}add(xe){var ut=this;return(0,a.Z)(function*(){var Et;if(yield ut._canUseIndexedDBPromise){const Jt=yield ut.read();return ze(ut.app,{lastSentHeartbeatDate:null!==(Et=xe.lastSentHeartbeatDate)&&void 0!==Et?Et:Jt.lastSentHeartbeatDate,heartbeats:[...Jt.heartbeats,...xe.heartbeats]})}})()}}function vt(Ze){return(0,se.L)(JSON.stringify({version:2,heartbeats:Ze})).length}Kn(new G.wA("platform-logger",xe=>new ae(xe),"PRIVATE")),Kn(new G.wA("heartbeat",xe=>new At(xe),"PRIVATE")),at(he,X,""),at(he,X,"esm2017"),at("fire-js","")},3910:(st,we,B)=>{"use strict";B.d(we,{wA:()=>F,H0:()=>X,zt:()=>ae});var a=B(8239),G=B(3854);class F{constructor(U,z,H){this.name=U,this.instanceFactory=z,this.type=H,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const se="[DEFAULT]";class ae{constructor(U,z){this.name=U,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const z=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has(z)){const H=new G.BH;if(this.instancesDeferred.set(z,H),this.isInitialized(z)||this.shouldAutoInitialize())try{const ce=this.getOrInitializeService({instanceIdentifier:z});ce&&H.resolve(ce)}catch(ce){}}return this.instancesDeferred.get(z).promise}getImmediate(U){var z;const H=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),ce=null!==(z=null==U?void 0:U.optional)&&void 0!==z&&z;if(!this.isInitialized(H)&&!this.shouldAutoInitialize()){if(ce)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:H})}catch(Me){if(ce)return null;throw Me}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:se})}catch(z){}for(const[z,H]of this.instancesDeferred.entries()){const ce=this.normalizeInstanceIdentifier(z);try{const Me=this.getOrInitializeService({instanceIdentifier:ce});H.resolve(Me)}catch(Me){}}}}clearInstance(U=se){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,a.Z)(function*(){const z=Array.from(U.instances.values());yield Promise.all([...z.filter(H=>"INTERNAL"in H).map(H=>H.INTERNAL.delete()),...z.filter(H=>"_delete"in H).map(H=>H._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=se){return this.instances.has(U)}getOptions(U=se){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:z={}}=U,H=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(H))throw Error(`${this.name}(${H}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ce=this.getOrInitializeService({instanceIdentifier:H,options:z});for(const[Me,fe]of this.instancesDeferred.entries())H===this.normalizeInstanceIdentifier(Me)&&fe.resolve(ce);return ce}onInit(U,z){var H;const ce=this.normalizeInstanceIdentifier(z),Me=null!==(H=this.onInitCallbacks.get(ce))&&void 0!==H?H:new Set;Me.add(U),this.onInitCallbacks.set(ce,Me);const fe=this.instances.get(ce);return fe&&U(fe,ce),()=>{Me.delete(U)}}invokeOnInitCallbacks(U,z){const H=this.onInitCallbacks.get(z);if(H)for(const ce of H)try{ce(U,z)}catch(Me){}}getOrInitializeService({instanceIdentifier:U,options:z={}}){let H=this.instances.get(U);if(!H&&this.component&&(H=this.component.instanceFactory(this.container,{instanceIdentifier:(Q=U,Q===se?void 0:Q),options:z}),this.instances.set(U,H),this.instancesOptions.set(U,z),this.invokeOnInitCallbacks(H,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,H)}catch(ce){}var Q;return H||null}normalizeInstanceIdentifier(U=se){return this.component?this.component.multipleInstances?U:se:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class X{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const z=this.getProvider(U.name);if(z.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);z.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const z=new ae(U,this);return this.providers.set(U,z),z}getProviders(){return Array.from(this.providers.values())}}},5422:(st,we,B)=>{"use strict";B.d(we,{in:()=>G,Yd:()=>he,Ub:()=>X,Am:()=>Q});const a=[];var G=(()=>{return(U=G||(G={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",G;var U})();const F={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},se=G.INFO,ae={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ee=(U,z,...H)=>{if(z<U.logLevel)return;const ce=(new Date).toISOString(),Me=ae[z];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Me](`[${ce}]  ${U.name}:`,...H)};class he{constructor(z){this.name=z,this._logLevel=se,this._logHandler=ee,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in G))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?F[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...z),this._logHandler(this,G.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...z),this._logHandler(this,G.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,G.INFO,...z),this._logHandler(this,G.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,G.WARN,...z),this._logHandler(this,G.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...z),this._logHandler(this,G.ERROR,...z)}}function X(U){a.forEach(z=>{z.setLogLevel(U)})}function Q(U,z){for(const H of a){let ce=null;z&&z.level&&(ce=F[z.level]),H.userLogHandler=null===U?null:(Me,fe,...de)=>{const Re=de.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(pe){return null}}).filter(oe=>oe).join(" ");fe>=(null!=ce?ce:Me.logLevel)&&U({level:G[fe].toLowerCase(),message:Re,args:de,type:Me.name})}}}},8239:(st,we,B)=>{"use strict";function a(F,se,ae,ee,he,X,Q){try{var U=F[X](Q),z=U.value}catch(H){return void ae(H)}U.done?se(z):Promise.resolve(z).then(ee,he)}function G(F){return function(){var se=this,ae=arguments;return new Promise(function(ee,he){var X=F.apply(se,ae);function Q(z){a(X,ee,he,Q,U,"next",z)}function U(z){a(X,ee,he,Q,U,"throw",z)}Q(void 0)})}}B.d(we,{Z:()=>G})}},st=>{st(st.s=1437)}]);